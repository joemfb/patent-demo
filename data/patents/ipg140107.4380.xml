<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625452-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625452</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13233858</doc-number>
<date>20110915</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<us-term-of-grant>
<us-term-extension>161</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>12</main-group>
<subgroup>26</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>12</main-group>
<subgroup>28</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>370252</main-classification>
<further-classification>370389</further-classification>
</classification-national>
<invention-title id="d2e53">Maintenance of high-speed channels by inserting channel maintenance data in a mobile data network to avoid channel type switching</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6347091</doc-number>
<kind>B1</kind>
<name>Wallentin et al.</name>
<date>20020200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370437</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>7724707</doc-number>
<kind>B2</kind>
<name>Foster et al.</name>
<date>20100500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>7916649</doc-number>
<kind>B2</kind>
<name>Buvaneswari et al.</name>
<date>20110300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2003/0067897</doc-number>
<kind>A1</kind>
<name>Black</name>
<date>20030400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2004/0264393</doc-number>
<kind>A1</kind>
<name>Desgagne et al.</name>
<date>20041200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370294</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2005/0125496</doc-number>
<kind>A1</kind>
<name>Thuerk</name>
<date>20050600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2006/0155771</doc-number>
<kind>A1</kind>
<name>Nordmark et al.</name>
<date>20060700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707200</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2007/0060167</doc-number>
<kind>A1</kind>
<name>Damnjanovic et al.</name>
<date>20070300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2007/0086485</doc-number>
<kind>A1</kind>
<name>Vega-Garcia et al.</name>
<date>20070400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>2007/0127443</doc-number>
<kind>A1</kind>
<name>Spencer et al.</name>
<date>20070600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>2008/0159148</doc-number>
<kind>A1</kind>
<name>Morinaga et al.</name>
<date>20080700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>2008/0228942</doc-number>
<kind>A1</kind>
<name>Lor et al.</name>
<date>20080900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709238</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>2008/0267128</doc-number>
<kind>A1</kind>
<name>Bennett et al.</name>
<date>20081000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>2009/0046661</doc-number>
<kind>A1</kind>
<name>Casati et al.</name>
<date>20090200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>2009/0219864</doc-number>
<kind>A1</kind>
<name>Parolari</name>
<date>20090900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>2009/0232015</doc-number>
<kind>A1</kind>
<name>Domschitz et al.</name>
<date>20090900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370252</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>2010/0103923</doc-number>
<kind>A1</kind>
<name>Nosley et al.</name>
<date>20100400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00018">
<document-id>
<country>US</country>
<doc-number>2010/0130170</doc-number>
<kind>A1</kind>
<name>Liu et al.</name>
<date>20100500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00019">
<document-id>
<country>US</country>
<doc-number>2010/0246585</doc-number>
<kind>A1</kind>
<name>Mantri et al.</name>
<date>20100900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00020">
<document-id>
<country>US</country>
<doc-number>2010/0303042</doc-number>
<kind>A1</kind>
<name>Bergman et al.</name>
<date>20101200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370335</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00021">
<document-id>
<country>US</country>
<doc-number>2011/0070906</doc-number>
<kind>A1</kind>
<name>Chami et al.</name>
<date>20110300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00022">
<document-id>
<country>US</country>
<doc-number>2011/0075675</doc-number>
<kind>A1</kind>
<name>Koodli et al.</name>
<date>20110300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00023">
<document-id>
<country>US</country>
<doc-number>2011/0076985</doc-number>
<kind>A1</kind>
<name>Chami et al.</name>
<date>20110300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00024">
<document-id>
<country>US</country>
<doc-number>2011/0103310</doc-number>
<kind>A1</kind>
<name>Stojanovski et al.</name>
<date>20110500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00025">
<document-id>
<country>US</country>
<doc-number>2011/0134982</doc-number>
<kind>A1</kind>
<name>Reinhardt</name>
<date>20110600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00026">
<document-id>
<country>US</country>
<doc-number>2011/0235595</doc-number>
<kind>A1</kind>
<name>Mehta et al.</name>
<date>20110900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00027">
<document-id>
<country>US</country>
<doc-number>2012/0184258</doc-number>
<kind>A1</kind>
<name>Kovvali et al.</name>
<date>20120700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00028">
<document-id>
<country>US</country>
<doc-number>2012/0188895</doc-number>
<kind>A1</kind>
<name>Punz et al.</name>
<date>20120700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00029">
<document-id>
<country>US</country>
<doc-number>2012/0224578</doc-number>
<kind>A1</kind>
<name>Mih Ly et al.</name>
<date>20120900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00030">
<document-id>
<country>US</country>
<doc-number>2012/0243432</doc-number>
<kind>A1</kind>
<name>Liebsch et al.</name>
<date>20120900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00031">
<document-id>
<country>US</country>
<doc-number>2013/0029708</doc-number>
<kind>A1</kind>
<name>Fox et al.</name>
<date>20130100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00032">
<document-id>
<country>WO</country>
<doc-number>WO2011182351</doc-number>
<kind>A1</kind>
<date>20110200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00033">
<othercit>Kundalkar et al., &#x201c;LIPA: Local IP Access via Home Node B&#x201d;, Nov. 13, 2009.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00034">
<othercit>Theimer et al., &#x201c;Generic Policy Control for Local Breakout&#x201d;, Prior Art Publishing&#x2014;Technisches Journal, Nov. 2009, p. 1.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00035">
<othercit>Belhouchet et al., &#x201c;ITU/BDT Arab Regional Workshop on 4G Wireless Systems LTE Technology&#x201d;, Jan. 2010.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>11</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>370232</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370235</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370252-254</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370437</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>455405</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>455445</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>4554351</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>455522</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>455 69</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>23</number-of-drawing-sheets>
<number-of-figures>33</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20130070619</doc-number>
<kind>A1</kind>
<date>20130321</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Anthony, Jr.</last-name>
<first-name>Bruce O.</first-name>
<address>
<city>Pine Island</city>
<state>MN</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Billau</last-name>
<first-name>Ronald L.</first-name>
<address>
<city>Rochester</city>
<state>MN</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Cillis</last-name>
<first-name>Canio</first-name>
<address>
<city>Berlin</city>
<country>DE</country>
</address>
</addressbook>
<residence>
<country>DE</country>
</residence>
</us-applicant>
<us-applicant sequence="004" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Nicholson</last-name>
<first-name>Robert B.</first-name>
<address>
<city>Hampshire</city>
<country>GB</country>
</address>
</addressbook>
<residence>
<country>GB</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Anthony, Jr.</last-name>
<first-name>Bruce O.</first-name>
<address>
<city>Pine Island</city>
<state>MN</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Billau</last-name>
<first-name>Ronald L.</first-name>
<address>
<city>Rochester</city>
<state>MN</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Cillis</last-name>
<first-name>Canio</first-name>
<address>
<city>Berlin</city>
<country>DE</country>
</address>
</addressbook>
</inventor>
<inventor sequence="004" designation="us-only">
<addressbook>
<last-name>Nicholson</last-name>
<first-name>Robert B.</first-name>
<address>
<city>Hampshire</city>
<country>GB</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Martin &#x26; Associates, LLC</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
<agent sequence="02" rep-type="attorney">
<addressbook>
<last-name>Martin</last-name>
<first-name>Derek P.</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>International Business Machines Corporation</orgname>
<role>02</role>
<address>
<city>Armonk</city>
<state>NY</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Phung</last-name>
<first-name>Luat</first-name>
<department>2468</department>
</primary-examiner>
<assistant-examiner>
<last-name>Belete</last-name>
<first-name>Berhanu</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A mobile data network includes a radio access network and a core network. A first service mechanism in the radio access network breaks out data coming from a basestation. When data is broken out by the first service mechanism, the data is delivered at the edge, which means the true activity of the channel is not visible to the core network. The reduction of data in the core network due to serving data at the edge risks causing a switch from a high-speed channel to a low-speed channel by the mechanism in the core network that monitors and assigns channel speeds. In order to maintain the high-speed channel, the on-going data rate for a subscriber session is monitored and channel maintenance traffic is injected towards and from the radio network controller (in both directions). The amount of channel maintenance traffic depends on thresholds that determine a desired data rate.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="125.31mm" wi="239.27mm" file="US08625452-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="244.18mm" wi="192.28mm" orientation="landscape" file="US08625452-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="246.04mm" wi="160.87mm" orientation="landscape" file="US08625452-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="235.20mm" wi="180.09mm" file="US08625452-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="230.04mm" wi="166.62mm" file="US08625452-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="223.69mm" wi="190.33mm" file="US08625452-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="247.99mm" wi="152.48mm" file="US08625452-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="187.79mm" wi="151.21mm" file="US08625452-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="193.55mm" wi="150.62mm" file="US08625452-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="196.77mm" wi="137.75mm" file="US08625452-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="156.97mm" wi="144.19mm" file="US08625452-20140107-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="238.42mm" wi="189.06mm" file="US08625452-20140107-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="239.69mm" wi="174.92mm" file="US08625452-20140107-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00013" num="00013">
<img id="EMI-D00013" he="165.95mm" wi="161.46mm" file="US08625452-20140107-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00014" num="00014">
<img id="EMI-D00014" he="159.60mm" wi="153.84mm" file="US08625452-20140107-D00014.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00015" num="00015">
<img id="EMI-D00015" he="176.87mm" wi="152.48mm" file="US08625452-20140107-D00015.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00016" num="00016">
<img id="EMI-D00016" he="246.72mm" wi="144.19mm" file="US08625452-20140107-D00016.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00017" num="00017">
<img id="EMI-D00017" he="182.03mm" wi="150.62mm" file="US08625452-20140107-D00017.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00018" num="00018">
<img id="EMI-D00018" he="182.63mm" wi="174.92mm" file="US08625452-20140107-D00018.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00019" num="00019">
<img id="EMI-D00019" he="226.23mm" wi="192.28mm" file="US08625452-20140107-D00019.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00020" num="00020">
<img id="EMI-D00020" he="244.18mm" wi="150.62mm" file="US08625452-20140107-D00020.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00021" num="00021">
<img id="EMI-D00021" he="234.53mm" wi="156.38mm" file="US08625452-20140107-D00021.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00022" num="00022">
<img id="EMI-D00022" he="187.11mm" wi="183.30mm" file="US08625452-20140107-D00022.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00023" num="00023">
<img id="EMI-D00023" he="246.04mm" wi="191.60mm" file="US08625452-20140107-D00023.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND</heading>
<p id="p-0002" num="0001">1. Technical Field</p>
<p id="p-0003" num="0002">This disclosure generally relates to mobile data systems, and more specifically relates to channel type switching in a mobile data network.</p>
<p id="p-0004" num="0003">2. Background Art</p>
<p id="p-0005" num="0004">Mobile phones have evolved into &#x201c;smart phones&#x201d; that allow a user not only to make a call, but also to access data, such as e-mails, the internet, etc. Mobile phone networks have evolved as well to provide the data services that new mobile devices require. For example, 3G networks cover most of the United States, and allow users high-speed wireless data access on their mobile devices. In addition, phones are not the only devices that can access mobile data networks. Many mobile phone companies provide equipment and services that allow a subscriber to plug a mobile access card into a Universal Serial Bus (USB) port on a laptop computer, and provide wireless internet to the laptop computer through the mobile data network. In addition, some newer mobile phones allow the mobile phone to function as a wireless hotspot, which supports connecting several laptop computers or other wireless devices to the mobile phone, which in turn provides data services via the mobile data network. As time marches on, the amount of data served on mobile data networks will continue to rise exponentially.</p>
<p id="p-0006" num="0005">Mobile data networks include very expensive hardware and software, so upgrading the capability of existing networks is not an easy thing to do. It is not economically feasible for a mobile network provider to simply replace all older equipment with new equipment due to the expense of replacing the equipment. For example, the next generation wireless network in the United States is the 4G network. Many mobile data network providers are still struggling to get their entire system upgraded to provide 3G data services. Immediately upgrading to 4G equipment is not an economically viable option for most mobile data network providers. In many locations, portions of the mobile data network are connected together by point to point microwave links. These microwave links have limited bandwidth. To significantly boost the throughput of this links requires the microwave links to be replaced with fiber optic cable but this option is very costly.</p>
<heading id="h-0002" level="1">BRIEF SUMMARY</heading>
<p id="p-0007" num="0006">Mobile network services are performed in a mobile data network in a way that is transparent to most of the existing equipment in the mobile data network. The mobile data network includes a radio access network and a core network. A first service mechanism in the radio access network breaks out data coming from a basestation, and performs one or more mobile network services based on the broken out data. A second service mechanism in the core network performs one or more mobile network services based on the network traffic remaining after the first service mechanism performs its breakout. When data is broken out, the data is delivered at the edge of the mobile data network, which means the true activity of the channel is not visible to the core network. The reduction of data in the core network due to serving data at the edge risks causing a switch from a high-speed channel to a low-speed channel by the mechanism in the core network that performs channel speed monitoring and assignment. In order to maintain the high-speed channel, the on-going data rate for a subscriber session is monitored and channel maintenance traffic is injected towards and from the radio network controller (in both directions). The amount of channel maintenance traffic depends on thresholds that determine a desired data rate for a particular subscriber session being broken out Channel maintenance traffic is discontinued when the subscriber is inactive.</p>
<p id="p-0008" num="0007">The foregoing and other features and advantages will be apparent from the following more particular description, as illustrated in the accompanying drawings.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE SEVERAL VIEWS OF THE DRAWING(S)</heading>
<p id="p-0009" num="0008">The disclosure will be described in conjunction with the appended drawings, where like designations denote like elements, and:</p>
<p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram of a prior art mobile data network;</p>
<p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. 2</figref> is a block diagram of a mobile data network that includes first, second and third service mechanisms that all communicate via an overlay network;</p>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 3</figref> is a block diagram of one possible implementation for parts of the mobile data network shown in <figref idref="DRAWINGS">FIG. 2</figref> to illustrate the overlay network;</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 4</figref> is a block diagram of the MIOP@NodeB shown in <figref idref="DRAWINGS">FIG. 2</figref>, which includes a first service mechanism;</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 5</figref> is a block diagram of the MIOP@RNC shown in <figref idref="DRAWINGS">FIG. 2</figref>, which includes a second service mechanism;</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 6</figref> is a block diagram of the MIOP@Core shown in <figref idref="DRAWINGS">FIG. 2</figref>, which includes a third service mechanism;</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 7</figref> is a block diagram of a management mechanism coupled to the overlay network that manages the functions of MIOP@NodeB, MIOP@RNC, and MIOP@Core;</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 8</figref> is a flow diagram of a method performed by MIOP@NodeB shown in <figref idref="DRAWINGS">FIGS. 2 and 4</figref>;</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 9</figref> is a block diagram showing breakout criteria MIOP@RNC may use in making a decision of whether or not to break out data;</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 10</figref> is a flow diagram of a method for the MIOP@NodeB and MIOP@RNC to determine when to break out data;</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 11</figref> is a flow diagram of a method for the first service mechanism in MIOP@NodeB to selectively break out data when break out for a specified subscriber session has been authorized;</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 12</figref> is a flow diagram of a method for determining when to run MIOP services for a specified subscriber session;</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIGS. 13-15</figref> are flow diagrams that each show communications between MIOP components when MIOP services are running; and</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 16</figref> is a flow diagram of a method for managing and adjusting the MIOP components;</p>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 17</figref> is a block diagram of one specific implementation for MIOP@NodeB and MIOP@RNC;</p>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIGS. 18 and 19</figref> show a flow diagram of a first method for the specific implementation shown in <figref idref="DRAWINGS">FIG. 17</figref>;</p>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. 20</figref> is a flow diagram of a second method for the specific implementation shown in <figref idref="DRAWINGS">FIG. 17</figref>;</p>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 21</figref> is a flow diagram of a third method for the specific implementation shown in <figref idref="DRAWINGS">FIG. 17</figref>;</p>
<p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. 22</figref> is a flow diagram of a method for the specific implementation shown in <figref idref="DRAWINGS">FIG. 17</figref> to process a data request that results in a cache miss at MIOP@NodeB;</p>
<p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. 23</figref> is a flow diagram of a method for the specific implementation shown in <figref idref="DRAWINGS">FIG. 17</figref> to process a data request that results in a cache hit at MIOP@NodeB;</p>
<p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. 24</figref> is a block diagram of one suitable implementation of a MIOP@NodeB that includes a radio channel handler;</p>
<p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. 25</figref> is a block diagram of one suitable implementation of a MIOP@RNC that includes a radio channel handler;</p>
<p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. 26</figref> is a block diagram of one suitable implementation for MIOP@NodeB and MIOP@RNC that includes a radio channel handler in each;</p>
<p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. 27</figref> is a flow diagram of a method performed by the MIOP@NodeB;</p>
<p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. 28</figref> is a flow diagram of a method performed by the MIOP@RNC;</p>
<p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. 29</figref> is a flow diagram of one specific method for determining the threshold used by the radio channel handlers;</p>
<p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. 30</figref> is a flow diagram of a method for MIOP@NodeB to determine the threshold for the radio channel handlers and send the threshold to MIOP@RNC;</p>
<p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. 31</figref> is a flow diagram of a method for loading channel maintenance data packets with valid data;</p>
<p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. 32</figref> is a flow diagram of a method for disabling generation of maintenance traffic when a subscriber is inactive; and</p>
<p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. 33</figref> is a block diagram of a channel maintenance data packet.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0040" num="0039">The claims and disclosure herein provide mechanisms and methods for performing mobile network services in a mobile data network within the existing infrastructure of the mobile data network. These services include serving data at the edge of the mobile data network in a way that hides the activity on a channel. When the core network detects packets on a channel less that some threshold, the core network may switch the channel type from high-speed to low-speed. To assure this does not happen when the channel is active, radio channel handlers inject both uplink and downlink channel maintenance data packets in the core network at the edge and in the core respectively. A channel type switch by the core network due to detected low activity is thus avoided by injecting channel maintenance traffic packets.</p>
<p id="p-0041" num="0040">Referring to <figref idref="DRAWINGS">FIG. 1</figref>, a prior art mobile data network <b>100</b> is shown. Mobile data network <b>100</b> is representative of known 3G networks. The mobile data network <b>100</b> preferably includes a radio access network (RAN), a core network, and an external network, as shown in <figref idref="DRAWINGS">FIG. 1</figref>. The radio access network includes the tower <b>120</b>, basestation <b>122</b> with its corresponding NodeB <b>130</b>, and a radio interface on a radio network controller (RNC) <b>140</b>. The core network includes a network interface on the radio network controller <b>140</b>, the serving node <b>150</b>, gateway node <b>160</b> and operator service network <b>170</b> (as part of the mobile data network). The external network includes any suitable network. One suitable example for an external network is the internet <b>180</b>, as shown in the specific example in <figref idref="DRAWINGS">FIG. 1</figref>.</p>
<p id="p-0042" num="0041">In mobile data network <b>100</b>, user equipment <b>110</b> communicates via radio waves to a tower <b>120</b>. User equipment <b>110</b> may include any device capable of connecting to a mobile data network, including a mobile phone, a tablet computer, a mobile access card coupled to a laptop computer, etc. The tower <b>120</b> communicates via network connection to a basestation <b>122</b>. Each basestation <b>122</b> includes a NodeB <b>130</b>, which communicates with the tower <b>120</b> and the radio network controller <b>140</b>. Note there is a fan-out that is not represented in <figref idref="DRAWINGS">FIG. 1</figref>. Typically there are tens of thousands of towers <b>120</b>. Each tower <b>120</b> typically has a corresponding base station <b>122</b> with a NodeB <b>130</b> that communicates with the tower. However, network communications with the tens of thousands of base stations <b>130</b> are performed by hundreds of radio network controllers <b>140</b>. Thus, each radio network controller <b>140</b> can service many NodeBs <b>130</b> in basestations <b>122</b>. There may also be other items in the network between the basestation <b>130</b> and the radio network controller <b>140</b> that are not shown in <figref idref="DRAWINGS">FIG. 1</figref>, such as concentrators (points of concentration) or RAN aggregators that support communications with many basestations.</p>
<p id="p-0043" num="0042">The radio network controller <b>140</b> communicates with the serving node <b>150</b>. In a typical 3G network, the serving node <b>150</b> is an SGSN, which is short for Service GPRS Support Node, where GPRS stands for general packet radio service. The serving node <b>150</b> mediates access to network resources on behalf of mobile subscribers and implements the packet scheduling policy between different classes of quality of service. It is also responsible for establishing the Packet Data Protocol (PDP) context with the gateway node <b>160</b> for a given subscriber session. The serving node <b>150</b> is responsible for the delivery of data packets from and to the basestations within its geographical service area. The tasks of the serving node <b>150</b> include packet routing and transfer, mobility management (attach/detach and location management), logical link management, and authentication and charging functions. The serving node <b>150</b> stores location information and user profiles of all subscribers registered with the serving node <b>150</b>. Functions the serving node <b>150</b> typically performs include GPRS tunneling protocol (GTP) tunneling of packets, performing mobility management as user equipment moves from one basestation to the next, and billing user data.</p>
<p id="p-0044" num="0043">In a typical 3G network, the gateway node <b>160</b> is a GGSN, which is short for gateway GPRS support node. The gateway node <b>160</b> is responsible for the interworking between the core network and external networks. From the viewpoint of the external networks <b>180</b>, gateway node <b>160</b> is a router to a sub-network, because the gateway node <b>160</b> &#x201c;hides&#x201d; the core network infrastructure from the external network. When the gateway node <b>160</b> receives data from an external network (such as internet <b>180</b>) addressed to a specific subscriber, it forwards the data to the serving node <b>150</b> serving the subscriber. For inactive subscribers paging is initiated. The gateway node <b>160</b> also handles routing packets originated from the user equipment <b>110</b> to the appropriate external network. As anchor point the gateway node <b>160</b> supports the mobility of the user equipment <b>110</b>. In essence, the gateway node <b>160</b> maintains routing necessary to tunnel the network packets to the serving node <b>150</b> that services a particular user equipment <b>110</b>.</p>
<p id="p-0045" num="0044">The gateway node <b>160</b> converts the packets coming from the serving node <b>150</b> into the appropriate packet data protocol (PDP) format (e.g., IP or X.25) and sends them out on the corresponding external network. In the other direction, PDP addresses of incoming data packets from the external network <b>180</b> are converted to the address of the subscriber's user equipment <b>110</b>. The readdressed packets are sent to the responsible serving node <b>150</b>. For this purpose, the gateway node <b>160</b> stores the current serving node address of the subscriber and his or her profile. The gateway node <b>160</b> is responsible for IP address assignment and is the default router for the subscriber's user equipment <b>110</b>. The gateway node <b>160</b> also performs authentication, charging and subscriber policy functions. One example of a subscriber policy function is &#x201c;fair use&#x201d; bandwidth limiting and blocking of particular traffic types such as peer to peer traffic. Another example of a subscriber policy function is degradation to a 2G service level for a prepaid subscriber when the prepaid balance is zero.</p>
<p id="p-0046" num="0045">A next hop router located in the operator service network (OSN) <b>170</b> receives messages from the gateway node <b>160</b>, and routes the traffic either to the operator service network <b>170</b> or via an internet service provider (ISP) towards the internet <b>180</b>. The operator service network <b>170</b> typically includes business logic that determines how the subscriber can use the mobile data network <b>100</b>. The business logic that provides services to subscribers may be referred to as a &#x201c;walled garden&#x201d;, which refers to a closed or exclusive set of services provided for subscribers, including a carrier's control over applications, content and media on user equipment.</p>
<p id="p-0047" num="0046">Devices using mobile data networks often need to access an external network, such as the internet <b>180</b>. As shown in <figref idref="DRAWINGS">FIG. 1</figref>, when a subscriber enters a request for data from the internet, that request is passed from the user equipment <b>110</b> to tower <b>120</b>, to NodeB <b>130</b> in basestation <b>122</b>, to radio network controller <b>140</b>, to serving node <b>150</b>, to gateway node <b>160</b>, to operator service network <b>170</b>, and to internet <b>180</b>. When the requested data is delivered, the data traverses the entire network from the internet <b>180</b> to the user equipment <b>110</b>. The capabilities of known mobile data networks <b>100</b> are taxed by the ever-increasing volume of data being exchanged between user equipment <b>110</b> and the internet <b>180</b> because all data between the two have to traverse the entire network.</p>
<p id="p-0048" num="0047">Some efforts have been made to offload internet traffic to reduce the backhaul on the mobile data network. For example, some mobile data networks include a node called a HomeNodeB that is part of the radio access network. Many homes have access to high-speed Internet, such as Direct Subscriber Line (DSL), cable television, wireless, etc. For example, in a home with a DSL connection, the HomeNodeB takes advantage of the DSL connection by routing Internet traffic to and from the user equipment directly to the DSL connection, instead of routing the Internet traffic through the mobile data network. While this may be an effective way to offload Internet traffic to reduce backhaul, the HomeNodeB architecture makes it difficult to provide many mobile network services such as lawful interception, mobility, and charging consistently with the 3G or 4G mobile data network.</p>
<p id="p-0049" num="0048">Referring to <figref idref="DRAWINGS">FIG. 2</figref>, a mobile data network <b>200</b> includes mechanisms that provide various services for the mobile data network in a way that is transparent to most of the existing equipment in the mobile data network. <figref idref="DRAWINGS">FIG. 2</figref> shows user equipment <b>110</b>, tower <b>120</b>, NodeB <b>130</b>, radio network controller <b>140</b>, serving node <b>150</b>, gateway node <b>160</b>, operator service node <b>170</b>, and internet <b>180</b>, the same as shown in <figref idref="DRAWINGS">FIG. 1</figref>. The additions to the mobile data network <b>200</b> when compared with the prior art mobile data network <b>100</b> in <figref idref="DRAWINGS">FIG. 1</figref> include the addition of three components that may provide mobile network services in the mobile data network, along with a network management mechanism to manage the three components. The mobile network services are performed by what is called herein a Mobile Internet Optimization Platform (MIOP), and the mobile network services performed by the Mobile Internet Optimization Platform are referred to herein as MIOP services. The three MIOP components that provide these mobile network services are shown in <figref idref="DRAWINGS">FIG. 2</figref> as MIOP@NodeB <b>210</b>, MIOP@RNC <b>220</b> and MIOP@Core <b>230</b>. A network management system shown as MIOP@NMS <b>240</b> manages the overall solution by: 1) managing the function of the three MIOP components <b>210</b>, <b>220</b> and <b>230</b>; 2) determining which MIOP@NodeBs in the system aggregate to which MIOP@RNCs via the overlay network for performance, fault and configuration management; and 3) monitoring performance of the MIOP@NodeBs to dynamically change and configure the mobile network services. The MIOP@NodeB <b>210</b>, MIOP@RNC <b>220</b>, MIOP@Core <b>230</b>, MIOP@NMS <b>240</b>, and the overlay network <b>250</b>, and any subset of these, and are referred to herein as MIOP components.</p>
<p id="p-0050" num="0049">The mobile network services provided by MIOP@NodeB <b>210</b>, MIOP@RNC <b>220</b>, and MIOP@Core <b>230</b> include any suitable services on the mobile data network, such as data optimizations, RAN-aware services, subscriber-aware services, edge-based application serving, edge-based analytics, etc. All mobile network services performed by all of MIOP@NodeB <b>210</b>, MIOP@RNC <b>220</b>, and MIOP@Core <b>230</b> are included in the term MIOP services as used herein. In addition to the services being offer in the MIOP components MIOP@NodeB <b>210</b>, MIOP@RNC <b>220</b>, and MIOP@Core <b>230</b>, the various MIOP services could also be provided in a cloud based manner.</p>
<p id="p-0051" num="0050">MIOP@NodeB <b>210</b> includes a first service mechanism and is referred to as the &#x201c;edge&#x201d; based portion of the MIOP solution. MIOP@NodeB <b>210</b> resides in the radio access network and has the ability to intercept all traffic to and from the NodeB <b>130</b>. MIOP@NodeB <b>210</b> preferably resides in the base station <b>222</b> shown by the dotted box in <figref idref="DRAWINGS">FIG. 2</figref>. Thus, all data to and from the NodeB <b>130</b> to and from the radio network controller <b>140</b> is routed through MIOP@NodeB <b>210</b>. MIOP@NodeB performs what is referred to herein as breakout of data on the intercepted data stream. MIOP@NodeB monitors the signaling traffic between NodeB and RNC and on connection setup intercepts in particular the setup of the transport layer (allocation of the UDP Port, IP address or AAL2 channel). For registered sessions the breakout mechanism <b>410</b> will be configured in a way that all traffic belonging to this UDP Port, IP address to AAL2 channel will be forwarded to an data offload function. MIOP@NodeB <b>210</b> thus performs breakout of data by defining a previously-existing path in the radio access network for non-broken out data, by defining a new second data path that did not previously exist in the radio access network for broken out data, identifying data received from a corresponding NodeB as data to be broken out, sending the data to be broken out on the second data path, and forwarding other data that is not broken out on the first data path. The signaling received by MIOP@NodeB <b>210</b> from NodeB <b>130</b> is forwarded to RNC <b>140</b> on the existing network connection to RNC <b>140</b>, even though the data traffic is broken out. Thus, RNC <b>140</b> sees the signaling traffic and knows the subscriber session is active, but does not see the user data that is broken out by MIOP@NodeB <b>210</b>. MIOP@NodeB thus performs two distinct functions depending on the monitored data packets: 1) forward the data packets to RNC <b>140</b> for signaling traffic and user data that is not broken out (including voice calls); and 2) re-route the data packets for user data that is broken out.</p>
<p id="p-0052" num="0051">Once MIOP@NodeB <b>210</b> breaks out user data it can perform any suitable service based on the traffic type of the broken out data. Because the services performed by MIOP@NodeB <b>210</b> are performed in the radio access network (e.g., at the basestation <b>222</b>), the MIOP@NodeB <b>210</b> can service the user equipment <b>110</b> much more quickly than can the radio network controller <b>140</b>. In addition, by having a MIOP@NodeB <b>210</b> that is dedicated to a particular NodeB <b>130</b>, one MIOP@NodeB only needs to service those subscribers that are currently connected via a single NodeB. The radio network controller, in contrast, which typically services dozens or even hundreds of basestations, must service all the subscribers accessing all basestations it controls from a remote location. As a result, MIOP@NodeB is in a much better position to provide services that will improve the quality of service and experience for subscribers than is the radio network controller.</p>
<p id="p-0053" num="0052">Breaking out data in the radio access network by MIOP@NodeB <b>210</b> allows for many different types of services to be performed in the radio access network. These services may include optimizations that are similar to optimizations provided by known industry solutions between radio network controllers and the serving node. However, moving these optimizations to the edge of the mobile data network will not only greatly improve the quality of service for subscribers, but will also provide a foundation for applying new types of services at the edge of the mobile data network, such as terminating machine-to-machine (MTM) traffic at the edge (e.g., in the basestation), hosting applications at the edge, and performing analytics at the edge.</p>
<p id="p-0054" num="0053">MIOP@RNC <b>220</b> includes a second service mechanism in mobile data network <b>200</b>. MIOP@RNC <b>220</b> monitors all communication between the radio network controller <b>140</b> and serving node <b>150</b>. The monitored communications are all communications to and from the radio network controller and the rest of the core network. MIOP@RNC <b>220</b> may provide one or more services for the mobile data network. MIOP@RNC <b>220</b> preferably makes the decision of whether or not to allow breakout of data. If MIOP@RNC <b>220</b> decides to breakout data for a given subscriber session, it may send a message to MIOP@NodeB <b>210</b> authorizing breakout by MIOP@NodeB <b>210</b>, or may decide to breakout the data at MIOP@RNC <b>220</b>, depending on the configured breakout decision criteria and selected radio channel. Because messages to and from the core network establishing the PDP context for a given subscriber session are monitored by MIOP@RNC <b>220</b>, the decision of whether or not to breakout data resides in the MIOP@RNC <b>220</b>.</p>
<p id="p-0055" num="0054">MIOP@Core <b>230</b> includes a third service mechanism in the mobile data network <b>200</b>. MIOP@Core <b>230</b> may include all the same services as MIOP@RNC <b>220</b>, or any suitable subset of those services. If the decision is made not to provide services at MIOP@NodeB <b>210</b> or MIOP@RNC <b>220</b>, these same services plus more sophisticated services can be performed at MIOP@Core <b>230</b>. Thus, mobile data network <b>200</b> provides flexibility by allowing a decision to be made of where to perform which services. Because MIOP@NodeB <b>210</b>, MIOP@RNC <b>220</b> and MIOP@Core <b>230</b> preferably include some of the same services, the services between components may interact (e.g., MIOP@NodeB and MIOP@Core may interact to optimize TCP traffic between them), or the services may be distributed across the mobile data network (e.g., MIOP@NodeB performs breakout and provides services for high-speed traffic, MIOP@RNC performs breakout and provides services for low-speed traffic, and MIOP@Core provides services for non-broken out traffic). The MIOP system architecture thus provides a very powerful and flexible solution, allowing dynamic configuring and reconfiguring on the fly of which services are performed by the MIOP components and where. In addition, these services may be implemented taking advantage of existing infrastructure in a mobile data network.</p>
<p id="p-0056" num="0055">MIOP@NMS <b>240</b> is a network management system that monitors and controls the functions of MIOP@NodeB <b>210</b>, MIOP@RNC <b>220</b>, and MIOP@Core <b>230</b>. MIOP@NMS <b>240</b> preferably includes MIOP internal real-time or near real-time performance data monitoring to determine if historical or additional regional dynamic changes are needed to improve services on the mobile data network <b>200</b>. MIOP@NMS <b>240</b> provides a user interface that allows a system administrator to operate and to configure how the MIOP components <b>210</b>, <b>220</b> and <b>230</b> function.</p>
<p id="p-0057" num="0056">The overlay network <b>250</b> allows MIOP@NodeB <b>210</b>, MIOP@RNC <b>220</b>, MIOP@Core <b>230</b>, and MIOP@NMS <b>240</b> to communicate with each other. The overlay network <b>250</b> is preferably a virtual private network primarily on an existing physical network in the mobile data network. Thus, while overlay network <b>250</b> is shown in <figref idref="DRAWINGS">FIG. 2</figref> separate from other physical network connections, this representation in <figref idref="DRAWINGS">FIG. 2</figref> is a logical representation.</p>
<p id="p-0058" num="0057"><figref idref="DRAWINGS">FIG. 3</figref> shows one suitable implementation of a physical network and the overlay network in a sample mobile data system. The existing physical network in the mobile data network before the addition of the MIOP@NodeB <b>210</b>, MIOP@RNC <b>220</b>, and MIOP@Core <b>230</b> is shown by the solid lines with arrows. This specific example in <figref idref="DRAWINGS">FIG. 3</figref> includes many NodeBs, shown in <figref idref="DRAWINGS">FIG. 1</figref> as <b>130</b>A, <b>130</b>B, <b>130</b>C, . . . , <b>130</b>N. Some of the NodeBs have a corresponding MIOP@NodeB. <figref idref="DRAWINGS">FIG. 3</figref> illustrates that MIOP@NodeBs (such as <b>210</b>A and <b>210</b>N) can be placed in a basestation with its corresponding NodeB, or can be placed upstream in the network after a point of concentration (such as <b>210</b>A). <figref idref="DRAWINGS">FIG. 3</figref> also illustrates that a single MIOP@NodeB such as MIOP@NodeB<b>1</b> <b>210</b>A can service two different NodeBs, such as NodeB<b>1</b> <b>130</b>A and NodeB<b>2</b> <b>130</b>B. Part of the overlay network is shown by the dotted lines between MIOP@NodeB<b>1</b> <b>210</b>A and second point of concentration POC<b>2</b> <b>320</b>, between MIOP@NodeB<b>3</b> <b>210</b>C and POC<b>3</b> <b>315</b>, between MIOP@NodeBN <b>210</b>N and POC<b>3</b> <b>315</b>, and between POC<b>3</b> <b>315</b> and POC<b>2</b> <b>320</b>. Note the overlay network in the radio access network portion is a virtual private network that is implemented on the existing physical network connections. The overlay network allows the MIOP@NodeBs <b>210</b>A, <b>210</b>C and <b>210</b>N to communicate with each other directly, which makes some services possible in the mobile data network <b>200</b> that were previously impossible. <figref idref="DRAWINGS">FIG. 3</figref> shows MIOP@NodeB<b>1</b> <b>210</b>A connected to a second point of concentration POC<b>2</b> <b>320</b>. The broken arrows coming in from above at POC<b>2</b> <b>320</b> represent connections to other NodeBs, and could also include connections to other MIOP@NodeBs. Similarly, POC<b>2</b> <b>320</b> is connected to a third point of concentration POC<b>1</b> <b>330</b>, with possibly other NodeBs or MIOP@NodeBs connected to POC<b>1</b>. The RNC <b>140</b> is shown connected to POC<b>1</b> <b>330</b>, and to a first router RT<b>1</b> <b>340</b> in the core network. The router RT<b>1</b> <b>340</b> is also connected to the SGSN <b>150</b>. While not shown in <figref idref="DRAWINGS">FIG. 3</figref> for the sake of simplicity, it is understood that SGSN in <figref idref="DRAWINGS">FIG. 3</figref> is also connected to the upstream core components shown in <figref idref="DRAWINGS">FIG. 2</figref>, including GGSN <b>160</b>, OSN <b>170</b> and internet <b>180</b>.</p>
<p id="p-0059" num="0058">As shown in <figref idref="DRAWINGS">FIG. 3</figref>, the overlay network from the NodeBs to POC<b>1</b> <b>330</b> is a virtual private network implemented on existing physical network connections. However, the overlay network requires a second router RT<b>2</b> <b>350</b>, which is connected via a physical network connection <b>360</b> to POC<b>1</b> <b>330</b>, and is connected via physical network connection <b>370</b> to MIOP@RNC <b>220</b>. This second router RT<b>2</b> <b>350</b> may be a separate router, or may be a router implemented within MIOP@RNC <b>220</b>. MIOP@RNC <b>220</b> is also connected to router RT<b>1</b> <b>340</b> via a physical network connection <b>380</b>, and is also connected to MIOP@Core <b>230</b>. Physical connection <b>380</b> in <figref idref="DRAWINGS">FIG. 3</figref> is shown in a line with short dots because it is not part of the pre-existing physical network before adding the MIOP components (arrows with solid lines) and is not part of the overlay network (arrows with long dots). Note the connection from MIOP@RNC <b>220</b> to MIOP@Core <b>230</b> is via existing physical networks in the core network.</p>
<p id="p-0060" num="0059">We can see from the configuration of the physical network and overlay network in <figref idref="DRAWINGS">FIG. 3</figref> that minimal changes are needed to the existing mobile data network to install the MIOP components. The most that must be added is one new router <b>350</b> and three new physical network connections <b>360</b>, <b>370</b> and <b>380</b>. Once the new router <b>350</b> and new physical network connections <b>360</b>, <b>370</b> and <b>380</b> are installed, the router <b>350</b> and MIOP components are appropriately configured, and the existing equipment in the mobile data network is configured to support the overlay network, the operation of the MIOP components is completely transparent to existing network equipment.</p>
<p id="p-0061" num="0060">As can be seen in <figref idref="DRAWINGS">FIG. 3</figref>, data on the overlay network is defined on existing physical networks from the NodeBs to POC<b>1</b>. From POC<b>1</b> the overlay network is on connection <b>360</b> to RT<b>2</b> <b>350</b>, and on connection <b>370</b> to MIOP@RNC <b>220</b>. Thus, when MIOP@NodeB <b>210</b> in <figref idref="DRAWINGS">FIG. 2</figref> needs to send a message to MIOP@RNC <b>220</b>, the message is sent by sending packets via a virtual private network on the physical network connections to POC<b>1</b>, then to RT<b>2</b> <b>350</b>, then to MIOP@RNC <b>220</b>. Virtual private networks are well-known in the art, so they are not discussed in more detail here.</p>
<p id="p-0062" num="0061">Referring to <figref idref="DRAWINGS">FIG. 4</figref>, MIOP@NodeB <b>210</b> preferably includes a breakout mechanism <b>410</b>, an edge service mechanism <b>430</b>, and an overlay network mechanism <b>440</b>. The breakout mechanism <b>410</b> determines breakout preconditions <b>420</b> that, when satisfied, allow breakout to occur at this edge location. Breakout mechanism <b>410</b> in MIOP@NodeB <b>210</b> communicates with the breakout mechanism <b>510</b> in MIOP@RNC <b>220</b> shown in <figref idref="DRAWINGS">FIG. 5</figref> to reach a breakout decision. The breakout mechanism <b>410</b>, after receiving a message from MIOP@RNC <b>220</b> authorizing breakout on connection setup intercepts in particular the setup of the transport layer (allocation of the UDP Port, IP address or AAL2 channel). For authorized sessions the breakout mechanism <b>410</b> will be configured in a way that all traffic belonging to this UDP Port, IP address to AAL2 channel will be forwarded to an data offload function. For traffic that should not be broken out, the breakout mechanism <b>410</b> sends the data on the original data path in the radio access network. In essence, MIOP@NodeB <b>210</b> intercepts all communications to and from the basestation <b>130</b>, and can perform services &#x201c;at the edge&#x201d;, meaning at the edge of the radio access network that is close to the user equipment <b>110</b>. By performing services at the edge, the services to subscribers may be increased or optimizes without requiring hardware changes to existing equipment in the mobile data network.</p>
<p id="p-0063" num="0062">The breakout mechanism <b>410</b> preferably includes breakout preconditions <b>420</b> that specify one or more criterion that must be satisfied before breakout of data is allowed. One suitable example of breakout preconditions is the speed of the channel. In one possible implementation, only high-speed channels will be broken out at MIOP@NodeB <b>210</b>. Thus, breakout preconditions <b>420</b> could specify that subscribers on high-speed channels may be broken out, while subscribers on low-speed channels are not broken out at MIOP@NodeB <b>210</b>. When the breakout preconditions <b>420</b> are satisfied, the MIOP@NodeB <b>210</b> registers the subscriber session with MIOP@RNC <b>220</b>. This is shown in method <b>800</b> in <figref idref="DRAWINGS">FIG. 8</figref>. MIOP@NodeB <b>210</b> intercepts and monitors network traffic to and from NodeB (basestation) (step <b>810</b>). When the traffic does not satisfy the breakout preconditions (step <b>820</b>=NO), method <b>800</b> returns to step <b>810</b>. When the traffic satisfies the breakout conditions (step <b>820</b>=YES), MIOP@NodeB <b>210</b> sends a message to MIOP@RNC <b>220</b> on the overlay network <b>250</b> to register the subscriber session for breakout (step <b>830</b>). With the subscriber session registered with MIOP@RNC <b>220</b>, the MIOP@RNC <b>220</b> will determine whether or not to breakout data for the subscriber session, and where the breakout is done, as explained in more detail below.</p>
<p id="p-0064" num="0063">Referring back to <figref idref="DRAWINGS">FIG. 4</figref>, MIOP@NodeB <b>210</b> also includes an edge service mechanism <b>430</b>. The edge service mechanism <b>430</b> provides one or more services for the mobile data network <b>200</b>. The edge service mechanism <b>430</b> may include any suitable service for the mobile data network including without limitation caching of data, data or video compression techniques, push-based services, charging, application serving, analytics, security, data filtering, new revenue-producing services, etc. The edge service mechanism is the first of three service mechanisms in the MIOP components. While the breakout mechanism <b>410</b> and edge service mechanism <b>430</b> are shown as separate entities in <figref idref="DRAWINGS">FIG. 4</figref>, the first service mechanism could include both breakout mechanism <b>410</b> and edge service mechanism <b>430</b>.</p>
<p id="p-0065" num="0064">MIOP@NodeB <b>210</b> also includes an overlay network mechanism <b>440</b>. The overlay network mechanism <b>440</b> provides a connection to the overlay network <b>250</b> in <figref idref="DRAWINGS">FIG. 2</figref>, thereby allowing MIOP@NodeB <b>210</b> to communicate with MIOP@RNC <b>220</b>, MIOP@Core <b>230</b>, and MIOP@NMS <b>240</b>. As stated above, the overlay network <b>250</b> is preferably a virtual private network primarily on an existing physical network in the mobile data network <b>200</b>.</p>
<p id="p-0066" num="0065">Referring to <figref idref="DRAWINGS">FIG. 5</figref>, MIOP@RNC <b>220</b> preferably includes a breakout mechanism <b>510</b>, an RNC service mechanism <b>540</b>, an overlay network mechanism <b>550</b>, and business intelligence <b>560</b>. Breakout mechanism <b>510</b> includes breakout criteria <b>520</b> that specifies one or more criterion that, when satisfied, allows breakout of data. Subscriber registration mechanism <b>530</b> receives messages from MIOP@NodeB <b>210</b>, and registers subscriber sessions for which the breakout preconditions <b>420</b> in MIOP@NodeB <b>210</b> are satisfied. When the breakout mechanism <b>510</b> determines the breakout criteria <b>520</b> is satisfied, the breakout mechanism <b>510</b> will then determine where the breakout should occur. When the breakout can occur at MIOP@NodeB <b>210</b>, the MIOP@RNC <b>220</b> sends a message to MIOP@NodeB <b>210</b> on the overlay network <b>250</b> authorizing breakout at MIOP@NodeB <b>210</b>. When the breakout should occur at MIOP@RNC <b>220</b>, the breakout mechanism <b>510</b> in MIOP@RNC <b>220</b> performs the breakout as well for the traffic remaining then). This is shown in more detail in method <b>1000</b> in <figref idref="DRAWINGS">FIG. 10</figref>. MIOP@RNC monitors network traffic between the radio network controller <b>140</b> and the serving node <b>150</b> (step <b>1010</b>). When the traffic does not satisfy the breakout criteria (step <b>1020</b>=NO), method <b>1000</b> loops back to step <b>1010</b>. When the network traffic satisfies the breakout criteria (step <b>1020</b>=YES), the breakout mechanism <b>510</b> determines whether the subscriber session is registered for breakout (step <b>1030</b>). A subscriber session is registered for breakout when the MIOP@NodeB <b>210</b> determined the traffic satisfied the breakout preconditions and registered the subscriber session for breakout, as shown in <figref idref="DRAWINGS">FIG. 8</figref>. Returning to <figref idref="DRAWINGS">FIG. 10</figref>, when the subscriber is registered for breakout (step <b>1030</b>=YES), MIOP@RNC <b>220</b> sends a message via the overlay network <b>250</b> to MIOP@NodeB <b>210</b> authorizing breakout of traffic for the subscriber session (step <b>1040</b>). MIOP@NodeB <b>210</b> may then breakout traffic for the subscriber session (step <b>1050</b>). When the subscriber is not registered for breakout (step <b>1030</b>=NO), method <b>1000</b> checks to see if MIOP@RNC is going to do breakout (step <b>1060</b>). If not (step <b>1060</b>=NO), method <b>1000</b> is done. When MIOP@RNC is going to do breakout (step <b>1060</b>=YES), the traffic is then broken out at MIOP@RNC (step <b>1070</b>).</p>
<p id="p-0067" num="0066">In one specific example, the breakout preconditions specify only high-speed channels are broken out at MIOP@NodeB <b>210</b>, and when the breakout preconditions are satisfied, the subscriber session is registered for breakout, as shown in <figref idref="DRAWINGS">FIG. 8</figref>. <figref idref="DRAWINGS">FIG. 10</figref> illustrates that even when the breakout preconditions are not satisfied, breakout can still be performed at MIOP@RNC <b>220</b>. Thus, even if the subscriber session is on a low-speed channel, if all the other breakout criteria are satisfied, breakout of the low-speed channel may be performed at MIOP@RNC <b>220</b>. The mobile data network <b>200</b> thus provides great flexibility in determining when to do breakout and where.</p>
<p id="p-0068" num="0067">Referring back to <figref idref="DRAWINGS">FIG. 5</figref>, the RNC service mechanism <b>540</b> provides one or more services for the mobile data network. RNC service mechanism <b>540</b> is the second of three service mechanisms in the MIOP components. The RNC service mechanism <b>540</b> may include any suitable service for the mobile data network, including without limitation caching of data, data or video compression techniques, push-based services, charging, application serving, analytics, security, data filtering, new revenue-producing services, etc. While the breakout mechanism <b>510</b> and RNC service mechanism <b>540</b> are shown as separate entities in <figref idref="DRAWINGS">FIG. 5</figref>, the second service mechanism could include both breakout mechanism <b>510</b> and RNC service mechanism <b>540</b>. The overlay network mechanism <b>550</b> is similar to the overlay network mechanism <b>440</b> in <figref idref="DRAWINGS">FIG. 4</figref>, providing a logical network connection to the other MIOP components on the overlay network <b>250</b> in <figref idref="DRAWINGS">FIG. 2</figref>. MIOP@RNC <b>220</b> also includes business intelligence <b>560</b>, which includes:
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0000">
    <ul id="ul0002" list-style="none">
        <li id="ul0002-0001" num="0068">1) historical subscriber information received from the mobile data network over time, such as mobility and location, volumes, traffic types, equipment used, etc.</li>
        <li id="ul0002-0002" num="0069">2) network awareness, including NodeB load states, service area code, channel type, number of times channel type switching occurred for a PDP session, serving cell ID, how many cells and their IDs are in the active set, PDP context type, PDP sessions per subscriber, session duration, data consumption, list of Uniform Resource Locators (URLs) browsed for user classification, top URL browsed, first time or repeat user, entry point/referral URLs for a given site, session tracking, etc.</li>
        <li id="ul0002-0003" num="0070">3) association of flow control procedures between NodeB and RNC to subscribers.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0069" num="0071">The business intelligence <b>560</b> may be instrumented by the RNC service mechanism <b>540</b> to determine when and what types of MIOP services to perform for a given subscriber. For example, services for a subscriber on a mobile phone may differ when compared to services for a subscriber using a laptop computer to access the mobile data network. In another example, voice over internet protocol (VOIP) session could have the data broken out.</p>
<p id="p-0070" num="0072">Referring to <figref idref="DRAWINGS">FIG. 6</figref>, the MIOP@Core <b>230</b> includes a core service mechanism <b>610</b> and an overlay network mechanism <b>620</b>. Core service mechanism <b>610</b> provides one or more services for the mobile data network. Core service mechanism <b>610</b> is the third of three service mechanisms in the MIOP components. The core service mechanism <b>610</b> may include any suitable service for the mobile data network, including without limitation caching of data, data or video compression techniques, push-based services, charging, application serving, analytics, security, data filtering, new revenue-producing services, etc. In one specific implementation, the MIOP@Core <b>230</b> is an optional component, because all needed services could be performed at MIOP@NodeB <b>210</b> and MIOP@RNC <b>220</b>. In an alternative implementation, MIOP@Core <b>230</b> performs some services, while MIOP@RNC performs others or none. The overlay network mechanism <b>620</b> is similar to the overlay network mechanisms <b>440</b> in <figref idref="DRAWINGS">FIGS. 4 and 550</figref> in <figref idref="DRAWINGS">FIG. 5</figref>, providing a logical network connection to the other MIOP components on the overlay network <b>250</b> in <figref idref="DRAWINGS">FIG. 2</figref>.</p>
<p id="p-0071" num="0073">Referring to <figref idref="DRAWINGS">FIG. 7</figref>, the MIOP@NMS <b>240</b> is a network management system that monitors and manages performance of the mobile data network <b>200</b>, and controls the function of MIOP@NodeB <b>210</b>, MIOP@RNC <b>220</b>, and MIOP@Core <b>230</b>. MIOP@NMS <b>240</b> preferably includes a network monitoring mechanism <b>710</b>, a performance management mechanism <b>720</b>, a security management mechanism <b>730</b>, and a configuration management mechanism <b>740</b>. The network monitoring mechanism <b>710</b> monitors network conditions, such as alarms, in the mobile data network <b>200</b>. The performance management mechanism <b>720</b> can enable, disable or refine certain services by supporting the execution of services in real-time or near real-time, such as services that gather information to assess customer satisfaction. The security management mechanism <b>730</b> manages security issues in the mobile data network, such as intrusion detection or additional data privacy. The configuration management mechanism <b>740</b> controls and manages the configuration of MIOP@NodeB <b>210</b>, MIOP@RNC <b>220</b>, and MIOP@Core <b>230</b> in a way that allows them to dynamically adapt to any suitable criteria, including data received from the network monitoring mechanism, time of day, information received from business intelligence <b>560</b>, etc.</p>
<p id="p-0072" num="0074"><figref idref="DRAWINGS">FIG. 9</figref> shows sample breakout criteria <b>520</b> shown in <figref idref="DRAWINGS">FIG. 5</figref> and used in step <b>1020</b> in <figref idref="DRAWINGS">FIG. 10</figref>. Suitable breakout criteria <b>520</b> includes access point name, user equipment identifier, user equipment type, quality of service, subscriber ID, mobile country code, and mobile network code. For example, breakout criteria <b>520</b> could specify to perform MIOP services for the operator's subscribers, and not to perform MIOP services for roamers. In another example, the breakout criteria <b>520</b> could specify to break out only video requests. A static breakout decision will be performed during PDP Context Activation. Based on IP flows (e.g. shallow packet inspection of the IP 5 tuple) only specific IP flows maybe identified and broken out dynamically within that PDP subscriber session (e.g., VOIP traffic), as discussed in more detail below with respect to <figref idref="DRAWINGS">FIG. 11</figref>. Breakout criteria <b>520</b> expressly extends to any suitable criteria for making the breakout decision.</p>
<p id="p-0073" num="0075">Referring again to <figref idref="DRAWINGS">FIG. 10</figref>, when the traffic satisfies the breakout criteria (step <b>1020</b>=YES), and the subscriber session is registered for breakout (step <b>1030</b>=YES), MIOP@RNC sends a message to MIOP@NodeB authorizing breakout of traffic for this subscriber session (step <b>1040</b>). In response, MIOP@NodeB begins decrypting the bearer, examining the signaling and user IP traffic tunneled through it and may breakout the traffic for this subscriber session (step <b>1050</b>). Note, however, MIOP@NodeB may still decide not to breakout all traffic based on other criteria, such as type of IP request the destination of the traffic or the ISO Layer 7 Application of the decrypted user traffic. Determination of the Application may be performed simply by inspection of the IP 5-tuple or optionally via inspection at layer 7 using Deep Packet Inspection (DPI) techniques. This is shown in the specific example in <figref idref="DRAWINGS">FIG. 11</figref>. Method <b>1050</b> in <figref idref="DRAWINGS">FIG. 10</figref> is one suitable implementation of step <b>1050</b> in <figref idref="DRAWINGS">FIG. 10</figref>. MIOP@NodeB monitors IP requests from the subscriber (step <b>1110</b>). When the user traffic IP request matches a specified type criteria (step <b>1120</b>=YES), the IP session is broken out for the subscriber (step <b>1130</b>). When the IP request does not match a specified criteria type (step <b>1120</b>=NO), no breakout is performed. For example, let's assume that IP requests to access video over the RTP layer 7 Application Protocol are broken out so the video data may be cached in MIOP@NodeB <b>210</b>, but other requests, such as Google searches, are not. The MIOP@NodeB monitors the IP requests from the subscriber (step <b>1110</b>), and when the subscriber session IP request carries RTP traffic is for a video file (step <b>1120</b>=YES), the IP session is broken out (step <b>1130</b>). Otherwise, the IP session is not broken out at MIOP@NodeB. This is one simple example to illustrate additional flexibility and intelligence within MIOP@NodeB that may determine whether or not to perform breakout for a given subscriber session at the MIOP@NodeB after being authorized by MIOP@RNC to perform breakout for that subscriber session. Any suitable criteria could be used to determine what to breakout and when at MIOP@NodeB once MIOP@NodeB has been authorized for breakout in step <b>1040</b> in <figref idref="DRAWINGS">FIG. 10</figref>.</p>
<p id="p-0074" num="0076">Referring to <figref idref="DRAWINGS">FIG. 12</figref>, method <b>1200</b> shows a method for determining when to run MIOP services. The Packet Data Protocol (PDP) activation context for a subscriber is monitored (step <b>1210</b>). A PDP activation context is established when user equipment <b>110</b> connects to tower <b>120</b> and the subscriber runs an application that triggers the PDP activation procedure. The core network will determine the subscriber, and perhaps corresponding user equipment. When MIOP services are allowed (step <b>1220</b>=YES), services for this subscriber session are run (step <b>1230</b>) upon the arrival of data from the subscriber. When MIOP services are not allowed (step <b>1220</b>=NO), no MIOP services are run. In one simple example, MIOP services in the mobile data network are allowed for authorized subscribers, but are not allowed for subscribers from a different wireless company that are roaming.</p>
<p id="p-0075" num="0077">MIOP services may require communicating between MIOP components on the overlay network. Referring to <figref idref="DRAWINGS">FIG. 13</figref>, a method <b>1300</b> shows communications by MIOP@NodeB when MIOP services are running (step <b>1310</b>). When the edge service mechanism requires communication with MIOP@RNC (step <b>1320</b>=YES), MIOP@NodeB exchanges messages with MIOP@RNC over the overlay network (step <b>1330</b>). When the edge service mechanism requires communication with MIOP@Core (step <b>1340</b>=YES), MIOP@NodeB exchanges messages with MIOP@Core over the overlay network (step <b>1350</b>). The overlay network thus allows the various MIOP components to communicate with each other when MIOP services are running.</p>
<p id="p-0076" num="0078"><figref idref="DRAWINGS">FIG. 14</figref> shows a method <b>1400</b> that shows communications by MIOP@RNC when MIOP services are running (step <b>1410</b>). When the RNC service mechanism requires communication with MIOP@NodeB (step <b>1420</b>=YES), MIOP@RNC exchanges messages with MIOP@NodeB over the overlay network (step <b>1430</b>). When the RNC service mechanism requires communication with MIOP@Core (step <b>1440</b>=YES), MIOP@RNC exchanges messages with MIOP@Core over the overlay network (step <b>1450</b>).</p>
<p id="p-0077" num="0079"><figref idref="DRAWINGS">FIG. 15</figref> shows a method <b>1500</b> that shows communications by MIOP@Core when MIOP services are running (step <b>1510</b>). When the core service mechanism requires communication with MIOP@NodeB (step <b>1520</b>=YES), MIOP@Core exchanges messages with MIOP@NodeB over the overlay network (step <b>1530</b>) relayed via MIOP@RNC. When the core service mechanism requires communication with MIOP@RNC (step <b>1540</b>=YES), MIOP@Core exchanges messages with MIOP@RNC over the overlay network (step <b>1550</b>).</p>
<p id="p-0078" num="0080"><figref idref="DRAWINGS">FIG. 16</figref> shows a method <b>1600</b> that is preferably performed by MIOP@NMS <b>240</b> in <figref idref="DRAWINGS">FIGS. 2 and 7</figref>. The performance and efficiency of the MIOP components that perform MIOP services are monitored (step <b>1610</b>). The MIOP components that perform MIOP services may include MIOP@NodeB <b>210</b>, MIOP@RNC <b>220</b>, and MIOP@Core <b>230</b>, assuming all of these components are present in the mobile data network <b>200</b>. When performance may be improved (step <b>1620</b>=YES), the performance of the MIOP components is adjusted (if implemented and applicable) by sending one or more network messages via the overlay network (step <b>1630</b>). Note also a human operator could also manually reconfigure the MIOP components to be more efficient.</p>
<p id="p-0079" num="0081">Referring to <figref idref="DRAWINGS">FIG. 17</figref>, implementations for MIOP@NodeB <b>210</b> and MIOP@RNC <b>220</b> are shown by way of example. Other implementations are possible within the scope of the disclosure and claims herein. User equipment <b>110</b> is connected to NodeB <b>130</b>. Note the antenna <b>120</b> shown in <figref idref="DRAWINGS">FIG. 2</figref> is not shown in <figref idref="DRAWINGS">FIG. 17</figref>, but is understood to be present to enable the communication between user equipment <b>110</b> and NodeB <b>130</b>. MIOP@NodeB <b>210</b> includes an edge cache mechanism <b>1730</b>, which is one suitable example of edge service mechanism <b>430</b> in <figref idref="DRAWINGS">FIG. 4</figref>. MIOP@NodeB <b>210</b> includes an interface referred to herein as IuB Data Offload Gateway (IuB DOGW) <b>1710</b>. This gateway <b>1710</b> implements the breakout mechanism <b>410</b> according to one or more specified breakout preconditions <b>420</b> shown in <figref idref="DRAWINGS">FIG. 4</figref>. IuB DOGW <b>1710</b> includes a switching application <b>1740</b>, an offload data handler <b>1750</b>, and a radio channel handler <b>1760</b>. The switching application <b>1740</b> is responsible for monitoring data packets received from NodeB <b>130</b>, forwards according to it configuration the broken out data packets to the offload data handler, relays the non-broken out data packets and control system flows to the RNC <b>140</b> via the original connections in the RAN. While switching application <b>1740</b> is shown as two separate boxes in <figref idref="DRAWINGS">FIG. 17</figref>, this is done to visually indicate the switching application <b>1740</b> performs switching on two different interfaces, the network interface and overlay network interface, but the switching application <b>1740</b> is preferably a single entity.</p>
<p id="p-0080" num="0082">When a breakout decision is made and MIOP@RNC <b>220</b> sends a message to MIOP@NodeB <b>210</b> authorizing breakout (see step <b>1040</b> in <figref idref="DRAWINGS">FIG. 10</figref>), when MIOP@NodeB decides to breakout specified user data, the specified user data received by the switching application <b>1740</b> from NodeB <b>130</b> is broken out, which means the switching application <b>1740</b> routes the specified user data to the offload data handler <b>1750</b> so the broken out data is routed to the data path defined for breakout data. The offload data handler <b>1750</b> may send the data to the edge cache mechanism <b>1730</b> for processing, which can route the data directly to MIOP@RNC <b>220</b> via the overlay network, as shown by the path with arrows going from NodeB <b>130</b> to MIOP@RNC <b>220</b>.</p>
<p id="p-0081" num="0083">User data that is not broken out and signaling traffic is routed directly back by the switching application <b>1740</b> to RNC. In this manner, non-broken out data and signaling traffic passes through the IuB DOGW <b>1710</b> to RNC <b>140</b>, while broken out data is routed by the IuB DOGW <b>1710</b> to a different destination. Note that edge cache mechanism <b>1730</b> may send messages to MIOP@RNC <b>220</b> as shown in <figref idref="DRAWINGS">FIG. 17</figref>, but the broken out messages themselves are not sent to MIOP@RNC <b>220</b>.</p>
<p id="p-0082" num="0084">MIOP@RNC <b>220</b> includes an interface referred to herein as IuPS data offload gateway (IuPS DOGW) <b>1770</b>. IuPS DO GW <b>1770</b> forwards all signaling and non-broken out data traffic from RNC <b>140</b> to SGSN <b>150</b> via the GTP tunnel. IuPS DOGW <b>1770</b> includes the breakout mechanism <b>510</b>, breakout criteria <b>520</b> and subscriber registration mechanism <b>530</b> shown in <figref idref="DRAWINGS">FIG. 5</figref> and discussed above with reference to <figref idref="DRAWINGS">FIG. 5</figref>. IuPS DOGW <b>1770</b> may exchange messages with IuB DOGW <b>1710</b> via the overlay network to perform any needed service in MIOP@NodeB <b>210</b> or MIOP@RNC <b>220</b>. For the specific implementation shown in <figref idref="DRAWINGS">FIG. 17</figref>, while the IuPS DOGW <b>1770</b> in MIOP@RNC <b>220</b> does not include an offload data handler, the IuPS DOGW <b>1770</b> could include an offload data handler and switching application similar to those shown in MIOP@NodeB <b>210</b> when MIOP@RNC <b>220</b> also needs to perform breakout of data.</p>
<p id="p-0083" num="0085">The IuPS DOGW <b>1770</b> includes a radio channel handler <b>1780</b>. The radio channel handlers <b>1760</b> in MIOP@NodeB <b>210</b> and <b>1780</b> in MIOP@RNC <b>220</b> monitor data traffic to and from RNC <b>140</b> related to a broken out subscriber session and provide a keep-alive channel maintenance mechanism.</p>
<p id="p-0084" num="0086">Specific methods are shown in <figref idref="DRAWINGS">FIGS. 18-21</figref> that illustrate how the specific implementation in <figref idref="DRAWINGS">FIG. 17</figref> could be used. <figref idref="DRAWINGS">FIGS. 18 and 19</figref> show a method <b>1800</b> for setting up breakout of data. The UE sends a connection request to the RNC (step <b>1810</b>). The RNC sets up a radio link via NodeB (step <b>1815</b>). The RNC then sets up a network connection with NodeB (step <b>1820</b>). The UE and SGSN then communicate for the attach and authentication procedure (step <b>1825</b>). IuB DOGW detects the leading message in the attach and authentication procedure, and registers the subscriber session with IuPS DOGW when preconditions are fulfilled (e.g. UE is capable to carry high speed traffic) (step <b>1830</b>). During the attach and authentication procedure, IuPS DOGW monitors the security context sent from SGSN to RNC (step <b>1835</b>). IuPS DOGW then sends keys to IuB DOGW (step <b>1840</b>). These keys are needed to decipher the upcoming signaling and UL user data and to cipher the DL user data. UE then requests PDP context activation to SGSN (step <b>1845</b>). In response, SGSN sets up a network tunnel to RNC (step <b>1850</b>). IuPS DOGW monitors network tunnel setup from SGSN to RNC and makes a decision breakout=YES (step <b>1855</b>). IuPS DOGW sends a message to IuB DOGW indicating breakout=YES (step <b>1860</b>). Continuing on <figref idref="DRAWINGS">FIG. 19</figref>, SGSN sends an RAB assignment request to UE (step <b>1865</b>). IuPS DOGW detects the RAB assignment request from SGSN to UE and replaces the SGSN transport address with IuPS DOGW transport address (step <b>1870</b>). IuPS DOGW sends a message to MIOP@Core indicating breakout=YES (step <b>1875</b>). RNC communicates with NodeB and UE to (re) configure signaling and data radio bearer (step <b>1880</b>). RNC acknowledges to SGSN when RAB assignment is complete (step <b>1885</b>). SGSN accepts PDP context activation by sending a message to UE (step <b>1890</b>). UE and SGSN may then exchange data for the PDP context (step <b>1895</b>).</p>
<p id="p-0085" num="0087">Referring to <figref idref="DRAWINGS">FIG. 20</figref>, a method <b>2000</b> begins by establishing a PDP context (step <b>2010</b>). Method <b>1800</b> in <figref idref="DRAWINGS">FIGS. 18 and 19</figref> include the detailed steps for establishing a PDP context. When breakout=YES, RAB assignment requests from SGSN to RNC are monitored by IuPS DOGW (step <b>2020</b>). IuPS DOGW modifies any RAB assignment requests from SGSN to RNC to replace the SGSN transport address in the RAB assignment request with the IuPS DOGW transport address (step <b>2030</b>) in case of matching breakout criteria during PDP context activation procedure. The switching application on IuB DOGW is configured upon the RAN transport layer setup to identify based on IP addresses and ports the broken out traffic and forwards this traffic to the Offload data handler <b>1765</b>, and forwards non-broken out traffic and control system data flows to the RNC (step <b>2040</b>).</p>
<p id="p-0086" num="0088">Referring to <figref idref="DRAWINGS">FIG. 21</figref>, a method <b>2100</b> begins when NodeB sends data towards RNC (step <b>2110</b>). The switching application in IuB DOGW redirects the broken out traffic to the edge service mechanism (step <b>2120</b>), such as edge cache mechanism <b>1730</b> in <figref idref="DRAWINGS">FIG. 17</figref>. The switching application also forwards non-broken out data and signaling data to the RNC (step <b>2130</b>) via the original RAN connections. The RNC can still receive data for non-broken out traffic from MIOP@NodeB when breakout=YES (step <b>2140</b>). The RNC then sends non-broken out traffic from MIOP@NodeB from UE when breakout=YES to IuPS DOGW transport address specified in RAB assignment request (step <b>2150</b>).</p>
<p id="p-0087" num="0089">A simple example is now provided for the specific implementation in <figref idref="DRAWINGS">FIG. 17</figref> to show how data can be cached and delivered by MIOP@NodeB <b>210</b>. Referring to <figref idref="DRAWINGS">FIG. 22</figref>, method <b>2200</b> represents steps performed in the implementation in <figref idref="DRAWINGS">FIG. 17</figref> for a cache miss. UE sends a data request to NodeB (step <b>2210</b>). NodeB sends the data request to IuB DOGW (step <b>2215</b>). We assume the requested data meets the offload criteria at MIOP@NodeB (step <b>2220</b>), which means MIOP@NodeB has been authorized to perform breakout and has determined this requested data should be broken out. IuB DOGW sends the data request to the edge cache mechanism (step <b>2225</b>). We assume the data is not present in the edge cache mechanism, so due to the cache miss, the edge cache mechanism sends the data request back to IuB DOGW (step <b>2230</b>). IuB DOGW then forwards the data request to MIOP@RNC via the overlay network (step <b>2235</b>). In the worst case the content is not cached on MIOP@RNC or MIOP@Core, MIOP@RNC routes the data request to via the overlay network to the MIOP@Core, which passes the data request up the line to the internet, which delivers the requested data to MIOP@Core, which delivers the requested data via the overlay network to MIOP@RNC (step <b>2240</b>). IuPS DOGW then sends the requested data to IuB DOGW (step <b>2245</b>). IuB DOGW then sends the requested data to the edge cache mechanism (step <b>2250</b>). The edge cache mechanism caches the requested data (step <b>2255</b>). The edge cache mechanism sends the requested data to IuB DOGW (step <b>2260</b>). The offload data handler in IuB DOGW sends the requested data to NodeB (step <b>2265</b>). NodeB then sends the requested data to UE (step <b>2270</b>). At this point, method <b>2200</b> is done.</p>
<p id="p-0088" num="0090">Method <b>2300</b> in <figref idref="DRAWINGS">FIG. 23</figref> shows the steps performed for a cache hit in the specific implementation in <figref idref="DRAWINGS">FIG. 17</figref>. The UE sends the data request to NodeB (step <b>2310</b>). NodeB sends the data request to IuB DOGW (step <b>2320</b>). The requested data meets the offload criteria at MIOP@NodeB (step <b>2330</b>). IuB DOGW sends the data request to the edge cache mechanism (step <b>2340</b>). Due to a cache hit, the edge cache mechanism sends the requested data from the cache to IuB DOGW (step <b>2350</b>). The offload data handler in IuB DOGW sends the requested data to NodeB (step <b>2360</b>). Node B then sends the requested data to UE (step <b>2370</b>). Method <b>2300</b> shows a great advantage in caching data at MIOP@NodeB. With data cached at MIOP@NodeB, the data may be delivered to the user equipment without any backhaul on the core network. The result is reduced network congestion in the core network while improving quality of service to the subscriber.</p>
<p id="p-0089" num="0091">The methods shown in <figref idref="DRAWINGS">FIGS. 18-23</figref> provide detailed steps for the specific implementation in <figref idref="DRAWINGS">FIG. 17</figref>. Other implementations may have detailed steps that are different than those shown in <figref idref="DRAWINGS">FIGS. 18-23</figref>. These are shown by way of example, and are not limiting of the disclosure and claims herein.</p>
<p id="p-0090" num="0092">As can be seen in method <b>2300</b> in <figref idref="DRAWINGS">FIG. 23</figref>, when a cache hit occurs at MIOP@NodeB, the MIOP@NodeB sends the requested data to the user equipment without having to retrieve the data from an external network such as internet <b>180</b>. The net result is improved quality of service for the subscriber while reducing backhaul in the core network. However, this reduction in backhaul due to serving data at the edge may have an unintended consequence. In known 3G networks, the RNC <b>140</b> is responsible for assigning radio channels to a subscriber session. Many RNCs initially assign a high-speed channel, then monitor the user traffic during the subscriber session. If the subscriber is actively using the channel above some specified threshold, the RNC maintains the high-speed channel for the subscriber session. If the user traffic falls below the specified threshold, the RNC performs a channel type switch from high-speed channel to low-speed channel. Note, however, that when data is being broken out at MIOP@NodeB and data requests may be satisfied from the local cache in the MIOP@NodeB, the normal backhaul is reduced such that the amount of traffic visible to the RNC is not indicative of the activity of the channel. Thus, the RNC could switch a channel that is very active and has a MIOP@NodeB serving a significant amount of data at the edge to a low-speed channel because the RNC does not see the activity within the MIOP @ NodeB.</p>
<p id="p-0091" num="0093">To avoid the problem of undesirable channel type switching by the RNC due to detected low activity by the RNC when the channel is actually active in the MIOP@NodeB, radio channel handlers may inject channel maintenance data packets so the RNC sees sufficient traffic to avoid a channel type switch. <figref idref="DRAWINGS">FIG. 24</figref> illustrates an expanded version of the MIOP@NodeB introduced in <figref idref="DRAWINGS">FIG. 4</figref>. In addition to the breakout mechanism <b>410</b>, edge service mechanism <b>430</b>, and the overlay network mechanism <b>440</b> described above, the MIOP@NodeB <b>2410</b> also preferably includes a radio channel handler <b>2420</b> that injects channel maintenance traffic in the uplink data stream in the radio access network. The radio channel handler <b>2420</b> includes a packet counter <b>2430</b>, a threshold <b>2440</b>, and a packet injection mechanism <b>2450</b>. The packet counter <b>2430</b> can count the number of packets for a selected channel in the MIOP@NodeB <b>2410</b>. The threshold <b>2440</b> is the desired data rate for a selected channel. The packet injection mechanism <b>2450</b> injects channel maintenance traffic packets when required into the uplink data stream in the radio access network.</p>
<p id="p-0092" num="0094"><figref idref="DRAWINGS">FIG. 25</figref> illustrates an expanded version of the MIOP@RNC introduced in <figref idref="DRAWINGS">FIG. 5</figref>. In addition to the breakout mechanism <b>510</b>, RNC service mechanism <b>540</b>, the overlay network mechanism <b>550</b>, and the business intelligence <b>560</b> described above, the MIOP@RNC <b>2510</b> also preferably includes a radio channel handler <b>2520</b> that injects channel maintenance traffic packets in the downlink data stream in the core network. The radio channel handler <b>2520</b> includes a packet counter <b>2530</b>, a threshold <b>2540</b>, and a packet injection mechanism <b>2550</b>. The packet counter <b>2530</b> can count the number of packets for a selected channel. The threshold <b>2540</b> is the desire data rate for a selected channel. The packet injection mechanism <b>2550</b> injects the channel maintenance traffic packets when required into the downlink data stream in the core network.</p>
<p id="p-0093" num="0095"><figref idref="DRAWINGS">FIG. 26</figref> illustrates an expanded version of the MIOP@NodeB and MIOP@RNC introduced in <figref idref="DRAWINGS">FIG. 17</figref>. We assume for this example the IuB Data Offload Gateway <b>2610</b> in <figref idref="DRAWINGS">FIG. 26</figref> performs all the functions discussed above with respect to IuB Data Offload Gateway <b>1710</b> in <figref idref="DRAWINGS">FIG. 17</figref>, in addition to performing other functions discussed below. We further assume the IuPS DOGW <b>2620</b> in <figref idref="DRAWINGS">FIG. 26</figref> performs all the functions discussed above with respect to IuPS DOGW <b>1770</b> in <figref idref="DRAWINGS">FIG. 17</figref>, in addition to performing other functions discussed below. <figref idref="DRAWINGS">FIG. 26</figref> shows the addition of the radio channel handler <b>2420</b> in the IuB DOGW <b>2610</b> and the addition of the radio channel handler <b>2520</b> in the IuPS DOGW <b>2620</b>. These correspond to radio channel handlers <b>1760</b> and <b>1780</b> shown in <figref idref="DRAWINGS">FIG. 17</figref> as discussed briefly above. These radio channel handlers <b>2420</b> and <b>2520</b> are used to maintain a channel to avoid undesired channel type switching by the RNC when breakout is occurring at the edge of the mobile data network (e.g., in a MIOP@NodeB). The radio channel handler <b>2420</b> in <figref idref="DRAWINGS">FIG. 26</figref> includes the packet counter <b>2430</b>, threshold <b>2440</b>, and packet injection mechanism <b>2450</b> shown in <figref idref="DRAWINGS">FIG. 24</figref> even though these are not explicitly shown in <figref idref="DRAWINGS">FIG. 26</figref> due to space constraints. Similarly, the radio channel handler <b>2520</b> in <figref idref="DRAWINGS">FIG. 26</figref> includes the packet counter <b>2530</b>, threshold <b>2540</b>, and packet injection mechanism <b>2550</b> shown in <figref idref="DRAWINGS">FIG. 25</figref> even though these are not explicitly shown in <figref idref="DRAWINGS">FIG. 26</figref> due to space constraints. The function of the radio channel handlers <b>2420</b> and <b>2520</b> in <figref idref="DRAWINGS">FIG. 26</figref> are now described with reference to the flow diagrams in <figref idref="DRAWINGS">FIGS. 27-32</figref>.</p>
<p id="p-0094" num="0096">Referring to <figref idref="DRAWINGS">FIG. 27</figref>, method <b>2700</b> is preferably performed by the radio channel handler <b>2420</b> in the MIOP@NodeB <b>2410</b> shown in <figref idref="DRAWINGS">FIG. 24</figref>, and the description below refers to both <figref idref="DRAWINGS">FIG. 24</figref> and <figref idref="DRAWINGS">FIG. 27</figref>. Note that maintenance data is only injected by the radio channel handlers <b>2420</b> and <b>2520</b> for broken-out channels. The MIOP@NodeB <b>2410</b> measures the average data rate for uplink and downlink traffic on a selected broken-out channel (step <b>2710</b>). When the average data rate is above the threshold (step <b>2720</b>=YES), method <b>2700</b> loops back to step <b>2710</b> and continues. When the average data rate is less than the threshold (step <b>2720</b>=NO), uplink channel maintenance traffic packets are inserted by MIOP@NodeB <b>2410</b> (step <b>2730</b>).</p>
<p id="p-0095" num="0097">One specific implementation for method <b>2700</b> in <figref idref="DRAWINGS">FIG. 27</figref> uses the specific configuration of MIOP@NodeB <b>2410</b> and MIOP@RNC <b>2510</b> shown in <figref idref="DRAWINGS">FIG. 26</figref>. MIOP@NodeB <b>2410</b> measures the average data rate in step <b>2710</b> using the offload data handler <b>1750</b> in IuB DOGW <b>2610</b>. We assume offload data handler <b>1750</b> determines the appropriate threshold, and sends this threshold to radio channel handler <b>2420</b>. The radio channel handler <b>2420</b> then performs step <b>2730</b> by inserting uplink data packets as needed (when the average data rate is not greater than the threshold (step <b>2720</b>=NO)) according to the threshold received from the offload data handler. Note the radio channel handler <b>2420</b> may also send the threshold to the radio channel handler <b>2520</b> in MIOP@RNC <b>2510</b> over the overlay network, such as in a non-real packet as shown in <figref idref="DRAWINGS">FIG. 33</figref>.</p>
<p id="p-0096" num="0098">Referring to <figref idref="DRAWINGS">FIG. 28</figref>, method <b>2800</b> is preferably performed by the radio channel handler <b>2520</b> in the MIOP@RNC <b>2510</b> shown in <figref idref="DRAWINGS">FIG. 25</figref>, and the description below refers to both <figref idref="DRAWINGS">FIG. 25</figref> and <figref idref="DRAWINGS">FIG. 28</figref>. The MIOP@RNC <b>2510</b> measures the average data rate for uplink and downlink traffic on a selected channel that is broken-out at MIOP@NodeB (step <b>2810</b>). When the average data rate is above the threshold (step <b>2820</b>=YES), method <b>2800</b> loops back to step <b>2810</b> and continues. When the average data rate is less than the threshold (step <b>2820</b>=NO), downlink channel maintenance traffic packets are inserted by MIOP@RNC <b>2510</b> (step <b>2730</b>). Note the threshold may be determined by IuPS DOGW <b>2620</b> performing method <b>2900</b> in <figref idref="DRAWINGS">FIG. 29</figref>, or the threshold may be received in a message (such as a channel maintenance data or &#x201c;non-real&#x201d; packet) from the radio channel handler <b>2420</b> via IuB DOGW <b>2610</b>.</p>
<p id="p-0097" num="0099">The thresholds <b>2440</b> and <b>2450</b> may be determined in any suitable manner. One suitable method for determining the value of thresholds <b>2440</b> and <b>2450</b> is shown in <figref idref="DRAWINGS">FIG. 2900</figref>. The average data rate for uplink and downlink for a given broken-out channel is measured (step <b>2910</b>). The lower bound for the current RNC allocation is then determined (step <b>2920</b>). The threshold is then set to the value of the lower ban plus some fixed delta (step <b>2930</b>). A simple example will illustrate. Let's assume the RNC allocates radio resources to a subscriber data session in 2<sup>n </sup>kbit steps based on measured actual average data rate in the downlink and uplink for the subscriber's channel. Let's further assume the average data rate measured in step <b>2910</b> for uplink and downlink for the subscriber's channel is 64 Kbps, which corresponds to 2<sup>6</sup>. The lower bound for the current RNC allocation is 2<sup>(n-1)</sup>, or 32 Kbps. The threshold is determined by taking the lower threshold of 32 Kbps and adding a fixed delta such as 2 Kbps to arrive at a threshold of 34 Kbps. For the RNC to perform channel type switching, it would have to see the average data rate fall below 32 Kbps. But the radio channel handlers <b>2420</b> and <b>2520</b> will assure the data rate does not fall below the threshold of 34 Kbps, which means the RNC will not do a channel type switch for this particular subscriber's channel.</p>
<p id="p-0098" num="0100">Note the threshold determined in method <b>2900</b> in <figref idref="DRAWINGS">FIG. 29</figref> is not necessarily a static threshold that does not change. To the contrary, the threshold may be dynamically adjusted to account for changing conditions. Thus, if the data rate measured in step <b>2910</b> doubles, the lower bound for the current RNC allocation changes, which will cause a corresponding change in the threshold. The result is a dynamically-changing threshold that assures the data rate does not drop so far that the RNC will perform a channel type switch. In the alternative, the threshold could be set to a static value. Some RNC implementations may implement a proprietary algorithm for channel type switching in which a very low data rate may be sufficient to induce a channel type switch. If this is the case, the threshold could be a static threshold that is set to a particular value as determined by the data rate in the RNC that may cause a channel type switch. Once set, the threshold may stay the same or be changed as needed.</p>
<p id="p-0099" num="0101">In a preferred implementation, only MIOP@NodeB determines the thresholds, then sends the applicable threshold to MIOP@RNC, as shown in <figref idref="DRAWINGS">FIG. 30</figref>. Method <b>3000</b> begins by the MIOP@NodeB measuring average data rate for uplink and downlink (step <b>3010</b>). This may be done by the offload data handler <b>1750</b> shown in <figref idref="DRAWINGS">FIG. 26</figref>. MIOP@NodeB then determines the thresholds for the radio channel handlers (step <b>3020</b>). Method <b>2900</b> shown in <figref idref="DRAWINGS">FIG. 29</figref> is one suitable way for the MIOP@NodeB to determine the threshold in step <b>3020</b>. MIOP@NodeB then sends the threshold value to MIOP@RNC in a channel maintenance data packet (step <b>3030</b>). This may be done by radio channel handler <b>2420</b> sending a channel maintenance data packet that includes the threshold via IuB DOGW <b>2610</b> to the radio channel handler <b>2520</b> in MIOP@RNC <b>2510</b> via IuPS DOGW <b>2620</b>. MIOP@RNC then uses the threshold value received from MIOP@NodeB to insert the requested rate for channel traffic maintenance into the downlink direction.</p>
<p id="p-0100" num="0102">In a preferred implementation, each uplink channel maintenance data packet sent by the radio channel handler <b>2420</b> in MIOP@NodeB <b>2410</b>, when detected by MIOP@RNC <b>2510</b>, will cause MIOP@RNC <b>2510</b> to send a corresponding downlink channel maintenance packet in the core network. In similar fashion, each downlink channel maintenance data packet sent by the radio channel handler <b>2520</b> in MIOP@RNC <b>2510</b>, when detected by MIOP@NodeB <b>2410</b>, will cause MIOP@NodeB <b>2410</b> to send a corresponding uplink channel maintenance data packet in the radio access network. Thus, there is a type of handshake between MIOP@NodeB <b>2410</b> and MIOP@RNC <b>2510</b> when exchanging channel maintenance data packets.</p>
<p id="p-0101" num="0103">Referring to <figref idref="DRAWINGS">FIG. 31</figref>, a method <b>3100</b> is preferably performed by MIOP@RNC <b>2510</b>, and starts when MIOP@RNC needs to send downlink channel maintenance data packets (step <b>3110</b>). Method <b>3100</b> checks to see if MIOP@RNC has any valid data it needs to send to MIOP@NodeB (step <b>3120</b>). When MIOP@RNC has no valid data it needs to send to MIOP@NodeB (step <b>3120</b>=NO), MIOP@RNC sends channel maintenance data packets without valid data to MIOP@NodeB (step <b>3130</b>). When MIOP@RNC has valid data it needs to send to MIOP@NodeB (step <b>3120</b>=YES), MIOP@RNC loads channel maintenance data packets with valid data (step <b>3140</b>), and sends the channel maintenance data packets with valid data to MIOP@NodeB (step <b>3150</b>). Method <b>3100</b> is then done. Note the packets send in step <b>3150</b> are channel maintenance data (i.e., not &#x201c;real&#x201d;) packets even though they contain valid data because the header information indicates the protocol ID of 254. Protocol ID 254 is used for experimental and testing purposes. Any packet that has a protocol ID of 254 is defined in the MIOP system as a channel maintenance data packet. So any channel maintenance data packet will have a protocol ID of 254, which informs MIOP@NodeB and MIOP@RNC they should terminate these packets because these are channel maintenance packets.</p>
<p id="p-0102" num="0104">Method <b>3100</b> may be used whenever MIOP@RNC has data it needs to send to MIOP@NodeB. One possible scenario where this would occur is when MIOP@NodeB provides an edge cache mechanism as shown in <figref idref="DRAWINGS">FIG. 17</figref>, and a user request for data results in a cache miss, as discussed above with reference to <figref idref="DRAWINGS">FIG. 22</figref>. Note that step <b>2245</b> in <figref idref="DRAWINGS">FIG. 22</figref> is for IuPS DOGW to send the requested data (retrieved as a result of the cache miss) to IuB DOGW. Some or all of this requested data could be sent in channel maintenance data packets as shown in method <b>3100</b> and discussed above. Method <b>3100</b> expressly extends to sending any suitable data that MIOP@RNC needs to communicate with MIOP@NodeB as data in channel maintenance data packets. By using channel maintenance data packets to convey valid data, the traffic in the mobile data network is reduced.</p>
<p id="p-0103" num="0105">Referring to <figref idref="DRAWINGS">FIG. 32</figref>, a flow diagram of a method is shown. Method <b>3200</b> determines when a subscriber is inactive (step <b>3210</b>). When the subscriber is inactive (step <b>3210</b>=YES), method <b>3200</b> disables generation of channel maintenance data packets by the radio channel handlers (step <b>3220</b>). Inactivity may be defined in step <b>3210</b> in any suitable way, such as subscriber activity that falls below some defined threshold.</p>
<p id="p-0104" num="0106">Referring to <figref idref="DRAWINGS">FIG. 33</figref>, a block diagram of a channel maintenance data packet <b>3300</b> is shown. The channel maintenance data packet includes an Ethernet header, an IP header, and a UDP header. A GTP header is also included, the value of which is an identifier for a channel maintenance data packet that needs to be generated. The dummy IP header includes a version field, an IP HL field, a TOS field, a data gram length, a sequence number identifier, flags, time to live, protocol, header checksum, source address, and destination address. What makes channel maintenance data packet <b>3300</b> a &#x201c;non-real&#x201d; or &#x201c;dummy&#x201d; packet is placing a value of 254 in the Protocol ID field in the dummy header. The payload for channel maintenance data packets may not contain any valid data. Note, however, in the channel maintenance data packet <b>3300</b> shown in <figref idref="DRAWINGS">FIG. 33</figref>, the threshold Ty in bytes per second may be specified. This allows the radio channel handlers <b>2420</b> and <b>2520</b> to communicate the threshold to each other, as shown in step <b>3030</b> in <figref idref="DRAWINGS">FIG. 30</figref>.</p>
<p id="p-0105" num="0107">The architecture of the MIOP system allows services to be layered or nested. For example, the MIOP system could determine to do breakout of high-speed channels at MIOP@NodeB, and to do breakout of low-speed channels at MIOP@RNC. In another example, MIOP@NodeB may have a cache, MIOP@RNC may also have a cache, and MIOP@Core may also have a cache. If there is a cache miss at MIOP@NodeB, the cache in MIOP@RNC could be checked, followed by checking the cache in MIOP@Core. Thus, decisions can be dynamically made according to varying conditions of what data to cache and where.</p>
<p id="p-0106" num="0108">To support the MIOP services that are possible with the mobile data network <b>200</b> shown in <figref idref="DRAWINGS">FIG. 2</figref>, the preferred configuration of MIOP@NodeB <b>210</b> is a combination of hardware and software. The preferred configuration of MIOP@RNC <b>220</b> is also a combination of hardware and software. The preferred configuration of MIOP@Core <b>230</b> is software only, and can be run on any suitable hardware in the core network. The preferred configuration of MIOP@NMS <b>240</b> is software only, and can also be run on any suitable hardware in the core network.</p>
<p id="p-0107" num="0109">In the most preferred implementation, the various functions of MIOP@NodeB <b>210</b>, MIOP@RNC <b>220</b>, MIOP@Core <b>230</b>, and MIOP@NMS <b>240</b> are performed in a manner that is nearly transparent to existing equipment in the mobile data network. Thus, the components in prior art mobile data network <b>100</b> that are also shown in the mobile data network <b>200</b> in <figref idref="DRAWINGS">FIG. 2</figref> have no knowledge of the existence of the various MIOP components, with the exception of existing routers that may need to be updated with routing entries corresponding to the MIOP components. The MIOP services are provided by the MIOP components in a way that requires no changes to hardware and only minor changes to software (i.e., new router entries) in any existing equipment in the mobile data network, thereby making the operation of the MIOP components transparent to the existing equipment once the MIOP components are installed and configured. The result is a system for upgrading existing mobile data networks as shown in <figref idref="DRAWINGS">FIG. 1</figref> in a way that does not require extensive hardware or software changes to the existing equipment. The MIOP services herein can thus be performed without requiring significant capital expenditures to replace or reprogram existing equipment.</p>
<p id="p-0108" num="0110">The mobile data network <b>200</b> disclosed herein includes MIOP components that provide a variety of different services that are not possible in prior art mobile data network <b>100</b>. In the most preferred implementation, the MIOP components do not affect voice traffic in the mobile data network. In addition to performing optimizations that will enhance performance in the form of improved download speeds, lower latency for access, or improved quality of experience in viewing multimedia on the mobile data network, the MIOP architecture also provides additional capabilities that may produce new revenue-generating activities for the carrier. For example, analytics may be performed on subscriber sessions that allow targeting specific subscribers with additional services from the carrier to generate additional revenue. For example, subscribers congregating for a live music event may be sent promotions on paid for media related to that event. In another example, subscribers getting off a train may be sent a coupon promoting a particular shuttle company as they walk up the platform towards the street curb. Also, premium web content in the form of video or other multimedia may be served from local storage and the subscriber would pay for the additional content and quality of service.</p>
<p id="p-0109" num="0111">While the mobile data network in <figref idref="DRAWINGS">FIG. 2</figref> and discussed herein is in the context of a 3G mobile data network, the disclosure and claims herein expressly extend to other networks as well, including Long Term Evolution (LTE) networks, flat RAN networks, and code division multiple access (CDMA) networks.</p>
<p id="p-0110" num="0112">As will be appreciated by one skilled in the art, aspects of the present invention may be embodied as a system, method or computer program product. Accordingly, aspects of the present invention may take the form of an entirely hardware embodiment, an entirely software embodiment (including firmware, resident software, micro-code, etc.) or an embodiment combining software and hardware aspects that may all generally be referred to herein as a &#x201c;circuit,&#x201d; &#x201c;module&#x201d; or &#x201c;system.&#x201d; Furthermore, aspects of the present invention may take the form of a computer program product embodied in one or more computer readable medium(s) having computer readable program code embodied thereon.</p>
<p id="p-0111" num="0113">Any combination of one or more computer readable medium(s) may be utilized. The computer readable medium may be a computer readable signal medium or a computer readable storage medium. A computer readable storage medium may be, for example, but not limited to, an electronic, magnetic, optical, electromagnetic, infrared, or semiconductor system, apparatus, or device, or any suitable combination of the foregoing. More specific examples (a non-exhaustive list) of the computer readable storage medium would include the following: an electrical connection having one or more wires, a portable computer diskette, a hard disk, a random access memory (RAM), a read-only memory (ROM), an erasable programmable read-only memory (EPROM or Flash memory), an optical fiber, a portable compact disc read-only memory (CD-ROM), an optical storage device, a magnetic storage device, or any suitable combination of the foregoing. In the context of this document, a computer readable storage medium may be any tangible medium that can contain, or store a program for use by or in connection with an instruction execution system, apparatus, or device.</p>
<p id="p-0112" num="0114">A computer readable signal medium may include a propagated data signal with computer readable program code embodied therein, for example, in baseband or as part of a carrier wave. Such a propagated signal may take any of a variety of forms, including, but not limited to, electro-magnetic, optical, or any suitable combination thereof. A computer readable signal medium may be any computer readable medium that is not a computer readable storage medium and that can communicate, propagate, or transport a program for use by or in connection with an instruction execution system, apparatus, or device.</p>
<p id="p-0113" num="0115">Program code embodied on a computer readable medium may be transmitted using any appropriate medium, including but not limited to wireless, wireline, optical fiber cable, RF, etc., or any suitable combination of the foregoing.</p>
<p id="p-0114" num="0116">Computer program code for carrying out operations for aspects of the present invention may be written in any combination of one or more programming languages, including an object oriented programming language such as Java, Smalltalk, C++ or the like and conventional procedural programming languages, such as the &#x201c;C&#x201d; programming language, Streams Processing language, or similar programming languages. The program code may execute entirely on the user's computer, partly on the user's computer, as a stand-alone software package, partly on the user's computer and partly on a remote computer or entirely on the remote computer or server. In the latter scenario, the remote computer may be connected to the user's computer through any type of network, including a local area network (LAN) or a wide area network (WAN), or the connection may be made to an external computer (for example, through the Internet using an Internet Service Provider).</p>
<p id="p-0115" num="0117">Aspects of the present invention are described herein with reference to flowchart illustrations and/or block diagrams of methods, apparatus (systems) and computer program products according to embodiments of the invention. It will be understood that each block of the flowchart illustrations and/or block diagrams, and combinations of blocks in the flowchart illustrations and/or block diagrams, can be implemented by computer program instructions. These computer program instructions may be provided to a processor of a general purpose computer, special purpose computer, or other programmable data processing apparatus to produce a machine, such that the instructions, which execute via the processor of the computer or other programmable data processing apparatus, create means for implementing the functions/acts specified in the flowchart and/or block diagram block or blocks.</p>
<p id="p-0116" num="0118">These computer program instructions may also be stored in a computer readable medium that can direct a computer, other programmable data processing apparatus, or other devices to function in a particular manner, such that the instructions stored in the computer readable medium produce an article of manufacture including instructions which implement the function/act specified in the flowchart and/or block diagram block or blocks.</p>
<p id="p-0117" num="0119">The computer program instructions may also be loaded onto a computer, other programmable data processing apparatus, or other devices to cause a series of operational steps to be performed on the computer, other programmable apparatus or other devices to produce a computer implemented process such that the instructions which execute on the computer or other programmable apparatus provide processes for implementing the functions/acts specified in the flowchart and/or block diagram block or blocks.</p>
<p id="p-0118" num="0120">The methods disclosed herein may be performed as part of providing a web-based service. Such a service could include, for example, offering the method to online users in exchange for payment.</p>
<p id="p-0119" num="0121">Note the disclosure herein uses comparisons to illustrate the concepts of the MIOP architecture. For example, <figref idref="DRAWINGS">FIG. 27</figref> includes step <b>2720</b> that determines when the average data rate is greater than the threshold. Note, however, these are given by way of example and illustration, and should not be construed as limiting. The same principles apply regardless of the specific comparison condition (e.g., greater than, or greater than or equal to). The disclosure and claims herein is not limited to any specific construction of the comparison conditions as shown in the specification and drawings.</p>
<p id="p-0120" num="0122">The disclosure and claims are directed to a mobile data network that includes service mechanisms and methods for performing services in the mobile data network. A first service mechanism performs services at or near a basestation, at the edge of the mobile data network. A second service mechanism performs services in the core network. These mechanisms communicate as needed via an overlay network. When data is broken out, the data is delivered at the edge of the mobile data network, which means the true activity of the channel is not visible to the core network. The reduction of data in the core network due to serving data at the edge risks causing a switch from a high-speed channel to a low-speed channel by the mechanism in the core network that performs channel speed monitoring and assignment. To assure this does not happen, radio channel handlers monitor both uplink and downlink traffic, and inject channel maintenance data packets to maintain a level of traffic on the network that assures the channel switch does not occur.</p>
<p id="p-0121" num="0123">One skilled in the art will appreciate that many variations are possible within the scope of the claims. Thus, while the disclosure is particularly shown and described above, it will be understood by those skilled in the art that these and other changes in form and details may be made therein without departing from the spirit and scope of the claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A mobile data network comprising:
<claim-text>a plurality of basestations, each basestation communicating with a corresponding antenna that transmits and receives radio signals to and from user equipment, wherein the plurality of basestations are part of a radio access network that communicates with a core network in the mobile data network;</claim-text>
<claim-text>a channel assignment and speed monitoring mechanism in the core network that performs channel assignment and assigns a selected channel in the radio access network to be a high-speed channel, and that monitors traffic on the selected channel, and when the channel assignment and speed monitoring mechanism detects a data rate on the selected channel below a defined threshold, the channel assignment and speed monitoring mechanism switches channel type of the selected channel from high-speed to low-speed;</claim-text>
<claim-text>a first service mechanism in the radio access network that defines an existing first data path in the radio access network for non-broken out data, defines a second data path for broken out data, identifies first data received from a corresponding basestation as data to be broken out, sends the first data on the second data path, and forwards other data that is not broken out on the first data path, wherein the first service mechanism performs a first service for network messages in the radio access network based on the first data, the first service mechanism including a first radio channel handler that injects a first plurality of channel maintenance data packets into an uplink data stream in the radio access network so the channel assignment and speed monitoring mechanism does not switch the selected channel from high-speed to low-speed; and</claim-text>
<claim-text>a second service mechanism in the core network that monitors network messages in the core network and performs a second service for the network messages in the mobile data network, the second service mechanism including a second radio channel handler that injects a second plurality of channel maintenance data packets into a downlink data stream in the core network so the channel assignment and speed monitoring mechanism does not switch the selected channel from high-speed to low-speed.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The mobile data network of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein the first radio channel handler measures average data rate for uplink and downlink for the selected channel, and when the average data rate is less than a first threshold, the first radio channel handler injects the first plurality of channel maintenance data packets for the selected channel into the uplink data stream in the radio access network.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The mobile data network of <claim-ref idref="CLM-00002">claim 2</claim-ref> wherein the second radio channel handler measures average data rate for uplink and downlink for the selected channel, and when the average data rate is less than a second threshold, the second radio channel handler injects the second plurality of channel maintenance data packets for the selected channel into the downlink data stream in the core network.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The mobile data network of <claim-ref idref="CLM-00002">claim 2</claim-ref> wherein the first radio channel handler determines the first threshold by measuring average data rate for uplink and downlink for the selected channel, determines a lower bound for a current data rate allocation, and determines the first threshold is equal to the lower bound plus a fixed value.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The mobile data network of <claim-ref idref="CLM-00002">claim 2</claim-ref> wherein the first radio channel handler sends the second threshold to the second radio channel handler.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The mobile data network of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein the second radio channel handler measures average data rate for uplink and downlink for the selected channel, and when the average data rate is less than a second threshold, the second radio channel handler injects the second plurality of channel maintenance data packets for the selected channel into the downlink data stream in the core network.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The mobile data network of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein the first service comprises caching of data in the radio access network and the second service comprises caching of data in the core network.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The mobile data network of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein at least one of the first plurality of channel maintenance data packets comprises a dummy header and valid data that needs to be communicated from the first service mechanism to the second service mechanism.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The mobile data network of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein at least one of the second plurality of channel maintenance data packets comprises a dummy header and valid data that needs to be communicated from the second service mechanism to the first service mechanism.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The mobile data network of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein the injecting of the first plurality of channel maintenance data packets into the uplink data stream in the radio access network and the injecting of the second plurality of channel maintenance data packets into the downlink data stream in the core network is inhibited when a data rate on a channel corresponding to a selected subscriber indicates the subscriber is inactive.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. A mobile data network comprising:
<claim-text>a plurality of antennas that transmit and receive radio signals to and from user equipment;</claim-text>
<claim-text>a plurality of basestations, each basestation communicating with a corresponding one of the plurality of antennas, wherein the plurality of basestations are part of a radio access network that communicates with a core network in the mobile data network;</claim-text>
<claim-text>a channel assignment and speed monitoring mechanism in the core network that performs channel assignment and assigns a selected channel in the radio access network to be a high-speed channel, and that monitors traffic on the selected channel, and when the channel assignment and speed monitoring mechanism detects a data rate on the selected channel below a defined threshold, the channel assignment and speed monitoring mechanism switches channel type of the selected channel from high-speed to low-speed;</claim-text>
<claim-text>a first service mechanism in the radio access network that defines an existing first data path in the radio access network for non-broken out data, defines a second data path for broken out data, identifies first data received from a corresponding basestation as data to be broken out, sends the first data on the second data path, and forwards other data that is not broken out on the first data path, wherein the first service mechanism provides first caching of data in the radio access network based on the first data, the first service mechanism including a first radio channel handler that measures average data rate for uplink and downlink for a selected channel, and when the average data rate is less than a first threshold, the first radio channel handler injects a first plurality of channel maintenance data packets for the selected channel into the uplink data stream in the radio access network so the channel assignment and speed monitoring mechanism does not switch the selected channel from high-speed to low-speed, wherein the first radio channel handler sends the first threshold to a second radio channel handler, the first threshold comprising a lower bound for a current data rate allocation plus a fixed amount;</claim-text>
<claim-text>the second service mechanism in the core network that monitors network messages in the core network and provides second caching of data in the core network, the second service mechanism including a second radio channel handler that measures average data rate for uplink and downlink for the selected channel, and when the average data rate is less than the first threshold received from the first radio channel handler, the second radio channel handler injects a second plurality of channel maintenance data packets for the selected channel into the downlink data stream in the core network so the channel assignment and speed monitoring mechanism does not switch the selected channel from high-speed to low-speed; and</claim-text>
<claim-text>an overlay network connecting the first service mechanism and the second service mechanism, wherein the overlay network comprises a virtual private network;</claim-text>
<claim-text>wherein the first plurality of channel maintenance data packets comprise a first channel maintenance data header and first valid data that needs to be communicated from the first service mechanism to the second service mechanism;</claim-text>
<claim-text>wherein the second plurality of channel maintenance data packets comprise a second channel maintenance data header and second valid data that needs to be communicated from the second service mechanism to the first service mechanism; and</claim-text>
<claim-text>wherein the injecting of the first plurality of channel maintenance data packets into the uplink data stream in the radio access network by the first service mechanism and the injecting of the second plurality of channel maintenance data packets into the downlink data stream in the core network by the second service mechanism is inhibited when a data rate on the selected channel corresponding to a subscriber indicates the subscriber is inactive. </claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
