<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08627116-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08627116</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>11890672</doc-number>
<date>20070807</date>
</document-id>
</application-reference>
<us-application-series-code>11</us-application-series-code>
<us-term-of-grant>
<us-term-extension>1633</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>1</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>1</main-group>
<subgroup>32</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>713300</main-classification>
<further-classification>713320</further-classification>
<further-classification>713323</further-classification>
<further-classification>726 23</further-classification>
</classification-national>
<invention-title id="d2e53">Power conservation in an intrusion detection system</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>4851987</doc-number>
<kind>A</kind>
<name>Day</name>
<date>19890700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
<classification-national><country>US</country><main-classification>364200</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>4999794</doc-number>
<kind>A</kind>
<name>Yakushiji</name>
<date>19910300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
<classification-national><country>US</country><main-classification>364707</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>5142684</doc-number>
<kind>A</kind>
<name>Perry et al.</name>
<date>19920800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
<classification-national><country>US</country><main-classification>395750</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>6607137</doc-number>
<kind>B2</kind>
<name>Morales</name>
<date>20030800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>235492</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>6868362</doc-number>
<kind>B1</kind>
<name>Oda et al.</name>
<date>20050300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>702158</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>6941481</doc-number>
<kind>B2</kind>
<name>Oshima et al.</name>
<date>20050900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
<classification-national><country>US</country><main-classification>713324</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2005/0182961</doc-number>
<kind>A1</kind>
<name>Timmermans et al.</name>
<date>20050800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>713200</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2008/0025525</doc-number>
<kind>A1</kind>
<name>Tsai</name>
<date>20080100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>381 74</main-classification></classification-national>
</us-citation>
<us-citation>
<nplcit num="00009">
<othercit>Code segment commercially available Nov. 2005, 2 pages.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>23</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>713300</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>713320</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>713323</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>726 23</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>4</number-of-drawing-sheets>
<number-of-figures>6</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20090040063</doc-number>
<kind>A1</kind>
<date>20090212</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Yearsley</last-name>
<first-name>Gyle D</first-name>
<address>
<city>Boise</city>
<state>ID</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Yearsley</last-name>
<first-name>Gyle D</first-name>
<address>
<city>Boise</city>
<state>ID</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>North, Weber &#x26; Baugh LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Maxim Integrated Products, Inc.</orgname>
<role>02</role>
<address>
<city>San Jose</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Yanchus, III</last-name>
<first-name>Paul</first-name>
<department>2116</department>
</primary-examiner>
<assistant-examiner>
<last-name>Brown</last-name>
<first-name>Michael J</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">In a tamper detection system, a control system controls power consumption by sensors and power consumption of a state machine that controls operations of the sensors. A first state machine controls which sensor is activated. A second state machine controls the operations performed by the activated sensor and the operations are timed according to a clock signal. Prior to activating a sensor, the second state machine is in a wait state. The clock signal is gated so that the logic state of the clock signal does not change when the second state machine is in a wait state. Power consumption by the state machine is reduced by gating the clock signal so that the clock signal is held to a fixed value. Immediately after the activated sensor performs all operations, the second state machine samples the pass or fail result from the sensor. Power consumption by the activated sensor is reduced by sampling the pass or fail result of the sensor immediately after the sensor performs the last operation and immediately turning off the sensor after sampling the pass or fail result. The second state machine enters another wait state after sampling of the pass or fail result.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="174.33mm" wi="140.38mm" file="US08627116-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="213.61mm" wi="149.18mm" orientation="landscape" file="US08627116-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="210.99mm" wi="178.05mm" file="US08627116-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="221.91mm" wi="156.29mm" file="US08627116-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="189.65mm" wi="139.36mm" file="US08627116-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">CROSS REFERENCE TO COMPACT DISC APPENDIX</heading>
<p id="p-0002" num="0001">The Compact Disc, which is a part of the present disclosure, includes a recordable Compact Disc (CD-R) containing information that is part of the disclosure of the present patent document. A portion of the disclosure of this patent document contains material that is subject to copyright protection. All the material on the Compact Disc is hereby expressly incorporated by reference into the present application. The copyright owner of that material has no objection to the facsimile reproduction by anyone of the patent document or the patent disclosure, as it appears in the Patent and Trademark Office patent files or records, but otherwise reserves all copyright rights.</p>
<heading id="h-0002" level="1">TECHNICAL FIELD</heading>
<p id="p-0003" num="0002">The present invention relates to techniques for reducing power consumption of a tamper sensing system.</p>
<heading id="h-0003" level="1">BACKGROUND</heading>
<p id="p-0004" num="0003">Point of sale (POS) terminals allow customers to make payments using a variety of payment instruments such as credit cards, debit cards, smart cards, and ATM cards. To ensure that the payment information transmitted from the POS terminals to a payment center is not accessed by unauthorized recipients, this information is typically encrypted and secured (e.g., using digital authentication) during transmission. However, confidential payment information entered by the user into the POS terminal could still be intercepted by tampering with the integrated circuits of the POS terminal. Thieves can use such information to fraudulently receive payment.</p>
<p id="p-0005" num="0004">POS terminals have a battery backup to maintain storage of confidential information when the power is off. Battery life is an important factor to the life of a POS terminal in the field. To extend battery life, low current consumption from the battery is desirable when the battery powers the POS terminal. Sensors consume current from the battery when sensors are turned on. POS terminals use sensors to detect whether tampering with the POS terminal has taken place. It is desirable to minimize the amount of power consumed by the sensors and systems that control and monitor sensor operations.</p>
<heading id="h-0004" level="1">SUMMARY</heading>
<p id="p-0006" num="0005">Power consumption of a system that detects potential tampering with a POS terminal is reduced in part by fixing a received clock to a fixed value and having a sampling operation of pass/fail indication from a selected sensor immediately following a last operation of the selected sensor. A first state machine selects a sensor to be activated. A second state machine controls whether the selected sensor consumes power and the operation performed by the selected sensor. The second state machine receives a clock signal. When the second state machine is in a wait state for a next sensor and the first state machine has not selected the next sensor, the received clock signal is held at a fixed value. In response to the first state machine selecting the next sensor, the second state machine controls the received clock signal to toggle between logic high and low values and the second state machine allows the activated sensor to consume power. Immediately after the activated sensor has completed all operations, the second state machine samples the pass/fail result from the sensor. After sampling the pass/fail result, the second state machine enters a wait state for a next sensor and controls the selected sensor to stop consuming power and also fixes the received clock signal to a fixed value.</p>
<p id="p-0007" num="0006">Power consumption by the state machine is reduced when the second state machine does not receive an oscillating clock signal. Power consumption by the sensor is reduced by having no delay between a final operation of the sensor and the sampling of its pass/fail result. Were there a delay between a final operation of the sensor and the sampling of its pass/fail result, the sensor would consume power even though it does not perform any operation.</p>
<p id="p-0008" num="0007">Other embodiments and advantages are described in the detailed description below. This summary does not purport to define the inventions. The inventions are defined by the claims.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0009" num="0008">The accompanying drawings, where like numerals indicate like components, illustrate embodiments.</p>
<p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. 1</figref> is a cross-sectional diagram of a portion of a point of sale (POS) terminal that includes a POP secure module.</p>
<p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. 2</figref> is a simplified circuit diagram that shows another way that first and second meshes can be connected to an integrated circuit die, in accordance with an embodiment.</p>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 3</figref> is a simplified block diagram of a system that controls the power use of sensors and the second state machine, in accordance with an embodiment.</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 4</figref> depicts an embodiment of a clock gate of <figref idref="DRAWINGS">FIG. 3</figref>, in accordance with an embodiment.</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 5</figref> depicts a waveform diagram of signals generated by the system of <figref idref="DRAWINGS">FIG. 3</figref>, in accordance with an embodiment.</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 6</figref> depicts a flow diagram of a process that controls power use of sensors, in accordance with an embodiment.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0006" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0016" num="0015">Reference will now be made in detail to some embodiments of the invention, examples of which are illustrated in the accompanying drawings.</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 1</figref> is a cross-sectional diagram of a portion of a point of sale (POS) terminal <b>100</b> that includes POP secure module <b>10</b>. For additional details of POP secure module <b>10</b>, see: U.S. patent application Ser. No. 11/800,175, entitled &#x201c;PACKAGE-ON-PACKAGE SECURE MODULE HAVING BGA MESH CAP&#x201d;, filed May 3, 2007, inventors Eaton, Staab, and Zeta, which is incorporated herein by reference in its entirety. A plastic enclosure of POS terminal <b>100</b> is not illustrated. POP secure module <b>10</b>, a FLASH memory device <b>101</b>, a battery <b>102</b>, and a smart card reader port <b>103</b> are surface mounted to a first side of a printed circuit board <b>104</b>. A flexible keypad <b>105</b> and a tamper detect switch <b>106</b> are disposed on a second side of the printed circuit board <b>104</b> opposite module <b>10</b>. Each of the keys of keypad <b>105</b> has a conductive portion. When the key is pressed, the conductive portion of the key makes contact with and couples together an associated pair of interdigitated contact pads on printed circuit board <b>104</b>. Integrated circuit die <b>14</b> includes key scanning circuitry for detecting which key is pressed.</p>
<p id="p-0018" num="0017">As illustrated in <figref idref="DRAWINGS">FIG. 1</figref>, the second anti-tamper security mesh <b>50</b> is disposed in a metal trace layer within printed circuit board <b>104</b>. The interdigitated contact pads for the keypad are parts of the bottom metal layer. Second anti-tamper security mesh <b>50</b> is located in the next bottom most metal layer so that it is close to keypad <b>105</b>. Providing mesh <b>50</b> close to keypad <b>105</b> helps prevent a hacker from gaining access to the backside of the keypad and monitoring key presses.</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 2</figref> is a simplified circuit diagram that shows another way that first and second meshes <b>39</b> and <b>50</b> can be connected to integrated circuit die <b>14</b>, in accordance with an embodiment. In this example, first mesh <b>39</b> extends laterally through the substrate member of the second BGA package portion <b>12</b> and second mesh <b>50</b> extends laterally through printed circuit board <b>104</b>. Meshes <b>39</b> and <b>50</b> are, however, driven and monitored from only two terminals of integrated circuit <b>14</b>. First conductor <b>109</b> (WIRE<b>0</b>) extends from terminal <b>40</b>, through a bond wire, then up through the substrate member of the second BGA package portion, laterally through the substrate member, then back down through a bond ball of the second BGA package portion and to bond ball <b>19</b> of the first BGA package portion. From bond ball <b>19</b>, the conductor continues down into the printed circuit board <b>104</b> upon which the secure module <b>10</b> is disposed. The conductor extends laterally through the mesh layer of the printed circuit board as a part of second mesh <b>50</b>, and then extends back up to another bond ball <b>20</b> of the first BGA package portion. Band ball <b>20</b> is connected through the first BGA package portion to discrete resistor <b>111</b>. The second conductor <b>110</b> (WIRE<b>1</b>) is connected in similar fashion. The second conductor <b>110</b> extends from integrated circuit terminal <b>45</b>, through another bond wire, then up through the substrate member of the second BGA package portion, laterally through the substrate member, then back down through a bond ball of the second BGA package portion and to bond ball <b>18</b> of the first BGA package portion. From bond ball <b>18</b>, the conductor continues down into the printed circuit board <b>104</b> upon which the secure module <b>10</b> is disposed. The conductor extends laterally through the mesh layer of the printed circuit board as a part of second mesh <b>50</b>, and then extends back up to another bond ball <b>21</b> of the first BGA package portion. Band ball <b>21</b> is connected through the first BGA package portion to discrete resistor <b>112</b>. The first mesh <b>39</b> and the second mesh <b>50</b> are therefore not driven and monitored separately from one another, but actually form a single larger anti-tamper mesh structure that extends both over and underneath the integrated circuits within the secure module <b>10</b>. If the secure module <b>10</b> is to be used in a configuration without second mesh <b>50</b>, then bond ball <b>19</b> can be coupled directly to bond ball <b>20</b> by a short trace on printed circuit board <b>104</b> or alternatively by a connection on secure module <b>10</b> itself. In the same way, bond ball <b>18</b> would be coupled directly to bond ball <b>21</b>.</p>
<p id="p-0020" num="0019">In response to unauthorized access to integrated circuit die <b>14</b> within POS terminal <b>100</b>, sensitive information (such as sensitive financial, identification information, and encryption keys) stored within SRAM <b>31</b> is overwritten. Unauthorized access to components within POS terminal <b>100</b> can be detected using sensors that detect tamper events. In response to detection of one or more tamper event, an alarm is triggered, and a memory that stores sensitive information is overwritten or erased. In one aspect, multiple events detected by a particular sensor occur prior to triggering an alarm to overwrite or erase memory. For example, multiple events arising out of the temperature being too high or too low cause triggering of an alarm.</p>
<p id="p-0021" num="0020">For example, tamper switches are positioned at various places in the POS terminal such that opening the POS terminal enclosure will cause one of more of these switches to open. For example, the top and bottom portions of the plastic enclosure of the POS terminal together may hold one of these switches in the closed position. If the enclosure is opened, then the top and bottom portions will separate and will no longer hold switch <b>106</b> in the closed position. When a switch opens, the voltage on terminal <b>113</b> will no longer be pulled to ground potential by resistor <b>115</b>, but rather the voltage on terminal <b>113</b> will be pulled high by a resistor internal to integrated circuit die <b>14</b>. Tamper control logic <b>116</b> uses a switch sensor to determine whether a voltage at terminal <b>113</b> is high or ground. This high voltage event is detected by tamper control logic <b>116</b>.</p>
<p id="p-0022" num="0021">Tampering with mesh <b>39</b> or <b>50</b> is detected as an event by tamper control logic <b>116</b> using a wire sensor. The wire sensor detects whether the mesh has been tampered with by determining whether an impedance of the mesh has changed. For example, U.S. patent application Ser. No. 11/800,175, entitled &#x201c;PACKAGE-ON-PACKAGE SECURE MODULE HAVING BGA MESH CAP&#x201d;, filed May 3, 2007, inventors Eaton, Staab, and Zeta, describes suitable techniques for using a mesh to detect unauthorized access to integrated circuit <b>14</b>. Tamper control logic <b>116</b> determines whether a temperature of integrated circuit <b>14</b> is too high or too low using a temperature sensor. If the temperature is too high or too low, an event is recorded. In addition, tamper control logic <b>116</b> records an event of any of: bias voltage level is too high or too low; the frequency of clock signal used by integrated circuit <b>14</b> is too high or too low; or powering up or down the integrated circuit <b>14</b>.</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 3</figref> is a simplified block diagram of a system <b>200</b> that controls the power use of sensors and a second state machine, in accordance with an embodiment. In one aspect, tamper and memory control logic <b>116</b> of <figref idref="DRAWINGS">FIG. 2</figref> includes the state machines and sensors of <figref idref="DRAWINGS">FIG. 3</figref>. System <b>200</b> controls which sensor consumes power and whether second state machine <b>204</b> receives an oscillating clock signal. System <b>200</b> includes a first state machine <b>202</b>, first clock source CLK<b>1</b>, second state machine <b>204</b>, second clock source CLK<b>2</b>, and sensors <b>0</b> to <b>2</b>. First state machine <b>202</b> is implemented as a serial-in, parallel-out shift register with a number of output bits equal to the number of sensors. In this example, there are three sensors, sensors <b>0</b> to <b>2</b>. Accordingly, first state machine <b>202</b> outputs three bits B<b>0</b> to B<b>2</b>. Bits B<b>0</b> to B<b>2</b> control which of respective sensors <b>0</b> to <b>2</b> is activated. When a logic one is in a bit position B<b>0</b>, sensor <b>0</b> is activated, when a logic one is in a bit position B<b>1</b>, sensor <b>1</b> is activated, and so forth. At each rising edge of clock signal CLK<b>1</b>, first state machine <b>202</b> shifts a logic one to position B<b>0</b> then to position B<b>1</b> and then to position B<b>2</b>. In one implementation, the clock signal CLK<b>1</b> is a divided down version of clock signal CLK<b>2</b> so that clock signal CLK<b>1</b> is slower than clock signal CLK<b>2</b>.</p>
<p id="p-0024" num="0023">In response to a sensor being selected for activation, second state machine <b>204</b> receives an oscillating clock signal CLK<b>2</b> and controls the operations of the enabled sensor timed according to the second clock signal CLK<b>2</b>. In one aspect, each sensor operation can be designed so that it takes as few a number of cycles of clock signal CLK<b>2</b> to complete as possible so that power consumption is minimized. When second state machine <b>204</b> is in a wait state for a next sensor and first state machine <b>202</b> has not selected the next sensor for activation, second state machine <b>204</b> receives a clock signal CLK<b>2</b> held at a fixed value. Clock gate <b>206</b> controls whether the received clock signal CLK<b>2</b> is an oscillating clock signal or is held at a fixed value of logic one. A suitable implementation of clock gate <b>206</b> is shown in <figref idref="DRAWINGS">FIG. 4</figref>.</p>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. 4</figref> depicts an embodiment of a clock gate of <figref idref="DRAWINGS">FIG. 3</figref>, in accordance with an embodiment. In this example, clock gate is implemented as an OR gate having a first input of clock signal CLK<b>2</b> and a second input of logic zero or logic one. The logic value of the second input is set to logic zero after B<b>0</b>, B<b>1</b>, or B<b>2</b> transitions from logic zero to logic one and the logic value of the second input is set to logic one after SP<b>0</b>, SP<b>1</b>, or SP<b>2</b> transitions from logic one to logic zero. When second input is logic zero, the received clock signal CLK<b>2</b> is the same as clock signal CLK<b>2</b>. When second input is logic one, the received clock signal CLK<b>2</b> is held at logic one. The output from clock gate <b>206</b> is referred to as the received clock signal CLK<b>2</b>.</p>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. 5</figref> depicts a waveform diagram of signals generated by system <b>200</b> of <figref idref="DRAWINGS">FIG. 3</figref>, in accordance with an embodiment. Prior to signal B<b>0</b> changing to a logic one, second state machine <b>204</b> is in a sensor <b>0</b> wait state. During the sensor <b>0</b> wait state, second state machine <b>204</b> waits for activation of sensor <b>0</b> so that immediately after activation of sensor <b>0</b>, second state machine <b>204</b> controls operations of sensor <b>0</b>. In addition, prior to signal B<b>0</b> changing to a logic one, the state of received clock signal CLK<b>2</b> is held at a logic one value so that second state machine <b>204</b> does not consume power caused by receiving an oscillating clock signal. When second state machine <b>204</b> receives an oscillating clock signal, current is consumed in part by second state machine <b>204</b> from the battery source due in part to capacity loading and turning on N and P channels. A rising edge at signal B<b>0</b> causes received clock signal CLK<b>2</b> to toggle to logic zero and then toggle high and low in the same manner as clock signal CLK<b>2</b>.</p>
<p id="p-0027" num="0026">The next rising edge of received clock signal CLK<b>2</b> causes second state machine <b>204</b> to output a sensor power signal SP<b>0</b> for sensor <b>0</b> in a logic one state. Second state machine <b>204</b> is in a power down wait state until sensor power signal SP<b>0</b> changes to the logic one state. After sensor power signal SP<b>0</b> transitions to a logic one state, second state machine <b>204</b> controls sensor <b>0</b> to perform a first operation for sensor <b>0</b>, namely ST<b>1</b>. Second state machine <b>204</b> controls operations ST<b>1</b>-ST<b>3</b> performed by sensor <b>0</b> timed according to clock signal CLK<b>2</b> so that each of operations ST<b>1</b>-ST<b>3</b> can take one or more clock cycles of clock signal CLK<b>2</b>. When sensor <b>0</b> is a wire sensor, operations performed that involve consuming power during ST<b>1</b> to ST<b>3</b> include powering-on a comparator component (e.g., voltage or current). When sensor <b>0</b> is a switch sensor or a temperature sensor, operations performed that involve consuming power during ST<b>1</b> to ST<b>3</b> include powering-on a comparator component (e.g., voltage or current) and then powering-on a current source component.</p>
<p id="p-0028" num="0027">Immediately after completion of operation ST<b>3</b>, second state machine <b>204</b> samples the pass/fail indication from sensor <b>0</b>. A pass indication indicates that the sensor has not detected tampering with the sensed item (e.g., switch, wire, or temperature) based on measurements taken using the powered-on components. A fail indication indicates that the sensor has detected tampering with the sensed item (e.g., switch, wire, or temperature) based on measurements taken using the powered-on components. Completion of sampling the pass/fail state from sensor <b>0</b> causes second state machine <b>204</b> to change signal SP<b>0</b> for sensor <b>0</b> to logic zero. After completion of sampling of pass/fail output from sensor <b>0</b>, second state machine <b>204</b> enters a wait state for a next sensor, sensor <b>1</b>. The next step performed by second state machine after the wait state for sensor <b>1</b> is operation ST<b>1</b> for sensor <b>1</b>. The change of signal SP<b>0</b> to logic zero causes the output from clock gate <b>206</b> of the received clock signal CLK<b>2</b> to be held at a logic one state.</p>
<p id="p-0029" num="0028">When the sensor power signal SP<b>0</b> for sensor <b>0</b> falls to logic zero, components of sensor <b>0</b> cease to consume power. For example, when sensor <b>0</b> is a wire sensor, the comparator of the wire sensor stops consuming power. For example, when sensor <b>0</b> is a switch sensor, the comparator and current source of the switch sensor stop consuming power. For example, when sensor <b>0</b> is a temperature sensor, the comparator and current source of the temperature sensor stop consuming power. When the state of received clock signal CLK<b>2</b> is held at a logic one value, second state machine <b>204</b> does not consume power from receiving an oscillating clock signal.</p>
<p id="p-0030" num="0029">Subsequently, when signal B<b>1</b> transitions to logic one, clock gate <b>206</b> allows received clock signal CLK<b>2</b> to match clock signal CLK<b>2</b>. The next rising edge of received clock signal CLK<b>2</b> causes second state machine <b>204</b> to change sensor power signal SP<b>1</b> for sensor <b>1</b> to a logic one state. Signal sensor power SP<b>1</b> for sensor <b>1</b> transitioning to a logic one state causes sensor <b>1</b> to power on the component used during sensing operation ST<b>1</b>. Sensor <b>1</b> can be a wire, switch, or temperature sensor but is not the same as sensor <b>0</b>.</p>
<p id="p-0031" num="0030">By contrast, some known systems have a gap in time between when the sensor completes performing all operations and a time of sampling of pass/fail despite not performing any operation during that gap in time. Accordingly, the systems consume power during the gap even though no operation is performed because the selected sensor consumes power during the gap and second state machine consumes power during the gap because it receives an oscillating clock signal. System <b>200</b> controls operations of a sensor to be sequential with no gap between when the sensor completes performing all operations and a time of sampling of a pass/fail indication. For example, with reference to the example of <figref idref="DRAWINGS">FIG. 5</figref>, there is no gap between operation ST<b>3</b> and the sampling of pass/fail state for sensor <b>0</b>. Accordingly, there is potentially no power consumption between when a last operation takes place and a sample pass/fail state.</p>
<p id="p-0032" num="0031">Some known systems have state machines that control operations of the sensors and the state machines receive oscillating clock signals even when no sensor is operating. Accordingly, such systems consume power from receiving an oscillating clock signal when the system does not control any sensor. By contrast, system <b>200</b> fixes a clock signal to a value when second state machine <b>204</b> is in a wait state for a next sensor and first state machine <b>202</b> has not selected the next sensor and avoids power consumption arising out of receiving an oscillating clock signal.</p>
<p id="p-0033" num="0032">Some known systems employ asynchronous control logic that uses short &#x201c;one shot&#x201d; pulses and analog delays to control whether a sensor is on or off and to sample the output from a sensor. However, such asynchronous systems do not synthesize well using register transfer level (RTL). By contrast, system <b>200</b> operates synchronously by using clock signals CLK<b>1</b> and CLK<b>2</b> and the frequency of clock signal CLK<b>1</b> is a multiple of that of clock signal CLK<b>2</b>.</p>
<p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. 6</figref> depicts a flow diagram of a process <b>300</b> to control power use of sensors, in accordance with an embodiment. In action <b>301</b>, a sensor is selected for activation. Referring to <figref idref="DRAWINGS">FIG. 5</figref>, first state machine <b>202</b> outputs a logic one on one of bits B<b>0</b> to B<b>2</b> to select a sensor for activation. In action <b>302</b>, a clock signal received by the second state machine is enabled to toggle between high and low values. Referring to <figref idref="DRAWINGS">FIG. 5</figref>, a second input to clock gate <b>206</b> transitions to logic zero after a sensor is selected for activation and thereafter matches clock signal CLK<b>2</b>. In action <b>303</b>, the selected sensor is permitted to consume power. For example, referring to <figref idref="DRAWINGS">FIG. 5</figref>, a rising edge of toggling received clock signal CLK<b>2</b> causes a power consumption signal SP<b>0</b> to transition to logic one to enable sensor <b>0</b>. For example, sensor components such as a comparator or current source are enabled to consume power. In action <b>304</b>, the second state machine controls the operations of the selected sensor. In action <b>305</b>, immediately after completion of a final operation of the selected sensor, the second state machine samples the pass/fail indication from the selected sensor. Action <b>305</b> removes any gap between completion of a final operation and sampling of the pass/fail indication. Were there a gap between completion of a final operation of the selected sensor and sampling the pass/fail indication, even though no sensor operation takes place, the selected sensor consumes power during the gap and second state machine consumes power during the gap because it receives an oscillating clock signal. In action <b>306</b>, the second machine is placed into a wait state for a sensor expected to be selected next. With reference to <figref idref="DRAWINGS">FIG. 5</figref>, the sensor expected to be selected after sensor <b>0</b> is sensor <b>1</b>. In action <b>307</b>, power consumption by the selected sensor is disabled. Sensor components such as a comparator and a current source are disabled and not allowed to consume power. In action <b>308</b>, the clock signal received by the second state machine is held to a fixed value. In response to action <b>308</b>, second state machine does not consume power caused by receipt of an oscillating clock signal when the clock signal is held to a fixed value.</p>
<p id="p-0035" num="0034">The Compact Disc appendix contains Verilog source code of another embodiment. For example, the file SampleCode.txt is an implementation of another embodiment of system of <figref idref="DRAWINGS">FIG. 3</figref>.</p>
<p id="p-0036" num="0035">Although some embodiments have been described in connection with certain specific embodiments for instructional purposes, the present invention is not limited thereto. For example, clock signal CLK<b>2</b> can be held to a fixed value of logic zero. For example, clock signal CLK<b>2</b> can be held to a fixed value prior to sampling the pass/fail such as immediately after the completion of state ST<b>3</b> in <figref idref="DRAWINGS">FIG. 5</figref>. Rather than implement first state machine as a shifter, first state machine can be a clock signal and second state machine activates a different sensor at each rising edge of the clock signal. Second state machine <b>204</b> can disable power consumption of any component when the component is not used, even prior to completion of a final operation of the sensor and even prior to a sampling pass/fail condition from the sensor. For example, a current source can be powered off prior to final operation of the sensor or prior to a sampling pass/fail condition from the sensor. Accordingly, various modifications, adaptations, and combinations of various features of the described embodiments can be practiced without departing from the scope of the invention as set forth in the claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method comprising:
<claim-text>permitting a clock signal to toggle in response to selection of a first sensor, wherein the first sensor is coupled to receive the clock signal, and operation of the first sensor relies on and is controlled by the clock signal;</claim-text>
<claim-text>enabling power consumption by the first sensor;</claim-text>
<claim-text>controlling an operation of the first sensor based on the clock signal;</claim-text>
<claim-text>sampling a pass/fail result from the first sensor, wherein the sampling occurs immediately after completion of the operation;</claim-text>
<claim-text>disabling power consumption by the first sensor; and</claim-text>
<claim-text>holding the clock signal to a fixed value after the sampling.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the selection of the first sensor is timed according to a second clock signal that is a divided down version of the clock signal.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the first sensor determines an occurrence of an event selected from a group consisting of: removal of a covering of a point of sale terminal, change of an impedance of a mesh surrounding an integrated circuit, change in system clock frequency, change in temperature, change in bias voltage level, and powering up or down an integrated circuit.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>erasing contents of a memory in response to a fail result.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein enabling power consumption by the first sensor comprises enabling power consumption of a component selected from a group consisting of: a comparator and a current source.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein disabling power consumption by the first sensor comprises disabling power consumption of a component selected from a group consisting of: a comparator and a current source.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the disabling power consumption by the first sensor comprises disabling power consumption by the first sensor in response to sampling of the pass/fail result.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>entering a wait state for a second sensor.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The method of <claim-ref idref="CLM-00008">claim 8</claim-ref>, further comprising:
<claim-text>permitting the clock signal to toggle in response to selection of the second sensor;</claim-text>
<claim-text>enabling power consumption by the second sensor;</claim-text>
<claim-text>controlling an operation of the second sensor based on the clock signal;</claim-text>
<claim-text>sampling a pass/fail result from the second sensor;</claim-text>
<claim-text>disabling power consumption by the second sensor; and</claim-text>
<claim-text>holding the clock signal to the fixed value after the sampling a pass/fail result from the second sensor.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. A point of sale (POS) terminal comprising:
<claim-text>a battery;</claim-text>
<claim-text>a clock source that outputs a clock signal;</claim-text>
<claim-text>a memory device that stores information; and</claim-text>
<claim-text>tamper and memory control logic that detects a potential tampering with the POS terminal and issues a clear request signal to the memory device to overwrite the memory, wherein the tamper and memory control logic comprises:
<claim-text>at least one sensor that is coupled to receive the clock signal, and operation of the at least one sensor relies on and is controlled by the clock signal,</claim-text>
<claim-text>a first state machine that selects a sensor, and</claim-text>
<claim-text>a second state machine that includes a clock gate that controls whether the second state machine consumes power from receiving the clock signal.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The POS terminal of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the second state machine controls operations of the selected sensor timed according to the clock signal.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The POS terminal of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the second state machine allows the selected sensor to consume power.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The POS terminal of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the selected sensor consumes power using a component selected from a group consisting of: a comparator and a sensor.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The POS terminal of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the at least one sensor is selected from a group consisting of: a temperature sensor, a switch sensor, and a wire sensor.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The POS terminal of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the second state machine samples a pass/fail indication from the selected sensor immediately after completion of operations of the selected sensor.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The POS terminal of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein in response to receiving one or more fail indications from the selected sensor, the second state machine issues an alarm that causes a portion of the memory device to be overwritten.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The POS terminal of <claim-ref idref="CLM-00016">claim 16</claim-ref>, wherein the memory device overwrites information selected from a group consisting of: financial information, personal identification information, and encryption keys.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. An apparatus comprising:
<claim-text>at least one sensor;</claim-text>
<claim-text>a first state machine that selects a sensor to operate; and</claim-text>
<claim-text>means for controlling power consumption of the apparatus, the means comprising:
<claim-text>a second state machine that controls when the sensor consumes power and operations of the selected sensor, wherein the second state machine includes a clock gate that controls whether the second state machine consumes power from receiving a clock signal, and wherein the first sensor is coupled to receive the clock signal, and operation of the first sensor relies on and is controlled by the clock signal.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The apparatus of <claim-ref idref="CLM-00018">claim 18</claim-ref>, wherein the clock gate allows the second state machine to receive the clock signal when a next sensor is selected.</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The apparatus of <claim-ref idref="CLM-00018">claim 18</claim-ref>, wherein the clock gate controls the second state machine to receive a fixed value instead of the clock signal when the second state machine is in a wait state for a next sensor and the next sensor is not selected.</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. The apparatus of <claim-ref idref="CLM-00018">claim 18</claim-ref>, wherein the second state machine samples a pass/fail indication from the selected sensor immediately after completion of the operations of the selected sensor.</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. The apparatus of <claim-ref idref="CLM-00021">claim 21</claim-ref>, wherein the second state machine disables power consumption of the selected sensor immediately after sampling the pass/fail indication.</claim-text>
</claim>
<claim id="CLM-00023" num="00023">
<claim-text>23. The apparatus of <claim-ref idref="CLM-00022">claim 22</claim-ref>, wherein the second state machine enters a wait state for a sensor to be selected next immediately after the sampling the pass/fail indication. </claim-text>
</claim>
</claims>
</us-patent-grant>
