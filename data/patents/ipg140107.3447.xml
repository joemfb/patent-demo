<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08624511-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08624511</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13441070</doc-number>
<date>20120406</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="regional">
<country>EP</country>
<doc-number>12002094</doc-number>
<date>20120324</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>68</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>05</class>
<subclass>B</subclass>
<main-group>33</main-group>
<subgroup>08</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>315189</main-classification>
<further-classification>315193</further-classification>
</classification-national>
<invention-title id="d2e71">Method for optimizing efficiency versus load current in an inductive boost converter for white LED driving</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>7187136</doc-number>
<kind>B2</kind>
<name>Fiorello</name>
<date>20070300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>315224</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>7236046</doc-number>
<kind>B2</kind>
<name>Georgescu et al.</name>
<date>20070600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>7449844</doc-number>
<kind>B2</kind>
<name>Lev et al.</name>
<date>20081100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>315291</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>7463236</doc-number>
<kind>B2</kind>
<name>Kawai et al.</name>
<date>20081200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>7579786</doc-number>
<kind>B2</kind>
<name>Soos</name>
<date>20090800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>315291</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>7893674</doc-number>
<kind>B2</kind>
<name>Mok et al.</name>
<date>20110200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>323283</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>8049439</doc-number>
<kind>B2</kind>
<name>Zhao et al.</name>
<date>20111100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>315297</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>8115419</doc-number>
<kind>B2</kind>
<name>Given et al.</name>
<date>20120200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>315307</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>8310171</doc-number>
<kind>B2</kind>
<name>Reisenauer et al.</name>
<date>20121100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>315287</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>8373346</doc-number>
<kind>B2</kind>
<name>Hoogzaad et al.</name>
<date>20130200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>315185 R</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>8421372</doc-number>
<kind>B2</kind>
<name>Myers et al.</name>
<date>20130400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>315291</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>2005/0035729</doc-number>
<kind>A1</kind>
<name>Lev et al.</name>
<date>20050200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>315291</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>2006/0139193</doc-number>
<kind>A1</kind>
<name>Morrow et al.</name>
<date>20060600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>2008/0001547</doc-number>
<kind>A1</kind>
<name>Negru</name>
<date>20080100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>315189</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>2008/0068066</doc-number>
<kind>A1</kind>
<name>Mittal</name>
<date>20080300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>2009/0134855</doc-number>
<kind>A1</kind>
<name>Landwehr</name>
<date>20090500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>2010/0207536</doc-number>
<kind>A1</kind>
<name>Burdalski et al.</name>
<date>20100800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>315224</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00018">
<document-id>
<country>US</country>
<doc-number>2010/0244799</doc-number>
<kind>A1</kind>
<name>Moussaoui</name>
<date>20100900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00019">
<document-id>
<country>US</country>
<doc-number>2011/0115399</doc-number>
<kind>A1</kind>
<name>Sadwick et al.</name>
<date>20110500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>315287</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00020">
<document-id>
<country>US</country>
<doc-number>2011/0254454</doc-number>
<kind>A1</kind>
<name>Inoue et al.</name>
<date>20111000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>315161</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00021">
<document-id>
<country>US</country>
<doc-number>2011/0273095</doc-number>
<kind>A1</kind>
<name>Myers et al.</name>
<date>20111100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>315119</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00022">
<document-id>
<country>US</country>
<doc-number>2012/0062149</doc-number>
<kind>A1</kind>
<name>Lin</name>
<date>20120300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00023">
<document-id>
<country>US</country>
<doc-number>2012/0098442</doc-number>
<kind>A1</kind>
<name>Jin</name>
<date>20120400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>315188</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00024">
<document-id>
<country>US</country>
<doc-number>2012/0187845</doc-number>
<kind>A1</kind>
<name>Saes et al.</name>
<date>20120700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>315113</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00025">
<document-id>
<country>US</country>
<doc-number>2012/0299500</doc-number>
<kind>A1</kind>
<name>Sadwick et al.</name>
<date>20121100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>315224</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00026">
<document-id>
<country>WO</country>
<doc-number>WO 2011/021075</doc-number>
<date>20110200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00027">
<othercit>European Search Report 12002094.6-1239, Maile date&#x2014;Sep. 19, 2012.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>28</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>None</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>6</number-of-drawing-sheets>
<number-of-figures>8</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20130249421</doc-number>
<kind>A1</kind>
<date>20130926</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Cavallini</last-name>
<first-name>Pier</first-name>
<address>
<city>Swindon</city>
<country>GB</country>
</address>
</addressbook>
<residence>
<country>GB</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>DeMarco</last-name>
<first-name>Louis</first-name>
<address>
<city>Swindon</city>
<country>GB</country>
</address>
</addressbook>
<residence>
<country>GB</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Sabihi</last-name>
<first-name>Adil</first-name>
<address>
<city>Swindon</city>
<country>GB</country>
</address>
</addressbook>
<residence>
<country>GB</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Cavallini</last-name>
<first-name>Pier</first-name>
<address>
<city>Swindon</city>
<country>GB</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>DeMarco</last-name>
<first-name>Louis</first-name>
<address>
<city>Swindon</city>
<country>GB</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Sabihi</last-name>
<first-name>Adil</first-name>
<address>
<city>Swindon</city>
<country>GB</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Saile Ackerman LLC</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
<agent sequence="02" rep-type="attorney">
<addressbook>
<last-name>Ackerman</last-name>
<first-name>Stephen B.</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Dialog Semiconductor GmbH</orgname>
<role>03</role>
<address>
<city>Kirchheim/Teck-Nabern</city>
<country>DE</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Hammond</last-name>
<first-name>Crystal L</first-name>
<department>2819</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">Circuits and methods to achieve a most efficient driver for white LEDs are disclosed. Switching Losses associated with the switching activity of a boost converter and mainly depending on clock frequency and total capacitance at the switching nodes and conduction losses associated with the current flowing in the boost converter and mainly depending on the series resistance of the elements in the regulation loop are minimized by using a size programmable NFET power switch with constant current limit, a very low voltage and accurate programmable current source, a programmable reference voltage for the error amplifier, and a PWM generator with programmable clock frequency. A limited number of configuration windows corresponding to a set of programmable values (OTP registers) for specific ranges of the current fed to the WLEDs.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="147.57mm" wi="215.14mm" file="US08624511-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="215.39mm" wi="163.15mm" orientation="landscape" file="US08624511-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="194.06mm" wi="166.20mm" orientation="landscape" file="US08624511-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="249.85mm" wi="211.24mm" file="US08624511-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="231.39mm" wi="176.28mm" file="US08624511-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="243.67mm" wi="122.00mm" orientation="landscape" file="US08624511-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="212.77mm" wi="182.80mm" file="US08624511-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND</heading>
<p id="p-0002" num="0001">(1) Technical Field</p>
<p id="p-0003" num="0002">This disclosure relates generally to the field of white LED drivers and relates more specifically to white LED drivers with improved efficiency.</p>
<p id="p-0004" num="0003">(2) Background</p>
<p id="p-0005" num="0004">White light emitting diodes (WLED) are used most often in notebooks and desktop screens, and in virtually all mobile LCD screens. A WLED is typically a blue LED with broad-spectrum yellow phosphor to give the impression of white light. WLEDs are often used for backlighting LCD displays. For such an application WLED drivers have to generate constant current required for a constant luminance.</p>
<p id="p-0006" num="0005">Charge pumps or inductive converters are usually used as WLED drivers, generating high bias voltages from a single low-voltage supply, such as a battery.</p>
<p id="p-0007" num="0006">It is a challenge for engineers designing WLED drivers to optimize efficiency of the drivers.</p>
<heading id="h-0002" level="1">SUMMARY</heading>
<p id="p-0008" num="0007">A principal object of the present disclosure is to optimize the efficiency of a WLED driver.</p>
<p id="p-0009" num="0008">A further object of the disclosure is to minimize switching losses associated with the switching activity of a boost power converter used.</p>
<p id="p-0010" num="0009">A further object of the disclosure is to minimize conduction losses associated with the current flowing in the boost converter and mainly depending on the resistance of the elements in the regulation loop.</p>
<p id="p-0011" num="0010">A further object of the disclosure is to reduce to a minimum the regulated voltage at a node between a programmable current source and a string of WLEDs allowing the boost converter working at smaller duty cycles.</p>
<p id="p-0012" num="0011">A further object of the disclosure is to utilize a very low voltage and accurate programmable current source.</p>
<p id="p-0013" num="0012">A further object of the disclosure is to use a programmable reference voltage for an error amplifier.</p>
<p id="p-0014" num="0013">A further object of the disclosure is to use a size programmable NFET power switch with constant current limit for optimization of switching losses and conduction losses.</p>
<p id="p-0015" num="0014">A further object of the disclosure is to use a PWM generator with programmable clock frequency.</p>
<p id="p-0016" num="0015">Moreover an object of the disclosure is to maximize efficiency of the WLED driver in a region where the boost converter is operating in Discontinuous mode.</p>
<p id="p-0017" num="0016">In accordance with the objects of this disclosure a method to optimize efficiency of white LED driver has been achieved. The method disclosed comprises, firstly, the following steps: (1) providing a device comprising an arrangement of one or more LEDs in series, a programmable iDAC current source, a boost converter comprising a size programmable power switch, a PWM generator with programmable clock frequency, and a programmable reference voltage generator for an error amplifier stage, (2) identifying a number of configuration windows specifying configuration of the LED driver and mode of modulation, wherein the configuration windows and modulation mode depend on current iDAC required through the LED arrangement, and (3) defining clock frequency, size of power switch and said programmable reference voltage once the current iDAC is known. Furthermore the method disclosed comprises (4) storing characteristics of all configuration windows selected, and (5) implementing configuration of a specific LED driver for a specific LED arrangement according to the corresponding configuration window providing optimum efficiency in regard of correspondent characteristics.</p>
<p id="p-0018" num="0017">In accordance with the objects of this disclosure a circuit for a LED driver having optimized efficiency has been disclosed. The circuit disclosed comprises, firstly, a digital core comprising: a current selection block to select a current generated by a programmable current source, an OTP memory to store profiles of operation windows, a digital comparator, and a means for a frequency divider, wherein an output of the digital block comprises a digital word prog setting a selected value of the current generated by the programmable current source, a clock signal driving a PWM generator, a reference voltage for a regulation loop, and a size of a size programmable power switch of a boost converter. Furthermore the circuit disclosed comprises the boost converter comprising: a port for an input voltage, an inductor connected between a first terminal of the port for the input voltage and a node LX, and a rectifying means connected between the node LX and an output voltage of the boost converter. Furthermore the boost converter disclosed comprises: a capacitor connected between output ports of the boost converter, said size programmable power switch connected between the node LX and a second terminal of a sense resistor, wherein the power switch is controlled by a signal from a regulation loop, said sense resistor, wherein a second terminal of the sense resistor is connected to a second terminal of said port for the input voltage, said PWM generator driving via said regulation loop the power switch, wherein the PWM generator receives said clock signal, and said regulation loop to control an output voltage an output voltage of the programmable current source using said reference voltage, being connected between a second terminal of a programmable current source and a gate of said power switch. Moreover the driver disclosed comprises: one or more LEDs connected in series wherein a first terminal of the one or more LEDs is connected to a first output port of the boost converter and a second terminal of the one or more LEDs is connected to the second terminal of the programmable current source, and said programmable current source to deliver a bias current to the one or more LEDs, wherein a second terminal of the current source is connected to the second terminal of said port for the input voltage.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0019" num="0018">In the accompanying drawings forming a material part of this description, there is shown:</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 1</figref> shows a basic block diagram of a first embodiment of a high-voltage WLED boost converter disclosed.</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 2</figref> shows a chart of Configuration windows vs. iDAC</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 3</figref><i>a </i>illustrates a process to define the reference voltage for regulation.</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 3</figref><i>b </i>depicts a block diagram of a digital core selecting a profile of the driver dependent on the different operating windows.</p>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 4</figref><i>a </i>presents a detailed circuitry of the programmable current source Idac providing current for the LEDs.</p>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. 4</figref><i>b </i>shows a diagram of the output currents of the programmable current source Idac depending on the IDAC output voltage FBK.</p>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. 5</figref> depicts the configurable power switch system NFET.</p>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 6</figref> illustrates a flowchart of a method disclosed to optimize the efficiency of a boost converter for a white LED driver.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">DESCRIPTION OF THE PREFERRED EMBODIMENTS</heading>
<p id="p-0028" num="0027">Methods and circuits for driving white LEDs (WLED) are disclosed. In a preferred embodiment a string of WLEDS is powered by the driver, e.g. for backlighting a display LCD.</p>
<p id="p-0029" num="0028">It should be noted that the methods and circuits disclosed could be used for any LED drivers based on inductive boost converter.</p>
<p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. 1</figref> shows a basic block diagram of a first embodiment of a high-voltage WLED boost converter disclosed. The circuit of <figref idref="DRAWINGS">FIG. 1</figref> comprises a string of external WLEDs <b>1</b> connected between an output voltage of a boost converter VBOOST and a node FBK, an external inductor L <b>2</b> connected between battery (VBAT) and node LX, an external Schottky diode SD <b>3</b> connected between LX and the boosted voltage VBOOST, an external capacitor Cout <b>4</b> connected to the boosted voltage VBOOST, an integrated power switch NFET device <b>5</b> controlled by the signal GATE, a sense resistor <b>12</b> for current sensing, an integrated programmable current source IDAC <b>6</b> to bias the string of WLED <b>1</b>, and an integrated regulation loop. In the example of <figref idref="DRAWINGS">FIG. 1</figref> a string of 4 WLEDs <b>1</b> is shown, it should be noted that the instant disclosure applies also to one WLED or any number of WLEDs.</p>
<p id="p-0031" num="0030">Furthermore <figref idref="DRAWINGS">FIG. 1</figref> shows a digital core <b>13</b>. The entire selection process of most efficient operation regions is done by the digital core <b>13</b>, controlling the boost converter <b>100</b> configuration. The functions of the digital core <b>13</b> will be explained later and illustrated in <figref idref="DRAWINGS">FIG. 3</figref><i>b</i>. It should be noted that the digital core <b>13</b> can be either implemented integrated in the boost converter or externally to the boost converter.</p>
<p id="p-0032" num="0031">The status of the programmable IDAC <b>6</b> is used to know the load current and get a specific profile of for the boost voltage. It should be noted that the principle of the disclosure can be used to any system that uses the same approach as the disclosure to drive any LEDs.</p>
<p id="p-0033" num="0032">The integrated regulation loop comprises an error amplifier EA <b>7</b> with fixed voltage gain, a programmable voltage reference generator <b>8</b> of one fixed current source and variable resistor Rref <b>9</b>, a PWM comparator <b>10</b>, and a saw tooth generator (PWM) <b>11</b> with programmable clock (clk) frequency.</p>
<p id="p-0034" num="0033">The efficiency of the WLED system <b>100</b> can be defined by the ratio:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>&#x3b7;=<i>P</i>out/<i>P</i>in,&#x2003;&#x2003;(1)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
in other words the relation between output power and input power, wherein
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>P</i>out=(<i>V</i>BOOST&#x2212;<i>FBK</i>)&#xd7;<i>iDAC</i>,and&#x2003;&#x2003;(2)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>P</i>in=<i>V</i>BAT&#xd7;<i>i</i>BAT.&#x2003;&#x2003;(3)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0035" num="0034">Equation (2) is valid for a single string of WLEDs. For 2 or more (K) strings:</p>
<p id="p-0036" num="0035">
<maths id="MATH-US-00001" num="00001">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mi>Pout</mi>
        <mo>=</mo>
        <mrow>
          <munder>
            <mo>&#x2211;</mo>
            <mi>K</mi>
          </munder>
          <mo>&#x2062;</mo>
          <mrow>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>VBOOST</mi>
                <mo>-</mo>
                <msub>
                  <mi>FBK</mi>
                  <mi>K</mi>
                </msub>
              </mrow>
              <mo>)</mo>
            </mrow>
            <mo>&#xd7;</mo>
            <msub>
              <mi>iDAC</mi>
              <mi>K</mi>
            </msub>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>4</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0037" num="0036">As Pout is the result of the luminance required by WLED <b>1</b>, in order to maximize efficiency it is mandatory to reduce Pin or more specifically the losses.</p>
<p id="p-0038" num="0037">The losses can be categorized as:
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0000">
    <ul id="ul0002" list-style="none">
        <li id="ul0002-0001" num="0038">Switching Losses (SLoss): associated with the switching activity of the boost and mainly depending on clk and total capacitance at the switching nodes, and</li>
        <li id="ul0002-0002" num="0039">Conduction Losses (CLoss): associated with the current flowing in the boost and mainly depending on the series resistance of the elements in the regulation loop.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0039" num="0040">Since, as a general rule, switching losses SLoss become dominant at low load currents and the information of the output current required (iDAC) is always available, it makes sense to configure the boost in such a way it can operate always under the most efficient conditions.</p>
<p id="p-0040" num="0041">The disclosed configurable solution is to address three areas where losses can be reduced:
<ul id="ul0003" list-style="none">
    <li id="ul0003-0001" num="0000">
    <ul id="ul0004" list-style="none">
        <li id="ul0004-0001" num="0042">The first step to achieve good efficiency is to be able to reduce to a minimum the regulated voltage at FBK. A lower value of FBK allows to regulate VBOOST lower (according to Eq. 1), making the boost converter working at a lower Duty Cycle and saving in CLoss as explained in Eq. 5:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>Duty cycle=1&#x2212;(<i>V</i>BAT&#xd7;&#x3b7;)/<i>V</i>BOOST;&#x2003;&#x2003;(5)<?in-line-formulae description="In-line Formulae" end="tail"?>
</li>
        <li id="ul0004-0002" num="0043">In the analysis of the sources of CLoss and SLoss a large contribution is due to the power switch NFET <b>5</b>:
        <ul id="ul0005" list-style="none">
            <li id="ul0005-0001" num="0044">A large NFET will have a small On-Resistance for small CLoss;</li>
            <li id="ul0005-0002" num="0045">A small NFET will have a small parasitic capacitance (in particular at the LX node) for small SLoss;</li>
        </ul>
        </li>
        <li id="ul0004-0003" num="0046">A large clk frequency improves load regulation but increases SLoss;</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0041" num="0047">As it will be explained later in this document, the different configurations for the boost will be defined by the programmed load current iDAC via digital control and stored in OTP registers during the trimming phase of the device.</p>
<p id="p-0042" num="0048"><figref idref="DRAWINGS">FIG. 1</figref> illustrates the principle of the configurable boost (dotted traces):
<ul id="ul0006" list-style="none">
    <li id="ul0006-0001" num="0000">
    <ul id="ul0007" list-style="none">
        <li id="ul0007-0001" num="0049">The current in the IDAC block (iDAC) <b>6</b> is programmed in steps between 0 and 25 mA e.g. in logarithmic sequence with a resolution (number of bits) defined by an application; and</li>
        <li id="ul0007-0002" num="0050">The programming word for prog iDAC is used to set:
        <ul id="ul0008" list-style="none">
            <li id="ul0008-0001" num="0051">The tap point for the Rref <b>9</b> which defines the reference voltage Vref for the Error Amplifier EA <b>7</b>;</li>
            <li id="ul0008-0002" num="0052">The scale factor for the power switch NFET <b>5</b>;</li>
            <li id="ul0008-0003" num="0053">The clock frequency of the PWM signal clk.</li>
        </ul>
        </li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0043" num="0054">The iDAC selection is an N-bits word to identify any of the 2 power of N levels of current for the WLED string (logarithmic scale). This N-bits word is the programming word &#x201c;prog&#x201d;. The digital comparator <b>32</b> reads &#x201c;prog&#x201d; and identifies the correspondent window for clk, vref and NFET.</p>
<p id="p-0044" num="0055">In applications as e.g. backlight systems the IDAC current is programmed in logarithmic steps in order to compensate for human eye response.</p>
<p id="p-0045" num="0056">As shown in <figref idref="DRAWINGS">FIG. 3</figref><i>b</i>, in order to simplify the process, a limited number of configuration windows are defined corresponding to a set of programmable values (OTP registers) for specific ranges of iDAC.</p>
<p id="p-0046" num="0057">For this implementation, as non-limiting example, 4 different configuration windows (W<b>1</b>, W<b>2</b>, W<b>3</b> and W<b>4</b>) have been identified, each covering an iDAC current range that can be extended or reduced at user's wish.</p>
<p id="p-0047" num="0058"><figref idref="DRAWINGS">FIG. 2</figref> shows a chart of configuration windows and efficiency vs. iDAC current. It illustrates how the implementation will look like in respect to an efficiency curve <b>20</b> vs. IDAC. The table below is a representation of the different configurations. Depending on the resolution required for each variable, a certain number of OTP registers are required. It shows that the efficiency &#x3b7; has reached between configuration windows W<b>2</b> and W<b>3</b> its maximum.</p>
<p id="p-0048" num="0059">In windows W<b>1</b>-W<b>2</b> the boost converter operates in DCM mode. In windows W<b>3</b>-W<b>4</b> the boost converter operates in CCM mode. A purpose of the design in the disclosure presented is to maximize efficiency in a region where the boost converter is operating in DCM mode. Therefore, as shown in <figref idref="DRAWINGS">FIG. 2</figref>, the optimum efficiency is reached in window W<b>2</b>. In this region the switching losses as well as the conduction losses can be relevant at different degrees; hence there is a need to adapt the profile (WLED, NFET power switch, clk) in order to minimize losses.</p>
<p id="p-0049" num="0060">A small hysteresis (also user programmable) guarantees smooth transitions between windows during the ramp up/down of the iDAC current (from 0 to 25 mA and vice versa) through all the iDAC programming codes.</p>
<p id="p-0050" num="0061">As shown in <figref idref="DRAWINGS">FIG. 2</figref>, the boundaries of the configuration windows W<b>1</b>-W<b>4</b> are such that the border between Discontinuous and Continuous Conduction Modes (DCM and CCM) would approximately always be in correspondence to one of them.</p>
<p id="p-0051" num="0062">The way the VBOOST and FBK voltages, as shown in <figref idref="DRAWINGS">FIG. 1</figref>, are regulated depends on the boost's operating mode. In DCM the Duty Cycle depends on the load current (assuming no losses) and its expression differs from the one used in CCM; therefore the expression used to estimate the reference voltage VREF to be programmed in order to achieve a certain value of FBK will change.
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>FBK=f</i>(clk,On-Resistance,Duty Cycle);&#x2003;&#x2003;(6)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>Duty Cycle <i>DCM=f</i>(<i>V</i>BAT,<i>V</i>BOOST,<i>iDAC</i>);&#x2003;&#x2003;(7)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>Duty Cycle <i>CCM=f</i>(<i>V</i>BAT,<i>V</i>BOOST);&#x2003;&#x2003;(8)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0052" num="0063">The procedure steps to define the reference voltage VREF for the error amplifier EA <b>7</b> is described in the <figref idref="DRAWINGS">FIG. 3</figref><i>a: </i>
<ul id="ul0009" list-style="none">
    <li id="ul0009-0001" num="0000">
    <ul id="ul0010" list-style="none">
        <li id="ul0010-0001" num="0064">Once the current iDAC is set and the corresponding configuration window identified, clock frequency clk and size of power switch NFET are selected according to the CLoss and SLoss to minimize; the mode of operation (DCM or CCM) is also known.</li>
        <li id="ul0010-0002" num="0065">The information on mode of operation, iDAC, clk and NFET (On-resistance) allows estimating the value of VREF.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0053" num="0066">It is obvious that for the windows W<b>2</b>-W<b>4</b> shown in <figref idref="DRAWINGS">FIG. 3</figref><i>a </i>correspondent values of clock frequency clk, size of power switch NFET, and reference voltage VREF are to be set the same way as illustrated for windows W<b>1</b>.</p>
<p id="p-0054" num="0067">The voltage values for the windows selected as e.g. WLED<b>1</b>, WLED<b>2</b>, WLED<b>3</b>, and WLED<b>4</b> can be identified during characterization at a testing site and stored in the OTP <b>31</b>, as shown in <figref idref="DRAWINGS">FIG. 3</figref><i>b</i>. Alternatively formulas to estimate the voltage values of WLED (one for DCM and one for CCM) can also be used and follow the equations (7) and (8).</p>
<p id="p-0055" num="0068"><figref idref="DRAWINGS">FIG. 3</figref><i>b </i>shows a block diagram of a digital core <b>13</b> selecting a profile of the driver dependent on the different operating windows. The digital core <b>13</b> comprises a circuit <b>30</b> providing as output a digital word prog defining the value of the IDAC current selected. The digital word prog comprises information about a tap point for the reference resistor Rref <b>9</b>, the scale factor for the power switch NFET <b>5</b>, and the clock frequency of the PWM signal clk.</p>
<p id="p-0056" num="0069">The digital programming word &#x201c;prog&#x201d; is an N-bit word to define any of the 2 power of N iDAC values between 0 and 25 mA decoded in the example of the preferred embodiment in a logarithmic scale. The iDAC selection block looks like a look-up table with currents vs. digital codes.</p>
<p id="p-0057" num="0070">Furthermore the digital core <b>13</b> comprises an OTP memory <b>31</b> containing the profiles of all windows, e.g. in the preferred embodiment the profiles of windows W<b>1</b>-W<b>4</b>. Other numbers of windows are also possible. The digital word prog representing the IDAC current selected and the profile of operation windows are input of a digital comparator <b>32</b>, i.e. the value of the PWM clock frequency clk, the size of the power switch NFET <b>5</b>, and the resistance of the reference resistor Rref <b>9</b>. These values are set by the comparator <b>32</b> according the operation window selected dependent on the IDAC current selected. The frequency clk is set via a programmable digital frequency divider <b>33</b> using in the preferred embodiment a base frequency of e.g. 3 MHz. Other base frequencies can be used as well.</p>
<p id="p-0058" num="0071">The next <figref idref="DRAWINGS">FIG. 4</figref><i>a </i>presents the programmable current source IDAC <b>6</b> implemented in this system. It is a regulated current source that guarantees a very accurate output current and allows to operate with a very low FBK voltage (&#x3c;150mV typically for iDAC up to a current of 25 mA or higher).</p>
<p id="p-0059" num="0072">The circuit of <figref idref="DRAWINGS">FIG. 4</figref><i>a </i>comprises a reference branch comprising the current source <b>42</b>, providing constant current, transistor N<b>0</b> <b>43</b>, transistor switch Nswitch<b>0</b> <b>44</b> and transistor N<b>1</b> <b>45</b>. The reference branch generates Vcasc voltage. The Nswitch<b>0</b> <b>44</b> replicates the voltage drop on the output branch due to the selection switch Nswitch <b>47</b>.</p>
<p id="p-0060" num="0073">The output branch comprises transistor N<b>2</b> <b>46</b>, transistor Nswitch <b>47</b> and output transistor Nout <b>40</b>. The transistor NOUT <b>40</b> delivers the output current IDAC. Amplifier <b>41</b> controls the gate of transistor NOUT <b>40</b>. The amplifier <b>41</b> together with transistor NOUT <b>40</b> provides a regulation that guarantees voltage Vdac equals voltage Vcasc. The size of transistors N<b>1</b> and N<b>2</b> is such that the saturation operation is guaranteed for very low drain-source voltages (&#x3c;150 mV) and is the most important element to achieve efficiency of the boost operation.</p>
<p id="p-0061" num="0074">Transistors N<b>2</b> <b>46</b> and N<b>1</b> <b>45</b> form a current mirror. The gate of transistor NSWITCH <b>47</b> is controlled by a voltage corresponding to a digital word prog, which is used to select the IDAC current. The adjustment of the transistor N<b>2</b> <b>46</b> via Nswitch <b>47</b> can be performed by e.g. by logarithmic steps or in another sequence.</p>
<p id="p-0062" num="0075">There are actually a number of N<b>2</b> devices in parallel, each with an Nswitch device on top. To increase the mirroring ratio, and reach the desired output current, a number of Nswitch devices are closed in sequence. The non-selected branches are with the Nswitch device open therefore that portion of the N<b>2</b> device does not take part to the conduction. Due to the nature of the logarithmic response, the scaling ratio of the N<b>2</b> devices is not binary weighted but logarithmic, meaning that for small codes (small currents) the ratio increases at slow rate, while when large codes (large currents) are selected the ratio is larger. Obviously the size of Nswitch device is proportional to the size of the N<b>2</b> device underneath.</p>
<p id="p-0063" num="0076"><figref idref="DRAWINGS">FIG. 4</figref><i>b </i>shows a diagram of the output currents IDAC of the programmable current source versus the IDAC output voltage FBK. The IDAC values shown are for a maximum case <b>400</b> and typical case <b>401</b>, wherein X2 stands for 2 strings of WLED supported.</p>
<p id="p-0064" num="0077">The programming of VREF is explained in <figref idref="DRAWINGS">FIG. 3</figref><i>a</i>. As further enhancement of the proposed system, the selection of VREF is linked to the voltage gain (GV) of the Error Amplifier EA <b>7</b>. The GV can be programmed higher or lower to improve load regulation. The higher GV, the higher is the final regulated FBK voltage hence, if the user decides to opt for a different GV, the system must compensate for it. The proposed implementation is done as such that the range of available VREF values can cover for the range of available GV.</p>
<p id="p-0065" num="0078"><figref idref="DRAWINGS">FIG. 5</figref> depicts the configurable power switch system NFET <b>5</b>. <figref idref="DRAWINGS">FIG. 5</figref> shows how the power switch system NFET <b>5</b> is configured. In this non-limiting example there are 3 possible configurations for the NFET:
<ul id="ul0011" list-style="none">
    <li id="ul0011-0001" num="0000">
    <ul id="ul0012" list-style="none">
        <li id="ul0012-0001" num="0079">GATEA active: NFET_A (<b>52</b>) active;</li>
        <li id="ul0012-0002" num="0080">GATEB active: NFET_B (<b>53</b>) active;</li>
        <li id="ul0012-0003" num="0081">GATEA and GATEB active: NFET_A+NFET_B;</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0066" num="0082"><figref idref="DRAWINGS">FIG. 5</figref> illustrates the PWM comparator <b>10</b>, as also shown in <figref idref="DRAWINGS">FIG. 1</figref>, driving via driver A <b>54</b> and via driver B <b>55</b> the programmable power switch comprising in the example of <figref idref="DRAWINGS">FIG. 5</figref> a first part NFET_A <b>52</b> and NFET_B <b>53</b>. The table below illustrates how the setting of both drivers <b>54</b> and <b>55</b> activates gate A or Gate B or both.</p>
<p id="p-0067" num="0083">
<tables id="TABLE-US-00001" num="00001">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="4">
<colspec colname="offset" colwidth="28pt" align="left"/>
<colspec colname="1" colwidth="77pt" align="left"/>
<colspec colname="2" colwidth="56pt" align="left"/>
<colspec colname="3" colwidth="56pt" align="left"/>
<thead>
<row>
<entry/>
<entry namest="offset" nameend="3" align="center" rowsep="1"/>
</row>
<row>
<entry/>
<entry/>
<entry>Driver A</entry>
<entry>Driver B</entry>
</row>
<row>
<entry/>
<entry namest="offset" nameend="3" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry/>
<entry>Gate A ON</entry>
<entry>ON</entry>
<entry>OFF</entry>
</row>
<row>
<entry/>
<entry>Gate B ON</entry>
<entry>OFF</entry>
<entry>ON</entry>
</row>
<row>
<entry/>
<entry>Gate A + B ON</entry>
<entry>ON</entry>
<entry>ON</entry>
</row>
<row>
<entry/>
<entry namest="offset" nameend="3" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0068" num="0084">The drivers <b>54</b> and <b>55</b> are simple buffer stages made of a series of MOS inverters (NFET+PFET) in order to scale up the driving strength and cope with the large capacitive load of gate A and gate B. Obviously the driving strength of driver A and B will be proportional to the gate size that they have to drive. When a gate is OFF, the input of the correspondent driver is set constantly to ground, while when a gate is ON, the correspondent driver is left to switch according to the PWM signal. Dedicated logic is used to prevent the overlapping of the rising and falling edges of the drivers and avoid cross conduction (which will cause loss in efficiency).</p>
<p id="p-0069" num="0085">It should be noted that, as shown in <figref idref="DRAWINGS">FIG. 5</figref>, parallel multiple driving stages can be associated to separate NFET devices in order to scale the pull down capability at the LX node in relation to the output current of the boost converter.</p>
<p id="p-0070" num="0086">If for instance the ratio between NFET_A (<b>52</b>) and the total NFET area is 40%, the On-Resistance of NFET_A (<b>52</b>) will be 40% higher and the gate to source capacitance, which needs to be charged/discharged at every cycle, to be approximately 40% lower. The NFET_A ratio is used for low load configuration where SLoss dominate with respect to CLoss.</p>
<p id="p-0071" num="0087">The current sensing (for slope compensation and current limiting) is performed using a scaled version (NFET_SensA <b>50</b> and NFET_SensB <b>51</b>) of the main power switch (hence there is little contribution to the conduction of the boost current from the sense devices), which mirrors the main current into a sense resistor Rsense <b>12</b>. The main point is that if power switch system NFET <b>5</b> changes its size according to current iDAC, the mirroring ratio stays constant hence the current gain (for slope compensation) and current limits (to prevent coil saturation) also remain constant.</p>
<p id="p-0072" num="0088">The current gain is kept constant in regard of the NFET size selection; hence the following equation is valid:</p>
<p id="p-0073" num="0089">
<maths id="MATH-US-00002" num="00002">
<math overflow="scroll">
<mrow>
  <mrow>
    <mrow>
      <msub>
        <mi>I</mi>
        <mi>LOAD</mi>
      </msub>
      <mo>&#xd7;</mo>
      <mi>duty</mi>
      <mo>&#x2062;</mo>
      <mstyle>
        <mspace width="0.8em" height="0.8ex"/>
      </mstyle>
      <mo>&#x2062;</mo>
      <mi>cycle</mi>
      <mo>&#xd7;</mo>
      <mfrac>
        <mi>NFET_sense</mi>
        <mi>NFET</mi>
      </mfrac>
      <mo>&#xd7;</mo>
      <msub>
        <mi>R</mi>
        <mi>SENSE</mi>
      </msub>
    </mrow>
    <mo>=</mo>
    <mi>constant</mi>
  </mrow>
  <mo>,</mo>
</mrow>
</math>
</maths>
<br/>
wherein I<sub>LOAD </sub>is the current through inductor <b>2</b>, NFET_SENSE/NFET represents the scale of the size of the scaled versions (<b>50</b>, <b>51</b>) related to the selected size of the power switch (<b>52</b>, <b>53</b>) and R<sub>SENSE </sub>is the resistance of the sense resistor <b>12</b>.
</p>
<p id="p-0074" num="0090">The switching frequency clk selection is made through a programmable frequency divider for fine steps tuning (5 bits) in the range e.g. between 0.25 and 3 MHz. For low iDAC values, clk is reduced to minimize SLoss; the fine-tuning is needed to optimize the efficiency in respect to NFET and iDAC.</p>
<p id="p-0075" num="0091"><figref idref="DRAWINGS">FIG. 6</figref> illustrates a flowchart of a method disclosed to optimize the efficiency of a boost converter for a white LED driver. Step <b>60</b> of the method of <figref idref="DRAWINGS">FIG. 6</figref> illustrates the provision of an arrangement of one or more white LEDs in series, a programmable current source, and a boost converter comprising a size programmable power switch, a PWM generator with programmable clock frequency, and a programmable reference voltage generator for an error amplifier stage. Step <b>61</b> depicts identifying a number of configuration windows specifying configuration of the WLED driver and mode of modulation, wherein the configuration windows and modulation mode depend on current iDAC required through the WLED arrangement. Step <b>62</b> illustrates defining clock frequency, size of power switch and said programmable reference voltage once the current iDAC is known. Step <b>63</b> illustrates storing characteristics of all configuration windows selected. Step <b>64</b> depicts implementing configuration of a specific WLED driver for a specific WLED arrangement according to the corresponding configuration window providing optimum efficiency in regard of correspondent characteristics.</p>
<p id="p-0076" num="0092">While the disclosure has been particularly shown and described with reference to the preferred embodiments thereof, it will be understood by those skilled in the art that various changes in form and details may be made without departing from the spirit and scope of the disclosure.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-math idrefs="MATH-US-00001" nb-file="US08624511-20140107-M00001.NB">
<img id="EMI-M00001" he="7.03mm" wi="76.20mm" file="US08624511-20140107-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00002" nb-file="US08624511-20140107-M00002.NB">
<img id="EMI-M00002" he="6.01mm" wi="76.20mm" file="US08624511-20140107-M00002.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00003" nb-file="US08624511-20140107-M00003.NB">
<img id="EMI-M00003" he="6.69mm" wi="76.20mm" file="US08624511-20140107-M00003.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method to optimize efficiency of a LED driver, comprising the following steps:
<claim-text>(1) providing a device comprising an arrangement of one or more LEDs in series, a programmable iDAC current source, and a boost converter comprising a size programmable power switch, a PWM generator with programmable clock frequency, and a programmable reference voltage generator for an error amplifier stage;</claim-text>
<claim-text>(2) identifying a number of configuration windows specifying configuration of the LED driver and mode of modulation, wherein the configuration windows and modulation mode depend on current iDAC required through the LED arrangement;</claim-text>
<claim-text>(3) defining clock frequency, size of power switch and said programmable reference voltage once the current iDAC is known;</claim-text>
<claim-text>(4) storing characteristics of all configuration windows selected; and</claim-text>
<claim-text>(5) implementing configuration of a specific LED driver for a specific LED arrangement according to the corresponding configuration window providing optimum efficiency in regard of correspondent characteristics.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein said storing of characteristics of all configuration windows selected is performed during a trimming phase of the device.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein four configuration windows are selected each covering a range of iDAC current.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein boundaries of the configuration windows can comprise a border between Discontinuous and Continuous Conduction Modes of the boost converter.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein a curve representing the efficiency of the configuration windows in dependency of the iDAC current required is the basis of defining the ranges of the configuration windows.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein the current generated by the iDAC current source is programmed in steps.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00006">claim 6</claim-ref> wherein said steps are programmed in logarithmic sequence in order to compensate for human eye response.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein a programming word for iDAC current source is used to set a tap point for a resistor, which defines the reference voltage for the error amplifier, a scale factor for the power switch, and the clock frequency of the PWM generator.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein a user programmable hysteresis can be set to enable smooth transitions between windows during the ramp up/down of the iDAC current.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein the programmable current source allows generating current with minimal voltage.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The method of <claim-ref idref="CLM-00010">claim 10</claim-ref> wherein the programmable current source allows a voltage of about 150 mV or lower for delivering a current of e.g. 25 mA or more.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein a method for calculating the programmable reference voltage for the error amplifier comprises the steps of
<claim-text>(1) setting iDAC and the correspondent configuration window;</claim-text>
<claim-text>(2) setting clock frequency corresponding to the configuration window selected;</claim-text>
<claim-text>(3) setting size of power switch corresponding to the configuration window selected and hereby defining ON-resistance of the power switch; and</claim-text>
<claim-text>(4) calculating VREF according to the equation:</claim-text>
</claim-text>
<claim-text>
<maths id="MATH-US-00003" num="00003">
<math overflow="scroll">
<mrow>
  <mrow>
    <mi>VREF</mi>
    <mo>=</mo>
    <mrow>
      <mfrac>
        <mrow>
          <mi>&#x3b7;</mi>
          <mo>&#xd7;</mo>
          <mi>Vin</mi>
        </mrow>
        <mrow>
          <mn>1</mn>
          <mo>-</mo>
          <mi>dutycycle</mi>
        </mrow>
      </mfrac>
      <mo>-</mo>
      <mi>WLED</mi>
    </mrow>
  </mrow>
  <mo>,</mo>
</mrow>
</math>
</maths>
<claim-text>
<claim-text>wherein &#x3b7; is the efficiency of the corresponding configuration window, Vin is the input voltage of the WLED driver, and duty cycle is the duty cycle according to the selected operation mode of the boost converter.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein current sensing of the power switch is performed using a scaled version of the main power switch, wherein the scaled version mirrors the main current into a sense resistor.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein the method is applied for driving white LEDs for backlight applications.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. A circuit for a LED driver having optimized efficiency, comprising:
<claim-text>a digital core comprising
<claim-text>a current selection block to select a current generated by a programmable current source;</claim-text>
<claim-text>an OTP memory to store profiles of operation windows;</claim-text>
<claim-text>a digital comparator; and</claim-text>
<claim-text>a means for a frequency divider;</claim-text>
</claim-text>
<claim-text>wherein an output of the digital block comprises a digital word prog setting a selected value of the current generated by the programmable current source, a clock signal driving a PWM generator, a reference voltage for a regulation loop, and a size of a size programmable power switch of a boost converter;</claim-text>
<claim-text>said boost converter comprising:
<claim-text>a port for an input voltage;</claim-text>
<claim-text>an inductor connected between a first terminal of the port for the input voltage and anode LX;</claim-text>
<claim-text>a rectifying means connected between the node LX and an output voltage of the boost converter;</claim-text>
<claim-text>a capacitor connected between output ports of the boost converter;</claim-text>
<claim-text>said size programmable power switch connected between the node LX and a second terminal of a sense resistor, wherein the power switch is controlled by a signal from a regulation loop;</claim-text>
<claim-text>said sense resistor, wherein a second terminal of the sense resistor is connected to a second terminal of said port for the input voltage;</claim-text>
<claim-text>said PWM generator driving via said regulation loop said power switch, wherein the PWM generator receives said clock signal;</claim-text>
<claim-text>said regulation loop to control an output voltage of said programmable current source using said reference voltage, being connected between a second terminal of said programmable current source and a gate of said power switch;</claim-text>
</claim-text>
<claim-text>one or more LEDs connected in series wherein a first terminal of the one or more LEDs is connected to a first output port of the boost converter and a second terminal of the one or more LEDs is connected to the second terminal of the programmable current source; and</claim-text>
<claim-text>said programmable current source to deliver a bias current to the one or more LEDs, wherein a second terminal of the current source is connected to the second terminal of said port for the input voltage.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The circuit of <claim-ref idref="CLM-00015">claim 15</claim-ref> wherein said rectifying means is a Schottky diode.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The circuit of <claim-ref idref="CLM-00015">claim 15</claim-ref> wherein said gain stage has a high gain.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The circuit of <claim-ref idref="CLM-00015">claim 15</claim-ref> wherein said size programmable power switch is a NFET device.</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The circuit of <claim-ref idref="CLM-00018">claim 18</claim-ref> wherein said NFET device comprises:
<claim-text>a first power transistor connected between LX node and VSS, wherein its gate is connected to a first gate signal;</claim-text>
<claim-text>a second power transistor connected between LX node and VSS, wherein its gate is connected to a second gate signal;</claim-text>
<claim-text>a first current sense transistor connected between LX node and a first terminal of a sense resistor, wherein its gate is connected to the first gate signal and the first current sense transistor is a scaled version of the first power transistor;</claim-text>
<claim-text>a second current sense transistor connected between LX node and a first terminal of the sense resistor, wherein its gate is connected to the second gate signal and the second current sense transistor is a scaled version of the second power transistor; and</claim-text>
<claim-text>said sense resistor having a second terminal connected to VSS voltage.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The circuit of <claim-ref idref="CLM-00015">claim 15</claim-ref> wherein said power switch, said programmable current source, and said regulation loop are all integrated in one integrated circuit.</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. The circuit of <claim-ref idref="CLM-00020">claim 20</claim-ref> wherein said digital core is also integrated in the integrated circuit.</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. The circuit of <claim-ref idref="CLM-00015">claim 15</claim-ref> wherein said LEDs are white LEDs.</claim-text>
</claim>
<claim id="CLM-00023" num="00023">
<claim-text>23. The circuit of <claim-ref idref="CLM-00015">claim 15</claim-ref> wherein said programmable current source comprises
<claim-text>a reference branch comprising</claim-text>
<claim-text>a constant current source connected to a gate and drain of a first NMOS transistor;
<claim-text>said first NMOS transistor, wherein a source and a bulk is connected to a drain of a second transistor and to a positive input of an amplifier, and said gate is connected to a gate of a third transistor;</claim-text>
<claim-text>said second transistor, wherein a source is connected to the drain of said third transistor, a bulk is connected to a bulk of the third transistor and to a source of the third transistor, and a gate is connected to Vdd voltage; and</claim-text>
<claim-text>said third transistor; wherein a gate is connected to a gate of a fourth transistor, a bulk is connected to a source of the third transistor and to a source and bulk of the fourth transistor;</claim-text>
</claim-text>
<claim-text>an output branch comprising
<claim-text>said fourth transistor, wherein the bulk is connected to a bulk of a size programmable fifth transistor and a drain is connected to a source of the fifth transistor;</claim-text>
<claim-text>said fifth transistor, wherein its gate is connected to the output of said digital core, receiving the digital word setting a value of the output current of the programmable current source and a drain is connected a negative input of the amplifier and to a source and a bulk of an output transistor of the programmable current source; and</claim-text>
<claim-text>said output transistor, wherein its drain provides the output current of the programmable current source and its gate is connected to an output of said amplifier; and</claim-text>
</claim-text>
<claim-text>said amplifier; wherein the amplifier and the output transistor provide a regulation that a voltage level at the positive input of the amplifier equals a voltage level at the source of the output transistor.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00024" num="00024">
<claim-text>24. The circuit of <claim-ref idref="CLM-00023">claim 23</claim-ref> wherein the sizes of both the third transistor and fourth transistors are such that a saturation operation is ensured for drain source voltages that are smaller than 150 mill Volt.</claim-text>
</claim>
<claim id="CLM-00025" num="00025">
<claim-text>25. The circuit of <claim-ref idref="CLM-00023">claim 23</claim-ref> wherein there are more than one of said fourth transistors in parallel and each of said fourth transistors have a transistor of the type of the fifth transistor on top.</claim-text>
</claim>
<claim id="CLM-00026" num="00026">
<claim-text>26. The circuit of <claim-ref idref="CLM-00025">claim 25</claim-ref> wherein, in order to increase a mirroring ratio desired, and to reach the desired output current, a number of said fifth transistors are closed in sequence, wherein the fourth transistors having closed fifth transistors on top are non-selected and don't take part in the conduction.</claim-text>
</claim>
<claim id="CLM-00027" num="00027">
<claim-text>27. The circuit of <claim-ref idref="CLM-00015">claim 15</claim-ref> wherein said regulation loop comprises
<claim-text>an error amplifier, wherein a negative input is connected to the second terminal of the programmable current source, a positive input is a reference voltage, which is set by a reference voltage generator via said digital word, and the output of the error amplifier is connected to a PWM comparator;</claim-text>
<claim-text>said PWM comparator, wherein a positive input is connected to an out of a PWM pulse generator, and an output is connected to the gate of the power switch;</claim-text>
<claim-text>said PWM pulse generator; wherein an input is a clock frequency, which is set via a frequency divider which is set by said digital word; and</claim-text>
<claim-text>said reference voltage generator comprising a current source having a first terminal connected to the positive input of the error amplifier and to a first terminal of a programmable resistor, wherein a second terminal of the programmable resistor is connected to VSS voltage, and wherein said digital word is setting a tap of the programmable resistor in order to select the reference voltage.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00028" num="00028">
<claim-text>28. The circuit of <claim-ref idref="CLM-00027">claim 27</claim-ref> wherein said PWM generator is a saw-tooth pulse generator.</claim-text>
</claim>
</claims>
</us-patent-grant>
