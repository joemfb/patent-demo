<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625490-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625490</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12986813</doc-number>
<date>20110107</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<us-term-of-grant>
<us-term-extension>441</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20090101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>W</subclass>
<main-group>4</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>370328</main-classification>
</classification-national>
<invention-title id="d2e53">Multiple granularity location determination</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5508708</doc-number>
<kind>A</kind>
<name>Ghosh et al.</name>
<date>19960400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6445927</doc-number>
<kind>B1</kind>
<name>King et al.</name>
<date>20020900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>7127257</doc-number>
<kind>B2</kind>
<name>Riley et al.</name>
<date>20061000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>7133909</doc-number>
<kind>B2</kind>
<name>Bahl</name>
<date>20061100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>7778593</doc-number>
<kind>B2</kind>
<name>Hsu et al.</name>
<date>20100800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455  304</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>8165808</doc-number>
<kind>B2</kind>
<name>Scheibe</name>
<date>20120400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>701533</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2004/0104841</doc-number>
<kind>A1</kind>
<name>Syrjarinne</name>
<date>20040600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2004/0259546</doc-number>
<kind>A1</kind>
<name>Balachandran et al.</name>
<date>20041200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>4554352</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2005/0153692</doc-number>
<kind>A1</kind>
<name>Hwang et al.</name>
<date>20050700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455434</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>2006/0135180</doc-number>
<kind>A1</kind>
<name>Jakel et al.</name>
<date>20060600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>4554565</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>2008/0318594</doc-number>
<kind>A1</kind>
<name>Monnerat</name>
<date>20081200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>2009/0098873</doc-number>
<kind>A1</kind>
<name>Gogic</name>
<date>20090400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455436</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>EP</country>
<doc-number>0 777 399</doc-number>
<kind>A2</kind>
<date>19970600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>WO</country>
<doc-number>2010129094</doc-number>
<date>20101100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00015">
<othercit>Akbarov, et al., &#x201c;Hybrid Pattern Matching/TDOA Positioning Method for CDMA Networks&#x201d;., 4<sup>th </sup>Workshop on Positioning, Navigation and Communication, Mar. 1, 2007, pp. 199-203.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00016">
<othercit>Notification of Transmittal of the International Search Report and the Written Opinion of the International Searching Authority, or the Declaration., International application No. PCT/U S2011/067652, mailed Mar. 12, 2012, 16 pages.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>27</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>370310-349</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370431-464</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>11</number-of-drawing-sheets>
<number-of-figures>11</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20120177025</doc-number>
<kind>A1</kind>
<date>20120712</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Huang</last-name>
<first-name>Ronald K.</first-name>
<address>
<city>San Jose</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Grainger</last-name>
<first-name>Morgan</first-name>
<address>
<city>Sunnyvale</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Dere</last-name>
<first-name>Jason</first-name>
<address>
<city>San Jose</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Huang</last-name>
<first-name>Ronald K.</first-name>
<address>
<city>San Jose</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Grainger</last-name>
<first-name>Morgan</first-name>
<address>
<city>Sunnyvale</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Dere</last-name>
<first-name>Jason</first-name>
<address>
<city>San Jose</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Fish &#x26; Richardson P.C.</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Apple Inc.</orgname>
<role>02</role>
<address>
<city>Cupertino</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Yao</last-name>
<first-name>Kwang B</first-name>
<department>2473</department>
</primary-examiner>
<assistant-examiner>
<last-name>Loo</last-name>
<first-name>Juvena</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A mobile device can store a set of first CDMA identifiers including, for example, system identifiers, network identifiers, or zone identifiers. Each first CDMA identifier can be associated with a first geographic location. The mobile device can determine a current location by matching a current first CDMA identifier with a stored first CDMA identifier. If a user desires a current location that has finer granularity, the mobile device can retrieve a set of second CDMA identifiers including, for example, base station identifiers. Each second CDMA identifiers can be associated with a second geographic location that has a finer granularity than that of the first geographic location. The mobile device can match a current second CDMA identifier from the retrieved second CDMA identifiers and designate the second geographic location associated with the matching second CDMA identifier as the current location that has the finer granularity.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="185.42mm" wi="257.39mm" file="US08625490-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="268.99mm" wi="207.43mm" orientation="landscape" file="US08625490-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="202.10mm" wi="193.29mm" file="US08625490-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="248.92mm" wi="194.56mm" file="US08625490-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="260.18mm" wi="184.49mm" orientation="landscape" file="US08625490-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="247.99mm" wi="203.37mm" file="US08625490-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="193.89mm" wi="195.75mm" file="US08625490-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="193.89mm" wi="188.55mm" file="US08625490-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="252.98mm" wi="160.61mm" file="US08625490-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="250.19mm" wi="192.96mm" orientation="landscape" file="US08625490-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="257.39mm" wi="199.90mm" file="US08625490-20140107-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="254.25mm" wi="187.28mm" orientation="landscape" file="US08625490-20140107-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">TECHNICAL FIELD</heading>
<p id="p-0002" num="0001">This disclosure relates generally to geographic location determination.</p>
<heading id="h-0002" level="1">BACKGROUND</heading>
<p id="p-0003" num="0002">A code division multiple access (CDMA) communications system can include a radio network that includes multiple transceivers, also known as base transceiver stations (BTSs) or simply base stations. Each base station can be identified by a base station identifier, e.g., a base station identification (BSID) number. Each base station can serve a geographic area or a &#x201c;cell.&#x201d; Cells of the CDMA communications network can be grouped into coverage areas. Each coverage area can be associated with a zone identifier. The coverage areas can be grouped into networks. Each network can be controlled by a centralized base station controller (CBSC). Each network can be associated with a network identifier, e.g., a network identification (NID) number. At a higher level, all base stations of a CDMA system can be associated with a system identifier, e.g., a system identification (SID) number that identifies the entire CDMA system. Each base station can serve multiple mobile devices (e.g., cellular phones). If a mobile device is served by a base station, the mobile device &#x201c;knows&#x201d; the base station identifier of the base station, the zone identifier, the NID, and the SID.</p>
<heading id="h-0003" level="1">SUMMARY</heading>
<p id="p-0004" num="0003">Methods, program products, and systems for multiple granularity location determination are described. A mobile device can store a set of first CDMA identifiers including, for example, system identifiers, network identifiers, or zone identifiers. Each first CDMA identifier can be associated with a first geographic location. The mobile device can determine a current location by matching a current first CDMA identifier with a stored first CDMA identifier and designating the first geographic location associated with the matching first CDMA identifier as the current location. If a user desires a current location that has finer granularity, the mobile device can retrieve a set of second CDMA identifiers including, for example, base station identifiers. Each second CDMA identifiers can be associated with a second geographic location that has a finer granularity than that of the first geographic location. The mobile device can match a current second CDMA identifier from the retrieved second CDMA identifiers and designate the second geographic location associated with the matching second geographic identifier as the current location that has the finer granularity.</p>
<p id="p-0005" num="0004">In some implementations, a server computer can receive location information from location-aware mobile devices (e.g., GPS-enabled devices) located in an area covered by a CDMA system. The server computer can also receive from the mobile device CDMA identifiers (e.g., SIDs, NIDs, zone identifiers, or BSIDs). The server computer can estimate a geographic location using the received information. The server computer can associate the geographic location with the CDMA identifiers. The server computer can provide, in a tiered manner, the geographic location associated with the CDMA identifiers to second mobile devices for estimating current locations of the second mobile devices.</p>
<p id="p-0006" num="0005">Techniques of multiple granularity location determination can be implemented to achieve the following advantages. A location can be estimated for and associated with a CDMA identifier when the actual geography of the coverage area associated with the CDMA identifier is unknown. The location can be used to estimate a current location of a mobile device served by the CDMA system when other information (e.g., a GPS signal) is unavailable.</p>
<p id="p-0007" num="0006">The location being associated with CDMA identifiers can have multiple granularities, corresponding to a multi-tiered structure of the CDMA system. A mobile device that can receive CDMA identifier updates from a server. The mobile device does not need to perform a finer-grained location determination unless the mobile device has already determined that, given a coarse-grained location, the finer-grained location determination is warranted. For example, the mobile device need not download or store a list of base station identifiers of base stations located in San Francisco Bay Area, and locations associated with the base station identifiers, when a current system identifier indicates that the mobile device is connected to a CDMA system located in New York.</p>
<p id="p-0008" num="0007">Using multiple granularity location determination techniques, a mobile device can quickly determine a coarse estimate of a current geographic location of the mobile device. The determination calculation can include a simple memory lookup, based on the current CDMA identifier, and therefore can be resource efficient. The mobile device can improve the coarse estimate upon request.</p>
<p id="p-0009" num="0008">For GPS-enabled mobile devices, multiple granularity location determination techniques can be advantageous when, for example, GPS signals are weak (e.g., inside buildings). In addition, in a GPS-enabled mobile device, the geographic area associated with a CDMA identifier can be used to provide an almost instantaneous location estimate of the mobile device.</p>
<p id="p-0010" num="0009">A coarse location estimate can be improved on an as-needed basis. If a user of the mobile device requires more accurate location than the coarse location associated with a CDMA system, the mobile device can determine a current location based on a network identifier, a zone identifier, a base station identifier, or available wireless (e.g., WiFi&#x2122;, WiMax&#x2122;, or Bluetooth&#x2122;) connections, even if the mobile device is not equipped with GPS features or when GPS signals are weak.</p>
<p id="p-0011" num="0010">The details of one or more implementations of multiple granularity location determination are set forth in the accompanying drawings and the description below. Other features, aspects, and advantages of multiple granularity location determination will become apparent from the description, the drawings, and the claims.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 1</figref> is an overview of techniques of multiple granularity location determination.</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 2</figref> is a flowchart illustrating an exemplary process of multiple granularity location determination.</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 3</figref> is a block diagram illustrating an exemplary system implementing techniques of multiple granularity location determination.</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 4A</figref> is an overview of techniques of multiple granularity location determination implemented on mobile devices.</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 4B</figref> illustrates techniques of improving accuracy of a location associated with a CDMA identifier using locations of wireless access points.</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIGS. 4C and 4D</figref> are flowchart illustrating an exemplary process of multiple granularity location determination, executed on a mobile device.</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 5</figref> illustrates an exemplary user interface of multiple granularity location determination.</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 6</figref> is a block diagram illustrating an exemplary network architecture for implementing the features and operations described in reference to <figref idref="DRAWINGS">FIGS. 1-5</figref>.</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 7</figref> is a block diagram illustrating an exemplary device architecture of a mobile device implementing the features and operations described in reference to <figref idref="DRAWINGS">FIGS. 1-5</figref>.</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 8</figref> is a block diagram of an exemplary system architecture for implementing the features and operations described in reference to <figref idref="DRAWINGS">FIGS. 1-5</figref>.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<p id="p-0022" num="0021">Like reference symbols in the various drawings indicate like elements.</p>
<heading id="h-0005" level="1">DETAILED DESCRIPTION</heading>
<heading id="h-0006" level="1">Overview of Multiple Granularity Location Determination</heading>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 1</figref> is an overview of techniques of multiple granularity location determination. Server computer <b>100</b> can be connected to network <b>120</b>. Network <b>120</b> can be a data communications network (e.g., a packet switching network) or a hybrid of data and voice network. Through network <b>120</b>, server computer <b>100</b> can communicate with various devices that are connected to network <b>120</b>, including mobile devices <b>122</b><i>a</i>-<i>c</i>, <b>124</b>, and <b>126</b><i>a</i>-<i>b. </i></p>
<p id="p-0024" num="0023">Mobile devices <b>122</b><i>a</i>-<i>c</i>, <b>124</b>, and <b>126</b><i>a</i>-<i>b </i>can be location-aware mobile devices that can be connected to one or more CDMA systems. The CDMA systems can each cover one or more geographic areas. Server computer <b>100</b> can estimate geographic coordinates and a size to be associated with each geographic area using locations of mobile devices <b>122</b><i>a</i>-<i>c</i>, <b>124</b>, and <b>126</b><i>a</i>-<i>b</i>. The locations of mobile devices <b>122</b><i>a</i>-<i>c</i>, <b>124</b>, and <b>126</b><i>a</i>-<i>b </i>can be estimated using various technologies implemented on mobile devices <b>122</b><i>a</i>-<i>c</i>, <b>124</b>, and <b>126</b><i>a</i>-<i>b</i>. For example, mobile device <b>122</b><i>a </i>can determine a location of mobile device <b>122</b><i>a </i>using Global Positioning System (GPS) signals received though a GPS receiver that is built in or coupled to mobile device <b>122</b><i>a. </i></p>
<p id="p-0025" num="0024">Each of mobile devices <b>122</b><i>a</i>-<i>c</i>, <b>124</b>, and <b>126</b><i>a</i>-<i>b </i>can be served by a base station of the CDMA systems. For example, mobile devices <b>122</b><i>a</i>-<i>c </i>can be served by base stations <b>108</b><i>a</i>-<i>c</i>, respectively; mobile device <b>124</b> can be served by base station <b>110</b>; and mobile devices <b>126</b><i>a </i>and <b>126</b><i>b </i>can be served by base stations <b>112</b><i>a </i>and <b>112</b><i>b</i>, respectively. In some implementations, a CBSC can determine which mobile device can be served by which base station based on channel availability.</p>
<p id="p-0026" num="0025">Each CDMA service provider can define a cellular structure specific to the service provider, including grouping cells. In the example shown, each of base stations <b>108</b><i>a</i>-<i>c</i>, <b>110</b>, and <b>112</b><i>a</i>-<i>b </i>can belong to a same CDMA system and be associated with a same system identifier. Base stations <b>108</b><i>a</i>-<i>c </i>and <b>110</b> can be associated with a first network identifier. Base stations <b>112</b><i>a</i>-<i>b </i>can be associated with a second network identifier. Base stations <b>108</b><i>a</i>-<i>c </i>can be associated with a first zone identifier. Base station <b>110</b> can be associated with a second zone identifier. Base stations <b>112</b><i>a</i>-<i>b </i>can be associated with a third zone identifier.</p>
<p id="p-0027" num="0026">A mobile device (e.g., mobile device <b>122</b><i>a</i>) located within a cell (e.g., cell <b>102</b><i>a</i>) can acquire current CDMA identifiers of mobile device <b>122</b><i>a</i>. The current CDMA identifiers can include a base station identifier of base station <b>108</b><i>a</i>, the first zone identifier, the first network identifier, and the system identifier. Mobile device <b>122</b><i>a </i>can transmit the current CDMA identifiers and the current location of mobile device <b>122</b><i>a </i>to server computer <b>100</b> through network <b>120</b>. The transmission can occur at a certain time (e.g., when a user finishes a phone conversation and &#x201c;hangs up&#x201d; mobile device <b>122</b><i>a</i>, or when the user terminates a data communication session).</p>
<p id="p-0028" num="0027">In some implementations, the transmission from mobile devices <b>122</b><i>a</i>-<i>c</i>, <b>124</b>, and <b>126</b><i>a</i>-<i>b </i>to server computer <b>100</b> can be through the base stations. In some implementations, the transmissions from mobile devices <b>122</b><i>a</i>-<i>c </i>to server computer <b>100</b> can occur through wireless access points <b>114</b><i>a </i>and <b>114</b><i>b </i>of a wireless communications network, which can be distinct from the CDMA systems. An exemplary wireless communications network can be a Wireless Local Area Network (WLAN). For example, mobile devices <b>122</b><i>a</i>-<i>c </i>can store locations associated with current CDMA identifiers in a cache memory device, and transmit the stored locations and CDMA identifiers to server computer <b>100</b> when wireless access points <b>114</b><i>a </i>or <b>114</b><i>b </i>become available to mobile devices <b>122</b><i>a</i>-<i>c. </i></p>
<p id="p-0029" num="0028">Upon receiving the information (including CDMA identifiers and location coordinates) from mobile devices <b>122</b><i>a</i>-<i>c</i>, <b>124</b>, and <b>126</b><i>a</i>-<i>b</i>, server computer <b>100</b> can store the information in a temporary database. After a time period (e.g., a day, or a week) where a statistically significant amount of data has been received, server computer <b>100</b> can select from the temporary database CDMA identifiers that are associated with a number of locations that exceeds a threshold. The selected CDMA identifiers can be used in further computation.</p>
<p id="p-0030" num="0029">For each selected CDMA identifier, server computer <b>100</b> can calculate an estimated geographic area to be associated with the CDMA identifier based on the locations received from mobile devices <b>122</b><i>a</i>-<i>c</i>, <b>124</b>, and <b>126</b><i>a</i>-<i>b</i>. In this specification, the term &#x201c;CDMA location&#x201d; will be used to refer to the estimated geographic area to be associated with a CDMA identifier. The CDMA location can have various granularities. For example, in some implementations, a CDMA location associated with a system identifier can have a coarse granularity; a CDMA location associated with a network identifier can have a finer granularity; a CDMA location associated with a zone identifier can have a yet finer granularity; a CDMA location associated with a base station identifier can have a finest granularity. To determine a location of a mobile device at granularity finer than that of CDMA location associated with a base station identifier, the mobile device can use triangulation or GPS. Each CDMA location can be represented as a circle, whose center can be defined by a latitude and a longitude, and whose radius can correspond to a radius. The radius can represent a probability that a certain percentage of mobile devices (e.g., 95 percent) are located within the radius. The CDMA location associated with a particular CDMA identifier does not necessarily match the geographic shape or location of the area corresponding to the particular CDMA identifier as defined by the CDMA service provider. The CDMA identifiers and corresponding CDMA locations can be stored as location records <b>118</b> in CDMA location database <b>116</b>.</p>
<p id="p-0031" num="0030">For example, location records <b>118</b> can include four exemplary CDMA identifiers. &#x201c;SID<b>1</b>&#x201d; can be a system identifier for all cells base stations in a CDMA system (cells <b>102</b><i>a</i>-<i>c</i>, <b>104</b>, and <b>106</b><i>a</i>-<i>b</i>). &#x201c;NID<b>1</b>&#x201d; can be a network identifier for a portion of the CDMA system (cells <b>102</b><i>a</i>-<i>c </i>and cell <b>104</b>). &#x201c;ZID<b>1</b>&#x201d; can be a zone identifier for a base station group (including cells <b>102</b><i>a</i>-<i>c</i>). &#x201c;BSID<b>1</b>&#x201d; can be a base station identifier of a base station (e.g., base station <b>108</b><i>b</i>). Each of the CDMA identifiers can be associated with a latitude, a longitude, and an uncertainty radius. The latitudes, longitudes, and uncertainty radii can be included in records <b>118</b>.</p>
<p id="p-0032" num="0031">Server computer <b>100</b> can send, in a tiered manner, records <b>118</b> to mobile device <b>126</b><i>b </i>for determining a location of mobile device <b>126</b><i>b</i>. In some implementations, records <b>118</b> can be sent to mobile device <b>126</b><i>b </i>in portions. For example, server computer <b>100</b> can send system identifier &#x201c;SID<b>1</b>&#x201d; to mobile device <b>126</b><i>b </i>upon an initialization of mobile device <b>126</b><i>b</i>. Server computer <b>100</b> can send the network identifier &#x201c;NID<b>1</b>&#x201d; upon determining that mobile device <b>126</b><i>b </i>is within the coverage area of the CDMA system represented by &#x201c;SID<b>1</b>.&#x201d; Likewise, server computer <b>100</b> can send the zone identifier &#x201c;ZID<b>1</b>&#x201d; upon determining that mobile device <b>126</b><i>b </i>is within the cells represented by &#x201c;NID<b>1</b>.&#x201d; When server computer <b>100</b> determines that mobile device <b>126</b><i>b </i>is within the cells represented by &#x201c;ZID<b>1</b>,&#x201d; server computer <b>100</b> can send &#x201c;BSID<b>1</b>&#x201d; to mobile device <b>126</b><i>b. </i></p>
<heading id="h-0007" level="1">Exemplary Multiple Granularity Location Determination</heading>
<p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. 2</figref> is a flowchart illustrating exemplary process <b>200</b> of multiple granularity location determination. A computer can receive (<b>202</b>), from a set of first mobile devices, a first CDMA identifier of a CDMA system, a second CDMA identifier of the CDMA system, and a set of geographic locations of the set of first mobile devices. The first CDMA identifier and second CDMA identifier each can include at least one of a system identifier, a network identifier, a zone identifier, or a base station identifier. The first CDMA identifier (e.g., a system identifier, network identifier, or zone identifier) can identify at least portion of the CDMA system. The second CDMA identifier (e.g., a network identifier, zone identifier or base station identifier) can identify a subset of the portion of the CDMA system.</p>
<p id="p-0034" num="0033">The computer can determine (<b>204</b>), based on the set of geographic locations, a first CDMA location for associating with the first CDMA identifier. The first CDMA location can be a coarse location.</p>
<p id="p-0035" num="0034">The computer can determine (<b>206</b>), based on the set of geographic locations, a second CDMA location for associating with the second CDMA identifier. The second CDMA location can be inside the first CDMA location and have finer granularity than that of the first CDMA location. The first CDMA location and second CDMA location each can include geographic coordinates (e.g., latitudes, longitudes, and latitudes) and an indicator of an error margin. Operations of determining the first and second CDMA location will be described in further detail below in reference to <figref idref="DRAWINGS">FIG. 3B</figref>.</p>
<p id="p-0036" num="0035">The computer can provide (<b>208</b>), in a tiered manner, the first CDMA location and the second CDMA location to a second mobile device for estimating a geographic location of the second mobile device using the first CDMA identifier and the second CDMA identifier. Providing the first CDMA location and the second CDMA location to the second mobile device can include providing the first CDMA location to the second mobile device in association with the first CDMA identifier. The computer can receive a confirmation that the second mobile device is located at the first CDMA location. The computer can then provide the second CDMA location to the second mobile device in association with the second CDMA identifier.</p>
<p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. 3</figref> is a block diagram illustrating an exemplary system implementing techniques of multiple granularity location determination. The system can include one or more processors, one or more memory devices storing instructions, and other hardware or software components. The system can include location engine <b>350</b> that can be used to determine a CDMA location to be associated with a CDMA identifier.</p>
<p id="p-0038" num="0037">Location engine <b>350</b> can include data collection module <b>352</b> that can receive data from various mobile devices through various access points or base stations. The data can include multiple data points that can indicate locations of one or more location-aware mobile devices as well as current CDMA identifiers of the mobile devices. In some implementations, the data points can also include information on which time zone the mobile devices are located. Data collection module <b>352</b> can include data reception module <b>354</b>, which can receive data transmitted from the mobile devices, and data indexing module <b>356</b>. Data indexing module <b>356</b> can perform various processing on the received data points. For example, data indexing module <b>356</b> can sort latitudes, longitudes, and altitudes based on base station identifiers. Data indexing module <b>356</b> can also group data into sets based on time periods. For example, a new set of received locations can be created for a configurable period of time (e.g., six hours).</p>
<p id="p-0039" num="0038">Sets of received locations of the mobile devices, as well as associating CDMA identifiers, can be stored in data point database <b>360</b>. Data point database <b>360</b> can store current and historical locations of various mobile devices. Data point database <b>360</b> can include an ad hoc database, relational database, object-oriented database. Data point database <b>360</b> can be hosted locally or remotely in relation to location engine <b>350</b>.</p>
<p id="p-0040" num="0039">Location calculation module <b>364</b> can be utilized to calculate an average geographic location in sets of data points in data points database, calculate distances between the average geographic location and locations of various data points, and exclude locations from the sets for further computation. Location calculation module <b>364</b> can perform the calculations for a particular set (e.g., a set of data points associated with a base station identifier) until an exit condition is reached for the particular set. Location calculation module <b>364</b> can determine CDMA locations for each CDMA identifier.</p>
<p id="p-0041" num="0040">In some implementations, location calculation module <b>364</b> can calculate the sizes of a CDMA location using CDMA location size calculator <b>366</b>. A CDMA location can be defined by a center having the average latitude, longitude, and altitude coordinates of the set of locations. The CDMA location can be further defined by a radius determined based on distances from locations in the set of locations to the center. The latitude, longitude, and altitude coordinates of centers for the CDMA location locations and the radii of the CDMA location locations can be stored in CDMA location database <b>372</b>. CDMA location database <b>372</b> can be updated periodically by location calculation module <b>364</b>.</p>
<p id="p-0042" num="0041">The data of CDMA location database <b>372</b> can be distributed to mobile devices using data distribution module <b>376</b>. Data distribution module <b>376</b> can send information of CDMA location locations (e.g., center coordinates and radii) that are associated with CDMA identifiers to mobile devices (e.g., non-GPS-enabled mobile device) upon request, through broadcasting, or using various push technology without receiving requests from the mobile devices.</p>
<heading id="h-0008" level="1">Multiple Granularity Location Determination on Mobile Devices</heading>
<p id="p-0043" num="0042"><figref idref="DRAWINGS">FIG. 4A</figref> is an overview of techniques of multiple granularity location determination implemented on mobile devices. Mobile device <b>400</b> can be a mobile device that can connect to a CDMA communications network. As an illustration, initially, mobile device <b>400</b> is unaware of a current location. In response to a user inquiry of location, mobile device <b>400</b> can provide for display in a graphical user interface a default location indicator corresponding to country <b>402</b>.</p>
<p id="p-0044" num="0043">At stage <b>401</b><i>b</i>, mobile device <b>400</b> can detect CDMA signals and connect to a base station of a CDMA system. Mobile device <b>400</b> can receive from the base station current CDMA identifiers including a system identifier, a network identifier, a zone identifier, and a base station identifier. Mobile device <b>400</b> can perform a lookup in a set of stored system identifiers using the current system identifier. The stored system identifiers can be stored on mobile device <b>400</b> or retrieved from a server. Each stored system identifier can be stored in association with a coarse CDMA location. In some implementations, the system identifiers can be stored on mobile device <b>400</b> when mobile device <b>400</b> was manufactured or shipped, and can be added to or updated as a part of the software update process for mobile device <b>400</b>.</p>
<p id="p-0045" num="0044">If the current system identifier is not in the set of stored system identifiers, mobile device <b>400</b> can continue using the default location indicator corresponding to country <b>402</b> in response to a user query for location. If the current system identifier is in the set of stored system identifiers, in stage <b>401</b><i>c</i>, mobile device <b>400</b> can zoom into the coarse CDMA location. In response to a user inquiry of location, mobile device <b>400</b> can provide for display in a graphical user interface a location indicator corresponding to coarse CDMA location <b>404</b>. Coarse CDMA location <b>404</b> can correspond to the current system identifier</p>
<p id="p-0046" num="0045">In addition, mobile device <b>400</b> can retrieve one or more network identifiers from a storage device on mobile device <b>400</b> or from a server computer. The network identifiers can be network identifiers of the CDMA system identified by the system identifier. Each retrieved network identifier can be stored in association with a CDMA location that has a finer granularity than that associated with a system identifier. Mobile device <b>400</b> can perform a look up into the retrieved network identifiers using the current network identifier. In some implementations, the network identifiers can be stored on mobile device <b>400</b> when mobile device <b>400</b> was manufactured or shipped.</p>
<p id="p-0047" num="0046">If the current network identifier is not in the set of retrieved network identifiers, mobile device <b>400</b> can continue using the location indicator corresponding to coarse CDMA location <b>404</b> in response to a user query. If the current network identifier is in the set of retrieved network identifiers, mobile device <b>400</b> can zoom into the finer-grained CDMA location. In response to a user inquiry of location, mobile device <b>400</b> can provide for display in a graphical user interface a location indicator corresponding to the finer-grained CDMA location <b>406</b>.</p>
<p id="p-0048" num="0047">Similarly, at stage <b>401</b><i>d</i>, mobile device <b>400</b> can retrieve one or more zone identifiers corresponding to the current network identifier, and provide for display a current location indicator indicating a location corresponding to the zone identifier. The location can correspond to multiple cells <b>408</b><i>a</i>. Mobile device <b>400</b> can then retrieve base station identifiers that correspond to the current zone identifier, and identify a current location that corresponds to CDMA location <b>408</b><i>b </i>associated with the current base station identifier. Mobile device <b>400</b> can further improve the granularity of a current location using wireless access points. Operations of improving the granularity of a current location using wireless access points will be described in more details below in reference to <figref idref="DRAWINGS">FIG. 4B</figref>. At each of stages <b>401</b><i>a</i>-<i>d</i>, if a finer CDMA location cannot be determined, mobile device <b>400</b> can fall back to a coarser CDMA location in a previous stage.</p>
<p id="p-0049" num="0048">In some implementations, mobile device <b>400</b> can request the zone identifiers and base station identifiers from a server upon a user request to provide fine granularity locations. Mobile device <b>400</b> can display a prompt, indicating to the user that a data request will be sent.</p>
<p id="p-0050" num="0049"><figref idref="DRAWINGS">FIG. 4B</figref> illustrates techniques of improving accuracy of a location associated with a CDMA identifier using locations of wireless access points. Mobile device <b>400</b> can be an exemplary mobile device that can use locations of wireless access points to determine its location. An exemplary section of a communication network that includes access points <b>414</b><i>a</i>-<i>d </i>is illustrated. Mobile device <b>400</b> can be associated with a current base station identifier of a CDMA system, and can identify a current location based on the current base station identifier.</p>
<p id="p-0051" num="0050">Mobile device <b>400</b> can be wirelessly connected to access point <b>414</b><i>a</i>. Access point <b>414</b><i>a </i>can be an access point of a WLAN (e.g., a WiFi&#x2122;, WiMax&#x2122;, or Bluetooth&#x2122; network). From access point <b>414</b><i>a</i>, mobile device <b>400</b> can receive data that include locations of neighboring access points. Mobile device <b>400</b> can store the received data on a storage device. The stored data can be updated periodically.</p>
<p id="p-0052" num="0051">In the example shown, mobile device <b>400</b> is connected to access point <b>414</b><i>a</i>. In addition, mobile device <b>400</b> is located within communication ranges to access points <b>414</b><i>b</i>, <b>414</b><i>c</i>, and <b>414</b><i>d</i>. Mobile device <b>400</b> can identify access points <b>414</b><i>a</i>, <b>414</b><i>b</i>, <b>414</b><i>c</i>, and <b>414</b><i>d </i>under wireless communication protocols used in the WLAN (e.g., IEEE 802.11a). Access points <b>414</b><i>a</i>, <b>414</b><i>b</i>, <b>414</b><i>c</i>, and <b>414</b><i>d </i>can be identified by media access control (MAC) addresses of the access points or other identifiers (e.g., Bluetooth&#x2122; identifiers).</p>
<p id="p-0053" num="0052">Mobile device <b>400</b> can identify presence areas <b>416</b><i>a</i>, <b>416</b><i>b</i>, <b>416</b><i>c</i>, and <b>416</b><i>d </i>that are associated with access points <b>414</b><i>a</i>-<i>d</i>, respectively. A &#x201c;presence area&#x201d; (e.g., presence area <b>416</b><i>a</i>) can be an estimated area that is associated with an access point (e.g., access point <b>414</b><i>a</i>) in which mobile devices connected to access point <b>414</b><i>a </i>is likely to be located. Identifying presence areas <b>416</b><i>a</i>-<i>d </i>can include retrieving information on the presence areas <b>416</b><i>a</i>-<i>d </i>from a memory device coupled to mobile device <b>400</b>. In some implementations, mobile device <b>400</b> can request from a server the presence areas <b>416</b><i>a</i>-<i>d </i>by sending to the server identifiers of access points <b>414</b><i>a</i>-<i>d. </i></p>
<p id="p-0054" num="0053">Based on presence areas <b>416</b><i>a</i>-<i>d</i>, mobile device <b>400</b> can execute an iterative process (e.g., a multi-pass analysis) on the presence areas <b>416</b><i>a</i>-<i>d</i>. The iterative process can produce geographic area <b>412</b>, which can be an estimate of the current geographic location of mobile device <b>400</b>. Geographic area <b>412</b> can be a geographic space when three-dimensional location information is utilized. Mobile device <b>400</b> can display the estimated current location on a display device (e.g., on a map display). The estimated current location can be a location that can improve upon the CDMA location determined by a base station identifier.</p>
<p id="p-0055" num="0054"><figref idref="DRAWINGS">FIG. 4C</figref> is a flowchart illustrating exemplary process <b>420</b> of multiple granularity location determination, executed on mobile device <b>400</b>. Mobile device <b>400</b> can determine (<b>422</b>) that a first CDMA identifier matches a stored first CDMA identifier. The stored first CDMA identifier can correspond to at least a portion of a CDMA system and be associated with a first location. The first CDMA identifier can include a system identifier, a network identifier, or a zone identifier.</p>
<p id="p-0056" num="0055">Mobile device <b>400</b> can receive (<b>424</b>), from a server or from a storage device coupled to mobile device <b>400</b>, one or more second CDMA identifiers. Each second CDMA identifier can be associated with a second location. Each second CDMA identifier can correspond to a subset of the portion of the CDMA system. The one or more second CDMA identifiers can include one or more base station identifiers. Mobile device <b>400</b> can designate the first location as the current location of mobile device <b>400</b> before determining that the second current CDMA identifier matches a received second CDMA identifier. Mobile device <b>400</b> can provide a first indicator for display. The first indicator can indicate the first location. Upon determining that the second current CDMA identifier matches the received second CDMA identifier, mobile device <b>400</b> can provide a second indicator for display. The second indicator can indicate the second location</p>
<p id="p-0057" num="0056">Mobile device <b>400</b> can determine (<b>426</b>) that a second current CDMA identifier matches a received second CDMA identifier. Mobile device <b>400</b> can designate (<b>428</b>) the second location associated with the matching received second CDMA identifier as a current location of mobile device <b>400</b>.</p>
<p id="p-0058" num="0057">In some implementations, mobile device <b>400</b> can detect a change of the first current CDMA identifier. For example, when mobile device <b>400</b> moves from a first CDMA system to a second CDMA system, the system identifier can change. Upon detecting the change, mobile device <b>400</b> can request, from a server, the one or more second CDMA identifiers.</p>
<p id="p-0059" num="0058"><figref idref="DRAWINGS">FIG. 4D</figref> is a flowchart illustrating exemplary process <b>440</b> of multiple granularity location determination, executed on mobile device <b>400</b>. Mobile device <b>400</b> can determine (<b>442</b>) a first current location of mobile device <b>400</b> using a first current CDMA identifier. The first current CDMA identifier can be associated with at least a portion of a CDMA system. The first current CDMA identifier can include at least one of a system identifier, a network identifier, or a zone identifier. The first current CDMA identifier can correspond to a first location. The first location can have a first granularity. Determining the first current location can include receiving the first current CDMA identifier from the CDMA system. Mobile device <b>400</b> can identify a stored first CDMA identifier that matches the first current CDMA identifier. The stored first CDMA identifier can be associated with a first location. Mobile device <b>400</b> can designate the first location associated with the stored first CDMA identifier as the first current location of mobile device <b>400</b>.</p>
<p id="p-0060" num="0059">In response to a request to determine a current location at a location granularity finer than the first granularity, mobile device <b>400</b> can determine (<b>444</b>) a second current location of mobile device <b>400</b> using a second current CDMA identifier. The second current CDMA identifier can include at least one of a network identifier, a zone identifier, or a base station identifier. The second current CDMA identifier can correspond to a second location. The second location can have a second granularity that is finer than the first granularity. The second CDMA identifier can be associated with a subset of the portion of the CDMA system represented by the first CDMA identifier. Determining the second current location can include receiving the second current CDMA identifier from the CDMA system. Mobile device <b>400</b> can request at and receive from a server a set of one or more second CDMA identifiers. Each received second CDMA identifier can be associated with a second location. Mobile device <b>400</b> can identify a received second CDMA identifier that matches the second current CDMA identifier. Mobile device <b>400</b> can designate the second location associated with the matching second CDMA identifier as the second current location of the mobile device <b>400</b>.</p>
<p id="p-0061" num="0060">Mobile device <b>400</b> can provide (<b>446</b>) the second current location for display on mobile device <b>400</b>. In some implementations, before providing the second current location for display, mobile device <b>400</b> can provide the first current location for display on mobile device <b>400</b>. Providing the second current location for display can include providing for display an animation effect. The animation effect can zoom from the first current location to the second current location.</p>
<heading id="h-0009" level="1">Exemplary User Interface of Multiple Granularity Location Determination</heading>
<p id="p-0062" num="0061"><figref idref="DRAWINGS">FIG. 5</figref> illustrates an exemplary user interface for multiple granularity location determination. In <figref idref="DRAWINGS">FIG. 5</figref>, example map <b>502</b> of a geographic area is displayed on mobile device <b>500</b>. Mobile device <b>500</b> can be, for example, a handheld computer, a personal digital assistant, a cellular telephone, an electronic tablet, a network appliance, a camera, a smart phone, an enhanced general packet radio service (EGPRS) mobile phone, a network base station, a media player, a navigation device, an email device, a game console, or a combination of any two or more of these data processing devices or other data processing devices.</p>
<p id="p-0063" num="0062">Exemplary map <b>502</b> with a geographic area can be displayed on mobile device <b>500</b>. Mobile device <b>500</b>, when connected to a CDMA system, can acquire current CDMA identifiers. Mobile device <b>500</b> can retrieve a CDMA location corresponding to a current CDMA identifier by requesting from a server the CDMA location, or query a CDMA location database stored on a storage device on mobile device <b>500</b>. In some implementations, mobile device <b>500</b> can display the map <b>502</b> on the touch sensitive display <b>530</b> of mobile device <b>500</b>. The map <b>502</b> can be displayed when a user selects a maps object to view mapping and location based services. In some implementations, objects, such as the maps object, can be selected by voice activation. A search bar <b>504</b> and a bookmarks list object <b>506</b> can be displayed at the top of the map <b>502</b>. Below the bottom of the map one or more display objects can be displayed, for example a search object <b>508</b>, a directions object <b>510</b>, a map view object <b>512</b>, and a current location object <b>514</b>.</p>
<p id="p-0064" num="0063">The search bar <b>504</b> can be used to find an address or other location on the map. For example, a user can enter their home address in the search bar <b>504</b>, and the region containing the address would be displayed on the map <b>502</b>. The bookmarks list object <b>506</b> can, for example, bring up a Bookmarks list that contains addresses that are frequently visited, such as a user's home address. The Bookmarks list can also, for example, contain special bookmarks such as the current location (e.g. the current location of mobile device <b>500</b>).</p>
<p id="p-0065" num="0064">Search object <b>508</b> can be used to display search bar <b>504</b> and other map related search menus. The directions object <b>510</b> can, for example, bring up a menu interface that allows the user to enter a start and end location. The interface can then display information (e.g., directions and travel time for a route from the start location to the end location). Map view object <b>512</b> can bring up a menu that can allow the user to select display options for map <b>502</b>. For example, map <b>502</b> can be changed from black and white to color, the background of the map can be changed, or the user can change the brightness of the map.</p>
<p id="p-0066" num="0065">Current location object <b>514</b> can allow the user to see geographic area <b>516</b> on map <b>502</b> indicating where mobile device <b>500</b> is currently located. Geographic area <b>516</b> can correspond to a CDMA location that can be used as an estimate of the current location of mobile device <b>500</b>. The CDMA location can have a center that is an average geographic location of data points. The CDMA location can have a radius that can be determined based on a distance between the average geographic location and one or more locations associated with a current CDMA identifier. The circle surrounding geographic area <b>516</b> can be replaced by another circle with smaller radius, when mobile device <b>500</b> can refine a granularity of a current location estimate. A special current location bookmark can be placed in the Bookmarks list when current location object <b>514</b> is selected. If the special current location bookmark was previously set in the Bookmarks list, the old bookmark information can, for example, be replaced with the new current location information. In some implementations, the special current location bookmark is tied to the centroid of geographic area <b>516</b>. That is, the special current location bookmark can include the coordinates for the centroid of geographic area <b>516</b>. Geographic area <b>516</b> can, for example, be depicted by a circle, rectangle, square, hexagon, or other enclosed region with crosshairs, or some other distinctive element to differentiate geographic area <b>516</b> from map <b>502</b>.</p>
<p id="p-0067" num="0066">In some implementations, geographic area <b>516</b> can indicate a region in which mobile device <b>500</b> is determined or estimated to be located, and the geographic area may not necessarily be centered on the actual current position of mobile device <b>500</b>. In this example, mobile device <b>500</b> may be located off-center within the geographic area. In another example, geographic area <b>516</b> can be centered on an estimated current position of mobile device <b>500</b> (e.g., the center of the CDMA location).</p>
<p id="p-0068" num="0067">Mobile device <b>500</b> can, for example, center the map view on geographic area <b>516</b> when the current location object <b>514</b> is tapped or otherwise selected. In some implementations, the zoom level of the map can be adjusted based on the accuracy or precision of the location data or the technology, system, or service that provided the location data. For example, the map can be zoomed out when mobile device <b>500</b> cannot receive GPS signals for lower accuracy and uses base station data to determine its location. The map can be zoomed in for higher accuracy if mobile device <b>500</b> is capable of using GPS location data to determine its current location. In some implementations, the zoom level can be based on the velocity of mobile device <b>500</b> (e.g., the map can be zoomed out at higher velocities and zoomed in when mobile device <b>500</b> is not moving). A combination of accuracy or precision and velocity can also be used.</p>
<p id="p-0069" num="0068">If all methods for retrieving location-based data fail (e.g., when mobile device <b>500</b> is not within communication range of any base station or wireless access points), and there are no other systems or services available for determining or estimating the current position of mobile device <b>500</b>, an error can be displayed to the user and no geographic area is displayed on map <b>502</b>. The error can, for example, contain a message to the user informing them of the failure and the possible reason or reasons for the failure.</p>
<p id="p-0070" num="0069">Current location object <b>514</b> can be selected, for example, to activate the estimating and displaying of geographic area <b>516</b> on map <b>502</b>, to get directions to or from the estimated current location (i.e., the centroid of geographic area <b>516</b>), to send the estimated current location of mobile device <b>500</b> to a friend (e.g., such that the friend can go to the same location), or to create a bookmark for the estimated current location.</p>
<heading id="h-0010" level="1">Exemplary Network Architecture</heading>
<p id="p-0071" num="0070"><figref idref="DRAWINGS">FIG. 6</figref> is a block diagram illustrating exemplary network architecture <b>600</b> for implementing the features and operations described in reference to <figref idref="DRAWINGS">FIGS. 1-5</figref>. Mobile devices <b>602</b><i>a </i>and <b>602</b><i>b </i>can, for example, communicate over one or more wired and/or wireless networks <b>610</b> in data communication. For example, a wireless network <b>612</b>, e.g., a cellular network, can communicate with a wide area network (WAN) <b>614</b>, such as the Internet, by use of a gateway <b>616</b>. Likewise, an access device <b>618</b>, such as an 802.11g wireless access device, can provide communication access to the wide area network <b>614</b>.</p>
<p id="p-0072" num="0071">In some implementations, both voice and data communications can be established over wireless network <b>612</b> and the access device <b>618</b>. For example, mobile device <b>602</b><i>a </i>can place and receive phone calls (e.g., using voice over Internet Protocol (VoIP) protocols), send and receive e-mail messages (e.g., using Post Office Protocol 3 (POP3)), and retrieve electronic documents and/or streams, such as web pages, photographs, and videos, over wireless network <b>612</b>, gateway <b>616</b>, and wide area network <b>614</b> (e.g., using Transmission Control Protocol/Internet Protocol (TCP/IP) or User Datagram Protocol (UDP)). Likewise, in some implementations, the mobile device <b>602</b><i>b </i>can place and receive phone calls, send and receive e-mail messages, and retrieve electronic documents over the access device <b>618</b> and the wide area network <b>614</b>. In some implementations, mobile device <b>602</b><i>a </i>or <b>602</b><i>b </i>can be physically connected to the access device <b>618</b> using one or more cables and the access device <b>618</b> can be a personal computer. In this configuration, mobile device <b>602</b><i>a </i>or <b>602</b><i>b </i>can be referred to as a &#x201c;tethered&#x201d; device.</p>
<p id="p-0073" num="0072">Mobile devices <b>602</b><i>a </i>and <b>602</b><i>b </i>can also establish communications by other means. For example, mobile device <b>602</b><i>a </i>can communicate with other wireless devices, e.g., other mobile devices, cell phones, etc., over the wireless network <b>612</b>. Likewise, mobile devices <b>602</b><i>a </i>and <b>602</b><i>b </i>can establish peer-to-peer communications <b>620</b>, e.g., a personal area network, by use of one or more communication subsystems, such as the Bluetooth&#x2122; communication devices. Other communication protocols and topologies can also be implemented.</p>
<p id="p-0074" num="0073">The mobile device <b>602</b><i>a </i>or <b>602</b><i>b </i>can, for example, communicate with one or more services <b>630</b>, <b>640</b>, <b>650</b>, and <b>660</b> over the one or more wired and/or wireless networks. For example, one or more location tracking services <b>630</b> can calculate CDMA locations to be associated with each CDMA identifier and create a CDMA location database. The CDMA location database can be sent to mobile devices <b>602</b><i>a </i>and <b>602</b><i>b</i>. In some implementations, location tracking services <b>630</b> can also calculate locations to be associated with access points.</p>
<p id="p-0075" num="0074">Messaging service <b>640</b> can, for example, provide e-mail and/or other messaging services (e.g., Short Message Service (SMS)). Messaging service <b>640</b> can allow a current user of a mobile device (e.g., mobile device <b>602</b><i>a</i>) to communicate with a requester who requests location information of mobile device <b>602</b><i>a</i>. Device security service <b>650</b> can, for example, provide functions for analyzing security events to determine security risk factor, sending security commands to mobile devices <b>602</b><i>a </i>and <b>602</b><i>b</i>, and processing security status information sent from mobile devices <b>602</b><i>a </i>and <b>602</b><i>b. </i></p>
<p id="p-0076" num="0075">Location updating service <b>660</b> can determine whether to send location information, including CDMA locations and locations of one or more access points, to mobile devices <b>602</b><i>a </i>and <b>602</b><i>b</i>. Upon determination that the information is to be sent (e.g., based on a request from mobile device <b>602</b><i>a </i>or <b>602</b><i>b</i>), location updating service <b>660</b> can transmit the information to mobile devices <b>602</b><i>a </i>and <b>602</b><i>b. </i></p>
<p id="p-0077" num="0076">Mobile device <b>602</b><i>a </i>or <b>602</b><i>b </i>can also access other data and content over the one or more wired and/or wireless networks. For example, content publishers, such as news sites, Really Simple Syndication (RSS) feeds, web sites, blogs, social networking sites, developer networks, etc., can be accessed by mobile device <b>602</b><i>a </i>or <b>602</b><i>b</i>. Such access can be provided by invocation of a web browsing function or application (e.g., a browser) in response to a user touching, for example, a Web object.</p>
<heading id="h-0011" level="1">Exemplary Mobile Device Architecture</heading>
<p id="p-0078" num="0077"><figref idref="DRAWINGS">FIG. 7</figref> is a block diagram of an exemplary architecture <b>700</b> for the mobile devices of <figref idref="DRAWINGS">FIGS. 1-6</figref>. A mobile device can include memory interface <b>702</b>, one or more data processors, image processors and/or central processing units <b>704</b>, and peripherals interface <b>706</b>. Memory interface <b>702</b>, one or more processors <b>704</b>, and/or peripherals interface <b>706</b> can be separate components or can be integrated in one or more integrated circuits. The various components in the mobile device, for example, can be coupled by one or more communication buses or signal lines.</p>
<p id="p-0079" num="0078">Sensors, devices, and subsystems can be coupled to peripherals interface <b>706</b> to facilitate multiple functionalities. For example, motion sensor <b>710</b>, light sensor <b>712</b>, and proximity sensor <b>714</b> can be coupled to peripherals interface <b>706</b> to facilitate orientation, lighting, and proximity functions of the mobile device. Location processor <b>715</b> (e.g., GPS receiver) can be connected to peripherals interface <b>706</b> to provide geopositioning. Electronic magnetometer <b>716</b> (e.g., an integrated circuit chip) can also be connected to peripherals interface <b>706</b> to provide data that can be used to determine the direction of magnetic North. Thus, electronic magnetometer <b>716</b> can be used as an electronic compass.</p>
<p id="p-0080" num="0079">Camera subsystem <b>720</b> and an optical sensor <b>722</b>, e.g., a charged coupled device (CCD) or a complementary metal-oxide semiconductor (CMOS) optical sensor, can be utilized to facilitate camera functions, such as recording photographs and video clips.</p>
<p id="p-0081" num="0080">Communication functions can be facilitated through one or more wireless communication subsystems <b>724</b>, which can include radio frequency receivers and transmitters and/or optical (e.g., infrared) receivers and transmitters. The specific design and implementation of the communication subsystem <b>724</b> can depend on the communication network(s) over which a mobile device is intended to operate. For example, a mobile device can include communication subsystems <b>724</b> designed to operate over a GSM network, a GPRS network, an EDGE network, a WiFi&#x2122; or WiMax&#x2122; network, and a Bluetooth&#x2122; network. In particular, the wireless communication subsystems <b>724</b> can include hosting protocols such that the mobile device can be configured as a base station for other wireless devices.</p>
<p id="p-0082" num="0081">Audio subsystem <b>726</b> can be coupled to a speaker <b>728</b> and a microphone <b>730</b> to facilitate voice-enabled functions, such as voice recognition, voice replication, digital recording, and telephony functions.</p>
<p id="p-0083" num="0082">I/O subsystem <b>740</b> can include touch screen controller <b>742</b> and/or other input controller(s) <b>744</b>. Touch-screen controller <b>742</b> can be coupled to a touch screen <b>746</b> or pad. Touch screen <b>746</b> and touch screen controller <b>742</b> can, for example, detect contact and movement or break thereof using any of a plurality of touch sensitivity technologies, including but not limited to capacitive, resistive, infrared, and surface acoustic wave technologies, as well as other proximity sensor arrays or other elements for determining one or more points of contact with touch screen <b>746</b>.</p>
<p id="p-0084" num="0083">Other input controller(s) <b>744</b> can be coupled to other input/control devices <b>748</b>, such as one or more buttons, rocker switches, thumb-wheel, infrared port, USB port, and/or a pointer device such as a stylus. The one or more buttons (not shown) can include an up/down button for volume control of speaker <b>728</b> and/or microphone <b>730</b>.</p>
<p id="p-0085" num="0084">In one implementation, a pressing of the button for a first duration may disengage a lock of the touch screen <b>746</b>; and a pressing of the button for a second duration that is longer than the first duration may turn power to mobile device <b>400</b> on or off. The user may be able to customize a functionality of one or more of the buttons. The touch screen <b>746</b> can, for example, also be used to implement virtual or soft buttons and/or a keyboard.</p>
<p id="p-0086" num="0085">In some implementations, mobile device <b>400</b> can present recorded audio and/or video files, such as MP3, AAC, and MPEG files. In some implementations, mobile device <b>400</b> can include the functionality of an MP3 player, such as an iPod&#x2122; Mobile device <b>400</b> may, therefore, include a pin connector that is compatible with the iPod. Other input/output and control devices can also be used.</p>
<p id="p-0087" num="0086">Memory interface <b>702</b> can be coupled to memory <b>750</b>. Memory <b>750</b> can include high-speed random access memory and/or non-volatile memory, such as one or more magnetic disk storage devices, one or more optical storage devices, and/or flash memory (e.g., NAND, NOR). Memory <b>750</b> can store operating system <b>752</b>, such as Darwin, RTXC, LINUX, UNIX, OS X, WINDOWS, or an embedded operating system such as VxWorks. Operating system <b>752</b> may include instructions for handling basic system services and for performing hardware dependent tasks. In some implementations, operating system <b>752</b> can include a kernel (e.g., UNIX kernel).</p>
<p id="p-0088" num="0087">Memory <b>750</b> may also store communication instructions <b>754</b> to facilitate communicating with one or more additional devices, one or more computers and/or one or more servers. Memory <b>750</b> may include graphical user interface instructions <b>756</b> to facilitate graphic user interface processing; sensor processing instructions <b>758</b> to facilitate sensor-related processing and functions; phone instructions <b>760</b> to facilitate phone-related processes and functions; electronic messaging instructions <b>762</b> to facilitate electronic-messaging related processes and functions; web browsing instructions <b>764</b> to facilitate web browsing-related processes and functions; media processing instructions <b>766</b> to facilitate media processing-related processes and functions; GPS/Navigation instructions <b>768</b> to facilitate GPS and navigation-related processes and instructions; camera instructions <b>770</b> to facilitate camera-related processes and functions; magnetometer data <b>772</b> and calibration instructions <b>774</b> to facilitate magnetometer calibration. The memory <b>750</b> may also store other software instructions (not shown), such as security instructions, web video instructions to facilitate web video-related processes and functions, and/or web shopping instructions to facilitate web shopping-related processes and functions. In some implementations, the media processing instructions <b>766</b> are divided into audio processing instructions and video processing instructions to facilitate audio processing-related processes and functions and video processing-related processes and functions, respectively. An activation record and International Mobile Equipment Identity (IMEI) or similar hardware identifier can also be stored in memory <b>750</b>. Memory <b>750</b> can include location instructions <b>776</b> that can be used to transmit a current location to an access point, to determine an estimated current location based on location data associated with access points to which the mobile device is within a communication range, and to determine a current location using CDMA identifiers.</p>
<p id="p-0089" num="0088">Each of the above identified instructions and applications can correspond to a set of instructions for performing one or more functions described above. These instructions need not be implemented as separate software programs, procedures, or modules. Memory <b>750</b> can include additional instructions or fewer instructions. Furthermore, various functions of the mobile device may be implemented in hardware and/or in software, including in one or more signal processing and/or application specific integrated circuits.</p>
<heading id="h-0012" level="1">Exemplary System Architecture</heading>
<p id="p-0090" num="0089"><figref idref="DRAWINGS">FIG. 8</figref> is a block diagram of an exemplary system architecture <b>800</b> for implementing the features and operations described in reference to <figref idref="DRAWINGS">FIGS. 1-5</figref>. Other architectures are possible, including architectures with more or fewer components. In some implementations, architecture <b>800</b> includes one or more processors <b>802</b> (e.g., dual-core Intel&#xae; Xeon&#xae; Processors), one or more output devices <b>804</b> (e.g., LCD), one or more network interfaces <b>806</b>, one or more input devices <b>808</b> (e.g., mouse, keyboard, touch-sensitive display) and one or more computer-readable mediums <b>812</b> (e.g., RAM, ROM, SDRAM, hard disk, optical disk, flash memory, etc.). These components can exchange communications and data over one or more communication channels <b>810</b> (e.g., buses), which can utilize various hardware and software for facilitating the transfer of data and control signals between components.</p>
<p id="p-0091" num="0090">The term &#x201c;computer-readable medium&#x201d; refers to any medium that participates in providing instructions to processor <b>802</b> for execution, including without limitation, non-volatile media (e.g., optical or magnetic disks), volatile media (e.g., memory) and transmission media. Transmission media includes, without limitation, coaxial cables, copper wire and fiber optics.</p>
<p id="p-0092" num="0091">Computer-readable medium <b>812</b> can further include operating system <b>814</b> (e.g., Mac OS&#xae; server, Windows&#xae; NT server), network communication module <b>818</b>, database interface <b>820</b>, data collection module <b>830</b>, location calculation module <b>840</b>, and data distribution module <b>850</b>. Data collection module <b>830</b> can be configured to receive CDMA identifiers and location coordinates from mobile devices. Location calculation module <b>840</b> can be configured to determine a location to be associated with each CDMA identifier. Data distribution module <b>850</b> can be configured to distribute the CDMA identifiers and associated locations to mobile devices. Operating system <b>814</b> can be multi-user, multiprocessing, multitasking, multithreading, real time, etc. Operating system <b>814</b> performs basic tasks, including but not limited to: recognizing input from and providing output to devices <b>806</b>, <b>808</b>; keeping track and managing files and directories on computer-readable mediums <b>812</b> (e.g., memory or a storage device); controlling peripheral devices; and managing traffic on the one or more communication channels <b>810</b>. Network communications module <b>816</b> includes various components for establishing and maintaining network connections (e.g., software for implementing communication protocols, such as TCP/IP, HTTP, etc.). Database interface <b>820</b> can include interfaces to one or more databases on a file system. The databases can be organized under a hierarchical folder structure, the folders mapping to directories in the file system. Data collection module <b>830</b> can include components for collecting data from multiple mobile devices. Location calculation module <b>840</b> can include one or more components (e.g., location engine <b>350</b>) for performing calculations on locations received from mobile devices. Data distribution module <b>850</b> can perform various functions for transmitting location data in association with CDMA identifiers to various computing devices, including mobile devices.</p>
<p id="p-0093" num="0092">Architecture <b>800</b> can be included in any device capable of hosting a database application program. Architecture <b>800</b> can be implemented in a parallel processing or peer-to-peer infrastructure or on a single device with one or more processors. Software can include multiple software components or can be a single body of code.</p>
<p id="p-0094" num="0093">The described features can be implemented advantageously in one or more computer programs that are executable on a programmable system including at least one programmable processor coupled to receive data and instructions from, and to transmit data and instructions to, a data storage system, at least one input device, and at least one output device. A computer program is a set of instructions that can be used, directly or indirectly, in a computer to perform a certain activity or bring about a certain result. A computer program can be written in any form of programming language (e.g., Objective-C, Java), including compiled or interpreted languages, and it can be deployed in any form, including as a stand-alone program or as a module, component, subroutine, a browser-based web application, or other unit suitable for use in a computing environment.</p>
<p id="p-0095" num="0094">Suitable processors for the execution of a program of instructions include, by way of example, both general and special purpose microprocessors, and the sole processor or one of multiple processors or cores, of any kind of computer. Generally, a processor will receive instructions and data from a read-only memory or a random access memory or both. The essential elements of a computer are a processor for executing instructions and one or more memories for storing instructions and data. Generally, a computer will also include, or be operatively coupled to communicate with, one or more mass storage devices for storing data files; such devices include magnetic disks, such as internal hard disks and removable disks; magneto-optical disks; and optical disks. Storage devices suitable for tangibly embodying computer program instructions and data include all forms of non-volatile memory, including by way of example semiconductor memory devices, such as EPROM, EEPROM, and flash memory devices; magnetic disks such as internal hard disks and removable disks; magneto-optical disks; and CD-ROM and DVD-ROM disks. The processor and the memory can be supplemented by, or incorporated in, ASICs (application-specific integrated circuits).</p>
<p id="p-0096" num="0095">To provide for interaction with a user, the features can be implemented on a computer having a display device such as a CRT (cathode ray tube) or LCD (liquid crystal display) monitor for displaying information to the user and a keyboard and a pointing device such as a mouse or a trackball by which the user can provide input to the computer.</p>
<p id="p-0097" num="0096">The features can be implemented in a computer system that includes a back-end component, such as a data server, or that includes a middleware component, such as an application server or an Internet server, or that includes a front-end component, such as a client computer having a graphical user interface or an Internet browser, or any combination of them. The components of the system can be connected by any form or medium of digital data communication such as a communication network. Examples of communication networks include, e.g., a LAN, a WAN, and the computers and networks forming the Internet.</p>
<p id="p-0098" num="0097">The computer system can include clients and servers. A client and server are generally remote from each other and typically interact through a network. The relationship of client and server arises by virtue of computer programs running on the respective computers and having a client-server relationship to each other.</p>
<p id="p-0099" num="0098">A number of implementations of the invention have been described. Nevertheless, it will be understood that various modifications can be made without departing from the spirit and scope of the invention. For example, the location-aware devices are referred to as GPS-enabled. Location-aware mobile devices are not necessarily based on GPS technology. For example, mobile devices that can determine a location using triangulation are location-aware mobile devices and can be used in determining a CDMA location. Cells are represented as hexagons in the figures. The actual shape of a cell can vary. Locations are described as &#x201c;circles.&#x201d; The term &#x201c;circle&#x201d; used in this specification can include any geometric shape (e.g., an ellipsis, a square, a convex or concave polygon, or a free-style shape) that is not perfectly circular but is closed or has an appearance of an enclosure. The radius of a geometric shape that is not perfectly circular can include an average distance between various points on the boundary of the geometric shape and a center of the geometric shape. Accordingly, other implementations are within the scope of the following claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method executed by a mobile device, comprising:
<claim-text>determining a first current location of the mobile device using a first current code division multiple access (CDMA) identifier, the first current CDMA identifier being associated with at least a portion of a CDMA system and corresponding to a first location, the first location having a first granularity; and</claim-text>
<claim-text>in response to a request to determine a current location at a location granularity finer than the first granularity:
<claim-text>determining a second current location of the mobile device using a second current CDMA identifier, the second current CDMA identifier corresponding to a second location, the second location having a second granularity that is finer than the first granularity, wherein the second current CDMA identifier is associated with a subset of the portion of the CDMA system; and</claim-text>
<claim-text>providing the second current location for display on the mobile device,</claim-text>
</claim-text>
<claim-text>wherein:
<claim-text>the first current CDMA identifier and the second current CDMA identifier are received from a same signal source;</claim-text>
<claim-text>the first current CDMA identifier is different from the second current CDMA identifier; and</claim-text>
<claim-text>each of the first current CDMA identifier and the second current CDMA identifier is one of a system identifier, a network identifier, a zone identifier, or a base station identifier, each of the system identifier, network identifier, zone identifier, and base station identifier being associated with a respective known or estimated location, each respective known or estimated location having a different level of granularity.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein determining the first current location comprises:
<claim-text>receiving the first current CDMA identifier from the CDMA system;</claim-text>
<claim-text>identifying a stored first CDMA identifier that matches the first current CDMA identifier, the stored first CDMA identifier being associated with the first location; and</claim-text>
<claim-text>designating the first location associated with the matching first CDMA identifier as the first current location of the mobile device.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein determining the second current location comprises:
<claim-text>receiving the second current CDMA identifier from the CDMA system;</claim-text>
<claim-text>receiving, from a server, a set of one or more second CDMA identifiers, each received second CDMA identifier being associated with the second location;</claim-text>
<claim-text>identifying a received second CDMA identifier that matches the second current CDMA identifier; and</claim-text>
<claim-text>designating the second location associated with the matching second CDMA identifier as the second current location of the mobile device.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>before providing the second current location for display, providing the first current location for display on the mobile device.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein providing the second current location for display comprises:
<claim-text>providing for display an animation effect, the animation effect zooming from the first current location to the second current location.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. A computer program product tangibly stored on a storage device, operable to cause a mobile device to perform operations comprising:
<claim-text>determining a first current location of the mobile device using a first current code division multiple access (CDMA) identifier, the first current CDMA identifier being associated with at least a portion of a CDMA system and corresponding to a first location, the first location having a first granularity; and</claim-text>
<claim-text>in response to a request to determine a current location at a location granularity finer than the first granularity:
<claim-text>determining a second current location of the mobile device using a second current CDMA identifier, the second current CDMA identifier corresponding to a second location, the second location having a second granularity that is finer than the first granularity, wherein the second current CDMA identifier is associated with a subset of the portion of the CDMA system; and</claim-text>
<claim-text>providing the second current location for display on the mobile device,</claim-text>
</claim-text>
<claim-text>wherein:
<claim-text>the first current CDMA identifier and the second current CDMA identifier are received from a same signal source;</claim-text>
<claim-text>the first current CDMA identifier is different from the second current CDMA identifier; and</claim-text>
<claim-text>each of the first current CDMA identifier and the second current CDMA identifier is one of a system identifier, a network identifier, a zone identifier, or a base station identifier, each of the system identifier, network identifier, zone identifier, and base station identifier being associated with a respective known or estimated location, each respective known or estimated location having a different level of granularity.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The product of <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein determining the first current location comprises:
<claim-text>receiving the first current CDMA identifier from the CDMA system;</claim-text>
<claim-text>identifying a stored first CDMA identifier that matches the first current CDMA identifier, the stored first CDMA identifier being associated with the first location; and</claim-text>
<claim-text>designating the first location associated with the matching first CDMA identifier as the first current location of the mobile device.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The product of <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein determining the second current location comprises:
<claim-text>receiving the second current CDMA identifier from the CDMA system;</claim-text>
<claim-text>receiving, from a server, a set of one or more second CDMA identifiers, each received second CDMA identifier being associated with the second location;</claim-text>
<claim-text>identifying a received second CDMA identifier that matches the second current CDMA identifier; and</claim-text>
<claim-text>designating the second location associated with the matching second CDMA identifier as the second current location of the mobile device.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. A mobile device, comprising:
<claim-text>one or more processors configured to perform operations comprising:
<claim-text>determining a first current location of the mobile device using a first current code division multiple access (CDMA) identifier, the first current CDMA identifier being associated with at least a portion of a CDMA system and corresponding to a first location, the first location having a first granularity; and</claim-text>
<claim-text>in response to a request to determine a current location at a location granularity finer than the first granularity:
<claim-text>determining a second current location of the mobile device using a second current CDMA identifier, the second current CDMA identifier corresponding to a second location, the second location having a second granularity that is finer than the first granularity, wherein the second current CDMA identifier is associated with a subset of the portion of the CDMA system; and</claim-text>
<claim-text>providing the second current location for display on the mobile device,</claim-text>
</claim-text>
</claim-text>
<claim-text>wherein:
<claim-text>the first current CDMA identifier and the second current CDMA identifier are received from a same signal source;</claim-text>
<claim-text>the first current CDMA identifier is different from the second current CDMA identifier; and</claim-text>
<claim-text>each of the first current CDMA identifier and the second current CDMA identifier is one of a system identifier, a network identifier, a zone identifier, or a base station identifier, each of the system identifier, network identifier, zone identifier, and base station identifier being associated with a respective known or estimated location, each respective known or estimated location having a different level of granularity.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The device of <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein determining the first current location comprises:
<claim-text>receiving the first current CDMA identifier from the CDMA system;</claim-text>
<claim-text>identifying a stored first CDMA identifier that matches the first current CDMA identifier, the stored first CDMA identifier being associated with the first location; and</claim-text>
<claim-text>designating the first location associated with the stored first CDMA identifier as the first current location of the mobile device.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The device of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein determining the second current location comprises:
<claim-text>receiving the second current CDMA identifier from the CDMA system;</claim-text>
<claim-text>requesting, from a server, a set of one or more second CDMA identifiers;</claim-text>
<claim-text>identifying a received second CDMA identifier that matches the second current CDMA identifier, the received second CDMA identifier being associated with the second location; and</claim-text>
<claim-text>designating the second location associated with the received second CDMA identifier as the second current location of the mobile device.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. A method executed by a computer, comprising:
<claim-text>receiving, from a set of first mobile devices:
<claim-text>a first code division multiple access (CDMA) identifier of a CDMA system and a second CDMA identifier of the CDMA system, the first CDMA identifier identifying at least a portion of the CDMA system, the second CDMA identifier identifying a subset of the portion of the CDMA system; and</claim-text>
<claim-text>a set of geographic locations of the set of first mobile devices;</claim-text>
</claim-text>
<claim-text>determining, based on the set of geographic locations, a first CDMA location for associating with the first CDMA identifier;</claim-text>
<claim-text>determining, based on the set of geographic locations, a second CDMA location for associating with the second CDMA identifier, the second CDMA location being inside the first CDMA location; and</claim-text>
<claim-text>providing, in a tiered manner, the first CDMA location and the second CDMA location to a second mobile device for estimating a geographic location of the second mobile device using the first CDMA identifier and the second CDMA identifier.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The method of <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein the first CDMA identifier and second CDMA identifier each comprises at least one of a system identifier, a network identifier, a zone identifier, or a base station identifier.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The method of <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein providing the first CDMA location and the second CDMA location to the second mobile device comprises:
<claim-text>providing the first CDMA location to the second mobile device in association with the first CDMA identifier;</claim-text>
<claim-text>receiving a request from the second mobile device requesting second CDMA identifiers associated with the first CDMA identifier; and then</claim-text>
<claim-text>providing the second CDMA location to the second mobile device in association with the second CDMA identifier.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The method of <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein the first CDMA location and second CDMA location each comprises geographic coordinates and an indicator of a granularity.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. A computer program product tangibly stored on a storage device, operable to cause data processing apparatus to perform operations comprising:
<claim-text>receiving, from a set of first mobile devices:
<claim-text>a first code division multiple access (CDMA) identifier of a CDMA system and a second CDMA identifier of the CDMA system, the first CDMA identifier identifying at least a portion of the CDMA system, the second CDMA identifier identifying a subset of the portion of the CDMA system; and</claim-text>
<claim-text>a set of geographic locations of the set of first mobile devices;</claim-text>
</claim-text>
<claim-text>determining, based on the set of geographic locations, a first CDMA location for associating with the first CDMA identifier;</claim-text>
<claim-text>determining, based on the set of geographic locations, a second CDMA location for associating with the second CDMA identifier, the second CDMA location being inside the first CDMA location; and</claim-text>
<claim-text>providing, in a tiered manner, the first CDMA location and the second CDMA location to a second mobile device for estimating a geographic location of the second mobile device using the first CDMA identifier and the second CDMA identifier.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The product of <claim-ref idref="CLM-00016">claim 16</claim-ref>, wherein the first CDMA identifier and second CDMA identifier each comprises at least one of a system identifier, a network identifier, a zone identifier, or a base station identifier.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The product of <claim-ref idref="CLM-00016">claim 16</claim-ref>, wherein providing the first CDMA location and the second CDMA location to the second mobile device comprises:
<claim-text>providing the first CDMA location to the second mobile device in association with the first CDMA identifier;</claim-text>
<claim-text>receiving a request from the second mobile device requesting second CDMA identifiers associated with the first CDMA identifier; and then</claim-text>
<claim-text>providing the second CDMA location to the second mobile device in association with the second CDMA identifier.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The product of <claim-ref idref="CLM-00016">claim 16</claim-ref>, wherein the first CDMA location and second CDMA location each comprises geographic coordinates and an indicator of a granularity.</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. A method executed by a mobile device, comprising:
<claim-text>determining that a first current code division multiple access (CDMA) identifier matches a stored first CDMA identifier, the stored first CDMA identifier corresponding to at least a portion of a CDMA system and being associated with a first location;</claim-text>
<claim-text>receiving one or more second CDMA identifiers, each second CDMA identifier being associated with a second location and corresponding to a subset of the portion of the CDMA system;</claim-text>
<claim-text>determining that a second current CDMA identifier matches a received second CDMA identifier; and</claim-text>
<claim-text>designating the second location associated with the matching received second CDMA identifier as a current location of the mobile device,</claim-text>
<claim-text>wherein:
<claim-text>the first current CDMA identifier and the second current CDMA identifier are received from a same signal source;</claim-text>
<claim-text>the first current CDMA identifier is different from the second current CDMA identifier; and</claim-text>
<claim-text>each of the first current CDMA identifier and the second current CDMA identifier is one of a system identifier, a network identifier, a zone identifier, or a base station identifier, each of the system identifier, network identifier, zone identifier, and base station identifier being associated with a respective known or estimated location, each respective known or estimated location having a different level of granularity.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. The method of <claim-ref idref="CLM-00020">claim 20</claim-ref>, further comprising:
<claim-text>detecting a change of the first current CDMA identifier; and</claim-text>
<claim-text>upon detecting the change, requesting the one or more second CDMA identifiers.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. The method of <claim-ref idref="CLM-00020">claim 20</claim-ref>, further comprising:
<claim-text>designating the first location as the current location of the mobile device before determining that the second current CDMA identifier matches a received second CDMA identifier.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00023" num="00023">
<claim-text>23. The method of <claim-ref idref="CLM-00020">claim 20</claim-ref>, further comprising:
<claim-text>providing a first indicator for display on the mobile device, the first indicator indicating the first location; and</claim-text>
<claim-text>upon determining that the second current CDMA identifier matches the received second CDMA identifier, providing a second indicator for display on the mobile device, the second indicator indicating the second location.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00024" num="00024">
<claim-text>24. A system, comprising:
<claim-text>one or more processors; and</claim-text>
<claim-text>a non-transitory computer-readable medium storing instructions operable to cause the one or more processors to perform operations comprising:
<claim-text>receiving, from a set of first mobile devices:
<claim-text>a first code division multiple access (CDMA) identifier of a CDMA system and a second CDMA identifier of the CDMA system, the first CDMA identifier identifying at least a portion of the CDMA system, the second CDMA identifier identifying a subset of the portion of the CDMA system; and</claim-text>
<claim-text>a set of geographic locations of the set of first mobile devices;</claim-text>
</claim-text>
<claim-text>determining, based on the set of geographic locations, a first CDMA location for associating with the first CDMA identifier;</claim-text>
<claim-text>determining, based on the set of geographic locations, a second CDMA location for associating with the second CDMA identifier, the second CDMA location being inside the first CDMA location; and</claim-text>
<claim-text>providing, in a tiered manner, the first CDMA location and the second CDMA location to a second mobile device for estimating a geographic location of the second mobile device using the first CDMA identifier and the second CDMA identifier.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00025" num="00025">
<claim-text>25. The system of <claim-ref idref="CLM-00024">claim 24</claim-ref>, wherein the first CDMA identifier and second CDMA identifier each comprises at least one of a system identifier, a network identifier, a zone identifier, or a base station identifier.</claim-text>
</claim>
<claim id="CLM-00026" num="00026">
<claim-text>26. The system of <claim-ref idref="CLM-00024">claim 24</claim-ref>, wherein providing the first CDMA location and the second CDMA location to the second mobile device comprises:
<claim-text>providing the first CDMA location to the second mobile device in association with the first CDMA identifier;</claim-text>
<claim-text>receiving a request from the second mobile device requesting second CDMA identifiers associated with the first CDMA identifier; and then</claim-text>
<claim-text>providing the second CDMA location to the second mobile device in association with the second CDMA identifier.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00027" num="00027">
<claim-text>27. The system of <claim-ref idref="CLM-00024">claim 24</claim-ref>, wherein the first CDMA location and second CDMA location each comprises geographic coordinates and an indicator of a granularity. </claim-text>
</claim>
</claims>
</us-patent-grant>
