<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625876-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625876</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13946665</doc-number>
<date>20130719</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>K</subclass>
<main-group>9</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>382135</main-classification>
<further-classification>382218</further-classification>
</classification-national>
<invention-title id="d2e43">Validation template for valuable media of multiple classes</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5048095</doc-number>
<kind>A</kind>
<name>Bhanu</name>
<date>19910900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>5542518</doc-number>
<kind>A</kind>
<name>Kurosawa et al.</name>
<date>19960800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>5729623</doc-number>
<kind>A</kind>
<name>Omatu et al.</name>
<date>19980300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>5818443</doc-number>
<kind>A</kind>
<name>Schott</name>
<date>19981000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>382141</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>6011866</doc-number>
<kind>A</kind>
<name>Donelly et al.</name>
<date>20000100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>6163618</doc-number>
<kind>A</kind>
<name>Mukai</name>
<date>20001200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>6922489</doc-number>
<kind>B2</kind>
<name>Lennon et al.</name>
<date>20050700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>7110573</doc-number>
<kind>B2</kind>
<name>Monk et al.</name>
<date>20060900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>7639858</doc-number>
<kind>B2</kind>
<name>Ross</name>
<date>20091200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>2002/0044677</doc-number>
<kind>A1</kind>
<name>Fox</name>
<date>20020400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>2003/0021459</doc-number>
<kind>A1</kind>
<name>Neri et al.</name>
<date>20030100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>2003/0042438</doc-number>
<kind>A1</kind>
<name>Lawandy</name>
<date>20030300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>2003/0081824</doc-number>
<kind>A1</kind>
<name>Mennie et al.</name>
<date>20030500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>2003/0128874</doc-number>
<kind>A1</kind>
<name>Fan</name>
<date>20030700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>2003/0217906</doc-number>
<kind>A1</kind>
<name>Baudat et al.</name>
<date>20031100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>2004/0183923</doc-number>
<kind>A1</kind>
<name>Dalrymple</name>
<date>20040900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>2004/0247169</doc-number>
<kind>A1</kind>
<name>Ross et al.</name>
<date>20041200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>382137</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00018">
<document-id>
<country>US</country>
<doc-number>2005/0036681</doc-number>
<kind>A1</kind>
<name>Lenoir</name>
<date>20050200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>382176</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00019">
<document-id>
<country>US</country>
<doc-number>2006/0104535</doc-number>
<kind>A1</kind>
<name>Varekamp</name>
<date>20060500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>382260</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00020">
<document-id>
<country>US</country>
<doc-number>2006/0140486</doc-number>
<kind>A1</kind>
<name>Kondo et al.</name>
<date>20060600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>382224</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00021">
<document-id>
<country>US</country>
<doc-number>2007/0092133</doc-number>
<kind>A1</kind>
<name>Luo</name>
<date>20070400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00022">
<document-id>
<country>US</country>
<doc-number>2007/0154099</doc-number>
<kind>A1</kind>
<name>He</name>
<date>20070700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00023">
<document-id>
<country>US</country>
<doc-number>2008/0123931</doc-number>
<kind>A1</kind>
<name>He</name>
<date>20080500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00024">
<document-id>
<country>US</country>
<doc-number>2008/0159614</doc-number>
<kind>A1</kind>
<name>He</name>
<date>20080700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00025">
<document-id>
<country>EP</country>
<doc-number>1484719</doc-number>
<kind>A2</kind>
<date>20041200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00026">
<document-id>
<country>EP</country>
<doc-number>1217589</doc-number>
<kind>B1</kind>
<date>20070200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00027">
<othercit>Frosini et al. &#x201c;A Neural Network-Based Model for Paper Currency Recognition and Verification.&#x201d; IEEE Transactions on Neural Networks, 1996.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00028">
<othercit>Kosaka et al. &#x201c;Bill Classification by Using the LVQ Method.&#x201d; 2001 IEEE International Conference on System, Man, and Cybernetics, 2001 (Glory).</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00029">
<othercit>Ahmadi et al. &#x201c;A Study on Evaluating and Improving the Reliability of Bank Note Neuro-Classifiers.&#x201d; SICE Annual Conference in Fukui, Aug. 2003 (Glory).</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00030">
<othercit>Ahmadi et al. &#x201c;A Reliable Method for Classification of Bank Notes Using Artificial Neural Networks.&#x201d; Artficial Life and Robotics, 2004 (Glory).</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00031">
<othercit>He et al. &#x201c;Employing Optimized Combinations of On-Class Classifiers for Automated Currency Validation.&#x201d; Pattern Recognition, Elsevier, Kidlington, GB, vol. 37, No. 6, Jun. 2004, pp. 1085-1096, XP004505313, ISSN: 0031-3203.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00032">
<othercit>Ioannis Giakoumis and Ioannis Pitas. &#x201c;Digital Restoration of Painting Cracks 1998.&#x201d; Circuits and Systems Proceeding of the 1998 IEEE International Symposium.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00033">
<othercit>Ramos et al. &#x201c;Image Colour Segmentation by Genetic Algorithms.&#x201d; CVRM&#x2014;Centro de Geosistemas, Instituto Superior Technico, Av. Rovisco Pais, Lisboa, Portugal (vitorino.ramos.muge@alfais.utl.pt).</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00034">
<othercit>Search Report and Written Opinion for Internation Application No. PCT/GB2006/004663 mailed Mar. 4, 2007.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>9</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>382181</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>382231</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>382100</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>382112</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>382135</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>382140</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>6</number-of-drawing-sheets>
<number-of-figures>15</number-of-figures>
</figures>
<us-related-documents>
<division>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>11888683</doc-number>
<date>20070802</date>
</document-id>
<parent-grant-document>
<document-id>
<country>US</country>
<doc-number>8503796</doc-number>
</document-id>
</parent-grant-document>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>13946665</doc-number>
</document-id>
</child-doc>
</relation>
</division>
<us-provisional-application>
<document-id>
<country>US</country>
<doc-number>60877839</doc-number>
<date>20061229</date>
</document-id>
</us-provisional-application>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20130301936</doc-number>
<kind>A1</kind>
<date>20131114</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only" applicant-authority-category="assignee">
<addressbook>
<orgname>NCR Corporation</orgname>
<address>
<city>Duluth</city>
<state>GA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>He</last-name>
<first-name>Chao</first-name>
<address>
<city>Happy Valley</city>
<country>HK</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Ross</last-name>
<first-name>Gary</first-name>
<address>
<city>Edinburgh</city>
<country>GB</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<last-name>Martin</last-name>
<first-name>Paul W.</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>NCR Corporation</orgname>
<role>02</role>
<address>
<city>Duluth</city>
<state>GA</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Park</last-name>
<first-name>Edward</first-name>
<department>2666</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A technique for use in automatic validation of a media item involves accessing a template that comprises multiple one-class classifiers, each corresponding to one of multiple classes to which the media item might belong, and then applying each of the one-class classifiers to an image of the media item to generate a result set for each of the multiple classes. The result set for each media class is then analyzed to assess whether the media item belongs to that class.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="59.77mm" wi="150.45mm" file="US08625876-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="243.92mm" wi="174.58mm" file="US08625876-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="256.12mm" wi="170.69mm" file="US08625876-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="245.53mm" wi="178.05mm" file="US08625876-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="170.10mm" wi="151.55mm" file="US08625876-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="231.99mm" wi="173.82mm" file="US08625876-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="180.76mm" wi="140.97mm" file="US08625876-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This application is a Divisional Application of, and claims priority to, U.S. application Ser. No. 11/888,683, filed Aug. 2, 2007, entitled &#x201c;VALIDATION TEMPLATE FOR VALUABLE MEDIA OF MULTIPLE CLASSES&#x201d;, which claims the benefit of U.S. Provisional Application 60/877,839, filed by Chao He and Gary Ross on Dec. 29, 2006, and is related to U.S. application Ser. Nos. 11/305,537, 11/639,576, 11/639,597, and 11/639,593. These applications are hereby incorporated by reference herein in their entirety for all purposes.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">BACKGROUND</heading>
<p id="p-0003" num="0002">When valuable media items such as bank notes are fed into an automatic handling system, such as banknote sorter or an intelligent deposit or recycling ATM, the system must recognize the items to determine to which of multiple possible classes (e.g., which currency and denomination) each item belongs and, on recognition, must assess whether the item is genuine or counterfeit (i.e., &#x201c;validate&#x201d; the item). These systems typically achieve recognition and validation of valuable items by using templates developed previously from training data taken from items of the type to be handled. In practice, a unique template is developed for every unique &#x201c;class&#x201d; of media item that the systems are expected to handle. For example, for currency-handling systems, a unique template is created for every possible combination of currency, series, denomination and orientation (i.e., orientation of the bank note upon insertion into the handling system).</p>
<p id="p-0004" num="0003">Developing a unique template for each class of media item becomes very time consuming and very costly, especially when developing currency handlers for countries having bank notes produced in many series or issued by multiple banks or treasuries. Because most existing validation methods require manual selection of the relevant features (regions) of bank notes by a human expert, the costs of template creation become even more pronounced. In some cases, a new template must be developed even for changes as minor as a new official's signature appearing on a bank note or a slight change in the ink used to print the note.</p>
<heading id="h-0003" level="1">SUMMARY</heading>
<p id="p-0005" num="0004">Described below is a technique for use in automatic validation of a media item. The technique involves accessing a template that comprises multiple one-class classifiers, each corresponding to one of multiple classes to which the media item might belong, and then applying each of the one-class classifiers to an image of the media item to generate a result set for each of the multiple classes. The result set for each media class is then analyzed to assess whether the media item belongs to that class.</p>
<p id="p-0006" num="0005">Also described below is a technique for use in creating a template for automated validation of media items. The technique involves receiving images of multiple media items of similar type, where each of the images belongs to one of multiple classes associated with media items of that type. The images are then used to create a single segmentation map that represents media items belonging to all of the multiple classes. The images and the segmentation map are then used together to create multiple one-class classifiers, where each of the one-class classifiers is associated with one of the multiple classes. The template is then defined to include the segmentation map and the multiple one-class classifiers.</p>
<p id="p-0007" num="0006">Other features and advantages will become apparent from the description and claims that follow.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0008" num="0007"><figref idref="DRAWINGS">FIGS. 1</figref>, <b>2</b>, <b>3</b>, <b>4</b>, <b>5</b> and <b>6</b> together illustrate a process for creating a segmentation map and a feature set matrix for a single class of media items.</p>
<p id="p-0009" num="0008"><figref idref="DRAWINGS">FIGS. 7A through 7D</figref> show images of a valuable media item, such as a bank note, having four different classes defined by the four possible length-wise orientations in which the item can be inserted into an automatic handling system.</p>
<p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. 8</figref> is a &#x201c;pseudo-image&#x201d; showing features of the media item of <figref idref="DRAWINGS">FIGS. 7A through 7D</figref> as they would appear if images of the item in all four orientations were overlaid on one another.</p>
<p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. 9</figref> shows a segmentation map having three segments that would result from the example of <figref idref="DRAWINGS">FIGS. 7A through 7D</figref>.</p>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 10</figref> shows a set of four clusters that would result when a clustering algorithm is applied to the images of <figref idref="DRAWINGS">FIGS. 7A through 7D</figref>.</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 11</figref> is a flow diagram showing a process for use in creating a validation template using a segmentation map and cluster data.</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 12</figref> is a flow diagram showing a process for use in an automated media handling system in assessing the validity of media items of a certain type having multiple classes.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0015" num="0014">Described below is a technique for use in creating automated media-validation templates and then using these templates in systems that accept any form of valuable media from users of those systems. The technique is particularly useful in automated validation of bank notes in any type of self-service terminal configured to receive bank notes, including automated teller machines (ATMs) with note-deposit capabilities, ticket vending machines, currency-exchange machines, self-service kiosks, and the like. The description below concentrates most heavily on the validation of bank notes, but the techniques are useful in the automated validation of virtually any type of valuable media.</p>
<p id="p-0016" num="0015">The technique for creating media-validation templates draws upon the template-creation process described in the two related applications that are incorporated by reference above. That process involves the creation of a one-class classifier for use in automated assessment of the validity of a bank note or other valuable media, using a currency template that is built upon a statistical representation of the sub-regions of one or more genuine bank notes, and only genuine bank notes&#x2014;no statistical representation of counterfeit bank notes is necessary. In other words, the classifier created in that process is a &#x201c;one-class&#x201d; classifier in that, in determining the validity of each note, it requires statistical information from genuine notes only and, with this information, concludes either that the note in question does belong to the class (i.e., is &#x201c;genuine&#x201d;) or does not belong to the class (i.e., is counterfeit).</p>
<p id="p-0017" num="0016">In general, each note &#x201c;class&#x201d; is defined by a particular combination of currency (e.g., U.S. Dollars), denomination (e.g., $5, $10, $20 denominations), series (e.g., a 2003 $5 bill vs. a 2006 $5 bill), and orientation (i.e., front-side right edge first, front-side left edge first, back-side right edge first, back-side left edge first). For a currency having two different denominations of bills, each having been produced under two different series, the currency would require sixteen different one-class classifiers (2 denominations X 2 series X 4 orientations=16 classes), or sixteen note-validation templates. For each note to be validated, the note would be compared against only one of these sixteen templates&#x2014;i.e., the template corresponding to the note's denomination, series, and orientation of insertion into the handling system.</p>
<p id="p-0018" num="0017">The process described below modifies the process of the two related applications to require only a single media-validation template for a given media item, regardless of how many classes might exist for that item. For example, for the currency described above having two denominations each produced under two different series and having sixteen total classes, the process set forth below would not produce sixteen validation templates for the currency, but rather would produce only two templates&#x2014;one for each denomination of the currency. Each of these templates would be used in assessing the validity of all eight of the classes that exist for one of the two denominations, including the classes that correspond to both production series and to all four note orientations. Before the modifications are described, however, a summary of the process described in the two related applications is in order.</p>
<p id="p-0019" num="0018">As shown in <figref idref="DRAWINGS">FIG. 1</figref>, the template-creation process involves capturing images of multiple bank notes (Notes <b>1</b> to N) for each note class. The images are generated in any of multiple possible image &#x201c;channels,&#x201d; each representing either the transmission or reflection characteristics of the bank notes when illuminated at a selected frequency or range of frequencies&#x2014;e.g., red, green, blue, infrared and ultraviolet. As shown in <figref idref="DRAWINGS">FIG. 2</figref>, the images of the notes in each class have an image size determined by the number of pixels contained in each image&#x2014;an image that is R pixels high and C pixels wide has an image size of RxC.</p>
<p id="p-0020" num="0019">Each of the pixels in an image has an intensity value P which is easily measured using known techniques. For an image set of N notes having RxC pixels each, the pixel intensity value at the i<sup>th </sup>row and the j<sup>th </sup>column of the n<sup>th </sup>note is represented as P<sub>ij</sub><sup>n</sup>, where i=1, 2, . . . , R; j=1, 2, . . . , C; and n=1, 2, . . . , N. Representing intensity values of the pixels in this manner allows for the creation of an image-intensity matrix like that shown in <figref idref="DRAWINGS">FIG. 3</figref>. In this matrix, the intensity values for all pixels in the image of the first note are aligned in the first row; the intensity values for all pixels in the image of the second note are aligned in the second row; and so on, with intensity values for all pixels in the image of the N<sup>th </sup>note aligned in the N<sup>th </sup>row. The result is that the columns of the matrix provide a &#x201c;pixel-position profile&#x201d; for all of the images in the class&#x2014;i.e., each column indicates the intensity values for all pixels in a given position across all of the notes in the class. For example, in the example of <figref idref="DRAWINGS">FIG. 3</figref>, the first column of the matrix indicates the image intensities for all pixels in the first row and first column (upper left corner) of the note images; the last column of the matrix indicates the image intensities for all pixels in the R<sup>th </sup>row and C<sup>th </sup>column (lower right corner) of the note images.</p>
<p id="p-0021" num="0020">A clustering algorithm is then applied to the image-intensity matrix to group the pixel positions into M subgroups, or &#x201c;segments.&#x201d; To accomplish this, a similarity measure is calculated for every pair of pixel positions using the intensity values for the pixels in each pair, e.g., by calculating the Euclidean distance between column vectors in the matrix. This clustering process takes place in an iterative manner, and, after the results of the algorithm have converged around the M segments, every pixel position is assigned a &#x201c;membership index&#x201d; indicating to which of the M segments it belongs. The set of membership-index values across the entire RxC image size form a &#x201c;segmentation map&#x201d; for the note class.</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 4</figref> shows a segmentation map for the example of <figref idref="DRAWINGS">FIGS. 1 and 2</figref> in which the notes are divided into three segments (M=3). Each pixel position in the map is has a numerical value of &#x201c;1,&#x201d; &#x201c;2&#x201d; or &#x201c;3,&#x201d; where a value of &#x201c;1&#x201d; represents very dark pixels, a value of &#x201c;3&#x201d; represents very light pixels, and a value of &#x201c;2&#x201d; represents pixels that are somewhere between light and dark. This segmentation map applies to all N of the notes in the training set for the note class and, in some systems, is used in the recognition and validation processes with images taken from any and all of the available image channels.</p>
<p id="p-0023" num="0022">Once the segmentation map has been created for the note class, the map is applied as a mask to extract discriminative information from each of the N images in the class, as shown in <figref idref="DRAWINGS">FIG. 5</figref>. Applying the segmentation map to the image of note n allows for calculation of the average (or mean) intensity value S<sub>m</sub><sup>n </sup>for all pixels in the image that belong to each of the M segments, where m=1, 2, . . . , M; and n=1, 2, . . . , N. In the example of <figref idref="DRAWINGS">FIG. 5</figref>, applying the segmentation map creates, for each note, three mean intensity values&#x2014;S<sub>1</sub>, S<sub>2</sub>, and S<sub>3</sub>&#x2014;one for each of the three segments defined in the segmentation map.</p>
<p id="p-0024" num="0023">The mean-intensity values for all of the N notes in the training set are then combined to create a &#x201c;feature set matrix&#x201d; F for the note class, as shown in <figref idref="DRAWINGS">FIG. 6</figref>. Each row in the matrix holds the mean intensity values for the M segments of a single one of the notes in the training set. In the example here, the feature set matrix is an N&#xd7;3 matrix&#x2014;N notes each having three segments.</p>
<p id="p-0025" num="0024">The process described below modifies the process shown in <figref idref="DRAWINGS">FIGS. 1 through 6</figref> by generating a single segmentation map that applies to all classes of a particular media item, such as all series and all orientations of bank notes of a particular denomination in a particular currency, instead of generating one segmentation map for each of the classes. <figref idref="DRAWINGS">FIGS. 7A through 7D</figref> show a valuable media item, such as a bank note, having four different classes defined by the four possible length-wise orientations in which the item can be inserted into an automatic handling system. The solid lines appearing within the media item in <figref idref="DRAWINGS">FIGS. 7A and 7B</figref> represent features that are visible on the surface of the item when it is inserted into the handling system front-side up, where the orientation shown in <figref idref="DRAWINGS">FIG. 7B</figref> represents a 180-degree rotation from the orientation shown in <figref idref="DRAWINGS">FIG. 7A</figref>. <figref idref="DRAWINGS">FIGS. 7C and 7D</figref> represent orientations of the item when it is inserted into the handling system back-side up, with the dashed lines indicating that the features appearing on the front side of the item are not visible in these orientations with the naked eye.</p>
<p id="p-0026" num="0025">Unlike the process described in the two related applications, in which each segmentation map is created from images of items all belonging to the same class, the process described here creates a segmentation map from images of items belonging to different classes&#x2014;for example, from images of items having the four orientations shown in <figref idref="DRAWINGS">FIG. 7A through 7D</figref>. To produce such a segmentation map, the training images for all possible classes are processed together, with the resulting image-intensity matrix (see <figref idref="DRAWINGS">FIG. 3</figref>) representing a &#x201c;pseudo image&#x201d; that would look something like that shown in FIG. <b>8</b>&#x2014;an image showing features of the media item as they would appear if images of the item in all four orientations were overlaid on one another.</p>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 9</figref> shows a segmentation map having three segments that would result from the example of <figref idref="DRAWINGS">FIGS. 7A through 7D</figref>. The first of these segments, having a numerical value of &#x201c;1&#x201d; and representing very dark pixel positions, includes four groups of pixel positions having rectangular shapes. The second of these segments, having a numerical value of &#x201c;2&#x201d; and representing moderately dark pixel positions, includes two groups of pixel positions running vertically across the note and surrounding the groups that form the first segment. The third segment represents very light pixel positions and includes all of the pixel positions not assigned to the first or second segments.</p>
<p id="p-0028" num="0027">In order to use a segmentation map like that shown in <figref idref="DRAWINGS">FIG. 9</figref> and apply the segmentation map across multiple media classes, the template-creation process relies on clustering technologies to create K one-class classifiers that work in conjunction with the segmentation map in the validation process, where K is the total number of classes to be associated with each validation template. In the example given above of a two-denomination currency, the validation template for each denomination would include eight one-class classifiers stored with a single segmentation map.</p>
<p id="p-0029" num="0028">In general, clustering technologies such as K-means clustering, hierarchical clustering, nearest-neighbor clustering and kernel clustering are used to discover the internal organization of a dataset by finding structure within the data in the form of clusters. The template-creation process described here applies any of these well-known clustering technologies to the images of a media item&#x2014;including images corresponding to all classes of the item to be covered by a single validation template&#x2014;to group the image data into several clusters according to a similarity measure defined by the clustering algorithm. In particular, for a media item having K classes to be covered by a single validation template, the clustering algorithm divides the image data into K clusters. For example, for a currency denomination having N<sub>s </sub>series of notes in circulation, the number of clusters K=4N<sub>s</sub>, where four is the number of possible orientations in which a note can be inserted into a handling system. For the example of <figref idref="DRAWINGS">FIGS. 7A through 7D</figref>, the clustering process might produce a set of four clusters looking something those shown in <figref idref="DRAWINGS">FIG. 10</figref>.</p>
<p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. 11</figref> is a flow diagram showing a process for use in creating a validation template using the segmentation map and cluster data described above, for example, a validation template for a denomination of bank notes having K classes to be covered by the template. The process begins when a training system collects a data set X of images from a training set of bank notes of the selected denomination (step <b>1100</b>). The data set includes images from all of the bank notes of the selected denomination without regard to the classes to which the images belong&#x2014;e.g., without regard to the production series or orientations of the corresponding notes. The training system then uses the images in the data set X to create a segmentation map S<sub>m </sub>for the selected denomination, like the one described above and shown in <figref idref="DRAWINGS">FIG. 9</figref> (step <b>1110</b>). The training system also applies a clustering algorithm to the data set X to group the data into K subgroups or clusters X<sub>i</sub>, where i=1, 2, . . . , K (step <b>1120</b>).</p>
<p id="p-0031" num="0030">After creating the segmentation map S<sub>m </sub>and the K clusters X<sub>i</sub>, the training system applies the segmentation map S<sub>m </sub>to each of the K clusters X<sub>i </sub>to extract feature set matrices F<sub>i </sub>for the clusters X<sub>i </sub>(step <b>1130</b>), in the manner described above in connection with <figref idref="DRAWINGS">FIG. 6</figref>. The training system then calculates, for each of the K feature set matrices F<sub>i</sub>, the mean vector &#x3bc;<sub>i</sub>, the covariance matrix &#x3a9;<sub>i</sub>, and the critical value f<sub>ci </sub>(step <b>1140</b>). The formulas for calculating all three of these elements (mean vector, covariance matrix and critical value) are well known in the art and are not described in any detail here. These three elements together form the parameters of a one-class classifier for each of the K clusters.</p>
<p id="p-0032" num="0031">Upon calculating the parameters of the one-class classifiers for each of the K clusters, the training set stores these parameters along with the segmentation map S<sub>m</sub>, as the validation template for the selected currency denomination (step <b>1150</b>). This validation template is then distributed to note handling systems for use in assessing the validity of bank notes of the currency and denomination associated with the template.</p>
<p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. 12</figref> shows a process for use in an automated media handling system in assessing the validity of media items of a certain type having multiple classes. The process is particularly suited, e.g., for the validation of bank notes of a selected denomination in an automated teller machine (ATM) or a currency-exchange recycler, regardless of the number of production series associated with the denomination or the orientations of the bank notes as they are inserted into the system (i.e., regardless of the number of classes to which bank notes of that denomination may belong).</p>
<p id="p-0034" num="0033">The validation process begins when the system receives a bank note and creates one or more digital images of the bank note (step <b>1200</b>). A note-recognition module in the system analyzes the note image and identifies both the currency and the denomination of the note (step <b>1210</b>). A validation module in the system receives the currency and denomination information from the recognition module and retrieves the appropriate validation template from a prescribed storage location, where the validation template includes the K one-class classifier parameters and the segmentation map described above (step <b>1220</b>). The validation module applies the segmentation map to the note image to extract a feature set for the note (step <b>1230</b>). The feature set for an individual note is a vector like those that form the rows of the feature set matrix described above.</p>
<p id="p-0035" num="0034">The validation module then retrieves the mean vector and covariance matrix stored for each of the K one-class classifiers and uses these parameters, along with the feature set vector for the note, to calculate a test statistical value for the note with respect to each of the K one-class classifiers (steps <b>1240</b><sub>1-K</sub>). The validation module then compares this value for the note to the critical values stored for each of the K one-class classifiers (step <b>1250</b>). If the validation module concludes that the test statistical value for the note fulfills the criterion defined by the critical value for one of the K one-class classifiers, then the validation module concludes that the note is a valid note and instructs the handling system to accept the note (step <b>1260</b>). If, on the other hand, the validation module concludes that the note's test statistical value does not fulfill the criteria defined by the critical values of any of the K one-class classifiers, the validation module concludes that the note is invalid or suspect and instructs the handling system either to return the note to the user or to divert the note to a rejected-note bin (step <b>1270</b>).</p>
<p id="p-0036" num="0035">Computer-Based and Other Implementations</p>
<p id="p-0037" num="0036">The various implementations of the techniques described above are realized in electronic hardware, computer software, or combinations of these technologies. Most implementations include one or more computer programs executed by a programmable computer. In general, the computer includes one or more processors, one or more data-storage components (e.g., volatile and nonvolatile memory modules and persistent optical and magnetic storage devices, such as hard and floppy disk drives, CD-ROM drives, and magnetic tape drives), one or more input devices (e.g., mice and keyboards), and one or more output devices (e.g., display consoles and printers).</p>
<p id="p-0038" num="0037">The computer programs include executable code that is usually stored in a persistent storage medium and then copied into memory at run-time. The processor executes the code by retrieving program instructions from memory in a prescribed order. When executing the program code, the computer receives data from the input and/or storage devices, performs operations on the data, and then delivers the resulting data to the output and/or storage devices.</p>
<p id="p-0039" num="0038">The text above describes one or more specific embodiments of a broader invention. The invention also is carried out in a variety of alternative embodiments and thus is not limited to those described here. Many other embodiments are also within the scope of the following claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>We claim:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method for use in creating a template for automated validation of media items, the method comprising:
<claim-text>receiving images of multiple media items of similar type, each of the images belonging to one of multiple classes associated with media items of that type;</claim-text>
<claim-text>using the images to create a single segmentation map that represents media items belonging to all of the multiple classes;</claim-text>
<claim-text>using the images and the segmentation map to create multiple one-class classifiers, where each of the one-class classifiers is associated with one of the multiple classes; and</claim-text>
<claim-text>defining the template to include the segmentation map and the multiple one-class classifiers.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising using the images to create multiple feature clusters that each is associated with one of the multiple classes.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00002">claim 2</claim-ref>, where using the images and the segmentation map to create multiple one-class classifiers includes applying the segmentation map to each of the multiple feature clusters to extract multiple feature sets, where each of the feature sets is associated with one of the multiple classes.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, where at least one of the multiple classes is associated with each of multiple orientations in which the media item can be inserted into an automated validation machine.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, where at least one of the multiple classes is associated with each of multiple production series in which media items of that type are produced.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, where the media item is a bank note that belongs to a particular currency and a particular denomination.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00006">claim 6</claim-ref>, where at least one of the multiple classes is associated with each of multiple orientations in which a bank note of the particular currency and particular denomination can be inserted into an automatic validation machine.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method of <claim-ref idref="CLM-00006">claim 6</claim-ref>, where at least one of the multiple classes is associated with each of multiple production series in which bank notes of the particular currency and particular denomination are produced.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, where the media items include bank notes. </claim-text>
</claim>
</claims>
</us-patent-grant>
