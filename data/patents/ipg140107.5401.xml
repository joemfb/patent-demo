<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08626501-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08626501</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13303443</doc-number>
<date>20111123</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>P2010-270544</doc-number>
<date>20101203</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>195</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20130101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>10</class>
<subclass>L</subclass>
<main-group>21</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>704226</main-classification>
<further-classification>704200</further-classification>
<further-classification>7042001</further-classification>
<further-classification>704500</further-classification>
</classification-national>
<invention-title id="d2e71">Encoding apparatus, encoding method, decoding apparatus, decoding method, and program</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6862567</doc-number>
<kind>B1</kind>
<name>Gao</name>
<date>20050300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>704228</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>7191121</doc-number>
<kind>B2</kind>
<name>Liljeryd et al.</name>
<date>20070300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>704219</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>7395211</doc-number>
<kind>B2</kind>
<name>Watson et al.</name>
<date>20080700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>704500</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>7693710</doc-number>
<kind>B2</kind>
<name>Jelinek et al.</name>
<date>20100400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>704207</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>7912712</doc-number>
<kind>B2</kind>
<name>Shlomot et al.</name>
<date>20110300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>704226</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2007/0094009</doc-number>
<kind>A1</kind>
<name>Ryu et al.</name>
<date>20070400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>7042001</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2007/0239462</doc-number>
<kind>A1</kind>
<name>Makinen et al.</name>
<date>20071000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>704500</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2009/0141790</doc-number>
<kind>A1</kind>
<name>Kawashima et al.</name>
<date>20090600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>375240</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2010/0324917</doc-number>
<kind>A1</kind>
<name>Shlomot et al.</name>
<date>20101200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>704501</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>JP</country>
<doc-number>9-294077</doc-number>
<date>19971100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>JP</country>
<doc-number>2731514</doc-number>
<date>19971200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>JP</country>
<doc-number>2003-5798</doc-number>
<date>20030100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>JP</country>
<doc-number>3463592</doc-number>
<date>20030800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>16</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>704200-201</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>704224-228</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>704500-502</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>10</number-of-drawing-sheets>
<number-of-figures>11</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20120143614</doc-number>
<kind>A1</kind>
<date>20120607</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Toguri</last-name>
<first-name>Yasuhiro</first-name>
<address>
<city>Kanagawa</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Matsumoto</last-name>
<first-name>Jun</first-name>
<address>
<city>Kanagawa</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Maeda</last-name>
<first-name>Yuuji</first-name>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
<us-applicant sequence="004" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Suzuki</last-name>
<first-name>Shiro</first-name>
<address>
<city>Kanagawa</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
<us-applicant sequence="005" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Matsumura</last-name>
<first-name>Yuuki</first-name>
<address>
<city>Saitama</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Toguri</last-name>
<first-name>Yasuhiro</first-name>
<address>
<city>Kanagawa</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Matsumoto</last-name>
<first-name>Jun</first-name>
<address>
<city>Kanagawa</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Maeda</last-name>
<first-name>Yuuji</first-name>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
<inventor sequence="004" designation="us-only">
<addressbook>
<last-name>Suzuki</last-name>
<first-name>Shiro</first-name>
<address>
<city>Kanagawa</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
<inventor sequence="005" designation="us-only">
<addressbook>
<last-name>Matsumura</last-name>
<first-name>Yuuki</first-name>
<address>
<city>Saitama</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Sherr &#x26; Jiang, PLLC</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Sony Corporation</orgname>
<role>03</role>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Godbold</last-name>
<first-name>Douglas</first-name>
<department>2658</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">An encoding apparatus includes a time-frequency transform unit that performs a time-frequency transform on an audio signal, a normalization unit that normalizes a frequency spectral coefficient obtained by the time-frequency transform in order to generate encoded data of the audio signal, a level calculation unit that calculates a level of the audio signal, a scale factor changing unit that changes a concealment scale factor included in encoded concealment data obtained by performing, on the basis of the level of the audio signal, a time-frequency transform and normalization on a minute noise signal, the concealment scale factor being a scale factor relating to a coefficient used for the normalization, and an output unit that outputs the encoded data of the audio signal generated by the normalization unit or outputs, as encoded data of the audio signal, the encoded concealment data whose concealment scale factor has been changed.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="143.93mm" wi="232.83mm" file="US08626501-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="226.99mm" wi="113.37mm" orientation="landscape" file="US08626501-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="236.22mm" wi="147.57mm" orientation="landscape" file="US08626501-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="216.15mm" wi="145.63mm" file="US08626501-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="198.04mm" wi="165.69mm" file="US08626501-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="236.56mm" wi="122.60mm" orientation="landscape" file="US08626501-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="198.04mm" wi="114.64mm" file="US08626501-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="242.82mm" wi="150.88mm" orientation="landscape" file="US08626501-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="73.91mm" wi="147.07mm" file="US08626501-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="238.84mm" wi="159.17mm" file="US08626501-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="177.29mm" wi="129.20mm" orientation="landscape" file="US08626501-20140107-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND</heading>
<p id="p-0002" num="0001">The present disclosure relates to an encoding apparatus, an encoding method, a decoding apparatus, a decoding method, and a program, and more particularly to an encoding apparatus, an encoding method, a decoding apparatus, a decoding method, and a program capable of generating an audio signal for concealment having a more natural sound.</p>
<p id="p-0003" num="0002">In these years, audio signals are often digitized and resultant digital signals are compressed and encoded, and then transmitted or saved. Encoding of audio signals is generally categorized into waveform coding and analysis/synthesis coding. The waveform coding includes band division coding, in which an audio signal is divided into a plurality of frequency components using a band division filter and encoded, and transform coding, in which a digital audio signal is subjected to a time-frequency transform on a block-by-block basis and resultant spectra are encoded. In the waveform coding, an audio signal that has been divided into frequency components using a band division filter or a time-frequency transform is quantized on a band-by-band basis and subjected to highly efficient coding utilizing so-called auditory masking effect or the like.</p>
<p id="p-0004" num="0003"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram illustrating an example of the configuration of an encoding apparatus that performs transform coding.</p>
<p id="p-0005" num="0004">An encoding apparatus <b>10</b> illustrated in <figref idref="DRAWINGS">FIG. 1</figref> includes a time-frequency transform unit <b>11</b>, a spectrum normalization unit <b>12</b>, a spectrum quantization unit <b>13</b>, an entropy encoding unit <b>14</b>, a scale factor encoding unit <b>15</b>, and a multiplexer <b>16</b>.</p>
<p id="p-0006" num="0005">The time-frequency transform unit <b>11</b> of the encoding apparatus <b>10</b> receives an audio signal, which is a time signal. The time-frequency transform unit <b>11</b> performs time-frequency transforms such as modified discrete cosine transforms (MDCTs) on the input audio signal on a frame-by-frame basis. The time-frequency transform unit <b>11</b> supplies a resultant frequency spectral coefficient (MDCT coefficient) for each frame to the spectrum normalization unit <b>12</b>.</p>
<p id="p-0007" num="0006">The spectrum normalization unit <b>12</b> groups the frequency spectral coefficients for the frames supplied from the time-frequency transform unit <b>11</b> on a quantization (quantization unit) basis for certain bandwidths. The spectrum normalization unit <b>12</b> normalizes the grouped frequency spectral coefficients for the quantization units using the following expression (1) and a coefficient 2<sup>&#x2212;&#x3bb;&#xd7;SF[n]</sup> of a certain step size on a frame-by-frame basis.
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>X</i><sub>Norm</sub>(<i>k</i>)=<i>X</i>(<i>k</i>)&#xd7;2<sup>&#x2212;&#x3bb;&#xd7;SF[n]</sup>&#x2003;&#x2003;(1)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0008" num="0007">In the expression (1), X(k) denotes a k-th frequency spectral coefficient of an n-th quantization unit, and X<sub>Norm</sub>(k) denotes a normalized frequency spectral coefficient. In addition, &#x3bb; is a value for determining the step size. For example, if &#x3bb;=0.5, the step size is 3 dB. Here, the step size &#x3bb; is assumed to be constant regardless of the frame. In addition, here, an index SF[n] (integer) as information regarding the coefficient 2<sup>&#x2212;&#x3bb;&#xd7;SF[n]</sup> is called a &#x201c;scale factor&#x201d;.</p>
<p id="p-0009" num="0008">The spectrum normalization unit <b>12</b> supplies the frequency spectral coefficient for each frame that has been normalized as described above to the spectrum quantization unit <b>13</b> and a scale factor for each frame that has been used for the normalization to the scale factor encoding unit <b>15</b>.</p>
<p id="p-0010" num="0009">The spectrum quantization unit <b>13</b> quantizes the normalized frequency spectral coefficient for each frame supplied from the spectrum normalization unit <b>12</b> using a certain number of bits, and supplies the quantized frequency spectral coefficient for each frame to the entropy encoding unit <b>14</b>. In addition, the spectrum quantization unit <b>13</b> supplies, to the multiplexer <b>16</b>, quantization information indicating the number of bits of each quantization unit of the normalized frequency spectral coefficient for each frame during the quantization.</p>
<p id="p-0011" num="0010">The entropy encoding unit <b>14</b> performs reversible compression on the quantized frequency spectral coefficient for each frame supplied from the spectrum quantization unit <b>13</b> by Huffman coding, arithmetic coding, or the like, and supplies a resultant frequency spectral coefficient to the multiplexer <b>16</b> as encoded spectrum data.</p>
<p id="p-0012" num="0011">The scale factor encoding unit <b>15</b> encodes the scale factor for each frame supplied from the spectrum normalization unit <b>12</b>. The scale factor encoding unit <b>15</b> supplies the encoded scale factor for each frame to the multiplexer <b>16</b> as an encoded scale factor.</p>
<p id="p-0013" num="0012">The multiplexer <b>16</b> multiplexes the encoded spectrum data from the entropy encoding unit <b>14</b>, the encoded scale factors from the scale factor encoding unit <b>15</b>, and the quantization information from the spectrum quantization unit <b>13</b>, in order to generate encoded data for each frame. The multiplexer <b>16</b> outputs the encoded data.</p>
<p id="p-0014" num="0013">In the above-described encoding apparatus <b>10</b>, an encoding error may occur due to a reason such as the number of bits of a frame is smaller than the number of bits necessary for encoding or encoding takes more time than a period of time during which real-time processing can be performed. In this case, since it is difficult to perform encoding again, it is necessary to prepare error concealment means that outputs encoded data for concealment instead of irregular data, so that the irregular data is not output as encoded data.</p>
<p id="p-0015" num="0014">As the error concealment means, for example, a technique has been proposed in which, if encoding does not end before a time limit, encoded data of a frame located prior to a frame to be encoded is output as encoded data for concealment instead of encoded data of the frame to be encoded (for example, refer to Japanese Patent No. 3463592).</p>
<p id="p-0016" num="0015">In addition, as the error concealment means, another technique has been proposed in which encoded data for concealment is prepared in advance by encoding a silent signal or the like and the encoded data is output instead of encoded data of a frame in which an encoding error has occurred (for example, refer to Japanese Unexamined Patent Application Publication No. 2003-5798).</p>
<p id="p-0017" num="0016">On the other hand, an audio compression transmission apparatus has been proposed that, if a synchronization abnormality of encoded data has been detected during decoding, outputs, as encoded data for concealment, silent encoded data stored in advance instead of the encoded data (for example, refer to Japanese Patent No. 2731514).</p>
<p id="p-0018" num="0017">In addition, an apparatus has been proposed that replaces, in accordance with a mute instruction from outside, encoded data with silent encoded data created in advance and outputs the silent encoded data (for example, refer to Japanese Unexamined Patent Application Publication No. 9-294077).</p>
<heading id="h-0002" level="1">SUMMARY</heading>
<p id="p-0019" num="0018">However, in the case of the error concealment means described in Japanese Patent No. 3463592, if changes in the level of an audio signal to be encoded over time are large, the signal level of encoded data for concealment is significantly different from the signal level of original encoded data of a frame in which an encoding error has occurred. As a result, an audio signal having an unnatural sound may be generated as a result of the decoding of the encoded data for concealment.</p>
<p id="p-0020" num="0019">In addition, in the case of the error concealment means described in Japanese Unexamined Patent Application Publication No. 2003-5798, the signal level of encoded data for concealment and the signal level of original encoded data of a frame in which an encoding error has occurred are significantly different from each other. As a result, an audio signal having an abnormal sound or a discontinuous, unnatural sound may be generated as a result of the decoding of the encoded data for concealment.</p>
<p id="p-0021" num="0020">It is desirable to generate an audio signal for concealment having a more natural sound.</p>
<p id="p-0022" num="0021">An encoding apparatus according to a first embodiment of the present disclosure includes a time-frequency transform unit that performs a time-frequency transform on an audio signal, a normalization unit that normalizes a frequency spectral coefficient obtained by the time-frequency transform in order to generate encoded data of the audio signal, a level calculation unit that calculates a level of the audio signal, a scale factor changing unit that changes a concealment scale factor included in encoded concealment data obtained by performing, on the basis of the level of the audio signal, a time-frequency transform and normalization on a minute noise signal, the concealment scale factor being a scale factor relating to a coefficient used for the normalization, and an output unit that, if an error has not occurred during encoding of the audio signal, outputs the encoded data of the audio signal generated by the normalization unit, and that, if an error has occurred during the encoding of the audio signal, outputs, as encoded data of the audio signal, the encoded concealment data whose concealment scale factor has been changed.</p>
<p id="p-0023" num="0022">An encoding method and a program according to the first embodiment of the present disclosure correspond to the encoding apparatus according to the first embodiment of the present disclosure.</p>
<p id="p-0024" num="0023">According to the first embodiment of the present disclosure, an audio signal is subjected to a time-frequency transform, a frequency spectral coefficient obtained by the time-frequency transform is normalized in order to generate encoded data of the audio signal, a level of the audio signal is calculated, a concealment scale factor included in encoded concealment data obtained by performing, on the basis of the level of the audio signal, a time-frequency transform and normalization on a minute noise signal is changed, the concealment scale factor being a scale factor relating to a coefficient used for the normalization, and, if an error has not occurred during encoding of the audio signal, the encoded data of the audio signal generated by the normalization unit is output, and, if an error has occurred during encoding of the audio signal, the encoded concealment data whose concealment scale factor has been changed is output as encoded data of the audio signal.</p>
<p id="p-0025" num="0024">A decoding apparatus according to a second embodiment of the present disclosure includes an inverse normalization unit that performs inverse normalization on encoded data using a scale factor of the encoded data included in the encoded data supplied from an encoding apparatus that, if an error has not occurred during encoding of an audio signal, outputs the encoded data generated by performing a time-frequency transform and normalization on the audio signal, and that, if an error has occurred during the encoding of the audio signal, changes, on the basis of a level of the audio signal, a concealment scale factor included in encoded concealment data obtained by performing a time-frequency transform and normalization on a minute noise signal, the concealment scale factor being a scale factor relating to a coefficient used for the normalization, and then outputs the encoded concealment data as the encoded data of the audio signal, and a frequency-time transform unit that performs a frequency-time transform on a frequency spectrum obtained as a result of the inverse normalization performed by the inverse normalization unit.</p>
<p id="p-0026" num="0025">A decoding method and program according to the second embodiment of the present disclosure correspond to the decoding apparatus according to the second embodiment of the present disclosure.</p>
<p id="p-0027" num="0026">According to the second embodiment of the present disclosure, inverse normalization is performed on encoded data using a scale factor of the encoded data included in the encoded data supplied from an encoding apparatus that, if an error has not occurred during encoding of an audio signal, outputs the encoded data generated by performing a time-frequency transform and normalization on the audio signal, and, if an error has occurred during encoding of the audio signal, changes, on the basis of a level of the audio signal, a concealment scale factor included in encoded concealment data obtained by performing a time-frequency transform and normalization on a minute noise signal, the concealment scale factor being a scale factor relating to a coefficient used for the normalization, and outputs the encoded concealment data as the encoded data of the audio signal, and a frequency-time transform is performed on a frequency spectrum obtained as a result of the inverse normalization.</p>
<p id="p-0028" num="0027">According to the first embodiment of the present disclosure, encoded data of an audio signal for concealment having a more natural sound can be generated.</p>
<p id="p-0029" num="0028">According to the second embodiment of the present disclosure, an audio signal for concealment having a more natural sound can be generated.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram illustrating an example of the configuration of an encoding apparatus in the related art;</p>
<p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. 2</figref> is a block diagram illustrating an example of the configuration of an encoding apparatus according to an embodiment of the present disclosure;</p>
<p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. 3</figref> is a diagram illustrating an example of the frame structure of encoded concealment data;</p>
<p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. 4</figref> is a diagram illustrating a change of an encoded scale factor;</p>
<p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. 5</figref> is a flowchart illustrating an encoding process performed by the encoding apparatus illustrated in <figref idref="DRAWINGS">FIG. 2</figref>;</p>
<p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. 6</figref> is a block diagram illustrating an example of the configuration of a decoding apparatus;</p>
<p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. 7</figref> is a flowchart illustrating a decoding process performed by the decoding apparatus illustrated in <figref idref="DRAWINGS">FIG. 6</figref>;</p>
<p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. 8</figref> is a block diagram illustrating another example of the configuration of a decoding apparatus;</p>
<p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. 9</figref> is a diagram illustrating a comparison of encoded data;</p>
<p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. 10</figref> is a flowchart illustrating a decoding process performed by the decoding apparatus illustrated in <figref idref="DRAWINGS">FIG. 8</figref>; and</p>
<p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. 11</figref> is a block diagram illustrating an example of the configuration of a computer according to an embodiment.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">DETAILED DESCRIPTION OF EMBODIMENTS</heading>
<heading id="h-0005" level="1">Embodiment</heading>
<p id="h-0006" num="0000">Example of Configuration of Encoding Apparatus According to Embodiment</p>
<p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. 2</figref> is a block diagram illustrating an example of the configuration of an encoding apparatus according to an embodiment of the present disclosure.</p>
<p id="p-0042" num="0041">In the configuration illustrated in <figref idref="DRAWINGS">FIG. 2</figref>, the same reference numerals as in <figref idref="DRAWINGS">FIG. 1</figref> are given to components that are the same as those illustrated in <figref idref="DRAWINGS">FIG. 1</figref>. Redundant description is omitted as necessary.</p>
<p id="p-0043" num="0042">The configuration of an encoding apparatus <b>30</b> illustrated in <figref idref="DRAWINGS">FIG. 2</figref> is different from the configuration illustrated in <figref idref="DRAWINGS">FIG. 1</figref> in that an error detection unit <b>31</b>, a signal level calculation unit <b>32</b>, an encoded scale factor replacement unit <b>33</b>, and an alternative encoded data output unit <b>34</b> are newly provided and a scale factor encoding unit <b>35</b> and a multiplexer <b>36</b> are provided instead of a scale factor encoding unit <b>15</b> and a multiplexer <b>16</b>, respectively. If an encoding error has occurred, the encoding apparatus <b>30</b> generates encoded data of an audio signal for concealment (hereinafter referred to as &#x201c;encoded concealment data&#x201d;) for each frame on the basis of the level of the audio signal.</p>
<p id="p-0044" num="0043">More specifically, the error detection unit <b>31</b> of the encoding apparatus <b>30</b> judges, on a frame-by-frame basis, whether or not an error has occurred during encoding and whether or not a certain period of time (for example, a period of time during which real-time processing can be performed) has elapsed since the encoding began. The error detection unit <b>31</b> detects an encoding error on the basis of results of the judgment, and then supplies results of the detection to the signal level calculation unit <b>32</b> and the multiplexer <b>36</b>.</p>
<p id="p-0045" num="0044">The signal level calculation unit <b>32</b> calculates an average value, a maximum value, or a minimum value of scale factors for the frames or the like obtained by a spectrum normalization unit <b>12</b> as the spectrum level of a frame of an audio signal to be encoded in accordance with the results of the detection supplied from the error detection unit <b>31</b>. The signal level calculation unit <b>32</b> supplies the calculated spectrum level to the encoded scale factor replacement unit <b>33</b>.</p>
<p id="p-0046" num="0045">The encoded scale factor replacement unit <b>33</b> receives encoded concealment data stored in a memory, which is not illustrated, of the encoding apparatus <b>30</b> in advance. As the encoded concealment data, for example, data having a minimum frame length (the number of bits) that can be processed by the encoding apparatus <b>30</b> may be used, the data being obtained by encoding, as an audio signal for concealment, a minute noise signal in the same manner as for an audio signal to be input to the encoding apparatus <b>30</b>.</p>
<p id="p-0047" num="0046">The encoded scale factor replacement unit <b>33</b> serves as scale factor changing means, and changes an encoded scale factor included in encoded concealment data on the basis of the spectrum level supplied from the signal level calculation unit <b>32</b>. The encoded scale factor replacement unit <b>33</b> supplies the encoded concealment data whose encoded scale factor has been changed to the alternative encoded data output unit <b>34</b>. In addition, the encoded scale factor replacement unit <b>33</b> supplies a scale factor corresponding to the encoded scale factor after the change to the scale factor encoding unit <b>35</b> and causes the scale factor encoding unit <b>35</b> to hold the scale factor.</p>
<p id="p-0048" num="0047">The alternative encoded data output unit <b>34</b> performs padding on the encoded concealment data supplied from the encoded scale factor replacement unit <b>33</b> such that the number of bits of the encoded concealment data corresponds to the output bit rate.</p>
<p id="p-0049" num="0048">Since the encoded concealment data is data having a minimum frame length that can be processed by the encoding apparatus <b>30</b>, the alternative encoding data output unit <b>34</b> can generate encoded concealment data having a frame length corresponding to any output bit rate by performing the padding. Therefore, it is not necessary for the encoding apparatus <b>30</b> to hold encoded concealment data for each frame length, thereby reducing the amount of data to be stored in the memory, which is not illustrated, for holding encoded concealment data.</p>
<p id="p-0050" num="0049">The alternative encoded data output unit <b>34</b> supplies the encoded concealment data that has been subjected to the padding to the multiplexer <b>36</b>.</p>
<p id="p-0051" num="0050">The scale factor encoding unit <b>35</b> performs inter-frame prediction encoding on the scale factor for each frame supplied from the spectrum normalization unit <b>12</b> using a scale factor of a past frame held thereby. Thus, since the scale factor encoding unit <b>35</b> performs the inter-frame prediction encoding on a scale factor, the encoding efficiency can be improved.</p>
<p id="p-0052" num="0051">The scale factor encoding unit <b>35</b> supplies the scale factor for each frame that has been subjected to the inter-frame prediction encoding to the multiplexer <b>36</b> as an encoded scale factor. In addition, the scale factor encoding unit <b>35</b> holds the scale factor for each frame supplied from the spectrum normalization unit <b>12</b> or the scale factor supplied from the encoded scale factor replacement unit <b>33</b> as a scale factor of a past frame.</p>
<p id="p-0053" num="0052">The multiplexer <b>36</b> multiplexes encoded spectrum data from an entropy encoding unit <b>14</b>, the encoded scale factor from the scale factor encoding unit <b>35</b>, and quantization information from a spectrum quantization unit <b>13</b> in accordance with the results of the detection supplied from the error detection unit <b>31</b>, in order to generate encoded data for each frame. The multiplexer <b>36</b> serves as output means, and, in accordance with the results of the detection from the error detection unit <b>31</b>, outputs the generated encoded data for each frame or outputs, as encoded data of a frame in which an encoding error has occurred, the encoded concealment data that has been subjected to the padding and that has been supplied from the alternative encoded data output unit <b>34</b>. The encoded data or the encoded concealment data output from the multiplexer <b>36</b> is, for example, temporarily held by an output buffer, which is not illustrated, and then transmitted to another apparatus.</p>
<p id="p-0054" num="0053">If the cause of an encoding error is that the number of bits of a frame is smaller than the number of bits necessary for encoding or a certain period of time has elapsed since encoding began, the encoding error is likely to occur during quantization, in which complex bit allocation is performed. Therefore, when an encoding error is detected, a scale factor for each frame is likely to have been calculated. For this reason, in this embodiment, the signal level calculation unit <b>32</b> calculates the spectrum level using the scale factor for each frame.</p>
<p id="p-0055" num="0054">However, if the scale factor for each frame has not been calculated when an encoding error is detected, the spectrum level is calculated using a frequency spectral coefficient for each frame that has been obtained before the detection of the encoding error or an audio signal itself. For example, if the frequency spectral coefficient for each frame has been calculated before the detection of the encoding error, an average value or a maximum value of frequency spectral coefficients is calculated as the spectrum level. If only an audio signal of each frame has been detected before the detection of the encoding error, appropriate scaling is performed on a maximum value, an average value, or the energy of time samples of the audio signal or the like in accordance with a time-frequency transform performed by a time-frequency transform unit <b>11</b>, and the spectrum level is obtained.</p>
<p id="h-0007" num="0000">Example of Frame Structure of Encoded Concealment Data</p>
<p id="p-0056" num="0055"><figref idref="DRAWINGS">FIG. 3</figref> is a diagram illustrating an example of the frame structure of encoded concealment data.</p>
<p id="p-0057" num="0056">As illustrated in <figref idref="DRAWINGS">FIG. 3</figref>, in the encoded concealment data, an encoding mode of a scale factor, an encoded scale factor, quantization information, and an encoded spectrum of an audio signal for concealment and the like are multiplexed for each frame.</p>
<p id="p-0058" num="0057">The encoding mode of a scale factor may be, for example, an offset mode in which encoding into an offset value and a difference from the offset value is performed, an inter-quantization unit prediction mode in which inter-quantization unit prediction encoding is performed, an inter-frame prediction mode in which inter-frame prediction encoding is performed, an inter-channel prediction mode in which inter-channel prediction encoding is performed, or the like.</p>
<p id="p-0059" num="0058">In this embodiment, a scale factor of an audio signal for concealment is encoded in the offset mode. Therefore, as illustrated in <figref idref="DRAWINGS">FIG. 3</figref>, the encoded scale factor of the encoded concealment data is configured by the offset value sf_offset (integer), the number N of bits of difference information &#x394;SF[n] defined by the following expression (2), and the difference information &#x394;SF[n].
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>&#x394;SF[<i>n</i>]=SF<sub>ec</sub><i>[n</i>]&#x2212;sf_offset&#x2003;&#x2003;(2)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0060" num="0059">In the expression (2), SF<sub>ec</sub>[n] denotes the scale factor of an audio signal for concealment of an n-th quantization unit. In addition, since an audio signal for concealment is a minute noise signal, the difference &#x394;SF[n] is sufficiently small, namely about N=2.</p>
<p id="p-0061" num="0060">In addition, although not illustrated, the frame structure of encoded data of an original audio signal is configured in the same manner as that of the encoded concealment data illustrated in <figref idref="DRAWINGS">FIG. 3</figref>. However, the encoding mode is the inter-frame prediction mode and difference information in relation to a scale factor of each quantization unit of a past frame or the like is arranged as the encoded scale factor.</p>
<p id="h-0008" num="0000">Description of Change of Scale Factor of Encoded Concealment Data</p>
<p id="p-0062" num="0061"><figref idref="DRAWINGS">FIG. 4</figref> is a diagram illustrating a change of an encoded scale factor of encoded concealment data made by the encoded scale factor replacement unit <b>33</b>. It is to be noted that, in <figref idref="DRAWINGS">FIG. 4</figref>, the horizontal axis represents the numbers n assigned to quantization units, and the vertical axis represents the level of a scale factor.</p>
<p id="p-0063" num="0062">As illustrated in <figref idref="DRAWINGS">FIG. 4</figref>, if a scale factor for each frame of an audio signal to be input to the encoding apparatus <b>30</b> is assumed to be SF<sub>sig</sub>[n] and the spectrum level calculated by the signal level calculation unit <b>32</b> is assumed to be SigLev, the encoded scale factor replacement unit <b>33</b> changes the offset value sf_offset of the encoded scale factor to an offset value sf_offset&#x2032; represented by the following expression (3):
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>sf_offset&#x2032;=SigLev&#x2212;<i>A</i>&#x2003;&#x2003;(3)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0064" num="0063">In the expression (3), &#x201c;A&#x201d; is an integer for adjusting the level of an audio signal for concealment. As illustrated in <figref idref="DRAWINGS">FIG. 4</figref>, the integer A is desirably set such that a scale factor SF&#x2032;<sub>ec</sub>[n] after the correction of the audio signal for concealment becomes slightly (several dB) smaller than the spectrum level SigLev.</p>
<p id="p-0065" num="0064">When the offset value sf_offset has been changed to the offset value sf_offset&#x2032;, the scale factor SP<sub>ec</sub>[n] of the audio signal for concealment after the change is represented by the following expression (4):
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>SF&#x2032;<sub>ec</sub><i>[n</i>]=&#x394;SF[<i>n</i>]+sf_offset&#x2032;&#x2003;&#x2003;(4)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0066" num="0065">As described above, in the case of an encoded scale factor of encoded concealment data, the scale factor SF<sub>ec</sub>[n] of each quantization unit of an audio signal for concealment for each frame is expressed by the difference &#x394;SF[n] from the offset value sf_offset. Therefore, the encoded scale factor replacement unit <b>33</b> can easily change the scale factors of all the quantization units of an audio signal for concealment for each frame just by changing the offset values sf_offset. In addition, since the encoded scale factor replacement unit <b>33</b> changes only the offset value sf_offset, the number N of bits of the difference information &#x394;SF[n] and the difference information &#x394;SF[n] do not change.</p>
<p id="h-0009" num="0000">Description of Process Performed by Encoding Apparatus</p>
<p id="p-0067" num="0066"><figref idref="DRAWINGS">FIG. 5</figref> is a flowchart illustrating an encoding process performed by the encoding apparatus <b>30</b> illustrated in <figref idref="DRAWINGS">FIG. 2</figref>. The encoding process is performed for each frame while sequentially setting an audio signal for each frame as the encoding target.</p>
<p id="p-0068" num="0067">In step S<b>11</b> illustrated in <figref idref="DRAWINGS">FIG. 5</figref>, the encoding apparatus <b>30</b> begins to encode the encoding target. More specifically, a process performed by the time-frequency transform unit <b>11</b>, the spectrum normalization unit <b>12</b>, the spectrum quantization unit <b>13</b>, the entropy encoding unit <b>14</b>, and the scale factor encoding unit <b>35</b> is begun. When the encoding target is an audio signal of a first frame, the encoding apparatus <b>30</b> is initialized and then the encoding is performed.</p>
<p id="p-0069" num="0068">In step S<b>12</b>, the error detection unit <b>31</b> judges whether or not an encoding error has been detected. More specifically, the error detection unit <b>31</b> judges whether or not an error has occurred during the encoding and whether or not a certain period of time (for example, a period of time during which real-time processing can be performed) has elapsed since the encoding began. If an error has occurred during the encoding or if a certain period of time has elapsed since the encoding began, it is judged in step S<b>12</b> that an encoding error has been detected. The error detection unit <b>31</b> supplies results of the detection that indicate detection of the encoding error to the signal level calculation unit <b>32</b> and the multiplexer <b>36</b>.</p>
<p id="p-0070" num="0069">In step S<b>13</b>, the encoding apparatus <b>30</b> stops the encoding of the encoding target and performs an error concealment process in the following steps S<b>14</b> to S<b>19</b>.</p>
<p id="p-0071" num="0070">More specifically, in step S<b>14</b>, the signal level calculation unit <b>32</b> calculates an average value, a maximum value, or a minimum value of scale factors the frames or the like obtained by the spectrum normalization unit <b>12</b> as the spectrum level in accordance with the results of the detection from the error detection unit <b>31</b>. The signal level calculation unit <b>32</b> supplies the calculated spectrum level to the encoded scale factor replacement unit <b>33</b>.</p>
<p id="p-0072" num="0071">In step S<b>15</b>, the encoded scale factor replacement unit <b>33</b> calculates the offset value sf_offset&#x2032; using the above-mentioned expression (3) on the basis of the spectrum level supplied from the signal level calculation unit <b>32</b>.</p>
<p id="p-0073" num="0072">In step S<b>16</b>, the encoded scale factor replacement unit <b>33</b> changes the offset value of the encoded scale factor included in the encoded concealment data on the basis of the offset value sf_offset&#x2032;. The encoded scale factor replacement unit <b>33</b> supplies the encoded concealment data whose offset value has been changed to the alternative encoding data output unit <b>34</b>.</p>
<p id="p-0074" num="0073">In step S<b>17</b>, the alternative encoding data output unit <b>34</b> performs padding on the encoded concealment data such that the number of bits of the encoded concealment data supplied from the encoded scale factor replacement unit <b>33</b> corresponds to the output bit rate. The alternative encoding data output unit <b>34</b> then supplies the encoded concealment data that has been subjected to the padding to the multiplexer <b>36</b>.</p>
<p id="p-0075" num="0074">In step S<b>18</b>, the multiplexer <b>36</b> outputs the encoded concealment data that has been subjected to the padding and that has been supplied from the alternative encoding data output unit <b>34</b> as the target encoded data in accordance with the results of the detection supplied from the error detection unit <b>31</b>.</p>
<p id="p-0076" num="0075">In step S<b>19</b>, the encoded scale factor replacement unit <b>33</b> supplies the scale factor SF&#x2032;<sub>ec</sub>[n] that corresponds to the encoded scale factor whose offset value has been changed in the process performed in step S<b>16</b> and that is represented by the above-mentioned expression (4) to the scale factor encoding unit <b>35</b> and causes the scale factor encoding unit <b>35</b> to hold the scale factor SF&#x2032;<sub>ec</sub>[n].</p>
<p id="p-0077" num="0076">As a result, the scale factor SF<sub>sig</sub>[n] held by the scale factor encoding unit <b>35</b> is represented by the following expression (5):
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>SF<sub>sig</sub><i>[n</i>]=SF&#x2032;<sub>ec</sub><i>[n</i>]=&#x394;SF[<i>n</i>]+sf_offset&#x2032;&#x2003;&#x2003;(5)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0078" num="0077">Thus, even if an encoding error has occurred, since the scale factor of the encoded concealment data, which is the target encoded data, is held by the scale factor encoding unit <b>35</b>, the scale factor encoding unit <b>35</b> can properly perform inter-frame prediction encoding using the scale factor held thereby when encoding the next frame.</p>
<p id="p-0079" num="0078">On the other hand, if an error has not occurred and a certain period of time has not elapsed since the encoding began, it is judged in step S<b>12</b> that an encoding error has not been detected. The error detection unit <b>31</b> supplies results of the detection that indicate that an encoding error has not been detected to the signal level calculation unit <b>32</b> and the multiplexer <b>36</b>.</p>
<p id="p-0080" num="0079">In step S<b>20</b>, the encoding apparatus <b>30</b> judges whether or not the encoding of the encoding target has ended. If it has been judged that the encoding of the encoding target has not ended, the process returns to step S<b>12</b>. The process in steps S<b>12</b> to S<b>20</b> is then repeated until the encoding of the encoding target ends.</p>
<p id="p-0081" num="0080">If it has been judged in step S<b>20</b> that the encoding of the encoding target has ended, the multiplexer <b>36</b> outputs the target encoded data generated by the encoding in accordance with the results of the detection supplied from the error detection unit <b>31</b>, and terminates the process.</p>
<p id="p-0082" num="0081">As described above, since the encoding apparatus <b>30</b> changes the scale factor of the encoded concealment data on the basis of the level of an audio signal to be encoded, encoded concealment data that has a more natural sound can be generated.</p>
<p id="h-0010" num="0000">Example of Configuration of Decoding Apparatus</p>
<p id="p-0083" num="0082"><figref idref="DRAWINGS">FIG. 6</figref> is a block diagram illustrating an example of the configuration of a decoding apparatus that decodes encoded data output from the encoding apparatus <b>30</b> illustrated in <figref idref="DRAWINGS">FIG. 2</figref>.</p>
<p id="p-0084" num="0083">A decoding apparatus <b>50</b> illustrated in <figref idref="DRAWINGS">FIG. 6</figref> includes an inverse multiplexer <b>51</b>, an entropy decoding unit <b>52</b>, a spectrum inverse quantization unit <b>53</b>, a scale factor decoding unit <b>54</b>, a spectrum inverse normalization unit <b>55</b>, and a frequency-time transform unit <b>56</b>. The decoding apparatus <b>50</b> decodes encoded data for each frame output from the encoding apparatus <b>30</b> and outputs a resultant audio signal.</p>
<p id="p-0085" num="0084">More specifically, the inverse multiplexer <b>51</b> serves as extraction means and, if the encoded data for each frame supplied from the encoding apparatus <b>30</b> has been subjected to padding, extracts encoded data before the padding from the encoded data. The inverse multiplexer <b>51</b> performs inverse multiplexing on the extracted encoded data before the padding or encoded data for each frame that has not been subjected to padding and that has been supplied from the encoding apparatus <b>30</b>, in order to extract encoded spectrum data, an encoded scale factor, and quantization information. The inverse multiplexer <b>51</b> supplies the encoded spectrum data to the entropy decoding unit <b>52</b> and the quantization information to the spectrum inverse quantization unit <b>53</b>. In addition, the inverse multiplexer <b>51</b> supplies the encoded scale factor to the scale factor decoding unit <b>54</b>.</p>
<p id="p-0086" num="0085">The entropy decoding unit <b>52</b> performs, on the encoded spectrum data supplied from the inverse multiplexer <b>51</b>, reversible decoding that corresponds to reversible compression such as Huffman coding or arithmetic coding, and supplies a resultant quantized frequency spectral coefficient for each frame to the spectrum inverse quantization unit <b>53</b>.</p>
<p id="p-0087" num="0086">The spectrum inverse quantization unit <b>53</b> performs inverse quantization on the quantized frequency spectral coefficient for each frame supplied from the entropy decoding unit <b>52</b> on the basis of the quantization information supplied from the inverse multiplexer <b>51</b>, in order to obtain a normalized frequency spectral coefficient for each frame. The spectrum inverse quantization unit <b>53</b> supplies the normalized frequency spectral coefficient for each frame to the spectrum inverse normalization unit <b>55</b>.</p>
<p id="p-0088" num="0087">The scale factor decoding unit <b>54</b> decodes the encoded scale factor supplied from the inverse multiplexer <b>51</b> in order to obtain a scale factor for each frame. More specifically, if the encoding mode is the offset mode, the scale factor decoding unit <b>54</b> calculates the scale factor SF&#x2032;<sub>ec</sub>[n] using the offset value sf_offset&#x2032; and the difference information &#x394;SF[n] included in the encoded scale factor and the above-mentioned expression (4).</p>
<p id="p-0089" num="0088">On the other hand, if the encoding mode is the inter-frame prediction mode, the scale factor decoding unit <b>54</b> performs inter-frame prediction decoding on the encoded scale factor using a scale factor of a past frame held thereby. More specifically, the scale factor decoding unit <b>54</b> calculates a scale factor of a current frame by adding the difference information included in the encoded scale factor and a scale factor of a past frame held thereby. The scale factor decoding unit <b>54</b> holds the obtained scale factor for each frame and supplies the scale factor to the spectrum inverse normalization unit <b>55</b>.</p>
<p id="p-0090" num="0089">The spectrum inverse normalization unit <b>55</b> performs, for each quantization unit, inverse normalization on the normalized frequency spectral coefficient for each frame supplied from the spectrum inverse quantization unit <b>53</b> on the basis of the scale factor for each frame supplied from the scale factor decoding unit <b>54</b>. The spectrum inverse normalization unit <b>55</b> supplies a frequency spectral coefficient for each frame obtained as a result of the inverse normalization to the frequency-time transform unit <b>56</b>.</p>
<p id="p-0091" num="0090">The frequency-time transform unit <b>56</b> performs a frequency-time transform such as inverse modified discrete cosine transform (IMDCT) on the frequency spectral coefficient for each frame supplied from the spectrum inverse normalization unit <b>55</b>. The frequency-time transform unit <b>56</b> outputs an audio signal, which is a resultant time signal for each frame.</p>
<p id="p-0092" num="0091">If the IMDCT is performed on the frequency spectral coefficient for each frame, an audio signal of each frame is an audio signal obtained by superimposing an audio signal corresponding to the frequency spectral coefficient of the corresponding frame and an audio signal corresponding to the frequency spectral coefficient of a previous frame.</p>
<p id="p-0093" num="0092">Here, the scale factor of encoded concealment data is, as described above, set on the basis of the spectrum level of an audio signal at a time when an encoding error occurs. Therefore, the spectrum level of an audio signal for concealment is not significantly different from the spectrum level of an original audio signal. As a result, by adding audio signals corresponding to frequency spectral coefficients of previous and next frames using the frequency-time transform unit <b>56</b>, the audio signal for concealment can be smoothly connected to audio signals of the previous and next frames.</p>
<p id="h-0011" num="0000">Description of Decoding Process</p>
<p id="p-0094" num="0093"><figref idref="DRAWINGS">FIG. 7</figref> is a flowchart illustrating a decoding process performed by the decoding apparatus <b>50</b> illustrated in <figref idref="DRAWINGS">FIG. 6</figref>. The decoding process is begun when, for example, the encoded data for each frame output from the encoding apparatus <b>30</b> illustrated in <figref idref="DRAWINGS">FIG. 2</figref> is input to the decoding apparatus <b>50</b>. When the decoding process is performed on encoded data of the first frame, the decoding apparatus <b>50</b> is initialized before the decoding process.</p>
<p id="p-0095" num="0094">In step S<b>31</b> illustrated in <figref idref="DRAWINGS">FIG. 7</figref>, the inverse multiplexer <b>51</b> performs inverse multiplexing on the encoded data for each frame supplied from the encoding apparatus <b>30</b> in order to extract encoded spectrum data, an encoded scale factor, and quantization information. If the encoded data for each frame supplied from the encoding apparatus <b>30</b> has been subjected to padding, the inverse multiplexer <b>51</b> extracts encoded data before the padding and then performs inverse multiplexing. The inverse multiplexer <b>51</b> supplies the encoded spectrum data to the entropy decoding unit <b>52</b> and the quantization information to the spectrum inverse quantization unit <b>53</b>. In addition, the inverse multiplexer <b>51</b> supplies the encoded scale factor to the scale factor decoding unit <b>54</b>.</p>
<p id="p-0096" num="0095">In step S<b>32</b>, the entropy decoding unit <b>52</b> performs, on the encoded spectrum data supplied from the inverse multiplexer <b>51</b>, reversible decoding that corresponds to reversible compression such as Huffman coding or arithmetic coding. The entropy decoding unit <b>52</b> then supplies a resultant quantized frequency spectral coefficient for each frame to the spectrum inverse quantization unit <b>53</b>.</p>
<p id="p-0097" num="0096">In step S<b>33</b>, the spectrum inverse quantization unit <b>53</b> performs inverse quantization on the quantized frequency spectral coefficient for each frame supplied from the entropy decoding unit <b>52</b> on the basis of the quantization information supplied from the inverse multiplexer <b>51</b>. The spectrum inverse quantization unit <b>53</b> supplies a resultant normalized frequency spectral coefficient for each frame to the spectrum inverse normalization unit <b>55</b>.</p>
<p id="p-0098" num="0097">In step S<b>34</b>, the scale factor decoding unit <b>54</b> decodes the encoded scale factor supplied from the inverse multiplexer <b>51</b> in accordance with the encoding mode included in the encoded scale factor, in order to obtain a scale factor.</p>
<p id="p-0099" num="0098">In step S<b>35</b>, the scale factor decoding unit <b>54</b> holds the obtained scale factor. If the encoding mode of an encoded scale factor of a frame located after a current frame to be decoded, the scale factor is used to decode the encoded scale factor. The scale factor decoding unit <b>54</b> supplies the obtained scale factor to the spectrum inverse normalization unit <b>55</b>.</p>
<p id="p-0100" num="0099">In step S<b>36</b>, the spectrum inverse normalization unit <b>55</b> performs, for each quantization unit, inverse normalization on the normalized frequency spectral coefficient for each frame supplied from the spectrum inverse quantization unit <b>53</b> on the basis of the scale factor for each frame supplied from the scale factor decoding unit <b>54</b>. The spectrum inverse normalization unit <b>55</b> supplies a frequency spectral coefficient for each frame obtained as a result of the inverse normalization to the frequency-time transform unit <b>56</b>.</p>
<p id="p-0101" num="0100">In step S<b>37</b>, the frequency-time transform unit <b>56</b> performs a frequency-time transform such as the IMDCT on the frequency spectral coefficient for each frame supplied from the spectrum inverse normalization unit <b>55</b>.</p>
<p id="p-0102" num="0101">In step S<b>38</b>, the frequency-time transform unit <b>56</b> outputs an audio signal, which is a time signal for each frame obtained as a result of the frequency-time transform, and then terminates the process.</p>
<p id="p-0103" num="0102">As described above, the decoding apparatus <b>50</b> performs inverse normalization on the normalized frequency spectral coefficient of the encoded concealment data on the basis of the encoded scale factor that is included in the encoded concealment data and that has been changed on the basis of the spectrum level of an original audio signal. As a result, the decoding apparatus <b>50</b> can generate an audio signal for concealment whose spectrum level corresponds to the spectrum level of the original audio signal and that has a natural sound as a result of the decoding.</p>
<p id="h-0012" num="0000">Another Example of Configuration of Decoding Apparatus</p>
<p id="p-0104" num="0103"><figref idref="DRAWINGS">FIG. 8</figref> is a block diagram illustrating another example of the configuration of a decoding apparatus that decodes encoded data output from the encoding apparatus <b>30</b>.</p>
<p id="p-0105" num="0104">In the configuration illustrated in <figref idref="DRAWINGS">FIG. 8</figref>, the same reference numerals as in <figref idref="DRAWINGS">FIG. 6</figref> are given to components that are the same as those illustrated in <figref idref="DRAWINGS">FIG. 6</figref>. Redundant description is omitted as necessary.</p>
<p id="p-0106" num="0105">The configuration of a decoding apparatus <b>70</b> illustrated in <figref idref="DRAWINGS">FIG. 8</figref> is different from the configuration illustrated in <figref idref="DRAWINGS">FIG. 6</figref> in that a concealment data detection unit <b>71</b> and a concealment spectrum generation unit <b>72</b> are newly provided and a spectrum inverse normalization unit <b>73</b> is provided instead of the spectrum inverse normalization unit <b>55</b>. If the encoded data for each frame supplied from the encoding apparatus <b>30</b> is encoded concealment data, the decoding apparatus <b>70</b> does not decode the encoded concealment data but newly generates an audio signal for concealment.</p>
<p id="p-0107" num="0106">More specifically, the concealment data detection unit <b>71</b> of the decoding apparatus <b>70</b> serves as judgment means, and compares encoded concealment data that is held by a memory, which is not illustrated, and that is identical with the encoded concealment data held by the encoding apparatus <b>30</b> and the encoded data for each frame supplied from the encoding apparatus <b>30</b>. The concealment data detection unit <b>71</b> judges, on the basis of results of the comparison, whether or not the encoded data for each frame supplied from the encoding apparatus <b>30</b> is encoded concealment data, and supplies results of the judgment to the concealment spectrum generation unit <b>72</b>.</p>
<p id="p-0108" num="0107">The concealment spectrum generation unit <b>72</b> generates a coefficient for concealment on the basis of the normalized frequency spectral coefficient for each frame obtained by the spectrum inverse quantization unit <b>53</b> in accordance with the results of the judgment supplied from the concealment data detection unit <b>71</b>. The coefficient for concealment is a normalized frequency spectral coefficient of an audio signal for concealment generated by the decoding apparatus <b>70</b>. The concealment spectrum generation unit <b>72</b> supplies the generated coefficient for concealment to the spectrum inverse normalization unit <b>73</b>.</p>
<p id="p-0109" num="0108">The spectrum inverse normalization unit <b>73</b> performs inverse normalization on the normalized frequency spectral coefficient from the spectrum inverse quantization unit <b>53</b> or the coefficient for concealment from the concealment spectrum generation unit <b>72</b> on the basis of the scale factor from the scale factor decoding unit <b>54</b>. The spectrum inverse normalization unit <b>73</b> supplies a frequency spectral coefficient obtained as a result of the inverse normalization to the frequency-time transform unit <b>56</b>. As a result, an audio signal corresponding to the normalized frequency spectral coefficient from the spectrum inverse quantization unit <b>53</b> is generated as an original signal and an audio signal corresponding to the coefficient for concealment is generated as a new audio signal for concealment.</p>
<p id="h-0013" num="0000">Description of Comparison of Encoded Data</p>
<p id="p-0110" num="0109"><figref idref="DRAWINGS">FIG. 9</figref> is a diagram illustrating a comparison of encoded data performed by the concealment data detection unit <b>71</b> illustrated in <figref idref="DRAWINGS">FIG. 8</figref>.</p>
<p id="p-0111" num="0110">As illustrated in <figref idref="DRAWINGS">FIG. 9</figref>, an encoding mode, an encoded scale factor, quantization information, and an encoded spectrum are arranged in each frame of the encoded concealment data held by the memory, which is not illustrated, and the encoded data for each frame supplied from the encoding apparatus <b>30</b>.</p>
<p id="p-0112" num="0111">The concealment data detection unit <b>71</b> compares the encoded concealment data and encoded data for each frame except for the encoded scale factor. It is to be noted that the concealment data detection unit <b>71</b> may collectively compare data except for the encoded scale factor at once or may compare data stepwise by dividing the data.</p>
<p id="p-0113" num="0112">If the concealment data detection unit <b>71</b> compares the data except for the encoded scale factor stepwise, first, data (<b>1</b>) of several bytes illustrated in <figref idref="DRAWINGS">FIG. 9</figref> that is most characteristic in the encoded spectrum is extracted from the encoded concealment data and the encoded data for each frame. The data (<b>1</b>) may be, for example, data of several bytes whose frequency of pattern appearance is low.</p>
<p id="p-0114" num="0113">Next, the concealment data detection unit <b>71</b> compares the data (<b>1</b>) of the encoded concealment data and the encoded data for each frame. Since the data (<b>1</b>) is data of several bytes, the comparison can be performed at high speed. If it has been found that the data (<b>1</b>) of the encoded concealment data and the encoded data for each frame does not match as a result of the comparison, the concealment data detection unit <b>71</b> judges that the encoded data for each frame is not the encoded concealment data.</p>
<p id="p-0115" num="0114">On the other hand, if the data (<b>1</b>) of the encoded concealment data and the encoded data for each frame matches, the concealment data detection unit <b>71</b> extracts, for example, data (<b>2</b>), which is data other than the data (<b>1</b>) in encoded spectra, of the encoded concealment data and the encoded data for each frame and compares the data (<b>2</b>). If it has been found that the data (<b>2</b>) of the encoded concealment data and the encoded data for each frame does not match as a result of the comparison, the concealment data detection unit <b>71</b> judges that the encoded data for each frame is not the encoded concealment data.</p>
<p id="p-0116" num="0115">In the same manner as above, the concealment data detection unit <b>71</b> extracts quantization information (<b>3</b>) from the encoded concealment data and the encoded data for each frame and compares the quantization information (<b>3</b>). If the quantization information (<b>3</b>) matches, the concealment data detection unit <b>71</b> extracts data (<b>4</b>), which is data other than encoded scale factors, the data (<b>1</b>), the data (<b>2</b>), and the quantization information (<b>3</b>), from the encoded concealment data and the encoded data for each frame, and compares the data (<b>4</b>). If the data (<b>1</b>), the data (<b>2</b>), the quantization information (<b>3</b>), and the data (<b>4</b>) of the encoded concealment data and the encoded data for each frame all match, the concealment data detection unit <b>71</b> judges that the encoded data for each frame is the encoded concealment data. On the other hand, if the quantization information (<b>3</b>) or the data (<b>4</b>) of the encoded concealment data and the encoded data for each frame does not match, the concealment data detection unit <b>71</b> judges that the encoded data for each frame is not the encoded concealment data.</p>
<p id="p-0117" num="0116">As described above, when comparing the data other than the encode scale factors stepwise, the concealment data detection unit <b>71</b> can judge that the encoded data for each frame is not the encoded concealment data when any of the data (<b>1</b>), the data (<b>2</b>), the quantization information (<b>3</b>), and the data (<b>4</b>) of the encoded concealment data and the encoded data for each frame does not match. Therefore, the concealment data detection unit <b>71</b> can efficiently judge whether or not the encoded data for each frame is the encoded concealment data.</p>
<p id="p-0118" num="0117">In addition, the concealment data detection unit <b>71</b> judges that the encoded data for each frame is the encoded concealment data when all the data except for the encoded scale factors matches, it is possible to accurately detect the encoded concealment data.</p>
<p id="p-0119" num="0118">It is to be understood that the order of the comparisons of the data (<b>2</b>), the quantization information (<b>3</b>), and the data (<b>4</b>) is not limited to the above-described case.</p>
<p id="h-0014" num="0000">Description of Another Decoding Process</p>
<p id="p-0120" num="0119"><figref idref="DRAWINGS">FIG. 10</figref> is a flowchart illustrating a decoding process performed by the decoding apparatus <b>70</b> illustrated in <figref idref="DRAWINGS">FIG. 8</figref>. The decoding process is begun when, for example, the encoded data for each frame output from the encoding apparatus <b>30</b> illustrated in <figref idref="DRAWINGS">FIG. 2</figref> is input to the decoding apparatus <b>70</b>. When the decoding process is performed on encoded data of the first frame, the decoding apparatus <b>70</b> is initialized before the decoding process.</p>
<p id="p-0121" num="0120">The process performed in steps S<b>51</b> to S<b>55</b> illustrated in <figref idref="DRAWINGS">FIG. 10</figref> is the same as that performed in steps S<b>31</b> to S<b>35</b> illustrated in <figref idref="DRAWINGS">FIG. 7</figref>, and therefore description thereof is omitted.</p>
<p id="p-0122" num="0121">After the process performed in step S<b>55</b>, as illustrated in <figref idref="DRAWINGS">FIG. 9</figref>, the concealment data detection unit <b>71</b> compares the data of the encoded data for each frame to be decoded and the encoded concealment data except for the encoded scale factors in step S<b>56</b>.</p>
<p id="p-0123" num="0122">In step S<b>57</b>, the concealment data detection unit <b>71</b> judges whether or not the encoded data for each frame to be decoded is the encoded concealment data on the basis of results of the comparison, and supplies results of the judgment to the concealment spectrum generation unit <b>72</b>.</p>
<p id="p-0124" num="0123">If it has been judged in step S<b>57</b> that the encoded data for each frame to be decoded is not the encoded concealment data, the process proceeds to step S<b>58</b>. In step S<b>58</b>, the spectrum inverse normalization unit <b>73</b> performs inverse normalization on the normalized frequency spectral coefficient from the spectrum inverse quantization unit <b>53</b> on the basis of the scale factor from the scale factor decoding unit <b>54</b>. The spectrum inverse normalization unit <b>73</b> supplies a frequency spectral coefficient obtained as a result of the inverse normalization to the frequency-time transform unit <b>56</b>. The process then proceeds to step S<b>61</b>.</p>
<p id="p-0125" num="0124">On the other hand, if it has been judged in step S<b>57</b> that the encoded data for each frame to be decoded is the encoded concealment data, the process proceeds to step S<b>59</b>.</p>
<p id="p-0126" num="0125">In step S<b>59</b>, the concealment spectrum generation unit <b>72</b> generates a coefficient for concealment on the basis of the normalized frequency spectral coefficient obtained by the spectrum inverse quantization unit <b>53</b>. More specifically, the concealment spectrum generation unit <b>72</b> generates, as the coefficient for concealment, an average value of the normalized frequency spectral coefficients of frames located before the frame to be decoded or an average value of the normalized frequency spectral coefficient of frames located immediately before and after the frame to be decoded.</p>
<p id="p-0127" num="0126">However, if the normalized frequency spectral coefficient of a frame located after the frame to be decoded is used to generate the coefficient for concealment, a delay is caused. It is to be understood that a method for generating the coefficient for concealment is not limited to the above-described method. The concealment spectrum generation unit <b>72</b> supplies the generated coefficient for concealment to the spectrum inverse normalization unit <b>73</b>.</p>
<p id="p-0128" num="0127">In step S<b>60</b>, the spectrum inverse normalization unit <b>73</b> performs inverse normalization on the coefficient for concealment supplied from the concealment spectrum generation unit <b>72</b> on the basis of the scale factor from the scale factor decoding unit <b>54</b>. The spectrum inverse normalization unit <b>73</b> supplies a frequency spectral coefficient obtained as a result of the inverse normalization to the frequency-time transform unit <b>56</b>. The process then proceeds to step S<b>61</b>.</p>
<p id="p-0129" num="0128">The process performed in steps S<b>61</b> and S<b>62</b> is the same as that performed in steps S<b>37</b> and S<b>38</b> illustrated in <figref idref="DRAWINGS">FIG. 7</figref>, and therefore description thereof is omitted.</p>
<p id="p-0130" num="0129">If it has been judged that the encoded data to be decoded is the encoded concealment data by the above-described process performed in steps S<b>59</b> to S<b>61</b>, a new audio signal for concealment is generated using the encoded scale factor included in the encoded concealment data and encoded data located before or after the encoded concealment data. Therefore, in this case, the concealment spectrum generation unit <b>72</b>, the spectrum inverse normalization unit <b>73</b>, and the frequency-time transform unit <b>56</b> serve as generation means for generating the new audio signal for concealment.</p>
<p id="p-0131" num="0130">It is to be noted that although the process in steps S<b>52</b> and S<b>53</b> is supposed to be performed regardless of the decoding target being the encoded concealment data or the encoded data of an original audio signal in the decoding process illustrated in <figref idref="DRAWINGS">FIG. 10</figref>, it is not necessary to perform the process in steps S<b>52</b> and S<b>53</b> when the decoding target is the encoded concealment data.</p>
<p id="p-0132" num="0131">As described above, the decoding apparatus <b>70</b> judges whether or not the encoded data for each frame to be decoded is the encoded concealment data by comparing the encoded data for each frame to be decoded and the encoded concealment data. Therefore, it is not necessary for the encoding apparatus <b>30</b> to transmit, to the decoding apparatus <b>70</b>, a flag indicating whether or not the encoded data is the encode concealment data, thereby reducing the number of bits to be transmitted. In contrast, when it is necessary to transmit a flag indicating whether or not the encoded data is the encoded concealment data to the decoding apparatus, that is, for example, when the format of the encoded data has already been determined, it is necessary to add the flag to the encoded data as a new header or determine a new format.</p>
<p id="p-0133" num="0132">In addition, if the encoded data for each frame to be decoded is the encoded concealment data, the decoding apparatus <b>70</b> generates a coefficient for concealment and performs inverse normalization on the coefficient for concealment on the basis of the encoded scale factor included in the encoded concealment data. Therefore, the decoding apparatus <b>70</b> can easily generate an audio signal for concealment whose spectrum level corresponds to the spectrum level of an original audio signal and that has a natural sound just by generating the coefficient for concealment. In contrast, in the case of a decoding apparatus that generates an audio signal for concealment without using a scale factor based on the spectrum level of an original audio signal of a frame in which an encoding error has occurred, a lot of resources such as a computing unit and a memory are necessary and it is difficult to generate an audio signal for concealment that has a natural sound.</p>
<p id="p-0134" num="0133">Furthermore, since the decoding apparatus <b>70</b> generates the coefficient for concealment on the basis of the normalized frequency spectral coefficient of a frame located at least either before or after the frame to be decoded, an audio signal for concealment that has a more natural sound can be generated.</p>
<p id="p-0135" num="0134">Although the encoding mode of the scale factor of an audio signal for concealment is the offset mode in this embodiment, the encoding mode is not limited to this. For example, it is possible to determine the encoding mode of a scale factor of an audio signal for concealment for the left channel to be the inter-quantization unit prediction mode and the encoding mode of a scale factor of an audio signal for concealment for the right channel to be the inter-channel prediction mode.</p>
<p id="p-0136" num="0135">However, it is desirable not to set the inter-frame prediction mode as the encoding mode of the scale factor of an audio signal for concealment. When the inter-frame prediction mode is not set, the amount of processing of the error concealment process can be reduced and accordingly the amount of data to be stored in a storage region of the encoding apparatus <b>30</b> can be reduced.</p>
<p id="p-0137" num="0136">In addition, the encoding mode of a scale factor may be set for each frame.</p>
<p id="p-0138" num="0137">Furthermore, although the above-described encoded data includes an encoded scale factor, information regarding normalization included in the encoded data is not necessarily an encoded scale factor and may be a coefficient used for the normalization or a scale factor itself.</p>
<p id="h-0015" num="0000">Description of Computer to Which Present Disclosure is Applied</p>
<p id="p-0139" num="0138">Now, the above-described series of processes may be performed by hardware or software. If the series of process is performed by software, a program included in the software is installed on a general-purpose computer or the like.</p>
<p id="p-0140" num="0139"><figref idref="DRAWINGS">FIG. 11</figref> illustrates an example of the configuration of a computer according to an embodiment on which a program that executes the above-described series of processes is installed.</p>
<p id="p-0141" num="0140">The program may be recorded on a storage unit <b>208</b> or a read-only memory (ROM) <b>202</b> in advance, which is a recoding medium incorporated into the computer.</p>
<p id="p-0142" num="0141">Alternatively, the program may be stored in (recorded on) a removable medium <b>211</b>. Such a removable medium may be provided as so-called package software. Here, the removable medium <b>211</b> may be, for example, a flexible disk, a compact disc read-only memory (CD-ROM), a magneto-optical (MO) disk, a digital versatile disc (DVD), a magnetic disk, a semiconductor memory, or the like.</p>
<p id="p-0143" num="0142">The program may be installed not only on the computer through a drive <b>210</b> from the above-described removable medium <b>211</b> but also on the storage unit <b>208</b> incorporated into the computer by downloading the program to the computer through a communication network or a broadcast network. That is, the program may be, for example, wirelessly transferred from a download website to the computer through an artificial satellite for digital satellite broadcast or transferred to the computer through a cable network such as a local area network (LAN) or the Internet.</p>
<p id="p-0144" num="0143">The computer includes a central processing unit (CPU) <b>201</b>. An input/output interface <b>205</b> is connected to the CPU <b>201</b> through a bus <b>204</b>.</p>
<p id="p-0145" num="0144">When a command is input to the CPU <b>201</b> through the input/output interface <b>205</b> by, for example, a user who operates an input unit <b>206</b>, the CPU <b>201</b> executes the program stored in the ROM <b>202</b>. Alternatively, the CPU <b>201</b> loads the program stored in the storage unit <b>208</b> into the random-access memory (RAM) <b>203</b> and executes the program.</p>
<p id="p-0146" num="0145">The CPU <b>201</b> thus performs the processes according to the above-described flowcharts or the process according to the configuration illustrated in the above-described block diagrams. The CPU <b>201</b> then, for example, outputs results of the processes from an output unit <b>207</b>, transmits results of the processes from a communication unit <b>209</b>, or records results of the processes on the storage unit <b>208</b>, through the input/output interface <b>205</b> as necessary.</p>
<p id="p-0147" num="0146">The input unit <b>206</b> is configured by a keyboard, a mouse, a microphone, or the like. The output unit <b>207</b> is configured by a liquid crystal display (LCD), a speaker, or the like.</p>
<p id="p-0148" num="0147">The processes performed by the computer in accordance with the program are not necessarily performed chronologically in the order described in the flowcharts herein. That is, the processes performed by the computer in accordance with the program include processes executed in parallel with one another or individually (for example, parallel processes or processes executed using an object).</p>
<p id="p-0149" num="0148">In addition, the program may be processed by a single computer (processor) or may be subjected to distributed processing performed by a plurality of computers. Furthermore, the program may be transferred to a distant computer and executed.</p>
<p id="p-0150" num="0149">Embodiments of the present disclosure are not limited to the above-described embodiments and may be modified in various ways insofar as the scope of the present disclosure is not deviated from.</p>
<p id="p-0151" num="0150">The present disclosure contains subject matter related to that disclosed in Japanese Priority Patent Application JP 2010-270544 filed in the Japan Patent Office on Dec. 3, 2010, the entire contents of which are hereby incorporated by reference.</p>
<p id="p-0152" num="0151">It should be understood by those skilled in the art that various modifications, combinations, sub-combinations and alterations may occur depending on design requirements and other factors insofar as they are within the scope of the appended claims or the equivalents thereof.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. An encoding apparatus comprising:
<claim-text>a time-frequency transform unit that performs a time-frequency transform on an audio signal;</claim-text>
<claim-text>a normalization unit that normalizes a frequency spectral coefficient obtained by the time-frequency transform in order to generate encoded data of the audio signal;</claim-text>
<claim-text>a level calculation unit that calculates a level of the audio signal;</claim-text>
<claim-text>a scale factor changing unit that changes a concealment scale factor included in encoded concealment data obtained by performing, on the basis of the level of the audio signal, a time-frequency transform and normalization on a minute noise signal, the concealment scale factor being a scale factor relating to a coefficient used for the normalization; and</claim-text>
<claim-text>an output unit that, if an error has not occurred during encoding of the audio signal, outputs the encoded data of the audio signal generated by the normalization unit, and that, if an error has occurred during the encoding of the audio signal, outputs, as encoded data of the audio signal, the encoded concealment data whose concealment scale factor has been changed.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The encoding apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the level calculation unit calculates an average value, a maximum value or a minimum value of an original scale factor, which is a scale factor relating to a coefficient used for normalization performed by the normalization unit on the audio signal, as the level of the audio signal.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The encoding apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the concealment scale factor is encoded into a certain offset value and a difference between the certain offset value and the concealment scale factor, and
<claim-text>wherein the scale factor changing unit changes the concealment scale factor by changing the certain offset value.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The encoding apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>a scale factor encoding unit that performs inter-frame prediction encoding on an original scale factor, which is a scale factor relating to a coefficient used for the normalization performed by the normalization unit on the audio signal and holds the original scale factor,</claim-text>
<claim-text>wherein the scale factor changing unit causes, if an error has occurred during the encoding of the audio signal, the normalization unit to hold the concealment scale factor that has been subjected to a change made by the scale factor changing unit as an original scale factor of the audio signal, and</claim-text>
<claim-text>wherein the scale factor encoding unit performs inter-frame prediction encoding on the original scale factor using the original scale factor held by the scale factor encoding unit.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The encoding apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the number of bits of the encoded concealment data is a smallest number of bits that can be processed by the encoding apparatus, and
<claim-text>wherein the output unit performs padding on the encoded concealment data such that the number of bits of the encoded concealment data corresponds to an output bit rate, and outputs the encoded concealment data.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. An encoding method comprising:
<claim-text>causing an encoding apparatus to
<claim-text>perform a time-frequency transform on an audio signal;</claim-text>
<claim-text>normalize a frequency spectral coefficient obtained by the time-frequency transform in order to generate encoded data of the audio signal;</claim-text>
<claim-text>calculate a level of the audio signal;</claim-text>
<claim-text>change a concealment scale factor included in encoded concealment data obtained by performing, on the basis of the level of the audio signal, a time-frequency transform and normalization on a minute noise signal, the concealment scale factor being a scale factor relating to a coefficient used for the normalization; and</claim-text>
<claim-text>output, if an error has not occurred during encoding of the audio signal, the encoded data of the audio signal generated by the normalization, and output, if an error has occurred during the encoding of the audio signal, the encoded concealment data whose concealment scale factor has been changed as encoded data of the audio signal.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. A non-transitory computer-readable medium having embodied thereon a program, which when executed by a computer causes the computer to execute a process including:
<claim-text>performing a time-frequency transform on an audio signal;</claim-text>
<claim-text>normalizing a frequency spectral coefficient obtained by the time-frequency transform in order to generate encoded data of the audio signal;</claim-text>
<claim-text>calculating a level of the audio signal;</claim-text>
<claim-text>changing a concealment scale factor included in encoded concealment data obtained by performing, on the basis of the level of the audio signal, a time-frequency transform and normalization on a minute noise signal, the concealment scale factor being a scale factor relating to a coefficient used for the normalization; and</claim-text>
<claim-text>outputting, if an error has not occurred during encoding of the audio signal, the encoded data of the audio signal generated by the normalization, and outputting, if an error has occurred during the encoding of the audio signal, the encoded concealment data whose concealment scale factor has been changed as encoded data of the audio signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. A decoding apparatus comprising:
<claim-text>an inverse normalization unit that performs inverse normalization on encoded data using a scale factor of the encoded data included in the encoded data supplied from an encoding apparatus that, if an error has not occurred during encoding of an audio signal, outputs the encoded data generated by performing a time-frequency transform and normalization on the audio signal, and that, if an error has occurred during the encoding of the audio signal, changes, on the basis of a level of the audio signal, a concealment scale factor included in encoded concealment data obtained by performing a time-frequency transform and normalization on a minute noise signal, the concealment scale factor being a scale factor relating to a coefficient used for the normalization, and then outputs the encoded concealment data as the encoded data of the audio signal; and</claim-text>
<claim-text>a frequency-time transform unit that performs a frequency-time transform on a frequency spectrum obtained as a result of the inverse normalization performed by the inverse normalization unit.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The decoding apparatus according to <claim-ref idref="CLM-00008">claim 8</claim-ref>, further comprising:
<claim-text>a judgment unit that judges whether or not the encoded data is the encoded concealment data by comparing the encoded data and encoded concealment data for comparison, which is the encoded concealment data before the concealment scale factor is changed.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The decoding apparatus according to <claim-ref idref="CLM-00009">claim 9</claim-ref>,
<claim-text>wherein the judgment unit compares first data, which is data included in the encoded data other than the scale factor, and second data, which is data included in the encoded concealment data for comparison other than the concealment scale factor, and, if the first data and the second data match, judges that the encoded data is the encoded concealment data.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The decoding apparatus according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, further comprising:
<claim-text>a generation unit that, if the judgment unit has judged that the encoded data is the encoded concealment data, generates an audio signal for concealment using the concealment scale factor included in the encoded concealment data and encoded data older than the encoded concealment data,</claim-text>
<claim-text>wherein, if the judgment unit has judged that the encoded data is not the encoded concealment data, the inverse normalization unit performs inverse normalization on the encoded data.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The decoding apparatus according to <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the concealment scale factor is encoded into a certain offset value and a difference between the certain offset value and the concealment scale factor.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The decoding apparatus according to <claim-ref idref="CLM-00008">claim 8</claim-ref>, further comprising:
<claim-text>a scale factor decoding unit that performs inter-frame prediction decoding on the scale factor of the encoded data that is not the encoded concealment data and holds a scale factor obtained as a result of the decoding,</claim-text>
<claim-text>wherein the scale factor decoding unit holds the concealment scale factor as the scale factor obtained as a result of the decoding and performs inter-frame prediction decoding using the scale factor held by the scale factor decoding unit.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The decoding apparatus according to <claim-ref idref="CLM-00008">claim 8</claim-ref>, further comprising:
<claim-text>an extraction unit that extracts the encoded concealment data from encoded concealment data that has been subjected to padding and that is supplied from the encoding apparatus.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. A decoding method comprising:
<claim-text>causing a decoding apparatus to
<claim-text>perform inverse normalization on encoded data using a scale factor of the encoded data included in the encoded data supplied from an encoding apparatus that, if an error has not occurred during encoding of an audio signal, outputs the encoded data generated by performing a time-frequency transform and normalization on the audio signal, and that, if an error has occurred during the encoding of the audio signal, changes, on the basis of a level of the audio signal, a concealment scale factor included in encoded concealment data obtained by performing a time-frequency transform and normalization on a minute noise signal, the concealment scale factor being a scale factor relating to a coefficient used for the normalization, and then outputs the encoded concealment data as the encoded data of the audio signal; and</claim-text>
<claim-text>perform a frequency-time transform on a frequency spectrum obtained as a result of the inverse normalization.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. A non-transitory computer-readable medium having embodied thereon a program, which when executed by a computer causes the computer to execute a process including:
<claim-text>performing inverse normalization on encoded data using a scale factor of the encoded data included in the encoded data supplied from an encoding apparatus that, if an error has not occurred during encoding of an audio signal, outputs the encoded data generated by performing a time-frequency transform and normalization on the audio signal, and that, if an error has occurred during the encoding of the audio signal, changes, on the basis of a level of the audio signal, a concealment scale factor included in encoded concealment data obtained by performing a time-frequency transform and normalization on a minute noise signal, the concealment scale factor being a scale factor relating to a coefficient used for the normalization, and then outputs the encoded concealment data as the encoded data of the audio signal; and</claim-text>
<claim-text>performing a frequency-time transform on a frequency spectrum obtained as a result of the inverse normalization.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
