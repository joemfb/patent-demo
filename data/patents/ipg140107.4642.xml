<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625730-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625730</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13180620</doc-number>
<date>20110712</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2010-195282</doc-number>
<date>20100901</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>267</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>03</class>
<subclass>D</subclass>
<main-group>3</main-group>
<subgroup>24</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>375376</main-classification>
<further-classification>375294</further-classification>
<further-classification>375316</further-classification>
<further-classification>375327</further-classification>
<further-classification>375371</further-classification>
<further-classification>375373</further-classification>
</classification-national>
<invention-title id="d2e71">Phase locked loop, CDR circuit, and receiving circuit</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6853223</doc-number>
<kind>B2</kind>
<name>Ebuchi et al.</name>
<date>20050200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>327156</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>7551037</doc-number>
<kind>B2</kind>
<name>Isobe et al.</name>
<date>20090600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>331 16</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>7692496</doc-number>
<kind>B2</kind>
<name>Tseng</name>
<date>20100400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>331 11</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>7738618</doc-number>
<kind>B2</kind>
<name>Jacobsson et al.</name>
<date>20100600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>375375</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>7920000</doc-number>
<kind>B2</kind>
<name>Kawashima</name>
<date>20110400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>327156</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>7945010</doc-number>
<kind>B2</kind>
<name>Shin</name>
<date>20110500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>375371</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>8143925</doc-number>
<kind>B2</kind>
<name>Ahn et al.</name>
<date>20120300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>327158</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>8149974</doc-number>
<kind>B2</kind>
<name>Arima et al.</name>
<date>20120400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>375355</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>8188776</doc-number>
<kind>B2</kind>
<name>Kumagai</name>
<date>20120500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>327156</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>8258878</doc-number>
<kind>B2</kind>
<name>Yen et al.</name>
<date>20120900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>331  2</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>8373470</doc-number>
<kind>B2</kind>
<name>Trivedi et al.</name>
<date>20130200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>327158</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>2003/0231064</doc-number>
<kind>A1</kind>
<name>Sano</name>
<date>20031200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>331  1 A</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>2007/0104292</doc-number>
<kind>A1</kind>
<name>Gregorius</name>
<date>20070500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>375327</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>2007/0254600</doc-number>
<kind>A1</kind>
<name>Ishii</name>
<date>20071100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455 76</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>2009/0167384</doc-number>
<kind>A1</kind>
<name>Sohn et al.</name>
<date>20090700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>327156</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>2009/0245449</doc-number>
<kind>A1</kind>
<name>Umai et al.</name>
<date>20091000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>2010/0052747</doc-number>
<kind>A1</kind>
<name>Sugano et al.</name>
<date>20100300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>327157</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00018">
<document-id>
<country>US</country>
<doc-number>2010/0213991</doc-number>
<kind>A1</kind>
<name>Fukuda</name>
<date>20100800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>327117</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00019">
<document-id>
<country>US</country>
<doc-number>2010/0283549</doc-number>
<kind>A1</kind>
<name>Wang</name>
<date>20101100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>331 34</main-classification></classification-national>
</us-citation>
<us-citation>
<nplcit num="00020">
<othercit>Toifl et al., A 72Mw 0.03MM<sup>2 </sup>Inductorless 40Gb/s CDR in 65nm SOI CMOS, 2007 IEEE International Solid-State Circuits Conference, Digest of Technical Papers (2007) p. 226-227 and 598.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>9</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>375215</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375219</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375259</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375286</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375294</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375316</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375327</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375354</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375371</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375373</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375376</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>15</number-of-drawing-sheets>
<number-of-figures>15</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20120051480</doc-number>
<kind>A1</kind>
<date>20120301</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Usugi</last-name>
<first-name>Tatsunori</first-name>
<address>
<city>Inagi</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Hamano</last-name>
<first-name>Daisuke</first-name>
<address>
<city>Hachioji</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Usugi</last-name>
<first-name>Tatsunori</first-name>
<address>
<city>Inagi</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Hamano</last-name>
<first-name>Daisuke</first-name>
<address>
<city>Hachioji</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Miles &#x26; Stockbridge P.C.</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Hitachi, Ltd.</orgname>
<role>03</role>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Singh</last-name>
<first-name>Hirdepal</first-name>
<department>2631</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">In a phase locked loop, frequency-divided clocks each of which is given a phase difference of at least one cycle of a feedback clock are inputted to a first phase comparator and a second phase comparator, respectively, which are made to perform phase comparison with a reference clock. Then, outputs of the first and second phase comparators are weighted by a result of the phase comparison of a receive signal and the feedback clock, and phase adjustment of the feedback clock is phase adjusted using the weighted outputs. Thereby, it is possible to lower a frequency of the reference clock and consequently to suppress power consumption.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="168.91mm" wi="263.74mm" file="US08625730-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="263.82mm" wi="173.82mm" orientation="landscape" file="US08625730-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="237.24mm" wi="163.58mm" orientation="landscape" file="US08625730-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="256.03mm" wi="184.57mm" orientation="landscape" file="US08625730-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="205.15mm" wi="163.58mm" orientation="landscape" file="US08625730-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="261.70mm" wi="175.85mm" orientation="landscape" file="US08625730-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="273.98mm" wi="175.85mm" orientation="landscape" file="US08625730-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="276.69mm" wi="176.53mm" orientation="landscape" file="US08625730-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="256.37mm" wi="163.83mm" orientation="landscape" file="US08625730-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="278.13mm" wi="181.95mm" orientation="landscape" file="US08625730-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="264.50mm" wi="192.19mm" orientation="landscape" file="US08625730-20140107-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="264.50mm" wi="192.87mm" orientation="landscape" file="US08625730-20140107-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="276.69mm" wi="187.45mm" orientation="landscape" file="US08625730-20140107-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00013" num="00013">
<img id="EMI-D00013" he="268.31mm" wi="186.18mm" orientation="landscape" file="US08625730-20140107-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00014" num="00014">
<img id="EMI-D00014" he="272.63mm" wi="192.87mm" orientation="landscape" file="US08625730-20140107-D00014.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00015" num="00015">
<img id="EMI-D00015" he="250.19mm" wi="175.85mm" orientation="landscape" file="US08625730-20140107-D00015.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">CLAIM OF PRIORITY</heading>
<p id="p-0002" num="0001">The present application claims priority from Japanese patent application JP 2010-195282 filed on Sep. 1, 2010, the content of which is hereby incorporated by reference into this application.</p>
<heading id="h-0002" level="1">FIELD OF THE INVENTION</heading>
<p id="p-0003" num="0002">The present invention relates to a phase locked loop, a CDR circuit, and a receiving circuit.</p>
<heading id="h-0003" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0004" num="0003">The phase locked loop is used in order to generate a signal that synchronizes with an input signal. For example, a receiving part of serial data in serial transmission uses the clock and data recovery (CDR) circuit in order to take the received data in a register, and the CDR circuit uses a phase locked loop that has a clock generation circuit having a frequency almost equal to a receiving data rate and being capable of adjusting, its phase by a control signal and a phase comparator for comparing phases of the data and a generated clock and outputting a phase error, and generates a clock synchronizing with the data by controlling the clock generation circuit so that a phase error signal outputted from the phase comparator may be minimized.</p>
<p id="p-0005" num="0004">Regarding the phase locked loop, US2009/0245449 discloses a technology that, having a frequency synthesizer for multiplying a reference clock inputted from the outside and a phase interpolator for generating a clock that is phase interpolated by the output, generates a synchronizing clock suitable for taking in input serial data by controlling an interpolated value of the phase interpolator according to a phase comparison result between the input serial data and an output clock of the phase interpolator. Moreover, Thomas Toifl et al., &#x201c;A 72 mW 0.03 mm<sup>2 </sup>Inductorless 40 Gbps CDR in 65 nm SOI CMOS,&#x201d; 2007 IEEE International Solid-State Circuits Conference, DIGEST OF TECHNICAL PAPERS (2007) p. 226 discloses a technology that, having a PLL for generating a clock synchronized in phase with a reference clock inputted from the outside and a voltage controller for controlling a voltage value inputted to the voltage controlled oscillator that constitutes the PLL, generates a synchronizing clock suitable for taking in serial data by controlling a voltage of the voltage controller according to the phase comparison result between the input serial data and the generated clock.</p>
<heading id="h-0004" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0006" num="0005">In recent years, higher speed of a phase comparison circuit is being desired. For example, in serial transmissions, power consumption poses a problem with speed-enhancement of operating frequencies and an increase in the number of serial channels. However, with a technology disclosed in US2009/0245449, since a high-speed clock that a frequency synthesizer created by multiplication of a clock is distributed, the power consumption also becomes larger with increasing operating frequency. Moreover, with the technology disclosed by Thomas Toifl et al, &#x201c;A 72 mW 0.03 mm<sup>2 </sup>Inductorless 40 Gbps CDR in 65 nm SOI CMOS,&#x201d; 2007 IEEE International Solid-State Circuits Conference, DIGEST OF TECHNICAL PAPERS (2007) p. 226, since a frequency of the reference clock inputted from the outside becomes larger with increasing operating frequency, the power consumption becomes large.</p>
<p id="p-0007" num="0006">The invention of this application has an object to provide a phase locked loop capable of suppressing the power consumption.</p>
<p id="p-0008" num="0007">An outline of a representative aspect among aspects of the invention disclosed in this application is as shown below.</p>
<p id="p-0009" num="0008">The phase locked loop according to one aspect of the present invention has, in order to perform phase locking between a receive signal and a feedback clock: a voltage controlled oscillator for generating the feedback clock; frequency divider for generating a first frequency-divided clock and a second frequency-divided clock from the feedback clock; a first phase comparator to which the reference clock and the first frequency-divided clock are inputted; a second phase comparator to which the reference clock and the second frequency-divided clock are inputted; and a third phase comparator to which the feedback clock and the receive signal are inputted. Between the first frequency-divided clock and the second frequency-divided clock, a phase difference of at least one cycle of the feedback clock is given, and an output of the first phase comparator and an output of the second phase comparator are weighted based on an output of the third phase comparator and are inputted to the voltage controlled oscillator.</p>
<p id="p-0010" num="0009">The phase locked loop of the present invention is capable of suppressing the power consumption by making the frequency of the reference clock lower than a frequency of the receive signal.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram showing an embodiment of a phase locked loop and a CDR circuit of the present invention.</p>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 2</figref> is a block diagram showing an embodiment of a receiving circuit of the present invention.</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 3</figref> is a block diagram showing an embodiment of a phase frequency comparator used in the embodiment of the phase locked loop of the present invention.</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 4</figref> is a diagram showing an example of a charge pump used in the embodiment of the phase locked loop of the present invention.</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 5</figref> is a diagram showing an example of a circuit block of an LSI equipped with a high-speed serial interface in the case where the phase locked loop of the present invention is not applied.</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 6</figref> is a diagram showing an example of the circuit block of the LSI equipped with the high-speed serial interface in the case where the phase locked loop of the present invention is applied.</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 7</figref> is a diagram showing an operation of an example of a phase comparator used in the embodiment of the phase locked loop of the present invention.</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 8</figref> is a diagram showing an operation of an example of the charge pump used in the embodiment of the phase locked loop of the present invention.</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 9</figref> is a diagram showing an example of an integrator and a frequency divider used in the embodiment of the phase locked loop of the present invention.</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 10</figref> is a diagram showing an operation of the embodiment of the phase locked loop of the present invention.</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 11</figref> is a diagram showing the operation of the embodiment of the phase locked loop of the present invention.</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 12</figref> is a diagram showing the operation of the embodiment of the phase locked loop of the present invention.</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 13</figref> is a diagram showing the operation of the embodiment of the phase locked loop of the present invention.</p>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 14</figref> is a diagram showing the operation of the embodiment of the phase locked loop of the present invention.</p>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. 15</figref> is a diagram showing the operation of the embodiment of the phase locked loop of the present invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0006" level="1">DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS</heading>
<p id="p-0026" num="0025">Hereinafter, the present invention will be described in detail based on embodiments.</p>
<p id="h-0007" num="0000">First Embodiment</p>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 1</figref> shows a block diagram of a CDR circuit <b>102</b> equipped with a phase locked loop <b>101</b> as an embodiment of the present invention. A reference clock <b>103</b> serving as a reference clock and receive data <b>104</b> that is a receive signal are inputted to the CDR circuit <b>102</b>. The phase locked loop <b>101</b> that the CDR circuit <b>102</b> has is equipped with a voltage controlled oscillator <b>106</b> for generating a feedback clock <b>105</b>, a frequency divider <b>110</b> for generating a first frequency-divided clock (an advanced frequency-divided clock) <b>107</b> and a second frequency-divided clock (an delayed frequency-divided clock) <b>108</b> from the feedback clock <b>105</b>, a first phase frequency comparator <b>111</b> to which the reference clock <b>103</b> and the first frequency-divided clock <b>107</b> are inputted, a second phase frequency comparator <b>112</b> to which the reference clock <b>103</b> and the second frequency-divided clock <b>108</b> are inputted, and a phase comparator <b>113</b> to which the feedback clock <b>105</b> and the receive data <b>104</b> are inputted. Incidentally, in this embodiment, although the first phase frequency comparator and the second phase frequency comparator were used as the phase comparator, these were introduced so that the frequency comparator used for performing a frequency comparison operation prior to a phase comparison operation of the phase locked loop <b>101</b> could be used as a phase comparator, as will be described later. Therefore, a frequency comparator maybe separately provided for the frequency comparison operation. For the phase comparison operation of the present invention, the first phase frequency comparator <b>111</b> and the second phase frequency comparator <b>112</b> may be the phase comparators, respectively.</p>
<p id="p-0028" num="0027">An output of the first phase frequency comparator <b>111</b> is connected to an input of a charge pump <b>114</b>. An output of the second phase frequency comparator <b>112</b> is connected to an input of a charge pump <b>115</b>. Outputs of the charge pumps <b>114</b> and <b>115</b> are connected to a low pass filter <b>116</b> and its output is inputted to the voltage controlled oscillator <b>106</b> as a frequency control voltage <b>117</b>.</p>
<p id="p-0029" num="0028">Between the first frequency-divided clock <b>107</b> and the second frequency-divided clock <b>108</b>, a phase difference of at least one cycle of the feedback clock <b>105</b> is given. As will be described later, since the phase difference is expressed with a finite number of bits and is used for digital control, in the case where the phase difference of one cycle is given, phase adjustment can be performed more finely than in the case where the phase difference larger than it is given, which is advantageous for improvement of phase accuracy; therefore, the phase difference shall be the phase difference of one cycle in this embodiment. In this embodiment, the first frequency-divided clock <b>107</b> advances in phase from the second frequency-divided clock <b>108</b>. With the above configuration, the phase locked loop <b>101</b> has configurations of two frequency synthesizers each of which synthesizes with the same frequency at a different phase.</p>
<p id="p-0030" num="0029">The phase comparator <b>113</b> outputs a phase difference between the receive data <b>104</b> and the feedback clock <b>105</b> as a digital signal <b>118</b> expressed in a multibit form. As a concrete circuit, there can be enumerated a bang-bang type circuit with a binary expression and a linear phase comparator that expresses phase difference information with multivalues. The digital signal <b>118</b> is inputted to a digital integrator <b>119</b>, which integrates phase difference information from the phase comparator <b>113</b> and varies output currents of the charge pumps <b>114</b> and <b>115</b> discretely. Here, the charge pump <b>114</b> is added with an inversion logic so that the charge pumps <b>114</b> and <b>115</b> may operate exclusively to an output of the integrator <b>119</b>. Thereby, the output of the first phase frequency comparator <b>111</b> and the output of the second phase frequency comparator <b>112</b> are weighted based on an output of the phase comparator <b>113</b>, and the weighted outputs are inputted to the voltage controlled oscillator <b>106</b>. Moreover, an overflow signal <b>120</b> and an underflow signal <b>121</b> of the integrator <b>119</b> are inputted to the frequency divider <b>110</b>.</p>
<p id="p-0031" num="0030">Based on the output of the phase comparator <b>113</b>, namely, the phase difference between the receive data <b>104</b> and the feedback clock <b>105</b>, the phase locked loop <b>101</b> can automatically perform the phase adjustment of the feedback clock <b>105</b> through frequency control of the voltage controlled oscillator <b>106</b> by weighting respective outputs of phase comparison results of the first phase frequency comparator <b>111</b> for comparing phases of the advanced frequency-divided clock <b>107</b> and the reference clock <b>103</b> and the second phase frequency comparator <b>112</b> for comparing phases of the delayed frequency-divided clock <b>108</b> and the reference clock <b>103</b>, and outputting them to the voltage controlled oscillator <b>106</b>. Then, the CDR circuit <b>102</b> becomes able to take in data with a flip-flop <b>122</b> that inputs therein the receive data <b>104</b> and the feedback clock <b>105</b>. At this time, since there is no necessity of making a frequency of the reference clock <b>103</b> comparable to a frequency of the receive data <b>104</b>, the reference clock <b>103</b>, for example, of about 100 MHz can be set for the input of the receive data <b>104</b> of a few GHz. Thus, since the frequency of the reference clock <b>103</b> can be made lower than the frequency of the receive data <b>104</b>, it is possible to suppress power consumption of the phase locked loop <b>101</b> and the CDR circuit <b>102</b>.</p>
<p id="p-0032" num="0031">A reset signal <b>123</b> inputted to the integrator <b>119</b> and the selection signal <b>124</b> inputted to the second phase frequency comparator <b>112</b> are control signals used for operations before the phase locked loop <b>101</b> enters into the phase comparison operation as will be described later.</p>
<p id="p-0033" num="0032">Next, an embodiment and an operation of a circuit configuration of each block will be explained below. <figref idref="DRAWINGS">FIG. 3</figref> shows an embodiment of circuits of the first phase frequency comparator <b>111</b> and the second phase frequency comparator <b>112</b>. While the reference clock <b>103</b> is used as a common input, the advanced frequency-divided clock <b>107</b> is inputted to the first phase frequency comparator <b>111</b> and the delayed frequency-divided clock <b>108</b> is inputted to the second phase frequency comparator <b>112</b>.</p>
<p id="p-0034" num="0033">The phase frequency comparator <b>111</b> inputs therein the reference clock <b>103</b> and a selection signal <b>301</b> and its outputs is equipped with a flip-flop <b>303</b> connected to a selection signal port of a selector <b>305</b>. The phase frequency comparator <b>112</b> inputs therein the reference clock <b>103</b> and a selection signal <b>302</b> and its outputs is equipped with a flip-flop <b>304</b> connected to a selection signal port of a selector <b>306</b>. Therefore, the phase frequency comparator <b>112</b> is configured to be able to switch the outputs of the selectors <b>305</b> and <b>306</b> to either of the clock inputs <b>107</b> and <b>108</b> or the ground, respectively, in synchronization with the reference clock <b>103</b>. A flip-flop constituting the second phase frequency comparator <b>112</b> is connected to selection signal ports of selectors <b>307</b> and <b>308</b> each for switching the output and the ground of the second phase frequency comparator <b>112</b>. The first phase frequency comparator <b>111</b> is configured so that the advanced frequency-divided clock <b>107</b> may be always selected by fixing the selection signal <b>301</b> to a power supply and is designed to have the same configuration as that of the second phase frequency comparator. This is for improving a phase equalizing accuracy over manufacture variation by making the circuit symmetrical together with the delay dummies <b>309</b> and <b>310</b>.</p>
<p id="p-0035" num="0034">Moreover, the first phase frequency comparator <b>111</b> has a latch <b>311</b> that uses the reference clock <b>103</b> having passed through the delay dummy <b>309</b> as a clock input and uses the power supply as a data input, a latch <b>312</b> that uses the output of the selector <b>305</b> as a clock input and uses the power supply as a data input, and an AND circuit <b>313</b> for resetting the latches <b>311</b> and <b>312</b> in response to the outputs of the latches <b>311</b> and <b>312</b>, wherein the output of the latch <b>311</b> is outputted as a first up signal <b>315</b> through a delay dummy <b>314</b>, and the output of the latch <b>312</b> is outputted as a first down signal <b>317</b> through a delay dummy <b>316</b>.</p>
<p id="p-0036" num="0035">The second phase frequency comparator <b>112</b> has a latch <b>318</b> that uses the reference clock <b>103</b> having passed through the delay dummy <b>310</b> as a clock input and uses the power supply as a data input, a latch <b>319</b> that uses the output of the selector <b>306</b> as a clock input and uses the power supply as a data input, and an AND circuit <b>320</b> for resetting the latches <b>318</b> and <b>319</b> in response to the outputs of the latches <b>318</b> and <b>319</b>, wherein the output of the latch <b>318</b> is outputted as a second up signal <b>321</b> through the selector <b>307</b>, and the output of the latch <b>319</b> is outputted as a second down signal <b>322</b> through the selector <b>308</b>. Here, the delay dummies <b>314</b> and <b>316</b> were provided in order to improve the phase equalizing accuracy over the manufacture variation by making the circuit symmetrical.</p>
<p id="p-0037" num="0036">The first up signal <b>315</b> and the first down signal <b>317</b> are inputted to the first charge pump <b>114</b>. The second up signal <b>321</b> and the second down signal <b>322</b> are inputted to the second charge pump <b>115</b>.</p>
<p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. 7</figref> shows operation timings of the phase frequency comparators <b>111</b> and <b>112</b>. A frequency comparison operation <b>707</b> when the frequencies are different and a phase comparison operation <b>708</b> when the frequency is the same but phases are different are shown in <figref idref="DRAWINGS">FIG. 7</figref>.</p>
<p id="p-0039" num="0038">First, the frequency comparison operation <b>707</b> will be explained. In the case where the frequency of the reference clock <b>103</b> is high compared to the frequency of the frequency-divided clock, since the latches <b>311</b> and <b>313</b> are clocked with a larger number of clocks than the latches <b>312</b> and <b>318</b>, the larger the frequency difference, the longer the output time of the frequency division ratio up signal becomes, as shown, by a pattern <b>701</b>. On the other hand, in the case where the frequency of the reference clock <b>103</b> is lower than the frequency of the frequency-divided clock, the larger the frequency difference, the longer the output time of the frequency division ratio down signal becomes, as shown by a pattern <b>702</b>.</p>
<p id="p-0040" num="0039">Next, the phase comparison operation <b>708</b> will be explained. As shown by patterns <b>703</b> and <b>705</b>, in the phase comparison operation, a pulse with a duration proportional to the phase difference is outputted, and two kinds of detection results are outputted for the same phase relationship. That is, a small delay and a large advanced frequency-divided clock, or a large delay and a large advanced frequency-divided clock belong to the same event, and differ in that whether a phase edge at which the phase comparison is performed is near or far in one cycle. Generally, the frequency synthesizer performs an operation that immediately after operation start, performs frequency comparison, and when the frequencies agree with each other, shifts to the phase comparison to reduce the phase difference. Since between which phase edges the phase difference is detected at the time of the phase comparison depends on states of the latches <b>311</b> and <b>312</b> when the frequency comparison changes to the phase comparison, it is not determinate. Then, in the phase locked loop <b>101</b>, in order that two of the first and second phase frequency comparators perform the phase comparison operation on the same phase edge, it performs a control that will be described later using <figref idref="DRAWINGS">FIG. 11</figref>.</p>
<p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. 4</figref> shows embodiments of circuits of the first charge pump. <b>114</b> and the second charge pump <b>115</b> in the case where a bus width of the integrator output signal <b>125</b> is three. Bias voltages <b>407</b> and <b>408</b> are supplied to a MOS gate, which constitutes a current source, and charging and discharging by a current output <b>409</b> that is inputted to the voltage controlled oscillator <b>106</b> through the low pass filter <b>116</b> are switched in response to an up/down signal <b>410</b> inputted from the first phase frequency comparator <b>111</b> or the second phase frequency comparator <b>112</b>. Between the up/down signal <b>410</b> and a switch <b>412</b>, an AND circuit <b>405</b> and a NAND circuit <b>406</b> are connected, and are configured so as to, if a multibit digital signal <b>411</b> inputted from the outside is logically 1, enter into an operation, and if it is 0, enter into a non-operation. Moreover, in the phase locked loop <b>101</b>, since a binary expression is used as the multibit digital signal in order to suppress increases in circuit scale and electric power of the operators etc., the size of the charge pump is made to increase by powers of 2 using the size of bit <b>0</b> as a unit against an increase in the number of input bits.</p>
<p id="p-0042" num="0041"><figref idref="DRAWINGS">FIG. 8</figref> shows a characteristic of a charged/discharged charge quantity as a function of an up/down pulse width for a case where the bus width of the multibit digital signal is three. The diagram shows that a charged/discharged charge quantity from charge pump <b>114</b> and <b>115</b> varies continuously to the input up/down pulse width while it varies discretely to different digital values.</p>
<p id="p-0043" num="0042"><figref idref="DRAWINGS">FIG. 9</figref> shows embodiments of circuits of the integrator <b>119</b> and the frequency divider <b>110</b> for a case where the phase difference digital signal input <b>118</b> is two bits, an integrated value output is three bits, and a frequency division ratio is 1/12. A feedback clock <b>901</b> corresponds to the feedback clock <b>105</b> of <figref idref="DRAWINGS">FIG. 1</figref>, a delayed frequency-divided clock <b>902</b> corresponds to the delayed frequency-divided clock <b>108</b> of <figref idref="DRAWINGS">FIG. 1</figref>, and an advanced frequency-divided clock <b>903</b> corresponds to the advanced frequency-divided clock <b>107</b> of <figref idref="DRAWINGS">FIG. 1</figref>, respectively.</p>
<p id="p-0044" num="0043">The feedback clock <b>901</b> is connected to a variable frequency divider <b>904</b>, and the variable frequency divider <b>904</b> outputs a variable frequency-divided clock <b>911</b> to a 1/4 frequency divider <b>905</b> and a frequency division ratio control pulse generating part <b>909</b> in response to input of a frequency division ratio down signal <b>912</b> and a frequency division ratio up signal <b>913</b>. An output of the 1/4 frequency divider <b>905</b> is connected to a shift register <b>906</b> operating at a timing of the feedback clock <b>901</b>, which outputs the advanced frequency-divided clock <b>903</b> and the delayed frequency-divided clock <b>902</b> both of which have one cycle difference which is based on a period of the feedback clock <b>901</b>. The delayed frequency-divided clock <b>902</b> is inputted to an adder-subtractor <b>907</b> and the overflow/underflow determination part <b>908</b>, serving as an operation clock in each component. The adder-subtractor <b>907</b> is a circuit that inputs therein a 2-bit phase difference signal <b>919</b> expressed by a digital value and an advance/delay signal <b>920</b> for inputting the ground level at the time of advancement control or the power supply level at the time of delay control, and outputs a 3-bit integrated value <b>921</b>. This embodiment exemplified an adder-subtractor in which full adders are ladder-connected. Moreover, when a reset signal <b>918</b> is at a power supply level, as a reset operation, the integrated value output is set to four that is a logically median value, that is: the integrated value [2] is fixed to the power supply level, the integrated value [1] is fixed to the ground level, and the integrated value [0] is fixed to the ground level.</p>
<p id="p-0045" num="0044"><figref idref="DRAWINGS">FIG. 15</figref> shows the operating timing charts of the overflow/underflow determination part <b>908</b>, and the frequency division ratio control pulse generating part <b>909</b>. The phase comparator <b>113</b> outputs the ground level as the advance/delay signal <b>920</b> when the feedback clock <b>105</b> is delayed to the receive data <b>104</b> and the power supply level as the advance/delay signal <b>920</b> when the feedback clock <b>105</b> is advanced from the receive data <b>104</b>, and outputs the phase difference signal <b>919</b> having a 2-bit binary value as a gradation of the phase difference.</p>
<p id="p-0046" num="0045">The adder-subtractor <b>907</b> performs an addition operation when the advance/delay signal <b>920</b> is at ground level, and performs a subtraction operation when the advance/delay signal <b>920</b> is at the power supply level. In the case <b>1501</b> where the integrated values are all at the power supply level and in addition when addition of a value more than or equal to unity is performed, it outputs an overflow signal <b>1502</b> during the operation clock, i.e., during one cycle of a 1/12 frequency-divided clock <b>910</b>. Moreover, in the case <b>1503</b> where the integrated values are all at ground level and in addition when subtraction of a value more than or equal to unity is performed, it outputs an underflow signal <b>1504</b> during the operation clock, i.e., during one cycle of the 1/12 frequency-divided clock <b>910</b>. An overflow signal <b>922</b> and an underflow signal <b>923</b> are outputted to the frequency division ratio control pulse generating part <b>909</b>, which is made to generate pulses <b>1505</b> and <b>1506</b> of one cycle width of a 1/3 frequency-divided clock <b>911</b>.</p>
<p id="p-0047" num="0046">The ring counters constitute the variable frequency divider <b>904</b>, which generates the variable frequency-divided clock <b>911</b> by the following procedures: when the frequency division ratio down signal <b>912</b> is at the power supply level and the frequency division ratio up signal <b>913</b> at ground level, the feedback clock <b>901</b> is counted three times; when the frequency division ratio down signal <b>912</b> and the frequency division ratio up signal <b>913</b> are at the power supply level, the feedback clock <b>901</b> is counted four times; and when the frequency division ratio down signal <b>912</b> is at ground level, the feedback clock <b>901</b> is counted two times. Usually, since the frequency division ratio down signal <b>912</b> is at the power supply level and the frequency division ratio up signal <b>913</b> is at ground level and since the overflow signal <b>922</b> and the underflow signal <b>923</b> are at ground level, the variable frequency divider <b>904</b> operates as a 1/3 frequency divider. When overflow occurs in an integrator <b>925</b>, it operates as a 1/4 frequency divider, and when underflow occurs in the integrator <b>925</b>, it operates as a 1/2 frequency divider.</p>
<p id="p-0048" num="0047">Next, operations and controls of the phase locked loop <b>101</b> and the CDR circuit <b>102</b> will be explained below. Processes until the phase locked loop <b>101</b> generates an optimal clock for the CDR circuit <b>102</b> to take in the receive data <b>104</b> with the flip-flop <b>122</b> are shown by the following timing diagrams in order: a frequency locking process of the feedback clock <b>105</b> to the reference clock <b>103</b> in <figref idref="DRAWINGS">FIG. 10</figref>; a phase locking process of the feedback clock <b>105</b> to the reference clock <b>103</b> in <figref idref="DRAWINGS">FIG. 11</figref>; and a phase locking process to the receive data <b>104</b> in <figref idref="DRAWINGS">FIG. 12</figref>.</p>
<p id="p-0049" num="0048">First, in the frequency locking process shown in <figref idref="DRAWINGS">FIG. 10</figref>, as shown in <b>1001</b>, since the reset signal <b>123</b> of the integrator <b>119</b> is set to a reset state and the digital integrated value output of the integrator <b>119</b> is fixed to a logically median value, the output of the phase comparator <b>113</b> does not affect the operation for controlling the feedback clock <b>105</b> (<b>1004</b>). Moreover, since the output of the integrator <b>119</b> outputs the median value, an output ratio of the first charge pump <b>114</b> and the second charge pump <b>115</b> is being fixed to 3:4 as an exclusive ratio to a total value 7, as shown in <b>1002</b>. Furthermore, the output of the phase frequency comparator <b>112</b> is stopped by grounding the selection signal <b>124</b>, as shown in <b>1003</b>, whereby the frequency and phase adjustment of the advanced frequency-divided clock <b>107</b> and the reference clock <b>103</b> inputted to the phase frequency comparator <b>111</b> become effective. In this case, since its circuit configuration is the same as that of a common frequency synthesizer making a single control loop and with the feedback clock <b>105</b> of a low frequency, a lot of the frequency up signals are outputted by the frequency comparison operation of the phase frequency comparator <b>111</b>, and the reference clock <b>103</b> and the advanced frequency-divided clock <b>107</b> are frequency locked by a frequency acquisition operation (<b>1005</b>).</p>
<p id="p-0050" num="0049">Next, in the phase locking process of the feedback clock <b>105</b> to the reference clock <b>103</b> of <figref idref="DRAWINGS">FIG. 11</figref>, the operation of the phase frequency comparator <b>111</b> automatically shifts from the frequency comparison to the phase comparison, and the reference clock <b>103</b> and the advanced frequency-divided clock <b>107</b> are phase locked (<b>1101</b>). After that, when the selection signal <b>124</b> is set to the power supply level, as shown in <b>1102</b>, the selection signal is switched inside the phase frequency comparator <b>112</b> in synchronization with the reference clock, whereby the phase frequency comparator <b>112</b> starts to input therein the delayed frequency-divided clock <b>108</b> and at the same time starts to output the up/down signal thereof (<b>1103</b>). Since only the reference clock <b>103</b> is inputted to the phase frequency comparator <b>112</b> immediately before the delayed frequency-divided clock <b>108</b> is inputted, only the flip-flop connected to the frequency division ratio up signal output is in a state of outputting the power supply level; therefore, it starts to output the frequency division ratio up signal at the same time of input of the reference clock <b>103</b>, as shown in <b>1103</b>. After that, with the input of the delayed frequency-divided clock <b>108</b>, the flip-flop connected to the up/down output will be reset. Since the phase of the feedback clock <b>105</b> advances by the up signal generated by the above-mentioned mechanism, the advanced/delayed frequency-divided clocks also advance in phase. Since a relationship between the advanced frequency-divided clock <b>107</b> and the reference clock <b>103</b> becomes a timing that the frequency-divided clock advances, the phase frequency comparator <b>111</b> outputs only a down pulse, whereas since a relationship between the delayed frequency-divided clock <b>108</b> and the reference clock <b>103</b> becomes a timing that the frequency-divided clock delays, the phase frequency comparator <b>112</b> outputs only an up pulse. At this time, since there is a difference of one cycle of the feedback clock <b>105</b> between the advanced frequency-divided clock <b>107</b> and the delayed frequency-divided clock <b>108</b>, a total sum of an up pulse output time and a down pulse output time described above agree with one cycle of the feedback clock <b>105</b>. Since the frequency synthesizer becomes stable in a state where the charged charge quantity and the discharged charge quantity flowing into the frequency control voltage <b>117</b> node are balanced, it locks the feedback clock <b>105</b> so that a product of a down pulse width of the phase frequency comparator <b>111</b> and a current of the charge pump <b>114</b> and a product of an up pulse width of the phase frequency comparator <b>112</b> and a current of the charge pump <b>115</b> may be balanced (<b>1104</b>). That is, the down pulse width of the phase frequency comparator <b>111</b> becomes 4/7 cycle and the up pulse width of the phase frequency comparator <b>112</b> becomes 3/7 cycle (<b>1105</b>).</p>
<p id="p-0051" num="0050">Next, in a phase locking process to the receive data of <figref idref="DRAWINGS">FIG. 12</figref>, the reset signal <b>123</b> is canceled (<b>1201</b>), the phase difference between the receive data <b>104</b> and the feedback clock <b>105</b> is detected by the phase comparator <b>113</b>, and its result is reflected in an output value of the integrator <b>119</b>. Here, a situation where the feedback clock <b>105</b> is delayed as the phase difference between the receive data <b>104</b> and the feedback clock <b>105</b> is illustrated. As shown in <b>1202</b>, if the phase difference between the receive data <b>104</b> and the feedback clock <b>105</b> is not detected, the down pulse width of the phase frequency comparator <b>111</b> and the up pulse width of the phase frequency comparator <b>112</b> will maintain 4:3 (<b>1203</b>). When one up in a digital value is detected as the phase difference between the receive data <b>104</b> and the feedback clock <b>105</b> (<b>1204</b>), the output of the integrator <b>119</b> changes from four to five by an addition operation after one cycle. Therefore, the output ratio of the charge pump <b>114</b> and the charge pump <b>115</b> becomes 2:5 (<b>1205</b>). However, since a relationship between the reference clock <b>103</b> and the feedback clock <b>105</b> does not change (<b>1206</b>), a comparison result of the first and second phase frequency comparators occurring after the integration operation shows that a ratio of the down pulse width of the phase frequency comparator <b>111</b> and the up pulse width of the phase frequency comparator <b>112</b> still remains to be 4:3 (<b>1207</b>). As a result, a ratio of a product of the down pulse width of the phase frequency comparator <b>111</b> and the current of the charge pump <b>114</b> and a product of the up pulse width of the phase frequency comparator <b>112</b> and the current of the charge pump <b>115</b> becomes 8:5, which indicates excess charging (<b>1208</b>), and by a frequency of the voltage controlled oscillator <b>106</b> increasing, the advancement control is performed on the feedback clock <b>105</b>. As a result of the control being performed, when the feedback clock <b>105</b> becomes advanced from the receive data <b>104</b>, the down signal is outputted from the phase comparator <b>113</b> as a digital signal, the state becomes excess discharging, contrary to the above-mentioned phenomenon, and by the frequency of the voltage controlled oscillator <b>106</b> decreasing, the delay control is performed on the feedback clock. Therefore, by repeating the advancement control and the delay control based on the phase difference between the receive data <b>104</b> and the feedback clock <b>105</b>, it becomes possible to lock the phase of the feedback clock to a phase variation of the receive data <b>104</b> (<b>1209</b>), and to take in correct data with the flip-flop <b>122</b>. Incidentally, since the charging and the discharging are balanced in a locking state, the ratio of the down pulse width of the phase frequency comparator <b>111</b> and the up pulse width of the phase frequency comparator <b>112</b> agrees with the output ratio of the charge pump <b>115</b> and the charge pump <b>114</b>.</p>
<p id="p-0052" num="0051">As described above, based on the output of the phase comparator <b>113</b>, the phase locked loop <b>101</b> can automatically perform the phase adjustment of the feedback clock <b>105</b> to the receive data <b>104</b> through the frequency control of the voltage controlled oscillator <b>106</b> by weighting respective outputs of the phase comparison results of the first phase frequency comparator <b>111</b> for comparing the phases of the advanced frequency-locked clock <b>107</b> and the reference clock <b>103</b> and the second phase frequency comparator <b>112</b> for comparing the phases of the delayed frequency-locked clock <b>108</b> and the reference clock <b>103</b>, and outputting them to the voltage controlled oscillator <b>106</b>. Here, since the frequency of the reference clock can be made smaller than the frequency of the receive data as shown in the receive data and the reference clock of <figref idref="DRAWINGS">FIG. 12</figref>, even if the receive data has a higher speed, a lower power consumption of the phase locked loop and the CDR circuit can be attained by using a lower speed reference clock.</p>
<p id="p-0053" num="0052">Next, operations at the time of the overflow and the underflow of the integrated value output of the integrator <b>119</b> will be explained. First, <figref idref="DRAWINGS">FIG. 13</figref> shows a timing chart at the time of the overflow. When the integrator output is logically 7, namely, all the three bits are in a state of the power supply level (<b>1301</b>) and the phase of the feedback clock <b>105</b> is delayed to the receive data <b>104</b>, the phase comparator <b>113</b> outputs the up signal (<b>1302</b>). As a result, the integrator output produces the overflow, becoming logically zero, namely, it becomes a state where all the three bits are at ground level (<b>1303</b>). In this case, an addition rate of the charge pump <b>114</b> and the charge pump <b>115</b> varies from 0:7 to 7:0 (<b>1304</b>). At the time of the overflow, since the 1/12 frequency-divided clock changes to a 1/13 frequency-divided clock as the operation is shown in <figref idref="DRAWINGS">FIG. 15</figref> (<b>1305</b>), the phase timing of the frequency-divided clock will be delayed by one cycle which is based on a period of the feedback clock <b>105</b> in performing the phase comparison operation following later (<b>1306</b>). As a result, a situation where the charging and the discharging were balanced with a ratio of the down pulse width of the phase frequency comparator <b>111</b> and the up pulse width of the phase frequency comparator <b>112</b> of 7:0 and an output ratio of the charge pump <b>115</b> and the charge pump <b>114</b> of 7:0 changes to a situation where the charging and the discharging are balanced with a ratio of the down pulse width of the phase frequency comparator <b>111</b> and the up pulse width of the phase frequency comparator <b>112</b> of 0:7 and an output ratio of the charge pump <b>115</b> and the charge pump <b>114</b> of 0:7 (<b>1307</b>). Therefore, it operates satisfactorily also at the time of the overflow of the integrated value output.</p>
<p id="p-0054" num="0053">Similarly, <figref idref="DRAWINGS">FIG. 14</figref> shows a timing chart at the time of the underfloor. When the integrator output is logically zero, namely, all the three bits are in a state of the ground level (<b>1401</b>) and the phase of the feedback clock <b>105</b> is advanced from the receive data <b>104</b>, the phase comparator <b>113</b> outputs the frequency division ratio down signal (<b>1402</b>). As a result of this, the output of the integrator <b>119</b> produces the underflow and becomes logically seven, namely, all the three bits are in a state of the power supply level (<b>1403</b>). In this case, the addition rate of the charge pump <b>114</b> and the charge pump <b>115</b> changes from 7:0 to 0:7 (<b>1404</b>).</p>
<p id="p-0055" num="0054">At the time of the underflow, since the 1/12 frequency-divided clock changes to a 1/11 frequency-divided clock as the operation is shown in <figref idref="DRAWINGS">FIG. 15</figref> (<b>1405</b>), the phase timing of the frequency-divided clock will be advanced by one cycle from the feedback clock <b>105</b> in doing the phase comparison operation following later (<b>1406</b>). As a result, a situation where the charging and the discharging were balanced with a ratio of the down pulse width of the phase frequency comparator <b>111</b> and the up pulse width of the phase frequency comparator <b>112</b> of 0:7 and an output ratio of the charge pump <b>115</b> and the charge pump <b>114</b> of 0:7 changes to a situation where the charging and the discharging are balanced with a ratio of the down pulse width of the phase frequency comparator <b>111</b> and the up pulse width of the phase frequency comparator <b>112</b> of 7:0 and an output ratio of the charge pump <b>115</b> and the charge pump <b>114</b> of 7:0 (<b>1407</b>). Therefore, it operates satisfactorily even at the time of the underflow of the integrated value output.</p>
<p id="p-0056" num="0055">Generally, in the system of performing a serial transmission, a frequency deviation arises between the reference clock <b>103</b> and the receive data <b>104</b>. In order to correct the deviation, the integrator of the CDR circuit <b>102</b> always needs the up signal or down signal. As a result, although the overflow and the underflow will certainly occur, it operates satisfactorily by varying the frequency division ratio, as described above using <figref idref="DRAWINGS">FIG. 15</figref>.</p>
<p id="p-0057" num="0056">Moreover, in the phase locked loop <b>101</b> of this embodiment, since a follower control to the phase variation of target receive data that is to be phase locked is performed through the low pass filter <b>116</b> in the phase locking loop of the frequency synthesizer, the output of the voltage controlled oscillator is not phase modulated abruptly. Therefore, it is possible to prevent a malfunction of the phase locked loop <b>101</b> caused by disturbance or a noise.</p>
<p id="h-0008" num="0000">Second Embodiment</p>
<p id="p-0058" num="0057">In a second embodiment, an embodiment of a receiving circuit with a plurality of serial channels equipped with the CDR circuit <b>201</b> of the first embodiment will be explained.</p>
<p id="p-0059" num="0058"><figref idref="DRAWINGS">FIG. 2</figref> shows a configuration example of a receiving circuit <b>201</b> with a plurality of serial channels equipped with the phase locked loop <b>101</b> and the CDR circuit <b>102</b> of the first embodiment. The receiving circuit <b>201</b> has a clock buffer <b>203</b> for distributing the reference clock <b>202</b> and a receiving part <b>205</b> equipped with a plurality of serial channels <b>20</b> each mounting thereon the CDR circuit <b>102</b> operating at the reference clock <b>202</b> supplied from the outside.</p>
<p id="p-0060" num="0059">Since the CDR circuit <b>102</b> operates at the reference clock of a low speed compared to the receive data, the reference clock can be set to a low speed compared to the receive data, and thereby an increase in power consumption when distributing the reference clock <b>202</b> through the clock buffer <b>203</b> can be suppressed.</p>
<p id="h-0009" num="0000">Third Embodiment</p>
<p id="p-0061" num="0060">In a third embodiment, a phase locked loop for automatically correcting a steady phase error by inputting clocks having a steady phase difference as the receive data of the first embodiment.</p>
<p id="p-0062" num="0061">First, <figref idref="DRAWINGS">FIG. 5</figref> shows a circuit block diagram of an LSI <b>501</b> equipped with a high-speed serial interface that does not use the phase locked loop of the present invention examined by the inventors of this application. The LSI <b>501</b> has a receive buffer <b>505</b> and a transmit buffer <b>504</b> for exchanging serial data with the outside of the LSI <b>501</b>, a serial interface block <b>503</b> for converting high-speed serial data into low-speed parallel data, a logical block <b>502</b> for performing a logic calculation processing on the parallel data, FIFO's <b>506</b> and <b>507</b> each for adjusting a clock timing between the logical block <b>502</b> and the serial interface block <b>508</b> and transferring the parallel data, and a clock buffer <b>508</b> for distributing a reference clock to the logical block <b>502</b> and the serial interface block <b>508</b>.</p>
<p id="p-0063" num="0062">The logical block <b>502</b> is equipped with a frequency synthesizer <b>511</b> for generating an operation clock and flip-flops <b>509</b> and <b>510</b> for retaining data. The serial interface block <b>503</b> has a frequency synthesizer <b>514</b> for generating an operation clock, a CDR circuit <b>517</b> for generating the optimal clock for taking in the receive data, a deserializer <b>516</b> for converting the taken-in serial data into parallel data, a serializer <b>515</b> for converting the taken-in parallel data into serial data, and flip-flops <b>512</b> and <b>513</b> each for retaining data.</p>
<p id="p-0064" num="0063">Generally, the operation clock of the logical block <b>502</b> and the operation clock of the serial interface block <b>503</b> have a statistic phase difference, that is generated to the reference clocks inputted to the frequency synthesizers <b>511</b> and <b>514</b> due to a delay time generated at the buffer <b>508</b>. Since the above-mentioned delay depends on the manufacture variation etc., in transferring medium- to high-speed data between the logical block <b>502</b> and the serial interface block <b>503</b>, a circuit for automatically correcting the above-mentioned phase difference becomes necessary. Although the FIFO is generally used as such a circuit, the electric power and the area become larger because of an additional circuit.</p>
<p id="p-0065" num="0064">Next, <figref idref="DRAWINGS">FIG. 6</figref> shows a block diagram of an LSI <b>601</b> of this embodiment. In the LSI <b>601</b>, a frequency synthesizer of a serial interface block <b>603</b> is replaced with a circuit <b>614</b> that has on it the phase locked loop <b>101</b> of the first embodiment, which inputs therein a clock <b>606</b> of a logical block as the receive data <b>104</b>. In the circuit of the first embodiment, since the feedback clock <b>105</b> that is phase-locked to the receive data <b>104</b> is generated, a phase difference between the operation clock of a data taking-in side flip-flop <b>612</b> and the operation clock of a data-outputting side flip-flop <b>609</b> will be automatically corrected. In the case where the flip-flops <b>609</b> and <b>612</b> to be phase locked are placed being physically away from each other, it is possible to suppress an influence of a delay time difference. In the LSI <b>601</b> of this embodiment, since the additional circuit is unnecessary to the phase locked loop of the first embodiment, it is possible to reduce an area of the circuit in addition to an effect of electric power reduction.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A phase locked loop for phase locking a receive signal and a feedback clock, comprising:
<claim-text>a voltage controlled oscillator for generating the feedback clock;</claim-text>
<claim-text>a frequency divider for generating a first frequency-divided clock and a second frequency-divided clock from the feedback clock;</claim-text>
<claim-text>a first phase comparator to which a reference clock and the first frequency-divided clock are inputted;</claim-text>
<claim-text>a second phase comparator to which the reference clock and the second frequency-divided clock are inputted; and</claim-text>
<claim-text>a third phase comparator to which the feedback clock and the receive signal are inputted;</claim-text>
<claim-text>wherein there is a phase difference of at least one cycle of the feedback clock between the first frequency-divided clock and the second frequency-divided clock, and an output of the first phase comparator and an output of the second phase comparator are weighted based on an output of the third phase comparator and are inputted to the voltage controlled oscillator.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The phase locked loop according to <claim-ref idref="CLM-00001">claim 1</claim-ref>,
<claim-text>wherein a frequency of the reference clock is lower than a frequency of the receive signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The phase locked loop according to <claim-ref idref="CLM-00001">claim 1</claim-ref>,
<claim-text>wherein there is a phase difference of one cycle of the feedback clock between the first frequency-divided clock and the second frequency-divided clock.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The phase locked loop according to <claim-ref idref="CLM-00001">claim 1</claim-ref>,
<claim-text>wherein the weighted input to the voltage controlled oscillator is inputted through a low pass filter.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The phase locked loop according to <claim-ref idref="CLM-00001">claim 1</claim-ref>,
<claim-text>wherein the first phase comparator is a phase frequency comparator.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The phase locked loop according to <claim-ref idref="CLM-00001">claim 1</claim-ref>,
<claim-text>wherein the second phase comparator is a phase frequency comparator.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. A CDR circuit, comprising:
<claim-text>the phase locked loop according to <claim-ref idref="CLM-00001">claim 1</claim-ref>.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. A receiving circuit, comprising a plurality of serial channels,
<claim-text>wherein each of the serial channels has the CDR circuit according to <claim-ref idref="CLM-00007">claim 7</claim-ref>.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The receiving circuit according to <claim-ref idref="CLM-00008">claim 8</claim-ref>,
<claim-text>wherein a frequency of the reference clock is lower than a frequency of the receive signal. </claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
