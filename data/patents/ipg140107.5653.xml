<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08626754-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08626754</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13621042</doc-number>
<date>20120915</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<us-term-of-grant>
<disclaimer>
<text>This patent is subject to a terminal disclaimer.</text>
</disclaimer>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>17</main-group>
<subgroup>30</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>707723</main-classification>
<further-classification>707748</further-classification>
</classification-national>
<invention-title id="d2e51">Entity display priority in a distributed geographic information system</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>2005/0021415</doc-number>
<kind>A1</kind>
<name>Desai</name>
<date>20050100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>2005/0216186</doc-number>
<kind>A1</kind>
<name>Dorfman et al.</name>
<date>20050900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2005/0278311</doc-number>
<kind>A1</kind>
<name>Moore et al.</name>
<date>20051200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2011/0004591</doc-number>
<kind>A1</kind>
<name>Chen</name>
<date>20110100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707723</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2011/0184945</doc-number>
<kind>A1</kind>
<name>Das et al.</name>
<date>20110700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707724</main-classification></classification-national>
</us-citation>
</us-references-cited>
<number-of-claims>21</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>707723</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>707748</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>5</number-of-drawing-sheets>
<number-of-figures>5</number-of-figures>
</figures>
<us-related-documents>
<continuation>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>13030101</doc-number>
<date>20110217</date>
</document-id>
<parent-grant-document>
<document-id>
<country>US</country>
<doc-number>8290942</doc-number>
</document-id>
</parent-grant-document>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>13621042</doc-number>
</document-id>
</child-doc>
</relation>
</continuation>
<continuation>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>11548689</doc-number>
<date>20061011</date>
</document-id>
<parent-grant-document>
<document-id>
<country>US</country>
<doc-number>7933897</doc-number>
</document-id>
</parent-grant-document>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>13030101</doc-number>
</document-id>
</child-doc>
</relation>
</continuation>
<us-provisional-application>
<document-id>
<country>US</country>
<doc-number>60726505</doc-number>
<date/>
</document-id>
</us-provisional-application>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20130013621</doc-number>
<kind>A1</kind>
<date>20130110</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Jones</last-name>
<first-name>Michael T.</first-name>
<address>
<city>Los Altos</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>McClendon</last-name>
<first-name>Brian</first-name>
<address>
<city>Portola Valley</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Charaniya</last-name>
<first-name>Amin P.</first-name>
<address>
<city>Milpitas</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="004" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Ashbridge</last-name>
<first-name>Michael</first-name>
<address>
<city>Richmond</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Jones</last-name>
<first-name>Michael T.</first-name>
<address>
<city>Los Altos</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>McClendon</last-name>
<first-name>Brian</first-name>
<address>
<city>Portola Valley</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Charaniya</last-name>
<first-name>Amin P.</first-name>
<address>
<city>Milpitas</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="004" designation="us-only">
<addressbook>
<last-name>Ashbridge</last-name>
<first-name>Michael</first-name>
<address>
<city>Richmond</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Fenwick &#x26; West LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Google Inc.</orgname>
<role>02</role>
<address>
<city>Mountain View</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>To</last-name>
<first-name>Baoquoc N</first-name>
<department>2162</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A system for ranking geospatial entities is described. In one embodiment, the system comprises an interface for receiving ranking data about a plurality of geospatial entities and an entity ranking module. The module uses a ranking mechanism to generate place ranks for the geospatial entities based on the ranking data. Ranked entity data generated by the entity ranking module is stored in a database. The entity ranking module may be configured to evaluate a plurality of diverse attributes to determine a total score for a geospatial entity. The entity ranking module may be configured to organize ranked entity data into placemark layers.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="176.28mm" wi="240.88mm" file="US08626754-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="228.35mm" wi="149.61mm" file="US08626754-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="160.44mm" wi="146.98mm" file="US08626754-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="226.31mm" wi="128.52mm" file="US08626754-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="239.18mm" wi="177.88mm" file="US08626754-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="239.86mm" wi="175.26mm" orientation="landscape" file="US08626754-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">RELATED APPLICATIONS DATA</heading>
<p id="p-0002" num="0001">This application is a continuation of U.S. Application Serial No. 13/030,101, filed on Feb. 17, 2011, which is a continuation of U.S. Application Serial No. 11/548,689, filed on Oct. 11, 2006, which claims the benefit of the U.S. Provisional Application No. 60/726,505, filed on Oct. 12, 2005, all of which are hereby incorporated by reference in their entirety for all purposes.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">BACKGROUND</heading>
<p id="p-0003" num="0002">1. Field</p>
<p id="p-0004" num="0003">The invention relates to mapping systems, and more particularly, to techniques for prioritizing geographical entities for placement on geographical displays.</p>
<p id="p-0005" num="0004">2. Description of the Related Art</p>
<p id="p-0006" num="0005">A geographic information system (GIS) is a system for archiving, retrieving, and manipulating data that has been stored and indexed according to the geographic coordinates of its elements. The system generally can utilize a variety of data types, such as imagery, maps, and tables. Historically, GIS technology has been used for scientific and governmental investigations (e.g., to identify geographical areas adversely impacted by pollution or over-building), resource management (e.g., regional forestry observation), and development planning (e.g., suburban development of under-utilized geographic areas).</p>
<p id="p-0007" num="0006">More recently, GIS technology is being integrated into Internet-based mapping applications. Users can annotate digital map locations with placemarks (e.g., designated on the map with an icon or other graphic). Some placemarks allow the user to write a brief description relevant to the location marked by the placemark, while other placemarks allow the user to change the style of icons and/or labels associated with the placemark. However, in many instances, the number of available placemarks is significant.</p>
<p id="p-0008" num="0007">What is needed, therefore, are techniques for prioritizing which placemarks (as well as other map entities) to display on a GIS-based map.</p>
<heading id="h-0003" level="1">SUMMARY</heading>
<p id="p-0009" num="0008">The above need is met by techniques for generating prioritized entity data described herein.</p>
<p id="p-0010" num="0009">In an embodiment, a geographic information system (GIS) comprises information about a plurality of geospatial entities and is configured to prioritize the geospatial entities according to a ranking mechanism. The ranking mechanism uses data about a meta attribute of a geospatial entity to determine the geospatial entity's priority. The meta attribute may vary in different implementations but in one embodiment comprises the quality of information available about a geospatial entity.</p>
<p id="p-0011" num="0010">In another embodiment, a computer-implemented method can be used to rank geospatial entities. The method comprises several steps including receiving geospatial entity data, evaluating attributes of geospatial entities included in the received geospatial entity data, ranking the geospatial entities based on the evaluation, and storing the ranked geospatial entity data.</p>
<p id="p-0012" num="0011">Another embodiment of the present invention provides one or more machine-readable mediums (e.g., one or more compact disks, diskettes, servers, memory sticks, or hard drives) encoded with instructions, that when executed by one or more processors, cause the one or more processors to carry out a process for ranking geospatial entities. This process can be, for example, similar to or a variation of the methodologies described herein.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram of a GIS system with entity ranking capabilities in accordance with an embodiment of the invention.</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 2</figref> is a block diagram of the entity ranking module shown in <figref idref="DRAWINGS">FIG. 1</figref>, according to one embodiment of the present invention.</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 3</figref> illustrates a method for generating and providing prioritized entities in accordance with an embodiment of the invention.</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 4</figref> illustrates a method for requesting and receiving a map including prioritized placemarks in accordance with an embodiment of the invention.</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 5</figref> depicts a GIS map that includes prioritized placemarks in accordance with an embodiment of the invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<p id="p-0018" num="0017">The figures depict various embodiments of the present invention for purposes of illustration only. One skilled in the art will readily recognize from the following description that alternative embodiments of the structures and methods illustrated herein may be employed without departing from the principles of the invention described herein.</p>
<heading id="h-0005" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0019" num="0018">A geographic information system (GIS) is disclosed that provides users with a greater degree of flexibility, utility, and information. The system may also be configured as a distributed geographic information system (DGIS). The system employs techniques for prioritizing which placemarks (as well as other map entities) to display on a GIS-based map.</p>
<p id="h-0006" num="0000">General Overview</p>
<p id="p-0020" num="0019">It is common practice in Geographic Information Systems to provide mechanisms to select a subset of available geographic features for display based on any of several criteria. For example, one might load a database of world cities into such a system and then request to see only those cities within the United States, those cities with populations exceeding one million persons, or perhaps those cities meeting both of these criteria. In this last case, only the markers for New York City, Los Angeles, Chicago, Houston, Philadelphia, San Diego, Detroit, and Dallas would be displayed if 1990 population data were being used.</p>
<p id="p-0021" num="0020">Further, some interactive Geographic Information Systems support different feature visibility criteria at different viewing distances. For example, a selection criteria might be constructed that would show only cities exceeding one million in population when the view was of the North American continent (viewing distance 1), then include additional cities exceeding 100,000 in population when the viewpoint is lowered to include a single state in the display area (viewing distance 2), and finally modified to include smaller cities as the view lowers within a state or county (viewing distance 3). These and related techniques are known in the GIS field as &#x2018;selection&#x2019; and in the computer image generation field as &#x2018;visibility culling&#x2019; and &#x2018;level of detail management&#x2019;.</p>
<p id="p-0022" num="0021">An embodiment of the present invention is configured to determine &#x2018;which few of many&#x2019; geospatial items or entities to display on a map according to the relative importance of each entity according to its rank. Such a rank can be generated based on extrinsic factors, such as the popularity of the entity to users (e.g., quantity and/or velocity of geospatial item access), quality of information (e.g., respect for the information source of geospatial item and community stature of geospatial item's author), and similar meta-data about the geospatial feature. For example, if many users of an interactive GIS system view a particular small city (e.g., Henderson, Nev.), then an embodiment of the present invention would be to give that city a sufficiently significant place rank for display so as to display it along with the major cities exceeding one million in population. In this way users are shown the geospatial entities most likely to be of interest in the area of their visual search within an interactive geospatial information system. The ranking of geospatial items may further be based on location, distance, or other intrinsic attributes of a geospatial feature such as position and altitude (zoom level).</p>
<p id="p-0023" num="0022">Although the ranking of geospatial entities is described herein primarily in the context of choosing entities for display to a user on a map, the ranking may be used for other purposes, as will be apparent in light of this disclosure. Examples include selecting which entities should have associated keywords used for determining and displaying relevant advertising; selecting which entities should be suggested as potential origins, destinations, or waypoints in navigation computations; and other uses where an estimation of a most popular or most interesting subset of geospatial entities is desired. In such applications, ranked entity data generated in accordance with an embodiment of the present invention may be supplied to various systems in addition to or instead of a digital mapping system as required by the context.</p>
<p id="p-0024" num="0023">Using such entity ranking information, a two or three-dimensional digital map can be generated that includes placemarks that correspond to geospatial entities. In one such embodiment, a map generated by a GIS may include several types of data about geospatial entities. For instance, the map may include geographic features such as the terrain, infrastructure including roads, rail routes and airports, buildings, and/or borders of a landscape. The map may also be annotated with information about government entities and services such as parks and recreational services, federal, state, or local government landmarks, and community services. These and other annotations may be presented in the form of placemarks belonging to one or more categories, including commercial placemarks that represent businesses, travel placemarks including, for instance, historical sights and tourism destinations, user-defined placemarks that have been identified and named by a user for personal or community use, and/or community placemarks that have been voluntarily defined by members of the public in a forum. In one particular embodiment, information presented on a map is organized into collections that comprise layers, such as a terrain layer, road layer, border layer, community placemark layer, etc. Other layers include &#x2018;current events&#x2019;, &#x2018;history&#x2019;, and &#x2018;education&#x2019;, and indicate the organizational taxonomy of the source from which they were taken. A user can interact with a map and turn on or off various layers of information. In an embodiment, a basic or core layer is provided that includes a basic subset of data (for instance, the terrain, major roads, and political borders), and the user can select additional layers to customize the map view. Various third-party content-providers and advertisers can provide individual layers of data that can be overlaid onto such a basic map.</p>
<p id="p-0025" num="0024">As will be understood in light of this disclosure, the placemark ranking methods described herein can be used in combination with any conventional, proprietary, and/or emerging techniques to generate a digital map. In the case of a conventional raster map, for instance, the placemarks and other types of map data are used to create a map in a digital format such as .jpeg, .gif, or .png, at a map server and then delivered to a client. Requests to manipulate or interact with the map, are provided from the client to the server, which in turn generates the requested map view. In the case of a tiled raster map, pre-generated, rasterized images or &#x201c;tiles&#x201d; that include placemark data are stored at a map server. When the user submits a map query, the rasterized images are provided to the client, where they are used to create the requested map. Additional views based on, for instance, panning, zooming, or tilting the requested map can be generated at the client using the tiles. Vector-based methods can also be used to generate digital maps in accordance with other embodiments of the invention. In one such particular case, map data, including placemark data, is provided to the client by a map server in the form of vector graphic instructions. The instructions are interpreted by an application at the client in real-time to generate a map for the user. As a user interacts with the map, for instance, by including or excluding various layers including geospatial entities, the map can be dynamically updated at the client to include those layers. Likewise, as the user interacts with the map, for instance, by zooming or panning, the map can be dynamically regenerated at the client to include the new map views.</p>
<p id="p-0026" num="0025">Geographic information systems (GIS) are referred to throughout the present disclosure. As is known, a GIS may be implemented as a distributed geographic information system (DGIS), in which, for instance, GIS components are distributed across two or more different computers in different physical locations across a network such as the Internet or a corporate enterprise. Reference is also made herein to Google Earth, a GIS-based digital globe that includes various elements such as servers, clients, and other components and features as will be apparent in light of this disclosure. Reference is also made to Google Earth Community, a forum in which placemarks and entities are created, defined, described, and discussed by members of the participating public. Note that &#x201c;Google Earth&#x201d; and &#x201c;Google Earth Community&#x201d; and the descriptions provided herein may be protected under other forms of intellectual property, and are used for reference purposes only.</p>
<p id="h-0007" num="0000">System Architecture</p>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 1</figref> is a high-level diagram of a digital map system <b>100</b> with entity ranking capabilities in accordance with an embodiment of the invention. The system <b>100</b> includes a map server system <b>150</b> that is communicatively coupled to one or more clients <b>110</b> via a network <b>160</b>. The map server system <b>150</b> is coupled to a database <b>140</b> of ranked entity data populated (e.g., offline, or in real-time) by a GIS <b>170</b>. The GIS <b>170</b> is equipped with an entity ranking module <b>120</b>A that applies a ranking mechanism or algorithm to determine the relative ranks of geospatial entities. These entities may be defined within the GIS <b>170</b>, for instance, based on data provided to the GIS <b>170</b> from various external sources <b>180</b>. The ranked entities are stored in a database <b>140</b> and supplied to the map server system <b>150</b>, which uses the ranked entity data to generate maps for clients <b>110</b>. In the system <b>100</b> shown, client-side entity ranking modules <b>120</b>B-C are also present for providing additional entity ranking functionality. For instance, in accordance with an alternative embodiment, the map server system <b>150</b> may provide the ranked entity data to clients <b>110</b> for client-side generation of maps and ranked entity data layers. Principles of heavy-client and light-client functionality equally apply here, as will be apparent in light of this disclosure.</p>
<p id="p-0028" num="0027">Other modules may be included in the system, and illustrated modules may be rearranged and functionalities can be distributed. For instance, the GIS <b>170</b> can be integrated into the map server system <b>150</b>. Similarly, the entity ranking module <b>120</b>A of the GIS may be a standalone module. There may be a single entity ranking module <b>120</b>A implemented wholly in or with the GIS system <b>100</b>, without any entity ranking modules <b>120</b>B-C on the client side <b>110</b>. In another embodiment, entity ranking is implemented strictly by entity ranking modules <b>120</b>B-C at clients <b>110</b>. Other configurations will be apparent in light of this disclosure, and the present invention is not intended to be limited to any particular one. In this example, the term &#x201c;module&#x201d; refers to computer program logic or software for providing the specified functionality. When utilized by a client device <b>120</b> or map server system <b>150</b>, a module may be loaded into memory and executed on a processor. In other embodiments, a module can be implemented in hardware (e.g., gate-level logic), firmware (e.g., a microcontroller with embedded routines for carrying out entity ranking as discussed herein), software, or some combination of hardware, firmware, and/or software.</p>
<p id="p-0029" num="0028">The client <b>110</b> can be any device that allows a user to access the map server system <b>150</b> via the network <b>160</b>. The client <b>110</b> may a device or system configured for computing, such as a personal computer or laptop, a mobile phone, a personal digital assistant, a smartphone, a navigation system located in a vehicle, or a handheld GPS system. Other clients <b>110</b> (not shown) may also be in communication with the map server system <b>150</b> via the network <b>160</b>.</p>
<p id="p-0030" num="0029">Each client <b>110</b> includes an application such as a browser that allows the user to interface and communicate with systems such as the map server system <b>150</b> on the network <b>160</b>, as typically done. Examples of browsers include Microsoft's Internet Explorer browser, Netscape's Navigator browser, Mozilla's Firefox browser, PalmSource's Web Browser, or any other browsing or application software capable of communicating with network <b>160</b>. Alternatively or in addition, the client <b>110</b> may include an application implemented outside of a browser, such as a specialized mapping or geographic application, from which data on the map server system <b>150</b> can be accessed. Interactions with the map server system <b>150</b> may be accomplished through a plug-in or other executable architecture implemented locally.</p>
<p id="p-0031" num="0030">The GIS <b>170</b> can be configured with conventional technology, but further includes an entity ranking module <b>120</b>A configured in accordance with the principles of the present invention. The GIS <b>170</b> receives data from various sources <b>180</b> upon which ranked entity data can be determined by the entity ranking module <b>120</b>A. Both geospatial entities and ranking data by which the geospatial entities can be ranked are represented in the data. These types of data can be provided to the GIS <b>170</b> in structured and unstructured form. For instance, while entity data in the form of city names and geographies may be provided in a structured form, ranking data in the form of community comments or ratings, for instance, may be provided in unstructured form. Or, entity data and ranking data may be provided from the same structured source that, for example, identifies a city and its population, or an unstructured source such as a community bulletin board in which an entity is defined and data by which it can be ranked is provided.</p>
<p id="p-0032" num="0031">The entity ranking capability of the map system <b>100</b> is provided by one or more entity ranking modules <b>120</b>. The entity ranking module <b>120</b> collects entity data and ranking data with which the geospatial entities can be rated. This data may be provided from various sources including the GIS <b>170</b>, external sources <b>180</b>, and the client <b>110</b>. These sources are described in further detail with reference to <figref idref="DRAWINGS">FIG. 2</figref>. The module <b>120</b> evaluates the geospatial entities using the ranking data in order to determine a score or rank for each of the entities. In an embodiment, the module <b>120</b> also associates the entities with placemarks for a map, and generates groupings or layers of placemarks based on, for instance, a certain placemark density or map view altitude. The resulting entities and entity layers can be stored in a ranked entity database <b>140</b>, at a client <b>110</b>, or elsewhere. Each of these capabilities will be described in further detail with reference to <figref idref="DRAWINGS">FIG. 2</figref>.</p>
<p id="p-0033" num="0032">In a system that includes server <b>120</b>A and client-side entity ranking modules <b>120</b>B-C, the client-side modules <b>120</b>B-C may provide complementary rankings for use in generating a map for a client <b>110</b>. In one such embodiment, a server-side entity ranking module <b>120</b>A provides general placemarks whose rank is determined by a set of general ranking data, while a client-side entity ranking module <b>120</b>B-C provides personal placemarks that have been ranked using personal data about a user, their behavior, or their preferences.</p>
<p id="p-0034" num="0033">The network <b>160</b> may be any type of communications network, such as a local area network (e.g., intranet), wide area network (e.g., internet), or some combination thereof. Alternatively, the network <b>160</b> may be a direct connection between the client <b>110</b> and the map server system <b>150</b>. In general, the client <b>110</b>, network <b>160</b>, and/or map server system <b>150</b> may be in communication via any type of wired or wireless connection, using a wide variety of communication protocols.</p>
<p id="p-0035" num="0034">The map server system <b>150</b> can be implemented with conventional or custom technology. Numerous known server architecture and functionalities can be used to implement a GIS server system. Further, the map server system <b>150</b> may include one or more servers operating under a load balancing scheme, with each server (or a combination of servers) configured to respond to and interact with clients <b>110</b> via the network <b>160</b>. In one particular embodiment, the server system <b>150</b> is implemented as discussed in U.S. application Ser. No. 10/270,272, filed Oct. 10, 2002, titled &#x201c;Server for Geospatially Organized Flat File Data,&#x201d; which is incorporated herein.</p>
<p id="p-0036" num="0035">In general, when a user of a client computer <b>110</b> enters a search query (e.g., via browser and client side agent), it is put into a request by the client <b>110</b>, and sent to the map server system <b>150</b> via the network <b>160</b>. The server system <b>160</b> then determines what the search query is for, and responds with appropriate data from various sub-systems, such as geo-coders, routing engines, and local search indexes, in a format that the requesting client can use to present the data to the user (e.g., via a browser or other application).</p>
<p id="p-0037" num="0036">Used in conjunction with the server system <b>150</b>, the GIS <b>170</b> and ranked entity database <b>140</b> provide a map system <b>100</b> that serves map and GIS data over the Internet or other network <b>160</b>. The map system <b>100</b> allows users to visualize, select, and explore geographic information (e.g., all over the world or in a particular region). The entity ranking module <b>120</b>A can be configured to place rank available map data items based on various attributes associated with each geospatial feature (or a subdsdscset of geospatial features). These attributes may be extrinsic or instrinsic attributes of a geospatial feature, represent meta attributes of the feature, and/or reflect the personal behavior of a user. Based on ranking entities according to these attributes, users are shown the geospatial entities most likely to be of interest in the area of their visual search within the interactive GIS.</p>
<p id="h-0008" num="0000">Entity Ranking Module</p>
<p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. 2</figref> is a high-level block diagram of an entity ranking module <b>120</b> that could be implemented at a client computer or server-side GIS according to one embodiment of the present invention. The entity ranking module <b>120</b> receives or collects data from various sources about geospatial entities through an interface <b>250</b>. The data contains both entity data <b>210</b> that identifies and defines geospatial entities and ranking data <b>220</b> by which geospatial entities can be evaluated. The entity data <b>210</b> may comprise placemark-level data. The ranking engine <b>230</b> applies one or more ranking algorithms or rank mechanisms to the ranking data <b>220</b> to determine scores for geospatial entities defined in the entity data <b>210</b>. The resulting ranked entity data may be provided through the interface <b>250</b> to a requesting application such as a mapping application. Or, the ranked entity data can be formed into placemark layers by a placemark layer generator <b>240</b>. In whatever form, the ranked entity data is stored and provided to a map server system or other application. The entity ranking module <b>120</b> includes a memory <b>260</b> in which data collected, including from a client, can be stored.</p>
<p id="p-0039" num="0038">The entity ranking module <b>120</b> can receive entity data <b>210</b> and ranking data <b>220</b> about entities from any number of sources. The data may include satellite data, aerial photographs, street-level photographs, digital map data, tabular data (e.g., digital yellow and white pages), and targeted database data (e.g., databases of diners, restaurants, museums, and/or schools; databases of seismic activity; database of national monuments; etc). It may also include government census and population data, building plan data, demographic data including socio-economic attributes associated with a geospatial entity such as a zip code or town, and alternative name data. In one particular embodiment, the data comprises proprietary content collected by a third-party provider and placemarks derived from it can only be accessed by users who have specifically paid for or subscribed to it.</p>
<p id="p-0040" num="0039">While these sources comprise structured data about geospatial entities, definitions of geospatial entities <b>210</b> and ranking data <b>220</b> in the form of information about attributes of geospatial entities may also be provided in unstructured form. Such data can be harvested from websites on the internet, and/or culled or provided from various sources including community forums such as the Google Earth Community, online bulletin boards, or other virtual spaces in which geospatial entities may be defined and described by users in a public, private, or semi-public setting. In the case of the Google Earth Community, for example, an entity may be posted by a user, and then descriptions of the entities may be provided on subsequent postings or replies to the initial posting. The entity ranking module <b>120</b> may also receive data from one or more clients <b>110</b> that may be particular to a user or client device <b>110</b>. As described in more detail below, this data can be used to customize rankings and/or a user's experience.</p>
<p id="p-0041" num="0040">Example geospatial entities include a city name and location, a user defined entity, a commercial entity, a geospatial item found in a web search, or any item (e.g., physical thing, event, or quality) having a geographic association. A geospatial entity is thus comprised of a geometry associated with a physical place (such as a set of geographic coordinates on Earth or the moon) and a description. In the case of a geospatial entity that is non-geographical in nature, such as the War of 1812, this geometry may correspond to locations associated with the event. Thus, the entity can correspond to single or multiple physical places and descriptions. For instance, geospatial entities in Google Earth can be either singleton objects or may be a hierarchical folder of objects, each object in which may be another folder or an entity. Thus, while some entities represent one geospatial object, other entities may have folders that in aggregate represent many geospatial objects. A single entity, in turn, may correspond to one or more placemarks. For instance, an entity like &#x201c;Oakland gas stations&#x201d; may include several different physical locations, each of which is represented by a separate placemark.</p>
<p id="p-0042" num="0041">Ranking data <b>220</b> may describe attributes of entities that can be evaluated by the ranking engine <b>230</b> to determine the entity's rank. In an embodiment, the attribute defines the interestingness of an entity to a particular user. Such interestingness can be used to rank the various geospatial entities in the area of a user's visual search within an interactive geospatial information system (such as Google Earth), so that client-side entity display prioritizing is enabled. As will be explained in turn, &#x201c;interestingness&#x201d; for a geospatial entity can be determined by measuring or otherwise determining various types of extrinsic data associated with that entity. In one such embodiment, this measure, scaled by a corresponding weight, forms a bonus that augments the entity's score or rank (e.g., by addition or multiplication). Thus, higher ranked entities can be given priority for display over lower ranked (less interesting) entities. Data intrinsic to the GIS system may also be considered, as normally done (e.g., zoom level).</p>
<p id="p-0043" num="0042">In another embodiment, ranking data <b>220</b> comprises various indications of a user's interest in certain placemarks. For instance, placemarks that have been saved or annotated by the user at the browser or application level could be deemed to be of greater interest to a user. A user's search terms or patterns of web page access or use may also be correlated to certain geospatial entities and used by an entity ranking module <b>120</b> at the client or on a server to select placemarks for the user. In addition, placemarks that the user has defined for his or her own use may be assumed to be of high personal interest. In one such embodiment, geospatial entities including points of interest or personal relevance to the user, such as the location of the user's house, workplace, child's daycare, or favorite playground are identified and marked on any map in the vicinity of these elements, regardless of their relative rank as calculated by a GIS. These and other indications of user interest may be gauged from the user's behavior, or may be in the form of preferences or instructions regarding entities affirmatively provided by the user, for instance instructing the inclusion or exclusion of specific entities or groups of entities in maps provided by a map server system. A rankings premium may be assigned to geospatial entities based on the user's interest or preferences. User data collected at a client may be stored in the memory <b>260</b> of the entity ranking module and used by the ranking engine <b>230</b> to generate entity rankings that are personal to the user.</p>
<p id="p-0044" num="0043">The ranking engine <b>230</b> comprises a module for ranking entities based on descriptions of entity attributes included in the ranking data <b>220</b>. Depending on the type of data provided, the ranking engine <b>230</b> can use a variety of mechanisms to evaluate geospatial entities, which are further described below.</p>
<p id="p-0045" num="0044">The entities as ranked by the ranking engine <b>230</b> are organized into layers by a placemark layer generator <b>240</b>. This may be accomplished by determining a level of detail and threshold to be associated, for instance, with a given altitude or density. For instance, when a user's query implicates a number of entities greater than a given threshold, only those entities having a place rank above a certain threshold are provided. For example, assume the given threshold for the total number of entities that can be displayed at the current map view is 50, and that the place rank threshold is 80. If a user's query implicates over 100 geospatial entities, and 35 entities have a place rank over 80, then the server system will serve those 35 entities along with the 15 next highest ranked entities for display at the requesting client. Alternatively, all of the implicated geospatial entities generated are served to a client-side entity ranking module <b>120</b>, which then determines which of those entities to display (in a similar fashion to the server-side functionality). Or, both server-side and client-side entity ranking can be carried out, where the server system serves a set of ranked entities, and a client then displays a sub-set of that served set. Placemarks can be subdivided into layers according to criteria other than altitude or density, including conceptual, spatial, temporal, or other groupings. In one particular embodiment, the placemark layer generator also applies stylings to the various placemarks and stores those with the placemark layers.</p>
<p id="h-0009" num="0000">Ranking Mechanisms</p>
<p id="p-0046" num="0045">One embodiment of the present invention is a method for computing a relative ranking of a geospatial entity such as a city name and location, user defined entity, commercial entity, or geospatial item found in a web search, as compared to other such entities. These relative rankings are determined by a ranking engine <b>230</b> and are used within a GIS (e.g., as discussed with reference to client-side entity ranking of <figref idref="DRAWINGS">FIG. 1</figref>) to order the display of entities when not all can be selected for display, for example, to show some of the highest or lowest ranked entities, or perhaps a selected range of entities.</p>
<p id="p-0047" num="0046">In an embodiment, this ranking, which can be referred to as place rank, is computed based on the weighted contributions of various non-cartographic meta attributes about a geospatial entity. Rather than directly measuring a characteristic of a physical place, such as its population, these attributes reflect traits of abstractions or representations associated with the geospatial entity. Examples include an attribute of a description of an entity (for instance, the amount of detail in the description of an entity or the number of times a description has been viewed), an attribute of a definition of an entity (e.g. the context or downloads of a definition of an entity, or attributes about the creation of an entity in a public forum), an indicator of the popularity of a geospatial entity (such as the number of views, downloads, or clicks on the entity or a placemark associated with the entity or an attribute based on a ranking or score assigned to an entity), or the relationship of an entity to its context, such as the category to which an entity belongs. Attributes that fit into each of these categories are described in greater detail below:
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0000">
    <ul id="ul0002" list-style="none">
        <li id="ul0002-0001" num="0047">The amount of detail in the description of an entity. Longer descriptions are given a greater score than shorter descriptions, based on the presumption that more words means more information. In one embodiment of the ranking system described herein, this bonus (increased score) is based on the number of characters in the description text irrespective of the number of bytes required to represent that character in a chosen alphabetic encoding (e.g., thereby normalizing for languages that require more data to encode). A detail penalty can be assessed when the description size is less than a selectable threshold as a means to down-weight &#x201c;empty&#x201d; or &#x201c;signature only&#x201d; texts.</li>
        <li id="ul0002-0002" num="0048">The number of entities created by a particular author or source. Sources that provide many entities are presumed more reliable than sources having created few entities. The rank bonus here rewards effort and experience and applies to user created entities (places or objects defined by users) as well as those taken from larger databases and from commercial vendors.</li>
        <li id="ul0002-0003" num="0049">The context of a publicly posted geospatial entity. Some geospatial entities originate in public forums (such as the Google Earth Community), and through this origination become associated with the context of that forum (e.g., social life in Rome). Since the context of the user's search is also known, an embodiment of the ranking system described herein gives a rank bonus to entities posted in forums having a common or similar context with the user.</li>
        <li id="ul0002-0004" num="0050">The number of replies to a publicly posted geospatial entity. Some geospatial entities originate in public forums (such as the Google Earth Community) and in this context there is a potential for dialog about such an entity, where some post to a forum is the specification of the entity and subsequent posts are replies to that entity specification post with discussion or additional information. In these cases, an entity can be credited with a rank bonus based on the number of replies. The replies can be selectively counted, either automatically or manually by a moderator, in order to avoid counting non-relevant replies (e.g., off-topic, flames, or the like).</li>
        <li id="ul0002-0005" num="0051">The number of views of a publicly posted geospatial entity. Some geospatial entities originate in public forums (such as the Google Earth Community) and in this context there is a potential for readers of these forums to view some such posts more frequently than others. Since the frequency of viewing (or similarly actions, such as repeat viewing or bookmarking) reflects an interest in the item, an embodiment of the ranking system described herein gives a rank bonus to entities based on the number of views to the web page where the entity is described. When considered temporally, the incidence of entity views may have occurred non-uniformly over time, such as the case with a publicity spike attending an entity associated with a natural disaster. In such cases it may be preferable, for example, to consider 1000 views spread broadly over a sample interval as indicating greater interest, rather than considering 900 views in a short interval followed by 100 views over a longer interval. To reflect this variation in level of interest, an embodiment of the ranking system described herein allows the number of views to be optionally considered as a time series and apply statistical measures to analyze the distribution of interest. In one such embodiment, the entity rank bonus is greater for distributions that are even than those that are uneven, though the choice of a negative value as the weight for this bonus will effectively invert the class of distribution considered most interesting.</li>
        <li id="ul0002-0006" num="0052">The number of downloads of a publicly posted geospatial entity. Some geospatial entities originate in public forums (such as the Google Earth Community) and in this context there is a potential for readers of these forums to download entity data from some such posts more frequently than others. Since the frequency of downloading (e.g., user click-through to the entity) reflects a deep interest in the item, an embodiment of the ranking system described herein gives a rank bonus to entities based on the number times an entity is downloaded. When considered temporally, the incidence of entity downloads may have occurred non-uniformly over time, such as the case with a publicity spike attending an entity associated with a natural disaster. In such cases it may be preferable, for example, to consider 1000 downloads spread broadly over a sample interval as indicating greater interest, rather than considering 900 downloads in a short interval followed by 100 downloads over a longer interval. To reflect this variation in level of interest, an embodiment of the ranking system described herein allows the number of downloads to be optionally considered as a time series and apply statistical measures to analyze the distribution of interest. In one such embodiment, the entity rank bonus is greater for distributions that are even than those that are uneven, though the choice of a negative value as the weight for this bonus will effectively invert the class of distribution considered most interesting.</li>
        <li id="ul0002-0007" num="0053">The community stature of the author a publicly posted geospatial entity. Some geospatial entities originate in public forums (such as the Google Earth Community) and in this context there is an identified author for each entity. In these forums the authors may have a community stature or status based on number of posts, quality of posts as perceived by readers of those forums, common knowledge of an author's stature, membership level (e.g., moderator, member, paid member, guest, etc.), and similar factors. An embodiment of the ranking system described herein gives a rank bonus to entities based on the stature of its author within such an online community.</li>
        <li id="ul0002-0008" num="0054">The number of entities contained within a multiple entity ensemble. For instance, geospatial entities in Google Earth can be either singleton objects or may be a hierarchical folder of objects, each object in which may be another folder or an entity. Due to this, some entities represent one geospatial object while other entities may have folders that in aggregate represent many geospatial objects. An embodiment of the ranking system described herein gives a rank bonus to aggregated collections since they contain more information. The bonus can be based, for example, on the total number of locations in the entity (e.g., bonus=5 if 5 locations; bonus=7 if 10 locations; bonus=10 if 15 locations; and bonus=15 if 20 or more locations). A further embodiment of the ranking system described herein assigns a greater rank bonus to multiple entity ensembles when they have more internal folders rather than less internal folders. This reflects the perception that entities with a detailed segmentation using folders are likely to be more detailed in other aspects as well. In practice, this bonus is computed based on the number of folders contained within a multiple entity ensemble, either proportionally to the number of folders or in a segmented manner (e.g., bonus=5 if 5 folders; bonus=7 if 10 folders; bonus=10 if 15 folders; and bonus=15 if 20 or more folders).</li>
        <li id="ul0002-0009" num="0055">The relative age of an entity definition. Some geospatial entities originate in public forums (such as the Google Earth Community) and in this context there is an identified creation date for each entity. When two or more entities are similar in location they likely describe related information. To establish a further refined ranking score for such cases, an embodiment of the ranking system described herein gives a rank bonus to the older post as an encouragement for users to create entities defining new information rather than revisiting previously described locations. In another embodiment, newer data receives a higher rank because it reflects fresher and more current information.</li>
        <li id="ul0002-0010" num="0056">The hierarchical importance of an entity. Some geospatial entities originate in public forums (such as the Google Earth Community) and in this context there is a potential parent-child relationship for the post that defines an entity. A parent post, such as &#x201c;universities in Kansas&#x201d; may have several child posts (known as replies) that supply geospatial entities defining each university within the state of Kansas. The parent post, perhaps describing the location of the main administrative office of the Kansas university system, might have an individual score lower than that of its children, which identify schools attended by many thousands of individuals. To direct attention to the parent post in such cases, an embodiment of the ranking system described herein assigns a rank bonus equal to the sum of the scores of any replies to each post. The ranking is thus based on the relationship of a geospatial entity to its place in a hierarchy of geospatial entities. This assures that the initiating parent post's score is greater than or equal to the sum of its parts. Other aggregation functions may also be used.</li>
        <li id="ul0002-0011" num="0057">The relative importance of an entity category or source of an entity category. Some geospatial entities originate in public forums (such as the Google Earth Community) and in this context there are divisions known as &#x2018;forums&#x2019;, within one of which the post that defines an entity will be located. Forums are typically topical; examples include &#x2018;current events,&#x2019; &#x2018;history,&#x2019; and &#x2018;education.&#x2019; The importance of these forums is not necessarily uniform. For example, &#x2018;current events&#x2019; entities may be less important over time than &#x2018;history&#x2019; entities, which are timeless. This situation is captured in an embodiment of the ranking system described herein by assigning an importance to each source of entities, or categories of entities, for instance, per forum for the Google Earth Community (or other interactive GIS), by vendor for commercial entity data, and similarly for other sources of entity data such as discovery by web search (e.g., low importance) or from official government sources (e.g., high importance). This relative source importance factor scales (e.g., multiplies) the overall score computed for an entity.</li>
        <li id="ul0002-0012" num="0058">The externally-ranked importance of an entity. Some geospatial entities originate in public forums (such as the Google Earth Community) and in this context there may be a score or rank associated with that entity. In the Google Earth Community Forum, for example, each ranked post may have from one to five &#x201c;stars,&#x201d; where five stars indicates a well-respected or otherwise highly regarded entity and one star corresponds to a poor or perhaps less respected entity. The metrics used to determine these external rankings are not necessarily uniform across multiple entity sources, so for example the entities from a Google Earth forum might have originating scores ranging from one to five stars, while geospatial entities found at a restaurant review website might be rated with zero to four &#x201c;forks.&#x201d; Further, not only are such metrics as &#x201c;stars&#x201d; and &#x201c;forks&#x201d; not directly compatible in origin and range, the sources of these metrics may have varying degrees of reliability. For example, on source might be a public website with anonymous contributions and ratings while the other might be a professionally-created restaurant or tourist guide reporting refereed evaluations. For these reasons, the method by which an embodiment of the ranking system described herein incorporates such data is prefixed with an initial scale (A) and offset (B) transformation (e.g., NEW=A*OLD+B) before the subsequent weighting process (e.g., AttributeScore=Weight*[NEW]). For example, if a stars-based rating scheme goes from 1 to 5 (i.e, 0% to 100% satisfaction) and a forks-based scheme goes from 0 to 4 (i.e., 0% to 100% satisfaction), then the ratings cannot be compared or processed just by multiplying, since they start at a different values (1 vs. 0). One technique for handling this case of diverse rating systems is to take the entity source's native range (Low . . . High) and compute the following: Rescaled=(NativeValue&#x2212;Low)/(High&#x2212;Low). This maps any range into 0 as low and 1 as high. Then, the result (Rescaled) can be multiplied by a weighting factor (e.g., 100) to allow the entity to gain from 0 to 100 points of rank bonus as the native ranking moves from 1.5 stars or 0.4 forks. The values of Low and High are constant for each entity source (Forks, Stars, etc). Using algebra, the rescaling equation can be reordered as: Rescaled=[1/(High&#x2212;Low)]*NativeValue+[Low/(Low&#x2212;High)] or, A=1/(High&#x2212;Low) and B=Low/(Low&#x2212;High). It follows then that Rescaled=A*Native+B. The entity score can then be augmented by WeightForThisAttribute*Rescaled (for each entity obtained from that source). One extension of such an embodiment uses the place ranking computed for an entity by the place rank process described herein to update the external-rank provided at the source where the entity was originally located, which could be for example the Google Earth Community Forums or other GIS forums.</li>
        <li id="ul0002-0013" num="0059">The spatial density of entities in a defined neighborhood. When multiple entities are clustered in a relatively small geographical region, this signifies that authors of the entities have indicated a geographical region of elevated interest. From this it can be assumed that an entity with an elevated density of neighboring entities has a greater value than would otherwise be the case. This is implemented in an embodiment of the ranking system described herein by adding or otherwise providing a rank bonus based on the number of other entities within a defined area that includes an entity's location (e.g., circle or box centered at an entity's location). Note that this metric, though geospatial in concept, is not an inherent attribute of an entity but rather an observation of that entity in relation to other entities.</li>
        <li id="ul0002-0014" num="0060">The click-through rate of displayed entities. When entities are displayed in an interactive GIS such as Google Earth, it is possible to track the number of instances where users further investigate an entity by various means such as clicking on it with a mouse operation, by performing operations on that entity such as selection or highlighting; by using that entity as a routing origin, destination, or waypoint; or by finding that entity to be responsive to a search for information (e.g., as when the entity description contains the word &#x201c;Pizza&#x201d; and a user of the interactive system performs a search with the keyword &#x201c;Pizza&#x201d;, &#x201c;Italian&#x201d;, or &#x201c;Food&#x201d;). A tabulation of such events yields a direct measure of importance for that entity as understood by users of the system. When this data is collected (e.g., in the optional client entity ranking module and/or in the server-side entity ranking module) it may be used as an attribute defining interestingness for an entity. An embodiment of the ranking system described herein exploits this measured activity level by assigning a rank bonus to an entity based on the number of user events it receives compared to the average value for other entities. This measure (e.g., scaled by the corresponding weight) forms a bonus added (e.g., or otherwise used) to augment an entity's score.</li>
        <li id="ul0002-0015" num="0061">The enablement rate of entity categories. When entities are displayed in an interactive GIS such as Google Earth, they are often presented in the form of layers, as described earlier. These layers are selectable individually and in aggregate. The enablement of each layer can be viewed as a vote in a plurality voting system and the aggregation of such votes may be used to determine the relative preferences that users have for the various entity data layers. When this data is collected (e.g., in the optional client entity ranking module and/or in the server-side entity ranking module) it may be used as an attribute defining relative interestingness for a collection of entities. For example, a layer of &#x201c;Bars and Night Clubs&#x201d; will likely be enabled more often than a layer of state &#x201c;IRS Offices&#x201d;. An embodiment of the ranking system described herein exploits this measured activity level by assigning a relative weighting for a class of entities or source of entities based on the number of layer selection actions observed compared to an average value. This measure can be used to set the relative importance of an entity category as previously discussed, or may be used to scale those static priorities by an additional amount based on empirical observation of user preferences.</li>
        <li id="ul0002-0016" num="0062">The estimated importance of the web page or document associated with an entity. When an entity is linked from a web page or other electronic document, it is possible to use the estimated importance of that page or document to infer the estimated importance of the linked geospatial entity. One estimate of relative importance for online documents is a page rank, such as described in U.S. Pat. No. 6,285,999, titled &#x201c;Method for Node Ranking in a Linked Database&#x201d; and/or U.S. Pat. No. 6,799,176, titled &#x201c;Method for Scoring Documents in a Linked Database&#x201d; and/or U.S. Patent Application No. 20050071741, titled &#x201c;Information Retrieval Based on Historical Data,&#x201d; each of which are hereby incorporated by reference herein. An embodiment of the ranking system described herein uses such page rank scores as a proxy score for geospatial entities referenced by online documents identified in a search result. For example, a Google search for &#x201c;Kansas university&#x201d; returns 1,560,000 results, which are ordered by the page rank mechanism described in the '999 patent to display the ten results deemed most relevant as the initial response to the query. These first ten results are exactly those having the highest page rank score. An embodiment of the present invention uses one or more of search result document page rank scores, scaled by the corresponding weighting factor, as an importance bonus for geospatial entities referenced by those documents. For example, the top page rank score may be used, or the average of the top ten page rank scores, or some other function or selection thereof.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0048" num="0063">One or more of the attributes listed above is evaluated and the results are weighted individually with a scale factor before being summed to produce an overall score for an entity. Such a calculation could be performed by the ranking engine depicted in <figref idref="DRAWINGS">FIG. 2</figref>. In an embodiment, both meta attribute data about a geospatial entity and data that reflects attributes of the entity itself are used to determine the overall score. For instance, in an embodiment, the size of a business and the number of replies to a posting about the business are both factors that are weighed by a ranking engine <b>230</b>. The ordering of entities by non-increasing score defines the ranking (descending order). The weighting factors can be changed based on resulting rankings to adjust the relative prominence of each attribute (e.g., automatically, or as desired by the system administrator, or by an individual user). In one embodiment, an end user can assign the weights to be applied to each type of attribute. Any of the weightings can be set to zero (or one in the case of relative importance) to remove that attribute from consideration or equivalently some of the attributes may be ignored. The weighting factors can be made negative to downgrade rather than reward entities for a particular attribute. Applying scale factors to individual attributes allows diverse attributes to be evaluated and a total score to be calculated based on the attributes.</p>
<p id="p-0049" num="0064">Numerous algorithms can be used to for determine place rank in accordance with an embodiment of the present invention. For example, in an embodiment, SCORE=NumberOfPostCharacters+a*NumberOfDescriptionCharacters)+b*NumberOfReplies+c*NumberOfViews+d*NumberOfDownloads+StatureWithinCommunity, wherein a, b, c, and d represent variables that can be adjusted based on the value assigned to each attribute. The StatureWithinCommunity reflects the poster of a description, and, in an embodiment, can range from 200 to 500 depending on the poster's stature based on any of a number of criteria including reputation, posting behavior, and ratings or endorsements by other users.</p>
<p id="p-0050" num="0065">One embodiment of the ranking system described herein aggregates the individual attribute measures with a general linear combination. A more sophisticated aggregation, of which the linear combination is the subset along the main diagonal, is to use an M by M matrix of weights, where the dimension M corresponds to the number of attributes, and matrix reduction is used to allow specification of weights for the full cross product of attributes. For example, such a technique allows a specified weight for the product of &#x2018;description length&#x2019; and &#x2018;author stature&#x2019; as a combined component. The two equation structures described herein are representative of the variety of attribute combination methods that will be apparent in light of this disclosure, such as including exponentiation or other algebraic forms in the evaluation of each attribute.</p>
<p id="p-0051" num="0066">Thus, extrinsic meta data about a geospatial entity can be used as input to a scoring system that produces a relative ranking for purposes such as selection for display within a geospatial information system. There are other attributes that may be used in such a system, such as the degree of match between search terms and entity description text and historical search preferences of an individual user or users in aggregate, that may be incorporated into an interactive GIS as described herein as elements used to determine an entity score. Further, as described earlier, the ranking may be used for purposes other than selection for display.</p>
<p id="p-0052" num="0067"><figref idref="DRAWINGS">FIGS. 3 and 4</figref> are flow charts illustrating steps performed to generate and serve ranked entity data in accordance with embodiments of the invention. Not every possible step is shown in the figures. In addition, some embodiments perform different steps in addition to, or instead of, the ones described herein. Furthermore, the order of the steps can vary from that described herein.</p>
<p id="h-0010" num="0000">Generating Prioritized Placemarks for a Map</p>
<p id="p-0053" num="0068"><figref idref="DRAWINGS">FIG. 3</figref> illustrates a method for generating and providing prioritized entities in accordance with an embodiment of the invention. One or more steps may be performed by an entity ranking module such as the one depicted in <figref idref="DRAWINGS">FIG. 2</figref> and implemented on the client and/or server side as shown in <figref idref="DRAWINGS">FIG. 1</figref>. In addition, while certain steps (for instance <b>350</b>) are triggered by a user request for a map, others may be performed &#x2018;off-line&#x2019; outside the context of a particular search request.</p>
<p id="p-0054" num="0069">On a regular basis, entity data is received <b>310</b> from various sources such as the data sources discussed with reference to <figref idref="DRAWINGS">FIG. 1</figref>. Ranking data is also received <b>320</b>, from the same or different sources as the entity data. The collection of data may take place, for instance, as part of a database construction process, or a web crawl and indexing process. Such data may also be pushed from vendors or third party sources. Some portions of the data, for instance, data about a user's personal placemarks, may be updated in real-time in response to a user request while others are received or refreshed according to a regular schedule. Various mechanisms such as those described above may be applied to the ranking data to determine <b>330</b> rankings or scores for the entities. Comparable attribute scores based on disparate types of ranking data obtained from various sources can be calculated using the techniques described above. The entity data may be stored in a database such as the one shown in <figref idref="DRAWINGS">FIG. 1</figref>, or in another embodiment, a subset of the ranked entity data is cached in a memory of a client hosting an entity ranking module that determines <b>330</b> entity rankings based on the cached data.</p>
<p id="p-0055" num="0070">According to the example method shown in <figref idref="DRAWINGS">FIG. 3</figref>, ranked entity data is used to generate <b>340</b> layers of placemarks for display on maps. In an embodiment, the entities are mapped to placemarks, and stylings are applied based on the category in which an entity or placemark falls. Groups of placemarks are correlated to levels of detail in order to present a viewer of a map with an appropriate density of placemarks. The levels of detail may reflect any number of inputs, including the altitude at which a map is being viewed, the resolution of the map, other layers depicted on a given map, and user preferences about how sparse or dense a map should be. For instance, in an embodiment, if a placemark score is beyond a certain threshold, it receives a level 5 rating, meaning that map views at or below a certain altitude should include the placemark. The placemarks may also be organized into categories such that an individual placemark can be associated with different groups of placemarks, e.g. placemarks associated with a specific city as well as placemarks of tourist destinations. Each of these categories may be reflected a separate placemark layer.</p>
<p id="p-0056" num="0071">In an embodiment, at a later point in time, a request for a placemark layer or layers is received <b>345</b>, and the appropriate layers are provided <b>350</b> to the requester. As discussed earlier, a digital map may be generated according to raster, tiled, or vector-based methods. Depending on the method used, a placemark layer may be requested by a map server in real-time in response to a query, or provided <b>350</b> to create map components that are pre-stored and only served when a user request is received. In an embodiment, the placemark layers are provided <b>350</b> in response to user preferences or selections. In an embodiment, once provided, the placemark layer is combined with other layers to form a map, at a client or server site.</p>
<p id="h-0011" num="0000">Requesting a Map with Prioritized Placemarks</p>
<p id="p-0057" num="0072"><figref idref="DRAWINGS">FIG. 4</figref> is a flow chart illustrating steps for requesting and receiving a map including prioritized placemarks in accordance with an embodiment of the invention. <figref idref="DRAWINGS">FIG. 5</figref>. illustrates a map that could be received based on a request formulated using steps in the processes depicted in <figref idref="DRAWINGS">FIG. 4</figref>. One or more of these steps may be performed at a client requesting a map from a map server as shown in <figref idref="DRAWINGS">FIG. 1</figref>. The process begins when a map is requested <b>410</b> by a client, for instance from within a browser, specialized application such as Google Earth, or other software application. The map request identifies the geographic area for which the map is sought and the altitude the map should represent. User or client data and preferences are also provided <b>420</b> to a map server system. For instance, in an embodiment, the country from which the request originates, which can be determined based on the IP address of the request, for instance, and a user's language preferences are provided to a map server so that only placemarks in the appropriate language and which reflect country or culture-specific stylings or sources of data are served. The country and language information may be provided <b>420</b> from the requesting application or another source such as the operating system of the client.</p>
<p id="p-0058" num="0073">In addition, user placemark preferences may also be provided <b>420</b> to the map system. The preferences may reflect for instance, which categories or layers of placemarks to display, how many placemark to include (density), and how much identifying information should be displayed on a map. For instance, in the case of the map of <figref idref="DRAWINGS">FIG. 5</figref>, a user can select, using checkboxes on a graphical user interface <b>520</b>, which layers should be included on the map displayed <b>550</b>. Each layer of placemarks is associated with its own icon or styling, for instance, a knife and fork icon <b>510</b>A for a dining placemark, and a cup <b>510</b>B for a drinking establishment.</p>
<p id="p-0059" num="0074">In an embodiment, preferences provided <b>420</b> to the map system can be used to personalize the selection and display of placemarks to the user. Personalized placemark selection may be accomplished in a variety of ways, for instance by personalizing entity ranking by using a user's behavior or usage patterns as the basis of an attribute upon which an entity's rank is scored or varying the weight given to certain attributes based on a user's input; or, for example, by overriding generalized ranking schemes by always including placemarks that the user has defined or designated herself.</p>
<p id="p-0060" num="0075">In the flow chart of <figref idref="DRAWINGS">FIG. 4</figref>, a requester may receive <b>432</b> various types of data depending on the personalization preferences provided to the map server system. However, as one of skill in the art would know, other steps reflecting different map generation and customization processes are also possible. In a default embodiment, there are no personalized placemarks <b>430</b>A, and the client receives <b>432</b>A and displays <b>450</b>A a map with general placemarks. In such an embodiment, no entity ranking capabilities are implemented locally at the client. In another embodiment, however, a client requests that the requested map include only personalized placemarks <b>430</b>C. In such an embodiment, entity ranking capabilities are implemented wholly at the client, with an entity ranking module such as the module described in <figref idref="DRAWINGS">FIG. 2</figref> hosted locally rather than on a centralized server. The client receives <b>432</b>A a map, comprised of map layers, which does not include any placemarks on it. Personalized placemarks generated and stored at the client are added <b>440</b>A to the map, and the resulting map is generated and displayed for the user.</p>
<p id="p-0061" num="0076">In yet another embodiment, the user may request a map that includes both personal and general placemarks <b>430</b>. The client receives <b>432</b>B a map and a group of general placemarks or entities associated with the geography of the map based on this request. The general placemarks are combined with personal placemarks that have been designated by the user in any of a variety of ways (for instance by authoring the entity definition or placing the placemark in a favorites folder), and a ranking mechanism is applied <b>436</b>B to the combined group of placemarks. The results are used to generate <b>440</b>B a layer that includes both personal and generalized placemarks, which is then combined with the map provided to the client to generate <b>450</b>B a map for display <b>450</b>B.</p>
<p id="p-0062" num="0077"><figref idref="DRAWINGS">FIG. 5</figref> shows an exemplary map including personal and general placemarks that has been generated in accordance with the method described at steps <b>412</b>-<b>420</b> and <b>430</b>B through <b>450</b>B. As is shown in <figref idref="DRAWINGS">FIG. 5</figref>, personal placemarks including Max's playground <b>105</b> and Dirk's coffee spot <b>419</b> are depicted together with dining (e.g. <b>510</b>A) and drinking placemarks (e.g. <b>510</b>B) on the map <b>550</b>. Also provided are community placemarks which are demarcated with a special community placemark icon <b>540</b>. The map <b>550</b> also includes interactive content, in the form of a text box <b>530</b> that links to a comment about a placemark provided by a community member. This allows a user to benefit from the input provided by other community members.</p>
<p id="p-0063" num="0078">The features and advantages described herein are not all-inclusive and, in particular, many additional features and advantages will be apparent to one of ordinary skill in the art in view of the figures and description. Moreover, it should be noted that the language used in the specification has been principally selected for readability and instructional purposes, and not to limit the scope of the inventive subject matter.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A computer-implemented geographic information system (GIS), comprising:
<claim-text>a processor for executing program code; and</claim-text>
<claim-text>a non-transitory computer-readable storage medium storing program code executable to perform steps comprising:
<claim-text>receiving non-cartographic information about a plurality of restaurants, each restaurant defined in an on-line forum, wherein the information is generated in the on-line forum;</claim-text>
<claim-text>storing the non-cartographic information;</claim-text>
<claim-text>prioritizing the plurality of restaurants for display on a map using the non-cartographic information and according to a ranking mechanism; and</claim-text>
<claim-text>providing the map and a plurality of icons, each icon corresponding to one of the plurality of restaurants, for display on a mobile device.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the computer-readable storage medium storing program code is further executable to prioritize the restaurants for display using one of: quality of information available about the restaurant, an attribute of a description of the restaurant, and an attribute of a definition of the restaurant.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the computer-readable storage medium storing program code is further executable to prioritize the plurality of restaurants for display using an indicator of the restaurant's popularity.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the computer-readable storage medium storing program code is further executable to prioritize the plurality of restaurants for display using one of: an age attribute of the restaurant, a stature attribute of the restaurant, and an importance attribute of the restaurant.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the computer-readable storage medium storing program code is further executable to prioritize the plurality of restaurants for display using a relationship of a restaurant to its place in a hierarchy of restaurants.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the ranking mechanism uses data harvested from a website about a restaurant to determine the restaurant's priority.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the ranking mechanism determines a restaurant's priority from a combination of weighted data from a plurality of meta attributes of the restaurant.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. A computer-implemented method for ranking restaurants, the method comprising:
<claim-text>receiving non-cartographic information about a plurality of restaurants, each restaurant defined in an on-line forum, wherein the information is generated in the on-line forum;</claim-text>
<claim-text>storing the non-cartographic information;</claim-text>
<claim-text>prioritizing the plurality of restaurants for display on a map using the non-cartographic information and according to a ranking mechanism; and</claim-text>
<claim-text>providing the map and a plurality of icons, each icon corresponding to one of the plurality of restaurants, for display on a mobile device.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The method of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein prioritizing the restaurants for display further comprises prioritizing the plurality of restaurants for display using one of: quality of information available about the restaurant, an attribute of a description of the restaurant, and an attribute of a definition of the restaurant.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The method of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein prioritizing the restaurants for display further comprises prioritizing the plurality of restaurants for display using an indicator of the restaurant's popularity.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The method of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein prioritizing the restaurants for display further comprises prioritizing the plurality of restaurants for display using one of: an age attribute of the restaurant, a stature attribute of the restaurant, and an importance attribute of the restaurant.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The method of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein prioritizing the restaurants for display further comprises prioritizing the plurality of restaurants for display using a relationship of a restaurant to its place in a hierarchy of restaurants.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The method of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the ranking mechanism uses data harvested from a website about a restaurant to determine the restaurant's priority.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The method of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the ranking mechanism determines a restaurant's priority from a combination of weighted data from a plurality of meta attributes of the restaurant.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. A computer program product, comprising:
<claim-text>a non-transitory machine-readable storage medium having computer readable program code embodied therein for ranking restaurants comprising computer readable program code to:</claim-text>
<claim-text>receive non-cartographic information about a plurality of restaurants, each restaurant defined in an on-line forum, wherein the information is generated in the on-line forum;</claim-text>
<claim-text>store the non-cartographic information;</claim-text>
<claim-text>prioritize the plurality of restaurants for display on a map using the non-cartographic information and according to a ranking mechanism; and</claim-text>
<claim-text>providing the map and a plurality of icons, each icon corresponding to one of the plurality of restaurants, for display on a mobile device.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The computer program product of <claim-ref idref="CLM-00015">claim 15</claim-ref>, further comprising computer readable program code to prioritize the restaurants for display using one of: quality of information available about the restaurant, an attribute of a description of the restaurant, and an attribute of a definition of the restaurant.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The computer program product of <claim-ref idref="CLM-00015">claim 15</claim-ref>, further comprising computer readable program code to prioritize the plurality of restaurants for display using an indicator of the restaurant's popularity.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The computer program product of <claim-ref idref="CLM-00015">claim 15</claim-ref>, further comprising computer readable program code to prioritize the plurality of restaurants for display using one of: an age attribute of the restaurant, a stature attribute of the restaurant, and an importance attribute of the restaurant.</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The computer program product of <claim-ref idref="CLM-00015">claim 15</claim-ref>, further comprising computer readable program code to prioritize the plurality of restaurants for display using a relationship of a restaurant to its place in a hierarchy of restaurants.</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The computer program product of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the ranking mechanism uses data harvested from a website about a restaurant to determine the restaurant's priority.</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. The computer program product of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the ranking mechanism determines a restaurant's priority from a combination of weighted data from a plurality of meta attributes of the restaurant.</claim-text>
</claim>
</claims>
</us-patent-grant>
