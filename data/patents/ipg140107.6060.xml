<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08627183-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08627183</doc-number>
<kind>B1</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13100644</doc-number>
<date>20110504</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<us-term-of-grant>
<us-term-extension>211</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>03</class>
<subclass>M</subclass>
<main-group>13</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>714774</main-classification>
<further-classification>714758</further-classification>
<further-classification>714766</further-classification>
</classification-national>
<invention-title id="d2e53">Systems and methods for storing variable rate product codes</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>2008/0222490</doc-number>
<kind>A1</kind>
<name>Leung et al.</name>
<date>20080900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>714763</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>2010/0122148</doc-number>
<kind>A1</kind>
<name>Flynn et al.</name>
<date>20100500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>714773</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2010/0253555</doc-number>
<kind>A1</kind>
<name>Weingarten et al.</name>
<date>20101000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>341 51</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2010/0293440</doc-number>
<kind>A1</kind>
<name>Thatcher et al.</name>
<date>20101100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>714764</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2011/0191651</doc-number>
<kind>A1</kind>
<name>Chen et al.</name>
<date>20110800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>714755</main-classification></classification-national>
</us-citation>
<us-citation>
<nplcit num="00006">
<othercit>Chuan-Sheng Lin; Kuang-Yuan Chen; Yu-Hsian Wang; Lan-Rong Dung; , &#x201c;A NAND Flash Memory Controller for SD/MMC Flash Memory Card,&#x201d; Electronics, Circuits and Systems, 2006. ICECS '06. 13th IEEE International Conference on , vol., no., pp. 1284-1287, Dec. 10-13, 2006.</othercit>
</nplcit>
<category>cited by examiner</category>
</us-citation>
<us-citation>
<nplcit num="00007">
<othercit>Changgeun Kim; Sunwook Rhee; Juhee Kim; Yong Jee; , &#x201c;Product Reed-Solomon Codes for Implementing NAND Flash Controller on FPGA Chip,&#x201d; Computer Engineering and Applications (ICCEA), 2010 Second International Conference on , vol. 1, no., pp. 281-285, Mar. 19-21, 2010.</othercit>
</nplcit>
<category>cited by examiner</category>
</us-citation>
</us-references-cited>
<number-of-claims>17</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>714774</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>714758</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>714766</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>5</number-of-drawing-sheets>
<number-of-figures>6</number-of-figures>
</figures>
<us-related-documents>
<us-provisional-application>
<document-id>
<country>US</country>
<doc-number>61333522</doc-number>
<date>20100511</date>
</document-id>
</us-provisional-application>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Chen</last-name>
<first-name>Zhengang</first-name>
<address>
<city>San Jose</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Yang</last-name>
<first-name>Xueshi</first-name>
<address>
<city>Cupertino</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Chen</last-name>
<first-name>Zhengang</first-name>
<address>
<city>San Jose</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Yang</last-name>
<first-name>Xueshi</first-name>
<address>
<city>Cupertino</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Marvell International Ltd.</orgname>
<role>03</role>
<address>
<city>Hamilton</city>
<country>BM</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Britt</last-name>
<first-name>Cynthia</first-name>
<department>2117</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">Systems and methods for storing variable rate product codes are provided. A plurality of row code parity symbols is stored on a storage unit. Each symbol of the row code parity symbols is associated with a different one of a plurality of equal sized portions of information. A plurality of column code parity symbols is computed. Each of the plurality of column code parity symbols is computed based on (1) a respective one of the plurality of row code parity symbols and (2) the portion of information associated with the respective one of the plurality of row code parity symbols. Each of the plurality of column code parity symbols corresponds to one of at least two code rates. The plurality of column code parity symbols is stored on the storage unit.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="141.22mm" wi="176.95mm" file="US08627183-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="243.84mm" wi="189.82mm" file="US08627183-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="253.66mm" wi="170.01mm" orientation="landscape" file="US08627183-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="253.07mm" wi="177.63mm" orientation="landscape" file="US08627183-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="201.00mm" wi="161.12mm" orientation="landscape" file="US08627183-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="166.37mm" wi="186.18mm" file="US08627183-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">CROSS REFERENCE TO RELATED APPLICATION</heading>
<p id="p-0002" num="0001">This disclosure claims the benefit of U.S. Provisional Application No. 61/333,522, filed May 11, 2010, which is hereby incorporated by reference herein in its entirety.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">BACKGROUND</heading>
<p id="p-0003" num="0002">The background description provided herein is for the purpose of generally presenting the context of the disclosure. Work of the inventors hereof, to the extent the work is described in this background section, as well as aspects of the description that may not otherwise qualify as prior art at the time of filing, are neither expressly nor impliedly admitted as prior art against the present disclosure.</p>
<p id="p-0004" num="0003">Traditional multi-level cell (MLC) NAND flash memory devices are prone to variable error rates within each device due to various conditions. For example, the locations of pages and bits within pages stored on the devices differ and thus are subject to different disturbances causing errors. Ways to reduce such variable error rates may include providing write precompensation or storing variable error correction codes (ECC).</p>
<p id="p-0005" num="0004">However, such an error reduction schemes are insufficient to handle failures in flash devices beyond random bit errors or noise. More specifically, traditional error reduction schemes are insufficient to compensate for entire wordline failure, multiple page failure, charge pump failure, address decoder failure and/or block failure. One way to mitigate page/block failure may be to use redundant array of independent devices (RAID). However, RAID devices often cannot recover the data when there is more than a single page decoding failure. In addition, while storing variable ECC coding for different data sectors may mitigate such errors, the implementation of variable rate ECC coding in flash memory devices is difficult because these devices are configured to have fixed data sector and page sizes.</p>
<heading id="h-0003" level="1">SUMMARY</heading>
<p id="p-0006" num="0005">In accordance with the principles of the present disclosure, systems and methods are provided for storing variable rate product codes, and more particularly to storing variable rate column codes in flash memory devices (e.g., NAND logic based memory devices or other volatile or non-volatile memory devices).</p>
<p id="p-0007" num="0006">In some embodiments, a plurality of row code parity symbols may be stored on a storage unit. Each row code parity symbol of the row code parity symbols may be associated with a different one of a plurality of equal sized portions of information. In some implementations, each portion of the plurality of portions of information may correspond to a page of data. In some implementations, the storage unit may include a plurality of storage devices which may be of equal size. In some implementations, a total size of the plurality of portions of information may be predetermined and correspond to a maximum storage capacity of one of the plurality of storage devices. A plurality of column code parity symbols may be stored on the storage unit. In some implementations, the storage unit may be a flash memory that includes a plurality of NAND storage devices.</p>
<p id="p-0008" num="0007">In some embodiments, a plurality of column code parity symbols may be computed. Each of the plurality of column code parity symbols may be computed based on (1) a respective one of the plurality of row code parity symbols and (2) the portion of information associated with the respective one of the plurality of row code parity symbols. In some implementations, each of the plurality of column code parity symbols may correspond to one of at least two different code rates. In some implementations, each column code parity symbol of the plurality of column code parity symbols that corresponds to a first of the at least two code rates may be of a first size corresponding to the size of one of the plurality of portions of information. Each column code parity symbol of the plurality of column code parity symbols that corresponds to a second of the at least two code rates may be of a second size corresponding to the size of two of the plurality of portions of information.</p>
<p id="p-0009" num="0008">In some embodiments, the storage unit may include a plurality of equal sized storage devices. The plurality of row code parity symbols may be a first plurality of row code parity symbols that are stored in a first of a plurality of storage devices. The plurality of column code parity symbols may be stored in a second of the plurality of storage devices. A second plurality of row code parity symbols may be stored in a third of the plurality of storage devices. Each of the second plurality of row code parity symbols may be associated with a different one of another plurality of equal sized portions of information. Each of the another plurality of portions of information may be of a size equal to each of the plurality of portions of information.</p>
<p id="p-0010" num="0009">In some implementations, a first column code parity symbol of the plurality of column code parity symbols may be computed based on (1) a first row code parity symbol from the first plurality of row code parity symbols, (2) the portion of information associated with the first row code parity symbol, (3) a second row code parity symbol from the second plurality of row code parity symbols, and (4) the portion of information associated with the second row code parity symbol. A second column code parity symbol of the plurality of column code parity symbols may be computed based on (1) a third row code parity symbol from the first plurality of row code parity symbols, (2) the portion of information associated with the third row code parity symbol, (3) a fourth row code parity symbol from the second plurality of row code parity symbols, and (4) the portion of information associated with the fourth row code parity symbol. The first column code parity symbol may correspond to a first of the at least two code rates and the second column code parity symbol may correspond to a second of the at least two code rates different from the first code rate. In some implementations, some but not all of the plurality of column code parity symbols include at least two portions, where a first of the at least two portions is stored in the second storage device and a second of the at least two portions is stored in a fourth of the plurality of storage devices.</p>
<p id="p-0011" num="0010">In some embodiments, the storage unit may include a storage device with multiple planes. A first symbol of the plurality of row code parity symbols may include a first set of row code parity bits. Each subset of the first set of row code parity bits may be associated with a different equal sized segment of the portion of information that corresponds to the first symbol. A second symbol of the plurality of row code parity symbols may include a second set of row code parity bits. Each subset of the second set of row code parity bits may be associated with a different equal sized segment of the portion of information that corresponds to the second symbol. The first and second row code parity symbols may be stored in each of the multiple planes. A first of the plurality of column code parity symbols may be stored only in one of the multiple planes and a second of the plurality of column code parity symbols may be stored in each of the multiple planes.</p>
<p id="p-0012" num="0011">In some embodiments, one of the at least two code rates may be selected for computing each of the column code parity symbols based on a storage location of the respective one of the plurality of row code parity symbols in the storage unit.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0013" num="0012">The above and other features of the present disclosure, its nature and various advantages will be more apparent upon consideration of the following detailed description, taken in conjunction with the accompanying drawings in which:</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 1</figref> is a diagram of an illustrative variable rate product codes system in accordance with an embodiment of the present disclosure;</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 2</figref> is a diagram of an illustrative product code generation circuitry in accordance with an embodiment of the present disclosure;</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIGS. 3-5</figref> are diagrams of an illustrative data storage unit in accordance with various embodiments of the present disclosure; and</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 6</figref> illustrates a process for storing variable rate product codes in accordance with an embodiment of the present disclosure.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0018" num="0017">This disclosure generally relates to storing variable rate product codes. For illustrative purposes, this disclosure is described in the context of flash memory devices that are NAND logic based. It should be understood, however, that this disclosure is applicable to any other suitable volatile or non-volatile memory device having fixed block sizes with dedicated data and parity information regions (e.g., MLC NAND flash memory, phase change memory, or magnetoresistive random access memory (MRAM)).</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 1</figref> is a diagram of an illustrative variable rate product codes system <b>100</b> in accordance with an embodiment of the present disclosure. System <b>100</b> includes a data reception unit <b>110</b>, product code generation circuitry <b>120</b>, data storage unit <b>130</b> and control circuitry <b>140</b>. Although the components shown in system <b>100</b> are drawn separately, the components may be implemented as separate devices on different integrated circuit (IC), as separate devices on the same IC, or any combination thereof. In addition, the components of system <b>100</b> may together be housed and used by a particular internal or external device or may be individually and independently used by internal or external devices. For example, system <b>100</b> may be a universal serial bus (USB) data storage system.</p>
<p id="p-0020" num="0019">Data reception unit <b>110</b> may be any suitable device or circuitry that is used to receive data. In some implementations, data reception unit <b>110</b> may be a receiver coupled or connected to an antenna. The receiver may demodulate, decode and output an information signal <b>112</b>. In some implementations, data reception unit <b>110</b> may be a storage device (e.g., a hard disk drive, random access memory (RAM) device, read only memory (ROM) device, flash storage device, or any other suitable volatile or non-volatile storage device). The storage device may be instructed by control circuitry <b>140</b> to read a section of data and may output the data as information signal <b>112</b>. In some implementations, data reception unit <b>110</b> may include a software application that outputs information signal <b>112</b> for subsequent storage on data storage unit <b>130</b>. In some implementations, data reception unit <b>112</b> may include USB communication components that are configured to receive data from an external component (e.g., a laptop, desktop, mobile phone or mobile device) and output information signal <b>112</b> that includes the data received from the external component.</p>
<p id="p-0021" num="0020">Information signal <b>112</b> may include data bits. The data bits in information signal <b>112</b> may be organized according to pages or page sizes. As defined herein, the term page or page size identifies the maximum amount of bits a storage device is configured to store for a given set of address locations. In particular, information signal <b>112</b> may be separated into pages of data bits having a predetermined size. The predetermined size of the pages may depend on the page size that data storage unit <b>130</b> is configured to store. In some implementations, the page size may be set by a manufacturer of data storage unit <b>130</b>. The number of user data per page (which may be specified in bytes), not including spare data (e.g., parity information, metadata or error correction code parity), is usually specified as a power of two. The number of spare data per page may also be specified by a manufacturer of data storage unit <b>130</b>. For example, one page may correspond to 8192+320 bytes of storage, where 8192 bytes are designated for user data and 320 bytes are designated for spare data.</p>
<p id="p-0022" num="0021">For example, data storage unit <b>130</b> may include a flash memory device that has one or more blocks of storage each configured to store a certain number of pages of data. The pages of data may each be 64 kilobytes in size. Accordingly, information signal <b>112</b> may be organized in pages each having 64 kilobytes of data. In some embodiments, a total size of the data in information signal <b>112</b> may correspond to the total number of pages that a particular block of the flash memory device is capable of storing. In some embodiments, data storage unit <b>130</b> may include multiple flash memory devices. In such circumstances, a total size of the data in information signal <b>112</b> corresponds to the total number of pages that all the flash memory devices in combination are capable of storing.</p>
<p id="p-0023" num="0022">Control circuitry <b>140</b> may be coupled to data storage unit <b>130</b> over communications link <b>142</b> and may determine the number of flash memory devices in data storage unit <b>130</b> and the characteristics of those devices (e.g., the maximum page and block size of each device). Control circuitry <b>140</b> may be coupled to data reception unit <b>110</b> over communications link <b>142</b> and may inform data reception unit <b>110</b> of the number of flash memory devices in data storage unit <b>130</b> and the characteristics of those devices. In some embodiments, data reception unit <b>110</b> may be coupled directly to data storage unit <b>130</b> and may determine the number of flash memory devices in data storage unit <b>130</b> and the characteristics of those devices without control circuitry <b>140</b>.</p>
<p id="p-0024" num="0023">Product code generation circuitry <b>120</b> receives information signal <b>112</b> and generates a variable rate product code based on the data in information signal <b>112</b>. A product code includes row code parities and column code parities. The row code parities correspond to different pages in devices and the column code parities cover data from more than one page. Storing row code parities and column code parities is referred to as a product code since the column code parities are computed based on the data in the pages and the row code parities (i.e., parity on parity codes).</p>
<p id="p-0025" num="0024">In some embodiments, product code generation circuitry <b>120</b> may compute row code parity symbols for different portions of data in information signal <b>112</b>. In some implementations, each of the portions of data in information signal <b>112</b> is of equal size corresponding to a page size used in data storage unit <b>130</b>. For example, each portion of data in information signal <b>112</b> may correspond to 1 page 192 pages of total data and accordingly, 192 row code parity symbols may be computed for the total data in information signal <b>112</b>. Product code generation circuitry <b>120</b> may compute the row code parity symbols in accordance with any suitable error correction coding algorithm (e.g., any systematic or non-systematic code, such as a Hamming code, BCH code, Reed-Solomon Code, Low-density-parity code or any other suitable block code or convolutional code algorithm). As used herein, the phrase &#x201c;row code parity symbol&#x201d;, is interchangeable with the phrase &#x201c;row code&#x201d;, and refers to parity data computed for a segment of user data stored on a storage device, where the segment of user data includes one or more pages of the user data or a predetermined amount of user data.</p>
<p id="p-0026" num="0025">Product code generation circuitry <b>120</b> may compute column codes based a respective one of the plurality of row code parity symbols and the portion of information associated with the respective one of the plurality of row code parity symbols. Product code generation circuitry <b>120</b> may compute the column codes in accordance with any suitable error correction coding algorithm (e.g., any systematic or non-systematic code, such as a Hamming code, BCH code, Reed-Solomon Code, Low-density-parity code or any other suitable block code or convolutional code algorithm). As used herein, the phrase &#x201c;column code parity symbol&#x201d;, is interchangeable with the phrase &#x201c;column code&#x201d;, and refers to parity data computed for both multiple segments of user data stored on a storage device and any parity data associated with each of the segments (such as a row code parity symbol associated with each respective segments), where each segment of user data includes one or more pages of the user data or a predetermined amount of user data.</p>
<p id="p-0027" num="0026">Each of the computed column codes may correspond to one of at least two different code rates. For example, one code rate may produce a column code that occupies two pages of data on the flash memory device for every 32 total pages of data that are stored. A second code rate may produce a column code that occupies one page of data on the flash memory device for every 32 pages of data that are stored. Higher coding rates correspond to weaker or smaller column codes. In particular, a column code that occupies two pages of data may be stronger and more reliable than a column code that occupies one page of data. The code rate may be inversely proportional to the size of the column code.</p>
<p id="p-0028" num="0027">Control circuitry <b>140</b> may be coupled to product code generation circuitry <b>120</b> to select the code rate that is used for a particular portion of information signal <b>112</b>. A particular code rate may be selected based on the needs of an application. For example, an application that requires more reliability in the data, may require low code rates to be selected in computing the column codes more frequently than high code rates. The result is more storage in data storage unit <b>130</b> being used by the column codes than user data and row parity symbols. In some implementations, the code rate may be selected based on the storage location in data storage unit <b>130</b> (e.g., a location within a block of a given flash memory device) of a page of data or portion of information signal <b>112</b>.</p>
<p id="p-0029" num="0028">In some embodiments, the row code parity symbols are each fixed in size because the flash memory storage devices in data storage unit <b>130</b> have a fixed user sector size and physical page size limitation. More specifically, each page of user data has a predetermined amount of storage space dedicated to the row code parity symbol. In particular, the row code parity symbols are stored together with the user data on a given page. However, the column codes may vary in size or code rate since the column codes are stored on a page independent of the user data. More specifically, instead of storing the column code with a page of data, like the row code parity symbols, the column code may be stored entirely on a full page or multiple pages and may therefore be of any suitable size.</p>
<p id="p-0030" num="0029">In some implementations, a first set of flash memory storage devices (e.g., 6 storage devices) of data storage unit <b>130</b> are configured to store pages that include user data and row code parity symbols for the user data. In addition, a second set of flash memory storage devices (which may be of equal or larger size) of data storage unit <b>130</b> is configured to store column codes for the pages of data and row code parity symbols stored on the one or more flash memory storage devices. In some embodiments, at least one of the flash memory devices in the second set shared with the first set of flash memory storage devices and is therefore configured to store in some sections user data and row code parity symbols for the user data and in other sections other portions of column codes for the user data and row code parity symbols.</p>
<p id="p-0031" num="0030">Product code generation circuitry <b>120</b> outputs storage signal <b>122</b> that may include pages of information corresponding to portions of information received from data reception unit <b>110</b>, the row code parity symbols for each portion of information and the column codes that are computed. In some implementations, product code generation circuitry <b>120</b> outputs pages of data, where some pages include user data and a row code parity symbol and other pages include a column code or portions of a column code. Data storage unit <b>130</b> may store the portions of information on pages of one or more flash memory devices. Data storage unit <b>130</b> may include multiple flash memory devices or a single flash memory device with multiple planes. Data storage unit <b>130</b> is discussed in more detail below in connection with <figref idref="DRAWINGS">FIGS. 3-5</figref>.</p>
<p id="p-0032" num="0031">Data storage unit <b>130</b> may be any standalone or integrated electronic storage component or device. Data storage unit <b>130</b> may include any number of memory devices. The memory devices in data storage unit <b>130</b> may all be flash memory devices (e.g., NAND based flash storage devices) or a combination of flash memory devices and other non-flash storage devices (e.g., ROM, RAM, or any other suitable electronic storage device).</p>
<p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. 2</figref> is a diagram of an illustrative product code generation circuitry <b>120</b> in accordance with an embodiment of the present disclosure. Product code generation circuitry <b>120</b> includes code rate selection circuitry <b>200</b>, row code parity symbol generation unit <b>210</b> and column code generation unit <b>220</b>. Row code parity symbol generation unit <b>210</b> receives information signal <b>112</b> and control signal <b>142</b>. Row code parity symbol generation unit <b>220</b> computes a row code parity symbol for each of a plurality of different equal sized portions of information signal <b>112</b>.</p>
<p id="p-0034" num="0033">In some embodiments, control signal <b>142</b> may indicate to row code parity symbol generation unit <b>210</b> the page size and/or block size of the storage device of data storage unit <b>130</b>. Based on the information provided by control signal <b>142</b>, row code parity symbol generation unit <b>210</b> may determine or package information signal <b>112</b> into the appropriately sized page sizes that correspond or are identical to the page sizes or block sizes of the storage devices. In some implementations, information signal <b>112</b> is delivered to row code parity symbol generation unit <b>210</b> as pages of data that correspond to the page sizes or block sizes of the storage devices in storage unit <b>130</b>. Row code parity symbol generation unit <b>210</b> may include encoder or error correction circuitry configured to perform a coding algorithm for computing parity information (e.g., row code parity symbol) for a given portion of information signal <b>112</b>.</p>
<p id="p-0035" num="0034">For example, when the portion of information signal <b>112</b> is a page size of data, row code parity symbol generation unit <b>220</b> computes parity information for that page of data. Portion of information signal <b>112</b> may include any number of pages of data. When portions of information signal <b>112</b> includes multiple pages of data, row code parity symbol includes multiple sets of parity information, where each set is computed for a given one of the pages of data. In some implementations, the row code parity symbol may include a single set of parity bits computed based on the entire portion of information signal that includes multiple pages. In such circumstances, the row code parity symbol may be equally distributed among the free space in the pages allocated for error correction.</p>
<p id="p-0036" num="0035">In some embodiments, row code parity symbol generation unit <b>210</b> may include multiple encoders or error correction code generation circuitries. In such circumstances, row code parity symbol generation unit <b>210</b> may generate row code parity symbols for multiple portions of information signal <b>112</b> simultaneously. For example, row code parity symbol generation unit <b>210</b> may generate parity bits for each of multiple pages of data simultaneously. In such circumstances, row code parity symbol generation unit <b>210</b> may output all of the simultaneously computed row code parity symbols and portions of information signal <b>112</b> to column code generation unit <b>220</b>. The portion of information signal <b>112</b> corresponding to a given row code parity symbol may be configured to be stored across the same page of multiple storage devices, multiple different pages of multiple storage device and/or multiple planes of a single data storage device of data storage unit <b>130</b>.</p>
<p id="p-0037" num="0036">Code rate selection circuitry <b>200</b> may receive control signal <b>142</b> and may select between a plurality of code rates based on the control signal <b>142</b>. In some implementations, code rate selection circuitry <b>200</b> may be coupled to row code parity symbol generation unit <b>210</b> via communications path <b>202</b>. Row code parity symbol generation unit <b>210</b> may indicate to code rate selection circuitry <b>200</b> which page of data is currently being encoded (e.g., which page of data of information signal <b>112</b> is being processed for computing row code parity symbols). Based on the indication received from row code parity symbol generation unit <b>210</b>, code rate selection circuitry <b>200</b> may determine the storage location corresponding to the page of data being processed and may select between the plurality of code rates based on the storage location of the page of data.</p>
<p id="p-0038" num="0037">Code rate selection circuitry <b>200</b> may be coupled via communications path <b>202</b> to column code generation unit <b>220</b>. Code rate selection circuitry <b>200</b> may indicate via communications path <b>202</b> to column code generation unit <b>220</b> which code rate to use to encode a given set of row code parity symbols and portion of information signal <b>112</b>. In some implementations, column code generation unit <b>220</b> may include multiple error correction code circuitries each configured to encode data at a different rate. Each of the multiple error correction code circuitries may be coupled to receive the row code parity symbols and portions of information signal <b>112</b> and generate a column code at the corresponding rate. The outputs of each of the error correction code circuitries may be coupled to a multiplexer or selection circuit which is controlled by a signal received from code rate selection circuitry <b>200</b>. In some implementations, column code generation unit <b>220</b> may include a single error correction code circuitry that is configured to and is capable of encoding data at multiple code rates. In such circumstances, the code rate of the multiple code rates used by the single error correction code circuitry may be selected by a code rate selection input signal.</p>
<p id="p-0039" num="0038">For example, the data inputs of the multiplexer or selection circuit may be coupled respectively to the outputs of the error code correction circuitries and the control input of the multiplexer or selection circuit may be coupled to an output signal of code rate selection circuitry <b>200</b>. Accordingly, when a high code rate is needed for a given set of row code parity symbols and corresponding portion of information signal <b>112</b>, code rate selection circuitry <b>200</b> may select the input of the multiplexer corresponding to the output of the high code rate error code correction circuitry for output to storage unit <b>130</b>. Alternatively, when a low code rate is needed for a given set of row code parity symbols and corresponding portion of information signal <b>112</b>, code rate selection circuitry <b>200</b> may instead select the input of the multiplexer corresponding to the output of the low code rate error code correction circuitry for output to storage unit <b>130</b>.</p>
<p id="p-0040" num="0039">Row code parity symbol generation unit <b>210</b> outputs row code parity symbols that are computed along with the equal sized portions of information signal <b>112</b> corresponding to the computed row code parity symbols via communications path <b>212</b> to column code generation unit <b>220</b>. Column code generation unit <b>220</b> may compute a column code based on one of the portions of information signal <b>112</b> and the row code parity symbol corresponding to the portion of information signal <b>112</b> using a selected one of at least two code rates. For example, column code generation unit <b>220</b> may receive 30 pages of user data as the portion of information signal <b>112</b> and a set of 30 row code parity bits each corresponding to a respective one of the 30 pages of user data as the row code parity symbol. Column code generation unit <b>220</b> may compute a column code using, for example, a high code rate based on the 30 pages of user data and the set of 30 row code parity bits. The column code may be two pages in size. Similarly, column code generation unit <b>220</b> may receive 29 pages of user data as another portion of information signal <b>112</b> and a set of 29 row code parity bits each corresponding to a respective one of the 29 pages of user data as the row code parity symbol. Column code generation unit <b>220</b> may compute a column code using, for example, a low code rate based on the 29 pages of user data and the set of 29 row code parity bits.</p>
<p id="p-0041" num="0040">In some embodiments, column code generation unit <b>220</b> may include a first set of encoders or error correction circuitries having one coding rate and a second set of encoders or error correction circuitries having a different coding rate. Alternatively, one set of multiple encoders or error correction circuitries that support multiple coding rates (selected using a signal received from code rate selection circuitry <b>200</b>) may be provided in column code generation unit <b>220</b>. The set of encoders or error correction circuitries may operate on different portions of information signal <b>112</b> and corresponding row code parity symbols in parallel to compute column codes for those portions and row code parity symbols simultaneously.</p>
<p id="p-0042" num="0041">In some embodiments, control signal <b>142</b> may indicate to column code generation unit <b>220</b> the page size and/or block size of the storage device of data storage unit <b>130</b>. Based on the information provided by control signal <b>142</b>, column code generation unit <b>220</b> may determine or package the computed column code into the appropriately sized page sizes that correspond or are identical to the page sizes or block sizes of the storage devices.</p>
<p id="p-0043" num="0042">The outputs of row code parity symbol generation unit <b>210</b> and column code generation unit <b>220</b> may be combined for storage at the designated locations in data storage unit <b>130</b>. In particular, the portion of information signal <b>112</b> and the corresponding row code parity symbol may be output to data storage unit <b>130</b> for storage in one or more pages of one or more storage devices and the column code may be output to data storage unit <b>130</b> for storage in one or more other pages of one or more storage devices. The output to data storage unit <b>130</b> may be on a burst cycle basis where all of the pages for each of the storage devices in data storage unit <b>130</b> are stored or sent for storage simultaneously. Alternatively, the pages may be sent by each of row code parity symbol generation unit <b>210</b> and column code generation unit <b>220</b> individually as they are computed or generated to a particular storage device of data storage unit <b>130</b>.</p>
<p id="p-0044" num="0043"><figref idref="DRAWINGS">FIGS. 3-5</figref> are diagrams that collectively illustrative data storage unit <b>130</b> in accordance with various embodiments of the present disclosure. In particular, each of <figref idref="DRAWINGS">FIGS. 3-5</figref> represents a different way in which a data segment for which a row code parity symbol is computed and for which the column code is computed are arranged in data storage unit <b>130</b>. In particular, in <figref idref="DRAWINGS">FIG. 3</figref>, each data segment includes a single row across multiple storage devices, where the row code parity symbol is stored with each page of data and the column code for that segment and row code parity symbols is stored in the same row of one of the storage devices as the data segment and row code parity symbol. In <figref idref="DRAWINGS">FIG. 4</figref>, each data segment includes a set of rows across multiple storage devices and a set of columns of those rows across the multiple devices, where the row code parity symbol is stored with each page of data and the column code for that segment and row code parity symbols may be stored in an adjacent row and one or more columns of one of the storage devices. In <figref idref="DRAWINGS">FIG. 5</figref>, each data segment includes a set of rows across multiple planes of a storage device and a set of columns of those rows across the multiple planes, where the row code parity symbol is stored with each page of data and the column code for that segment and row code parity symbols may be stored in an adjacent row and one or more columns of one of the planes of the storage device.</p>
<p id="p-0045" num="0044"><figref idref="DRAWINGS">FIG. 3</figref> is a diagram <b>300</b> of an illustrative data storage unit <b>130</b> in accordance with an embodiment of the present disclosure. Data storage unit <b>130</b> may include storage devices <b>310</b><i>a</i>-<i>c</i>. Storage devices <b>310</b><i>a</i>-<i>c </i>may include any NAND storage devices (e.g., flash memory, MLC NAND storage devices, or other suitable electronic volatile or non-volatile storage device). Storage devices <b>310</b><i>a</i>-<i>c </i>are each configured to store data in blocks, where each block stores one or more pages <b>320</b>. In some embodiments, data storage unit <b>130</b> includes 32 identical storage devices <b>310</b>, where each of the identical storage devices is configured to store 192 pages per storage block.</p>
<p id="p-0046" num="0045">In some embodiments, product code generation circuitry <b>120</b> may store a first portion of information <b>330</b> of information signal <b>112</b> in storage devices <b>310</b><i>a</i>-<i>b</i>. In some implementations, first portion of information <b>330</b> may include 31 pages of data. Product code generation circuitry <b>120</b> may compute a first row code parity symbol <b>324</b> for first portion of information <b>330</b> and store first row code parity symbol <b>324</b> in storage devices <b>310</b><i>a</i>-<i>b </i>together with first portion of information <b>330</b>. For example, first row code parity symbol <b>324</b> may include multiple sets of row code parity bits that are computed by row code parity symbol generation unit <b>210</b>. The number of sets of row code parity bits may correspond to and be the same as the number of pages in first portion of information <b>330</b>. In some implementations, each set of row code parity bits <b>322</b> may be appended or stored together with a corresponding page <b>320</b> of first portion of information <b>330</b>.</p>
<p id="p-0047" num="0046">In some embodiments, first portion of information <b>330</b> may be stored in one block of each storage device <b>310</b><i>a</i>-<i>b </i>at the first page of each storage device <b>310</b><i>a</i>-<i>b</i>. For example, first portion of information <b>330</b> may include 31 pages of data. The 31 pages of data may be spread across the first page of storage location of each of 31 storage devices <b>310</b><i>a</i>-<i>b</i>. Similarly, first row code parity symbol <b>324</b> including the sets of row code parity bits may be stored together with first portion of information <b>330</b> across the first page of each storage device <b>310</b><i>a</i>-<i>b. </i></p>
<p id="p-0048" num="0047">In some embodiments, product code generation circuitry <b>120</b> may compute a first column code <b>350</b> based on first portion of information <b>330</b> and first row code parity symbol <b>324</b>. Product code generation circuitry <b>120</b> may be instructed to compute first column code <b>350</b> based on a first code rate (e.g., a high code rate corresponding to a weak column code). Accordingly, first column code <b>350</b> may be one page in size. Product code generation circuitry <b>120</b> may store first column code <b>350</b> in storage device <b>310</b><i>c. </i></p>
<p id="p-0049" num="0048">In some implementations, first column code <b>350</b> may be stored at a page of storage device <b>310</b> that corresponds to the locations at which first portion of information <b>330</b> and first row code parity symbol <b>324</b> are stored. In particular, when first portion of information <b>330</b> and first row code parity symbol <b>324</b> are stored across the first page of each storage device <b>310</b><i>a</i>-<i>b</i>, first column code <b>350</b> may be stored at the first page of storage device <b>310</b><i>c. </i></p>
<p id="p-0050" num="0049">In some embodiments, product code generation circuitry <b>120</b> may store a second portion of information <b>340</b> of information signal <b>112</b> in storage devices <b>310</b><i>a</i>-<i>b</i>. In some implementations, second portion of information <b>340</b> may include 30 pages of data. In some implementations, second portion of information <b>340</b> may include 31 pages of data. In some implementations, each portion <b>330</b> and <b>340</b> of information may be of an identical size.</p>
<p id="p-0051" num="0050">Product code generation circuitry <b>120</b> may compute a second row code parity symbol <b>326</b> for second portion of information <b>340</b> and store second row code parity symbol <b>326</b> in storage devices <b>310</b><i>a</i>-<i>b </i>together with second portion of information <b>340</b>. Second row code parity symbol <b>326</b> may be identical in size as first row code parity symbol <b>324</b>. The sizes of first and second row code parity symbols <b>324</b> and <b>326</b> may be constrained and predetermined based on the configuration and page size of each storage device <b>310</b><i>a</i>-<i>b</i>. For example, second row code parity symbol <b>326</b> may include multiple sets of row code parity bits that are computed by row code parity symbol generation unit <b>210</b>. The number of sets of row code parity bits may correspond to and be the same as the number of pages in second portion of information <b>340</b>. In some implementations, each set of row code parity bits may be appended or stored together with a corresponding page of second portion of information <b>340</b>.</p>
<p id="p-0052" num="0051">In some embodiments, second portion of information <b>340</b> may be stored in one block of each storage device <b>310</b><i>a</i>-<i>b </i>at a next available free page (e.g., the second page) of each storage device <b>310</b><i>a</i>-<i>b</i>. For example, second portion of information <b>340</b> may include 30 or 31 pages of data. The 30 or 31 pages of data may be spread across the second page of storage location of each of 30 or 31 storage devices <b>310</b><i>a</i>-<i>b</i>. Similarly, second row code parity symbol <b>326</b> including the sets of row code parity bits may be stored together with second portion of information <b>340</b> across the second page of each storage device <b>310</b><i>a</i>-<i>b. </i></p>
<p id="p-0053" num="0052">In some embodiments, product code generation circuitry <b>120</b> may compute a second column code <b>360</b> based on second portion of information <b>340</b> and second row code parity symbol <b>326</b>. Product code generation circuitry <b>120</b> may be instructed to compute second column code <b>360</b> based on a second code rate (e.g., a slow code rate corresponding to a strong column code). The second code rate used to generate second column code <b>360</b> may be slower than the first code rate used to generate first column code <b>350</b>. Accordingly, second column code <b>360</b> may be larger than first column code <b>350</b>. For example, second column code <b>360</b> may be two pages in size. Product code generation circuitry <b>120</b> may store second column code <b>360</b> in storage devices <b>310</b><i>b </i>and <b>310</b><i>c</i>. In particular, because second column code <b>360</b> is larger than a page size of storage device <b>310</b><i>c</i>, second column code <b>360</b> may be partitioned into at least two portions where a first portion of second column code <b>360</b> is stored in one storage device <b>310</b><i>b </i>and a second portion of second column code <b>360</b> is stored in another storage device <b>310</b><i>c. </i></p>
<p id="p-0054" num="0053">In some embodiments, the pages of at least one of storage devices <b>310</b><i>a</i>-<i>c </i>may be used to store (1) pages or segments of portions of information <b>330</b> and <b>340</b> with corresponding sets of row code parity bits of first and second row code parity symbols <b>324</b> and <b>326</b> as well as (2) portions of column codes (e.g., second column code <b>360</b>). In some implementations, the pages of at least one of storage devices <b>310</b><i>a</i>-<i>c </i>may be used to exclusively or only store pages or segments of portions of information <b>330</b> and <b>340</b> with corresponding sets of row code parity bits of first and second row code parity symbols <b>324</b> and <b>326</b>. In some implementations, the pages of at least one of storage devices <b>310</b><i>a</i>-<i>c </i>may be used to exclusively or only store portions of column codes (e.g., second column code <b>360</b>) or entire column codes (e.g., first column code <b>350</b>).</p>
<p id="p-0055" num="0054">In some implementations, each portion of second column code <b>360</b> may be stored at a page of storage devices <b>310</b><i>b</i>-<i>c </i>that corresponds to the locations at which second portion of information <b>340</b> and second row code parity symbol <b>326</b> are stored. In particular, when second portion of information <b>340</b> and second row code parity symbol <b>326</b> are stored across the second page of some of storage devices <b>310</b>, each portion of second column code <b>360</b> may be stored at the second page of each storage device <b>310</b><i>b</i>-<i>c. </i></p>
<p id="p-0056" num="0055">In some embodiments, the last two portions of information stored in data storage unit <b>130</b> may be configured to have low code rate column codes computed and stored. In such circumstances, each of the last two portions of information may each include 30 pages of data stored across the last two pages of each storage device <b>310</b>. In addition, the column codes computed based on the last two portions of information and corresponding row code parity symbols may be at least two pages in size. Accordingly, each portion of the last two column codes may be stored across the last two pages of each storage device <b>310</b><i>b </i>and <b>310</b><i>c. </i></p>
<p id="p-0057" num="0056"><figref idref="DRAWINGS">FIG. 4</figref> is a diagram <b>400</b> of an illustrative data storage unit <b>130</b> in accordance with an embodiment of the present disclosure. Data storage unit <b>130</b> may include storage devices <b>410</b><i>a</i>-<i>c</i>. Storage devices <b>410</b><i>a</i>-<i>c </i>may include any NAND storage devices (e.g., flash memory, MLC NAND storage devices, or other suitable electronic volatile or non-volatile storage device). Storage devices <b>410</b><i>a</i>-<i>c </i>are each configured to store data in blocks, where each block stores one or more pages <b>420</b>. In some embodiments, data storage unit <b>130</b> includes 8 identical storage devices <b>410</b>, where each of the identical storage devices is configured to store 192 pages per storage block.</p>
<p id="p-0058" num="0057">In some embodiments, product code generation circuitry <b>120</b> may store a first portion of information <b>430</b> of information signal <b>112</b> in storage devices <b>410</b><i>a</i>-<i>c</i>. In some implementations, first portion of information <b>430</b> may include 23 pages of data. Product code generation circuitry <b>120</b> may compute a first row code parity symbol <b>424</b> for first portion of information <b>430</b> and store first row code parity symbol <b>424</b> in storage devices <b>410</b><i>a</i>-<i>c </i>together with first portion of information <b>430</b>. For example, first row code parity symbol <b>424</b> may include multiple sets of row code parity bits that are computed by row code parity symbol generation unit <b>210</b>. The number of sets of row code parity bits may correspond to and be the same as the number of pages in first portion of information <b>430</b>. In some implementations, each set of row code parity bits <b>422</b> may be appended or stored together with a corresponding page <b>420</b> of first portion of information <b>430</b>. Row code parity bits <b>422</b> may include more or less bits than user data stored in page <b>420</b>.</p>
<p id="p-0059" num="0058">In some embodiments, first portion of information <b>430</b> may be stored in one block of each storage device <b>410</b><i>a</i>-<i>b </i>at the first, second and third pages of each storage device <b>410</b><i>a</i>-<i>b</i>. For example, first portion of information <b>430</b> may include 23 pages of data. The 23 pages of data may be spread across the first, second and third pages of storage locations of each of 8 storage devices <b>410</b> and the first and second pages of storage locations of another storage device <b>410</b>. Similarly, first row code parity symbol <b>424</b> including the sets of row code parity bits may be stored together with first portion of information <b>430</b> across the first, second and third pages of storage locations of each of 8 storage devices <b>410</b> and the first and second pages storage locations of another storage device <b>410</b>.</p>
<p id="p-0060" num="0059">In some embodiments, product code generation circuitry <b>120</b> may compute a first column code <b>450</b> based on first portion of information <b>430</b> and first row code parity symbol <b>424</b>. Product code generation circuitry <b>120</b> may be instructed to compute first column code <b>450</b> based on a first code rate (e.g., a high code rate corresponding to a weak column code). Accordingly, first column code <b>450</b> may be one page in size. Product code generation circuitry <b>120</b> may store first column code <b>450</b> in storage device <b>410</b><i>c</i>. In some implementations, first column code <b>450</b> may be stored in the next page of storage location following first portion of information <b>430</b> (e.g., the third page storage location of storage device <b>410</b><i>c</i>).</p>
<p id="p-0061" num="0060">In some embodiments, product code generation circuitry <b>120</b> may store a second portion of information <b>440</b> of information signal <b>112</b> in storage devices <b>410</b><i>a</i>-<i>c</i>. In some implementations, second portion of information <b>440</b> may include 22 pages of data. In some implementations, each portion <b>430</b> and <b>440</b> of information may be of an identical size.</p>
<p id="p-0062" num="0061">Product code generation circuitry <b>120</b> may compute a second row code parity symbol <b>426</b> for second portion of information <b>440</b> and store second row code parity symbol <b>426</b> in storage devices <b>410</b><i>a</i>-<i>c </i>together with second portion of information <b>440</b>. In some implementations, when first portion of information <b>430</b> and second portion of information <b>440</b> are identical in size, second row code parity symbol <b>426</b> may be identical in size as first row code parity symbol <b>424</b>. The sizes of first and second row code parity symbols <b>424</b> and <b>426</b> may be constrained and predetermined based on the configuration and page size of the storage location of each storage device <b>410</b><i>a</i>-<i>b</i>. For example, second row code parity symbol <b>426</b> may include multiple sets of row code parity bits that are computed by row code parity symbol generation unit <b>210</b>. The number of sets of row code parity bits may correspond to and be the same as the number of pages in second portion of information <b>440</b>. In some implementations, each set of row code parity bits may be appended or stored together with a corresponding page of second portion of information <b>440</b>. Alternatively, each set of row code parity bits may be stored in a separate storage location in one of storage devices <b>410</b>. In such circumstances, each set of row code parity bits may include or be associated with information that identifies the page of data to which the set of row code parity bits correspond.</p>
<p id="p-0063" num="0062">In some embodiments, second portion of information <b>440</b> may be stored in a block of each storage device <b>410</b><i>a</i>-<i>c </i>starting at a next available free page (e.g., the fourth page) of each storage device <b>410</b><i>a</i>-<i>c</i>. For example, second portion of information <b>440</b> may include 22 pages of data. The 22 pages of data may be spread across the fourth, fifth and sixth pages of storage locations of each of 7 storage devices <b>410</b><i>a</i>-<i>b </i>and the fourth storage location of another storage device <b>410</b>. Similarly, second row code parity symbol <b>426</b> including the sets of row code parity bits may be stored together with second portion of information <b>440</b> in a similar manner.</p>
<p id="p-0064" num="0063">In some embodiments, product code generation circuitry <b>120</b> may compute a second column code <b>460</b> based on second portion of information <b>440</b> and second row code parity symbol <b>426</b>. Product code generation circuitry <b>120</b> may be instructed to compute second column code <b>460</b> based on a second code rate (e.g., a slow code rate corresponding to a strong column code). The second code rate used to generate second column code <b>460</b> may be slower than the first code rate used to generate first column code <b>450</b>. Accordingly, second column code <b>460</b> may be larger than first column code <b>450</b>. For example, second column code <b>460</b> may be two pages in size. Product code generation circuitry <b>120</b> may store second column code <b>460</b> in two separate pages of storage locations of storage devices <b>410</b><i>c </i>(e.g., in the fifth and sixth pages of storage locations of storage device <b>410</b><i>c</i>). In particular, because second column code <b>460</b> is larger than a page size of storage device <b>410</b><i>c</i>, second column code <b>460</b> may be partitioned into at least two portions where a first portion of second column code <b>460</b> is stored in one page of storage device <b>410</b><i>c </i>and a second portion of second column code <b>460</b> is stored in another page of storage device <b>410</b><i>c. </i></p>
<p id="p-0065" num="0064">In some embodiments, each stored column code may include a set of information bits. The information bits may indicate the code rate corresponding to the stored column code. The information bits may also indicate whether the stored column code is partitioned into two or more portions. In addition, the information bits may indicate where and in which storage device each one of the portions of the column code is stored. For example, a column code that is partitioned into two portions that are stored in the same storage device may include information bits with a first portion of the column code that indicate the page location in the storage device for the second portion of the column code.</p>
<p id="p-0066" num="0065">In some embodiments, the pages of at least one of storage devices <b>410</b><i>a</i>-<i>c </i>may be used to store (1) pages or segments of portions of information <b>430</b> and <b>440</b> with corresponding sets of row code parity bits of first and second row code parity symbols <b>424</b> and <b>426</b> as well as (2) portions of column codes (e.g., second column code <b>460</b>). In some implementations, the pages of at least one of storage devices <b>410</b><i>a</i>-<i>b </i>may be used to exclusively or only store pages or segments of portions of information <b>430</b> and <b>440</b> with corresponding sets of row code parity bits of first and second row code parity symbols <b>424</b> and <b>426</b>. In some implementations, the pages of at least one of storage devices <b>410</b> may be used to exclusively or only column codes (e.g., first and second column code <b>450</b> and <b>460</b>).</p>
<p id="p-0067" num="0066"><figref idref="DRAWINGS">FIG. 5</figref> is a diagram of an illustrative data storage unit <b>130</b> in accordance with an embodiment of the present disclosure. Data storage unit <b>130</b> may include a single storage device <b>500</b> with first and second planes <b>510</b><i>a</i>-<i>b</i>. The storage device may include any NAND storage devices (e.g., flash memory, MLC NAND storage devices, or other suitable electronic volatile or non-volatile storage device). Each of planes <b>510</b><i>a</i>-<i>b </i>of storage device <b>500</b> may be identical and may be configured to store data in blocks, where each block stores one or more pages <b>520</b> of information. In some embodiments, data storage unit <b>130</b> includes storage device <b>500</b> with a storage block having two identical planes <b>510</b><i>a</i>-<i>b</i>, where each of the identical planes is configured to store 192 pages per storage block.</p>
<p id="p-0068" num="0067">In some embodiments, product code generation circuitry <b>120</b> may store a first portion of information <b>530</b> of information signal <b>112</b> in storage device <b>500</b>. In some implementations, first portion of information <b>530</b> may include 31 pages of data. Product code generation circuitry <b>120</b> may compute a first row code parity symbol <b>524</b> for first portion of information <b>530</b> and store first row code parity symbol <b>524</b> in storage device <b>500</b> together with first portion of information <b>530</b>. For example, first row code parity symbol <b>524</b> may include multiple sets of row code parity bits that are computed by row code parity symbol generation unit <b>210</b>. The number of sets of row code parity bits may correspond to and be the same as the number of pages in first portion of information <b>530</b>. In some implementations, each set of row code parity bits <b>522</b> may be appended or stored together with a corresponding page <b>520</b> of first portion of information <b>530</b>.</p>
<p id="p-0069" num="0068">In some embodiments, first portion of information <b>530</b> may be stored in one block of each plane <b>510</b><i>a</i>-<i>b </i>of storage device <b>500</b> at the first 16 pages of plane <b>510</b><i>a </i>and the first 15 pages of plane <b>510</b><i>b</i>. For example, first portion of information <b>530</b> may include 31 pages of data. The 31 pages of data may be spread across a set of pages of storage locations of each of plane <b>510</b><i>a</i>-<i>b</i>. Similarly, first row code parity symbol <b>524</b> including the sets of row code parity bits may be stored together with first portion of information <b>530</b> across the set of pages of storage locations of each plane <b>510</b><i>a</i>-<i>b </i>of storage devices <b>500</b>.</p>
<p id="p-0070" num="0069">In some embodiments, product code generation circuitry <b>120</b> may compute a first column code <b>550</b> based on first portion of information <b>530</b> and first row code parity symbol <b>524</b>. Product code generation circuitry <b>120</b> may be instructed to compute first column code <b>550</b> based on a first code rate (e.g., a high code rate corresponding to a weak column code). Accordingly, first column code <b>550</b> may be one page in size. Product code generation circuitry <b>120</b> may store first column code <b>550</b> in one of planes <b>510</b><i>a</i>-<i>b </i>of storage device <b>500</b>. In some implementations, first column code <b>550</b> may be stored in the next page of storage location in the same block as first portion of information <b>530</b> (e.g., the sixteenth page storage location of plane <b>510</b><i>b</i>).</p>
<p id="p-0071" num="0070">In some embodiments, product code generation circuitry <b>120</b> may store a second portion of information <b>540</b> of information signal <b>112</b> in storage devices <b>500</b>. In some implementations, second portion of information <b>540</b> may include 30 pages of data. In some implementations, each portion <b>530</b> and <b>540</b> of information may be of an identical size.</p>
<p id="p-0072" num="0071">Product code generation circuitry <b>120</b> may compute a second row code parity symbol <b>526</b> for second portion of information <b>540</b> and store second row code parity symbol <b>526</b> in storage device <b>500</b> together with second portion of information <b>540</b>. In some implementations, when first portion of information <b>530</b> and second portion of information <b>540</b> are identical in size, second row code parity symbol <b>526</b> may be identical in size as first row code parity symbol <b>524</b>. The sizes of first and second row code parity symbols <b>524</b> and <b>526</b> may be constrained and predetermined based on the configuration and page size of the storage location of each plane <b>510</b><i>a</i>-<i>b </i>of storage device <b>500</b>. For example, second row code parity symbol <b>526</b> may include multiple sets of row code parity bits that are computed by row code parity symbol generation unit <b>210</b>. The number of sets of row code parity bits may correspond to and be the same as the number of pages in second portion of information <b>540</b>. In some implementations, each set of row code parity bits may be appended or stored together with a corresponding page of second portion of information <b>540</b>. Alternatively, each set of row code parity bits may be stored in a separate storage location in storage device <b>500</b>. In such circumstances, each set of row code parity bits may include or be associated with information that identifies the page of data to which the set of row code parity bits correspond.</p>
<p id="p-0073" num="0072">In some embodiments, second portion of information <b>540</b> may be stored in an identical size block of each plane <b>510</b><i>a</i>-<i>b </i>starting at a next available free page (e.g., the 176<sup>th </sup>page) of each plane <b>510</b><i>a</i>-<i>b</i>. For example, second portion of information <b>540</b> may include 30 pages of data. The 30 pages of data may be spread across pages <b>176</b>-<b>190</b> of storage locations of each plane <b>510</b><i>a</i>-<i>b</i>. Similarly, second row code parity symbol <b>526</b> including the sets of row code parity bits may be stored together with second portion of information <b>540</b> in a similar manner.</p>
<p id="p-0074" num="0073">In some embodiments, product code generation circuitry <b>120</b> may compute a second column code <b>560</b> based on second portion of information <b>540</b> and second row code parity symbol <b>526</b>. Product code generation circuitry <b>120</b> may be instructed to compute second column code <b>560</b> based on a second code rate (e.g., a slow code rate corresponding to a strong column code). The second code rate used to generate second column code <b>560</b> may be slower than the first code rate used to generate first column code <b>550</b>. Accordingly, second column code <b>560</b> may be larger than first column code <b>550</b>. For example, second column code <b>560</b> may be two pages in size. Product code generation circuitry <b>120</b> may store second column code <b>560</b> in two separate pages of storage locations of storage device <b>500</b> (e.g., in page <b>191</b> of each plane <b>510</b><i>a</i>-<i>b </i>of storage device <b>500</b>). In particular, because second column code <b>560</b> is larger than a page size of storage device <b>500</b>, second column code <b>560</b> may be partitioned into at least two portions where a first portion of second column code <b>560</b> is stored in one page of storage device <b>500</b> (e.g., in the last page of plane <b>510</b><i>a</i>) and a second portion of second column code <b>560</b> is stored in another page of storage device <b>500</b> (e.g., in the last page of plane <b>510</b><i>b</i>). Alternatively, the first and second portions of second column code <b>560</b> may both be stored in the same plane of storage device <b>500</b> (e.g., in the last two pages of plane <b>510</b><i>a </i>or <b>510</b><i>b</i>).</p>
<p id="p-0075" num="0074">In some embodiments, each stored column code may include a set of information bits. The information bits may indicate the code rate corresponding to the stored column code. The information bits may also indicate whether the stored column code is partitioned into two or more portions. In addition, the information bits may indicate where and in which plane of the storage device each one of the portions of the column code is stored.</p>
<p id="p-0076" num="0075">In some embodiments, the pages of plane <b>510</b><i>a </i>and plane <b>510</b><i>b </i>of storage device <b>500</b> may be used to store (1) pages or segments of portions of information <b>530</b> and <b>540</b> with corresponding sets of row code parity bits of first and second row code parity symbols <b>524</b> and <b>526</b> as well as (2) portions of column codes (e.g., second column code <b>560</b>). In some implementations, the pages of plane <b>510</b><i>a </i>of storage devices <b>500</b> may be used to exclusively or only store pages or segments of portions of information <b>530</b> and <b>540</b> with corresponding sets of row code parity bits of first and second row code parity symbols <b>524</b> and <b>526</b> while the pages of plane <b>510</b><i>b </i>may be used to store column codes.</p>
<p id="p-0077" num="0076"><figref idref="DRAWINGS">FIG. 6</figref> illustrates a process <b>600</b> for storing variable rate product codes in accordance with an embodiment of the present disclosure. At <b>610</b>, a plurality of row code parity symbols are stored on a storage unit, where each symbol is associated with a different one of a plurality of equal sized portions of information. For example, first row code parity symbol <b>324</b> and second row code parity symbol <b>326</b> may be stored in storage devices <b>310</b><i>a</i>-<i>b </i>(<figref idref="DRAWINGS">FIG. 3</figref>). First row code parity symbol <b>324</b> is associated with first portion of information <b>330</b> and second row code parity symbol <b>326</b> is associated with second portion of information <b>340</b> which may be equal in size to first portion of information <b>330</b>.</p>
<p id="p-0078" num="0077">At <b>620</b>, a plurality of column codes are computed, where each of the plurality of column codes is computed based on (1) a respective one of the plurality of row code parity symbols and (2) the portion of information associated with the respective one of the plurality of row code parity symbols. Each of the plurality of column codes corresponds to one of at least two different code rates. For example, first column code <b>350</b> may be computed based on first row code parity symbol <b>324</b> and first portion of information <b>330</b> (<figref idref="DRAWINGS">FIG. 3</figref>). First column code <b>350</b> may correspond to a first code rate. Second column code <b>360</b> may be computed based on second row code parity symbol <b>326</b> and second portion of information <b>340</b>. Second column code <b>360</b> may correspond to a second code rate that is slower than the first code rate and accordingly, second column code <b>360</b> may be larger in size (e.g., two pages in size) than first column code <b>350</b> (e.g., first column code <b>350</b> may be one page in size).</p>
<p id="p-0079" num="0078">At <b>630</b>, the plurality of column codes are stored on the storage unit. First column code <b>350</b> and second column code <b>360</b> may be stored in storage devices <b>310</b><i>b</i>-<i>c </i>of storage unit <b>130</b> (<figref idref="DRAWINGS">FIG. 1</figref>).</p>
<p id="p-0080" num="0079">The foregoing describes systems and methods for storing variable rate product codes. The above described embodiments of the present disclosure are presented for the purposes of illustration and not of limitation. Furthermore, the present disclosure is not limited to a particular implementation. For example, one or more steps of methods described above may be performed in a different order (or concurrently) and still achieve desirable results. In addition, the disclosure may be implemented in hardware, such as on an application specific integrated circuit (ASIC) or on a field-programmable gate array (FPGA). The disclosure may also be implemented in software.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method for storing variable rate product codes, the method comprising:
<claim-text>storing, on a flash memory comprising a plurality of NAND storage devices, a plurality of row code parity symbols, each symbol being associated with a different one of a plurality of portions of information;</claim-text>
<claim-text>computing a plurality of column codes that includes a first column code and a second column code, wherein the first column code is computed based on</claim-text>
<claim-text>(1) a first of the plurality of row code parity symbols and</claim-text>
<claim-text>(2) the portion of information associated with the first of the plurality of row code parity symbols,</claim-text>
<claim-text>wherein the second column code is computed independently of the first of the plurality of row code parity symbols based on</claim-text>
<claim-text>(1) a second of the plurality of row code parity symbols and</claim-text>
<claim-text>(2) the portion of information associated with the second of the plurality of row code parity symbols, and wherein each of the plurality of column codes corresponds to one of at least two different code rates, and</claim-text>
<claim-text>wherein at least one of the code rates is selected based on a storage location of the respective one of the plurality of row code parity symbols in the flash memory; and</claim-text>
<claim-text>storing the plurality of column codes on the flash memory.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the flash memory comprises a plurality of equal sized storage devices, wherein a total size of the plurality of portions of information is predetermined and corresponds to a maximum storage capacity of one of the plurality of storage devices.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein each portion of the plurality of portions of information is of equal size and corresponds to a page of data.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the flash memory comprises a plurality of equal sized storage devices, wherein the plurality of row code parity symbols are a first plurality of row code parity symbols that are stored in a first of the plurality of storage devices, and wherein the plurality of column codes are stored in a second of the plurality of storage devices, further comprising:
<claim-text>storing, in a third of the plurality of storage devices, a second plurality of row code parity symbols each associated with a different one of another plurality of portions of information, wherein each of the another plurality of portions of information is of a size equal to each of the plurality of portions of information.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein:
<claim-text>the first column code of the plurality of column codes is computed based on a first row code parity symbol from the first plurality of row code parity symbols, the portion of information associated with the first row code parity symbol, a second row code parity symbol from the second plurality of row code parity symbols, and the portion of information associated with the second row code parity symbol;</claim-text>
<claim-text>the second column code of the plurality of column codes is computed based on a third row code parity symbol from the first plurality of row code parity symbols, the portion of information associated with the third row code parity symbol, a fourth row code parity symbol from the second plurality of row code parity symbols, and the portion of information associated with the fourth row code parity symbol; and</claim-text>
<claim-text>the first column code corresponds to a first of the at least two code rates and the second column code corresponds to a second of the at least two code rates different from the first code rate.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein some but not all of the plurality of column codes include at least two portions, and wherein a first of the at least two portions is stored in the second storage device and a second of the at least two portions is stored in a fourth of the plurality of storage devices.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein each column code that corresponds to a first of the at least two code rates is of a first size corresponding to the size of one of the plurality of portions of information, and wherein each column code that corresponds to a second of the at least two code rates is of a second size corresponding to the size of two of the plurality of portions of information.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein:
<claim-text>the flash memory comprises a storage device with multiple planes;</claim-text>
<claim-text>the first symbol of the plurality of row code parity symbols includes a first set of row code parity bits, each subset of the first set of row code parity bits being associated with a different equal sized segment of the portion of information that corresponds to the first symbol;</claim-text>
<claim-text>the second symbol of the plurality of row code parity symbols includes a second set of row code parity bits, each subset of the second set of row code parity bits being associated with a different equal sized segment of the portion of information that corresponds to the second symbol;</claim-text>
<claim-text>the first and second row code parity symbols are stored in each of the multiple planes; and</claim-text>
<claim-text>the first of the plurality of column codes is stored only in one of the multiple planes and the second of the plurality of column codes is stored in each of the multiple planes.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. A system for storing variable rate product codes, the system comprising:
<claim-text>a flash memory comprising a plurality of NAND storage devices; and</claim-text>
<claim-text>control circuitry configured to:</claim-text>
<claim-text>store, on the flash memory, a plurality of row code parity symbols, each symbol being associated with a different one of a plurality of portions of information;</claim-text>
<claim-text>compute a plurality of column codes that includes a first column code and a second column code, wherein the first column code is computed based on</claim-text>
<claim-text>(1) a first of the plurality of row code parity symbols and</claim-text>
<claim-text>(2) the portion of information associated with the first of the plurality of row code parity symbols,</claim-text>
<claim-text>wherein the second column code is computed independently of the first of the plurality of row code parity symbols based on</claim-text>
<claim-text>(1) a second of the plurality of row code parity symbols and</claim-text>
<claim-text>(2) the portion of information associated with the second of the plurality of row code parity symbols,</claim-text>
<claim-text>wherein each of the plurality of column codes corresponds to one of at least two code rates, and wherein at least one of the code rates is selected based on a storage location of the respective one of the plurality of row code parity symbols in the flash memory; and</claim-text>
<claim-text>store the plurality of column codes on the flash memory.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The system of <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the flash memory comprises a plurality of equal sized storage devices, wherein a total size of the plurality of portions of information is predetermined and corresponds to a maximum storage capacity of one of the plurality of storage devices.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The system of <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein each portion of the plurality of is of equal size portions of information and corresponds to a page of data.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The system of <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the flash memory comprises a plurality of equal sized storage devices, wherein the plurality of row code parity symbols are a first plurality of row code parity symbols that are stored in a first of the plurality of storage devices, wherein the plurality of column codes are stored in a second of the plurality of storage devices, and wherein the control circuitry is further configured to:
<claim-text>store, in a third of the plurality of storage devices, a second plurality of row code parity symbols each associated with a different one of another plurality of portions of information, wherein each of the another plurality of portions of information is of a size equal to each of the plurality of portions of information.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The system of <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein:
<claim-text>the first column code of the plurality of column codes is computed based on a first row code parity symbol from the first plurality of row code parity symbols, the portion of information associated with the first row code parity symbol, a second row code parity symbol from the second plurality of row code parity symbols, and the portion of information associated with the second row code parity symbol;</claim-text>
<claim-text>the second column code of the plurality of column codes is computed based on a third row code parity symbol from the first plurality of row code parity symbols, the portion of information associated with the third row code parity symbol, a fourth row code parity symbol from the second plurality of row code parity symbols, and the portion of information associated with the fourth row code parity symbol; and</claim-text>
<claim-text>the first column code corresponds to a first of the at least two code rates and the second column code corresponds to a second of the at least two code rates different from the first code rate.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The system of <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein some but not all of the plurality of column codes include at least two portions, and wherein a first of the at least two portions is stored in the second storage device and a second of the at least two portions is stored in a fourth of the plurality of storage devices.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The system of <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein each column code that corresponds to a first of the at least two code rates is of a first size corresponding to the size of one of the plurality of portions of information, and wherein each column code that corresponds to a second of the at least two code rates is of a second size corresponding to the size of two of the plurality of portions of information.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The system of <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein:
<claim-text>the flash memory comprises a storage device with multiple planes;</claim-text>
<claim-text>the first symbol of the plurality of row code parity symbols includes a first set of row code parity bits, each subset of the first set of row code parity bits being associated with a different equal sized segment of the portion of information that corresponds to the first symbol;</claim-text>
<claim-text>the second symbol of the plurality of row code parity symbols includes a second set of row code parity bits, each subset of the second set of row code parity bits being associated with a different equal sized segment of the portion of information that corresponds to the second symbol;</claim-text>
<claim-text>the first and second row code parity symbols are stored in each of the multiple planes; and</claim-text>
<claim-text>the first of the plurality of column codes is stored only in one of the multiple planes and the second of the plurality of column codes is stored in each of the multiple planes.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The system of <claim-ref idref="CLM-00009">claim 9</claim-ref> further comprising selection circuitry configured to select one of the at least two code rates, wherein the control circuitry is coupled to the selection circuitry and is further configured to compute each of the column codes based on the code rate selected by the selection circuitry. </claim-text>
</claim>
</claims>
</us-patent-grant>
