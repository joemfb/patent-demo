<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625225-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625225</doc-number>
<kind>B1</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13220507</doc-number>
<date>20110829</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<us-term-of-grant>
<us-term-extension>205</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>11</class>
<subclass>B</subclass>
<main-group>5</main-group>
<subgroup>09</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>11</class>
<subclass>B</subclass>
<main-group>5</main-group>
<subgroup>035</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>360 65</main-classification>
<further-classification>360 25</further-classification>
</classification-national>
<invention-title id="d2e53">Disk drive compensating for asymmetry of magnetoresistive read element</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5982173</doc-number>
<kind>A</kind>
<name>Hagen</name>
<date>19991100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6400518</doc-number>
<kind>B1</kind>
<name>Bhaumik et al.</name>
<date>20020600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>6449110</doc-number>
<kind>B1</kind>
<name>DeGroat et al.</name>
<date>20020900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>6587292</doc-number>
<kind>B1</kind>
<name>Ashley et al.</name>
<date>20030700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>6934100</doc-number>
<kind>B2</kind>
<name>Ueno</name>
<date>20050800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>7079342</doc-number>
<kind>B1</kind>
<name>Han et al.</name>
<date>20060700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>7161752</doc-number>
<kind>B1</kind>
<name>Cheng</name>
<date>20070100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>7203013</doc-number>
<kind>B1</kind>
<name>Han et al.</name>
<date>20070400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>7242545</doc-number>
<kind>B1</kind>
<name>Cheng</name>
<date>20070700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>7298570</doc-number>
<kind>B1</kind>
<name>Han</name>
<date>20071100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>7511910</doc-number>
<kind>B1</kind>
<name>Han</name>
<date>20090300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>7548389</doc-number>
<kind>B1</kind>
<name>Han</name>
<date>20090600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>7643233</doc-number>
<kind>B2</kind>
<name>Bliss et al.</name>
<date>20100100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>7817368</doc-number>
<kind>B1</kind>
<name>Han</name>
<date>20101000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>7848042</doc-number>
<kind>B1</kind>
<name>Marrow</name>
<date>20101200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>7881006</doc-number>
<kind>B2</kind>
<name>Raghunathan et al.</name>
<date>20110200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>7885031</doc-number>
<kind>B1</kind>
<name>Han</name>
<date>20110200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00018">
<document-id>
<country>US</country>
<doc-number>2002/0154430</doc-number>
<kind>A1</kind>
<name>Rae et al.</name>
<date>20021000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00019">
<document-id>
<country>US</country>
<doc-number>2003/0086195</doc-number>
<kind>A1</kind>
<name>Ashley et al.</name>
<date>20030500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>360 46</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00020">
<document-id>
<country>US</country>
<doc-number>2005/0180298</doc-number>
<kind>A1</kind>
<name>Horibe et al.</name>
<date>20050800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>3691241</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00021">
<document-id>
<country>US</country>
<doc-number>2005/0190471</doc-number>
<kind>A1</kind>
<name>Ueno</name>
<date>20050900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00022">
<document-id>
<country>US</country>
<doc-number>2011/0019301</doc-number>
<kind>A1</kind>
<name>Cao et al.</name>
<date>20110100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>360 39</main-classification></classification-national>
</us-citation>
</us-references-cited>
<number-of-claims>22</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>None</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>4</number-of-drawing-sheets>
<number-of-figures>8</number-of-figures>
</figures>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Wang</last-name>
<first-name>Alvin J.</first-name>
<address>
<city>Fremont</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Wang</last-name>
<first-name>Alvin J.</first-name>
<address>
<city>Fremont</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Western Digital Technologies, Inc.</orgname>
<role>02</role>
<address>
<city>Irvine</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Holder</last-name>
<first-name>Regina N</first-name>
<department>2688</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A disk drive is disclosed comprising a head actuated over a disk, the head comprising a magnetoresistive (MR) read element. An analog read signal emanating from the MR read element is amplified to generate an amplified analog read signal. The amplified analog read signal is filtered in continuous-time to extract a dc component. An amplitude of the amplified analog read signal is measured in continuous-time, and an asymmetry in the amplified analog read signal is estimated in response to the dc component and the amplitude. The amplified analog read signal is modified in response to the estimated asymmetry to generate a compensated analog read signal.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="192.19mm" wi="259.93mm" file="US08625225-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="230.97mm" wi="184.83mm" file="US08625225-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="262.72mm" wi="191.35mm" orientation="landscape" file="US08625225-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="263.06mm" wi="186.35mm" orientation="landscape" file="US08625225-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="253.32mm" wi="152.15mm" orientation="landscape" file="US08625225-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND</heading>
<p id="p-0002" num="0001">Disk drives comprise a disk and a head connected to a distal end of an actuator arm which is rotated about a pivot by a voice coil motor (VCM) to position the head radially over the disk. The disk comprises a plurality of radially spaced, concentric tracks for recording user data sectors and embedded servo sectors. The embedded servo sectors comprise head positioning information (e.g., a track address) which is read by the head and processed by a servo controller to control the velocity of the actuator arm as it seeks from track to track.</p>
<p id="p-0003" num="0002"><figref idref="DRAWINGS">FIG. 1</figref> shows a prior art disk format <b>2</b> comprising a number of servo tracks <b>4</b> defined by servo sectors <b>6</b><sub>0</sub>-<b>6</b><sub>N </sub>recorded around the circumference of each servo track. Each servo sector <b>6</b><sub>i </sub>comprises a preamble <b>8</b> for storing a periodic pattern, which allows proper gain adjustment and timing synchronization of the read signal, and a sync mark <b>10</b> for storing a special pattern used to symbol synchronize to a servo data field <b>12</b>. The servo data field <b>12</b> stores coarse head positioning information, such as a servo track address, used to position the head over a target data track during a seek operation. Each servo sector <b>6</b><sub>i </sub>further comprises groups of servo bursts <b>14</b> (A,B,C,D in the example shown), which are recorded with precise intervals and offsets relative to the track centerlines. The servo bursts <b>14</b> provide fine head position information used for centerline tracking while accessing a data track during write/read operations.</p>
<p id="p-0004" num="0003">Disk drives may employ a head having an inductive write element (coil) and a magnetoresistive (MR) read element. An MR read element may exhibit a non-linear response leading to asymmetrical positive/negative pulses in the read signal. Prior art techniques attempt to compensate for the MR asymmetry using a non-linear correction circuit implementing a second-order function:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>x+&#x3b2;x</i><sup>2</sup>.<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
The coefficient &#x3b2; in the above equation may be adapted using a learning algorithm that attempts to minimize an error metric. However, the error metric is typically measured by evaluating the read signal samples after being filtered by a continuous-time filter as well as a discrete-time equalizer. The latency of the continuous-time filter and discrete-time equalizer introduces a transport delay into the closed-loop adaptation system that degrades performance and increases convergence time.
</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0002" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0005" num="0004"><figref idref="DRAWINGS">FIG. 1</figref> shows a prior art disk format comprising a plurality of servo tracks defined by embedded servo sectors.</p>
<p id="p-0006" num="0005"><figref idref="DRAWINGS">FIG. 2A</figref> shows a disk drive according to an embodiment of the present invention comprising a head actuated over a disk, the head comprising an MR read element.</p>
<p id="p-0007" num="0006"><figref idref="DRAWINGS">FIG. 2B</figref> is a flow diagram according to an embodiment of the present invention wherein an asymmetry of the MR read element is estimated by processing the read signal in continuous-time.</p>
<p id="p-0008" num="0007"><figref idref="DRAWINGS">FIG. 3A</figref> shows control circuitry according to an embodiment of the present invention comprising a continuous-time DC filter and amplitude detector for estimating the asymmetry of the MR read element.</p>
<p id="p-0009" num="0008"><figref idref="DRAWINGS">FIG. 3B</figref> shows an example continuous-time DC filter according to an embodiment of the present invention.</p>
<p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. 3C</figref> shows an example continuous-time amplitude detector according to an embodiment of the present invention.</p>
<p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. 4</figref> shows control circuitry according to an embodiment of the present invention comprising a continuous-time asymmetry compensation loop for attenuating a residual asymmetry in the read signal.</p>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 5</figref> shows an embodiment of the present invention wherein the asymmetry compensation is adapted while reading at least one of a data or servo sector preamble, or a servo burst.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0003" level="1">DETAILED DESCRIPTION OF EMBODIMENTS OF THE INVENTION</heading>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 2A</figref> shows a disk drive according to an embodiment of the present invention comprising a head <b>16</b> actuated over a disk <b>18</b>, the head <b>16</b> comprising a magnetoresistive (MR) read element. The disk drive further comprises control circuitry <b>20</b> operable to execute the flow diagram of <figref idref="DRAWINGS">FIG. 2B</figref>, wherein an analog read signal <b>22</b> emanating from the MR read element is amplified (step <b>24</b>) to generate an amplified analog read signal. The amplified analog read signal is filtered in continuous-time to extract a dc component (step <b>26</b>), and an amplitude of the amplified analog read signal is measured in continuous-time (step <b>28</b>). An asymmetry in the amplified analog read signal is estimated in response to the dc component and the amplitude (step <b>30</b>), and the amplified analog read signal is modified in response to the estimated asymmetry to generate a compensated analog read signal (step <b>32</b>). The compensated analog read signal is filtered using an analog filter to generate a filtered analog read signal (step <b>34</b>). The filtered analog read signal is sampled to generate read signal samples (step <b>36</b>), and the read signal samples are filtered using a discrete-time equalizer (step <b>38</b>).</p>
<p id="p-0014" num="0013">In the embodiment of <figref idref="DRAWINGS">FIG. 2A</figref>, the disk <b>18</b> comprises embedded servo sectors <b>40</b><sub>0</sub>-<b>40</b><sub>N </sub>that define a plurality of servo tracks <b>42</b>. The control circuitry <b>20</b> processes the read signal <b>22</b> emanating from the head <b>16</b> to demodulate the servo sectors <b>40</b><sub>0</sub>-<b>40</b><sub>N </sub>and generate a position error signal (PES) representing an error between the actual position of the head and a target position relative to a target track. The control circuitry <b>20</b> filters the PES using a suitable compensation filter to generate a control signal <b>44</b> applied to a voice coil motor (VCM) <b>46</b> which rotates an actuator arm <b>48</b> about a pivot in order to actuate the head <b>16</b> radially over the disk in a direction that reduces the PES. The servo sectors <b>40</b><sub>0</sub>-<b>40</b><sub>N </sub>may comprise any suitable position information, such as a track address for coarse positioning and servo bursts for fine positioning. The servo bursts may comprise any suitable pattern, such as the amplitude-based servo pattern shown in <figref idref="DRAWINGS">FIG. 1</figref>, or a suitable phase-based servo pattern.</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 3A</figref> shows control circuitry according to an embodiment of the present invention wherein the analog read signal <b>22</b> is generated by reading a periodic pattern from the disk, such as a periodic pattern comprising a period of 4T where T is a sample interval. A variable gain amplifier (VGA) <b>50</b> amplifies the analog read signal <b>22</b> to generate the amplified analog read signal <b>52</b>. A continuous-time dc filter <b>54</b> extracts the dc component from the amplified analog read signal <b>52</b>, and a continuous-time amplitude detector <b>56</b> measures an amplitude A of the amplified analog read signal <b>52</b>. Continuous-time circuitry <b>58</b> estimates an asymmetry a in the amplified analog read signal <b>52</b> in response to a ratio of the dc component to the amplitude A. In the example of <figref idref="DRAWINGS">FIG. 3A</figref>, the continuous-time circuitry <b>58</b> estimates the asymmetry a according to:</p>
<p id="p-0016" num="0015">
<maths id="MATH-US-00001" num="00001">
<math overflow="scroll">
<mrow>
  <mn>2</mn>
  <mo>&#x2062;</mo>
  <mrow>
    <mfrac>
      <mi>dc</mi>
      <msup>
        <mi>A</mi>
        <mn>2</mn>
      </msup>
    </mfrac>
    <mo>.</mo>
  </mrow>
</mrow>
</math>
</maths>
<br/>
The amplified analog read signal <b>52</b> is modified <b>60</b> in response to the estimated asymmetry &#x3b1; to generate a compensated analog read signal <b>62</b>. The compensated analog read signal <b>62</b> is filtered using an analog filter <b>64</b> to generate a filtered analog read signal <b>66</b>. The filtered analog read signal <b>66</b> is sampled <b>68</b> to generate read signal samples <b>70</b>, and the read signal samples <b>70</b> are filtered using a discrete-time equalizer <b>72</b>.
</p>
<p id="p-0017" num="0016">In one embodiment, the read signal samples <b>70</b> are generated (using synchronous or asynchronous sampling) at a sample interval substantially equal to a baud rate of the written data. The discrete-time equalizer <b>72</b> equalizes the read signal samples <b>70</b> according to a partial response, and a suitable sequence detector detects an estimated data sequence from the equalized read signal samples <b>74</b>. Accordingly, in the embodiments of the present invention the asymmetry estimation and compensation is performed in continuous-time on the amplified analog read signal <b>52</b> so as to avoid the latency of the analog filter <b>64</b> and discrete-time equalizer <b>72</b>.</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 3B</figref> shows a continuous-time dc filter <b>54</b> according to an embodiment of the present invention comprising a suitable analog low-pass filter (LPF) <b>76</b> followed by an analog integrator <b>78</b> which integrates the output of the LPF <b>76</b> over a 4T interval to extract the dc component. <figref idref="DRAWINGS">FIG. 3C</figref> shows a continuous-time amplitude detector <b>56</b> according to an embodiment of the present invention comprising a polarity reversal circuit <b>80</b> and circuitry <b>82</b>A and <b>82</b>B for generating a first 4T window over the non-inverted amplified analog read signal <b>52</b> and a second 4T window over the inverted amplified analog read signal <b>52</b>. A first analog circuit <b>84</b>A measures a maximum base-to-peak amplitude of the non-inverted amplified analog read signal <b>52</b> over the 4T window, and a second analog circuit <b>84</b>B measures a maximum base-to-peak amplitude of the inverted amplified analog read signal <b>52</b> over the 4T window. The result of the maximum base-to-peak amplitude measurements are added and then divided by two to generate the measured amplitude A.</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 4</figref> shows control circuitry according to an embodiment of the present invention wherein the amplified analog read signal <b>52</b> is modified <b>86</b> in response to the estimated asymmetry a according to:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>x</i>(1<i>&#x2212;&#x3b1;x</i>&#xb7;sign(<i>x</i>))<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where x represents the amplified analog read signal <b>52</b>. In this embodiment, the effect of the above equation is to decrease the magnitude of an isolated positive pulse by &#x3b1;x and to increase the magnitude of an isolated negative pulse by &#x3b1;x. However, the amplified analog read signal <b>52</b> may be modified in response to the estimated asymmetry &#x3b1; using any suitable equation.
</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 4</figref> also illustrates an embodiment of the present invention wherein a residual dc component (dc<sub>r</sub>) is extracted <b>88</b> in continuous-time from the compensated analog read signal <b>62</b>. A coefficient &#x3b2; is adapted in continuous-time <b>90</b> in response to the residual dc component (dc<sub>r</sub>), and the compensated analog read signal <b>62</b> is modified <b>92</b> in continuous-time according to:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>x+&#x3b2;x</i><sup>2 </sup><?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where x is the compensated analog read signal <b>62</b>. In the embodiment of <figref idref="DRAWINGS">FIG. 4</figref>, the coefficient is adapted <b>90</b> according to:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>&#x3b2;<sub>n+1</sub>=&#x3b2;<sub>n</sub>&#x2212;[(1&#x2212;&#x3bc;)<i>dc</i><sub>r</sub>]<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where dc<sub>r </sub>is the residual dc component, and &#x3bc; is a learning coefficient.
</p>
<p id="p-0021" num="0020">In one embodiment, the control circuitry <b>20</b> is operable to concurrently estimate the asymmetry &#x3b1; and adapt the coefficient &#x3b2; while reading a periodic pattern from the disk. For example, in one embodiment illustrated in <figref idref="DRAWINGS">FIG. 5</figref>, the periodic pattern comprises at least one of a preamble pattern <b>94</b> preceding a data sector, a preamble pattern <b>96</b> preceding a servo sector, and a servo burst <b>98</b> of a servo sector. In one embodiment, the preamble and/or servo burst comprises a 2T pattern having a period of 4T (4 sample intervals).</p>
<p id="p-0022" num="0021">Because the asymmetry &#x3b1; is estimated in continuous-time by evaluating the amplified analog read signal <b>52</b> and compensating <b>60</b> for the asymmetry &#x3b1; in continuous-time, the latency of estimating and/or compensating for the asymmetry after the analog filter <b>64</b> is avoided. Similarly, the embodiment of <figref idref="DRAWINGS">FIG. 4</figref> adapts the coefficient &#x3b2; in continuous-time prior to the analog filter <b>64</b> thereby avoiding the associated latency. Avoiding the latency of the analog filter <b>64</b> (and discrete-time equalizer <b>72</b>) enables the estimated asymmetry a (and optionally the coefficient &#x3b2;) to converge quickly over a relatively short periodic pattern. Accordingly, in one embodiment the fast convergence speed enables real-time asymmetry compensation while reading the preamble of a data sector (while writing or reading the data sector), and/or real-time asymmetry compensation while reading the preamble and/or servo bursts of a servo sector (during write or read operations).</p>
<p id="p-0023" num="0022">In an alternative embodiment, the control circuitry <b>20</b> may execute a calibration procedure wherein a periodic pattern is written to the disk, such as by writing a 2T pattern to a data sector or a data wedge (area between servo sectors), and then reading the periodic pattern in order to estimate the asymmetry &#x3b1; and adapt the coefficient &#x3b2;. The calibration procedure may be executed at a number of different radial locations (i.e., zones) and the corresponding asymmetry estimate &#x3b1; and coefficient &#x3b2; saved in a table that is indexed during normal operation when accessing a particular zone. The estimated asymmetry &#x3b1; and coefficient &#x3b2; stored in the table may be updated periodically by re-executing the calibration procedure over time to account for changes in the MR read element over time. In addition, the asymmetry &#x3b1; may be estimated and coefficient &#x3b2; may be further adapted in real-time when reading a preamble or servo burst during normal access operations as described above.</p>
<p id="p-0024" num="0023">Any suitable control circuitry may be employed to implement the flow diagrams in the embodiments of the present invention, such as any suitable integrated circuit or circuits. For example, the control circuitry may be implemented within a read channel integrated circuit, or in a component separate from the read channel, such as a disk controller, or certain steps described above may be performed by a read channel and others by a disk controller. In one embodiment, the read channel and disk controller are implemented as separate integrated circuits, and in an alternative embodiment they are fabricated into a single integrated circuit or system on a chip (SOC). In addition, the control circuitry may include a suitable preamp circuit implemented as a separate integrated circuit, integrated into the read channel or disk controller circuit, or integrated into an SOC.</p>
<p id="p-0025" num="0024">In one embodiment, the control circuitry comprises a microprocessor executing instructions, the instructions being operable to cause the microprocessor to perform the steps of the flow diagrams described herein. The instructions may be stored in any computer-readable medium. In one embodiment, they may be stored on a non-volatile semiconductor memory external to the microprocessor, or integrated with the microprocessor in a SOC. In another embodiment, the instructions are stored on the disk and read into a volatile semiconductor memory when the disk drive is powered on. In yet another embodiment, the control circuitry comprises suitable logic circuitry, such as state machine circuitry.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-math idrefs="MATH-US-00001" nb-file="US08625225-20140107-M00001.NB">
<img id="EMI-M00001" he="6.01mm" wi="76.20mm" file="US08625225-20140107-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00002" nb-file="US08625225-20140107-M00002.NB">
<img id="EMI-M00002" he="6.01mm" wi="76.20mm" file="US08625225-20140107-M00002.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00003" nb-file="US08625225-20140107-M00003.NB">
<img id="EMI-M00003" he="6.01mm" wi="76.20mm" file="US08625225-20140107-M00003.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A disk drive comprising:
<claim-text>a disk;</claim-text>
<claim-text>a head actuated over the disk, the head comprising a magnetoresistive (MR) read element; and</claim-text>
<claim-text>control circuitry operable to:
<claim-text>amplify an analog read signal emanating from the MR read element to generate an amplified analog read signal;</claim-text>
<claim-text>filter the amplified analog read signal in continuous-time to extract a dc component;</claim-text>
<claim-text>measure an amplitude of the amplified analog read signal in continuous-time;</claim-text>
<claim-text>estimate an asymmetry in the amplified analog read signal in response to the dc component and the amplitude;</claim-text>
<claim-text>modify the amplified analog read signal in response to the estimated asymmetry to generate a compensated analog read signal;</claim-text>
<claim-text>filter the compensated analog read signal using an analog filter to generate a filtered analog read signal;</claim-text>
<claim-text>sample the filtered analog read signal to generate read signal samples; and</claim-text>
<claim-text>filter the read signal samples using a discrete-time equalizer.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The disk drive as recited in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the control circuitry is further operable to read a periodic pattern from the disk to generate the analog read signal.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The disk drive as recited in <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the periodic pattern comprises a period of 4T where T is a sample interval.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The disk drive as recited in <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein the control circuitry is operable to estimate the asymmetry according to:</claim-text>
<claim-text>
<maths id="MATH-US-00002" num="00002">
<math overflow="scroll">
<mrow>
  <mn>2</mn>
  <mo>&#x2062;</mo>
  <mfrac>
    <mi>dc</mi>
    <msup>
      <mi>A</mi>
      <mn>2</mn>
    </msup>
  </mfrac>
</mrow>
</math>
</maths>
<claim-text>where:</claim-text>
<claim-text>dc is the dc component; and</claim-text>
<claim-text>A is the amplitude of the amplified analog read signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The disk drive as recited in <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein the control circuitry is operable to filter the amplified analog read signal in continuous-time to extract the dc component by:
<claim-text>low pass filtering the amplified analog read signal in continuous-time to generate an analog dc signal; and</claim-text>
<claim-text>integrating the analog dc signal over a 4T interval.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The disk drive as recited in <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein the control circuitry is operable to measure the amplitude of the amplified analog read signal in continuous-time by measuring a maximum base-to-peak magnitude in continuous-time over a 4T interval.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The disk drive as recited in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the control circuitry is further operable to:
<claim-text>extract a residual dc component from the compensated analog read signal in continuous-time;</claim-text>
<claim-text>adapt a coefficient &#x3b2; in continuous-time in response to the residual dc component; and</claim-text>
<claim-text>modify the compensated analog read signal in continuous-time according to:
<claim-text>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>x+&#x3b2;x</i><sup>2 </sup><?in-line-formulae description="In-line Formulae" end="tail"?>
</claim-text>
</claim-text>
<claim-text>where x is the compensated analog read signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The disk drive as recited in <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the control circuitry is operable to adapt the coefficient &#x3b2; according to:
<claim-text>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>&#x3b2;<sub>n+1</sub>=&#x3b2;<sub>n</sub>&#x2212;[(1&#x2212;&#x3bc;)<i>dc</i><sub>r</sub>]<?in-line-formulae description="In-line Formulae" end="tail"?>
</claim-text>
<claim-text>where dc, is the residual dc component; and</claim-text>
<claim-text>&#x3bc; is a learning coefficient.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The disk drive as recited in <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the control circuitry is operable to concurrently estimate the asymmetry and adapt the coefficient &#x3b2; while reading a periodic pattern from the disk.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The disk drive as recited in <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the periodic pattern comprises at least one of a preamble pattern preceding a data sector, a preamble pattern preceding a servo sector, and a servo burst of a servo sector.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The disk drive as recited in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein:
<claim-text>the control circuitry is further operable to read a periodic pattern on the disk to generate the analog read signal; and</claim-text>
<claim-text>the periodic pattern comprises at least one of a preamble pattern preceding a data sector, a preamble pattern preceding a servo sector, and a servo burst of a servo sector.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. A method of operating a disk drive, the disk drive comprising a disk, a head actuated over the disk, the head comprising a magnetoresistive (MR) read element, the method comprising:
<claim-text>amplifying an analog read signal emanating from the MR read element to generate an amplified analog read signal;</claim-text>
<claim-text>filtering the amplified analog read signal in continuous-time to extract a dc component;</claim-text>
<claim-text>measuring an amplitude of the amplified analog read signal in continuous-time;</claim-text>
<claim-text>estimating an asymmetry in the amplified analog read signal in response to the dc component and the amplitude;</claim-text>
<claim-text>modifying the amplified analog read signal in response to the estimated asymmetry to generate a compensated analog read signal;</claim-text>
<claim-text>filtering the compensated analog read signal using an analog filter to generate a filtered analog read signal;</claim-text>
<claim-text>sampling the filtered analog read signal to generate read signal samples; and</claim-text>
<claim-text>filtering the read signal samples using a discrete-time equalizer.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The method as recited in <claim-ref idref="CLM-00012">claim 12</claim-ref>, further comprising reading a periodic pattern from the disk to generate the analog read signal.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The method as recited in <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the periodic pattern comprises a period of 4T where T is a sample interval.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The method as recited in <claim-ref idref="CLM-00014">claim 14</claim-ref>, further comprising estimating the asymmetry according to:</claim-text>
<claim-text>
<maths id="MATH-US-00003" num="00003">
<math overflow="scroll">
<mrow>
  <mn>2</mn>
  <mo>&#x2062;</mo>
  <mfrac>
    <mi>dc</mi>
    <msup>
      <mi>A</mi>
      <mn>2</mn>
    </msup>
  </mfrac>
</mrow>
</math>
</maths>
<claim-text>where:</claim-text>
<claim-text>dc is the dc component; and</claim-text>
<claim-text>A is the amplitude of the amplified analog read signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The method as recited in <claim-ref idref="CLM-00015">claim 15</claim-ref>, further comprising filtering the amplified analog read signal in continuous-time to extract the dc component by:
<claim-text>low pass filtering the amplified analog read signal in continuous-time to generate an analog dc signal; and</claim-text>
<claim-text>integrating the analog dc signal over a 4T interval.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The method as recited in <claim-ref idref="CLM-00015">claim 15</claim-ref>, further comprising measuring the amplitude of the amplified analog read signal in continuous-time by measuring a maximum base-to-peak magnitude in continuous-time over a 4T interval.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The method as recited in <claim-ref idref="CLM-00012">claim 12</claim-ref>, further comprising:
<claim-text>extracting a residual dc component from the compensated analog read signal in continuous-time;</claim-text>
<claim-text>adapting a coefficient &#x3b2; in continuous-time in response to the residual dc component; and</claim-text>
<claim-text>modifying the compensated analog read signal in continuous-time according to:
<claim-text>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>x+&#x3b2;x</i><sup>2 </sup><?in-line-formulae description="In-line Formulae" end="tail"?>
</claim-text>
</claim-text>
<claim-text>where x is the compensated analog read signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The method as recited in <claim-ref idref="CLM-00018">claim 18</claim-ref>, further comprising adapting the coefficient &#x3b2; according to:
<claim-text>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>&#x3b2;<sub>n+1</sub>=&#x3b2;<sub>n</sub>&#x2212;[(1&#x2212;&#x3bc;)<i>dc</i><sub>r</sub>]<?in-line-formulae description="In-line Formulae" end="tail"?>
</claim-text>
<claim-text>where dc<sub>r </sub>is the residual dc component; and</claim-text>
<claim-text>&#x3bc; is a learning coefficient.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The method as recited in <claim-ref idref="CLM-00019">claim 19</claim-ref>, further comprising concurrently estimating the asymmetry and adapting the coefficient &#x3b2; while reading a periodic pattern from the disk.</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. The method as recited in <claim-ref idref="CLM-00020">claim 20</claim-ref>, wherein the periodic pattern comprises at least one of a preamble pattern preceding a data sector, a preamble pattern preceding a servo sector, and a servo burst of a servo sector.</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. The method as recited in <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein:
<claim-text>further comprising reading a periodic pattern on the disk to generate the analog read signal; and</claim-text>
<claim-text>the periodic pattern comprises at least one of a preamble pattern preceding a data sector, a preamble pattern preceding a servo sector, and a servo burst of a servo sector.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
