<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08626191-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08626191</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13497060</doc-number>
<date>20120306</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20090101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>W</subclass>
<main-group>24</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>4554561</main-classification>
<further-classification>455410</further-classification>
</classification-national>
<invention-title id="d2e43">Node and method in a node</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>2003/0008668</doc-number>
<kind>A1</kind>
<name>Perez-Breva et al.</name>
<date>20030100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455456</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>2003/0087647</doc-number>
<kind>A1</kind>
<name>Hurst</name>
<date>20030500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455456</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2009/0253436</doc-number>
<kind>A1</kind>
<name>Nientiedt</name>
<date>20091000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2010/0309051</doc-number>
<kind>A1</kind>
<name>Moshfeghi</name>
<date>20101200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>WO</country>
<doc-number>WO2004023155</doc-number>
<kind>A1</kind>
<date>20040300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00006">
<othercit>Lei Xie; Yuhao Wang; Xia Xue; &#x201c;A New Indoor Localization Method Based on Inversion Propagation Model&#x201d; WiCOM 2010 6th International Conference on, pp. 1-4, Sep. 23-23, 2010.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00007">
<othercit>Widyawan; Klepal, M.; Pesch, D.; &#x201c;Influence of Predicted and Measured Fingerprint on the Accuracy of RSSI-based Indoor Location Systems&#x201d;, Positioning, Navigation and Communication, 2007. WPNC '07. 4th Workshop on, pp. 145-151, Mar. 22, 2007.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00008">
<othercit>International Search Report and Written Opinion with mailing date Mar. 27, 2013 issued by ISA/SE in corresponding PCT-application No. PCT/SE2012/050246.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>32</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>4554042</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>4554561-457</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>6</number-of-drawing-sheets>
<number-of-figures>7</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20130237244</doc-number>
<kind>A1</kind>
<date>20130912</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Siomina</last-name>
<first-name>Iana</first-name>
<address>
<city>Solna</city>
<country>SE</country>
</address>
</addressbook>
<residence>
<country>SE</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Zhang</last-name>
<first-name>Yang</first-name>
<address>
<city>Shanghai</city>
<country>CN</country>
</address>
</addressbook>
<residence>
<country>CN</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Siomina</last-name>
<first-name>Iana</first-name>
<address>
<city>Solna</city>
<country>SE</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Zhang</last-name>
<first-name>Yang</first-name>
<address>
<city>Shanghai</city>
<country>CN</country>
</address>
</addressbook>
</inventor>
</inventors>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Telefonaktiebolaget L M Ericsson (publ)</orgname>
<role>03</role>
<address>
<city>Stockholm</city>
<country>SE</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Siddiqui</last-name>
<first-name>Kashif</first-name>
<department>2646</department>
</primary-examiner>
</examiners>
<pct-or-regional-filing-data>
<document-id>
<country>WO</country>
<doc-number>PCT/SE2012/050246</doc-number>
<kind>00</kind>
<date>20120306</date>
</document-id>
<us-371c124-date>
<date>20120403</date>
</us-371c124-date>
</pct-or-regional-filing-data>
<pct-or-regional-publishing-data>
<document-id>
<country>WO</country>
<doc-number>WO2013/066233</doc-number>
<kind>A </kind>
<date>20130510</date>
</document-id>
</pct-or-regional-publishing-data>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">Node and method in a node, for estimating a position of a user equipment. The method comprises determining the need for at least one virtual reference measurement. Further, the method comprises obtaining the at least one virtual reference measurement, when it is determined to be needed. Additionally, the method comprises estimating the position of the user equipment, using the obtained at least one virtual reference measurement.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="131.57mm" wi="195.58mm" file="US08626191-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="166.62mm" wi="200.74mm" file="US08626191-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="210.06mm" wi="206.33mm" file="US08626191-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="277.54mm" wi="207.77mm" file="US08626191-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="217.76mm" wi="199.98mm" file="US08626191-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="214.29mm" wi="183.05mm" file="US08626191-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="273.90mm" wi="181.02mm" file="US08626191-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This application claims the benefit of U.S. Provisional Application No. 61/555,531, filed on Nov. 4, 2011. This application is also a National Stage application under 35 U.S.C. 371 of International Application No. PCT/SE2012/050246, filed on Mar. 6, 2012.</p>
<heading id="h-0002" level="1">TECHNICAL FIELD</heading>
<p id="p-0003" num="0002">Implementations described herein relate generally to a node and a method in a node. In particular, a mechanism in a wireless network for estimating a position of a user equipment is described herein.</p>
<heading id="h-0003" level="1">BACKGROUND</heading>
<p id="p-0004" num="0003">User equipment (UE), also known as mobile stations, wireless terminals and/or mobile terminals are enabled to communicate wirelessly in a wireless communication system, sometimes also referred to as a cellular radio system. The communication may be made e.g. between two user equipment units, between a user equipment and a regular telephone and/or between a user equipment and a server via a Radio Access Network (RAN) and possibly one or more core networks.</p>
<p id="p-0005" num="0004">The user equipment units may further be referred to as mobile telephones, cellular telephones, laptops with wireless communications capability. The user equipment units in the present context may be portable and enabled to communicate voice and/or data, via the radio access network, with another entity, such as a network node, for example.</p>
<p id="p-0006" num="0005">The wireless communication system covers a geographical area which is divided into cell areas, with each cell area being served by a network node, radio node or base station e.g. a Radio Base Station (RBS), which in some networks may be referred to as &#x201c;eNB&#x201d;, &#x201c;eNodeB&#x201d; or &#x201c;NodeB&#x201d;, depending on the technology and terminology used. The network nodes may be of different classes such as e.g. macro eNodeB, home eNodeB or pico base station, typically based on transmission power and thereby also cell size. A cell is the geographical area where radio coverage is provided by the network node/base station at a base station site. One base station, situated on the base station site, may serve one or several cells. The network nodes communicate over the air interface operating on radio frequencies with the user equipment units within serving range of the respective network node.</p>
<p id="p-0007" num="0006">In some radio access networks, several network nodes may be connected, e.g. by landlines or microwave, to a Radio Network Controller (RNC) e.g. in Universal Mobile Telecommunications System (UMTS). The RNC, also sometimes termed a Base Station Controller (BSC) e.g. in GSM, may supervise and coordinate various activities of the plural network nodes connected thereto. GSM is an abbreviation for Global System for Mobile Communications (originally: Groupe Sp&#xe9;cial Mobile).</p>
<p id="p-0008" num="0007">UMTS is a third generation mobile communication system, which evolved from the GSM, and is intended to provide improved mobile communication services based on Wideband Code Division Multiple Access (WCDMA) access technology. UMTS Terrestrial Radio Access Network (UTRAN) is essentially a radio access network using wideband code division multiple access for user equipment units.</p>
<p id="p-0009" num="0008">The 3rd Generation Partnership Project (3GPP) has undertaken to evolve further the UTRAN and GSM based radio access network technologies, for example by developing Long Term Evolution (LTE) and the Evolved Universal Terrestrial Radio Access Network (E-UTRAN).</p>
<p id="p-0010" num="0009">LTE is a technology for realizing high-speed packet-based communication that may reach high data rates both in the downlink and in the uplink. In LTE, network nodes, or base stations, which may be referred to as evolved-NodeBs, eNodeBs or even eNBs, may be connected to a gateway e.g. a radio access gateway, which in turn may be connected to one or more core networks.</p>
<p id="p-0011" num="0010">In the present context, the expressions downlink, downstream link or forward link may be used for the transmission path from the network node to the user equipment. The expression uplink, upstream link or reverse link may be used for the transmission path in the opposite direction i.e. from the user equipment to the network node.</p>
<p id="p-0012" num="0011">The possibility to determine the position of a mobile device, or user equipment as it also may be referred to as, has enabled application developers and wireless network operators to provide location based, and location aware, services. Examples of those are guiding systems, shopping assistance, friend finder, presence services, community and communication services and other information services giving the mobile user the information about their surroundings.</p>
<p id="p-0013" num="0012">In addition to the commercial services, the governments in several countries have put requirements on the network operators to be able to determine, with a certain accuracy, the position of an emergency call. For instance, the governmental requirements in the USA (FCC E911) that it must be possible to determine the position of a certain percentage of all emergency calls with a certain accuracy. The requirements make no difference between indoor and outdoor environment.</p>
<p id="p-0014" num="0013">Some positioning methods comprise Cell Identification (Cell ID or CID) and Enhanced-Cell ID (E-CID).</p>
<p id="p-0015" num="0014">Cell ID positioning method comprises, given the cell ID of the serving cell, associating the position of the user equipment with the cell coverage area which may be described, for example, by a pre-stored polygon, where cell boundary is modelled by the set of non-intersecting polygon segments connecting all the corners.</p>
<p id="p-0016" num="0015">E-CID comprises methods exploiting four sources of position information: the CID and the corresponding geographical description of the serving cell, the Round Trip Time (RTT) with respect to the serving cell, measured e.g. by means of Timing Advance (TA) and/or receive-transmit time difference measured at either user equipment and/or base station side, the CIDs and the corresponding signal measurements of the cells, up to 32 cells in LTE, comprising the serving cell, as well as Angle of Arrival (AoA) measurements.</p>
<p id="p-0017" num="0016">Angle of arrival (AoA) positioning is a method for determining the direction of propagation of a radio-frequency wave incident on an antenna array. AoA determines the direction by measuring the Time Difference of Arrival (TDOA) at individual elements of the array&#x2014;from these delays the AoA may be calculated.</p>
<p id="p-0018" num="0017">The three most common E-CID techniques comprise: CID+RTT, CID+signal strength and AoA+RTT. The positioning result of CID+RTT is typically an ellipsoid arc describing the intersection between a polygon and circle corresponding to RTT. A typical result format of the signal-strength based E-CID positioning is a polygon since the signal strength is subject e.g. to fading effects and therefore often does not scale exactly with the distance. A typical result of AoA+RTT positioning is an ellipsoid arc which is an intersection of a sector limited by AoA measurements and a circle from the RTT-like measurements.</p>
<p id="p-0019" num="0018">Inter-frequency measurements for E-CID are also possible, and inter-Radio Access Technologies (RAT) measurements have also been discussed. The measurements, such as intra-frequency, inter-frequency, and/or inter-RAT may comprise downlink measurements, uplink measurements, or two-directional measurements such as e.g., RTT, TA or Receiver-Transmitter (Rx-Tx).</p>
<p id="p-0020" num="0019">A more promising approach may be provided by so-called fingerprinting positioning. Such methods may also be referred to as pattern matching. Fingerprinting positioning algorithms operate by creating a radio fingerprint for each point of a fine coordinate grid that covers the Radio Access Network (RAN). The fingerprint may e.g. comprise the cell IDs that are detected by the terminal, in each grid point; quantized path loss or signal strength measurements, with respect to multiple eNodeBs, performed by the terminal, in each grid point; quantized Timing Advance (TA), in each grid point; quantized AoA information.</p>
<p id="p-0021" num="0020">Whenever a position request arrives to the positioning node, a radio fingerprint is first obtained (e.g., by requesting and then receiving corresponding measured), after which the corresponding grid point is looked up and reported. This of course requires that the point is unique.</p>
<p id="p-0022" num="0021">Currently, there is no fingerprinting positioning technology standardized, being viewed as a positioning implementation. However, possible standardization of this group of methods is being discussed in 3GPP. Currently, such methods in LTE rely mainly on E-CID measurements, comprising downlink and/or uplink, intra-frequency, inter-frequency, and inter-RAT, though not limited to them, e.g., the use of Received Signal Time Difference (RSTD) measurements, originally used for Observed Time Difference of Arrival (OTDOA) positioning has also been discussed.</p>
<p id="p-0023" num="0022">The database of fingerprinted positions or reference positions may be generated in several ways. A first alternative would be to perform an extensive surveying operation that performs fingerprinting radio measurements repeatedly for all coordinate grid points of the RAN. The disadvantages of this approach comprises: the surveying required becomes substantial also for small cellular networks; the radio fingerprints are in some instants, e.g. signal strength and pathloss, sensitive to the orientation of the terminal, a fact that is particularly troublesome for handheld terminals. For fine grids, the accuracies of the fingerprinted positions therefore become highly uncertain. This is unfortunately seldom reflected in the accuracy of the reported geographical result.</p>
<p id="p-0024" num="0023">Another approach, applied e.g. in Adaptive Enhanced Cell IDentity positioning (AECID), is to replace the fine grid by high precision position measurements of opportunity, and to provide fingerprinting radio measurements for said points. This avoids the above drawbacks, however: algorithms for clustering of high precision position measurements of opportunity needs to be defined and/or algorithms for computation of geographical descriptions of the clusters need to be defined.</p>
<p id="p-0025" num="0024">The above two problems may be solved by automatically collecting high-precision positions.</p>
<p id="p-0026" num="0025">Yet another approach is the Observed Time Difference of Arrival (OTDOA) positioning method, which makes use of the measured timing of downlink signals received from multiple radio nodes at the user equipment. With OTDOA, the user equipment measures the timing differences for downlink reference signals received from multiple distinct locations. For each (measured) neighbour cell, the user equipment measures Reference Signal Time Difference (RSTD) which is the relative timing difference between neighbour cell and the reference cell. The user equipment position estimate is then found as the intersection of hyperbolas corresponding to the measured RSTDs. At least three measurements from geographically dispersed base stations with a good geometry are needed to solve for two coordinates of the user equipment and the receiver clock bias. In order to solve for position, precise knowledge of the transmitter locations and transmit timing offset is needed.</p>
<p id="p-0027" num="0026">To enable positioning in LTE and facilitate positioning measurements of a proper quality and for a sufficient number of distinct locations, new physical signals for positioning have been introduced, i.e. Positioning Reference Signals (PRS), and low-interference positioning subframes have been specified in 3GPP, although OTDOA is not limited to using PRS only and may be performed on other signals as well e.g. Cell-specific Reference Signals (CRS).</p>
<p id="p-0028" num="0027">Another positioning method is Uplink Time Difference of Arrival (UTDOA). In UTDOA, the uplink positioning makes use of the signals transmitted from the user equipment, wherein the timing of uplink signals are measured at multiple locations by radio nodes, e.g., by Location Measurement Units (LMUs) or eNodeBs (in LTE). The radio node measures the timing of the received signals using assistance data received from the positioning node, and the resulting measurements are used to estimate the location of the user equipment. Position calculation is similar to that with OTDOA.</p>
<p id="p-0029" num="0028">Another positioning method comprises Global Navigation Satellite System (GNSS) and/or Assisted GNSS (A-GNSS). GNSS is a generic name for satellite-based positioning systems with global coverage. Examples of GNSS systems comprise the American Global Positioning System (GPS), the European Galileo, the Russian Glonass, and the Chinese Compass. GNSS positioning requires GNSS-capable receivers. With A-GNSS, the receivers receive the assistance data from the network. The positioning calculation is based on multi-lateration with Time of Arrival (TOA)-like measurements.</p>
<p id="p-0030" num="0029">Hybrid positioning is yet another positioning technique that combines measurements and/or positions used by different positioning methods, such as e.g., E-CID measurements or fingerprinting-like approaches, which may also be used for hybrid positioning.</p>
<p id="p-0031" num="0030">Adaptive Enhanced Cell Identity (AECID) is one kind of fingerprinting positioning technology that refines the basic cell identity positioning method in a variety of ways. The AECID positioning method is based on the idea that high precision positioning measurements, e.g. A-GPS measurements, may be seen as points that belong to regions where certain cellular radio propagation condition persist, i.e., each point may be characterised by a set comprised of cell identity and measurements characterising the environments.</p>
<p id="p-0032" num="0031">Next, AECID method is described in more detail, by steps 1-4.</p>
<p id="p-0033" num="0032">Step 1: A-GPS positioning is performed at the same time, and/or within a limited time interval, while the user equipment and/or network perform measurements. The AECID positioning method introduces tagging of high precision measurements according to certain criteria, e.g. comprising:
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0000">
    <ul id="ul0002" list-style="none">
        <li id="ul0002-0001" num="0033">The cell identities that are detected by the user equipment, in each grid point;</li>
        <li id="ul0002-0002" num="0034">The quantized path loss or signal strength measurements, with respect to multiple radio base stations, performed by the user equipment, in each grid point;</li>
        <li id="ul0002-0003" num="0035">The quantized Round Trip Time (RTT, in WCDMA) or Timing Advance (TA, in GSM and LTE), or UE Rx-Tx time difference (in LTE) in each grid point;</li>
        <li id="ul0002-0004" num="0036">The quantized noise rise, representing the load of a CDMA system, in each grid point;</li>
        <li id="ul0002-0005" num="0037">The quantized signal quality e.g. RxQual in GSM, Ec/N0 in WCDMA and Reference Signal Receive Quality (RSRQ) in LTE;</li>
        <li id="ul0002-0006" num="0038">Radio connection information like the Radio Access Bearer (RAB);</li>
        <li id="ul0002-0007" num="0039">Quantized time.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0034" num="0040">It may be noted that the tag comprises a vector of indices, each index taking an enumerable number of discrete values. Continuous variables used for tagging, like path loss, hence need to be quantized.</p>
<p id="p-0035" num="0041">Step 2: collect all high precision positioning measurements that have the same tag in separate high precision measurement clusters, and perform further processing of said cluster in order to refine it. Geographical region may be smaller than the cell coverage area in the cellular system.</p>
<p id="p-0036" num="0042">Step 3: A polygon that represents the geographical extension of a cluster is computed, for each stored high precision position measurement cluster. The two most pronounced properties of the algorithm comprise: the area of the polygon is minimized, hence accuracy is maximized, for a given confidence level, and/or the probability that the user equipment is within the polygon, the confidence is precisely known. It is set as a constraint in the algorithm.</p>
<p id="p-0037" num="0043">Step 4: For an incoming positioning request, the measurement of the user equipment, or the network node is firstly obtained. By looking up cell identities or tags, the polygon corresponding to the determined tag is then looked up in the tagged database of polygons, followed by a reporting, e.g. over Radio Access Network Application Part (RANAP), in UMTS, using the polygon format.</p>
<p id="p-0038" num="0044">The Architecture and Protocols in LTE will now be discussed. The three key network elements in an LTE positioning architecture are the Location Service (LCS) Client, the LCS target and the LCS Server. The LCS Server is a physical or logical entity managing positioning for a LCS target device by collecting measurements and other location information, assisting the user equipment in measurements when necessary, and estimating the LCS target location. A LCS Client is a software and/or hardware entity that interacts with a LCS Server for the purpose of obtaining location information for one or more LCS targets, i.e. the entities being positioned. LCS Clients may reside in a network node, external node, user equipment, radio base station, etc., and they may also reside in the LCS targets themselves. An LCS Client sends a request to LCS Server to obtain location information, and LCS Server processes and serves the received requests and sends the positioning result and optionally a velocity estimate to the LCS Client. A positioning request may be originated from the user equipment or the network.</p>
<p id="p-0039" num="0045">Position calculation may be conducted, for example, by a positioning server, such as e.g. E-SMLC or SLP in LTE, or user equipment. The former approach corresponds to either the user equipment assisted positioning mode or network-based positioning, whilst the latter corresponds to the user equipment based positioning mode.</p>
<p id="p-0040" num="0046">Two positioning protocols operating via the radio network exist in LTE, LTE Positioning Protocol (LPP) and LTE Positioning Protocol-Annex (LPPa). The LPP is a point-to-point protocol between a LCS Server and a LCS target device, used in order to position the target device. LPP may be used both in the user plane and in the control plane, and multiple LPP procedures are allowed in series and/or in parallel thereby reducing latency. LPPa is a protocol between eNodeB and LCS Server specified only for control-plane positioning procedures, although it still may assist user-plane positioning by querying eNodeBs for information and eNodeB measurements. Secure User Plane Location (SUPL) protocol is used as a transport for LPP in the user plane. LPP has also a possibility to convey LPP extension messages inside LPP messages, e.g. currently Open Mobile Alliance (OMA) LPP extensions (LPPe) are being specified to allow e.g. for operator-specific assistance data or assistance data that cannot be provided with LPP or to support other position reporting formats or new positioning methods.</p>
<p id="p-0041" num="0047">A high-level architecture, as it is currently standardized in LTE, is illustrated in <figref idref="DRAWINGS">FIG. 1A</figref>, where the LCS target is a user equipment, and the LCS Server may comprise an Evolved Serving Mobile Location Centre (E-SMLC) and/or a Service Location Protocol (SLP). In <figref idref="DRAWINGS">FIG. 1A</figref>, the control plane positioning protocols with E-SMLC as the terminating point, and the user plane positioning protocol are schematically shown. In an example implementation, SLP has a proprietary interface with E-SMLC.</p>
<p id="p-0042" num="0048">As a core network node, logical connections between E-SMLC and Mobile Management Entity (MME) may be made as illustrated in <figref idref="DRAWINGS">FIG. 1A</figref>. E-SMLC may connect to more than one MME and to more than one MME pool.</p>
<p id="p-0043" num="0049">Uplink positioning architecture may comprise also uplink measurement units such as e.g., Location Measurement Units (LMUs), which may be e.g. logical and/or physical nodes, may be integrated with radio base stations or sharing some of the software or hardware equipment with radio base stations or may be completely standalone nodes with own equipment, including antennas. The architecture may comprise communication protocols between LMUs and the positioning node, some enhancements for LPPa or similar protocols to support uplink positioning.</p>
<p id="p-0044" num="0050"><figref idref="DRAWINGS">FIG. 1B</figref> illustrates an uplink positioning architecture in LTE, according to prior art.</p>
<p id="p-0045" num="0051">A new interface, SLm, between the Evolved Serving Mobile Location Centre (E-SMLC), which also may be referred to as a positioning server, or positioning node; and Location Measurement Unit (LMU) is being standardized for uplink positioning. The interface is terminated between a positioning server (i.e. E-SMLC) and LMU. It is used to transport LMUP protocol (new protocol being specified for uplink positioning) messages over the E-SMLC-to-LMU interface. Several LMU deployment options are possible. For example, an LMU may be a standalone physical node, it may be integrated into eNodeB or it may be sharing at least some equipment such as antennas with eNodeB&#x2014;these three options are illustrated in the <figref idref="DRAWINGS">FIG. 1B</figref>.</p>
<p id="p-0046" num="0052">The LCS Client is defined as a software and/or hardware entity that interacts with a LCS Server for the purpose of obtaining location information for one or more user equipments. LCS Clients subscribe to a location service in order to obtain location information. LCS Clients may or may not interact with human users. The LCS Client is responsible for formatting and presenting data and managing the user interface (dialogue). The LCS Client may reside in the user equipment or in a Secure User Plane Location (SUPL)-Enabled Terminal (SET), but it may also be at the network side, such as e.g. Public Safety Answering Point (PSAP), a node with network maintenance services, base stations, etc. LCS Client Type is sent in request for positioning estimates to assist a Serving Mobile Location Centre (SMLC) to appropriately prioritize the location request.</p>
<p id="p-0047" num="0053">The Client Type information is very important in practice since it allows for configuring LCS QoS discrimination in a flexible way. Also, there may exist some restrictions for certain LCS client types.</p>
<p id="p-0048" num="0054">E.g. in UTRAN, the LCS Client type is signalled in the location reporting control message as one of eight pre-defined values in UTRAN, said values being used to discriminate between different services. The following Client Type values are supported by UTRAN lu interface: Emergency Services, Value Added Services, Public Land Mobile Network (PLMN) Operator Services, Lawful Intercept Services, PLMN Operator Broadcast Services, PLMN Operator Operation and Maintenance Services, PLMN Operator Anonymous Statistics Services, PLMN Operator Target MS Services Support.</p>
<p id="p-0049" num="0055">It may be noted that there is only one Client Type for commercial Location-Based Service (LBS), i.e. Value Added Services and there is only one Client Type for emergency services. The same set of Client Types is used in LTE.</p>
<p id="p-0050" num="0056">Service Type is an attribute of specific LBS that may be provided by the LCS client. The LCS Client may also provide the service identity, which may then be mapped by the server to a certain Service Type which may also be verified against the LCS profile and the subscription. The following LCS categories and types have been standardized: Public Safety Services (Emergency Services, Emergency Alert Services), Location Sensitive Charging, Tracking Services (Person Tracking, Fleet Management, Asset Management), Traffic Monitoring (Traffic Congestion Reporting), Enhanced Call Routing (Roadside Assistance, Routing to Nearest Commercial Enterprise), Location Based Information Services (Traffic and public transportation information, City Sightseeing, Localized Advertising, Mobile Yellow Pages, Weather, Asset and Service Finding), Entertainment and Community Services (Gaming, Find Your Friend, Dating, Chatting, Route Finding, Where-am-I), Service Provider Specific Services.</p>
<p id="p-0051" num="0057">The same set of Service Type (a.k.a. Service Classes) is used in UTRAN and E-UTRAN (LTE).</p>
<p id="p-0052" num="0058">A positioning result is a result of processing of obtained measurements, including Cell IDs, power levels, received signal strengths, etc., and it may be exchanged among nodes in one of the pre-defined formats. The signalled positioning result is represented in a pre-defined format corresponding to one of the seven Geographical Area Description (GAD) shapes.</p>
<p id="p-0053" num="0059">Currently, the positioning result may be signalled, in at least one direction, between: LCS target and LCS server, e.g. over LPP protocol, between positioning servers, such as e.g., E-SMLC and Service Location Protocol (SLP), over standardized or proprietary interfaces; between positioning server and other network nodes such as e.g., E-SMLC and any of a Mobility Management Entity (MME); a Mobile Switching Centre (MSC); a Gateway Mobile Location Centre (GMLC); Operations &#x26; Maintenance (O&#x26;M); a Self-Organizing Network (SON) node; a Mobile Data Terminal (MDT); and/or between the positioning node and LCS Client, e.g., between E-SMLC and PSAP or between SLP and External LCS Client; or between E-SMLC and user equipment. In emergency positioning, LCS Client may reside in PSAPs.</p>
<p id="p-0054" num="0060">Problems in the prior art solutions comprises difficulties to collect measurements and thus generate reference positions in areas which are not very populated, including rural areas, forests, mountains, off-road areas. Another problem is that insufficient geographical coverage of reference positions is provided in some scenarios, e.g., it takes time to populate the database for areas which are not very populated.</p>
<p id="p-0055" num="0061">Emergency positioning is particularly important in such less populated areas since it is more difficult to get help in such areas and it may be more difficult to provide a rough description of the location to an emergency operator.</p>
<p id="p-0056" num="0062">AECID methods are currently not designed to provide positions for low-populated areas or areas with insufficient reference position or reference measurement coverage.</p>
<p id="p-0057" num="0063">There is no possibility with the current positioning signalling, architecture and positioning node implementation to choose whether unpopulated areas are taken into account or not, neither it is possible to deliver both results and distinguish among them.</p>
<heading id="h-0004" level="1">SUMMARY</heading>
<p id="p-0058" num="0064">It is therefore an object to obviate at least some of the above mentioned disadvantages and to improve the performance in a wireless communication system.</p>
<p id="p-0059" num="0065">According to a first aspect, the object is achieved by a method in a node. The method aims at estimating a position of a user equipment. The method comprises determining the need for at least one virtual reference measurement. Also, the method comprises obtaining the at least one virtual reference measurement, when it is determined to be needed. In addition, the method comprises estimating the position of the user equipment, using the obtained at least one virtual reference measurement.</p>
<p id="p-0060" num="0066">According to a second aspect, the object is achieved by a node. The node aims at estimating a position of a user equipment. The node comprises a processor, configured to determine the need for at least one virtual reference measurement. The processor is also configured to obtain the at least one virtual reference measurement, when it is determined to be needed. In further addition, the processor is also configured to estimate the position of the user equipment using the obtained at least one virtual reference measurement.</p>
<p id="p-0061" num="0067">Thanks to embodiments disclosed herein, it is possible to deal with areas where reference measurements are not sufficient, such as for example forests, deserts or other non-inhabited areas. Further, better positioning service adaptivity to environments and service types is provided according to some embodiments. Improved positioning is provided according to some embodiments as virtual measurements and real measurements are combined to obtain a location estimate. Thus is an improved performance within the wireless communication system is achieved.</p>
<p id="p-0062" num="0068">Other objects, advantages and novel features will become apparent from the following detailed description of the present methods and nodes.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0063" num="0069">The methods and nodes are described in more detail with reference to attached drawings illustrating examples of embodiments in which:</p>
<p id="p-0064" num="0070"><figref idref="DRAWINGS">FIG. 1A</figref> is a schematic block diagram illustrating an architecture for positioning in a wireless communication system according to prior art.</p>
<p id="p-0065" num="0071"><figref idref="DRAWINGS">FIG. 1B</figref> is a schematic block diagram illustrating an architecture for positioning in a wireless communication system according to prior art.</p>
<p id="p-0066" num="0072"><figref idref="DRAWINGS">FIG. 2</figref> is a schematic block diagram illustrating an example of a wireless communication system.</p>
<p id="p-0067" num="0073"><figref idref="DRAWINGS">FIG. 3</figref> is a schematic block diagram illustrating an example of an embodiment of a node in a wireless communication system.</p>
<p id="p-0068" num="0074"><figref idref="DRAWINGS">FIG. 4</figref> is a schematic flow chart illustrating an embodiment of a method in a wireless communication system.</p>
<p id="p-0069" num="0075"><figref idref="DRAWINGS">FIG. 5</figref> is a schematic flow chart illustrating an embodiment of a method in a wireless communication system.</p>
<p id="p-0070" num="0076"><figref idref="DRAWINGS">FIG. 6</figref> is a schematic flow chart illustrating an embodiment of a method in a wireless communication system.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0006" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0071" num="0077">Embodiments herein are defined as nodes and methods in nodes, which may be put into practice in the embodiments described below. These embodiments may, however, be exemplified and realised in many different forms and are not to be considered as limited to the embodiments set forth herein; rather, these embodiments are provided so that this disclosure will be thorough and complete.</p>
<p id="p-0072" num="0078">Still other objects and features may become apparent from the following detailed description considered in conjunction with the accompanying drawings. It is to be understood, however, that the drawings are designed solely for purposes of illustration and not as a definition of the limits of the herein disclosed embodiments, for which reference is to be made to the appended claims. It is further to be understood that the drawings are not necessarily drawn to scale and that, unless otherwise indicated, they are merely intended to conceptually illustrate the structures and procedures described herein.</p>
<p id="p-0073" num="0079"><figref idref="DRAWINGS">FIG. 2</figref> depicts a wireless communication system <b>100</b>. The wireless communication system <b>100</b> may at least partly be based on radio access technologies such as e.g. 3GPP LTE, LTE-Advanced, Evolved Universal Terrestrial Radio Access Network (E-UTRAN), UMTS, GSM/Enhanced Data rate for GSM Evolution (GSM/EDGE), Wideband Code Division Multiple Access (WCDMA), Worldwide Interoperability for Microwave Access (WiMax), or Ultra Mobile Broadband (UMB), High Speed Packet Access (HSPA) Evolved Universal Terrestrial Radio Access (E-UTRA), Universal Terrestrial Radio Access (UTRA), GSM EDGE Radio Access Network (GERAN), 3GPP2 CDMA technologies e.g. CDMA2000 1x RTT and High Rate Packet Data (HRPD), just to mention some few options.</p>
<p id="p-0074" num="0080">The wireless communication system <b>100</b> may further be configured to operate according to the Time Division Duplex (TDD) and/or the Frequency Division Duplex (FDD) principle, according to different embodiments.</p>
<p id="p-0075" num="0081">TDD is an application of time-division multiplexing to separate uplink and downlink signals in time, possibly with a guard period situated in the time domain between the uplink and downlink signalling. FDD means that the transmitter and receiver operate at different carrier frequencies.</p>
<p id="p-0076" num="0082">The purpose of the illustration in <figref idref="DRAWINGS">FIG. 2</figref> is to provide a simplified general overview of the methods and network nodes herein described, and the functionalities involved. The methods and network nodes will subsequently, as a non-limiting example, be described in a 3GPP/LTE environment, but the embodiments of the disclosed methods may operate in a wireless communication system <b>100</b> based on another access technology.</p>
<p id="p-0077" num="0083">The wireless communication system <b>100</b> comprises at least one node <b>110</b>, which is a radio network node serving a cell <b>120</b>, in which a user equipment <b>130</b>, served by the node <b>110</b>. The node <b>110</b>, represented by a radio network node is connected to a network node <b>140</b>, to a positioning node <b>150</b>, and/or to data bases <b>160</b>A and <b>160</b>B. The node <b>110</b> may communicate with the network node <b>140</b>, with a positioning node <b>150</b>, and/or with data bases <b>160</b>A and <b>160</b>B either over a backhaul link, or via an X2 or S2 communication interface.</p>
<p id="p-0078" num="0084">The user equipment <b>130</b> is configured to transmit radio signals comprising information to be received by the serving node <b>110</b>. Further, the user equipment <b>130</b> is configured to receive radio signals comprising information transmitted by the node <b>110</b>. The communication between the node <b>110</b>, and the user equipment <b>130</b> may thus be made wirelessly.</p>
<p id="p-0079" num="0085">It is to be noted that the illustrated network setting of node <b>110</b>, user equipment <b>130</b>, network node <b>140</b>, positioning node <b>150</b> and/or data bases <b>160</b>A/<b>160</b>B in <figref idref="DRAWINGS">FIG. 2</figref> is to be regarded as a non-limiting embodiment only. The wireless communication network <b>100</b> may comprise any other number and/or combination of nodes <b>110</b>, <b>130</b>, <b>140</b>, <b>150</b>, and/or data bases <b>160</b>A/<b>160</b>B, although only one instance of each of them (two data bases <b>160</b>A/<b>160</b>B), respectively, are illustrated in <figref idref="DRAWINGS">FIG. 2</figref> for clarity reasons. A plurality of nodes <b>110</b>, <b>130</b>, <b>140</b>, <b>150</b>, and/or data bases <b>160</b>A/<b>160</b>B may further be involved in the present methods according to some embodiments.</p>
<p id="p-0080" num="0086">Thus whenever &#x201c;one&#x201d; or &#x201c;a/an&#x201d; node <b>110</b>, user equipment <b>130</b>, network node <b>140</b>, positioning node <b>150</b>, and/or data base <b>160</b>A/<b>160</b>B, a plurality of nodes <b>110</b>, user equipments <b>130</b>, network nodes <b>140</b>, positioning nodes <b>150</b>, and/or data bases <b>160</b>A/<b>160</b>B may be involved, according to some embodiments.</p>
<p id="p-0081" num="0087">The node <b>110</b> may according to some embodiments be referred to as e.g. radio network node, network node, base station, NodeB, evolved Node B (eNB, or eNode B), base transceiver station, Access Point Base Station, base station router, Radio Base Station (RBS), macro base station, micro base station, pico base station, femto base station, Home eNodeB, sensor, beacon device or any other network node configured for communication with the user equipment <b>130</b> over a wireless interface, depending e.g. of the radio access technology and terminology used.</p>
<p id="p-0082" num="0088">In the subsequent part of the disclosure, in order to not unnecessarily complicate the explanation, the methods and structural elements comprised in the scenario depicted in <figref idref="DRAWINGS">FIG. 2</figref> will be described, wherein the term &#x201c;node&#x201d; will be used for the radio network node <b>110</b>, in order to facilitate the comprehension of the present methods.</p>
<p id="p-0083" num="0089">The user equipment <b>130</b> may be represented by e.g. a wireless communication terminal, a mobile cellular phone, a Personal Digital Assistant (PDA), a wireless platform, a mobile station, a portable communication device, a laptop, a computer, a computer tablet, a wireless terminal acting as a relay, a relay node, a mobile relay, a Customer Premises Equipment (CPE), a Fixed Wireless Access (FWA) nodes or any other kind of device configured to communicate wirelessly with the node <b>110</b>.</p>
<p id="p-0084" num="0090">The node <b>110</b> controls the radio resource management within the cell <b>120</b>, such as e.g. allocating radio resources to the user equipment units <b>130</b> within the cell <b>120</b> and ensuring reliable wireless communication link between the node <b>110</b> and the user equipment <b>130</b>. The node <b>110</b> may comprise an eNodeB, e.g. in an LTE-related wireless communication system <b>100</b>.</p>
<p id="p-0085" num="0091">Embodiments of the herein disclosed methods comprise inclusion of unpopulated areas, or areas with insufficient measurement availability, in positioning. According to some of the example embodiments focus primarily on positioning, particularly on the positioning methods utilising reference measurements for estimating a location, such as fingerprinting methods, pattern matching methods, AECID, iAECID, hybrid positioning, E-CID positioning, etc.</p>
<p id="p-0086" num="0092">Limited data availability may cause severe problem for fingerprinting-like positioning methods. Such methods in prior art require as many as possible radio measurement and ground truth pairs to be used as reference samples. The limitations which are intended to be eliminated, at least to some extent comprises improving positioning in areas which are hard to access, for example road less areas, forests etc. Further, the cost of data collection is high and time consuming. Driving test is a popular approach for data collection however it is with low efficiency. And new round of driving test is required if there is cell replanning or altering, e.g. because new radio nodes are deployed, which happens from time to time in most networks. Operating Expenditures (OPEX) may be very high for maintaining an up-to date fingerprinting sample databases <b>160</b>A/B. Additionally, data collection routes cannot well reflect the real location distribution of positioning service. For example, an emergency may not always happen on the road or the crowded streets. Therefore the position estimate based on the collected data is with a lower confidence than if it were based on measurements with full coverage of the area, i.e. without non-populated areas, which is a disadvantage. In further addition, data collection takes time and may also be performed in the life network, e.g., with AECID, whilst the network may still need to operate until measurement databases become mature and detailed enough.</p>
<p id="p-0087" num="0093">One embodiment herein addressing the limitations above comprises to populate a measurement set with virtual measurements. Another embodiment comprises to ensure that the areas with insufficient available measurements are not excluded and taken into account in position calculation.</p>
<p id="p-0088" num="0094">One of the approaches according to some embodiments described herein comprises solving the described problem of insufficient measurement availability by using virtual radio measurements. A virtual measurement may be created pro-actively or upon a request or upon identifying that the available measurements, e.g., of a certain type are insufficient. For example, the following events may trigger generating virtual measurements according to different embodiments: manual or a scheduled trigger, a request or an indication for such a need from another node <b>110</b>, <b>130</b>, <b>140</b>, <b>150</b>, the identified insufficiency of measurements, e.g., of available real measurements or available real and available virtual measurements, an update in the network or local area deployment, e.g., introducing a new node <b>110</b>, <b>140</b>, <b>150</b>, virtual measurements may thus be generated for the new cell <b>120</b>. Further, node reconfiguration may generate such virtual measurements. Virtual measurements may be generated for impacted cells and/or areas in some embodiments. Virtual measurements may be created e.g. for a real location, e.g., during positioning of a user equipment <b>130</b> in that location, or a virtual grid which may be regular or irregular and may comprise adding artificial points over the entire area or in a local area in different embodiments.</p>
<p id="p-0089" num="0095">An example virtual measurement e.g., Reference Signal Received Power (RSRP) or Reference Signal Received Quality (RSRQ) may be generated by a propagation model together with cell data, where the cell data may comprise e.g. cell antenna location, antenna profile, downlink Tx power, minimum signal level allowed for access, frequency information, environmental description such as e.g. urban/rural/indoor/outdoor etc. The propagation model may be pre-defined, configured or dynamically adjusted or predicted e.g. to fit the available measurements using interpolation, prediction techniques and/or extrapolation techniques.</p>
<p id="p-0090" num="0096">Measurement virtualization may take into account, e.g., as input parameters, many factors, comprising antenna position/bearing/profile change, base station power change, radio environment change, such approach therefore may avoid the data recollection due to cell replanning/altering and may thus be more convenient in practice.</p>
<p id="p-0091" num="0097">Virtual measurements may be refined or replaced with true measurements when the true measurements for the same location or nearby, e.g., within a certain distance, become available in some embodiments.</p>
<p id="p-0092" num="0098">Virtual measurements may be stored in a separate database <b>160</b>A or may be stored in a database <b>160</b>B together with true measurements, but marked e.g. with an indicator distinguishing them from the true measurements. Further, a position for which virtual measurements were used may also be distinguished from positions obtained without virtual measurements, e.g., the distinguishing may be implemented by means of an indicator indicating whether or not virtual measurements were used. In other embodiments, the indicators may be measurement type specific.</p>
<p id="p-0093" num="0099">Virtual measurements may be created by the user equipment <b>130</b> or nodes <b>110</b>, <b>140</b>, <b>150</b> such as eNodeB <b>110</b>, Minimization of Drive Tests (MDT) node, Self-Organizing Networks (SON) node, Operations &#x26; Maintenance (O&#x26;M) node, and/or positioning node <b>150</b> and may be exchanged, also with the associated information such as the indicator, via relevant interfaces between the nodes <b>110</b>, <b>130</b>, <b>140</b>, <b>150</b> of the same type, such as e.g., two positioning nodes <b>150</b> or different types such as e.g., a positioning node <b>150</b> and a radio network node <b>110</b>.</p>
<p id="p-0094" num="0100">In practice, positioning based on real data collection may be more accurate than that based on virtual measurements. It may therefore be an advantage to determine a good balance between using real measurements and virtual measurements. Methods for determining such balance may be comprised according to some of the embodiments herein. Such methods may typically be implemented in a network node <b>110</b>, <b>130</b>, <b>140</b>, <b>150</b>, such as e.g., a positioning node <b>150</b>.</p>
<p id="p-0095" num="0101">Methods for detection of non-populated areas and using virtual measurements may comprise determining at least one characteristic of the available real measurements, of one or more types or reference positions, such as e.g., a distribution characteristic, density, uniformness, number of measurements/locations, etc. The at least one characteristic may be calculated pro-actively or on-demand, for the entire area or locally according to different embodiments. Embodiments may be based on the determined at least one characteristic and may comprise to decide whether at least one virtual measurement is needed, and if the need is determined, to generate and/or to use at least one virtual measurement. An example method, for deciding whether a virtual measurement is needed and whether it may be combined with a real measurement, is further detailed below in step 0-step 3.</p>
<p id="p-0096" num="0102">Step 0</p>
<p id="p-0097" num="0103">A quick check for density and distribution of all reference measurement in a cell <b>120</b> may be performed, e.g., for a given serving cell <b>120</b> since the serving cell ID for a user equipment <b>130</b> is normally available, to decide whether next steps are necessary and avoid unnecessary probability/correlation calculation in some cases.</p>
<p id="p-0098" num="0104">Step 1</p>
<p id="p-0099" num="0105">During a positioning session, upon receiving a real-time measurement from user equipment <b>130</b> or radio network node <b>110</b>, correlation between this measurement and reference measurements in a database <b>160</b>A/<b>160</b>B may be calculated. Based on the correlation results, probability P0 may be calculated; where P0 is e.g. the probability of that the user equipment <b>130</b> is within a certain neighbourhood of reference measurement. The probability may correspond to a confidence level and the certain neighbourhood may be pre-determined or may correspond to an uncertainty area in some embodiments.</p>
<p id="p-0100" num="0106">Step 2</p>
<p id="p-0101" num="0107">A decision may be based on the following example logic:</p>
<p id="p-0102" num="0108">If P0&#x3c;Threshold 1
<ul id="ul0003" list-style="none">
    <li id="ul0003-0001" num="0000">
    <ul id="ul0004" list-style="none">
        <li id="ul0004-0001" num="0109">Use virtual data to get the location estimate</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0103" num="0110">Else if P0&#x3e;Threshold 2
<ul id="ul0005" list-style="none">
    <li id="ul0005-0001" num="0000">
    <ul id="ul0006" list-style="none">
        <li id="ul0006-0001" num="0111">Use real data to get location estimate</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0104" num="0112">Else, i.e. if P0 is in range [Threshold 1&#x3c;P0&#x3c;Threshold 2]</p>
<p id="p-0105" num="0113">Use both virtual and real data to get location estimate which may be e.g. a weighted result End</p>
<p id="p-0106" num="0114">Wherein: Threshold 2&#x3e;Threshold 1 and wherein Threshold 1 and Threshold 2 may be specific for different locations e.g., different cells <b>120</b>, environments, e.g., urban/rural or indoors/outdoors, measurement types, e.g., for timing and power-based measurements, such as e.g. RSRP or RSRQ, requested positioning QoS levels; Client types, e.g., emergency or non-emergency, service types, e.g., for different location services or different for positioning and non-positioning, such as related to Radio Resource Management (RRM) or network planning and optimization tasks.</p>
<p id="p-0107" num="0115">Step 3</p>
<p id="p-0108" num="0116">A confidence level of the final location estimate may be deduced, based on: P0, whether real and/or virtual measurement is used and/or the similarity between real time measurement and reference measurements, wherein the similarity may be represented by correlation results.</p>
<p id="p-0109" num="0117">Some embodiments of methods discussed herein, primarily focuses on positioning. However, the embodiments described herein may also apply for other services and purposes than positioning, such as e.g., in relation to RRM or network planning and optimization, e.g., SON. Further, the measurement databases <b>160</b>A/<b>160</b>B may be shared by nodes <b>110</b>, <b>140</b>, <b>150</b> with multiple purposes, e.g., between any two or more of: positioning node <b>150</b>, SON node <b>140</b>, MDT node <b>140</b> or O&#x26;M node <b>140</b>.</p>
<p id="p-0110" num="0118">Thus the methods described in the section above may be adopted in a straightforward way also for other purposes and/or in other nodes <b>110</b>, <b>140</b>, <b>150</b>, e.g., in general in a node <b>110</b>, <b>140</b>, <b>150</b> using reference measurements or accessing or maintaining a database <b>160</b>A/<b>160</b>B with reference measurements.</p>
<p id="p-0111" num="0119">In the described methods for detecting non-populated areas, it has been assumed that the unpopulated areas, or areas with insufficient reference measurements, if identified, are to be accounted in the position estimation, which may not always be necessary and not always desirable. One of the reasons may be that the position estimate accounting for such areas may become less accurate or may be obtained with a lower confidence. Another reason may be that it may not be interesting for all services to account for such areas, but may be important e.g., for emergency services.</p>
<p id="p-0112" num="0120">Methods of deciding on which approach is to be used, approach 1: no inclusion of unpopulated areas; or approach 2: inclusion of unpopulated areas. Embodiments described in this section may further be combined with previously described embodiments e.g. for positioning.</p>
<p id="p-0113" num="0121">The decision may be made in a node <b>110</b>, <b>130</b>, <b>140</b>, <b>150</b> such as e.g. a positioning node <b>150</b> or a network node <b>140</b> in general which may or may not be positioning node <b>150</b>, e.g., a node requesting positioning <b>110</b>, <b>130</b>, SON node <b>140</b>, O&#x26;M node <b>140</b>, etc. Embodiments may comprise a prior positioning method selection, e.g., comprised in a positioning request. As a part of the positioning method selection, e.g., select between a fingerprinting method without the accounting for unpopulated areas and a positioning method with accounting for unpopulated areas. Further, embodiments may be made after selection of positioning methods such as e.g., a fingerprinting method. The decision may be made dynamically or may also be pre-defined or pre-configured according to different embodiments.</p>
<p id="p-0114" num="0122">Approach 2 may be decided to be used e.g. upon explicit request or configuration, for a specific Client Type or Service Type such as e.g., emergency, any non-commercial service or a subset of commercial services, services not strongly related to public places such as shopping areas, etc.; for a specific environment e.g., outdoors; in the areas potentially covered or served by certain cells <b>120</b>; during a specific time e.g., during night; when a specific event occurs, e.g., an accident or a natural disaster; when a characteristic associated with positioning quality, e.g., requested position accuracy or positioning result confidence level is below a threshold level.</p>
<p id="p-0115" num="0123">In some embodiments, it may be decided to provide both positioning results, with and without accounting for unpopulated areas. The two results may be further compared and one of the results may be compared if the difference in a characteristic of the result, e.g., the position difference, the uncertainty difference or the confidence difference is below a certain threshold level. In another embodiment, both results may be provided/signalled to the requesting node <b>110</b>, <b>130</b>, <b>140</b>, <b>150</b>. As discussed in methods of inclusion of unpopulated areas section, there may also be an indication to distinguish the first result from the second result.</p>
<p id="p-0116" num="0124">When multiple shape reporting is possible, then there may also be a pre-defined order, e.g., the result by Approach 1 is comprised first in the list and the result by Approach 2 is comprised after the first result. The inclusion of the result obtained by Approach 2 may be optional in some embodiments, in addition to the result by Approach 1.</p>
<p id="p-0117" num="0125">It may also be up to the positioning node <b>150</b> which result, i.e., using Approach 1 or Approach 2, to be comprised in the positioning report, e.g., to the node <b>110</b>, <b>130</b>, <b>140</b>, <b>150</b> where Location Services Client (LSC) may reside such PSAP, eNodeB <b>110</b>, user equipment <b>130</b>, an external network client, etc., without or without indication.</p>
<p id="p-0118" num="0126"><figref idref="DRAWINGS">FIG. 3</figref> is an illustrative example of a node <b>110</b>, <b>130</b>, <b>140</b>, <b>150</b> according to some of the example embodiments. The node <b>110</b>, <b>130</b>, <b>140</b>, <b>150</b> illustrated in <figref idref="DRAWINGS">FIG. 3</figref> may be an example of a user equipment <b>130</b>, a base station <b>110</b>, a positioning node <b>150</b>, or any other network node <b>150</b> in the wireless communication system <b>100</b> that may employ the example embodiments presented herein.</p>
<p id="p-0119" num="0127">The node <b>110</b>, <b>130</b>, <b>140</b>, <b>150</b> may comprise any number of communication ports <b>307</b>, <b>308</b>, for example a receiving port <b>307</b> and a transmitting port <b>308</b>. The communication ports <b>307</b>, <b>308</b> may be configured to receive and transmit respectively, any form of communications data. It should be appreciated that the node <b>110</b>, <b>130</b>, <b>140</b>, <b>150</b> may alternatively comprise a single transceiver port. It should further be appreciated that the communication or transceiver port <b>307</b>, <b>308</b> may be in the form of any input/output communications port.</p>
<p id="p-0120" num="0128">The node <b>110</b>, <b>130</b>, <b>140</b>, <b>150</b> may further comprise at least one memory unit <b>309</b>. The memory unit <b>309</b> may be configured to store received, transmitted, and/or measured data of any kind and/or executable program instructions. The memory <b>309</b> may comprise a physical device utilized to store data or programs i.e. sequences of instructions, on a temporary or permanent basis. The memory unit <b>309</b> be any suitable type of computer readable memory and may be of a volatile and/or non-volatile type.</p>
<p id="p-0121" num="0129">The node <b>110</b>, <b>130</b>, <b>140</b>, <b>150</b> may also comprise a measurement unit <b>313</b> that may be configured to perform, alter, or choose network related measurements of any kind. The node <b>110</b>, <b>130</b>, <b>140</b>, <b>150</b> may further comprise a general processing unit <b>311</b>.</p>
<p id="p-0122" num="0130">The node <b>110</b>, <b>130</b>, <b>140</b>, <b>150</b> is configured to estimate a position of a user equipment <b>130</b>. The processor <b>311</b> comprised in the node <b>110</b>, <b>130</b>, <b>140</b>, <b>150</b> may be configured to determine the need for at least one virtual reference measurement. Also, the processor <b>311</b> is configured to obtain the at least one virtual reference measurement, when it is determined to be needed. The processor <b>311</b> is also configured to estimate the position of the user equipment <b>130</b> using the obtained at least one virtual reference measurement.</p>
<p id="p-0123" num="0131">The processor <b>311</b> may be further configured to obtain the at least one virtual reference measurement from: a separate database <b>160</b>A with virtual reference measurements only, a database <b>160</b>B with at least one real reference measurement, or from at least one of: a user equipment <b>130</b>, a network node <b>140</b>, and/or a radio network node <b>110</b>, according to some alternative embodiments.</p>
<p id="p-0124" num="0132">The processor <b>311</b> may further be configured to generate at least one virtual reference measurement in at least one of the following ways: upon a request, upon identifying that the available real reference measurements are insufficient, and upon a triggering event, according to some embodiments.</p>
<p id="p-0125" num="0133">The processor <b>311</b> may further be configured to generate the at least one virtual measurement for a real location, or for a virtual grid.</p>
<p id="p-0126" num="0134">Further, the processor <b>311</b> may further be configured to simulate or extrapolate a virtual reference measurement value related to a timing measurement, or a power-based measurement such as a received power measurement or a received quality measurement.</p>
<p id="p-0127" num="0135">The processor <b>311</b> may in further addition configured to obtain a characteristic of real reference measurements related to the serving cell <b>120</b> of the user equipment <b>130</b>, and also configured to determine the need for at least one virtual reference measurement based on obtained characteristic.</p>
<p id="p-0128" num="0136">The processor <b>311</b> may further be configured to obtain a characteristic by establishing a density value and/or a distribution value of real reference measurements in some embodiments. Also, the processor <b>311</b> may further be configured to determine the need for at least one virtual reference measurement by comparing the established density value and/or distribution value with a first threshold value and determining to estimate the position of the user equipment <b>130</b> using a virtual reference measurement when the density value and/or distribution value does not exceed a first threshold value.</p>
<p id="p-0129" num="0137">The receiving port <b>307</b> of the node <b>110</b>, <b>130</b>, <b>140</b>, <b>150</b> may be configured to receive a measurement from the user equipment <b>130</b>.</p>
<p id="p-0130" num="0138">The processor <b>311</b> may further be configured to determine the need for at least one virtual reference measurement by calculating a correlation value, related to the correlation between the received measurement and a real reference measurement, computing a probability value, based on the calculated correlation value, which probability value indicates probability that the user equipment <b>130</b> is situated in a physical location, associated with the real reference measurement, comparing the computed probability value with a second threshold value, and determining to estimate the position of the user equipment <b>130</b> using the virtual reference measurement, when the computed probability value does not exceed the second threshold value.</p>
<p id="p-0131" num="0139">The processor <b>311</b> may in addition be further configured to compare the computed probability value with a third threshold value, which is equal to, or bigger than the second threshold value, and also configured to determine to not use the virtual reference measurement, when the computed probability value exceeds a third threshold value in some embodiments.</p>
<p id="p-0132" num="0140">The processor <b>311</b> may further be configured to determine to use both the real reference measurement and the virtual reference measurement, when the computed probability value exceeds the second threshold value, but does not exceed the third threshold value according to some embodiments.</p>
<p id="p-0133" num="0141">The processor <b>311</b> may further be configured to estimate the position of the user equipment <b>130</b> by deducing a confidence level of the location estimate, based on: the computed probability value, whether real reference measurement and/or virtual reference measurement is used for estimating the position, and/or the similarity between the received measurement and the reference measurement, wherein the similarity may be represented by correlation results according to some embodiments.</p>
<p id="p-0134" num="0142">Further, the second threshold value and/or the third threshold value may be configured based on: serving cell <b>120</b> of the user equipment <b>130</b>, location, environment, measurement type, requested positioning quality of service level, client type, and/or service type.</p>
<p id="p-0135" num="0143">The processor <b>311</b> may be further configured to generate the virtual reference measurement by simulation or extrapolation of reference measurement in a propagation model, based on cell data, where the cell data may comprise: cell antenna location, antenna profile, downlink transmission power, minimum signal level allowed for access, frequency information and/or environmental description.</p>
<p id="p-0136" num="0144">In addition, the processor <b>311</b> may further be configured to determine the need for at least one virtual reference measurement, based on: explicit request, client type, service type, environment, cell <b>120</b>, time, and/or a characteristic associated with positioning quality which does not exceed a fourth threshold value.</p>
<p id="p-0137" num="0145">Furthermore, the processor <b>311</b> may additionally be further configured to estimate the position of the user equipment <b>130</b> using both a virtual reference measurement and a real reference measurement according to some embodiments.</p>
<p id="p-0138" num="0146">It should be appreciated that the measurement unit <b>313</b> and/or the processing unit <b>311</b> may comprise e.g. one or more instances of e.g. a Central Processing Unit (CPU), a microprocessor, digital signal processor (DSP), field programmable gate array (FPGA), or Application Specific Integrated Circuit (ASIC) or other processing logic that may interpret and execute instructions. It should also be appreciated that the measurement unit <b>313</b> and/or the processing unit <b>311</b> need not be comprised as separate units. The measurement unit <b>313</b> and/or the processing unit <b>311</b> may be comprised as a single computational unit or any number of units. The processing unit <b>311</b> may further perform data processing functions for inputting, outputting, and processing of data comprising data buffering and device control functions, such as call processing control, user interface control, or the like.</p>
<p id="p-0139" num="0147">One or more of the following advantages with the current embodiments may be envisioned. Enhanced fingerprinting methods, applicable for both user-plane and control-plane methods may be provided, with a possibility to deal with areas where reference measurements are not sufficient.</p>
<p id="p-0140" num="0148">Further, better positioning service adaptivity may be achieved. Thereby, improved positioning service may be adapted to different environments and service types.</p>
<p id="p-0141" num="0149">Thanks to embodiments described herein, both virtual data and real data may be combined to obtain location estimate.</p>
<p id="p-0142" num="0150">Further, no impact is made on positioning areas where available reference measurements are sufficient, according to some embodiments.</p>
<p id="p-0143" num="0151">In addition, embodiments herein provide enhanced signalling allowing to explicitly request for accounting unpopulated areas.</p>
<p id="p-0144" num="0152">The user equipment <b>130</b> as described herein refers in a general sense to any of a wireless device or radio node equipped with a radio interface allowing for at least one of transmitting signals in uplink and receiving and/or measuring signals in downlink, or any wireless device or radio node being positioned.</p>
<p id="p-0145" num="0153">Some examples of user equipment <b>130</b> that are to be understood in a general sense are PDA, laptop, mobile phone, sensor, fixed relay, mobile relay, a radio network node such as e.g., RBS, eNodeB, LMUs, mobile relays, fixed relay, femto BS, radio node using the terminal technology, sensor, user equipment <b>130</b> assisting other user equipment <b>130</b> or radio nodes in positioning, etc.</p>
<p id="p-0146" num="0154">The signalling described in the example embodiments is either via direct links such as protocols or physical channels, or logical links such as e.g. via higher layer protocols and/or via one or more nodes <b>110</b>, <b>140</b>, <b>150</b>. For example, in LTE in the case of signalling between E-SMLC and LCS Client the positioning result may be transferred via multiple nodes, at least via Mobility Management Entity (MME) and/or Gateway Mobile Location Centre (GMLC).</p>
<p id="p-0147" num="0155">Positioning node <b>150</b> described in the different embodiments is a node with positioning functionality. For example, for LTE it may be understood as a positioning platform in the user plane (e.g., SUPL Location Platform (SLP) in LTE) or a positioning node in the control plane (e.g., E-SMLC in LTE). SLP may also comprise SLC and/or SPC, where SPC may also have a proprietary interface with E-SMLC. Positioning functionality may also be split among two or more nodes, e.g., there may be a gateway node between LMUs and E-SMLC, where the gateway node may be a radio base station <b>110</b> or another network node <b>140</b>; in this case, the term &#x201c;positioning node&#x201d; may relate to E-SMLC and the gateway node. In a testing environment, a positioning node may be simulated or emulated by test equipment.</p>
<p id="p-0148" num="0156">A cell <b>120</b> is associated with a radio network node <b>110</b>, where a radio node <b>110</b> or radio network node <b>110</b> or eNodeB <b>110</b> used interchangeably in the description, comprises in a general sense any node <b>110</b> transmitting radio signals in downlink and/or receiving radio signals in uplink, e.g., eNodeB, macro/micro/pico base station, home eNodeB, relay, or repeater according to different embodiments. A radio network node <b>110</b> may or may not serve user equipment <b>130</b>. Further, a radio network node <b>110</b> may or may not create own cells <b>120</b>, e.g., may or may not have own cell IDs, according to different embodiments.</p>
<p id="p-0149" num="0157">Some examples of radio network node <b>110</b> that do not serve user equipment <b>130</b> are beacon devices transmitting pre-defined signals, e.g., downlink reference signals such as Positioning Reference Signals (PRS) and Location Measurement Units (LMUs) performing measurements on uplink signals.</p>
<p id="p-0150" num="0158">The example embodiments are not limited to LTE, but may apply in any Radio Access Network (RAN), single- or multi-Radio Access Technology (RAT). Some other RAT examples are LTE-Advanced, UMTS, HSPA, GSM, cdma2000, HRPD, WiMAX, and WiFi.</p>
<p id="p-0151" num="0159">The example embodiments described herein may be considered as independent embodiments or may be considered in any combination with each other or with any parts of the other embodiments herein to describe non-limiting examples of the current methods.</p>
<p id="p-0152" num="0160">Herein, the expressions &#x201c;real measurements&#x201d; or &#x201c;reference measurements&#x201d; are used interchangeably in the embodiments described herein, and may comprise any one or more of real measurements collected from user equipment <b>130</b> or radio network measurement reports that may be collected e.g. for positioning or any other purpose, e.g., MDT or SON; measurements obtained by drive tests; measurements obtained via network training; measurements obtained via simulations and used as reference measurements in the network e.g., for positioning or SON.</p>
<p id="p-0153" num="0161">Reference measurement normally accompanies a ground truth, a.k.a. reference position, which is obtained at the time that measurement was made. The ground truth may be GPS or other high accuracy positioning result e.g. A-GPS, OTDOA, UTDOA etc. according to different embodiments.</p>
<p id="p-0154" num="0162">The reference measurements may be stored in one or more databases <b>160</b>A/<b>160</b>B in a node <b>110</b>, <b>140</b>, <b>150</b> and/or a user equipment <b>150</b>, e.g., in the form of tables or maps.</p>
<p id="p-0155" num="0163">At least in some embodiments, the term &#x201c;unpopulated area&#x201d; used herein may be interchangeably used with &#x201c;area with insufficient reference measurements&#x201d;. The herein made description of the example embodiments, have been presented for purposes of illustration and description. The foregoing description is not intended to be exhaustive or to limit example embodiments to the precise form disclosed, and modifications and variations are possible in light of the above teachings or may be acquired from practice of various alternatives to the provided embodiments. The examples discussed herein were chosen and described in order to explain the principles and the nature of various example embodiments and its practical application to enable one skilled in the art to utilise the example embodiments in various manners and with various modifications as are suited to the particular use contemplated. The features of the embodiments described herein may be combined in all possible combinations of methods, apparatus, modules, systems, and computer program products.</p>
<p id="p-0156" num="0164">It should be noted that the word &#x201c;comprising&#x201d; does not necessarily exclude the presence of other elements or steps than those listed and the words &#x201c;a&#x201d; or &#x201c;an&#x201d; preceding an element do not exclude the presence of a plurality of such elements. It should further be noted that any reference signs do not limit the scope of the claims, that the example embodiments may be implemented at least in part by means of both hardware and software, and that several &#x201c;means&#x201d;, &#x201c;units&#x201d; or &#x201c;devices&#x201d; may be represented by the same item of hardware.</p>
<p id="p-0157" num="0165">A &#x201c;device&#x201d; as the term is used herein, is to be broadly interpreted to comprise a radiotelephone having ability for Internet/intranet access, web browser, organizer, calendar, a camera (e.g., video and/or still image camera), a sound recorder (e.g., a microphone), and/or Global Positioning System (GPS) receiver; a Personal Communications System (PCS) terminal that may combine a cellular radiotelephone with data processing; a Personal Digital Assistant (PDA) that can include a radiotelephone or wireless communication system; a laptop; a camera (e.g., video and/or still image camera) having communication ability; and any other computation or communication device capable of transceiving, such as a personal computer, a home entertainment system, a television, etc.</p>
<p id="p-0158" num="0166">The various example embodiments described herein is described in the general context of method steps or processes, which may be implemented in one aspect by a computer program product, embodied in a computer-readable medium, comprising computer-executable instructions, such as program code, executed by computers in networked environments. A computer-readable medium may comprise removable and non-removable storage devices including, but not limited to, Read Only Memory (ROM), Random Access Memory (RAM), Compact Discs (CDs), Digital Versatile Discs (DVD), etc. Generally, program modules may comprise routines, programs, objects, components, data structures, etc. that perform particular tasks or implement particular abstract data types. Computer-executable instructions, associated data structures, and program modules represent examples of program code for executing steps of the methods disclosed herein. The particular sequence of such executable instructions or associated data structures represents examples of corresponding acts for implementing the functions described in such steps or processes.</p>
<p id="p-0159" num="0167"><figref idref="DRAWINGS">FIG. 4</figref> is an illustration of an example of an embodiment of fingerprinting positioning in general in a node <b>110</b>, <b>130</b>, <b>140</b>, <b>150</b>. The fingerprinting positioning may comprise AECID methods, comprising iAECID, in particular, and the corresponding methods in a node <b>110</b>, <b>130</b>, <b>140</b>, <b>150</b>. <figref idref="DRAWINGS">FIG. 5</figref> also comprises a method for triggering, generating, and using virtual reference measurements. Further, is provided a method for deciding whether to account or not for unpopulated areas. Also, a method of delivering the positioning result when it is possible to account for populated and/or unpopulated areas is provided.</p>
<p id="p-0160" num="0168">According to the illustrated embodiment <b>400</b>, fingerprinting positioning is made in areas with insufficient measurement statistics, e.g. unpopulated areas, in an action <b>401</b>.</p>
<p id="p-0161" num="0169">Thereafter, in an action <b>402</b> a triggering based on time, location or event is performed.</p>
<p id="p-0162" num="0170">Embodiments of the method <b>400</b> may further comprise any, some or all of the actions database generation <b>403</b>; usage determination of virtual database <b>404</b>; accountability of unpopulated areas <b>405</b>; and/or positioning result delivery <b>406</b>.</p>
<p id="p-0163" num="0171"><figref idref="DRAWINGS">FIG. 5</figref> is an illustration of an example of an embodiment of a method <b>500</b>, comprising new signalling means. In an action <b>501</b>, fingerprinting positioning in areas with insufficient measurement statistics, e.g. unpopulated areas may be performed. Further, triggering based on time, location or event may be performed. Based on that, any of a first or a second approach may be utilised for signalling.</p>
<p id="p-0164" num="0172"><figref idref="DRAWINGS">FIG. 6</figref> is a flow chart illustrating embodiments of a method <b>600</b> in a node <b>110</b>, <b>130</b>, <b>140</b>, <b>150</b> in a wireless communication system <b>100</b>. The expression &#x201c;method in a node&#x201d; is in the present context to be interpreted as a &#x201c;method to be performed in a node&#x201d;, or a &#x201c;method for use in a node&#x201d;. The method <b>600</b> aims at estimating a position of a user equipment <b>130</b>. The wireless communication system <b>100</b> may be based on Long-Term Evolution (LTE) within the Third Generation Partnership Project (3GPP) according to some embodiments. The node <b>110</b>, <b>130</b>, <b>140</b>, <b>150</b> may comprise a radio network node <b>110</b> according to some embodiments, such as e.g. a base station such as e.g. an Evolved Node B. The node <b>110</b>, <b>130</b>, <b>140</b>, <b>150</b> may further comprise a user equipment <b>130</b>, a network node <b>140</b> or a positioning node <b>150</b>, according to different embodiments.</p>
<p id="p-0165" num="0173">To appropriately estimate a position of a user equipment <b>130</b>, the method <b>600</b> may comprise a number of actions <b>601</b>-<b>605</b>. It is however to be noted that any, some or all of the described actions <b>601</b>-<b>605</b>, may be performed in a somewhat different chronological order than the enumeration indicates, or even be performed simultaneously. Also, it is to be noted that some of the actions such as e.g. <b>601</b> and/or <b>602</b> may be performed within some alternative embodiments. The method <b>600</b> may comprise the following actions:</p>
<p id="p-0166" num="0174">Action <b>601</b></p>
<p id="p-0167" num="0175">This action may be comprised within some, but not necessarily all alternative embodiments of the method <b>600</b>.</p>
<p id="p-0168" num="0176">A characteristic of real reference measurements related to the serving cell <b>120</b> of the user equipment <b>130</b> may be obtained. The real reference measurements may comprise e.g. any of signal fingerprinting, received power measurement (RSRP) or a received quality measurement (RSRQ), cell ID and/or E-CID; OTDOA; UTDOA; GNSS and/or A-GNSS; AECID.</p>
<p id="p-0169" num="0177">A characteristic of real reference measurements related to the serving cell <b>120</b> of the user equipment <b>130</b> may comprise establishing a density value and/or a distribution value of real reference measurements, according to some embodiments.</p>
<p id="p-0170" num="0178">Action <b>602</b></p>
<p id="p-0171" num="0179">This action may be comprised within some, but not necessarily all alternative embodiments of the method <b>600</b>.</p>
<p id="p-0172" num="0180">A measurement may be received from the user equipment <b>130</b>.</p>
<p id="p-0173" num="0181">Action <b>603</b></p>
<p id="p-0174" num="0182">The need for at least one virtual reference measurement is determined.</p>
<p id="p-0175" num="0183">The virtual reference measurement may comprise a simulated or extrapolated value related to a timing measurement (comprising e.g. TA, RTT, Tx-Rx), or a power-based measurement such as a received power measurement (RSRP) or a received quality measurement (RSRQ).</p>
<p id="p-0176" num="0184">The virtual reference measurement may be generated by simulation or extrapolation of reference measurement in a propagation model, based on cell data, where the cell data comprises: cell antenna location, antenna profile, downlink transmission power, minimum signal level allowed for access, frequency information and/or environmental description.</p>
<p id="p-0177" num="0185">According to some alternative embodiments, the determination of the need above may be based on the obtained <b>601</b> characteristic of real reference measurements related to the serving cell <b>120</b> of the user equipment <b>130</b>.</p>
<p id="p-0178" num="0186">Further, according to some embodiments, the established density value and/or distribution value may be compared with a first threshold value. It may be determined to estimate the position of the user equipment <b>130</b> using a virtual reference measurement when the density value and/or distribution value does not exceed the first threshold value.</p>
<p id="p-0179" num="0187">Further the determination may comprise calculating a correlation value, related to the correlation between the received <b>602</b> measurement and a real reference measurement, computing a probability value, based on the calculated correlation value, which probability value indicates probability that the user equipment <b>130</b> is situated in a physical location, associated with the real reference measurement, comparing the computed probability value with a second threshold value, and determining to estimate the position of the user equipment <b>130</b> using the virtual reference measurement, when the computed probability value does not exceed the second threshold value.</p>
<p id="p-0180" num="0188">The computed probability value may be compared also with a third threshold value, according to some embodiments, which is equal to, or bigger than the second threshold value.</p>
<p id="p-0181" num="0189">It may further be determined to not use the virtual reference measurement, when the computed probability value exceeds a third threshold value.</p>
<p id="p-0182" num="0190">It may further, in some embodiments be determined to use both the real reference measurement and the virtual reference measurement, when the computed probability value exceeds the second threshold value, but does not exceed the third threshold value.</p>
<p id="p-0183" num="0191">The second threshold value and/or the third threshold value may be configured based on serving cell <b>120</b> of the user equipment <b>130</b>, location, environment, measurement type, requested positioning quality of service level, client type, and/or service type according to different embodiments.</p>
<p id="p-0184" num="0192">The need for at least one virtual reference measurement may be determined based on: explicit request, client type, service type, environment, cell <b>120</b>, time, and/or when a characteristic associated with positioning quality does not exceed a fourth threshold value, according to some embodiments.</p>
<p id="p-0185" num="0193">Action <b>604</b></p>
<p id="p-0186" num="0194">The at least one virtual reference measurement is obtained when it is determined <b>603</b> to be needed.</p>
<p id="p-0187" num="0195">The at least one virtual reference measurement may be obtained, or achieved, or retrieved from: a separate database <b>160</b>A with virtual reference measurements only, a database <b>160</b>B with at least one real reference measurement, or from at least one of: a user equipment <b>130</b>, a network node <b>140</b>, and/or a radio network node <b>110</b>.</p>
<p id="p-0188" num="0196">Further, the at least one virtual reference measurement may be obtained by generating at least one virtual reference measurement in at least one of the following ways: upon a request, upon identifying that the available real reference measurements are insufficient, and/or upon a triggering event, according to different embodiments.</p>
<p id="p-0189" num="0197">The at least one virtual measurement may be generated for a real location, or for a virtual grid, according to different embodiments.</p>
<p id="p-0190" num="0198">The estimation of the position of the user equipment <b>130</b> may further comprise deducing a confidence level of the location estimate, based on: the computed probability value, whether real reference measurement and/or virtual reference measurement is used for estimating the position, and/or the similarity between the received <b>602</b> measurement and the reference measurement, wherein the similarity is represented by correlation results.</p>
<p id="p-0191" num="0199">Action <b>605</b></p>
<p id="p-0192" num="0200">The position of the user equipment <b>130</b> is estimated, using the obtained <b>604</b> at least one virtual reference measurement.</p>
<p id="p-0193" num="0201">The position of the user equipment <b>130</b> may be estimated using both a virtual reference measurement and a real reference measurement.</p>
<p id="p-0194" num="0202">The actions <b>601</b>-<b>605</b> to be performed in the node <b>110</b>, <b>130</b>, <b>140</b>, <b>150</b> may be implemented through one or more processors <b>311</b> in the node <b>110</b>, <b>130</b>, <b>140</b>, <b>150</b>, together with computer program code for performing the functions of the present actions <b>601</b>-<b>605</b>. Thus a computer program product, comprising instructions for performing the actions <b>601</b>-<b>605</b> in the node <b>110</b>, <b>130</b>, <b>140</b>, <b>150</b> may estimate a position of a user equipment <b>130</b>, when the computer program code is loaded into the one or more processors <b>311</b>.</p>
<p id="p-0195" num="0203">The computer program product mentioned above may be provided for instance in the form of a data carrier carrying computer program code for performing at least some of the actions <b>601</b>-<b>605</b> according to some embodiments when being loaded into the processor <b>311</b>. The data carrier may be e.g. a hard disk, a CD ROM disc, a memory stick, an optical storage device, a magnetic storage device or any other appropriate medium such as a disk or tape that may hold machine readable data in a non transitory manner. The computer program product may furthermore be provided as computer program code on a server and downloaded to the node <b>110</b>, <b>130</b>, <b>140</b>, <b>150</b> remotely, e.g. over an Internet or an intranet connection.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method in a node, for estimating a position of a user equipment, the method comprising:
<claim-text>obtaining a characteristic of real reference measurements related to the serving cell of the user equipment,</claim-text>
<claim-text>establishing a density value and/or a distribution value of real reference measurements,</claim-text>
<claim-text>determining the need for at least one virtual reference measurement via a comparison of the established density value and/or distribution value with a first threshold value,</claim-text>
<claim-text>obtaining the at least one virtual reference measurement, when it is determined to be needed,</claim-text>
<claim-text>estimating the position of the user equipment, using the obtained at least one virtual reference measurement when the density value and/or distribution value does not exceed the first threshold value.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the action of obtaining comprises obtaining the at least one virtual reference measurement from: a separate database with virtual reference measurements only, a database with at least one real reference measurement, or from at least one of: a user equipment, a network node, and/or a radio network node.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the action of obtaining further comprises generating at least one virtual reference measurement in at least one of the following ways: upon a request, upon identifying that the available real reference measurements are insufficient, and upon a triggering event or condition.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the at least one virtual measurement is generated for a real location, or for a virtual grid.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the virtual reference measurement comprises a simulated or extrapolated value related to a timing measurement, or a power-based measurement such as a received power measurement or a received quality measurement.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>receiving a measurement from the user equipment, and wherein the action of determining comprises:</claim-text>
<claim-text>calculating a correlation value, related to the correlation between the received measurement and a real reference measurement,</claim-text>
<claim-text>computing a probability value, based on the calculated correlation value, which probability value indicates probability that the user equipment is situated in a physical location associated with the real reference measurement,</claim-text>
<claim-text>comparing the computed probability value with a second threshold value, and</claim-text>
<claim-text>determining to estimate the position of the user equipment using the virtual reference measurement, when the computed probability value does not exceed the second threshold value.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method according to <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein the computed probability value is compared also with a third threshold value, which is equal to, or bigger than the second threshold value, and wherein it is determined to not use the virtual reference measurement, when the computed probability value exceeds the third threshold value.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method according to <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein it is determined to use both the real reference measurement and the virtual reference measurement, when the computed probability value exceeds the second threshold value, but does not exceed the third threshold value.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the action of estimating the position of the user equipment further comprises deducing a confidence level of the location estimate, based on: the computed probability value, whether real reference measurement and/or virtual reference measurement is used for estimating the position, and/or the similarity between the received measurement and the reference measurement, wherein the similarity is represented by correlation results.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The method according to <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the second threshold value and/or the third threshold value is/are configured based on serving cell of the user equipment, location, environment, measurement type, requested positioning quality of service level, client type, and/or service type.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the virtual reference measurement is generated by simulation or extrapolation of reference measurement in a propagation model, based on cell data, where the cell data comprises one or more of: cell antenna location, antenna profile, downlink transmission power, minimum signal level allowed for access, frequency information and/or environmental description.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the action of determining the need for at least one virtual reference measurement is based on: explicit request, client type, service type, environment, cell, time, and/or when a characteristic associated with positioning quality does not exceed a fourth threshold value.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the action of estimating the position of the user equipment is made using both a virtual reference measurement and a real reference measurement.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. A node, configured to estimate a position of a user equipment, which node comprises:
<claim-text>a processor configured to obtain a characteristic of real reference measurements related to a serving cell of the user equipment by establishing a density value and/or a distribution value of real reference measurements,</claim-text>
<claim-text>the processor is further configured to determine the need for at least one virtual reference measurement based on the obtained characteristic via a comparison of the established density value and/or distribution value with a first threshold value,</claim-text>
<claim-text>the processor is further configured to obtain the at least one virtual reference measurement, when it is determined to be needed, and also configured to estimate the position of the user equipment using the obtained at least one virtual reference measurement when the density value and/or distribution value does not exceed the first threshold value.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The node, according to <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein:
<claim-text>the processor is further configured to obtain the at least one virtual reference measurement from: a separate database with virtual reference measurements only, a database with at least one real reference measurement, or from at least one of: a user equipment, a network node, and/or a radio network node.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The node, according to <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein:
<claim-text>the processor is further configured to generate at least one virtual reference measurement in at least one of the following ways: upon a request, upon identifying that the available real reference measurements are insufficient, and upon a triggering event.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The node, according to <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein:
<claim-text>the processor is further configured to simulate or extrapolate a virtual reference measurement value related to a timing measurement, or a power-based measurement such as a received power measurement or a received quality measurement.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The node, according to <claim-ref idref="CLM-00014">claim 14</claim-ref>, further comprising:
<claim-text>a receiving port, configured to receive a measurement from the user equipment, and wherein the processor is further configured to determine the need for at least one virtual reference measurement by calculating a correlation value, related to the correlation between the received measurement and a real reference measurement, computing a probability value, based on the calculated correlation value, which probability value indicates probability that the user equipment is situated in a physical location, associated with the real reference measurement, comparing the computed probability value with a second threshold value, and determining to estimate the position of the user equipment using the virtual reference measurement, when the computed probability value does not exceed the second threshold value.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The node, according to <claim-ref idref="CLM-00018">claim 18</claim-ref>, wherein:
<claim-text>the processor is further configured to compare the computed probability value with a third threshold value, which is equal to, or bigger than the second threshold value, and also configured to determine to not use the virtual reference measurement, when the computed probability value exceeds the third threshold value.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The node, according to <claim-ref idref="CLM-00019">claim 19</claim-ref>, wherein:
<claim-text>the processor is further configured to determine to use both the real reference measurement and the virtual reference measurement, when the computed probability value exceeds the second threshold value, but does not exceed the third threshold value.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. The node, according to <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein:
<claim-text>the processor is further configured to estimate the position of the user equipment by deducing a confidence level of the location estimate, based on: the computed probability value, whether real reference measurement and/or virtual reference measurement is used for estimating the position, and/or the similarity between the received measurement and the reference measurement, wherein the similarity is represented by correlation results.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. The node, according to <claim-ref idref="CLM-00019">claim 19</claim-ref>, wherein the second threshold value and/or the third threshold value is configured based on: serving cell of the user equipment, location, environment, measurement type, requested positioning quality of service level, client type, and/or service type.</claim-text>
</claim>
<claim id="CLM-00023" num="00023">
<claim-text>23. The node, according to <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein the processor is further configured to generate the virtual reference measurement by simulation or extrapolation of reference measurement in a propagation model, based on cell data, where the cell data comprises: cell antenna location, antenna profile, downlink transmission power, minimum signal level allowed for access, frequency information and/or environmental description.</claim-text>
</claim>
<claim id="CLM-00024" num="00024">
<claim-text>24. The node, according to <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein the processor is further configured to determine the need for at least one virtual reference measurement, based on: explicit request, client type, service type, environment, cell, time, and/or a characteristic associated with positioning quality which does not exceed a fourth threshold value.</claim-text>
</claim>
<claim id="CLM-00025" num="00025">
<claim-text>25. The node, according to <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein the processor is further configured to estimate the position of the user equipment using both a virtual reference measurement and a real reference measurement.</claim-text>
</claim>
<claim id="CLM-00026" num="00026">
<claim-text>26. The node, according to <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein the node comprises: a radio network node, a user equipment, a network node or a positioning node.</claim-text>
</claim>
<claim id="CLM-00027" num="00027">
<claim-text>27. A method in a node for estimating a position of a user equipment, the method comprising:
<claim-text>receiving a measurement from the user equipment,</claim-text>
<claim-text>determining a need of a virtual reference measurement via a calculation of a correlation value, said correlation value related to a correlation between the received measurement and a real reference measurement,</claim-text>
<claim-text>computing a probability value, based on the calculated correlation value, which probability value indicates probability that the user equipment is situated in a physical location associated with the real reference measurement,</claim-text>
<claim-text>comparing the computed probability value with a first threshold value, and</claim-text>
<claim-text>determining to estimate the position of the user equipment using a virtual reference measurement, when the computed probability value does not exceed the first threshold value.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00028" num="00028">
<claim-text>28. The method according to <claim-ref idref="CLM-00027">claim 27</claim-ref>, wherein the computed probability value is compared also with a second threshold value, which is equal to, or bigger than the first threshold value, and wherein it is determined not to use the virtual reference measurement, when the computed probability value exceeds the second threshold value.</claim-text>
</claim>
<claim id="CLM-00029" num="00029">
<claim-text>29. The method according to <claim-ref idref="CLM-00028">claim 28</claim-ref>, wherein it is determined to use both the real reference measurement and the virtual reference measurement, when the computed probability value exceeds the first threshold value, but does not exceed the second threshold value.</claim-text>
</claim>
<claim id="CLM-00030" num="00030">
<claim-text>30. A node configured to estimate a position of a user equipment, which node comprises:
<claim-text>a receiving port configured to receive a measurement from the user equipment,</claim-text>
<claim-text>a processor configured to determine a need for at least on virtual reference measurement via a calculation of a correlation value, related to a correlation between the received measurement and a real reference measurement,</claim-text>
<claim-text>the processor further configured to compute a probability value, based on the calculated correlation value, said probability value indicating a probability that the user equipment is situated in a physical location associated with the real reference measurement,</claim-text>
<claim-text>the processor further configured to compare the computed probability value with a first threshold value,</claim-text>
<claim-text>the processor further configured to estimate the position of the user equipment using the virtual reference measurement when the computed probability value does not exceed the first threshold value.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00031" num="00031">
<claim-text>31. The node according to <claim-ref idref="CLM-00030">claim 30</claim-ref>, wherein the processor is further configured to compare the computed probability value with a second threshold value, which is equal to, or bigger than the second threshold value, and processor is also configured to determine to not use the virtual reference measurement when the computed probability value exceeds the second threshold value.</claim-text>
</claim>
<claim id="CLM-00032" num="00032">
<claim-text>32. The node according to <claim-ref idref="CLM-00031">claim 31</claim-ref>, wherein the processor is further configured to determine to use both the real reference measurement and the virtual reference measurement when the computed probability value exceeds the first threshold value but does not exceed the second threshold value.</claim-text>
</claim>
</claims>
</us-patent-grant>
