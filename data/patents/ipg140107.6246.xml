<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08627387-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08627387</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13335360</doc-number>
<date>20111222</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<us-term-of-grant>
<us-term-extension>55</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20110101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>N</subclass>
<main-group>7</main-group>
<subgroup>173</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20110101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>N</subclass>
<main-group>7</main-group>
<subgroup>16</subgroup>
<symbol-position>L</symbol-position>
<classification-value>N</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>725 88</main-classification>
<further-classification>725 87</further-classification>
<further-classification>725 90</further-classification>
<further-classification>725 93</further-classification>
<further-classification>725100</further-classification>
<further-classification>725102</further-classification>
<further-classification>725109</further-classification>
<further-classification>725110</further-classification>
<further-classification>725112</further-classification>
<further-classification>725116</further-classification>
<further-classification>725119</further-classification>
<further-classification>709231</further-classification>
</classification-national>
<invention-title id="d2e53">Distributed method of indexing time and file size alignment</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>2005/0086696</doc-number>
<kind>A1</kind>
<name>Daniels</name>
<date>20050400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>725 88</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>2006/0037057</doc-number>
<kind>A1</kind>
<name>Xu</name>
<date>20060200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2010/0211657</doc-number>
<kind>A1</kind>
<name>Kinder et al.</name>
<date>20100800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709221</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2010/0266052</doc-number>
<kind>A1</kind>
<name>Kim et al.</name>
<date>20101000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>37524028</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2010/0299701</doc-number>
<kind>A1</kind>
<name>Liu et al.</name>
<date>20101100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>725 39</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>WO</country>
<doc-number>2010/051169</doc-number>
<kind>A2</kind>
<date>20100500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00007">
<othercit>Huawei Technologies Corp., HTTP Streaming&#x2014;Text Changes to S4-100085, Mar. 2-4, 2009.</othercit>
</nplcit>
<category>cited by examiner</category>
</us-citation>
<us-citation>
<nplcit num="00008">
<othercit>Fernando, Gerard et al.: &#x201c;HTTP Streaming Solution&#x2014;Response to Call for Proposal&#x201d;, Jul. 22, 2010; Geneva, Switzerland; 32 pages.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00009">
<othercit>Extended European Search Report dated Feb. 21, 2013; 5 pages.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>25</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>725 90</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>725 93</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>725102</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>725 86</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>725 87</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>725 88</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>725 91</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>725 92</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>725 97</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>725100</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>725109</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>725110</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>725112</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>725116</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>725119</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709231</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>5</number-of-drawing-sheets>
<number-of-figures>5</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20130167180</doc-number>
<kind>A1</kind>
<date>20130627</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Georgescu</last-name>
<first-name>Sorin Marian</first-name>
<address>
<city>Montreal</city>
<country>CA</country>
</address>
</addressbook>
<residence>
<country>CA</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Georgescu</last-name>
<first-name>Sorin Marian</first-name>
<address>
<city>Montreal</city>
<country>CA</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Ericsson Canada Inc.</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
<agent sequence="02" rep-type="attorney">
<addressbook>
<last-name>Andrade</last-name>
<first-name>Dilip C.</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Telefonaktiebolaget L M Ericsson (publ)</orgname>
<role>03</role>
<address>
<city>Stockholm</city>
<country>SE</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Nguyen-Ba</last-name>
<first-name>Hoang-Vu A</first-name>
<department>2421</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">Logical content is defined by start/end times into a VoD media offering. The calculation of byte-range markers corresponding to the start/end times is distributed among the STBs to first request the particular logical content. Upon receiving an initial request for a logical content offering, an IPTV AS returns a VoD media file URL, start/end times, and null values of byte-range markers corresponding to the start/end times. In response to the null values, the initially-requesting STB downloads the entire VoD media file from a Download Media Server, and calculates the byte-range markers by comparing the start/end times to timestamps in non-encrypted headers in the VoD media file. The non-null byte-range markers are transmitted back to the IPTV AS, which provides them to STBs subsequently requesting the same logical content. The subsequently-requesting STBs may download only the logical content by providing the non-null byte-range markers to the Download Media Server.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="227.58mm" wi="175.51mm" file="US08627387-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="232.83mm" wi="166.88mm" orientation="landscape" file="US08627387-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="246.04mm" wi="184.57mm" orientation="landscape" file="US08627387-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="235.20mm" wi="183.30mm" file="US08627387-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="244.77mm" wi="188.38mm" file="US08627387-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="235.80mm" wi="178.14mm" file="US08627387-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">FIELD OF THE INVENTION</heading>
<p id="p-0002" num="0001">The present invention relates generally to Video on Demand subscriber networks, and in particular to a system and method of distributed calculation of byte addresses for logical content delivery.</p>
<heading id="h-0002" level="1">BACKGROUND</heading>
<p id="p-0003" num="0002">Internet Protocol TeleVision (IPTV) is a system through which television-type content and services are delivered using the Internet Protocol (IP) over packet-switched networks, such as the Internet and most modern wireless telecommunication networks. IPTV is distinguished from various applications that transfer video files across networks, by an ongoing standardization process and deployment in subscriber-based telecommunication networks featuring tightly managed network security and performance, allowing a high Quality of Service (QoS) and enhanced user experience. IPTV subscriptions typically require at least one cooperative network node, referred to herein as a Set-Top Box (STB), installed at the subscriber premises. IPTV services may be classified into three main types: live (i.e., real-time) broadcast television, time-shifted television (e.g., replays of previously broadcast television content), and Video on Demand (VoD). VoD offerings typically comprise movies, as opposed to television content.</p>
<p id="p-0004" num="0003">VoD is generally offered as a streaming service, such as Real Time Streaming Protocol (RTSP), or as a download service, such as HTTP download. VoD streaming service is used in IPTV deployments where the available bandwidth over the last mile (i.e., in the access network) is greater than the bandwidth required by the stream. VoD download service has no specific bandwidth requirements; the media content downloads in the background and when completed, the user is notified that he or she may begin to play it.</p>
<p id="p-0005" num="0004">Rental movies are the content typically offered through the VoD service, including VoD download service. In this case, the movie asset within the offering package references the entire VoD media file. A Download Manager application within the STB must either download the media file fully before starting to play it, or utilize a Progressive Download delivery method, whereby the play can start before the file is been fully downloaded.</p>
<p id="p-0006" num="0005">Another type of content offered through the VoD service, including VoD download service, is called logical content. A logical content offering is one or more clips, or portions, of a movie or other VoD media file. As a practical implementation matter, it is not feasible to download an entire VoD media file to the STB and play only a portion of it, considering the impact on the bandwidth consumed and the download time. The bandwidth available for the VoD download service is generally limited; hence, such an implementation is not user friendly or cost effective.</p>
<p id="p-0007" num="0006">There are three known solutions addressing the logical content download optimization problem: Content/Asset Management System (CMS/AMS); server-based logical content clipping; and client-based logical content clipping.</p>
<p id="p-0008" num="0007">The CMS/AMS solution generates, at logical package creation time, a new VoD package for download, which contains the clipped media file. In this solution, each time a new logical content is defined, the base movie asset (i.e., a VoD media file) must be decrypted and clipped, and the logical content re-encrypted. The decryption/re-encryption process is resource intensive, and is therefore disfavored by operators.</p>
<p id="p-0009" num="0008">In server-based logical content clipping, a logical content package, which contains start and end time markers for the base asset, is created. For example, the start/end time markers may comprise startNPT/endNPT (Normal Playback Time) markers, that measure elapsed time from a specific temporal point within the VoD media file (e.g., NPT=0 or the Beginning Of Stream, or BOS, marker). At package ingestion, the Download Media Server downloads the entire media file from a CMS/AMS. The STB retrieves the startNPT/endNPT markers from an IPTV Application Server (AS) at the time of purchasing the logical content offering. The STB then requests a time-range download from the download media server. However, most media servers support byte-range partial file download, as this is standard in the HTTP protocol (range header), but do not in fact support time-range downloads. The time-range download is not supported in standards published by standards bodies such as the Internet Engineering Task Force (IETF). Therefore, media server manufacturers do not have any incentive to implement this method.</p>
<p id="p-0010" num="0009">In client-based logical content clipping, the STB obtains the temporal start/end markers from the IPTV AS upon purchasing the VoD offering. The STB then downloads the entire VoD media file from the download media server, but only plays (as specified in the purchased VoD offering) the time range delimited by the temporal markers. The obvious drawback of this solution is that the entire VoD media file must to be downloaded to the STB, but only a small portion is rendered to a user. This wastes bandwidth in any scenario, but in the particular case of low bandwidth in the last mile access network, would result in long download time. This is especially critical when the logical content is only a small segment of a long movie, as in the case of movie advertisement.</p>
<p id="p-0011" num="0010">There exists a need in the art for an efficient system and method of delivering VoD logical content to a plurality of STBs, without wasting bandwidth and by utilizing industry-standard file fragmentation protocols.</p>
<heading id="h-0003" level="1">SUMMARY</heading>
<p id="p-0012" num="0011">According to one or more embodiments disclosed and claimed herein, the calculation of byte-range markers corresponding to the temporal start and end markers into a VoD media file that define a logical content offering, is distributed among the STBs to first request the particular logical content. Upon receiving an initial request for a logical content offering, an IPTV AS returns a VoD media file URL, start and end times into the VoD media file defining the logical content offering, and null values of byte-range markers corresponding to the start and end times. In response to the null values, the initially-requesting STB downloads the entire VoD media file from a Download Media Server (using the URL). The initially-requesting STB then calculates the byte-range markers corresponding to the start and end times by inspecting timestamps in headers in the VoD media file. The headers are not encrypted, and the full VoD media file need not be decrypted for this calculation. The valid (non-null) byte-range markers are transmitted back to the IPTV AS, which provides them to STBs that subsequently request the same logical content. The subsequently-requesting STBs may download only the logical content by providing the valid byte-range markers (with the VoD media file URL) to the Download Media Server. The Download Media Server, which implements the HTTP Range header functionality, may extract, without decryption, the logical content, and transmit only that portion of the VoD media file to all subsequently-requesting STBs.</p>
<p id="p-0013" num="0012">One embodiment relates to a method of distributing logical content in a VoD network. A first request for logical content comprising a subset of a VoD media file, and defined by predetermined start and end times measured from a temporal start point within the VoD media file, is received from a network node. A URL associated with the VoD media file, the start and end times defining the logical content, and byte-range markers defining offsets into the VoD media file corresponding to the start and end times, wherein the byte-range markers have a null value, are transmitted to the first requesting node. Non-null values for the byte-range markers are received from the first requesting node and stored. One or more subsequent requests for the same logical content are received from one or more network nodes. A URL associated with the VoD media file, the start and end times defining the logical content, and the non-null byte-range markers corresponding to the start and end times are transmitted to each subsequent requesting node.</p>
<p id="p-0014" num="0013">Another embodiment relates to a method of receiving logical content by a STB in a VoD network. A request for logical content comprising a subset of a VoD media file, the subset defined by predetermined start and end times measured from a temporal start point within the VoD media file, is transmitted to an IPTV AS. A URL associated with the VoD media file, the start and end times defining the logical content, and byte-range markers defining offsets into the VoD media file corresponding to the start and end times, wherein the byte-range markers have a null value, are received from the IPTV AS. In response to the null byte-range markers, a request for the full VoD media file, and the URL associated with the VoD media file, are transmitted to a Download Media Server. The full VoD media file is received from the Download Media Server. Non-null values of the byte-range markers corresponding to the start and end times are ascertained, and the non-null byte-range markers are transmitted to the IPTV AS.</p>
<p id="p-0015" num="0014">Yet another embodiment relates to an IPTV AS operative to deliver logical content in a VoD network. The IPTV AS includes a transceiver operative to transmit and receive data to and from a plurality of network nodes, and memory. The IPTV AS also includes a controller operative to control the transceiver to receive, from a network node, a first request for logical content comprising a subset of a VoD media file, the subset defined by predetermined start and end times measured from a temporal start point within the VoD media file. The controller is further operative to control the transceiver to transmit, to the first requesting node, a URL associated with the VoD media file, the start and end times defining the logical content, and byte-range markers defining offsets into the VoD media file corresponding to the start and end times, wherein the byte-range markers have a null value. The controller is further operative to control the transceiver to receive, from the first requesting node, non-null values for the byte-range markers. The controller is further operative to control the memory to store the non-null byte-range markers. The controller is further operative to control the transceiver to receive, from one or more network nodes, one or more subsequent requests for the same logical content; and to transmit, to each subsequent requesting node, a URL associated with the VoD media file, the start and end times defining the logical content, and the non-null byte-range markers corresponding to the start and end times.</p>
<p id="p-0016" num="0015">Still another embodiment relates to a network node operative to receive logical content in a VoD network. The node includes a transceiver operative to transmit and receive data to and from at least one network node. The node also includes a controller operative to control the transceiver to transmit, to an IPTV AS, a request for logical content comprising a subset of a VoD media file, the subset defined by predetermined start and end times measured from a temporal start point within the VoD media file. The controller is further operative to control the transceiver to receive, from the IPTV AS, a URL associated with the VoD media file, the start and end times defining the logical content, and byte-range markers defining offsets into the VoD media file corresponding to the start and end times, wherein the byte-range markers have a null value. In response to the null byte-range markers, the controller is further operative to control the transceiver to transmit a request for the full VoD media file, and the URL associated with the VoD media file, to a Download Media Server, and to receive the VoD media file from the Download Media Server. The controller is further operative to ascertain non-null values of the byte-range markers corresponding to the start and end times, and to control the transceiver to transmit the non-null byte-range markers to the IPTV AS.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 1</figref> is a functional block diagram of a VoD subscriber network.</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 2</figref> is a signaling diagram depicting an initial VoD logical content request, and the generation and reporting of byte-range markers.</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 3</figref> is a flow diagram of a method of delivering VoD logical content from an IPTV AS.</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 4</figref> is a flow diagram of a method of receiving VoD logical content at a STB.</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 5</figref> is a flow diagram of a method of calculating byte-range markers for VoD logical content at an initially-requesting STV.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 1</figref> depicts a representative VoD subscription network <b>10</b>. The network <b>10</b> includes a plurality of Set Top Boxes (STB) <b>12</b>, and IPTV Application Server (IPTV AS) <b>14</b>, a Download Media Server <b>18</b>, a VoD server <b>18</b>, and a CMS/AMS <b>19</b>. An access network (not shown) may reside between the STB <b>12</b> and other network nodes <b>14</b>, <b>16</b>, <b>18</b>, providing &#x201c;last mile&#x201d; connectivity.</p>
<p id="p-0023" num="0022">The IPTV AS <b>14</b> manages the VoD system, including running the vending (or subscription) process, maintaining and providing catalogs of VoD content, accepting and approving requests for VoD media delivery to the STB <b>12</b>, and delivering VoD download information to the STB <b>12</b>. The Download Media Server <b>16</b> stores the VoD download media file and delivers full and partial VoD media files to STBs <b>12</b>. The Download Media Server <b>16</b> is able to deliver portions of VoD media files to STBs <b>12</b> using byte-range markers, based on the HTTP Range header. The Download Media Server <b>16</b> downloads the VoD media files from the CMS/AMS <b>19</b>, e.g., using File Transfer Protocol (FTP). The ingestion may be controlled by an application such as OpenStream, which forwards to the Download Media Server <b>16</b> the media file URL (pointing to AMS/CMS <b>19</b>).</p>
<p id="p-0024" num="0023">The STB <b>12</b>, which may comprise a network node provided by the IPTV vender, a gaming console with STB functionality in software, or the like, is the user interface to the VoD subscription network <b>10</b>. Users view content offerings, make selections, order VoD media, and view the delivered VoD media content, via the STB <b>12</b>. To implement this functionality, the STB <b>12</b> includes STB Local Media Storage <b>26</b>, such as a disc drive, and several applications or functional modules, including a VoD App Client <b>20</b>, a Download Manager <b>22</b>, and a Logical Content Mapper <b>28</b>. The VoD App Client <b>20</b>, which interfaces to other applications on the STB <b>12</b> via an STB Framework Application Programming Interface (API) <b>24</b>, interfaces with the IPTV AS <b>14</b>. The VoD App Client <b>20</b>, under user control, displays catalogs of VoD content, and accepts user requests for VoD content and submits them to the IPTV AS <b>14</b>. The IPTV AS <b>14</b> returns to the VoD App Client <b>20</b> a URL specifying the location of the VoD media file to be delivered. The VoD App Client <b>20</b> communicates this information to the Download Manager <b>22</b>, which retrieves the VoD media file from the Download Media Server <b>16</b>, using the URL received from the IPTV AS <b>14</b>. The VoD media file, or portions thereof, is stored in the STB Local Media Storage <b>26</b>, from which it is retrieved and rendered to the user, such as to a television screen and speakers (not shown), or other media player.</p>
<p id="p-0025" num="0024">As discussed above, logical content is defined in offerings on the IPTV AS <b>14</b> by predetermined start and end times measured from a temporal start point within a VoD media file. However, most implementations of the Download Media Server <b>16</b> cannot extract logical content from VoD media files based on temporal start/end markers, and other methods of logical content extraction and delivery to the STB <b>12</b> are inefficient or impractical, due in part to the need to decrypt the VoD media file and re-encrypt the logical content.</p>
<p id="p-0026" num="0025">According to embodiments of the present invention, a distributed logical content extraction and delivery system amortizes the wasteful bandwidth &#x201c;hit&#x201d; of a full VoD media file download to the first STB <b>12</b> that orders a particular logical content offering, over all subsequent deliveries of the same logical content. The first STB <b>12</b> downloads the full VoD media file, and calculates the byte-range markers into the file that corresponding to the temporal start/end markers that define the logical content offering (received from the IPTV AS <b>14</b> when ordering). The first STB <b>12</b> can do this without decrypting the entire VoD media file, as it compares the start/end markers to timestamps in unencrypted packet headers in the VoD media file. This first STB <b>12</b> then transmits the byte-range markers to the IPTV AS <b>14</b>, which stores them and associates them with the logical content offering.</p>
<p id="p-0027" num="0026">Subsequent STBs <b>12</b> that order the logical content receive from the IPTV AS <b>14</b>, in addition to other information (the VoD media file URL, the temporal start/end markers defining the logical content, and the like), the byte-range markers into the VoD media file that define the logical content offering. These STBs <b>12</b> then request only the logical content from the Download Media Server <b>16</b>. Since the Download Media Server <b>16</b> supports HTTP Range headers, it is able to easily extract the logical content from a VoD media file, and deliver only the logical content to the second and subsequent requesting STBs <b>12</b>. Since it uses byte-range markers to extract part of the VoD media file, the Download Media Server <b>16</b> does not need to decrypt the VoD media file, or re-encrypt the extracted logical content. Hence, all orders for a given logical content offering, other than the first order, are delivered quickly and efficiently.</p>
<p id="p-0028" num="0027">This process is described more fully with reference to the signal flow diagram of <figref idref="DRAWINGS">FIG. 2</figref>. Initially, a user purchases a VoD offering which contains logical content. The logical content (portion of a base VoD media file) is specified in the offering using a time-range expressed in the form startNPT/endNPT (Normal Playback Time). The STB <b>12</b> orders VoD content from an IPTV AS <b>14</b>, and the media files are served to the STB <b>12</b> from a Download Media Server <b>16</b> (which retrieves them from a CMS/AMS <b>19</b>).</p>
<p id="p-0029" num="0028">In particular, the VoD App Client <b>20</b> retrieves from IPTV AS <b>14</b> the DownloadInfo by providing the userId, equipmentId and the offeringId of the offering purchased by the user (step <b>1</b>). The IPTV AS <b>14</b> gets the corresponding VoD media file URL from the VoD server <b>18</b> (steps <b>2</b>-<b>3</b>). The IPTV AS <b>14</b> returns to the STB <b>12</b> VoDDownloadInfo including the URL, start/end times defining the logical content, and byte-range markers into the VoD media file corresponding to the start/end times (step <b>4</b>). If the logical offering exists in a sharing repository (i.e., if this is a subsequent request for the logical content offering), the byteStart/byteEnd markers are valid. Otherwise (i.e., if this is the first request for the logical content offering), these markers are null.</p>
<p id="p-0030" num="0029">As used herein, a &#x201c;null&#x201d; value for a byte-range marker means either an attribute-value pair for which the value is a predetermined value indicating a null condition (e.g., zero, 'hFFFF, or some other predetermined value), or the lack of any attribute-value pair for the byte-range marker. In either case, the STB <b>12</b> may determine that valid byte-range marker values have not yet been determined for the requested logical content offering. Conversely, as used herein, a &#x201c;valid&#x201d; or &#x201c;non-null&#x201d; value for a byte-range marker means a byte count that defines an offset into a VoD media file. Thus, valid or non-null byte-range marker values are constrained to the range from zero to the VoD media file size.</p>
<p id="p-0031" num="0030">The VoD App Client <b>20</b> checks the byteStart/byteEnd markers (step <b>5</b>). If they are valid&#x2014;that is, if they exist, and define byte count offsets into a VoD media file&#x2014;it instructs the Download Manager <b>22</b> to retrieve the logical content offering from the Download Media Server <b>16</b> using the byte-range markers (not shown).</p>
<p id="p-0032" num="0031">If the byteStart/byteEnd markers have a null value, the VoD App client <b>20</b> requests the Download Manager <b>22</b> to start downloading the VoD media file stored at the address provided in the downloadURL parameter (step <b>6</b>). The Download Manager <b>22</b> retrieves the VoD media file from the Download Media Server <b>16</b> (steps <b>7</b>-<b>8</b>), stores it in the STB Local Media Storage <b>26</b>, and notifies the VoD App Client <b>20</b> by returning the URL of the local VoD media file (step <b>9</b>).</p>
<p id="p-0033" num="0032">The VoD App Client then calls the Logical Content Mapper <b>28</b> to calculate the byte-range markers (byteStart/byteEnd) (step <b>10</b>). The request contains the ID of the VoD media file to be analyzed, the URL retrieved in step <b>9</b>, and the time-range markers (startNPT/endNPT). The Logical Content Mapper <b>28</b> executes a byte-range search algorithm, described further herein, in which it matches the time-range start/end markers to header timestamps, and calculates byteStart/byteEnd markers corresponding to the startNPT/endNPT markers for the particular VoD media file. The Logical Content Mapper <b>28</b> returns the byteStart/byteEnd markers to the VoD App Client <b>20</b> (step <b>11</b>).</p>
<p id="p-0034" num="0033">The VoD App Client saves the byte-range markers specifying the logical content in the VoD media file to IPTV AS sharing repository (steps <b>12</b>-<b>13</b>), for use by all subsequent STBs <b>12</b> that order the same logical content offering. The STB <b>12</b> then renders the logical content to the user, such as by outputting it to a television or other media player.</p>
<p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. 3</figref> depicts a process <b>100</b> executed by the IPTV AS <b>14</b> to implement the inventive distributed logical content download. The IPTV AS <b>14</b> receives, from an STB <b>12</b>, a request for logical content (block <b>102</b>). The logical content is a subset of a VoD media file defined by start/end markers measured form a temporal start point in the VoD media file. The IPTV AS <b>14</b> retrieves a URL associated with the VoD media file from which the logical content is extracted (not shown), and retrieves byte-range markers corresponding to the start/end markers. If the byte-range markers have a valid, non-null value (block <b>104</b>), then the IPTV AS <b>14</b> transmits the URL, the start/end markers, and the non-null byte range markers to the requesting STB <b>12</b> (block <b>112</b>).</p>
<p id="p-0036" num="0035">However, if the byte-range markers have a null value (block <b>104</b>), then this is the first request for the logical content, and valid byte-range markers have yet to be calculated. In this case, the IPTV AS <b>14</b> transmits the VoD media file URL, the start/end times, and the null byte-range markers to the STB <b>12</b> (block <b>106</b>). After the STB <b>12</b> retrieves the full VoD media file and calculates valid byte-range marker values corresponding to the start/end markers, the IPTV AS <b>14</b> receives the valid byte-range markers from the STB <b>12</b> (block <b>108</b>), and stores them in a shared repository (block <b>110</b>).</p>
<p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. 4</figref> depicts a process <b>200</b> executed by a STB <b>12</b> to implement the inventive distributed logical content download. The STB <b>12</b> transmits, to an IPTV AS <b>14</b>, a request for logical content (block <b>202</b>). The logical content is a subset of a VoD media file defined by start/end markers measured form a temporal start point in the VoD media file. The STB <b>12</b> receives from the IPTV AS <b>14</b> a URL associated with the VoD media file from which the logical content is extracted, the start/end markers that define the logical content, and byte-range markers corresponding to the start/end markers (<b>204</b>).</p>
<p id="p-0038" num="0037">If the byte-range markers have a null value (block <b>206</b>), then the STB <b>12</b> transmits the URL and a request for the full VoD media file to a Download Media Server <b>16</b> (block <b>208</b>). The STB <b>12</b> receives (and stores) the full VoD media file (block <b>210</b>). The STB analyzes the VoD media file, and ascertains valid, non-null values for the byte-range markers, which correspond to the start/end markers defining the logical content offering (block <b>212</b>). The STB <b>12</b> transmits the non-null byte-range markers to the IPTV AS <b>14</b>, for use by subsequent STBs <b>12</b> requesting the same logical content offering (block <b>214</b>).</p>
<p id="p-0039" num="0038">If the byte-range markers received from the IPTV AS <b>14</b> have a valid, non-null value (block <b>206</b>), then the STB <b>12</b> transmits a request for the logical content, the VoD media file URL, and the valid byte-range markers to a Download Media Server <b>16</b> (block <b>216</b>), and receives the logical content in response (block <b>218</b>).</p>
<p id="p-0040" num="0039">Once the STB <b>12</b> has the logical content extracted&#x2014;whether extracted from the full VoD media file using the byte-range markers the STB <b>12</b> ascertained (block <b>212</b>), or received from the Download Media Server <b>16</b> (block <b>218</b>) in response to valid byte-range markers it received from the IPTV AS <b>14</b> (block <b>204</b>)&#x2014;the STB <b>12</b> renders the logical content to a user (block <b>220</b>), such as by outputting it to a television or other media player.</p>
<p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. 5</figref> depicts a process <b>300</b> executed by a Logical Content Mapper <b>28</b> in an STB <b>12</b> to implement the inventive distributed logical content download.</p>
<p id="p-0042" num="0041">Initially read, in direct file access mode, a segment of the full VoD media file (stored in the STB Local Media Storage <b>26</b>) addressed by the localFileURL obtained from the VoD App Client <b>20</b> (blocks <b>302</b>). Set the segment size to be a multiple of the maximum size of the Packetized Elementary Stream (PES) for MPEG-2 packet, or Synchronization Layer (SL) for MPEG-4 packet.</p>
<p id="p-0043" num="0042">Search the headers of the PES/SL packets for timestamps equal to the startNPT/endNPT markers (blocks <b>304</b>). The Presentation Time Stamp (PTS) is used if it is provided in the header; otherwise, either the Decoding Time Stamp (DTS) or Composition Time Stamp (CTS) is used.</p>
<p id="p-0044" num="0043">If startNPT is not found the current segment (blocks <b>306</b>, <b>308</b>), calculate the next segment startAddress using the packet size retrieved from the PES/SL packet header (block <b>312</b>), retrieve a new segment (block <b>302</b>), and repeat the method.</p>
<p id="p-0045" num="0044">If startNPT has been found (blocks <b>306</b>, <b>308</b>), save the startAddress and the PES/SL relative address within the buffer, and calculates the next segment startAddress using the packet size retrieved from the PES/SL packet header (block <b>310</b>), and repeat the method.</p>
<p id="p-0046" num="0045">Once the endNPT marker is found (block <b>306</b>), calculate the byte-range of the logical content, i.e., the byteStart/byteEnd, using the segmentAddress of the segments where the time-range markers have been found, and the PES/SL relative address within that specific segment (block <b>314</b>). Then return the byteStart/byteEnd marker values to the VoD App Client <b>20</b> (block <b>316</b>).</p>
<p id="p-0047" num="0046">For simplicity and clarity of explication, the present invention has been described herein with respect to a logical content offering comprising a single, contiguous segment of a VoD media file. In reality, logical content (e.g., movie &#x201c;trailers&#x201d; or advertisements) often comprise a plurality of disjoint or non-contiguous segments extracted from a VoD media file. In this case, the IPTV AS <b>14</b> will provide a corresponding number of start/end marker pairs to the VoD App Client <b>20</b>, and the Logical Content Mapper <b>28</b> must run the method <b>300</b> of <figref idref="DRAWINGS">FIG. 5</figref> multiple times (with appropriate modifications to account for multiple sets of segment addresses and offsets, as will be readily apparent to those of skill in the art). In this case, the Logical Content Mapper <b>28</b> will return multiple pairs of non-null byte marker values to the VoD App Client <b>20</b>, which will in turn transmit multiple non-null byte marker values to the IPTV AS <b>14</b> for storage in the shared repository. All segments comprising the logical content must be concatenated into one single file in the STB Local Media Storage <b>26</b> before passing control to a media player. Of course, in the corresponding case of receiving multiple valid (non-null) byte-range markers from the IPTV AS <b>14</b>, the Download Manager <b>22</b> must download all segments for the logical content from the Download Media Server <b>16</b>, and concatenate them in the STB Local Media Storage <b>26</b>, prior to passing control to a media player.</p>
<p id="p-0048" num="0047">The method depicted in <figref idref="DRAWINGS">FIG. 5</figref> refers to calculation of the byte-range markers corresponding to a logical content which consists of one single stream (e.g., video stream), and which includes no control information. The method does not specify any particular procedure regarding how to handle the transmission headers in the media file, or the packets containing control information. This information must be included into the logical content media file as it is required by the client to interpret the content of PES/SL packets. The Logical Content Mapper <b>28</b> must therefore return a set of byteStart/byteEnd markers delimiting the following:</p>
<p id="p-0049" num="0048">Transmission headers in the media file;</p>
<p id="p-0050" num="0049">PES/SLs corresponding to logical content within the elementary video streams (if there are multiple streams);</p>
<p id="p-0051" num="0050">PES/SLs corresponding to logical content within the elementary audio streams (if there are multiple streams). Depending on the multiplexing method, the elementary audio packets may be tightly coupled to their time-corresponding elementary video packet, and hence should be included in one single byte-range set; and</p>
<p id="p-0052" num="0051">Control information (e.g., the Conditional Access Table).</p>
<p id="p-0053" num="0052">Those of skill in the art may readily determine appropriate methods to account for this information in particular applications, without undue experimentation, given the teachings of the present disclosure.</p>
<p id="p-0054" num="0053">Embodiments of the present invention provide a scalable, client-based architecture for the generation of byte-range markers corresponding to the start/end markers defining logical content offerings, with no performance impact on the network nodes. The solution does not require the decryption of the media file or decoding of MPEG PES/SL packets. Only the packet headers are analyzed.</p>
<p id="p-0055" num="0054">VoD download service has a significant business potential in countries which do not have a mature broadband infrastructure, and hence a VoD service based on streaming transport (e.g., RTSP) is not feasible. This opportunity becomes even more acute with the introduction of HD television. Use of HTTP download as transport protocol makes it possible for operators in these markets to capitalize on premium content without waiting for investments in the broadband infrastructure aiming to increase the last mile bandwidth. In these markets, the bandwidth lost by downloading an entire VoD media file, instead of just a portion of it, would be in contrast with the limited speed/bandwidth available; therefore logical content would be avoided for purchase. That is, without implementation of a mechanism allowing the download of only the segment of the media file corresponding to the logical content purchased, only full movies would be purchased by user in these markets. It should be noted that logical content is an essential element in the construction of media playlists, which typically contain, besides the purchased content, advertisements of feature presentations (i.e., clips of a full length movie).</p>
<p id="p-0056" num="0055">Implementation of VoD media file clipping to support logical content in the Download Media Server <b>16</b> is not cost effective, as the Download Media Server <b>16</b> would need to be over-dimensioned to allow searches through VoD media files. Embodiments of the present invention provide a cost-effective solution based on client-based distributed search, and sharing of the search results among the STBs <b>12</b> in the network <b>10</b>.</p>
<p id="p-0057" num="0056">Those of skill in the art will recognize that the VoD App Client <b>20</b>, Download Manager <b>22</b>, and Logical Content Mapper <b>28</b> may be implemented in hardware, as programmable logic with appropriate firmware, as software modules executed on a processor or Digital Signal Processor (DSP), or any combination thereof. Furthermore, the division of tasks between the modules <b>20</b>, <b>22</b>, and <b>28</b> is representative only, and is not limiting. For example, although the actual VoD media file header search and byte-range marker determination is described herein and being performed by an inventive module referred to as the Logical Content Mapper <b>28</b>, those of skill in the art will appreciate that the functionality is not confined to such an implementation, and may be performed in the Download Manager <b>22</b>, VoD App Client <b>20</b>, or other functional module or unit.</p>
<p id="p-0058" num="0057">The present invention may, of course, be carried out in other ways than those specifically set forth herein without departing from essential characteristics of the invention. The present embodiments are to be considered in all respects as illustrative and not restrictive, and all changes coming within the meaning and equivalency range of the appended claims are intended to be embraced therein.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method of distributing logical content in a Video on Demand (VoD) network, comprising:
<claim-text>receiving, from a network node, a first request for logical content comprising a subset of a VoD media file, the subset defined by predetermined start and end times measured from a temporal start point within the VoD media file at least one of the start time and end time being different from the beginning and end of the VoD media file;</claim-text>
<claim-text>transmitting, to the requesting node, a URL associated with the VoD media file, the start and end times defining the logical content, and byte-range markers defining offsets into the VoD media file corresponding to the start and end times, wherein the byte-range markers have a null value;</claim-text>
<claim-text>receiving, from the first requesting node, non-null values for the byte-range markers;</claim-text>
<claim-text>storing the non-null byte-range markers;</claim-text>
<claim-text>receiving, from one or more network nodes, one or more subsequent requests for the same logical content; and</claim-text>
<claim-text>transmitting, to each subsequent requesting node, a URL associated with the VoD media file, the start and end times defining the logical content, and the non-null byte-range markers corresponding to the start and end times.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein the URL associated with the VoD media file is operative to direct a Download Media Server to a Content/Asset Management System to retrieve the VoD media file.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00002">claim 2</claim-ref> wherein the non-null byte-range markers associated with the logical content are operative to cause the Download Media Server to serve only a portion of the VoD media file defined by the non-null byte-range markers.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. A method of receiving logical content by a Set Top Box (STB) in a Video on Demand (VoD) network, comprising:
<claim-text>transmitting, to an Internet Protocol Television (IPTV) Application Server (AS), a request for logical content comprising a subset of a VoD media file, the subset defined by predetermined start and end times measured from a temporal start point within the VoD media file and at least one of the start time and end time being different from the beginning and end of the VoD media file;</claim-text>
<claim-text>receiving, from the IPTV AS, a URL associated with the VoD media file, the start and end times defining the logical content, and byte-range markers defining offsets into the VoD media file corresponding to the start and end times, wherein the byte-range markers have a null value;</claim-text>
<claim-text>in response to the null byte-range markers, transmitting a request for a full VoD media file, and the URL associated with the VoD media file, to a Download Media Server;</claim-text>
<claim-text>receiving the full VoD media file from the Download Media Server;</claim-text>
<claim-text>ascertaining non-null values of the byte-range markers corresponding to the start and end times; and</claim-text>
<claim-text>transmitting the non-null byte-range markers to the IPTV AS.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00004">claim 4</claim-ref> wherein ascertaining non-null values of the byte-markers corresponding to the start and end times comprises:
<claim-text>comparing the start and end times to timestamps in packet headers in the VoD media file; and</claim-text>
<claim-text>calculating the byte-marker values as offsets into the VoD media file at the locations of matching timestamps.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00005">claim 5</claim-ref> further comprising searching the VoD media file in successive segments, and wherein calculating each byte-marker value comprises calculating an offset into a segment at the location of a matching timestamp, and adding to the offset the product of a number of prior segments and a segment size.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00006">claim 6</claim-ref> wherein the segment size is a multiple of the maximum size of a Packetized Elementary Stream where the VoD media file contains MPEG-2 encoded content.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method of <claim-ref idref="CLM-00006">claim 6</claim-ref> wherein the segment size is a multiple of the maximum size of a Synchronization Layer where the VoD media file contains MPEG-2 encoded content.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The method of <claim-ref idref="CLM-00005">claim 5</claim-ref> wherein the timestamps are Presentation Time Stamp values.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The method of <claim-ref idref="CLM-00005">claim 5</claim-ref> wherein the timestamps are Decoding Time Stamp values.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The method of <claim-ref idref="CLM-00005">claim 5</claim-ref> wherein the timestamps are Composition Time Stamp values.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The method of <claim-ref idref="CLM-00004">claim 4</claim-ref> further comprising receiving, from the IPTV AS, a plurality of start/end times, each defining a different portion of logical content extracted from the VoD media file, and further comprising ascertaining non-null values of byte-range markers corresponding to each pair of start and end times.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. An Internet Protocol Television (IPTV) Application Server (AS) operative to deliver logical content in a Video on Demand (VoD) network, comprising:
<claim-text>a transceiver operative to transmit and receive data to and from a plurality of network nodes;</claim-text>
<claim-text>memory; and</claim-text>
<claim-text>a controller operative to control the transceiver to
<claim-text>receive, from a network node, a first request for logical content comprising a subset of a VoD media file, the subset defined by predetermined start and end times measured from a temporal start point within the VoD media file, at least one of the start time and end time being different from the beginning and end of the VoD media file;</claim-text>
<claim-text>transmit, to the requesting node, a URL associated with the VoD media file, the start and end times defining the logical content, and byte-range markers defining offsets into the VoD media file corresponding to the start and end times, wherein the byte-range markers have a null value; and</claim-text>
<claim-text>receive, from the first requesting node, non-null values for the byte-range markers;</claim-text>
</claim-text>
<claim-text>wherein the controller is further operative to control the memory to store the non-null byte-range markers; and</claim-text>
<claim-text>wherein the controller is further operative to control the transceiver to
<claim-text>receive, from one or more network nodes, one or more subsequent requests for the same logical content; and</claim-text>
<claim-text>transmit, to each subsequent requesting node, a URL associated with the VoD media file, the start and end times defining the logical content, and the non-null byte-range markers corresponding to the start and end times.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. A network node operative to receive logical content in a Video on Demand (VoD) network, comprising:
<claim-text>a transceiver operative to transmit and receive data to and from a plurality of network nodes; and</claim-text>
<claim-text>a controller operative to control the transceiver to
<claim-text>transmit, to an Internet Protocol Television (IPTV) Application Server (AS), a request for logical content comprising a subset of a VoD media file, the subset defined by predetermined start and end times measured from a temporal start point within the VoD media file, at least one of the start time and end time being different from the beginning and end of the VoD media file;</claim-text>
<claim-text>receive, from the IPTV AS, a URL associated with the VoD media file, the start and end times defining the logical content, and byte-range markers defining offsets into the VoD media file corresponding to the start and end times, wherein the byte-range markers have a null value;</claim-text>
<claim-text>in response to the null byte-range markers, transmit a request for a full VoD media file, and the URL associated with the VoD media file, to a Download Media Server;</claim-text>
<claim-text>receive the VoD media file from the Download Media Server;</claim-text>
</claim-text>
<claim-text>wherein the controller is further operative to ascertain non-null values of the byte-range markers corresponding to the start and end times; and</claim-text>
<claim-text>wherein the controller is further operative to control the transceiver to transmit the non-null byte-range markers to the IPTV AS.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The node of <claim-ref idref="CLM-00014">claim 14</claim-ref> further comprising memory operative to store and selectively access the VoD media file.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The node of <claim-ref idref="CLM-00015">claim 15</claim-ref> wherein the controller is operative to implement a Download Manager operative to
<claim-text>transmit the request for the full VoD media file, and the URL associated with the VoD media file, to the Download Media Server;</claim-text>
<claim-text>receive the VoD media file from the Download Media Server; and</claim-text>
<claim-text>store the VoD media file.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The node of <claim-ref idref="CLM-00014">claim 14</claim-ref> wherein the controller is operative to implement a VoD Application Client operative to
<claim-text>transmit the logical content request to the IPTV AS;</claim-text>
<claim-text>receive the URL associated with the VoD media file, start and end times, and null byte-range markers from the IPTV AS; and</claim-text>
<claim-text>transmit the non-null byte-range markers to the IPTV AS.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The node of <claim-ref idref="CLM-00017">claim 17</claim-ref> wherein the VoD Application Client is further operative to
<claim-text>send the URL associated with the VoD media file to a Download Manager operative to retrieve the VoD media file from a Download Media Server; and</claim-text>
<claim-text>send the start and end times to a Logical Content Mapper operative to ascertain non-null values of the byte-range markers corresponding to the start and end times.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The node of <claim-ref idref="CLM-00014">claim 14</claim-ref> wherein the controller is operative to implement a Logical Content Mapper operative to ascertain non-null values of the byte-range markers corresponding to the start and end times.</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The node of <claim-ref idref="CLM-00019">claim 19</claim-ref> wherein the Logical Content Mapper is operative to
<claim-text>receive the start and end times from a VoD Application Client implemented on the controller, and</claim-text>
<claim-text>selectively access the VoD media file from memory.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. The node of <claim-ref idref="CLM-00020">claim 20</claim-ref> wherein the Logical Content Mapper is operative to ascertain non-null values of the byte-markers corresponding to the start and end times by
<claim-text>comparing the start and end time to timestamps in packet headers in the VoD media file; and</claim-text>
<claim-text>calculating the byte-range marker values as offsets into the VoD media file at the locations of matching timestamps.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. The node of <claim-ref idref="CLM-00021">claim 21</claim-ref> wherein the Logical Content Mapper is further operative to ascertain non-null values of the byte-range markers by searching the VoD media file in successive segments, and wherein calculating each byte-range marker value comprises calculating an offset into a segment at the location of a matching timestamp, and adding to the offset the product of a number of prior segments and a segment size.</claim-text>
</claim>
<claim id="CLM-00023" num="00023">
<claim-text>23. The node of <claim-ref idref="CLM-00022">claim 22</claim-ref> wherein the segment size is a multiple of the maximum size of a Packetized Elementary Stream where the VoD media file contains MPEG-2 encoded content.</claim-text>
</claim>
<claim id="CLM-00024" num="00024">
<claim-text>24. The node of <claim-ref idref="CLM-00022">claim 22</claim-ref> wherein the segment size is a multiple of the maximum size of a Synchronization Layer where the VoD media file contains MPEG-2 encoded content.</claim-text>
</claim>
<claim id="CLM-00025" num="00025">
<claim-text>25. The node of <claim-ref idref="CLM-00021">claim 21</claim-ref> wherein the timestamps are selected from a list comprising Presentation Time Stamp values, Decoding Time Stamp values and Composition Time Stamp values. </claim-text>
</claim>
</claims>
</us-patent-grant>
