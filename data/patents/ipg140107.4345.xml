<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625416-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625416</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13339836</doc-number>
<date>20111229</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<us-term-of-grant>
<us-term-extension>211</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>12</main-group>
<subgroup>26</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>12</main-group>
<subgroup>28</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>11</main-group>
<subgroup>00</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>370229</main-classification>
<further-classification>370252</further-classification>
<further-classification>370258</further-classification>
<further-classification>370403</further-classification>
<further-classification>714100</further-classification>
</classification-national>
<invention-title id="d2e53">Verifying communication redundancy in a network</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6717922</doc-number>
<kind>B2</kind>
<name>Hsu et al.</name>
<date>20040400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370258</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>8184527</doc-number>
<kind>B2</kind>
<name>Ling et al.</name>
<date>20120500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370216</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>8274919</doc-number>
<kind>B2</kind>
<name>Florit et al.</name>
<date>20120900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370256</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2009/0262643</doc-number>
<kind>A1</kind>
<name>Zhao et al.</name>
<date>20091000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370217</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2011/0228669</doc-number>
<kind>A1</kind>
<name>Lei et al.</name>
<date>20110900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370219</main-classification></classification-national>
</us-citation>
<us-citation>
<nplcit num="00006">
<othercit>&#x201c;Media Access Control (MAC) Bridges&#x201d; IEEE Standard for Local and Metropolitan Area Networks, Jun. 9, 2004, pp. 1-280, IEEE, New York, NY.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>20</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>370229-240</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370252-258</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370310-350</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>3703952-39543</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370400-410</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>714100</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>714  1-  63</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>714 39- 41</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>714 48- 57</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>5</number-of-drawing-sheets>
<number-of-figures>5</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20130170337</doc-number>
<kind>A1</kind>
<date>20130704</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Vallala</last-name>
<first-name>Vijay</first-name>
<address>
<city>North Andover</city>
<state>MA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Lee</last-name>
<first-name>Kenneth</first-name>
<address>
<city>Cambridge</city>
<state>MA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Mehmedagic</last-name>
<first-name>Alen</first-name>
<address>
<city>Wilmington</city>
<state>MA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Vallala</last-name>
<first-name>Vijay</first-name>
<address>
<city>North Andover</city>
<state>MA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Lee</last-name>
<first-name>Kenneth</first-name>
<address>
<city>Cambridge</city>
<state>MA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Mehmedagic</last-name>
<first-name>Alen</first-name>
<address>
<city>Wilmington</city>
<state>MA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Banner &#x26; Witcoff, Ltd.</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Schneider Electric Industries SAS</orgname>
<role>03</role>
<address>
<country>FR</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Phan</last-name>
<first-name>Tri H</first-name>
<department>2471</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">Apparatuses, methods, and computer-readable media support diagnosing a communications network using a network protocol that ensures a loop-free topology to prevent bridge loops. One of the network devices is identified as a selected device in a network ring, where the selected device interacts with the network ring through first and second ports. The values of some of the parameters of the selected device are modified to be distinguishable from that of any network device in the ring, and diagnostics about the functioning of the network protocol are then performed to obtain state information about the first and second ports. When one of the ports is determined to be in the blocking state, network redundancy for the network ring is verified. However, when neither of the ports is not in the blocking state, a redundancy problem may be detected.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="210.99mm" wi="172.04mm" file="US08625416-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="216.58mm" wi="156.97mm" orientation="landscape" file="US08625416-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="229.45mm" wi="173.06mm" file="US08625416-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="238.42mm" wi="154.43mm" file="US08625416-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="203.12mm" wi="182.03mm" orientation="landscape" file="US08625416-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="196.77mm" wi="158.24mm" orientation="landscape" file="US08625416-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND</heading>
<p id="p-0002" num="0001">Without proper network redundancy, a network failure occurring within a networked automation and control infrastructure may result in a sudden and unexpected production stoppage. For example, the time, effort, and costs associated with recovery, repairs, and restarting a production line after a sudden outage may be significant for a company. Whether a plant is involved in discrete or process operations, ensuring that production runs smoothly and uninterrupted is important to the bottom line.</p>
<p id="p-0003" num="0002">Network redundancy is akin to an insurance policy for industrial networks. Acting as a quick-response backup system, one of the goals of network redundancy is to mitigate the risk of unplanned outages and ensure continuity of operation by instantly responding to and reducing the effects of a point of failure anywhere along the critical data path. When one considers the direct and indirect costs of unplanned downtime, it becomes clear that making the investment in network redundancy is typically a smart strategy.</p>
<p id="p-0004" num="0003">A redundant network topology, in conjunction with a redundancy protocol, is typically designed to ensure that networks continue to function in the presence of single points of failure. Network redundancy works by creating multiple data paths within a network, between any and all locations. If a cable, switch, or router suddenly fails, another pathway may be available to maintain the communication flow. Any interruptions that are caused by a failure should be as short as possible, in which reliability is increased by redundancy. A network that is based on switches or bridges will typically introduce redundant links between those switches or bridges to overcome the failure of a single link. While the use of industrial-grade network components, such as ruggedized switches and hardened or armored cables, alleviates the potential for damage or breakage of parts. A network benefits from redundancy only if the network is correctly configured with redundant paths.</p>
<p id="p-0005" num="0004">An operator of an automation and control system may assume that the network is properly configured for redundancy, only to discover later that it is not when a single failure actually occurs in the network. Moreover, even if an automation and control system is properly configured, but due to a variety of reasons, network redundancy may be lost due to a variety of reasons. For example, a user may inadvertently forget to connect a cable between two devices or a cable may break after installation. Consequently, an improved method and system for verifying redundancy would be beneficial.</p>
<heading id="h-0002" level="1">SUMMARY</heading>
<p id="p-0006" num="0005">An aspect of the invention provides apparatuses, computer-readable media, and methods for diagnosing a communications problem such as a cable break or a missing cable in an Ethernet network utilizing Spanning Tree Protocol (STP) or Rapid Spanning Tree Protocol (RSTP) in a ring (loop) topology. The time for evaluating the network may be quicker and simpler than with traditional systems.</p>
<p id="p-0007" num="0006">In another aspect of the invention, one of the network devices may be selected in a network ring, where the selected device interacts with the ring through a first and a second port. The network devices in the network ring may be configured with default parameters specified in a network protocol (e.g., Spanning Tree Protocol (STP) or Rapid Spanning Tree Protocol (RSTP)) that ensures a loop-free topology to prevent bridge loops for the network ring. The values of some of the parameters (e.g., the bridge priority and/or port pathcost) of the selected device can be modified to be larger or smaller than that of any network device in the network ring, and diagnostics about the functioning of the network protocol for the selected device are then performed to obtain state information about the first and second ports of the selected device. When one of the ports is determined to be in the blocking state, network redundancy for the network ring may be verified. However, when neither of the ports is not in the blocking state, a redundancy problem may be detected for the network ring.</p>
<p id="p-0008" num="0007">In yet another aspect of the invention, state information about the selected device's ports may be obtained by accessing software objects (e.g., EtherNet/IP (EIP) objects) from the selected device, in which state information for each port corresponds to a separate instance of the software object.</p>
<p id="p-0009" num="0008">Moreover, in another aspect of the invention, network redundancy may be verified for a network comprising more than one network ring, where each ring is configured with a separate STP/RSTP domain. Each ring can be separately evaluated by identifying a selected device in a particular network ring to obtain state information about the selected device's ports.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0010" num="0009">A more complete understanding of the present disclosure and the advantages thereof may be acquired by referring to the following description in consideration of the accompanying drawings, in which like reference numbers indicate like features and wherein:</p>
<p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. 1</figref> shows a network configuration for verifying communication redundancy for a ring typology in accordance with various aspects of the disclosure.</p>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 2</figref> shows a process for verifying communication redundancy in a network in accordance with various aspects of the disclosure.</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 3</figref> shows a table representing an EtherNet/IP (EIP) object in accordance with various aspects of the disclosure.</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 4</figref> shows a configuration for verifying communication redundancy for a system with remote I/O devices in accordance with various aspects of the disclosure.</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 5</figref> shows a block diagram for a monitoring apparatus in accordance with various aspects of the disclosure.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0016" num="0015">In the following description of the various embodiments, reference is made to the accompanying drawings which form a part hereof, and in which is shown by way of illustration various embodiments in which the invention may be practiced. It is to be understood that other embodiments may be utilized and structural and functional modifications may be made without departing from the scope of the present invention.</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 1</figref> shows network configuration <b>100</b> for verifying communication redundancy for a ring typology in accordance with an embodiment of the disclosure. In an aspect of the disclosure, ring network <b>106</b> is characterized by a network topology in which each node <b>102</b>-<b>105</b> connects to neighboring nodes, forming a single continuous pathway for signals through each node through ring <b>106</b>. Data travels from node to node, with each node along the way handling every packet. For example, a node may process a packet or may allow the packet to pass through without any processing of the packet. Network ring <b>106</b> typically comprises a set of bidirectional links between each pair of network devices using optical fiber and/or copper-based communications. Network devices may comprise different device types such as remote device <b>402</b>, dual ring switch <b>401</b>, and network controller <b>408</b> as shown in <figref idref="DRAWINGS">FIG. 4</figref>. (Network controller <b>408</b> is typically a device controlling and/or communicating with the remote devices.) With some of the embodiments of the disclosure, each of the network devices supports Spanning Tree Protocol (STP) or Rapid Spanning Tree Protocol (RSTP). Message traffic between network devices is typically dispatched in the direction of the lowest cost and/or shortest path towards its destination. In the event of the loss of a link (e.g., a cable is broken or not configured in the network), the two nearest surviving devices loop back their ends of the ring. In this way, traffic can still travel to all surviving parts of the ring, even if it has to travel the long way around ring <b>106</b>.</p>
<p id="p-0018" num="0017">In ring network <b>106</b>, every device <b>102</b>-<b>105</b> may have two neighbors for communication purposes. For example, network device <b>105</b> may have neighboring devices such as network devices <b>104</b> and <b>107</b>. Messages may travel through ring <b>106</b> in one of the directions (i.e., either clockwise or counterclockwise), where each path is bidirectional. However, when a cable or device becomes inoperative between two devices in the ring, the two devices may communicate in the other direction around network ring <b>106</b> if ring <b>106</b> is properly configured. For example, devices <b>103</b> and <b>105</b> can communicate with each other even if the path through device <b>104</b> becomes inoperative by communicating through device <b>102</b>. However, if a cable has not been configured in ring <b>106</b>, communication in ring <b>106</b> may fail if one of the paths becomes inoperative. If cable <b>109</b>, for example, were not included during network installation and the path through device <b>104</b> were inoperative, devices <b>103</b> and <b>105</b> would not be able to communicate with each other.</p>
<p id="p-0019" num="0018">System verification of network redundancy may be desirable to detect the physical and operational integrity of the network ring. System verification may detect cable breaks and device failure or fault (due to lack of power, defect, etc.).</p>
<p id="p-0020" num="0019">In an aspect of the disclosure, monitoring apparatus <b>101</b> may determine whether network ring <b>106</b> is properly configured with network redundancy by querying selected network device <b>102</b> through communication path <b>110</b> about two ports (e.g., ports <b>107</b> and <b>108</b>) that connect selected device <b>102</b> to network ring <b>106</b>. With some embodiments, monitoring apparatus <b>101</b> communicates with selected device <b>102</b> through path <b>110</b> using EtherNet/IP and/or Simple Network Management Protocol (SNMP). Path <b>110</b> may include separate communication facilities from ring <b>106</b>, may share facilities with ring <b>106</b>, or may be located on ring <b>106</b> (e.g., as one the network devices <b>102</b>-<b>105</b>). Consequently, monitoring apparatus <b>101</b> may be different from the network devices located in network ring <b>106</b> or may be incorporated into one of the network devices (e.g., a network controller).</p>
<p id="p-0021" num="0020">In some embodiments, monitoring apparatus <b>101</b> queries selected device <b>102</b> about diagnostic results of its network operation within network ring <b>106</b>. In an aspect of the disclosure, various different protocols may be used within network ring <b>106</b>, including Spanning Tree Protocol (STP) or Rapid Spanning Tree Protocol (RSTP) for the ring (loop) topology. For example, RSTP is commonly used as the network redundancy protocol in an industrial Ethernet network. In particular, ring topology may be desirable in terms of predictable performance and also guaranteed redundancy from network issues.</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 2</figref> shows a flowchart <b>200</b> for verifying communication redundancy in a network in accordance with an embodiment of the disclosure. In <figref idref="DRAWINGS">FIG. 2</figref>, the physical and operational integrity of an Ethernet network utilizing STP or RSTP protocols in a ring (loop) topology may be determined. In an aspect of the disclosure, network ring <b>106</b> may be assessed without modifications to the existing STP and RSTP standard, e.g., IEEE Standard 802.1D&#x2122;-2004 (IEEE Standard for Local and Metropolitan Area Networks: Media Access Control (MAC) Bridges). With some embodiments, as will be further discussed, devices <b>102</b>-<b>105</b> perform diagnostics as supported by the STP and/or RSTP standards.</p>
<p id="p-0023" num="0022">In an embodiment illustrated in <figref idref="DRAWINGS">FIG. 2</figref>, monitoring apparatus <b>101</b> identifies which of the network devices on ring <b>106</b> is the selected device in block <b>201</b>. The identification may be performed in a number of ways. For example, the identification of the selected device may be obtained from input data by monitoring apparatus <b>101</b>. Alternatively, or in combination with the input data, monitoring apparatus <b>101</b> may obtain network parameters for devices <b>102</b>-<b>105</b> and identify the selected device by determining which device has distinguishable parameter values, e.g., the largest values with respect to the other network devices. Referring to <figref idref="DRAWINGS">FIG. 1</figref>, selected device <b>102</b> is chosen in ring <b>106</b> so that monitoring apparatus <b>101</b> may verify the redundancy of ring <b>106</b>. The selected device should typically have a central role and/or always be present in the operation of ring <b>106</b> such that if the selected device is not present, the ring may not operate properly. Examples of a selected device include the controller (of the devices on the ring) and the switch/bridge that connects the ring to other parts of the network. However, the selected device is typically not the root device in the STP/RSTP network in order to ensure that one of the ports is in the blocked state as will be further discussed.</p>
<p id="p-0024" num="0023">At block <b>202</b>, the STP/RSTP parameters of each network device <b>102</b>-<b>105</b> in ring <b>106</b> may be set to default values that may be specified in in the STP/RSTP standards document. The parameters may be set by configuration software through a number of ways. For example, the parameters of a network device may be configured by a user through a touch screen interface, downloaded from a configuration file server, or obtained from non-volatile memory of the device. At block <b>203</b>, STP/RSTP parameters may be modified for the selected device The STP/RSTP parameters may be modified in a number of ways. For example, the modified parameter values may be sent from another device (e.g., monitoring apparatus <b>101</b>) using File Transfer Protocol (FTP). With some embodiments the bridge priority parameter of selected device <b>102</b> is modified to a value greater than the values that are used by devices <b>103</b>-<b>105</b> in the ring <b>106</b>, where bridge priority of device <b>102</b> is set to 61440 while bridge priority of other devices <b>103</b>-<b>105</b> is set to 32768, which is the default value. Also, the port pathcost parameter of the two ports (e.g., ports <b>107</b> and <b>108</b> of selected device <b>102</b>) connected to ring <b>106</b> is modified to a value larger than the values that correspond to the data rates used in the ring. For example, port pathcost may be set to 200,000,000. Other STP/RSTP parameters may be modified to the extent that the parameter values do not disturb proper operation in the ring topology. Modification of the STP/RSTP parameters forces either of the two ports of selected device <b>102</b> to be in a blocking state (as determined at blocks <b>204</b>-<b>205</b>) if ring <b>106</b> is intact with proper redundancy and all network devices <b>102</b>-<b>105</b> are operational. A port may be determined to be in the blocking state, when no data is normally sent or received through the port but the port may go into the forwarding mode if other links in use were to fail. Consequently, if one of the paths were to fail, the port may transition into a forwarding mode to utilize the network redundancy to compensate for the network failure.</p>
<p id="p-0025" num="0024">At block <b>204</b>, monitoring apparatus <b>101</b> queries selected device <b>102</b> about the state of the ports with the modified STP/RSTP parameters. In an embodiment, devices <b>102</b>-<b>105</b> maintain port status based on STP/RSTP operation, and selected device <b>102</b> may report diagnostic results about its STP/RSTP operation to monitoring apparatus <b>101</b>. The diagnostic data, which may include information about the port states, can be exposed through one of a number of reporting mechanisms, e.g., via SNMP, EtherNet/IP, or Modbus.</p>
<p id="p-0026" num="0025">Related information about the state of ports may be available with STP/RSTP-capable devices via various means, including EtherNet/IP and SNMP. For example, information about a port state may be obtained with EtherNet/IP explicit messaging. Using explicit messaging, monitoring apparatus <b>101</b> may query selected device <b>102</b> about an EtherNet/IP (EIP) object (as shown in <figref idref="DRAWINGS">FIG. 3</figref>), where there is an instance for every port on a network device. The state or a particular port of the device may be obtained from the state of the port status. As shown in <figref idref="DRAWINGS">FIG. 3</figref>, possible port states may include disabled, blocking, listening, learning, forwarding, and broken with corresponding integer values of 1-6, respectively. To complete the diagnostics of ring <b>106</b>, in order to query about the states of two ports, two instances of the EIP object should be read.</p>
<p id="p-0027" num="0026">At block <b>205</b>, monitoring apparatus <b>101</b> may determine whether ports <b>107</b> or <b>108</b> (as shown in <figref idref="DRAWINGS">FIG. 1</figref>) is in the blocking state (corresponding to state=2 of the port status as shown in <figref idref="DRAWINGS">FIG. 3</figref>). If the state of either of ports <b>107</b> or <b>108</b> is set to the blocking state, then the ring <b>106</b> may be deemed to be intact and there is network redundancy to each device in the ring. In such a case, monitoring apparatus <b>101</b> generates an indication (for example to the user) that ring <b>106</b> has the desired redundancy. However, if the state of neither of the ports is set to the blocking state, then the ring <b>106</b> may not be intact, and a problem may exist with network redundancy. In such a case, monitoring apparatus <b>101</b> may generate a different indication that there is a network redundancy problem with ring <b>106</b>.</p>
<p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. 4</figref> shows network configuration <b>400</b> for verifying communication redundancy for a system with remote I/O devices in accordance with an embodiment of the disclosure. Network configuration <b>400</b> comprises rings <b>409</b>, <b>410</b>, and <b>411</b> and may further include additional network topological entities (e.g., bus, star, mesh, and/or tree) that may be connected via switch <b>415</b>. Network ring <b>409</b> includes dual ring switch <b>401</b> and remote devices <b>402</b>-<b>404</b>; network ring <b>410</b> includes dual ring switch <b>405</b> and remote devices <b>406</b>-<b>407</b>; and network ring <b>411</b> includes network controller <b>408</b> and dual ring switches <b>401</b> and <b>405</b>. Dual ring switch <b>401</b> supports switching for rings <b>409</b> and <b>411</b>, and dual ring <b>405</b> supports switching for rings <b>410</b> and <b>411</b>, where rings <b>409</b>, <b>410</b>, and <b>411</b> are configured for separate STP/RSTP domains.</p>
<p id="p-0029" num="0028">Monitoring apparatus <b>101</b> verifies network redundancy of each ring <b>409</b>-<b>411</b> by querying a selected device in each ring corresponding to dual ring switch (DRS) <b>401</b>, dual ring switch <b>405</b>, and network controller <b>408</b> (which may be referred as a programmable logic controller (PLC)) through communication paths <b>412</b>, <b>413</b>, and <b>414</b>, respectively. The selected device may be a unique device in the ring. For example, if remote devices <b>402</b>-<b>404</b> were the same type of devices, dual ring switch <b>401</b> may be selected as the selected device so that remote devices <b>402</b>-<b>404</b> would be configured with the same STP/RSTP parameter values as the default values. As previously discussed, the selected device for a network ring should typically have a central role in the operation of the ring such that if the selected device is not present, the ring would not operate properly. A different device other than network controller <b>408</b> may be selected for ring <b>411</b> based on the above criterion.</p>
<p id="p-0030" num="0029">In some embodiments, monitoring apparatus <b>101</b> separately verifies the redundancy of each ring <b>409</b>-<b>411</b> through communication paths <b>412</b>-<b>414</b>, respectively. For example, verification of ring <b>411</b> may be first performed followed by the verification of rings <b>409</b> and <b>410</b>. Ring <b>411</b> functions as the main network because ring <b>411</b> includes network controller <b>408</b>, while rings <b>409</b> and <b>410</b> function as remote I/O leafs. In order to verify the redundancy of each ring, monitoring apparatus <b>101</b> may determine whether the network ring <b>409</b>, <b>410</b>, or <b>411</b> is properly configured with network redundancy by querying selected network device <b>401</b>, <b>405</b>, or <b>408</b> about two ports (<b>416</b>-<b>417</b>, <b>418</b>-<b>419</b>, and <b>420</b>-<b>421</b>) that connect the selected device with the corresponding network ring. Also, monitoring apparatus <b>101</b> may verify a double ring by evaluating each ring separately.</p>
<p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. 5</figref> shows block diagram <b>500</b> for monitoring apparatus <b>101</b> in accordance with an embodiment of the disclosure. Processing system <b>501</b> may execute computer executable instructions from a computer-readable medium (e.g., storage device <b>504</b>) in order provide verify communication redundancy for a network, Memory <b>502</b> is typically used for temporary storage while storage device <b>504</b> may comprise a flash memory and/or hard drive for storing computer executable instructions and a profile image. However, computer storage media may include volatile and nonvolatile, removable and non-removable media implemented in any method or technology for storage of information such as computer readable instructions, data structures, program modules or other data. Computer storage media include, but may not be limited to, random access memory (RAM), read only memory (ROM), electronically erasable programmable read only memory (EEPROM), flash memory or other memory technology, CD-ROM, digital versatile disks (DVD) or other optical disk storage, magnetic cassettes, magnetic tape, magnetic disk storage or other magnetic storage devices, or any other medium that can be used to store the desired information and that can be accessed by processing system <b>801</b>. The executable instructions may carry out any or all of the method steps described herein.</p>
<p id="p-0032" num="0031">With some embodiments, processing system <b>501</b> may correspond to one or more processors and storage device <b>504</b> may correspond to one or more memories.</p>
<p id="p-0033" num="0032">Apparatus <b>101</b> may be implemented as one or more ASICs or other integrated circuits having instructions for performing operations as described in connection with one or more of any of the embodiments described herein. Said instructions may be software and/or firmware instructions stored in a machine-readable medium and/or may be hard-coded as a series of logic gates and/or state machine circuits in one or more integrated circuits and/or in one or more integrated circuits in combination with other circuit elements.</p>
<p id="p-0034" num="0033">As can be appreciated by one skilled in the art, a computer system with an associated computer-readable medium containing instructions for controlling the computer system may be utilized to implement the exemplary embodiments that are disclosed herein. The computer system may include at least one computer such as a microprocessor, digital signal processor, and associated peripheral electronic circuitry.</p>
<p id="p-0035" num="0034">While the invention has been described with respect to specific examples including presently preferred modes of carrying out the invention, those skilled in the art will appreciate that there are numerous variations and permutations of the above described systems and techniques that fall within the spirit and scope of the invention as set forth in the appended claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>We claim:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. An apparatus comprising:
<claim-text>at least one memory; and
<claim-text>at least one processor coupled to the at least one memory and configured to perform, based on instructions stored in the at least one memory:</claim-text>
<claim-text>identifying a first selected device of a first plurality of devices in a first network ring, wherein:
<claim-text>the first selected device interacts with the first network ring through a first port and a second port;</claim-text>
<claim-text>a first parameter is specified by a network protocol, wherein the network protocol ensures a loop-free topology to prevent bridge loops for the first network ring; and</claim-text>
<claim-text>a first parameter value of the first parameter for the first selected device is distinguishable from a value of any device of the first plurality of devices in the first network ring;</claim-text>
</claim-text>
<claim-text>querying the first selected device about an operation of the first selected device in the first network ring with the network protocol;</claim-text>
<claim-text>when one of the first port and the second port is in a blocking state, generating a first indicator that indicates network redundancy with the first network ring; and</claim-text>
<claim-text>when the first port and the second port are not in the blocking state, generating a second indicator that indicates a redundancy problem with the first network ring.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The apparatus of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the network protocol comprises one of a spanning tree protocol (STP) and a rapid spanning tree protocol (RSTP).</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The apparatus of <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein:
<claim-text>the first parameter comprises a bridge priority of the first selected device; and</claim-text>
<claim-text>a bridge priority value for the first selected device is larger than for any other device of the first plurality of devices.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The apparatus of <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein:
<claim-text>a second parameter is specified by the network protocol and comprises a port pathcost parameter; and</claim-text>
<claim-text>a port pathcost value for the first selected device is larger than for any other device.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The apparatus of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the first selected device comprises a remote input/output (I/O) device.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The apparatus of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the first selected device comprises a dual ring switch.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The apparatus of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the first selected device comprises a network controller.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The apparatus of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the at least one processor is configured to perform:
<claim-text>modifying at least one parameter for the first selected device to a changed value that is distinguishable from the value of any said device.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The apparatus of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the at least one processor is configured to perform:
<claim-text>querying a second selected device about a network operation of the second selected device in a second network ring; and</claim-text>
<claim-text>in response to the querying, verifying network redundancy for the second network ring.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The apparatus of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the at least one processor is configured to perform:
<claim-text>obtaining a first and a second software object from the first selected device for the first and second ports, respectively; and</claim-text>
<claim-text>determining a port state for each port from the obtained software objects.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The apparatus of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein each of the software objects comprises an EtherNet/IP (EIP) object.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The apparatus of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the determining utilizes state data contained in the EIP object.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The apparatus of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the at least one processor is configured to perform:
<claim-text>distinguishing the first selected device from the first plurality of devices based on at least the first parameter.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. A method for verifying network redundancy for a network, comprising:
<claim-text>identifying a selected device of a plurality of devices in a network ring, wherein:
<claim-text>the selected device interacts with the network ring through a first port and a second port;</claim-text>
<claim-text>a first parameter and a second parameter are specified by a network protocol, wherein the network protocol ensures a loop-free topology to prevent bridge loops for the network ring; and</claim-text>
<claim-text>a first parameter value of the first parameter and a second parameter value of the second parameter for the selected device are distinguishable from values of any device of the plurality of devices in the network ring;</claim-text>
</claim-text>
<claim-text>querying the selected device about an operation of the selected device in the network ring with the network protocol;</claim-text>
<claim-text>when one of the first port and the second port is in a blocking state, generating a first indicator that indicates network redundancy with the network ring; and</claim-text>
<claim-text>when the first port and the second port are not in the blocking state, generating a second indicator that indicates a redundancy problem with the network ring.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The method of <claim-ref idref="CLM-00014">claim 14</claim-ref>, further comprising:
<claim-text>modifying the first parameter and the second parameter for the selected device to a first modified value and a second modified value, respectively, that are larger than values of any device of the plurality of devices in the network ring.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The method of <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein:
<claim-text>the network protocol comprises one of a spanning tree protocol (STP) and a rapid spanning tree protocol (RSTP);</claim-text>
<claim-text>the first parameter comprises a bridge priority; and</claim-text>
<claim-text>the second parameter comprises a port pathcost for the first port and the second port.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The method of <claim-ref idref="CLM-00014">claim 14</claim-ref>, further comprising:
<claim-text>obtaining a first and a second software object from the selected device for the first and second ports, respectively; and</claim-text>
<claim-text>determining a port state for each port from the obtained software objects.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. An apparatus comprising:
<claim-text>at least one memory; and</claim-text>
<claim-text>at least one processor coupled to the at least one memory and configured to perform, based on instructions stored in the at least one memory:</claim-text>
<claim-text>identifying a selected device of a plurality of devices in a network ring, wherein:
<claim-text>the selected device interacts with the network ring through a first port and a second port;</claim-text>
<claim-text>a bridge priority parameter and a port pathcost parameter are specified by one of a spanning tree protocol (STP) and a rapid spanning tree protocol (RSTP); and</claim-text>
<claim-text>a bridge priority value of the bridge priority parameter for the selected device and a port pathcost value of the port pathcost parameter are larger than values of any device of the plurality of devices in the network ring;</claim-text>
</claim-text>
<claim-text>obtaining a first and a second software object from the first selected device for the first and second ports, respectively;</claim-text>
<claim-text>determining a port state for each port from the obtained software objects;</claim-text>
<claim-text>when one of the first port and the second port is in a blocking state, generating a first indicator that indicates network redundancy with the network ring; and</claim-text>
<claim-text>when the first port and the second port are not in the blocking state, generating a second indicator that indicates a redundancy problem with the network ring.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. A non-transitory computer-readable storage medium storing computer-executable instructions that, when executed, cause at least one processor to perform operations comprising:
<claim-text>identifying a selected device of a plurality of devices in a network ring, wherein:
<claim-text>the selected device interacts with the network ring through a first port and a second port;</claim-text>
<claim-text>a first parameter and a second parameter are specified by a network protocol, wherein the network protocol ensures a loop-free topology to prevent bridge loops for the network ring; and</claim-text>
<claim-text>a first parameter value of the first parameter and a second parameter value of the second parameter for the selected device are distinguishable from values of any device of the plurality of devices in the first network ring;</claim-text>
</claim-text>
<claim-text>querying the selected device about an operation of the selected device in the network ring with the network protocol;</claim-text>
<claim-text>when one of the first port and the second port is in a blocking state, generating a first indicator that indicates network redundancy with the network ring; and</claim-text>
<claim-text>when the first port and the second port are not in the blocking state, generating a second indicator that indicates a redundancy problem with the network ring.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The computer-readable medium of <claim-ref idref="CLM-00019">claim 19</claim-ref>, wherein the computer-executable instructions, when executed, cause the at least one processor to perform:
<claim-text>obtaining a first and a second software object from the selected device for the first and second ports, respectively; and</claim-text>
<claim-text>determining a port state for each port from the obtained software objects.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
