<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625347-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625347</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13597444</doc-number>
<date>20120829</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2011-207701</doc-number>
<date>20110922</date>
</priority-claim>
</priority-claims>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>11</class>
<subclass>C</subclass>
<main-group>11</main-group>
<subgroup>34</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>36518503</main-classification>
</classification-national>
<invention-title id="d2e61">Memory device and control method of memory device</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>7814401</doc-number>
<kind>B2</kind>
<name>Alrod et al.</name>
<date>20101000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>714794</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>8023532</doc-number>
<kind>B2</kind>
<name>Rainish</name>
<date>20110900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>8037394</doc-number>
<kind>B2</kind>
<name>Djurdjevic et al.</name>
<date>20111000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>8250437</doc-number>
<kind>B2</kind>
<name>Sakurada et al.</name>
<date>20120800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>714764</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2008/0285351</doc-number>
<kind>A1</kind>
<name>Shlick et al.</name>
<date>20081100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2010/0223538</doc-number>
<kind>A1</kind>
<name>Sakurada</name>
<date>20100900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>714801</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2012/0224420</doc-number>
<kind>A1</kind>
<name>Sakurada et al.</name>
<date>20120900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>36518503</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2012/0297273</doc-number>
<kind>A1</kind>
<name>Sakaue et al.</name>
<date>20121100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>714773</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2013/0176778</doc-number>
<kind>A1</kind>
<name>Chen et al.</name>
<date>20130700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>36518503</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>JP</country>
<doc-number>2009-26436</doc-number>
<date>20090200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>JP</country>
<doc-number>2011-100519</doc-number>
<date>20110500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00012">
<othercit>U.S. Appl. No. 13/544,147, filed Jul. 9, 2012, Kurosawa.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>20</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>36518503</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>15</number-of-drawing-sheets>
<number-of-figures>18</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20130077400</doc-number>
<kind>A1</kind>
<date>20130328</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Sakurada</last-name>
<first-name>Kenji</first-name>
<address>
<city>Kanagawa</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Sakurada</last-name>
<first-name>Kenji</first-name>
<address>
<city>Kanagawa</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Oblon, Spivak, McClelland, Maier &#x26; Neustadt, L.L.P.</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Kabushiki Kaisha Toshiba</orgname>
<role>03</role>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Ho</last-name>
<first-name>Hoai V</first-name>
<department>2827</department>
</primary-examiner>
<assistant-examiner>
<last-name>Huerta</last-name>
<first-name>Pablo</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A memory card includes: a plurality of memory cells; a CPU core; and an ECC unit configured to perform soft decision decoding. If decoding based on an LLR acquired from a first LLR table fails, the memory card measures a threshold voltage distribution centered on a first HB read voltage with a highest voltage. If a first shift value as a difference between a least frequent voltage of the threshold voltage distribution and the first HB read voltage is &#x201c;negative&#x201d;, the memory card performs decoding based on an LLR acquired from the second LLR table. If the first shift value is &#x201c;positive&#x201d;, the memory card performs decoding based on an LLR acquired from a third LLR table.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="202.01mm" wi="151.72mm" file="US08625347-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="188.13mm" wi="146.05mm" orientation="landscape" file="US08625347-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="235.46mm" wi="125.81mm" file="US08625347-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="230.89mm" wi="174.33mm" file="US08625347-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="244.18mm" wi="146.05mm" orientation="landscape" file="US08625347-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="221.66mm" wi="121.75mm" file="US08625347-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="245.36mm" wi="143.43mm" orientation="landscape" file="US08625347-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="235.46mm" wi="146.64mm" orientation="landscape" file="US08625347-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="229.70mm" wi="178.90mm" file="US08625347-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="240.71mm" wi="136.23mm" orientation="landscape" file="US08625347-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="245.87mm" wi="143.68mm" orientation="landscape" file="US08625347-20140107-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="229.11mm" wi="184.66mm" file="US08625347-20140107-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="244.18mm" wi="147.15mm" orientation="landscape" file="US08625347-20140107-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00013" num="00013">
<img id="EMI-D00013" he="216.41mm" wi="187.03mm" file="US08625347-20140107-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00014" num="00014">
<img id="EMI-D00014" he="251.04mm" wi="151.81mm" orientation="landscape" file="US08625347-20140107-D00014.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00015" num="00015">
<img id="EMI-D00015" he="233.76mm" wi="151.81mm" orientation="landscape" file="US08625347-20140107-D00015.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This application claims the benefit of Japanese Application No. 2011-207701 filed in Japan on Sep. 22, 2011 and Japanese Application No. 2012-076747 filed in Japan on Mar. 29, 2012, the contents of which are incorporated herein by this reference.</p>
<heading id="h-0002" level="1">FIELD</heading>
<p id="p-0003" num="0002">Embodiments described herein relate generally to a memory device including a plurality of memory cells, each storing data of a plurality of bits, and a control method of the memory device.</p>
<heading id="h-0003" level="1">BACKGROUND</heading>
<p id="p-0004" num="0003">In manufacturing of a memory cell of a memory device, two N-type semiconductor sections serving as a source and a drain are formed to sandwich a P-type semiconductor layer on a silicon substrate. A polysilicon floating gate placed between oxide layers is formed over the P-type semiconductor layer, and a control gate is further formed over the floating gate. Therefore, an electric charge (electrons) accumulated on the floating gate of the memory cell is held by the oxide layers that cover the floating gate, and data can be held for a long time without supply of a power source.</p>
<p id="p-0005" num="0004">Writing of data to the memory cell is performed by injecting electrons to the floating gate by a quantum tunneling effect through the oxide layers. The n-type semiconductors as circuit substrates are set as a ground potential, and a write voltage is applied to the control gate by a tiny amount of electric current. The electrons accumulated in the floating gate store information. In a multivalued memory, information of a plurality of bits is stored based on an amount of electric charge accumulated on the floating gate.</p>
<p id="p-0006" num="0005">In reading of information of data from the memory cell, a read voltage is applied between the source and the drain. A gate voltage that starts a flow of a current between the source and the drain, i.e. a threshold voltage varies depending on the number of electrons (amount of electric charge) in the floating gate. A plurality of predetermined read voltages are sequentially applied to the gate of the memory cell to check whether the threshold voltage corresponding to the information stored in the memory cell exceeds the read voltages.</p>
<p id="p-0007" num="0006">In the flash memory cell, electrons penetrate through an oxide film as an insulator in each writing or reading. Therefore, an increase in the number of writings and the number of readings degrades the oxide film.</p>
<p id="p-0008" num="0007">In recent years, a size of the memory cell is reduced due to increased memory density of the memory device, and the amount of electric charge accumulated on the floating gate is reduced. Therefore, influence of interference noise between adjacent cells is relatively increasing. More specifically, writing (program) or reading of data to and from the memory cell may change data of an adjacent memory cell.</p>
<p id="p-0009" num="0008">For example, data is written to a memory cell selected by a word line and a bit line. However, non-selected cells also enter a weak writing state, and a program disturb (hereinafter, called &#x201c;PD&#x201d;) phenomenon occurs, in which the threshold voltage increases. The non-selected memory cells also enter the weak writing state in the reading of data, and a read disturb (hereinafter, called &#x201c;RD&#x201d;) phenomenon occurs, in which the threshold voltage increases.</p>
<p id="p-0010" num="0009">On the other hand, when the data written to the memory cell is not accessed for a long time, the electrons are gradually discharged from the floating gate of the memory cell, and a data retention (hereinafter, called &#x201c;DR&#x201d;) phenomenon occurs, in which the threshold voltage is reduced.</p>
<p id="p-0011" num="0010">To prevent an occurrence of a data read error caused by the RD, DR, or the like to improve reliability of the memory device, for example, changing a read level (voltage) is effective.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 1</figref> is a configuration diagram showing a schematic configuration of a memory card of a first embodiment;</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 2A</figref> is an explanatory view for explaining a threshold voltage distribution in an initial state of the memory card of the first embodiment;</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 2B</figref> is an explanatory view for explaining a threshold voltage distribution in a data retention state of the memory card of the first embodiment;</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 2C</figref> is an explanatory view for explaining a threshold voltage distribution in a read disturb state of the memory card of the first embodiment;</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 3</figref> is a flow chart for explaining a control method of the memory card of the first embodiment;</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 4</figref> is a first LLR table in normal decoding of the memory card of the first embodiment;</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 5</figref> is an explanatory view for explaining a histogram of the threshold voltage distribution of the memory card of the first embodiment;</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 6</figref> is an explanatory view for explaining an approximation curve of the threshold voltage distribution of the memory card of the first embodiment;</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 7</figref> is a second LLR table in decoding in the read disturb state of the memory card of the first embodiment;</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 8</figref> is a third LLR table in decoding in the data retention state of the memory card of the first embodiment;</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 9</figref> is a flow chart for explaining a control method of a memory card of a modified example of the first embodiment;</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 10</figref> is a second LLR table in decoding in the read disturb state of the memory card of the modified example of the first embodiment;</p>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 11</figref> is a third LLR table in decoding in the data retention state of the memory card of the modified example of the first embodiment;</p>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. 12</figref> is a flow chart for explaining a control method of a memory card of a second embodiment;</p>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. 13</figref> is a fourth LLR table in decoding in a read disturb/data retention state of the memory card of the second embodiment;</p>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 14</figref> is a flow chart for explaining a control method of a memory card of a modified example of the second embodiment;</p>
<p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. 15</figref> is a fourth LLR table in decoding in the read disturb/data retention state of the memory card of the modified example of the second embodiment; and</p>
<p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. 16</figref> is an explanatory view for explaining full-level tracking.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0030" num="0029">An aspect of the present invention provides a memory device including: a plurality of memory cells, each memory cell storing data of N bits (N is a natural number no less than 2); a control unit configured to perform control of applying voltages of a read voltage set including (2<sup>N</sup>&#x2212;1) hard bit read voltages and a plurality of soft bit read voltages to each of the memory cells; and an error correction unit configured to acquire a log likelihood ratio from a log likelihood ratio table on the basis of soft bit data read out by the soft bit read voltages, the error correction unit configured to perform soft decision decoding based on the acquired log likelihood ratio, wherein</p>
<p id="p-0031" num="0030">the control unit performs first tracking for measuring a first threshold voltage distribution of a first tracking range, which is centered on a first hard bit read voltage with a highest voltage among the plurality of hard bit read voltages and which is no greater than 1/(2<sup>N</sup>&#x2212;1) of a difference between a second hard bit read voltage with a lowest voltage among the plurality of hard bit read voltages and the first hard bit read voltage, at voltage intervals that are no less than 1/100 and no greater than &#xbc; of intervals of the hard bit read voltages, and the error correction unit performs the soft decision decoding based on log likelihood ratios acquired from different log likelihood ratio table based on a histogram of the first threshold voltage distribution and according to a positive or negative sign of a first shift value based on a difference between a first least frequent voltage acquired from an approximation curve or a moving average and the first hard bit read voltage.</p>
<p id="p-0032" num="0031">Another aspect of the present invention provides a method of controlling a memory device, the memory device including: a plurality of memory cells, each memory cell storing data of N bits (N is a natural number no less than 2); a control unit configured to perform control of applying voltages of a read voltage set including (2<sup>N</sup>&#x2212;1) hard bit read voltages for reading a hard bit data and a plurality of soft bit read voltages for reading a threshold voltage including degree-of-reliability information of the hard bit data to each of the memory cells; and an error correction unit configured to perform soft decision decoding based on a log likelihood ratio acquired from a log likelihood ratio table on the basis of the threshold voltage, the method including: measuring a first threshold voltage distribution of a predetermined range centered on a first hard bit read voltage with a highest voltage among the plurality of hard bit read voltages; calculating a first shift value based on a difference between a first least frequent voltage acquired from the first threshold voltage distribution and the first hard bit read voltage; performing, if the first shift value is negative, control of applying a second soft bit read voltage that is set on a low voltage side of each of the hard bit read voltages to the memory cells, and performing, if the first shift value is positive, control of applying a third soft bit read voltage that is set on a high voltage side of each of the hard bit read voltages to the memory cells; and performing the soft decision decoding based on a log likelihood ratio acquired from a second log likelihood ratio table or a third log likelihood ratio table on the basis of a threshold voltage read out by the second soft bit read voltage or the third soft bit read voltage, by the error correction unit.</p>
<heading id="h-0006" level="1">First Embodiment</heading>
<p id="p-0033" num="0032">As shown in <figref idref="DRAWINGS">FIG. 1</figref>, a memory card <b>3</b> as a memory device of the present embodiment is a storage medium configured to store data received from a host <b>4</b>, such as a personal computer and a digital camera, and to transmit stored data to the host <b>4</b>.</p>
<p id="p-0034" num="0033">The memory card <b>3</b> and the host <b>4</b> may form a memory system <b>5</b>, such as an MP3 player as a portable music player.</p>
<p id="p-0035" num="0034">The memory card <b>3</b> includes a memory unit <b>13</b> and a memory controller <b>2</b> provided with a decoder <b>15</b>. The memory unit <b>13</b> includes a NAND flash memory and has a structure, in which a large number of memory cells <b>13</b>D as unit cells are connected by bit lines (not shown) and word lines <b>13</b>E. The reading and the writing are performed page by page, each page including a plurality of bit data. Data is deleted block by block, each block including a plurality of pages. The word lines <b>13</b>E are connected to a word line control unit <b>13</b>A. The memory cells <b>13</b>D are multivalued memory cells capable of storing data of N bits (N is a natural number no less than 2) in each memory cell.</p>
<p id="p-0036" num="0035">The memory controller <b>2</b> includes a ROM <b>10</b>, a CPU core <b>11</b>, a RAM <b>18</b>, a host I/F (interface) <b>14</b>, an error correction unit (hereinafter, called &#x201c;ECC unit&#x201d;) <b>1</b>, and a NAND I/F (interface) <b>16</b> that are connected through a bus <b>17</b>.</p>
<p id="p-0037" num="0036">The memory controller <b>2</b> uses the CPU core <b>11</b> as a control unit to transmit and receive data to and from the host <b>4</b> through the host I/F <b>14</b>, to transmit and receive data to and from the memory unit <b>13</b> through the NAND I/F <b>16</b>, and to perform overall control. The memory controller <b>2</b> realizes address management of the memory unit <b>13</b> by FW (firmware) executed by the CPU core <b>11</b>. Control of the entire memory card <b>3</b> corresponding to command input from the host <b>4</b> is also executed by the FW. The ROM <b>10</b> stores a control program and the like of the memory card <b>3</b>, and the RAM <b>18</b> stores an address conversion table and the like necessary in the address management.</p>
<p id="p-0038" num="0037">The ECC unit <b>1</b> includes an encoder <b>12</b> configured to generate and provide an error correcting code during data storage and a decoder <b>15</b> configured to decode read encoded data during data reading. The encoding and the decoding are performed ECC frame by ECC frame, each ECC frame including a plurality of bit data. Note that a page as a write and read unit includes a plurality of ECC frames. The ECC unit <b>1</b> of the decoder <b>15</b> of the present embodiment uses an LDPC code as an error correction code for soft decision decoding by iterative calculation based on probability, in addition to a sign for hard decision decoding.</p>
<p id="p-0039" num="0038">Note that, the memory card <b>3</b> includes the word line control unit <b>13</b>A configured to perform control of applying voltages of a predetermined read voltage set described later to the memory cells <b>13</b>D through the word lines <b>13</b>E, and the word line control unit <b>13</b>A also operates under the control of the CPU core <b>11</b> configured to control the entire memory card <b>3</b>. For the simplification of the following description, the CPU core <b>11</b> also performs the control performed by the word line control unit <b>13</b>. The log likelihood ratio tables described later are stored in, for example, the ROM <b>10</b>.</p>
<p id="p-0040" num="0039">In the hard decision decoding, a hard bit (HB) indicating whether data is &#x201c;0&#x201d; or &#x201c;1&#x201d; and parity provided to the ECC frame are used to perform an operation. On the other hand, in the soft decision decoding of data encoded by, for example, the LDPC code, a log likelihood ratio (hereinafter, also called &#x201c;LLR&#x201d; and indicated by a sign &#x201c;X&#x201d;) is acquired based on a log likelihood ratio table (see <figref idref="DRAWINGS">FIG. 4</figref> or the like) from soft bit (SB) data including degree-of-reliability information (likelihood) of HB data read out by applying a plurality of predetermined soft bit (SB) read voltages. On the basis of the LLR, an error correction process is executed by iterative calculation for each ECC frame based on probability.</p>
<p id="p-0041" num="0040">As already described, the threshold voltage of the memory cells <b>13</b>D storing data may be changed by the read disturb (RD), the data retention (DR), or the like.</p>
<p id="p-0042" num="0041"><figref idref="DRAWINGS">FIGS. 2A to 2C</figref> show distributions of the threshold voltage of the memory cells. A horizontal axis of <figref idref="DRAWINGS">FIGS. 2A to 2C</figref> denotes a thereshold voltage V, and a vertical axis denotes the number n of memory cells having the threshold voltage V shown in the horizontal axis. The memory cells shown here are N=2 memory cells. Therefore, four types of data (11), (10), (00), and (01) are stored based on the threshold voltage that can be divided into 2<sup>N </sup>(=4). As shown in <figref idref="DRAWINGS">FIG. 2A</figref>, an HB read voltage set for reading the data stored in the memory cells includes 3 (=2<sup>N</sup>&#x2212;1) voltages of VA, VB, and VC. More specifically, three voltages VA, VB, and VC as least frequent voltages that are voltages with the least number n in the threshold voltage distribution are applied to the memory cells, and a threshold voltage level of the threshold voltage of the memory cells becomes clear. Therefore, HB data can be read out.</p>
<p id="p-0043" num="0042">Note that information of the HB read voltage set is preset based on design, manufacturing conditions, and the like and is stored in, for example, the ROM <b>10</b>.</p>
<p id="p-0044" num="0043">However, as shown in <figref idref="DRAWINGS">FIG. 2B</figref>, if the memory cells are influenced by the DR, a low voltage side of the distribution of the threshold voltage becomes wide as indicated by a solid line, compared to an initial distribution indicated by a dotted line. Therefore, the data may not be able to be correctly read out by the voltages VA, VB, and VC as the read voltage set of initial setting.</p>
<p id="p-0045" num="0044">Conversely, as shown in <figref idref="DRAWINGS">FIG. 2C</figref>, if the memory cells are affected by the RD, a high voltage side of the distribution of the threshold voltage of the memory cells becomes wide as indicated by a solid line, compared to the initial distribution indicated by a dotted line. Therefore, the data may not be able to be correctly read out by the voltages VA, VB, and VC of the read voltage set of the initial setting.</p>
<p id="p-0046" num="0045">On the other hand, the memory card <b>3</b> measures the threshold voltage distribution and performs control according to a result of the measurement when decoding cannot be performed by normal soft decision decoding.</p>
<p id="p-0047" num="0046">Hereinafter, the decoding by the memory card <b>3</b> will be described with reference to a flow chart of <figref idref="DRAWINGS">FIG. 3</figref>.</p>
<p id="h-0007" num="0000">&#x3c;Step S<b>10</b>&#x3e;</p>
<p id="p-0048" num="0047">As shown in <figref idref="DRAWINGS">FIG. 4</figref>, in the following description, each of the memory cells <b>13</b>D of the memory card <b>3</b> is a 3-bit cell (N=3), in which each of a lower bit, a middle bit, and an upper bit stores data of 1 bit. Seven HB read voltages of H<b>01</b> to H<b>07</b> are applied to read the HB data from the memory cells <b>13</b>D. More specifically, the number of HB read voltages for reading the data of the memory cells storing data of N bits (N is a natural number no less than 2) is (2<sup>N</sup>&#x2212;1).</p>
<p id="p-0049" num="0048">For example, as shown in <figref idref="DRAWINGS">FIG. 4</figref>, if a threshold voltage Vth is between H<b>04</b> and H<b>05</b> (D level), the HB data stored in the memory cell is determined to be (001). Note that (001) denotes that the lower bit and the middle bit are &#x201c;0&#x201d;, and the upper bit is &#x201c;1&#x201d;.</p>
<p id="h-0008" num="0000">&#x3c;Steps S<b>10</b>, S<b>11</b>, and S<b>12</b>&#x3e;</p>
<p id="p-0050" num="0049">HB data including predetermined ECC frames is used to perform hard decision decoding. If decoding can be performed (S<b>12</b>: Yes), decoded data is transmitted to the host <b>4</b> in step S<b>26</b>.</p>
<p id="h-0009" num="0000">&#x3c;Steps S<b>13</b>, S<b>14</b>, and S<b>15</b>&#x3e; (SB<b>1</b> Decryption)</p>
<p id="p-0051" num="0050">If the hard decision decoding cannot be performed (S<b>12</b>: No), voltages of a read voltage set including 14 SB read voltages of S<b>01</b> to S<b>14</b> for performing soft decision decoding with higher error correction capability are sequentially applied to the memory cells <b>13</b>D.</p>
<p id="p-0052" num="0051">Note that the number of SB read voltages is not limited to 2&#xd7;(2<sup>N</sup>&#x2212;1) including one on the low voltage side and one on the high voltage side of each HB read voltage as shown in <figref idref="DRAWINGS">FIG. 4</figref>, but the number may be, for example, 4&#xd7;(2<sup>N</sup>&#x2212;1).</p>
<p id="p-0053" num="0052">The soft bit data (threshold voltage (Vth) level) read out by the SB read voltage includes degree-of-reliability information of hard bits HB. For example, although the HB data (Vth level <b>10</b>) read out between S<b>06</b> and S<b>07</b> is the same (101) as the HB data (Vth level <b>9</b>) read out between H<b>03</b> and S<b>06</b>, the reliability of HB data (Vth level <b>10</b>) is higher.</p>
<p id="p-0054" num="0053">In the soft decision decoding, an LLR indicating likelihood of the HB data from the soft bit data read out by the SB read voltage is acquired from a first log likelihood ratio table (LLR table) <b>20</b>A for normal decoding shown in <figref idref="DRAWINGS">FIG. 4</figref>. An absolute value |&#x3bb;| of the log likelihood ratio &#x3bb; is the degree of reliability. The greater the degree of reliability, the higher the reliability. Conversely, the closer the degree of reliability to 0, the lower the reliability. In the LDPC decoding, an error correction process is executed by the soft decision decoding using iterative calculation on the basis of an initial LLR acquired from the LLR table.</p>
<p id="p-0055" num="0054">More specifically, an iteration process is executed, in which local inference results between a bit node corresponding to each bit of a codeword and a check node corresponding to each parity check equation connected on a Tanner graph are exchanged and updated, in a predetermined number of bit data. If decoding can be performed within a predetermined maximum number of iterations (Yes), the decoded data is transmitted to the host <b>2</b> in step S<b>26</b>.</p>
<p id="h-0010" num="0000">&#x3c;Step S<b>16</b>&#x3e;</p>
<p id="p-0056" num="0055">If error correction cannot be performed by normal soft decision decoding (SB<b>1</b> decoding) using the first LLR table <b>20</b>A based on first soft bit data (SB<b>1</b>) of step S<b>14</b> (S<b>15</b>: No), the RD or the DR may be occurring. Measurement of the threshold voltage distribution is most effective to surely figure out which one of the phenomena is occurring. Hereinafter, the threshold voltage distribution measurement will be called &#x201c;tracking&#x201d;. However, a long time is required to measure the threshold voltage distribution of the entire range of the read voltages (full-level tracking).</p>
<p id="p-0057" num="0056">On the other hand, the memory card <b>3</b> performs first tracking that is level <b>1</b> tracking for measuring only the threshold voltage distribution of part of the voltage range, and the tracking time is short. More specifically, the first tracking is level <b>1</b> tracking for measuring only a first threshold voltage distribution of a predetermined range (first tracking range) centered on the hard bit read voltage H<b>07</b> (first HB read voltage) with a highest voltage among seven hard bit read voltages H<b>01</b> to H<b>07</b>. Note that the first tracking range needs to include only one of the hard bit read voltages H<b>01</b> to H<b>07</b>. However, it is preferable that the first tracking range includes the first HB read voltage H<b>07</b> with the highest voltage, but does not include the other hard bit read voltages H<b>01</b> to H<b>06</b>.</p>
<p id="p-0058" num="0057">The tracking range of the first tracking (first tracking range) needs to include only the first HB read voltage H<b>07</b>. However, it is preferable that the first tracking range is centered on the voltage H<b>07</b> and is appropriately set within a range of a peak voltage of a distribution F and a peak voltage of a distribution G positioned below and above the voltage H<b>07</b>. For example, the range of the peak voltage of the distribution F and the peak voltage of the distribution G is set to no greater than 1/7 of a range of a peak voltage of a distribution Er and the peak voltage of the distribution G that is a full-level tracking range. More specifically, in a memory card for reading hard bit data by (2<sup>N</sup>&#x2212;1) hard bit read voltages, the first tracking range in the level <b>1</b> tracking is no greater than 1/(2<sup>N</sup>&#x2212;1) of the tracking range of the full-level tracking.</p>
<p id="p-0059" num="0058">As shown in <figref idref="DRAWINGS">FIG. 5</figref>, the first tracking range is a range of SB read voltages S<b>13</b> to S<b>14</b> in front and back of the HB read voltage H<b>07</b>. For example, if the range of the SB read voltage S<b>13</b> to S<b>14</b> is &#xbd; of the range of the peak voltage of the distribution F and the peak voltage of the distribution G, the first tracking range is no greater than 1/14(1/(2&#xd7;(2<sup>N</sup>&#x2212;1))) of the tracking range (S<b>01</b> to S<b>14</b>) of the full-level tracking.</p>
<p id="p-0060" num="0059">As shown in <figref idref="DRAWINGS">FIG. 5</figref>, measurement intervals in the first tracking range are obtained by, for example, dividing the tracking range by 20.</p>
<p id="p-0061" num="0060">It is preferable that the number of divisions of tracking (division intervals) of the first tracking range, i.e. the interval of voltages for measuring the threshold voltage distribution, is 1/100 or more and &#xbc; or less of the interval of the HB read voltages (interval of H<b>06</b> to H<b>07</b>). If the interval is no less than the range, the tracking time is within an allowable range. If the interval is no greater than the range, which one of the phenomena is occurring can be surely figured out. In the example shown in <figref idref="DRAWINGS">FIG. 5</figref>, the interval of the measurement voltage of the threshold voltage distribution is 1/10 of the interval of the HB read voltage, or of a difference AR between the voltages of H<b>06</b> and H<b>07</b>.</p>
<p id="p-0062" num="0061">The memory cells to be tracked do not have to be all memory cells belonging to a block, which is a predetermined decoding unit or a predetermined deletion unit, or belonging to a page, which is a read unit. For example, it is preferable that the memory cells to be tracked are 1% or more and 50% or less of the plurality of memory cells forming a block. If the number is no less than the range, which one of the phenomena is occurring can be surely figured out. If the number is no greater than the range, the tracking time is within the allowable range.</p>
<p id="p-0063" num="0062">Although not illustrated in the flow chart of <figref idref="DRAWINGS">FIG. 3</figref>, for example, the number of times N that the normal soft decision decoding cannot be performed block by block is counted in the memory card <b>3</b>, and the number N is stored in a non-volatile storage unit, such as in part of the memory unit. If the number of errors N exceeds a predetermined threshold K, the control unit may perform the tracking of the block. More specifically, as described later, it is preferable that the CPU core <b>11</b> as a control unit controls to perform the first tracking if the number of failures in the soft decision decoding (SB<b>1</b> decoding) based on the LLR acquired from the first LLR table (see <figref idref="DRAWINGS">FIG. 4</figref>) exceeds the predetermined threshold K.</p>
<p id="h-0011" num="0000">&#x3c;Step S<b>17</b>&#x3e;</p>
<p id="p-0064" num="0063">A first least frequent voltage VM of the first threshold voltage distribution is acquired from a result of tracking. As shown in <figref idref="DRAWINGS">FIG. 5</figref>, the first least frequent voltage VM is a median value of a voltage level with the smallest n in the histogram of the first threshold voltage distribution. A first shift value &#x394;V as a difference obtained by subtracting the first hard bit read voltage H<b>07</b> from the first least frequent voltage VM is acquired. More specifically, the first shift value &#x394;V is a value based on the difference between the first least frequent voltage VM acquired from the first threshold voltage distribution and the first hard bit read voltage H<b>07</b>.</p>
<p id="p-0065" num="0064">In the acquisition of the least frequent voltage VM, an approximation curve may be acquired based on the histogram of the threshold voltage distribution acquired by tracking as illustrated in <figref idref="DRAWINGS">FIG. 6</figref>. In place of the approximation curve, a moving average may be acquired based on the histogram. For the moving average, a weighted moving average applied with a weight is more preferable than a simple moving average, and for example, use of a five-point weighted moving average is preferable.</p>
<p id="p-0066" num="0065">The number of cells near the least frequent voltage VM is small, and a measurement error easily occurs. However, the approximation curve or the like can be used to reduce the influence of the error.</p>
<p id="p-0067" num="0066">Offset correction can also be applied to the least frequent voltage VM. As described later, a processing mode is changed in the memory card <b>3</b> based on a positive or negative sign of the first shift value &#x394;V that is a difference between the least frequent voltage VM and the first hard bit read voltage H<b>07</b>, i.e. based on whether the first shift value &#x394;V is &#x201c;positive&#x201d; or &#x201c;negative&#x201d;. However, due to characteristics of the memory cells, the least frequent voltage VM of the threshold voltage distribution near the first HB read voltage H<b>07</b> with the highest voltage among the seven HB read voltages H<b>01</b> to H<b>07</b> easily moves in the low voltage direction, but does not easily move in the high voltage direction. Therefore, it may be preferable to apply offset correction for adding a predetermined offset voltage to the acquired least frequent voltage VM. The offset voltage is preset according to the characteristics of the memory card <b>3</b> and is, for example, 1/1000 or more and 1/50 or less of the interval of the SB read voltages.</p>
<p id="h-0012" num="0000">&#x3c;Step S<b>18</b>&#x3e;</p>
<p id="p-0068" num="0067">The positive or negative sign of the first shift value &#x394;V is determined.</p>
<p id="p-0069" num="0068">In the example shown in <figref idref="DRAWINGS">FIG. 5</figref>, the first least frequent voltage VM is smaller than the first hard bit read voltage H<b>07</b>. More specifically, the positive or negative sign of the first shift value &#x394;V as a difference obtained by subtracting the first hard bit read voltage H<b>07</b> from the first least frequent voltage VM is a &#x201c;negative sign (&#x2212;)&#x201d;. If the first shift value &#x394;V is &#x201c;negative&#x201d; which is smaller than 0, decoding of a data retention mode (DR mode) is performed from step S<b>19</b>.</p>
<p id="p-0070" num="0069">On the other hand, if the positive or negative sign of the first shift value &#x394;V is a &#x201c;positive sign (+)&#x201d;, i.e. if the first shift value &#x394;V is &#x201c;positive&#x201d; which is greater than 0, decoding of a read disturb mode (RD mode) is performed from step S<b>22</b>.</p>
<p id="h-0013" num="0000">&#x3c;Steps S<b>19</b> and S<b>20</b>&#x3e; (SB<b>2</b> Decoding)</p>
<p id="p-0071" num="0070">In the DR mode decoding, SB<b>2</b> read control for applying second soft bit read voltages SL<b>01</b> to SL<b>07</b> set on the low voltage side of the HB read voltages H<b>01</b> to H<b>07</b> to the memory cells is performed as shown in <figref idref="DRAWINGS">FIG. 7</figref>. The second SB read voltages SL<b>01</b> to SL<b>07</b> are set so that, for example, the difference from the HB read voltage is twice the SB read voltage of normal decoding. In this case, (H<b>01</b>-SL<b>01</b>)=2&#xd7;(H<b>01</b>&#x2212;S<b>01</b>).</p>
<p id="h-0014" num="0000">&#x3c;Step S<b>21</b>&#x3e;</p>
<p id="p-0072" num="0071">Second soft decision (SB<b>2</b>) decoding is performed based on, for example, an LLR acquired from a second LLR table <b>20</b>B shown in <figref idref="DRAWINGS">FIG. 7</figref> on the basis of second soft bit data (Vth level) read out by the second soft bit read voltages SL<b>01</b> to SL<b>07</b>.</p>
<p id="h-0015" num="0000">&#x3c;Steps S<b>22</b> and S<b>23</b>&#x3e; (SB<b>3</b> Decoding)</p>
<p id="p-0073" num="0072">On the other hand, in the RD mode decoding, SB<b>3</b> read control for applying third soft bit read voltages SH<b>01</b> to SH<b>07</b> set on the high voltage side of the HB read voltages H<b>01</b> to H<b>07</b> to the memory cells is performed as shown in <figref idref="DRAWINGS">FIG. 8</figref>. The third SB read voltages SH<b>01</b> to SH<b>07</b> are set so that, for example, the difference from the HB read voltages is twice the SB read voltage of normal decoding. More specifically, (SH<b>01</b>-H<b>01</b>)=2&#xd7;(S<b>02</b>&#x2212;H<b>01</b>).</p>
<p id="h-0016" num="0000">&#x3c;Step S<b>24</b>&#x3e;</p>
<p id="p-0074" num="0073">Third soft decision (SB<b>3</b>) decoding is performed based on, for example, an LLR acquired from a third LLR table <b>20</b>C shown in <figref idref="DRAWINGS">FIG. 8</figref> on the basis of third soft bit data (Vth level) read out by the third soft bit read voltages SH<b>01</b> to SH<b>07</b>.</p>
<p id="p-0075" num="0074">As described, if the soft decision decoding (SB<b>1</b>) based on the LLR acquired from the first LLR table <b>20</b>A fails in the memory card <b>3</b>, the CPU core <b>11</b> controls the ECC unit <b>1</b> to perform soft decision decoding based on the LLR acquired from the second LLR table <b>20</b>B or the third LLR table <b>20</b>C that are different from the first LLR table <b>20</b>A, according to the positive or negative sign of a first shift value &#x394;V<b>1</b>.</p>
<p id="p-0076" num="0075">More specifically, if the first shift value &#x394;V<b>1</b> is &#x201c;negative&#x201d; which is smaller than &#x201c;0&#x201d;, the CPU core <b>11</b> performs control of applying the second SB read voltages SL<b>01</b> to SL<b>07</b> set on the low voltage side of the HB read voltages H<b>01</b> to H<b>07</b> to the memory cells <b>13</b>D, and the ECC unit <b>1</b> performs the second soft decision decoding based on the LLR acquired from the second LLR table <b>20</b>B on the basis of the second SB data read out by the second SB read voltages. If the first shift value is &#x201c;positive&#x201d; which is greater than &#x201c;0&#x201d;, the CPU core <b>11</b> performs control of applying the third SB read voltages SH<b>01</b> to SH<b>07</b> set on the high voltage side of the HB read voltages H<b>01</b> to H<b>07</b> to the memory cells <b>13</b>D, and the ECC unit <b>1</b> performs the third soft decision decoding based on the LLR acquired from the third LLR table <b>20</b>C on the basis of the third SB data read out by the third SB read voltages.</p>
<p id="p-0077" num="0076">As a result, the soft decision decoding is performed in the memory card <b>3</b> based on the LLRs acquired from different LLR tables in accordance with a magnitude relationship between an average value of SB reread voltages after tracking and an average value of the SB read voltages before tracking. More specifically, if the SB reread voltages after tracking are the second SB read voltages SL<b>01</b> to SL<b>07</b>, the average value of the SB reread voltages is smaller than the average value of the first SB read voltages S<b>01</b> to S<b>07</b>, and the second LLR table <b>20</b>A is used. On the other hand, if the SB reread voltages after tracking are the third SB read voltages SH<b>01</b> to SH<b>07</b>, the average value of the SB reread voltages is greater than the average value of the first SB read voltages S<b>01</b> to S<b>07</b>, and the third LLR table <b>20</b>B is used.</p>
<p id="p-0078" num="0077">More specifically, although checking the determination result of the positive or negative sign of the first shift value &#x394;V<b>1</b> from the outside is not easy, the operation performed by the control unit can be checked by monitoring the SB read voltages or a control signal.</p>
<p id="p-0079" num="0078">Although not shown, if the first shift value &#x394;V<b>1</b> is &#x201c;0&#x201d;, the reason that the decoding cannot be performed is not the DR or the RD. Therefore, an error signal is transmitted to the host <b>4</b> in step S<b>27</b>.</p>
<p id="h-0017" num="0000">&#x3c;Steps S<b>25</b>, S<b>26</b>, and S<b>27</b>&#x3e;</p>
<p id="p-0080" num="0079">If decoding can be performed (S<b>25</b>: Yes), the decoded data is transmitted to the host <b>4</b> in step S<b>26</b>. If decoding cannot be performed (S<b>25</b>: No), the error signal is transmitted to the host <b>4</b> in step S<b>27</b>.</p>
<p id="p-0081" num="0080">As described, the memory card <b>3</b> performs the level <b>1</b> tracking with a narrow tracking range. Therefore, a processing speed of the tracking is fast. The approximation curve or the moving average is further acquired based on the histogram of the threshold voltage distribution acquired by the tracking to acquire the least frequent voltages VM. Therefore, the memory card <b>3</b> can acquire the first shift value &#x394;V that is less affected by the error. The read voltage set and the LLR table are further changed in the memory card <b>3</b> according to the positive or negative sign of the first shift value &#x394;V in the memory card <b>3</b>. Therefore, decoding efficiency of the memory card <b>3</b> and a control method of the memory card <b>3</b> is excellent.</p>
<p id="p-0082" num="0081">As already described, when the memory cells are managed block by block to perform tracking, it is preferable to perform subsequent soft decision decoding by a changed mode. A refresh process for copying the data stored in the block to another block may also be executed.</p>
<p id="p-0083" num="0082">Each voltage of the read voltage set may be increased or decreased according to the absolute value of the first shift value &#x394;V. For example, in the DR mode, the HB read voltages H<b>01</b> to H<b>07</b> and the SB read voltages S<b>01</b> to S<b>14</b> can be modified to voltages obtained by subtracting the absolute value of the first shift value &#x394;V, and the modified read voltage set can be used to perform subsequent reading. Conversely, in the RD mode, each voltage of the read voltage set is modified to a voltage obtained by adding the absolute value of the first shift value &#x394;V.</p>
<p id="p-0084" num="0083">Note that the read voltage set may be modified using a first shift value &#x394;V obtained by performing modification according to whether each read voltage is high or low. For example, in the DR mode, it is preferable to perform modification of subtracting &#x394;V from the HB read voltage H<b>07</b> with a high voltage and to perform modification of subtracting 0.2&#xd7;&#x394;V from the HB read voltage H<b>01</b> with a low voltage.</p>
<p id="p-0085" num="0084">In steps S<b>20</b> and S<b>23</b>, not only the second SB read voltages SL<b>01</b> to SL<b>07</b>, but also voltages including HB read voltages of a read voltage set that is reset based on the positive or negative sign of the first shift value &#x394;V may be applied again to reread the threshold voltage level. More specifically, the corrected HB read voltages H<b>01</b> to H<b>07</b> and the SB read voltages S<b>01</b> to S<b>14</b>, in addition to at least one of the second soft bit read voltages SL<b>01</b> to SL<b>07</b> or SH<b>01</b> to SH<b>07</b>, may be applied in steps S<b>20</b> and S<b>23</b> to read the threshold voltage level.</p>
<heading id="h-0018" level="1">Modified Example of First Embodiment</heading>
<p id="p-0086" num="0085">A memory card <b>3</b>A of a modified example of the first embodiment will be described. The memory card <b>3</b>A is similar to the memory card <b>3</b>. Therefore, the same constituent elements are designated with the same reference numerals, and the description will not be repeated.</p>
<p id="p-0087" num="0086">In the memory card <b>3</b>A, the data reading process (voltage applying process) is not executed again according to the positive or negative sign of the first shift value &#x394;V, and already read SB<b>1</b> is used. However, the LLR table is changed.</p>
<p id="p-0088" num="0087">As shown in <figref idref="DRAWINGS">FIG. 9</figref>, a flow chart of the memory card <b>3</b>A is significantly similar to the flow chart of the memory card <b>3</b> shown in <figref idref="DRAWINGS">FIG. 3</figref>. Therefore, only different processes will be described.</p>
<p id="h-0019" num="0000">&#x3c;Step S<b>21</b>A&#x3e;</p>
<p id="p-0089" num="0088">In the determination of step S<b>19</b>, SB<b>2</b> decoding of the DR mode is performed if the first shift value &#x394;V is &#x201c;negative&#x201d;. In the SB<b>2</b> decoding of the memory card <b>3</b>A, the rereading process is not executed by changing the read voltages. An initial LLR is acquired from a second LLR table <b>20</b>B<b>1</b> (see <figref idref="DRAWINGS">FIG. 10</figref>) different from the first LLR table <b>20</b>A based on SB<b>1</b> read out in the SB<b>1</b> reading (S<b>13</b>). In the second LLR table <b>20</b>B<b>1</b>, the degree of reliability of the threshold voltage level on the low voltage side of the HB read voltage is set lower than the degree of reliability of the threshold voltage level on the high voltage side. For example, (LLR of Vth level <b>14</b>: LLR of Vth level <b>15</b>) of the upper bit is (&#x2212;2:2) in the LLR table <b>20</b>A shown in <figref idref="DRAWINGS">FIG. 4</figref>, but is (&#x2212;1:3) in the LLR table <b>20</b>B<b>1</b> shown in <figref idref="DRAWINGS">FIG. 10</figref>.</p>
<p id="h-0020" num="0000">&#x3c;Step S<b>24</b>A&#x3e;</p>
<p id="p-0090" num="0089">On the other hand, if the shift value is &#x201c;positive&#x201d; in the determination of step S<b>19</b>, SB<b>3</b> decoding of the RD mode is performed. In the SB<b>3</b> decoding of the memory card <b>3</b>A, the rereading process by changing the read voltages is not executed. An initial LLR is acquired from a third LLR table <b>20</b>C<b>1</b> (see <figref idref="DRAWINGS">FIG. 11</figref>) based on SB<b>1</b> read out in the SB<b>1</b> reading (S<b>13</b>). In the third LLR table <b>20</b>C<b>1</b>, the degree of reliability of the threshold voltage level on the low voltage side of the HB read voltage is set higher than the degree of reliability of the threshold voltage level on the high voltage side. For example, (LLR of Vth level <b>14</b>: LLR of Vth level <b>15</b>) of the upper bit is (&#x2212;2:2) in the LLR table <b>20</b>A shown in <figref idref="DRAWINGS">FIG. 4</figref>, but is (&#x2212;3:1) in the LLR table <b>20</b>C<b>1</b> shown in <figref idref="DRAWINGS">FIG. 11</figref>.</p>
<p id="p-0091" num="0090">The memory card <b>3</b>A and a control method of the memory card <b>3</b>A have similar effects as the memory card <b>3</b> and the control method of the memory card <b>3</b>, and the rereading process of data is not executed. Therefore, decoding is faster.</p>
<heading id="h-0021" level="1">Second Embodiment</heading>
<p id="p-0092" num="0091">A memory card <b>3</b>B of a second embodiment will be described. The memory card <b>3</b>B is similar to the memory card <b>3</b>. Therefore, the same constituent elements are designated with the same reference numerals, and the description will not be repeated.</p>
<p id="p-0093" num="0092">In the memory card <b>3</b>B, level <b>2</b> tracking is performed (i.e. level <b>1</b> tracking is performed twice), and which one of phenomena RD, DR, and RD/DR is occurring can be figured out. The RD/DR denotes a state in which the RD and the DR are both occurring. More specifically, the threshold voltage of the high voltage level that is easily affected by the DR is reduced, and the threshold voltage of the low voltage level that is easily affected by the RD is increased in the state.</p>
<p id="p-0094" num="0093">A control method of the memory card <b>3</b>B will be described with reference to a flow chart of <figref idref="DRAWINGS">FIG. 12</figref>.</p>
<p id="h-0022" num="0000">&#x3c;Steps S<b>1</b> and S<b>31</b>&#x3e;</p>
<p id="p-0095" num="0094">Steps S<b>1</b> and S<b>31</b> are similar to those described with reference to the flow chart of <figref idref="DRAWINGS">FIG. 3</figref>.</p>
<p id="h-0023" num="0000">&#x3c;Step S<b>32</b>&#x3e;</p>
<p id="p-0096" num="0095">The same tracking as in step S<b>16</b> of the flow chart of <figref idref="DRAWINGS">FIG. 3</figref> is performed. More specifically, H level tracking as first tracking for measuring the first threshold voltage distribution of the first tacking range including the first hard bit read voltage H<b>07</b> with the highest voltage is performed. As already described, it is preferable that the first tracking range is centered on the first hard bit read voltage.</p>
<p id="h-0024" num="0000">&#x3c;Step S<b>33</b>&#x3e;</p>
<p id="p-0097" num="0096">Subsequently, second tracking (L level tracking) is performed. In the L level tracking, a second threshold voltage distribution of a second tracking range centered on the second hard bit read voltage H<b>01</b> with the lowest voltage among seven hard bit read voltages H<b>01</b> to H<b>07</b> is measured.</p>
<p id="p-0098" num="0097">Note that the second tracking range and a measurement interval in the second tracking range are set according to the first tracking range.</p>
<p id="h-0025" num="0000">&#x3c;Step S<b>34</b>&#x3e;</p>
<p id="p-0099" num="0098">As in step S<b>17</b> of the flow chart of <figref idref="DRAWINGS">FIG. 3</figref>, a first least frequent voltage VM<b>1</b> of the first threshold voltage distribution is acquired from a result of the H level tracking. A first shift value &#x394;V<b>1</b> as a difference obtained by subtracting the first hard bit read voltage H<b>07</b> from the first least frequent voltage VM<b>1</b> is acquired. Note that the first shift value &#x394;V is especially easily changed by the DR phenomenon, and the first shift value &#x394;V is also called a DR shift value.</p>
<p id="p-0100" num="0099">A second least frequent voltage VM<b>2</b> of the second threshold voltage distribution is acquired from a result of the L level tracking. A second shift value &#x394;V<b>2</b> as a difference obtained by subtracting the second hard bit read voltage H<b>01</b> from the second least frequent voltage VM<b>2</b> is acquired. Note that the second shift value &#x394;V<b>2</b> is especially easily changed by the RD phenomenon, and the second shift value &#x394;V<b>2</b> is also called an RD shift value.</p>
<p id="h-0026" num="0000">&#x3c;Steps S<b>35</b>, S<b>36</b>, S<b>37</b>, S<b>38</b>, and S<b>39</b>&#x3e; (SB<b>2</b> decoding)</p>
<p id="p-0101" num="0100">If the DR shift value &#x394;V<b>1</b> and the RD shift value &#x394;V<b>2</b> are &#x201c;negative&#x201d;, the SB<b>2</b> decoding in the DR mode as in steps S<b>19</b> to S<b>21</b> is performed.</p>
<p id="h-0027" num="0000">&#x3c;Steps S<b>35</b>, S<b>40</b>, S<b>41</b>, S<b>42</b>, and S<b>43</b>&#x3e; (SB<b>3</b> Decoding)</p>
<p id="p-0102" num="0101">If the DR shift value &#x394;V<b>1</b> and the RD shift value &#x394;V<b>2</b> are &#x201c;positive&#x201d;, the SB<b>3</b> decoding in the RD mode as in steps S<b>22</b> to S<b>24</b> is performed.</p>
<p id="h-0028" num="0000">&#x3c;Steps S<b>35</b>, S<b>36</b>, S<b>44</b>, S<b>45</b>, and S<b>46</b>&#x3e; (SB<b>4</b> Decoding)</p>
<p id="p-0103" num="0102">If the DR shift value &#x394;V<b>1</b> is &#x201c;negative&#x201d; and the RD shift value &#x394;V<b>2</b> is &#x201c;positive&#x201d;, SB<b>4</b> decoding in the DR/RD mode is performed.</p>
<p id="p-0104" num="0103">As shown in <figref idref="DRAWINGS">FIG. 13</figref>, SB<b>4</b> read control is performed, in which the soft bit read voltages SL<b>05</b> to SL<b>07</b> set on the low voltage side are applied to the memory cells for the HB read voltages H<b>05</b> to H<b>07</b> on the high voltage side, and the soft bit read voltages SH<b>01</b> to SH<b>03</b> set on the high voltage side are applied to the memory cells in the HB read voltages H<b>01</b> to H<b>03</b> on the low voltage side. More specifically, an SB<b>4</b> read voltage set is used, in which the HB read voltages H<b>01</b> to H<b>07</b> are divided into the voltages H<b>05</b> to H<b>07</b> on the high voltage side of H<b>04</b> as the median value and the voltages H<b>01</b> to H<b>03</b> on the low voltage side of H<b>04</b>, and different SB read voltage changes are performed.</p>
<p id="p-0105" num="0104">Fourth soft decision (SB<b>4</b>) decoding is performed based on, for example, an LLR acquired from a fourth LLR table <b>20</b>D for the DR/RD mode shown in <figref idref="DRAWINGS">FIG. 13</figref> on the basis of fourth soft bit data (threshold voltage level) read out by the SB<b>4</b> read voltage set (SH<b>01</b> to SH<b>03</b> and SL<b>05</b> to SL<b>07</b>).</p>
<p id="p-0106" num="0105">As shown in <figref idref="DRAWINGS">FIG. 13</figref>, in the fourth LLR table <b>20</b>D, the degree of reliability of the threshold voltage level on the low voltage side of the HB read voltages H<b>05</b> to <b>1107</b> on the high voltage side is set higher than the degree of reliability of the threshold voltage level on the high voltage side, and the degree of reliability of the threshold voltage level on the low voltage side of the HB read voltages H<b>01</b> to H<b>03</b> on the low voltage side is set higher than the degree of reliability of the threshold voltage level on the high voltage side.</p>
<p id="p-0107" num="0106">Note that if the positive or negative sign of the DR shift value &#x394;V<b>1</b> is a positive sign (+) and the positive or negative sign of the RD shift value &#x394;V<b>2</b> is a negative sign (&#x2212;) although a frequency of occurrence is significantly low, an error signal is transmitted to the host <b>4</b> in step S<b>49</b>.</p>
<p id="h-0029" num="0000">&#x3c;Steps S<b>47</b>, S<b>48</b>, and S<b>49</b>&#x3e;</p>
<p id="p-0108" num="0107">If decoding can be performed in one of the decoding modes (S<b>47</b>: Yes), the decoded data is transmitted to the host <b>4</b> in step S<b>48</b>. If decoding cannot be performed (S<b>47</b>: No), the error signal is transmitted to the host <b>4</b> in step S<b>49</b>.</p>
<p id="p-0109" num="0108">The memory card <b>3</b>B has the same effect as the memory card <b>3</b>, and the level <b>2</b> tracking is further performed. Therefore, although the decoding time becomes long, the decoding performance is higher.</p>
<p id="p-0110" num="0109">As in the memory card <b>3</b>, it is preferable to perform subsequent soft decision decoding by a changed mode if the tracking is performed. Each voltage of the read voltage set may be increased or decreased according to the absolute value of the first shift value or the second shift value.</p>
<p id="p-0111" num="0110">In steps S<b>38</b>, S<b>42</b>, and S<b>45</b>, not only the second to fourth SB read voltages, but also voltages including HB read voltages of a read voltage set that is reset based on the positive or negative sign of the shift value may be applied again to reread the threshold voltage level.</p>
<heading id="h-0030" level="1">Modified Example of Second Embodiment</heading>
<p id="p-0112" num="0111">A memory card <b>3</b>C of a modified example of the second embodiment will be described. The memory card <b>3</b>C is similar to the memory card <b>3</b>B. Therefore, the same constituent elements are designated with the same reference numerals, and the description will not be repeated.</p>
<p id="p-0113" num="0112">In the memory card <b>3</b>C, the data rereading process is not executed according to the negative or positive sign of the first shift value (DR shift value) &#x394;V<b>1</b> and the second shift value (RD shift value) &#x394;V<b>2</b>, and only the LLR table is changed.</p>
<p id="p-0114" num="0113">As shown in <figref idref="DRAWINGS">FIG. 14</figref>, a flow chart of the memory card <b>3</b>C is significantly similar to the flow chart of the memory card <b>3</b>B shown in <figref idref="DRAWINGS">FIG. 12</figref>. Therefore, only different processes will be described.</p>
<p id="h-0031" num="0000">&#x3c;Step S<b>39</b>A&#x3e; (SB<b>2</b> Decoding)</p>
<p id="p-0115" num="0114">If the DR shift value &#x394;V<b>1</b> and the RD shift value &#x394;V<b>2</b> are &#x201c;negative&#x201d;, the SB<b>2</b> decoding of the DR mode as in step S<b>39</b> is performed. In the SB<b>2</b> decoding of the memory card <b>3</b>C, the rereading process by changing the read voltages is not executed. The initial LLR is acquired from the second LLR table <b>20</b>B<b>1</b> (see <figref idref="DRAWINGS">FIG. 10</figref>) different from the first LLR table <b>20</b>A based on SB<b>1</b> read out in the SB<b>1</b> reading (S<b>13</b>).</p>
<p id="h-0032" num="0000">&#x3c;Step S<b>43</b>A&#x3e; (SB<b>3</b> Decoding)</p>
<p id="p-0116" num="0115">If the DR shift value &#x394;V<b>1</b> and the RD shift value &#x394;V<b>2</b> are &#x201c;positive&#x201d;, the SB<b>3</b> decoding in the RD mode as in step S<b>24</b> is performed. In the SB<b>3</b> decoding of the memory card <b>3</b>C, the rereading process by changing the read voltages is not performed. The initial LLR is acquired from the third LLR table <b>20</b>C<b>1</b> (see <figref idref="DRAWINGS">FIG. 11</figref>) different from the first LLR table <b>20</b>A based on SB<b>1</b> read out in the SB<b>1</b> reading (S<b>13</b>).</p>
<p id="h-0033" num="0000">&#x3c;Step S<b>46</b>A&#x3e; (SB<b>4</b> Decoding)</p>
<p id="p-0117" num="0116">If the DR shift value &#x394;V<b>1</b> is &#x201c;negative&#x201d; and the RD shift value &#x394;V<b>2</b> is &#x201c;positive&#x201d;, the SB<b>4</b> decoding in the DR/RD mode as in step S<b>26</b> is performed. In the SB<b>4</b> decoding of the memory card <b>3</b>C, the rereading process by changing the read voltages is not performed. An initial LLR is acquired from a fourth LLR table <b>20</b>D<b>1</b> (see <figref idref="DRAWINGS">FIG. 15</figref>) different from the first LLR table <b>20</b>A based on SB<b>1</b> read out in the SB<b>1</b> reading (S<b>13</b>).</p>
<p id="p-0118" num="0117">As shown in <figref idref="DRAWINGS">FIG. 15</figref>, in the fourth LLR table <b>20</b>D<b>1</b>, the degree of reliability of the threshold voltage level on the low voltage side of the HB read voltages H<b>05</b> to H<b>07</b> on the high voltage side is set lower than the degree of reliability of the threshold voltage level on the high voltage side, and the degree of reliability of the threshold voltage level on the low voltage side of the HB read voltages H<b>01</b> to H<b>03</b> on the low voltage side is set higher than the degree of reliability of the threshold voltage level on the high voltage side.</p>
<p id="p-0119" num="0118">For example, in the LLR table <b>20</b>A shown in <figref idref="DRAWINGS">FIG. 4</figref>, (LLR of Vth level <b>20</b>: LLR of Vth level <b>21</b>) of the upper bit is (2:&#x2212;2), and (LLR of Vth level <b>2</b>: LLR of Vth level <b>3</b>) is (&#x2212;2:2). On the other hand, in the LLR table <b>20</b>D<b>1</b> shown in <figref idref="DRAWINGS">FIG. 15</figref>, (LLR of Vth level <b>20</b>: LLR of Vth level <b>21</b>) is (1:&#x2212;3), and (LLR of Vth level <b>2</b>: LLR of Vth level <b>3</b>) is (&#x2212;3:1).</p>
<p id="p-0120" num="0119">The memory card <b>3</b>C and the control method of the memory card <b>3</b>C have the same effect as the memory card <b>3</b>B and the control method of the memory card <b>3</b>B, and the rereading process of the SB data is not executed. Therefore, decoding is faster.</p>
<p id="p-0121" num="0120">Note that decoding is not possible if the decoding of SB<b>2</b> to SB<b>4</b> fails in the memory cards <b>3</b> to <b>3</b>C described above. However, more detailed tracking can be further performed to perform decoding again.</p>
<p id="p-0122" num="0121">For example, as shown in <figref idref="DRAWINGS">FIG. 16</figref>, full-level tracking A for consecutively tracking the entire range of the SB read voltages S<b>01</b> to S<b>14</b> may be performed to detect seven least frequent voltages. Full-level tracking B (level <b>7</b> tracking) for sequentially tracking only a range near each of the seven HB read voltages H<b>01</b> to H<b>07</b> may be performed to detect the least frequent voltage in each range.</p>
<p id="p-0123" num="0122">If the full-level tracking is performed, seven shift values &#x394;V are acquired based on the difference between the least frequent voltage and the hard bit read voltage. For example, control according to the positive or negative sign of the average value of the seven shift values &#x394;V is performed.</p>
<p id="p-0124" num="0123">Note that the embodiments for performing the soft decision decoding based on the log likelihood ratios acquired from different log likelihood ratio tables according to the positive or negative sign of the shift value that is the difference obtained by subtracting the hard bit read voltage from the least frequent voltage of the threshold distribution have been described above. However, the value that serves as a reference for selecting the log likelihood ratio table is not limited to the difference obtained by subtracting the hard bit read voltage from the least frequent voltage of the threshold distribution, as long as the value is acquired from the result of tracking of the threshold voltage distribution, and the value allows discriminating whether the memory cells are in the data retention state or in the read disturb state. For example, based on a predetermined reference voltage on the basis of the hard bit read voltage, similar effects as in the embodiments can be obtained if the soft decision decoding is performed based on log likelihood ratios acquired from different log likelihood ratio tables depending on whether the least frequent voltage of the threshold distribution is higher or lower than the hard bit read voltage. More specifically, a reference voltage obtained by adding or subtracting a predetermined voltage value from the hard bit read voltage may be used.</p>
<p id="p-0125" num="0124">While certain embodiments have been described, these embodiments have been presented by way of example only, and are not intended to limit the scope of the inventions. Indeed, the novel embodiments described herein may be embodied in a variety of other forms; furthermore, various omissions, substitutions and changes in the form of the embodiments described herein may be made without departing from the spirit of the inventions. The accompanying claims and their equivalents are intended to cover such forms or modifications as would fall within the scope and spirit of the inventions.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A memory device comprising:
<claim-text>a plurality of memory cells, each memory cell storing data of N bits (N is a natural number no less than 2);</claim-text>
<claim-text>a control unit configured to perform control of applying voltages of a read voltage set including (2<sup>N</sup>&#x2212;1) hard bit read voltages and a plurality of soft bit read voltages to each of the memory cells; and</claim-text>
<claim-text>an error correction unit configured to acquire a log likelihood ratio from a log likelihood ratio table on the basis of soft bit data read out by the soft bit read voltages, the error correction unit configured to perform soft decision decoding based on the acquired log likelihood ratio, wherein</claim-text>
<claim-text>the control unit performs first tracking for measuring a first threshold voltage distribution of a first tracking range including a predetermined first hard bit read voltage among the plurality of hard bit read voltages, and</claim-text>
<claim-text>the error correction unit performs the soft decision decoding based on log likelihood ratios acquired from different log likelihood ratio tables depending on whether a first least frequent voltage acquired from the first threshold voltage distribution is higher or lower than a predetermined reference voltage on the basis of the first hard bit read voltage.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The memory device according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein
<claim-text>the error correction unit performs the soft decision decoding based on log likelihood ratios acquired from different log likelihood ratio tables according to a positive or negative sign of a first shift value based on a difference between the first least frequent voltage and the first hard bit read voltage.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The memory device according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein
<claim-text>the first hard bit read voltage is a hard bit read voltage with a highest voltage, and</claim-text>
<claim-text>the first tracking range is centered on the first hard bit read voltage.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The memory device according to <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein
<claim-text>the first tracking range is no greater than 1/(2<sup>N</sup>&#x2212;1) of a difference between a second hard bit read voltage with a lowest voltage among the plurality of hard bit read voltages and the first hard bit read voltage.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The memory device according to <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein
<claim-text>intervals of voltages for measuring the threshold voltage distribution are no less than 1/100 and no greater than &#xbc; of intervals of the hard bit read voltages.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The memory device according to <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein
<claim-text>the control unit acquires the first least frequent voltage from an approximation curve or a moving average based on a histogram of the first threshold voltage distribution acquired by the first tracking.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The memory device according to <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein
<claim-text>the control unit increases and decreases voltages of the read voltage set according to a positive or negative sign and an absolute value of the first shift value.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The memory device according to <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein
<claim-text>the control unit performs the first tracking if the number of failures of the soft decision decoding based on a log likelihood ratio acquired from a first log likelihood ratio table exceeds a predetermined threshold.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The memory device according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein
<claim-text>if the first shift value is negative,
<claim-text>the control unit performs control of applying a second soft bit read voltage that is set on a low voltage side of each of the hard bit read voltages to the memory cells, and</claim-text>
<claim-text>the error correction unit performs the soft decision decoding based on a log likelihood ratio acquired from a second log likelihood ratio table on the basis of second soft bit data read out by the second soft bit read voltage, and</claim-text>
</claim-text>
<claim-text>if the first shift value is positive,
<claim-text>the control unit performs control of applying a third soft bit read voltage that is set on a high voltage side of each of the hard bit read voltages to the memory cells, and</claim-text>
<claim-text>the error correction unit performs the soft decision decoding based on a log likelihood ratio acquired from a third log likelihood ratio table on the basis of third soft bit data read out by the third soft bit read voltage.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The memory device according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein
<claim-text>the first hard bit read voltage is a hard bit read voltage with a highest voltage, and</claim-text>
<claim-text>the first tracking range is centered on the first hard bit read voltage.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The memory device according to <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein
<claim-text>the first tracking range is no greater than 1/(2<sup>N</sup>&#x2212;1) of a difference between a second hard bit read voltage with a lowest voltage among the plurality of hard bit read voltages and the first hard bit read voltage.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The memory device according to <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein
<claim-text>intervals of voltages for measuring the threshold voltage distribution are no less than 1/100 and no greater than &#xbc; of intervals of the hard bit read voltages.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The memory device according to <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein
<claim-text>the control unit acquires the first least frequent voltage from an approximation curve or a moving average based on a histogram of the first threshold voltage distribution acquired by the first tracking.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The memory device according to <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein
<claim-text>the control unit increases and decreases voltages of the read voltage set according to a positive or negative sign and an absolute value of the first shift value.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The memory device according to <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein
<claim-text>the control unit performs the first tracking if the number of failures of the soft decision decoding based on a log likelihood ratio acquired from a first log likelihood ratio table exceeds a predetermined threshold.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The memory device according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein
<claim-text>the control unit performs second tracking for measuring a second threshold voltage distribution of a second tracking range including a predetermined second hard bit read voltage among the plurality of hard bit read voltages,</claim-text>
<claim-text>if the first shift value and a second shift value based on a difference between a second least frequent voltage acquired from the second threshold voltage distribution and the second hard bit read voltage are negative,
<claim-text>the control unit performs control of applying a second soft bit read voltage that is set on a low voltage side of each of the hard bit read voltages to the memory cells, and</claim-text>
<claim-text>the error correction unit performs the soft decision decoding based on a log likelihood ratio acquired from a second log likelihood ratio table on the basis of second soft bit data read out by the second soft bit read voltage,</claim-text>
</claim-text>
<claim-text>if the first shift value and second shift value are positive,
<claim-text>the control unit performs control of applying a third soft bit read voltage that is set on a high voltage side of each of the hard bit read voltages to the memory cells, and</claim-text>
<claim-text>the error correction unit performs the soft decision decoding based on a log likelihood ratio acquired from a third log likelihood ratio table based on third soft bit data read out by the third soft bit read voltage, and</claim-text>
</claim-text>
<claim-text>if the first shift value is negative and the second shift value is positive
<claim-text>the control unit performs control of applying a soft bit read voltage that is set on the low voltage side of each of the hard bit read voltages to the memory cells for the hard bit read voltages on the high voltage side and applying a fourth soft bit read voltage including a soft bit read voltage that is set on the high voltage side of each of the hard bit read voltages to the memory cells for the hard bit read voltages on the low voltage side, and</claim-text>
<claim-text>the error correction unit performs the soft decision decoding based on a log likelihood ratio acquired from a fourth log likelihood ratio table on the basis of fourth soft bit data read out by the fourth soft bit read voltage.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The memory device according to <claim-ref idref="CLM-00016">claim 16</claim-ref>, wherein
<claim-text>the first hard bit read voltage is a hard bit read voltage with a highest voltage,</claim-text>
<claim-text>the second hard bit read voltage is a hard bit read voltage with a lowest voltage,</claim-text>
<claim-text>the first tracking range is centered on the first hard bit read voltage, and</claim-text>
<claim-text>the second tracking range is centered on the second hard bit read voltage.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The memory device according to <claim-ref idref="CLM-00017">claim 17</claim-ref>, wherein
<claim-text>the first tracking range and the second tracking range are no greater than 1/(2<sup>N</sup>&#x2212;1) of ranges of the second hard bit read voltage and the first hard bit read voltage.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The memory device according to <claim-ref idref="CLM-00018">claim 18</claim-ref>, wherein
<claim-text>the control unit acquires the first least frequent voltage from an approximation curve or a moving average based on a histogram of the first threshold voltage distribution acquired by the first tracking and acquires the second least frequent voltage from an approximation curve or a moving average based on a histogram of the second threshold voltage distribution acquired by the second tracking.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. A method of controlling a memory device,
<claim-text>the memory device comprising:
<claim-text>a plurality of memory cells, each memory cell storing data of N bits (N is a natural number no less than 2);</claim-text>
<claim-text>a control unit configured to perform control of applying voltages of a read voltage set including (2<sup>N</sup>&#x2212;1) hard bit read voltages for reading a hard bit data and a plurality of soft bit read voltages for reading a threshold voltage including degree-of-reliability information of the hard bit data to each of the memory cells; and</claim-text>
<claim-text>an error correction unit configured to perform soft decision decoding based on a log likelihood ratio acquired from a log likelihood ratio table on the basis of the threshold voltage,</claim-text>
</claim-text>
<claim-text>the method comprising:
<claim-text>measuring a first threshold voltage distribution of a predetermined range centered on a first hard bit read voltage with a highest voltage among the plurality of hard bit read voltages;</claim-text>
<claim-text>calculating a first shift value based on a difference between a first least frequent voltage acquired from the first threshold voltage distribution and the first hard bit read voltage;</claim-text>
<claim-text>performing, if the first shift value is negative, control of applying a second soft bit read voltage that is set on a low voltage side of each of the hard bit read voltages to the memory cells, and performing, if the first shift value is positive, control of applying a third soft bit read voltage that is set on a high voltage side of each of the hard bit read voltages to the memory cells; and</claim-text>
<claim-text>performing the soft decision decoding based on a log likelihood ratio acquired from a second log likelihood ratio table or a third log likelihood ratio table on the basis of a threshold voltage read out by the second soft bit read voltage or the third soft bit read voltage, by the error correction unit. </claim-text>
</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
