<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08626850-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08626850</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12867464</doc-number>
<date>20090213</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>KR</country>
<doc-number>10-2008-0013237</doc-number>
<date>20080213</date>
</priority-claim>
<priority-claim sequence="02" kind="national">
<country>KR</country>
<doc-number>10-2008-0030059</doc-number>
<date>20080331</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>673</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>15</main-group>
<subgroup>16</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>29</main-group>
<subgroup>08</subgroup>
<symbol-position>L</symbol-position>
<classification-value>N</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>709206</main-classification>
<further-classification>709201</further-classification>
<further-classification>709202</further-classification>
<further-classification>709203</further-classification>
<further-classification>709207</further-classification>
<further-classification>455466</further-classification>
</classification-national>
<invention-title id="d2e90">Method and system for interworking converged messaging service</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>7606190</doc-number>
<kind>B2</kind>
<name>Markovic et al.</name>
<date>20091000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370328</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>7743131</doc-number>
<kind>B2</kind>
<name>Brendes et al.</name>
<date>20100600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709223</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>8010616</doc-number>
<kind>B2</kind>
<name>Lee et al.</name>
<date>20110800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709206</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>8224928</doc-number>
<kind>B2</kind>
<name>Brendes et al.</name>
<date>20120700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709219</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>8392580</doc-number>
<kind>B2</kind>
<name>Allen et al.</name>
<date>20130300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709227</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2005/0213537</doc-number>
<kind>A1</kind>
<name>Ingimundarson et al.</name>
<date>20050900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370329</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2008/0113679</doc-number>
<kind>A1</kind>
<name>Sung et al.</name>
<date>20080500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455466</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2008/0123686</doc-number>
<kind>A1</kind>
<name>Lee et al.</name>
<date>20080500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370466</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2008/0256117</doc-number>
<kind>A1</kind>
<name>Laurila et al.</name>
<date>20081000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707102</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>2008/0281931</doc-number>
<kind>A1</kind>
<name>Oh et al.</name>
<date>20081100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709206</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>2009/0029697</doc-number>
<kind>A1</kind>
<name>Bianconi et al.</name>
<date>20090100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>4554323</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>2009/0067408</doc-number>
<kind>A1</kind>
<name>Leppainen et al.</name>
<date>20090300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370350</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>2009/0067417</doc-number>
<kind>A1</kind>
<name>Kalavade et al.</name>
<date>20090300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370356</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>2009/0080404</doc-number>
<kind>A1</kind>
<name>Laurila et al.</name>
<date>20090300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370348</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>2010/0074181</doc-number>
<kind>A1</kind>
<name>Markovic et al.</name>
<date>20100300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370328</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>2011/0060805</doc-number>
<kind>A1</kind>
<name>Lee et al.</name>
<date>20110300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709206</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>2011/0182243</doc-number>
<kind>A1</kind>
<name>Gallagher et al.</name>
<date>20110700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370328</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00018">
<document-id>
<country>CN</country>
<doc-number>101072386</doc-number>
<date>20071100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00019">
<document-id>
<country>EP</country>
<doc-number>1 473 949</doc-number>
<date>20041100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00020">
<document-id>
<country>KR</country>
<doc-number>1020070077716</doc-number>
<date>20070700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00021">
<document-id>
<country>KR</country>
<doc-number>1020070741287</doc-number>
<date>20070700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00022">
<document-id>
<country>WO</country>
<doc-number>WO 2005048626</doc-number>
<date>20050500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00023">
<othercit>McLaughlin, Ann, Comverse: &#x201c;Converged Messaging Over IMS/IP,&#x201d; CDG EV-DO Rev A Applications Tech Forum, Nov. 9, 2006.</othercit>
</nplcit>
<category>cited by examiner</category>
</us-citation>
<us-citation>
<nplcit num="00024">
<othercit>PCT/ISA/237 Written Opinion issued in PCT/KR2009/000715 (10pp).</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>28</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>709201-203</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709206-207</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>455466</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>5</number-of-drawing-sheets>
<number-of-figures>5</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20110047233</doc-number>
<kind>A1</kind>
<date>20110224</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Park</last-name>
<first-name>Sung-Jin</first-name>
<address>
<city>Gyeonggi-do</city>
<country>KR</country>
</address>
</addressbook>
<residence>
<country>KR</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Lee</last-name>
<first-name>Kyung-Tak</first-name>
<address>
<city>Gyeonggi-do</city>
<country>KR</country>
</address>
</addressbook>
<residence>
<country>KR</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Lee</last-name>
<first-name>Seung-Yong</first-name>
<address>
<city>Seoul</city>
<country>KR</country>
</address>
</addressbook>
<residence>
<country>KR</country>
</residence>
</us-applicant>
<us-applicant sequence="004" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Oh</last-name>
<first-name>Jae-Kwon</first-name>
<address>
<city>Seoul</city>
<country>KR</country>
</address>
</addressbook>
<residence>
<country>KR</country>
</residence>
</us-applicant>
<us-applicant sequence="005" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Lee</last-name>
<first-name>Ji-Hye</first-name>
<address>
<city>Seoul</city>
<country>KR</country>
</address>
</addressbook>
<residence>
<country>KR</country>
</residence>
</us-applicant>
<us-applicant sequence="006" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Kim</last-name>
<first-name>Wuk</first-name>
<address>
<city>Gyeonggi-do</city>
<country>KR</country>
</address>
</addressbook>
<residence>
<country>KR</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Park</last-name>
<first-name>Sung-Jin</first-name>
<address>
<city>Gyeonggi-do</city>
<country>KR</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Lee</last-name>
<first-name>Kyung-Tak</first-name>
<address>
<city>Gyeonggi-do</city>
<country>KR</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Lee</last-name>
<first-name>Seung-Yong</first-name>
<address>
<city>Seoul</city>
<country>KR</country>
</address>
</addressbook>
</inventor>
<inventor sequence="004" designation="us-only">
<addressbook>
<last-name>Oh</last-name>
<first-name>Jae-Kwon</first-name>
<address>
<city>Seoul</city>
<country>KR</country>
</address>
</addressbook>
</inventor>
<inventor sequence="005" designation="us-only">
<addressbook>
<last-name>Lee</last-name>
<first-name>Ji-Hye</first-name>
<address>
<city>Seoul</city>
<country>KR</country>
</address>
</addressbook>
</inventor>
<inventor sequence="006" designation="us-only">
<addressbook>
<last-name>Kim</last-name>
<first-name>Wuk</first-name>
<address>
<city>Gyeonggi-do</city>
<country>KR</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>The Farrell Law Firm, P.C.</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Samsung Electronics Co., Ltd</orgname>
<role>03</role>
<address>
<country>KR</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Boutah</last-name>
<first-name>Alina N</first-name>
<department>2443</department>
</primary-examiner>
</examiners>
<pct-or-regional-filing-data>
<document-id>
<country>WO</country>
<doc-number>PCT/KR2009/000715</doc-number>
<kind>00</kind>
<date>20090213</date>
</document-id>
<us-371c124-date>
<date>20100812</date>
</us-371c124-date>
</pct-or-regional-filing-data>
<pct-or-regional-publishing-data>
<document-id>
<country>WO</country>
<doc-number>WO2009/102169</doc-number>
<kind>A </kind>
<date>20090820</date>
</document-id>
</pct-or-regional-publishing-data>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">In a Converged IP Messaging (CPM) service, an arbitrary terminal generates a message based on a user input, and transmits the message to a CPM server. Upon receiving the message, the CPM server requests a presence server to provide presence information corresponding to a recipient of the message. The presence server searches for presence information corresponding to the recipient in response to the request of the CPM server, and transmits the searched presence information to the CPM server. Based on the transmitted presence information, the CPM server decides to perform interworking for the message, decides a type of a messaging service for interworking, and transmits the message to an Interworking Function (IWF) according to the decided type of the messaging service. The IWF receives the message, converts the message according to the decided messaging service, and transmits the converted message to the recipient.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="155.36mm" wi="229.79mm" file="US08626850-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="238.51mm" wi="173.65mm" orientation="landscape" file="US08626850-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="257.98mm" wi="164.42mm" orientation="landscape" file="US08626850-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="245.79mm" wi="179.58mm" orientation="landscape" file="US08626850-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="205.23mm" wi="88.31mm" file="US08626850-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="243.50mm" wi="178.56mm" orientation="landscape" file="US08626850-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">TECHNICAL FIELD</heading>
<p id="p-0002" num="0001">The present invention relates generally to a converged IP messaging service, and more particularly, to an interworking method and system between a converged IP messaging service and other messaging services.</p>
<heading id="h-0002" level="1">BACKGROUND ART</heading>
<p id="p-0003" num="0002">Commonly used messaging services include Short Message Service (SMS), Multimedia Messaging System (MMS), Email Service, Instant Messaging (IM) Service, etc. Although these messaging services are provided based on different technologies, they overlap one another in many aspects in the light of user experiences. For example, all of these messaging services can send text messages, and the services other than SMS can also send multimedia content.</p>
<p id="p-0004" num="0003">Considering the overlapping of the user experiences, Open Mobile Alliance (OMA) has recently defined a new service called Converged IP Messaging service (CPM service) based on a Session Initiation Protocol (SIP) and an Internet Protocol (IP). The CPM service is aimed to provide key features of the existing messaging services in a single messaging service. Accordingly, by simply using the CPM service, a user can experience the user services that all the existing messaging services have provided, and can also exchange messages with users of all the existing messaging services.</p>
<p id="p-0005" num="0004">A schematic configuration of a system supporting the CPM service is shown in <figref idref="DRAWINGS">FIG. 1</figref>. Referring to <figref idref="DRAWINGS">FIG. 1</figref>, the CPM system includes a CPM client <b>10</b>, an Interworking Function (IWF) <b>20</b>, a message/media storage <b>30</b>, a converged address book <b>40</b>, a user preference storage <b>50</b>, a CPM server <b>60</b>, and a SIP/IP core network <b>70</b>.</p>
<p id="p-0006" num="0005">The CPM client <b>10</b> is generally included in a terminal, and provides interfacing between a CPM service and a user. In other words, the CPM client <b>10</b> serves to handle requests of the user. For example, if the user creates content and requests delivery of the content, the CPM client <b>10</b> converts this content to be suitable to the CPM service, includes the converted content in a SIP MESSAGE, and sends the SIP MESSAGE to the SIP/IP core network <b>70</b>. Also, the CPM client <b>10</b> receives content sent from another client, determines and verifies whether the content has been correctly received, and if so delivers the received content to the user. Thus, the CPM client <b>10</b> may be considered as a contact point between the user and the CPM service.</p>
<p id="p-0007" num="0006">The CPM server <b>60</b> is a server that handles the requirements the CPM client <b>10</b> sends through a CPM conversion interface. The CPM server <b>60</b> applies the policy set by the service provider or the user to the CPM contents provided from the CPM client <b>10</b>.</p>
<p id="p-0008" num="0007">The IWF <b>20</b> converts CPM content and provides it to another messaging service so that the message content delivered by a sending CPM client, i.e., the CPM content, may be processed by another messaging service other than the CPM service. Also, upon receiving content of another messaging service, the IWF <b>20</b> converts a format of the content so that the content may be processed by the CPM service. This operation of the IWF <b>20</b> is called interworking. The IWF <b>20</b> is connected to the CPM server <b>60</b> through a CPM-IW interface, and connected to other messaging services through interfaces provided by those messaging services.</p>
<p id="p-0009" num="0008">The message/media storage <b>30</b> serves to store messages delivered to the user in the absence of the user or depending on user's settings. The converged address book <b>40</b>, a kind of phonebook, includes a contact list and serves to insert presence information into information about each contact and provide the contact information to the user.</p>
<p id="p-0010" num="0009">The SIP/IP core network <b>70</b>, a low-level network supporting necessary SIP and IP, exists between all of the above-described components and is responsible for routing all messages. An example of the SIP/IP core network <b>70</b> includes an IP Multimedia Subsystem (IMS).</p>
<heading id="h-0003" level="1">DETAILED DESCRIPTION OF THE INVENTION</heading>
<heading id="h-0004" level="1">Technical Problem</heading>
<p id="p-0011" num="0010">The CPM service provides a messaging service by interworking with the existing messaging services. Accordingly, in a CPM service environment, a sender sends CPM content without consideration of a type of the messaging service to which a recipient has subscribed, or recipient's preference. In addition, the CPM service should be able to interwork with the existing messaging services such as SMS, MMS, Email, IM, PoC, etc. in order to most successfully deliver the message sent by the sender to the recipient regardless of the types of the messaging services used by the recipient. Herein, the term &#x201c;interworking&#x201d; may be construed to include providing a routing mechanism so that a CPM message may be delivered to the existing messaging service desired by the user, and performing conversion between a CPM message format and a message format of the existing messaging service.</p>
<p id="p-0012" num="0011">There are two factors to consider in the interworking of the CPM service. First, upon receiving a CPM message from the CPM client <b>10</b>, the CPM server <b>60</b> should decide on interworking by determining whether a recipient of the CPM message is a CPM message user or a user of another messaging service. Second, if the CPM server <b>60</b> has decided to perform interworking as the recipient is a user of another messaging service, the CPM server <b>60</b> should determine through which messaging service it will deliver the CPM message. After the two factors are considered, routing should be performed through a mechanism provided based on the consideration, to ensure full interworking in the CPM service.</p>
<heading id="h-0005" level="1">Solution to the Problem</heading>
<p id="p-0013" num="0012">Accordingly, an aspect of exemplary embodiments of the present invention is to provide a method and system for performing interworking taking into account the presence/absence of a user's interworking request and a type of a messaging service through which interworking will be performed.</p>
<p id="p-0014" num="0013">In accordance with an aspect of the present invention, there is provided a method for performing interworking between different messaging services in a converged IP Messaging (CPM) service, the method including, upon receiving from an arbitrary terminal a message generated based on a user input, requesting by a CPM server a presence server to provide presence information corresponding to a recipient of the message; upon receiving the presence information that is transmitted from the presence server in response to the request, deciding by the CPM server whether to perform interworking for the message, based on the presence information, and deciding a type of a messaging service for interworking if the CPM server decides to perform interworking; delivering by the CPM server the message to an Interworking Function (IWF) according to the decided type of the messaging service; and upon receiving the message, converting by the IWF the message according to the decided messaging service and transmitting the converted message to the recipient.</p>
<heading id="h-0006" level="1">Advantageous Effects of the Invention</heading>
<p id="p-0015" num="0014">The present invention may provide a method for performing interworking taking into account the presence/absence of a user's interworking request and a type of a messaging service through which interworking will be performed.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0007" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 1</figref> is a diagram showing a configuration of a general CPM system;</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 2</figref> is a diagram showing a configuration of an interworking system according to an embodiment of the present invention;</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 3</figref> is a diagram showing an interworking process according to an embodiment of the present invention;</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 4</figref> is a diagram showing a structure of a CPM server according to an embodiment of the present invention; and</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 5</figref> is a diagram showing an interworking process according to another embodiment of the present invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0008" level="1">DESCRIPTION OF THE EMBODIMENTS TO CARRY OUT THE INVENTION</heading>
<p id="p-0021" num="0020">Exemplary embodiments of the present invention will be described in detail with reference to the accompanying drawings. It should be noted that throughout the drawings, the same reference numerals and symbols are used to represent the same components, if possible. In addition, descriptions of well-known functions and constructions are omitted for clarity and conciseness.</p>
<p id="p-0022" num="0021">First, a configuration of a system supporting CPM interworking between a CPM service and another messaging service according to an embodiment of the present invention will be described with reference to <figref idref="DRAWINGS">FIG. 2</figref>. As shown in <figref idref="DRAWINGS">FIG. 2</figref>, the system supporting CPM interworking includes terminals <b>100</b> and <b>110</b>, CPM servers <b>120</b> and <b>130</b>, an IWF <b>140</b>, an application server <b>150</b>, a presence server <b>160</b>, a CPM network <b>170</b>, and a non-CPM network <b>180</b>. The first terminal <b>100</b> and the second terminal <b>110</b> each include one of a presence client capable of providing a presence source, and a CPM client or a client supporting another messaging service. A user provides a necessary function in which through a terminal, a presence client generates presence information and registers it in the presence server <b>160</b>. In an embodiment of the present invention, it is assumed that both the first terminal <b>100</b> and the second terminal <b>110</b> include a presence client and a CPM client. In addition, a terminal including a CPM client is called a CPM terminal.</p>
<p id="p-0023" num="0022">Upon receiving a CPM message from a CPM terminal, the CPM servers <b>120</b> and <b>130</b> request the presence server <b>160</b> to provide presence information corresponding to a recipient of the CPM message. Based on the received presence information, the CPM servers <b>120</b> and <b>130</b> decide whether to perform an interworking function, and a type of a messaging service through which they will perform interworking (hereinafter referred to as a &#x201c;messaging service for interworking&#x201d;).</p>
<p id="p-0024" num="0023">The presence server <b>160</b> stores presence information corresponding to a user of each messaging service. The presence information is registered by the user, and includes a type of a messaging service supportable to the user, and a user preference. The user preference information includes a user's interworking grant and a type of a messaging service for interworking. The presence server <b>160</b> provides presence information of a user in response to a presence information request from any one of the CPM servers <b>120</b> and <b>130</b>, an interworking Selection Function (ISF, not shown) which is an independent server for an interworking selector <b>125</b> in the presence server <b>160</b>, and the IWF <b>140</b>.</p>
<p id="p-0025" num="0024">The IWF <b>140</b> converts formats of messages to be exchanged between different messaging services.</p>
<p id="p-0026" num="0025">The CPM network <b>170</b> delivers CPM messages, while the non-CPM network <b>180</b> delivers messages based on messaging services other than the CPM service, for example, messages based on a PoC service, an IM service, an Email service, an MMS service and an SMS service. The application server <b>150</b> means a server providing the PoC service, the IM service, the Email service, the MMS service, the SMS service, etc.</p>
<p id="p-0027" num="0026">In the aforementioned system, when a CPM message is transmitted, an interworking process according to an embodiment of the present invention is performed as follows. The interworking process includes a step in which a CPM user or a user using another messaging service stores, in the presence server <b>160</b>, presence information including the type of an available messaging service(s) and the user preference, a step in which a CPM terminal generates a message and transmits it to the first CPM server <b>120</b> over the SIP/IP core network, a step (Query) in which the first CPM server <b>120</b> requests the presence server <b>160</b> to provide presence information corresponding to a recipient of the message, a step (Response) in which the presence server <b>160</b> provides the requested presence information in response to the request of the first CPM server <b>120</b>, a step in which based on the presence information, the first CPM server <b>120</b> decides whether to perform interworking, a step in which based on the presence information, the first CPM server <b>120</b> decides a type of a supportable messaging service, a step in which the first CPM server <b>120</b> routes the message to the IWF <b>140</b> according to the decided type of the messaging service, a step in which the IWF <b>140</b> converts the message into a message format of the decided messaging service, a step in which if the decided messaging service is the CPM service, the message is delivered to the second CPM server <b>130</b> in the receiving side over the CPM network or a step in which if the decided messaging service is not the CPM service, the message is delivered to the application server <b>150</b> supporting the decided messaging service over the non-CPM network, and a step in which the second CPM server <b>130</b> and the application server <b>150</b> finally deliver the message to the user.</p>
<p id="p-0028" num="0027">Reference will now be made to <figref idref="DRAWINGS">FIGS. 2 and 3</figref> to give a detailed description of each step in the interworking process of the CPM service, and possible modifications thereof. In <figref idref="DRAWINGS">FIG. 3</figref>, a user of the second terminal <b>110</b> registers presence information in the presence server <b>160</b> using a presence client in the second terminal <b>110</b> in step <b>201</b>. In an embodiment of the present invention, the presence server <b>160</b> is assumed as a Session Initiation Protocol for instant Message and Presence Leveraging Extensions (SIMPLE) presence server using the SIP/IP core network. Accordingly, the second terminal <b>110</b> stores its presence information in the presence server <b>160</b> using SIP PUBLISH, and the presence information may be created based on the syntax defined in OMA Presence. An example of the presence information is shown in Table 1.</p>
<p id="p-0029" num="0028">
<tables id="TABLE-US-00001" num="00001">
<table frame="none" colsep="0" rowsep="0" pgwide="1">
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="280pt" align="left"/>
<thead>
<row>
<entry namest="1" nameend="1" rowsep="1">TABLE 1</entry>
</row>
<row>
<entry namest="1" nameend="1" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry>&#x3c;?xml version=&#x201c;1.0&#x201d; encoding=&#x201c;UTF-8&#x201d;?&#x3e;</entry>
</row>
<row>
<entry>&#x3c;presence xmlns=&#x201c;urn:ietf:params:xml:ns:pidf&#x201d;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="70pt" align="left"/>
<colspec colname="1" colwidth="210pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>xmlns:pdm=&#x201c;urn:ietf:params:xml:ns:pidf:data-model&#x201d;</entry>
</row>
<row>
<entry/>
<entry>xmlns:rpid=&#x201c;urn:ietf:params:xml:ns:pidf:rpid&#x201d;</entry>
</row>
<row>
<entry/>
<entry>xmlns:op=&#x201c;urn:oma:xml:prs:pidf:oma-pres&#x201d;</entry>
</row>
<row>
<entry/>
<entry>xmlns:gp=&#x201c;urn:ietf:params:xml:ns:pidf:geopriv10&#x201d;</entry>
</row>
<row>
<entry/>
<entry>xmlns:cl=&#x201c;urn:ietf:params:xml:ns:pidf:geopriv10:civicLoc&#x201d;</entry>
</row>
<row>
<entry/>
<entry>xmlns:gml=&#x201c;urn:opengis:speciflcation:gml:schema-xsd:feature:v3.0&#x201d;</entry>
</row>
<row>
<entry/>
<entry>xmlns:lt=&#x201c;urn:ietf:params:xml:ns:location-type&#x201d;</entry>
</row>
<row>
<entry/>
<entry>entity=&#x201c;sip:UserB@example.com&#x201d;&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="280pt" align="left"/>
<tbody valign="top">
<row>
<entry>&#x3c;tuple id=&#x201c;a1231&#x201d;&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="28pt" align="left"/>
<colspec colname="1" colwidth="252pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>&#x3c;status&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="70pt" align="left"/>
<colspec colname="1" colwidth="210pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>&#x3c;basic&#x3e;open&#x3c;/basic&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="56pt" align="left"/>
<colspec colname="1" colwidth="224pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>&#x3c;/status&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="42pt" align="left"/>
<colspec colname="1" colwidth="238pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>&#x3c;op:willingness&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="70pt" align="left"/>
<colspec colname="1" colwidth="210pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>&#x3c;op:basic&#x3e;open&#x3c;/op:basic&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="42pt" align="left"/>
<colspec colname="1" colwidth="238pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>&#x3c;/op:willingness&#x3e;</entry>
</row>
<row>
<entry/>
<entry>&#x3c;op:session-participation&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="56pt" align="left"/>
<colspec colname="1" colwidth="224pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>&#x3c;op:basic&#x3e;open&#x3c;/op:basic&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="42pt" align="left"/>
<colspec colname="1" colwidth="238pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>&#x3c;/op:session-participation&#x3e;</entry>
</row>
<row>
<entry/>
<entry>&#x3c;rpid:status-icon&#x3e;http://example.com/~my-icons/PoC-Session&#x2003;&#x3c;/rpid:status-</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="280pt" align="left"/>
<tbody valign="top">
<row>
<entry>icon&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="42pt" align="left"/>
<colspec colname="1" colwidth="238pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>&#x3c;op:registration-state&#x3e;active&#x3c;/op:registration-state&#x3e;</entry>
</row>
<row>
<entry/>
<entry>&#x3c;op:barring-state&#x3e;terminated&#x3c;/op:barring-state&#x3e;</entry>
</row>
<row>
<entry/>
<entry>&#x3c;rpid:class&#x3e;forfriends&#x3c;/rpid:class&#x3e;</entry>
</row>
<row>
<entry/>
<entry>&#x3c;op:service-description&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="70pt" align="left"/>
<colspec colname="1" colwidth="210pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>&#x3c;op:service-id&#x3e;org.openmobilealliance:PoC-session&#x3c;/op:service-id&#x3e;</entry>
</row>
<row>
<entry/>
<entry>&#x3c;op:version&#x3e; 1.0 &#x3c;/op:version&#x3e;</entry>
</row>
<row>
<entry/>
<entry>&#x3c;op:description&#x3e;This is the OMA PoC-Session service&#x3c;/op:description&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="98pt" align="left"/>
<colspec colname="1" colwidth="182pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>&#x3c;/op:service-description&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="42pt" align="left"/>
<colspec colname="1" colwidth="238pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>&#x3c;pdm:deviceID&#x3e;urn:uuid:d27459b7-8213-4395-aa77-ed859a3e5b3a</entry>
</row>
<row>
<entry/>
<entry>&#x3c;/pdm:deviceID&#x3e;</entry>
</row>
<row>
<entry/>
<entry>&#x3c;contact&#x3e;sip:my_name@example.com&#x3c;/contact&#x3e;</entry>
</row>
<row>
<entry/>
<entry>&#x3c;timestamp&#x3e;2005-02-22T20:07:07Z&#x3c;/timestamp&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="280pt" align="left"/>
<tbody valign="top">
<row>
<entry>&#x3c;/tuple&#x3e;</entry>
</row>
<row>
<entry>&#x3c;tuple id=&#x201c;a1232&#x201d;&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="28pt" align="left"/>
<colspec colname="1" colwidth="252pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>&#x3c;status&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="42pt" align="left"/>
<colspec colname="1" colwidth="238pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>&#x3c;basic&#x3e;open&#x3c;/basic&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="28pt" align="left"/>
<colspec colname="1" colwidth="252pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>&#x3c;/status&#x3e;</entry>
</row>
<row>
<entry/>
<entry>&#x3c;op:willingness&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="42pt" align="left"/>
<colspec colname="1" colwidth="238pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>&#x3c;op:basic&#x3e;open&#x3c;/op:basic&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="28pt" align="left"/>
<colspec colname="1" colwidth="252pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>&#x3c;/op:willingness&#x3e;</entry>
</row>
<row>
<entry/>
<entry>&#x3c;rpid:status-icon&#x3e;http://example.com/~my-icons/CPM-</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="280pt" align="left"/>
<tbody valign="top">
<row>
<entry>Interworking&#x3c;/rpid:status-icon&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="28pt" align="left"/>
<colspec colname="1" colwidth="252pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>&#x3c;op:registration-state&#x3e;active&#x3c;/op:registration-state&#x3e;</entry>
</row>
<row>
<entry/>
<entry>&#x3c;rpid:class&#x3e;forfriends&#x3c;/rpid:class&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="14pt" align="left"/>
<colspec colname="1" colwidth="266pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>&#x3c;op:service-description&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="42pt" align="left"/>
<colspec colname="1" colwidth="238pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>&#x3c;op:service-id&#x3e;org.openmobileallaiance:CPM-User-</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="280pt" align="left"/>
<tbody valign="top">
<row>
<entry>Preference&#x3c;/op:service-id&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="42pt" align="left"/>
<colspec colname="1" colwidth="238pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>&#x3c;op:version&#x3e;1.0&#x3c;/op:version&#x3e;</entry>
</row>
<row>
<entry/>
<entry>&#x3c;op:description&#x3e;This&#x2003;is&#x2003;the&#x2003;CRM&#x2003;Interworking&#x2003;User</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="280pt" align="left"/>
<tbody valign="top">
<row>
<entry>Preference&#x3c;/op:description&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="42pt" align="left"/>
<colspec colname="1" colwidth="238pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>&#x3c;op:Interworking&#x3e;</entry>
</row>
<row>
<entry/>
<entry>&#x3c;op:Preference&#x3e;open&#x3c;/op:Preference&#x3e;</entry>
</row>
<row>
<entry/>
<entry>&#x3c;op:Preferred_service&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="70pt" align="left"/>
<colspec colname="1" colwidth="210pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>&#x3c;op:Service_type&#x3e;SMS&#x3c;/op:Service_type&#x3e;</entry>
</row>
<row>
<entry/>
<entry>&#x3c;op:Preferred_value&#x3e;1&#x3c;/op:Preferred_value&#x3e;</entry>
</row>
<row>
<entry/>
<entry>&#x3c;op:contact&#x3e;+821695305938&#x3c;/op:contact&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="56pt" align="left"/>
<colspec colname="1" colwidth="224pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>&#x3c;/op:Preferred_service&#x3e;</entry>
</row>
<row>
<entry/>
<entry>&#x3c;op:Preferred_service&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="70pt" align="left"/>
<colspec colname="1" colwidth="210pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>&#x3c;op:Service_type&#x3e;MMS&#x3c;/op:Service_type&#x3e;</entry>
</row>
<row>
<entry/>
<entry>&#x3c;op:Preferred_value&#x3e;0.5&#x3c;/op:Preferred_value&#x3e;</entry>
</row>
<row>
<entry/>
<entry>&#x3c;op:contact&#x3e;+821695305938&#x3c;/op:contact&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="56pt" align="left"/>
<colspec colname="1" colwidth="224pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>&#x3c;/op:Preferred_service&#x3e;</entry>
</row>
<row>
<entry/>
<entry>&#x3c;op:Preferred_service&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="70pt" align="left"/>
<colspec colname="1" colwidth="210pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>&#x3c;op:Service_type&#x3e;PoC&#x3c;/op:Service_type&#x3e;</entry>
</row>
<row>
<entry/>
<entry>&#x3c;op:Preferred_value&#x3e;0.1&#x3c;/op:Preferred_value&#x3e;</entry>
</row>
<row>
<entry/>
<entry>&#x3c;op:contact&#x3e;sip:PoC-UserB@example.com&#x3c;/op:contact&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="56pt" align="left"/>
<colspec colname="1" colwidth="224pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>&#x3c;/op:Preferred_service&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="42pt" align="left"/>
<colspec colname="1" colwidth="238pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>&#x3c;/op:Interworking&#x3e;</entry>
</row>
<row>
<entry/>
<entry>&#x3c;/op:service-description&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="56pt" align="left"/>
<colspec colname="1" colwidth="224pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>&#x3c;pdm:deviceID&#x3e;urn:uuid:a509O4e-8213-4395-aa77-</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="280pt" align="left"/>
<tbody valign="top">
<row>
<entry>ed859a3e5b3a&#x3c;/pdm:deviceID&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="56pt" align="left"/>
<colspec colname="1" colwidth="224pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>&#x3c;contact&#x3e;sip:User@example.com&#x3c;/contact&#x3e;</entry>
</row>
<row>
<entry/>
<entry>&#x3c;timestamp&#x3e;2008-01-15T20:07:07z&#x3c;/timestamp&#x3e;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="280pt" align="left"/>
<tbody valign="top">
<row>
<entry>&#x3c;/tuple&#x3e;</entry>
</row>
<row>
<entry namest="1" nameend="1" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0030" num="0029">In Table 1, elements and attributes in the document representing the presence information are as follows. The presence document indicates a user of the presence information using &#x2018;entity id&#x2019; included in a namespace section. In Table 1, it indicates that the presence information is of User B.</p>
<p id="p-0031" num="0030">&#x3c;tuple id&#x3e; serves to identify each service, and &#x3c;op:service-id&#x3e; indicates which service User B supports. In Table 1, &#x201c;a1231&#x201d; and &#x201c;a1232&#x201d; are identification values indicating different messaging services, &#x2018;&#x3c;op:service-id&#x3e;org.openmobilealliance:PoC-Session&#x3c;/op:service-id&#x3e;&#x2019; indicates supporting of the PoC service, and &#x2018;&#x3c;op:service-id&#x3e;org.openmobilealliance:CPM-User-Preference&#x3c;/op:service-id&#x3e;&#x2019; indicates supporting of the user preference of the CPM service. By linking the two elements &#x3c;tuple id&#x3e; and &#x3c;op:service-id&#x3e; in this way, it is possible to indicate one service supported by each identifier. Although it is assumed in Table 1 that the presence information includes the PoC service and the CPM service, messaging services such as IM service, MMS and Email may also be added. In this manner, the user's available messaging service may be indicated by &#x3c;tuple id&#x3e; and &#x3c;op:service-id&#x3e;.</p>
<p id="p-0032" num="0031">In Table 1, &#x3c;status&#x3e; indicates availability, &#x3c;op:willingness&#x3e; indicates a user's willingness to use a certain service, and &#x3c;op:registration-state&#x3e; indicates whether the user is registered in the service. &#x3c;op:service-description&#x3e; is a detailed description of the service corresponding to the identifier. Because the user presence is not included in the PoC service corresponding to &#x201c;a1231&#x201d;, a CPM-User-Preference service corresponding to &#x201c;a 1232&#x201d; is described. Sub-elements of &#x3c;op:service-description&#x3e; include &#x3c;op:service-id&#x3e;, &#x3c;op:version&#x3e;, &#x3c;op:description&#x3e;, and &#x3c;op:Interworking&#x3e;.</p>
<p id="p-0033" num="0032">&#x3c;op:service-id&#x3e; has been described above, and &#x3c;op:version&#x3e; represents a version of the service. &#x3c;op:description&#x3e; is created by the user or the presence service provider, and serves to show a text informing which presence information this service represents. When the user wants interworking, &#x3c;op:lnterworking&#x3e; represents the related information using the sub-elements.</p>
<p id="p-0034" num="0033">If &#x3c;op:Preference&#x3e; is open, it means an intention to apply interworking preference, and if &#x3c;op:Preference&#x3e; is closed, it means an intention not to apply the interworking preference information. &#x3c;op:Preferred_service&#x3e; indicates a type of a messaging service preferred during interworking, and &#x3c;op:Preferred_value&#x3e; indicates a priority of a preference when there are various types of preferred messaging services. In Table 1, a messaging service closer to 1 is a messaging service with a higher preference and a messaging service closer to 0 means a messaging service with a lower preference. Therefore, in Table 1, the preferences are shown in order of SMS&#x3e;MMS&#x3e;PoC services, which means that during interworking, the user wants to receive messages using SSM at first, and if it is not possible, wants to receive messages using MMS and PoC in order. &#x3c;op:contact&#x3e; is contact information indicated by contactable MSISDN, SIP URI or Email address. For meanings of other elements included in the presence information document, reference can be made to OMA Presence.</p>
<p id="p-0035" num="0034">Names of the above elements are subject to change according to embodiments of the present invention, and the attribute corresponding to each element may be represented by a new element. That is, the aforesaid attributes are not limited to names of their associated elements.</p>
<p id="p-0036" num="0035">In accordance with another embodiment of the present invention, the presence information may be delivered to the presence server without using the SIP/IP core network. One of them is a method of using a Extensible Messaging and Presence Protocol (XMPP), and another is a method of using a Instant Messaging and Presence Service (IMPS) based on WAP. Even though these two methods are used, the contents of the above-described elements should be included, which are a type of an available messaging service(s) and a user preference during interworking, i.e., messaging services the user desires to use, and a preference degree and contact information for each messaging service.</p>
<p id="p-0037" num="0036">Storing (publishing) of the presence information can be carried any time, and priorities of receiving transmission message by the CPM server and storing presence information by the user are not specified.</p>
<p id="p-0038" num="0037">Turning back to <figref idref="DRAWINGS">FIG. 3</figref>, the presence server <b>160</b> stores the presence information received from the second terminal <b>110</b> in step <b>203</b>. Thereafter, in step <b>205</b>, upon user's request, the first terminal <b>100</b> generates a message, includes the message in a SIP MESSAGE and transmits the SIP MESSAGE to a SIP/IP core network <b>210</b>. In step <b>207</b>, the SIP/IP core network <b>210</b>, if it is a routing mechanism, for example, an IMS network, delivers the received SIP MESSAGE to the first CPM server <b>120</b> using an initial Filter Criteria (IFC).</p>
<p id="p-0039" num="0038">Upon receiving the SIP MESSAGE, the first CPM server <b>120</b> checks a message recipient and then requests the presence server <b>160</b> to provide presence information for the recipient in step <b>209</b>. If the presence server <b>160</b> is a SIMPLE presence server based on the SIP/IP core network, the first CPM server <b>120</b> requests presence information using a SUBSCRIBE method. If the presence server <b>160</b> is not the SIMPLE presence server, the first CPM server <b>120</b> may request presence information using a command of a XMPP or WAP protocol. The presence server <b>160</b> searches for the requested presence information and transmits the searched presence information to the first CPM server <b>120</b> in step <b>211</b>. The presence server <b>160</b> may deliver user's presence information searched only once to an information requestor upon request of the information requestor, or may deliver the user's presence information to the information requestor every time there is a change in the searched user's presence information.</p>
<p id="p-0040" num="0039">In step <b>213</b>, the first CPM server <b>120</b> decides whether to perform interworking, based on the presence information provided from the presence server <b>160</b>. The first CPM server <b>120</b> decides not to perform interworking, if interworking-related information is not included in the presence information or information indicating that the user does not want interworking is included in the presence information. The first CPM server <b>120</b> decides to perform interworking, if interworking-related information is included in the presence information or information indicating that the user wants interworking is included in the presence information.</p>
<p id="p-0041" num="0040">In step <b>215</b>, the first CPM server <b>120</b> selects a messaging service through which it will perform interworking (hereinafter referred to as a &#x201c;messaging service for interworking&#x201d;) based on the presence information. For example, if SMS is designated in a user preference of the presence information as a messaging service that the user will use during interworking, the first CPM server <b>120</b> selects SMS as a messaging service for interworking. If the messaging service for interworking is selected in this way, the first CPM server <b>120</b> transmits a SIP MESSAGE in which a message generated by the first terminal <b>100</b> is included, to the SIP/IP core network <b>210</b> in step <b>217</b>.</p>
<p id="p-0042" num="0041">If the presence information is generated in the form shown in Table 1, an operation of the first CPM server <b>120</b> in the process corresponding to steps <b>213</b> to <b>217</b> may be performed as follows. In accordance with an embodiment of the present invention, the first CPM server <b>120</b> first determines whether the CPM server is included in a group of available messaging services. If the CPM service is included in the presence information as an available messaging service, the first CPM server <b>120</b> checks a user preference. If no interworking-related element is included in the user preference or no user preference is used, indicating that the message recipient does not want interworking, then the first CPM server <b>120</b> transmits the message to a receiving CPM server over the SIP/IP core network, determining that the message recipient does not want interworking.</p>
<p id="p-0043" num="0042">However, if the CPM service is included in a group of available messaging services, an interworking preference is activated in the user preference, and a preference degree for a specific messaging service is represented by &#x3c;op:Preferred_value&#x3e;, then the first CPM server <b>120</b> decides to perform interworking. Subsequently, the first CPM server <b>120</b> transmits a message to be transmitted to the recipient, to the IWF <b>140</b> over the SIP/IP core network <b>210</b>.</p>
<p id="p-0044" num="0043">Even though the CPM service is not included in a group of available messaging services, the first CPM server <b>120</b> analyzes interworking preference information by checking user preference information in the presence information. If the interworking preference is activated and a preference degree for a specific messaging service is represented by &#x3c;op:Preferred_value&#x3e;, then first CPM server <b>120</b> decides to perform interworking. The first CPM server <b>120</b> transmits a message to be transmitted to the recipient, to the IWF <b>140</b> over the SIP/IP core network <b>210</b>.</p>
<p id="p-0045" num="0044">If the CPM server is not included in a group of available messaging services and user preference information and interworking preference information cannot be found in presence information, then the first CPM server <b>120</b> selects one of available messaging services and transmits information about the selected messaging service to the SIP/IP core network in step <b>217</b>. Upon receiving a SIP MESSAGE in step <b>217</b>, the SIP/IP core network <b>210</b> transmits the received SIP MESSAGE to the IWF <b>140</b> in step <b>219</b>.</p>
<p id="p-0046" num="0045">Meanwhile, even when the SIP/IP core network <b>210</b> transmits the message to the IWF <b>140</b>, the SIP/IP core network <b>210</b> may send the message using various methods. First, methods classified according to the realization of the IWF <b>140</b> are as follows.</p>
<p id="p-0047" num="0046">First, if the IWF <b>140</b> exists as an independent entity which is different for each type of a messaging service, the first CPM server <b>120</b> should deliver a message to the relevant IWF according to the decided messaging service. A message delivery method may include a method of inserting, into a Request URI in a SIP MESSAGE, an address of the IWF responsible for a messaging service for interworking, rather than a receiving side's SIP URI. When a SIP MESSAGE is generated in a sending side, a recipient address is stored in two places: a Request URI field and a To-Header field. Therefore, after converting the SIP MESSAGE into a desired message format for interworking, the IWF may transmit the To-Header field using a report message.</p>
<p id="p-0048" num="0047">Another method includes generating a specific tag for interworking, for each messaging service. This tag may be a media feature tag. For example, if the CPM server has decided to perform interworking using MMS, the CPM server inserts a media feature tag such as &#x2018;oma.cpm-interworking.mms&#x2019; into an Accept Contact Header field in the SIP MESSAGE, and sends it to the SIP/IP core network, and then the SIP/IP core network sends this message to the IWF responsible for MMS by means of a set routing mechanism.</p>
<p id="p-0049" num="0048">Further another method may include a method of delivering a message by setting a CPM server so that it may directly deliver a message to the IWF. For example if an IP address specific to each IWF is known, messages can be delivered not through the SIP, but through the IP.</p>
<p id="p-0050" num="0049">Meanwhile, if one IWF exists as one entity with respect to all messaging services, a CPM server includes in a message an indicator indicating which messaging service it will use, and then transmits the message using an address assigned to the IWF. In this manner, the IWF may convert a message format and transmit the converted message.</p>
<p id="p-0051" num="0050">If there is no address assigned to the IWF, the above-described media feature tag may be applied. If the CPM server transmits a message including a media feature tag to the SIP/IP cover network, the SIP/IP cover network may recognize that it should send this message to the IWF using the media feature tag. Accordingly, if the SIP/IP core network transmits a received message, the IWF determines with which messaging service the interworking is performed, using the media feature tag.</p>
<p id="p-0052" num="0051">The IWF <b>140</b>, which has received a message using one of the above methods, converts the SIP MESSAGE into a desired message format for interworking based on the above decision criteria in step <b>221</b>.</p>
<p id="p-0053" num="0052">In the case of the PoC service and IM service providing services based on the SIP/IP core network, the IWF converts information for routing, rather than converting a media format of the message to be actually transmitted. For example, assuming that the CPM service uses a CPM feature tag, for routing, if the IWF converts the CPM feature tag into a PoC feature tag or an IM feature tag, the message is transmitted from a sending SIP/IP core network to a receiving SIP/IP core network and then delivered to a recipient terminal over an application server responsible for the PoC service and IM service. This process corresponds to steps <b>223</b>, <b>225</b>, <b>227</b>, <b>229</b> and <b>231</b> in <figref idref="DRAWINGS">FIG. 3</figref>.</p>
<p id="p-0054" num="0053">As for other services, such as SMS, MMS and Email, which do not provide services based on the IP/IP core network, the IWF converts a SIP MESSAGE so as to be suitable for media format conversion and a transport protocol and then transmits the converted message over a network, for example, an IP network and an ATM network, which are not based on the SIP. Then the message is transmitted to a receiving terminal over an application server (SMS, MMS and Email servers) responsible for the relevant service. That is, in <figref idref="DRAWINGS">FIG. 3</figref>, after step <b>221</b>, steps <b>241</b> and <b>243</b> represented by a dotted line are performed.</p>
<p id="p-0055" num="0054"><figref idref="DRAWINGS">FIG. 4</figref> shows a structure of the CPM server <b>120</b> (<b>130</b>) according to an embodiment of the present invention. The CPM server <b>120</b> (<b>130</b>) includes a watcher <b>121</b> capable of acquiring and analyzing presence information, an interworking decision function <b>123</b> for deciding whether to perform interworking, based on the acquired presence information, and an interworking selection function <b>125</b> for selecting through which messaging service it will perform interworking, based on the type of an available messaging service and the user preference, in the acquired presence information.</p>
<p id="p-0056" num="0055">In the aforesaid embodiment of the present invention, the CPM server <b>120</b> (<b>130</b>) should include all of the above function units, but in an alternative embodiment, the IWF <b>140</b> may be adapted to acquire the presence information. In this case, the IWF <b>140</b> may include the watcher <b>121</b>, the interworking decision function <b>123</b>, and the interworking selection function <b>125</b>, or may be adapted to perform operations related to the respective function units. In this case, a method for transmitting a message converted by interworking may be similar to a process in which the CPM server acquires presence information and transmits it over the IWF.</p>
<p id="p-0057" num="0056">Meanwhile, reference will now be made to <figref idref="DRAWINGS">FIG. 5</figref> to make a description of a message transmission process in the case where a function unit, i.e., the interworking selection function <b>125</b>, for selecting a messaging service for interworking based on user preference stored in the presence server <b>160</b>, is realized as a separate server according to another embodiment of the present invention. In <figref idref="DRAWINGS">FIG. 5</figref>, an independent server for the interworking selection function <b>125</b> is an ISF <b>430</b>.</p>
<p id="p-0058" num="0057">In an embodiment of <figref idref="DRAWINGS">FIG. 5</figref>, steps <b>501</b> and <b>503</b> in which a user of a terminal B <b>470</b> stores in a presence server <b>450</b> his or her available messaging service and user preference information for interworking using the terminal B <b>470</b>, are equal to steps <b>201</b> and <b>203</b> described in <figref idref="DRAWINGS">FIG. 3</figref>.</p>
<p id="p-0059" num="0058">In step <b>505</b>, a terminal A <b>400</b> generates a message using a SIP MESSAGE method and transmits the message to a SIP/IP core network A <b>410</b>. The SIP/IP core network A <b>410</b>, if it is a routing mechanism, for example, a 3GPP IMS network, delivers the message to a CPM server A <b>420</b> using an iFC in step <b>507</b>. Upon receiving the message, the CPM server A <b>420</b> checks a recipient to receive the message and then transmits it to a SIP/IP core network B <b>460</b> if routing is possible in the SIP/IP core network A <b>410</b>, in steps <b>509</b> and <b>511</b>. The SIP/IP core network B <b>460</b> determines which service the received SIP MESSAGE supports, and sends an Error response to the SIP/IP core network A <b>410</b> in step <b>513</b>, if the service is not supported in the network. Upon receiving the message, the SIP/IP core network A <b>410</b> delivers the Error response to the CPM server A <b>420</b> in step <b>515</b>. Otherwise, after step <b>509</b>, if routing is not possible for some reason that for example, the recipient address does not support the SIP protocol, the SIP/IP core network A <b>410</b> sends an Error Response to the CPM server A <b>420</b>, skipping steps <b>511</b> and <b>513</b>.</p>
<p id="p-0060" num="0059">Upon receiving the Error response, the CPM server A <b>420</b> decides interworking in step <b>517</b>, recognizing that the receiving-side user does not support the CPM service, and transmits a message to the SIP/IP core network A <b>410</b> in step <b>519</b>. The SIP/IP core network A <b>410</b> transmits the message to the ISF <b>430</b> in step <b>521</b>. When being transmitted to the ISF <b>430</b>, the message may be routed using the iFC, or may be transmitted through an interface between the CPM server A <b>420</b> and the ISF <b>430</b>. Upon receiving the message, the ISF <b>430</b> requests the presence server <b>450</b> to provide an available messaging service and presence information of the receiving-side user in step <b>523</b>, in order to query which messaging service the receiving-side user uses. Upon the request, the presence server <b>450</b> searches for related information and transmits a response to the ISF <b>430</b> in step <b>525</b>. The ISF <b>430</b> selects a messaging service through which it will send a message, based on the presence information received from the presence server <b>450</b>, in step <b>527</b>, and transmits a message to the CPM server A <b>420</b> in step <b>529</b>. The CPM server A <b>420</b> transmits the message to the IWF <b>440</b> in step <b>531</b>. When transmitting the message to the IWF <b>440</b>, the CPM server A <b>420</b> may perform routing using the iFC, or may directly transmit the message through an interface between the ISF <b>430</b> and the IWF <b>440</b>. Upon receiving the message from the ISF <b>430</b>, the IWF <b>440</b> converts the message according to the type of the selected messaging service in step <b>533</b>. The converted message is transmitted to the terminal B <b>470</b> according to steps <b>535</b> to <b>543</b>, or steps <b>551</b> and <b>553</b>, which are similar to steps <b>223</b> to <b>231</b>, or steps <b>241</b> and <b>243</b> of <figref idref="DRAWINGS">FIG. 3</figref>.</p>
<p id="p-0061" num="0060">While the invention has been shown and described with reference to certain exemplary embodiments thereof, it will be understood by those skilled in the art that various changes in form and details may be made therein without departing from the spirit and scope of the invention as defined by the appended claims and their equivalents.</p>
<heading id="h-0009" level="1">INDUSTRIAL APPLICABILITY</heading>
<p id="p-0062" num="0061">The present invention may provide a method for performing interworking taking into account the presence/absence of a user's interworking request and a type of a messaging service through which interworking will be performed, thereby providing a more efficient messaging service to the user.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method for performing interworking between different messaging services in a converged IP Messaging (CPM) service, comprising:
<claim-text>upon receiving from an arbitrary terminal a message generated based on a user input, requesting, by a CPM server, a presence server to provide presence information corresponding to a recipient of the message;</claim-text>
<claim-text>upon receiving the presence information that is transmitted from the presence server in response to the request, deciding, by the CPM server, whether to perform interworking for the message, based on the presence information, and deciding a type of a messaging service for interworking, based on the presence information, if the CPM server decides to perform interworking;</claim-text>
<claim-text>delivering, by the CPM server, the message to an Interworking Function (IWF) according to the decided type of the messaging service; and</claim-text>
<claim-text>upon receiving the message, converting, by the IWF, the message according to the decided messaging service and transmitting the converted message to the recipient.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the presence information comprises a type of a messaging service supportable to a user corresponding to the presence information, a grant/non-grant of messaging interworking, a type of a messaging service preferred during interworking, and a priority of a preference.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the presence information is determined by the user corresponding to the presence information, and registered in the presence server.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the presence information comprises a message receiving address corresponding to each of the messaging service preferred during interworking.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the deciding by the CPM server whether to perform interworking for the message and deciding a type of a messaging service for interworking, comprises:
<claim-text>checking the presence information; and</claim-text>
<claim-text>delivering the message to the recipient if a CPM service is included in the presence information as a messaging service available by the recipient and interworking-related information for the message is not included or not activated in the presence information.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>determining to perform interworking for the message, if interworking-related information for the message is activated in the presence information; and</claim-text>
<claim-text>deciding a type of a messaging service for interworking according to a type of a messaging service preferred during interworking and a priority of a preference, which are included in the presence information.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the IWF exists to correspond to a type of each messaging service, and the message is included in a Session Initiation Protocol (SIP) MESSAGE during its delivery.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method of <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein when transmitting the message according to the decided type of the messaging service, the CPM server inserts an address of a specific IWF corresponding to the decided type of the messaging service instead of a SIP URI of the recipient, into a Request URI in the SIP MESSAGE, and delivers the message to the specific IWF over a Session Initiation Protocol/Internet Protocol (SIP/IP) core network; and
<claim-text>wherein upon receiving the SIP MESSAGE, the specific IWF converts the SIP MESSAGE into a format of a desired messaging service for interworking, and then delivers the converted message to the recipient based on a To-Header field in the SIP MESSAGE.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The method of <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein when transmitting the message according to the decided type of the messaging service, the CPM server generates a media feature tag corresponding to the decided type of the messaging service, inserts it into the SIP MESSAGE, and delivers the SIP MESSAGE to a specific IWF corresponding to the decided type of the messaging service over a SIP/IP core network; and
<claim-text>wherein upon receiving the SIP MESSAGE, the specific IWF converts the SIP MESSAGE into a format of a desired messaging service for interworking and then delivers the converted message to the recipient.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The method of <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein when transmitting the message according to the decided type of the messaging service, the CPM server directly delivers the message to a specific IWF using an IP address of the specific IWF corresponding to the decided type of the messaging service.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the CPM server delivers an indicator indicating the decided type of the messaging service, to the IWF along with the message.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the CPM server is based on a SIP/IP core network; and
<claim-text>wherein if the decided messaging service is a service based on a SIP/IP core network, the IWF converts only routing information of the message, and if the decided messaging service is a service based on a non-SIP/IP core network, the IWF converts a media format of the message according to the decided messaging service and converts the message according to a transport protocol of the decided messaging service.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. A method for performing interworking between different messaging services in a Converged IP Messaging (CPM) service, comprising:
<claim-text>generating, by an arbitrary terminal, a message based on a user input and transmitting the message to a CPM server;</claim-text>
<claim-text>upon failure to route the message, deciding, by the CPM server, to perform interworking for the message and transmitting the message to an interworking selection server;</claim-text>
<claim-text>requesting, by the interworking selection server, a presence server to provide presence information corresponding to a recipient of the message;</claim-text>
<claim-text>searching, by the presence server, for presence information corresponding to the recipient in response to the request of the interworking selection server, and transmitting the searched presence information to the interworking selection server;</claim-text>
<claim-text>selecting, by the interworking selection server, a type of a messaging service for interworking based on the transmitted presence information, and delivering the message and the selected type of the messaging service to a Interworking Function (IWF); and</claim-text>
<claim-text>receiving, by the IWF, the message, converting the message according to the decided messaging service, and transmitting the converted message to the recipient.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The method of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the presence information comprises a type of a messaging service supportable to a user corresponding to the presence information, a user's interworking grant/non-grant, and a type of a messaging service preferred during interworking.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. A system for performing interworking between different messaging services in a Converged IP Messaging (CPM) service, comprising:
<claim-text>a CPM server device for requesting a presence server to provide presence information corresponding to a recipient of a message upon receiving from an arbitrary terminal the message generated based on a user input, deciding whether to perform interworking for the message based on the presence information upon receiving the present information that is transmitted from the presence server in response to the request, and if the CPM server device decides to perform interworking, based on the presence information, deciding a type of a messaging service for interworking, and delivering the message to an Interworking Function (IWF) according to the decided type of the messaging service; and</claim-text>
<claim-text>the IWF for converting, upon receiving the message, the message according to the decided messaging service, and delivering the converted messaged to the recipient.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The system of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the presence information comprises a type of a messaging service supportable to a user corresponding to the presence information, a grant/non-grant of messaging interworking, a type of a messaging service preferred during interworking, and a priority of a preference.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The system of <claim-ref idref="CLM-00016">claim 16</claim-ref>, wherein the presence information is determined by the user corresponding to the presence information, and registered in the presence server.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The system of <claim-ref idref="CLM-00016">claim 16</claim-ref>, wherein the presence information comprises a message receiving address corresponding to each of the messaging service preferred during interworking.</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The system of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the CPM server device checks the presence information, and delivers the message to the recipient if a CPM service is included in the presence information as a messaging service available by the recipient and interworking-related information for the message is not included or not activated in the presence information.</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The system of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the CPM server device determines to perform interworking for the message if interworking-related information for the message is activated in the presence information, and decides a type of a messaging service for interworking according to a type of a messaging service preferred during interworking and a priority of a preference, which are included in the presence information.</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. The system of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the IWF exists to correspond to a type of each messaging service, and the message is included in a Session Initiation Protocol (SIP) MESSAGE during its delivery.</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. The system of <claim-ref idref="CLM-00021">claim 21</claim-ref>, wherein when transmitting the message according to the decided type of the messaging service, the CPM server device inserts an address of a specific IWF corresponding to the decided type of the messaging service instead of a SIP URI of the recipient, into a Request URI in the SIP MESSAGE, and delivers the message to the specific IWF over a Session Initiation Protocol/Internet Protocol (SIP/IP) core network; and
<claim-text>wherein upon receiving the SIP MESSAGE, the specific IWF converts the SIP MESSAGE into a format of a desired messaging service for interworking, and then delivers the converted message to the recipient based on a To-Header field in the SIP MESSAGE.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00023" num="00023">
<claim-text>23. The system of <claim-ref idref="CLM-00021">claim 21</claim-ref>, wherein when transmitting the message according to the decided type of the messaging service, the CPM server device generates a media feature tag corresponding to the decided type of the messaging service, inserts it into the SIP MESSAGE, and delivers the SIP MESSAGE to a specific IWF corresponding to the decided type of the messaging service over a SIP/IP core network; and
<claim-text>wherein upon receiving the SIP MESSAGE, the specific IWF converts the SIP MESSAGE into a format of a desired messaging service for interworking and then delivers the converted message to the recipient.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00024" num="00024">
<claim-text>24. The system of <claim-ref idref="CLM-00021">claim 21</claim-ref>, wherein when transmitting the message according to the decided type of the messaging service, the CPM server device directly delivers the message to a specific IWF using an IP address of the specific IWF corresponding to the decided type of the messaging service.</claim-text>
</claim>
<claim id="CLM-00025" num="00025">
<claim-text>25. The system of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the CPM server device delivers an indicator indicating the decided type of the messaging service, to the IWF along with the message.</claim-text>
</claim>
<claim id="CLM-00026" num="00026">
<claim-text>26. The system of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the CPM server device is based on a SIP/IP core network; and
<claim-text>wherein if the decided messaging service is a service based on a SIP/IP core network, the IWF converts only routing information of the message, and if the decided messaging service is a service based on a non-SIP/IP core network, the IWF converts a media format of the message according to the decided messaging service and converts the message according to a transport protocol of the decided messaging service.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00027" num="00027">
<claim-text>27. A system for performing interworking between different messaging services in a Converged IP Messaging (CPM) service, comprising:
<claim-text>an arbitrary terminal for generating a message based on a user input and transmitting the message to a CPM server;</claim-text>
<claim-text>the CPM server for receiving the message, and upon failure to route the message, deciding to perform interworking for the message and transmitting the message to an interworking selection server;</claim-text>
<claim-text>the interworking selection server for requesting a presence server to provide presence information corresponding to a recipient of the message, selecting a type of a messaging service for interworking based on the presence information that is received from the presence server in response to the request, and then delivering the message and the selected type of the messaging service to a Interworking Function (IWF); and</claim-text>
<claim-text>the IWF for receiving the message, converting the message according to the decided messaging service, and transmitting the converted message to the recipient.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00028" num="00028">
<claim-text>28. The system of <claim-ref idref="CLM-00027">claim 27</claim-ref>, wherein the presence information comprises a type of a messaging service supportable to a user corresponding to the presence information, a user's interworking grant/non-grant, and a type of a messaging service preferred during interworking. </claim-text>
</claim>
</claims>
</us-patent-grant>
