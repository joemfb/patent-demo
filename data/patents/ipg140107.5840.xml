<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08626948-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08626948</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12953147</doc-number>
<date>20101123</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<us-term-of-grant>
<us-term-extension>18</us-term-extension>
<disclaimer>
<text>This patent is subject to a terminal disclaimer.</text>
</disclaimer>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>15</main-group>
<subgroup>16</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>709241</main-classification>
<further-classification>370238</further-classification>
<further-classification>370392</further-classification>
<further-classification>370394</further-classification>
</classification-national>
<invention-title id="d2e55">Systems and methods for network routing</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>8184632</doc-number>
<kind>B1</kind>
<name>Hui et al.</name>
<date>20120500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370392</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>2003/0033394</doc-number>
<kind>A1</kind>
<name>Stine</name>
<date>20030200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709222</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2005/0249215</doc-number>
<kind>A1</kind>
<name>Kelsey et al.</name>
<date>20051100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370392</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2006/0268879</doc-number>
<kind>A1</kind>
<name>Xhafa et al.</name>
<date>20061100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370392</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2007/0280192</doc-number>
<kind>A1</kind>
<name>Yagyu et al.</name>
<date>20071200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370349</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2008/0049622</doc-number>
<kind>A1</kind>
<name>Previdi et al.</name>
<date>20080200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370237</main-classification></classification-national>
</us-citation>
</us-references-cited>
<number-of-claims>4</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>370238</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370392</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370394</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709241</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>3</number-of-drawing-sheets>
<number-of-figures>5</number-of-figures>
</figures>
<us-related-documents>
<continuation>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>12217016</doc-number>
<date>20080630</date>
</document-id>
<parent-grant-document>
<document-id>
<country>US</country>
<doc-number>7839791</doc-number>
<date>20101123</date>
</document-id>
</parent-grant-document>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>12953147</doc-number>
</document-id>
</child-doc>
</relation>
</continuation>
<us-provisional-application>
<document-id>
<country>US</country>
<doc-number>60937744</doc-number>
<date>20070629</date>
</document-id>
</us-provisional-application>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20110072156</doc-number>
<kind>A1</kind>
<date>20110324</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Holmer</last-name>
<first-name>David G.</first-name>
<address>
<city>New York</city>
<state>NY</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Rubens</last-name>
<first-name>Herbert B.</first-name>
<address>
<city>New York</city>
<state>NY</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Holmer</last-name>
<first-name>David G.</first-name>
<address>
<city>New York</city>
<state>NY</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Rubens</last-name>
<first-name>Herbert B.</first-name>
<address>
<city>New York</city>
<state>NY</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Scully, Scott, Murphy &#x26; Presser PC</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<examiners>
<primary-examiner>
<last-name>Phan</last-name>
<first-name>Man</first-name>
<department>2475</department>
</primary-examiner>
<assistant-examiner>
<last-name>Ambaye</last-name>
<first-name>Mewale</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">Systems and methods are provided for routing data through a network. In one system, a first node is enabled to overhear packet transmissions from a second node. The cost of transmitting packets from the first node to the second node is updated based on each overheard packet transmission. In another system, when the cost of transmitting packets from a source to an overhearing node to a destination is less than the cost of transmitting packets from the source to the destination, an advertisement is sent to the source causing the packet transmissions to be routed from the source to the destination through the overhearing node. In yet another system, using a safe-sequence tag that is attached to any packet transmitted by any node and updated when it is received by another node, along with stored histories of best metric advertisements, predetermined rules are applied to maintain loop freedom.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="129.20mm" wi="228.94mm" file="US08626948-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="201.42mm" wi="153.42mm" file="US08626948-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="230.63mm" wi="131.49mm" orientation="landscape" file="US08626948-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="219.79mm" wi="144.61mm" file="US08626948-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">CROSS REFERENCE TO RELATED APPLICATION</heading>
<p id="p-0002" num="0001">This application is a continuation of U.S application Ser. No. 12/217,016 filed on Jun. 30 2008, now U.S. Pat. No. 7,839,791 issued on Nov. 23, 2010, which claims priority to United States provisional patent application No. 60/937,744, filed on Jun. 29, 2007, each of which is incorporated herein by reference in its entirety.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">FIELD OF THE INVENTION</heading>
<p id="p-0003" num="0002">This invention relates generally to routing data, and more particularly to protocolsfor routing data in ad hoc computer networks.</p>
<heading id="h-0003" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0004" num="0003">Networks are used to connect multiple devices, such as computers. A Mobile Ad hoc Network or MANET consists of two or more potentially mobile devices, often referred to as &#x201c;nodes,&#x201d; that form a self-organizing network. Data is usually broken into &#x201c;packets&#x201d; that are sent from one device to another. The devices communicate wirelessly by relaying or forwarding data across the network through a sequence of wireless packet transmissions, hopping from one node to another. A sequence of transmissions that enables data from a given source to reach a specific destination is referred to as a route. One route might involve only two nodes: the source and destination. Another route might involve three nodes: the source node, a neighboring node in range of the source, and the destination node. Other routes might include several, or dozens, or even more neighboring or intermediate nodes between the source and the destination. A MANET uses a routing protocol to determine the route between sources and destinations.</p>
<p id="p-0005" num="0004">In a MANET the devices may join and leave the network at any time. The dynamic nature of the network requires a routing protocol that can handle such frequent topological changes. The two primary categories of routing protocols used in MANET's are proactive and reactive. Proactive routing protocols actively track routes between all nodes in the network regardless of whether or not the nodes are actively sending or receiving data packets. Reactive protocols setup routes on-demand when a source has data that needs to be delivered to a specific destination. Despite their differences in approach, both techniques generally select a single route on which data is forwarded from a given source to a destination. The selection of a single route is generally determined by a number of factors, including hop count, signal-to-noise ratio, delay, data-link rates, and reliability. These factors can be used to establish a link metric that the routing protocol accumulates in order to determine a preferred communication route from a source to a destination.</p>
<p id="p-0006" num="0005">Another significant challenge to MANET routing protocols is that the quality of the wireless links in the network continuously changes. Changes occur due to the mobility of nodes and changes in the environment that result in channel fading and fluctuating link characteristics. As the link characteristics continuously change, the link metrics change. If changing link metrics between a source and a destination favor changing routes, and if the protocol is aware of the changed link metrics, then the protocol will change the route from the one currently selected to one with better link metrics. A routing protocol that is able more accurately and quickly to adapt to the continuously changing channel conditions is able to achieve higher performance and improved overall network efficiency.</p>
<p id="p-0007" num="0006">MANET routing protocols typically use control packets&#x2014;that travel along with or separate from the data packets&#x2014;to exchange information that is used to select and establish routes. The control packets generally contain a metric that represents either the cost of a link or the accumulated cost of a path. They also generally contain a sequence number that enables the protocol to determine a temporal ordering of the information. The routing protocol processes a sequence of asynchronous information, meaning that topology updates will not necessarily be received by neighboring nodes in any particular order. In addition, the wireless medium is susceptible to packet loss resulting in transmissions that are not received. The asynchronous lossy environment in which MANET routing protocols operate can result in a protocol learning information about routes with an inferior routing metrics before they eventually learn of routes with better routing metrics.</p>
<p id="p-0008" num="0007">In a routing protocol, nodes typically establish and maintain routes to destinations by the use of routing &#x201c;advertisements&#x201d; in control packets. The specific contents that comprise a route advertisement vary depending on the routing protocol, but generally receiving an advertisement updates a node's knowledge of its available forwarding options. A node's forwarding options for a particular destination consist of the set of possible next hops (neighboring nodes) and a metric for each of these options. In a number of known routing protocols, a node must make an advertisement based on the information it received so that the link metrics about a route will propagate through all the nodes in the network.</p>
<p id="p-0009" num="0008">Once a node has selected a next hop, and made an advertisement under a given sequence number, it is generally restricted on changing it's next hop selection, since other nodes may have already made next hop selections and advertisements that were based on the node's previous advertisement. The hop-by-hop metric-accumulation process often used by MANET routing protocols creates a transitive dependency on the information shared between nodes. If nodes in the network changed their advertisements (within the context of a single sequence number) &#x201c;routing loops&#x201d; could occur in the network.</p>
<p id="p-0010" num="0009">A routing loop exists when routing-state information creates an endless cycle. When packets are routed in a loop, they do not reach their intended destination and instead are fruitlessly retransmitted, consuming shared resources (e.g., the wireless-medium time). In most existing routing protocols, loops occur because of delays in disseminating updated topology information. Some ways are known for designing routing protocols that never create routing loops. These protocols may be described as &#x201c;instantaneously loop free.&#x201d;</p>
<p id="p-0011" num="0010">In order to make sure that the routing protocol makes decisions based on all the available information, time delays or settling times are typically employed. These delays are designed to allow a node to wait long enough that there is confidence that it will not hear any newer information (for a given route and sequence number tuple) before it commits to making an advertisement using that sequence number. These time delays accumulate (as routing updates propagate), resulting in significant delays in a node's ability to receive updated topological information.</p>
<p id="p-0012" num="0011">In an attempt to minimize the undesirable delay in information propagation, some known protocols use adaptive-delay mechanisms, in which the nodes compute the average difference in time from the first received advertisement for a given sequence number until the best received advertisement under the same sequence number. But some delay still exists in these protocols.</p>
<p id="p-0013" num="0012">It would be desirable to have systems and methods that implement routing protocols that allow the information to propagate instantly, and that are instantaneously loop free.</p>
<heading id="h-0004" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0014" num="0013">Systems and methods for network routing are provided. In one embodiment of the invention, a method for routing data through a network of two or more nodes includes enabling a first node to overhear packet transmissions from a second node; determining a cost of transmitting packets from the first node to the second node; storing state information regarding each overheard packet transmission; and updating as necessary the cost of transmitting packets from the first node to the second node based on each overheard packet transmission.</p>
<p id="p-0015" num="0014">In another embodiment, the method also includes determining a route from the first node to a third node based on the cost of transmitting packets from the first node to the second node.</p>
<p id="p-0016" num="0015">In yet another embodiment of the method, the cost of transmitting packets from the first-node to the second node is based at least in part on modulation reception statistics.</p>
<p id="p-0017" num="0016">In yet another embodiment, a method for routing data through a network of three or more nodes includes enabling an overhearing node to overhear packet transmissions from a source node to a destination node; determining a cost of transmitting packets from the source node to the destination node; determining a cost of transmitting packets from the source node to the overhearing node to the destination node; and storing state information regarding each overheard packet transmission. The method also includes updating as necessary the cost of transmitting packets from the source node to the destination node, and the cost of transmitting packets from the source node to the overhearing node to the destination node, based on each overheard packet transmission. When the cost of transmitting packets from the source node to the overhearing node to the destination node is less than the cost of transmitting packets from the source node to the destination node, sending an advertisement to the source node causing the packet transmissions to be routed from the source node to the destination node through the overhearing node.</p>
<p id="p-0018" num="0017">In yet another embodiment, a method for routing data through a network of three or more nodes includes, for a first route from a source node to a destination, generating one or more advertisements with increasing sequence numbers, and for a second route from the source node to the destination node through an intermediate node, generating one or more advertisements with increasing sequence numbers. The method also involves including as metrics in each advertisement a current cost estimate for reaching the destination node and a minimum cost estimate for reaching the destination node advertised for the sequence number, and including a safe-sequence tag with any packet transmitted by any node. The method further updates each safe-sequence tag when it is received by another node; stores in the source node a first history of best metrics for the first route; stores in the source node a second history of best metrics for the second route; and stores in the source node a third history of advertisements made by the source node. The method also applies predetermined rules to the minimum cost estimates in the first, second, and third histories to maintain loop freedom.</p>
<p id="p-0019" num="0018">In yet another embodiment, the method further includes storing in each node in the network a plurality of histories of best metrics, each history corresponding to one of a plurality of routes to a plurality of destination nodes and one of one or more next-hop nodes to each destination node.</p>
<p id="p-0020" num="0019">In yet another embodiment, a computer network includes two or more nodes, each comprising a computer processor and data storage; means for processing data regarding enabling a first node to overhear packet transmissions from a second node; means for processing data regarding determining a cost of transmitting packets from the first node to the second node; means for processing data regarding storing state information regarding each overheard packet transmission; and means for processing data regarding updating as necessary the cost of transmitting packets from the first node to the second node based on each overheard packet transmission.</p>
<p id="p-0021" num="0020">In yet another embodiment, the computer network also includes means for processing data regarding determining a route from the first node to a third node based on the cost of transmitting packets from the first node to the second node.</p>
<p id="p-0022" num="0021">In yet another embodiment of the computer network, the cost of transmitting packets from the first node to the second node is based at least in part on modulation reception statistics.</p>
<p id="p-0023" num="0022">In yet another embodiment, a computer network includes three or more nodes, each comprising a computer processor and data storage; means for processing data regarding enabling an overhearing node to overhear packet transmissions from a source node to a destination node; means for processing data regarding determining a cost of transmitting packets from the source node to the destination node; means for processing data regarding determining a cost of transmitting packets from the source node to the overhearing node to the destination node; means for processing data regarding storing state information regarding each overheard packet transmission. The network also includes means for processing data regarding updating as necessary the cost of transmitting packets from the source node to the destination node, and the cost of transmitting packets from the source node to the overhearing node to the destination node, based on each overheard packet transmission. When the cost of transmitting packets from the source node to the overhearing node to the destination node is less than the cost of transmitting packets from the source node to the destination node, means for processing data regarding sending an advertisement to the source node causing the packet transmissions to be routed from the source node to the destination node through the overhearing node.</p>
<p id="p-0024" num="0023">In yet another embodiment, a computer network includes, for a first route from a source node to a destination, means for processing data regarding generating one or more advertisements with increasing sequence numbers and for a second route from the source node to the destination node through an intermediate node, means for processing data regarding generating one or more advertisements with increasing sequence numbers. The network also includes means for processing data regarding including as metrics in each advertisement a current cost estimate for reaching the destination node and a minimum cost estimate for reaching the destination node advertised for the sequence number, and means for processing data regarding including a safe-sequence tag with any packet transmitted by any node. The network also includes means for processing data regarding updating each safe-sequence tag when it is received by another node; means for storing in the source node a first history of best metrics for the first route; means for storing in the source node a second history of best metrics for the second route; and means for storing in the source node a third history of advertisements made by the source node. The network also includes means for processing data regarding applying predetermined rules to the minimum cost estimates in the first, second, and third histories to maintain loop freedom.</p>
<p id="p-0025" num="0024">In yet another embodiment, the computer network also includes means for storing in each node in the network a plurality of histories of best metrics, each history corresponding to one of a plurality of routes to a plurality of destination nodes and one of one or more next-hop nodes to each destination node.</p>
<p id="p-0026" num="0025">In yet other embodiments, a medium storing instructions adapted to be executed by a computer processor to perform methods for routing data according to the invention.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 1</figref> is a schematic representation of an information packet used in certain embodiments of the invention.</p>
<p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. 2</figref> is a schematic representation of a multi-node network in accordance with certain embodiments of the invention.</p>
<p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. 3</figref> is a schematic representation of another multi-node network in accordance with certain embodiments of the invention.</p>
<p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. 4A</figref> is a schematic representation of another multi-node network in accordance with certain embodiments of the invention, in which there is route is from node A to node D.</p>
<p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. 4B</figref> is a schematic representation of the multi-node network of <figref idref="DRAWINGS">FIG. 4A</figref>, in which there is route is from node A to node B to node D.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0006" level="1">DETAILED DESCRIPTION OF PREFERRED EMBODIMENTS</heading>
<p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. 1</figref> depicts an information packet <b>100</b>, and <figref idref="DRAWINGS">FIG. 2</figref> depicts a wireless network including source node <b>202</b> and destination node <b>204</b>. When data is to be sent from source node <b>202</b> to destination node <b>204</b>, the data is divided into one or more data packets <b>102</b>. One information packet <b>100</b> is formed by adding routing information in a routing header <b>104</b> to a data packet <b>102</b>. This is done for as many data packets as needed. Optionally, as will be described for other embodiments of the invention, modulation statistics <b>106</b> may be added to information packet <b>100</b>.</p>
<p id="p-0033" num="0032">In the network of <figref idref="DRAWINGS">FIG. 2</figref>, while information packets <b>100</b> are transmitted from source node <b>202</b> to destination node <b>204</b>, overhearing node <b>206</b> &#x201c;overhears&#x201d; transmissions from nodes <b>202</b> and <b>204</b>. Preferably, each node in the network can overhear the transmissions of every other node in the network that is within its range. One way to accomplish this is to equip each node with a wireless radio chipset from Atheros Communications, Inc. that may be put into &#x201c;promiscuous&#x201d; mode, such that each node receives and processes all transmissions that it is able to receive, not just packets specifically addressed to it.</p>
<p id="p-0034" num="0033">In the example of <figref idref="DRAWINGS">FIG. 2</figref>, each information packet <b>100</b> includes data packet <b>102</b> and, in routing header <b>104</b>, node transmission data concerning transmissions made by the node transmitting the information packet. For example, each information packet <b>100</b> transmitted by node <b>202</b> includes node transmission data concerning transmissions made by node <b>202</b>, and each information packet <b>100</b> transmitted by node <b>204</b> includes node transmission data concerning transmissions made by node <b>204</b>.</p>
<p id="p-0035" num="0034">Wireless radios are typically able to transmit data using a variety of modulation schemes (e.g., BPSK, QAM, ODFM), error-correcting codes (e.g., &#xbd;-convolution encoding), or other settings (e.g., bandwidth, symbol duration, preamble type, guard interval length). Each setting combination usually, but not necessarily, results in different effective user data bit rates, so each setting combination may be referred to as a &#x201c;rate.&#x201d; Many wireless radio devices are capable of dynamically selecting from a set of multiple supported rates when transmitting a packet. Typically the purpose for supporting multiple rates is because different rates will work better under different channel conditions.</p>
<p id="p-0036" num="0035">In <figref idref="DRAWINGS">FIG. 2</figref>, when a node in the network transmits a wireless signal, any node which is &#x201c;in range&#x201d; can potentially receive the transmission. This is true regardless of whether an omni-directional, directional, or a beam-forming antenna or array of antennas is utilized. Consider a radio with a set of rates with increasing levels of error correcting codes. As the level of error correction increases, in theory, the set of possible receivers also increases, the probability of each receiver successfully receiving the packet increases, but the amount of medium time required to transmit the packet also increases. This increase in medium-time consumption means that efficiency is decreasing as error correction is increasing (if the same transmission could have been received successfully with less error correction).</p>
<p id="p-0037" num="0036">One technique in accordance with the invention to select the most efficient rate is for the node transmission data included in each information packet <b>100</b> to contain information encoding how many transmissions the transmitting node has made at each rate. One form of this would be a list of counters for the number of packets sent at each rate.</p>
<p id="p-0038" num="0037">By overhearing packets that contain these counters, and maintaining state information, neighboring nodes in the network can determine the exact loss rates at which they are receiving information from a given node at each individual rate. For example, in <figref idref="DRAWINGS">FIG. 2</figref>, consider that nodes <b>202</b> and <b>204</b> are in range of each other and actively communicating. A third node, overhearing node <b>206</b>, is in range of both nodes <b>202</b> and <b>204</b> and is able to overhear many or all of their transmissions. By observing the transmissions, overhearing node <b>206</b> is able to actively track its ability to receive successfully from nodes <b>202</b> and <b>204</b> at each rate. In addition, this capability allows overhearing node <b>206</b> to gather information about rates that it is unable to receive successfully by looking at the counters on packets that it did receive successfully. Since each packet contains the number of packets that the transmitting node transmitted at each rate, when a packet is successfully received, statistics on all of the rates can be updated.</p>
<p id="p-0039" num="0038">Because node <b>206</b> is just a passive listener there is no network overhead for observing this information, meaning that node <b>206</b> does not consume any of the shared wireless medium resources while gathering this information. Only local processing and memory resources at node <b>206</b> are being consumed by overhearing packets and storing state information. If nodes <b>202</b> and <b>204</b> needed to communicate with node <b>206</b> (or through node <b>206</b>) the information that node <b>206</b> maintains can be used to enable nodes <b>202</b> and <b>204</b> to immediately know the current best rate.</p>
<p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. 3</figref> depicts a wireless network including source node <b>302</b>, neighbor node <b>304</b>, and destination nodes <b>306</b>, <b>308</b>, <b>310</b>, <b>312</b>, and <b>314</b>. The quality of transmissions between source node <b>302</b> and neighbor node <b>304</b> is measured by a link cost. Consider the decomposition of a route into a forwarding cost advertised by neighbor node <b>304</b> and link-cost estimate of source node <b>302</b> to that neighbor node <b>304</b>. By overhearing the transmissions of neighbor node <b>304</b>, source node <b>302</b> is able to determine its ability to receive packets from neighbor node <b>304</b>. If the packets are all sequenced, source node <b>302</b> can determine the exact loss rates with respect to its ability to receive successfully transmissions from that neighbor node <b>304</b>. These loss rates allow source node <b>302</b> to adjust its estimated cost of the link to neighbor <b>304</b>. Since the link cost is part of the route cost of any route through neighbor node <b>304</b> (based on the above route cost decomposition), the source node's cost of all routes through the neighbor node are able to be updated each time that source node <b>302</b> overhears a packet transmitted by neighbor node <b>304</b>, irrespective of which destination node that the source node is transmitting to, and irrespective of the source or destination of the packet being forwarded.</p>
<p id="p-0041" num="0040">A temporal decay function may also be used to decay the link-cost metrics when information is not heard from a neighbor such as neighbor node <b>304</b>. Typically routing protocols use timeouts to remove stale information from the routing table. A temporal decay function enables more fine-grained information decay and allows the protocol to make decisions based on the absence of updated information before waiting for a timeout to occur. The result of these methods is that at each packet reception and at each time step, the link metric to all of a node's neighbors can change. When neighbor link metrics change, the costs of all the routes through the neighbor also change. This allows nodes to continuously adjust their preferred routes to known destinations. Through a recursive step, all the nodes in the network can continuously adjust their routing pointers based on either new information that they overheard or based on the fact that they did not overhear any updated information.</p>
<p id="p-0042" num="0041">Optionally, the overheard information can be used for performing a distributed receiver aided auto-rate selection technique. Auto-rate selection is traditionally performed by the sender, and typically is performed using only packet acknowledgment (or lack of acknowledgment) feedback from the receiver. Using the traditional mechanism, if a sender has not transmitted any packets to a particular neighbor in the recent past, it has no knowledge of which rate would be the most efficient. In an embodiment of the invention, by tracking the modulation reception statistics for all neighboring nodes, the sender's auto-rate selection can be enhanced. First, the sender has detailed information on which rates work well from the receiver to the sender to use as a starting point for selecting its own transmission rate. Also, the intended receiver has detailed overheard statistics of which rates work well from the sender to the receiver. This information is present even if the sender was not previously sending explicitly to the receiver. This information may be explicitly fed back from the receiver to the sender in order to aid the sender's auto-rate selection. Table 1 provides an example of modulation reception statistics tracked by overhearing:</p>
<p id="p-0043" num="0042">
<tables id="TABLE-US-00001" num="00001">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="1" colwidth="42pt" align="left"/>
<colspec colname="2" colwidth="175pt" align="center"/>
<thead>
<row>
<entry namest="1" nameend="2" rowsep="1">TABLE 1</entry>
</row>
</thead>
<tbody valign="top">
<row>
<entry namest="1" nameend="2" align="center" rowsep="1"/>
</row>
<row>
<entry/>
<entry>Modulation (Bit Rate)</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="9">
<colspec colname="1" colwidth="42pt" align="left"/>
<colspec colname="2" colwidth="21pt" align="center"/>
<colspec colname="3" colwidth="21pt" align="center"/>
<colspec colname="4" colwidth="21pt" align="center"/>
<colspec colname="5" colwidth="21pt" align="center"/>
<colspec colname="6" colwidth="21pt" align="center"/>
<colspec colname="7" colwidth="21pt" align="center"/>
<colspec colname="8" colwidth="21pt" align="center"/>
<colspec colname="9" colwidth="28pt" align="center"/>
<tbody valign="top">
<row>
<entry/>
<entry/>
<entry/>
<entry/>
<entry/>
<entry/>
<entry/>
<entry/>
<entry>128</entry>
</row>
<row>
<entry/>
<entry>1</entry>
<entry>2</entry>
<entry>4</entry>
<entry>8</entry>
<entry>16</entry>
<entry>32</entry>
<entry>64</entry>
<entry>Mbps</entry>
</row>
<row>
<entry namest="1" nameend="9" align="center" rowsep="1"/>
</row>
<row>
<entry>Source</entry>
<entry>99%</entry>
<entry>98%</entry>
<entry>94%</entry>
<entry>85%</entry>
<entry>80%</entry>
<entry>70%</entry>
<entry>40%</entry>
<entry>10%</entry>
</row>
<row>
<entry>Destination</entry>
<entry>96%</entry>
<entry>92%</entry>
<entry>86%</entry>
<entry>75%</entry>
<entry>60%</entry>
<entry>30%</entry>
<entry>10%</entry>
<entry>&#x2002;0%</entry>
</row>
<row>
<entry namest="1" nameend="9" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0044" num="0043">Such modulation reception statistics can be included in modulation statistics <b>106</b> in information packet <b>100</b>.</p>
<p id="p-0045" num="0044">In known routing protocols, when one node receives an advertisement from another node, the first node updates stored information used to make better forwarding decisions for packets that it will transmit. In another embodiment of the invention, the first node further processes the updated information to see if it can improve the forwarding decisions of neighboring nodes. If the node finds that it can improve the forwarding decision of a neighbor, then it triggers a local routing advertisement in order to send its neighbor the routing information necessary for it to use that improved route. For a routing protocol in accordance with this embodiment, a node must remember for each of its neighbors the metric for reaching a destination.</p>
<p id="p-0046" num="0045">In this embodiment, a routing advertisement preferably contains a metric representing the advertising node's cost of reaching a destination. A route advertisement may be transmitted in a routing-protocol-specific control packet or inserted into routing header <b>104</b> of information packet <b>100</b>. If route advertisements are inserted into routing headers, then every packet transmitted by a node would provide an updated route to that destination. This capability enables updated routing information to propagate at the speed of the data flow, which may be much faster than the speed of the control-packet updates.</p>
<p id="p-0047" num="0046">When a node overhears packets flowing from a source to a destination, it continuously updates its route towards the source and destination. Preferably, each packet contains an updated routing metric allowing the overhearing node to receive an updated route metric towards the source/destination at the speed at which the data is flowing.</p>
<p id="p-0048" num="0047">Optionally, by tracking overhearing ability information, which measures a node's ability to overhear transmitted packets, the node is able to establish extremely accurate link metrics to its neighbors that are forwarding packets. Examples of such overhearing ability information include loss rates with respect to overhearing, the signal strength or signal-to-noise ratio of the overheard packets, the node's ability to overhear transmissions at different modulation rates, and any combination of these. Those skilled in the art will recognize other factors that may be used.</p>
<p id="p-0049" num="0048">For example, consider the network of <figref idref="DRAWINGS">FIG. 2</figref>, in which nodes <b>202</b> and <b>204</b> are in range of each other and actively communicating. Node <b>206</b> is in range of both nodes <b>202</b> and <b>204</b> and is able to overhear all or many of their transmissions. The link-metric information that node <b>206</b> maintains can be used to determine whether nodes <b>202</b> and <b>204</b> might communicate more efficiently by forwarding or relaying data traffic through node <b>206</b> as opposed to communicating over their existing communication route (either a direct link as shown in <figref idref="DRAWINGS">FIG. 2</figref>, or through other intermediate nodes not shown). By actively listening to the transmissions between nodes <b>202</b> and <b>204</b>, node <b>206</b> can observe the cost of their route and can determine if the node <b>202</b>&#x2192;node <b>206</b>&#x2192;node <b>204</b> route would be more efficient then the existing node <b>202</b>&#x2192;node <b>204</b> route. If node <b>206</b> determines that it can increase the efficiency of the route, node <b>206</b> makes a local advertisement that informs nodes <b>202</b> and <b>204</b> of the available route though node <b>206</b>, which may cause nodes <b>202</b> and <b>204</b> to change their forwarding next hop. This local advertisement need only be received by nodes <b>202</b> and <b>204</b> and need not be propagated through the entire network (although it could if desired). By adapting the route using only local coordination, the routing protocol can achieve increased scalability.</p>
<p id="p-0050" num="0049">Preferably, every node that is in communication range of an active data flow (e.g., packet transmissions) continuously monitors link metrics and route metrics and continuously evaluates whether a route that the monitoring node could provide would result in a lower-cost route for the source/destination. Substantially instantaneous with the overhearing node receiving a packet and determining that it is capable of improving an active route, the overhearing node sends out a local routing advertisement that provides this updated routing information to nodes within its communication range. Essentially, every node in the network continuously monitors routing data that it overhears on packets or routing updates, and the network as a whole continuously attempts to make local routing adjustments to improve communications by shifting active data flows to route with better metrics.</p>
<p id="p-0051" num="0050">In yet another embodiment of the invention, advertisements are communicated using a specific set of rules to ensure that the routing protocol is instantaneously loop free. In this embodiment each routing advertisement for an intermediate node contains the following:
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0000">
    <ul id="ul0002" list-style="none">
        <li id="ul0002-0001" num="0051">a metric representing the intermediate node's cost of reaching the destination;</li>
        <li id="ul0002-0002" num="0052">a sequence number, incremented by the destination; and</li>
        <li id="ul0002-0003" num="0053">a minimum-cost (or best metric) field that represents the minimum metric of all advertisements under that specific sequence number.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0052" num="0054">When a node makes a routing advertisement for the first time under a new destination sequence number, the advertisement contains the sequence number, its current cost estimate of reaching the destination, and the minimum cost that it has ever advertised under the current sequence number. When a router first advertises a new sequence number, the current cost and the minimum cost are always the same. When a node makes subsequent advertisements using the same sequence number, it sets its minimum cost to the minimum of the current cost and the existing minimum cost. The minimum cost must be strictly decreasing within the context of a single destination-sequence number.</p>
<p id="p-0053" num="0055">When nodes receive route advertisements from their neighbors, they need to determine whether they can safely reach the destination through that neighbor without the possibility of creating a cycle in the network. By utilizing a set of specific rules to make this decision, the dynamic routing protocol is able to remain instantaneously loop free. As used here, &#x201c;instantaneous loop freedom&#x201d; is defined as existing if, at any particular moment, the state of the network is such that, tracing the path that packets would take through the network by inspecting route tables, the routes from each node to each destination terminate either at the destination or at a node with no further forwarding route (dropped packet). In other words, for instantaneous loop freedom to exist, tracing the time-frozen forwarding entries of a set of nodes must not result in an infinite cycle of repeated traversals.</p>
<p id="p-0054" num="0056">In this embodiment, sequence numbers are used to deal with changing network link costs. A destination node generates conventional distance-vector advertisements with increasing sequence numbers. Each sequence number can be thought of as constructing an independent routing tree rooted at the destination node. For each sequence there is a strictly decreasing (over time) minimum-cost metric. Since nodes select only next hops that have a lower minimum-cost metric than they do, they can never select a node that has selected them. The result is that each sequence tree is loop free.</p>
<p id="p-0055" num="0057">The normal rules of previously known distance-vector protocols ensure that packets will cross over only from an older tree to a newer tree, because each node may not select a next hop with an older sequence number once it has made an advertisement with a newer sequence number. In a protocol according to this embodiment of the invention, this strict ordering is not required. Instead, a less-restrictive version of this ordering is still held for the packets themselves. Each packet carries on it a &#x201c;safe sequence&#x201d; tag, which represents the oldest sequence tree to which it is safe to forward the packet. A sequence for a next hop is considered safe if the minimum advertised by the next hop is less than the minimum advertised by the current node. This rule ensures that the next hop's route for that sequence cannot eventually be through the current node.</p>
<p id="p-0056" num="0058">When forwarding to a next hop, a node must move the packet safe-sequence tag up to at least the &#x201c;oldest&#x201d; of the continuous known safe sequences for that next hop. Thus if the topology has been stable for a period of time, this &#x201c;oldest&#x201d; safe tag will be a significantly earlier sequence number than the most recent sequence number generated by the destination. Nodes may remember the safety of a window of sequence numbers in the past in order to have the information necessary to route on older paths.</p>
<p id="p-0057" num="0059">In order to recall the safety history for forwarding through a neighbor, each node must store the best metric advertisement it has made for any recent sequence number. Recent sequence number may be limited, such as a fixed window of size N sequence numbers or every sequence number within an elapsed time. In addition, a node must store the best metric advertisements made by that neighbor for any recent sequence number. If a node has not made an advertisement for a sequence, this guarantees that this sequence number is safe. If a node has made an advertisement for a sequence, but has not heard an advertisement for that sequence from its neighbor, this forms the &#x201c;risk&#x201d; condition.</p>
<p id="p-0058" num="0060">In preferred embodiments, a node may forward through a neighbor if the most-recent sequences heard are a run of one or more safe sequences, possibly followed by some number of risk sequences. The oldest sequence number in a continuous run of safe sequences (possibly followed by risk sequences) is the minimum safe sequence number. The tag on a packet forwarded through this neighbor must be updated so that it is at least as recent as this value. If it is already more recent, then no change is required. It the packet is new (e.g., entering the network at this node), then the tag should be initialized to this value. A node must not forward through a neighbor with a recent unsafe sequence (possibly followed by risk sequences).</p>
<p id="p-0059" num="0061">If a node receives a packet from a neighbor with sequence tag X, then that neighbor must consider X the beginning of a run of safe sequences. As a result, if the node receiving the packet has that neighbor sequence marked as a risk, then that node must change the mark for that sequence from risk to unsafe. This ensures that runs of safe followed by one or more risks are quickly invalidated in the event of an actual reversal in flow.</p>
<p id="p-0060" num="0062">This means that a node's routing tables at any given instant may be setup such that a packet will indeed return to a node that it had been to earlier, but that the sequence tag of the packet will not be the same on the second visit, ensuring the packet will not traverse the same &#x201c;loop&#x201d; again. As a result, though a packet might be detoured, no actual routing loop is formed. All the forwarding tables (combined with the packet tag) lead to the final destination or dead end with the packet dropped.</p>
<p id="p-0061" num="0063">Optionally, data may be kept in a data structure that keeps track of the best current next hop for each sequence number between the overall best cost next hop's sequence and the most-recently heard sequence. This data structure effectively serves the same purpose as a forwarding table, but it has the additional dimension of sequence number in addition to destination. Like a forwarding table, this data structure would be populated with the preselected best current routes so that the entire routing table would not need to be scanned as packets came in and needed to be routed. The data structure preferably contains, for each destination, the sequence number of the overall best route, the maximum sequence number for any known safe route, and a list of the best route for each sequence number in the range from best to max (inclusive). Each member of this list should be the best route currently known with a sequence number of that entry position or higher. Thus a route may be listed more than once. For example, a list in the form &#x201c;required sequence=(route sequence, route cost),&#x201d; with best sequence 5 and max sequence 8, might appear as follows: 5=(5, 10), 6=(7, 12), 7=(7, 12), 8=(8, 15).</p>
<p id="p-0062" num="0064">Only one operation can make a previously safe next hop unsafe: making a route advertisement with a best metric value better than the next hop's best metric. Packets should not be routed through next hops that are unsafe. A node's current best next hop will not be invalided in this way, because a node's best metric cannot be better than its best-next-hop metric. But it is preferable to use current best-cost routing information when considering the safety of alternate next hops (ones with worse metrics). This may entail updating data structures of routes as advertisements are made.</p>
<p id="p-0063" num="0065">A routing protocol in accordance with this embodiment of the invention is allowed to select next hops of better metric even if they are under older sequence numbers. This is especially useful in the case where routing advertisement delays through different prospective routes may be quite different. For example, sequence numbers along the active packet flow may be quite rapid, but alternative paths nearby but not on the data flow might have nontrivial delays. If the costs of these alternative routes become better than the primary route, the protocol would allow a safe switch to the better cost despite the information delay. This allows greater routing flexibility and improved performance under changing costs.</p>
<p id="p-0064" num="0066">An example of the operation of this embodiment is depicted in <figref idref="DRAWINGS">FIGS. 4A and 4B</figref>. Routing entries for the initial condition in <figref idref="DRAWINGS">FIG. 4A</figref> are provided in Table 2:</p>
<p id="p-0065" num="0067">
<tables id="TABLE-US-00002" num="00002">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="6">
<colspec colname="1" colwidth="28pt" align="center"/>
<colspec colname="2" colwidth="28pt" align="center"/>
<colspec colname="3" colwidth="28pt" align="center"/>
<colspec colname="4" colwidth="28pt" align="center"/>
<colspec colname="5" colwidth="35pt" align="center"/>
<colspec colname="6" colwidth="70pt" align="left"/>
<thead>
<row>
<entry namest="1" nameend="6" rowsep="1">TABLE 2</entry>
</row>
<row>
<entry namest="1" nameend="6" align="center" rowsep="1"/>
</row>
<row>
<entry/>
<entry/>
<entry>Next</entry>
<entry>Link</entry>
<entry>Adv</entry>
<entry>Best History</entry>
</row>
<row>
<entry>Node</entry>
<entry>Dest</entry>
<entry>Hop</entry>
<entry>Metric</entry>
<entry>Metric</entry>
<entry>(seq, best adv metric)</entry>
</row>
<row>
<entry namest="1" nameend="6" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry>A</entry>
<entry>D</entry>
<entry>D</entry>
<entry>3</entry>
<entry>0</entry>
<entry>(3,0), (4,0), (5,0)</entry>
</row>
<row>
<entry>A</entry>
<entry>D</entry>
<entry>B</entry>
<entry>3</entry>
<entry>2</entry>
<entry>(3,2), (4,2)</entry>
</row>
<row>
<entry>B</entry>
<entry>D</entry>
<entry>D</entry>
<entry>2</entry>
<entry>0</entry>
<entry>(3,0), (4,0)</entry>
</row>
<row>
<entry>B</entry>
<entry>D</entry>
<entry>A</entry>
<entry>3</entry>
<entry>3</entry>
<entry>(3,3), (4,3), (5,3)</entry>
</row>
<row>
<entry namest="1" nameend="6" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0066" num="0068">Routing entries for the changed condition in <figref idref="DRAWINGS">FIG. 4B</figref> are provided in Table 3:</p>
<p id="p-0067" num="0069">
<tables id="TABLE-US-00003" num="00003">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="6">
<colspec colname="1" colwidth="28pt" align="center"/>
<colspec colname="2" colwidth="28pt" align="center"/>
<colspec colname="3" colwidth="28pt" align="center"/>
<colspec colname="4" colwidth="28pt" align="center"/>
<colspec colname="5" colwidth="35pt" align="center"/>
<colspec colname="6" colwidth="70pt" align="left"/>
<thead>
<row>
<entry namest="1" nameend="6" rowsep="1">TABLE 3</entry>
</row>
<row>
<entry namest="1" nameend="6" align="center" rowsep="1"/>
</row>
<row>
<entry/>
<entry/>
<entry>Next</entry>
<entry>Link</entry>
<entry>Adv</entry>
<entry>Best History</entry>
</row>
<row>
<entry>Node</entry>
<entry>Dest</entry>
<entry>Hop</entry>
<entry>Metric</entry>
<entry>Metric</entry>
<entry>(seq, best adv metric)</entry>
</row>
<row>
<entry namest="1" nameend="6" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry/>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="6">
<colspec colname="1" colwidth="28pt" align="center"/>
<colspec colname="2" colwidth="28pt" align="center"/>
<colspec colname="3" colwidth="28pt" align="center"/>
<colspec colname="4" colwidth="28pt" align="char" char="."/>
<colspec colname="5" colwidth="35pt" align="center"/>
<colspec colname="6" colwidth="70pt" align="left"/>
<tbody valign="top">
<row>
<entry>A</entry>
<entry>D</entry>
<entry>D</entry>
<entry>10</entry>
<entry>0</entry>
<entry>(3,0), (4,0), (5,0)</entry>
</row>
<row>
<entry>A</entry>
<entry>D</entry>
<entry>B</entry>
<entry>3</entry>
<entry>2</entry>
<entry>(3,2), (4,2)</entry>
</row>
<row>
<entry>B</entry>
<entry>D</entry>
<entry>D</entry>
<entry>2</entry>
<entry>0</entry>
<entry>(3,0), (4,0)</entry>
</row>
<row>
<entry>B</entry>
<entry>D</entry>
<entry>A</entry>
<entry>3</entry>
<entry>3</entry>
<entry>(3,3), (4,3), (5,3)</entry>
</row>
<row>
<entry namest="1" nameend="6" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0068" num="0070">Advertisement history entries for <figref idref="DRAWINGS">FIGS. 4A and 4B</figref> are provided in Table 4:</p>
<p id="p-0069" num="0071">
<tables id="TABLE-US-00004" num="00004">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="4">
<colspec colname="1" colwidth="21pt" align="left"/>
<colspec colname="2" colwidth="21pt" align="center"/>
<colspec colname="3" colwidth="77pt" align="center"/>
<colspec colname="4" colwidth="98pt" align="left"/>
<thead>
<row>
<entry namest="1" nameend="4" rowsep="1">TABLE 4</entry>
</row>
<row>
<entry namest="1" nameend="4" align="center" rowsep="1"/>
</row>
<row>
<entry/>
<entry/>
<entry/>
<entry>Best History</entry>
</row>
<row>
<entry/>
<entry>Node</entry>
<entry>Dest</entry>
<entry>(seq, best adv metric)</entry>
</row>
<row>
<entry namest="1" nameend="4" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry/>
<entry>A</entry>
<entry>D</entry>
<entry>(3,3), (4,3), (5,3)</entry>
</row>
<row>
<entry/>
<entry>B</entry>
<entry>D</entry>
<entry>(3,2), (4,2)</entry>
</row>
<row>
<entry namest="1" nameend="4" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0070" num="0072">In <figref idref="DRAWINGS">FIG. 4A</figref>, a destination node <b>404</b> (node D), and two other nodes <b>402</b> and <b>406</b> (nodes A and B). Links AB and AD each have an initial link metric of 3, and link BD has a link metric of 2. Node D has made routing advertisements for itself with destination sequence numbers 3, 4, and 5. Node A has received advertisements with all three of the sequence numbers, while node B has only received advertisements with sequence numbers 3 and 4. Nodes A and B have made advertisements with all the sequence numbers they have received.</p>
<p id="p-0071" num="0073">A protocol according to this embodiment tracks information similar to that indicated in Tables 2-4. Each node, for each destination, for each available next hop, stores the metric of the link to that next hop, the most recent advertisement for the current total metric to that destination, and a best history. The best history consists of recent sequence numbers of advertisements made by that next hop for that destination and the most recent (i.e., best) best advertised metric for each sequence number. In addition, each node, for each destination, remembers a best history for its own advertisements. Under the initial conditions of <figref idref="DRAWINGS">FIG. 4A</figref>, node A's best route to D is via next hop node D with a total metric of 3. A has also advertised that is has a route to D with current total metric 3, sequence number 5, and best advertised metric 3 (as indicated in As advertisement history entry for destination D).</p>
<p id="p-0072" num="0074">In <figref idref="DRAWINGS">FIG. 4B</figref>, the link metric of the AD link has changed from 3 to 10. Ideally, after the link metric change, node A would switch its route to node D to use next hop node B. Unfortunately, this is not possible when using previously known destination sequenced distance vector routing protocols. Because node A had advertised a route with sequence 5, and it has not heard an advertisement for sequence 5 from node B, then it must assume that node B could select node A as its next hop at any point in time. If node A were to select node B and node B were to select node A, a routing loop would be created and persist until node B sent an updated advertisement that was successfully received by node A. An existing destination sequenced distance vector protocol would have to wait until an advertisement from node B with sequence 5 or greater was received by node A before node A could safely select node B as a next hop. But using a protocol in accordance with this embodiment of the invention allows node A substantially immediately to select node B as a next hop. Node A is free to advertise a route to node D with current total metric 5, sequence number 4, and best advertised metric 3. This is in contrast to previous destination sequenced distance vector protocols, where a lower sequence may never be advertised after advertising a higher sequence. A critical factor that allows this is the addition of the sequence tag to the header of each data packet. Node A may forward data packets with sequence tag 4 or lower to next hop node B. This covers the vast majority of packets, including packets originated by node A, which would be forwarded to node B with sequence tag 3 (oldest safe sequence known of current contiguous run of not unsafe sequence numbers: &#x3c;3=unknown, 3=safe, 4=safe, 5=unknown, &#x3e;5=safe). The qualitative effective result is that node A has substantially immediately switched its next hop to node B.</p>
<p id="p-0073" num="0075">Instantaneous loop freedom is maintained because node A must forward data packets with sequence tag 5 to next hop node D rather than node B. Consider a modified example where in addition to the AD link metric change in <figref idref="DRAWINGS">FIG. 4B</figref>, link BD breaks (metric goes to infinity). This is exactly the looping risk case that previous destination sequenced distance vector protocols are forced to avoid by preventing node A from immediately selecting node B as a next hop. As node B's previous best route (directly to node D) is no longer available, it will select the next best option: a next hop of node A. While at first glance, this may seem like it would cause a routing loop, this is not the case. If node B forwards a packet to next hop node A, it will update the sequence tag to 5 (oldest safe sequence known of current contiguous run of not unsafe sequence numbers: &#x3c;3=unknown, 3=unsafe, 4=unsafe, 5=safe). As a result, any packets forwarded to node A by node B will be sent by node A directly to node D rather than back to node B. A packet originating at node A will traverse the links AB, BA, AD with sequence tags 3, 5, 5 respectively. So, while this route travels across the same link twice and is forwarded by the same node twice, it is not a routing loop because it is finite and successfully terminates at the destination.</p>
<p id="p-0074" num="0076">Furthermore, once a packet with sequence tag 5 is forwarded from node B to node A, node A can infer that node B considers node A to be safe at sequence number 5. As a result, node A may update its status for the safety of next hop node B at sequence 5 from unknown to unsafe. A preferred method of updating this status is to add the pair (sequence 5, best advertised metric infinity) to node A's best history for next hop node B. Once node A considers node B to be unsafe at sequence 5, it will no longer forward data packets with sequence tags of 4 or less to node B; rather they, like sequence tag 5 packets, will be forwarded to node D. Thus the first packet sent from either node A or node B will eliminate the AB, BA &#x201c;cycle&#x201d; automatically without any explicit routing advertisements.</p>
<p id="p-0075" num="0077">Numerous other embodiments will be readily apparent to those skilled in the art. The entirety of this disclosure (including the Cover Page, Title, Headings, Field of the Invention, Background of the Invention, Summary of the Invention, Brief Description of the Drawings, Detailed Description of Preferred Embodiments, Claims, Abstract, Figures, and otherwise) shows by way of illustration various embodiments in which the claimed inventions may be practiced. In fact, the numerous embodiments may constitute numerous inventions, and reference to the &#x201c;invention&#x201d; was provided for the sake of simplicity and should not be viewed as a suggestion that disclosure provides description of a singular invention. The features and advantages described in the disclosure are of a representative sample of embodiments only, and are not exhaustive or exclusive. They are presented only to assist in understanding and teach the invention. It should be understood that they are not representative of all inventions that could be claimed.</p>
<p id="p-0076" num="0078">In view of this, certain aspects of the invention have not been discussed in this disclosure. That alternate embodiments may not have been presented for a specific aspect of the invention, or that further undescribed alternate embodiments may be available for an aspect, is not to be considered a disclaimer of those alternate embodiments. It will be appreciated that many of those undescribed embodiments incorporate the same aspects of the invention that are described, and others are equivalent. Thus, it is to be understood that other embodiments may be utilized, and that functional, logical, organizational, structural, or topological modifications may be made without departing from the scope or spirit of the invention.</p>
<p id="p-0077" num="0079">All examples or embodiments throughout this disclosure are intended to be non-limiting. Also, the only inference that should be drawn regarding those embodiments discussed relative to those not discussed is that embodiments were not discussed for purposes of reducing space and repetition. Some features discussed may be mutually contradictory, in that they cannot simultaneously be present in a single embodiment. Similarly, some features may be applicable to one or more aspects of the invention and inapplicable to others.</p>
<p id="p-0078" num="0080">In addition, this disclosure may include other inventions not currently claimed. Applicants reserve all rights in any such currently unclaimed inventions, including the right to claim such inventions or file additional applications, continuations, continuations-in-part, or divisions. As such, it should be understood that advantages, embodiments, examples, functions, features, or other aspects of the disclosure, are not to be considered limitations on the disclosure as defined by the claims or limitations on equivalents to the claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A computer network comprising:
<claim-text>(a) three or more nodes, each comprising a computer processor and data storage;</claim-text>
<claim-text>(b) means for processing data regarding enabling an overhearing node to overhear packet transmissions from a source node to a destination node;</claim-text>
<claim-text>(c) means for processing data regarding determining a cost of transmitting packets from the source node to the destination node;</claim-text>
<claim-text>(d) means for processing data regarding determining a cost of transmitting packets from the source node to the overhearing node to the destination node;</claim-text>
<claim-text>(e) means for processing data regarding storing in the overhearing node state information regarding each overheard packet transmission;</claim-text>
<claim-text>(f) means for processing data regarding the overhearing node updating as necessary the cost of transmitting packets from the source node to the destination node, and the cost of transmitting packets from the source node to the overhearing node to the destination node, based on each overheard packet transmission; and</claim-text>
<claim-text>(g) when the cost of transmitting packets from the source node to the overhearing node to the destination node is less than the cost of transmitting packets from the source node to the destination node, means for processing data regarding the overhearing node sending an advertisement to the source node causing the packet transmissions to be routed from the source node to the destination node through the overhearing node.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. A computer network comprising:
<claim-text>(a) for a first route from a source node to a destination node, means for processing data regarding generating one or more routing advertisements with increasing destination sequence numbers;</claim-text>
<claim-text>(b) for a second route from the source node to the destination node through an intermediate overhearing node, which overhears data packet transmissions from at least one node within range of the overhearing node, means for processing data regarding generating one or more routing advertisements with increasing destination sequence numbers;</claim-text>
<claim-text>(c) means for processing data regarding including as metrics in each routing advertisement a current cost estimate for reaching the destination node and a minimum cost estimate for reaching the destination node advertised for the destination sequence number;</claim-text>
<claim-text>(d) means for processing data regarding including a safe-sequence tag with any packet transmitted by any node;</claim-text>
<claim-text>(e) means for processing data regarding updating each safe-sequence tag when it is received by another node;</claim-text>
<claim-text>(f) means for storing in the source node a first history of best metrics for the first route;</claim-text>
<claim-text>(g) means for storing in the source node a second history of best metrics for the second route;</claim-text>
<claim-text>(h) means for storing in the source node a third history of routing advertisements made by the source node; and</claim-text>
<claim-text>(i) means for processing data regarding applying predetermined rules to the minimum cost estimates in the first, second, and third histories to maintain loop freedom.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The computer network of <claim-ref idref="CLM-00002">claim 2</claim-ref>, further comprising means for storing in each node in the network a plurality of histories of best metrics, each history corresponding to one of a plurality of routes to a plurality of destination nodes and one of one or more next-hop nodes to each destination node.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The computer network of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the cost of transmitting packets between the source, destination, and overhearing nodes is based at least in part on modulation reception statistics.</claim-text>
</claim>
</claims>
</us-patent-grant>
