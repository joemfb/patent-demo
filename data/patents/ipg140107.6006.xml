<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08627129-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08627129</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12975325</doc-number>
<date>20101221</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2009-297380</doc-number>
<date>20091228</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>385</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>1</main-group>
<subgroup>32</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>713323</main-classification>
<further-classification>713320</further-classification>
<further-classification>713502</further-classification>
</classification-national>
<invention-title id="d2e71">Data processing apparatus, control method, and storage medium</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>2005/0125651</doc-number>
<kind>A1</kind>
<name>Ehrlich</name>
<date>20050600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>713  2</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>2009/0177905</doc-number>
<kind>A1</kind>
<name>Igari</name>
<date>20090700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>713323</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2010/0153760</doc-number>
<kind>A1</kind>
<name>Gupta et al.</name>
<date>20100600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>713323</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>JP</country>
<doc-number>2000-184106</doc-number>
<kind>A</kind>
<date>20000600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>9</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>713323</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>9</number-of-drawing-sheets>
<number-of-figures>11</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20110161704</doc-number>
<kind>A1</kind>
<date>20110630</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Yokoyama</last-name>
<first-name>Junnosuke</first-name>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Yokoyama</last-name>
<first-name>Junnosuke</first-name>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Carter, DeLuca, Farrell &#x26; Schmidt LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Canon Kabushiki Kaisha</orgname>
<role>03</role>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Butler</last-name>
<first-name>Dennis M</first-name>
<department>2115</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A data processing apparatus includes a storage unit and operates in a first power mode in which power that the storage unit can operate is supplied to the storage unit or in a second power mode in which power that the storage unit can operate is not supplied to the storage unit. The data processing apparatus includes an input unit configured to input data, a storing unit configured to store the data in the storage unit, a setting unit configured to set waiting time for making the data processing apparatus wait to shift from the first power mode to the second power mode according to a storage destination if the data is stored in the storage unit, and a control unit configured to shift the data processing apparatus from the first power mode to the second power mode when the waiting time elapses after the data is stored in the storage unit.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="144.86mm" wi="169.76mm" file="US08627129-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="110.83mm" wi="143.76mm" file="US08627129-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="162.22mm" wi="169.76mm" file="US08627129-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="172.89mm" wi="142.16mm" file="US08627129-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="196.43mm" wi="157.48mm" file="US08627129-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="245.79mm" wi="192.36mm" file="US08627129-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="230.63mm" wi="190.75mm" file="US08627129-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="122.60mm" wi="174.07mm" file="US08627129-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="101.35mm" wi="171.11mm" file="US08627129-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="173.48mm" wi="164.34mm" file="US08627129-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0002" num="0001">1. Field of the Invention</p>
<p id="p-0003" num="0002">The present invention relates to a data processing apparatus, a control method, and a storage medium.</p>
<p id="p-0004" num="0003">2. Description of the Related Art</p>
<p id="p-0005" num="0004">In a conventional data processing apparatus, for example, Japanese Patent Application Laid-Open No. 2000-184106 discusses a technique of controlling time to shift to a power saving mode to extend according to a connection state to a network or a public line, and an preceding operation. Further, in a recent data processing apparatus, a data access function has been added, in which a part of a region in a data storage unit in the apparatus, e.g., a hard disk (hereinafter referred to as HDD), is opened to a user as a storage region of arbitrary data and the user can access the data from an apparatus connecting to a network.</p>
<p id="p-0006" num="0005">However, the HDD and a control system used in the data storage unit require more than ten seconds to recover from a power saving mode and to allow access to the data storage unit. For enabling a user to immediately access a data storage unit whenever he/she wants, it is desired to shorten the time required for recovering from the power saving mode. Thus, for enabling the user to immediately access a data storage unit whenever he/she wants, a process control, for example, to inhibit the apparatus from shifting to the power saving mode, or to shift to the power saving mode which does not reduce a power supply to the HDD and the control system, is performed</p>
<p id="p-0007" num="0006">Therefore, in such apparatus, the user can not immediately access the data storage medium whenever he/she wants to access, or for responding to a user request, even if the apparatus shifts to the power saving mode, the apparatus needs to maintain a state in which relatively high power is supplied. When a power consumption of the apparatus is reduced more, convenience of a user has been sacrificed.</p>
<heading id="h-0002" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0008" num="0007">The present invention relates to a data processing apparatus capable of further reducing power consumption of the apparatus while maintaining convenience of a user.</p>
<p id="p-0009" num="0008">According to an aspect of the present invention, a data processing apparatus including a storage unit and operating in a first power mode in which power that the storage unit can operate is supplied to the storage unit or in a second power mode in which power that the storage unit can operate is not supplied to the storage unit includes an input unit configured to input data, a storing unit configured to store the data in the storage unit, a setting unit configured to set waiting time for making the data processing apparatus wait to shift from the first power mode to the second power mode according to a storage destination if the data is stored in the storage unit, and a control unit configured to shift the data processing apparatus from the first power mode to the second power mode when the waiting time elapses after the data is stored in the storage unit.</p>
<p id="p-0010" num="0009">Further features and aspects of the present invention will become apparent from the following detailed description of exemplary embodiments with reference to the attached drawings.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0011" num="0010">The accompanying drawings, which are incorporated in and constitute a part of the specification, illustrate exemplary embodiments, features, and aspects of the invention and, together with the description, serve to explain the principles of the invention.</p>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 1</figref> illustrates a system configuration using an image processing apparatus.</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 2</figref> illustrates an internal configuration of the image processing apparatus.</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 3</figref> illustrates a folder structure in a storage apparatus.</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIGS. 4A and 4B</figref> are tables illustrating examples of setting of data which can be stored in each folder.</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIGS. 5A and 5B</figref> are a flowchart illustrating power saving shift processing.</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 6</figref> is a table illustrating sleep shift time T.</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 7</figref> is a table illustrating specific operations that can clear sleep shift time T.</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 8</figref> is a flowchart illustrating processing executed when a file is deleted.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">DESCRIPTION OF THE EMBODIMENTS</heading>
<p id="p-0020" num="0019">Various exemplary embodiments, features, and aspects of the invention will be described in detail below with reference to the drawings.</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 1</figref> illustrates a system configuration using a data processing apparatus according to an exemplary embodiment of the present invention. In the present exemplary embodiment, the data processing apparatus is described as an image processing apparatus, more specifically, a printing apparatus including a printing function. A printing apparatus <b>1100</b> of the present invention is connected to a network <b>1700</b>, and can transmit and receive data to and from other image processing apparatuses <b>1200</b>, <b>1300</b>, and <b>1400</b> and personal computers (PC) <b>1500</b> and <b>1600</b>.</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 2</figref> illustrates an internal configuration of the printing apparatus <b>1100</b>. Data received from a network to a network interface card (NIC) unit <b>2102</b> is processed using a central processing unit (CPU) <b>2103</b> and a memory unit <b>2104</b>, and stored in a storage apparatus <b>2107</b> controlled by a storage apparatus control unit <b>2106</b>. Data that can be stored in the storage apparatus <b>2107</b> is not only data with an image file format which can be printed by the printing apparatus <b>1100</b> but also data with a document format which is not printable but can be processed by a connected PC. The storage apparatus <b>2107</b> can store a plurality of pieces of these data.</p>
<p id="p-0023" num="0022">The image file format that can be printed by the printing apparatus <b>1100</b> may include, for example, portable document format (pdf), joint photographic experts group (jpg), tag image file format (tif), and extensible markup language (XML) paper specification (xps). Document formats which are not printable but can be processed by a PC may include a format for, Microsoft Office Excel (xls), Microsoft Word (doc), Microsoft PowerPoint (ppt), and a text file (txt). Further, executable file (exe) and batch file (bat) are also included. Unique format data read by a scanner apparatus <b>2200</b> and processed by a data processing unit <b>2105</b> is also stored in the storage apparatus <b>2107</b> controlled by the storage apparatus control unit <b>2106</b>. The data stored in the storage apparatus <b>2107</b> can be transmitted from the NIC unit <b>2102</b> to a device connected to a network via the CPU <b>2103</b> and the memory unit <b>2104</b>.</p>
<p id="p-0024" num="0023">The printing apparatus <b>1100</b> has a plurality of power saving modes. If the apparatus is not used more than a predetermined time length, a power source control unit <b>2101</b> controls a switch <b>2108</b> and stops supplying power to the scanner apparatus <b>2200</b> and a printer apparatus <b>2300</b>. If a state that the apparatus is not used further continues more than a predetermined time length, the power source control unit <b>2101</b> controls a switch <b>2109</b> and also stops supplying power to the CPU <b>2103</b>, the memory unit <b>2104</b>, and the data processing unit <b>2105</b>. If the state that the apparatus is not used still further continues more than a predetermined time length, the power source control unit <b>2101</b> controls a switch <b>2110</b> and also stops supplying power to the storage apparatus control unit <b>2106</b> and the storage apparatus <b>2107</b>.</p>
<p id="p-0025" num="0024">The NIC unit <b>2102</b> is constantly supplied with the power, and can receive print data and data with a document format which can be processed by a PC to the printing apparatus <b>1100</b> in the power saving state. The NIC unit <b>2102</b> which received the data from the network in the power saving state analyzes a network packet and transmits a signal to the power source control unit <b>2101</b>. The power source control unit <b>2101</b> which received the signal controls any one of the switches <b>2108</b> to <b>2110</b> for restarting the power supply to apparatuses which are necessary for processing.</p>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. 3</figref> illustrates a folder structure of an inside of the storage apparatus <b>2107</b>. The folder structure in the storage apparatus <b>2107</b> is classified into a program region <b>3200</b> and a data region <b>3100</b>. The program region <b>3200</b> does not allow data write access via a network in principle. The data region <b>3100</b> is divided into a shared region <b>3110</b>, a private region <b>3120</b>, and a temporary region <b>3130</b>. The shared region <b>3110</b> is a region which can be shared with a plurality of users. The private region <b>3120</b> is a region which can be used by only a specific user. The shared region <b>3110</b> and the private region <b>3120</b> allow data read access and data write access via a network. On the other hand, the temporary region <b>3130</b> does not allow data read access and data write access via a network. Because the temporary region <b>3130</b> is used as a region to temporarily store data required for a printing process.</p>
<p id="p-0027" num="0026">In the present exemplary embodiment, the shared region <b>3110</b> can be subdivided into a group <b>1</b> region <b>3111</b>, a group <b>2</b> region <b>3112</b>, and a group <b>3</b> region <b>3113</b>. The private region <b>3120</b> can be subdivided into a user A region <b>3121</b>, a user B region <b>3122</b>, and a user C region <b>3113</b>. The shared region <b>3110</b> and the private region <b>3120</b> can store the data with the printable image file format, the data with the document format which is not printable but can be processed by the PC connected with the apparatus, and data other than a document. Hereinbelow, the data with the printable image file format will be referred to as printable data, and the data with the document format which is not printable but can be processed by the connected PC will be referred to as document data.</p>
<p id="p-0028" num="0027"><figref idref="DRAWINGS">FIGS. 4A and 4B</figref> are tables illustrating these pieces of data. The printing apparatus <b>1100</b> can set which folder in the storage apparatus <b>2107</b> is allowed to store which type of data. <figref idref="DRAWINGS">FIG. 4A</figref> illustrates a case in which the printing apparatus <b>1100</b> allows all folders to store all types of data. On the other hand, <figref idref="DRAWINGS">FIG. 4B</figref> illustrates a case in which the printing apparatus <b>1100</b> does not allow the shared folder to store the document data and various types of data other than the document data. When the printing apparatus <b>1100</b> stores storable data whose type is set in <figref idref="DRAWINGS">FIGS. 4A and 4B</figref> in the shared region <b>3110</b> or the private region <b>3120</b>, the printing apparatus <b>1100</b> performs shift processing to a power saving mode according to a flow illustrated in <figref idref="DRAWINGS">FIGS. 5A and 5B</figref>. The CPU <b>2103</b> executes the processing illustrated in the flowchart in <figref idref="DRAWINGS">FIGS. 5A and 5B</figref> according to a program stored in the storage apparatus <b>2107</b>.</p>
<p id="p-0029" num="0028">In step S<b>5001</b>, when there is a storage request of a new data N received by the NIC unit <b>2102</b> to the storage apparatus <b>2107</b> (YES in step S<b>5001</b>), the CPU <b>2103</b> executes the following processing. More specifically, the CPU <b>2103</b> determines a type of a file by determining an extension of the new data N. In step S<b>5100</b>, the CPU <b>2103</b> determines whether a determination result of the type of the file is a printable file P. If the file type is the printable file P (YES in step S<b>5100</b>), then in step S<b>5110</b>, the CPU <b>2103</b> determines whether to store the printable file P in a region corresponding to the shared folder <b>3110</b> in the storage apparatus <b>2107</b>.</p>
<p id="p-0030" num="0029">If a storage destination of the file P is a region corresponding to the shared folder (YES in step S<b>5110</b>), then in step S<b>5120</b>, the CPU <b>2103</b> determines whether the region is set to be able to store the file P. When the CPU <b>2103</b> determines that the region is set to allow storing the file P (YES in step S<b>5120</b>), the CPU <b>2103</b> executes the following processing. In step S<b>5121</b>, the CPU <b>2103</b> refers to sleep shift time T. In step S<b>5130</b>, the CPU <b>2103</b> determines whether the sleep shift time T is less than 120 minutes. The sleep shift time T is less than 120 minutes means that a value less than 120 minutes has been already set to the sleep shift time T, or one or more seconds elapsed after setting the value.</p>
<p id="p-0031" num="0030">If the sleep shift time T is less than 120 minutes (YES in step S<b>5130</b>), in step S<b>5131</b>, the CPU <b>2103</b> sets a current value of the sleep shift time T to shift time backup T&#x2032;, and sets 120 minutes to the sleep shift time T. According to the setting, the printing apparatus <b>1100</b> can certainly secure time until shifting to a sleep state for 120 minutes. A reason why the sleep shift time T is set to 120 minutes is that the file is the printable file and is stored in the shared folder. In this case, since the printable file P is stored in the shared folder, a possibility of being accessed by various users is high and a possibility of being printed is also very high. Thus, time for the apparatus to shift to the power saving mode is set to the longest value.</p>
<p id="p-0032" num="0031">If storage of the printable file P in the shared folder is not set to be allowed (NO in step S<b>5120</b>), then in step S<b>5122</b>, the CPU <b>2103</b> cancels storing the printable file P and the printing apparatus <b>1100</b> terminates the processing of this flowchart.</p>
<p id="p-0033" num="0032">When the CPU <b>2103</b> determines that the storage destination of the printable file P is not the shared folder (NO in step S<b>5110</b>), in step S<b>5140</b>, the CPU <b>2103</b> determines whether the storage destination of the printable file P is the private folder. When the storage destination of the printable file P is the private folder (YES in step S<b>5140</b>), in step S<b>5150</b>, the CPU <b>2130</b> determines whether the private folder <b>3120</b> is set to be able to store the printable file P. If the CPU <b>2103</b> determines that the private folder is set to be able to store the printable file P (YES in step S<b>5150</b>), then in step S<b>5151</b>, the CPU <b>2103</b> refers the sleep shift time T. In step S<b>5160</b>, the CPU <b>2103</b> determines whether the sleep shift time T is less than 60 minutes. When the sleep shift time T is less than 60 minutes (YES in step S<b>5160</b>), the CPU <b>2103</b> sets the sleep shift time T to 60 minutes.</p>
<p id="p-0034" num="0033">When the sleep shift time T is extended to 60 minutes, in step S<b>5161</b>, the CPU <b>2103</b> sets a current value of the sleep shift time T to the shift time backup T&#x2032;. According to this setting, the printing apparatus <b>1100</b> can certainly secure a time until shifting to the sleep state for 60 minutes. A reason why the sleep shift time T is set to 60 minutes is that the file is the printable file and is stored in the private folder. In this case, since the printable file P is stored in the private folder, a possibility of being accessed by various users is low but a possibility of being printed is very high. Thus, the time for the apparatus to shift to the power saving mode is set to a relatively long value.</p>
<p id="p-0035" num="0034">The shift time backup T&#x2032; is used as follows. When predetermined data stored in the private folder is deleted before the sleep shift time T elapses, the CPU <b>2103</b> clears a sleep shift time timer T at the time of deleting the data. Therefore, the printing apparatus <b>1100</b> can shift to the power saving mode without waiting elapse of the set sleep shift time T.</p>
<p id="p-0036" num="0035">However, such control may cause a problem in a following case. More specifically, if another piece of printable data M is stored in the shared folder one minute before when the new data N is stored, when the printing apparatus <b>1100</b> shifts to the sleep state because the new data N is deleted, a user cannot refer to the data M. The shift time backup T&#x2032; is used to avoid such a problem. This processing will be described below.</p>
<p id="p-0037" num="0036">In the present exemplary embodiment, data deletion is not only processing to completely delete the stored data. Instead of actually deleting the stored data, processing to set the stored data not to be readable is equivalent to substantially deleting the stored data, and such processing is also included in the data deletion.</p>
<p id="p-0038" num="0037">When the new data N is not a printable file (NO in step S<b>5100</b>), in step S<b>5200</b>, the CPU <b>2130</b> determines whether the new data N is a document file. If the new data N is a document file D (YES in step S<b>5200</b>), then in step S<b>5210</b>, the CPU <b>2103</b> similarly determines whether a storage destination is the shared folder <b>3110</b>. When the storage destination is the shared folder (YES in step S<b>5210</b>), in step S<b>5220</b>, the CPU <b>2103</b> determines whether the shared folder is set to be able to store the document file D. When the shared folder is set to be able to store the document file D (YES in step S<b>5220</b>), in step S<b>5221</b>, the CPU <b>2103</b> refers to the sleet shift time T according to the table illustrated in <figref idref="DRAWINGS">FIG. 6</figref>. If the sleep shift time T is less than 60 minutes (YES in step S<b>5230</b>), then in step S<b>5231</b>, the CPU <b>2103</b> sets the sleep shift time T to 60 minutes.</p>
<p id="p-0039" num="0038">When the shared folder is not set to be able to store the document file D (NO in step S<b>5220</b>), in step S<b>5222</b>, the CPU <b>2103</b> cancels storing the document file D, and the printing apparatus <b>1100</b> terminates the processing of this flowchart.</p>
<p id="p-0040" num="0039">A reason why the sleep shift time T is set to 60 minutes is that although the document file D is stored in the shared folder, the document file D is not a printable file. More specifically, since the document file D has a high possibility of being accessed by various users but is not printable, the time for the apparatus to shift to the power saving mode is set to be relatively long but shorter than the time when the file is the printable file stored in the shared folder.</p>
<p id="p-0041" num="0040">On the other hand, if the storage destination of the document file D is not the shared folder (No in step S<b>5210</b>), then in step S<b>5240</b>, the CPU <b>2103</b> determines whether the storage destination of the document file D is the private folder <b>3120</b>. Similarly, when the storage destination is the private folder (YES in step S<b>5240</b>), in step S<b>5250</b>, the CPU <b>2103</b> determines whether the private folder is set to be allowed to store the document file D. If the private folder is set to be allowed to store the document file D (YES in step S<b>5250</b>), then in step S<b>5251</b>, the CPU <b>2103</b> refers to the sleet shift time T according to the table illustrated in <figref idref="DRAWINGS">FIG. 6</figref>. When the sleep shift time T is less than 30 minutes (YES in step S<b>5260</b>), in step S<b>5261</b>, the CPU <b>2103</b> sets the sleep shift time T to 30 minutes, and sets a value of the current sleep shift time T to the shift time backup T&#x2032;.</p>
<p id="p-0042" num="0041">If the private folder is not set to be allowed to store the document file D (NO in step S<b>5250</b>), then in step S<b>5252</b>, the CPU <b>2103</b> cancels storing the document file D, and the printing apparatus <b>1100</b> terminates the processing of this flowchart.</p>
<p id="p-0043" num="0042">A reason why the sleep shift time T is set to 30 minutes is that although the document file D is stored in the private folder, the document file D is not a printable file. More specifically, since the document file D has a low possibility of being accessed by various users and is not printable, the time for the apparatus to shift to the power saving mode is set shorter than the time when the file is the printable file stored in the private folder.</p>
<p id="p-0044" num="0043">Similarly, when the new data N is not the document file D (NO in step S<b>5200</b>), in step S<b>5310</b>, the CPU <b>2103</b> determines whether the storage destination is the shared folder <b>3110</b>. In steps S<b>5310</b> and S<b>5340</b>, the CPU <b>2103</b> determines whether the storage destination is the shared folder or the private folder. Then, in steps S<b>5320</b> and S<b>5350</b>, the CPU <b>2103</b> determines whether the file is set to storable in the folder of the storage destination.</p>
<p id="p-0045" num="0044">If the file is set to storable in the folder (YES in step S<b>5320</b>, and YES in step S<b>5350</b>), then steps S<b>5321</b> and S<b>5351</b>, the CPU <b>2103</b> refers to the sleep shift time T (30 minutes or 15 minutes, respectively) according the table illustrated in <figref idref="DRAWINGS">FIG. 6</figref>. In steps S<b>5330</b> and S<b>5360</b>, the CPU <b>2103</b> determines whether the sleep shift time T is less than the value shown in the table in <figref idref="DRAWINGS">FIG. 6</figref>. If the sleep shift time T is less than the value shown in the table of <figref idref="DRAWINGS">FIG. 6</figref> (YES in step S<b>5330</b> and YES in step S<b>5360</b>), in steps S<b>5331</b> and S<b>5361</b>, the CPU <b>2103</b> sets the time T acquired from the table in <figref idref="DRAWINGS">FIG. 6</figref> as the sleep shift time T, and sets a value of the current sleep shift time T to the shift time backup T&#x2032;, respectively.</p>
<p id="p-0046" num="0045">A reason why the sleep shift time T is set to 30 minutes when the file is stored in the shared folder is that although the file is stored in the shared folder, the file is not a printable file or a document file. More specifically, since the file is not a printable file or a document file, namely the file is not an ordinary document file, a person who refers the file is limited. Thus, when the file is stored in the private folder, the CPU <b>2103</b> sets a further shorter time as the sleet shift time T.</p>
<p id="p-0047" num="0046">In the present exemplary embodiment, the value of the sleep shift time T is determined according to the table illustrated in <figref idref="DRAWINGS">FIG. 6</figref>, but the present invention is not limited to this configuration. The sleep shift time T can be properly changed depending on an application of a folder, a use application of a file, or a using method by a user.</p>
<p id="p-0048" num="0047">When the sleep shift T and the shift time backup T&#x2032; are set, the CPU <b>2103</b> starts counting a timer. After the sleep shift time T or the shift time backup T&#x2032; elapses, the CPU <b>2103</b> shifts the printing apparatus <b>1100</b> to the sleep state.</p>
<p id="p-0049" num="0048">Then, <figref idref="DRAWINGS">FIG. 8</figref> will be described. <figref idref="DRAWINGS">FIG. 8</figref> is a flowchart illustrating processing executed when a file is deleted. The CPU <b>2103</b> executes the processing illustrated in flowchart in <figref idref="DRAWINGS">FIG. 8</figref> according to a program stored in the storage apparatus <b>2107</b>.</p>
<p id="p-0050" num="0049">In step S<b>8001</b>, the CPU <b>2103</b> determines whether a file stored in the storage apparatus <b>2107</b> is deleted.</p>
<p id="p-0051" num="0050">When the file is deleted (YES in step S<b>8001</b>), in step S<b>8002</b>, the CPU <b>2103</b> clears a value of the sleep shift time T. Further, in step S<b>8003</b>, the CPU <b>2103</b> determines whether the shift time backup T&#x2032; is zero. The shift time backup T&#x2032; is a timer to secure time for referring to a file which is stored before the deleted file is stored. In other word, the shift time backup T&#x2032; is a timer to secure time for referring to a file which is not deleted. When the shift time backup T&#x2032; does not elapse (NO in step S<b>8003</b>), in step S<b>8004</b>, the CPU <b>2103</b> decrements the shift time backup T&#x2032;. When the shift time backup T&#x2032; is zero (YES in step S<b>8003</b>), in step S<b>8005</b>, the CPU <b>2103</b> shifts the printing apparatus <b>1100</b> to the sleep state.</p>
<p id="p-0052" num="0051">On the other hand, if the file is not deleted (NO in step S<b>8001</b>), then in step S<b>8006</b>, the CPU <b>2103</b> determines whether the sleep shift time T elapses. When the sleep shift time T is not zero (NO in step S<b>8006</b>), in step S<b>8007</b>, the CPU <b>2103</b> decrements the sleep shift time T. When the sleep shift time T is zero (YES in step S<b>8006</b>), in step S<b>8005</b>, the CPU <b>2103</b> shifts the printing apparatus <b>1100</b> to the sleep state.</p>
<p id="p-0053" num="0052">According to the above described control, when there is a file other than the deleted file, the printing apparatus <b>1100</b> can certainly secure the time to shift to the sleep state illustrated in <figref idref="DRAWINGS">FIG. 6</figref>.</p>
<p id="p-0054" num="0053">In the present exemplary embodiment, the sleep shift time T and the shift time backup T&#x2032; are counted by decrementing the timer. However, the present invention is not limited to this method. The time can be measured by incrementing the count of the timer. By executing the processing illustrated in the flowcharts in <figref idref="DRAWINGS">FIGS. 5 and 8</figref>, when new data is stored in the shared folder or the private folder, the CPU <b>2103</b> can set the sleep shift time T illustrated in <figref idref="DRAWINGS">FIG. 6</figref>. The time T illustrated in <figref idref="DRAWINGS">FIG. 6</figref> can be changed, and a user can set the time T.</p>
<p id="p-0055" num="0054">When the above described data storage processing is completed, the CPU <b>2103</b> in the printing apparatus <b>1100</b> counts up a real time rock (RTC) (not illustrated), and decrements values of the sleep shift time T and the shift time backup T&#x2032; for every minute. When the sleep shift time T becomes zero, the CPU <b>2103</b> instructs the power source control unit <b>2101</b> to stop power supply to each unit.</p>
<p id="p-0056" num="0055">After storing new data in the storage apparatus <b>1207</b>, when access of a specific operation to the stored data occurs in the storage apparatus <b>2107</b> before the sleep shift time T elapses, the printing apparatus <b>1100</b> clears the sleep shift time T. <figref idref="DRAWINGS">FIG. 7</figref> illustrates an example to set a specific operation to clear the sleep shift time T. For example, when printable data is stored in the private region, the sleep shift time T is set to 60 minutes based on the setting in <figref idref="DRAWINGS">FIG. 6</figref>. When the stored printable data is deleted within 60 minutes after storing the data, the printing apparatus <b>1100</b> can shift to the power saving mode when the data is deleted.</p>
<p id="p-0057" num="0056">A concrete example of processing when a plurality of pieces of data is stored will be described below. The printing apparatus <b>1100</b> receives, from the PC <b>1500</b> connected to the network, a request to store document data in the user A region <b>3121</b> in the private region <b>3120</b> of the storage apparatus <b>2107</b>. At this time, the printing apparatus <b>1100</b> is in the power saving mode, and the sleep shift time T is set to zero.</p>
<p id="p-0058" num="0057">The CPU <b>2103</b> sets the shift time backup T&#x2032; to zero, and the sleep shift time T to 30 minutes according to the flowchart in <figref idref="DRAWINGS">FIGS. 5A and 5B</figref> and the table in <figref idref="DRAWINGS">FIG. 6</figref>. Simultaneously, the storage apparatus control unit <b>2106</b> stores the document data in the user A region <b>3121</b>. The CPU <b>2103</b> starts counting up the RTC, and decrements the sleep shift time T and the shift time backup T&#x2032; according to time elapse after storing data.</p>
<p id="p-0059" num="0058">It is assumed that the printing apparatus <b>1100</b> receives, from the PC <b>1600</b> connected to the network, a request to store new printable data in the group <b>1</b> region <b>3111</b> in the shared region <b>3110</b> of the storage apparatus <b>2107</b> after elapsing 20 minutes. At this time, the shift time backup T&#x2032; is zero minute, and the sleep shift time T is ten minutes. The CPU <b>2103</b> sets the shift time backup T&#x2032; to ten minutes, and the sleep shift time T to 120 minutes according to the flowchart in <figref idref="DRAWINGS">FIGS. 5A and 5B</figref>. Simultaneously, the storage apparatus control unit <b>2106</b> stores the printable data in the group <b>1</b> region <b>3111</b>.</p>
<p id="p-0060" num="0059">It is assumed that the printing apparatus <b>1100</b> receives a request to print the stored printable data one minute later. At this time, the shift time backup T&#x2032; is nine minutes, and the sleep shift time T is 119 minutes. When the printing apparatus <b>1100</b> prints the printable data and normally ends the printing, the printable data is deleted. When the printable data is deleted, the CPU <b>2103</b> sets the sleep shift time T to nine minutes which is the shift time backup T&#x2032;, and decrements the value of the shift time backup T&#x2032;. More specifically, the CPU <b>2103</b> does not shift the printing apparatus <b>1100</b> to the power saving mode for remaining nine minutes, so that the printing apparatus <b>1100</b> can secure accessing time determined in the table in <figref idref="DRAWINGS">FIG. 6</figref> for the document initially stored in the user A region <b>3121</b>.</p>
<p id="p-0061" num="0060">In the present exemplary embodiment, a single CPU executes the processing illustrated in flowcharts in <figref idref="DRAWINGS">FIGS. 5 and 8</figref>. However, the present invention is not limited to this configuration. A plurality of CPUs can execute the processing illustrated in the flowcharts by distributing the processing among the CPUs.</p>
<p id="p-0062" num="0061">Aspects of the present invention can also be realized by a computer of a system or apparatus (or devices such as a CPU or MPU) that reads out and executes a program recorded on a memory device to perform the functions of the above-described embodiment (s), and by a method, the steps of which are performed by a computer of a system or apparatus by, for example, reading out and executing a program recorded on a memory device to perform the functions of the above-described embodiment(s). For this purpose, the program is provided to the computer for example via a network or from a recording medium of various types serving as the memory device (e.g., computer-readable medium).</p>
<p id="p-0063" num="0062">While the present invention has been described with reference to exemplary embodiments, it is to be understood that the invention is not limited to the disclosed exemplary embodiments. The scope of the following claims is to be accorded the broadest interpretation so as to encompass all modifications, equivalent structures, and functions.</p>
<p id="p-0064" num="0063">This application claims priority from Japanese Patent Application No. 2009-297380 filed Dec. 28, 2009, which is hereby incorporated by reference herein in its entirety.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A data processing apparatus including a storage unit and operating in a first power mode in which power is supplied to the storage unit or in a second power mode in which power is not supplied to the storage unit, the data processing apparatus comprising:
<claim-text>an input unit configured to input data;</claim-text>
<claim-text>a setting unit configured to set a first waiting time in a case where a storage destination of the data input by the input unit is a first area of the storage unit, and to set a second waiting time in a case where a storage destination of the data input by the input unit is a second area of the storage unit; and</claim-text>
<claim-text>a control unit configured to shift the data processing apparatus from the first power mode to the second power mode when the first waiting time or the second waiting time set by the setting unit elapses after the data is stored in the storage unit.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The data processing apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the setting unit sets:
<claim-text>(1) the first waiting time in a case where a storage destination of the data input by the input unit is the first area of the storage unit and a type of the data is a first type,</claim-text>
<claim-text>(2) the second waiting time in a case where a storage destination of the data input by the input unit is the second area of the storage unit and a type of the data is the first type,</claim-text>
<claim-text>(3) a third waiting time in a case where a storage destination of the data input by the input unit is the first area of the storage unit and a type of the data is the second type, and</claim-text>
<claim-text>(4) a fourth waiting time in a case where a storage destination of the data input by the input unit is the second area of the storage unit and a type of the data is the second type.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The data processing apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the control unit shifts the data processing apparatus from the first power mode to the second power mode without waiting for the first waiting time or the second waiting time if the data stored in the storage unit is deleted.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The data processing apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the first area of the storage unit is a shared folder that is shared by a plurality of users and the second area of the storage unit is a private folder that only a specific user accesses.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The data processing apparatus according to <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein the setting unit sets the first waiting time is to be longer than the second waiting time.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The data processing apparatus according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the first type of the data is usable for printing by the data processing apparatus, and the second type of the data is unusable for printing by the data processing apparatus.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The data processing apparatus according to <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein the setting unit sets the first waiting time to be longer than the third waiting time.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. A method for controlling a data processing apparatus including a storage unit and operating in a first power mode in which power is supplied to the storage unit or in a second power mode in which power is not supplied to the storage unit, the method comprising:
<claim-text>inputting data;</claim-text>
<claim-text>setting a first waiting time in a case where a storage destination of the input data is a first area of the storage unit;</claim-text>
<claim-text>setting a second waiting time in a case where a storage destination of the input data is a second area of the storage unit; and</claim-text>
<claim-text>shifting the data processing apparatus from the first power mode to the second power mode when the first waiting time or the second waiting time elapses after the data is stored in the storage unit.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. A storage medium storing a program for causing a data processing apparatus including a storage unit and operating in a first power mode in which power is supplied to the storage unit or in a second power mode in which power is not supplied to the storage unit to execute processing comprising:
<claim-text>inputting data;</claim-text>
<claim-text>setting a first waiting time in a case where a storage destination of the input data is a first area of the storage unit;</claim-text>
<claim-text>setting a second waiting time in a case where a storage destination of the input data is a second area of the storage unit; and</claim-text>
<claim-text>shifting the data processing apparatus from the first power mode to the second power mode when the first waiting time or the second waiting time elapses after the data is stored in the storage unit. </claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
