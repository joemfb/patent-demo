<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625530-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625530</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12771458</doc-number>
<date>20100430</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>CN</country>
<doc-number>2007 1 0166088</doc-number>
<date>20071102</date>
</priority-claim>
<priority-claim sequence="02" kind="national">
<country>CN</country>
<doc-number>2008 1 0212916</doc-number>
<date>20080905</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>590</us-term-extension>
<disclaimer>
<text>This patent is subject to a terminal disclaimer.</text>
</disclaimer>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20090101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>W</subclass>
<main-group>4</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>12</main-group>
<subgroup>66</subgroup>
<symbol-position>L</symbol-position>
<classification-value>N</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>370331</main-classification>
<further-classification>370352</further-classification>
</classification-national>
<invention-title id="d2e92">Data processing during a mobile handover operation</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>2003/0013446</doc-number>
<kind>A1</kind>
<name>Haumont et al.</name>
<date>20030100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455436</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>2003/0104814</doc-number>
<kind>A1</kind>
<name>Gwon et al.</name>
<date>20030600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455436</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2007/0115885</doc-number>
<kind>A1</kind>
<name>Singh et al.</name>
<date>20070500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370331</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2008/0043674</doc-number>
<kind>A1</kind>
<name>Suh et al.</name>
<date>20080200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370331</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2008/0089287</doc-number>
<kind>A1</kind>
<name>Sagfors et al.</name>
<date>20080400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370331</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2008/0117884</doc-number>
<kind>A1</kind>
<name>Ishii et al.</name>
<date>20080500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370338</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2008/0254768</doc-number>
<kind>A1</kind>
<name>Faccin</name>
<date>20081000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2008/0281978</doc-number>
<kind>A1</kind>
<name>Tang et al.</name>
<date>20081100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709232</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2008/0316971</doc-number>
<kind>A1</kind>
<name>Shaheen</name>
<date>20081200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>2008/0316972</doc-number>
<kind>A1</kind>
<name>Shaheen</name>
<date>20081200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370331</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>2009/0016300</doc-number>
<kind>A1</kind>
<name>Ahmavaara et al.</name>
<date>20090100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370331</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>2009/0061878</doc-number>
<kind>A1</kind>
<name>Fischer</name>
<date>20090300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>2010/0232391</doc-number>
<kind>A1</kind>
<name>Olsson et al.</name>
<date>20100900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370331</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>2011/0310824</doc-number>
<kind>A1</kind>
<name>Perras et al.</name>
<date>20111200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370329</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>CN</country>
<doc-number>101001442</doc-number>
<kind>A</kind>
<date>20070700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00016">
<document-id>
<country>CN</country>
<doc-number>101022652</doc-number>
<kind>A</kind>
<date>20070800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00017">
<document-id>
<country>CN</country>
<doc-number>101047967</doc-number>
<kind>A</kind>
<date>20071000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00018">
<document-id>
<country>CN</country>
<doc-number>101047975</doc-number>
<kind>A</kind>
<date>20071000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00019">
<document-id>
<country>WO</country>
<doc-number>2007071112</doc-number>
<kind>A1</kind>
<date>20070600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00020">
<document-id>
<country>WO</country>
<doc-number>2007092617</doc-number>
<kind>A2</kind>
<date>20070800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00021">
<othercit>3GPP TS 23.402 V 1.4.0 (Oct. 2007).</othercit>
</nplcit>
<category>cited by examiner</category>
</us-citation>
<us-citation>
<nplcit num="00022">
<othercit>Cover page of related Issued Patent No. 101472314B (Patent Application No. CN200810212916.8), Item (56) citing prior art, granted on May 12, 2010, 30 pages total.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00023">
<othercit>First Office Action of related Chinese Patent Application No. CN200810212916.8, mailed Sep. 4, 2009 and the English translation thereof, 8 pages total.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00024">
<othercit>Second Office Action of related Chinese Patent Application No. CN200810212916.8, mailed Nov. 9, 2009 and the English translation thereof, 8 pages total.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00025">
<othercit>3GPP TS 29.213 V7.2.0, 3rd Generation Partnership Project; Technical Specification Group Core Network and Terminals; Policy and Charging Control signalling flows and QoS parameter mapping; (Release 7), dated Sep. 2007, 60 pages total.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00026">
<othercit>3GPP TS 23.060 V7.5.0, 3rd Generation Partnership Project; Technical Specification Group Services and System Aspects; General Packet Radio Service (GPRS); Service Description; Stage 2 (Release 7), dated Sep. 2007, 216 pages total.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00027">
<othercit>3GPP TS 23.401 V1.3.0, 3rd Generation Partnership Project; Technical Specification Group Services and System Aspects; GPRS enhancements for E-UTRAN access (Release 8), dated Oct. 2007, 136 pages total.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00028">
<othercit>3GPP TS 23.402 V1.4.0, 3rd Generation Partnership Project; Technical Specification Group Services and System Aspects; Architecture Enhancements for non-3GPP accesses (Release 8), dated Oct. 2007, 125 pages total.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00029">
<othercit>English Translation of the Written Opinion of PCT Application No. PCT/CN2008072555, mailed Dec. 23, 2008, 4 pages total.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00030">
<othercit>Foreign Communication From a Related Counterpart Application-International Search Report, PCT/CN2008072555, Jan. 8, 2009, 6 pages.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00031">
<othercit>Foreign Communication From a Related Counterpart Application-Chinese Office Action, CN200810212916.8, Sep. 4, 2009, 5 pages.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00032">
<othercit>Office action of corresponding U.S. Appl. No. 13/416,983, mailed on May 31, 2012, 23 pages total.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00033">
<othercit>Office action of corresponding Indonesian Patent Application No. W-00201000279, mailed Sep. 21, 2011, and English translation thereof, 5 pages total.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00034">
<othercit>Notice of Allowance issued in corresponding U.S. Appl. No. 13/416,983, dated Sep. 4, 2012, 14 pages total.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>13</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>None</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>12</number-of-drawing-sheets>
<number-of-figures>15</number-of-figures>
</figures>
<us-related-documents>
<continuation>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>PCT/CN2008/072555</doc-number>
<date>20080926</date>
</document-id>
<parent-status>PENDING</parent-status>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>12771458</doc-number>
</document-id>
</child-doc>
</relation>
</continuation>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20100208704</doc-number>
<kind>A1</kind>
<date>20100819</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Wu</last-name>
<first-name>Wenfu</first-name>
<address>
<city>Shenzhen</city>
<country>CN</country>
</address>
</addressbook>
<residence>
<country>CN</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Wu</last-name>
<first-name>Wenfu</first-name>
<address>
<city>Shenzhen</city>
<country>CN</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Staas &#x26; Halsey LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Huawei Technologies Co., Ltd.</orgname>
<role>03</role>
<address>
<city>Shenzhen</city>
<country>CN</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Choi</last-name>
<first-name>Eunsook</first-name>
<department>2467</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A data processing method is provided for forwarding data in the case of handover between heterogeneous networks. The data processing method includes: when a user equipment (UE) is handed over from an originating network to a receiving network, receiving, by the originating network, a data forwarding address obtained by the receiving network; creating a data forwarding tunnel between an originating network gateway and a receiving network gateway according to the data forwarding address; and forwarding data to the receiving network through the data forwarding tunnel. A data processing device is also provided. The lossless data processing solution can overcome the problem of data loss in the case of handover between heterogeneous networks in the existing technology, reduces the time of user service interruption and enhances the user experience.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="89.83mm" wi="129.88mm" file="US08625530-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="216.32mm" wi="177.46mm" file="US08625530-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="217.93mm" wi="141.73mm" file="US08625530-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="220.39mm" wi="154.69mm" file="US08625530-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="221.74mm" wi="156.04mm" file="US08625530-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="207.94mm" wi="157.14mm" file="US08625530-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="219.37mm" wi="141.22mm" file="US08625530-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="218.19mm" wi="165.35mm" file="US08625530-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="190.50mm" wi="153.75mm" file="US08625530-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="212.94mm" wi="161.54mm" file="US08625530-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="194.39mm" wi="149.69mm" file="US08625530-20140107-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="219.12mm" wi="161.71mm" file="US08625530-20140107-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="211.50mm" wi="145.29mm" file="US08625530-20140107-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This application is a continuation of International Application No. PCT/CN2008/072555, filed on Sep. 26, 2008, which claims priorities to Chinese Patent Application No. 200710166088.4, filed on Nov. 2, 2007 and Chinese Patent Application No. 200810212916.8, filed on Sep. 5, 2008, all of which are hereby incorporated by reference in their entireties.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">FIELD OF THE INVENTION</heading>
<p id="p-0003" num="0002">The present invention relates to a network technology, and in particular, to a data processing method and device.</p>
<heading id="h-0003" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0004" num="0003">To enhance the competitiveness of networks in the future, the 3rd Generation Partnership Project (3GPP) is studying a brand-new evolved network. As shown in <figref idref="DRAWINGS">FIG. 1</figref>, the system architecture of the evolved network includes: an evolved UMTS terrestrial radio access network (E-UTRAN), adapted to implement the radio access functions in the evolved network; a mobility management entity (MME), responsible for mobility management of the control plane, such as user context and mobile status management and allocation of temporary user IDs; a serving gateway (serving GW), which is the user plane anchor point between the 3GPP access networks and also the interface for receiving the E-TURAN; and a packet data network gateway (PDN GW), which is the user plane anchor point between a 3GPP access network and a non-3GPP access network and also the interface for receiving the connection with external PDNs. A policy and charging rules function (PCRF) is adapted to make a policy control decision and exercise traffic charging control. A home subscriber server (HSS) is adapted to store subscription information of users.</p>
<p id="p-0005" num="0004">A UMTS terrestrial radio access network (UTRAN) and a GSM/EDGE radio access network (GERAN) are adapted to implement the radio access functions in the current GPRS/UMTS network. A serving GPRS support node (SGSN) is adapted to implement functions in the GPRS/UMTS network, such as routing and forwarding, mobility management, session management, and user information storage.</p>
<p id="p-0006" num="0005">Non-3GPP IP access networks are defined by some non-3GPP organizations. Such networks include a wireless local area network (WLAN), a worldwide interoperability for microwave access (WIMAX) network, and a code division multiple access (CDMA) network. The non-3GPP IP access networks are connected to a PDN GW and an authentication, authorization and accounting (AAA) server, where the AAA server is adapted to implement access authentication, authorization and accounting functions for a user equipment (UE).</p>
<p id="p-0007" num="0006"><figref idref="DRAWINGS">FIG. 2</figref> shows an architecture of a system for optimizing handover between a 3GPP network and a high rate packet data (HRPD) network (a CDMA network). An S<b>101</b> interface is added between an MME and an HRPD access network (HRPD AN) for transmitting signaling messages between the MME and the HRPD AN. A packet data serving node (PDSN) is a user plane processing network element (NE) in the HRPD network, and is adapted to perform user plane processing in the HRPD network.</p>
<p id="p-0008" num="0007">In the existing technology, a scenario where a UE is handed over between heterogeneous networks may occur. For example, the UE in the HRPD access network is handed over to an E-UTRAN access network.</p>
<p id="p-0009" num="0008">During the implementation of the present invention, the inventor discovers the following problem in the existing technology: The process of handover between heterogeneous networks in the existing technology, for example, handover between the HRPD network and the E-UTRAN network, does not consider the data lossless processing method, causing a large amount of data loss during the handover process. As a result, the user service is interrupted for a long time and even the user service is completely interrupted, which affects user experiences.</p>
<heading id="h-0004" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0010" num="0009">Embodiments of the present invention provide a data processing method and device to implement lossless data transmission during the process of handover between heterogeneous networks.</p>
<p id="p-0011" num="0010">To achieve the above objective, an embodiment of the present invention provides a data processing method. The method includes:</p>
<p id="p-0012" num="0011">when a user equipment (UE) is handed over from an originating network to a receiving network, receiving, by the originating network, a data forwarding address obtained by the receiving network;</p>
<p id="p-0013" num="0012">creating a data forwarding tunnel between an originating network gateway and a receiving network gateway according to the data forwarding address; and</p>
<p id="p-0014" num="0013">forwarding data to the receiving network through the data forwarding tunnel.</p>
<p id="p-0015" num="0014">Another embodiment of the present invention provides a data processing method. The method includes:</p>
<p id="p-0016" num="0015">when a UE is handed over from an originating network to a receiving network, notifying, by a receiving network gateway, a user plane anchor point NE of the receiving network and the originating network of bi-casting; and</p>
<p id="p-0017" num="0016">sending, by the user plane anchor point NE, data to the originating network and the receiving network at the same time according to the notification.</p>
<p id="p-0018" num="0017">An embodiment of the present invention provides a data processing device of a receiving network. The data processing device includes:</p>
<p id="p-0019" num="0018">a handover originating entity, adapted to: notify a receiving network gateway of creating data forwarding resources when detecting that a UE is handed over to the receiving network, receive a data forwarding address sent from the receiving network gateway, and send the forwarding address to an originating network; and</p>
<p id="p-0020" num="0019">the receiving network gateway, adapted to: receive the notification from the handover originating entity, create data forwarding resources, and send the data forwarding address to the handover originating entity.</p>
<p id="p-0021" num="0020">An embodiment of the present invention provides a data processing device of an originating network. The data processing device includes:</p>
<p id="p-0022" num="0021">a handover processing entity, adapted to: obtain a data forwarding address that a receiving network obtains when a UE is handed over to the receiving network, and send the data forwarding address to an originating network gateway; and</p>
<p id="p-0023" num="0022">the originating network gateway, adapted to: create a data forwarding tunnel with a receiving network gateway according to the data forwarding address, and send data to the receiving network through the data forwarding tunnel.</p>
<p id="p-0024" num="0023">Another embodiment of the present invention provides a data processing device of a receiving network. The data processing device includes:</p>
<p id="p-0025" num="0024">a handover originating entity, adapted to notify a receiving network gateway of bi-casting when detecting that a UE is handed over from an originating network to the receiving network; and</p>
<p id="p-0026" num="0025">the receiving network gateway, adapted to: receive the notification message, send the notification message to a user plane anchor point NE of the receiving network and the originating network, and receive data sent from the user plane anchor point NE.</p>
<p id="p-0027" num="0026">Compared with the existing technology, embodiments of the present invention have the following merits:</p>
<p id="p-0028" num="0027">Embodiments of the present invention provide a data processing method applicable to the process of handover between heterogeneous networks. Through data forwarding or simultaneous data transmission on the originating network and the receiving network, the data processing method overcomes the problem of data loss during the process of handover between heterogeneous networks in the existing technology, reduces the duration of user service interruption and enhances the user experience.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. 1</figref> shows an architecture of an evolved network;</p>
<p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. 2</figref> shows a structure of a system for optimizing handover between a 3GPP network and an HRPD network in a CDMA network;</p>
<p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. 3</figref> is a flowchart of a data processing method provided in a first embodiment of the present invention;</p>
<p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. 4</figref> is a flowchart of another data processing method provided in the first embodiment of the present invention;</p>
<p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. 5A</figref> shows a process of handover from an HRPD network to an E-UTRAN through a data forwarding method provided in a second embodiment of the present invention;</p>
<p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. 5B</figref> shows a signaling process of handover from an HRPD network to an E-UTRAN through the data forwarding method provided in the second embodiment of the present invention;</p>
<p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. 6A</figref> shows a process of handover from an E-UTRAN to an HRPD network through the data forwarding method provided in the second embodiment of the present invention;</p>
<p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. 6B</figref> shows a signaling process of handover from an E-UTRAN to an HRPD network through the data forwarding method provided in the second embodiment of the present invention;</p>
<p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. 7A</figref> shows a process of handover from an HRPD network to an E-UTRAN through a bi-casting method provided in a third embodiment of the present invention;</p>
<p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. 7B</figref> shows a signaling process of handover from an HRPD network to an E-UTRAN through the bi-casting method provided in the third embodiment of the present invention;</p>
<p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. 8A</figref> shows a process of handover from an E-UTRAN to an HRPD network through the bi-casting method provided in the third embodiment of the present invention;</p>
<p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. 8B</figref> shows a signaling process of handover from an E-UTRAN to an HRPD network through the bi-casting method provided in the third embodiment of the present invention;</p>
<p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. 9</figref> shows a data processing system provided in a fourth embodiment of the present invention; and</p>
<p id="p-0042" num="0041"><figref idref="DRAWINGS">FIG. 10</figref> shows a data processing system provided in a fifth embodiment of the present invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0006" level="1">DETAILED DESCRIPTION OF THE EMBODIMENTS</heading>
<p id="p-0043" num="0042">Embodiments of the present invention are hereinafter described in detail with reference to the accompanying drawings and exemplary embodiments.</p>
<p id="p-0044" num="0043">A data processing method provided in the first embodiment of the present invention is used for data forwarding in the case of handover between heterogeneous networks. The method may implement lossless data forwarding during the network handover by establishing a data forwarding tunnel between an originating network and a receiving network where the UE is handed over or sending data at the same time (bi-casting) in the originating network and the receiving network. The heterogeneous networks include a 3GPP network and a non-3GPP network or include hybrid-networked non-3GPP networks, for example, hybrid-networked CDMA network and WIMAX network.</p>
<p id="p-0045" num="0044">As shown in <figref idref="DRAWINGS">FIG. 3</figref>, when using the method of establishing a data forwarding tunnel, a data processing method provided in the first embodiment of the present invention includes the following steps:</p>
<p id="p-0046" num="0045">S<b>301</b>: When the UE is handed over from the originating network to the receiving network, the receiving network gateway creates a data forwarding address.</p>
<p id="p-0047" num="0046">S<b>302</b>: The receiving network sends the forwarding address to the originating network.</p>
<p id="p-0048" num="0047">S<b>303</b>: The originating network creates a data forwarding tunnel between the gateways of the originating network and receiving network according to the received forwarding address.</p>
<p id="p-0049" num="0048">S<b>304</b>: The originating network forwards the data to the receiving network through the data forwarding tunnel.</p>
<p id="p-0050" num="0049">For the data forwarding in the case of handover between heterogeneous networks with a single access point name (APN) and multiple PDN connections, S<b>302</b> is as follows: The receiving network sends the data forwarding address and PDN connection information to the originating network.</p>
<p id="p-0051" num="0050">The PDN connection information may include one of the following aspects:</p>
<p id="p-0052" num="0051">(1) PDN connection ID. The PDN connection ID is used to identify each PDN connection of the UE.</p>
<p id="p-0053" num="0052">(2) APN and PDN connection ID. The APN and PDN connection ID are used to identify each PDN connection of the UE.</p>
<p id="p-0054" num="0053">(3) APN+sequence number. The APN and sequence number are used to identify each PDN connection of the UE. For example, the first PDN connection of the UE is identified by APN:1; the second PDN connection of the UE is identified by APN:2; and the rest can be inferred in the same manner.</p>
<p id="p-0055" num="0054">S<b>303</b> is as follows: The originating network creates a data forwarding tunnel between the gateways of the originating network and receiving network according to the received data forwarding address and PDN connection information.</p>
<p id="p-0056" num="0055">As shown in <figref idref="DRAWINGS">FIG. 4</figref>, when using the bi-casting method, a data processing method provided in an embodiment of the present invention includes the following steps:</p>
<p id="p-0057" num="0056">S<b>401</b>: When the UE is handed over from the originating network to the receiving network, the receiving network gateway notifies a user plane anchor point NE of the receiving network and the originating network.</p>
<p id="p-0058" num="0057">S<b>402</b>: The receiving network gateway receives data that the user plane anchor point NE sends to the originating network and the receiving network.</p>
<p id="p-0059" num="0058">Supposing the UE is handed over between an HRPD network and an E-UTRAN, the following describes embodiments of the present invention with reference to specific scenarios.</p>
<p id="p-0060" num="0059">The process of handover from an HRPD network to an E-UTRAN through a data forwarding method is described in the second embodiment of the present invention. Herein, when the receiving network is an E-UTRAN and the originating network is an HRPD network, the first NE of the receiving network is an MME and the second NE of the receiving network is an S-GW, while the first NE of the originating network is an HRPD AN and the second NE of the originating network is a PDSN. As shown in <figref idref="DRAWINGS">FIG. 5A</figref>, the process includes the following steps:</p>
<p id="p-0061" num="0060">S<b>5</b>A<b>01</b>: After discovering that the UE is handed over from the HRPD network to the E-UTRAN, the MME notifies the serving GW of creating data forwarding resources between the HRPD network and the E-UTRAN (including a data forwarding tunnel between the serving GW and the PDSN, and a data forwarding tunnel between the serving GW and an eNodeB).</p>
<p id="p-0062" num="0061">S<b>5</b>A<b>02</b>: The serving GW establishes tunnel and notifies the MME of the tunnel information.</p>
<p id="p-0063" num="0062">S<b>5</b>A<b>03</b>: The MME notifies the HRPD AN of the serving GW address.</p>
<p id="p-0064" num="0063">S<b>5</b>A<b>04</b>: The HRPD AN notifies the PDSN of the serving GW address.</p>
<p id="p-0065" num="0064">S<b>5</b>A<b>05</b>: The PDSN creates data forwarding resources (P-P interface tunnel) between the PDSN and the serving GW according to the serving GW address, and sends downlink data to the serving GW through the interface tunnel.</p>
<p id="p-0066" num="0065">For the data forwarding in the case of handover between heterogeneous networks with a single APN and multiple PDN connections, S<b>5</b>A<b>03</b> is as follows: The MME notifies the HRPD AN of the serving GW address and PDN connection information.</p>
<p id="p-0067" num="0066">S<b>5</b>A<b>04</b> is as follows: The HRPD AN notifies the PDSN of the serving GW address and PDN connection information.</p>
<p id="p-0068" num="0067">S<b>5</b>A<b>05</b> is as follows: The PDSN creates data forwarding resources (P-P interface tunnel) between the PDSN and the serving GW according to the serving GW address and PDN connection information. That is, for each PDN connection, the PDSN creates a generic routing encapsulation (GRE) tunnel between the PDSN and the serving GW; the PDSN forwards downlink data in the PDN connection to the serving GW through the GRE tunnel.</p>
<p id="p-0069" num="0068">The handover signaling process associated with the preceding process in the networking scenario is shown in <figref idref="DRAWINGS">FIG. 5B</figref>, and includes the following steps:</p>
<p id="p-0070" num="0069">S<b>501</b>: The UE accesses the HRPD network.</p>
<p id="p-0071" num="0070">S<b>502</b>: The UE or HRPD AN determines to perform handover from the HRPD network to the E-UTRAN.</p>
<p id="p-0072" num="0071">S<b>503</b>: The UE sends an Attach Request message to the MME through the HRPD network.</p>
<p id="p-0073" num="0072">S<b>504</b>: Authentication is performed.</p>
<p id="p-0074" num="0073">S<b>505</b>: The MME sends an Update Location message to the HSS, and obtains the subscription data of the UE. The HSS returns the subscription data to the UE, where the subscription data includes address information of the PDN GW used by the UE.</p>
<p id="p-0075" num="0074">S<b>506</b>: The MME selects a serving GW, and sends a Create Default Bearer Request message to the serving GW. The serving GW returns a Create Default Bearer Response message to the MME.</p>
<p id="p-0076" num="0075">S<b>507</b>: If the MME discovers that the UE is handed over from the HRPD network to the E-UTRAN, the MME chooses the serving GW that the UE is using or selects a serving GW that can forward data between the E-UTRAN and the HRPD network. Then, the MME notifies the selected serving GW of creating data forwarding resources between the HRPD network and the E-UTRAN. This may be performed as follows:</p>
<p id="p-0077" num="0076">1. The MME sends a Create Bearer Request message to the serving GW. The MME adds an indication information element to the message to notify the serving GW of creating data forwarding resources between the HRPD network and the E-UTRAN. The indication information element may include:</p>
<p id="p-0078" num="0077">HRPD to E-UTRAN handover indication.</p>
<p id="p-0079" num="0078">Handover type: The MME sets this information element to &#x201c;HRPD to E-UTRAN Handover&#x201d;.</p>
<p id="p-0080" num="0079">Data forwarding type: The MME sets this information element to &#x201c;HRPD to E-UTRAN Data Forwarding&#x201d;.</p>
<p id="p-0081" num="0080">Cause: The MME sets this information element to &#x201c;HRPD to E-UTRAN Handover&#x201d;.</p>
<p id="p-0082" num="0081">2. The MME sends a specific message, for example, Create Data Forwarding Tunnel Request, to notify the serving GW of creating data forwarding resources between the HRPD network and the E-UTRAN.</p>
<p id="p-0083" num="0082">After receiving the message, the serving GW creates data forwarding resources between the serving GW and the PDSN (P-P interface tunnel) and between the serving GW and the eNodeB (GTP-U tunnel). Then, the serving GW returns a Create Bearer Response (serving GW address) message to the MME. The serving GW address is the data forwarding address of the serving GW, and the PDSN forwards downlink packets to a serving GW associated with the serving GW address.</p>
<p id="p-0084" num="0083">The serving GW may start a timer, and release created data forwarding resources after the timer times out.</p>
<p id="p-0085" num="0084">S<b>508</b>: The MME sends an S<b>101</b> HO Command message to the HRPD AN, where the message includes an Attach Accept message, an HO Command message, and a serving GW address.</p>
<p id="p-0086" num="0085">S<b>509</b>: If the HRPD AN discovers that the UE is handed over from the HRPD network to the E-UTRAN, the HRPD AN notifies the PDSN of creating data forwarding resources between the HRPD and the E-UTRAN. This may be performed as follows:</p>
<p id="p-0087" num="0086">1. The HRPD AN sends an A11-Registration Request message to the PDSN. The HRPD AN adds an indication information element to the message to notify the PDSN of creating data forwarding resources between the HRPD network and the E-UTRAN. The indication information element may include:</p>
<p id="p-0088" num="0087">HRPD to E-UTRAN handover indication.</p>
<p id="p-0089" num="0088">Handover type: The HRPD sets this information element to &#x201c;HRPD to E-UTRAN Handover&#x201d;.</p>
<p id="p-0090" num="0089">Data forwarding type: The HRPD AN sets this information element to &#x201c;HRPD to E-UTRAN Data Forwarding&#x201d;.</p>
<p id="p-0091" num="0090">Cause: The HRPD AN sets this information element to &#x201c;HRPD to E-UTRAN Handover&#x201d;.</p>
<p id="p-0092" num="0091">The HRPD AN sets an &#x201c;S&#x201d; flag bit in the Flag information element to &#x201c;True&#x201d; or &#x201c;1&#x201d; to notify the PDSN that the cause is &#x201c;PDSN fast handoff&#x201d;.</p>
<p id="p-0093" num="0092">2. The HRPD AN sends a specific message, for example, A11-Create Data Forwarding Tunnel Request, to notify the PDSN of creating data forwarding resources between the HRPD network and the E-UTRAN.</p>
<p id="p-0094" num="0093">The notification message sent by the HRPD AN carries the serving GW address that the HRPD AN receives from the MME. After receiving the message, the PDSN creates data forwarding resources (P-P connection (PDSN address, serving GW address)) between the PDSN and the serving GW. The PDSN returns an A11-Registration Reply message to the HRPD AN. The serving GW may start a timer, and release created P-P connection resources after the timer times out.</p>
<p id="p-0095" num="0094">After receiving downlink data from the PDN GW, the PDSN forwards the downlink packets to the serving GW through the established P-P connection. For the PDSN, the P-P interface uses a GRE protocol; the interface between the serving GW and the eNodeB uses a GPRS tunneling protocol. The forwarded packets that the serving GW receives from the PDSN are in GRE format. Thus, the serving GW needs to convert the formats of the forwarded packets from GRE into GTP. If no resources are available in the eNodeB, the serving GW caches the converted forwarded packets. If resources are already available in the eNodeB, the serving GW sends the converted forwarded packets to the eNodeB.</p>
<p id="p-0096" num="0095">S<b>510</b>: The HRPD AN sends an HRPD AN L<b>2</b> message to the UE, where the message includes an Attach Accept message and an HO Command message.</p>
<p id="p-0097" num="0096">S<b>511</b>: The UE is handed over to the E-UTRAN, and sends a Service Request message to the MME.</p>
<p id="p-0098" num="0097">S<b>512</b>: Authentication may be performed.</p>
<p id="p-0099" num="0098">S<b>513</b>: The MME sends an S1-AP:Initial Context Setup Request message to the eNodeB.</p>
<p id="p-0100" num="0099">S<b>514</b>: The eNodeB initiates a radio bearer (RB) setup process.</p>
<p id="p-0101" num="0100">S<b>515</b>: The eNodeB returns an S1-AP:Initial Context Setup Complete message to the MME.</p>
<p id="p-0102" num="0101">S<b>516</b>: The MME sends an Update Bearer Request message to the serving GW.</p>
<p id="p-0103" num="0102">S<b>517</b>: If the interface between the serving GW and the PDN GW uses the GTP protocol, the serving GW sends an Update Bearer Request message to the PDN GW, and the PDN GW returns an Update Bearer Response message to the serving GW. If the interface between the serving GW and the PDN GW uses a Proxy Mobile IP (PMIP) protocol, the serving GW sends a Proxy BU message to the PDN GW, and the PDN GW returns a Proxy BA message to the serving GW.</p>
<p id="p-0104" num="0103">S<b>518</b>: The Serving GW returns an Update Bearer Response message to the MME.</p>
<p id="p-0105" num="0104">S<b>519</b>: The MME sends an HO Complete message to the HRPD AN to notify the HRPD AN of the completion of the handover.</p>
<p id="p-0106" num="0105">S<b>520</b>: The PDN GW initiates a release process at the source HRPD network.</p>
<p id="p-0107" num="0106">S<b>521</b>: After receiving the HO Complete message, the MME may initiate a &#x201c;Delete Bearer Request&#x201d; process to notify the serving GW of deleting created forwarding tunnel resources.</p>
<p id="p-0108" num="0107">For the data forwarding in the case of handover between heterogeneous networks with a single APN and multiple PDN connections, S<b>508</b> is as follows: The MME sends an S<b>101</b> HO Command message to the HRPD AN, where the message includes an Attach Accept message, an HO Command message, a serving GW address, and PDN connection information.</p>
<p id="p-0109" num="0108">S<b>509</b> is as follows: If the HRPD AN discovers that the UE is handed over from the HRPD network to the E-UTRAN, that is, if the HRPD AN receives the HO Command message from the MME, the HRPD AN notifies the PDSN of creating data forwarding resources between the HRPD network and the E-UTRAN. The notification message sent by the HRPD AN carries the serving GW address and PDN connection information that the HRPD AN receives from the MME. After receiving the preceding notification, the PDSN creates data forwarding resources between the PDSN and the serving GW. That is, for each PDN connection, the PDSN creates a GRE tunnel between the PDSN and the serving GW.</p>
<p id="p-0110" num="0109">The process of handover from an E-UTRAN to an HRPD network through a data forwarding method is also described in the second embodiment of the present invention. Herein, when the receiving network is an HRPD network and the originating network is an E-UTRAN, the first NE of the receiving network is an HRPD AN and the second NE of the receiving network is a PDSN, while the first NE of the originating network is an MME and the second NE of the originating network is an S-GW. As shown in <figref idref="DRAWINGS">FIG. 6A</figref>, the process includes the following steps:</p>
<p id="p-0111" num="0110">S<b>6</b>A<b>01</b>: After discovering that the UE is handed over from the E-UTRAN to the HRPD network, an HRPD AN sends a message to a PDSN.</p>
<p id="p-0112" num="0111">S<b>6</b>A<b>02</b>: The HRPD AN receives a forwarding address (also called an anchor P-P address) from the PDSN.</p>
<p id="p-0113" num="0112">S<b>6</b>A<b>03</b>: The HRPD AN notifies an MME of the forwarding address of the PDSN.</p>
<p id="p-0114" num="0113">S<b>6</b>A<b>04</b>: The MME sends a message to notify the serving GW of creating data forwarding resources between the HRPD network and the E-UTRAN (including a data forwarding tunnel between the serving GW and the PDSN and a data forwarding tunnel between the serving GW and the eNodeB).</p>
<p id="p-0115" num="0114">S<b>6</b>A<b>05</b>: The serving GW notifies the MME of the tunnel information.</p>
<p id="p-0116" num="0115">S<b>6</b>A<b>06</b>: The MME notifies the eNodeB of data forwarding tunnel information of the serving GW.</p>
<p id="p-0117" num="0116">S<b>6</b>A<b>07</b>: The eNodeB forwards cached packets to the serving GW.</p>
<p id="p-0118" num="0117">S<b>6</b>A<b>08</b>: The serving GW forwards the packets the PDSN.</p>
<p id="p-0119" num="0118">Note: For the data forwarding in the case of handover between heterogeneous networks with a single APN and multiple PDN connections, S<b>6</b>A<b>03</b> is as follows: The HRPD AN notifies the MME of the forwarding address of the PDSN and PDN connection information.</p>
<p id="p-0120" num="0119">The handover signaling process associated with the preceding process in the networking scenario is shown in <figref idref="DRAWINGS">FIG. 6B</figref>, and includes the following steps:</p>
<p id="p-0121" num="0120">S<b>601</b>: The UE accesses the E-UTRAN.</p>
<p id="p-0122" num="0121">S<b>602</b>: The UE or eNodeB determines to pre-register with the HRPD network.</p>
<p id="p-0123" num="0122">S<b>603</b>: The UE executes a particular program in the HRPD AN to establish an IP service connection with the PDSN and perform authentication in the HRPD AN.</p>
<p id="p-0124" num="0123">S<b>604</b>: The UE or eNodeB determines to perform handover from the E-UTRAN to the HRPD network.</p>
<p id="p-0125" num="0124">S<b>605</b>: The eNodeB sends a Relocation Indication message to the UE to notify the UE of handover.</p>
<p id="p-0126" num="0125">S<b>606</b>: The UE sends an HRPD Connection Request message to the HRPD AN. The HRPD AN allocates radio resources, and activates the PDSN session.</p>
<p id="p-0127" num="0126">S<b>607</b>: If the HRPD AN discovers that the UE is handed over from the E-UTRAN to the HRPD network, the HRPD AN notifies the PDSN of creating data forwarding resources between the HRPD network and the E-UTRAN. This may be performed as follows:</p>
<p id="p-0128" num="0127">1. The HRPD AN sends an A11-Registration Request message to the PDSN. The HRPD AN adds an indication information element to the message to notify the PDSN of creating data forwarding resources between the HRPD network and the E-UTRAN. The indication information element may include:</p>
<p id="p-0129" num="0128">E-UTRANH to HRPD handover indication.</p>
<p id="p-0130" num="0129">Handover type: The HRPD AN sets this information element to &#x201c;E-UTRAN to HRPD Handover&#x201d;.</p>
<p id="p-0131" num="0130">Data forwarding type: The HRPD AN sets this information element to &#x201c;E-UTRAN to HRPD Data Forwarding&#x201d;.</p>
<p id="p-0132" num="0131">Cause: The HRPD AN sets this information element to &#x201c;E-UTRAN to HRPD Handover&#x201d;.</p>
<p id="p-0133" num="0132">The HRPD AN sets an &#x201c;S&#x201d; flag bit in the Flag information element to &#x201c;True&#x201d; or &#x201c;1&#x201d; to notify the PDSN that the cause is &#x201c;PDSN fast handoff&#x201d;.</p>
<p id="p-0134" num="0133">2. The HRPD AN sends a specific message, for example, A11-Create Data Forwarding Tunnel Request, to notify the PDSN of creating data forwarding resources between the HRPD network and the E-UTRAN.</p>
<p id="p-0135" num="0134">After receiving the preceding notification, the PDSN may return an A11-Registration Reply message or an A11-Create Data Forwarding Tunnel Response to the HRPD AN. The message returned by the PDSN carries the data forwarding address (also called an anchor P-P address) of the PDSN.</p>
<p id="p-0136" num="0135">S<b>608</b>: The HRPD AN sends an S<b>101</b> HO Command (HRPD TCA) message to the MME, where the message carries the data forwarding address of the PDSN.</p>
<p id="p-0137" num="0136">S<b>609</b>: If the MME discovers that the UE is handed over from the E-UTRAN to the HRPD network, the MME chooses the serving GW that the UE is using or selects a serving GW that can forward data between the E-UTRAN and the HRPD network. Then, the MME notifies the selected serving GW of creating data forwarding resources between the HRPD network and the E-UTRAN. This may be performed as follows:</p>
<p id="p-0138" num="0137">1. The MME sends a Create Bearer Request message to the serving GW. The MME adds an indication information element to this message to notify the serving GW of creating data forwarding resources between the HRPD network and the E-UTRAN. The indication information element may include:</p>
<p id="p-0139" num="0138">E-UTRAN to HRPD handover indication.</p>
<p id="p-0140" num="0139">Handover type: The MME sets this information element to &#x201c;E-UTRAN to HRPD Handover&#x201d;.</p>
<p id="p-0141" num="0140">Data forwarding type: The MME sets this information element to &#x201c;E-UTRAN to HRPD Data Forwarding&#x201d;.</p>
<p id="p-0142" num="0141">Cause: The MME sets this information element to &#x201c;E-UTRAN to HRPD Handover&#x201d;.</p>
<p id="p-0143" num="0142">2. The MME sends a specific message, for example, Create Data Forwarding Tunnel Request, to notify the serving GW of creating data forwarding resources between the HRPD network and the E-UTRAN.</p>
<p id="p-0144" num="0143">The message sent by the MME to the serving GW carries a data forwarding address of the PDSN. Subsequently, the serving GW forwards the received packets to a PDSN associated with the data forwarding address of the PDSN.</p>
<p id="p-0145" num="0144">After receiving the preceding message, the serving GW creates data forwarding resources between the HRPD network and the E-UTRAN (data forwarding resources between the serving GW and the PDSN and between the serving GW and the eNodeB). Then, the serving GW returns a Create Bearer Response or Create Data Forwarding Tunnel Response message (serving GW address and serving GW TEID) to the MME. The serving GW address and the serving GW TEID are data forwarding tunnel information allocated by the serving GW. The eNodeB forwards the cached downlink packets to the allocated data forwarding tunnel.</p>
<p id="p-0146" num="0145">The serving GW may start a timer, and release established data forwarding tunnel resources after the timer times out.</p>
<p id="p-0147" num="0146">S<b>610</b>: The MME sends an S1-AP message &#x201c;Relocation Command&#x201d; (including HRPD TCA, serving GW Address, and serving GW TEID) to the eNodeB.</p>
<p id="p-0148" num="0147">S<b>611</b>: After receiving this message, the eNodeB sends an HO Command message to the UE to notify the UE of handover, where the message carries an HRPD TCA message.</p>
<p id="p-0149" num="0148">The eNodeB forwards its cached downlink packets to the serving GW. After receiving the downlink packets forwarded by the eNodeB, the serving GW forwards the downlink packets to the PDSN through the established P-P connection. For the serving GW, the P-P interface uses the GRE protocol; the interface between the serving GW and the eNodeB uses the GTP protocol. The forwarded packets that the serving GW receives from the eNodeB are in GTP format. Thus, the serving GW needs to convert the formats of the forwarded packets from GTP into GRE.</p>
<p id="p-0150" num="0149">S<b>612</b>: The UE is handed over to the HRPD access network, and executes a traffic channel acquisition program.</p>
<p id="p-0151" num="0150">S<b>613</b>: The UE sends an HRPD Traffic Channel Complete (TCC) message to the HRPD AN.</p>
<p id="p-0152" num="0151">S<b>614</b>: The HRPD AN notifies the PDSN UE of handover to a target network. The PDSN needs to notify the PDN GW of updating the downlink data route. This may be performed as follows:</p>
<p id="p-0153" num="0152">1. The HRPD AN sends an A11-Registration Request message to the PDSN. The HRPD AN adds an indication information element to notify the PDSN UE of successful handover to the target network. The PDSN needs to notify the PDN GW of updating the downlink data path. The indication information element may include:</p>
<p id="p-0154" num="0153">Handover complete indication.</p>
<p id="p-0155" num="0154">Handover type: The HRPD AN sets this information element to &#x201c;Handover Complete&#x201d;.</p>
<p id="p-0156" num="0155">Cause: The HRPD AN sets this information element to &#x201c;Handover Complete&#x201d;.</p>
<p id="p-0157" num="0156">The HRPD AN sets an &#x201c;S&#x201d; flag bit of the Flag information element in the A11-Registration Request message to &#x201c;False&#x201d; or &#x201c;0&#x201d;.</p>
<p id="p-0158" num="0157">2. The HRPD AN sends a specific message, for example, A11-Handover Complete, to notify the PDSN UE of successful handover to the target network. The PDSN needs to notify the PDN GW of updating the downlink data path.</p>
<p id="p-0159" num="0158">S<b>615</b>: After receiving the preceding notification, the PDSN sends a Proxy BU message to the PDN GW.</p>
<p id="p-0160" num="0159">S<b>616</b>: The PDSN returns an A11-Registration Reply or A11-Handover Complete Acknowledge message to the HRPD AN.</p>
<p id="p-0161" num="0160">S<b>617</b>: The source E-UTRAN or EPS releases resources.</p>
<p id="p-0162" num="0161">S<b>618</b>: The MME may initiate a &#x201c;Delete Bearer Request&#x201d; process to notify the serving GW of deleting the created forwarding tunnel resources.</p>
<p id="p-0163" num="0162">For the data forwarding in the case of handover between heterogeneous networks with a single APN and multiple PDN connections, S<b>608</b> is as follows: The HRPD AN sends an S<b>101</b> HO Command message (HRPD TCA) to the MME, where the message carries the data forwarding address of the PDSN and PDN connection information.</p>
<p id="p-0164" num="0163">S<b>609</b>: If the MME discovers that the UE is handed over from the E-UTRAN to the HRPD network, the MME chooses the serving GW that the UE is using or selects a serving GW that can forward data between the E-UTRAN and the HRPD network. Then, the MME notifies the selected serving GW of creating data forwarding resources between the HRPD network and the E-UTRAN. The notification message sent by the MME to the serving GW carries the data forwarding address of the PDSN and PDN connection information. Subsequently, the serving GW forwards the received packets to a PDSN associated with the data forwarding address of the PDSN.</p>
<p id="p-0165" num="0164">After receiving the preceding message, the serving GW creates data forwarding resources between the HRPD network and the E-UTRAN (data forwarding resources between the serving GW and the PDSN and between the serving GW and the eNodeB). For each PDN connection, the serving GW creates a GRE tunnel between the serving GW and the PDSN. Subsequently, the serving GW forwards the received packets in this PDN connection to the PDSN through the GRE tunnel.</p>
<p id="p-0166" num="0165">The process of handover from an HRPD network to an E-UTRAN through a bi-casting method is described in the third embodiment of the present invention. Herein, the receiving network is an E-UTRAN; the originating network is an HRPD network; the first NE of the receiving network is an MME; the second NE of the receiving network is an S-GW; and the user plane anchor point NE is a PDN GW. As shown in <figref idref="DRAWINGS">FIG. 7A</figref>, the process includes the following steps:</p>
<p id="p-0167" num="0166">S<b>7</b>A<b>01</b>: After discovering that the UE is handed over from the HRPD network to the E-UTRAN, the MME sends a message to notify the PDN GW of bi-binding.</p>
<p id="p-0168" num="0167">S<b>7</b>A<b>02</b>: The PDN GW is bound with the serving GW and the PDSN.</p>
<p id="p-0169" num="0168">S<b>7</b>A<b>03</b>: After receiving downlink data, the PDN GW bi-casts the downlink data to the serving GW and PDSN.</p>
<p id="p-0170" num="0169">S<b>7</b>A<b>04</b>: After the UE is handed over to the E-UTRAN, the MME notifies the PDN GW of canceling the bi-binding.</p>
<p id="p-0171" num="0170">S<b>7</b>A<b>05</b>: After receiving the downlink data, the PDN GW sends the received downlink data to the serving GW only.</p>
<p id="p-0172" num="0171">The handover signaling process associated with the preceding process in the network scenario is shown in <figref idref="DRAWINGS">FIG. 7B</figref>, and includes the following steps:</p>
<p id="p-0173" num="0172">S<b>701</b>: The UE accesses the HRPD network.</p>
<p id="p-0174" num="0173">S<b>702</b>: The UE or the HRPD AN determines to perform handover from the HRPD network to the E-UTRAN.</p>
<p id="p-0175" num="0174">S<b>703</b>: The UE sends an Attach Request message to the MME through the HRPD network.</p>
<p id="p-0176" num="0175">S<b>704</b>: Authentication is performed.</p>
<p id="p-0177" num="0176">S<b>705</b>: The MME sends an Update Location message to the HSS to obtain the subscription data of the UE. The HSS returns the subscription data of the UE, including address information of the PDN GW used by the UE.</p>
<p id="p-0178" num="0177">S<b>706</b>: The MME selects a serving GW, and sends a Create Default Bearer Request message to the serving GW. The MME adds an indication information element to the Create Default Bearer Request message to notify the serving GW of the cause of the request message or notify subsequent NEs of how to process the request message. The indication information element may include:</p>
<p id="p-0179" num="0178">HRPD to E-UTRAN handover indication or 3GPP to non-3GPP handover indication.</p>
<p id="p-0180" num="0179">Handover type: The MME sets this information element to &#x201c;HRPD to E-UTRAN Handover&#x201d; or &#x201c;non-3GPP to 3GPP Handover&#x201d;.</p>
<p id="p-0181" num="0180">Cause: The MME sets this information element to &#x201c;HRPD to E-UTRAN Handover&#x201d; or &#x201c;non-3GPP to 3GPP Handover&#x201d;.</p>
<p id="p-0182" num="0181">Bi-casting indication: The MME notifies subsequent NEs of the need to perform bi-casting through this information element.</p>
<p id="p-0183" num="0182">S<b>707</b>: If the interface between the serving GW and the PDN GW uses the GTP protocol, the serving GW sends a Create Default Bearer Request message to the PDN GW. The serving GW adds an indication information element to the Create Default Bearer Request message to notify the PDN GW of the cause of the request message or how to process the request message. The indication information element may include:</p>
<p id="p-0184" num="0183">HRPD to E-UTRAN handover indication or non-3GPP to 3GPP handover indication.</p>
<p id="p-0185" num="0184">Handover type: The serving GW sets this information element to &#x201c;HRPD to E-UTRAN Handover&#x201d; or &#x201c;non-3GPP to 3GPP Handover&#x201d;.</p>
<p id="p-0186" num="0185">Cause: The serving GW sets this information element to &#x201c;HRPD to E-UTRAN Handover&#x201d; or &#x201c;non-3GPP to 3GPP Handover&#x201d;.</p>
<p id="p-0187" num="0186">Bi-casting indication: The serving GW notifies the PDN GW of the need to perform bi-casting through this information element.</p>
<p id="p-0188" num="0187">If the interface between the serving GW and the PDN GW uses the PMIP protocol, the serving GW sends a Proxy BU message to the PDN GW. The serving GW adds an indication information element to the Proxy BU message to notify the PDN GW of the cause of the BU message or how to process the BU message. The indication information element may include:</p>
<p id="p-0189" num="0188">HRPD to E-UTRAN handover indication or non-3GPP to 3GPP handover indication.</p>
<p id="p-0190" num="0189">Handover type: The serving GW sets this information element to &#x201c;HRPD to E-UTRAN Handover&#x201d; or &#x201c;non-3GPP to 3GPP Handover&#x201d;.</p>
<p id="p-0191" num="0190">Cause: The serving GW sets this information element to &#x201c;HRPD to E-UTRAN Handover&#x201d; or &#x201c;non-3GPP to 3GPP Handover&#x201d;.</p>
<p id="p-0192" num="0191">Bi-casting indication: The serving GW notifies the PDN GW of the need to perform bi-casting through this information element.</p>
<p id="p-0193" num="0192">The serving GW sets an &#x201c;S&#x201d; flag bit in the Proxy BU message to notify the PDN GW of bi-binding.</p>
<p id="p-0194" num="0193">After receiving the message from the serving GW, the PDN GW adds a BU or a bearer context and retains the resources in the source HRPD. After receiving downlink data, the PDN GW bi-casts the received downlink data in the source HRPD network and target E-UTRAN. The PDN GW may start a timer, and cancel the bi-casting mechanism and release the resources in the source HRPD network after the timer times out.</p>
<p id="p-0195" num="0194">S<b>708</b>: The serving GW returns a Create Default Bearer Response message to the MME.</p>
<p id="p-0196" num="0195">S<b>709</b>: The MME sends an S<b>101</b> HO Command message to the HRPD AN, where the message includes an Attach Accept message and an HO Command message.</p>
<p id="p-0197" num="0196">S<b>7010</b>: The HRPD AN sends an HRPD AN L<b>2</b> message to the UE, where the message includes an Attach Accept message and an HO Command message.</p>
<p id="p-0198" num="0197">S<b>711</b>: The UE is handed over to the E-UTRAN, and sends a Service Request message to the MME.</p>
<p id="p-0199" num="0198">S<b>712</b>: Authentication may be performed.</p>
<p id="p-0200" num="0199">S<b>713</b>: The MME sends an S1-AP: Initial Context Setup Request to the eNodeB.</p>
<p id="p-0201" num="0200">S<b>714</b>: The eNodeB initiates a RB setup process.</p>
<p id="p-0202" num="0201">S<b>715</b>: The eNodeB returns an S1-AP: Initial Context Setup Complete message to the MME.</p>
<p id="p-0203" num="0202">S<b>716</b>: The MME sends an Update Bearer Request message to the serving GW. The MME may add an indication information element to this message to notify the serving GW of the cause of this message or how to process this message. The indication information element may include:</p>
<p id="p-0204" num="0203">Handover complete indication.</p>
<p id="p-0205" num="0204">Handover type: The MME sets this information element to &#x201c;Handover Complete&#x201d;.</p>
<p id="p-0206" num="0205">Update type: The MME sets this information element to &#x201c;User Plane Path Switch&#x201d; or &#x201c;Cancel Bi-casting&#x201d;.</p>
<p id="p-0207" num="0206">Cause: The MME sets this information element to &#x201c;Handover Complete&#x201d;, &#x201c;User Plane Path Switch&#x201d; or &#x201c;Cancel Bi-casting&#x201d;.</p>
<p id="p-0208" num="0207">Cancel bi-casting indication: The MME notifies subsequent NEs of canceling the bi-casting through this information element.</p>
<p id="p-0209" num="0208">Through the preceding indication information element, the MME notifies the serving GW that the bearer update request is caused by the handover of the UE to the target network or notifies the serving GW of the need to switch the user plane path. This flag bit is optional.</p>
<p id="p-0210" num="0209">S<b>707</b>: If the interface between the serving GW and the PDN GW uses the GTP protocol, the serving GW sends an Update Bearer Request message to the PDN GW. The serving GW may add an indication information element to this message to notify the PDN GW of the cause of this message or how to process this message. The indication information element may include:</p>
<p id="p-0211" num="0210">Handover complete indication.</p>
<p id="p-0212" num="0211">Handover type: The serving GW sets this information element to &#x201c;Handover Complete&#x201d;.</p>
<p id="p-0213" num="0212">Update type: The serving GW sets this information element to &#x201c;User Plane Path Switch&#x201d; or &#x201c;Cancel Bi-casting&#x201d;.</p>
<p id="p-0214" num="0213">Cause: The serving GW sets this information element to &#x201c;Handover Complete&#x201d;, &#x201c;User Plane Path Switch&#x201d; or &#x201c;Cancel Bi-casting&#x201d;.</p>
<p id="p-0215" num="0214">Cancel bi-casting indication: The serving GW notifies the PDN GW of canceling the bi-casting through this information element.</p>
<p id="p-0216" num="0215">Through the preceding indication information element, the serving GW notifies the PDN GW that the bearer update request is caused by the handover of the UE to the target network or notifies the PDN GW of the need to switch the user plane path. This flag bit is optional.</p>
<p id="p-0217" num="0216">If the interface between the serving GW and the PDN GW uses the PMIP protocol, the serving GW sends a Proxy BU message to the PDN GW. The serving GW may add an indication information element to this message to notify the PDN GW of the cause of this message or how to process this message. The indication information element may include:</p>
<p id="p-0218" num="0217">Handover complete indication.</p>
<p id="p-0219" num="0218">Handover type: The serving GW sets this information element to &#x201c;Handover Complete&#x201d;.</p>
<p id="p-0220" num="0219">Update type: The serving GW sets this information element to &#x201c;User Plane Path Switch&#x201d; or &#x201c;Cancel Bi-casting&#x201d;.</p>
<p id="p-0221" num="0220">Cause: The serving GW sets this information element to &#x201c;Handover Complete&#x201d;, &#x201c;User Plane Path Switch&#x201d; or &#x201c;Cancel Bi-casting&#x201d;.</p>
<p id="p-0222" num="0221">Cancel bi-casting indication: The serving GW notifies the PDN GW of canceling the bi-casting through this information element.</p>
<p id="p-0223" num="0222">The serving GW clears the &#x201c;S&#x201d; flag bit in the Proxy BU message to notify the PDN GW of canceling the binding of the source network.</p>
<p id="p-0224" num="0223">Through the preceding indication information element, the serving GW notifies the PDN GW that the BU message is caused by the handover of the UE to the target network or notifies the PDN GW of the need to switch the user plane path. This flag bit is optional.</p>
<p id="p-0225" num="0224">After receiving the preceding message, the PDN GW cancels the data bi-casting mechanism and routes the downlink data to the serving GW. After receiving the downlink data, the PDN GW sends the received downlink data to the serving GW only.</p>
<p id="p-0226" num="0225">S<b>708</b>: The serving GW returns an Update Bearer Response message to the MME.</p>
<p id="p-0227" num="0226">S<b>719</b>: The MME sends an HO Complete message to the HRPD AN to notify the HRPD AN of the completion of the handover.</p>
<p id="p-0228" num="0227">S<b>720</b>: The PDN GW initiates a release process at the source HRPD network.</p>
<p id="p-0229" num="0228">The process of handover from an E-UTRAN to an HRPD network through a bi-casting method is also described in the third embodiment of the present invention. Herein, the receiving network is an HRPD network; the originating network is an E-UTRAN; the first NE of the receiving network is an HRPD AN; the second NE of the receiving network is a PDSN; and the user plane anchor point NE is a PDN GW. As shown in <figref idref="DRAWINGS">FIG. 8A</figref>, the process includes the following steps:</p>
<p id="p-0230" num="0229">S<b>8</b>A<b>01</b>: After discovering that the UE is handed over from the E-UTRAN to the HRPD network, the HRPD AN sends a message to notify the PDN GW of bi-binding.</p>
<p id="p-0231" num="0230">S<b>8</b>A<b>02</b>: The PDN GW is bound with the serving GW and the PDSN.</p>
<p id="p-0232" num="0231">S<b>8</b>A<b>03</b>: After receiving downlink data, the PDN GW bi-casts the downlink data to the serving GW and PDSN.</p>
<p id="p-0233" num="0232">S<b>8</b>A<b>04</b>: After the UE is handed over to the HRPD network, the HRPD AN notifies the PDN GW of canceling the bi-binding.</p>
<p id="p-0234" num="0233">S<b>8</b>A<b>05</b>: After receiving the downlink data, the PDN GW sends the received downlink data to the serving GW only.</p>
<p id="p-0235" num="0234">The handover signaling process associated with the preceding process in the network scenario is shown in <figref idref="DRAWINGS">FIG. 8B</figref>, and includes the following steps:</p>
<p id="p-0236" num="0235">S<b>801</b>: The UE accesses the E-UTRAN.</p>
<p id="p-0237" num="0236">S<b>802</b>: The UE or the eNodeB determines to register with the HRPD network.</p>
<p id="p-0238" num="0237">S<b>803</b>: The UE executes a particular program in the HRPD AN to establish an IP service connection with the PDSN and perform authentication in the HRPD AN.</p>
<p id="p-0239" num="0238">S<b>804</b>: The UE or the eNodeB determines to perform handover from the E-UTRAN to the HRPD network.</p>
<p id="p-0240" num="0239">S<b>805</b>: The eNodeB sends a Relocation Indication message to the UE to notify the UE of handover.</p>
<p id="p-0241" num="0240">S<b>806</b>: The UE sends an HRPD Connection Request message to the HRPD AN. The HRPD AN allocates radio resources, and activates the PDSN session.</p>
<p id="p-0242" num="0241">S<b>807</b>: The HRPD AN sends an A11-Registration Request message to the PDSN. The HRPD AN adds an indication information element to this message to notify the PDSN of the cause of this registration request or how to process this registration request. The indication information element may include:</p>
<p id="p-0243" num="0242">E-UTRAN to HRPD handover indication or 3GPP to non-3GPP handover indication.</p>
<p id="p-0244" num="0243">Handover type: The HRPD AN sets this information element to &#x201c;E-UTRAN to HRPD Handover&#x201d; or &#x201c;3GPP to non-3GPP Handover&#x201d;.</p>
<p id="p-0245" num="0244">Cause: The HRPD AN sets this information element to &#x201c;E-UTRAN to HRPD Handover&#x201d; or &#x201c;3GPP to non-3GPP Handover&#x201d;.</p>
<p id="p-0246" num="0245">Bi-casting indication: The HRPD AN notifies subsequent NEs of the need to perform bi-casting through this information element.</p>
<p id="p-0247" num="0246">The HRPD AN sets the &#x201c;S&#x201d; flag bit of the Flag information element in the A11-Registration Request message to &#x201c;True&#x201d; or &#x201c;1&#x201d; to notify the PDSN that this registration request is caused by PDSN fast handoff.</p>
<p id="p-0248" num="0247">S<b>808</b>: After receiving the A11-Registration Request message, the PDSN sends a Proxy BU message to the PDN GW if the PDSN discovers that this registration request is caused by handover or that the subsequent NEs need to perform bi-casting. The PDSN may add an indication information element to this message to notify the PDN GW of the cause of this BU message or how to process this BU message. The indication information element may include:</p>
<p id="p-0249" num="0248">E-UTRAN to HRPD handover indication or 3GPP to non-3GPP handover indication.</p>
<p id="p-0250" num="0249">Handover type: The PDSN sets this information element to &#x201c;E-UTRAN to HRPD Handover&#x201d; or &#x201c;3GPP to non-3GPP Handover&#x201d;.</p>
<p id="p-0251" num="0250">Cause: The PDSN sets this information element to &#x201c;E-UTRAN to HRPD Handover&#x201d; or &#x201c;3GPP to non-3GPP Handover&#x201d;.</p>
<p id="p-0252" num="0251">Bi-casting indication: The PDSN notifies subsequent NEs of the need to perform bi-casting through this information element.</p>
<p id="p-0253" num="0252">The PDSN sets the &#x201c;S&#x201d; flag bit in the Proxy BU message to notify the PDN GW of bi-binding.</p>
<p id="p-0254" num="0253">After receiving the preceding notification, the PDN GW adds a BU, and retains resources in the source E-UTRAN. After receiving downlink data, the PDN GW bi-casts the downlink data in the source E-UTRAN and target HRPD network. The PDN GW may start a timer, cancel the bi-casting mechanism and release resources in the source E-UTRAN after the timer times out.</p>
<p id="p-0255" num="0254">S<b>809</b>: The PDSN returns an A11-Registration Reply message to the HRPD AN.</p>
<p id="p-0256" num="0255">S<b>810</b>: The HRPD AN sends an S<b>101</b> HO Command message (HRPD TCA) to the MME.</p>
<p id="p-0257" num="0256">S<b>811</b>: The MME sends an S1-AP message &#x201c;Relocation Command&#x201d; (HRPD TCA) to the eNodeB.</p>
<p id="p-0258" num="0257">S<b>812</b>: After receiving this message, the eNodeB sends an HO Command message to the UE to notify the UE of handover, where the HO Command message carries an HRPD TCA message.</p>
<p id="p-0259" num="0258">S<b>813</b>: The UE is handed over to the HRPD AN and executes a traffic channel acquisition program.</p>
<p id="p-0260" num="0259">S<b>814</b>: The UE sends an HRPD Traffic Channel Complete (TCC) message to the HRPD AN.</p>
<p id="p-0261" num="0260">S<b>815</b>: The HRPD AN sends an A11-Registration Request message to the PDSN. The HRPD AN adds an indication information element to this registration request message to notify the PDSN that this registration request is caused by the handover of the UE to the target network and the PDSN needs to notify the PDN GW of updating the downlink data route. The indication information element may include:</p>
<p id="p-0262" num="0261">Handover complete indication.</p>
<p id="p-0263" num="0262">Handover type: The HRPD AN sets this information element to &#x201c;Handover Complete&#x201d;.</p>
<p id="p-0264" num="0263">Update type: The HRPD AN sets this information element to &#x201c;User Plane Path Switch&#x201d; or &#x201c;Cancel Bi-casting&#x201d;.</p>
<p id="p-0265" num="0264">Cause: The HRPD AN sets this information element to &#x201c;Handover Complete&#x201d;, &#x201c;User Plane Path Switch&#x201d; or &#x201c;Cancel Bi-casting&#x201d;.</p>
<p id="p-0266" num="0265">Cancel bi-casting indication: The HRPD AN notifies subsequent NEs of canceling bi-casting through this information element.</p>
<p id="p-0267" num="0266">The HRPD AN sets the &#x201c;S&#x201d; flag bit of the Flag information element in the A11-Registration Request to &#x201c;False&#x201d; or &#x201c;0&#x201d;.</p>
<p id="p-0268" num="0267">Through the preceding indication information element, the HRPD AN notifies the PDSN UE of successful handover to the target network or the need to switch the user plane path. This flag bit is optional.</p>
<p id="p-0269" num="0268">S<b>816</b>: After receiving the A11-Registration Request message, the PDSN sends a Proxy BU message to the PDN GW if the PDSN discovers that this registration request is caused by the handover of the UE to the HRPD network or discovers that the user plane path needs to be switched. The PDSN may add an indication information element to this registration request message to notify the PDN GW of the cause of this BU message or how to process this BU message. The indication information element may include:</p>
<p id="p-0270" num="0269">Handover complete indication.</p>
<p id="p-0271" num="0270">Handover type: The PDSN sets this information element to &#x201c;Handover Complete&#x201d;.</p>
<p id="p-0272" num="0271">Update type: The PDSN sets this information element to &#x201c;User Plane Path Switch&#x201d; or &#x201c;Cancel Bi-casting&#x201d;.</p>
<p id="p-0273" num="0272">Cause: The PDSN sets this information element to &#x201c;Handover Complete&#x201d;, &#x201c;User Plane Path Switch&#x201d; or &#x201c;Cancel Bi-casting&#x201d;.</p>
<p id="p-0274" num="0273">Cancel bi-casting indication: The PDSN notifies subsequent NEs of canceling bi-casting through this information element.</p>
<p id="p-0275" num="0274">The PDSN clears the &#x201c;S&#x201d; flag bit in the Proxy BU message to notify the PDN GW of canceling the bi-binding (that is, canceling the binding in the source network).</p>
<p id="p-0276" num="0275">Through the preceding indication information element, the PDSN notifies the PDSN GW that the UE is handed over to the target network or the need to switch the user plane path or to cancel the bi-casting. This flag bit is optional.</p>
<p id="p-0277" num="0276">After receiving the preceding message, the PDN GW cancels the data bi-casting mechanism and routes the downlink data to the PDSN. After receiving the downlink data, the PDN GW sends the received downlink data to the PDSN only.</p>
<p id="p-0278" num="0277">S<b>817</b>: The PDSN returns an A11-Registration Reply message to the HRPD AN.</p>
<p id="p-0279" num="0278">S<b>818</b>: The source E-UTRAN or EPS releases resources.</p>
<p id="p-0280" num="0279">Embodiments of the present invention provide a lossless data processing method in the case of handover between heterogeneous networks. This method overcomes the problem of data loss during the handover between heterogeneous networks in the existing technology by using a data forwarding method or a bi-casting method, reduces the duration of user service interruption and enhances the user experience.</p>
<p id="p-0281" num="0280">A data processing system is provided in the fourth embodiment of the present invention, used for forwarding data in the case of handover between heterogeneous networks. As shown in <figref idref="DRAWINGS">FIG. 9</figref>, the data processing system includes a data processing device <b>10</b> of a receiving network and a data processing device <b>20</b> of an originating network. The data processing device <b>10</b> of the receiving network is adapted to create a data forwarding address, and receive data from the data processing device <b>20</b> of an originating network.</p>
<p id="p-0282" num="0281">The data processing device <b>10</b> of the receiving network further includes:</p>
<p id="p-0283" num="0282">a handover originating entity <b>11</b>, adapted to: notify a gateway of the local network of creating a data forwarding address when detecting that a UE in an originating network is handed over to the local network, and send the data forwarding address to the originating network, where: when the local network is an HRPD network, the handover originating entity <b>11</b> is located in an HRPD AN; when the local network is an E-UTRAN, the handover originating entity <b>11</b> is located in an MME; and</p>
<p id="p-0284" num="0283">a gateway <b>12</b> of the receiving network, adapted to: create a data forwarding address when receiving the notification message from the handover originating entity <b>11</b>, notify the handover originating entity <b>11</b> of the data forwarding address, and receive data from the originating network.</p>
<p id="p-0285" num="0284">The data processing device <b>20</b> of the originating network further includes:</p>
<p id="p-0286" num="0285">a handover processing entity <b>21</b>, adapted to: obtain a data forwarding address created in the receiving network when the UE in the local network is handed over to the receiving network, and send the data forwarding address to a gateway <b>22</b> of the originating network, where: when the local network is an HRPD network, the handover processing entity <b>21</b> is located in the HRPD AN; when the local network is an E-UTRAN, the handover processing entity <b>21</b> is located in the MME; and</p>
<p id="p-0287" num="0286">the gateway <b>22</b> of the originating network, adapted to: create a data forwarding tunnel between the gateway <b>22</b> of the originating network and the gateway <b>12</b> of the receiving network according to the data forwarding address from the handover processing entity <b>21</b>, and send data to the receiving network through the data forwarding tunnel.</p>
<p id="p-0288" num="0287">A data processing system is provided in the fifth embodiment of the present invention, used for forwarding data in the case of handover between heterogeneous networks. As shown in <figref idref="DRAWINGS">FIG. 10</figref>, the data processing system includes:</p>
<p id="p-0289" num="0288">a data processing device <b>40</b> of a receiving network, adapted to: notify a user plane anchor point NE <b>50</b> of bi-casting when detecting that a UE is handed over from an originating network to the local network, and receive data from the user plane anchor point NE <b>50</b>; and</p>
<p id="p-0290" num="0289">the user plane anchor point NE <b>50</b>, adapted to: perform bi-casting in the receiving network and the originating network according to the notification from the receiving network, and send data to the receiving network and the originating network.</p>
<p id="p-0291" num="0290">The data processing device <b>40</b> of the receiving network further includes:</p>
<p id="p-0292" num="0291">a handover originating entity <b>41</b>, adapted to notify a gateway <b>42</b> of the local network when detecting that the UE in the originating network is handed over to the local network, where: when the local network is an HRPD network, the handover originating entity is located in an HRPD AN; when the local network is an E-UTRAN, the handover originating entity <b>11</b> is located in an MME; and</p>
<p id="p-0293" num="0292">the gateway <b>42</b> of the receiving network, adapted to: notify the user plane anchor point NE <b>50</b> of the receiving network and the originating network when receiving the notification from the handover originating entity <b>41</b>; and receive data that the user plane anchor point NE <b>50</b> sends to the originating network and the receiving network.</p>
<p id="p-0294" num="0293">Through the system and device provided in preceding embodiments of the present invention, a lossless data processing method is provided in the case of handover between heterogeneous networks. This method overcomes the problem of data loss during the handover between heterogeneous networks in the existing technology by using a data forwarding method or a bi-casting method, reduces the duration of user service interruption and enhances the user experience.</p>
<p id="p-0295" num="0294">Through the preceding description of embodiments of the present invention, it is understandable to those skilled in the art that embodiments of the present invention may be implemented by hardware or by software in combination with a necessary hardware platform. Thus, the technical solution of the present invention may be made into software. The software may be stored in a non-volatile storage medium (for example, a CD-ROM, a USB disk, and a mobile hard disk), and include several instructions that instruct a computer device (a personal computer, a server, or a network device) to perform the methods provided in each embodiment of the present invention.</p>
<p id="p-0296" num="0295">Although the present invention has been described through several exemplary embodiments, the invention is not limited to such embodiments. It is apparent that those skilled in the art can make various modifications and variations to the invention without departing from the spirit and scope of the invention. The invention is intended to cover the modifications and variations provided that they fall in the scope of protection defined by the following claims or their equivalents.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A data processing method, comprising:
<claim-text>when a user equipment (UE) is handed over from an originating network to a receiving network, receiving, by the originating network, a data forwarding address obtained by the receiving network;</claim-text>
<claim-text>creating a data forwarding tunnel between an originating network gateway and a receiving network gateway according to the data forwarding address; and</claim-text>
<claim-text>forwarding data to the receiving network through the data forwarding tunnel, wherein when the receiving network is a high rate packet data (HRPD) network and the originating network is an evolved UMTS terrestrial radio access network (E-UTRAN), the method further comprises:</claim-text>
<claim-text>obtaining, by an HRPD access network (HRPD AN) of the HRPD network, the data forwarding address from a gateway packet data serving node (PDSN) of the HRPD network; and</claim-text>
<claim-text>the process of receiving, by the originating network, the data forwarding address obtained by the receiving network comprises receiving, by a mobility management entity (MME) of the E-UTRAN, the data forwarding address from the HRPD AN.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The data processing method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the process of creating the data forwarding tunnel between the originating network gateway and the receiving network gateway according to the data forwarding address comprises:
<claim-text>sending, by the MME, the data forwarding address to a serving gateway (S-GW) of the E-UTRAN to notify the S-GW of establishing a data forwarding tunnel;</claim-text>
<claim-text>establishing, by the S-GW, a data forwarding tunnel between the PDSN and the S-GW according to the data forwarding address, and</claim-text>
<claim-text>establishing, by the S-GW, a data forwarding tunnel between an evolved NodeB (eNodeB) on the E-UTRAN and the S-GW.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The data processing method of <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the process of forwarding data to the receiving network comprises:
<claim-text>receiving, by the S-GW, packets that the eNodeB sends through the data forwarding tunnel, and</claim-text>
<claim-text>sending the received packets to the PDSN through the data forwarding tunnel between the PDSN and the S-GW.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The data processing method of <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the process of notifying the S-GW of establishing a data forwarding tunnel comprises:
<claim-text>sending, by the MME, a Create Bearer Request message to the S-GW, which includes an indication information element to indicate the S-GW of establishing the data forwarding tunnel.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The data processing method of <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the process of notifying the S-GW of establishing a data forwarding tunnel comprises:
<claim-text>sending, by the MME, a Create Data Forwarding Tunnel Request to the S-GW, to notify the S-GW of establishing the data forwarding tunnel.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The data processing method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the process of obtaining the data forwarding address from the PDSN of the HRPD network by the HRPD AN comprises:
<claim-text>notifying, by the HRPD AN, the PDSN of establishing the data forwarding tunnel; and notifying, by the PDSN, the HRPD AN of the data forwarding address of the data forwarding tunnel.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The data processing method of <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein after the S-GW establishes the data forwarding tunnel between the PDSN and the S-GW and the data forwarding tunnel between the eNodeB and the S-GW, the method further comprises:
<claim-text>by the S-GW, starting a timer, and releasing the established data forwarding tunnel after the timer expires.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. A data processing method, comprising:
<claim-text>when a user equipment (UE) is handed over from an originating network to a receiving network, receiving, by the originating network, a data forwarding address obtained by the receiving network;</claim-text>
<claim-text>creating a data forwarding tunnel between an originating network gateway and a receiving network gateway according to the data forwarding address; and</claim-text>
<claim-text>forwarding data to the receiving network through the data forwarding tunnel, wherein when the receiving network is an evolved UMTS terrestrial radio access network (E-UTRAN) and the originating network is a high rate packet data (HRPD) network, the method further comprises:</claim-text>
<claim-text>obtaining, by a mobility management entity (MME) of the receiving network, the data forwarding address from a serving gateway (S-GW) of the receiving network; and</claim-text>
<claim-text>the process of receiving, by the originating network, the data forwarding address obtained by the receiving network comprises receiving, by an HRPD access network (HRPD AN) of the originating network, the data forwarding address from the MME.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The data processing method of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the process of creating the data forwarding tunnel between the originating network gateway and the receiving network gateway according to the data forwarding address comprises:
<claim-text>sending, by the HRPD AN, the data forwarding address to a gateway packet data serving node (PDSN) of the HRPD network, and notifying the PDSN of establishing a data forwarding tunnel; and</claim-text>
<claim-text>establishing, by the PDSN, a data forwarding tunnel between the PDSN and the S-GW according to the data forwarding address.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The data processing method of <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the process of notifying the PDSN of establishing a data forwarding tunnel comprises:
<claim-text>sending, by the HRPD AN, an A11-Registration Request message to the PDSN, which includes an indication information element to indicate the PDSN of establishing the data forwarding tunnel.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The data processing method of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the process of forwarding data to the receiving network comprises: forwarding, by the PDSN, received packets to the S-GW through the data forwarding tunnel between the PDSN and the S-GW; caching, by the S-GW, the received packets.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The data processing method of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the process of forwarding data to the receiving network comprises:
<claim-text>forwarding, by the PDSN, received packets to the S-GW through the data forwarding tunnel between the PDSN and the S-GW; forwarding, by the S-GW, the received packets to an eNodeB through the data forwarding tunnel between the S-GW and the eNodeB.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. A data processing system of a receiving network that implements a handover process from an originating network, comprising:
<claim-text>a handover originating entity to notify a gateway of the receiving network of creating data forwarding resources when detecting that a user equipment (UE) is handed over to the receiving network, receive a data forwarding address sent from the gateway of the receiving network, and send the data forwarding address to the originating network for creation of a data forwarding tunnel between the gateway of the receiving network and a gateway of the originating network gateway according to the data forwarding address, thereby data forwarded data to the receiving network through the data forwarding tunnel; and</claim-text>
<claim-text>the gateway of the receiving network to receive the notification from the handover originating entity, create data forwarding resources, and send the data forwarding address to the handover originating entity,</claim-text>
<claim-text>wherein when the receiving network is a high rate packet data (HRPD) network and the originating network is an evolved UMTS terrestrial radio access network (E-UTRAN), the system further comprises:</claim-text>
<claim-text>an HRPD access network (HRPD AN) of the HRPD network to obtain the data forwarding address from a gateway packet data serving node (PDSN) of the HRPD network, thereby receipt, by the originating network, of the data forwarding address obtained by the receiving network comprises receiving, by a mobility management entity (MME) of the E-UTRAN, the data forwarding address from the HRPD AN; or</claim-text>
<claim-text>wherein when the receiving network is an evolved UMTS terrestrial radio access network (E-UTRAN) and the originating network is a high rate packet data (HRPD) network, the system further comprises:</claim-text>
<claim-text>a mobility management entity (MME) of the receiving network to obtain the data forwarding address from a serving gateway (S-GW) of the receiving network, thereby receipt, by the originating network, of the data forwarding address obtained by the receiving network comprises receiving, by an HRPD access network (HRPD AN) of the originating network, the data forwarding address from the MME. </claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
