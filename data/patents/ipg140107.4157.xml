<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625226-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625226</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13304227</doc-number>
<date>20111123</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<us-term-of-grant>
<us-term-extension>138</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>11</class>
<subclass>B</subclass>
<main-group>5</main-group>
<subgroup>035</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>11</class>
<subclass>B</subclass>
<main-group>20</main-group>
<subgroup>10</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>03</class>
<subclass>H</subclass>
<main-group>7</main-group>
<subgroup>30</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>03</class>
<subclass>H</subclass>
<main-group>7</main-group>
<subgroup>40</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>03</class>
<subclass>K</subclass>
<main-group>5</main-group>
<subgroup>159</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>360 65</main-classification>
<further-classification>360 39</further-classification>
<further-classification>375232</further-classification>
</classification-national>
<invention-title id="d2e53">Fixing tap coefficients in a programmable finite-impulse-response equalizer</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6381085</doc-number>
<kind>B1</kind>
<name>Du et al.</name>
<date>20020400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6385239</doc-number>
<kind>B1</kind>
<name>Okamoto et al.</name>
<date>20020500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>6523052</doc-number>
<kind>B1</kind>
<name>Staszewski</name>
<date>20030200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>6810096</doc-number>
<kind>B1</kind>
<name>Saito et al.</name>
<date>20041000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>375341</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>7436615</doc-number>
<kind>B2</kind>
<name>Eleftheriou</name>
<date>20081000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>7468940</doc-number>
<kind>B2</kind>
<name>Higashino</name>
<date>20081200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>369 5922</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>7589927</doc-number>
<kind>B2</kind>
<name>Hutchins et al.</name>
<date>20090900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>7663831</doc-number>
<kind>B2</kind>
<name>Hayashi et al.</name>
<date>20100200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>7982985</doc-number>
<kind>B1</kind>
<name>Chaichanavong</name>
<date>20110700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>2001/0043651</doc-number>
<kind>A1</kind>
<name>Nishimura et al.</name>
<date>20011100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>375232</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>CM</country>
<doc-number>CN1306703</doc-number>
<kind>A</kind>
<date>20010100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>CN</country>
<doc-number>1860546</doc-number>
<kind>A</kind>
<date>20060800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00013">
<othercit>Combined Search and Examination Report under Sections 17 and 18(3), Application No. GB1214206.3, Dec. 6, 2012.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00014">
<othercit>PCT International Search Report and Written Opinion, International App. No. PCT/IB2012/056274, Mar. 28, 2013.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00015">
<othercit>Reply to International Search Report and Written Opinion, App. No. GB1214206.3, Jan. 29, 2013.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>20</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>None</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>10</number-of-drawing-sheets>
<number-of-figures>13</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20130128374</doc-number>
<kind>A1</kind>
<date>20130523</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Christensen</last-name>
<first-name>Eric Rolf</first-name>
<address>
<city>Tucson</city>
<state>AZ</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Gale</last-name>
<first-name>Ernest Stewart</first-name>
<address>
<city>Tucson</city>
<state>AZ</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Hutchins</last-name>
<first-name>Robert Allen</first-name>
<address>
<city>Tucson</city>
<state>AZ</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="004" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Oelcer</last-name>
<first-name>Sedat</first-name>
<address>
<city>Kilchberg</city>
<country>CH</country>
</address>
</addressbook>
<residence>
<country>CH</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Christensen</last-name>
<first-name>Eric Rolf</first-name>
<address>
<city>Tucson</city>
<state>AZ</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Gale</last-name>
<first-name>Ernest Stewart</first-name>
<address>
<city>Tucson</city>
<state>AZ</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Hutchins</last-name>
<first-name>Robert Allen</first-name>
<address>
<city>Tucson</city>
<state>AZ</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="004" designation="us-only">
<addressbook>
<last-name>Oelcer</last-name>
<first-name>Sedat</first-name>
<address>
<city>Kilchberg</city>
<country>CH</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Nelson and Nelson</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
<agent sequence="02" rep-type="attorney">
<addressbook>
<last-name>Nelson</last-name>
<first-name>Daniel P.</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
<agent sequence="03" rep-type="attorney">
<addressbook>
<last-name>Nelson</last-name>
<first-name>Alexis V.</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>International Business Machines Corporation</orgname>
<role>02</role>
<address>
<city>Armonk</city>
<state>NY</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Holder</last-name>
<first-name>Regina N</first-name>
<department>2688</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A method for selecting which tap coefficients of a programmable finite-impulse-response (FIR) equalizer to fix is disclosed. In one embodiment, such a method includes performing an initial calibration to determine an initial value for each tap coefficient of a FIR equalizer. These initial values may be used to produce a first waveform. The method then performs an operation on the first waveform to produce a second waveform comprising multiple lobes. The second waveform is then analyzed to determine one or more lobes of the second waveform that have the largest area. The method then fixes coefficients of one or more taps that are closest to the lobe or lobes having the largest area. A corresponding apparatus and computer program product are also disclosed.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="210.65mm" wi="120.57mm" file="US08625226-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="210.99mm" wi="133.69mm" orientation="landscape" file="US08625226-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="243.16mm" wi="123.27mm" orientation="landscape" file="US08625226-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="238.17mm" wi="114.89mm" orientation="landscape" file="US08625226-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="228.77mm" wi="126.92mm" file="US08625226-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="174.92mm" wi="173.65mm" file="US08625226-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="221.74mm" wi="167.89mm" file="US08625226-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="175.60mm" wi="172.38mm" file="US08625226-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="225.55mm" wi="173.65mm" file="US08625226-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="177.55mm" wi="182.03mm" file="US08625226-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="226.82mm" wi="175.60mm" file="US08625226-20140107-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND</heading>
<p id="p-0002" num="0001">1. Field of the Invention</p>
<p id="p-0003" num="0002">This invention relates to apparatus and methods for reading data on storage media such as magnetic tape.</p>
<p id="p-0004" num="0003">2. Background of the Invention</p>
<p id="p-0005" num="0004">As the storage capacities of modern tape cartridges are pushed higher and higher, it is becoming increasingly difficult to read data from magnetic tape. Small variations in manufacturing or variations in temperature, humidity, or head-to-tape interfaces can cause changes in the read-back signal which may cause traditional recording channels to fail to detect data. Modern tape drives are able to handle this variability by being adaptable. Based upon the signals read from tape, the read-detect channel of the modern tape drive can adjust the equalization of the read-back signal to improve the signal-to-noise ratio. It can also compensate for head asymmetry or modify data detection parameters to improve the detection reliability.</p>
<p id="p-0006" num="0005">One of the problems with the adaptability discussed above is that sometimes the read-detect channel does not converge to an optimal configuration. Instead, it may diverge from an optimal configuration such that data can no longer be detected. With otherwise good media, head, and tape path, the channel may adapt in a manner that renders the data useless. This problem tends to get worse as the storage density of tape increases.</p>
<p id="p-0007" num="0006">Divergence of the equalizer is the primary cause of read-detect channel instability. In many cases, this divergence may be controlled by fixing a certain number of tap coefficients in the adaptable finite-impulse-response (FIR) equalizer (also known as a FIR filter). For example, in a typical FIR equalizer that includes seventeen taps, four tap coefficients out of seventeen may be fixed. If the correct tap coefficients are fixed, then the FIR equalizer will be stable and the FIR equalizer will converge to an optimal configuration (assuming that the initial configuration of the FIR equalizer was reasonable). If the wrong tap coefficients are fixed, then the FIR equalizer will not converge and the equalization will eventually get so bad that the data read will not be usable.</p>
<p id="p-0008" num="0007">In the FIR equalizers of many current tape drives, four adjacent tap coefficients out of seventeen are fixed. In such drives, the initial configuration (i.e., tap coefficients) of the equalizer may be determined using a calibration procedure. The largest tap coefficient of the seventeen may then be fixed. Two tap coefficients on one side of the largest tap coefficient and one tap coefficient on the other side of the largest tap coefficient may be fixed. The side with the two fixed tap coefficients is typically selected to be in the direction of the next largest tap coefficient of the seventeen coefficients. This methodology has worked well historically. However, as tape linear densities have increased and recording properties of the storage media have changed, this methodology increasingly results in divergent FIR equalizers.</p>
<p id="p-0009" num="0008">In view of the foregoing, what is needed is an improved methodology to select which tap coefficients of a programmable FIR equalizer to fix. Ideally, such a methodology will allow FIR equalizers to more consistently converge to an optimal configuration that improves, rather than worsens, the signal to noise ratio.</p>
<heading id="h-0002" level="1">SUMMARY</heading>
<p id="p-0010" num="0009">The invention has been developed in response to the present state of the art and, in particular, in response to the problems and needs in the art that have not yet been fully solved by currently available apparatus and methods. Accordingly, the invention has been developed to provide apparatus and methods for more effectively selecting which tap coefficients of a programmable finite-impulse-response (FIR) equalizer to fix. The features and advantages of the invention will become more fully apparent from the following description and appended claims, or may be learned by practice of the invention as set forth hereinafter.</p>
<p id="p-0011" num="0010">Consistent with the foregoing, a method for selecting which tap coefficients of a programmable finite-impulse-response (FIR) equalizer to fix is disclosed herein. In one embodiment, such a method includes performing an initial calibration to determine an initial value for each tap coefficient of a FIR equalizer. These initial values may be used to produce a first waveform. The method then performs an operation on the first waveform to produce a second waveform comprising multiple lobes. The second waveform is then analyzed to determine one or more lobes of the second waveform that have the largest area. The method then fixes coefficients of one or more taps that are closest to the lobe or lobes having the largest area.</p>
<p id="p-0012" num="0011">A corresponding apparatus and computer program product are also disclosed and claimed herein.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0013" num="0012">In order that the advantages of the invention will be readily understood, a more particular description of the invention briefly described above will be rendered by reference to specific embodiments illustrated in the appended drawings. Understanding that these drawings depict only typical embodiments of the invention and are not therefore to be considered limiting of its scope, the invention will be described and explained with additional specificity and detail through use of the accompanying drawings, in which:</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 1</figref> is a high-level block diagram showing one example of a read-detect channel for a tape drive;</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 2</figref> is a high-level block diagram showing a conventional programmable finite-impulse-response (FIR) equalizer;</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 3</figref> is a high-level block diagram showing a programmable FIR equalizer that is functionally equivalent to the programmable FIR equalizer illustrated in <figref idref="DRAWINGS">FIG. 2</figref>;</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 4</figref> is a flow chart showing one embodiment of an improved method for selecting which tap coefficients of a programmable finite-impulse-response (FIR) equalizer to fix;</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 5A</figref> is a table showing initial tap coefficients for a first exemplary FIR, as well as tap coefficients that are fixed using an improved method in accordance with the invention;</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 5B</figref> is a graph showing a first waveform generated for the first exemplary FIR, and a second waveform representing a modified version of the first waveform;</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 5C</figref> is a graph showing the magnitude of the second waveform illustrated in <figref idref="DRAWINGS">FIG. 5B</figref>;</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 6A</figref> is a table showing initial tap coefficients for a second exemplary FIR, as well as tap coefficients that are fixed using an improved method in accordance with the invention;</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 6B</figref> is a graph showing a first waveform generated for the second exemplary FIR, and a second waveform representing a modified version of the first waveform;</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 6C</figref> is a graph showing the magnitude of the second waveform illustrated in <figref idref="DRAWINGS">FIG. 6B</figref>;</p>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 7A</figref> is a table showing initial tap coefficients for a third exemplary FIR, as well as tap coefficients that are fixed using an improved method in accordance with the invention;</p>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. 7B</figref> is a graph showing a first waveform generated for the third exemplary FIR, and a second waveform representing a modified version of the first waveform; and</p>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. 7C</figref> is a graph showing the magnitude of the second waveform illustrated in <figref idref="DRAWINGS">FIG. 7B</figref>.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0027" num="0026">It will be readily understood that the components of the present invention, as generally described and illustrated in the Figures herein, could be arranged and designed in a wide variety of different configurations. Thus, the following more detailed description of the embodiments of the invention, as represented in the Figures, is not intended to limit the scope of the invention, as claimed, but is merely representative of certain examples of presently contemplated embodiments in accordance with the invention. The presently described embodiments will be best understood by reference to the drawings, wherein like parts are designated by like numerals throughout.</p>
<p id="p-0028" num="0027">As will be appreciated by one skilled in the art, the present invention may be embodied as an apparatus, system, method, or computer program product. Furthermore, the present invention may be implemented as a hardware embodiment, a software embodiment (including firmware, resident software, microcode, etc.) configured to operate hardware, or an embodiment combining both software and hardware elements. Each of these embodiments may be represented by one or more modules or blocks. Furthermore, the present invention may be implemented in a computer-usable storage medium embodied in any tangible medium of expression having computer-usable program code stored therein.</p>
<p id="p-0029" num="0028">Any combination of one or more computer-usable or computer-readable storage medium(s) may be utilized to store the computer program product. The computer-usable or computer-readable storage medium may be, for example, but not limited to, an electronic, magnetic, optical, electromagnetic, infrared, or semiconductor system, apparatus, or device. More specific examples (a non-exhaustive list) of the computer-readable storage medium may include the following: an electrical connection having one or more wires, a portable computer diskette, a hard disk, a random access memory (RAM), a read-only memory (ROM), an erasable programmable read-only memory (EPROM or Flash memory), an optical fiber, a portable compact disc read-only memory (CDROM), an optical storage device, or a magnetic storage device. In the context of this document, a computer-usable or computer-readable storage medium may be any medium that can contain, store, or transport the program for use by or in connection with the instruction execution system, apparatus, or device.</p>
<p id="p-0030" num="0029">Computer program code for carrying out operations of the present invention may be written in any combination of one or more programming languages, including an object-oriented programming language such as Java, Smalltalk, C++, or the like, and conventional procedural programming languages, such as the &#x201c;C&#x201d; programming language or similar programming languages. Computer program code for implementing the invention may also be written in a low-level programming language such as assembly language.</p>
<p id="p-0031" num="0030">The present invention may be described below with reference to flowchart illustrations and/or block diagrams of methods, apparatus, systems, and computer program products according to embodiments of the invention. It will be understood that each block of the flowchart illustrations and/or block diagrams, and combinations of blocks in the flowchart illustrations and/or block diagrams, may be implemented by computer program instructions or code. The computer program instructions may be provided to a processor of a general-purpose computer, special-purpose computer, or other programmable data processing apparatus to produce a machine, such that the instructions, which execute via the processor of the computer or other programmable data processing apparatus, create means for implementing the functions/acts specified in the flowchart and/or block diagram block or blocks.</p>
<p id="p-0032" num="0031">The computer program instructions may also be stored in a computer-readable storage medium that can direct a computer or other programmable data processing apparatus to function in a particular manner, such that the instructions stored in the computer-readable storage medium produce an article of manufacture including instruction means which implement the function/act specified in the flowchart and/or block diagram block or blocks. The computer program instructions may also be loaded onto a computer or other programmable data processing apparatus to cause a series of operational steps to be performed on the computer or other programmable apparatus to produce a computer implemented process such that the instructions which execute on the computer or other programmable apparatus provide processes for implementing the functions/acts specified in the flowchart and/or block diagram block or blocks.</p>
<p id="p-0033" num="0032">Referring to <figref idref="DRAWINGS">FIG. 1</figref>, a high-level block diagram showing one example of a read-detect channel circuit <b>100</b> for a tape drive is illustrated. There are typically sixteen or thirty-two read detect channels <b>100</b> per tape drive, although other numbers of channels are possible. During a read operation, a tape head <b>102</b> is typically passed over data recorded on magnetic tape <b>104</b> in order to convert the recorded data into an analog signal. In particular, in a magnetic tape drive, a magneto-resistive read head <b>102</b> is passed over data that has been previously written as flux reversals on the magnetic tape <b>104</b>. As the head <b>102</b> is passed over the tape <b>104</b>, the head <b>102</b> converts the flux reversals into an electrical analog signal that represents the data originally stored on the magnetic tape <b>104</b>.</p>
<p id="p-0034" num="0033">An analog-to-digital converter <b>106</b> (&#x201c;ADC&#x201d;) periodically samples the analog signal and converts the sampled analog signal to a digital input signal and creates a digital waveform. The output of the analog-to-digital converter <b>106</b> may then be sent to a finite-impulse-response (FIR) equalizer <b>108</b> to shape the digital waveform. The digital waveform may then be sent to a detector <b>112</b> by way of a detector interface <b>110</b>. The detector <b>112</b> may convert the digital waveform to a binary stream of ones and zeros which ideally reflects the data that was originally written to the magnetic tape <b>104</b>.</p>
<p id="p-0035" num="0034">Upon producing the binary data, the detector <b>112</b> produces an error signal which indicates the error between the equalizer output and the desired detector input. This error signal may be sent to a least means square (LMS) engine <b>116</b> which uses the error signal to adjust selected taps coefficients of the FIR equalizer <b>108</b>. An input buffer <b>114</b> may be used to temporally align the error signal with the output received from the analog-to-digital converter <b>106</b>. In practice, as will be explained in more detail hereafter, certain adjacent tap coefficients of the FIR equalizer <b>108</b> may be fixed while other tap coefficients may be allowed to adapt (i.e., adjust their values to optimal values) in response to the error signal. This ideally allows the FIR equalizer <b>108</b> to remain stable while still allowing it to adapt to the error signal. Two examples of FIR equalizer circuits <b>108</b> are illustrated in <figref idref="DRAWINGS">FIGS. 2 and 3</figref>.</p>
<p id="p-0036" num="0035">Referring to <figref idref="DRAWINGS">FIG. 2</figref>, a high-level block diagram showing an example of a conventional programmable finite-impulse-response (FIR) equalizer <b>108</b> is illustrated. As shown, the output of the FIR equalizer <b>108</b> is generated by convolving its input signal with the FIR equalizer's impulse response. The output of the FIR equalizer <b>108</b> is a weighted sum of the current and a finite number of previous values of the input. Delay units <b>200</b> (which may be implemented using registers, for example) may output the previous values of the input. The values (H<b>0</b>, H<b>1</b>, H<b>2</b>, . . . , Hn) are tap coefficients that control the impulse response.</p>
<p id="p-0037" num="0036">In the illustrated embodiment, the FIR equalizer <b>108</b> includes seventeen taps and associated tap coefficients. Such FIR equalizers <b>108</b> generally provide an optimal balance between cost and stability and thus are used in the read-detect channels <b>100</b> of many current tape drives. More taps may increase the cost of the FIR equalizer <b>108</b> while providing little additional benefit in terms of signal-to-noise ratio (SNR). Fewer taps may decrease the cost of the FIR equalizer <b>108</b> but undesirably reduce the SNR.</p>
<p id="p-0038" num="0037">Nevertheless, the disclosed FIR equalizer <b>108</b> is not limited to seventeen taps but may include more or fewer taps as needed. Furthermore, the methodology disclosed herein is not limited to FIR equalizers <b>108</b> having seventeen taps but may be used with FIR equalizers <b>108</b> having any number of taps. A FIR equalizer <b>108</b> that is physically different from, but functionally equivalent to, the FIR equalizer <b>108</b> illustrated in <figref idref="DRAWINGS">FIG. 2</figref> is shown in <figref idref="DRAWINGS">FIG. 3</figref>.</p>
<p id="p-0039" num="0038">In order to account for changes to the read-back signal caused by variations in manufacturing, temperature, humidity, and/or the head-to-tape interface, certain tap coefficients of the FIR equalizer <b>108</b> may be allowed to vary. Based upon the signals read from the magnetic tape <b>104</b>, the read-detect channel <b>100</b> may adjust the equalization of the read-back signal by modifying the tap coefficients. One drawback of this approach is that, if the wrong tap coefficients are allowed to vary, the tap coefficients may vary in a way that actually worsens the signal-to-noise ratio. In some cases, the tap coefficients may vary in such a way that data on the magnetic tape <b>104</b> can no longer be detected.</p>
<p id="p-0040" num="0039">Thus, an improved method is needed to correctly select which tap coefficients of a FIR equalizer <b>108</b> to fix, thereby also selecting the tap coefficients of the FIR equalizer <b>108</b> that are allowed to vary. Ideally, such a method will enable the FIR equalizer <b>108</b> to more consistently converge to an optimal configuration that improves the signal-to-noise ratio of the data being read. One embodiment of such a method will be described in association with <figref idref="DRAWINGS">FIG. 4</figref>.</p>
<p id="p-0041" num="0040">Referring to <figref idref="DRAWINGS">FIG. 4</figref>, one embodiment of an improved method <b>400</b> for selecting which tap coefficients of a FIR equalizer <b>108</b> to fix is illustrated. As shown, the method <b>400</b> begins by performing <b>402</b> an initial calibration procedure to determine initial values for the FIR's tap coefficients. In certain embodiments, the initial calibration is performed <b>402</b> by reading calibration data on magnetic tape <b>104</b> and setting the tap coefficients to maximize the signal-to-noise ratio of the calibration data. In other embodiments, the initial calibration is performed <b>402</b> by simply setting the tap coefficients to values read from the magnetic tape <b>104</b> or another location.</p>
<p id="p-0042" num="0041">Once the initial values for the tap coefficients are determined, the tap coefficients are upsampled <b>404</b> by some number x, such as eight. For example, in the case of a FIR equalizer <b>108</b> with seventeen taps, upsampling by eight will provide (8&#xd7;17=136) coefficients. The upsampling may be performed by inserting (x&#x2212;1) zeros between each FIR coefficient value (with x/2 zeros before H<b>0</b> and (x/2)&#x2212;1 zeros after H<b>16</b>). For upsampling by eight with a seventeen tap FIR equalizer <b>108</b>, seven zeros may be inserted between each FIR tap coefficient with four zeros before H<b>0</b> and three zeros after H<b>16</b>. These coefficients may be used to produce a first waveform. The first waveform may then be convolved <b>406</b> with a Sinc function to provide a second waveform that is a modified version of the first waveform. One or more lobes of the second waveform may then be identified <b>408</b> by identifying zero crossings of the second waveform. In certain embodiments, the absolute value (i.e., magnitude) of the second waveform is determined to facilitate computing the power of each lobe.</p>
<p id="p-0043" num="0042">The method <b>400</b> may then integrate <b>410</b> across each lobe to determine each lobe's power (i.e., area). In certain embodiments, the power of each lobe is determined by taking the magnitude of every sample within the lobe and summing them together. One or more adjacent lobes having the greatest power may then be selected <b>412</b>. In one embodiment, for example, two adjacent lobes having the greatest power may be selected <b>412</b>. The method <b>400</b> may then determine <b>414</b> which tap or taps are closest to the lobe(s) with the greatest power. For example, when applying the methodology <b>400</b> to a FIR equalizer <b>108</b> having seventeen taps, the method <b>400</b> may determine <b>414</b> the three or four adjacent taps that are closest to the lobe(s) with the greatest power. The method <b>400</b> may then fix <b>416</b> the coefficients of these taps while allowing the coefficients of the other taps to vary.</p>
<p id="p-0044" num="0043">The instant inventors have found that the above-described methodology <b>400</b> provides a more consistent way to identify fixed tap coefficients that will result in a stable (i.e., converging) FIR equalizer <b>108</b>. Several specific examples of applying the methodology <b>400</b> to actual real-world FIR equalizers <b>108</b> are described in association with <figref idref="DRAWINGS">FIGS. 5A through 7C</figref>. More specifically, <figref idref="DRAWINGS">FIGS. 5A through 5C</figref> show the application of the methodology <b>400</b> to a first real-world FIR equalizer <b>108</b>; <figref idref="DRAWINGS">FIGS. 6A through 6C</figref> show the application of the methodology <b>400</b> to a second real-world FIR equalizer <b>108</b>; and <figref idref="DRAWINGS">FIGS. 7A through 7C</figref> show the application of the methodology <b>400</b> to a third real-world FIR equalizer <b>108</b>. In each of these examples, the methodology <b>400</b> successfully identified fixed tap coefficients that resulted in a stable FIR equalizer <b>108</b>.</p>
<p id="p-0045" num="0044">Referring to <figref idref="DRAWINGS">FIG. 5A</figref>, a table <b>510</b> showing the initial tap coefficients for a first exemplary FIR equalizer <b>108</b> is illustrated. The initial tap coefficients are listed vertically along the left-hand side of the table <b>510</b>. Using the methodology <b>400</b> of <figref idref="DRAWINGS">FIG. 4</figref>, the initial seventeen tap coefficients were upsampled by eight to yield <b>136</b> coefficients. These <b>136</b> coefficients were then used to produce a first waveform <b>500</b>, as shown in <figref idref="DRAWINGS">FIG. 5B</figref>. The magnitude of the spikes of the first waveform <b>500</b> represent the magnitude of the coefficients listed in <figref idref="DRAWINGS">FIG. 5A</figref>. The portion of the waveform <b>500</b> between the spikes is representative of the additional samples (i.e., zeros) generated during the upsampling step <b>404</b>.</p>
<p id="p-0046" num="0045">As further specified by the methodology <b>400</b>, the first waveform is convolved <b>406</b> with a sinc function to generate a second waveform <b>502</b> that represents a modified version of the first waveform. As shown, the second waveform <b>502</b> includes multiple &#x201c;lobes.&#x201d; For the purposes of this specification, a &#x201c;lobe&#x201d; is defined to be a portion of a waveform between zero crossings. <figref idref="DRAWINGS">FIG. 5C</figref> shows the magnitude of the lobes of the second waveform <b>502</b>.</p>
<p id="p-0047" num="0046">As previously discussed, the methodology <b>400</b> integrates each lobe to determine its power. It should be recognized that the integration may be performed on the second waveform <b>502</b> illustrated in <figref idref="DRAWINGS">FIG. 5B</figref> or the waveform representing the magnitude of the second waveform <b>502</b> as illustrated in <figref idref="DRAWINGS">FIG. 5C</figref> (for the purposes of this specification, each of the waveforms illustrated in <figref idref="DRAWINGS">FIGS. 5B and 5C</figref> are considered to be different variations of the &#x201c;second waveform <b>502</b>&#x201d;). One of more lobes having the greatest power may then be selected <b>412</b>. In this example, the two largest lobes <b>504</b><i>a</i>, <b>504</b><i>b </i>are selected. The methodology <b>400</b> then determines which tap or taps are closest to the lobes with the greatest power. In this example, the four taps that are closest to the lobes <b>504</b><i>a, </i><b>504</b><i>b </i>include taps <b>7</b>, <b>8</b>, <b>9</b>, and <b>10</b>. Thus, as shown in <figref idref="DRAWINGS">FIG. 5A</figref>, the coefficients H<b>7</b>, H<b>8</b>, H<b>9</b>, and H<b>10</b> would be fixed using the methodology <b>400</b> described in <figref idref="DRAWINGS">FIG. 4</figref>, as indicated in bold.</p>
<p id="p-0048" num="0047">The instant inventors tested the first real-world FIR equalizer <b>108</b> and found that the FIR equalizer <b>108</b> converged (i.e., was stable) for three sets of four fixed tap coefficients. The three sets of coefficients are shown in the table <b>510</b> of <figref idref="DRAWINGS">FIG. 5A</figref>. More specifically, the sets [H<b>7</b>, H<b>8</b>, H<b>9</b>, H<b>10</b>], [H<b>8</b>, H<b>9</b>, H<b>10</b>, H<b>11</b>], and [H<b>9</b>, H<b>10</b>, H<b>11</b>, H<b>12</b>] were each found to produce a stable FIR equalizer <b>108</b> when fixed. As shown, one of the sets ([H<b>7</b>, H<b>8</b>, H<b>9</b>, H<b>10</b>]) was the same as that determined by the methodology <b>400</b>. Thus, the test confirmed the ability of the above-described methodology <b>400</b> to select a correct set of fixed tap coefficients for the first FIR equalizer <b>108</b>.</p>
<p id="p-0049" num="0048">Referring to <figref idref="DRAWINGS">FIG. 6A</figref>, a table <b>610</b> showing the initial tap coefficients for a second exemplary FIR equalizer <b>108</b> is illustrated. The initial tap coefficients are listed vertically along the left-hand side of the table <b>610</b>. Using the methodology <b>400</b> of <figref idref="DRAWINGS">FIG. 4</figref>, the initial seventeen tap coefficients were upsampled by eight to yield <b>136</b> coefficients. The <b>136</b> coefficients were then used to produce a first waveform <b>600</b>, as shown in <figref idref="DRAWINGS">FIG. 6B</figref>. The first waveform <b>600</b> was then convolved <b>406</b> with a sinc function to generate a second waveform <b>602</b> comprising multiple lobes. Each lobe was then integrated to determine its power (i.e., area). The two largest lobes <b>604</b><i>a</i>, <b>604</b><i>b </i>were selected and the four taps closest to the lobes <b>604</b><i>a</i>, <b>604</b><i>b </i>were determined. In this example, the four taps closest to the lobes <b>604</b><i>a</i>, <b>604</b><i>b </i>were taps <b>4</b>, <b>5</b>, <b>6</b>, and <b>7</b>. Thus, as shown in <figref idref="DRAWINGS">FIG. 6A</figref>, the coefficients H<b>4</b>, H<b>5</b>, H<b>6</b>, and H<b>7</b> were fixed using the methodology <b>400</b>, as indicated in bold.</p>
<p id="p-0050" num="0049">The instant inventors tested the second real-world FIR equalizer <b>108</b> and found that the FIR equalizer <b>108</b> converged (i.e., was stable) using three different sets of four fixed tap coefficients. The three sets of tap coefficients are shown in the table <b>610</b> of <figref idref="DRAWINGS">FIG. 6A</figref>. More specifically, the sets [H<b>4</b>, H<b>5</b>, H<b>6</b>, H<b>7</b>], [H<b>5</b>, H<b>6</b>, H<b>7</b>, H<b>8</b>], and [H<b>6</b>, H<b>7</b>, H<b>8</b>, H<b>9</b>] were each found to produce a stable FIR equalizer <b>108</b>. As shown, one of the sets ([H<b>4</b>, H<b>5</b>, H<b>6</b>, H<b>7</b>]) was the same as that determined by the methodology <b>400</b>. Thus, this test confirmed the ability of the above-described methodology <b>400</b> to select a correct set of fixed tap coefficients for the second exemplary FIR equalizer <b>108</b>.</p>
<p id="p-0051" num="0050">Referring to <figref idref="DRAWINGS">FIG. 7A</figref>, a table <b>710</b> showing the initial tap coefficients for a third exemplary FIR equalizer <b>108</b> is illustrated. The initial tap coefficients are listed vertically along the left-hand side of the table <b>710</b>. Using the methodology <b>400</b> of <figref idref="DRAWINGS">FIG. 4</figref>, the initial seventeen tap coefficients were up sampled by eight to yield <b>136</b> coefficients. The <b>136</b> coefficients were then used to produce a first waveform <b>700</b>, as shown in <figref idref="DRAWINGS">FIG. 7B</figref>. The first waveform <b>700</b> was then convolved <b>406</b> with a sinc function to generate a second waveform <b>702</b> comprising multiple lobes. Each lobe was then integrated to determine its power (i.e., area). The two largest lobes <b>704</b><i>a</i>, <b>704</b><i>b </i>were selected and the four taps closest to the largest lobes <b>704</b><i>a</i>, <b>704</b><i>b </i>were determined. In this example, the four taps that were closest to the lobes <b>704</b><i>a</i>, <b>704</b><i>b </i>were taps <b>2</b>, <b>3</b>, <b>4</b>, and <b>5</b>. Thus, as shown in <figref idref="DRAWINGS">FIG. 7A</figref>, the coefficients H<b>2</b>, H<b>3</b>, H<b>4</b>, and H<b>5</b> were fixed using the methodology <b>400</b>, as indicated in bold type.</p>
<p id="p-0052" num="0051">The instant inventors tested the third real-world FIR equalizer <b>108</b> and found that the FIR equalizer <b>108</b> converged (i.e., was stable) using three different sets of four fixed tap coefficients. The three sets of tap coefficients are shown in the table <b>710</b> of <figref idref="DRAWINGS">FIG. 7A</figref>. More specifically, the sets [H<b>2</b>, H<b>3</b>, H<b>4</b>, H<b>5</b>], [H<b>3</b>, H<b>4</b>, H<b>5</b>, H<b>6</b>], and [H<b>4</b>, H<b>5</b>, H<b>6</b>, H<b>7</b>] were each found to stabilize the FIR equalizer <b>108</b>. As shown, one of the sets ([H<b>2</b>, H<b>3</b>, H<b>4</b>, H<b>5</b>]) was the same as that determined by the methodology <b>400</b>. Thus, this test also confirmed the ability of the above-described methodology <b>400</b> to select a correct set of fixed tap coefficients for the third exemplary FIR equalizer <b>108</b>.</p>
<p id="p-0053" num="0052">It should be recognized that different variations of the methodology <b>400</b> as it relates to <figref idref="DRAWINGS">FIGS. 5A through 7C</figref> are possible. For example, the number of lobes selected and the number of fixed tap coefficients selected for the lobes may vary in different embodiments of the methodology <b>400</b>. For example, in one alternative embodiment, the methodology <b>400</b> determines the single largest lobe and fixes the coefficients of the closest three or four taps with respect to the single largest lobe. In another embodiment, more than two adjacent largest lobes are determined and the coefficients of a tap or group of taps closest to the group of largest lobes are fixed. Other variations are possible and within the scope of the invention.</p>
<p id="p-0054" num="0053">The flowcharts and/or block diagrams in the Figures illustrate the architecture, functionality, and operation of possible implementations of systems, methods, and computer-usable storage media according to various embodiments of the present invention. In this regard, each block in the flowcharts and/or block diagrams may represent a module, segment, or portion of code, which comprises one or more executable instructions for implementing the specified logical function(s). It should also be noted that, in some alternative implementations, the functions noted in a block may occur in a different order than that illustrated in the Figures. For example, two blocks shown in succession may, in fact, be implemented in the reverse order, depending upon the functionality involved. It will also be noted that each block of the block diagrams and/or flowchart illustrations, and combinations of blocks in the block diagrams and/or flowchart illustrations, may be implemented by special purpose hardware-based systems that perform the specified functions or acts, or combinations of special purpose hardware and computer instructions.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method for selecting which tap coefficients of a programmable finite-impulse-response (FIR) equalizer to fix, the method comprising:
<claim-text>performing an initial calibration to determine an initial value for each tap coefficient of a FIR equalizer;</claim-text>
<claim-text>producing a first waveform using the initial values, the first waveform comprising plurality of spikes having magnitudes representing the initial values;</claim-text>
<claim-text>performing an operation on the first waveform to produce a smoother second waveform that represents a modified version of the first waveform, the second waveform comprising a plurality of lobes;</claim-text>
<claim-text>analyzing the second waveform to determine at least one lobe of the second waveform that has the largest area; and</claim-text>
<claim-text>fixing the coefficient of at least one tap that is closest to the at least one lobe.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein performing the operation comprises convolving a function with the first waveform to produce the second waveform.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the function is a sinc function.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the at least one lobe is a single lobe.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the at least one lobe is a group of several adjacent lobes.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the at least one tap is a single tap.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the at least one tap is a group of several adjacent taps.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein producing the first waveform comprises upsampling the initial values to produce the first waveform.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising determining the plurality of lobes by finding zero crossings of the second waveform.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. An apparatus for selecting which tap coefficients of a programmable finite-impulse-response (FIR) equalizer to fix, the apparatus comprising:
<claim-text>a tape drive configured to perform the following:
<claim-text>perform an initial calibration to determine an initial value for each tap coefficient of a FIR equalizer;</claim-text>
<claim-text>produce a first waveform using the initial values, the first waveform comprising plurality of spikes having magnitudes representing the initial values;</claim-text>
<claim-text>perform an operation on the first waveform to produce a smoother second waveform that represents a modified version of the first waveform, the second waveform comprising a plurality of lobes;</claim-text>
<claim-text>analyze the second waveform to determine at least one lobe of the second waveform that has the largest area; and</claim-text>
<claim-text>fix the coefficient of at least one tap that is closest to the at least one lobe.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The apparatus of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the tape drive is further configured to perform the operation by convolving a function with the first waveform to produce the second waveform.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The apparatus of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the function is a sinc function.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The apparatus of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the at least one lobe is a single lobe.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The apparatus of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the at least one lobe is a group of several adjacent lobes.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The apparatus of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the at least one tap is a single tap.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The apparatus of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the at least one tap is a group of several adjacent taps.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The apparatus of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the tape drive is configured to produce the first waveform by up sampling the initial values.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The apparatus of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the tape drive is further configured to determine the plurality of lobes by finding zero crossings of the second waveform.</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. A computer program product for selecting which tap coefficients of a programmable finite-impulse-response (FIR) equalizer to fix, the computer program product comprising a non-transitory computer-readable storage medium having computer-usable program code embodied therein, the computer-usable program code comprising:
<claim-text>computer-usable program code to perform an initial calibration to determine an initial value for each tap coefficient of a FIR equalizer;</claim-text>
<claim-text>computer-usable program code to produce a first waveform using the initial values, the first waveform comprising a plurality of spikes having magnitudes representing the initial values;</claim-text>
<claim-text>computer-usable program code to perform an operation on the first waveform to produce a smoother second waveform that represents a modified version of the first waveform, the second waveform comprising a plurality of lobes;</claim-text>
<claim-text>computer-usable program code to analyze the second waveform to determine at least one lobe of the second waveform that has the largest area; and</claim-text>
<claim-text>computer-usable program code to fix the coefficient of at least one tap that is closest to the at least one lobe.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The computer program product of <claim-ref idref="CLM-00019">claim 19</claim-ref>, wherein performing the operation comprises convolving a function with the first waveform to produce the second waveform. </claim-text>
</claim>
</claims>
</us-patent-grant>
