<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08624534-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08624534</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13254279</doc-number>
<date>20100622</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2009-147830</doc-number>
<date>20090622</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>291</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>02</class>
<subclass>P</subclass>
<main-group>1</main-group>
<subgroup>04</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>31840017</main-classification>
</classification-national>
<invention-title id="d2e71">Control device for electric motor driving apparatus</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>2006/0071628</doc-number>
<kind>A1</kind>
<name>Ta et al.</name>
<date>20060400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>318807</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>2007/0278986</doc-number>
<kind>A1</kind>
<name>Okamura</name>
<date>20071200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2009/0121669</doc-number>
<kind>A1</kind>
<name>Hanada</name>
<date>20090500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>318504</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2009/0128069</doc-number>
<kind>A1</kind>
<name>Kaneko et al.</name>
<date>20090500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>31840009</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2009/0146589</doc-number>
<kind>A1</kind>
<name>Hattori et al.</name>
<date>20090600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>31840002</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2009/0237013</doc-number>
<kind>A1</kind>
<name>Sato</name>
<date>20090900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>31840002</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>JP</country>
<doc-number>A-2001-145384</doc-number>
<date>20010500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>JP</country>
<doc-number>A-2004-201487</doc-number>
<date>20040700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>JP</country>
<doc-number>A-2006-311770</doc-number>
<date>20061100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00010">
<othercit>International Search Report issued in Application No. PCT/JP2010/060567; Dated Aug. 31, 2010 (With Translation).</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00011">
<othercit>Z. Salam, C.J. Goodman: Compensation of Fluctuating DC Link Voltage for Traction Inverter Drive. Sixth International Conference on Power Electronics and Variable Speed Drives, Sep. 25, 1996, 360-395. IEEE [online].</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00012">
<othercit>Oct. 2, 2013 Office Action issued in German Patent Application No. 112010000468.4 (with translation).</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>8</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>None</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>9</number-of-drawing-sheets>
<number-of-figures>15</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20130187583</doc-number>
<kind>A1</kind>
<date>20130725</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Iwatsuki</last-name>
<first-name>Ken</first-name>
<address>
<city>Anjo</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Chen</last-name>
<first-name>Zhiqian</first-name>
<address>
<city>Anjo</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Iwatsuki</last-name>
<first-name>Ken</first-name>
<address>
<city>Anjo</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Chen</last-name>
<first-name>Zhiqian</first-name>
<address>
<city>Anjo</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Oliff &#x26; Berridge, PLC</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Aisin AW Co., Ltd.</orgname>
<role>03</role>
<address>
<city>Anjo</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Donovan</last-name>
<first-name>Lincoln</first-name>
<department>2837</department>
</primary-examiner>
<assistant-examiner>
<last-name>Imtiaz</last-name>
<first-name>Zoheb</first-name>
</assistant-examiner>
</examiners>
<pct-or-regional-filing-data>
<document-id>
<country>WO</country>
<doc-number>PCT/JP2010/060567</doc-number>
<kind>00</kind>
<date>20100622</date>
</document-id>
<us-371c124-date>
<date>20110901</date>
</us-371c124-date>
</pct-or-regional-filing-data>
<pct-or-regional-publishing-data>
<document-id>
<country>WO</country>
<doc-number>WO2010/150786</doc-number>
<kind>A </kind>
<date>20101229</date>
</document-id>
</pct-or-regional-publishing-data>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A control device for an electric motor driving apparatus, configured with a switching control unit that performs rectangular wave control in which a plurality of switching elements provided in a direct current-alternating current conversion unit are ON/OFF-controlled to output rectangular wave-shaped voltages of a plurality of phases. System voltage varies during execution of the rectangular wave control, the switching control unit performs rectangular wave width adjustment control to set ON/OFF timings of the plurality of switching elements on the basis of a rate of change of the system voltage such that time-integrated values of the rectangular wave-shaped voltages of the respective phases within a control period set at a length corresponding to an integral multiple of a single electrical angle period are substantially identical among the respective phases.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="148.76mm" wi="255.44mm" file="US08624534-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="258.91mm" wi="171.62mm" orientation="landscape" file="US08624534-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="148.76mm" wi="171.45mm" file="US08624534-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="238.42mm" wi="183.73mm" file="US08624534-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="256.12mm" wi="180.76mm" file="US08624534-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="258.06mm" wi="185.17mm" file="US08624534-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="189.15mm" wi="147.74mm" file="US08624534-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="236.39mm" wi="175.34mm" file="US08624534-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="236.90mm" wi="172.89mm" orientation="landscape" file="US08624534-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="146.81mm" wi="171.45mm" file="US08624534-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">INCORPORATION BY REFERENCE</heading>
<p id="p-0002" num="0001">The disclosure of Japanese Patent Application No. 2009-147830 filed on Jun. 22, 2009 including the specification, drawings and abstract is incorporated herein by reference in its entirety.</p>
<heading id="h-0002" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0003" num="0002">The present invention relates to a control device for controlling an electric motor driving apparatus that includes a system voltage generation unit for generating a direct-current system voltage, and a direct current-alternating current conversion unit for converting the system voltage into an alternating current voltage having a plurality of mutually deviating phases and supplying the alternating current voltage to an alternating current electric motor.</p>
<heading id="h-0003" level="1">DESCRIPTION OF THE RELATED ART</heading>
<p id="p-0004" num="0003">A typically used electric motor driving apparatus drives an alternating current electric motor by converting a direct current voltage from a direct current power supply into an alternating current voltage using an inverter. In this type of electric motor driving apparatus, PWM (Pulse Width Modulation) control and maximum torque control are often performed on the basis of vector control so that torque can be generated efficiently by supplying a sine wave-shaped alternating current voltage to coils of respective phases of the alternating current electric motor. Incidentally, in an alternating current electric motor, an induced voltage increases as a rotation speed increases, leading to an increase in the alternating current voltage (to be referred to hereafter as a &#x201c;required voltage&#x201d;) required to drive the alternating current electric motor. When the required voltage exceeds a maximum alternating current voltage (to be referred to hereafter as a &#x201c;maximum output voltage&#x201d;) that can be output from the inverter by converting the system voltage, it becomes impossible to pass a required current through the coils, and as a result, the alternating current electric motor cannot be controlled appropriately. Therefore, field-weakening control for weakening a field magnetic flux of the alternating current electric motor is performed to reduce the induced voltage. However, when field-weakening control is performed, maximum torque control becomes impossible, and therefore a maximum torque that can be output decreases, leading to a reduction in efficiency.</p>
<p id="p-0005" num="0004">In response to this problem, Japanese Patent Application Publication No. JP-A-2006-311770 (paragraphs 0046 to 0048 and so on), cited below, describes an electric motor driving apparatus that includes a boost converter for boosting a power supply voltage from the direct current power supply and is therefore capable of increasing the system voltage. A control device for controlling this electric motor driving apparatus increases the maximum output voltage by increasing the system voltage in accordance with an increase in the required voltage, and as a result, a maximum torque control region can be expanded to a higher rotation speed region. The control device is constituted to perform rectangular wave control corresponding to the field-weakening control when the rotation speed increases to the extent that the required voltage exceeds the maximum output voltage in a state where the system voltage has reached an upper limit voltage (to be referred to hereafter as a &#x201c;maximum system voltage&#x201d;) that can be achieved by boosting using the boost converter, or in other words a state where the maximum output voltage has reached its upper limit voltage. Hence, the control device described in JP-A-2006-311770 performs the rectangular wave control after the system voltage becomes equal to the maximum system voltage achieved by boosting the power supply voltage, or in other words after the rotation speed of the alternating current electric motor has become comparatively high.</p>
<heading id="h-0004" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0006" num="0005">Incidentally, with rectangular wave control, the number of times a switching element constituting the inverter is switched ON/OFF can be reduced greatly in comparison with PWM control, and therefore switching loss can be suppressed. Hence, rectangular wave control may be performed from a lower rotation speed region in order to improve the efficiency of the electric motor driving apparatus. However, when the system voltage is boosted during execution of the rectangular wave control, a balance between the voltages supplied to the coils of the respective phases may be disrupted, causing a torque ripple in which the output torque of the alternating current electric motor varies in accordance with a rotation angle. With the constitution described in JP-A-2006-311770, the system voltage is boosted during PWM control and the rectangular wave control is performed after the system voltage has become equal to the maximum system voltage achieved by boosting the power supply voltage. Therefore, the rectangular wave control is not performed until the system voltage is boosted to the maximum system voltage, and as a result, a usage region of the low-switching loss rectangular wave control is limited to a high rotation speed region.</p>
<p id="p-0007" num="0006">Variation in the system voltage also occurs under operating conditions or in a system where the direct current voltage is supplied as is from the direct current power supply without actively modifying the system voltage using a boost converter. In other words, the output voltage of the direct current power supply varies in accordance with a discharge current or a charging current of the direct current power supply, and the system voltage varies in accordance therewith. If rectangular wave control is not performed during variation of the system voltage, the occurrence of a torque ripple caused by the rectangular wave control can be prevented, but opportunities to execute the low-switching loss rectangular wave control are limited. If rectangular wave control is performed during variation of the system voltage, on the other hand, the low-switching loss rectangular wave control can be executed, but a torque ripple is likely to occur due to the rectangular wave control.</p>
<p id="p-0008" num="0007">The present invention has been designed in consideration of the problems described above, and an object thereof is to provide a control device for an electric motor driving apparatus which can expand a usage region of rectangular wave control, in which little switching loss occurs, to a low rotation speed region side and suppress vibration in an alternating current electric motor even when a system voltage varies during the rectangular wave control.</p>
<p id="p-0009" num="0008">To achieve this object, a control device for an electric motor driving apparatus according to the present invention performs control on an electric motor driving apparatus including a system voltage generation unit for generating a direct current system voltage and a direct current-alternating current conversion unit for converting the system voltage into an alternating current voltage having a plurality of mutually deviating phases and supplying the alternating current voltage to an alternating current electric motor, and includes: a switching control unit for performing rectangular wave control in which a plurality of switching elements provided in the direct current-alternating current conversion unit are ON/OFF-controlled to output rectangular wave-shaped voltages of a plurality of phases, wherein, when the system voltage varies during execution of the rectangular wave control, the switching control unit performs rectangular wave width adjustment control to set ON/OFF timings of the plurality of switching elements on the basis of a rate of change of the system voltage such that time-integrated values of the rectangular wave-shaped voltages of the respective phases within a control period set at a length corresponding to an integral multiple of a single electrical angle period are substantially identical among the respective phases.</p>
<p id="p-0010" num="0009">According to this featured constitution, disruption to a balance between voltages supplied to coils of the respective phases during the control period set at a length corresponding to an integral multiple of a single electrical angle period can be suppressed, thereby suppressing generation of a torque ripple, even when the system voltage varies during execution of the rectangular wave control.</p>
<p id="p-0011" num="0010">Hence, the rectangular wave control can be performed while suppressing vibration in the alternating current electric motor even when the system voltage varies. As a result, a usage region of the low-switching loss rectangular wave control can be expanded, enabling an improvement in the efficiency of the electric motor driving apparatus.</p>
<p id="p-0012" num="0011">Further, in a system where the system voltage can be modified by boosting or reducing the system voltage actively using a converter or the like, the system voltage can be modified while suppressing vibration in the alternating current electric motor even during execution of the rectangular wave control, and as a result, the rectangular wave control can be performed from a low rotation speed region in which the system voltage has not yet been boosted to a maximum system voltage. As a result, the usage region of the low-switching loss rectangular wave control can be expanded to the low rotation speed region side, enabling an improvement in the efficiency of the electric motor driving apparatus.</p>
<p id="p-0013" num="0012">Preferably here, points at which voltage values of the rectangular wave-shaped voltages of the respective phases are switched between a high level and a low level by switching the plurality of switching elements ON and OFF are set as high-low switch points, the switching control unit aligns a start point of the control period with one of the high-low switch points, periods set by dividing the control period using the respective high-low switch points of the rectangular wave-shaped voltages of the plurality of phases as dividing points are set as divided periods, and in the rectangular wave width adjustment control, the ON/OFF timings of the plurality of switching elements are set on the basis of the length of the control period, a value of the system voltage at the start point of the control period, and the rate of change of the system voltage within the control period such that time-integrated values of the system voltage in the respective divided periods are substantially identical.</p>
<p id="p-0014" num="0013">According to this constitution, the time-integrated values of the rectangular wave-shaped voltages of the respective phases within the control period can be made substantially identical simply by setting the ON/OFF timings of the switching elements on the basis of the length of the control period, the value of the system voltage at the start point of the control period, and the rate of change of the system voltage within the control period such that the time-integrated values of the system voltage in the respective divided periods are substantially identical. Hence, calculations required to execute the rectangular wave width adjustment control can be simplified, and as a result, the constitution of the control device can be simplified.</p>
<p id="p-0015" num="0014">Note that map data expressing relationships between the aforementioned three parameters and the ON/OFF timings may be prepared in advance, and the ON/OFF timings of the plurality of switching elements may be obtained and set by referring to these map data.</p>
<p id="p-0016" num="0015">Further, the system voltage generation unit preferably includes a voltage conversion unit that generates a desired system voltage by converting a power supply voltage from a direct current power supply, the control device preferably further includes a voltage conversion control unit that obtains a system voltage command value, which is a command value of the system voltage generated by the voltage conversion unit, and ON/OFF-controls a switching element provided in the voltage conversion unit on the basis of the system voltage command value, when the voltage conversion unit is caused to modify the system voltage, the voltage conversion control unit preferably aligns a modification start timing at which modification of the system voltage is started with one of the ON/OFF timings of the plurality of switching elements provided in the direct current-alternating current conversion unit, and the switching control unit preferably aligns the start point of the control period with the modification start timing.</p>
<p id="p-0017" num="0016">According to this constitution, the rectangular wave width adjustment control can be performed from an initial point at which modification of the system voltage begins, and in so doing, generation of a torque ripple can be suppressed even more reliably.</p>
<p id="p-0018" num="0017">Further, the voltage conversion control unit preferably aligns a modification end timing at which modification of the system voltage ends with an ON/OFF timing, from among the ON/OFF timings of the plurality of switching elements provided in the direct current-alternating current conversion unit, that differs from the modification start timing by an integral multiple of a single electrical angle period.</p>
<p id="p-0019" num="0018">According to this constitution, the rectangular wave width adjustment control can be performed in all of the periods from the modification start timing to the modification end timing, and as a result, generation of a torque ripple can be suppressed even more reliably.</p>
<p id="p-0020" num="0019">Further, the system voltage is preferably an output voltage of a direct current power supply, and the rate of change of the system voltage is preferably calculated on the basis of a value of the system voltage at the start point of the control period and a value of the system voltage prior to the start point of the control period.</p>
<p id="p-0021" num="0020">According to this constitution, even when the system voltage, i.e. the output voltage of the direct current power supply, varies in accordance with a discharge current or a charging current, the time-integrated values of the rectangular wave-shaped voltages of the respective phases within the control period can be made substantially identical in accordance with the variation in the system voltage. Hence, even when the system voltage varies unpredictably, the rectangular wave control can be performed appropriately while suppressing vibration in the alternating current electric motor.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 1</figref> is a circuit diagram showing the constitution of an electric motor driving apparatus according to a first embodiment of the present invention;</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 2</figref> is a view showing an operable region of an electric motor, which is defined by a rotation speed and a torque;</p>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 3</figref> is an illustrative view showing variation in a system voltage command value and accompanying variation in the operable region of the electric motor, according to the first embodiment of the present invention;</p>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. 4</figref> is a flowchart showing a control flow of a control device according to the first embodiment of the present invention;</p>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. 5</figref> is a flowchart showing a flow of rectangular wave width adjustment control;</p>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 6</figref> is an illustrative view illustrating setting of ON/OFF timings of switching elements, which is executed in the rectangular wave width adjustment control;</p>
<p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. 7</figref> is a flowchart showing a flow of voltage conversion control according to the first embodiment of the present invention;</p>
<p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. 8</figref> is an illustrative view illustrating setting of a modification start timing and a modification end timing, which is executed in the voltage conversion control according to the first embodiment of the present invention;</p>
<p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. 9</figref> is a circuit diagram showing the constitution of an electric motor driving apparatus according to a second embodiment of the present invention; and</p>
<p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. 10</figref> is a flowchart showing a control flow of a control device according to the second embodiment of the present invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0006" level="1">DETAILED DESCRIPTION OF THE EMBODIMENTS</heading>
<heading id="h-0007" level="1">First Embodiment</heading>
<p id="p-0032" num="0031">A first embodiment of the present invention will now be described on the basis of the drawings. As shown in <figref idref="DRAWINGS">FIG. 1</figref>, in this embodiment, an example in which an electric motor driving apparatus <b>1</b> is constituted by an apparatus for driving a synchronous electric motor <b>4</b> having an embedded magnet structure (an IPMSM; to be referred to simply as the &#x201c;electric motor <b>4</b>&#x201d; hereafter), which serves as an alternating current electric motor operated by a three-phase alternating current, will be described. The electric motor <b>4</b> also operates as a power generator as required, and is used as a drive power source for an electric vehicle, a hybrid vehicle, or similar, for example. The electric motor driving apparatus <b>1</b> includes a system voltage generation unit <b>32</b> for generating a direct-current system voltage, and an inverter <b>6</b> for converting the system voltage Vdc into an alternating current voltage having three mutually deviating phases and supplying the alternating current voltage to the electric motor <b>4</b>. In this embodiment, the system voltage generation unit <b>32</b> includes a direct current power supply <b>3</b>, and a converter <b>5</b> for converting a power supply voltage Vb from the direct current power supply <b>3</b> to generate a desired system voltage Vdc. Further, in this embodiment, a control device <b>2</b> is constituted to be capable of controlling the electric motor driving apparatus <b>1</b> using a vector control method, ON/OFF-controlling a plurality of switching elements E<b>3</b> to E<b>8</b> provided in the inverter <b>6</b>, and executing rectangular wave control such that a three-phase rectangular wave-shaped voltage is output. A feature of this embodiment is that when the converter <b>5</b> modifies the system voltage Vdc during execution of the rectangular wave control, the control device <b>2</b> performs rectangular wave width adjustment control for setting ON/OFF timings of the switching elements E<b>3</b> to E<b>8</b> on the basis of a rate of change K of the system voltage Vdc such that a time-integrated value of the rectangular wave-shaped voltage of each phase within a control period T set at the length of a single electrical angle period is substantially identical among the respective phases. The electric motor driving apparatus <b>1</b> and the control device <b>2</b> according to this embodiment will be described in detail below.</p>
<p id="p-0033" num="0032">1. Constitution of Electric Motor Driving Apparatus</p>
<p id="p-0034" num="0033">First, the constitution of the electric motor driving apparatus <b>1</b> according to this embodiment will be described on the basis of <figref idref="DRAWINGS">FIG. 1</figref>. The electric motor driving apparatus <b>1</b> includes the converter <b>5</b> and the inverter <b>6</b>. Further, the electric motor driving apparatus <b>1</b> includes the direct current power supply <b>3</b>, a first smoothing capacitor C<b>1</b> for smoothing the direct current voltage Vb from the direct current power supply <b>3</b>, and a second smoothing capacitor C<b>2</b> for smoothing the system voltage Vdc boosted by the converter <b>5</b>. Various secondary batteries such as a nickel hydrogen secondary battery or a lithium ion secondary battery, a capacitor, a combination thereof, and so on, for example, may be used as the direct current power supply <b>3</b>. The power supply voltage Vb, which is the voltage of the direct current power supply <b>3</b>, is detected by a power supply voltage sensor <b>41</b> and output to the control device <b>2</b>.</p>
<p id="p-0035" num="0034">The converter <b>5</b> is a DC-DC converter that generates the direct current system voltage Vdc at a desired value by converting the power supply voltage Vb from the direct current power supply <b>3</b>, and corresponds to a voltage conversion unit of the present invention. In this embodiment, the converter <b>5</b> functions as a boost converter for generating the desired system voltage Vdc by boosting the power supply voltage Vb. Note that when the electric motor <b>4</b> functions as a power generator, the system voltage Vdc from the inverter <b>6</b> is reduced and supplied to the direct current power supply <b>3</b> to charge the direct current power supply <b>3</b>. The converter <b>5</b> includes a reactor L<b>1</b>, voltage-converting switching elements E<b>1</b>, E<b>2</b>, and diodes D<b>1</b>, D<b>2</b>. Here, the converter <b>5</b> includes, as the voltage-converting switching elements, an upper arm element E<b>1</b> and a lower arm element E<b>2</b> that form a pair connected in series. In this example, IGBTs (insulated gate bipolar transistors) are used as the voltage-converting switching elements E<b>1</b>, E<b>2</b>. An emitter of the upper arm element E<b>1</b> and a collector of the lower arm element E<b>2</b> are connected to a positive electrode terminal of the direct current power supply <b>3</b> via the reactor L<b>1</b>. Further, a collector of the upper arm element E<b>1</b> is connected to a system voltage line <b>51</b> to which the voltage boosted by the converter <b>5</b> is supplied, and an emitter of the lower arm element E<b>2</b> is connected to a negative electrode line <b>52</b> which is connected to a negative electrode terminal of the direct current power supply <b>3</b>. Furthermore, the diodes D<b>1</b>, D<b>2</b>, which function as free wheel diodes, are connected in series to the voltage-converting switching elements E<b>1</b>, E<b>2</b>, respectively. Note that instead of IGBTs, power transistors having various structures, such as a bipolar type, a field effect type, and a MOS type, may be employed as the voltage-converting switching elements E<b>1</b>, E<b>2</b>.</p>
<p id="p-0036" num="0035">The voltage-converting switching elements E<b>1</b>, E<b>2</b> are ON/OFF-operated respectively in accordance with switching control signals S<b>1</b>, S<b>2</b> output from the control device <b>2</b>. In this embodiment, the switching control signals S<b>1</b>, S<b>2</b> are gate drive signals for driving gates of the respective switching elements E<b>1</b>, E<b>2</b>. Hence, during a boost operation, the converter <b>5</b> boosts the power supply voltage Vb supplied from the direct current power supply <b>3</b> to the desired system voltage Vdc and supplies the system voltage Vdc to the system voltage line <b>51</b> and the inverter <b>6</b>. Further, during a reduction operation, the converter <b>5</b> reduces the system voltage Vdc supplied from the inverter <b>6</b> and supplies the reduced system voltage Vdc to the direct current power supply <b>3</b>. The system voltage Vdc generated by the converter <b>5</b> is detected by a system voltage sensor <b>42</b> and output to the control device <b>2</b>. Note that when a system voltage command value Vdct serving as a command value of the system voltage is equal to the power supply voltage Vb such that boosting by the converter <b>5</b> is not required, the system voltage Vdc remains equal to the power supply voltage Vb.</p>
<p id="p-0037" num="0036">The inverter <b>6</b> is a device for converting the direct current system voltage Vdc into an alternating current voltage and supplying the alternating current voltage to the electric motor <b>4</b>, and corresponds to a direct current-alternating current conversion unit of the present invention. The inverter <b>6</b> includes a plurality of sets of switching elements E<b>3</b> to E<b>8</b> and diodes D<b>3</b> to D<b>8</b>. Here, the inverter <b>6</b> includes a pair of switching elements for each phase (three phases, namely a U phase, a V phase and a W phase) of the electric motor <b>4</b>. More specifically, the inverter <b>6</b> includes a U phase upper arm element E<b>3</b> and a U phase lower arm element E<b>4</b>, a V phase upper arm element E<b>5</b> and a V phase lower arm element E<b>6</b>, and a W phase upper arm element E<b>7</b> and a W phase lower arm element E<b>8</b>. In this example, IGBTs (insulated gate bipolar transistors) are used as the switching elements E<b>3</b> to E<b>8</b>. Emitters of the upper arm elements E<b>3</b>, E<b>5</b>, E<b>7</b> and collectors of the lower arm elements E<b>4</b>, E<b>6</b>, E<b>8</b> of the respective phases are connected to coils of the respective phases of the electric motor <b>4</b>. Further, collectors of the upper arm elements E<b>3</b>, E<b>5</b>, E<b>7</b> of the respective phases are connected to the system voltage line <b>51</b>, and emitters of the lower arm elements E<b>4</b>, E<b>6</b>, E<b>8</b> of the respective phases are connected to the negative electrode line <b>52</b>. Furthermore, the diodes D<b>3</b> to D<b>8</b>, which function as free wheel diodes, are connected in parallel to the switching elements E<b>3</b> to E<b>8</b>, respectively. Note that instead of IGBTs, power transistors having various structures, such as a bipolar type, a field effect type, and a MOS type, may be employed as the switching elements E<b>3</b> to E<b>8</b>.</p>
<p id="p-0038" num="0037">The switching elements E<b>3</b> to E<b>8</b> are ON/OFF-operated respectively in accordance with switching control signals S<b>3</b> to S<b>8</b> output from the control device <b>2</b>. Accordingly, the inverter <b>6</b> converts the system voltage Vdc into a three-phase alternating current voltage having mutually deviating phases and supplies the three-phase alternating current voltage to the electric motor <b>4</b> to cause the electric motor <b>4</b> to output a torque corresponding to a target torque TM. At this time, the respective switching elements E<b>3</b> to E<b>8</b> perform switching operations corresponding to PWM (pulse width modulation) control or rectangular wave control, to be described below, in accordance with the switching control signals S<b>3</b> to S<b>8</b>. In this embodiment, the switching control signals S<b>3</b> to S<b>8</b> are gate drive signals for driving gates of the respective switching elements E<b>3</b> to E<b>8</b>. When the electric motor <b>4</b> functions as a power generator, on the other hand, a generated alternating current voltage is converted into a direct current voltage and supplied to the system voltage line <b>51</b> and the converter <b>5</b>. Currents of the respective phases flowing between the inverter <b>6</b> and the coils of the respective phases of the electric motor <b>4</b>, or more specifically a U phase current Iur, a V phase current Ivr, and a W phase current Iwr, are detected by a current sensor <b>43</b> and output to the control device <b>2</b>.</p>
<p id="p-0039" num="0038">Further, a magnetic pole position &#x3b8; at each point of a rotor of the electric motor <b>4</b> is detected by a rotation sensor <b>44</b> and output to the control device <b>2</b>. The rotation sensor <b>44</b> is constituted by a resolver or the like, for example. Here, the magnetic pole position &#x3b8; expresses a rotation angle of the rotor on an electrical angle. The target torque TM of the electric motor <b>4</b> and the system voltage command value Vdct are input into the control device <b>2</b> as request signals from another control device such as a vehicle control device, not shown in the drawings, or the like.</p>
<p id="p-0040" num="0039">2. Constitution of Control Device</p>
<p id="p-0041" num="0040">Next, functions of the control device <b>2</b> according to this embodiment will be described in detail. As shown in <figref idref="DRAWINGS">FIG. 1</figref>, the control device <b>2</b> includes a switching control unit <b>30</b> and a voltage conversion control unit <b>31</b>. These function units of the control device <b>2</b> are constituted by hardware, software (a program), or both for performing various processing on input data using a logic circuit such as a microcomputer as a core member. As described above, the target torque TM and the magnetic pole position &#x3b8; are input into the control device <b>2</b>. The switching control unit <b>30</b> then generates and outputs the switching control signals S<b>3</b> to S<b>8</b> for driving the electric motor <b>4</b> in accordance with the target torque TM, the magnetic pole position &#x3b8;, and a rotation speed &#x3c9; of the electric motor <b>4</b> derived from the magnetic pole position &#x3b8;, whereby the inverter <b>6</b> is driven. At this time, the control device <b>2</b> drives the inverter <b>6</b> while switching between either PWM control and maximum torque control or rectangular wave control and field-weakening control. Further, the power supply voltage Vb from the direct current power supply <b>3</b>, the system voltage Vdc generated by the converter <b>5</b>, and the system voltage command value Vdct are input into the control device <b>2</b>. The voltage conversion control unit <b>31</b> then generates and outputs the switching control signals S<b>1</b>, S<b>2</b> for generating an equal system voltage Vdc to the input system voltage command value Vdct, whereby the converter <b>5</b> is driven.</p>
<p id="p-0042" num="0041">During direct current-alternating current conversion in the inverter <b>6</b>, the switching control unit <b>30</b> executes PWM control and rectangular wave control alternately. In this embodiment, the PWM control includes two control methods, namely sine wave PWM control and overmodulation PWM control. In sine wave PWM control, the respective switching elements E<b>3</b> to E<b>8</b> of the inverter <b>6</b> are ON/OFF-controlled on the basis of a comparison between a sine wave-shaped voltage command value and a carrier wave. More specifically, output voltage waveforms from the inverter <b>6</b> in each of the U, V and W phases are constituted by a collection of pulses having a high level period in which the upper arm elements E<b>3</b>, E<b>5</b>, E<b>7</b> are ON and a low level period in which the lower arm elements E<b>4</b>, E<b>6</b>, E<b>8</b> are ON, and a duty ratio of each pulse is controlled such that a fundamental wave component thereof forms a sine wave at a fixed period. When a ratio of an effective value of the fundamental wave component of the output voltage waveform from the inverter <b>6</b> to the system voltage Vdc is set as a modulation rate m, the modulation rate m can be varied within a range of 0 to 0.61 in the sine wave PWM control. According to this sine wave PWM control, torque control can be performed by executing electric motor current control (electric motor current feedback control) corresponding to vector control, for example.</p>
<p id="p-0043" num="0042">In the overmodulation PWM control, the switching control unit <b>30</b> executes control to distort the waveform of the fundamental wave component of the output voltage waveform from the inverter <b>6</b> by increasing the duty ratio of each pulse on a peak side of the fundamental wave component and reducing the duty ratio on a valley side in comparison with the sine wave PWM control, and as a result, an amplitude is increased beyond that of the sine wave PWM control. In the overmodulation PWM control, the modulation rate m can be varied within a range of 0.61 to 0.78. A state in which the modulation rate m has been increased to the maximum 0.78 in the overmodulation PWM control corresponds to rectangular wave control. According to this overmodulation PWM control, torque control can be performed by executing electric motor current control (electric motor current feedback control) corresponding to vector control, for example.</p>
<p id="p-0044" num="0043">The switching control unit <b>30</b> performs rectangular wave control such that the output voltage waveforms from the inverter <b>6</b> in each of the U, V and W phases form rectangular waves in which the high level period and the low level period appear once each in a single period and a ratio between the high level period and the low level period is basically 1:1. Hence, the rectangular wave control causes the inverter <b>6</b> to output a rectangular wave-shaped voltage. In other words, the switching control unit <b>30</b> is a control unit which performs both the PWM control described above and rectangular wave control for ON/OFF-controlling the plurality of switching elements E<b>3</b> to E<b>8</b> provided in the inverter <b>6</b> such that a three-phase rectangular wave-shaped voltage is output. In the rectangular wave control, the modulation rate m is fixed at 0.78. According to the rectangular wave control, torque control can be performed through voltage phase control (torque feedback control) based on a deviation between a torque performance value, which is determined by a power calculation using the current values Iur, Ivr, Iwr of the respective U, V and W phases detected by the current sensor <b>43</b> and a voltage command value, and a torque command value, for example. Further, torque control can be performed by executing electric motor current control (electric motor current feedback control) corresponding to vector control. Note that the sine wave PWM control, overmodulation PWM control, and rectangular wave control performed by the switching control unit <b>30</b> are well known, and therefore detailed description thereof has been omitted here (see JP-A-2006-311770, for example).</p>
<p id="p-0045" num="0044">Incidentally, in the electric motor <b>4</b>, the induced voltage increases as the rotation speed increases, leading to an increase in the alternating current voltage (to be referred to hereafter as a &#x201c;required voltage&#x201d;) required to drive the electric motor <b>4</b>. When the required voltage exceeds a maximum alternating current voltage (to be referred to hereafter as a &#x201c;maximum output voltage&#x201d;) that can be output from the inverter <b>6</b> following conversion of the system voltage Vdc at that time, a required current cannot be passed through the coils, and as a result, the electric motor <b>4</b> cannot be controlled appropriately. Hence, in this embodiment, maximum torque control is performed together with the PWM control in a state where the modulation rate m of the PWM control (the sine wave PWM control or the overmodulation PWM control) is varied within a range of 0 to 0.78 in accordance with the required voltage of the electric motor <b>4</b> and the required voltage of the electric motor <b>4</b> is lower than the maximum output voltage in that range. When the required voltage of the electric motor <b>4</b> reaches the maximum output voltage at the maximum modulation rate (m=0.78) of the PWM control, rectangular wave control and field-weakening control are performed. Here, the maximum torque control is control for adjusting the current phase such that an output torque of the electric motor <b>4</b> reaches a maximum relative to a constant current. Further, the field-weakening control is control for adjusting (advancing) the current phase such that magnetic flux is generated from the coils in a direction for weakening a field magnetic flux of the electric motor <b>4</b>. The required voltage and the maximum output voltage can be compared to each other as effective values of the alternating current voltage. Note that the maximum torque control and field-weakening control are well known and therefore detailed description thereof has been omitted here (see JP-A-2006-311770, for example).</p>
<p id="p-0046" num="0045"><figref idref="DRAWINGS">FIG. 2</figref> is a view showing a region A<b>1</b>, in which PWM control and maximum torque control are executed, and a region A<b>2</b>, in which rectangular wave control and field-weakening control are executed, within an operable region of the electric motor <b>4</b> defined by the rotation speed &#x3c9; and the target torque TM. Note that <figref idref="DRAWINGS">FIG. 2</figref> does not take into account boosting of the system voltage Vdc. As noted above, the induced voltage of the electric motor <b>4</b> increases as the rotation speed &#x3c9; increases, and therefore the required voltage of the electric motor <b>4</b> increases correspondingly. Hence, when an operating point defined by the target torque TM input into the control device <b>2</b> and the rotation speed &#x3c9; of the electric motor <b>4</b> at that time is positioned within the comparatively low rotation region A<b>1</b>, PWM control and maximum torque control are executed, and when the operating point is positioned within the comparatively high rotation region A<b>2</b>, rectangular wave control and field-weakening control are executed. A boundary between the region A<b>1</b> and the region A<b>2</b> is determined by the rotation speed &#x3c9; and the torque at which the required voltage of the electric motor <b>4</b> matches the maximum output voltage at the maximum modulation rate of the PWM control (i.e. the modulation rate m=0.78 at which rectangular wave control begins).</p>
<p id="p-0047" num="0046">The voltage conversion control unit <b>31</b> is a control unit for obtaining the system voltage command value Vdct serving as the command value of the system voltage Vdc generated by the converter <b>5</b>, and performing ON/OFF control on the switching elements E<b>1</b>, E<b>2</b> provided in the converter <b>5</b> on the basis of the system voltage command value Vdct. The voltage conversion control unit <b>31</b> generates the switching control signals S<b>1</b>, S<b>2</b> for controlling the voltage-converting switching elements E<b>1</b>, E<b>2</b> of the converter <b>5</b> in accordance with the obtained system voltage command value Vdct. By ON/OFF-operating the voltage-converting switching elements E<b>1</b>, E<b>2</b> of the converter <b>5</b> in accordance with the switching control signals S<b>1</b>, S<b>2</b>, the power supply voltage Vb is boosted. More specifically, in response to the switching control signals S<b>1</b>, S<b>2</b> from the voltage conversion control unit <b>31</b>, the converter <b>5</b> boosts the power supply voltage Vb by performing an operation to switch repeatedly and alternately between a state in which only the lower arm element E<b>2</b> is ON for a predetermined period and a state in which both the upper arm element E<b>1</b> and the lower arm element E<b>2</b> are OFF for a predetermined period. A boost ratio at this time corresponds to a duty ratio of the ON period of the lower arm element E<b>2</b>. In other words, power accumulation in the reactor L<b>1</b> increases as the ON duty of the lower arm element E<b>2</b> increases, and therefore the system voltage Vdc output from the converter <b>5</b> can be increased. Note that in addition to the system voltage command value Vdct, the power supply voltage Vb and the system voltage Vdc are also input into the control device <b>2</b>. On the basis of the system voltage command value Vdct and the system voltage Vdc or the system voltage command value Vdct, the system voltage Vdc and the power supply voltage Vb, the voltage conversion control unit <b>31</b> performs feedback control to cause the converter <b>5</b> to generate an equal system voltage Vdc to the system voltage command value Vdct.</p>
<p id="p-0048" num="0047"><figref idref="DRAWINGS">FIG. 3</figref> is an illustrative view showing an example of variation in the system voltage command value Vdct and accompanying variation in the operable region of the electric motor <b>4</b>. <figref idref="DRAWINGS">FIG. 3B</figref> shows an example of variation in the system voltage command value Vdct when the rotation speed &#x3c9; increases, and <figref idref="DRAWINGS">FIG. 3A</figref> shows variation in the operable region of the electric motor <b>4</b> corresponding to this variation in the system voltage command value Vdct. In <figref idref="DRAWINGS">FIG. 3A</figref>, a region indicated by a solid line is the operable region in a case where the power supply voltage Vb is used as the system voltage Vdc as is, i.e. without being boosted, while regions indicated by dot-dot-dash lines are operable regions that vary as the power supply voltage Vb is gradually boosted. Further, a plurality of black dots in <figref idref="DRAWINGS">FIG. 3A</figref> indicate a course of the target torque TM.</p>
<p id="p-0049" num="0048">As shown in <figref idref="DRAWINGS">FIG. 3A</figref>, in this example, the operating point of the electric motor <b>4</b> defined by the target torque TM and the rotation speed &#x3c9; remains in the region A<b>1</b>, in which the maximum torque control and the PWM control can be executed without the need to boost the power supply voltage Vb, until a time u<b>1</b>. Accordingly, the control device <b>2</b> executes the maximum torque control and the PWM control.</p>
<p id="p-0050" num="0049">From the time u<b>1</b> to a time u<b>2</b>, as shown in <figref idref="DRAWINGS">FIG. 3A</figref>, the operating point of the electric motor <b>4</b> enters the region A<b>2</b> in which the field-weakening control and the rectangular wave control are required, and therefore the control device <b>2</b> executes the field-weakening control and the rectangular wave control. At this time, the control device <b>2</b> does not perform boost control, and therefore the system voltage command value Vdct remains at an identical value to the power supply voltage Vb. Hence, the torque that can be output by the electric motor <b>4</b> decreases gradually as the rotation speed &#x3c9; increases.</p>
<p id="p-0051" num="0050">From the time u<b>2</b> to a time u<b>3</b>, as shown in <figref idref="DRAWINGS">FIG. 3B</figref>, the control device <b>2</b> executes the boost control. As a result, the system voltage command value Vdct increases gradually from the same value as the power supply voltage Vb to a value Vdcmax set as an upper limit of the system voltage command value Vdct in accordance with increases in the rotation speed &#x3c9; from the time u<b>2</b> to the time u<b>3</b>. Note that Vdcmax, which serves as the upper limit value of the system voltage command value Vdct, is preferably set at an upper limit value of the system voltage Vdc achievable through boosting by the converter <b>5</b>. When the system voltage Vdc increases in this manner, the operable region of the electric motor <b>4</b> gradually expands to the high rotation side, as shown in <figref idref="DRAWINGS">FIG. 3A</figref>. In this example, when the system voltage command value Vdct is boosted in accordance with an increase in the rotation speed &#x3c9; of the electric motor <b>4</b>, the torque that can be output by the electric motor <b>4</b> remains constant even as the rotation speed &#x3c9; increases. Note that a relationship between the rotation speed &#x3c9; of the electric motor <b>4</b> and the torque that can be output by the electric motor <b>4</b> varies during the boost control according to a relationship between a boosting speed and an acceleration of the rotor of the electric motor <b>4</b>. The control device <b>2</b> continues to execute the field-weakening control and the rectangular wave control during the boost control. In this example, the system voltage command value Vdct reaches the upper limit value thereof Vdcmax at the time u<b>3</b>. From the time u<b>3</b> onward, the torque that can be output by the electric motor <b>4</b> gradually decreases as the rotation speed &#x3c9; increases. Needless to say, the control device <b>2</b> continues to execute the field-weakening control and the rectangular wave control during this period also.</p>
<p id="p-0052" num="0051">As described above, with the control device <b>2</b> according to this embodiment, the field-weakening control and the rectangular wave control are started (time u<b>1</b> to time u<b>2</b>) before performing the boost control in a condition where the rotation speed &#x3c9; of the electric motor <b>4</b> and the target torque TM are increasing. When the rotation speed &#x3c9; and the target torque TM subsequently increase further, the system voltage Vdc is boosted while maintaining the field-weakening control and the rectangular wave control. Hence, switching loss generated by the rectangular wave control can be reduced over a wide operating range, enabling an improvement in the efficiency of the electric motor driving apparatus <b>1</b>. Further, once the system voltage command value Vdct has reached the upper limit value thereof Vdcmax, the rotation speed &#x3c9; of the electric motor <b>4</b> can be increased even further by increasing a field-weakening current.</p>
<p id="p-0053" num="0052">3. Operation of Control Device</p>
<p id="p-0054" num="0053">Next, an operation of the control device <b>2</b> will be described. As described above, in this embodiment, the control device <b>2</b> continues to execute the rectangular wave control during boost control by the converter <b>5</b>. When the converter <b>5</b> modifies the system voltage Vdc during execution of the rectangular wave control, the switching control unit <b>30</b> executes rectangular wave width adjustment control for setting the ON/OFF timings of the switching elements E<b>3</b> to E<b>8</b> on the basis of the rate of change K of the system voltage Vdc such that time-integrated values of the rectangular wave-shaped voltages of the three phases within the control period T set at the length of a single electrical angle period are substantially identical among the respective phases. An overall operation of the control device <b>2</b>, the rectangular wave width adjustment control, and voltage conversion control will be described in sequence below.</p>
<p id="p-0055" num="0054">3-1. Overall Operation</p>
<p id="p-0056" num="0055"><figref idref="DRAWINGS">FIG. 4</figref> is a flowchart showing the flow of an overall operation performed by the control device <b>2</b> during the rectangular wave control. Operations of the control device <b>2</b> will be described in sequence below while following the flowchart shown in <figref idref="DRAWINGS">FIG. 4</figref>. First, the control device <b>2</b> obtains the system voltage command value Vdct (step #<b>01</b>) and the system voltage Vdc (step #<b>02</b>). The control device <b>2</b> then determines whether or not the system voltage Vdc needs to be modified by comparing the system voltage command value Vdct to the system voltage Vdc (step #<b>03</b>). Here, it is determined that the system voltage Vdc needs to be modified when a difference of at least a fixed value exists between the system voltage command value Vdct and the system voltage Vdc. The fixed value is preferably determined in accordance with an error included in the system voltage Vdc obtained by the system voltage sensor <b>42</b>, a variation width of the system voltage Vdc when the system voltage Vdc is not modified, and so on. When the system voltage Vdc needs to be modified (step #<b>03</b>: Yes), the switching control unit <b>30</b> performs the rectangular wave width adjustment control to be described below (step #<b>04</b>), and the voltage conversion control unit <b>31</b> performs the voltage conversion control to be described below (step #<b>05</b>), When the system voltage Vdc does not need to be modified (step #<b>03</b>: No), on the other hand, normal control is performed (step #<b>06</b>). Here, normal control is control performed to obtain a rectangular wave in which the ratio between the high level period and the low level period of the rectangular wave-shaped voltage is 1:1.</p>
<p id="p-0057" num="0056">3-2. Rectangular Wave Width Adjustment Control</p>
<p id="p-0058" num="0057">Next, the rectangular wave width adjustment control corresponding to the step #<b>04</b> of the flowchart in <figref idref="DRAWINGS">FIG. 4</figref> will be described in detail using <figref idref="DRAWINGS">FIGS. 5 and 6</figref>. <figref idref="DRAWINGS">FIG. 5</figref> is a flowchart showing the flow of the rectangular wave width adjustment control, and <figref idref="DRAWINGS">FIG. 6</figref> is an illustrative view illustrating setting of the ON/OFF timings of the switching elements E<b>3</b> to E<b>8</b>, which is executed in the rectangular wave width adjustment control. Note that in this example, the system voltage Vdc is boosted. More specifically, this example corresponds to a case in which the system voltage Vdc is boosted at a constant rate of change K. Although omitted from the description, the ON/OFF timings of the switching elements E<b>3</b> to E<b>8</b> can be set similarly using the following procedures in a case where the system voltage Vdc is reduced.</p>
<p id="p-0059" num="0058"><figref idref="DRAWINGS">FIG. 6A</figref> is a view showing temporal variation in the system voltage Vdc. <figref idref="DRAWINGS">FIG. 6B</figref> is a view showing temporal variation in a U phase voltage Vu supplied to a U phase coil. <figref idref="DRAWINGS">FIG. 6C</figref> is a view showing temporal variation in a V phase voltage Vv supplied to a V phase coil. <figref idref="DRAWINGS">FIG. 6D</figref> is a view showing temporal variation in a W phase voltage Vw supplied to a W phase coil. Note that in <figref idref="DRAWINGS">FIGS. 6B to 6D</figref>, voltages of the respective U, V, W phases are expressed using a half value (Vdc/2) of the system voltage Vdc at each point in time as a reference. Accordingly, the voltages Vu, Vv, Vw of the respective phases form rectangular waves having 0 as a center, a voltage value of (+Vdc/2) in the high level period, and a voltage value of (&#x2212;Vdc/2) in the low level period. Further, in the high level period, the voltage value of each phase increases on a gradient of (K/2), while in the low level period, the voltage value of each phase decreases on a gradient of (&#x2212;K/2).</p>
<p id="p-0060" num="0059">The rectangular wave width adjustment control is control performed by the switching control unit <b>30</b> when the converter <b>5</b> modifies the system voltage Vdc during execution of the rectangular wave control. In the rectangular wave width adjustment control, the ON/OFF timings of the plurality of switching elements E<b>3</b> to E<b>8</b> are set on the basis of the rate of change K of the system voltage Vdc such that a time-integrated value of the rectangular wave-shaped voltages of the three phases within the control period T set at the length of a single electrical angle period is substantially identical among the respective phases. Note that in the following description, a point at which a voltage value of the rectangular wave-shaped voltage of each phase switches between a high level and a low level as the switching elements E<b>3</b> to E<b>8</b> are switched ON and OFF will be referred to as a high/low switch point.</p>
<p id="p-0061" num="0060">In this embodiment, when the rectangular wave width adjustment control is performed, the switching control unit <b>30</b> aligns a start point of the control period T with one of the high/low switch points. The ON/OFF timings of the switching elements E<b>3</b> to E<b>8</b> are then set on the basis of the length of the control period T, the value of the system voltage Vdc at the start point of the control period T, and the rate of change K of the system voltage Vdc during the control period T such that the time-integrated value of the system voltage Vdc is substantially identical in respective divided periods. Here, the divided periods are periods set by dividing the control period T using the respective high/low switch points of the rectangular wave-shaped voltages of the three phases as dividing points. Operations of the switching control unit <b>30</b> will be described below in sequence following the flowchart shown in <figref idref="DRAWINGS">FIG. 5</figref>, with appropriate reference to <figref idref="DRAWINGS">FIG. 6</figref>.</p>
<p id="p-0062" num="0061">First, the switching control unit <b>30</b> sets the start point of the control period T (step #<b>11</b>). In the example shown in <figref idref="DRAWINGS">FIG. 6</figref>, the start point of the control period T is set at a time t<b>0</b>. The time t<b>0</b> is the high/low switch point of the U phase voltage Vu. More specifically, the time t<b>0</b> is a time at which the U phase upper arm element E<b>3</b> is switched from an ON state to an OFF state and the U phase lower arm element E<b>4</b> is switched from an OFF state to an ON state, whereby the U phase voltage Vu is switched from the high level to the low level. Next, the length of the control period T is set (step #<b>12</b>). In this embodiment, the control period T is set at the length of a single electrical angle period, and in the example shown in <figref idref="DRAWINGS">FIG. 6</figref>, the length of the control period T is (t<b>6</b>-t<b>0</b>). In other words, in this example, an end point of the control period T is a time t<b>6</b>. The time t<b>6</b> corresponds to a high/low switch point of the U phase voltage Vu at which, similarly to the time t<b>1</b>, the U phase voltage Vu is switched from the high level to the low level.</p>
<p id="p-0063" num="0062">Next, the system voltage Vdc at the start point (the time t<b>0</b> in this example) of the control period T is obtained (step #<b>13</b>). In the example shown in <figref idref="DRAWINGS">FIG. 6</figref>, this value is V<b>0</b>. Next, the rate of change K of the system voltage Vdc is obtained (step #<b>14</b>). In this embodiment, the voltage conversion control unit <b>31</b> calculates the rate of change K of the system voltage Vdc and inputs the calculated rate of change K into the switching control unit <b>30</b>. The switching control unit <b>30</b> then sets the ON/OFF timings of the switching elements E<b>3</b> to E<b>8</b> on the basis of the length (t<b>6</b>-t<b>0</b>) of the control period T, the value V<b>0</b> of the system voltage Vdc at the start point t<b>0</b> of the control period T, and the rate of change K of the system voltage Vdc during the control period T such that the time-integrated value of the system voltage Vdc is substantially identical in the respective divided periods (step #<b>15</b>).</p>
<p id="p-0064" num="0063">Setting of the ON/OFF timings of the switching elements E<b>3</b> to E<b>8</b> will now be described in detail. In the example shown in <figref idref="DRAWINGS">FIG. 6</figref>, six divided periods exist within the control period T. These six divided periods are &#x201c;t<b>0</b>-t<b>1</b>&#x201d;, &#x201c;t<b>1</b>-t<b>2</b>&#x201d;, &#x201c;t<b>2</b>-t<b>3</b>&#x201d;, &#x201c;t<b>3</b>-t<b>4</b>&#x201d;, &#x201c;t<b>4</b>-t<b>5</b>&#x201d;, and &#x201c;t<b>5</b>-t<b>6</b>&#x201d;. Note that &#x201c;tm-tn&#x201d; indicates a period extending from a time tm to a time tn. At the time t<b>1</b>, the W phase upper arm element E<b>7</b> is switched from an OFF state to an ON state and the W phase lower arm element E<b>8</b> is switched from an ON state to an OFF state, whereby the W phase voltage Vw is switched from the low level to the high level. At the time t<b>2</b>, the V phase upper arm element E<b>5</b> is switched from an ON state to an OFF state and the V phase lower arm element E<b>6</b> is switched from an OFF state to an ON state, whereby the V phase voltage Vv is switched from the high level to the low level. At the time t<b>3</b>, the U phase upper arm element E<b>3</b> is switched from an OFF state to an ON state and the U phase lower arm element E<b>4</b> is switched from an ON state to an OFF state, whereby the U phase voltage Vu is switched from the low level to the high level. At the time t<b>4</b>, the W phase upper arm element E<b>7</b> is switched from an ON state to an OFF state and the W phase lower arm element E<b>8</b> is switched from an OFF state to an ON state, whereby the W phase voltage Vw is switched from the high level to the low level. At the time t<b>5</b>, the V phase upper arm element E<b>5</b> is switched from an OFF state to an ON state and the V phase lower arm element E<b>6</b> is switched from an ON state to an OFF state, whereby the V phase voltage Vv is switched from the low level to the high level.</p>
<p id="p-0065" num="0064">Further, the times t<b>1</b> to t<b>5</b> for determining the ON/OFF timings (the high-low switch points of the respective phases) of the switching elements E<b>3</b> to E<b>8</b> are set such that the time-integrated values of the system voltages Vdc in the respective divided periods are equal to each other. In <figref idref="DRAWINGS">FIG. 6A</figref>, surface areas of sections defined by the length of each divided period and the system voltage Vdc in the corresponding divided period are expressed by s<b>1</b> to s<b>6</b> in the respective divided periods. These surface areas s<b>1</b> to s<b>6</b> are equal to the time-integrated values of the system voltages Vdc in the respective divided periods. Hence, the switching control unit <b>30</b> sets the times t<b>1</b> to t<b>5</b> such that the surface areas s<b>1</b> to s<b>6</b> are equal to each other. These times tn (n=1, 2 . . . 5) may be determined as times tn that satisfy a following Equation (1), for example.
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>{<i>V</i>0<i>+K</i>&#xd7;(<i>tn&#x2212;t</i>0)/2}&#xd7;(<i>tn&#x2212;t</i>0)&#xd7;(6<i>/n</i>)=(<i>V</i>0+<i>K&#xd7;T/</i>2)&#xd7;<i>T</i>&#x2003;&#x2003;(1)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0066" num="0065">Needless to say, the times t<b>1</b> to t<b>5</b> may be calculated on the basis of a different equation to Equation (1). Further, map data expressing relationships between the length of the control period T, the value of the system voltage Vdc at the start point of the control period T, the rate of change K of the system voltage Vdc during the control period T, and the ON/OFF timings of the switching elements E<b>3</b> to E<b>8</b> may be prepared in advance, and the ON/OFF timings of the switching elements E<b>3</b> to E<b>8</b> may be obtained and set by referring to these map data.</p>
<p id="p-0067" num="0066">When the times tn (n=1, 2 . . . 5) are set in the above manner, the time-integrated values of the rectangular wave-shaped voltages of the respective U, V, W phases within the control period T can be made substantially identical among the respective phases, as shown in <figref idref="DRAWINGS">FIGS. 6B to 6D</figref>. In other words, as shown in <figref idref="DRAWINGS">FIG. 6B</figref>, with regard to the U phase voltage Vu, the surface areas of the sections defined by the length of each divided period and the U phase voltage Vu in the corresponding divided period become equal to each other in all of the six divided periods. More specifically, since the surface area of each section is identical, a sum (a<b>1</b>) of the surface areas corresponding to the high level period and a sum (a<b>2</b>) of the surface areas corresponding to the low level period are both three times the surface area of each section, and therefore the surface area a<b>1</b> and the surface area a<b>2</b> are equal. In other words, an integrated value of the U phase voltage Vu in the high level period is equal to the surface area a<b>1</b>, while an integrated value of the U phase voltage Vu in the low level period is equal to a value obtained by multiplying (&#x2212;1) by the surface area a<b>2</b>. Since the surface area a<b>1</b> and the surface area a<b>2</b> are equal, the time-integrated value of the rectangular wave-shaped voltage Vu of the U phase in the control period T is zero.</p>
<p id="p-0068" num="0067">Further, as shown in <figref idref="DRAWINGS">FIG. 6C</figref>, with regard to the V phase voltage Vv, the surface areas of the sections defined by the length of each divided period and the V phase voltage Vv in the corresponding divided period are equal to each other in all of the six divided periods. More specifically, since the surface area of each section is identical, a sum (b<b>1</b>) of the surface areas corresponding to the high level period and a sum (b<b>2</b>) of the surface areas corresponding to the low level period are both three times the surface area of each section, and therefore the surface area b<b>1</b> and the surface area b<b>2</b> are equal. In other words, an integrated value of the V phase voltage Vv in the high level period is equal to the surface area b<b>1</b>, while an integrated value of the V phase voltage Vv in the low level period is equal to a value obtained by multiplying (&#x2212;1) by the surface area b<b>2</b>. Since the surface area b<b>1</b> and the surface area b<b>2</b> are equal, the time-integrated value of the rectangular wave-shaped voltage Vv of the V phase in the control period T is zero.</p>
<p id="p-0069" num="0068">Furthermore, as shown in <figref idref="DRAWINGS">FIG. 6D</figref>, with regard to the W phase voltage Vw, the surface areas of the sections defined by the length of each divided period and the W phase voltage Vw in the corresponding divided period are equal to each other in all of the six divided periods. More specifically, since the surface area of each section is identical, a sum (c<b>1</b>) of the surface areas corresponding to the high level period and a sum (c<b>2</b>) of the surface areas corresponding to the low level period are both three times the surface area of each section, and therefore the surface area c<b>1</b> and the surface area c<b>2</b> are equal. In other words, an integrated value of the W phase voltage Vw in the high level period is equal to the surface area c<b>1</b>, while an integrated value of the W phase voltage Vw in the low level period is equal to a value obtained by multiplying (&#x2212;1) by the surface area c<b>2</b>. Since the surface area c<b>1</b> and the surface area c<b>2</b> are equal, the time-integrated value of the rectangular wave-shaped voltage Vw of the W phase in the control period T is zero. Hence, with regard to each of the U, V and W phases in the control period T, the surface areas of the sections corresponding to the respective divided periods are equal to each other in relation to the same phase and the other phases, and therefore the time-integrated values of the rectangular wave-shaped voltages are identical among the respective phases.</p>
<p id="p-0070" num="0069">By setting the times t<b>1</b> to t<b>5</b> as described above, the ON/OFF timings of the plurality of switching elements E<b>3</b> to E<b>8</b> can be set such that the time-integrated value of the rectangular wave-shaped voltages of each of the U, V and W phases within the control period T is substantially identical in each phase. ON-OFF-control is therefore performed on the switching elements E<b>3</b> to E<b>8</b> within the control period T in accordance with the ON/OFF timings of the switching elements E<b>3</b> to E<b>8</b> set in the above manner (step #<b>16</b>).</p>
<p id="p-0071" num="0070">As described above, in this embodiment, the ON/OFF timings of the switching elements E<b>3</b> to E<b>8</b> are set such that the time-integrated values of the system voltages Vdc in the respective divided periods are substantially identical, and therefore the time-integrated values of the rectangular wave-shaped voltages of the three phases within the control period T can be made substantially identical in each phase. As a result, disruption to a balance between the voltages Vu, Vv, Vw supplied to the coils of the respective phases during the control period T can be suppressed, thereby suppressing generation of a torque ripple. Hence, the system voltage Vdc can be modified while suppressing vibration in the electric motor <b>4</b> even during execution of the rectangular wave control, and as shown above in <figref idref="DRAWINGS">FIG. 3</figref>, rectangular wave control can be performed from the low rotation speed region in which the system voltage Vdc has not yet been boosted to the maximum system voltage Vdcmax. As a result, the usage region of the low-switching loss rectangular wave control can be expanded to the low rotation speed region side, enabling an improvement in the efficiency of the electric motor driving apparatus <b>1</b>.</p>
<p id="p-0072" num="0071">Note that here, as shown in <figref idref="DRAWINGS">FIG. 6A</figref>, only rectangular wave width adjustment control performed in the control period T set between the time t<b>0</b> and the time t<b>6</b> when the system voltage Vdc increases at the constant rate of change K was described. However, the time-integrated values of the rectangular wave-shaped voltages of the three phases within the control period T may be made substantially identical in each phase by setting the ON/OFF timings of the switching elements E<b>3</b> to E<b>8</b> such that the time-integrated values of the system voltages Vdc in the respective divided periods are substantially identical even when the system voltage Vdc increases at a rate of change K that varies during the control period rather than the constant rate of change K. Further, in a condition where the system voltage Vdc varies continuously, the control period T may be set repeatedly such that the end point of the control period T and the start point of the next control period T match, and the rectangular wave width adjustment control may be performed repeatedly in these respective control periods T.</p>
<p id="p-0073" num="0072">3-3. Voltage Conversion Control</p>
<p id="p-0074" num="0073">Next, voltage conversion control corresponding to the step #<b>05</b> of the flowchart in <figref idref="DRAWINGS">FIG. 4</figref> will be described in detail using <figref idref="DRAWINGS">FIGS. 7 and 8</figref>. Here, an example of control performed in a case where a current value of the system voltage Vdc is V<b>1</b> and V<b>2</b> (&#x3e;V<b>1</b>) is applied as the system voltage command value Vdct will be described. Although omitted from the following description, the voltage conversion control can be performed similarly using the following procedures in a case where the system voltage Vdc is reduced. <figref idref="DRAWINGS">FIG. 7</figref> is a flowchart showing the flow of the voltage conversion control. <figref idref="DRAWINGS">FIG. 8</figref> is an illustrative view of the control executed during the voltage conversion control. <figref idref="DRAWINGS">FIG. 8A</figref> is a view showing temporal variation in the system voltage Vdc. <figref idref="DRAWINGS">FIG. 8B</figref> is a view showing temporal variation in the U phase voltage Vu supplied to the U phase coil, in which, similarly to <figref idref="DRAWINGS">FIG. 6B</figref>, the U phase voltage Vu is expressed using a half value (Vdc/2) of the system voltage Vdc at each point in time as a reference. Note that illustration of the V phase voltage Vv and the W phase voltage Vw has been omitted.</p>
<p id="p-0075" num="0074">The voltage conversion control is performed by the voltage conversion control unit <b>31</b> when the converter <b>5</b> is caused to modify the system voltage Vdc. In this control, a modification start timing t<b>10</b> for starting modification of the system voltage Vdc and a modification end timing t<b>20</b> for ending modification of the system voltage Vdc are set, the rate of change K of the system voltage Vdc is calculated, and the converter <b>5</b> ON/OFF-controls the switching elements E<b>1</b>, E<b>2</b> on the basis of the modification start timing t<b>10</b>, the modification end timing t<b>20</b>, and the rate of change K. More specifically, the voltage conversion control unit <b>31</b> sets the modification start timing t<b>10</b> to match one of the ON/OFF timings of the switching elements E<b>3</b> to E<b>8</b> provided in the inverter <b>6</b>, and sets the modification end timing t<b>20</b> to match an ON/OFF timing, from among the ON/OFF timings of the switching elements E<b>3</b> to E<b>8</b> provided in the inverter <b>6</b>, which differs from the modification start timing t<b>10</b> by an integral multiple of the control period T. Operations of the voltage conversion control unit <b>31</b> will be described below in sequence following the flowchart shown in <figref idref="DRAWINGS">FIG. 7</figref>, with appropriate reference to <figref idref="DRAWINGS">FIG. 8</figref>.</p>
<p id="p-0076" num="0075">First, the voltage conversion control unit <b>31</b> sets the modification start timing t<b>10</b> (step #<b>21</b>). In the example of <figref idref="DRAWINGS">FIG. 8</figref>, the modification start timing t<b>10</b> is set to match the high-low switch point, from among the high-low switch points of the U phase voltage Vu, at which the high level is switched to the low level. Furthermore, in this example, the start point of the initially set control period T is set to match the modification start timing t<b>10</b>. In so doing, the rectangular wave width adjustment control can be performed from the initial point at which modification of the system voltage Vdc begins, and as a result, generation of a torque ripple can be suppressed more reliably.</p>
<p id="p-0077" num="0076">Next, the modification end timing t<b>20</b> is set (step #<b>22</b>). In the example of <figref idref="DRAWINGS">FIG. 8</figref>, the modification end timing t<b>20</b> is set to match the high-low switch point of the U phase voltage Vu following the elapse of a time corresponding to an integral multiple of a single electrical angle period (in this example, three times a single electrical angle period) from the modification start timing t<b>10</b>. By setting the modification end timing t<b>20</b> in this manner, the start point of the first control period T can be aligned with the modification start timing t<b>10</b> and the end point of the final control period T can be aligned with the modification end timing t<b>20</b> in a case where a plurality of control periods T (three in this example) are set continuously between the modification start timing t<b>10</b> and the modification end timing t<b>20</b>. Thus, the rectangular wave width adjustment control can be performed in all of the periods from the modification start timing t<b>10</b> to the modification end timing t<b>20</b>, and as a result, generation of a torque ripple can be suppressed even more reliably.</p>
<p id="p-0078" num="0077">Next, the rate of change K of the system voltage Vdc between the modification start timing t<b>10</b> and the modification end timing t<b>20</b> is calculated on the basis of V<b>1</b>, which is the current system voltage Vdc, V<b>2</b>, which is the system voltage command value Vdct, the modification start timing t<b>10</b>, and the modification end timing t<b>20</b>, using a following Equation (2) (step #<b>23</b>).
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>K</i>(<i>V</i>2<i>&#x2212;V</i>1)/(<i>t</i>20<i>&#x2212;t</i>10)&#x2003;&#x2003;(2)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0079" num="0078">The voltage conversion control unit <b>31</b> then outputs the calculated rate of change K of the system voltage Vdc to the switching control unit <b>30</b>. Next, the voltage conversion control unit <b>31</b> sets the ON/OFF timings of the switching elements E<b>1</b>, E<b>2</b> provided in the converter <b>5</b> (step #<b>24</b>) and ON/OFF-controls the switching elements E<b>1</b>, E<b>2</b> (step #<b>25</b>) in order to vary the system voltage Vdc from V<b>1</b> to V<b>2</b> at the rate of change K between the set modification start timing t<b>10</b> and modification end timing t<b>20</b>. Note that the ON/OFF timings of the switching elements E<b>1</b>, E<b>2</b> are set using a well known method, and therefore detailed description of this method has been omitted.</p>
<heading id="h-0008" level="1">Second Embodiment</heading>
<p id="p-0080" num="0079">Next, a second embodiment of the present invention will be described. In the first embodiment, an example in which the system voltage generation unit <b>32</b> includes the converter <b>5</b> was described, but in this embodiment, as shown in <figref idref="DRAWINGS">FIG. 9</figref>, the system voltage generation unit <b>32</b> includes only the direct current power supply <b>3</b> and not the converter <b>5</b>. Hence, in this embodiment, the inverter <b>6</b> is connected to the direct current power supply <b>3</b> without passing through the converter <b>5</b>, and as a result, the system voltage Vdc corresponds to the output voltage of the direct current power supply <b>3</b>. Further, the control device <b>2</b> includes the switching control unit <b>30</b> but not the voltage conversion control unit <b>31</b> of the first embodiment. The switching control unit <b>30</b> differs from that of the first embodiment in that it executes the rectangular wave width adjustment control without cooperating with the voltage conversion control unit <b>31</b>. Moreover, the rate of change K of the system voltage Vdc is calculated from the system voltage Vdc detected by the system voltage sensor <b>42</b>. Here, as shown in <figref idref="DRAWINGS">FIG. 9</figref>, the system voltage sensor <b>42</b> is disposed between the system voltage line <b>51</b> and the negative electrode line <b>52</b> of the inverter <b>6</b> and connected between the second smoothing capacitor C<b>2</b> for smoothing the system voltage Vdc and the inverter <b>6</b>, similarly to the first embodiment. Note that the control device <b>2</b> may process a power supply voltage detected by a power supply voltage sensor, not shown in the drawing, for detecting an inter-terminal voltage of the direct current power supply <b>3</b> as the system voltage Vdc. The control device <b>2</b> according to this embodiment will be described below focusing on differences with the first embodiment. Note that points not described in detail are assumed to be similar to the first embodiment.</p>
<p id="p-0081" num="0080">Variation in the system voltage Vdc according to this embodiment will now be described. The direct current power supply <b>3</b> is constituted by a secondary battery, as noted above. A secondary battery has an internal resistance, and a terminal voltage increases or decreases relative to an electromotive force of the battery in accordance with this internal resistance. A magnitude of the voltage decrease or voltage increase is commensurate with a value obtained by multiplying a value of a flowing current by a value of the internal resistance. Hence, when power running or regeneration is underway in the electric motor <b>4</b> such that a discharge current or a charging current is generated in the direct current power supply <b>3</b>, for example, the system voltage Vdc varies in accordance with the voltage decrease or voltage increase. The system voltage Vdc also varies when variation occurs in the discharge current or the charging current of the direct current power supply <b>3</b> due to an operation of another electrical load such as an electric motor connected to the direct current power supply <b>3</b>. Further, the internal resistance increases in inverse proportion to the temperature of the battery. Therefore, the internal resistance increases when the temperature of the direct current power supply <b>3</b> is low, such as immediately after startup of the electric motor driving apparatus <b>1</b>, for example, and therefore the system voltage Vdc is likely to vary greatly relative to the variation in the discharge current and charging current of the direct current power supply <b>3</b>.</p>
<p id="p-0082" num="0081">4. Operation of Control Device</p>
<p id="p-0083" num="0082">In this embodiment, rectangular wave width adjustment control is performed on the basis of the rate of change K of the system voltage Vdc detected by the system voltage sensor <b>42</b>. An overall operation of the control device <b>2</b> and the rectangular wave width adjustment control will be described in detail below, focusing on differences with the first embodiment.</p>
<p id="p-0084" num="0083">4-1. Overall Operation</p>
<p id="p-0085" num="0084"><figref idref="DRAWINGS">FIG. 10</figref> is a flowchart showing the flow of an overall operation performed by the control device <b>2</b> according to this embodiment during rectangular wave control. Operations of the control device <b>2</b> will be described below in sequence, following the flowchart shown in <figref idref="DRAWINGS">FIG. 10</figref>. First, the control device <b>2</b> obtains the detected value of the system voltage Vdc and calculates the system voltage rate of change K (step #<b>31</b>). Here, the rate of change K of the system voltage Vdc is calculated on the basis of the value of the system voltage Vdc obtained in a current detection operation and a value of the system voltage Vdc obtained in a previous detection operation. The calculated rate of change K is a predicted value of the rate of change K throughout a subsequent control period T. For example, the rate of change K is calculated on the basis of a currently obtained value V<b>0</b> of the system voltage Vdc, a previously obtained value Vo<b>1</b> of the system voltage Vdc, and an interval &#x394;T<b>1</b> between the previous acquisition and the current acquisition using a following Equation (3). Here, the value of the previously obtained system voltage Vdc and the acquisition interval are stored in a memory such as a RAM of the control device <b>2</b>.
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>K</i>=(<i>V</i>0<i>&#x2212;Vo</i>1)/&#x394;<i>T</i>1&#x2003;&#x2003;(3)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0086" num="0085">Acquisition of the system voltages Vdc and a calculation timing of the rate of change K are synchronized with the start point of the control period T of the rectangular wave control, for example. Note that the rate of change K may be calculated on the basis of values of system voltages Vdc obtained at a current time and a plurality of past times and the acquisition intervals therebetween using various arithmetic expressions. Further, the calculation timing does not have to be synchronized with the control period T and may be set in synchronization with a different predetermined period to the control period T, for example. Moreover, a value obtained by executing filter processing on the calculated rate of change K or the detected system voltage Vdc may be used as the rate of change K or the system voltage Vdc in other processing.</p>
<p id="p-0087" num="0086">Next, the control device <b>2</b> determines whether or not a rectangular wave width adjustment control condition, which is a condition for executing the rectangular wave width adjustment control, is established (step #<b>32</b>). At this time, the control device <b>2</b> determines that the rectangular wave width adjustment control condition is established when variation in the system voltage Vdc is predicted. For example, the control device <b>2</b> determines that the rectangular wave width adjustment control condition is established when an absolute value of the rate of change K calculated in the step #<b>31</b> equals or exceeds a predetermined threshold.</p>
<p id="p-0088" num="0087">When it is determined that the rectangular wave width adjustment control is to be executed (step #<b>32</b>: Yes), the switching control unit <b>30</b> performs the rectangular wave width adjustment control (step #<b>33</b>). When it is determined that the rectangular wave width adjustment control is not to be executed (step #<b>32</b>: No), on the other hand, the aforementioned normal control is performed (step #<b>34</b>).</p>
<p id="p-0089" num="0088">4-2. Rectangular Wave Width Adjustment Control</p>
<p id="p-0090" num="0089">Next, the rectangular wave width adjustment control corresponding to the step #<b>33</b> of the flowchart in <figref idref="DRAWINGS">FIG. 10</figref> will be described. The rectangular wave width adjustment control according to this embodiment is similar to that of the first embodiment described using <figref idref="DRAWINGS">FIGS. 5 and 6</figref> apart from the points to be described below. More specifically, the rate of change K obtained by the switching control unit <b>30</b> in the step #<b>14</b> of <figref idref="DRAWINGS">FIG. 5</figref> differs from the first embodiment in that in this embodiment, the predicted value of the rate of change K calculated in the step #<b>31</b> of <figref idref="DRAWINGS">FIG. 10</figref> on the basis of the value of the currently obtained system voltage Vdc and the value of the previously obtained system voltage Vdc is used as the rate of change K. In the rectangular wave width adjustment control, the ON/OFF timings of the switching elements E<b>3</b> to E<b>8</b> are then set in the step #<b>15</b> of <figref idref="DRAWINGS">FIG. 5</figref> on the basis of the predicted value of the rate of change K.</p>
<p id="p-0091" num="0090">Even when the predicted value of the rate of change K, based on the value of the previously obtained system voltage Vdc, is used as the rate of change K, as in this embodiment, the ON/OFF timings of the switching elements E<b>3</b> to E<b>8</b> can be set such that the time-integrated values of the system voltages Vdc in the respective divided periods are substantially identical, similarly to the first embodiment, and therefore the time-integrated values of the rectangular wave-shaped voltages of the three phases within the control period T can be made substantially identical in each phase. As a result, disruption to the balance between the voltages Vu, Vv, Vw supplied to the coils of the respective phases during the control period T can be suppressed, thereby suppressing generation of a torque ripple. Hence, rectangular wave control can be performed while suppressing vibration in the alternating current electric motor even as the system voltage Vdc varies. As a result, the usage region of the low-switching loss rectangular wave control can be expanded, enabling an improvement in the efficiency of the electric motor driving apparatus <b>1</b>.</p>
<p id="p-0092" num="0091">4. Other Embodiments</p>
<p id="p-0093" num="0092">(1) In the above embodiments, an example in which the control period T is set at the length of a single electrical angle period was described. However, the embodiments of the present invention are not limited thereto, and in another preferred embodiment of the present invention, the control period T is set at a length corresponding to an integral multiple of a single electrical angle period, for example a length that is twice or three times a single electrical angle period.</p>
<p id="p-0094" num="0093">(2) In the above embodiments, an example in which the modification start timing t<b>10</b> at which modification of the system voltage Vdc begins is aligned with one of the ON/OFF timings of the switching elements E<b>3</b> to E<b>8</b> provided in the inverter <b>6</b> and the start point of the control period T is aligned with the modification start timing t<b>10</b> was described. However, the embodiments of the present invention are not limited thereto, and in another preferred embodiment of the present invention, the start point of the control period T is aligned with a different ON/OFF timing of the switching elements E<b>3</b> to E<b>8</b> to the modification start timing t<b>10</b> or not aligned with any of the ON/OFF timings of the switching elements E<b>3</b> to E<b>8</b>. Furthermore, the modification start timing t<b>10</b> need not be aligned with any of the ON/OFF timings.</p>
<p id="p-0095" num="0094">(3) In the above embodiments, an example in which the modification end timing t<b>20</b> at which modification of the system voltage Vdc ends is aligned with an ON/OFF timing, from among the ON/OFF timings of the switching elements E<b>3</b> to E<b>8</b> provided in the inverter, which differs from the modification start timing t<b>10</b> by a timing three times a single electrical angle period was described. However, the embodiments of the present invention are not limited thereto, and in another preferred embodiment of the present invention, the modification end timing t<b>20</b> is aligned with an ON/OFF timing that differs from the modification start timing t<b>10</b> by an identical timing to a single electrical angle period or aligned with an ON/OFF timing that differs from the modification start timing t<b>10</b> by an integral multiple of a single electrical angle period other than three times, for example twice or four times. Furthermore, the modification end timing t<b>20</b> may be aligned with an ON/OFF timing other than an ON/OFF timing that differs from the modification start timing t<b>10</b> by an integral multiple of a single electrical angle period or not aligned with any of the ON/OFF timings.</p>
<p id="p-0096" num="0095">(4) In the above embodiments, an example in which the switching control unit <b>30</b> sets the ON/OFF timings of the switching elements E<b>3</b> to E<b>8</b> during the rectangular wave width adjustment control such that the time-integrated values of the system voltages Vdc in the respective divided periods are substantially identical was described. However, the embodiments of the present invention are not limited thereto, and in another preferred embodiment of the present invention, the ON/OFF timings of the switching elements E<b>3</b> to E<b>8</b> are set such that the time-integrated values of the rectangular wave-shaped voltages of the respective phases within the control period T are substantially identical in each phase on the basis of the rate of change K of the system voltage Vdc, without taking the time-integrated value of the system voltage Vdc into account. More specifically, the high-low switch point of the U phase voltage Vu, the high-low switch point of the V phase voltage Vv, and the high-low switch point of the W phase voltage Vw may be set individually such that the time-integrated values of the rectangular wave-shaped voltages within the control period T are substantially identical in each phase. Note that in this case, the start point of the control period T does not have to be aligned with any of the high-low switch points.</p>
<p id="p-0097" num="0096">(5) In the above embodiments, an example in which the times t<b>1</b> to t<b>5</b> at which the surface areas s<b>1</b> to s<b>6</b> shown in <figref idref="DRAWINGS">FIG. 6A</figref> become equal to each other are calculated on the basis of Equation (1) was described. However, the embodiments of the present invention are not limited thereto, and the times t<b>1</b> to t<b>5</b> may be calculated on the basis of a following Equation (3).
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>{<i>Vn+K&#xd7;&#x394;tn</i>/2}&#xd7;66 <i>tn&#xd7;</i>6=(<i>V</i>0+<i>K&#xd7;T/</i>2)&#xd7;<i>T</i>&#x2003;&#x2003;(3)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0098" num="0097">Here, Vn is the system voltage Vdc at the time tn, and &#x394;tn is a difference between the time tn and the next time. In other words, with this constitution, the subsequent time to the time tn is calculated on the basis of the value Vn of the system voltage Vdc at the time tn in addition to the value V<b>0</b> of the system voltage Vdc at the start point t<b>0</b> of the control period T, the length of the control period T, and the rate of change K of the system voltage Vdc during the control period T. Note that Vn cannot be determined unless the time tn is set, and therefore, with this constitution, the times t<b>1</b>, t<b>2</b>, t<b>3</b>, t<b>4</b>, t<b>5</b> are calculated in that order.</p>
<p id="p-0099" num="0098">(6) In the first embodiment, an example in which the system voltage Vdc varies at the constant rate of change K during the control period T was described. However, the embodiments of the present invention are not limited thereto, and as long as temporal variation in the rate of change K (temporal variation in the system voltage Vdc) during the control period T is known in advance, the rectangular wave width adjustment control can be performed during the control period T. In this case, the ON/OFF timings of the switching elements E<b>3</b> to E<b>8</b> can be set by calculating the time-integrated values of the system voltages Vdc and the rectangular wave-shaped voltages Vu, Vv, Vw of the respective phases on the basis of the temporal variation in the rate of change K, i.e. without calculating the surface areas as in the above embodiment.</p>
<p id="p-0100" num="0099">(7) In the first embodiment, an example in which the electric motor driving apparatus <b>1</b> includes, as a voltage conversion unit, the boost converter <b>5</b> for generating the system voltage Vdc by boosting the power supply voltage Vb was described. However, the present invention is not limited to this embodiment and may be applied to an electric motor driving apparatus <b>1</b> having various types of voltage conversion units for generating the desired system voltage Vdc by converting the power supply voltage Vb from the direct current power supply <b>3</b>. Hence, in another preferred embodiment of the present invention, the electric motor driving apparatus <b>1</b> includes a step-up/step-down converter that both boosts and reduces the power supply voltage Vb or a step-down converter that reduces the power supply voltage Vb, for example, as the voltage conversion unit.</p>
<p id="p-0101" num="0100">(8) In the above embodiments, an example in which the alternating current electric motor <b>4</b> is a synchronous electric motor having an embedded magnet structure (an IPMSM), which is operated by a three-phase alternating current, was described. However, the embodiments of the present invention are not limited thereto, and a synchronous electric motor having a surface magnet structure (an SPMSM) or an electric motor other than a synchronous electric motor, for example an induction electric motor, may be used as the alternating current electric motor <b>4</b>, for example. Further, an alternating current other than a three-phase alternating current, such as a single phase alternating current or a multiple phase alternating current having two phases, four phases, or more may be used as the alternating current supplied to the alternating current electric motor.</p>
<p id="p-0102" num="0101">(9) In the above embodiments, an example in which the electric motor <b>4</b> is used as a drive power source for an electric vehicle, a hybrid vehicle, or the like was described. However, the electric motor <b>4</b> according to the above embodiments is not limited to this application, and the present invention may be applied to an electric motor for any application.</p>
<p id="p-0103" num="0102">(10) In the first embodiment, an example in which the switching control unit <b>30</b> obtains the rate of change K of the system voltage Vdc, calculated by the voltage conversion control unit <b>31</b>, in the step #<b>14</b> of <figref idref="DRAWINGS">FIG. 5</figref> was described. However, the embodiments of the present invention are not limited thereto, and in another preferred embodiment of the present invention, the switching control unit <b>30</b> calculates a predicted value of the rate of change K in the first embodiment on the basis of the value of a system voltage Vdc actually obtained in the past, as in the processing described in the step #<b>31</b> of <figref idref="DRAWINGS">FIG. 10</figref> in the second embodiment. In this case, the switching control unit <b>30</b> obtains the predicted value of the calculated rate of change K as the rate of change K in the step #<b>14</b> of <figref idref="DRAWINGS">FIG. 5</figref>, and sets the ON/OFF timings of the switching elements on the bass of the obtained predicted value of the rate of change K in the step #<b>15</b> of <figref idref="DRAWINGS">FIG. 5</figref>.</p>
<p id="p-0104" num="0103">(11) In the second embodiment, an example in which the system voltage generation unit <b>32</b> does not include the converter <b>5</b> and the control device <b>2</b> does not include the voltage conversion control unit <b>31</b> was described. However, the embodiments of the present invention are not limited thereto, and in the second embodiment, similarly to the first embodiment shown in <figref idref="DRAWINGS">FIG. 1</figref>, the system voltage generation unit <b>32</b> may include the converter <b>5</b> and the control device <b>2</b> may include the voltage conversion control unit <b>31</b>. Accordingly, in another preferred embodiment of the present invention, when the voltage conversion control unit <b>31</b> does not execute boosting or reducing voltage conversion control such that the system voltage corresponds to the output voltage of the direct current power supply <b>3</b>, the switching control unit <b>30</b> executes the rectangular wave width adjustment control according to the second embodiment.</p>
<p id="p-0105" num="0104">The present invention can be used favorably in a control device that controls an electric motor driving apparatus for driving an alternating current electric motor.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A control device for an electric motor driving apparatus, which performs control on an electric motor driving apparatus including a system voltage generation unit for generating a direct current system voltage and a direct current-alternating current conversion unit for converting the system voltage into an alternating current voltage having a plurality of mutually deviating phases and supplying the alternating current voltage to an alternating current electric motor, comprising:
<claim-text>a switching control unit for performing rectangular wave control in which a plurality of switching elements provided in the direct current-alternating current conversion unit are ON/OFF-controlled to output rectangular wave-shaped voltages of a plurality of phases, wherein</claim-text>
<claim-text>when the system voltage varies during execution of the rectangular wave control, the switching control unit performs rectangular wave width adjustment control to set ON/OFF timings of the plurality of switching elements on the basis of a rate of change of the system voltage such that time-integrated values of the rectangular wave-shaped voltages of the respective phases within a control period set at a length corresponding to an integral multiple of a single electrical angle period are substantially identical among the respective phases.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The control device for an electric motor driving apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein points at which voltage values of the rectangular wave-shaped voltages of the respective phases are switched between a high level and a low level by switching the plurality of switching elements ON and OFF are set as high-low switch points,
<claim-text>the switching control unit aligns a start point of the control period with one of the high-low switch points,</claim-text>
<claim-text>periods set by dividing the control period using the respective high-low switch points of the rectangular wave-shaped voltages of the plurality of phases as dividing points are set as divided periods, and</claim-text>
<claim-text>in the rectangular wave width adjustment control, the ON/OFF timings of the plurality of switching elements are set on the basis of the length of the control period, a value of the system voltage at the start point of the control period, and the rate of change of the system voltage within the control period such that time-integrated values of the system voltage in the respective divided periods are substantially identical.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The control device for an electric motor driving apparatus according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the system voltage generation unit includes a voltage conversion unit that generates a desired system voltage by converting a power supply voltage from a direct current power supply,
<claim-text>the control device further comprises a voltage conversion control unit that obtains a system voltage command value, which is a command value of the system voltage generated by the voltage conversion unit, and ON/OFF-controls a switching element provided in the voltage conversion unit on the basis of the system voltage command value,</claim-text>
<claim-text>when the voltage conversion unit is caused to modify the system voltage, the voltage conversion control unit aligns a modification start timing at which modification of the system voltage is started with one of the ON/OFF timings of the plurality of switching elements provided in the direct current-alternating current conversion unit, and</claim-text>
<claim-text>the switching control unit aligns the start point of the control period with the modification start timing.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The control device for an electric motor driving apparatus according to <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein the voltage conversion control unit aligns a modification end timing at which modification of the system voltage ends with an ON/OFF timing, from among the ON/OFF timings of the plurality of switching elements provided in the direct current-alternating current conversion unit, that differs from the modification start timing by an integral multiple of a single electrical angle period.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The control device for an electric motor driving apparatus according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the system voltage is an output voltage of a direct current power supply, and
<claim-text>the rate of change of the system voltage is calculated on the basis of a value of the system voltage at the start point of the control period and a value of the system voltage prior to the start point of the control period.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The control device for an electric motor driving apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the system voltage generation unit includes a voltage conversion unit that generates a desired system voltage by converting a power supply voltage from a direct current power supply,
<claim-text>the control device further comprises a voltage conversion control unit that obtains a system voltage command value, which is a command value of the system voltage generated by the voltage conversion unit, and ON/OFF-controls a switching element provided in the voltage conversion unit on the basis of the system voltage command value,</claim-text>
<claim-text>when the voltage conversion unit is caused to modify the system voltage, the voltage conversion control unit aligns a modification start timing at which modification of the system voltage is started with one of the ON/OFF timings of the plurality of switching elements provided in the direct current-alternating current conversion unit, and</claim-text>
<claim-text>the switching control unit aligns the start point of the control period with the modification start timing.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The control device for an electric motor driving apparatus according to <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein the voltage conversion control unit aligns a modification end timing at which modification of the system voltage ends with an ON/OFF timing, from among the ON/OFF timings of the plurality of switching elements provided in the direct current-alternating current conversion unit, that differs from the modification start timing by an integral multiple of a single electrical angle period.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The control device for an electric motor driving apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the system voltage is an output voltage of a direct current power supply, and
<claim-text>the rate of change of the system voltage is calculated on the basis of a value of the system voltage at the start point of the control period and a value of the system voltage prior to the start point of the control period. </claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
