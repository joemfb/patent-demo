<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08626833-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08626833</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12451472</doc-number>
<date>20081113</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2007-310461</doc-number>
<date>20071130</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>1007</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>15</main-group>
<subgroup>16</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20110101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>12</main-group>
<subgroup>56</subgroup>
<symbol-position>L</symbol-position>
<classification-value>N</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>B</subclass>
<main-group>7</main-group>
<subgroup>212</subgroup>
<symbol-position>L</symbol-position>
<classification-value>N</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>12</main-group>
<subgroup>26</subgroup>
<symbol-position>L</symbol-position>
<classification-value>N</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>05</class>
<subclass>D</subclass>
<main-group>1</main-group>
<subgroup>00</subgroup>
<symbol-position>L</symbol-position>
<classification-value>N</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>7</main-group>
<subgroup>00</subgroup>
<symbol-position>L</symbol-position>
<classification-value>N</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>B</section>
<class>60</class>
<subclass>R</subclass>
<main-group>22</main-group>
<subgroup>00</subgroup>
<symbol-position>L</symbol-position>
<classification-value>N</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>709204</main-classification>
<further-classification>701  1</further-classification>
<further-classification>701 36</further-classification>
<further-classification>701 49</further-classification>
<further-classification>701 48</further-classification>
<further-classification>370392</further-classification>
<further-classification>370442</further-classification>
<further-classification>370235</further-classification>
</classification-national>
<invention-title id="d2e71">Vehicle-mounted communication system</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>2004/0042401</doc-number>
<kind>A1</kind>
<name>Itoi</name>
<date>20040300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370235</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>2006/0171409</doc-number>
<kind>A1</kind>
<name>Date et al.</name>
<date>20060800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2009/0213870</doc-number>
<kind>A1</kind>
<name>Terasawa et al.</name>
<date>20090800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370442</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>DE</country>
<doc-number>10 2005 033 830</doc-number>
<kind>A1</kind>
<date>20070100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>JP</country>
<doc-number>A-2001-257679</doc-number>
<date>20010900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>JP</country>
<doc-number>A-2006-180205</doc-number>
<date>20060700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>JP</country>
<doc-number>A-2006-211585</doc-number>
<date>20060800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>JP</country>
<doc-number>A-2007-60400</doc-number>
<date>20070300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00009">
<othercit>International Search Report of Application No. PCT/JP2008/070660, issued Dec. 22, 2008.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00010">
<othercit>Sep. 21, 2012 Office Action issued in German Patent Application No. 11 2008 003 047.2 (with translation).</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>5</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>709204</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>701  1</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>701 35</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>701 36</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>701 49</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>701 48</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>701903</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>701180</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370392</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370442</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370235</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370351</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370401</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>9</number-of-drawing-sheets>
<number-of-figures>16</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20100138493</doc-number>
<kind>A1</kind>
<date>20100603</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Natsume</last-name>
<first-name>Akihiro</first-name>
<address>
<city>Yokkaichi</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Natsume</last-name>
<first-name>Akihiro</first-name>
<address>
<city>Yokkaichi</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Oliff &#x26; Berridge, PLC</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Autonetworks Technologies, Ltd.</orgname>
<role>03</role>
<address>
<city>Yokkaichi-shi</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
<assignee>
<addressbook>
<orgname>Sumitomo Wiring Systems, Ltd.</orgname>
<role>03</role>
<address>
<city>Yokkaichi-shi</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
<assignee>
<addressbook>
<orgname>Sumitomo Electric Industries, Ltd.</orgname>
<role>03</role>
<address>
<city>Osaka</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Tiv</last-name>
<first-name>Backhean</first-name>
<department>2451</department>
</primary-examiner>
<assistant-examiner>
<last-name>Chou</last-name>
<first-name>Alan S</first-name>
</assistant-examiner>
</examiners>
<pct-or-regional-filing-data>
<document-id>
<country>WO</country>
<doc-number>PCT/JP2008/070660</doc-number>
<kind>00</kind>
<date>20081113</date>
</document-id>
<us-371c124-date>
<date>20091113</date>
</us-371c124-date>
</pct-or-regional-filing-data>
<pct-or-regional-publishing-data>
<document-id>
<country>WO</country>
<doc-number>WO2009/069472</doc-number>
<kind>A </kind>
<date>20090604</date>
</document-id>
</pct-or-regional-publishing-data>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A communication network in which a plurality of terminals are connected to a common bus is a vehicle-mounted communication system which connects a plurality of ECUs though the bus, transmits messages at predetermined communication intervals between the ECUs, and receives the transmitted messages. The messages transmitted/received between the ECUs through a CAN communication line are divided into a plurality of groups such as a first group, a second group to an Nth group according to the type of message information. Each of the ECUs is provided with a transmission timing operation part for computing the transmission timing for each message group to be transmitted. The transmission timing operation part adjusts so as to bring the transmission timing of message belonging to the first group transmitted from its own ECU closer to the transmission timing of message belonging to the first group received from another electronic control unit.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="112.69mm" wi="170.77mm" file="US08626833-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="132.08mm" wi="172.13mm" file="US08626833-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="247.14mm" wi="86.19mm" orientation="landscape" file="US08626833-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="242.57mm" wi="170.43mm" orientation="landscape" file="US08626833-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="244.60mm" wi="172.64mm" orientation="landscape" file="US08626833-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="246.63mm" wi="169.33mm" file="US08626833-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="166.12mm" wi="92.71mm" file="US08626833-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="239.69mm" wi="145.37mm" file="US08626833-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="249.60mm" wi="153.92mm" file="US08626833-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="245.87mm" wi="183.05mm" file="US08626833-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">TECHNICAL FIELD</heading>
<p id="p-0002" num="0001">The present invention relates to a communication system to be mounted on a car. More particularly, each ECU adjusts transmission timings of messages by dividing messages into groups to make the transmission timings of messages belonging to the same group close to each other and make the transmission timings of messages belonging to a different group distant from each other.</p>
<heading id="h-0002" level="1">BACKGROUND ART</heading>
<p id="p-0003" num="0002">Conventionally in a car, there is adopted a communication system, to be mounted on a car, in which messages are sent and received among electronic control units (ECU) by constructing a network in which a plurality of terminals is connected to a common bus. In the network, ECUs controlling the operation of appliances mounted on the car are connected with each other via a bus for multiplex communication.</p>
<p id="p-0004" num="0003">CAN (Controller Area Network) is widely used as the communication protocol of the communication system to be mounted on a car. The CAN is an asynchronous communication allowing any of the ECUs to send messages when the bus is in an open state.</p>
<p id="p-0005" num="0004">When messages are simultaneously sent from a plurality of the ECUs, arbitration is executed to allow the transmission of a message having a higher priority to be effective. Therefore there is a case in which a certain amount of time elapses before the ECU having a low priority sends a message.</p>
<p id="p-0006" num="0005">Therefore in designing the message communication among the ECUs, there occurs a problem that in supposition of the longest delay period of time caused by a defeat in the execution of the arbitration, a load factor to be applied to the bus cannot but be set low.</p>
<p id="p-0007" num="0006">In the communication system to be mounted on a car, there is a demand for making transmission timings as close as possible in each group by dividing messages into some groups.</p>
<p id="p-0008" num="0007">Messages are so divided that messages relating to each other fall into the same group. For example, messages relating to a steering system fall into the same group. Upon receipt of a message, sent from one of other ECUs, which belongs to the same group, one ECU sends a message in response. At this time, the transmission timings are made as close as possible in each group, whereas in a different group, transmission timings are made as distant as possible. Thereby delay in response decreases, which allows electric appliances relating to the steering system and the like to be controlled rapidly.</p>
<p id="p-0009" num="0008">The present applicant proposed the control system for controlling the transmission timings of messages, as described in Japanese Patent Application Laid-Open No. 2007-60400 (patent document 1). In the control system, each of a plurality of the ECUs connected to the bus has the time measuring means. Each ECU measures the transmission timings of messages sent from other ECUs and adjusts the transmission start timings of messages to be sent from each ECU according to values indicated by the time measuring means. Owing to the adjustment, the ECU makes the transmission timings of messages to be sent therefrom later than the transmission finish timings of messages the other ECUs have sent. Thereby collision between the messages sent from other ECUs is prevented.</p>
<p id="p-0010" num="0009">The method of the patent document 1 is effective in determining the transmission timings of messages to be sent from all ECUs on the basis of one ECU. But the communication system to be mounted on a car has become large, complicated, and many kinds of the communication system to be mounted on a car is in production. When the reference ECU which may be called a time prototype is set, influence is great when the reference ECU has failure. Thus to determine the transmission timing in dependence on the reference ECU has a problem. Considering a case in which the reference ECU is different in dependence on the kind of a car, the method of the patent document 1 tends to increase the kind of the ECU, and there is a possibility that the degree of freedom of mounting the kind of the ECU is impaired.</p>
<p id="p-0011" num="0010">Even when there is no reference ECU, the method of the patent document 1 is applicable to the communication system to be mounted on a car. But in this case, there is a possibility that the transmission timings of messages ECUs have sent do not become close to each other and fall into an oscillation state. This is shown by using an example of <figref idref="DRAWINGS">FIG. 13</figref>.</p>
<p id="p-0012" num="0011">For example, in a case where it is desirable for ECUs to send messages at timings as close as possible, an ECU A, an ECU B, and an ECU C are considered. Let it be supposed that an average period of the entire communication system is about 9 ms (msec). Let it be also supposed that of the transmission periods shown in <figref idref="DRAWINGS">FIG. 13(A)</figref>, the transmission time of a first period is set as an initial condition and that in periods subsequent to the second period, transmission timings are so set that the ECU A sends a message at the transmission timing of the ECU B of the first period, the ECU B sends a message at the transmission timing of the ECU C of the first period, and the ECU C sends a message at the transmission timing of the ECU A of the first period. At this time, numerical values shown in <figref idref="DRAWINGS">FIG. 13(A)</figref> indicate the transmission order. The transmission timings of the ECUs remain oscillated and do not become close to each other nor converge and in addition even skip-caused missing of messages occurs in the transmission thereof.</p>
<p id="p-0013" num="0012">Even though the transmission timing is so set that one ECU sends a message to one of other ECUs and thereafter sends a next message thereto after the other ECU sends a message at an initial transmission timing+9 ms, the transmission order is as shown in <figref idref="DRAWINGS">FIG. 13(B)</figref>. Similarly to the transmission timing shown in <figref idref="DRAWINGS">FIG. 13(A)</figref>, the transmission timings of the messages sent from each of the ECUs remain oscillated and do not become close to each other nor converge and in addition even skip-caused missing of messages occurs in the transmission thereof. Similarly even though an average value of transmission timings of other ECUs is used, failure occurs.</p>
<p id="p-0014" num="0013">That is, when the reference ECU is not set, there is a case in which the application of the method of the patent document 1 does not allow messages each of the ECUs has sent to become close to each other and to converge. Thus there is room for improvement in the method of the patent document 1.</p>
<p id="p-0015" num="0014">A method of making transmission timings of messages distant from each other when the messages can be divided into not less than two groups is not disclosed in the patent document 1. A method of outputting messages by spacing transmission timings from each other at constant time lags is described in the patent document 1. This method is incapable of making the transmission timings of two groups distant from each other unless the average period of the entire communication system is known. In addition, in dependence on an operation state, the average period of the entire communication system of a car changes. Thus the method of the patent document 1 is incapable of making the transmission timings of the two groups distant from each other. Therefore there is room for improvement in the method of the patent document 1.</p>
<p id="p-0016" num="0015">Patent document: Japanese Patent Application Laid-Open No. 2007-60400</p>
<heading id="h-0003" level="1">DISCLOSURE OF THE INVENTION</heading>
<heading id="h-0004" level="1">Problem to be Solved by the Invention</heading>
<p id="p-0017" num="0016">The present invention has been made in view of the above-described problems. It is an object of the present invention to adjust transmission timings of messages belonging to the same group so that the transmission timings thereof are as close as possible when ECUs send the messages.</p>
<p id="p-0018" num="0017">It is another object of the present invention to adjust the transmission timings of messages belonging to the same group and those of messages belonging to a different group so that the transmission timings of messages belonging to the same group and the different group are as distant as possible.</p>
<heading id="h-0005" level="1">Means for Solving the Problem</heading>
<p id="p-0019" num="0018">To solve the above-described problem, the present invention provides a communication system to be mounted on a car having a communication network in which a plurality of terminals is connected to a common bus, a plurality of electronic control units is connected to one another via the bus, and messages are sent among the electronic control units at predetermined transmission intervals and the sent messages are received thereby,</p>
<p id="p-0020" num="0019">wherein the messages sent and received among the electronic control units via the bus are divided into a plurality of groups such as a first group, a second group, . . . , and an Nth group in dependence on a kind of message information;</p>
<p id="p-0021" num="0020">each of the electronic control units has a transmission timing operation part computing transmission timings of messages of each group to be sent; and</p>
<p id="p-0022" num="0021">the transmission timing operation part makes transmission timings of messages, belonging to the same group, which are to be sent from one of the electronic control units closer to transmission timings of messages, belonging to the same group, which are received from the other electronic control units than transmission timings of messages belonging to other groups.</p>
<p id="p-0023" num="0022">Although the CAN communication line in which the CAN is used as the communication protocol is preferably used in the communication system of the present invention to be mounted on a car, it is possible to use communication lines in which other communication protocols are used.</p>
<p id="p-0024" num="0023">Messages sent and received among the electronic control units (ECU) are divided into a plurality of groups. Each ECU periodically sends messages at almost equal transmission intervals.</p>
<p id="p-0025" num="0024">The transmission timing operation part of each ECU receives a message from one of the other ECUs and judges whether the received message belongs to the same group as the group of a message the ECU sends or belongs to a different group.</p>
<p id="p-0026" num="0025">When the message received from the other ECU belongs to the same group, the transmission timing operation part adjusts the transmission timing of the message the ECU sends next by altering the transmission interval thereof and makes the transmission timing of the message the ECU sends next close to the transmission timing of the message to be received from the other ECU. The transmission timing operation part adjusts the transmission timing not by significantly altering the transmission interval, but by altering the transmission interval to a low extent with the transmission timing operation part keeping almost an equal transmission interval.</p>
<p id="p-0027" num="0026">By repeating the adjustment of the transmission interval of messages each time the ECU sends a message, the transmission timing of the message the ECU sends becomes closer to the transmission timing of messages, received from the other ECU, which belong to the same group than the transmission timings of messages belonging to the other group.</p>
<p id="p-0028" num="0027">By adjusting the transmission period of the message each time the transmission timing operation part sends the message, in the entire communication system, it is possible to periodically and collectively send messages belonging to the same group to the CAN communication line.</p>
<p id="p-0029" num="0028">By making the transmission timings close to each other in each group, it is possible to decrease delay in response to the received message belonging to the same group and rapidly control the operation of electric appliances.</p>
<p id="p-0030" num="0029">It is preferable that the transmission timing operation part adjusts transmission timings of messages so that transmission timings of messages, belonging to the first group, which are to be sent from one of the electronic control units are closer to transmission timings of messages, belonging to the first group, which are received from the other electronic control units than transmission timings of messages belonging to the second group through the Nth group; and</p>
<p id="p-0031" num="0030">adjusts transmission timings of messages so that the transmission timings of the messages belonging to the first group are distant from the transmission timings of the messages belonging to the second group through the Nth group which are different from the first group.</p>
<p id="p-0032" num="0031">The transmission timing operation part makes the transmission timing of the message the ECU sends as distant as possible from the transmission timings of the messages belonging to a different group. Thereby it is possible to avoid the message sent from the ECU from colliding with the sent message belonging to the different group and improve a load factor of the bus of the communication system. Messages relating to electric appliances independently operating are divided into different groups. Thereby when the system of one control appliance has failure, messages belonging to the different group are sent at transmission timings distant from each other. Thereby it is possible to prevent communication from being adversely affected.</p>
<p id="p-0033" num="0032">A parent message and child messages are set in each group;</p>
<p id="p-0034" num="0033">in sending the child messages belonging to the first group from one of the electronic control units, the transmission timing operation part adjusts transmission timings of messages so that transmission timings of the child messages are close to transmission timings of the parent message, belonging to the first group, which is received from the other electronic control unit; and</p>
<p id="p-0035" num="0034">in sending the parent message belonging to the first group from one of the electronic control units, the transmission timing operation part adjusts transmission timings of message so that transmission timings of the parent message which is to be sent from one of the electronic control units are distant from transmission timings of the parent messages, belonging to the second group through the Nth group which are different from the first group, which are received from the other electronic control units.</p>
<p id="p-0036" num="0035">When the ECU receives a message from one of the other ECUs before it sends the child message, the transmission timing operation part of the ECU judges whether the received message is the parent message belonging to the same group. When the received message is the parent message belonging to the same group, the transmission timing operation part adjusts the transmission timing of the child message the ECU sends so that the transmission timing of the child message is close to that of the parent message.</p>
<p id="p-0037" num="0036">Because all the ECUs which send the child messages perform the above-described operation, the transmission timings of the child messages belonging to the same group become close to those of the parent message. Thus messages belonging to the same group can be sent periodically and collectively.</p>
<p id="p-0038" num="0037">When the received message is the parent message belonging to a group different from the group to which the message of the ECU belongs in sending the parent message from the ECU, the transmission timing operation part adjusts the transmission timing to make the transmission timing of the parent message to be sent from the ECU distant from that of the received parent message.</p>
<p id="p-0039" num="0038">Owing to the above-described operation performed by the ECUs which send the parent messages belonging to the different groups, it is possible to make the transmission timings of the parent messages belonging to the different groups distant from each other.</p>
<p id="p-0040" num="0039">As described above, because the transmission timing of the child message becomes close to that of the parent message belonging to the same group as the group to which the child message belongs, the transmission timings of the messages belonging to the same group become close to each other, whereas the transmission timings of the messages belonging to the different groups become distant from each other.</p>
<p id="p-0041" num="0040">More specifically, the transmission timing operation part sets a next transmission interval Tnext as Tnext=To+F for a closest transmission interval To of the message the ECU sends. That is, the transmission timing operation part adjusts the transmission interval by means of the force F. The force F is expressed as a function of a time lag r between the transmission timing of the message the ECU sends and that of an object message.</p>
<p id="p-0042" num="0041">When the transmission timings of the child messages belonging to the same group are adjusted, the object message means the parent message, whereas when the transmission timings of the parent messages belonging to the different groups are adjusted, the object message means the parent message belonging to the other group.</p>
<p id="p-0043" num="0042">The transmission timing operation part sets a time lag between the timing at which the object message is received and the transmission timing of the message the ECU sends as the time lag r between the transmission timing of the message the ECU sends and that of the object message.</p>
<p id="p-0044" num="0043">At this time, supposing that the time lag r in a case in which the transmission timing of the object message is later than that of the message the transmission timing operation part sends is positive, the force F is so set that when the time lag r is positive, the force F is positive, whereas when the time lag r is negative, the force F is negative. Thereby the transmission timing of the message the transmission timing operation part sends becomes close to that of the object message. A state in which the transmission timing of the message the ECU sends becomes close to that of the object message is expressed as &#x201c;an attractive force works&#x201d;.</p>
<p id="p-0045" num="0044">By so setting the force F that when the time lag r is positive, the force F is negative and when the time lag r is negative, the force F is positive, the transmission timing of the message the transmission timing operation part sends becomes distant from that of the object message. A state in which the transmission timing of the message the ECU sends becomes distant from that of the object message is expressed as &#x201c;a repulsive force works&#x201d;.</p>
<p id="p-0046" num="0045">Therefore when the message the transmission timing operation part sends is the child message, the transmission timing is so set that the attractive force works on the parent message belonging to the same group, whereas when the message the transmission timing operation part sends is the parent message, the transmission timing is so set that the repulsive force works on the parent message belonging to the different group.</p>
<p id="p-0047" num="0046">It is possible that the parent message and the child messages are not set in each group;</p>
<p id="p-0048" num="0047">the transmission timing operation part adjusts transmission timings of messages so that transmission timings of messages, belonging to the first group, which are to be sent from one of the electronic control units are close to transmission timings of all messages, belonging to the first group, which are received from the other electronic control units; and</p>
<p id="p-0049" num="0048">the transmission timing operation part adjusts transmission timings of messages so that the transmission timings of the messages, belonging to the first group, which are to be sent from one of the electronic control units are distant from transmission timings of all messages, belonging to the second group through the Nth group that are different from the first group, which are received from the other electronic control units.</p>
<p id="p-0050" num="0049">More specifically, when the transmission timing operation part receives messages from other ECUs, it judges whether the received messages belong to the same group and computes the time lag between the transmission timings of the received messages and the transmission timing of the message the transmission timing operation part sends.</p>
<p id="p-0051" num="0050">After receiving all messages the other ECU has sent, the transmission timing operation part finds an average of time lags between messages belonging to the same group to obtain an average time lag, thus finding the attractive force F from the average time lag. The transmission timing operation part also finds an average of time lags between messages belonging to the different group to obtain an average time lag, thus finding the repulsive force F from the average time lag. The transmission timing operation part computes a next transmission interval from the sum of the attractive force and the repulsive force.</p>
<p id="p-0052" num="0051">As described above, even though the parent message or the child message is not defined, each ECU is capable of adjusting the transmission timings of messages so that the messages belonging to the same group are sent at transmission timings as close as possible and the messages belonging to the different group are sent at transmission timings as distant as possible.</p>
<p id="p-0053" num="0052">It is preferable to divide messages into groups according to the kind thereof and preferable that at least one of a message group relating to safety control, a message group relating to car body control, a message group relating to a steering system, and a message group relating to a power train system is included.</p>
<heading id="h-0006" level="1">Effect of the Invention</heading>
<p id="p-0054" num="0053">As described above, in the communication system of the present invention to be mounted on a car, the transmission timing operation part adjusts the transmission timings of messages which are to be sent from one of the electronic control units. By making the messages belonging to the same group as close as possible, it is possible to rapidly control the operation of electric appliances.</p>
<p id="p-0055" num="0054">Further by making the messages belonging to the different group distant from each other, it is possible to prevent collision between the messages belonging to the different group and improve the load factor of the bus.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0007" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0056" num="0055"><figref idref="DRAWINGS">FIG. 1</figref> is a construction view showing a first embodiment of a communication system, of the present invention, to be mounted on a car.</p>
<p id="p-0057" num="0056"><figref idref="DRAWINGS">FIG. 2</figref> shows messages to be sent and received in the communication system to be mounted on a car and periods.</p>
<p id="p-0058" num="0057"><figref idref="DRAWINGS">FIG. 3</figref> is an explanatory view of the operation principle of a transmission timing operation part sending a child message, in which <b>3</b>(A) is a case where a parent message is sent later than the child message, and <b>3</b>(B) is a case in which the parent message is sent earlier than the child message.</p>
<p id="p-0059" num="0058"><figref idref="DRAWINGS">FIG. 4</figref> is an explanatory view of the operation principle of the transmission timing operation part sending a parent message, in which <b>4</b>(A) is a case where the parent message is sent later than parent messages belonging to a different group, and <b>4</b>(B) is a case where the parent message is sent earlier than the parent messages belonging to a different group.</p>
<p id="p-0060" num="0059"><figref idref="DRAWINGS">FIG. 5</figref> is an explanatory view showing the relationship between a time lag and a force in which G=1 and g=2.</p>
<p id="p-0061" num="0060"><figref idref="DRAWINGS">FIG. 6</figref> is an explanatory view showing the relationship between the time lag and the force in which G=2 and g=2.</p>
<p id="p-0062" num="0061"><figref idref="DRAWINGS">FIG. 7</figref> is a flowchart showing the operation of the transmission timing operation part.</p>
<p id="p-0063" num="0062"><figref idref="DRAWINGS">FIG. 8</figref> shows results of computation performed in an example 1.</p>
<p id="p-0064" num="0063"><figref idref="DRAWINGS">FIG. 9</figref> shows results of computation performed in an example 2.</p>
<p id="p-0065" num="0064"><figref idref="DRAWINGS">FIG. 10</figref> shows results of computation performed in an example 3.</p>
<p id="p-0066" num="0065"><figref idref="DRAWINGS">FIG. 11</figref> shows results of computation performed in an example 4.</p>
<p id="p-0067" num="0066"><figref idref="DRAWINGS">FIG. 12</figref> shows the principle of a second embodiment.</p>
<p id="p-0068" num="0067"><figref idref="DRAWINGS">FIG. 13</figref> is an explanatory view of a conventional art.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0008" level="1">EXPLANATION OF REFERENCE NUMERALS AND SYMBOLS</heading>
<p id="p-0069" num="0000">
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0068"><b>10</b>: communication system to be mounted on car</li>
    <li id="ul0001-0002" num="0069"><b>20</b>A<b>1</b> through <b>20</b>A<b>4</b>, <b>20</b>B<b>1</b> through <b>20</b>B<b>4</b>: electronic control unit (ECU)</li>
    <li id="ul0001-0003" num="0070">Tnext: transmission interval</li>
    <li id="ul0001-0004" num="0071">To: closest transmission interval</li>
    <li id="ul0001-0005" num="0072">F: force</li>
    <li id="ul0001-0006" num="0073">r: time lag</li>
</ul>
</p>
<heading id="h-0009" level="1">BEST MODE FOR CARRYING OUT THE INVENTION</heading>
<p id="p-0070" num="0074">The embodiments of the present invention are described below with reference to the drawings.</p>
<p id="p-0071" num="0075"><figref idref="DRAWINGS">FIGS. 1 through 11</figref> show the first embodiment of the present invention.</p>
<p id="p-0072" num="0076">In a communication system <b>10</b> of the present invention to be mounted on a car, a plurality of electronic control units (ECU) <b>20</b> is connected to a bus <b>11</b> so that the ECUs <b>20</b> send and receive messages each other. In the first embodiment, as shown in <figref idref="DRAWINGS">FIG. 1</figref>, eight ECUs <b>20</b>A<b>1</b> through <b>20</b>A<b>4</b> and <b>20</b>B<b>1</b> through <b>20</b>B<b>4</b> are connected to the bus <b>11</b>. CAN (controller Area Network) is used as the communication protocol.</p>
<p id="p-0073" num="0077">Each ECU <b>20</b> periodically sends data obtained from a sensor (not shown in the drawings) and the like to the bus as messages and controls loads (not shown in the drawings) such as electric appliances, based on the messages.</p>
<p id="p-0074" num="0078">Each ECU <b>20</b> sends one or a plurality of kinds of messages to the bus. The messages are divided into a plurality of groups. One parent message is set in each group. Other messages of the same group are set as child messages.</p>
<p id="p-0075" num="0079">To simplify description, in the first embodiment, each of the eight ECUs <b>20</b>A<b>1</b> through <b>20</b>A<b>4</b> and <b>20</b>B<b>1</b> through <b>20</b>B<b>4</b> sends only one kind of messages A<b>1</b> through A<b>4</b> and B<b>1</b> through B<b>4</b>. Eight messages to be sent from the eight ECUs <b>20</b> are divided into a group A and a group B.</p>
<p id="p-0076" num="0080">The message A<b>1</b> the ECU <b>20</b>A<b>1</b> sends is set as the parent message of the group A, whereas the messages A<b>2</b> through A<b>4</b> the ECU <b>20</b>A<b>2</b> through the ECU <b>20</b>A<b>4</b> send respectively are set as the child messages of the group A. The message B<b>1</b> the ECU <b>20</b>B<b>1</b> sends is set as the parent message of the group B, whereas the messages B<b>2</b> through B<b>4</b> the ECU. <b>20</b>B<b>2</b> through the ECU <b>20</b>B<b>4</b> send respectively are set as the child messages of the group B.</p>
<p id="p-0077" num="0081">Messages whose transmission timings are desired to be close to each other fall into the same group.</p>
<p id="p-0078" num="0082">Messages for controlling electric appliances independently operating are divided into different groups. For example, let it be supposed that the messages of the group A relate to an air conditioner and that the messages of the group B relate to interior lighting. When an interior lighting system or an air conditioning system has failure or defect, by sending messages belonging to different groups at transmission timings distant from each other, the messages are prevented from interfering with each other in communication.</p>
<p id="p-0079" num="0083">Let it be supposed that the messages belonging to the group A relate to the sensor and that the messages belonging to the group B relate to an actuator. When the system is so constructed that the actuator operates and the sensor checks the operation of the actuator, the communication system can be often efficiently operated by temporally making the transmission timing of the message for the sensor and that of the message for the actuator distant from each other.</p>
<p id="p-0080" num="0084">Each ECU periodically sends messages at appropriate transmission intervals. Unless there are particular conditions, the transmission interval is unconstant. In some cases, the transmission interval changes in dependence on an operation state of each ECU. In some cases where when there is no common clock, the transmission interval changes in dependence on a variation of an internal clock of each ECU. For example, even when the average transmission interval of the ECUs connected to the sensor is 10 ms (msec), in dependence on a state of signals outputted from the sensor, the transmission interval varies in the range of 9 to 11 ms in each transmission.</p>
<p id="p-0081" num="0085">Messages belonging to the same group are sent from each ECU <b>20</b> at approximately equal transmission intervals or at integral multiples of transmission intervals.</p>
<p id="p-0082" num="0086">As shown in <figref idref="DRAWINGS">FIG. 2</figref>, a period in which the transmissions of the messages A<b>1</b> through A<b>4</b> and B<b>1</b> through B<b>4</b> are repeated is set as an average period Tc of the entire communication system.</p>
<p id="p-0083" num="0087">The ECU <b>20</b> has a transmission timing operation part <b>21</b> and a sending/receiving part <b>22</b>.</p>
<p id="p-0084" num="0088">As will be described later in detail, the transmission timing operation part <b>21</b> computes and adjusts the transmission timing of a message the ECU <b>20</b> sends, namely, an interval Tnext between the time when the ECU <b>20</b> sends the message and the time when the ECU <b>20</b> sends a next message, thus sending messages at the adjusted transmission timing.</p>
<p id="p-0085" num="0089">The transmission timing operation part <b>21</b> beforehand stores groups to which messages the ECU <b>20</b> sends and other ECUs <b>20</b> send belong and whether the messages sent therefrom are the parent messages or the child messages. The transmission timing operation part <b>21</b> is constructed of a CPU and a program to be executed by the CPU.</p>
<p id="p-0086" num="0090">The sending/receiving part <b>22</b> sends messages to other ECUs <b>20</b> and receives messages therefrom via the bus.</p>
<p id="p-0087" num="0091"><figref idref="DRAWINGS">FIG. 1</figref> shows the transmission timing operation part <b>21</b> and the sending/receiving part <b>22</b> of only the ECU <b>20</b>A<b>1</b>. But all of the ECU <b>20</b>A<b>2</b> through ECU <b>20</b>A<b>4</b> and the ECU <b>20</b>B<b>1</b> through the ECU <b>20</b>B<b>4</b> have the same construction.</p>
<p id="p-0088" num="0092">The principle of the present invention is described below.</p>
<p id="p-0089" num="0093">As shown in <figref idref="DRAWINGS">FIG. 2</figref>, in the present invention, each ECU <b>20</b> adjusts transmission timings of messages so that messages belonging to the same group are sent at transmission timings as close as possible and messages belonging to different groups are sent at transmission timings as distant as possible.</p>
<p id="p-0090" num="0094">Initially the principle of adjusting the transmission timing of the ECU <b>20</b>A<b>2</b> which sends the child message A<b>2</b> is described below.</p>
<p id="p-0091" num="0095">Supposing that the parent message is the message A<b>1</b>, the transmission timing operation part <b>21</b> adjusts the transmission interval of the child message A<b>2</b> to make the transmission timings of the child message A<b>2</b> close to those of the parent message A<b>1</b> belonging to the same group A.</p>
<p id="p-0092" num="0096">The transmission timing operation part <b>21</b> always monitors the transmission interval of the child message A<b>2</b>. As shown in <figref idref="DRAWINGS">FIG. 3</figref>, supposing that a closest transmission interval between the child messages A<b>2</b> is To, a next transmission interval Tnext is set as Tnext=To+F. That is, the Tnext is finely adjusted by an amount F called &#x201c;force&#x201d;.</p>
<p id="p-0093" num="0097">At this time, as shown in <figref idref="DRAWINGS">FIG. 3(A)</figref>, when the parent message A<b>1</b> is sent later than the child message A<b>2</b>, by setting F as F&#x3e;0, the transmission interval Tnext is longer than To. Thus the transmission timing of the child message A<b>2</b> becomes close to the transmission timing of the parent message A<b>1</b>. That is, a time lag r between the transmission timing of the parent message A<b>1</b> and that of the child message A<b>2</b> becomes short.</p>
<p id="p-0094" num="0098">That the parent message A<b>1</b> is sent later than the child message A<b>2</b> means that the transmission timing of the parent message A<b>1</b> temporally lags behind that of the child message A<b>2</b>. That the parent message A<b>1</b> is sent prior to the child message A<b>2</b> means that the transmission timing of the parent message A<b>1</b> is temporally earlier than that of the child message A<b>2</b>.</p>
<p id="p-0095" num="0099">Comparing the parent message A<b>1</b> prior to the current parent message by one message with the child message A<b>2</b> prior to the current child message by one message, as shown in <figref idref="DRAWINGS">FIG. 3(A)</figref>, the transmission timing of the parent message A<b>1</b> is prior to that of the child message A<b>2</b>. By comparing a time lag between the parent message prior to the current parent message A<b>1</b> by one message and the child message prior to the current child message A<b>2</b> by one message with a time lag between the parent message of the current parent message A<b>1</b> and the child message of the current child message A<b>2</b>, a shorter time lag is adopted as the time lag r to be used by the transmission timing operation part <b>21</b>. The method of adjusting the transmission timing shown in <figref idref="DRAWINGS">FIGS. 3(B) and 4</figref> are similar to the above-described method.</p>
<p id="p-0096" num="0100"><b>42</b> As shown in <figref idref="DRAWINGS">FIG. 3(B)</figref>, when the parent message A<b>1</b> is sent prior to the child message A<b>2</b>, F is set as F&#x3c;0. Thereby the transmission interval Tnext becomes shorter than To. Therefore the transmission timing of the child message A<b>2</b> becomes close to the transmission timing of the parent message A<b>1</b>. That is, the time lag r between the parent message A<b>1</b> and the child message A<b>2</b> becomes short.</p>
<p id="p-0097" num="0101">A state in which the other message becomes close to the one message is expressed as &#x201c;an attractive force works&#x201d;. That is, in the same group, the attraction works on the parent message.</p>
<p id="p-0098" num="0102">Similarly the ECU <b>20</b>A<b>3</b> and the ECU <b>20</b>A<b>4</b> adjust the transmission interval of the child message A<b>3</b> and that of the child message A<b>4</b> respectively.</p>
<p id="p-0099" num="0103">By adjusting the next transmission interval of the child message to determine the transmission timing thereof, as described above, the transmission timings of the child messages belonging to the same group become closer to that of the parent message. As shown in <figref idref="DRAWINGS">FIG. 2</figref>, the transmission timings of the messages belonging to the same group become close to each other.</p>
<p id="p-0100" num="0104">The principle of adjusting the transmission timing of the ECU <b>20</b>A<b>1</b> which sends the parent message A<b>1</b> is described below.</p>
<p id="p-0101" num="0105">The transmission timing operation part <b>21</b> of the ECU <b>20</b>A<b>1</b> adjusts the transmission interval of the parent message A<b>1</b> to make the transmission timings of the parent message A<b>1</b> distant from those of the parent message B<b>1</b> belonging to the different group. The closest transmission interval between the parent messages A<b>1</b> is set to To.</p>
<p id="p-0102" num="0106">As shown in <figref idref="DRAWINGS">FIG. 4(A)</figref>, when the parent message B<b>1</b> is sent later than the parent message A<b>1</b>, by setting F as F&#x3c;0, the transmission interval Tnext becomes shorter than To. Thus the transmission timing of the parent message A<b>1</b> is distant from that of the parent message B<b>1</b>. That is, the time lag r between the parent messages A<b>1</b> and B<b>1</b> becomes long.</p>
<p id="p-0103" num="0107">As shown in <figref idref="DRAWINGS">FIG. 4(B)</figref>, when the parent message B<b>1</b> is sent prior to the parent message A<b>1</b>, by setting F as F&#x3e;0, the transmission interval Tnext becomes longer than To. Thus the transmission timing of the parent message A<b>1</b> is distant from that of the parent message B<b>1</b>. That is, the time lag r between the parent messages A<b>1</b> and B<b>1</b> becomes long.</p>
<p id="p-0104" num="0108">A state in which the other message becomes distant from the one message is expressed as &#x201c;a repulsive force works&#x201d;. That is, the repulsive force works on the parent messages A<b>1</b> and B<b>1</b> belonging to the different groups.</p>
<p id="p-0105" num="0109">Similarly the ECU <b>20</b>B<b>1</b> adjusts the transmission interval of the parent message B<b>1</b>.</p>
<p id="p-0106" num="0110">By adjusting the transmission interval between the parent messages belonging to the different groups to determine the transmission timings thereof, as described above, the transmission timings of the parent messages become distant from each other.</p>
<p id="p-0107" num="0111">The transmission timings of the child messages belonging to the same group become close to that of the parent message, whereas the transmission timings of the parent messages belonging to the different groups become distant from each other, as shown in <figref idref="DRAWINGS">FIG. 2</figref>. Thus the transmission timings of the messages belonging to the same group become close to each other, whereas the transmission timings of the messages belonging to the different groups become distant from each other.</p>
<p id="p-0108" num="0112">Actually the parent messages B<b>1</b> are present forward and rearward from the parent message A<b>1</b>. The shorter time lag r between the parent messages A<b>1</b> and B<b>1</b> is selected. A case in which the parent messages A<b>1</b> and B<b>1</b> are not greatly distant from each other is described with reference to <figref idref="DRAWINGS">FIG. 4</figref>. In a case where the parent messages A<b>1</b> and B<b>1</b> are greatly distant from each other, the shorter time lag r between the parent messages A<b>1</b> and B<b>1</b> is selected. Therefore the parent messages A<b>1</b> and B<b>1</b> become gradually distant from each other and the transmission timings become stable when r&#x2248;To/2. The same is true of the child message.</p>
<p id="p-0109" num="0113">The above-described contents are as described below, when they are generally described.</p>
<p id="p-0110" num="0114">The next transmission interval Tnext of each message is set as Tnext=To+F for the closest transmission interval To. That is, the transmission interval is finely adjusted by means of the force F.</p>
<p id="p-0111" num="0115">Regarding the time lag r between the transmission timing of the message the ECU <b>20</b> sends and that of an object message (the parent message when the transmission timings of the child messages belonging to the same group are adjusted, and the parent messages of the different groups when the transmission timings of the parent messages belonging to the different groups are adjusted), when the transmission timing of the object message is later than that of the message which is adjusted in the transmission timing thereof, the time lag r is defined as a positive direction lag.</p>
<p id="p-0112" num="0116">At this time, the force F is the attractive force when the time lag r is positive, the force F is positive, and when the time lag r is negative, the force F is negative. The force F is the repulsive force when the time lag r is positive, the force F is negative, and when the time lag r is negative, the force F is positive.</p>
<p id="p-0113" num="0117">The force is expressed in the form of F(r) as a function of the time lag r. The force F(r) is selected as follows:</p>
<p id="p-0114" num="0118">When the time lag r is 0, i.e., when the message to be sent is the same as the object message, the force F(0)=0 and no adjustment is made by means of the force F.</p>
<p id="p-0115" num="0119">In the case where the force F is the attractive force, in the neighborhood of r=0, when r&#x3e;0, F&#x3e;0, and when r&#x3c;0, F&#x3c;0. In the case where the force F is the repulsive force, when r&#x3e;0, F&#x3c;0, and when r&#x3c;0, F&#x3e;0. When the absolute value |r| of the time lag r is sufficiently large, the absolute value |F| of the force F attenuates in proportion to the absolute value |r| of the time lag r.</p>
<p id="p-0116" num="0120">When the time lag r is &#xb1;&#x221e; (infinite in positive and negative directions), the force)F(&#xb1;&#x221e;)=0.</p>
<p id="p-0117" num="0121">The force F of each message is set as follows:</p>
<p id="p-0118" num="0122">The force F of the child messages is so set that the attractive force works on the parent message belonging to the same group.</p>
<p id="p-0119" num="0123">The force F of parent message is so set that the repulsive force works on the parent message belonging to the different group.</p>
<p id="p-0120" num="0124">In the first embodiment, the example in which messages are divided into the two groups has been described. When there are not less than three groups, an average of time lags r among a plurality of the parent messages belonging to different groups is found. The force F is computed as the time lag r. Alternatively after forces F which work on a plurality of parent messages belonging to different groups are computed, the sum of the forces is used as the force F.</p>
<p id="p-0121" num="0125"><figref idref="DRAWINGS">FIG. 5</figref> is an explanatory view showing an example indicating the relationship between the time lag r and the force F. In the example of <figref idref="DRAWINGS">FIG. 5</figref>, the force F(r)=2&#xb7;G&#xb7;r/(r<sup>2</sup>+g<sup>2</sup>), where G=1 and g=2.</p>
<p id="p-0122" num="0126">At this time, as described above, when the time lag r is 0, the force F(0)=0. In the case where the force F is the attractive force, in the neighborhood of r=0, when r&#x3e;0, F&#x3e;0, and when r&#x3c;0, F&#x3c;0. When the absolute value |r| of the time lag r is sufficiently large, the absolute value |F| of the force F attenuates in proportion to the absolute value |r| of the time lag r. When the time lag r is &#xb1;&#x221e;, the force F(&#xb1;&#x221e;)=0.</p>
<p id="p-0123" num="0127"><figref idref="DRAWINGS">FIG. 6</figref> shows a case in which the force F(r)=G&#xb7;(r/g<sup>2</sup>)&#xb7;exp(&#x2212;r<sup>2</sup>/(2&#xb7;g<sup>2</sup>)), where G=2 and g=2.</p>
<p id="p-0124" num="0128">An operation of adjusting the transmission timing of the ECU <b>20</b>A<b>2</b> which sends the child message is described below with reference to the flowchart of <figref idref="DRAWINGS">FIG. 7</figref>.</p>
<p id="p-0125" num="0129">The transmission timing operation part <b>21</b> of the ECU <b>20</b>A<b>2</b> periodically sends the message A<b>2</b> to the bus and computes the transmission period To. <figref idref="DRAWINGS">FIG. 7</figref> shows an operation of sending the parent message A<b>1</b> later than the child message A<b>2</b>.</p>
<p id="p-0126" num="0130">At step S<b>1</b>, the ECU <b>20</b>A<b>2</b> receives the parent message A<b>1</b> the ECU <b>20</b>A<b>1</b> has sent.</p>
<p id="p-0127" num="0131">At step S<b>2</b>, the ECU <b>20</b>A<b>2</b> sends the child message A<b>2</b> via the sending/receiving part <b>22</b>.</p>
<p id="p-0128" num="0132">At step S<b>3</b>, the ECU <b>20</b>A<b>2</b> receives the parent message A<b>1</b> the ECU <b>20</b>A<b>1</b> has sent. The transmission timing operation part <b>21</b> judges whether the received message is the parent message or not and belongs to the same group or not according to an ID (identifier) described on the received message.</p>
<p id="p-0129" num="0133">At step S<b>4</b>, the transmission timing operation part <b>21</b> computes the time lag r from the timing at which the child message A<b>2</b> has been sent and the timing at which the parent message A<b>1</b> has been received. As the time lag r, a smaller time lag of a time lag found from a timing observed at step S<b>1</b> and a time lag found from a timing observed at step S<b>3</b> is adopted.</p>
<p id="p-0130" num="0134">At step S<b>5</b>, the transmission timing operation part <b>21</b> computes the force F by using the time lag r.</p>
<p id="p-0131" num="0135">At step S<b>6</b>, the transmission timing operation part <b>21</b> computes the next transmission interval Tnext.</p>
<p id="p-0132" num="0136">The program returns to step S<b>1</b> at which the next child message A<b>2</b> is sent after the elapse of the transmission interval Tnext after the transmission timing of the child message A<b>2</b> sent at step S<b>2</b>.</p>
<p id="p-0133" num="0137">Operations of the other ECUs <b>20</b> which send the child messages are similar to the operation shown in <figref idref="DRAWINGS">FIG. 7</figref>.</p>
<p id="p-0134" num="0138">The ECU <b>20</b>A<b>1</b> sends the parent message A<b>1</b>, as shown in <figref idref="DRAWINGS">FIG. 7</figref>. Upon receipt of the parent message B<b>1</b> the ECU <b>20</b>B<b>1</b> has sent, the transmission timing operation part <b>21</b> computes the time lag r. The transmission timing operation part <b>21</b> computes the next transmission interval Tnext from the time lag r, thus setting the transmission timing of the next parent message A<b>1</b>.</p>
<p id="p-0135" num="0139">A change of the transmission timing within one period for the number of periods of each group and messages is described below with reference to examples.</p>
<heading id="h-0010" level="1">EXAMPLE 1</heading>
<p id="p-0136" num="0140">A change of the transmission timing of each message for one period of the entire communication system was simulated.</p>
<p id="p-0137" num="0141">Messages the eight ECUS <b>20</b>A<b>1</b> through <b>20</b>A<b>4</b> and <b>20</b>B<b>1</b> through <b>20</b>B<b>4</b> send were divided into the group A consisting of the messages A<b>1</b> through A<b>4</b> and the group B consisting of the messages B<b>1</b> through B<b>4</b>. The messages A<b>1</b> and B<b>1</b> were set as parent messages, whereas the other messages were set as child messages. When the child messages exerted an attractive force on the parent messages respectively and a repulsive force worked on the parent messages belonging to the different groups, the transmission interval of each message was computed by using Tnext=To+F. The force F was set as F(r)=2&#xb7;G&#xb7;r/(r<sup>2</sup>+g<sup>2</sup>). The attractive force=F. The repulsive force=&#x2212;F, where G=0.02, and g=2.</p>
<p id="p-0138" num="0142">Based on the transmission interval obtained by the computation, the number of milliseconds that the transmission timing of each message took after a start time of the average period was found.</p>
<p id="p-0139" num="0143">The number of periods is counted from the time when each ECU <b>20</b> starts to send and receive messages. The period means an average period (one period of entire communication system) of the entire communication system <b>10</b>. The average period means a period in which each ECU <b>20</b> sends messages and transmissions of messages are repeated in the entire communication system <b>10</b> as in the case of a period Tc of <figref idref="DRAWINGS">FIG. 2</figref>. In the example 1, one period was set to 8 ms.</p>
<p id="p-0140" num="0144">As an initial value of the transmission timing within one period, the transmission timing of the parent message A<b>1</b> belonging to the group A was set to 5.0 ms. The transmission timings of the child messages A<b>2</b>, A<b>3</b>, and A<b>4</b> were set to 2.0 ms, 7.0 ms, and 7.5 ms respectively. The transmission timing of the parent message B<b>1</b> belonging to the group B was set to 4.0 ms. The transmission timings of the child messages B<b>2</b>, B<b>3</b>, and B<b>4</b> were set to 3.5 ms, 5.0 ms, and 6.0 ms respectively.</p>
<p id="p-0141" num="0145">All messages were sent from each ECU once every period Tc.</p>
<heading id="h-0011" level="1">EXAMPLE 2</heading>
<p id="p-0142" num="0146">Supposing a case in which the transmission timing changes owing to external factors, transmission fluctuation was generated in all messages every period by uniform distribution having a width of 50 &#x3bc;sec.</p>
<p id="p-0143" num="0147">Other conditions were the same as those of the example 1.</p>
<heading id="h-0012" level="1">EXAMPLE 3</heading>
<p id="p-0144" num="0148">The constant of the force F was set as G=1 and g=2. Other conditions were similar to those of the example 1.</p>
<heading id="h-0013" level="1">EXAMPLE 4</heading>
<p id="p-0145" num="0149">The force F was set as F=G&#xb7;(r/g<sup>2</sup>)&#xb7;exp(&#x2212;r<sup>2</sup>/(2&#xb7;g<sup>2</sup>)). The attractive force=F. The repulsive force=&#x2212;F. G=0.04, and g=2. Other conditions were similar to those of the example 1.</p>
<p id="p-0146" num="0150"><figref idref="DRAWINGS">FIG. 8</figref> shows the result of the computation performed in the example 1. In the present invention, at about 600 periods, the transmission timings of the child messages became almost equal to those of the parent messages, and the transmission timing of the group A and that of the group B were distant from each other.</p>
<p id="p-0147" num="0151"><figref idref="DRAWINGS">FIG. 9</figref> shows the result of the computation performed in the example 2. The transmission timing of each message had a stable state with the messages fluctuating without oscillation and divergence. That is, the transmission timing of the child messages became close to those of the parent messages, and the transmission timings of the messages belonging to the different groups became distant from each other.</p>
<p id="p-0148" num="0152"><figref idref="DRAWINGS">FIG. 10</figref> shows the result of the computation performed in the example 3. The period of time required for the transmission timing to become stable was as short as about 10 periods.</p>
<p id="p-0149" num="0153">In <figref idref="DRAWINGS">FIG. 10</figref>, because the force was set large, the transmission timings oscillated, but the oscillation was as small as about 1 ms. Thus when the tolerance of the oscillation is about 1 ms, the value of G=1 and g=2 can be selected.</p>
<p id="p-0150" num="0154">When the value of G was set larger than that of the example 1, the transmission timings oscillated. Thus when the value of G is set much larger, there is a case in which the oscillation becomes large and is uncontrollable. Because there is a case in which the transmission timings oscillate in dependence on values of the constants G and g of the force F, in using G and g, it is necessary to select constants according to conditions such as the limitation of time till stabilization.</p>
<p id="p-0151" num="0155"><figref idref="DRAWINGS">FIG. 11</figref> shows the result of the computation performed in the example 4. At hundreds of periods, the transmission timings of the child messages became almost equal to those of the parent messages, and messages were sent at constant transmission timings in each group. The equation of the example 4 for finding the force is different from that of the example 1. The period of the example 4 in which the transmission timings of the child messages became almost equal to those of the parent messages were shorter than that of the example 1.</p>
<p id="p-0152" num="0156">But when the time lag between the transmission timing of the parent message and that of the child message is larger than a certain value, the force does not work and hence there is a case in which an uncontrollable message may appear. In the case of the equation of the force used in the example 4, when the lag is set to two to three times as large as the value of g, as shown in <figref idref="DRAWINGS">FIG. 6</figref>, the force is almost zero. Therefore it is necessary to select the equation used in the example 4 after detecting the entire period (8 ms in example 4).</p>
<p id="p-0153" num="0157">As described above, in the present invention, each ECU adjusts the transmission timings of messages it sends. It is possible to make messages belonging to the same group as close as possible and make messages belonging to the different group distant from each other. Thus it is possible to rapidly control the operation of electric appliances relating to each other in transmission and reception of messages and avoid collision between messages belonging to the different group and thus improve a load factor of the bus.</p>
<p id="p-0154" num="0158">In the present invention, each ECU sequentially changes the transmission timings of messages. The basic period is only necessary as an initial value. Thus even though the average period of the entire communication system <b>10</b> changes quasi-statically, it is possible to make the transmission timings of messages belonging to the different group distant from one another.</p>
<p id="p-0155" num="0159">The present invention is applicable when periods of messages are not equal to each other but periods of some messages are integral multiples of periods of other messages. It is possible to exemplify a case in which a closest transmission interval of the message A<b>1</b> is To=10 ms and a closest transmission interval of the message A<b>2</b> is To=20 ms.</p>
<p id="p-0156" num="0160">The above-described method is also applicable to a case in which a message X is desired to be sent at a transmission timing not equal to that of a message Y, but at a transmission timing spaced by 1 ms from that of the message Y, for example. In this case, the ECU <b>20</b> which sends messages including the message X may use X+1 ms=X&#x2032; shifted by 1 ms from the transmission timing of the message X as a virtual transmission timing of the message X. The ECU <b>20</b> may apply the present invention to the virtual transmission timing X&#x2032; so that the transmission timings of the messages become close to each other.</p>
<p id="p-0157" num="0161">Further by setting all messages of the communication system <b>10</b> as parent messages, namely, by exerting the repulsive force among all the messages to make transmission timings distant from each other, it is possible to uniformly distribute the transmission timings of the messages within one period.</p>
<p id="p-0158" num="0162">The present invention is also applicable to a case in which other ECUs <b>20</b> desire to send data at the timing when a message is triggered to each other. Unlike the above-described first embodiment, the same ECU may send messages of a different group, and a different ECU may send messages of the same group.</p>
<p id="p-0159" num="0163"><figref idref="DRAWINGS">FIG. 12</figref> shows the second embodiment of the present invention.</p>
<p id="p-0160" num="0164">In the second embodiment, the parent message is not defined in the same group. Each ECU <b>20</b> computes the transmission interval Tnext of messages as described below.</p>
<p id="p-0161" num="0165">The construction of the second embodiment is described below by exemplifying the ECU <b>20</b>A<b>1</b> which sends the message A<b>1</b>. Upon receipt of other messages A<b>2</b> through A<b>4</b> belonging to the same group, the transmission timing operation part <b>21</b> of the ECU <b>20</b>A<b>1</b> measures time lags ra<b>2</b>, ra<b>3</b>, and ra<b>4</b> between the transmission timing of the message A<b>1</b> and the reception timing of the other messages A<b>2</b> through A<b>4</b>. Further the transmission timing operation part <b>21</b> finds an average of the time lags ra<b>2</b>, ra<b>3</b>, and ra<b>4</b> to obtain an average time lag ra, thus finding an attractive force F<b>1</b> by using the average time lag ra.</p>
<p id="p-0162" num="0166">Thereafter the transmission timing operation part <b>21</b> receives messages B<b>1</b> through B<b>4</b> of the group B and measures time lags rb<b>1</b>, rb<b>2</b>, rb<b>3</b>, and rb<b>4</b> between the transmission timing of the message A<b>1</b> and the reception timing of the messages B<b>1</b> through B<b>4</b>. Further the transmission timing operation part <b>21</b> finds an average of the time lags rb<b>1</b>, rb<b>2</b>, rb<b>3</b>, and rb<b>4</b> to obtain an average time lag rb. By using the average time lag rb, the transmission timing operation part <b>21</b> finds a repulsive force F<b>2</b>.</p>
<p id="p-0163" num="0167">The transmission timing operation part <b>21</b> sets the sum of the attractive force F<b>1</b>+the repulsive force F<b>2</b> as a force to be used in the computation of the next transmission interval Tnext.</p>
<p id="p-0164" num="0168">In the above-described construction, even though the parent message is not defined in each group, the ECUs <b>20</b> are capable of adjusting the transmission timings of messages so that messages belonging to the same group are sent at transmission timings as close as possible and messages belonging to the different group are sent at transmission timings as distant as possible.</p>
<p id="p-0165" num="0169">Other ECUs <b>20</b> are capable of adjusting the transmission timings of messages by performing similar operations.</p>
<p id="p-0166" num="0170">The transmission timing operation part <b>21</b> may find the attractive force and the repulsive force between the ECUs from the time lag between the transmission timing of a message and those of other messages without finding the average time lags ra, rb and use the sum of these forces as a force to be used to compute the next transmission interval Tnext.</p>
<p id="p-0167" num="0171">For example, the transmission interval of the message A<b>1</b> is so set that attractive forces (FA<b>2</b>, FA<b>3</b>, and FA<b>4</b>) are applied to other messages A<b>2</b> through A<b>4</b> belonging to the same group A and that repulsive forces (FB<b>1</b>, FB<b>2</b>, FB<b>3</b>, FB<b>4</b>) are applied to messages B<b>1</b> through B<b>4</b> belonging to the other group B. After each force is computed, the sum (FA<b>2</b>+FA<b>3</b>+FA<b>4</b>+FB<b>1</b>+FB<b>2</b>+FB<b>3</b>+FB<b>4</b>) of all the forces is set as the force F applied to the message A<b>1</b>.</p>
<p id="p-0168" num="0172">It is possible that a case in which the transmission interval Tnext is computed from the average time lag of the second embodiment for each message and a case in which forces are found from respective time lags between a message and other messages and the transmission interval Tnext is computed from the sum of the forces may be mixedly present. Further a group in which the parent message is defined and a group in which the parent message is not defined may be mixedly present.</p>
<p id="p-0169" num="0173">Because other constructions and the operation and effect of the second embodiment are similar to those of the first embodiment, the same parts of the second embodiment as those of the first embodiment are denoted by the same reference numerals and symbols as those of the first embodiment, and description thereof is omitted herein.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A communication system to be mounted on a car having a communication network in which a plurality of terminals is connected to a common bus, a plurality of electronic control units is connected to one another via said bus, and messages are sent among said electronic control units at predetermined transmission intervals and said sent messages are received thereby,
<claim-text>wherein said messages sent and received among said electronic control units via said bus are divided into a plurality of groups such as a first group, a second group, . . . and an Nth group in dependence on a kind of message information;</claim-text>
<claim-text>each of said electronic control units has a transmission timing operation part computing transmission timings of messages of each group to be sent; and</claim-text>
<claim-text>said transmission timing operation part decreases a difference between (i) transmission timings of messages, belonging to the same group, which are to be sent from one of said electronic control units and (ii) transmission timings of messages, belonging to the same group, which are received from said other electronic control units;</claim-text>
<claim-text>said parent message and said child messages are not set in each group;</claim-text>
<claim-text>said transmission timing operation part adjusts transmission timings of messages so that the difference between transmission timings of messages, belonging to the same group, which are to be sent from one of said electronic control units and transmission timings of all messages, belonging to the same group, which are received from said other electronic control units is decreased; and</claim-text>
<claim-text>said transmission timing operation part adjusts transmission timings of messages so that a difference between said transmission timings of said messages belonging to said other groups is increased.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The communication system to be mounted on a car according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said common bus is constructed of a CAN communication line.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. A communication system to be mounted on a car having a communication network in which a plurality of terminals is connected to a common bus, a plurality of electronic control units is connected to one another via said bus, and messages are sent among said electronic control units at predetermined transmission intervals and said sent messages are received thereby,
<claim-text>wherein said messages sent and received among said electronic control units via said bus are divided into a plurality of groups such as a first group, a second group, . . . and an Nth group in dependence on a kind of message information;</claim-text>
<claim-text>each of said electronic control units has a transmission timing operation part computing transmission timings of messages of each group to be sent;</claim-text>
<claim-text>said transmission timing operation part decreases a difference between (i) transmission timings of messages, belonging to the same group, which are to be sent from one of said electronic control units and (ii) transmission timings of messages, belonging to the same group, which are received from said other electronic control units;</claim-text>
<claim-text>a parent message and child messages are set in each group;</claim-text>
<claim-text>in sending said child messages belonging to said first group from one of said electronic control units, said transmission timing operation part adjusts transmission timings of messages so that the difference between transmission timings of said child messages and transmission timings of said parent message, belonging to said first group, which is received from said other electronic control unit is decreased; and</claim-text>
<claim-text>in sending said parent message belonging to said first group from one of said electronic control units, said transmission timing operation part adjusts transmission timings of messages so that a difference between transmission timings of said parent message which is to be sent from one of said electronic control units and transmission timings of said parent messages, belonging to said second group through said Nth group that are different from said first group, which are received from said other electronic control units is increased.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. A communication system to be mounted on a car having a communication network in which a plurality of terminals is connected to a common bus, a plurality of electronic control units is connected to one another via said bus, and messages are sent among said electronic control units at predetermined transmission intervals and said sent messages are received thereby, wherein
<claim-text>said messages sent and received among said electronic control units via said bus are divided into a plurality of groups such as a first group, a second group, . . . and an Nth group in dependence on a kind of message information;</claim-text>
<claim-text>each of said electronic control units has a transmission timing operation part computing transmission timings of messages of each group to be sent;</claim-text>
<claim-text>said transmission timing operation part decreases a difference between (i) transmission timings of messages, belonging to the same group, which are to be sent from one of said electronic control units and (ii) transmission timings of messages, belonging to the same group, which are received from said other electronic control units;</claim-text>
<claim-text>said transmission timing operation part adjusts transmission timings of messages so that the difference between transmission timings of messages, belonging to said first group, which are to be sent from one of said electronic control units and transmission timings of messages, belonging to said first group, which are received from said other electronic control units is decreased as compared to a difference between transmission timings of messages, belonging to said first group. which are to be sent from one of said electronic control units and transmission timings of messages belonging to said second group through said Nth group;</claim-text>
<claim-text>adjusts transmission timings of messages so that a difference between said transmission timings of said messages belonging to said first group and said transmission timings of said messages belonging to said second group through said Nth group which are different from said first group is increased;</claim-text>
<claim-text>a parent message and child messages are set in each group;</claim-text>
<claim-text>in sending said child messages belonging to said first group from one of said electronic control units, said transmission timing operation part adjusts transmission timings of messages so that a difference between transmission timings of said child messages and transmission timings of said parent message, belonging to said first group, which is received from said other electronic control unit is decreased; and</claim-text>
<claim-text>in sending said parent message belonging to said first group from one of said electronic control units, said transmission timing operation part adjusts transmission timings of messages so that a difference between transmission timings of said parent message which is to be sent from one of said electronic control units and transmission timings of said parent messages, belonging to said second group through said Nth group that are different from said first group, which are received from said other electronic control units is increased.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. A communication system to be mounted on a car having a communication network in which a plurality of terminals is connected to a common bus, a plurality of electronic control units is connected to one another via said bus, and messages are sent among said electronic control units at predetermined transmission intervals and said sent messages are received thereby, wherein
<claim-text>said messages sent and received among said electronic control units via said bus are divided into a plurality of groups such as a first group, a second group, . . . and an Nth group in dependence on a kind of message information;</claim-text>
<claim-text>each of said electronic control units has a transmission timing operation part computing transmission timings of messages of each group to be sent;</claim-text>
<claim-text>said transmission timing operation part decreases a difference between (i) transmission timings of messages, belonging to the same group, which are to be sent from one of said electronic control units and (ii) transmission timings of messages, belonging to the same group, which are received from said other electronic control units;</claim-text>
<claim-text>said transmission timing operation part adjusts transmission timings of messages so that the difference between transmission timings of messages, belonging to said first group, which are to be sent from one of said electronic control units and transmission timings of messages, belonging to said first group, which are received from said other electronic control units is decreased as compared to a difference between transmission timings of messages. belonging to said first group, which are to be sent from one of said electronic control units and transmission timings of messages belonging to said second group through said Nth group;</claim-text>
<claim-text>adjusts transmission timings of messages so that a difference between said transmission timings of said messages belonging to said first group and said transmission timings of said messages belonging to said second group through said Nth group which are different from said first group is increased;</claim-text>
<claim-text>said parent message and said child messages are not set in each group;</claim-text>
<claim-text>said transmission timing operation part adjusts transmission timings of messages so that a difference between transmission timings of messages, belonging to the same group, which are to be sent from one of said electronic control units and transmission timings of all messages, belonging to the same group, which are received from said other electronic control units is decreased as compared to a difference between transmission timings of messages, belonging to the same group, which are to be sent from one of said electronic control units and transmission timings of messages belonging to said other groups; and</claim-text>
<claim-text>said transmission timing operation part adjusts transmission timings of messages so that a difference between said transmission timings of said messages belonging to said other groups is increased. </claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
