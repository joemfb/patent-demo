<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08626746-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08626746</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13526560</doc-number>
<date>20120619</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<us-term-of-grant>
<disclaimer>
<text>This patent is subject to a terminal disclaimer.</text>
</disclaimer>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>7</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>17</main-group>
<subgroup>30</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>707715</main-classification>
<further-classification>707804</further-classification>
<further-classification>707792</further-classification>
</classification-national>
<invention-title id="d2e51">Tracking modifications to values of various fields in a database serve</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>4956774</doc-number>
<kind>A</kind>
<name>Shibamiya et al.</name>
<date>19900900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>7720804</doc-number>
<kind>B2</kind>
<name>Fazal et al.</name>
<date>20100500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707601</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2003/0135480</doc-number>
<kind>A1</kind>
<name>Van Arsdale et al.</name>
<date>20030700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2003/0154197</doc-number>
<kind>A1</kind>
<name>Millet et al.</name>
<date>20030800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2003/0225798</doc-number>
<kind>A1</kind>
<name>Norcott</name>
<date>20031200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2004/0225865</doc-number>
<kind>A1</kind>
<name>Cox et al.</name>
<date>20041100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>712 34</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2005/0065965</doc-number>
<kind>A1</kind>
<name>Ziemann et al.</name>
<date>20050300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2005/0091291</doc-number>
<kind>A1</kind>
<name>Kaler et al.</name>
<date>20050400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2005/0216503</doc-number>
<kind>A1</kind>
<name>Charlot et al.</name>
<date>20050900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>2006/0047715</doc-number>
<kind>A1</kind>
<name>Parizeau</name>
<date>20060300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707203</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>2006/0122964</doc-number>
<kind>A1</kind>
<name>Yu et al.</name>
<date>20060600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>2006/0123010</doc-number>
<kind>A1</kind>
<name>Landry et al.</name>
<date>20060600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>2006/0143243</doc-number>
<kind>A1</kind>
<name>Polo-Malouvier et al.</name>
<date>20060600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707203</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>2006/0173879</doc-number>
<kind>A1</kind>
<name>MacFarlane et al.</name>
<date>20060800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>2007/0162500</doc-number>
<kind>A1</kind>
<name>Herwadkar</name>
<date>20070700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>2007/0282808</doc-number>
<kind>A1</kind>
<name>Hashirano et al.</name>
<date>20071200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>21</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>None</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>9</number-of-drawing-sheets>
<number-of-figures>14</number-of-figures>
</figures>
<us-related-documents>
<continuation>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>11164923</doc-number>
<date>20051212</date>
</document-id>
<parent-grant-document>
<document-id>
<country>US</country>
<doc-number>8224808</doc-number>
</document-id>
</parent-grant-document>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>13526560</doc-number>
</document-id>
</child-doc>
</relation>
</continuation>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20120317147</doc-number>
<kind>A1</kind>
<date>20121213</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Krishnamoorthy</last-name>
<first-name>Karthick</first-name>
<address>
<city>Chennai</city>
<country>IN</country>
</address>
</addressbook>
<residence>
<country>IN</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Krishnamoorthy</last-name>
<first-name>Karthick</first-name>
<address>
<city>Chennai</city>
<country>IN</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<last-name>Thappeta</last-name>
<first-name>Narendra Reddy</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Oracle International Corporation</orgname>
<role>02</role>
<address>
<city>Redwood Shores</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Lewis</last-name>
<first-name>Cheryl</first-name>
<department>2155</department>
</primary-examiner>
<assistant-examiner>
<last-name>Hoffler</last-name>
<first-name>Raheem</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">Storing historical/previous values of a field of a relational database in the same table. The previous values can be conveniently used to revert back to any of such previously stored values. Thus, for each update/modify operation, the present value is stored as a previous value. In one embodiment, the previous values are stored in a VARRAY associated with each field. The indexed entries of the VARRAY store the present as well as previous values of the field.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="105.24mm" wi="155.02mm" file="US08626746-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="158.24mm" wi="132.67mm" orientation="landscape" file="US08626746-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="144.19mm" wi="117.26mm" orientation="landscape" file="US08626746-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="204.39mm" wi="140.38mm" orientation="landscape" file="US08626746-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="199.31mm" wi="147.40mm" orientation="landscape" file="US08626746-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="119.80mm" wi="118.53mm" orientation="landscape" file="US08626746-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="184.57mm" wi="137.75mm" orientation="landscape" file="US08626746-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="110.24mm" wi="133.27mm" orientation="landscape" file="US08626746-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="166.62mm" wi="162.14mm" orientation="landscape" file="US08626746-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="186.52mm" wi="148.00mm" orientation="landscape" file="US08626746-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">The present application is a continuation application of co-pending US patent application entitled, &#x201c;Tracking Modifications to Values of Various Fields in a Database Server&#x201d;, application Ser. No. 11/164,923, Filed: Dec. 12, 2005, and is incorporated in its entirety herewith.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0003" num="0002">1. Field of the Invention</p>
<p id="p-0004" num="0003">The present invention relates to database technologies, and more specifically to a method and apparatus for tracking modifications to values of various fields in a database server.</p>
<p id="p-0005" num="0004">2. Related Art</p>
<p id="p-0006" num="0005">A database server generally refers to a system which permits organization of related data and management of the organized data using structured queries. For example, in case of relational databases, SQL queries facilitate definition of schemas for tables contained in each database instance, and then to add, delete or change the data in various rows of the tables. The description is continued with respect to relational databases for illustration.</p>
<p id="p-0007" num="0006">In general, the data of interest may be viewed as containing various values which are stored in fields organized in a database instance. The intersection of a column and row specifies the corresponding field in case of relational database. As may be appreciated, the values of fields can change, typically in response to queries which set the field to a new value.</p>
<p id="p-0008" num="0007">There is often a need to track the modification (change) of values of several fields of interest. For example, the tracked values serve as an audit record for the corresponding field.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0009" num="0008">The present invention will be described with reference to the accompanying drawings briefly described below.</p>
<p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram illustrating the details of an example environment in which various aspects of the present invention can be implemented.</p>
<p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. 2</figref> is a flow chart illustrating the manner in which a database server ensures that a desired update request is processed according to various aspects of the present invention.</p>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 3A</figref> contains data contained in a table of a Relational Database (RDB) as viewed by the user.</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 3B</figref> contains data in a table accessed by the database management application executed on a database server implementing various aspects of the present invention.</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 4A</figref> contains data in a table of a Relation Database as viewed by the user, after the database server has processed an update request from the user.</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 4B</figref> contains data in the table accessed by the database management application executed on a database server after processing of a update request.</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 5</figref> is a block diagram illustrating the details of a database server in one embodiment.</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 6A</figref> is a query from a user system containing a schema definition to create a table in a relational database used in an embodiment of the present invention.</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 6B</figref> is a query generated by the wrapper program to create a table implementing various aspects of the present invention.</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 7A</figref> is a query from a user system to insert a row into a table in the relational database</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 7B</figref> is a query generated by the wrapper program to insert a row into the table defined in a database server implementing various aspects of the present invention.</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 8</figref> is a query from a user system to update a field in the table defined according to various aspects of the present invention.</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 9</figref> is a block diagram illustrating the details of a database server in another embodiment.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<p id="p-0023" num="0022">In the drawings, like reference numbers generally indicate identical, functionally similar, and/or structurally similar elements. The drawing in which an element first appears is indicated by the leftmost digit(s) in the corresponding reference number.</p>
<heading id="h-0004" level="1">DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS</heading>
<heading id="h-0005" level="1">1. Overview</heading>
<p id="p-0024" num="0023">According to an aspect of the present invention, the sequence of values a field of interest are set to, are stored/tracked in the same table associated with the field of interest. Due to such tracking, the prior values for any field may be quickly available for any later use (e.g., to revert back to a prior value).</p>
<p id="p-0025" num="0024">According to one more aspect of the present invention, the user merely needs to specify the fields of interest and the database server automatically (i.e., without requiring further instructions from users) tracks the prior values.</p>
<p id="p-0026" num="0025">Several aspects of the invention are described below with reference to examples for illustration. It should be understood that numerous specific details, relationships, and methods are set forth to provide a full understanding of the invention. One skilled in the relevant art, however, will readily recognize that the invention can be practiced without one or more of the specific details, or with other methods, etc. In other instances, well_known structures or operations are not shown in detail to avoid obscuring the invention.</p>
<heading id="h-0006" level="1">2. Example Environment</heading>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram illustrating an example environment in which various aspects of the present invention can be implemented. The environment is shown containing database server <b>130</b>, network <b>120</b>, and client systems <b>100</b>A through <b>100</b>N. Each system/device is described below in further detail.</p>
<p id="p-0028" num="0027">Network <b>120</b> provides the connectivity to facilitate forwarding of queries (e.g., in the form of SQL) from client systems to database server <b>130</b> on path <b>123</b>, and the responses from database server <b>130</b> back to client systems on the corresponding paths. Network <b>120</b> may be implemented using protocols such as Internet Protocol.</p>
<p id="p-0029" num="0028">Client systems <b>110</b>-A through <b>110</b>-N send queries to and receive the corresponding responses from network <b>120</b>, on paths <b>112</b>A through <b>112</b>N respectively. Client systems <b>110</b>-A through <b>110</b>-N may have several applications executing (such as automated teller applications, ticket reservation and enquiry applications, etc), which cause SQL queries to be sent to database server <b>130</b> on network <b>120</b>.</p>
<p id="p-0030" num="0029">Database server <b>130</b> processes the queries received from client systems <b>110</b>-A through <b>110</b>-N, and sends the corresponding responses on path <b>123</b>. In general, the queries first specify database schemas to be defined for each table contained in a database instance, and then various operations for the management of data in the framework of the tables.</p>
<p id="p-0031" num="0030">As noted above in the background section, there may be several situations in which the historical values of fields of interest need to be tracked. Various aspects of the present invention track such historical values, as described below in further detail.</p>
<heading id="h-0007" level="1">3. Tracking Historical Values of Fields</heading>
<p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. 2</figref> is a flowchart illustrating the manner in which a database server tracks the historical values of fields of interest according to various aspects of the present invention. The flowchart is described with respect to <figref idref="DRAWINGS">FIG. 1</figref> merely for illustration. However, various features can be implemented in other environments without departing from several aspects of the present invention, as will be apparent to one skilled in the relevant arts by reading the disclosure provided herein. The flow chart begins in step <b>201</b>, in which control immediately passes to step <b>220</b>.</p>
<p id="p-0033" num="0032">In step <b>220</b>, database server <b>130</b> receives an update request indicating a new value for a field of a table. The update request can be in the form of an SQL query or according to any convention.</p>
<p id="p-0034" num="0033">In step <b>230</b>, database server <b>130</b> stores the present (i.e., at the time of reception of the update request) value in the same table associated with the field. In general, the (management software of) database server needs to be designed to permit storing of multiple values associated with the field. Various approaches will be apparent to one skilled in the relevant arts based on the disclosure provided herein. Such approaches are contemplated to be covered by various aspects of the present invention. An example approach is described in sections below in further detail.</p>
<p id="p-0035" num="0034">In step <b>250</b>, database server <b>130</b> sets the field to equal the new value (as required to process the update request) received in step <b>220</b>. The flowchart then ends in step <b>299</b>. Due to the storing of the present value in step <b>230</b>, historical values for the field are maintained.</p>
<p id="p-0036" num="0035">The description is continued with respect to the manner in which database server <b>130</b> may store the historical values for a field in one embodiment.</p>
<heading id="h-0008" level="1">4. Storing Historical Values</heading>
<p id="p-0037" num="0036">According to one approach, pre-existing database servers supporting SQL queries and VARRAY structures (for columns of interest) are modified to support the storing of historical values for fields of interest. In such an approach, client systems <b>110</b>A-<b>110</b>N can send queries as if no historical data is maintained, and database server <b>130</b> automatically translates the queries into a form consistent with the storage in the VARRAY structures.</p>
<p id="p-0038" num="0037">For simplicity, the implementation concepts are described in a scenario in which historical data related to all fields of a table are maintained, and also a change of some columns is reflected as a change to the same corresponding values in other columns. However, conventions can be employed to specify only the fields of interest and VARRAYs can be specified only for such specified fields.</p>
<p id="p-0039" num="0038">Broadly, a VARRAY structure is created for each field for which historical information needs to be maintained. The depth of the structure can be set to the number of historical data elements sought to be maintained for the corresponding field. For further description of VARRAY structures, the reader is referred to a document entitled, &#x201c;Oracle9i: JDBC Developer's Guide and Reference: Release 2 (9.2)&#x201d;, Part No: A96654<sub>&#x2014;</sub>01, dated March 2002.</p>
<p id="p-0040" num="0039">Thus, <figref idref="DRAWINGS">FIG. 3A</figref> represents a view of the data stored in database server <b>130</b>, ignoring the storing of the historical data. Thus, view <b>300</b> is shown containing columns identifier <b>310</b>, price <b>320</b> and name <b>330</b>, storing data in three rows <b>311</b>, <b>312</b> and <b>313</b>.</p>
<p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. 3B</figref> represents the actual data stored in tables by database server <b>130</b> permitting storing of historical values. For simplicity, it is assumed that only (up to) <b>3</b> prior values need to be stored. Thus, table <b>350</b> is shown containing three rows <b>391</b>-<b>393</b> organized using columns identifier <b>360</b>, price <b>370</b>, name <b>380</b> and count <b>390</b>. Each column is described below in further detail. Columns <b>360</b>, <b>370</b>, and <b>380</b> are shown containing respective sub-columns <b>361</b>-<b>364</b>, <b>371</b>-<b>374</b>, and <b>381</b>-<b>384</b>, are described in sections below.</p>
<p id="p-0042" num="0041">Column <b>390</b> contains a value representing the number of prior values presently available for the corresponding row under the assumption that a change of value to even one field would be reflected as a change (to the same prior value) in the remaining columns (as illustrated with respect to row <b>392</b>, where only value of price is sought to be changed but the prior value of the remaining columns are also copied.</p>
<p id="p-0043" num="0042">Each column <b>360</b>, <b>370</b> and <b>380</b> is shown containing multiple sub-columns (only 4 assuming 3 prior values need to be stored indicated by <b>361</b>-<b>364</b>, <b>371</b>-<b>374</b>, <b>381</b>-<b>384</b>) representing the entries of the corresponding VARRAY, but respectively correspond to identifier, price and name, also shown in <figref idref="DRAWINGS">FIG. 3A</figref>. According to one convention, the left most entry (<b>361</b>, <b>371</b>, <b>381</b>) has an index equal to 1+number of prior values presently available (as indicated by the value of column <b>390</b>) and contains the earliest value for the column and the right most entry (<b>364</b>, <b>374</b>, <b>384</b>) has an index value of 1 and contains the present value.</p>
<p id="p-0044" num="0043">Now assuming that a query is received to change the price of row <b>393</b> to 110.00 the changes to view <b>300</b> and table <b>350</b> are respectively shown in view <b>400</b> and table <b>450</b> of <figref idref="DRAWINGS">FIGS. 4A and 4B</figref> respectively.</p>
<p id="p-0045" num="0044">It may thus be appreciated that the user queries may continue to be on the view of <figref idref="DRAWINGS">FIGS. 3A and 4A</figref>, while database server <b>130</b> contains the internal logic to store the tables of <figref idref="DRAWINGS">FIGS. 3B and 4B</figref> and to process the user queries appropriately. The manner in which database server <b>130</b> can be implemented is described below in further detail.</p>
<heading id="h-0009" level="1">5. Database Server</heading>
<p id="p-0046" num="0045"><figref idref="DRAWINGS">FIG. 5</figref> is a block diagram illustrating the details of database server <b>130</b> in one embodiment. Database server <b>130</b> is shown containing interface block <b>510</b>, transaction block <b>520</b>, wrapper <b>550</b>, database manager <b>560</b>, and secondary storage <b>580</b>. Each block is described below in further detail.</p>
<p id="p-0047" num="0046">For illustration of some features, it is assumed that database server <b>130</b> receives multiple queries forming a single &#x2018;atomic&#x2019; transaction (i.e., requiring reversal of any completed queries if any of the later queries are not executed successfully to completion). In case such reversal is required, the historical values are conveniently used to revert back to the values prior to receiving the transaction, as described below in further detail.</p>
<p id="p-0048" num="0047">Secondary storage <b>580</b> stores the data underlying the database instances containing the tables of FIGS. <b>3</b>B/<b>4</b>B. Database manager <b>560</b> receives queries directed to the tables of FIGS. <b>4</b>B/<b>3</b>B in the form of SQL (structured query language), and manipulates the data in secondary storage <b>580</b> to support the database instances. As can be appreciated, the queries would be directed to VARRAYS (in the example scenario being described).</p>
<p id="p-0049" num="0048">Interface block <b>510</b> provides the physical, electrical and protocol interfaces to receive queries (either as a part of transactions, or as individual queries) and passes the received queries to transaction block <b>520</b>. Similarly, interface block <b>510</b> sends back any responses generated by transaction block <b>520</b>.</p>
<p id="p-0050" num="0049">Transaction block <b>520</b> forwards queries received from user systems <b>110</b>A-<b>110</b>N to wrapper block <b>550</b> in case the queries are directed to the view of FIGS. <b>3</b>A/<b>4</b>A. On the other hand, if the queries are directed to the tables of FIGS. <b>3</b>B/<b>4</b>B, transaction block <b>520</b> forwards the queries directly to database manager <b>560</b>. Irrespective, the responses to queries sent on both paths, may be received directly from database manager <b>560</b>.</p>
<p id="p-0051" num="0050">Transaction block <b>520</b> may further issue queries itself to the extent needed for reversing prior changes to maintain atomicity of transactions. In such a situation, the count of column <b>390</b>/<b>490</b> may need to be decremented by 1.</p>
<p id="p-0052" num="0051">Wrapper block <b>550</b> performs the necessary translations between the queries directed to the view of FIGS. <b>3</b>A/<b>4</b>A to generate the queries suitable for tables <b>3</b>B/<b>4</b>B. The nature of the queries to be generated will be clearer from the examples described below.</p>
<heading id="h-0010" level="1">6. Examples</heading>
<p id="p-0053" num="0052">Broadly, queries are first received to define the schema, then to insert rows, and then to update the previously stored values. Accordingly, the description is continued with respect to corresponding three queries.</p>
<p id="p-0054" num="0053">To define the schema corresponding to FIGS. <b>3</b>A/<b>3</b>B, user system <b>110</b>A may send the SQL query shown in lines <b>601</b>-<b>607</b> of <figref idref="DRAWINGS">FIG. 6A</figref>. Given that VARRAYS are to be maintained for all the columns, wrapper block <b>550</b> may generate the SQL query of lines <b>611</b>-<b>619</b> of <figref idref="DRAWINGS">FIG. 6B</figref>. Information indicating mapping of column labels Identifier <b>310</b>, Price <b>320</b> and Name <b>330</b> to column labels Identifier <b>360</b>, Price <b>370</b> and Name <b>380</b> respectively, is stored in secondary storage <b>580</b> according to any pre-specified convention.</p>
<p id="p-0055" num="0054">To insert a row with values corresponding to row <b>311</b>, the query of lines <b>701</b>-<b>703</b> of <figref idref="DRAWINGS">FIG. 7A</figref> are received from one of user systems <b>110</b>A-<b>110</b>N. Wrapper program <b>550</b> may generate the SQL query of lines <b>710</b>-<b>712</b> of <figref idref="DRAWINGS">FIG. 7B</figref>, and pass the query to database manager <b>560</b>. In response to the query, the values &#x201c;item 1&#x201d;, 1000 and &#x201c;CPU&#x201d; would be written in sub-columns <b>364</b>, <b>374</b> and <b>384</b>, which are modified again (resulting in the final values shown in <figref idref="DRAWINGS">FIG. 3B</figref>), as described below.</p>
<p id="p-0056" num="0055">As noted above, sub-column <b>364</b> indicates a present value for identifier <b>360</b>, sub-column <b>374</b> the present value for column price <b>370</b> and sub-column <b>384</b> indicates the present value for name <b>380</b>.</p>
<p id="p-0057" num="0056">During processing of an update request for any of the columns (of <figref idref="DRAWINGS">FIG. 3B</figref>) identifier <b>360</b>, Price <b>370</b> and Name <b>380</b>, new values for each of the columns are respectively stored in sub-columns <b>364</b>, <b>374</b> and <b>384</b>. In addition, values of sub-columns (<b>364</b>, <b>374</b>, <b>384</b>) are copied into corresponding sub-columns (<b>363</b>, <b>373</b>, <b>383</b>), values of sub-columns (<b>363</b>, <b>373</b>, <b>383</b>) into corresponding sub-columns (<b>362</b>, <b>372</b>, <b>382</b>) and values of sub-columns (<b>363</b>, <b>373</b>, <b>383</b>) into (<b>362</b>, <b>372</b>, <b>382</b>) and (<b>362</b>, <b>372</b>, <b>382</b>) into sub-columns (<b>361</b>, <b>371</b>, <b>381</b>), thus enables tracking of modifications to any of the columns in a row in the same table.</p>
<p id="p-0058" num="0057">Continuing with the illustration of tracking of changes, to update the value of price <b>320</b> (in row <b>393</b>) with a new value or any prior value, the query of lines <b>801</b>-<b>802</b> of <figref idref="DRAWINGS">FIG. 8A</figref> are received from user systems <b>110</b>A-<b>110</b>N. Wrapper program <b>550</b> may generate the SQL query of lines <b>811</b>-<b>835</b> of <figref idref="DRAWINGS">FIG. 8B</figref>.</p>
<p id="p-0059" num="0058">As may be appreciated, the query of lines <b>824</b>-<b>826</b> set the value of the first element (corresponding to sub-columns <b>364</b>, <b>374</b> and <b>384</b>) to contain the new value. Also, query lines within the loop indicated by lines <b>828</b>-<b>832</b> set the value for each sub-column (i) representing a prior value (<b>361</b>-<b>363</b>, <b>371</b>-<b>373</b>, <b>381</b>-<b>383</b>) to the value in another sub-column i+1 as indicated in <figref idref="DRAWINGS">FIG. 4B</figref>.</p>
<p id="p-0060" num="0059">Accordingly, row <b>493</b> is shown containing new values for the sub-columns. Row <b>493</b> contains a new value 110.00 in column <b>474</b> and prior values (as indicated by sub-columns <b>374</b>, <b>373</b>) stored in sub-columns <b>473</b> and <b>472</b> respectively after the processing of the update request is complete. Also, row <b>493</b> indicates that sub-columns <b>462</b>-<b>464</b> and <b>482</b>-<b>484</b> also contain values such that a new value in stored in sub-columns <b>464</b> and <b>484</b>. Values in sub-columns <b>363</b> and <b>364</b> are shown respectively stored in sub-columns <b>462</b> and <b>463</b> and Values in sub-columns <b>383</b> and <b>384</b> are respectively stored in sub-columns <b>482</b> and <b>483</b>. Additionally, it may be appreciated tat column <b>490</b> is shown updated to a value &#x2018;2&#x2019; to indicate the count of prior values for the row (as in query line <b>834</b>).</p>
<p id="p-0061" num="0060">It should be appreciated that the wrapper approach illustrates an example technique to store historical values of (desired) fields. However, alternative approaches (such as making changes to database manager software itself) can be implemented without departing from the scope and spirit of several aspects of the present invention.</p>
<p id="p-0062" num="0061">It should be appreciated that database server <b>130</b> may be implemented in a combination of one or more of hardware, software and firmware. The description is continued with respect to an embodiment which various features are operative by execution of corresponding software instructions.</p>
<heading id="h-0011" level="1">7. Digital Processing System</heading>
<p id="p-0063" num="0062"><figref idref="DRAWINGS">FIG. 9</figref> is a block diagram illustrating the details of database server <b>130</b> in another embodiment. Server <b>130</b> may contain one or more processors such as central processing unit (CPU) <b>910</b>, random access memory (RAM) <b>920</b>, secondary storage unit <b>580</b>, graphics controller <b>960</b>, display unit <b>950</b>, network interface <b>410</b>, and operator interface <b>470</b>. All the components except display unit <b>950</b> may communicate with each other over communication path <b>940</b>, which may contain several buses as is well known in the relevant arts. The components of <figref idref="DRAWINGS">FIG. 9</figref> are described below in further detail.</p>
<p id="p-0064" num="0063">CPU <b>910</b> may execute instructions stored in RAM <b>920</b> to provide several features of the present invention. CPU <b>910</b> may contain multiple processing units, with each processing unit potentially being designed for a specific task. Alternatively, CPU <b>910</b> may contain only a single general purpose processing unit. RAM <b>920</b> may receive instructions from secondary storage unit <b>580</b> using communication path <b>940</b>. RAM <b>920</b> provides the memory space required for processing of various queries.</p>
<p id="p-0065" num="0064">Graphics controller <b>960</b> generates display signals (e.g., in RGB format) to display unit <b>950</b> based on data/instructions received from CPU <b>910</b>. Display unit <b>950</b> contains a display screen to display the images defined by the display signals. Network interface <b>410</b> provides connectivity to a network (e.g., using Internet Protocol), and may be used to receive various transaction requests and provide the corresponding responses.</p>
<p id="p-0066" num="0065">Secondary storage unit <b>580</b> may contain hard drive <b>956</b>, flash memory <b>957</b>, and removable storage drive <b>958</b>. Secondary storage unit <b>580</b> stores mapping of columns in user view of each of the table to columns in DBMS view of the corresponding table and may also store other data and software instructions, which enable database server <b>130</b> to provide several features in accordance with the present invention. Some or all of the data and instructions may be provided on removable storage unit <b>959</b>, and the data and instructions may be read and provided by removable storage drive <b>958</b> to CPU <b>910</b>. Floppy drive, magnetic tape drive, CD_ROM drive, DVD Drive, Flash memory, removable memory chip (PCMCIA Card, EPROM) are examples of such removable storage drive <b>958</b>.</p>
<p id="p-0067" num="0066">Removable storage unit <b>959</b> may be implemented using medium and storage format compatible with removable storage drive <b>958</b> such that removable storage drive <b>958</b> can read the data and instructions. Thus, removable storage unit <b>959</b> includes a computer readable storage medium having stored therein computer software and/or data.</p>
<p id="p-0068" num="0067">In this document, the term &#x201c;computer program product&#x201d; is used to generally refer to removable storage unit <b>959</b> or hard disk installed in hard drive <b>955</b>. These computer program products are means for providing software to server <b>130</b>. CPU <b>910</b> may retrieve the software instructions, and execute the instructions to provide various features of the present invention described above.</p>
<heading id="h-0012" level="1">8. Conclusion</heading>
<p id="p-0069" num="0068">While various embodiments of the present invention have been described above, it should be understood that they have been presented by way of example only, and not limitation. Thus, the breadth and scope of the present invention should not be limited by any of the above described exemplary embodiments, but should be defined only in accordance with the following claims and their equivalents.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method of tracking modifications to a field in a relational table of a database instance supported by a relational database server, said method comprising:
<claim-text>receiving a relational query specifying an update request indicating a new value for said field of said relational table, wherein a present value of said field equals a first value when said relational query is received;</claim-text>
<claim-text>in response to receiving said relational query specifying said update request:</claim-text>
<claim-text>storing said first value in said relational table as a historical value of said field; and</claim-text>
<claim-text>storing said new value in said field in said relational table as said present value of said field,</claim-text>
<claim-text>wherein said new value represents said present value of said field in said relational table after processing of said update request and said first value is also available as said historical value in said relational table after processing of said update request, and</claim-text>
<claim-text>wherein storing of said first value and said new value in said relational table is enabled by storing two values in said field in said relational table, and wherein said field is enabled to store two values by:
<claim-text>receiving instruction indicating said field is of interest for tracking historical values; and</claim-text>
<claim-text>in response to receiving said instruction, defining said field as type array causing said field to comprise two sub-columns each sub-column capable of storing a value,</claim-text>
<claim-text>wherein each of the first value and the new value is stored in the respective sub-column of said field,</claim-text>
<claim-text>wherein the two sub-columns of said field in the relational table are addressable by respective ones of different values of an index associated with the array, wherein each of the first value and the new value is stored in the corresponding sub-column by having the respective value for the index associated with the array.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said relational query specifying said update request is received from a client system.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said array is a VARRAY of at least depth <b>2</b>.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein said storing said first value stores said first value in a second sub-column of said two sub-columns of said field, and said storing said new value stores said new value in a first sub-column of said two sub-columns of said field,
<claim-text>wherein said first sub-column stores the present value for said field and said second sub-column stores said historical value for said field.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein said relational query specifying said update request is directed to a first view of said relational table,
<claim-text>wherein said first view comprises said relational table comprising only said present value, said method further comprising:</claim-text>
<claim-text>generating a first set of queries and a second set of queries in response to receiving said relational query,</claim-text>
<claim-text>wherein said storing said first value comprises executing said first set of queries on said relational database system to cause said first value to be stored in said second sub-column, and</claim-text>
<claim-text>wherein said storing said new value comprises executing said second set of queries on said relational database server to cause said new value to be stored in said first sub-column.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein said field comprises a third sub-column, by setting said depth of said VARRAY to 3, to store in said third sub-column a value representing the number of previous historic values available in said relational table for said field, said method further comprising:
<claim-text>decrementing said value by 1 when reversing a previous change made to said present value of said field.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said field is formed at the intersection of a row with a column in said relational table.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. A computer readable storage medium storing one or more sequences of instructions causing a relational database server to track modifications to a field of a plurality of fields in a relational table in a database instance supported by said relational database server, wherein execution of said one or more sequences of instructions by one or more processors in said relational database server causes said relational database server to perform the actions of:
<claim-text>creating said field of said plurality of fields as an array such that said field is divided into a first sub-column and a second sub-column, wherein the two sub-columns of said field in the relational table are addressable by respective ones of different values of an index associated with the array,</claim-text>
<claim-text>wherein said first sub-column stores a present value and said second sub-column is also capable of storing a value, thereby enabling said field to store two values,</claim-text>
<claim-text>wherein said creating said field as an array is in response to receiving instructions indicating said field is of interest for tracking historical value for said field;</claim-text>
<claim-text>receiving a relational query specifying an update request indicating a new value for said field of said relational table, wherein a present value of said field equals a first value when said update request is received; and</claim-text>
<claim-text>in response to receiving of said update request,</claim-text>
<claim-text>storing said first value in said second sub-column of said field by addressing said second sub-column as said array with the associated value as said index; and</claim-text>
<claim-text>storing said new value in said first sub-column of said field by addressing said first sub-column as said array with the associated value as said index,</claim-text>
<claim-text>whereby said new value stored in said first sub-column of said field in said relational table represents said present value after processing of said update request and said first value is also available in said relational table as a historical value stored in said second sub-column of said field.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The computer readable storage medium of <claim-ref idref="CLM-00008">claim 8</claim-ref> further comprising:
<claim-text>generating a first set of queries and a second set of queries in response to receiving said relational query,</claim-text>
<claim-text>wherein said storing said first value comprises executing said first set of queries on said relational database system to cause said first value to be stored in said second sub-column, and</claim-text>
<claim-text>wherein said storing said new value comprises executing said second set of queries on said relational database server to cause said new value to be stored in said first sub-column.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The computer readable storage medium of <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein said present value of said field of said table is represented by a first view and said present value with said historical value of said field of said table represents actual data stored in said table.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The computer readable storage medium of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein said relational query specifying said update request is directed to said first view of said relational table, and wherein said first set of queries and said second set of queries are directed to said actual data stored in said table.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The computer readable storage medium of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein said update request is received from a client system.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The computer readable storage medium of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein said array is a VARRAY of at least depth <b>2</b>.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The computer readable storage medium of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein said field comprises a third sub-column, by setting said depth of said VARRAY to at least 3,
<claim-text>wherein said third sub-column stores a value representing the number of previous values available in said table for said field and said value is decremented by 1 when reversing a previous change made to said present value of said field.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The computer readable storage medium of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein said instruction for said creating said field is comprised in a SQL create table query accompanied with said instruction indicating said field is of interest for tracking historical values.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The computer readable storage medium of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein said field is formed at the intersection of a row with a column in said relational table.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. A system comprising:
<claim-text>a relational database server capable of tracking modifications to a value of a field of a relational table in a database instance supported by said relational database server, said system capable of:</claim-text>
<claim-text>receiving a relational query specifying an update request indicating a new value for said field of said relational table, wherein a present value of said field equals a first value when said relational query is received;</claim-text>
<claim-text>in response to receiving said relational query specifying said update request,</claim-text>
<claim-text>storing said first value in said relational table as a historical value of said field; and</claim-text>
<claim-text>storing said new value in said field in said relational table as said present value of said field,</claim-text>
<claim-text>wherein said new value represents said present value of said field in said relational table after processing of said update request and said first value is also available as said historical value in said relational table after processing of said update request, and</claim-text>
<claim-text>wherein storing of said first value and said new value in said relational table is enabled by storing two values in said field in said relational table, and wherein said field is enabled to store two values by:</claim-text>
<claim-text>receiving instruction indicating said field is of interest for tracking historical values; and
<claim-text>in response to receiving said instruction, defining said field as type array causing said field to comprise two sub-columns each sub-column capable of storing a value,</claim-text>
</claim-text>
<claim-text>wherein each of the first value and the new value is stored in the respective sub-column of said field,</claim-text>
<claim-text>wherein the two sub-columns of said field in the relational table are addressable by respective ones of different values of an index associated with the array, wherein each of the first value and the new value is stored in the corresponding sub-column by having the respective value for the index associated with the array.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The system of <claim-ref idref="CLM-00017">claim 17</claim-ref>, wherein said array is a VARRAY of at least depth <b>2</b>.</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The system of <claim-ref idref="CLM-00018">claim 18</claim-ref>, wherein said storing said first value stores said first value in a second sub-column of said two sub-columns of said field, and said storing said new value stores said new value in a first sub-column of said two sub-columns of said field,
<claim-text>wherein said first sub-column stores the present value for said field and said second sub-column stores said historical value for said field.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The system of <claim-ref idref="CLM-00017">claim 17</claim-ref>, wherein said field is formed at the intersection of a row with a column in said relational table.</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. A method of tracking modifications to a field in a relational table of a database instance supported by a relational database server, said method comprising:
<claim-text>receiving a relational query specifying an update request indicating a new value for said field of said relational table, wherein a present value of said field equals a first value when said relational query is received;</claim-text>
<claim-text>in response to receiving said relational query specifying said update request:</claim-text>
<claim-text>storing said first value in said relational table as a historical value of said field; and</claim-text>
<claim-text>storing said new value in said field in said relational table as said present value of said field,</claim-text>
<claim-text>wherein said new value represents said present value of said field in said relational table after processing of said update request and said first value is also available as said historical value in said relational table after processing of said update request, and</claim-text>
<claim-text>wherein storing of said first value and said new value in said relational table is enabled by storing two values in said field in said relational table, and wherein said field is enabled to store two values by:
<claim-text>receiving instruction indicating said field is of interest for tracking historical values; and</claim-text>
<claim-text>in response to receiving said instruction, defining said field as type array causing said field to comprise two sub-columns each sub-column capable of storing a value,</claim-text>
<claim-text>wherein said each of said first value and said second value is stored in the respective sub-column of said field,</claim-text>
</claim-text>
<claim-text>wherein the two sub-columns of said field in the relational table are addressable by respective ones of different values of an index associated with the array, wherein each of the two values is stored in the corresponding sub-column by having the respective value for the index associated with the array. </claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
