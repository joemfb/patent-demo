<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625591-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625591</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13326811</doc-number>
<date>20111215</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>CN</country>
<doc-number>2006 1 0080979</doc-number>
<date>20060526</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>35</us-term-extension>
<disclaimer>
<text>This patent is subject to a terminal disclaimer.</text>
</disclaimer>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20110101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>12</main-group>
<subgroup>56</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>370390</main-classification>
<further-classification>370312</further-classification>
<further-classification>370432</further-classification>
</classification-national>
<invention-title id="d2e73">System, server and method for optimizing a group management protocol</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>7813287</doc-number>
<kind>B2</kind>
<name>Fine</name>
<date>20101000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370238</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>2006/0209829</doc-number>
<kind>A1</kind>
<name>Lo et al.</name>
<date>20060900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370392</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2010/0040056</doc-number>
<kind>A1</kind>
<name>Kobayashi</name>
<date>20100200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>WO</country>
<doc-number>WO 2006/053027</doc-number>
<kind>A2</kind>
<date>20060500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00005">
<othercit>European Patent Office, Supplemental Extended European Search Report in PCT Application No. PCT/CN2006/003289 (Jun. 16, 2009).</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00006">
<othercit>European Patent Office, 3<sup>rd </sup>Office Action in European Patent Application No. 06828243.3 (Jan. 26, 2012).</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00007">
<othercit>U.S. Appl. No. 12/277,050.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00008">
<othercit>Written Opinion of the International Searching Authority in corresponding PCT Application No. PCT/CN2006/003289 (Mar. 15, 2007).</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00009">
<othercit>International Search Report in corresponding PCT Application No. PCT/CN2006/003289 (Mar. 15, 2007).</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00010">
<othercit>Examination Report in corresponding Chinese Patent Application No. 2006100809793 (Mar. 13, 2009).</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00011">
<othercit>2nd Office Action in corresponding European Application No. 06828243.3 (Jul. 23, 2010).</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00012">
<othercit>Asaeda et al., &#x201c;MLDv2 Protocol Design, Implementation and Evaluation for Source-Specific Multicast Over IPv6,&#x201d; Proceeding of the 2003 Symposium on Applications and the Internet Workshops, 244-249 (Jan. 2003).</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00013">
<othercit>Cain et al., &#x201c;Internet Group Management Protocol, Version 3,&#x201d; Internet Engineering Task Force, IETF Standard: Request for Comments 3376, 1-53 (Oct. 2002).</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00014">
<othercit>Deering et al., &#x201c;Host Extension for IP Multicasting,&#x201d; Network Working Group, Request for Comments: 1112, rfc1112.txt (Aug. 1989).</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00015">
<othercit>Fenner et al., &#x201c;Internet Group Management Protocol, Version 2,&#x201d; Network Working Group, Request for Comments: 2236, Updates: 1112, rfc2236.txt (Nov. 1997).</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00016">
<othercit>Haberman et al., &#x201c;IGMPv3/MLDv2 and Multicast Routing Protocol Interaction,&#x201d; Internet Engineering Task Force, IETF Standard Working Internet Draft, 1-6 (Jan. 2003).</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00017">
<othercit>Li et al., &#x201c;Analysis of IGMPv3,&#x201d; Computer &#x26; Digital Engineering, 3(2): 24-27 (Feb. 28, 2005).</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00018">
<othercit>Vida et al., &#x201c;Multicast Listener Discovery Version 2 (MLDv2) for IPv6,&#x201d; Network Working Group, Request for Comments: 3810, Updates: 2710, rfc3810.txt (Jun. 2004).</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>3</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>370390</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370389</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370392</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370401</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370400</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370432</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370471</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370312</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709223</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709227</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709229</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709230</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709238</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709239</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709226</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>1</number-of-drawing-sheets>
<number-of-figures>3</number-of-figures>
</figures>
<us-related-documents>
<continuation>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>12277050</doc-number>
<date>20081124</date>
</document-id>
<parent-grant-document>
<document-id>
<country>US</country>
<doc-number>8102870</doc-number>
</document-id>
</parent-grant-document>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>13326811</doc-number>
</document-id>
</child-doc>
</relation>
</continuation>
<continuation>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>PCT/CN2006/003289</doc-number>
<date>20061205</date>
</document-id>
<parent-status>PENDING</parent-status>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>12277050</doc-number>
</document-id>
</child-doc>
</relation>
</continuation>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20120087371</doc-number>
<kind>A1</kind>
<date>20120412</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Guo</last-name>
<first-name>Feng</first-name>
<address>
<city>Beijing</city>
<country>CN</country>
</address>
</addressbook>
<residence>
<country>CN</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Rathore</last-name>
<first-name>Krishnaraj Singh</first-name>
<address>
<city>Shenzhen</city>
<country>CN</country>
</address>
</addressbook>
<residence>
<country>CN</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Su</last-name>
<first-name>Haiyang</first-name>
<address>
<city>Beijing</city>
<country>CN</country>
</address>
</addressbook>
<residence>
<country>CN</country>
</residence>
</us-applicant>
<us-applicant sequence="004" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Zhou</last-name>
<first-name>Xiaoniu</first-name>
<address>
<city>Beijing</city>
<country>CN</country>
</address>
</addressbook>
<residence>
<country>CN</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Guo</last-name>
<first-name>Feng</first-name>
<address>
<city>Beijing</city>
<country>CN</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Rathore</last-name>
<first-name>Krishnaraj Singh</first-name>
<address>
<city>Shenzhen</city>
<country>CN</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Su</last-name>
<first-name>Haiyang</first-name>
<address>
<city>Beijing</city>
<country>CN</country>
</address>
</addressbook>
</inventor>
<inventor sequence="004" designation="us-only">
<addressbook>
<last-name>Zhou</last-name>
<first-name>Xiaoniu</first-name>
<address>
<city>Beijing</city>
<country>CN</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Leydig, Voit &#x26; Mayer, Ltd.</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Huawei Technologies Co., Ltd.</orgname>
<role>03</role>
<address>
<city>Shenzhen</city>
<country>CN</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Thier</last-name>
<first-name>Michael</first-name>
<department>2474</department>
</primary-examiner>
<assistant-examiner>
<last-name>Louis</last-name>
<first-name>Vincelas</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">The present invention discloses a method and router for optimizing a group management protocol so as to reduce the complexity in setting and switching filter modes in the prior protocols. The method includes: a group member sends a membership report to a multicast router; upon reception of the membership report, the multicast router judges whether the report carries an EXCLUDE mode non-empty source list; if so, the router updates a corresponding state inside the router according to a non-source-specific join; or else, the router updates the corresponding state inside the router directly with the information of the report. The method provided by the present invention can avoid the complex switching and processing of filter modes in the prior protocols.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="55.96mm" wi="85.77mm" file="US08625591-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="158.75mm" wi="88.90mm" file="US08625591-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This application is a continuation application of U.S. patent application Ser. No. 12/277,050, filed on Nov. 24, 2008, which is a continuation of International Patent Application No. PCT/CN2006/003289, filed on Dec. 5, 2006. The International Application claims priority to Chinese Patent Application No. 200610080979.3, filed on May 26, 2006, all of which are hereby incorporated by reference in their entireties.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">FIELD OF THE INVENTION</heading>
<p id="p-0003" num="0002">The present invention is related to the multicast service, and in particular, to a method and router for optimizing a group management protocol.</p>
<heading id="h-0003" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0004" num="0003">The Internet Group Management Protocol (IGMP) is designed for Internet Protocol version 4 (IPv4) multicast group management. It runs between a host and a multicast router directly connected to the host. The host tells the multicast router that it wants to join a certain multicast group via the protocol and the router regularly queries whether members of a known group in the local area network (LAN) are active (that is, whether there are still a member of a certain multicast group in the network segment); thus, collecting and maintaining group memberships of the connected network.</p>
<p id="p-0005" num="0004">IGMP has three versions. IGMPv1 [RFC1112] defines the basic procedures for querying and reporting group memberships. IGMPv2 [RFC2236] is widely used at present, providing a mechanism for fast leave of a group member. IGMPv3 [RFC3376] adds the source filtering function, which enables a group member to designate to receive or not to receive packets from certain multicast sources.</p>
<p id="p-0006" num="0005">The Multicast Listener Discovery (MLD) protocol is an extension of IGMP for Internet Protocol version 6 (IPv6) applications. MLD realizes the same functions as IGMP. MLD has two versions, MLDv1 and MLDv2, which correspond to IGMPv2 and IGMPv3, respectively.</p>
<p id="p-0007" num="0006">In IGMPv3 or MLDv2, to support source-specific filtering, the protocol defines two filter modes: INCLUDE and EXCLUDE. In the INCLUDE mode, a multicast receiver receives packets only from specific sources. In the EXCLUDE mode, the receiver receives multicast packets only from resources other than the specific sources. The specific sources are defined in a source list.</p>
<p id="p-0008" num="0007">The source filtering function defined in IGMPv3/MLDv2 improves the capability of expressing group members. A receiver may choose to receive or not to receive multicast packets from some sources. In IGMPv3, the source filtering function is implemented in a host system as follows:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>IPMulticastListen(socket,interface,multicast-address,filter-mode,source-list)&#x2003;&#x2003;(1)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0009" num="0008">Socket is a parameter in an IPv4 system and is related to different requesting entities (a certain upper layer protocol or application); interface is a local identifier of the network interface, either physical or logical; multicast-address is the group address of the request; filter-mode is INCLUDE or EXCLUDE; and source-list is a list of unicast IP addresses of multicast sources from which the multicast receiver wants to (in the INCLUDE mode) or does not want to (in the EXCLUDE mode) receive packets.</p>
<p id="p-0010" num="0009">In MLDv2, there is a similar expression:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>IPv6MulticastListen(socket,interface,IPv6 multicast-address,filter mode,source list)&#x2003;&#x2003;(2)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0011" num="0010">The main difference between (2) and (1) is that the multicast addresses and the source list are represented in the form of IPv6 addresses. For descriptive purposes, the related technical solution herein is described on the basis of IGMPv3. The source filtering function in MLDv2 is equivalent to that in IGMPv3.</p>
<p id="p-0012" num="0011">IGMP is an asymmetrical protocol, where a group member (normally on a host and occasionally on a router) behaves differently from a multicast router. An IGMPv3 host system stores the multicast group reception state in every socket and every interface so as to support source filtering. The state of a socket is the group reception wishes expressed by every application, that is, the application wishes to join which multicast group and filter which multicast source list at which interface in which filter mode. The group reception state of an interface is a combination of the group reception states of all sockets on the interface. The host may generate an IGMPv3 state report and respond to a request of the connected router for querying group memberships according to the group reception state and state change on the interface.</p>
<p id="p-0013" num="0012">An IGMPv3-enabled router also needs to store the group reception state of the connected network. The concept model is:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>(multicast address,group timer,filter-mode,(source records))&#x2003;&#x2003;(3)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0014" num="0013">The multicast address is a group address associated with the state record; the filter-mode is defined by the router, and is recorded as EXCLUDE if the router receives a report that indicates the EXCLUDE mode; the group timer is effective in the EXCLUDE mode, indicating the timeout interval for the filter mode of the group to change from EXCLUDE to INCLUDE; the source record is represented in the form of (source address, source timer); the source address is the address of the multicast source the host wishes to receive packets from; and the source timer defines the timeout interval for receiving packets from the source address.</p>
<p id="p-0015" num="0014">IGMPv3 and MLDv2 support source filtering, which increases the flexibility of group joining. Especially, the INCLUDE mode is defined to support the Protocol Independent Multicast-Source Specific Multicast routing protocol. However, the adoption of filter modes is also subject to weaknesses:</p>
<p id="p-0016" num="0015">(1) Complex mode setting and switching: A router has to set and switch the filter mode according to the change of the group reception state of the connected system, and the setting and switching are closely related to the state of the source/group timer and require complex judgment logics. The protocol implementation is inconvenient.</p>
<p id="p-0017" num="0016">(2) The EXCLUDE mode does not fully meet the requirements of actual applications: On the one hand, it is rare that an application does not want to receive multicast packets from one or more sources in a multicast application system. On the other hand, even if there is a scenario where the host connected to one interface of the router does not want to receive multicast packets from a certain source, it is quite possible that other hosts in the network wish to receive data of this source. In this case, the router must also forward packets from this source. Therefore, the effect of the EXCLUDE mode is limited.</p>
<heading id="h-0004" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0018" num="0017">Embodiments of the present invention provide a method and router for optimizing a group management protocol so as to reduce the complexity in setting and changing filter modes in the prior protocols.</p>
<p id="p-0019" num="0018">A method of a embodiment comprises:</p>
<p id="p-0020" num="0019">receiving, by a multicast router, a membership report from a group member;</p>
<p id="p-0021" num="0020">determining, by the multicast router, whether the report carries an EXCLUDE mode non-empty source list;</p>
<p id="p-0022" num="0021">if the report carries the EXCLUDE mode non-empty source list, processing the report carrying the EXCLUDE mode non-empty source list as a non-source-specific join report and completing a non-source-specific join, wherein the non-source-specific join report is an INCLUDE mode membership report that carries any source list or an EXCLUDE mode membership report that carries an empty source list; and</p>
<p id="p-0023" num="0022">if the report does not carry the EXCLUDE mode non-empty source list, updating a corresponding state inside the multicast router with information of the report that does not carry the EXCLUDE mode non-empty source list.</p>
<p id="p-0024" num="0023">A multicast router of a embodiment comprises a judging module, a converting module and an identifying module, wherein:</p>
<p id="p-0025" num="0024">the judging module is configured to judge whether a received membership report carries an EXCLUDE mode non-empty source list; if the received membership report carries the EXCLUDE mode non-empty source list, the judging module triggers the converting module; and if the received membership report does not carry the EXCLUDE mode non-empty source list, the judging module triggers the identifying module, wherein the received membership report that does not carry the EXCLUDE mode non-empty source list is an INCLUDE mode membership report that carries a specific source list, an INCLUDE mode membership report that carries any source list or an EXCLUDE mode membership report that carries an empty source list;</p>
<p id="p-0026" num="0025">the converting module is configured to convert the received membership report that carries the EXCLUDE mode non-empty source list into a non-source-specific join report and send the non-source-specific report to the identifying module for processing, wherein the non-source-specific join report is the INCLUDE mode membership report that carries any source list or the EXCLUDE mode membership report that carries an empty source list; and</p>
<p id="p-0027" num="0026">the identifying module is configured to identify the INCLUDE mode membership report that carries any source list or the EXCLUDE mode membership report that carries an empty source list and update a corresponding state inside the router.</p>
<p id="p-0028" num="0027">A multicast router of a embodiment comprises:</p>
<p id="p-0029" num="0028">a receiving means, configured to receiving a membership report from a group member;</p>
<p id="p-0030" num="0029">a determining means, configured to determine whether the report carries an EXCLUDE mode non-empty source list;</p>
<p id="p-0031" num="0030">a first processing means, configured to process the report carrying the EXCLUDE mode non-empty source list as a non-source-specific join report and complete a non-source-specific join, if the determining means determines that the report carries the EXCLUDE mode non-empty source list, wherein the non-source-specific join report is an INCLUDE mode membership report that carries any source list or an EXCLUDE mode membership report that carries an empty source list; and</p>
<p id="p-0032" num="0031">a second processing means is configured to update a corresponding state inside the multicast router with information of the report that does not carry the EXCLUDE mode non-empty source list, if the determining means determines that the report does not carry the EXCLUDE mode non-empty source list.</p>
<p id="p-0033" num="0032">Embodiments of the present invention at least provide the following benefits:</p>
<p id="p-0034" num="0033">The prior art defines two filter modes and requires the host and the router to maintain complex filter modes and processing mechanisms. In view of the few application scenarios and limited filter effects of the EXCLUDE mode, embodiments of the invention screen the filter function implemented by the prior EXCLUDE mode and upon reception of a membership report, judge whether the membership report carries an EXCLUDE mode non-empty source list; if so, update the corresponding state inside the router according to a non-source-specific join, or else (if the report is an INCLUDE mode membership report carrying an non-empty source list, an INCLUDE mode membership report carrying any source list, or an EXCLUDE mode membership report carrying an empty source list), update the corresponding state inside the router with information of the report without the need of mode judgment and switching.</p>
<p id="p-0035" num="0034">The method provided by an embodiment of the invention can avoid the complex switching and processing of filter modes in the prior protocols.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. 1</figref> shows the schematic structure of a multicast router, according to an embodiment of the invention;</p>
<p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. 2</figref> shows the schematic structure of a multicast system, according to an embodiment of the invention; and</p>
<p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. 3</figref> shows the procedure of a method for optimizing a group management protocol, according to an embodiment of the invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0006" level="1">DETAILED DESCRIPTION OF THE INVENTION</heading>
<p id="p-0039" num="0038">To simplify the setting and switching of filter modes in prior protocols (including, but not limited to, IGMPv3 and MLDv2), an embodiment of the present invention provides a multicast router, which implements the collection and maintenance of current group memberships. As shown in <figref idref="DRAWINGS">FIG. 1</figref>, the multicast router includes a judging module, a converting module, and an identifying module that are connected in sequence. The judging module is also directly connected to the identifying module.</p>
<p id="p-0040" num="0039">The judging module is adapted to judge whether a received membership report carries an EXCLUDE mode non-empty source list; and, if the received membership report carries an EXCLUDE mode non-empty source list, the judging module triggers the converting module; if the received membership report doesn't carry an EXCLUDE mode non-empty source list, the judging module triggers the identifying module.</p>
<p id="p-0041" num="0040">The converting module is adapted to convert an EXCLUDE mode membership report that carries a non-empty source list into a report that can be identified by the identifying module as a non-source-specific join report and send the report to the identifying module for processing.</p>
<p id="p-0042" num="0041">The identifying module is adapted to identify a non-source-specific join report and update a corresponding state inside the router. In an embodiment of the invention, the identifying module may identify an INCLUDE mode membership report that carries any source list or an EXCLUDE mode membership report that carries an empty source list as a non-source-specific join report.</p>
<p id="p-0043" num="0042">In accordance with the foregoing multicast router, an embodiment of the invention provides a multicast system. As shown in <figref idref="DRAWINGS">FIG. 2</figref>, the multicast system includes a multicast router provided by an embodiment of the invention and a number of group members connected to the multicast router.</p>
<p id="p-0044" num="0043">With the foregoing multicast router and multicast system, an embodiment of the invention provides a method for optimizing a group management protocol. As shown in <figref idref="DRAWINGS">FIG. 3</figref>, the method includes the following steps:</p>
<p id="p-0045" num="0044">S<b>1</b>. A group member sends a membership report to the multicast router.</p>
<p id="p-0046" num="0045">According to the prior art, when a group member starts a multicast application, or when a group member receives a regular query message sent from the multicast router, the group member sends a membership report to the multicast router, reporting the current group reception state of the interface.</p>
<p id="p-0047" num="0046">To be compatible with protocols of earlier versions, a group member is allowed to send INCLUDE and EXCLUDE mode membership reports to the multicast router.</p>
<p id="p-0048" num="0047">Further, the INCLUDE mode membership report may be an INCLUDE mode membership report that carries a non-empty source list or an INCLUDE mode membership report that carries any source list. The EXCLUDE mode membership report may be an EXCLUDE mode membership report that carries a non-empty source list or an EXCLUDE mode membership report that carries an empty source list.</p>
<p id="p-0049" num="0048">S<b>2</b>. Upon reception of the membership report, the multicast router judges whether the membership report carries an EXCLUDE mode non-empty source list; if the received membership report carries an EXCLUDE mode non-empty source list, the procedure proceeds with Step S<b>3</b>; if the received membership report doesn't carry an EXCLUDE mode non-empty source list, the procedure proceeds with Step S<b>4</b>.</p>
<p id="p-0050" num="0049">Upon reception of the membership report, the multicast router judges the filter mode of the report and the attribute of the source list in the report, and proceeds with Step S<b>3</b> to screen the EXCLUDE mode to manifest the benefits of the present invention and realize the compatibility with protocols of earlier versions;</p>
<p id="p-0051" num="0050">Or, the multicast router goes to Step S<b>4</b> to update the corresponding state inside the router.</p>
<p id="p-0052" num="0051">S<b>3</b>. Update the corresponding state inside the router, according to a non-source-specific join.</p>
<p id="p-0053" num="0052">The embodiment of the invention optimizes the prior protocols by screening the EXCLUDE filter mode which has few application scenarios and a low filter efficiency. Upon reception of an EXCLUDE mode report, the router does not set the filer mode or perform switching at timeout. Instead, the router processes an EXCLUDE mode report that carries a non-empty source list as a non-source-specific join report (detailed in Step S<b>4</b>). This means the router updates the corresponding state inside the router according to a non-source-specific join. This avoids mode setting and timeout switching and the router will not return an error message to the group member upon reception of an EXCLUDE report that carries a non-empty source list, thus realizing the compatibility with protocols of earlier versions.</p>
<p id="p-0054" num="0053">S<b>4</b>. Update the corresponding state inside the multicast router directly with information of the report.</p>
<p id="p-0055" num="0054">If the multicast router receives an INCLUDE mode membership report that carries a non-empty source list in compliance with the prior protocols; that is, the multicast router receives a source-specific join request of the group member, and the multicast router updates the corresponding state inside the router directly with the non-empty source list, according to the prior procedure.</p>
<p id="p-0056" num="0055">If the multicast router receives a non-source-specific join report, the router processes the report based on the INCLUDE mode.</p>
<p id="p-0057" num="0056">The group member may use (INCLUDE, ANY) in the interface model for a non-source-specific join to indicate the inclusion of any source list and send an INCLUDE mode membership report that carries any source list to the multicast router. If the multicast router receives a membership report that carries (INCLUDE, ANY), the router identifies the report as a non-source-specific join report and completes the non-source-specific join.</p>
<p id="p-0058" num="0057">The group member may use (EXCLUDE, NULL) in the interface model for a non-source-specific join to indicate the exclusion of an empty source list and send an EXCLUDE mode membership report that carries an empty source list to the multicast router. If the multicast router receives a membership report that carries (EXCLUDE, NULL), the router identifies the report as a non-source-specific join report and completes the non-source-specific join.</p>
<p id="p-0059" num="0058">The above is an overview of the method for optimizing a group management protocol, according to an embodiment of the invention.</p>
<p id="p-0060" num="0059">The following describes the definitions of related information and specific actions after a prior protocol is optimized, according to the method.</p>
<p id="p-0061" num="0060">1. Definitions of new interface models for non-source-specific join actions:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>IPMulticastListen(socket,interface,multicast-address,INCLUDE,ANY);&#x2003;&#x2003;(4)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0062" num="0061">In expression (4), IPMulticastListen indicates the IGMPv3 interface model, and may be replaced by IPv6MulticastListen in the case of MLDv2; socket is a parameter inside the system and is related to different requesting entities; interface is a local identifier of the network interface; multicast-address is a group address of the request; and (INCLUDE, ANY) indicates the join of a non-source-specific group.
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>IPMulticastListen(socket,interface,multicast-address,EXCLUDE,NULL);&#x2003;&#x2003;(5)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0063" num="0062">In expression (5), IPMulticastListen indicates the IGMPv3 interface model, and may be replaced by IPv6MulticastListen in the case of MLDv2; socket is a parameter inside the system and is related to different requesting entities; interface is a local identifier of the network interface; multicast-address is a group address of the request; and (EXCLUDE, NULL) indicates the join of a non-source-specific group.</p>
<p id="p-0064" num="0063">2. Definitions of mode related fields in a group membership report (INCLUDE and ANY are taken as example; EXCLUDE and NULL may be inferred):</p>
<p id="p-0065" num="0064">In an IGMPv3/MLDv2 group membership report, there are six types of group records [RFC3376], while four types related to INCLUDE are reserved. The four INCLUDE related types are: NODE_IS_INCLUDE (IS_IN hereinafter), ALLOW_NEW_SOURCES (ALLOW hereinafter), BLOCK_OLD_SOURCES (BLOCK hereinafter), and CHANGE_TO_INCLUDE (TO_IN hereinafter).</p>
<p id="p-0066" num="0065">3. New definitions of group member behaviors (INCLUDE and ANY are taken as example; EXCLUDE and NULL may be inferred):</p>
<p id="p-0067" num="0066">a. Change of Host Interface State</p>
<p id="p-0068" num="0067">In the optimized protocol, the host state change rule is described in Table 1:</p>
<p id="p-0069" num="0068">
<tables id="TABLE-US-00001" num="00001">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="1" colwidth="63pt" align="left"/>
<colspec colname="2" colwidth="63pt" align="left"/>
<colspec colname="3" colwidth="91pt" align="left"/>
<thead>
<row>
<entry namest="1" nameend="3" rowsep="1">TABLE 1</entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
<row>
<entry>Old State</entry>
<entry>New State</entry>
<entry>Reported State</entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry>INCLUDE (A)</entry>
<entry>INCLUDE (B)</entry>
<entry>ALLOW (B-A), BLOCK (A-B)</entry>
</row>
<row>
<entry>INCLUDE (A)</entry>
<entry>INCLUDE (ANY)</entry>
<entry>INCLUDE (ANY)</entry>
</row>
<row>
<entry>INCLUDE (ANY)</entry>
<entry>INCLUDE (B)</entry>
<entry>TO_IN (B)</entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0070" num="0069">When the host generates a report, it encapsulates report types of NODE_IS_INCLUDE, ALLOW_NEW_SOURCES, BLOCK_OLD_SOURCES, and CHANGE_TO_INCLUDE.</p>
<p id="p-0071" num="0070">b. Actions after the Host Receives a Query Message</p>
<p id="p-0072" num="0071">In the prior protocol, the host side sets a group timer for response to a source-group query message of a router. When the group timer expires, the host sends a report in response to the query. When the group timer expires, the host needs to compare the source list associated with the group timer and the sources of the associated group of the interface to decide the form of interface state to be reported to the router. In the optimized protocol, the judgment rule is described in Table 2:</p>
<p id="p-0073" num="0072">
<tables id="TABLE-US-00002" num="00002">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="1" colwidth="70pt" align="left"/>
<colspec colname="2" colwidth="63pt" align="left"/>
<colspec colname="3" colwidth="84pt" align="left"/>
<thead>
<row>
<entry namest="1" nameend="3" rowsep="1">TABLE 2</entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
<row>
<entry>Interface State</entry>
<entry>Pending Source List</entry>
<entry>Responded State Record</entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry>INCLUDE (A)</entry>
<entry>B</entry>
<entry>IS_IN (A*B)</entry>
</row>
<row>
<entry>INCLUDE (ANY)</entry>
<entry>B</entry>
<entry>IS_IN (B)</entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0074" num="0073">4. Multicast router behaviors (INCLUDE and ANY are taken as example; EXCLUDE and NULL may be inferred):</p>
<p id="p-0075" num="0074">a. Filter Mode of the Router</p>
<p id="p-0076" num="0075">In IGMPv3/MLDv2, the filter mode of an IGMPv3/MLDv2 router is defined to reduce the number of states inside the router. Specifically, upon reception of an EXCLUDE mode message, the filter mode of the router is set to EXCLUDE. If there is no source to EXCLUDE, when the group-timer expires, the filter mode of the router is changed to INCLUDE.</p>
<p id="p-0077" num="0076">In the optimized protocol, the router does not set or change the filter mode but instead, processes received membership reports only in the INCLUDE filter mode. Therefore, the EXCLUDE mode in the prior router-side protocol is meaningless and the optimized protocol cancels the definition of router mode. The concept model of the reception state of the router is:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>multicast address,group timer,(source records)&#x2003;&#x2003;(6)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0078" num="0077">In expression (6), multicast address is a group address associated with the state record; group timer is adapted to judge whether the network connected with the router has a non-source-specific group reception state; and group records are records of sources.</p>
<p id="p-0079" num="0078">b. Timer Related Actions:</p>
<p id="p-0080" num="0079">In the prior protocol, the group timer of an interface is used in the EXCLUDE mode, indicating the timeout interval for the router to change from the EXCLUDE mode to the INCLUDE mode. The router maintains a source timer for each source record.</p>
<p id="p-0081" num="0080">In the optimized protocol, a group timer is not used to identify the EXCLUDE mode but used to indicate a non-source-specific group. In this case, group timer related behaviors are described in Table 3:</p>
<p id="p-0082" num="0081">
<tables id="TABLE-US-00003" num="00003">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="1" colwidth="70pt" align="left"/>
<colspec colname="2" colwidth="147pt" align="left"/>
<thead>
<row>
<entry namest="1" nameend="2" rowsep="1">TABLE 3</entry>
</row>
<row>
<entry namest="1" nameend="2" align="center" rowsep="1"/>
</row>
<row>
<entry>Value of Group Timer</entry>
<entry>Meaning and Action</entry>
</row>
<row>
<entry namest="1" nameend="2" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry>G_Timer &#x3e; 0</entry>
<entry>Indicate that the connected network has a</entry>
</row>
<row>
<entry/>
<entry>non-source-specific group reception state.</entry>
</row>
<row>
<entry>G_Timer = = 0</entry>
<entry>Indicate that the connected network has no</entry>
</row>
<row>
<entry/>
<entry>non-source-specific group reception state, where:</entry>
</row>
<row>
<entry/>
<entry>1. If a source timer is running in the group, the</entry>
</row>
<row>
<entry/>
<entry>network still has a source-specific group</entry>
</row>
<row>
<entry/>
<entry>reception state of the group.</entry>
</row>
<row>
<entry/>
<entry>2. If all the source timers in the group expire, the</entry>
</row>
<row>
<entry/>
<entry>network does not have a source-specific group</entry>
</row>
<row>
<entry/>
<entry>reception state of the group, and in this case, the</entry>
</row>
<row>
<entry/>
<entry>group record is deleted.</entry>
</row>
<row>
<entry namest="1" nameend="2" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0083" num="0082">c. Source-Specific Forwarding Rule</p>
<p id="p-0084" num="0083">In the optimized protocol, when a multicast router connected to a sub-network receives a multicast packet, the router needs to judge whether to forward the packet to the sub-network, according to information of IGMPv3/MLDv2. The specific judgment rule is described in Table 4:</p>
<p id="p-0085" num="0084">
<tables id="TABLE-US-00004" num="00004">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="1" colwidth="63pt" align="left"/>
<colspec colname="2" colwidth="70pt" align="left"/>
<colspec colname="3" colwidth="84pt" align="left"/>
<thead>
<row>
<entry namest="1" nameend="3" rowsep="1">TABLE 4</entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
<row>
<entry>Group Timer</entry>
<entry>Value of Source Timer</entry>
<entry>Recommended Action</entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry>G_TIMER = = 0</entry>
<entry>S_TIMER &#x3e; 0</entry>
<entry>Forward packets from the </entry>
</row>
<row>
<entry/>
<entry/>
<entry>source.</entry>
</row>
<row>
<entry>G_TIMER = = 0</entry>
<entry>S_TIMER = = 0</entry>
<entry>Stop forwarding packets </entry>
</row>
<row>
<entry/>
<entry/>
<entry>from the source and delete </entry>
</row>
<row>
<entry/>
<entry/>
<entry>the source record. If</entry>
</row>
<row>
<entry/>
<entry/>
<entry>the group has no other </entry>
</row>
<row>
<entry/>
<entry/>
<entry>source record, delete the </entry>
</row>
<row>
<entry/>
<entry/>
<entry>entire group record.</entry>
</row>
<row>
<entry>G_TIMER = = 0</entry>
<entry>Empty source list</entry>
<entry>Do not forward packets </entry>
</row>
<row>
<entry/>
<entry/>
<entry>from the source.</entry>
</row>
<row>
<entry>G_TIMER &#x3e; 0</entry>
<entry>S_TIMER &#x3e; = 0</entry>
<entry>Forward packets from the </entry>
</row>
<row>
<entry/>
<entry/>
<entry>source.</entry>
</row>
<row>
<entry>G_TIMER &#x3e; 0</entry>
<entry>Empty source list</entry>
<entry>Forward packets from the </entry>
</row>
<row>
<entry/>
<entry/>
<entry>source.</entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0086" num="0085">d. Reception of a Current-State Membership Report from a Host:</p>
<p id="p-0087" num="0086">In the prior protocol, upon reception of a Current-state group record, the router needs to update the group timer and the source timer and the filter mode of the router may also change as a result. In the optimized protocol, the actions are described in Table 5:</p>
<p id="p-0088" num="0087">
<tables id="TABLE-US-00005" num="00005">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="5">
<colspec colname="1" colwidth="56pt" align="left"/>
<colspec colname="2" colwidth="28pt" align="left"/>
<colspec colname="3" colwidth="49pt" align="left"/>
<colspec colname="4" colwidth="28pt" align="left"/>
<colspec colname="5" colwidth="56pt" align="left"/>
<thead>
<row>
<entry namest="1" nameend="5" rowsep="1">TABLE 5</entry>
</row>
<row>
<entry namest="1" nameend="5" align="center" rowsep="1"/>
</row>
<row>
<entry/>
<entry>Old </entry>
<entry/>
<entry>New </entry>
<entry>Action on</entry>
</row>
<row>
<entry/>
<entry>Source</entry>
<entry>Received</entry>
<entry>Source</entry>
<entry>IGMPv3/</entry>
</row>
<row>
<entry>Group Timer</entry>
<entry>List</entry>
<entry>Report</entry>
<entry>List</entry>
<entry>MLDv2</entry>
</row>
<row>
<entry namest="1" nameend="5" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry>G_TIMER = 0</entry>
<entry>A</entry>
<entry>IS_IN(B)</entry>
<entry>A + B</entry>
<entry>Set the B timer to</entry>
</row>
<row>
<entry/>
<entry/>
<entry/>
<entry/>
<entry>GMI/MALI.</entry>
</row>
<row>
<entry>G_TIMER = 0</entry>
<entry>A</entry>
<entry>IS_EX(NULL)</entry>
<entry>A</entry>
<entry>Set the </entry>
</row>
<row>
<entry/>
<entry/>
<entry/>
<entry/>
<entry>group timer</entry>
</row>
<row>
<entry/>
<entry/>
<entry/>
<entry/>
<entry>to GMI/MALI.</entry>
</row>
<row>
<entry>G_TIMER &#x3e; 0</entry>
<entry>A</entry>
<entry>IS_IN(B)</entry>
<entry>A + B</entry>
<entry>Set the B timer to</entry>
</row>
<row>
<entry/>
<entry/>
<entry/>
<entry/>
<entry>GMI/MALI.</entry>
</row>
<row>
<entry>G_TIMER &#x3e; 0</entry>
<entry>A</entry>
<entry>IS_EX(NULL)</entry>
<entry>A</entry>
<entry>Set the </entry>
</row>
<row>
<entry/>
<entry/>
<entry/>
<entry/>
<entry>group timer</entry>
</row>
<row>
<entry/>
<entry/>
<entry/>
<entry/>
<entry>to GMI/MALI.</entry>
</row>
<row>
<entry namest="1" nameend="5" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0089" num="0088">The Group Member Interval (GMI) is the group membership timer defined in IGMPv3; and the Multicast Address Listening Interval (MALI) is the counterpart of GMI in MLDv2.</p>
<p id="p-0090" num="0089">e. Reception of a Filter-Mode-Change and a Source-List-Change Record:</p>
<p id="p-0091" num="0090">In the prior art, when a message indicating change of a filter mode or a source list is received, there will be a series of processing and switching actions. In the optimized protocol, a router does not set or change the filter mode, but instead, processes received membership reports in only the INCLUDE mode. This means the router processes only reports of source list change records. The corresponding actions are described in Table 6.</p>
<p id="p-0092" num="0091">
<tables id="TABLE-US-00006" num="00006">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="5">
<colspec colname="1" colwidth="56pt" align="left"/>
<colspec colname="2" colwidth="28pt" align="left"/>
<colspec colname="3" colwidth="49pt" align="left"/>
<colspec colname="4" colwidth="28pt" align="left"/>
<colspec colname="5" colwidth="56pt" align="left"/>
<thead>
<row>
<entry namest="1" nameend="5" rowsep="1">TABLE 6</entry>
</row>
<row>
<entry namest="1" nameend="5" align="center" rowsep="1"/>
</row>
<row>
<entry/>
<entry>Old </entry>
<entry/>
<entry>New </entry>
<entry>Action on</entry>
</row>
<row>
<entry/>
<entry>Source</entry>
<entry>Received</entry>
<entry>Source</entry>
<entry>IGMPv3/</entry>
</row>
<row>
<entry>Group Timer</entry>
<entry>List</entry>
<entry>Report</entry>
<entry>List</entry>
<entry>MLDv2</entry>
</row>
<row>
<entry namest="1" nameend="5" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry>G_TIMER = 0</entry>
<entry>A</entry>
<entry>ALLOW (B)</entry>
<entry>A + B</entry>
<entry>Set the B timer to</entry>
</row>
<row>
<entry/>
<entry/>
<entry/>
<entry/>
<entry>GMI/MALI.</entry>
</row>
<row>
<entry>G_TIMER = 0</entry>
<entry>A</entry>
<entry>BLOCK (B)</entry>
<entry>A</entry>
<entry>Send a query </entry>
</row>
<row>
<entry/>
<entry/>
<entry/>
<entry/>
<entry>message:</entry>
</row>
<row>
<entry/>
<entry/>
<entry/>
<entry/>
<entry>Q (G, A*B).</entry>
</row>
<row>
<entry>G_TIMER = 0</entry>
<entry>A</entry>
<entry>TO_IN (B)</entry>
<entry>A + B</entry>
<entry>Set the B timer to</entry>
</row>
<row>
<entry/>
<entry/>
<entry/>
<entry/>
<entry>GMI/MALI.</entry>
</row>
<row>
<entry/>
<entry/>
<entry/>
<entry/>
<entry>Send a query </entry>
</row>
<row>
<entry/>
<entry/>
<entry/>
<entry/>
<entry>message:</entry>
</row>
<row>
<entry/>
<entry/>
<entry/>
<entry/>
<entry>Q (G, A-B).</entry>
</row>
<row>
<entry>G_TIMER &#x3e; 0</entry>
<entry>A</entry>
<entry>ALLOW (B)</entry>
<entry>A + B</entry>
<entry>Set the B timer to</entry>
</row>
<row>
<entry/>
<entry/>
<entry/>
<entry/>
<entry>GMI/MALI.</entry>
</row>
<row>
<entry>G_TIMER &#x3e; 0</entry>
<entry>A</entry>
<entry>BLOCK (B)</entry>
<entry>A</entry>
<entry>Send a query </entry>
</row>
<row>
<entry/>
<entry/>
<entry/>
<entry/>
<entry>message:</entry>
</row>
<row>
<entry/>
<entry/>
<entry/>
<entry/>
<entry>Q (G, A*B).</entry>
</row>
<row>
<entry>G_TIMER &#x3e; 0</entry>
<entry>A</entry>
<entry>TO_IN (B)</entry>
<entry>A + B</entry>
<entry>Set the B timer to</entry>
</row>
<row>
<entry/>
<entry/>
<entry/>
<entry/>
<entry>GMI/MALI.</entry>
</row>
<row>
<entry/>
<entry/>
<entry/>
<entry/>
<entry>Send a query</entry>
</row>
<row>
<entry/>
<entry/>
<entry/>
<entry/>
<entry>message:</entry>
</row>
<row>
<entry/>
<entry/>
<entry/>
<entry/>
<entry>Q (G, A-B).</entry>
</row>
<row>
<entry/>
<entry/>
<entry/>
<entry/>
<entry>Send a query </entry>
</row>
<row>
<entry/>
<entry/>
<entry/>
<entry/>
<entry>message:</entry>
</row>
<row>
<entry/>
<entry/>
<entry/>
<entry/>
<entry>Q (G).</entry>
</row>
<row>
<entry namest="1" nameend="5" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0093" num="0092">5. Processing Related to Compatibility with Other Versions of IGMP/MLD (INCLUDE and ANY Are Taken As Example; EXCLUDE and NULL May Be Inferred):</p>
<p id="p-0094" num="0093">RFC3376 and RFC3810 describe the method for compatibility of IGMPv3/MLDv2 with IGMPv2/IGMPv1/MLDv1. The optimized IGMPv3/MLDv2 and the prior IGMPv3/MLDv2 have the same compatibility rules. However, due to the change of the filter mode, some special processing is adopted.</p>
<p id="p-0095" num="0094">a. Compatibility with IGMPv1/IGMPv2/MLDv1 as Described in Table 7:</p>
<p id="p-0096" num="0095">
<tables id="TABLE-US-00007" num="00007">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="1" colwidth="105pt" align="left"/>
<colspec colname="2" colwidth="42pt" align="left"/>
<colspec colname="3" colwidth="70pt" align="left"/>
<thead>
<row>
<entry namest="1" nameend="3" rowsep="1">TABLE 7</entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
<row>
<entry>Optimized IGMPv3/MLDv2</entry>
<entry>IGMPv1</entry>
<entry>IGMPv2/MLDv1</entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry>IS_IN (ALL)</entry>
<entry>Report</entry>
<entry>Report</entry>
</row>
<row>
<entry>TO_IN ({ })</entry>
<entry/>
<entry>Leave/Done</entry>
</row>
<row>
<entry>IS_IN (A)</entry>
<entry>Report</entry>
<entry>Report</entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0097" num="0096">a. Compatibility with IGMPv3/MLDv2 as Described in Table 8:</p>
<p id="p-0098" num="0097">
<tables id="TABLE-US-00008" num="00008">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="1" colwidth="28pt" align="left"/>
<colspec colname="2" colwidth="77pt" align="left"/>
<colspec colname="3" colwidth="112pt" align="left"/>
<thead>
<row>
<entry namest="1" nameend="3" rowsep="1">TABLE 8</entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
<row>
<entry/>
<entry>IGMPv3/MLDv2</entry>
<entry>Optimized IGMPv3/MLDv2</entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry/>
<entry>IS_EX ({ })</entry>
<entry>IS_EX ({ })/IS_IN (ANY)</entry>
</row>
<row>
<entry/>
<entry>IS_IN (A)</entry>
<entry>IS_IN (A)</entry>
</row>
<row>
<entry/>
<entry>IS_EX (A)</entry>
<entry>IS_EX ({ })/IS_IN (ANY)</entry>
</row>
<row>
<entry/>
<entry>TO_IN (A)</entry>
<entry>TO_IN (A)</entry>
</row>
<row>
<entry/>
<entry>TO_EX (A)</entry>
<entry>IS_EX ({ })/IS_IN (ANY)</entry>
</row>
<row>
<entry/>
<entry>ALLOW (A)</entry>
<entry>ALLOW (A)</entry>
</row>
<row>
<entry/>
<entry>BLOCK (A)</entry>
<entry>BLOCK (A)</entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0099" num="0098">It is apparent that those skilled in the art can make various modifications and variations to the invention without departing from the spirit and scope of the invention. The invention is intended to cover the modifications and variations provided that they fall in the scope of protection defined by the claims or their equivalents.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method for optimizing a group management protocol, comprising:
<claim-text>receiving, by a multicast router, a membership report from a group member;</claim-text>
<claim-text>determining, by the multicast router, whether the membership report carries an EXCLUDE mode non-empty source list;</claim-text>
<claim-text>when the membership report carries the EXCLUDE mode non-empty source list, processing the membership report carrying the EXCLUDE mode non-empty source list as a non-source-specific join report and completing a non-source-specific join, wherein the non-source-specific join report is an INCLUDE mode membership report that carries any source list or an EXCLUDE mode membership report that carries an empty source list; and</claim-text>
<claim-text>when the membership report does not carry the EXCLUDE mode non-empty source list, updating a corresponding state inside the multicast router with information of the membership report that does not carry the EXCLUDE mode non-empty source list.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. A multicast router for collecting and maintaining group memberships, comprising a judging module, a converting module and an identifying module, wherein:
<claim-text>the judging module is configured to judge whether a received membership report carries an EXCLUDE mode non-empty source list; when the received membership report carries the EXCLUDE mode non-empty source list, the judging module triggers the converting module; and when the received membership report does not carry the EXCLUDE mode non-empty source list, the judging module triggers the identifying module, wherein the received membership report that does not carry the EXCLUDE mode non-empty source list is a first INCLUDE mode membership report that carries a specific source list, a second INCLUDE mode membership report that carries any source list or an EXCLUDE mode membership report that carries an empty source list;</claim-text>
<claim-text>the converting module is configured to convert the received membership report that carries the EXCLUDE mode non-empty source list into a non-source-specific join report and send the non-source-specific report to the identifying module for processing, wherein the non-source-specific join report is the second INCLUDE mode membership report that carries any source list or the EXCLUDE mode membership report that carries the empty source list; and</claim-text>
<claim-text>the identifying module is configured to identify the second INCLUDE mode membership report that carries any source list or the EXCLUDE mode membership report that carries the empty source list, and to update a corresponding state inside the multicast router.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. A multicast router, comprising:
<claim-text>a receiving device, configured to receiving a membership report from a group member;</claim-text>
<claim-text>a determining device, configured to determine whether the membership report carries an EXCLUDE mode non-empty source list;</claim-text>
<claim-text>a first processing device, configured to process the membership report carrying the EXCLUDE mode non-empty source list as a non-source-specific join report and complete a non-source-specific join, when the determining device determines that the membership report carries the EXCLUDE mode non-empty source list, wherein the non-source-specific join report is an INCLUDE mode membership report that carries any source list or an EXCLUDE mode membership report that carries an empty source list; and</claim-text>
<claim-text>a second processing device is configured to update a corresponding state inside the multicast router with information of the membership report that does not carry the EXCLUDE mode non-empty source list, when the determining device determines that the membership report does not carry the EXCLUDE mode non-empty source list. </claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
