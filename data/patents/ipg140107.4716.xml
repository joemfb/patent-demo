<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625809-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625809</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12784143</doc-number>
<date>20100520</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<us-term-of-grant>
<us-term-extension>723</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20080101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>H</subclass>
<main-group>40</main-group>
<subgroup>54</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>R</subclass>
<main-group>1</main-group>
<subgroup>20</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>381  8</main-classification>
<further-classification>381354</further-classification>
</classification-national>
<invention-title id="d2e53">Switchable attenuation circuit for MEMS microphone systems</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5734725</doc-number>
<kind>A</kind>
<name>Pritchard</name>
<date>19980300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>381 61</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6288606</doc-number>
<kind>B1</kind>
<name>Ekman et al.</name>
<date>20010900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>330 51</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>6522752</doc-number>
<kind>B1</kind>
<name>Smith</name>
<date>20030200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>381 61</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>7142037</doc-number>
<kind>B2</kind>
<name>Josefsson</name>
<date>20061100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
<classification-national><country>US</country><main-classification>327337</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2009/0003629</doc-number>
<kind>A1</kind>
<name>Shajaan et al.</name>
<date>20090100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>381113</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2009/0052696</doc-number>
<kind>A1</kind>
<name>Iwamatsu</name>
<date>20090200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
<classification-national><country>US</country><main-classification>381111</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2010/0266145</doc-number>
<kind>A1</kind>
<name>Aimo Suvanto</name>
<date>20101000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>381111</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2011/0026739</doc-number>
<kind>A1</kind>
<name>Thomsen et al.</name>
<date>20110200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
<classification-national><country>US</country><main-classification>381120</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2011/0029109</doc-number>
<kind>A1</kind>
<name>Thomsen et al.</name>
<date>20110200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
<classification-national><country>US</country><main-classification>700  4</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>2012/0121106</doc-number>
<kind>A1</kind>
<name>Henriksen</name>
<date>20120500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
<classification-national><country>US</country><main-classification>381120</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>WO</country>
<doc-number>WO 01/78446</doc-number>
<date>20011000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
<classification-cpc-text>H04R 3/00</classification-cpc-text>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>WO</country>
<doc-number>WO 02/073792</doc-number>
<kind>A2</kind>
<date>20020900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00013">
<othercit>Thomsen et al., U.S. Appl. No. 61/186,056, filed Jun. 11, 2009, now expired.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00014">
<othercit>Thomsen et al., U.S. Appl. No. 61/243,221, filed Sep. 17, 2009, now expired.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00015">
<othercit>Thomsen et al., U.S. Appl. No. 61/243,240, filed Sep. 17, 2009, now expired.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>6</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>381 28</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>381 61</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>381123</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>381 82</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>381 86</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>381101</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>381102</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>381103</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>381107</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>381113</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>381111</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>381112</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>381122</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>6</number-of-drawing-sheets>
<number-of-figures>10</number-of-figures>
</figures>
<us-related-documents>
<us-provisional-application>
<document-id>
<country>US</country>
<doc-number>61179757</doc-number>
<date>20090520</date>
</document-id>
</us-provisional-application>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20100310096</doc-number>
<kind>A1</kind>
<date>20101209</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Josefsson</last-name>
<first-name>Olafur Mar</first-name>
<address>
<city>Hafnarfjordur</city>
<country>IS</country>
</address>
</addressbook>
<residence>
<country>IS</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Henriksen</last-name>
<first-name>Jens Gaarde</first-name>
<address>
<city>Charlottenlund</city>
<country>DK</country>
</address>
</addressbook>
<residence>
<country>DK</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Josefsson</last-name>
<first-name>Olafur Mar</first-name>
<address>
<city>Hafnarfjordur</city>
<country>IS</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Henriksen</last-name>
<first-name>Jens Gaarde</first-name>
<address>
<city>Charlottenlund</city>
<country>DK</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<last-name>Imam</last-name>
<first-name>Maryam</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
<agent sequence="02" rep-type="attorney">
<addressbook>
<orgname>IPxLAW Group LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Invensense, Inc.</orgname>
<role>02</role>
<address>
<city>San Jose</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Tsang</last-name>
<first-name>Fan</first-name>
<department>2653</department>
</primary-examiner>
<assistant-examiner>
<last-name>Zhao</last-name>
<first-name>Eugene</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A switch control circuit monitors a signal produced by a MEMS or other capacitor microphone. When a criterion is met, for example when the amplitude of the monitored signal exceeds a threshold or the monitored signal has been clipped or analysis of the monitored signal indicates clipping is imminent or likely, the switch control circuit operates one or more switches so as to selectively connect one or more capacitors to a signal line from the microphone, i.e., so as to connect a selected capacitance to the signal line to attenuate the signal from the microphone and, therefore, avoid clipping. The switches may be MOSFET, MEMS or other types of switches co-located with the microphone in a common semiconductor package. Similarly, the capacitors, a circuit that processes the signals from the microphone and/or the switch control circuit may be co-located with the microphone in a common semiconductor package.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="131.74mm" wi="190.16mm" file="US08625809-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="229.02mm" wi="175.60mm" file="US08625809-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="211.84mm" wi="147.57mm" file="US08625809-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="241.22mm" wi="169.67mm" file="US08625809-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="281.86mm" wi="198.12mm" file="US08625809-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="200.24mm" wi="193.21mm" file="US08625809-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="199.90mm" wi="198.12mm" file="US08625809-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">CROSS REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This application claims the benefit of U.S. Provisional Patent Application No. 61/179,757, filed May 20, 2009, titled &#x201c;Switchable Input Capacitor for MEMS Systems,&#x201d; the entire contents of which are hereby incorporated by reference herein, for all purposes.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">TECHNICAL FIELD</heading>
<p id="p-0003" num="0002">The present invention relates to MEMS (microelectromechanical system) systems, and more particularly to expanding the input range of a MEMS sensor or microphone.</p>
<heading id="h-0003" level="1">BACKGROUND ART</heading>
<p id="p-0004" num="0003">Microelectromechanical systems (MEMS) microphones are commonly used in mobile telephones and other consumer electronic devices, embedded systems and other devices. A MEMS microphone typically includes a conductive micromachined diaphragm that vibrates in response to an acoustic signal. The microphone also includes a fixed conductive plate parallel to, and spaced apart from, the diaphragm. The diaphragm and the conductive plate collectively form a capacitor, and an electrical charge is placed on the capacitor, typically by an associated circuit. The capacitance of the capacitor varies rapidly as the distance between the diaphragm and the plate varies due to the vibration of the diaphragm. Typically, the charge on the capacitor remains essentially constant during these vibrations, so the voltage across the capacitor varies as the capacitance varies. The varying voltage may be used to drive a circuit, such as an amplifier or an analog-to-digital converter, to which the MEMS microphone is connected. A MEMS microphone connected to a circuit is referred to herein as a &#x201c;MEMS microphone system&#x201d; or a &#x201c;MEMS system.&#x201d;</p>
<p id="p-0005" num="0004">MEMS microphone dies are often electrically connected to application-specific integrated circuits (ASICs) to process the electrical signals from the microphones. A MEMS microphone die and its corresponding ASIC are often housed in a common integrated circuit package to keep leads between the microphone and the ASIC as short as possible, such as to avoid parasitic capacitance caused by long leads.</p>
<p id="p-0006" num="0005">When used in consumer electronics devices and other contexts, MEMS microphone systems may be subjected to widely varying amplitudes of acoustic signals. For example, a mobile telephone used outdoors under windy conditions or in a subway station subjects the MEMS microphone to very loud acoustic signals. Even under quite ambient conditions, a user may hold a microphone too close to the user's mouth or speak in too loud a voice for the MEMS microphone system. Under these circumstances, the diaphragm may reach its absolute displacement limit, and the resulting signal may therefore be &#x201c;clipped,&#x201d; causing undesirable distortion. Even if the diaphragm does not reach its absolute displacement limit, the ASIC or other processing circuitry may not be able to handle the peaks of the electrical signal from the MEMS microphone, and the signal may be clipped. Clipping can cause a loss of signal contents. For example, if a speech signal is clipped, the output signal waveform becomes flat and no longer varies with the human speech. Thus, during the clipped portion of each cycle, the signal conveys no intelligible content.</p>
<heading id="h-0004" level="1">SUMMARY OF EMBODIMENTS</heading>
<p id="p-0007" num="0006">An embodiment of the present invention provides a microphone system configured to avoid or reduce clipping. The microphone system includes a movable structure and an electrode, such as a MEMS or other capacitor microphone. The movable structure is movable in response to an acoustic signal. The movable structure and the electrode establish a capacitance that varies with the acoustic signal to which the moveable structure is subjected. Movement of the moveable structure produces an electrical signal. The microphone system also includes a circuit for processing the signal. A switch selectively operates to connect a capacitance to a conductive line carrying the signal, so as to attenuate the signal before it is processed by the circuit.</p>
<p id="p-0008" num="0007">The capacitance may include one or more capacitors connected to the switch. Each capacitor may have a different capacitance.</p>
<p id="p-0009" num="0008">The switch may include a plurality of switches connected to the plurality of capacitors, such that the capacitance connected to the line depends on the states of the switches. The switches may be implemented with MOSFETs, MEMS switches or other suitable devices or circuits.</p>
<p id="p-0010" num="0009">A switch control circuit may activate the switch(es) after the signal or a signal derived from the signal (such as a signal generated by a down-stream amplifier or analog-to-digital converter) meets a criterion. The criterion may be met when the signal or the signal derived from the signal exceeds a threshold value or a value less than necessary for clipping or is clipped.</p>
<p id="p-0011" num="0010">The movable structure, the switch and (optionally) the switch control circuit may be disposed within a common integrated circuit package. The switch control circuit may be entirely or partially disposed external to the common integrated circuit package.</p>
<p id="p-0012" num="0011">The movable structure and the switch may be disposed in a common integrated circuit die or on different dies.</p>
<p id="p-0013" num="0012">The switch control circuit may be configured to activate the switch in timed relation to a zero crossing of the signal or the signal derived from the signal.</p>
<p id="p-0014" num="0013">Another embodiment of the present invention provides a method for attenuating a signal from a capacitor microphone. The method involves detecting if the amplitude of a signal from the capacitor microphone meets a criterion. In response to detecting the amplitude meeting the criterion, a capacitance is automatically connected to a line carrying a signal from the capacitor microphone.</p>
<p id="p-0015" num="0014">Connecting the capacitance to the line may involve activating a switch. The switch may be disposed within an integrated circuit package that houses the capacitor microphone.</p>
<p id="p-0016" num="0015">A plurality of capacitors may be selectively connectable to the line via a plurality of switches, such that the capacitance connected to the line depends on the states of the switches. Connecting the capacitance to the line may include activating at least one of the plurality of switches, based on an attribute of the signal. The attribute may involve the amplitude of the signal.</p>
<p id="p-0017" num="0016">The plurality of switches and the plurality of capacitors may be disposed within an integrated circuit package that houses the capacitor microphone.</p>
<p id="p-0018" num="0017">The criterion may be met when the amplitude of the signal from the capacitor microphone exceeds a threshold, or when the signal from the capacitor microphone is clipped or when the signal from the capacitor microphone reaches a value less than necessary for clipping.</p>
<p id="p-0019" num="0018">Yet another embodiment of the present invention provides a microphone system that includes a movable structure and an electrode, such as a MEMS or other capacitor microphone. The movable structure is movable in response to an acoustic signal. The movable structure and the electrode establish a capacitance that varies with the acoustic signal. Movement of the moveable structure produces an electrical signal. The microphone system also includes a circuit for processing the signal. Two or more selectable amplifiers are coupled in a signal path between the movable structure and the circuit. Each of the selectable amplifiers is configured to attenuate the signal by a different amount. A selector is configured to select one of the selectable amplifiers, based on a selection signal.</p>
<p id="p-0020" num="0019">The selectable amplifiers may include two or more series-connected capacitors coupled to a conductive line carrying the signal, so as to produce two or more signal paths. Each of the signal paths is configured to carry the signal attenuated by a different amount. Each of the signal paths is coupled to a different respective one of the selectable amplifiers. A control circuit is configured to activate the selector after the original signal meets a criterion or a signal derived from the original signal meets a criterion.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0021" num="0020">The invention will be more fully understood by referring to the following Detailed Description of Specific Embodiments in conjunction with the Drawings, of which:</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 1</figref> is a schematic diagram of a circuit for automatically attenuating a signal from a MEMS microphone in response to the signal meeting a criterion, according to an embodiment of the present invention;</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 2</figref> shows waveforms of clipped and attenuated signals as a result of using an embodiment of the present invention;</p>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 3</figref> is a schematic circuit diagram of switched capacitors, according to an embodiment of the present invention;</p>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. 4</figref> is a schematic circuit diagram of switched capacitors, according to another embodiment of the present invention;</p>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. 5</figref> is a flow diagram illustrating operation of an embodiment of the present invention;</p>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 6</figref> is a schematic block diagram of a switch control circuit of <figref idref="DRAWINGS">FIG. 1</figref>, according to an embodiment of the present invention;</p>
<p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. 7</figref> is a schematic diagram of a circuit for automatically attenuating a signal from a MEMS microphone in response to the signal meeting a criterion, in accordance with another embodiment of the present invention;</p>
<p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. 8</figref> is a schematic diagram of a circuit for automatically attenuating a signal from a MEMS microphone in response to the signal meeting a criterion, in accordance with yet another embodiment of the present invention;</p>
<p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. 9</figref> is a schematic diagram of a circuit for automatically attenuating a signal from a MEMS microphone in response to the signal meeting a criterion, in accordance with another embodiment of the present invention; and</p>
<p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. 10</figref> is a schematic diagram of a circuit for automatically attenuating a signal from a MEMS microphone in response to the signal meeting a criterion, in accordance with yet another embodiment of the present invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0006" level="1">DETAILED DESCRIPTION OF SPECIFIC EMBODIMENTS</heading>
<p id="p-0032" num="0031">In accordance with embodiments of the present invention, methods and apparatus are disclosed for automatically attenuating a signal from a MEMS or other capacitor microphone in response to the signal meeting a criterion, such as if the signal is clipped or the amplitude of the signal exceeds a predetermined threshold value. Thus, distortion or other problems caused by clipping can be avoided or reduced.</p>
<p id="p-0033" num="0032">According to conventional design practices, capacitances should be minimized along a signal line from a microphone to a circuit that processes the signals. For example, the length of this signal line is typically kept as short as practical to avoid parasitic capacitances between the signal line and other conductors. However, contrary to conventional design practices, embodiments of the present invention intentionally selectively connect a capacitance to a line carrying a signal from a microphone to a circuit that processes the signal, so as to attenuate the signal before it is processed by the circuit.</p>
<p id="p-0034" num="0033">In one embodiment, a switch control circuit monitors a signal produced by the microphone or a signal derived from the voltage signal and controls one or more switches in response to attributes of the monitored signal. The switches are connected to the signal line and to one or more capacitors, such that the amount of capacitance connected to the line depends on the states of the switches.</p>
<p id="p-0035" num="0034">When a criterion is met, for example when the amplitude of the monitored signal exceeds a threshold, or the monitored signal has been clipped or analysis of the monitored signal indicates clipping is imminent or likely, the switch control circuit operates the switches so as to selectively connect one or more of the capacitors to the signal line, i.e., so as to connect a selected capacitance to the signal line. Connecting the capacitance to the signal line attenuates the signal, thereby avoiding or reducing the clipping.</p>
<p id="p-0036" num="0035">After the capacitance has been connected to the signal line, if the criterion continues to be met, or if the criterion is subsequently again met, the switches may be further operated to connect additional capacitance to the signal line. As the amplitude of the monitored signal or the likelihood of clipping diminishes or ceases, the switch control circuit may operate the switches to reduce (possibly to zero) the capacitance connected to the signal line. Thus, capacitance may be dynamically added or removed in steps in response to changes in the attributes of the signal.</p>
<p id="p-0037" num="0036">The switches may be implemented with metal oxide semiconductor field effect transistors (MOSFETs), MEMS switches or any other suitable switches or circuits. The switches may be co-located with the microphone in a common semiconductor package. The switches may be fabricated on the same die as the microphone or on another die within the same package, such as a die that includes an ASIC or other circuit that processes the signals from the microphone. Similarly, the capacitors may be co-located with the microphone in a common semiconductor package, and the capacitors may be fabricated on, or attached to, the microphone die or another die, such as the die that includes the circuit that processes the microphone signals. The switch control circuit may be co-packaged with the microphone on the microphone die or another die, or the switch control circuit may be partially or completely external to the package.</p>
<p id="p-0038" num="0037">A semiconductor package includes a casing, typically made of plastic, ceramic or metal, inside which one or more dies are disposed. The die(s) is(are) attached to a substrate of the package. The package includes one or more electric leads, pads or other electrically conductive features, by which the package can be electrically connected to a circuit board, such as a printed circuit board. The package provides mechanical and, in some cases, environmental protection to the die(s). In the case of a MEMS microphone, the casing may include an aperture, through which acoustic signals may pass. Non-limiting exemplary package types include ball-grid array (BGA), surface mount and through-hole.</p>
<p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. 1</figref> is a schematic circuit diagram of an embodiment of the present invention. A MEMS microphone <b>101</b> includes a conductive micromachined diaphragm <b>103</b> parallel to, and separated from, a fixed conductive plate <b>106</b> that collectively form a capacitor <b>110</b>, as is well known in the art. Acoustic energy <b>113</b>, such as from a user speaking into the MEMS microphone <b>101</b>, causes the diaphragm <b>103</b> to vibrate, which causes the capacitance of the capacitor <b>110</b> to vary. A bias generator <b>116</b> applies a bias voltage V<sub>bias </sub><b>120</b> to the capacitor <b>110</b>. To facilitate placing the bias voltage across the capacitor <b>110</b>, the signal side <b>103</b> of the capacitor <b>110</b> is connected to ground via a high-impedance path provided by anti-parallel diodes <b>133</b> and <b>136</b> and any necessary resistors or other components, etc. (not shown).</p>
<p id="p-0040" num="0039">Because charge (q) on the capacitor <b>110</b> remains essentially constant as the diaphragm vibrates, and the capacitance (C) of the capacitor <b>110</b> varies with the vibrations, a voltage (V) across the capacitor <b>110</b> varies according to equation (1).</p>
<p id="p-0041" num="0040">
<maths id="MATH-US-00001" num="00001">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mi>V</mi>
        <mo>=</mo>
        <mfrac>
          <mi>q</mi>
          <mi>C</mi>
        </mfrac>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>1</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0042" num="0041">The varying voltage across the capacitor <b>110</b> provides a signal <b>123</b> that may be processed by another circuit, such as an amplifier or an analog-to-digital converter. In the embodiment shown in <figref idref="DRAWINGS">FIG. 1</figref>, the processing circuit is a buffer <b>126</b>; however other types of circuits, such as ASICS and analog-to-digital converters, may be used. The buffer <b>126</b> generates an output signal <b>130</b> that may be used to drive subsequent circuits (not shown).</p>
<p id="p-0043" num="0042">As noted, the diaphragm <b>103</b> of the MEMS microphone <b>101</b> may reach its absolute displacement limit, resulting in clipping of the signal <b>123</b>. Even if the diaphragm <b>103</b> does not reach its absolute displacement limit, an ASIC or other processing circuitry may not be able to handle the peaks of the electrical signal from the MEMS microphone <b>101</b>, and the signal may be clipped by the ASIC or other circuit, particularly if a sensitive MEMS microphone is used or if the supply voltage VDD to the ASIC is small. Furthermore, the diodes <b>133</b> and <b>136</b> become forward biased and begin conducting signal to ground when the instantaneous signal reaches about 600 mV, thereby clipping the signal, as exemplified at <b>201</b> and <b>203</b> in the waveform <b>206</b> of the signal <b>123</b> shown in <figref idref="DRAWINGS">FIG. 2</figref>. As noted, clipping is undesirable.</p>
<p id="p-0044" num="0043">Returning to <figref idref="DRAWINGS">FIG. 1</figref>, a switch control circuit <b>140</b> is coupled via a line <b>143</b> to receive the signal <b>123</b> produced by the MEMS microphone <b>101</b>. The switch control circuit <b>140</b> analyzes the signal <b>123</b> to determine if the signal <b>123</b> meets a criterion, such as whether the signal <b>123</b> is being clipped or clipping of the signal <b>123</b> or a subsequent signal is imminent or likely. If the switch control circuit <b>140</b> determines that the criterion is met, the switch control circuit <b>140</b> generates a control signal <b>146</b> to activate a switch <b>150</b>, which connects a capacitance <b>153</b> to the signal line <b>123</b>. The capacitance <b>153</b> may be provided by one or more capacitors, the switch <b>150</b> may include a plurality of individual switches and the control signal <b>146</b> may include individual signals to control the individual switches, as described in more detail below. The added capacitance <b>153</b> reduces the amplitude of the signal <b>123</b> (as per equation (1), above), thereby preventing or reducing the clipping. Operation and structure of the switch control circuit <b>140</b> are described in more detail below.</p>
<p id="p-0045" num="0044">If C<sub>MEMS </sub>represents the capacitance of the MEMS microphone <b>101</b>, and C<sub>A </sub>represents the capacitance <b>153</b>, the attenuation of the signal <b>123</b> depends on the ratio shown in equation (2).
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>C</i><sub>MEMS</sub>/(<i>C</i><sub>A</sub>+C<sub>MEMS</sub>)&#x2003;&#x2003;(2)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0046" num="0045">A typical MEMS microphone may have a capacitance of about 500 femtofarads (fF), unless of course the diaphragm reaches its absolute displacement limit and shorts to the fixed conductive plate. A capacitance <b>153</b> of about 500 femtofarads would attenuate the signal <b>123</b> from the MEMS microphone <b>101</b> by about 6 db. Capacitances in a range of about C<sub>MEMS </sub>to about nines times C<sub>MEMS </sub>may be used to provide attenuations in a range of about 6-20 db in one or more steps.</p>
<p id="p-0047" num="0046">A reduced-amplitude signal produced after the capacitance <b>153</b> has been connected to the signal line <b>123</b> is shown in a portion <b>210</b> of the waveform shown in <figref idref="DRAWINGS">FIG. 2</figref>. A dashed line <b>213</b> indicates a time at which the switch <b>150</b> is activated. The lower waveform in <figref idref="DRAWINGS">FIG. 2</figref> represents the control signal <b>146</b> generated by the switch control circuit <b>140</b> to control the switch <b>150</b>. As illustrated, during a first portion <b>216</b> of the lower waveform, the control signal <b>146</b> is &#x201c;low&#x201d; or &#x201c;off&#x201d; and does not activate the switch <b>150</b>, whereas during a second portion <b>218</b> of the waveform, the control signal <b>146</b> is &#x201c;high&#x201d; or &#x201c;on&#x201d; and activates the switch <b>150</b>. In one embodiment, the control signal <b>146</b> is generated such that the switch <b>150</b> is activated at a zero-crossing <b>220</b> in the signal <b>123</b> from the MEMS microphone <b>101</b>, i.e., when the signal <b>123</b> reaches its DC value.</p>
<p id="p-0048" num="0047">As noted, the capacitance <b>153</b> (<figref idref="DRAWINGS">FIG. 1</figref>) may be provided by one or more capacitors. <figref idref="DRAWINGS">FIG. 3</figref> is a schematic circuit diagram of one embodiment of a portion of the schematic circuit diagram of <figref idref="DRAWINGS">FIG. 1</figref>. <figref idref="DRAWINGS">FIG. 3</figref> illustrates a plurality of capacitors <b>301</b>, <b>303</b>, <b>306</b>, <b>310</b> and <b>313</b>, each capacitor <b>301</b>-<b>313</b> connected via a respective switch <b>316</b>, <b>320</b>, <b>323</b>, <b>326</b> and <b>330</b> to the signal line <b>123</b>. The capacitance connected to the signal line <b>123</b> depends on the states of the switches <b>316</b>-<b>330</b>. Each capacitor <b>301</b>-<b>313</b> may have a different capacitance value. For example, the capacitor values may be binary weighted, i.e., each capacitor may have a value that is about double the capacitance of the capacitor to its right. Of course, each capacitor <b>301</b>-<b>313</b> shown in <figref idref="DRAWINGS">FIG. 3</figref> may be implemented with one or more physical capacitors connected in parallel and/or series.</p>
<p id="p-0049" num="0048">All the capacitors need not be effectively connected in parallel. As shown in <figref idref="DRAWINGS">FIG. 4</figref>, some or all of the capacitors <b>401</b>-<b>416</b> may be connected in series. Optionally or additionally, some of the capacitors <b>401</b>-<b>416</b> may be connected in series, and other of the capacitors <b>420</b> and <b>423</b> may be connected in parallel. <figref idref="DRAWINGS">FIG. 4</figref> shows one configuration of switches <b>426</b>-<b>446</b>; however, other switch configurations may be used, as long as the states of the switches <b>426</b>-<b>446</b> determine the amount of capacitance connected to the signal line <b>123</b>.</p>
<p id="p-0050" num="0049">Returning to <figref idref="DRAWINGS">FIG. 1</figref>, in some embodiments, the switch control circuit <b>140</b> may analyze a different signal, such as the output of the buffer <b>126</b> (as indicated by a dashed line <b>156</b>) or a signal available at an input or an output of some subsequent component or circuit (not shown), including a component or circuit that is not within the same integrated circuit package as the microphone <b>101</b>. The analyzed signal may be an analog or a digital signal.</p>
<p id="p-0051" num="0050"><figref idref="DRAWINGS">FIG. 5</figref> contains a flow diagram summarizing operation of some embodiments of the present invention. At <b>501</b>, a signal from a microphone is analyzed to determine whether the signal meets a criterion. As noted, the analyzed signal may come directly from the microphone or from another portion of the circuit. As indicated in the examples <b>503</b>, the criterion may involve: whether the amplitude of the signal exceeds a predetermined or a dynamically determined threshold; whether clipping of the signal has already occurred (optionally, for a threshold amount of time); whether clipping is likely or imminent (for example, whether the amplitude is rapidly increasing or approaching a value at which clipping would occur); or some other criterion or combination of criteria (collectively herein referred to as a &#x201c;criterion&#x201d;).</p>
<p id="p-0052" num="0051">Various aspects of a signal may be considered in determining if the signal exceeds a threshold value. For example, instantaneous or average amplitude of the signal may be compared to a fixed or variable threshold value. Optionally or alternatively, the average may be a root mean square (RMS) value, an average of peak amplitudes of the signal envelope or any other suitable function. Criteria used in conventional automatic gain control (AGC) and other well-known systems for determining when and to what extent a signal should be attenuated, and when and to what extent the attenuation should be removed, may be used. Additional descriptions of criteria that may be used for determining if or when the signal should be attenuated, as well as additional description that may be relevant to other portions of the present invention, are described in U.S. Provisional Patent Application Nos. 61/186,056, titled &#x201c;High Level Capable Audio Amplification System&#x201d; filed Jun. 11, 2009 by Henrik Thomsen, et al.; 61/243,221; and 61/243,240, the entire contents of each of which is hereby incorporated by reference herein, for all purposes. If the criterion is not met, control returns to <b>501</b>, where the signal analysis and criterion determination are performed again.</p>
<p id="p-0053" num="0052">If the criterion is met, at <b>506</b> signals are generated to activate one or more switches, so as to connect a selected capacitance to the signal line from the microphone. The amount of capacitance selected to be connected to the signal line may depend on various factors, such as: the amplitude of the analyzed signal; the rate of change of the amplitude of the analyzed signal; the amount of capacitance (if any) recently connected to the signal line; the difference between the current amplitude of the analyzed signal and the amplitude at which the signal would be clipped (i.e., the amount of remaining &#x201c;headroom&#x201d;); or the length of time since the last change was made in the amount of capacitance connected to the signal line.</p>
<p id="p-0054" num="0053">Optionally, at <b>510</b>, the criterion may be adjusted. For example, once one or more switches have been activated to connect capacitance to the signal line, the criterion may be changed, such that the threshold that must be exceeded to trigger connecting additional capacitance may be reduced, for example, from about 75% to about 25% of the amplitude at which the onset of clipping would occur.</p>
<p id="p-0055" num="0054"><figref idref="DRAWINGS">FIG. 6</figref> is a schematic block diagram of a switch control circuit, according to one embodiment of the present invention. As noted, the switch control circuit analyzes a signal <b>143</b> from the MEMS microphone <b>101</b>, another microphone (not shown) or a signal <b>156</b> from the buffer or from another component or circuit. For simplicity of explanation, <figref idref="DRAWINGS">FIG. 6</figref> refers to the signal <b>143</b> from the MEMS microphone <b>101</b>. Also as noted, the switch control circuit generates a control signal <b>146</b> to control operation of the switch(es) <b>150</b>.</p>
<p id="p-0056" num="0055">The switch control circuit of <figref idref="DRAWINGS">FIG. 6</figref> includes a threshold detector <b>601</b>, a zero-crossing detector <b>603</b> and a switch driver circuit <b>606</b>. If the analyzed signal <b>143</b> exceeds a predetermined threshold amplitude, such as about 75% of the amplitude at which the onset of clipping would occur, the threshold detector <b>601</b> generates a trigger signal <b>610</b>. Optionally, the trigger signal <b>610</b> is not generated unless the criterion has been met for a threshold amount of time, such as on the order of 10 s or 100 s of milliseconds. In other embodiments, other criteria may be used to determine if and when the trigger signal <b>610</b> is generated.</p>
<p id="p-0057" num="0056">The trigger signal <b>610</b> from the threshold detector <b>601</b> triggers the zero-crossing detector <b>603</b>. The analyzed signal <b>143</b> is also provided to the zero-crossing detector <b>603</b>. Once triggered, the zero-crossing detector <b>603</b> generates a second trigger signal <b>613</b> when the analyzed signal <b>143</b> crosses its DC value.</p>
<p id="p-0058" num="0057">The second trigger signal <b>613</b> triggers the switch driver <b>606</b>. The threshold detector <b>601</b> also generates a magnitude signal <b>616</b> for indicating an amount by which the amplitude of the analyzed signal <b>143</b> exceeds the threshold value or another indication of the magnitude of the need to attenuate the signal. This magnitude signal <b>616</b> is provided to the switch driver <b>606</b>. Once triggered by the second trigger signal <b>613</b>, the switch driver <b>606</b> uses the magnitude signal <b>616</b> to select a combination of switch(es) <b>150</b> to activate, such as based on the factors described above, and the switch driver <b>606</b> generates a the control signal <b>146</b> to activate the selected switch(es) <b>150</b>.</p>
<p id="p-0059" num="0058">The switch(es) <b>150</b> connect(s) the capacitance <b>153</b> to the signal line <b>123</b>, thereby commencing attenuation of the signal <b>123</b>. The amount of attenuation depends on the amount of capacitance connected to the signal line <b>123</b>. Commencing the attenuation at a zero-crossing has been found to produce a more pleasing result and/or to cause fewer audible artifacts than connecting the capacitance <b>153</b> at other phases of the signal <b>123</b>.</p>
<p id="p-0060" num="0059">The switch control circuit may be implemented with analog circuits or combinatorial logic, by a processor (such as a digital signal processor (DSP)) executing instructions stored in a memory or by any other appropriate circuit or combination.</p>
<p id="p-0061" num="0060">Once the analyzed signal <b>143</b> no longer meets the criterion, the switch control circuit may remove some or all of the capacitance <b>153</b> that has been connected to the signal line <b>123</b> using the same or similar logic and/or circuits as described above for adding the capacitance <b>153</b> to the line <b>123</b>. The switch control circuit may introduce a delay before removing the capacitance <b>153</b> to avoid or reduce the likelihood of repeatedly cycling its operation. Furthermore, the same or a different criterion may be used to determine when, i.e., in response to what signal attributes, and to what extent to remove or reduce the capacitance. Thus, capacitance may be added and removed in equal or unequal steps and in response to the signal meeting symmetric or asymmetric criteria.</p>
<p id="p-0062" num="0061">Embodiments of the present invention may be used with various types of capacitor microphones, including MEMS microphones, electret condenser microphones (ECMs), etc.</p>
<p id="p-0063" num="0062">As noted in the discussion above, with respect to <figref idref="DRAWINGS">FIG. 1</figref> and Equation (2), the attenuation of the signal <b>123</b> depends on the ratio C<sub>MEMS</sub>/(C<sub>A</sub>+C<sub>MEMS</sub>). However, C<sub>MEMS </sub>and C<sub>A </sub>may be fabricated on different substrates, possibly using different fabrication techniques or different kinds of semiconductor materials. Thus, the values of C<sub>MEMS </sub>and C<sub>A </sub>may not track. That is, the value of C<sub>MEMS </sub>may vary independently of the value of C<sub>A</sub>. For example, C<sub>MEMS </sub>and C<sub>A </sub>may vary according to different processes used to manufacture the dies on which the MEMS microphone and C<sub>A </sub>reside. Consequently, the attenuation caused by a given capacitance <b>153</b> applied to the signal <b>123</b> may vary with manufacturing lot.</p>
<p id="p-0064" num="0063"><figref idref="DRAWINGS">FIG. 7</figref> is a schematic circuit diagram of another embodiment of the present invention, similar to the circuit of <figref idref="DRAWINGS">FIG. 1</figref>. An AC coupling capacitor <b>700</b> is connected in series between the MEMS microphone <b>101</b> and the attenuation capacitance <b>153</b>. Such an AC coupling capacitor can reduce the degree to which the attenuation depends on C<sub>MEMS</sub>. If C<sub>I </sub>represents the capacitance <b>700</b>, the signal <b>123</b> is attenuated by a factor given by equation (3).
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>(<i>C</i><sub>MEMS</sub>*C<sub>I</sub>)/(<i>C</i><sub>A</sub>*<i>C</i><sub>I</sub>+<i>C</i><sub>MEMS</sub>*<i>C</i><sub>A</sub>+<i>C</i><sub>MEMS</sub>*<i>C</i><sub>I</sub>)&#x2003;&#x2003;(3)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
Where C<sub>I</sub>&#x3c;&#x3c;C<sub>MEMS</sub>, the attenuation can be approximated by equation (4), which is essentially independent of C<sub>MEMS</sub>.
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>C</i><sub>I</sub>/(<i>C</i><sub>A</sub>+<i>C</i><sub>I</sub>)&#x2003;&#x2003;(4)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
Where C<sub>I</sub>&#x3e;&#x3e;C<sub>MEMS</sub>, the attenuation can be approximated by equation (5).
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>C</i><sub>MEMS</sub>/(<i>C</i><sub>A</sub>+<i>C</i><sub>MEMS</sub>)&#x2003;&#x2003;(5)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
Even where the capacitance of the MEMS microphone <b>101</b> cannot be totally ignored, the attenuation depends less on the value of C<sub>MEMS </sub>than it does in a circuit without an AC coupling capacitor <b>700</b>.
</p>
<p id="p-0065" num="0064">The AC coupling capacitor <b>700</b> can also reduce total harmonic distortion (THD) of the signal <b>123</b>, when the attenuation capacitance <b>153</b> is connected to the signal circuit. The THD depends on the parasitic load applied to the MEMS microphone <b>101</b>. Without an AC coupling capacitor <b>700</b>, the parasitic load is C<sub>A</sub>. A C<sub>A </sub>value that is several times the value of C<sub>MEMS </sub>can cause significant distortion.</p>
<p id="p-0066" num="0065">On the other hand, with the AC coupling capacitor <b>700</b> in the circuit, the parasitic load applied to the MEMS microphone <b>101</b> is C<sub>I </sub>in series with C<sub>A</sub>. If C<sub>I </sub>is approximately equal to C<sub>MEMS</sub>, and C<sub>A </sub>is approximately ten times the value of C<sub>MEMS</sub>, the series combination of C<sub>A </sub>and C<sub>I </sub>is approximately equal to C<sub>I</sub>. Since C<sub>I </sub>is approximately one-tenth the value of C<sub>A</sub>, the series circuit causes much less THD degradation than if C<sub>I </sub>were absent.</p>
<p id="p-0067" num="0066"><figref idref="DRAWINGS">FIG. 8</figref> is a schematic circuit diagram of another embodiment of the present invention, in which capacitances that provide selective attenuation of a signal are not individually switched into, or out of, the circuit. Instead, capacitors C<sub>1</sub>, C<sub>2</sub>, C<sub>3</sub>, etc. provide signals <b>800</b>, <b>803</b>, <b>806</b>, etc. with progressively greater attenuations. Each of the attenuated signals <b>800</b>, <b>803</b>, <b>806</b>, etc. is applied to a respective selectable differential input stage <b>810</b>, <b>813</b>, <b>816</b>, etc. of an amplifier. Respective outputs of the differential input stages <b>810</b>, <b>813</b>, <b>816</b>, etc. are connected together to create an intermediate output <b>820</b>, which is connected to a common output stage <b>823</b>. The output stage <b>823</b> and the selected differential input stage collectively form the amplifier, which provides a signal with a selected attenuation. Thus, each selectable input stage <b>810</b>, <b>813</b>, <b>816</b>, etc. and the output stage <b>823</b> form a respective selectable amplifier, although the output stage is common among all the selectable amplifiers. In some other embodiments, each selectable amplifier may have its own output stage and may, but need not, share one or more components with other selectable amplifiers.</p>
<p id="p-0068" num="0067">The differential input stages <b>810</b>, <b>813</b>, <b>816</b>, etc. and the output stage <b>823</b> are configured with feedback <b>826</b>, so the resulting amplifier has unity gain. DC bias circuits (not shown for simplicity) may be included, as necessary. Resistors <b>830</b> and <b>833</b> may, of course, be replaced by current mirrors.</p>
<p id="p-0069" num="0068">The amount of attenuation provided by the circuit depends on which differential input stage <b>810</b>, <b>813</b>, <b>816</b>, etc. is selected. The embodiment shown in <figref idref="DRAWINGS">FIG. 8</figref> may include eight attenuation capacitors C<sub>1</sub>, C<sub>2</sub>, C<sub>3</sub>, etc. and eight differential input stages <b>810</b>, <b>813</b>, <b>816</b>, etc. An attenuation selection signal <b>836</b> may be a three-bit binary encoded value attenuation select signal (similar to the control signal <b>146</b> discussed above, with respect to <figref idref="DRAWINGS">FIG. 1</figref>) to select one of differential input stages <b>810</b>, <b>813</b>, <b>816</b>, etc. and, therefore, one of the eight possible attenuations. The attenuation selection signal <b>836</b> may be generated based on the Output signal or a signal derived from the Output signal, similar to the way the control signal <b>146</b> is generated, as discussed above with respect to <figref idref="DRAWINGS">FIGS. 5 and 6</figref>. Selecting one of the differential input stages <b>810</b>, <b>813</b>, <b>816</b> involves enabling the selected stage's respective switch <b>840</b>, <b>843</b> or <b>846</b>, etc. Other numbers of attenuation capacitors and differential input stages may, of course, be used with appropriate attenuation selection signals.</p>
<p id="p-0070" num="0069">In general, C<sub>1</sub>&#x3c;C<sub>2</sub>&#x3c;C<sub>3</sub>, etc., and the attenuation of signal <b>800</b> is less than the attenuation of signal <b>803</b>, which is less than the attenuation of signal <b>806</b>, etc. However, as noted above, the actual attenuation depends on the relative values of C<sub>MEMS</sub>, C<sub>I </sub>(if included) and the one or more capacitors (C<sub>1</sub>, C<sub>2</sub>, C<sub>3</sub>, etc.) in series feeding a given differential input stage <b>810</b>, <b>813</b>, <b>816</b>, etc. As noted above, C<sub>I </sub>may be omitted. It should be noted that the attenuations associated with the lower numbered differential input stages depend on fewer of the capacitors C<sub>1</sub>, C<sub>2</sub>, C<sub>3</sub>, etc. (and specifically the lower numbered capacitors) than the higher numbered differential input stages. For example, assuming C<sub>1</sub>&#x3c;&#x3c;C<sub>2</sub>, the value of C<sub>2</sub>, C<sub>3</sub>, etc. have little impact on the attenuation of the first signal <b>800</b>. In addition, the smaller the value of C<sub>1</sub>, relative to the values of C<sub>I </sub>and C<sub>MEMS</sub>, the closer the ratio of the attenuation of the signal <b>800</b> to the attenuation of the signal <b>803</b> is to that shown in equation (6), and the more independent these attenuations are to the value of C<sub>MEMS</sub>.
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>C</i><sub>1</sub>/(<i>C</i><sub>2</sub>+<i>C</i><sub>1</sub>)&#x2003;&#x2003;(6)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0071" num="0070"><figref idref="DRAWINGS">FIG. 9</figref> is a schematic circuit diagram of another embodiment of the present invention. The circuit of <figref idref="DRAWINGS">FIG. 9</figref> is similar to the circuit of <figref idref="DRAWINGS">FIG. 8</figref>, except the signals <b>900</b>, <b>903</b>, <b>906</b>, etc. having progressively greater attenuations are provided by a set of capacitor pairs C<sub>1A</sub>, C<sub>1B</sub>, C<sub>2A</sub>, C<sub>2B</sub>, etc. Each capacitor pair, such as capacitors C<sub>1A </sub>and C<sub>1B</sub>, act as a signal divider. All the C<sub>XB </sub>capacitors may have identical values, and the C<sub>XA </sub>capacitors can have progressively smaller values. For example, the value of C<sub>2A </sub>may be ten times smaller than the value of C<sub>1A</sub>.</p>
<p id="p-0072" num="0071"><figref idref="DRAWINGS">FIG. 10</figref> is a schematic circuit diagram of yet another embodiment of the present invention. The circuit of <figref idref="DRAWINGS">FIG. 10</figref> is similar to the circuit of <figref idref="DRAWINGS">FIG. 8</figref>, except each selectable input stage <b>1010</b>, <b>1013</b>, <b>1016</b>, etc. includes only the non-inverting half of the differential circuit shown in <figref idref="DRAWINGS">FIG. 8</figref>. All the non-inverting selectable input states <b>1010</b>, <b>1013</b>, <b>1016</b>, etc. share a common inverting half <b>1020</b>.</p>
<p id="p-0073" num="0072">A switch control circuit has been described as including a processor controlled by instructions stored in a memory. The memory may be random access memory (RAM), read-only memory (ROM), flash memory or any other memory, or combination thereof, suitable for storing control software or other instructions and data. Some of the functions performed by the methods and apparatus for automatically attenuating a signal from a microphone in response to the signal meeting a criterion have been described with reference to flowcharts and/or block diagrams. Those skilled in the art should readily appreciate that functions, operations, decisions, etc. of all or a portion of each block, or a combination of blocks, of the flowcharts or block diagrams may be implemented as computer program instructions, software, hardware, firmware or combinations thereof. Those skilled in the art should also readily appreciate that instructions or programs defining the functions of an embodiment of the present invention may be delivered to a processor in many forms, including, but not limited to, information permanently stored on non-writable storage media (e.g. read-only memory devices within a computer, such as ROM, or devices readable by a computer I/O attachment, such as CD-ROM or DVD disks), information alterably stored on writable storage media (e.g. floppy disks, removable flash memory and hard drives) or information conveyed to a computer through communication media, including wired or wireless computer networks. In addition, while the invention may be embodied in software, the functions necessary to implement the invention may optionally or alternatively be embodied in part or in whole using firmware and/or hardware components, such as combinatorial logic, Application Specific Integrated Circuits (ASICs), Field-Programmable Gate Arrays (FPGAs) or other hardware or some combination of hardware, software and/or firmware components.</p>
<p id="p-0074" num="0073">While the invention is described through the above-described exemplary embodiments, it will be understood by those of ordinary skill in the art that modifications to, and variations of, the illustrated embodiments may be made without departing from the inventive concepts disclosed herein. For example, although some aspects of methods and apparatus have been described with reference to a flowchart, those skilled in the art should readily appreciate that functions, operations, decisions, etc. of all or a portion of each block, or a combination of blocks, of the flowchart may be combined, separated into separate operations or performed in other orders. Furthermore, disclosed aspects, or portions of these aspects, may be combined in ways not listed above. Accordingly, the invention should not be viewed as being limited to the disclosed embodiments.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-math idrefs="MATH-US-00001" nb-file="US08625809-20140107-M00001.NB">
<img id="EMI-M00001" he="6.01mm" wi="76.20mm" file="US08625809-20140107-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A microphone system comprising:
<claim-text>a semiconductor package;</claim-text>
<claim-text>MEMS microphone housed within said semiconductor package and configured to generate an electrical signal in response to an acoustic signal and send said electrical signal along a signal path;</claim-text>
<claim-text>a plurality of capacitors housed within said semiconductor package and coupled to said signal path and configured to produce a respective plurality of attenuated signals, each signal of said plurality of attenuated signals being attenuated a different amount;</claim-text>
<claim-text>a plurality of selectable amplifiers housed within said semiconductor package, each amplifier of said plurality of selectable amplifiers being coupled to a respective one of the plurality of attenuated signals;</claim-text>
<claim-text>a circuit housed within said semiconductor package and coupled to an output of the plurality of selectable amplifiers and configured to process said electrical signal; and</claim-text>
<claim-text>a selector housed within said semiconductor package and configured to select one amplifier of said plurality of selectable amplifiers, based on a selection signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. A microphone system according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said plurality of capacitors comprises a plurality of series-connected capacitors configured to produce a plurality of signal paths, wherein each signal path of said plurality of signal paths is configured to carry a signal attenuated by a different amount and each signal path of said plurality of signal paths is coupled to a different respective amplifier of said plurality of selectable amplifiers.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. A microphone system according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said plurality of capacitors comprises a plurality of parallel-connected capacitor pairs, said plurality of capacitor pairs configured to produce a plurality of signal paths, wherein each signal path of said plurality of signal paths is configured to carry a signal attenuated by a different amount and each signal path of said plurality of signal paths is coupled to a different respective amplifier of said plurality of selectable amplifiers.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. A microphone system according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising a control circuit configured to activate said selector after at least one of said signal and a signal derived from said signal meets a criterion.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. A microphone system according to <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein said control circuit is configured to activate said selector in timed relation to a zero crossing of at least one of said signal and said signal derived from said signal.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. A microphone system according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising a second capacitance connected in series between said MEMS microphone and said plurality of selectable amplifiers. </claim-text>
</claim>
</claims>
</us-patent-grant>
