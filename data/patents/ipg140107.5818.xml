<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08626926-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08626926</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12263225</doc-number>
<date>20081031</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<us-term-of-grant>
<us-term-extension>483</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>15</main-group>
<subgroup>16</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>709227</main-classification>
<further-classification>455420</further-classification>
<further-classification>455418</further-classification>
<further-classification>4554561</further-classification>
</classification-national>
<invention-title id="d2e53">Method and apparatus for performing session info query for user plane location</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>8086247</doc-number>
<kind>B2</kind>
<name>Kraufvelin et al.</name>
<date>20111200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>4554561</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>8122090</doc-number>
<kind>B2</kind>
<name>Thomas et al.</name>
<date>20120200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709206</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>8521187</doc-number>
<kind>B2</kind>
<name>Hefner et al.</name>
<date>20130800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>4554563</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2003/0061319</doc-number>
<kind>A1</kind>
<name>Manzardo</name>
<date>20030300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2006/0258371</doc-number>
<kind>A1</kind>
<name>Krishnamurthi et al.</name>
<date>20061100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>4554561</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2007/0082682</doc-number>
<kind>A1</kind>
<name>Kim et al.</name>
<date>20070400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>4554561</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2007/0149213</doc-number>
<kind>A1</kind>
<name>Lamba et al.</name>
<date>20070600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>4554561</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2007/0155400</doc-number>
<kind>A1</kind>
<name>Madsen</name>
<date>20070700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>4554561</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2007/0182547</doc-number>
<kind>A1</kind>
<name>Wachter et al.</name>
<date>20070800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>34053913</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>2008/0113671</doc-number>
<kind>A1</kind>
<name>Ghozati et al.</name>
<date>20080500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>4554561</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>2009/0036142</doc-number>
<kind>A1</kind>
<name>Yan</name>
<date>20090200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>4554561</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>2009/0083430</doc-number>
<kind>A1</kind>
<name>Edge et al.</name>
<date>20090300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709228</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>2009/0132579</doc-number>
<kind>A1</kind>
<name>Kwang</name>
<date>20090500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707102</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>2009/0181698</doc-number>
<kind>A1</kind>
<name>Farmer et al.</name>
<date>20090700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>4554563</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>2010/0062752</doc-number>
<kind>A1</kind>
<name>Shim</name>
<date>20100300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455418</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>2010/0217879</doc-number>
<kind>A1</kind>
<name>Weiner</name>
<date>20100800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709228</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>2010/0228845</doc-number>
<kind>A1</kind>
<name>Choi</name>
<date>20100900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709223</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00018">
<document-id>
<country>CN</country>
<doc-number>1859797</doc-number>
<kind>A</kind>
<date>20061100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00019">
<document-id>
<country>CN</country>
<doc-number>101014182</doc-number>
<kind>A</kind>
<date>20070800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00020">
<document-id>
<country>CN</country>
<doc-number>101087482</doc-number>
<kind>A</kind>
<date>20071200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00021">
<document-id>
<country>CN</country>
<doc-number>101120522</doc-number>
<kind>A</kind>
<date>20080200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00022">
<document-id>
<country>JP</country>
<doc-number>2001521350</doc-number>
<kind>A</kind>
<date>20011100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00023">
<document-id>
<country>JP</country>
<doc-number>2002512394</doc-number>
<kind>A</kind>
<date>20020400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00024">
<document-id>
<country>JP</country>
<doc-number>2007124594</doc-number>
<kind>A</kind>
<date>20070500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00025">
<document-id>
<country>JP</country>
<doc-number>2008546343</doc-number>
<kind>A</kind>
<date>20081200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00026">
<document-id>
<country>RU</country>
<doc-number>2005130765</doc-number>
<date>20060500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00027">
<document-id>
<country>WO</country>
<doc-number>9954803</doc-number>
<kind>A2</kind>
<date>19991000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00028">
<document-id>
<country>WO</country>
<doc-number>0237267</doc-number>
<date>20020500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00029">
<document-id>
<country>WO</country>
<doc-number>2004080096</doc-number>
<date>20040900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00030">
<document-id>
<country>WO</country>
<doc-number>2007086702</doc-number>
<kind>A1</kind>
<date>20070800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00031">
<othercit>&#x201c;UserPlane Location Protocol, Draft Version 2.0&#x201d; Open Mobile Alliance Ltd., Feb. 1, 2008, XP002524884, Retrieved from the Internet: URL:http://member.openmobilealliance.org/ftp/Public<sub>&#x2014;</sub>documents/LOC/2008/OMA-LOC-2008-0032-INP<sub>&#x2014;</sub>SUPL<sub>&#x2014;</sub>2.0<sub>&#x2014;</sub>TS<sub>&#x2014;</sub>ULP<sub>&#x2014;</sub>update.zip [retrieved on May 23, 2011], pp. 1-329.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00032">
<othercit>International Search Report, PCT/US2009/034786, International Search Authority, European Patent Office, Jun. 2, 2009.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00033">
<othercit>Written Opinion, PCT/US2009/034786, International Search Authority, European Patent Office, Jun. 2, 2009.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00034">
<othercit>International Preliminary Examination Report, PCT/US2009/034786, International Search Authority, European Patent Office, Aug. 31, 2010.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00035">
<othercit>Taiwan Search Report&#x2014;TW098106232&#x2014;TIPO&#x2014;Apr. 24, 2012.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00036">
<othercit>Taiwan Search Report&#x2014;TW098106232&#x2014;TIPO&#x2014;Dec. 11, 2012.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>41</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>709201-203</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709223-229</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709200</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709249-250</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>4554142</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>455421</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>455440</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370236</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370260-270</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>701207</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>701213</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>726  1-  4</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>726 11</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>726  8</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>726 22</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>726 26- 27</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>8</number-of-drawing-sheets>
<number-of-figures>10</number-of-figures>
</figures>
<us-related-documents>
<us-provisional-application>
<document-id>
<country>US</country>
<doc-number>61031622</doc-number>
<date>20080226</date>
</document-id>
</us-provisional-application>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20090216846</doc-number>
<kind>A1</kind>
<date>20090827</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Burroughs</last-name>
<first-name>Kirk Allan</first-name>
<address>
<city>Alamo</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Edge</last-name>
<first-name>Stephen W.</first-name>
<address>
<city>Escondido</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Lin</last-name>
<first-name>Ie-Hong</first-name>
<address>
<city>Fremont</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="004" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Wachter</last-name>
<first-name>Andreas K.</first-name>
<address>
<city>San Francisco</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Burroughs</last-name>
<first-name>Kirk Allan</first-name>
<address>
<city>Alamo</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Edge</last-name>
<first-name>Stephen W.</first-name>
<address>
<city>Escondido</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Lin</last-name>
<first-name>Ie-Hong</first-name>
<address>
<city>Fremont</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="004" designation="us-only">
<addressbook>
<last-name>Wachter</last-name>
<first-name>Andreas K.</first-name>
<address>
<city>San Francisco</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<last-name>Gum</last-name>
<first-name>Arnold J.</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>QUALCOMM Incorporated</orgname>
<role>02</role>
<address>
<city>San Diego</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Bengzon</last-name>
<first-name>Greg C</first-name>
<department>2444</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">Techniques for querying for information on location sessions in a user plane location architecture are described. In an aspect, a location server may send a query message to a terminal to query for information on active location sessions, e.g., when at least one location session for periodic triggered service or area event triggered service is deemed to be active. The terminal may return a response message containing a list of session identifiers (IDs) for the active location sessions, parameters for the active location sessions, capabilities of the terminal, etc. The location server may compare the information received from the terminal and information stored at the location server. The location server may terminate each location session deemed to be active at only the terminal or only the location server. The location server may restart or terminate each location session having inconsistent parameters at the terminal and the location server.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="174.84mm" wi="95.25mm" file="US08626926-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="250.70mm" wi="138.94mm" orientation="landscape" file="US08626926-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="263.06mm" wi="177.72mm" orientation="landscape" file="US08626926-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="98.81mm" wi="179.24mm" file="US08626926-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="257.05mm" wi="183.13mm" file="US08626926-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="254.34mm" wi="136.31mm" orientation="landscape" file="US08626926-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="194.99mm" wi="189.57mm" file="US08626926-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="162.22mm" wi="190.92mm" file="US08626926-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="195.41mm" wi="129.71mm" orientation="landscape" file="US08626926-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">CLAIM OF PRIORITY UNDER 35 U.S.C. &#xa7;119</heading>
<p id="p-0002" num="0001">The present Application for Patent claims priority to Provisional U.S. Application Ser. No. 61/031,622, entitled &#x201c;SESSION AUDITING FOR SECURE USER PLANE LOCATION (SUPL),&#x201d; filed Feb. 26, 2008, assigned to the assignee hereof, and expressly incorporated herein by reference.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">BACKGROUND</heading>
<p id="p-0003" num="0002">I. Field</p>
<p id="p-0004" num="0003">The present disclosure relates generally to communication, and more specifically to techniques for supporting location services.</p>
<p id="p-0005" num="0004">II. Background</p>
<p id="p-0006" num="0005">It is often desirable, and sometimes necessary, to know the location of a terminal. The terms &#x201c;location&#x201d; and &#x201c;position&#x201d; are synonymous and are used interchangeably herein. For example, a user may utilize the terminal to browse through a website and may click on location sensitive content. The location of the terminal may then be determined and used to provide appropriate content to the user. As another example, the user may place an emergency call using the terminal. The location of the terminal may then be determined and used to send emergency assistance to the user. There are many other scenarios in which knowledge of the location of the terminal is useful or necessary.</p>
<p id="p-0007" num="0006">A terminal may exchange messages with a location server to establish a location session for a location service. If the session establishment is successful, then the terminal may communicate with the location server for the location service. The duration of the location session may be dependent on the type of location service being obtained and possibly other factors. It may be desirable to maintain the location session as long as it is valid at both the terminal and the location server and to terminate the location session otherwise.</p>
<heading id="h-0003" level="1">SUMMARY</heading>
<p id="p-0008" num="0007">Techniques for querying for information on location sessions in a user plane location architecture such as Secure User Plane Location (SUPL) are described herein. In an aspect, a location server may perform a query for session information (or a session info query) to request a terminal to return information regarding all active location sessions that are currently in progress between the terminal and the location server. The session info query may be used to identify (i) location sessions that are active at only the location server or only the terminal and/or (ii) location sessions in which parameters at the location server are inconsistent with parameters at the terminal. The location server may perform the session info query periodically and/or whenever it suspects possible inconsistent session context between the location server and the terminal. The inconsistent session context may result from an accidental power down of the terminal, a failure at the terminal or the location server, a prolonged inability to communicate between the terminal and location server, etc. The techniques may be used to detect and address inconsistent session context and may improve location service and performance.</p>
<p id="p-0009" num="0008">In one design, a location server may send a query message to a terminal to query for information on active location sessions, e.g., when at least one location session for periodic triggered service or area event triggered service is active in the location server. The terminal may return a response message comprising the information on the active location sessions. This information may include a list of session identifiers (IDs) for the active location sessions, parameters for the active location sessions, etc. The terminal may also return its capabilities and/or other information to the location server. The location server may compare the information received from the terminal and information stored at the location server. The location server may terminate each location session deemed to be active at only the terminal or only the location server. The location server may restart or terminate each location session in which parameters at the terminal are inconsistent with parameters at the location server. The location server may also perform other corrective actions if the received information does not match the stored information.</p>
<p id="p-0010" num="0009">In another aspect, a terminal may send an update message to a location server to provide the location server with information on active location sessions and/or information on capabilities of the terminal. In one design, the terminal may send the update message if no messages have been exchanged with the location server for an active location session within a predetermined time period. In another design, the terminal may send the update message if the capabilities of the terminal have changed since last reported to the location server.</p>
<p id="p-0011" num="0010">Various aspects and features of the disclosure are described in further detail below.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 1</figref> shows an example deployment supporting location services.</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 2</figref> shows use of session info query to obtain information on active location sessions.</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 3</figref> shows a call flow for a session info query session.</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 4</figref> shows a call flow for network-initiated area event triggered service.</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 5</figref> shows a message for sending information on active location sessions.</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 6</figref> shows a process for supporting location services by a location server.</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIGS. 7 and 8</figref> show two processes for supporting location services by a terminal.</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 9</figref> shows another process for supporting location services by the location server.</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 10</figref> shows a block diagram of the terminal and the location server.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0021" num="0020">Techniques for performing session info query in user plane location architectures/solutions are described herein. A user plane location architecture is a location architecture that sends messages for location services via a user plane. User plane location architectures are different from control plane location architectures, which send messages for location services via a control plane. A user plane is a mechanism for carrying signaling for higher-layer applications and employing a user-plane bearer, which is typically implemented with protocols such as User Datagram Protocol (UDP), Transmission Control Protocol (TCP), and Internet Protocol (IP). A control plane is a mechanism for carrying signaling for higher-layer applications and is typically implemented with network-specific protocols, interfaces, and signaling messages. Messages supporting location services are carried as part of signaling in a control plane architecture and as part of data (from a network perspective) in a user plane architecture. The content of the messages may, however, be the same or similar in both user plane and control plane location architectures.</p>
<p id="p-0022" num="0021">The techniques described herein may be used for various user plane location architectures such as SUPL from Open Mobile Alliance (OMA) and X.S0024 from an organization named &#x201c;3rd Generation Partnership Project 2&#x201d; (3GPP2). For clarity, certain aspects of the techniques are described below for SUPL, and SUPL terminology is used in much of the description below.</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 1</figref> shows an example deployment supporting location services. A terminal <b>120</b> may communicate with a wireless network <b>110</b> and/or a wireline network <b>112</b> at any given moment to obtain communication services. Terminal <b>120</b> may be stationary or mobile and may also be referred to as a mobile station (MS), a user equipment (UE), an access terminal (AT), a subscriber station, a station, etc. Terminal <b>120</b> may be a cellular phone, a personal digital assistant (PDA), a handheld device, a wireless device, a laptop computer, a wireless modem, a cordless phone, a telemetry device, a tracking device, etc. Terminal <b>120</b> may be referred to as a SUPL Enabled Terminal (SET) in SUPL. The terms &#x201c;terminal&#x201d; and &#x201c;SET&#x201d; are used interchangeably herein.</p>
<p id="p-0024" num="0023">Wireless network <b>110</b> may be a wireless wide area network (WWAN), a wireless metropolitan area network (WMAN), a wireless local area network (WLAN), etc. The terms &#x201c;network&#x201d; and &#x201c;system&#x201d; are often used interchangeably. A WWAN may be a Code Division Multiple Access (CDMA) network, a Time Division Multiple Access (TDMA) network, a Frequency Division Multiple Access (FDMA) network, an Orthogonal FDMA (OFDMA) network, a Single-Carrier FDMA (SC-FDMA) network, etc. A CDMA network may implement a radio technology such as Wideband CDMA (WCDMA), cdma2000, etc. cdma2000 covers IS-2000, IS-95, and IS-856 standards. A TDMA network may implement a radio technology such as Global System for Mobile Communications (GSM). An OFDMA network may implement a radio technology such as Long Term Evolution (LTE), Ultra Mobile Broadband (UMB), Flash-OFDM&#xa9;, etc. WCDMA, GSM and LTE are described in documents from an organization named &#x201c;3rd Generation Partnership Project&#x201d; (3GPP). CDMA and UMB are described in documents from 3GPP2. 3GPP and 3GPP2 documents are publicly available. A WMAN may implement a radio technology such as IEEE 802.16, which is commonly referred to as WiMAX. A WLAN may implement a radio technology such as 802.11 (which is commonly referred to as Wi-Fi), Hiperlan, etc. Wireline network <b>112</b> may be a cable network, a digital subscriber line (DSL) network, the Internet, etc. Wireless network <b>110</b> may or may not be coupled to wireline network <b>112</b>.</p>
<p id="p-0025" num="0024">SET <b>120</b> may receive and measure signals from satellites <b>150</b> to obtain pseudo-range measurements for the satellites. Satellites <b>150</b> may be part of the United States Global Positioning System (GPS), the European Galileo system, the Russian GLONASS system, or some other satellite positioning system (SPS) or global navigation satellite system (GNSS). The pseudo-range measurements and the known locations of satellites <b>150</b> may be used to derive a position estimate for SET <b>120</b>. A position estimate may also be referred to as a location estimate, a position fix, etc. SET <b>120</b> may also receive and measure signals from base stations within wireless network <b>110</b> to obtain timing and/or signal strength measurements for the base stations. The timing and/or signal strength measurements and the known locations of the base stations may be used to derive a position estimate for SET <b>120</b>. In general, a position estimate may be derived based on measurements for satellites and/or base stations and using one or a combination of positioning methods.</p>
<p id="p-0026" num="0025">A SUPL Location Platform (SLP) <b>130</b> may communicate with SET <b>120</b> to support location services for SET <b>120</b>. Location services may include any services based on or related to location information. Location services may include positioning, which is a process to determine a geographic or civil position estimate for a SET. Positioning may provide (i) latitude, longitude and altitude coordinates and an uncertainty for a geographic position estimate or (ii) a street address for a civil position estimate. The communication between SLP <b>130</b> and SET <b>120</b> may be via wireless network <b>110</b> and/or wireline network <b>112</b>. SLP <b>130</b> may be separate from networks <b>110</b> and <b>112</b> or may be part of network <b>110</b> or <b>112</b>. SLP <b>130</b> may be a Home SLP (H-SLP) with which SET <b>120</b> has a service subscription, a Visited SLP (V-SLP) currently serving SET <b>120</b>, or an Emergency SLP (E-SLP) serving SET <b>120</b> for emergency services.</p>
<p id="p-0027" num="0026">SLP <b>130</b> may include a SUPL Location Center (SLC) <b>132</b> and a SUPL Positioning Center (SPC) <b>134</b>. SLC <b>132</b> may support location services, coordinate the operation of SUPL, and interact with SETs over user plane bearer. SLC <b>132</b> may perform functions for privacy, initiation, security, roaming support, charging/billing, service management, location calculation, etc. SPC <b>134</b> may support positioning for SETs and delivery of assistance data to the SETs and may also be responsible for messages and procedures used for location calculation. SPC <b>134</b> may perform functions for security, assistance data delivery, reference retrieval, location calculation, etc.</p>
<p id="p-0028" num="0027">A SUPL agent <b>140</b> may communicate (e.g., directly or via one or more networks) with SLP <b>130</b> to obtain location information for SET <b>120</b>. A SUPL agent is a service access point or a location client that accesses network resources to obtain location information. Location information may comprise a position estimate and/or any information related to location. SET <b>120</b> may also have a SUPL agent that is resident within the SET. SET <b>120</b>, SLP <b>130</b>, and SUPL agent <b>140</b> may each support any SUPL version. SUPL Version 2.0 (SUPL 2.0) is described in OMA-AD-SUPL-V2, entitled &#x201c;Secure User Plane Location Architecture,&#x201d; and in OMA-TS-ULP-V2, entitled &#x201c;UserPlane Location Protocol.&#x201d; These SUPL documents are publicly available from OMA.</p>
<p id="p-0029" num="0028">SET <b>120</b> and SLP <b>130</b> may support various location services. Table 1 lists some location services that may be supported by SET <b>120</b> and SLP <b>130</b> and provides a short description of each location service. Emergency service may be based on immediate service or some other location service. SET <b>120</b> and SLP <b>130</b> may also support other location services not listed in Table 1.</p>
<p id="p-0030" num="0029">
<tables id="TABLE-US-00001" num="00001">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="1" colwidth="63pt" align="left"/>
<colspec colname="2" colwidth="154pt" align="left"/>
<thead>
<row>
<entry namest="1" nameend="2" rowsep="1">TABLE 1</entry>
</row>
<row>
<entry namest="1" nameend="2" align="center" rowsep="1"/>
</row>
<row>
<entry>Location Service</entry>
<entry>Description</entry>
</row>
<row>
<entry namest="1" nameend="2" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry>Immediate</entry>
<entry>Location of a SET is immediately determined and</entry>
</row>
<row>
<entry/>
<entry>provided to a SUPL agent.</entry>
</row>
<row>
<entry>Periodic trigger</entry>
<entry>Location of a SET is periodically determined and</entry>
</row>
<row>
<entry/>
<entry>provided to a SUPL agent.</entry>
</row>
<row>
<entry>Area event trigger</entry>
<entry>Location of a SET is provided to a SUPL agent</entry>
</row>
<row>
<entry/>
<entry>when triggered by an area event, e.g., when the SET</entry>
</row>
<row>
<entry/>
<entry>is inside or outside a target area or enters</entry>
</row>
<row>
<entry/>
<entry>or leaves the target area.</entry>
</row>
<row>
<entry namest="1" nameend="2" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0031" num="0030">SET <b>120</b> may establish a location session with SLP <b>130</b> for a location service. A location session is a session for location service and may also be referred to as a SUPL session. The location session may be assigned a unique session ID, which may be used by both SET <b>120</b> and SLP <b>130</b> to identify the location session. The location session may persist for an extended period of time, e.g., a few hours, days, or even weeks. The location session may be for (i) periodic triggered service in which SET <b>120</b> periodically obtains and reports its location to SLP <b>130</b> or (ii) area event triggered service in which SET <b>120</b> reports its location to SLP <b>130</b> when certain criteria occur, such as SET <b>120</b> entering or leaving a defined geographic area. For location reporting based on entering or leaving a geographic area (or based on any other defined but unpredictable event), SLP <b>130</b> may receive location information from SET <b>120</b> at unpredictable times, if at all. In addition, if communication can be lost temporarily between SET <b>120</b> and SLP <b>130</b>, then SLP <b>130</b> may receive location information from SET <b>120</b> at unpredictable times, if at all, for both periodic and triggered location services.</p>
<p id="p-0032" num="0031">During a location session, SET <b>120</b> may somehow lose information regarding the location session, e.g., due to accidental powering off by a user, or due to an inability by SET <b>120</b> to communicate with SLP <b>130</b>. SLP <b>130</b> may not become aware of this, possibly for a long time, due to an expectation by SLP <b>130</b> of possible long delay between each SET communication. The long delay may be caused by a long time interval between reporting events for periodic triggered service, non-occurrence of reporting criteria for area event triggered service, lack of communication access (e.g., lack of radio coverage) for SET <b>120</b>, etc. In any case, the loss of session information by SET <b>120</b> may lead to improper support of a triggered service since location information for SET <b>120</b> will no longer be provided to SLP <b>130</b> (or to a requesting SUPL agent) when a periodic trigger or an area event trigger actually occurs.</p>
<p id="p-0033" num="0032">SLP <b>130</b> may also lose information regarding location sessions that are currently in progress at SLP <b>130</b>, e.g., due a hardware or software failure, a restart procedure, scheduled maintenance, a system upgrade etc. In any case, session context between SLP <b>130</b> and SET <b>120</b> may be inconsistent. SLP <b>130</b> may consider a particular location session to be active while SET <b>120</b> may not, or vice versa.</p>
<p id="p-0034" num="0033">In an aspect, SLP <b>130</b> may perform session info query when a location session of an extended duration may still be in progress with SET <b>120</b>. For the session info query, SLP <b>130</b> may request SET <b>120</b> to return information regarding all active location sessions between SET <b>120</b> and SLP <b>130</b> known to SET <b>120</b>. An active location session is a location session that is deemed to be in progress or active by at least one entity, e.g., an SLP and/or a SET. An active location session may also be referred to as an active SUPL session, a pending location session, etc. SLP <b>130</b> may compare the information received from SET <b>120</b> with information stored at SLP <b>130</b> and may be able to determine whether SLP <b>130</b> and SET <b>120</b> are in synchronization regarding the active location sessions.</p>
<p id="p-0035" num="0034">In general, SET <b>120</b> may have any number of active location sessions with SLP <b>130</b> at any given moment. The active location sessions may be for one or more types of location services. For example, SET <b>120</b> may have zero or more periodic triggered session, zero or more area event triggered sessions, etc. A periodic triggered session is a location session for periodic triggered service, and an area event triggered session is a location session for area event triggered service.</p>
<p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. 2</figref> shows use of session info query to obtain information on active location sessions. In the following description, location session #x refers to a location session with a session ID of x. In the example shown in <figref idref="DRAWINGS">FIG. 2</figref>, SET <b>120</b> or SLP <b>130</b> may start location session #<b>1</b> at time T<sub>1</sub>. At a later time T<sub>2</sub>, SET <b>120</b> or SLP <b>130</b> may start location session #<b>2</b>. At time T<sub>3</sub>, SLP <b>130</b> may perform session info query to obtain information on the active location sessions for SET <b>120</b>. SET <b>120</b> may respond with information indicating that location sessions #<b>1</b> and #<b>2</b> are active. At time T<sub>4</sub>, SET <b>120</b> or SLP <b>130</b> may start location session #<b>3</b>. At time T<sub>5</sub>, SLP <b>130</b> may perform session info query to obtain information on the active location sessions for SET <b>120</b>. SET <b>120</b> may respond with information indicating that location sessions #<b>1</b>, #<b>2</b> and #<b>3</b> are active.</p>
<p id="p-0037" num="0036">At time T<sub>6</sub>, location session #<b>2</b> may be terminated by SET <b>120</b> or SLP <b>130</b>. At time T<sub>7</sub>, location session #<b>3</b> may be terminated by SET <b>120</b> or SLP <b>130</b>. At time T<sub>8</sub>, SLP <b>130</b> may perform session info query to obtain information on the active location sessions for SET <b>120</b>. SET <b>120</b> may respond with information indicating that only location session #<b>1</b> is active. At time T<sub>9</sub>, location session #<b>1</b> may be terminated by SET <b>120</b> or SLP <b>130</b>.</p>
<p id="p-0038" num="0037">In general, SLP <b>130</b> may perform session info query at any time to obtain information on the active location sessions for SET <b>120</b>. Each session info query may be performed via a session that may be initiated by SLP <b>130</b> with a query message and terminated by SET <b>120</b> with a response message containing information on the active location sessions.</p>
<p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. 3</figref> shows a design of a call flow <b>300</b> for a &#x201c;query for session info&#x201d; session (or simply, a session info query session) in SUPL. Call flow <b>300</b> may enable SLP <b>130</b> to query SET <b>120</b> for information on active location sessions. SLP <b>130</b> may initiate a session info query session by sending a SUPL INIT message to SET <b>120</b> (step A). The SUPL INIT message may include a session ID (session-id) for the session info query session, a positioning method (posmethod), and an SLP mode. The positioning method parameter normally indicates an intended positioning method for a location session. In one design, the session info query session may be indicated by setting the positioning method parameter to a predefined value of &#x201c;sessioninfoquery&#x201d;. SLP <b>130</b> may compute and store a hash of the SUPL INIT message before sending the message to SET <b>120</b>.</p>
<p id="p-0040" num="0039">SET <b>120</b> may receive the SUPL INIT message from SLP <b>130</b> and may analyze the received message. SET <b>120</b> may take no further actions if the message is found to be non-authentic. Otherwise, SET <b>120</b> may perform a data connection setup procedure, attach itself to a packet data network if SET <b>120</b> is not already attached, and establish a secure connection to SLP <b>130</b> (step B). SET <b>120</b> may then return a SUPL REPORT message to SLP <b>130</b> (step C). The SUPL REPORT message may include a session ID for the session info query session, a list of session IDs (sessionlist) of all currently active location sessions between SET <b>120</b> and SLP <b>130</b>, a hash of the received SUPL INIT message (ver), etc. SET <b>120</b> may also send its capabilities in the SUPL REPORT message (not shown in <figref idref="DRAWINGS">FIG. 3</figref>). SET <b>120</b> may release all resources related to the session info query session after sending the SUPL REPORT message.</p>
<p id="p-0041" num="0040">SLP <b>130</b> may receive the SUPL REPORT message from SET <b>120</b> and may obtain the list of session IDs for the active location sessions known to SET <b>120</b>. SLP <b>130</b> may then update its internal session ID context and identify &#x201c;half open&#x201d; location sessions based on the information received from SET <b>120</b>. A half open location session is a location session that is considered active by only one entity and/or has parameters at the location server that are inconsistent with parameters at the SET. SLP <b>130</b> may decide to re-establish or close half open location sessions, e.g., re-establish location sessions which SLP <b>130</b> considered active but which SET <b>120</b> did not, or close location sessions that SET <b>120</b> considered active but which SLP <b>130</b> did not. If the SUPL REPORT message includes the SET capabilities, then SLP <b>130</b> may update any records maintained by SLP <b>130</b> for the SET capabilities.</p>
<p id="p-0042" num="0041">SLP <b>130</b> may start a timer ST<b>6</b> upon sending the SUPL INIT message in step A. This timer may be set to a suitable value, e.g., 10 seconds or some other duration. SLP <b>130</b> may clear resources at the SLP for the session info query session if a SUPL REPORT message is not received from SET <b>120</b> when the timer expires. In one design, SLP <b>130</b> may also assume that SET <b>120</b> is down (e.g., powered off or without communication access) if a SUPL REPORT message is not received prior to expiration of the timer and may also clear resources for location sessions that SLP <b>130</b> considered active for SET <b>120</b>. In another design, SLP <b>130</b> may attempt sending the SUPL INIT message several times before deciding that SET <b>120</b> is down. SLP <b>130</b> may also perform other actions if a SUPL REPORT message is not received prior to expiration of the timer.</p>
<p id="p-0043" num="0042">In the design shown in <figref idref="DRAWINGS">FIG. 3</figref>, a SUPL INIT message with the positioning method parameter set to &#x201c;sessioninfoquery&#x201d; is used as a query message to request for information on active location sessions. A SUPL REPORT message is used as a response message carrying the information on the active location sessions. Other SUPL messages may also be used for the query message and the response message.</p>
<p id="p-0044" num="0043">In general, SET <b>120</b> may return any pertinent information in a response message. In one design, SET <b>120</b> may return only a list of session IDs for all active location sessions. In another design, SET <b>120</b> may return additional information regarding each active location session such as the type of location session (e.g., periodic triggered session or area event triggered session), session-specific parameters, the SET capabilities, etc. The session-specific parameters may comprise the overall duration and the periodic interval for a periodic triggered session, the target geographic area(s) and event trigger types for an area event triggered session, etc.</p>
<p id="p-0045" num="0044">For each session info query, SLP <b>130</b> may compare the information received from SET <b>120</b> with the information stored at SLP <b>130</b>. If the received information is consistent with the stored information, then SLP <b>130</b> may assume that there is synchronization between itself and SET <b>120</b> regarding the active location sessions. If the received information is inconsistent with the stored information, then SLP <b>130</b> may perform corrective actions. The actions to be taken by SLP <b>130</b> may be dependent on the type of information received from SET <b>120</b>. In one design, SET <b>120</b> may return only a list of session IDs for the active location sessions. In this case, SLP <b>130</b> may verify if SET <b>120</b> recognizes the same location sessions as SLP <b>130</b> and may assume that the session parameters are correct for each location session that SLP <b>120</b> and SET <b>130</b> both recognize. If one entity (e.g., SET <b>120</b> or SLP <b>130</b>) records a location session that the other entity does not have, then SLP <b>130</b> may terminate the location session, e.g., by informing SET <b>120</b> if the SET indicated that the location session is active. In another design, SET <b>120</b> may return a list of session IDs as well as session-specific parameters for the active location sessions. In this case, if certain parameters for a given location session are not in agreement at SET <b>120</b> and SLP <b>130</b>, then SLP <b>130</b> may restart the location session with SET <b>120</b> using the correct parameters.</p>
<p id="p-0046" num="0045">SLP <b>130</b> may determine whether to perform session info query and when to perform session info query based on various factors such as the location service types for the active location sessions. In one design, SLP <b>130</b> may perform session info query if location information is not received from SET <b>120</b> within an expected reporting interval for a periodic triggered session. In one design, SLP <b>130</b> may periodically perform session info query when an area event triggered session is active. SLP <b>130</b> may also perform session info query whenever it suspects that SET <b>120</b> or SLP <b>130</b> might have lost session information. For example, SLP <b>130</b> may suspect that SLP <b>130</b> has lost location information if it receives a SUPL message from SET <b>120</b> for a SUPL session unknown to SLP <b>130</b>. SLP <b>130</b> may also perform session info query for regular maintenance to clear old location sessions that may no longer be valid.</p>
<p id="p-0047" num="0046">Session info query may be performed whenever SLP <b>130</b> suspects that one or more active location sessions may be half open. Session info query may be especially useful when an area event triggered session is in progress since (i) the session may be active for an extended period of time and (ii) SET <b>120</b> may send location information in an unpredictable manner, which may make it more difficult to detect error conditions.</p>
<p id="p-0048" num="0047"><figref idref="DRAWINGS">FIG. 4</figref> shows a design of a call flow <b>400</b> for network-initiated area event triggered service. SUPL agent <b>140</b> may desire location information for SET <b>120</b> and may send a Mobile Location Protocol (MLP) Triggered Location Reporting Request (TLRR) message to SLP <b>130</b> (step A). SLP <b>130</b> may authenticate and authorize SUPL agent <b>140</b> for the requested location information. SLP <b>130</b> may then obtain routing information for SET <b>120</b> (step B). SLP <b>130</b> may send a SUPL INIT message to initiate an area event triggered session with SET <b>120</b> (step C). The SUPL INIT message may include a session ID for the area event triggered session (session-id), a trigger type indicator (trigger_type) that indicates area event trigger, an intended positioning method (posmethod), an SLP mode, etc.</p>
<p id="p-0049" num="0048">SET <b>120</b> may receive the SUPL INIT message, perform a data connection setup procedure, attach itself to a packet data network, and establish a secure connection to SLP <b>130</b> (step D). SET <b>120</b> may then send a SUPL TRIGGERED START message to start the area event triggered session (step E). The SUPL TRIGGERED START message may include the session-id, a location-id (lid) identifying the current serving cell of SET <b>120</b>, the SET capabilities, etc.</p>
<p id="p-0050" num="0049">SLP <b>130</b> may receive the SUPL TRIGGERED START message from SET <b>120</b> and may store the SET capabilities for future use. SLP <b>130</b> may return to SET <b>120</b> a SUPL TRIGGERED RESPONSE message containing the session-id, the selected positioning method, area event parameters (trigger_params), etc. (step F). SLP <b>130</b> may also send an MLP Triggered Location Reporting Answer (TLRA) message to SUPL agent <b>140</b> to indicate that the triggered location request has been accepted (step G). The MLP TLRA message may include a request-id (req-id) to be used as a transaction ID for the area event triggered session.</p>
<p id="p-0051" num="0050">The area event parameters sent in step F may include one or more area events. An area event may be defined by SET <b>120</b> being inside a predefined area, being outside the predefined area, entering the predefined area, leaving the predefined area, etc. An area event may be dependent on the SET location and may be triggered at any time, if at all. When an area event trigger mechanism in SET <b>120</b> indicates that a position fix is to be computed, SET <b>120</b> may send a SUPL POS INIT message to start a positioning session with SLP <b>130</b> (step H). The SUPL POS INIT message may include the session-id, the SET capabilities, etc. SLP <b>130</b> and SET <b>120</b> may exchange messages for the positioning session (step I), and SLP <b>130</b> may send a SUPL REPORT message containing a position estimate to SET <b>120</b> (step J). Alternatively, SET <b>120</b> may obtain a position estimate itself (e.g., with the help of assistance data sent by SLP <b>130</b> in step I) without the need for SLP <b>130</b> to provide this in step J. SET <b>120</b> may then check the position estimate to determine whether an area event trigger condition has been met (step K). If an area event is triggered, then SET <b>120</b> may send a SUPL REPORT message containing the position estimate to SLP <b>130</b> (step L). SLP <b>130</b> may then forward the position estimate in an MLP Triggered Location Report (TLREP) message to SUPL agent <b>140</b> (step M).</p>
<p id="p-0052" num="0051">At any time during the area event triggered session (e.g., after an idle period when SLP <b>130</b> suspects that the area event triggered session may be half open), SLP <b>130</b> may initiate a session info query session (step X). This session info query session may be independent of the area event triggered session and may be assigned a separate session ID. The session info query session may occur at any time during the area event triggered session and may be concurrent with the area event triggered session. The session info query session in step X may be implemented with call flow <b>300</b> in <figref idref="DRAWINGS">FIG. 3</figref>. Any number of session info query sessions may be performed during the area event triggered session.</p>
<p id="p-0053" num="0052">Steps H to M may be repeated as applicable. When the last report has been sent for the area event triggered session, SLP <b>130</b> may send a SUPL END message to SET <b>120</b> to end the area event triggered session (step O).</p>
<p id="p-0054" num="0053">SLP <b>130</b> may perform session info query to obtain information on active location sessions, as described above. SLP <b>130</b> may also perform session info query to obtain information on capabilities of SET <b>120</b>. The SET capabilities may be conveyed by one or more classmarks or in some other form. SLP <b>130</b> may explicitly query for the SET capabilities, e.g., by using a predefined parameter value in a SUPL INIT message sent to SET <b>120</b>. SET <b>120</b> may return its capabilities when explicitly requested by SLP <b>130</b> and/or when decided by SET <b>120</b>, e.g., due to changes in the SET capabilities. In any case, SLP <b>130</b> may maintain a record of the SET capabilities and may update this record whenever information on the SET capabilities is received from SET <b>120</b>. This may be useful in case the SET capabilities are changed by a user using a menu function, a change in physical SET device, etc. For example, the user may change the physical SET device but may keep the same SET identity by removing a Universal Subscriber Identity Module (USIM), a Subscriber Identity Module (SIM), or a Universal Integrated Circuit Card (UICC) from one SET device and placing it in another SET device having different capabilities.</p>
<p id="p-0055" num="0054">In the design shown in <figref idref="DRAWINGS">FIG. 3</figref>, a session info query session may be identified by a predefined value for the positioning method parameter, which may be included in a SUPL INIT message (as shown in <figref idref="DRAWINGS">FIG. 3</figref>) or some other SUPL message. Table 2 shows a design of the positioning method parameter to support session info query. A session info query session may also be identified in other manners.</p>
<p id="p-0056" num="0055">
<tables id="TABLE-US-00002" num="00002">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="217pt" align="center"/>
<thead>
<row>
<entry namest="1" nameend="1" rowsep="1">TABLE 2</entry>
</row>
</thead>
<tbody valign="top">
<row>
<entry namest="1" nameend="1" align="center" rowsep="1"/>
</row>
<row>
<entry>Positioning Method Parameter</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="1" colwidth="35pt" align="left"/>
<colspec colname="2" colwidth="35pt" align="left"/>
<colspec colname="3" colwidth="147pt" align="left"/>
<tbody valign="top">
<row>
<entry>Parameter</entry>
<entry>Presence</entry>
<entry>Value/Description</entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
<row>
<entry>Position</entry>
<entry/>
<entry>Describes the positioning method:</entry>
</row>
<row>
<entry>Method</entry>
<entry/>
<entry>Assisted GPS (A-GPS) SET assisted only</entry>
</row>
<row>
<entry/>
<entry/>
<entry>A-GPS SET based only</entry>
</row>
<row>
<entry/>
<entry/>
<entry>A-GPS SET assisted preferred (A-GPS SET</entry>
</row>
<row>
<entry/>
<entry/>
<entry>based is the fallback mode)</entry>
</row>
<row>
<entry/>
<entry/>
<entry>A-GPS SET based preferred (A-GPS SET</entry>
</row>
<row>
<entry/>
<entry/>
<entry>assisted is the fallback mode)</entry>
</row>
<row>
<entry/>
<entry/>
<entry>A-GNSS SET assisted only</entry>
</row>
<row>
<entry/>
<entry/>
<entry>A-GNSS SET based only</entry>
</row>
<row>
<entry/>
<entry/>
<entry>A-GNSS SET assisted preferred (A-GNSS SET</entry>
</row>
<row>
<entry/>
<entry/>
<entry>based is the fallback mode)</entry>
</row>
<row>
<entry/>
<entry/>
<entry>A-GNSS SET based preferred (A-GNSS SET</entry>
</row>
<row>
<entry/>
<entry/>
<entry>assisted is the fallback mode)</entry>
</row>
<row>
<entry/>
<entry/>
<entry>Autonomous GPS</entry>
</row>
<row>
<entry/>
<entry/>
<entry>Autonomous GNSS</entry>
</row>
<row>
<entry/>
<entry/>
<entry>Advanced Forward Link Trilateration (AFLT)</entry>
</row>
<row>
<entry/>
<entry/>
<entry>Enhanced Cell/Sector</entry>
</row>
<row>
<entry/>
<entry/>
<entry>Enhanced Observed Time Difference (EOTD)</entry>
</row>
<row>
<entry/>
<entry/>
<entry>Observed Time Difference Of Arrival (OTDOA)</entry>
</row>
<row>
<entry/>
<entry/>
<entry>No position</entry>
</row>
<row>
<entry/>
<entry/>
<entry>Historical Data Retrieval</entry>
</row>
<row>
<entry/>
<entry/>
<entry>Session-Info Query</entry>
</row>
<row>
<entry/>
<entry/>
<entry>Session-Info Query is used to retrieve the</entry>
</row>
<row>
<entry/>
<entry/>
<entry>session-ids of all active SUPL sessions at</entry>
</row>
<row>
<entry/>
<entry/>
<entry>the SET and optionally also the SET</entry>
</row>
<row>
<entry/>
<entry/>
<entry>Capabilities. No position fix is calculated</entry>
</row>
<row>
<entry/>
<entry/>
<entry>during a &#x201c;Session-Info Query&#x201d; session.</entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0057" num="0056"><figref idref="DRAWINGS">FIG. 5</figref> shows a design of a SUPL message <b>500</b> (e.g., a SUPL REPORT message) for sending information for SET <b>120</b>. In this design, SUPL message <b>500</b> includes a SessionList parameter, a SET Capabilities parameter, and possibly other parameters not shown in <figref idref="DRAWINGS">FIG. 5</figref> for simplicity. The SessionList parameter may include N session IDs for N active location sessions, where N may be equal to zero or larger.</p>
<p id="p-0058" num="0057">The SET Capabilities parameter may include a Pos Technology parameter, a Pref Method parameter, a Pos Protocol parameter, a Service Capabilities parameter, and possibly other parameters not shown in <figref idref="DRAWINGS">FIG. 5</figref> for simplicity. The Pos Technology parameter may identify zero or more positioning methods supported by SET <b>120</b>. The Pref Method parameter may identify a positioning method preferred by SET <b>120</b>. The Pos Protocol parameter may identify zero or more positioning protocols supported by SET <b>120</b>, e.g., RRLP, RRC, TIA-801, etc.</p>
<p id="p-0059" num="0058">The Service Capabilities parameter may include a Services Supported parameter, a Reporting Capabilities parameter, a Session Capabilities parameter, an Area Event Capabilities parameter, and possibly other parameters not shown in <figref idref="DRAWINGS">FIG. 5</figref> for simplicity. The Services Supported parameter may define location services supported by SET <b>120</b>, e.g., periodic trigger, area event trigger, etc. The Reporting Capabilities parameter may define reporting capabilities of SET <b>120</b>. The Session Capabilities parameter may define session capabilities of SET <b>120</b>, e.g., the maximum number of periodic triggered sessions, the maximum number of area event triggered sessions, and the total number of simultaneous location sessions supported by SET <b>120</b>. The Area Event Capabilities parameter may define the area event capabilities of SET <b>120</b>.</p>
<p id="p-0060" num="0059">Table 3 shows a design of the SUPL REPORT message, which may be used by SET <b>120</b> in response to a session info query from SLP <b>130</b>. In Table 3, the &#x201c;O&#x201d; in the presence column indicates an optional parameter. The SUPL REPORT message may include a list of session IDs of all active location sessions. The SUPL REPORT message may also include the SET capabilities and/or other parameters not shown in Table 3 for simplicity but described in the aforementioned OMA-TS-ULP-V2 document. The SUPL REPORT message may also be used for other purposes, e.g., by SLP <b>130</b> to indicate the end of a positioning procedure, by SET <b>120</b> to send measurement(s) to SLP <b>130</b> during a triggered session, by SLP <b>130</b> to send position result(s) to SET <b>120</b> during a triggered session, etc.</p>
<p id="p-0061" num="0060">
<tables id="TABLE-US-00003" num="00003">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="217pt" align="center"/>
<thead>
<row>
<entry namest="1" nameend="1" rowsep="1">TABLE 3</entry>
</row>
</thead>
<tbody valign="top">
<row>
<entry namest="1" nameend="1" align="center" rowsep="1"/>
</row>
<row>
<entry>SUPL REPORT Message</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="1" colwidth="42pt" align="left"/>
<colspec colname="2" colwidth="35pt" align="center"/>
<colspec colname="3" colwidth="140pt" align="left"/>
<tbody valign="top">
<row>
<entry>Parameter</entry>
<entry>Presence</entry>
<entry>Value/Description</entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
<row>
<entry>SessionList</entry>
<entry>O</entry>
<entry>A list of the session-ids of all active SUPL</entry>
</row>
<row>
<entry/>
<entry/>
<entry>sessions. The list does not contain the session-</entry>
</row>
<row>
<entry/>
<entry/>
<entry>id of the &#x201c;session-info query&#x201d; session</entry>
</row>
<row>
<entry/>
<entry/>
<entry>which is already included in the session-</entry>
</row>
<row>
<entry/>
<entry/>
<entry>id parameter of the SUPL REPORT message.</entry>
</row>
<row>
<entry>SET</entry>
<entry>O</entry>
<entry>Defines the capabilities of the SET. This</entry>
</row>
<row>
<entry>capabilities</entry>
<entry/>
<entry>parameter may only be used if the SUPL</entry>
</row>
<row>
<entry/>
<entry/>
<entry>REPORT message is sent in the context of a</entry>
</row>
<row>
<entry/>
<entry/>
<entry>&#x201c;session-info query&#x201d; session.</entry>
</row>
<row>
<entry>.</entry>
<entry/>
<entry>.</entry>
</row>
<row>
<entry>.</entry>
<entry/>
<entry>.</entry>
</row>
<row>
<entry>.</entry>
<entry/>
<entry>.</entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0062" num="0061">In another aspect, SET <b>120</b> may perform session info update when a location session of an extended duration may still be in progress with SLP <b>130</b>. For the session info update, SET <b>120</b> may send information on active location sessions and/or information on capabilities of SET <b>120</b>. The information on the active location sessions may include a list of session IDs, the location service types for the active location sessions, session-specific parameters, etc.</p>
<p id="p-0063" num="0062">In one design, SET <b>120</b> may send an update message to SLP <b>130</b> to ensure that location related information in SET <b>120</b> remains consistent with location related information in SLP <b>130</b>. SET <b>120</b> may send an update message (i) when the SET capabilities change, (ii) when SET <b>120</b> is engaged in a location session for which no messages have been exchanged with SLP <b>130</b> for a period of T or more, or (iii) when some other condition is met. T may be set to a suitable value to obtain the desired update rate. For example, T may be provided by SLP <b>130</b> to SET <b>120</b> or may be set to a default value in SET <b>120</b>. T may also be set to a reserved value (e.g., all ones) by SLP <b>130</b> to stop SET <b>120</b> from sending update messages due to condition (ii), so that SLP <b>130</b> can avoid receiving the update messages from SET <b>120</b>.</p>
<p id="p-0064" num="0063">SLP <b>130</b> may receive an update message from SET <b>120</b> at a maximum interval of T when there is at least one active location session in SET <b>120</b>, provided that SET <b>120</b> has connectivity. SLP <b>130</b> may then determine which SUPL sessions are half open as described above and may either terminate or restart these sessions. If SLP <b>130</b> has not received an update message for a period longer than T, then SLP <b>130</b> may perform session info query or may end all active location sessions with SET <b>120</b> by sending a SUPL END message for each active location session known to SLP <b>130</b>. SLP <b>130</b> may also send a SUPL message (e.g., a SUPL END message) to SET <b>120</b> to terminate all active sessions known to SET <b>120</b> including sessions active in SET <b>120</b> but not active in SLP <b>130</b>. If SLP <b>130</b> is unable to send the SUPL END message to SET <b>120</b>, then SLP <b>130</b> may assume that SET <b>120</b> has no connectivity or is powered off. SLP <b>130</b> may wait for an additional interval (e.g., an interval of T) and, if nothing was received from SET <b>120</b> during this interval, may again attempt to end each active location session.</p>
<p id="p-0065" num="0064">In one design, SET <b>120</b> may initiate a session info update session by sending a SUPL UPDATE message to SLP <b>130</b>. The SUPL UPDATE message may be sent without having an active session whereas a SUPL REPORT message may be sent during an active session. SET <b>120</b> may provide information on active location sessions and/or information on SET capabilities in the SUPL UPDATE message. SLP <b>130</b> may terminate the session info update session by sending a SUPL END message to SET <b>120</b>. A session info update session may also be implemented with other message sequences.</p>
<p id="p-0066" num="0065"><figref idref="DRAWINGS">FIG. 6</figref> shows a design of a process <b>600</b> performed by a location server (e.g., an SLP) to support location services. The location server may send a query message to a terminal to query for information on active location sessions (block <b>612</b>). The location server may receive from the terminal a response message comprising the information on the active location sessions (block <b>614</b>). In one design, the query message may be a SUPL INIT message comprising a positioning method parameter set to a predefined value to indicate a session info query session. In one design, the response message may be a SUPL REPORT message containing the information on the active location sessions. The query message and the response message may also be other messages in SUPL or some other location architecture. The information on the active location sessions may comprise a list of session IDs for the active location sessions, parameters for the active location sessions, capabilities of the terminal, and/or other information.</p>
<p id="p-0067" num="0066">The location server may send the query message when it suspects that at least one location session for periodic triggered service or area event triggered service is active. In one design, the location server may send the query message if location information is not received from the terminal within an expected reporting interval for an active location session for periodic triggered service. In another design, the location server may periodically send the query message if there is an active location session for area event triggered service. In yet another design, the location server may send the query message if location information is received from the terminal for a location session unknown to the location server. The location server may also send the query message for other reasons. The location server may send the query message for a session info query session and may start a timer upon sending the query message. The location server may terminate the session info query session if a response message is not received from the terminal prior to expiration of the timer.</p>
<p id="p-0068" num="0067">The location server may terminate a location session deemed to be active at only the terminal or only the location server and may identify this location session based on the received information in the response message and information stored at the location server (block <b>616</b>). The location server may restart or terminate a location session having inconsistent parameters at the terminal and the location server and may identify this location session based on the received information and the stored information (block <b>618</b>).</p>
<p id="p-0069" num="0068"><figref idref="DRAWINGS">FIG. 7</figref> shows a design of a process <b>700</b> performed by a terminal (e.g., a SET) to support location services. The terminal may receive a query message from a location server to query for information on active location sessions (block <b>712</b>). The terminal may receive the query message, e.g., when at least one location session for periodic triggered service or area event triggered service is suspected to be active by the location server. The terminal may send to the location server a response message comprising the information on the active location sessions (block <b>714</b>). In one design, the query message may be a SUPL INIT message comprising a positioning method parameter set to a predefined value to indicate a session info query session. In one design, the response message may be a SUPL REPORT message containing the information on the active location sessions. The information on the active location sessions may comprise a list of session IDs for the active location sessions, parameters for the active location sessions, capabilities of the terminal, and/or other information. The terminal may send the information on the capabilities of the terminal if requested by the location server, if the capabilities have changed since they were last reported to the location server, etc.</p>
<p id="p-0070" num="0069">The terminal may thereafter receive a message from the location server to terminate a location session deemed to be active at the terminal but not at the location server and identified based on the information in the response message (block <b>716</b>). The terminal may receive a message from the location server to restart or terminate a location session having inconsistent parameters at the terminal and the location server and identified based on the information in the response message (block <b>718</b>). The terminal may clear all location sessions terminated by the location server and may reset each location session restarted by the location server.</p>
<p id="p-0071" num="0070"><figref idref="DRAWINGS">FIG. 8</figref> shows a design of a process <b>800</b> performed by a terminal (e.g., a SET) to support location services. The terminal may generate an update message comprising location related information for a terminal (block <b>812</b>). The terminal may send the update message to a location server to update the location server with the location related information for the terminal (block <b>814</b>). The terminal may send the update message for a session info update session initiated by the terminal. In one design, the location related information for the terminal may comprise information on active location sessions. The terminal may send the update message if no messages have been exchanged with the location server within a predetermined time period for an active location session. The terminal may periodically send the update message unless instructed otherwise by the location server. In another design, the location related information for the terminal may comprise information on capabilities of the terminal. The terminal may send the update message if the capabilities of the terminal have changed since they were last reported to the location server.</p>
<p id="p-0072" num="0071"><figref idref="DRAWINGS">FIG. 9</figref> shows a design of a process <b>900</b> performed by a location server (e.g., an SLP) to support location services. The location server may receive an update message comprising location related information for a terminal, with the update message being received from the terminal without solicitation from the location server (block <b>912</b>). The location related information for the terminal may comprise information on active location sessions, information on capabilities of the terminal, etc. The location server may update location related information for the terminal at the location server with the location related information in the update message (block <b>914</b>). The location server may periodically receive the update message from the terminal. The location server may also instruct the terminal to stop sending the update message.</p>
<p id="p-0073" num="0072"><figref idref="DRAWINGS">FIG. 10</figref> shows a block diagram of a design of wireless network <b>110</b>, terminal/SET <b>120</b>, and location server/SLP <b>130</b> in <figref idref="DRAWINGS">FIG. 1</figref>. For simplicity, <figref idref="DRAWINGS">FIG. 10</figref> shows only one controller/processor <b>1020</b>, one memory <b>1022</b>, and one transmitter/receiver (TMTR/RCVR) <b>1024</b> for terminal <b>120</b>, only one controller/processor <b>1030</b>, one memory <b>1032</b>, one transmitter/receiver <b>1034</b>, and one communication (Comm) unit <b>1036</b> for wireless network <b>110</b>, and only one controller/processor <b>1040</b>, one memory <b>1042</b>, and one communication unit <b>1044</b> for SLP <b>130</b>. In general, each entity may include any number of processors, controllers, memories, transmitters/receivers, communication units, etc. Terminal <b>120</b> may support communication with one or more wireless and/or wireline networks. Terminal <b>120</b> may also receive and process signals from one or more satellite positioning systems, e.g., GPS, Galileo, etc.</p>
<p id="p-0074" num="0073">On the downlink, wireless network <b>110</b> may transmit traffic data, signaling, and pilot to terminals within its coverage area. These various types of information may be processed by processor <b>1030</b>, conditioned by transmitter <b>1034</b>, and transmitted on the downlink. At terminal <b>120</b>, downlink signals from wireless network <b>110</b> may be received and conditioned by receiver <b>1024</b> and further processed by processor <b>1020</b> to obtain various types of information. Processor <b>1020</b> may perform process <b>700</b> in <figref idref="DRAWINGS">FIG. 7</figref>, process <b>800</b> in <figref idref="DRAWINGS">FIG. 8</figref>, and/or other processes for the techniques described herein. Memories <b>1022</b> and <b>1032</b> may store program codes and data for terminal <b>120</b> and wireless network <b>110</b>, respectively. On the uplink, terminal <b>120</b> may transmit traffic data, signaling, and pilot to wireless network <b>110</b>. These various types of information may be processed by processor <b>1020</b>, conditioned by transmitter <b>1024</b>, and transmitted on the uplink. At wireless network <b>110</b>, the uplink signals from terminal <b>120</b> and other terminals may be received and conditioned by receiver <b>1034</b> and further processed by processor <b>1030</b> to obtain various types of information from the terminals. Wireless network <b>110</b> may directly or indirectly communicate with SLP <b>130</b> via communication unit <b>1036</b>.</p>
<p id="p-0075" num="0074">Within SLP <b>130</b>, processor <b>1040</b> may perform processing to support location services for terminals. For example, processor <b>1040</b> may perform process <b>600</b> in <figref idref="DRAWINGS">FIG. 6</figref>, process <b>900</b> in <figref idref="DRAWINGS">FIG. 9</figref>, and/or other processes for the techniques described herein. Processor <b>1040</b> may also compute position estimates for terminal <b>120</b>, provide location information to SUPL agent <b>140</b>, etc. Memory <b>1042</b> may store program codes and data for SLP <b>130</b>. Communication unit <b>1044</b> may allow SLP <b>130</b> to communicate with wireless network <b>110</b>, terminal <b>120</b>, and/or other network entities. SLP <b>130</b> and terminal <b>120</b> may exchange messages via a user plane (e.g., SUPL), and these messages may be transported by wireless network <b>110</b> and/or wireline network <b>112</b>.</p>
<p id="p-0076" num="0075">Those of skill in the art would understand that information and signals may be represented using any of a variety of different technologies and techniques. For example, data, instructions, commands, information, signals, bits, symbols, and chips that may be referenced throughout the above description may be represented by voltages, currents, electromagnetic waves, magnetic fields or particles, optical fields or particles, or any combination thereof.</p>
<p id="p-0077" num="0076">Those of skill would further appreciate that the various illustrative logical blocks, modules, circuits, and algorithm steps described in connection with the disclosure herein may be implemented as electronic hardware, computer software, or combinations of both. To clearly illustrate this interchangeability of hardware and software, various illustrative components, blocks, modules, circuits, and steps have been described above generally in terms of their functionality. Whether such functionality is implemented as hardware or software depends upon the particular application and design constraints imposed on the overall system. Skilled artisans may implement the described functionality in varying ways for each particular application, but such implementation decisions should not be interpreted as causing a departure from the scope of the present disclosure.</p>
<p id="p-0078" num="0077">The various illustrative logical blocks, modules, and circuits described in connection with the disclosure herein may be implemented or performed with a general-purpose processor, a digital signal processor (DSP), an application specific integrated circuit (ASIC), a field programmable gate array (FPGA) or other programmable logic device, discrete gate or transistor logic, discrete hardware components, or any combination thereof designed to perform the functions described herein. A general-purpose processor may be a microprocessor, but in the alternative, the processor may be any conventional processor, controller, microcontroller, or state machine. A processor may also be implemented as a combination of computing devices, e.g., a combination of a DSP and a microprocessor, a plurality of microprocessors, one or more microprocessors in conjunction with a DSP core, or any other such configuration.</p>
<p id="p-0079" num="0078">The steps of a method or algorithm described in connection with the disclosure herein may be embodied directly in hardware, in a software module executed by a processor, or in a combination of the two. A software module may reside in RAM memory, flash memory, ROM memory, EPROM memory, EEPROM memory, registers, hard disk, a removable disk, a CD-ROM, or any other form of storage medium known in the art. An exemplary storage medium is coupled to the processor such that the processor can read information from, and write information to, the storage medium. In the alternative, the storage medium may be integral to the processor. The processor and the storage medium may reside in an ASIC. The ASIC may reside in a user terminal. In the alternative, the processor and the storage medium may reside as discrete components in a user terminal.</p>
<p id="p-0080" num="0079">In one or more exemplary designs, the functions described may be implemented in hardware, software, firmware, or any combination thereof. If implemented in software, the functions may be stored on or transmitted over as one or more instructions or code on a computer-readable medium. Computer-readable media includes both computer storage media and communication media including any medium that facilitates transfer of a computer program from one place to another. A storage media may be any available media that can be accessed by a general purpose or special purpose computer. By way of example, and not limitation, such computer-readable media can comprise RAM, ROM, EEPROM, CD-ROM or other optical disk storage, magnetic disk storage or other magnetic storage devices, or any other medium that can be used to carry or store desired program code means in the form of instructions or data structures and that can be accessed by a general-purpose or special-purpose computer, or a general-purpose or special-purpose processor. Also, any connection is properly termed a computer-readable medium. For example, if the software is transmitted from a website, server, or other remote source using a coaxial cable, fiber optic cable, twisted pair, digital subscriber line (DSL), or wireless technologies such as infrared, radio, and microwave, then the coaxial cable, fiber optic cable, twisted pair, DSL, or wireless technologies such as infrared, radio, and microwave are included in the definition of medium. Disk and disc, as used herein, includes compact disc (CD), laser disc, optical disc, digital versatile disc (DVD), floppy disk and blu-ray disc where disks usually reproduce data magnetically, while discs reproduce data optically with lasers. Combinations of the above should also be included within the scope of computer-readable media.</p>
<p id="p-0081" num="0080">The previous description of the disclosure is provided to enable any person skilled in the art to make or use the disclosure. Various modifications to the disclosure will be readily apparent to those skilled in the art, and the generic principles defined herein may be applied to other variations without departing from the scope of the disclosure. Thus, the disclosure is not intended to be limited to the examples and designs described herein but is to be accorded the widest scope consistent with the principles and novel features disclosed herein.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method of supporting location services, comprising:
<claim-text>sending a query message from a location server to a terminal to query for a list of active location sessions currently in progress, wherein the sending the query message comprises sending a Secure User Plane Location (SUPL) INIT message comprising a positioning method parameter set to a predefined value to indicate a session info query session;</claim-text>
<claim-text>receiving from the terminal a response message comprising the list of active location sessions, wherein the receiving the response message comprises receiving a SUPL REPORT message comprising the list of the active location sessions, and wherein the list of the active location sessions received from the terminal comprises an indication of at least two active location sessions identified by the terminal as being currently in progress between the terminal and the location server; and</claim-text>
<claim-text>terminating an active location session based at least in part on the list in the response message.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the list of the active location sessions comprises a list of session identifiers (IDs) for the active location sessions.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the response message further comprises parameters for the active location sessions.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the response message further comprises information on capabilities of the terminal.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the sending the query message comprises sending the query message when at least one location session for periodic triggered service or area event triggered service is suspected to be active by the location server.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the sending the query message comprises sending the query message if location information is not received from the terminal within an expected reporting interval for an active location session for periodic triggered service.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>identifying the active location session as active at only the terminal or only the location server based on the list in the response message and information stored at the location server; and</claim-text>
<claim-text>terminating the active location session in response to identifying the active location session as active at only the terminal or only the location server.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>identifying the active location session as having inconsistent parameters at the terminal and the location server based on the list in the response message and information stored at the location server; and</claim-text>
<claim-text>terminating the active location session in response to identifying the active location session as having inconsistent parameters at the terminal and the location server based on the list in the response message and information stored at the location server.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>starting a timer upon sending the query message for a session info query session; and</claim-text>
<claim-text>terminating the session info query session if a response message is not received from the terminal prior to expiration of the timer.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. An apparatus for supporting location services, comprising:
<claim-text>means for sending a query message from a location server to a terminal to query for a list of active location sessions currently in progress, wherein the sending the query message comprises sending a Secure User Plane Location (SUPL) INIT message comprising a positioning method parameter set to a predefined value to indicate a session info query session;</claim-text>
<claim-text>means for receiving from the terminal a response message comprising the list of active location sessions, wherein the receiving the response message comprises receiving a SUPL REPORT message comprising the list of the active location sessions, and wherein the list of the active location sessions received from the terminal comprises an indication of at least two active location sessions identified by the terminal as being currently in progress between the terminal and the location server; and</claim-text>
<claim-text>means for terminating an active location session based at least in part on the list in the response message.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The apparatus of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the means for sending the query message comprises means for sending a Secure User Plane Location (SUPL) INIT message comprising a positioning method parameter set to a predefined value to indicate a session info query session, and wherein the means for receiving the response message comprises means for receiving a SUPL REPORT message comprising the list of the active location sessions.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The apparatus of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the list of the active location sessions comprises a list of session identifiers (IDs) for the active location sessions.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The apparatus of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the response message further comprises information on capabilities of the terminal.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The apparatus of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the means for sending the query message comprises means for sending the query message when at least one location session for periodic triggered service or area event triggered service is suspected to be active by the location server.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The apparatus of <claim-ref idref="CLM-00010">claim 10</claim-ref>, further comprising:
<claim-text>means for identifying the active location session as active at only the terminal or only the location server based on the list in the response message and information stored at the location server; and</claim-text>
<claim-text>means for terminating the active location session in response to identifying the active location session as active at only the terminal or only the location server.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. An apparatus for supporting location services, comprising:
<claim-text>at least one processor configured</claim-text>
<claim-text>to send a query message from a location server to a terminal to query for a list of active location sessions currently in progress, wherein the sending the query message comprises sending a Secure User Plane Location (SUPL) INIT message comprising a positioning method parameter set to a predefined value to indicate a session info query session;</claim-text>
<claim-text>to receive from the terminal a response message comprising the list of active location sessions, wherein the receiving the response message comprises receiving a SUPL REPORT message comprising the list of the active location sessions, and wherein the list of the active location sessions received from the terminal comprises an indication of at least two active location sessions identified by the terminal as being currently in progress between the terminal and the location server; and</claim-text>
<claim-text>to terminate an active location session based at least in part on the list in the response message.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The apparatus of <claim-ref idref="CLM-00016">claim 16</claim-ref>, wherein the at least one processor is configured to send as the query message a Secure User Plane Location (SUPL) INIT message comprising a positioning method parameter set to a predefined value to indicate a session info query session, and to receive as the response message a SUPL REPORT message comprising the list of the active location sessions.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The apparatus of <claim-ref idref="CLM-00016">claim 16</claim-ref>, wherein the at least one processor is configured to obtain a list of session identifiers (IDs) for the active location sessions from the list of the active location sessions.</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The apparatus of <claim-ref idref="CLM-00016">claim 16</claim-ref>, wherein the at least one processor is further configured to receive information on capabilities of the terminal from the response message.</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The apparatus of <claim-ref idref="CLM-00016">claim 16</claim-ref>, wherein the at least one processor is configured to send the query message when at least one location session for periodic triggered service or area event triggered service is suspected to be active by the location server.</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. The apparatus of <claim-ref idref="CLM-00016">claim 16</claim-ref>, wherein the at least one processor is configured to identify the active location session as active at only the terminal or only the location server based on the list in the response message and information stored at the location server, and to terminate the active location session in response to identifying the active location session as active at only the terminal or only the location server.</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. A non-transitory computer-readable medium comprising code, which, when executed by a processor, causes the processor to perform operations for supporting location services, the computer-readable medium comprising:
<claim-text>code for causing at least one computer to send a query message from a location server to a terminal to query for a list of active location sessions currently in progress, wherein the sending the query message comprises sending a Secure User Plane Location (SUPL) INIT message comprising a positioning method parameter set to a predefined value to indicate a session info query session;</claim-text>
<claim-text>code for causing the at least one computer to receive from the terminal a response message comprising the list of active location sessions, wherein the receiving the response message comprises receiving a SUPL REPORT message comprising the list of the active location sessions, and wherein the list of the active location sessions received from the terminal comprises an indication of at least two active location sessions identified by the terminal as being currently in progress between the terminal and the location server; and</claim-text>
<claim-text>code for causing the at least one computer to terminate an active location session based at least in part on the list in the response message.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00023" num="00023">
<claim-text>23. A method of supporting location services, comprising:
<claim-text>receiving a query message sent from a location server to a terminal to query for a list of active location sessions currently in progress, wherein the receiving the query message comprises receiving a Secure User Plane Location (SUPL) INIT message comprising a positioning method parameter set to a predefined value to indicate a session info query session;</claim-text>
<claim-text>sending to the location server a response message comprising the list of active location sessions, wherein the sending the response message comprises sending a SUPL REPORT message comprising the list of the active location sessions, and wherein the list of the active location sessions sent from the terminal comprises an indication of at least two active location sessions identified by the terminal as being currently in progress between the terminal and the location server; and</claim-text>
<claim-text>receiving a termination message from the location server to terminate an active location session based at least in part on the list in the response message.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00024" num="00024">
<claim-text>24. The method of <claim-ref idref="CLM-00023">claim 23</claim-ref>, wherein the receiving the query message comprises receiving a Secure User Plane Location (SUPL) INIT message comprising a positioning method parameter set to a predefined value to indicate a session info query session, and wherein the sending the response message comprises sending a SUPL REPORT message comprising the list of the active location sessions.</claim-text>
</claim>
<claim id="CLM-00025" num="00025">
<claim-text>25. The method of <claim-ref idref="CLM-00023">claim 23</claim-ref>, wherein the list of the active location sessions comprises a list of session identifiers (IDs) for the active location sessions.</claim-text>
</claim>
<claim id="CLM-00026" num="00026">
<claim-text>26. The method of <claim-ref idref="CLM-00023">claim 23</claim-ref>, wherein the response message further comprises information on capabilities of the terminal.</claim-text>
</claim>
<claim id="CLM-00027" num="00027">
<claim-text>27. The method of <claim-ref idref="CLM-00023">claim 23</claim-ref>, wherein the receiving the query message comprises receiving the query message when at least one location session for periodic triggered service or area event triggered service is suspected to be active by the location server.</claim-text>
</claim>
<claim id="CLM-00028" num="00028">
<claim-text>28. The method of <claim-ref idref="CLM-00023">claim 23</claim-ref>, further comprising:
<claim-text>receiving a termination message from the location server to terminate the active location session in response to the active location session being identified as active at the terminal but not at the location server, the location session being identified based on the list in the response message.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00029" num="00029">
<claim-text>29. The method of <claim-ref idref="CLM-00023">claim 23</claim-ref>, further comprising:
<claim-text>receiving a termination message from the location server to terminate the active location session in response to the active location session being identified as having inconsistent parameters at the terminal and the location server based on the list in the response message.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00030" num="00030">
<claim-text>30. An apparatus for supporting location services, comprising:
<claim-text>at least one processor configured to:</claim-text>
<claim-text>receive a query message sent from a location server to a terminal to query for a list of active location sessions currently in progress, wherein the receiving the query message comprises receiving a Secure User Plane Location (SUPL) INIT message comprising a positioning method parameter set to a predefined value to indicate a session info query session;</claim-text>
<claim-text>to send to the location server a response message comprising the list of active location sessions, wherein the sending the response message comprises sending a SUPL REPORT message comprising the list of the active location sessions, and wherein the list of the active location sessions sent from the terminal comprises an indication of at least two active location sessions identified by the terminal as being currently in progress between the terminal and the location server; and</claim-text>
<claim-text>to receive a termination message from the location server to terminate an active location session based at least in part on the list in the response message.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00031" num="00031">
<claim-text>31. The apparatus of <claim-ref idref="CLM-00030">claim 30</claim-ref>, wherein the at least one processor is configured to receive as the query message a Secure User Plane Location (SUPL) INIT message comprising a positioning method parameter set to a predefined value to indicate a session info query session, and to send as the response message a SUPL REPORT message comprising the list of the active location sessions.</claim-text>
</claim>
<claim id="CLM-00032" num="00032">
<claim-text>32. The apparatus of <claim-ref idref="CLM-00030">claim 30</claim-ref>, wherein the list of the active location sessions comprises a list of session identifiers (IDs) for the active location sessions.</claim-text>
</claim>
<claim id="CLM-00033" num="00033">
<claim-text>33. The apparatus of <claim-ref idref="CLM-00030">claim 30</claim-ref>, wherein the response message further comprises information on capabilities of the terminal.</claim-text>
</claim>
<claim id="CLM-00034" num="00034">
<claim-text>34. An apparatus for supporting location services, comprising:
<claim-text>means for receiving a query message sent from a location server to a terminal to query for a list of active location sessions currently in progress, wherein the receiving the query message comprises receiving a Secure User Plane Location (SUPL) INIT message comprising a positioning method parameter set to a predefined value to indicate a session info query session;</claim-text>
<claim-text>means for sending to the location server a response message comprising the list of active location sessions, wherein the sending the response message comprises sending a SUPL REPORT message comprising the list of the active location sessions, and wherein the list of the active location sessions sent from the terminal comprises an indication of at least two active location sessions identified by the terminal as being currently in progress between the terminal and the location server; and</claim-text>
<claim-text>means for receiving a termination message from the location server to terminate an active location session based at least in part on the list in the response message.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00035" num="00035">
<claim-text>35. The apparatus of <claim-ref idref="CLM-00034">claim 34</claim-ref>, wherein the means for receiving the query message comprises means for receiving a Secure User Plane Location (SUPL) INIT message comprising a positioning method parameter set to a predefined value to indicate a session info query session, and wherein the means for sending the response message comprises means for sending a SUPL REPORT message comprising the list of the active location sessions.</claim-text>
</claim>
<claim id="CLM-00036" num="00036">
<claim-text>36. The apparatus of <claim-ref idref="CLM-00034">claim 34</claim-ref>, further comprising:
<claim-text>means for receiving a termination message from the location server to terminate the active location session in response to the active location session being identified as active at the terminal but not at the location server, the location session being identified based on the list in the response message.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00037" num="00037">
<claim-text>37. The apparatus of <claim-ref idref="CLM-00034">claim 34</claim-ref>, wherein the list of the active location sessions comprises a list of session identifiers (IDs) for the active location sessions.</claim-text>
</claim>
<claim id="CLM-00038" num="00038">
<claim-text>38. The apparatus of <claim-ref idref="CLM-00034">claim 34</claim-ref>, wherein the response message further comprises information on capabilities of the terminal.</claim-text>
</claim>
<claim id="CLM-00039" num="00039">
<claim-text>39. A non-transitory computer-readable medium comprising code, which, when executed by a processor, causes the processor to perform operations for supporting location services, the computer-readable medium comprising:
<claim-text>code for causing at least one computer to receive a query message sent from a location server to a terminal to query for a list of active location sessions currently in progress, wherein the receiving the query message comprises receiving a Secure User Plane Location (SUPL) INIT message comprising a positioning method parameter set to a predefined value to indicate a session info query session;</claim-text>
<claim-text>code for causing at least one computer to send to the location server a response message comprising the list of active location sessions, wherein the sending the response message comprises sending a SUPL REPORT message comprising the list of the active location sessions, and wherein the list of the active location sessions sent from the terminal comprises an indication of at least two active location sessions identified by the terminal as being currently in progress between the terminal and the location server; and</claim-text>
<claim-text>code for causing at least one computer to receive a termination message from the location server to terminate an active location session based at least in part on the list in the response message.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00040" num="00040">
<claim-text>40. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> comprising:
<claim-text>restarting the active location session.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00041" num="00041">
<claim-text>41. The method of <claim-ref idref="CLM-00023">claim 23</claim-ref> comprising:
<claim-text>receiving a restart message from the location server to restart the active location session. </claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
