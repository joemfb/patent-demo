<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08626932-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08626932</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12551824</doc-number>
<date>20090901</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>15</main-group>
<subgroup>16</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>709228</main-classification>
<further-classification>710 14</further-classification>
<further-classification>710105</further-classification>
<further-classification>710 15</further-classification>
</classification-national>
<invention-title id="d2e43">Device-dependent selection between modes for asymmetric serial protocols</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6184652</doc-number>
<kind>B1</kind>
<name>Yang</name>
<date>20010200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6211649</doc-number>
<kind>B1</kind>
<name>Matsuda</name>
<date>20010400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>6372974</doc-number>
<kind>B1</kind>
<name>Gross et al.</name>
<date>20020400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>6516205</doc-number>
<kind>B1</kind>
<name>Oguma</name>
<date>20030200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>6535983</doc-number>
<kind>B1</kind>
<name>McCormack et al.</name>
<date>20030300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>6653813</doc-number>
<kind>B2</kind>
<name>Khatri</name>
<date>20031100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>6663420</doc-number>
<kind>B1</kind>
<name>Xiao</name>
<date>20031200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>6920569</doc-number>
<kind>B1</kind>
<name>Wauters et al.</name>
<date>20050700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>6931456</doc-number>
<kind>B2</kind>
<name>Payne et al.</name>
<date>20050800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>6963933</doc-number>
<kind>B2</kind>
<name>Saito et al.</name>
<date>20051100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>710  1</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>7108560</doc-number>
<kind>B1</kind>
<name>Chou et al.</name>
<date>20060900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>7167935</doc-number>
<kind>B2</kind>
<name>Hellberg</name>
<date>20070100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>7185132</doc-number>
<kind>B2</kind>
<name>Tang</name>
<date>20070200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>710305</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>7193442</doc-number>
<kind>B2</kind>
<name>Zhu</name>
<date>20070300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>326 82</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>7214089</doc-number>
<kind>B1</kind>
<name>Learmonth et al.</name>
<date>20070500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>7215042</doc-number>
<kind>B2</kind>
<name>Yan</name>
<date>20070500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>7293122</doc-number>
<kind>B1</kind>
<name>Schubert et al.</name>
<date>20071100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00018">
<document-id>
<country>US</country>
<doc-number>7299304</doc-number>
<kind>B2</kind>
<name>Saint-Hilaire et al.</name>
<date>20071100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00019">
<document-id>
<country>US</country>
<doc-number>7441062</doc-number>
<kind>B2</kind>
<name>Novotney et al.</name>
<date>20081000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00020">
<document-id>
<country>US</country>
<doc-number>7480753</doc-number>
<kind>B2</kind>
<name>Bohm et al.</name>
<date>20090100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>710104</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00021">
<document-id>
<country>US</country>
<doc-number>7480758</doc-number>
<kind>B2</kind>
<name>Lin et al.</name>
<date>20090100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>710316</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00022">
<document-id>
<country>US</country>
<doc-number>7529872</doc-number>
<kind>B1</kind>
<name>Schubert et al.</name>
<date>20090500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>710105</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00023">
<document-id>
<country>US</country>
<doc-number>7581119</doc-number>
<kind>B2</kind>
<name>Tupman et al.</name>
<date>20090800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00024">
<document-id>
<country>US</country>
<doc-number>7583105</doc-number>
<kind>B2</kind>
<name>Stopel et al.</name>
<date>20090900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>326 85</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00025">
<document-id>
<country>US</country>
<doc-number>2001/0005641</doc-number>
<kind>A1</kind>
<name>Matsumoto et al.</name>
<date>20010600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>439  1</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00026">
<document-id>
<country>US</country>
<doc-number>2001/0006884</doc-number>
<kind>A1</kind>
<name>Matsumoto</name>
<date>20010700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00027">
<document-id>
<country>US</country>
<doc-number>2004/0048569</doc-number>
<kind>A1</kind>
<name>Kawamura</name>
<date>20040300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00028">
<document-id>
<country>US</country>
<doc-number>2004/0088449</doc-number>
<kind>A1</kind>
<name>Sakaki</name>
<date>20040500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00029">
<document-id>
<country>US</country>
<doc-number>2004/0103223</doc-number>
<kind>A1</kind>
<name>Gabehart et al.</name>
<date>20040500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00030">
<document-id>
<country>US</country>
<doc-number>2004/0116005</doc-number>
<kind>A1</kind>
<name>Choi</name>
<date>20040600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00031">
<document-id>
<country>US</country>
<doc-number>2004/0225836</doc-number>
<kind>A1</kind>
<name>Lin</name>
<date>20041100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00032">
<document-id>
<country>US</country>
<doc-number>2004/0249994</doc-number>
<kind>A1</kind>
<name>Shapiro et al.</name>
<date>20041200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00033">
<document-id>
<country>US</country>
<doc-number>2005/0268000</doc-number>
<kind>A1</kind>
<name>Carlson</name>
<date>20051200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00034">
<document-id>
<country>US</country>
<doc-number>2006/0080490</doc-number>
<kind>A1</kind>
<name>Tang</name>
<date>20060400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00035">
<document-id>
<country>US</country>
<doc-number>2006/0094461</doc-number>
<kind>A1</kind>
<name>Hameed et al.</name>
<date>20060500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>4555521</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00036">
<document-id>
<country>US</country>
<doc-number>2006/0106962</doc-number>
<kind>A1</kind>
<name>Woodbridge et al.</name>
<date>20060500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>710106</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00037">
<document-id>
<country>US</country>
<doc-number>2006/0123175</doc-number>
<kind>A1</kind>
<name>Yu et al.</name>
<date>20060600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00038">
<document-id>
<country>US</country>
<doc-number>2006/0224791</doc-number>
<kind>A1</kind>
<name>Keppeler</name>
<date>20061000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00039">
<document-id>
<country>US</country>
<doc-number>2007/0112985</doc-number>
<kind>A1</kind>
<name>Law et al.</name>
<date>20070500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00040">
<document-id>
<country>US</country>
<doc-number>2007/0236482</doc-number>
<kind>A1</kind>
<name>Proctor et al.</name>
<date>20071000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00041">
<document-id>
<country>US</country>
<doc-number>2008/0005409</doc-number>
<kind>A1</kind>
<name>Kolokowsky et al.</name>
<date>20080100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00042">
<document-id>
<country>US</country>
<doc-number>2008/0222341</doc-number>
<kind>A1</kind>
<name>Lin et al.</name>
<date>20080900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00043">
<document-id>
<country>US</country>
<doc-number>2008/0222438</doc-number>
<kind>A1</kind>
<name>Lin et al.</name>
<date>20080900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00044">
<document-id>
<country>US</country>
<doc-number>2009/0037622</doc-number>
<kind>A1</kind>
<name>Dheeresh et al.</name>
<date>20090200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00045">
<document-id>
<country>US</country>
<doc-number>2009/0185559</doc-number>
<kind>A1</kind>
<name>Chen et al.</name>
<date>20090700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370362</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00046">
<document-id>
<country>US</country>
<doc-number>2009/0198841</doc-number>
<kind>A1</kind>
<name>Yoshida et al.</name>
<date>20090800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>710 16</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00047">
<document-id>
<country>US</country>
<doc-number>2009/0300239</doc-number>
<kind>A1</kind>
<name>Hubo et al.</name>
<date>20091200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>710 63</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00048">
<document-id>
<country>US</country>
<doc-number>2009/0307380</doc-number>
<kind>A1</kind>
<name>Lee et al.</name>
<date>20091200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>710 14</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00049">
<document-id>
<country>US</country>
<doc-number>2011/0013624</doc-number>
<kind>A1</kind>
<name>Lerzer et al.</name>
<date>20110100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370360</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00050">
<document-id>
<country>JP</country>
<doc-number>2001-069165</doc-number>
<kind>A</kind>
<date>20010300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00051">
<document-id>
<country>WO</country>
<doc-number>WO 2004/034266</doc-number>
<kind>A2</kind>
<date>20040400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00052">
<document-id>
<country>WO</country>
<doc-number>WO 2006/107509</doc-number>
<kind>A2</kind>
<date>20061000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00053">
<document-id>
<country>WO</country>
<doc-number>WO 2007/122453</doc-number>
<kind>A1</kind>
<date>20071100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00054">
<document-id>
<country>WO</country>
<doc-number>WO 2011/028388</doc-number>
<kind>A1</kind>
<date>20110300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00055">
<othercit>Brown, &#x201c;Making UBS Work,&#x201d; downloaded Oct. 16, 2001, PC Magazine: PC Tech wysiwyg:/155/http://www.zdnet.com/pcmag/pctech/content!18/04/tu1804.001.html.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00056">
<othercit>Fried, &#x201c;FireWire poised to become ubiquitous,&#x201d; downloaded Oct. 16, 2001, CNET News.com, 1394 Trade Association: Press, wysiwyg:/132/http:/ 113 94ta.org/Press/200 1Press/august!8.2 7. b.html.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00057">
<othercit>Fried, &#x201c;New Fire Wire to blaze faster trail,&#x201d; downloaded Oct. 16, 2001, CNET News.com, http://news.cnet.com/news/0/I006-200-6021210.html.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00058">
<othercit>&#x201c;IEEE 1394/USB Comparison,&#x201d; downloaded Oct. 16, 2001, www.genitech.com.aulLIBRARY/TechSupportiinfobits/firewirevsusb.html.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00059">
<othercit>&#x201c;PMC FW2 IEEE 1394 FireWire Controller&#x201d;, downloaded Oct. 16, 2001, http://www.bymltd.co.uk/PMCfw2ds.html.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00060">
<othercit>Sinitsyn, &#x201c;Synchronization Framework for Personal Mobile Servers,&#x201d; Pervasive Computing and Communications Workshops (PERCOMW'04), Proceedings of the Second IEEE Annual Conference, Piscataway, NJ, USA, IEEE, Mar. 14, 2004, pp. 208-212.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00061">
<othercit>&#x201c;Universal Serial Bus Specification&#x2014;Rev 2.0,&#x201d; Chapter 6: Compaq Hewlett-Packard, Apr. 27, 2000, pp. 85, 99-100.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00062">
<othercit>&#x201c;Universal Serial Bus Specification&#x2014;Rev 2.0,&#x201d; XP002474828, Chapter 9: USB Device Framework, pp. 239-274.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00063">
<othercit>&#x201c;On-The-Go Supplement to the USB 2.0 Specification&#x2014;Rev 1.3&#x201d; Dec. 5, 2006, 53 pages.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00064">
<othercit>&#x201c;On-The-Go and Embedded Host Supplement to the USB Revision 2.0 Specification&#x2014;Rev 2.0&#x201d; May 8, 2009, 79 pages.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00065">
<othercit>International Search Report mailed on Jan. 12, 2011 for PCT Patent Application No. PCT/US2010/045373 A1, 6 pages.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00066">
<othercit>Combined Search Report and Examination under Sections 17 and 18(3) for GB Patent Application No. GB1014178.6, mailed on Dec. 16, 2010, 8 pages.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00067">
<othercit>Combined Search and Examination Report mailed on Feb. 16, 2012 for GB Patent Application No. GB1118925.5, 6 pages.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00068">
<othercit>Combined Search and Examination Report mailed on Feb. 16, 2012 for GB Patent Application No. GB1118926.3, 5 pages.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00069">
<othercit>International Preliminary Report on Patentability mailed on Mar. 15, 2012 for PCT Patent Application No. PCT/US2010/045373, 10 pages.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00070">
<othercit>Examination Report mailed on Feb. 16, 2012 for GB Patent Application No. GB1014178.6, 2 pages.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00071">
<othercit>Examination Report mailed on Jul. 12, 2012 for GB Patent Application No. GB1014178.6, 2 pages.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>20</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>709220-223</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709201-203</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709208-211</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709227-232</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709253</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709200</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>710  8- 17</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>710 62- 74</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>710100</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>710104-105</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>710300-315</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>711100</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>711115</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>4</number-of-drawing-sheets>
<number-of-figures>6</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20110055407</doc-number>
<kind>A1</kind>
<date>20110303</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Lydon</last-name>
<first-name>Gregory</first-name>
<address>
<city>Santa Cruz</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Bolton</last-name>
<first-name>Lawrence G.</first-name>
<address>
<city>Mahomet</city>
<state>IL</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Dalal</last-name>
<first-name>Anand</first-name>
<address>
<city>San Jose</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Lydon</last-name>
<first-name>Gregory</first-name>
<address>
<city>Santa Cruz</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Bolton</last-name>
<first-name>Lawrence G.</first-name>
<address>
<city>Mahomet</city>
<state>IL</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Dalal</last-name>
<first-name>Anand</first-name>
<address>
<city>San Jose</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Kilpatrick Townsend &#x26; Stockton LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Apple Inc.</orgname>
<role>02</role>
<address>
<city>Cupertino</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Bengzon</last-name>
<first-name>Greg C</first-name>
<department>2444</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A portable communication device (PCD) can automatically switch into different operating modes of an asymmetric communication protocol (such as USB) depending on the type of accessory connected. For example, the accessory can signal whether the PCD should operate in a first mode or a second mode using a hardware indicator such as identification resistor across two pins of a multi-pin connector and/or a software indicator such as a command protocol. The PCD can detect the accessory's signal and switch to the operating mode requested by the accessory.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="244.09mm" wi="181.61mm" file="US08626932-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="244.94mm" wi="182.20mm" file="US08626932-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="196.68mm" wi="188.47mm" file="US08626932-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="204.30mm" wi="190.75mm" file="US08626932-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="249.77mm" wi="195.07mm" file="US08626932-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND</heading>
<p id="p-0002" num="0001">The present disclosure relates generally to portable communication devices that communicate with accessory devices using serial protocols and in particular to device-dependent selection by the portable communication device between modes (or roles) of an asymmetric serial protocol.</p>
<p id="p-0003" num="0002">In recent years, a number of portable communication devices (PCDs) have been developed. Examples of PCDs include, for example, portable media players, mobile phones, personal digital assistants (PDAs), portable e-mail devices, video game players, portable navigation units relying on Global Positioning System (GPS) satellite data, and multi-function devices that can integrate numerous functions such as media storage and playback, mobile phone, Internet access, e-mail, personal information management, game play, GPS/navigation capability, and the like. Examples of multi-function PCDs include various iPhone&#xae; and iPod&#xae; models manufactured and sold by Apple Inc., assignee of the present application, as well as other portable electronic devices made and sold by other manufactures and distributors under their respective brand names.</p>
<p id="p-0004" num="0003">PCDs are frequently docked with other electronic devices, referred to herein as &#x201c;accessories.&#x201d; For example, from time to time, a user may dock a PCD with a personal computer to synchronize media content and/or metadata, personal data, and the like. A user may at other times dock the same PCD with other electronic devices, such as an in-vehicle media system, a speaker dock, or the like. The user may also dock the PCD with a charger that provides power to the PCD but does not include other data or information sharing capability.</p>
<p id="p-0005" num="0004">To facilitate communication between PCDs and accessories, it is common to rely on standard point-to-point communication protocols, such as Universal Serial Bus (USB). The USB specification (promulgated by USB Implementers Forum, Inc. and available at their website, www.usb.org) specifies two signal contacts, referred to as D+ and D&#x2212;, for data transmission and two additional contacts for power, referred to as V<sub>BUS </sub>and specified as 5.0 volts (V), and ground. In a USB connection, a &#x201c;USB host&#x201d; delivers power to the V<sub>BUS </sub>contact while a &#x201c;USB device&#x201d; relies on the USB host to provide the V<sub>BUS </sub>power.</p>
<heading id="h-0002" level="1">BRIEF SUMMARY</heading>
<p id="p-0006" num="0005">USB is an asymmetric communication protocol, in the sense that the USB host and USB device use the connection contacts differently. This can create problems when connecting a PCD to different accessories at different times, as some accessories may prefer the PCD to act as USB host while other accessories prefer the PCD to act as a USB device. For example, when some PCDs connect to a computer via USB, the computer acts as USB host and provides power that can be used to charge the PCD. However, if a PCD connects to another portable electronic apparatus, such as a digital camera, the other apparatus may expect that it will be able to act as the USB device, in which case the PCD would need to act as a USB host. If the PCD cannot switch to a USB host mode, its ability to connect to different accessories may be limited.</p>
<p id="p-0007" num="0006">Certain embodiments of the present invention provide PCDs that can automatically switch into one or another mode of an asymmetric communication protocol depending on the type of accessory connected. In some embodiments, the accessory (which can be any electronic apparatus that connects to a PCD) can signal its preference for whether the PCD should operate in a first mode or a second mode of the asymmetric protocol. Such signaling can be achieved, e.g., using a hardware mechanism such as an identification resistor or a software mechanism such as a command protocol. The PCD can detect this preference and configure itself in the operating mode identified by the accessory. Thus, for example, if the asymmetric communication protocol is a USB protocol, the accessory can indicate whether the PCD should operate as a USB host or a USB device.</p>
<p id="p-0008" num="0007">In some embodiments, the PCD can conform precisely to a standard protocol such as USB when operating in one mode (e.g., USB device mode) but deviate from that protocol when operating in another mode (e.g., USB host mode). For example, in accordance with standard USB protocols, the USB host supplies 5.0 V of power on a V<sub>BUS </sub>line to the USB device. A PCD can receive 5.0 V of power when operating as a USB device but supply a lower voltage (e.g., 3.3 V) when operating as a USB host. This can reduce power consumption by the PCD.</p>
<p id="p-0009" num="0008">The following detailed description together with the accompanying drawings will provide a better understanding of the nature and advantages of the present invention.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. 1</figref> illustrates a PCD docked with a computer according to an embodiment of the present invention.</p>
<p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. 2</figref> illustrates a PCD docked with a sound system according to an embodiment of the present invention.</p>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 3</figref> illustrates a PCD docked with a digital camera according to an embodiment of the present invention.</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 4</figref> is a block diagram of a system according to an embodiment of the present invention.</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 5</figref> is a simplified connection diagram illustrating connections that can be provided between an accessory and a PCD according to an embodiment of the present invention.</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 6</figref> is a flow diagram of a process for establishing a connection to an accessory according to an embodiment of the present invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0016" num="0015">Certain embodiments of the present invention provide PCDs that can automatically switch into one or another mode of an asymmetric communication protocol depending on the type of accessory connected. In some embodiments, the accessory (which can be any electronic apparatus that connects to a PCD) can signal its preference for whether the PCD should operate in a first mode or a second mode of the asymmetric protocol. Such signaling can be achieved, e.g., using a hardware mechanism such as an identification resistor or a software mechanism such as a command protocol. The PCD can detect this preference and configure itself in the operating mode identified by the accessory. Thus, for example, if the asymmetric communication protocol is a USB protocol, the accessory can indicate whether the PCD should operate as a USB host or a USB device.</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIGS. 1-3</figref> illustrate a PCD docked (or connected) to accessories according to embodiments of the present invention. In <figref idref="DRAWINGS">FIG. 1</figref>, PCD <b>102</b> is docked with computer <b>104</b> via cable <b>106</b>. Cable <b>106</b> in this embodiment can include wires to carry the standard USB signals (D+, D&#x2212;, VBUS, and ground) and can also include other wires. In one embodiment, connector <b>108</b> connects cable <b>106</b> to a mating receptacle (not explicitly shown) on a bottom surface of PCD <b>102</b>. The mating receptacle of PCD <b>102</b> may include a larger number of pins than is required for USB communication (e.g., 30 pins in one embodiment), as described below with reference to <figref idref="DRAWINGS">FIG. 4</figref>. The additional pins can increase the range of accessories with which PCD <b>102</b> can be docked and the types of information that PCD <b>102</b> can exchange with an accessory when docked. In one embodiment, connector <b>110</b> connects cable <b>106</b> to a mating receptacle (not explicitly shown) on a side surface of computer <b>104</b>. Connector <b>110</b> can be, for example, a standard USB connector, and the mating receptacle can be a standard USB receptacle. In the configuration of <figref idref="DRAWINGS">FIG. 1</figref>, computer <b>104</b> can act as a USB host while PCD <b>102</b> acts as a USB device.</p>
<p id="p-0018" num="0017">In <figref idref="DRAWINGS">FIG. 2</figref>, PCD <b>102</b> is docked with sound system <b>204</b>. Docking can be accomplished by providing docking connector <b>206</b> (shown in inset <b>208</b>) on a top surface of sound system <b>204</b> and inserting docking connector <b>206</b> into the mating receptacle (not explicitly shown) of PCD <b>102</b>. In this configuration, docking connector <b>206</b> may include mating pins corresponding to some or all of the pins in the mating receptacle of PCD <b>102</b>. Depending on the implementation of sound system <b>204</b>, it may be desirable for PCD <b>102</b> to present a USB host configuration or a USB device configuration.</p>
<p id="p-0019" num="0018">In <figref idref="DRAWINGS">FIG. 3</figref>, PCD <b>102</b> is docked with digital camera <b>304</b> via cable <b>306</b>. In some embodiments, cable <b>306</b> can be similar to cable <b>106</b> of <figref idref="DRAWINGS">FIG. 1</figref>. Connector <b>308</b> connects cable <b>306</b> to a mating receptacle (not explicitly shown) of PCD <b>102</b>. Digital camera <b>304</b> can provide a USB receptacle or a receptacle with additional pins to receive a connector (not shown) at one end of cable <b>306</b>. In some embodiments, digital camera <b>304</b> can only operate as a USB device, in which case it is desirable for PCD <b>102</b> to present a USB host configuration.</p>
<p id="p-0020" num="0019">It will be appreciated that the PCD/accessory connections described herein are illustrative and that variations and modifications are possible. A PCD can connect to a wide range of other electronic apparatus, and the term &#x201c;accessory&#x201d; as used herein refers generally to any electronic apparatus with which a PCD can be connected. A PCD can operate in either a USB host or USB device mode when connected to a USB-compliant accessory. As described below, the operating mode that a PCD presents to an accessory can be controlled using accessory identification pins provided on the mating receptacle of PCD <b>102</b> and corresponding pins on cable connector <b>106</b> or docking connector <b>206</b>.</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 4</figref> is a block diagram of a system <b>400</b> according to an embodiment of the present invention. System <b>400</b> can include PCD <b>402</b> (e.g., implementing PCD <b>102</b> of <figref idref="DRAWINGS">FIGS. 1-3</figref>) and an accessory <b>420</b> (e.g., implementing any one of accessories <b>104</b>, <b>204</b>, <b>304</b> of <figref idref="DRAWINGS">FIGS. 1-3</figref>).</p>
<p id="p-0022" num="0021">PCD <b>402</b> in this embodiment can provide communication and/or media playback capability. PCD <b>402</b> can include processor <b>404</b>, storage device <b>406</b>, user interface <b>408</b>, power control module <b>410</b>, battery <b>412</b>, and accessory input/output (I/O) interface <b>414</b>. PCD <b>402</b> can also include other components (not explicitly shown) to provide various enhanced capabilities. For example, in some embodiments PCD <b>402</b> can include radio frequency (RF) transceiver components for accessing wireless voice and/or data networks (e.g., using cellular telephone technology, advanced data network technology such as 3G or EDGE, WiFi (IEEE 802.11 family standards), or other mobile communication technologies, or any combination thereof), a GPS receiver, and/or other components.</p>
<p id="p-0023" num="0022">Storage device <b>406</b> can be implemented, e.g., using disk, flash memory, or any other non-volatile storage medium. In some embodiments, storage device <b>406</b> can store media assets such as audio, video, still images, or the like, that can be played by PCD <b>402</b>. Storage device <b>406</b> can also store other information such as a user's contacts (names, addresses, phone numbers, etc.); scheduled appointments and events; notes; and/or other personal information. In some embodiments, storage device <b>406</b> can store one or more application programs to be executed by processor <b>404</b> (e.g., video game programs, personal information management programs, etc.).</p>
<p id="p-0024" num="0023">User interface <b>408</b> may include input devices such as a touch pad, touch screen, scroll wheel, click wheel, dial, button, switch, keypad, microphone, or the like, as well as output devices such as video screen, indicator lights, speakers, headphone jacks, or the like, together with supporting electronics (e.g., digital-to-analog or analog-to-digital converters, signal processors, or the like). A user can operate input devices of user interface <b>408</b> to invoke the functionality of PCD <b>402</b> and can view and/or hear output from PCD <b>402</b> via output devices of user interface <b>408</b>.</p>
<p id="p-0025" num="0024">Processor <b>404</b>, which can be implemented as one or more integrated circuits (e.g., a conventional microprocessor or microcontroller), can control the operation of PCD <b>402</b>. In various embodiments, processor <b>404</b> can execute a variety of programs in response to program code and can maintain multiple concurrently executing programs or processes. At any given time, some or all of the program code to be executed can be resident in processor <b>404</b> and/or in storage media such as storage device <b>406</b>.</p>
<p id="p-0026" num="0025">Through suitable programming, processor <b>404</b> can provide various functionality for PCD <b>402</b>. For example, in response to user input signals provided by user interface <b>408</b>, processor <b>404</b> can operate a database engine to navigate a database of media assets stored in storage device <b>406</b> in response to user input and display lists of selected assets. Processor <b>404</b> can respond to user selection of an asset (or assets) to be played by transferring asset information to a playback engine also operated by processor <b>404</b>, thus allowing media content to be played. Processor <b>404</b> can also operate other programs to control other functions of PCD <b>402</b>.</p>
<p id="p-0027" num="0026">Power control module <b>410</b> provides power management capability for PCD <b>402</b>. For example, power control module <b>410</b> can deliver power from battery <b>412</b> to accessory I/O interface <b>414</b> via line <b>411</b> and to other components of PCD <b>402</b> (connections not shown). Power control module <b>410</b> can also receive power via accessory I/O interface <b>414</b> and line <b>413</b> and deliver received power to various components of PCD <b>402</b> (connections not shown); received power can also be delivered to battery <b>412</b>, thereby allowing battery <b>412</b> to be recharged via accessory I/O interface <b>414</b>. In some embodiments, power control module <b>410</b> can be implemented using programmable or controllable circuits operating in response to control signals generated by program code executing on processor <b>404</b> or as a separate microprocessor or microcontroller.</p>
<p id="p-0028" num="0027">In some embodiments, power control module <b>410</b> is responsive to signals from sensor <b>416</b> in accessory I/O interface <b>414</b>. As described below, sensor <b>416</b> can generate a signal indicative of the type of accessory connected, and power control module <b>410</b> can use this information to determine, e.g., whether to distribute power from battery <b>412</b> or received power from the accessory. Power control module <b>410</b> can also provide other power management capabilities, such as regulating power consumption of other components of PCD <b>402</b> based on the source and amount of available power, monitoring stored power in battery <b>412</b> and generating user alerts if the stored power drops below a minimum level, and so on.</p>
<p id="p-0029" num="0028">Accessory I/O interface <b>414</b> can allow PCD <b>402</b> to communicate with various accessories. For example, accessory I/O interface <b>414</b> might support connections to a computer (e.g., as shown in <figref idref="DRAWINGS">FIG. 1</figref>), an external speaker dock (e.g., as shown in <figref idref="DRAWINGS">FIG. 2</figref>), a digital camera (e.g., as shown in <figref idref="DRAWINGS">FIG. 3</figref>), a radio tuner (e.g., FM, AM and/or satellite), an in-vehicle entertainment system, an external video device, or the like. In accordance with some embodiments of the invention, accessory I/O interface <b>414</b> can determine whether to operate in USB host or USB device mode when connected to an accessory. As described below, sensor <b>416</b> can be used to detect identifying information from a connected accessory, and this identifying information can be used to select an operating mode.</p>
<p id="p-0030" num="0029">In some embodiments, accessory I/O interface <b>414</b> can include a connector, such as a 30-pin connector corresponding to the connector used on iPod&#xae; and iPhone&#xae; products, as well as supporting circuitry. The connector can provide connections for power and ground as well as for various wired communication interfaces such as USB, FireWire, and/or universal asynchronous receiver/transmitter (UART). Thus, accessory I/O interface <b>414</b> can support multiple communication channels, and a given accessory can use any or all of these channels.</p>
<p id="p-0031" num="0030">Accessory <b>420</b> includes controller <b>424</b>, user interface <b>422</b>, and PCD I/O interface <b>426</b>. Accessory <b>420</b> is representative of a broad range of electronic apparatus to which PCD <b>402</b> can be connected, and it is understood that accessories can vary widely in capability, complexity and form factor. Various accessories may include components not shown in <figref idref="DRAWINGS">FIG. 4</figref>, including but not limited to storage devices (disk, memory, etc.); video screens, speakers, or ports for connecting to external audio/video devices; camera components such as lenses, image sensors, and controls for same (e.g., aperture, zoom, exposure time, frame rate, etc.); microphones for recording audio (either alone or in connection with video recording); and so on.</p>
<p id="p-0032" num="0031">Controller <b>424</b> can include, e.g., a microprocessor or microcontroller executing program code to perform various functions associated with accessory <b>420</b>. For example, where accessory <b>420</b> is a personal computer system (e.g., as shown in <figref idref="DRAWINGS">FIG. 1</figref>), the program code can include an operating system, a driver program associated with a USB port, and a content management program that allows a user to control what content is stored on PCD <b>402</b> by interacting with user interface <b>422</b> of accessory <b>420</b>. In the case of a personal computer, program code executed by controller <b>424</b> can also include various application programs completely unrelated to PCD <b>402</b>. In some embodiments where accessory <b>420</b> is a sound system (e.g., as shown in <figref idref="DRAWINGS">FIG. 2</figref>), program code executed by controller <b>424</b> can include programs for digital audio decoding, analog or digital audio processing, and the like. In some embodiments where accessory <b>420</b> is a digital camera (e.g., as shown in <figref idref="DRAWINGS">FIG. 3</figref>), program code executed by controller <b>424</b> can include programs that allow a user to control the camera to capture images, display images, transfer image data to another electronic apparatus, etc.</p>
<p id="p-0033" num="0032">User interface <b>422</b> may include input controls such as a touch pad, touch screen, scroll wheel, click wheel, dial, button, switch, keypad, microphone, or the like, as well as output devices such as video screen, indicator lights, speakers, headphone jacks or the like, together with supporting electronics (e.g., digital-to-analog or analog-to-digital converters, signal processors or the like). A user can operate the various input controls of user interface <b>422</b> to invoke the functionality of accessory <b>420</b> and can view and/or hear output from accessory <b>420</b> via user interface <b>422</b>.</p>
<p id="p-0034" num="0033">PCD I/O interface <b>426</b> can allow accessory <b>420</b> to communicate with PCD <b>402</b> (or another PCD). In accordance with some embodiments of the invention, PCD I/O interface <b>426</b> can incorporate a USB interface. For example, PCD I/O interface <b>426</b> can provide a standard, mini, or micro USB port. In other embodiments, PCD I/O interface <b>426</b> can include a connector that mates directly with a connector included in PCD <b>402</b>, such as a 30-pin connector that mates with the connector used on various iPod&#xae; products. Such a connector can be used to supply power to PCD <b>202</b> or receive power from PCD <b>202</b>, to receive audio and/or video signals in analog and/or digital formats, and to communicate information via various interfaces such as USB, UART, and/or FireWire.</p>
<p id="p-0035" num="0034">Accessory <b>420</b> can be any electronic apparatus that interacts with PCD <b>402</b>, including but not limited to any of the examples shown in <figref idref="DRAWINGS">FIGS. 1-3</figref>. In some embodiments, accessory <b>420</b> can provide remote control over operations of PCD <b>402</b>, or a remote user interface that can include both input and output controls (e.g., a display screen). Accessory <b>420</b> in various embodiments can control any function of PCD <b>402</b> and can also receive media content from PCD <b>402</b> and present such content to the user (e.g., through audio speakers and/or video display screen, depending on the type of media content). In other embodiments, PCD <b>402</b> can control operations of accessory <b>420</b>, such as retrieving image data from a digital camera incorporated into accessory <b>420</b>, initiating an image capture operation, etc.</p>
<p id="p-0036" num="0035">It will be appreciated that the system configurations and components described herein are illustrative and that variations and modifications are possible. The PCD and/or accessory may have other capabilities not specifically described herein (e.g., mobile phone, global positioning system (GPS), broadband data communication, Internet connectivity, etc.).</p>
<p id="p-0037" num="0036">Further, while the PCD and accessory are described herein with reference to particular blocks, it is to be understood that these blocks are defined for convenience of description and are not intended to imply a particular physical arrangement of component parts. Further, the blocks need not correspond to physically distinct components. Blocks can be configured to perform various operations, e.g., by programming a processor or providing appropriate control circuitry, and various blocks might or might not be reconfigurable depending on how the initial configuration is obtained. Embodiments of the present invention can be realized in a variety of apparatus including electronic devices implemented using any combination of circuitry and software.</p>
<p id="p-0038" num="0037">Accessory I/O interface <b>414</b> of PCD <b>402</b> and PCD I/O interface <b>426</b> of accessory <b>420</b> allow PCD <b>402</b> to be connected with accessory <b>420</b> and subsequently disconnected from accessory <b>420</b>. As used herein, PCD <b>402</b> and accessory <b>420</b> are &#x201c;connected&#x201d; whenever a communication channel is open between PCD I/O interface <b>426</b> and accessory I/O interface <b>414</b>. Such connection can be achieved via direct physical connection, e.g., with mating connectors; indirect physical connection, e.g., via a cable; and/or wireless connection, e.g., via Bluetooth. PCD <b>402</b> and accessory <b>420</b> are said to be &#x201c;docked&#x201d; whenever an electrical connection is established between pins of PCD I/O interface <b>426</b> and corresponding pins of accessory I/O interface <b>414</b>. Docking can be achieved directly, e.g., with mating connectors, or indirectly, e.g., via a cable. In the case of an indirect connection, the connectors for accessory <b>420</b> and PCD <b>402</b> need not have corresponding form factors or numbers or arrangements of pins.</p>
<p id="p-0039" num="0038">In some embodiments, PCD <b>402</b> and accessory <b>420</b> can communicate while connected (e.g., docked) by exchanging commands and data according to a PCD-specific protocol. The commands and data can be communicated, e.g., using USB Human Interface Device (HID) as a transport or using another transport provided by accessory I/O interface <b>414</b> and PCD I/O interface <b>426</b>. The PCD-specific protocol defines a format for messages to be exchanged between PCD <b>202</b> and accessory <b>220</b>. For instance, the PCD-specific protocol may specify that each message (also referred to herein as a command) is sent in a packet with a header and an optional payload. The header provides basic information (e.g., a start indicator, length of the packet, and a command code identifying a command to be processed by the recipient), while the payload provides any data associated with the command; the amount of associated data can be different for different commands, and some commands may provide for variable-length payloads. In some embodiments, the commands may be defined such that any particular command code is valid in only one direction. The packet can also include error-detection or error-correction codes as known in the art.</p>
<p id="p-0040" num="0039">The accessory protocol can define a number of &#x201c;lingoes,&#x201d; where a &#x201c;lingo&#x201d; is a group of related commands that can be supported (or unsupported) by various classes of accessories. In one embodiment, a command code can include a first byte identifying the lingo to which the command belongs and a second byte identifying the particular command within the lingo. Other command structures may also be used. It is not required that all accessories, or all PCDs to which an accessory can be connected, support every lingo defined within the accessory protocol.</p>
<p id="p-0041" num="0040">In some embodiments, every accessory <b>420</b> and every PCD <b>402</b> that use the PCD-specific protocol support at least a &#x201c;general&#x201d; lingo that includes commands common to the PCD and all accessories. The general lingo can include commands enabling the PCD and the accessory to identify and authenticate themselves to each other and to provide general information about their respective capabilities, including which (if any) other lingoes each supports. The general lingo can also include authentication commands that the PCD can use to verify the purported identity and capabilities of the accessory (or vice versa), and the accessory (or PCD) may be blocked from invoking certain (or all) commands or lingoes if the authentication is unsuccessful. In addition, in some embodiments the PCD can block the accessory from using USB functionality of the PCD if authentication is unsuccessful.</p>
<p id="p-0042" num="0041">A PCD-specific protocol can also include various other lingoes, such as a simple remote lingo that allows accessory <b>420</b> to send a command indicating a function of PCD <b>402</b> to be invoked, a remote user interface lingo that can be used to communicate commands and data related to replicating all or part of a user interface of PCD <b>402</b> on accessory <b>420</b> (thereby supporting a more advanced remote control), a tuner lingo that allows a user to control a tuner accessory <b>420</b> by operating PCD <b>402</b>, a storage lingo that allows accessory <b>420</b> to store data on PCD <b>402</b>, and so on. Any lingo or combination of lingoes or other commands or groups of commands can be used in connection with a PCD-specific protocol.</p>
<p id="p-0043" num="0042">In some embodiment, the PCD-specific protocol can provide a software-based mechanism that allows an accessory to communicate a desired configuration for an asymmetric protocol to the PCD. For example, in the case where the asymmetric protocol is USB, the commands can include a GetUSBMode command, a Return USBMode command and a SetUSBMode command. The GetUSBMode command can be sent by the accessory to the PCD to request the current USB operating mode of the PCD. The PCD can respond with the Return USBMode command, whose payload can include a parameter indicating the current USB mode (for example, USB host, USB device, or unconfigured). A SetUSBMode command can be sent by the accessory to change the USB mode; the payload of this command can include a parameter indicating the desired USB mode. Other commands can also be provided, and such commands can be part of a general lingo or a special-purpose lingo as desired.</p>
<p id="p-0044" num="0043">In one embodiment using software mechanisms to control a USB configuration, the PCD and accessory can first connect using a transport (e.g., UART or a wireless transport) other than USB. The accessory can then send commands of the PCD-specific protocol to determine the current USB mode of the PCD and/or to request that the PCD switch to the desired mode.</p>
<p id="p-0045" num="0044">In other embodiments, hardware mechanisms can be used to control configuration of the asymmetric protocol. By way of illustration, <figref idref="DRAWINGS">FIG. 5</figref> is a simplified connection diagram illustrating connections that can be provided between an accessory and a PCD according to an embodiment of the present invention. An accessory-side connector <b>502</b> is represented on the left and a PCD-side connector <b>504</b> on the right. In some embodiments, accessory-side connector <b>502</b> can be part of PCD I/O interface <b>426</b> of accessory <b>402</b> of <figref idref="DRAWINGS">FIG. 4</figref>, and PCD-side connector <b>504</b> can be part of accessory I/O interface <b>414</b> of PCD <b>402</b> of <figref idref="DRAWINGS">FIG. 4</figref>. In other embodiments, features of accessory-side connector <b>502</b> can be incorporated, e.g., into connector <b>108</b> of <figref idref="DRAWINGS">FIG. 1</figref>, with only pins relevant to operation of the accessory being connected to wires of cable <b>106</b>.</p>
<p id="p-0046" num="0045">In this example, PCD-side connector <b>504</b> provides a number of pins <b>510</b>. (Herein, multiple instances of like objects are denoted with reference numbers identifying the object and parenthetical numbers identifying the instance where needed.) These pins include a number of ground (GND) pins <b>510</b>(<b>1</b>), <b>510</b>(<b>2</b>), <b>510</b>(<b>8</b>) and <b>510</b>(<b>10</b>); USB D+ pin <b>510</b>(<b>2</b>) and D&#x2212; pin <b>510</b>(<b>3</b>) for exchanging USB signals with the accessory; V<sub>BUS </sub>pin <b>510</b>(<b>4</b>) that can receive power (e.g., at 5.0 V) from an accessory; V<sub>P </sub>pin <b>510</b>(<b>5</b>) that can provide power (e.g., at 3.3 V) to an accessory; and accessory identification pins <b>510</b>(<b>6</b>) and <b>510</b>(<b>7</b>). Other pins, e.g., pin <b>510</b>(<b>9</b>) can provide signals not relevant to the present description, such as UART signals, FireWire signals, audio and/or video output signals to the accessory in digital and/or analog formats, audio input signals from the accessory, and so on. In one embodiment, PCD-side connector <b>504</b> can have a total of 30 pins; the number and arrangement of pins can be varied as desired. In some embodiments, ground pins <b>510</b>(<b>1</b>), <b>510</b>(<b>2</b>), <b>510</b>(<b>8</b>) and <b>510</b>(<b>10</b>) can be made longer than all other pins <b>510</b> so that the ground connections are first to be made and last to be broken as PCD-side connector <b>504</b> engages with and disengages from accessory-side connector <b>502</b>. Such a configuration can reduce the risk of electrical damage to a PCD during docking and undocking.</p>
<p id="p-0047" num="0046">Similarly, accessory-side connector <b>502</b> provides a number of pins <b>512</b>. These pins include ground pins <b>512</b>(<b>1</b>), <b>512</b>(<b>2</b>), <b>512</b>(<b>8</b>) and <b>512</b>(<b>10</b>); USB D+ pin <b>512</b>(<b>2</b>) and D&#x2212; pin <b>512</b>(<b>3</b>) for exchanging USB signals with the accessory; V<sub>BUS </sub>pin <b>512</b>(<b>4</b>) that can provide power (e.g., at 5.0 V) to a PCD; V<sub>P </sub>pin <b>512</b>(<b>5</b>) that can receive power (e.g., at 3.3 V) from a PCD; and accessory identification pins <b>512</b>(<b>6</b>) and <b>512</b>(<b>7</b>). Other pins, e.g., pin <b>512</b>(<b>9</b>) can provide signals not relevant to the present description, such as UART signals, FireWire signals, audio and/or video input signals from the PCD in digital and/or analog formats, audio output signals to the PCD, and so on. In one embodiment, accessory-side connector <b>502</b> can have a total of 30 pins; the number and arrangement of pins can be varied as desired.</p>
<p id="p-0048" num="0047">As shown, PCD-side connector <b>504</b> and accessory-side connector <b>502</b> provide the electrical connections required for a standard USB connection (bidirectional D+ and D&#x2212; signals, V<sub>BUS</sub>, and ground), although not necessarily in a form factor compliant with USB standards. Accessories that provide a USB port with a standard form factor can be connected to PCD-side connector <b>504</b> using a cable (not shown in <figref idref="DRAWINGS">FIG. 5</figref>) that passes through the USB signals from accessory-side connector <b>502</b> to a standard USB connector (not shown). Any pins of accessory-side connector <b>502</b> that are not actually connected to the accessory can be left floating or terminated to prevent line noise as appropriate, or unused signal contacts may simply be omitted.</p>
<p id="p-0049" num="0048"><figref idref="DRAWINGS">FIG. 5</figref> illustrates a technique that can be used in one embodiment to identify whether the PCD should operate in a USB host or USB device mode when connected to an accessory by using signals generated on accessory identification pins <b>510</b>(<b>6</b>) and <b>510</b>(<b>7</b>). Specifically, accessory-side connector <b>502</b> includes identification resistor <b>520</b> connected between pins <b>512</b>(<b>6</b>) and <b>512</b>(<b>7</b>). On PCD-side connector <b>504</b>, pin <b>510</b>(<b>6</b>) is connected via a pull-up resistor <b>524</b> to a reference voltage (e.g., V<sub>P</sub>, although a different voltage can also be used). Pin <b>510</b>(<b>7</b>) is connected to ground.</p>
<p id="p-0050" num="0049">In operation, when accessory-side connector <b>502</b> is connected to PCD-side connector <b>504</b>, electrical contact is achieved between pins <b>512</b>(<b>6</b>) and <b>510</b>(<b>6</b>) and between pins <b>512</b>(<b>7</b>) and <b>510</b>(<b>7</b>). A voltage difference develops between nodes <b>526</b> and <b>528</b>, and this difference is detected by sensor <b>530</b> (e.g., implementing sensor <b>416</b> of <figref idref="DRAWINGS">FIG. 4</figref>). Since pull-up resistor <b>524</b> is fixed, the voltage difference corresponds to the resistance (R<sub>ID</sub>) of identification resistor <b>520</b>. Thus, sensor <b>530</b> can detect the resistance R<sub>ID</sub>. In some embodiments, sensor <b>530</b> can output an analog or digital signal indicative of the resistance. In the embodiment of <figref idref="DRAWINGS">FIG. 4</figref>, this signal can be delivered to power control module <b>410</b>; the sensor signal can also be delivered to processor <b>404</b> and/or other components of PCD <b>402</b>.</p>
<p id="p-0051" num="0050">In one embodiment, different resistance values R<sub>ID </sub>are associated with different USB operating modes of the PCD. For instance, a first resistance value can indicate that the PCD should operate in a USB host mode while a second resistance value can indicate that the PCD should operate in a USB device mode. Certain embodiments may also use other resistance values to provide other information. For example, the USB standard defines various configurations that a USB device can present to a USB host, such as &#x201c;human interface device&#x201d; (HID) configuration or &#x201c;mass storage device&#x201d; configuration. Different resistance values R<sub>ID </sub>can be associated with each of these USB device configurations. Accordingly, the same PCD can present a USB host mode to a first accessory, a USB device mode in an HID configuration to a second accessory, and a USB device mode in a mass storage configuration to a third accessory, depending on the resistance R<sub>ID </sub>detected between pins <b>510</b>(<b>6</b>) and <b>510</b>(<b>7</b>) by sensor <b>530</b>.</p>
<p id="p-0052" num="0051">In some embodiments, some accessories can have connectors <b>502</b> that do not provide an identification resistor <b>520</b>. For example, pins <b>512</b>(<b>6</b>) and <b>512</b>(<b>7</b>) can be shorted together, or they can be disconnected from each other. In such embodiments, the absence of resistor <b>520</b> can be detected by sensor <b>530</b> and interpreted as a request for the PCD's &#x201c;default&#x201d; mode of operation. In one embodiment, the PCD operates in a mass-storage USB device mode by default and only switches to USB host mode if the specific resistance R<sub>ID </sub>associated with PCD-as-USB host configuration is detected.</p>
<p id="p-0053" num="0052">It will be appreciated that the connector configuration described herein is illustrative and that variations and modifications are possible. Different numbers and/or arrangements of pins can be substituted. The connector form factors may also vary. In the embodiment shown in <figref idref="DRAWINGS">FIG. 5</figref>, the PCD provides power on one pin when it is the USB host but receives power on a different pin when it is the USB device. Different accessories can thus connect to one power pin or the other, depending on whether the accessory is the USB device or the USB host, and do not need to (but may) connect to both. In other embodiments, the same pin can be operated bidirectionally, with the PCD either receiving or supplying a voltage on that pin depending on whether it is the USB host or the USB device. Further, although in some embodiments, the power level is different between PCD-as-USB host and PCD-as-USB device modes, this is also not required. If the PCD as USB host does provide different power, any accessories operating as USB devices can be configured to accept the power as provided. For example, an accessory may have a battery or connect to an external power source if it requires more power than the PCD provides. Further, the PCD may use signal levels on the USB D+/D&#x2212; lines that are limited to a maximum voltage level equal to the V<sub>P </sub>line, and accessories can be configured to detect these voltage levels.</p>
<p id="p-0054" num="0053">In some embodiments, the accessory can simply provide a standard USB interface with a USB connection port having any standard form factor. The accessory may be fixedly configured to operate as either a USB host or a USB device. For purposes of connecting the accessory to a PCD implementing the identification scheme of <figref idref="DRAWINGS">FIG. 5</figref>, a cable such as cable <b>106</b> of <figref idref="DRAWINGS">FIG. 1</figref> or cable <b>306</b> of <figref idref="DRAWINGS">FIG. 3</figref> can be configured with the appropriate resistor disposed within the PCD connector (e.g., connector <b>108</b> of <figref idref="DRAWINGS">FIG. 1</figref> or connector <b>308</b> of <figref idref="DRAWINGS">FIG. 3</figref>). If the accessory operates as a USB host, the V<sub>BUS </sub>pin of connector <b>502</b> can be connected to the USB V<sub>BUS </sub>pin. If the accessory operates as a USB device, the V<sub>P </sub>pin of connector <b>502</b> can be connected to the USB V<sub>BUS </sub>pin.</p>
<p id="p-0055" num="0054">In some embodiments, an accessory can select or change its identification resistance R<sub>ID </sub>to request different USB modes at different times. For example, an accessory with which a PCD can dock may provide both a user input device (e.g., keyboard, mouse) or other apparatus that presents as a USB device and a pass-through to a personal computer or other apparatus that presents as a USB host. Except when the PCD is actually in communication with the USB host, it can be instructed by the accessory to operate in USB host mode. In some embodiments, the accessory can dynamically switch the resistance R<sub>ID </sub>during operation. The PCD can monitor the identification pins, detect a change in R<sub>ID</sub>, and switch its USB mode accordingly.</p>
<p id="p-0056" num="0055">Further, some accessories may be equipped with a standard USB On-the-Go receptacle that includes an ID pin in addition to the four standard USB pins; the ID pin indicates to the USB On-the-Go accessory whether it should operate as a USB host or USB device. For coupling a PCD to such an accessory, a special role-selecting adapter can be provided (e.g., as a cable or unitary connector). One end of the adapter can include a connector that mates with the PCD and supplies a resistance R<sub>ID </sub>across the appropriate pins to indicate which USB mode the PCD should operate in. The other end of the adapter can include a connector that mates with the USB On-the-Go receptacle of the accessory and ties the ID pin to indicate that the accessory should operate in the other USB mode. Thus, for example, if R<sub>ID </sub>at one end of the adapter indicates that the PCD should operate as USB host, the USB On-the-Go ID pin at the other end would indicate that the accessory should operate as USB device.</p>
<p id="p-0057" num="0056"><figref idref="DRAWINGS">FIG. 6</figref> is a flow diagram of a process <b>600</b> for establishing a connection to an accessory according to an embodiment of the present invention. Process <b>600</b> can be implemented, e.g., in program code executing on processor <b>404</b> of PCD <b>402</b> (<figref idref="DRAWINGS">FIG. 4</figref>), in dedicated control logic within accessory I/O interface <b>414</b>, or in any combination thereof.</p>
<p id="p-0058" num="0057">Process <b>600</b> starts (block <b>602</b>) when accessory I/O <b>414</b> interface detects that contact has been established between its connector pins (e.g., pins <b>510</b> of connector <b>504</b> in <figref idref="DRAWINGS">FIG. 5</figref>) and corresponding pins of an accessory connector (e.g., pins <b>512</b> of connector <b>502</b>). At block <b>604</b>, sensor <b>530</b> can sense the resistance R<sub>ID </sub>across accessory identification pins <b>510</b>(<b>6</b>) and <b>510</b>(<b>7</b>).</p>
<p id="p-0059" num="0058">At block <b>606</b>, it is determined whether the sensed resistance R<sub>ID </sub>corresponds to the resistance associated with a request for the USB host mode of the PCD. If so, then the PCD enters the USB host mode. If not, then at block <b>607</b>, it is determined whether a host mode command (e.g., a SetUSBMode command requesting USB host mode) has been received from the accessory. If the USB connection is not currently configured such that the accessory can use it to send PCD-specific protocol commands, another transport that has been configured (e.g., UART or a wireless transport) can be used for the command. If a host mode command is received at block <b>607</b>, the PCD can enter the USB host mode even if no resistance R<sub>ID </sub>or a resistance R<sub>ID </sub>not associated with host mode was sensed at block <b>606</b>.</p>
<p id="p-0060" num="0059">Thus, the PCD can entersUSB host mode either in response to sensing the appropriate resistance R<sub>ID </sub>at block <b>606</b> or receiving a command requesting host mode at block <b>607</b>. Entering host mode can include various actions. For example, at block <b>608</b>, the PCD can provide power to the accessory, e.g., via V<sub>P </sub>pin <b>510</b>(<b>5</b>). The power provided to the accessory can be the same as or different from standard USB power levels, as described above. At block <b>610</b>, the PCD can receive enumeration data from the accessory (which is operating in USB device mode) via D+/D&#x2212; pins <b>510</b>(<b>2</b>), <b>510</b>(<b>3</b>). Enumeration can be implemented according to USB standards, with the accessory providing various identifiers such as a vendor identifier and a model identifier. In some embodiments, the enumeration data can also include data specific to interaction with the PCD, such as whether the accessory supports communication using a PCD-specific protocol via the USB connection.</p>
<p id="p-0061" num="0060">On the other hand, if block <b>606</b> results in a determination that the sensed resistance R<sub>ID </sub>does not correspond to the resistance associated with a request for the USB host mode of the PCD and block <b>607</b> results in a determination that no command requesting USB host mode has been received, then the PCD can enter a USB device mode. For example, at block <b>612</b>, the PCD can receive USB power (e.g., 5 V) from the accessory, e.g., via V<sub>BUS </sub>pin <b>510</b>(<b>4</b>). At block <b>614</b>, the PCD can provide enumeration data to the accessory (which is acting as a USB host) via D+/D&#x2212; pins <b>510</b>(<b>2</b>), <b>510</b>(<b>3</b>). Similarly to the case where the PCD is acting as USB host, enumeration can be implemented according to USB standards, in this case with the PCD providing various identifiers such as a vendor identifier and a model identifier.</p>
<p id="p-0062" num="0061">After enumeration completes, the PCD and accessory can begin to exchange signals via the USB D+ and D&#x2212; pins, regardless of which of the two is the USB host. Thus, for example, the PCD can provide USB digital audio to the accessory, or the accessory can transfer various data files to or from the PCD, or the like.</p>
<p id="p-0063" num="0062">In some embodiments, the PCD can control the availability of USB functionality after enumeration. For example, at block <b>620</b>, regardless of whether the PCD or accessory acts as USB host, the PCD can determine whether the accessory supports communication using a PCD-specific protocol via the USB port or in some instances another port. If the PCD-specific protocol is not supported, then process <b>600</b> can exit (block <b>622</b>). In some embodiments, the PCD can permit the accessory to use at least some USB functionality even if the PCD-specific protocol is not supported; in other embodiments, the PCD locks out further USB communication with any accessory that does not support the PCD-specific protocol.</p>
<p id="p-0064" num="0063">If the PCD-specific protocol is supported, then at block <b>624</b>, the PCD can receive identification data from the accessory. This data can include, e.g., a list of which lingoes of the PCD-specific protocol are supported by the accessory, information as to the accessory's preferences for initial configuration (such as whether various inputs and/or outputs should be enabled or disabled), and so on. In some embodiments, the identification data can be sent by the accessory using one or more commands of a general lingo of a PCD-specific protocol via the USB transport link that has been established.</p>
<p id="p-0065" num="0064">At block <b>626</b>, the PCD can initiate an authentication process with the accessory. In some embodiments, the authentication operation can include verifying a digital certificate provided by the accessory and testing a cryptological digital signature provided by the accessory against a public key associated with the digital certificate. In some embodiments, authentication operations may be facilitated using an authentication controller that can be embedded into PCD I/O interface <b>432</b> of accessory <b>420</b> as shown in <figref idref="DRAWINGS">FIG. 4</figref>. In other embodiments, an authentication controller may be embedded in a cable connecting the accessory to the PCD, and authentication for the USB connection can be provided by a controller that communicates using pins other than the USB pins.</p>
<p id="p-0066" num="0065">At block <b>628</b>, it is determined whether the authentication process succeeded. If so, then at block <b>630</b>, the PCD can unlock USB functionality for use by the accessory. For example, in some embodiments, the PCD can permit the accessory to enumerate and send certain commands of the PCD-specific protocol via the USB port without first having successfully authenticated. Following block <b>630</b>, communication can continue (block <b>636</b>) until the connection is terminated. In some embodiments, an established USB connection can be used at block <b>636</b> to exchange commands of the PCD-specific protocol with USB as the transport.</p>
<p id="p-0067" num="0066">In some embodiments, communication at block <b>636</b> can include changing the mode of the USB connection. In some embodiments, after initially establishing a configuration for the USB connection, the accessory can change the established configuration, e.g., by changing R<sub>ID </sub>or by sending a SetUSBMode command. Depending on implementation, sending of a SetUSBMode command using USB as the transport might or might not be supported; if it is not, another transport (e.g., UART or wireless) can be used.</p>
<p id="p-0068" num="0067">If, at block <b>628</b>, it is determined that the authentication process failed, then at block <b>632</b>, the PCD can notify the accessory of the authentication failure, and process <b>600</b> can end (block <b>634</b>). In this case, the PCD can block the accessory from accessing PCD functionality such as commands of the PCD-specific protocol or USB functions such as file access, digital audio transfer, or the like. Unauthorized USB functions can be blocked, e.g., by the PCD refusing to respond to requests from the accessory (or sending error messages in response to such requests) and/or by the PCD not initiating certain USB operations such as audio output. In some embodiments, the PCD can selectively block or permit access to USB functionality regardless of whether it is currently operating in USB host or USB device mode.</p>
<p id="p-0069" num="0068">It will be appreciated that the process described herein is illustrative and that variations and modifications are possible. Steps described as sequential may be executed in parallel, order of steps may be varied, and steps may be modified, combined, added or omitted. For example, in some embodiments, the accessory and PCD can initially establish communication using a transport other than USB (e.g., UART or a wireless transport) and can perform the authentication process of the PCD-specific protocol before configuring the USB connection. In some embodiments of this kind, the PCD can disregard accessory requests for a particular USB configuration if the authentication fails.</p>
<p id="p-0070" num="0069">Some embodiments may provide only hardware control of the USB mode (e.g., using an identification resistor), only software control (e.g., using a mode-selection command of a PCD-specific protocol), or a combination of the two. For example, an identification resistor can be used to establish an initial configuration, which can later be changed by a mode-selection command. Alternatively, the PCD can disregard (or treat as error) any received mode-selection command that conflicts with a mode selected based on an identification resistor.</p>
<p id="p-0071" num="0070">In some embodiments, a PCD operating in USB host mode can support multiple concurrently connected USB devices. If, in such an arrangement, an accessory requests that the PCD switch to USB device mode while other USB devices are connected, the PCD can disregard the request and/or generate an error message to the requesting accessory.</p>
<p id="p-0072" num="0071">Embodiments described herein thus provide flexible communication between a PCD and a range of different accessories by allowing the PCD to operate in either a USB host or USB device mode and allowing the accessory to signal its preferred mode to the PCD.</p>
<p id="p-0073" num="0072">While the invention has been described with respect to specific embodiments, one skilled in the art will recognize that numerous modifications are possible. For example, a &#x201c;PCD&#x201d; refers generally to any portable electronic device with any form of communication and/or media playback capability; a broad range of functionality may be incorporated. Similarly, the term &#x201c;accessory&#x201d; includes any electronic device capable of docking or otherwise connecting with a PCD.</p>
<p id="p-0074" num="0073">USB is used herein as an example of an asymmetric protocol, where the term &#x201c;asymmetric protocol&#x201d; refers generally to a protocol for connecting two electronic devices in which each electronic device plays a distinct role. In the context of USB, the roles are commonly known as &#x201c;host&#x201d; and &#x201c;device,&#x201d; and that terminology is used herein to distinguish two different roles. However, it is understood that a variety of asymmetric protocols exist and the roles can be identified under other nomenclature (such as &#x201c;master&#x201d; and &#x201c;slave&#x201d; or &#x201c;A-type&#x201d; and &#x201c;B-type&#x201d; or &#x201c;first mode&#x201d; and &#x201c;second mode&#x201d;). Techniques similar to those described herein can be applied to any other asymmetric protocol, thus allowing a connected PCD to change its role on a per-connection basis. Accordingly, the present invention is not limited to the context of USB but can be used in connection with any asymmetric protocol and any transport including wired and/or wireless transports.</p>
<p id="p-0075" num="0074">Embodiments of the present invention can be realized using any combination of dedicated components and/or programmable processors and/or other programmable devices. The various processes described herein can be implemented on the same processor or different processors in any combination. Accordingly, where components are described as being configured to perform certain operations, such configuration can be accomplished, e.g., by designing electronic circuits to perform the operation, by programming programmable electronic circuits (such as microprocessors) to perform the operation, or any combination thereof. Processes can communicate using a variety of techniques including but not limited to conventional techniques for interprocess communication, and different pairs of processes may use different techniques, or the same pair of processes may use different techniques at different times. Further, while the embodiments described above may make reference to specific hardware and software components, those skilled in the art will appreciate that different combinations of hardware and/or software components may also be used and that particular operations described as being implemented in hardware might also be implemented in software or vice versa.</p>
<p id="p-0076" num="0075">Computer programs incorporating various features of the present invention may be encoded on various computer readable storage media; suitable media include magnetic disk or tape, optical storage media such as compact disk (CD) or DVD (digital versatile disk), flash memory, and the like. Computer readable media encoded with the program code may be packaged with a compatible electronic device, or the program code may be provided separately from electronic devices (e.g., via Internet download).</p>
<p id="p-0077" num="0076">Thus, although the invention has been described with respect to specific embodiments, it will be appreciated that the invention is intended to cover all modifications and equivalents within the scope of the following claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method for use in a portable communication device, the method comprising:
<claim-text>establishing, by the portable communication device, a non-USB connection for communication with an accessory;</claim-text>
<claim-text>determining, by the portable communication device, whether a mode-selecting signal is received from the accessory via the non-USB connection, the mode-selecting signal indicating whether the portable communication device is to operate in a first mode or a second mode of a USB protocol;</claim-text>
<claim-text>in the event that the mode-selecting signal is received from the accessory, initializing, by the portable communication device, a USB connection for communication with the accessory in the mode indicated by the received mode-selecting signal; and</claim-text>
<claim-text>in the event that a mode-selecting signal is not received from the accessory, initializing the USB connection in the first mode of the USB protocol.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein the non-USB connection to the accessory is established using a connector having a plurality of pins and wherein determining whether the mode-selecting signal is received from the accessory includes:
<claim-text>sensing a resistance across two pins of the plurality of pins; and</claim-text>
<claim-text>determining whether the sensed resistance satisfies a first criterion,</claim-text>
<claim-text>wherein the second mode is indicated in the event that the sensed resistance satisfies the first criterion.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00002">claim 2</claim-ref> wherein the two pins that are used for sensing the resistance are used exclusively for sensing the resistance.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00002">claim 2</claim-ref> wherein the first mode corresponds to a device mode of the USB protocol, and the second mode corresponds to a host mode of the USB protocol.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00004">claim 4</claim-ref> further comprising:
<claim-text>determining whether the sensed resistance satisfies a second criterion,</claim-text>
<claim-text>wherein operating the portable communication device in a first mode of the asymmetric communication protocol includes:</claim-text>
<claim-text>operating the portable communication device in a Human Interface Device configuration of a device mode of the USB protocol in the event that the sensed resistance satisfies the second criterion; and</claim-text>
<claim-text>operating the portable communication device in a mass storage configuration of the device mode of the USB protocol in the event that the sensed resistance does not satisfy the second criterion.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein the portable communication device further supports a device-specific protocol, the method further comprising:
<claim-text>initiating an authentication operation with the accessory according to the device-specific protocol;</claim-text>
<claim-text>determining whether the authentication operation is successful; and</claim-text>
<claim-text>in the event that the authentication operation is not successful, blocking the accessory from using at least one function associated with the asymmetric communication protocol.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein the connection to the accessory is established using a connector having a plurality of pins and wherein:
<claim-text>operating the portable communication device in the first mode includes receiving a first voltage level on a first power pin of the plurality of pins, and</claim-text>
<claim-text>operating the portable communication device in the second mode includes providing a second voltage level on a second power pin of the plurality of pins, wherein the first voltage level is greater than the second voltage level.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein determining whether a mode-selecting signal is received from the accessory includes determining whether a mode-selecting command has been received from the accessory.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. A portable communication device comprising:
<claim-text>a processor;</claim-text>
<claim-text>a power control module coupled to the processor; and</claim-text>
<claim-text>an accessory interface coupled to the processor and the power control module, the accessory interface including:</claim-text>
<claim-text>a connector having a plurality of pins, the plurality of pins including a data pin associated with a USB protocol, a power input pin coupled to the power control module, a power output pin coupled to the power control module, and a pair of pins associated with a non-USB connection; and</claim-text>
<claim-text>a sensor connected to detect a resistance applied across the pair of pins associated with a non-USB connection and configured to generate a signal indicative of the detected resistance,</claim-text>
<claim-text>wherein the power control module is configured to determine, based on the signal indicative of the detected resistance, whether to provide a first power to the power output pin or to receive a second power from the power input pin; and</claim-text>
<claim-text>wherein the accessory interface is configured to determine, based at least in part on the signal indicative of the detected resistance, whether to operate in a first mode or a second mode of the USB protocol.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The portable communication device of <claim-ref idref="CLM-00009">claim 9</claim-ref> wherein the power control module is further configured such that the first power and the second power are at different voltage levels.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The portable communication device of <claim-ref idref="CLM-00009">claim 9</claim-ref> wherein the accessory interface is further configured to receive a mode-selection command from the accessory and to determine whether to operate in the first mode or the second mode of the asymmetric communication protocol based in part on the identification signal and in part on the received mode-selection command.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. An accessory for use with a portable communication device, the accessory comprising:
<claim-text>a controller operable in a device mode of a Universal Serial Bus (USB) protocol;</claim-text>
<claim-text>a connector coupled to the controller and adapted to connect to a portable communication device, the connector having a plurality of pins, the plurality of pins including a USB power pin, a USB ground pin, two USB data pins, and a pair of pins associated with a non-USB connection; and</claim-text>
<claim-text>a resistor connected between the pins associated with a non-USB connection, wherein the resistor has a resistance value indicating to the portable communication device that the portable communication device should operate in a host mode of the USB protocol.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The accessory of <claim-ref idref="CLM-00012">claim 12</claim-ref> wherein the plurality of pins further includes a power input pin to receive power from the portable communication device.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The accessory of <claim-ref idref="CLM-00013">claim 13</claim-ref> wherein the power received from the portable communication device is at a lower voltage level than a standard USB voltage level.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The accessory of <claim-ref idref="CLM-00014">claim 14</claim-ref> wherein the power received from the portable communication device is at a voltage level of approximately 3.3 volts.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. A method for use in an accessory, the method comprising:
<claim-text>establishing a connection to a portable communication device using a connector having a plurality of pins, wherein the portable communication device is switchable between a first mode and a second mode of USB protocol;</claim-text>
<claim-text>applying a resistance across a first pin and a second pin of the plurality of pins, wherein the first pin and the second pin are associated with a non-USB connection, wherein the resistance has a value indicating to the portable communication device that the accessory operates in the first mode of the USB protocol;</claim-text>
<claim-text>receiving power from the portable communication device via a third pin of the plurality of pins; and</claim-text>
<claim-text>communicating with the portable communication device using the first device mode of the asymmetric communication protocol.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The method of <claim-ref idref="CLM-00016">claim 16</claim-ref> wherein and the first mode is a device mode of the USB protocol.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The method of <claim-ref idref="CLM-00017">claim 17</claim-ref> wherein receiving the power from the portable communication device includes receiving the power at a voltage level lower than a standard voltage level of the USB protocol.</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The method of <claim-ref idref="CLM-00017">claim 17</claim-ref> wherein communicating with the portable communication device using the first mode of the USB protocol includes sending USB-compliant enumeration data to the portable communication device.</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The method of <claim-ref idref="CLM-00019">claim 19</claim-ref> further comprising, after sending the USB-compliant enumeration data:
<claim-text>sending a command to the portable communication device, wherein the command is one of a plurality of commands of a device specific protocol supported by the portable communication device,</claim-text>
<claim-text>wherein sending the command includes using the USB protocol as a transport.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
