<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08624993-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08624993</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13210951</doc-number>
<date>20110816</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2009-038849</doc-number>
<date>20090223</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>149</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>N</subclass>
<main-group>5</main-group>
<subgroup>228</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>3482221</main-classification>
<further-classification>3482081</further-classification>
<further-classification>34820899</further-classification>
</classification-national>
<invention-title id="d2e71">Video image pickup device</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5565921</doc-number>
<kind>A</kind>
<name>Sasaki et al.</name>
<date>19961000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>37524013</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6151965</doc-number>
<kind>A</kind>
<name>Watarai</name>
<date>20001100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 7350416</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>6690732</doc-number>
<kind>B2</kind>
<name>Naito et al.</name>
<date>20040200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>7881543</doc-number>
<kind>B2</kind>
<name>Okada et al.</name>
<date>20110200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>8363726</doc-number>
<kind>B2</kind>
<name>Murabayashi et al.</name>
<date>20130100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>37524016</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2001/0017887</doc-number>
<kind>A1</kind>
<name>Furukawa et al.</name>
<date>20010800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2007/0273750</doc-number>
<kind>A1</kind>
<name>Tanaka</name>
<date>20071100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>348 1401</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2009/0033746</doc-number>
<kind>A1</kind>
<name>Brown et al.</name>
<date>20090200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>348155</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>JP</country>
<doc-number>09-200769</doc-number>
<date>19970700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>JP</country>
<doc-number>09-326955</doc-number>
<date>19971200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>JP</country>
<doc-number>2001-245303</doc-number>
<date>20010900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>JP</country>
<doc-number>2001-251629</doc-number>
<date>20010900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>JP</country>
<doc-number>2001-352545</doc-number>
<date>20011200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>JP</country>
<doc-number>2006-013570</doc-number>
<date>20060100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>JP</country>
<doc-number>2006-166233</doc-number>
<date>20060600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>35</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>3482081</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>34820899</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>3482181</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>3482221</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>34833301-33304</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>6</number-of-drawing-sheets>
<number-of-figures>8</number-of-figures>
</figures>
<us-related-documents>
<continuation>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>PCT/JP2009/007280</doc-number>
<date>20091225</date>
</document-id>
<parent-status>PENDING</parent-status>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>13210951</doc-number>
</document-id>
</child-doc>
</relation>
</continuation>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20110298942</doc-number>
<kind>A1</kind>
<date>20111208</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Uchida</last-name>
<first-name>Tomokazu</first-name>
<address>
<city>Osaka</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Ogawa</last-name>
<first-name>Masahiro</first-name>
<address>
<city>Osaka</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Hojo</last-name>
<first-name>Masahiro</first-name>
<address>
<city>Osaka</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Uchida</last-name>
<first-name>Tomokazu</first-name>
<address>
<city>Osaka</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Ogawa</last-name>
<first-name>Masahiro</first-name>
<address>
<city>Osaka</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Hojo</last-name>
<first-name>Masahiro</first-name>
<address>
<city>Osaka</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>McDermott Will and Emery LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Panasonic Corporation</orgname>
<role>03</role>
<address>
<city>Osaka</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Aggarwal</last-name>
<first-name>Yogesh</first-name>
<department>2661</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">An image processor detects an on-screen motion of a photographic subject in video image data generated by an image sensor provided in a camera body and outputs a photographic subject motion information. A sensor detects a motion of the camera body and outputs the detected motion as a camera body motion information. A scene decision encoding controller decides an image pickup condition of the video image data based on the photographic subject motion information and the camera body motion information, and performs an encoding amount regulation control suitable for the decided image pickup condition to an image compression processor.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="142.32mm" wi="242.57mm" file="US08624993-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="254.17mm" wi="162.81mm" orientation="landscape" file="US08624993-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="219.37mm" wi="150.96mm" file="US08624993-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="198.88mm" wi="157.82mm" file="US08624993-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="148.51mm" wi="175.85mm" file="US08624993-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="210.06mm" wi="135.47mm" file="US08624993-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="225.55mm" wi="172.13mm" orientation="landscape" file="US08624993-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<p id="p-0002" num="0001">This application is a continuation of International Application No. PCT/JP2009/007280, whose international filing date is Dec. 25, 2009 which in turn claims the benefit of Japanese Patent Application No. 2009-038849, filed on Feb. 23, 2009, the disclosures of which Applications are incorporated by reference herein. The benefit of the filing and priority dates of the International and Japanese Applications is respectfully requested.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">FIELD OF THE INVENTION</heading>
<p id="p-0003" num="0002">The present invention relates to a video image pickup device, more particularly to a technology for solving the conventional problem of trade off between a moderate encoding amount and a good image quality in an encoding process to shoot a video image where a strenuous motion is generated. Examples of a product loaded with the video image pickup device according to the present invention are digital still cameras and digital video cameras.</p>
<heading id="h-0002" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0004" num="0003">The inter-frame encoding characterized in that frames of a video image signal are closely interrelated is widely used as a technique for data compression in video image signals. So far were introduced various methods of the inter-frame encoding, many of which are featured by encoding an inter-frame difference of a video image signal. In an encoding technique often employed as the inter-frame encoding, orthogonal transform is used, in which two-dimensional image correlation is efficiently availed in a differential signal. The internationally standardized video image encoding for storage media such as ISO/IEC 11172-2 (generally called MPEG1), in particular, employs an encoding technique based on DCT (Discrete Cosine Transform) which is an example of the orthogonal transform.</p>
<p id="p-0005" num="0004">In the case where a target frame is an inter-frame encoding frame, the inter-frame encoding technique calculates an inter-frame differential value of an image signal and transforms the calculated differential value into a variable code based on, for example, Huffman encoding. The inter-frame encoding in which the differential value thus transformed increases inter-frame correlation after motion compensation because of the characteristics of a video image, therefore, allocates a short variable code to 0 or a differential value approximate to 0 so that a compression efficiency is improved. It is unnecessary to encode any data of divided blocks resulting in 0 after motion compensating prediction, which further improves the compression efficiency.</p>
<p id="p-0006" num="0005">It is an indispensable step in data compression of video image signals to adjust an encoding amount (rate control). A known technique to adjust the encoding amount is to change a quantization step, more specifically, the quantization step used in data encoding is decided by monitoring a generated encoding amount. A virtual buffer which accepts generated codes and outputs them based on a constant rate (fixed rate) is prepared, and the quantization step is calculated in proportion to a level of buffer fullness. More specifically, the quantization step is increased when the buffer fullness is elevated, while the quantization step is decreased when the buffer fullness goes down, so that the encoding is decelerated with a large quantization step and the encoding is accelerated with a small quantization step. Therefore, the generated encoding amount can be constantly regulated on average when the buffer fullness is controlled to stay at, for example, around 50%.</p>
<p id="p-0007" num="0006">In any scene where there is a large motion, the differential encoding becomes difficult, increasing the encoding amount even if the quantization step is changed. Although the quantization step is increased to adjust the encoding amount, an image quality is unavoidably deteriorated. To avoid the image quality deterioration when the quantization step is changed to adjust the encoding amount, for example, the motion of each frame is evaluated based on information on camera shake or motion vectors, and the quantization step is increased in any frame decided as having a large motion as compared to a preceding frame so that the encoding amount is controlled.</p>
<p id="p-0008" num="0007">In the quantization step change method, a fixed rate is used to control the encoding amount. Apart from controlling the encoding amount based on a fixed rate, a variable rate may be employed, in which the quantization step is fixed to allow the encoding amount to be variable. More specifically, the quantization step is decided in advance so that the image quality does not fall below an expected quality level and then fixed for the encoding process.</p>
<heading id="h-0003" level="1">PRIOR ART DOCUMENT</heading>
<heading id="h-0004" level="1">Patent Document</heading>
<p id="p-0009" num="0000">
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0008">Patent Document 1: Unexamined Japanese Patent Applications Laid-Open No. 2006-13570</li>
    <li id="ul0001-0002" num="0009">Patent Document 2: Unexamined Japanese Patent Applications Laid-Open No. 2006-166233</li>
</ul>
</p>
<heading id="h-0005" level="1">SUMMARY OF THE INVENTION</heading>
<heading id="h-0006" level="1">Problem to be Solved by the Invention</heading>
<p id="p-0010" num="0010">Though an encoding efficiency is improved when inter-frame differential information is used to encode data, inter-frame correlation is weakened or completely lost when a strenuous motion is generated between the frames. Therefore, it becomes difficult to encode data, and intra-frame information alone is available for the encoding process. The intra-frame encoding process, however, is not as efficient as the inter-frame differential encoding process, consequently increasing the encoding amount.</p>
<p id="p-0011" num="0011">Adjusting the encoding amount based on a fixed rate, the encoding amount increases in any frames where a strenuous motion is generated, which makes it necessary to adjust the encoding amount in subsequent frames. This unfavorably increases the quantization step to an overly high value, causing significant deterioration of the image quality, and the deterioration is eminent particularly in any frames including low frequency components.</p>
<p id="p-0012" num="0012">To avoid the image quality deterioration, the quantization step may be increased based on the information of camera shake to control the encoding amount. However, a frame having a strenuous motion is degraded because of its large quantization step, and the degraded frame affects other frames that follow.</p>
<p id="p-0013" num="0013">The encoding amount may be controlled by reducing high frequency components in pre-encoding YC data, in which, however, a moving photographic subject and a camera moving to follow the photographic subject are all similarly captured as a motion. As a result, the high frequency components are unnecessarily reduced in video images particularly wanted by a photographer.</p>
<p id="p-0014" num="0014">The present invention was accomplished to solve these conventional technical problems. A main object of the present invention is to balance a moderate encoding amount and a good image quality by solving the conventional problem of trade off therebetween when there is a large motion of a photographic subject image because of a positional relationship of the subject relative to a screen.</p>
<heading id="h-0007" level="1">Means for Solving the Problem</heading>
<p id="p-0015" num="0015">1) The present invention provides a scene decision encoding controller configured to decide an image pickup condition before starting an encoding process. The scene decision encoding controller decides the video image pickup condition based on two different motion informations; information on motion of a camera body, and information on motion of a photographic subject detected on a screen, and outputs a decision result thereby obtained as encoding control information. The on-screen motion information of the photographic subject is generated by an image processor configured to signal-process video image data inputted from an image sensor. For example, angular rate information used for lens control may be used as the camera body motion information.</p>
<p id="p-0016" num="0016">A video image pickup device according to the present invention comprises:
<ul id="ul0002" list-style="none">
    <li id="ul0002-0001" num="0017">an image processor configured to detect an on-screen motion of a photographic subject in video image data generated by an image sensor provided in a camera body and output a photographic subject motion information;</li>
    <li id="ul0002-0002" num="0018">an image compression processor configured to compress the video image data into codes;</li>
    <li id="ul0002-0003" num="0019">a sensor configured to detect a motion of the camera body and output the detected motion as a camera body motion information; and</li>
    <li id="ul0002-0004" num="0020">a scene decision encoding controller configured to decide an image pickup condition of the video image data based on the photographic subject motion information and the camera body motion information, wherein</li>
    <li id="ul0002-0005" num="0021">the scene decision encoding controller performs an encoding amount regulation control suitable for the decided image pickup condition to the image compression processor.</li>
</ul>
</p>
<p id="p-0017" num="0022">In the video image pickup device according to an aspect of the present invention, the image pickup condition is a condition where an actual motion of the photographic subject and the motion of the camera body are combined. In the video image pickup device according to another aspect of the present invention, the scene decision encoding controller decides the image pickup condition based on combination of a degree of the motion of the camera body indicated by the camera body motion information and a degree of the on-screen motion of the photographic subject in the video image data indicated by the photographic subject motion information.</p>
<p id="p-0018" num="0023">Examples of the image pickup condition are; &#x201c;on-screen motion of photographic subject&#x201d;, &#x201c;motion of camera body alone&#x201d;, &#x201c;subject-following motion of camera body&#x201d;, and &#x201c;neither photographic subject nor camera body in motion&#x201d;. A situation represented by &#x201c;on-screen motion of photographic subject&#x201d; is that the camera body is at rest but the photographic subject image actually moving shows a motion on the screen. A situation represented by &#x201c;motion of camera body alone&#x201d; is that the photographic subject is at rest but the camera body alone moves, making it appear that the photographic subject is showing a relative motion on the screen&#x201d;. A situation represented by &#x201c;subject-following motion of camera body&#x201d; is that a photographer moves the camera body to follow the motion of the photographic subject so that the moving photographic subject constantly stays on the screen. This situation is created when the photographer is capturing the video images of the photographic subject while trying to keep the subject in a predetermined region on the screen, including &#x201c;follow shot&#x201d; which is an image shooting technique when digital still cameras are used. A situation represented by &#x201c;neither photographic subject nor camera body in motion&#x201d; is that the camera body and the photographic subject are both at rest. The scene decision encoding controller decides the image pickup condition based on combination of the motion information of the camera body and the on-screen motion information of the photographic subject and outputs the decision result thereby obtained as the encoding control information. The image compression processor or an image compression/decompression processor which received the encoding control information compresses the video image data into codes as requested by the encoding control information. Thus, the encoding amount regulation control suitable for the decided image pickup condition is flexibly selected so that the encoding amount is controlled without deteriorating an image quality.</p>
<p id="p-0019" num="0024">When, for example, the encoding control information indicates &#x201c;subject-following motion of camera body&#x201d;, the photographer is taking video images that are very important to him. Therefore, the encoding amount should not be reduced so that compressed video image data avoids deterioration of an image quality, thereby achieving a high definition.</p>
<p id="p-0020" num="0025">When, for example, the encoding control information indicates &#x201c;motion of camera body alone&#x201d;, it is preferable to remove high frequency components of inputted YC data to thereby reduce the encoding amount by taking advantage of the visual characteristics that deterioration of an image quality is unlikely to be noticeable when a whole image is in motion.</p>
<p id="p-0021" num="0026">When, for example, the encoding control information indicates &#x201c;on-screen motion of photographic subject&#x201d;, a compression rate is increased to reduce the encoding amount.</p>
<p id="p-0022" num="0027">When, for example, the encoding control information indicates &#x201c;neither photographic subject nor camera body in motion&#x201d;, it is unnecessary to control the encoding amount.</p>
<p id="p-0023" num="0028">2) In the video image pickup device according to still another aspect of the present invention, the sensor detects an angular rate applied to the camera body as the motion of the camera body. The angular rate is a preferable example of the camera body motion information.</p>
<p id="p-0024" num="0029">3) The video image pickup device according to still another aspect of the present invention further comprises:
<ul id="ul0003" list-style="none">
    <li id="ul0003-0001" num="0030">a lens controller configured to give a motion to balance out the angular rate to a lens unit which condenses an imaging light on the image sensor to thereby compensate for an on-screen motion of the photographic subject generated by the angular rate which should be disregarded; and</li>
    <li id="ul0003-0002" num="0031">an angular rate sensor configured to detect the angular rate and output the detected angular rate to the lens controller, wherein</li>
    <li id="ul0003-0003" num="0032">the angular rate sensor serves as the sensor.</li>
</ul>
</p>
<p id="p-0025" num="0033">According to the mode wherein the angular rate sensor serves as the sensor, the required structural elements can be lessened.</p>
<p id="p-0026" num="0034">4) In the video image pickup device according to still another aspect of the present invention, the image processor detects a representative point motion information obtained from inter-frame matching of a representative point defined on a screen as the photographic subject motion information. The representative point inter-frame matching is used to correct camera shake, in which a representative point of a block (curb) in an image data region is defined to detect how far the point transfers in a subsequent frame. The aspect of the present invention, wherein the motion information obtained from the representative point inter-frame matching is thus used as the photographic subject motion information, can improve the cost efficiency of the device because of sharing some of the structural elements.</p>
<p id="p-0027" num="0035">5) In the video image pickup device according to still another aspect of the present invention,
<ul id="ul0004" list-style="none">
    <li id="ul0004-0001" num="0036">the image processor further detects a frequency distribution information in the video image data, and</li>
    <li id="ul0004-0002" num="0037">the scene decision encoding controller controls the image compression processor so that the encoding amount regulation control is performed suitably for the decided image pickup condition in each of frequency bands divided based on the frequency distribution information in the video image data.</li>
</ul>
</p>
<p id="p-0028" num="0038">According to the aspect of the present invention, any image including many high frequency components can be compressed with a high compression rate so that the encoding amount is controlled.</p>
<p id="p-0029" num="0039">6) In the video image pickup device according to still another aspect of the present invention,
<ul id="ul0005" list-style="none">
    <li id="ul0005-0001" num="0040">the sensor detects an angular rate applied to the camera body as the motion of the camera body,</li>
    <li id="ul0005-0002" num="0041">the image processor detects a representative point motion information obtained from inter-frame matching of a representative point defined on a screen as the photographic subject motion information,</li>
    <li id="ul0005-0003" num="0042">the image processor further detects a frequency distribution information in the video image data, and</li>
    <li id="ul0005-0004" num="0043">the scene decision encoding controller selects one of the angular rate, the representative point motion information, and the frequency distribution information depending on an intended purpose of the video image pickup device and uses the selected information to decide the image pickup condition.</li>
</ul>
</p>
<p id="p-0030" num="0044">According to the aspect of the present invention, the most suitable information is flexibly used depending on an intended purpose of the video image pickup device so that the image pickup condition is more accurately decided.</p>
<p id="p-0031" num="0045">7) In the video image pickup device according to still another aspect of the present invention, the scene decision encoding controller differently combines the angular rate, the representative point motion information, and the frequency distribution information depending on an intended purpose of the video image pickup device and uses the combined information to decide the image pickup condition. According to the aspect of the present invention, the most suitably combined information is used depending on an intended purpose of the video image pickup device so that the image pickup condition is more accurately decided.</p>
<p id="p-0032" num="0046">8) In the video image pickup device according to still another aspect of the present invention, the scene decision encoding controller performs the encoding amount regulation control by filtering/removing high frequency components.</p>
<p id="p-0033" num="0047">Under the image pickup condition where there is a very strenuous motion of the photographic subject relative to the screen (for example, &#x201c;on-screen motion of photographic subject&#x201d;, &#x201c;motion of camera body alone&#x201d;, and &#x201c;subject-following motion of camera body&#x201d; as described earlier), the high frequency components are removed to improve a compression efficiency and avoid deterioration of an image quality.</p>
<p id="p-0034" num="0048">9) In the video image pickup device according to still another aspect of the present invention, the scene decision encoding controller performs a filtering setting in multiple stages per a plurality of frames in the filtering/removal of the high frequency components.</p>
<p id="p-0035" num="0049">When the higher frequency components are removed, the filtering setting is performed not per frame but per a plurality of frames in multiple stages so that the high frequency components are smoothly removed stepwise. As a result, any sudden changes in the images can be prevented from happening.</p>
<p id="p-0036" num="0050">10) In the video image pickup device according to still another aspect of the present invention, the scene decision encoding controller performs the encoding amount regulation control by skipping a frame.</p>
<p id="p-0037" num="0051">Under the image pickup condition where there is a very strenuous motion of the photographic subject relative to the screen, the frames are skipped so that the encoding amount can be more effectively reduced.</p>
<p id="p-0038" num="0052">11) In the video image pickup device according to still another aspect of the present invention, the scene decision encoding controller performs the encoding amount regulation control by inserting a dummy frame.</p>
<p id="p-0039" num="0053">Under the image pickup condition where there is a very strenuous motion of the photographic subject relative to the screen, the dummy frame is inserted so that the encoding amount can be more effectively reduced.</p>
<p id="p-0040" num="0054">12) In the video image pickup device according to still another aspect of the present invention, the scene decision encoding controller performs the encoding amount regulation control by multiplexing a frame.</p>
<p id="p-0041" num="0055">Under the image pickup condition where there is a very strenuous motion of the photographic subject relative to the screen, the frame is multiplexed so that the encoding amount can be more effectively reduced.</p>
<p id="p-0042" num="0056">13) In the video image pickup device according to still another aspect of the present invention, the scene decision encoding controller performs the encoding amount regulation control by increasing a quantization step.</p>
<p id="p-0043" num="0057">Under the image pickup condition where there is a very strenuous motion of the photographic subject relative to the screen, the compression efficiency is improved by increasing the quantization step so that the encoding amount can be more effectively reduced.</p>
<p id="p-0044" num="0058">14) In the video image pickup device according to still another aspect of the present invention, the scene decision encoding controller performs the encoding amount regulation control by performing one of the followings; filtering/removal of high frequency components, insertion of a dummy frame, multiplexing of a frame, and increasing of a quantization step.</p>
<p id="p-0045" num="0059">According to the aspect of the present invention, the encoding amount regulation control most suitable for the decided image pickup condition can be flexibly performed. As a result, the encoding amount can be more accurately regulated.</p>
<p id="p-0046" num="0060">15) In the video image pickup device according to still another aspect of the present invention, the scene decision encoding controller uses threshold values in multiple stages to decide the motion of the photographic subject.</p>
<p id="p-0047" num="0061">According to the aspect of the present invention, wherein the threshold values in multiple stages are selectively used, the encoding amount can be more flexibly regulated depending on the decided image pickup condition.</p>
<p id="p-0048" num="0062">16) In the video image pickup device according to still another aspect of the present invention, the scene decision encoding controller uses threshold values and selects one of the threshold values to be used depending on an encoding search range magnitude.</p>
<p id="p-0049" num="0063">In the case where there is too a strenuous motion of the photographic subject relative to the screen to stay within the search range of motion, inter-frame prediction is not possible, significantly increasing the encoding amount. Under the image pickup condition to be decided through the motion of the photographic subject, the motion of the photographic subject is likely to go beyond the search range of motion. According to the aspect of the present invention, the threshold value to be used to detect and decide the photographic subject motion information is chosen depending on the search range. Therefore, the encoding amount can be suitably regulated under the image pickup condition where there is too a strenuous motion of the photographic subject relative to the screen.</p>
<p id="p-0050" num="0064">17) In the video image pickup device according to still another aspect of the present invention, the scene decision encoding controller uses threshold values and selects one of the threshold values to be used depending on an encoding frame rate or a bit rate.</p>
<p id="p-0051" num="0065">The encoding amount allocated to a frame is variable depending on the frame rate or bit rate. According to the aspect of the present invention wherein the threshold value to be used is chosen depending on the encoding frame rate or bit rate, the encoding amount can be regulated in such a flexible manner that follows the encoding amount allocated to each frame.</p>
<heading id="h-0008" level="1">Effect of the Invention</heading>
<p id="p-0052" num="0066">According to the present invention, the image pickup condition is decided based on the two different motion informations; camera body motion information, and photographic subject motion information, and the decision result thereby obtained is outputted as the encoding control information. Therefore, the image pickup condition can be divided into, for example, &#x201c;on-screen motion of photographic subject&#x201d;, &#x201c;motion of camera body alone&#x201d;, &#x201c;subject-following motion of camera body&#x201d;, and &#x201c;neither photographic subject nor camera body in motion&#x201d;, and the encoding amount can be suitably regulated depending on the image pickup condition decided at the time. As a result, the encoding amount can be controlled without deteriorating an image quality. The present invention is thus technically advantageous in that a moderate encoding amount and a good image quality are balanced by solving the conventional problem of trade off therebetween when the video image of the photographic subject has a strenuous motion because of a positional relationship of the subject relative to the screen.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0009" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0053" num="0067"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram illustrating a structure of a video image pickup device in a video image recording camera system according to an exemplary embodiment of the present invention.</p>
<p id="p-0054" num="0068"><figref idref="DRAWINGS">FIG. 2A</figref> is an illustration 1) of a representative point matching algorithm according to the exemplary embodiment.</p>
<p id="p-0055" num="0069"><figref idref="DRAWINGS">FIG. 2B</figref> is an illustration 2) of the representative point matching algorithm according to the exemplary embodiment.</p>
<p id="p-0056" num="0070"><figref idref="DRAWINGS">FIG. 2C</figref> is an illustration 3) of the representative point matching algorithm according to the exemplary embodiment.</p>
<p id="p-0057" num="0071"><figref idref="DRAWINGS">FIG. 3</figref> is a drawing of an operation of an angular rate sensor according to the exemplary embodiment.</p>
<p id="p-0058" num="0072"><figref idref="DRAWINGS">FIG. 4</figref> is a chart illustrating a motion decision method according to the exemplary embodiment.</p>
<p id="p-0059" num="0073"><figref idref="DRAWINGS">FIG. 5</figref> is a flow chart 1) illustrating an operation of the video image pickup device according to the exemplary embodiment.</p>
<p id="p-0060" num="0074"><figref idref="DRAWINGS">FIG. 6</figref> is a flow chart 2) illustrating the operation of the video image pickup device according to the exemplary embodiment.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0010" level="1">EXEMPLARY EMBODIMENTS FOR CARRYING OUT THE INVENTION</heading>
<p id="p-0061" num="0075">Hereinafter, an exemplary embodiment of a video image pickup device <b>12</b> according to the present invention is described in detail referring to <figref idref="DRAWINGS">FIG. 1</figref>. The video image pickup device <b>12</b> is a video image pickup device used in a video image recording camera system, comprising a sensor unit <b>1</b>, a lens controller <b>2</b>, an image processor <b>3</b>, an image compression/decompression processor <b>4</b>, a scene decision encoding controller <b>5</b>, an image display processor <b>6</b>, a CPU (Central Processing Unit) <b>7</b>, an external memory <b>8</b>, a display unit <b>9</b>, a recording medium <b>10</b>, and a lens unit <b>11</b>. Th video image pickup device <b>12</b> is housed in a camera body <b>20</b>.</p>
<p id="p-0062" num="0076">The sensor unit <b>1</b> comprises an image sensor <b>1</b><i>a </i>and an angular rate sensor <b>1</b><i>b</i>. The image sensor <b>1</b><i>a </i>fetches a video image and photoelectrically converts the fetched image to output a video image data including RGB information. The angular rate sensor <b>1</b><i>b </i>detects a motion of the camera body <b>20</b> as an angular rate and outputs a detection result thereby obtained as an angular rate information. The angular rate information is an example of the camera body motion information according to the present invention.</p>
<p id="p-0063" num="0077">The lens controller <b>2</b> gives a motion to balance out the angular rate detected by the angular rate sensor <b>1</b><i>b </i>to a predefined lens in the lens unit <b>11</b> to thereby correct any on-screen motion of a photographic subject generated by the angular rate which should be disregarded. To enable such a function, the lens controller <b>2</b> receives the angular rate information outputted from the angular rate sensor <b>1</b><i>b </i>and controls the direction of the lens unit <b>11</b> based on the received angular rate information. The lens controller <b>2</b> further outputs the received angular rate information to the scene decision encoding controller <b>5</b>.</p>
<p id="p-0064" num="0078">The image processor <b>3</b> obtains the RGB image data from the image sensor <b>1</b><i>a </i>and performs image corrections to the obtained image data such as noise reduction and signal level correction. The image processor <b>3</b> then converts the image-corrected image data into YC data and stores the YC data in the external memory <b>8</b>. Further, the image processor <b>3</b> performs a representative point matching process to the obtained image data and analyzes the frequency of the image data. Then, the image processor <b>3</b> outputs a representative point matching information (an example of the on-screen motion information of the photographic subject) and an image frequency distribution information obtained from the respective processes to the scene decision encoding controller <b>5</b>.</p>
<p id="p-0065" num="0079">The image compression/decompression processor <b>4</b> compresses the YC data read from the external memory <b>8</b> into codes and stores the compressed encoded data in the external memory <b>8</b>. Further, the image compression/decompression processor <b>4</b> reads the compressed encoded data from the external memory <b>8</b>, decompresses the read data, and stores the decompressed data in the external memory <b>8</b>.</p>
<p id="p-0066" num="0080">The scene decision encoding controller <b>5</b> obtains the angular rate information outputted from the lens controller <b>2</b> and the representative point matching information outputted from the image processor <b>3</b> and decides an image pickup condition based on these two different motion informations. Then, the scene decision encoding controller <b>5</b> generates an encoding control information based on a decision result thereby obtained and outputs the generated encoding control information. The image pickup condition is a condition where the motion of the camera body <b>12</b> and the motion of the photographic subject are combined. The scene decision encoding controller <b>5</b> decides the image pickup condition based on the combination of a degree of the motion of the camera body <b>12</b> (indicated by the camera body motion information) and a degree of the on-screen motion of the photographic subject in video image data (indicated by the photographic subject motion information).</p>
<p id="p-0067" num="0081">The image display processor <b>6</b> displays the YC data read from the external memory <b>8</b> in a manner suitable for the display unit <b>9</b>. The CPU <b>7</b> is in charge of controlling the overall operation of the device. The display unit <b>9</b> displays thereon the data outputted from the image display processor <b>6</b>. The encoded data read from the external memory <b>8</b> by the CPU <b>7</b> is written in the recording medium <b>10</b>. The lens unit <b>11</b> is an optical device which condenses an imaging light on the image sensor <b>1</b><i>a</i>, comprising a zoom lens capable of changing a focal distance continuously.</p>
<p id="p-0068" num="0082">The representative point matching process between frames carried out by the image processor <b>3</b> is described below. <figref idref="DRAWINGS">FIGS. 2A-2C</figref> are illustrations of an algorithm of the representative point inter-frame matching process. The representative point inter-frame matching process sets a block in an image date region (frame), and defines a representative point within the block (curb) to calculate how far the representative point transfers in a subsequent frame.</p>
<p id="p-0069" num="0083"><figref idref="DRAWINGS">FIG. 2A</figref> illustrates an image of a first frame. In the first frame, the image processor <b>3</b> defines P<b>1</b> as the representative point and retains information of the point P<b>1</b>. <figref idref="DRAWINGS">FIG. 2B</figref> illustrates an image of a second frame (frame immediately after the first frame). In the second frame, the image processor <b>3</b> searches how far in the second frame the point P<b>1</b> defined as the representative point in the first frame transferred. <figref idref="DRAWINGS">FIG. 2C</figref> illustrates the images of the first and second frames overlapped on each other. As is clear from <figref idref="DRAWINGS">FIG. 2C</figref>, the representative point P<b>1</b> defined in the first frame has transferred to a point P<b>2</b> in the second frame. A distance by which the point P<b>1</b> transferred is obtained as the degree of motion of the photographic subject, that is the on-screen motion information of the photographic subject. Thus, the photographic subject motion information is obtained as a result of the representative point inter-frame matching process.</p>
<p id="p-0070" num="0084">Describing the angular rate information outputted from the lens unit <b>2</b>, it is information of the degree of motion of the camera body <b>20</b> illustrated in <figref idref="DRAWINGS">FIG. 3</figref>, representing a detection result obtained by the angular rate sensor <b>1</b><i>b </i>on how far the camera body <b>20</b> moved. The angular rate information is used as the camera body motion information.</p>
<p id="p-0071" num="0085">Next, a motion detection method used to decide each scene is described. <figref idref="DRAWINGS">FIG. 4</figref> is a chart illustrating the motion decision method. To decide the motion, a motion decision threshold value is preset to detect whether the degree of motion exceeds the threshold value.</p>
<p id="p-0072" num="0086">When there is a strenuous motion of the photographic subject in the video images and the motion is beyond a search range of motion, inter-frame prediction fails, increasing an encoding amount. In general, the motion of the photographic subject is desirably decided when the motion is beyond the search range of motion. Therefore, the threshold value used to decide the motion of the photographic subject is variable depending on the magnitude of the search range of motion. The encoding amount allocated to a frame changes as a frame rate or bit rate changes. Therefore, the threshold value used to decide the motion of the photographic subject is changed in accordance with the changing frame rate or bit rate.</p>
<p id="p-0073" num="0087">The processing steps carried out by the scene decision encoding controller <b>5</b> are described referring to a flow chart illustrated in <figref idref="DRAWINGS">FIG. 5</figref>. In Step S<b>1</b>, the scene decision encoding controller <b>5</b> obtains the photographic subject motion information and the camera body motion information prior to the encoding process. The obtained motion informations are elements used when the image processor <b>3</b> detects the motion of an encoding target. The obtained motion informations are the angular rate information obtained from the lens controller <b>2</b> (camera body motion information) and representative point matching data obtained from the image processor <b>3</b> (on-screen motion information of the photographic subject).</p>
<p id="p-0074" num="0088">In Step S<b>2</b>, the scene decision encoding controller <b>5</b> calculates the degree of motion of the camera body from the angular rate information obtained from the lens controller <b>2</b> as the motion information. As illustrated in <figref idref="DRAWINGS">FIG. 3</figref>, the degree of motion in the angular rate information differs depending on how the lens is zoomed, telephoto zooming (telephoto state) or wide-angle zooming (wide-angle state). The degree of motion increases in the telephoto state although the angular rate information shows a small value. Therefore, the scene decision encoding controller <b>5</b> uses a value obtained by multiplying the angular rate information by a zooming ratio to calculate the degree of motion of the camera body <b>20</b> from the angular rate information. The zooming ratio is a ratio of a focal distance fy after the lens is zoomed to a focal distance fx when the zoom lens has a widest angle (fy/fx).</p>
<p id="p-0075" num="0089">In Step S<b>3</b>, the scene decision encoding controller <b>5</b> decides which of the following situations is the current image pickup condition based on the photographic subject motion information obtained in Step S<b>1</b> and the degree of motion of the camera body <b>20</b> calculated in Step S<b>2</b>:
<ul id="ul0006" list-style="none">
    <li id="ul0006-0001" num="0000">
    <ul id="ul0007" list-style="none">
        <li id="ul0007-0001" num="0090">&#x201c;on-screen motion of photographic subject&#x201d;;</li>
        <li id="ul0007-0002" num="0091">&#x201c;motion of camera body alone&#x201d;;</li>
        <li id="ul0007-0003" num="0092">&#x201c;subject-following motion of camera body&#x201d;; and</li>
        <li id="ul0007-0004" num="0093">&#x201c;neither photographic subject nor camera body in motion&#x201d;</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0076" num="0094">The decision of the image pickup condition will be described later referring to <figref idref="DRAWINGS">FIG. 6</figref>.</p>
<p id="p-0077" num="0095">In Step s<b>4</b>, the scene decision encoding controller <b>5</b> performs an encoding amount regulation control suitable for the image pickup condition decided in Step S<b>3</b> to the image compression/decompression processor <b>4</b>. The encoding amount regulation control suitable for the decided image pickup condition is selected then.</p>
<p id="p-0078" num="0096">Referring to a flow chart illustrated in <figref idref="DRAWINGS">FIG. 6</figref>, a flow processing steps for deciding the image pickup condition carried out by the scene decision encoding controller <b>5</b> is described. The processing steps for deciding the image pickup condition are details of Step S<b>3</b> illustrated in the flow chart of <figref idref="DRAWINGS">FIG. 5</figref>.</p>
<p id="p-0079" num="0097">In Step S<b>11</b>, the scene decision encoding controller <b>5</b> obtains the respective motion informations and converts the obtained motion informations into motion decision parameters. In Step S<b>12</b>, the scene decision encoding controller <b>5</b> decides the motion of the camera body <b>20</b> based on the parameter of the angular rate sensor <b>1</b><i>b </i>(camera body motion information). When it is decided in Step S<b>12</b> that there is a large degree of motion of the camera body <b>12</b> (the parameter exceeding the threshold value), the processing flow proceeds to Step S<b>13</b>. When it is decided in Step S<b>12</b> that there is only a small degree of motion of the camera body <b>12</b>, the processing flow proceeds to Step S<b>16</b>.</p>
<p id="p-0080" num="0098">Step S<b>13</b> and Step S<b>16</b> decide the motion based on the representative point matching parameter. When it is decided in Step S<b>13</b> that there is a large degree of on-screen motion of the photographic subject (the parameter exceeding the threshold value), the angular rate and the representative point matching both have large values. Then, the scene decision encoding controller <b>5</b> decides that a large degree of motion is detected in the camera and the photographic subject both, and decides in Step S<b>14</b> that the image pickup condition is &#x201c;motion of camera body alone&#x201d;. The situation of &#x201c;motion of camera body alone&#x201d; includes the following image pickup condition. In the case where there is a motion of the camera body <b>20</b> due to, for example, camera shake although there is no actual motion of the photographic subject, the angular rate information, which is the motion information of the camera body <b>20</b>, shows a large value, therefore, the representative point matching information, which is the on-screen motion information of the photographic subject, show a large value as well. Based on the analysis thus given, the situation of &#x201c;motion of camera body alone may be such an image pickup condition that a physical motion of a photographer during the image pickup, such as camera shake, is transmitted to the camera body <b>20</b> and detected in a next frame as the transfer of the representative point although there is no actual motion of the photographic subject.</p>
<p id="p-0081" num="0099">When it is decided in Step S<b>13</b> that there is only a small degree of on-screen motion of the photographic subject (the parameter below the threshold value), the angular rate alone shows a large value. Then, the scene decision encoding controller <b>5</b> decides that there is not a large on-screen motion of the photographic subject despite a large motion of the camera body <b>20</b>, and decides in Step S<b>15</b> that the image pickup condition is &#x201c;subject-following motion of camera body&#x201d;. The situation of &#x201c;subject-following motion of camera body&#x201d; includes such an image pickup condition that a photographer moves the camera body alongside the motion of the photographic subject to capture the photographic subject in motion on the screen (panning/tilting). Under the image pickup condition, there is only a relatively small on-screen motion of the photographic subject despite a relatively large motion of the camera body <b>20</b>. As far as the camera body <b>20</b> and the on-screen image of the photographic subject thus show the different motions, the representative point matching information, which is the on-screen motion of the photographic subject, has a small value although the angular rate, which is the motion information of the camera body <b>20</b>, has a large value. Based on the analysis thus given, the situation of &#x201c;subject-following motion of camera body&#x201d; includes such an image pickup condition that a physical motion caused by the photographer during the image pickup as described earlier may be transmitted to the camera body but is hardly detected in the on-screen image of photographic subject (hardly detected as the transfer of the representative point in a next frame).</p>
<p id="p-0082" num="0100">When it is decided in Step S<b>16</b> that there is a motion (the parameter exceeding the threshold value), the representative point matching information alone has a large value. Then, the scene decision encoding controller <b>5</b> decides that there is not a large motion of the camera body <b>20</b> despite a large on-screen motion of the photographic subject, and decides in Step S<b>17</b> that the image pickup condition is &#x201c;on-screen motion of photographic subject&#x201d;. The situation of &#x201c;on-screen motion of photographic subject&#x201d; includes such an image pickup condition that angular rate, which is the motion information of the camera body <b>20</b>, shows a small value and the representative point matching information, which is the on-screen motion information of the photographic subject, shows a large value as far as there is an actual motion of the photographic subject although no motion is detected in the camera body <b>20</b> due to, for example, camera shake. Based on the analysis thus given, the situation of &#x201c;on-screen motion of photographic subject&#x201d; includes such an image pickup condition that the on-screen motion of the photographic subject is detected as the transfer of the representative point in a next frame because of an actual motion of the photographic subject in the absence of any physical motion, such as camera shake, generated by a photographer during the image pickup, panning, or tilting.</p>
<p id="p-0083" num="0101">When it is decided in Step S<b>16</b> that there is a small degree motion (the parameter below the threshold value), the angular rate information and the representative point matching information both have small values. Then, the scene decision encoding controller <b>5</b> decides that neither of the camera body <b>20</b> nor the photographic subject image on the screen is in motion, and decides in Step S<b>18</b> that the image pickup condition is &#x201c;neither photographic subject nor camera body in motion&#x201d;. Describing the situation of &#x201c;neither photographic subject nor camera body in motion&#x201d;, the angular rate, which is the motion information of the camera body <b>20</b>, has a small value, and the representative point matching information, which is the on-screen motion of the photographic subject, also has a small value. Based on the analysis thus given, the situation of &#x201c;neither photographic subject nor camera body in motion&#x201d; includes such an image pickup condition that the transfer of the representative point is not detected in a next frame because the photographic subject is not in motion and there is no physical motion, such as camera shake, generated by a photographer during the image pickup, panning, or tilting.</p>
<p id="p-0084" num="0102">1) In the image pickup condition decided as &#x201c;motion of camera body alone&#x201d;, the entire image is in motion, which makes deterioration of an image quality less noticeable. Taking advantage of such visual characteristics, the scene decision encoding controller <b>5</b>, when the image pickup condition is decided as &#x201c;motion of camera body alone&#x201d;, controls the image compression/decompression processor <b>4</b> so that high frequency components of the inputted YC data are removed to reduce the encoding amount. Because sudden reduction of the frequency components is easily visually recognized, the frequency components should be reduced in stages by each frame.</p>
<p id="p-0085" num="0103">When the degree of motion of the camera body <b>20</b> significantly increases under the image pickup condition decided as &#x201c;motion of camera body alone&#x201d;, reduction of the frequency components in the YC data is not effective enough to regulate the encoding amount. Therefore, the scene decision encoding controller <b>5</b> provides a threshold value for deciding whether there is a significantly large motion of the camera body <b>20</b>, and decides that an image of the relevant frame should be disregarded when the angular rate information exceeds the threshold value. Then, the scene decision encoding controller <b>5</b> controls the image compression/decompression processor <b>4</b> not to remove the high frequency components of the YC data but to simply skip the frame per se so that the frame is never encoded.</p>
<p id="p-0086" num="0104">However, the frame skipping is not possible in any image data adapted to such a standard for video image stream as AVCHD (Advanced Video Codec High Definition), in which the frame skipping is judged to be violating the standard. In that case, the scene decision encoding controller <b>5</b> inserts a dummy frame in which all of macro blocks are skip macro blocks in the relevant frame in place of the frame skipping, or the scene decision encoding controller <b>5</b> controls the image compression/decompression processor <b>4</b> so that a previous frame image is used again as a current frame image.</p>
<p id="p-0087" num="0105">2) Under the image pickup condition decided as &#x201c;subject-following motion of camera body&#x201d;, the scene decision encoding controller <b>5</b> controls the image compression/decompression processor <b>4</b> to omit the encoding amount regulation control because a photographer during the image pickup while capturing the photographic subject in motion in a predetermined region of the screen probably wants images with a higher definition. Because any image data including many high frequency components unfavorably increases the encoding amount, the scene decision encoding controller <b>5</b> controls the image compression/decompression processor <b>4</b> based on the frequency distribution information obtained by the image processor <b>3</b> to regulate the encoding amount by increasing the quantization step in the region of high frequency components to compress the image data with a higher compression rate.</p>
<p id="p-0088" num="0106">3) Under the image pickup condition decided as &#x201c;on-screen motion of photographic subject&#x201d;, the scene decision encoding controller <b>5</b> controls the image compression/decompression processor <b>4</b> to regulate the encoding amount by increasing the quantization step to compress the image data with a higher compression rate.</p>
<p id="p-0089" num="0107">Under the image pickup condition decided as &#x201c;neither photographic subject nor camera body in motion&#x201d;, the scene decision encoding controller <b>5</b> does not perform the encoding amount regulation control to the image compression/decompression processor <b>4</b>.</p>
<p id="p-0090" num="0108">The encoding amount regulation control based on the decision of the image pickup condition described so far is useful in digital still cameras and digital video cameras. Such an encoding amount regulation control possibly adversely affects any image pickup devices where a camera is fixed to capture images of any moving subject and it is desirable display the images without deteriorating an image quality such as monitoring cameras and network cameras. Therefore, the encoding amount regulation control after the image pickup condition is decided should be changeable depending on an intended use of the device.</p>
<heading id="h-0011" level="1">INDUSTRIAL APPLICABILITY</heading>
<p id="p-0091" num="0109">The video image pickup device according to the present invention decides the image pickup condition based on two different informations; motion information of the camera body and motion information of the photographic subject, and outputs the decision result thereby obtained as the encoding control information. Therefore, the encoding amount can be favorably regulated in any frames including a large degree of motion, and the encoding amount can be allocated to any frames where the motion is over. As a result, an image quality can be greatly improved. The present invention thus technically advantageous is very useful in digital still cameras and digital video cameras.</p>
<heading id="h-0012" level="1">DESCRIPTION OF REFERENCE SYMBOLS</heading>
<p id="p-0092" num="0000">
<ul id="ul0008" list-style="none">
    <li id="ul0008-0001" num="0110"><b>1</b> sensor unit</li>
    <li id="ul0008-0002" num="0111"><b>1</b><i>a </i>image sensor</li>
    <li id="ul0008-0003" num="0112"><b>1</b><i>b </i>angular rate sensor</li>
    <li id="ul0008-0004" num="0113"><b>2</b> lens controller</li>
    <li id="ul0008-0005" num="0114"><b>3</b> image processor</li>
    <li id="ul0008-0006" num="0115"><b>4</b> image compression/decompression processor</li>
    <li id="ul0008-0007" num="0116"><b>5</b> scene decision encoding controller</li>
    <li id="ul0008-0008" num="0117"><b>6</b> image display processor</li>
    <li id="ul0008-0009" num="0118"><b>7</b> CPU</li>
    <li id="ul0008-0010" num="0119"><b>8</b> external memory</li>
    <li id="ul0008-0011" num="0120"><b>9</b> display unit</li>
    <li id="ul0008-0012" num="0121"><b>10</b> recording medium</li>
    <li id="ul0008-0013" num="0122"><b>11</b> lens unit</li>
    <li id="ul0008-0014" num="0123"><b>12</b> video image pickup device</li>
    <li id="ul0008-0015" num="0124"><b>20</b> camera body</li>
</ul>
</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A video image pickup device, comprising:
<claim-text>an image processor configured to detect an on-screen motion of a photographic subject in video image data generated by an image sensor provided in a camera body and output a photographic subject motion information;</claim-text>
<claim-text>an image compression processor configured to compress the video image data into codes;</claim-text>
<claim-text>a sensor configured to detect a motion of the camera body and output the detected motion as a camera body motion information; and</claim-text>
<claim-text>a scene decision encoding controller configured to decide an image pickup condition of the video image data based on the photographic subject motion information and the camera body motion information, wherein</claim-text>
<claim-text>the scene decision encoding controller performs an encoding amount regulation control suitable for the decided image pickup condition to the image compression processor.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The video image pickup device as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein
<claim-text>the image pickup condition is a condition where an actual motion of the photographic subject and the motion of the camera body are combined.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The video image pickup device as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein
<claim-text>the scene decision encoding controller decides the image pickup condition based on combination of a degree of the motion of the camera body indicated by the camera body motion information and a degree of the on-screen motion of the photographic subject in the video image data indicated by the photographic subject motion information.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The video image pickup device as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein
<claim-text>the sensor detects an angular rate applied to the camera body as the motion of the camera body.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The video image pickup device as claimed in <claim-ref idref="CLM-00004">claim 4</claim-ref>, further comprising:
<claim-text>a lens controller configured to give a motion to balance out the angular rate to a lens unit which condenses an imaging light on the image sensor to thereby compensate for an on-screen motion of the photographic subject generated by the angular rate which should be disregarded; and</claim-text>
<claim-text>an angular rate sensor configured to detect the angular rate and output the detected angular rate to the lens controller, wherein</claim-text>
<claim-text>the angular rate sensor serves as the sensor.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The video image pickup device as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein
<claim-text>the image processor detects a representative point motion information obtained from inter-frame matching of a representative point defined on a screen as the photographic subject motion information.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The video image pickup device as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein
<claim-text>the image processor further detects a frequency distribution information in the video image data, and</claim-text>
<claim-text>the scene decision encoding controller controls the image compression processor so that the encoding amount regulation control is performed suitably for the decided image pickup condition in each of frequency bands divided based on the frequency distribution information in the video image data.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The video image pickup device as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein
<claim-text>the sensor detects an angular rate applied to the camera body as the motion of the camera body,</claim-text>
<claim-text>the image processor detects a representative point motion information obtained from inter-frame matching of a representative point defined on a screen as the photographic subject motion information,</claim-text>
<claim-text>the image processor further detects a frequency distribution information in the video image data, and</claim-text>
<claim-text>the scene decision encoding controller selects one of the angular rate, the representative point motion information, and the frequency distribution information depending on an intended purpose of the video image pickup device and uses the selected information to decide the image pickup condition.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The video image pickup device as claimed in <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein
<claim-text>the scene decision encoding controller differently combines the angular rate, the representative point motion information, and the frequency distribution information depending on an intended purpose of the video image pickup device and uses the combined information to decide the image pickup condition.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The video image pickup device as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein
<claim-text>the scene decision encoding controller performs the encoding amount regulation control by filtering/removing high frequency components.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The video image pickup device as claimed in <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein
<claim-text>the scene decision encoding controller performs a filtering setting in multiple stages per a plurality of frames in the filtering/removal of the high frequency components.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The video image pickup device as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein
<claim-text>the scene decision encoding controller performs the encoding amount regulation control by skipping a frame.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The video image pickup device as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein
<claim-text>the scene decision encoding controller performs the encoding amount regulation control by inserting a dummy frame.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The video image pickup device as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein
<claim-text>the scene decision encoding controller performs the encoding amount regulation control by multiplexing a frame.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The video image pickup device as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein
<claim-text>the scene decision encoding controller performs the encoding amount regulation control by increasing a quantization step.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The video image pickup device as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein
<claim-text>the scene decision encoding controller performs the encoding amount regulation control by performing one of the followings; filtering/removal of high frequency components, insertion of a dummy frame, multiplexing of a frame, and increasing of a quantization step.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The video image pickup device as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein
<claim-text>the scene decision encoding controller uses threshold values in multiple stages to decide the motion of the photographic subject.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The video image pickup device as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein
<claim-text>the scene decision encoding controller uses threshold values and selects one of the threshold values to be used depending on an encoding search range magnitude.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The video image pickup device as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein
<claim-text>the scene decision encoding controller uses threshold values and selects one of the threshold values to be used depending on an encoding frame rate or a bit rate.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The video image pickup device as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein
<claim-text>the image compression processor is an image compression/decompression processor capable of decompressing the video image data.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. The video image pickup device as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising an image display processor in charge of image display control of the video image data.</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. A device deciding an image pickup condition, comprising:
<claim-text>a scene decision controller configured to decide the image pickup condition of a video image data based on a photographic subject motion information and a camera body motion information, wherein</claim-text>
<claim-text>the photographic subject motion information is generated by detecting an on-screen motion of a photographic subject in the video image data,</claim-text>
<claim-text>the camera body motion information is generated by detecting a motion of a camera body, and</claim-text>
<claim-text>the scene decision controller performs an encoding amount regulation control.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00023" num="00023">
<claim-text>23. The device deciding an image pickup condition as claimed in <claim-ref idref="CLM-00022">claim 22</claim-ref>, wherein the camera body motion information is generated by detecting an angular rate applied to the camera body as the motion of the camera body.</claim-text>
</claim>
<claim id="CLM-00024" num="00024">
<claim-text>24. The device deciding an image pickup condition as claimed in <claim-ref idref="CLM-00022">claim 22</claim-ref>, wherein
<claim-text>the scene decision controller performs the encoding amount regulation control by skipping a frame.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00025" num="00025">
<claim-text>25. The device deciding an image pickup condition as claimed in <claim-ref idref="CLM-00022">claim 22</claim-ref>, wherein
<claim-text>the scene decision controller performs the encoding amount regulation control by inserting a dummy frame.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00026" num="00026">
<claim-text>26. The device deciding an image pickup condition as claimed in <claim-ref idref="CLM-00023">claim 23</claim-ref>, further comprising: a lens controller configured to detect the angular late and give a motion to balance out the angular rate to a lens unit which condenses an imaging light on an image sensor to thereby compensate for a on-screen motion of the photographic subject generated by the angular rate which should be disregarded.</claim-text>
</claim>
<claim id="CLM-00027" num="00027">
<claim-text>27. The device deciding an image pickup condition as claimed in <claim-ref idref="CLM-00022">claim 22</claim-ref>, further comprising:
<claim-text>an image processor configured to detect the on-screen motion of the photographic subject in the video image data and output the photographic subject motion information;</claim-text>
<claim-text>an image compression processor configured to compress the video image data into codes, wherein</claim-text>
<claim-text>the image processor further detects a frequency distribution information in the video image data, and</claim-text>
<claim-text>the scene decision controller controls the image compression processor so that the encoding amount regulation control is performed suitably for the decided image pickup condition in each of frequency bands divided based on the frequency distribution information in the video image data.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00028" num="00028">
<claim-text>28. The device deciding an image pickup condition as claimed in <claim-ref idref="CLM-00022">claim 22</claim-ref>, further comprising:
<claim-text>an image processor configured to detect the on-screen motion of the photographic subject in the video image data and output the photographic subject motion information, wherein the camera body motion information is generated by detecting an angular rate applied to the camera body as the motion of the camera body,</claim-text>
<claim-text>the image processor detects a representative point motion information obtained from inter-frame matching of a representative point defined on a screen as the photographic subject motion information,</claim-text>
<claim-text>the image processor further detects a frequency distribution information in the video image data, and</claim-text>
<claim-text>the scene decision controller selects one of the angular rate, the representative point motion information, and the frequency distribution information depending on an intended purpose of a video image pickup device and uses the selected information to decide the image pickup condition.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00029" num="00029">
<claim-text>29. The video image pickup device as claimed in <claim-ref idref="CLM-00028">claim 28</claim-ref>, wherein the scene decision controller differently combines the angular rate, the representative point motion information, and the frequency distribution information depending on an intended purpose of a video image pickup device and uses the combined information to decide the image pickup condition.</claim-text>
</claim>
<claim id="CLM-00030" num="00030">
<claim-text>30. The video image pickup device as claimed in <claim-ref idref="CLM-00022">claim 22</claim-ref>, wherein the scene decision controller uses threshold values and selects one of the threshold values to be used depending on an encoding search range magnitude.</claim-text>
</claim>
<claim id="CLM-00031" num="00031">
<claim-text>31. The video image pickup device as claimed in <claim-ref idref="CLM-00022">claim 22</claim-ref>, wherein the video image data is generated by an image sensor provided in the camera body, and the motion of the camera body is detected by a sensor provided in the camera body.</claim-text>
</claim>
<claim id="CLM-00032" num="00032">
<claim-text>32. An image pickup condition deciding method, comprising:
<claim-text>receiving a photographic subject motion information generated by detecting an on-screen motion of a photographic subject in a video image data;</claim-text>
<claim-text>receiving a camera body motion information generated by detecting a motion of a camera body;</claim-text>
<claim-text>deciding an image pickup condition of the video image data based on the photographic subject motion information and the camera body motion information, and</claim-text>
<claim-text>performing an encoding amount regulation control.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00033" num="00033">
<claim-text>33. The image pickup condition deciding method as claimed in <claim-ref idref="CLM-00032">claim 32</claim-ref>, wherein the camera body motion information is generated by detecting an angular rate applied to the camera body as the motion of the camera body.</claim-text>
</claim>
<claim id="CLM-00034" num="00034">
<claim-text>34. The image pickup condition deciding method as claimed in <claim-ref idref="CLM-00032">claim 32</claim-ref>,
<claim-text>wherein the encoding amount regulation control is performed by skipping a frame.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00035" num="00035">
<claim-text>35. The image pickup condition deciding method as claimed in <claim-ref idref="CLM-00032">claim 32</claim-ref>,
<claim-text>wherein the encoding amount regulation control is performed by inserting a dummy frame.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
