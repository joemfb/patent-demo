<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08622895-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08622895</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12167628</doc-number>
<date>20080703</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2006-006146</doc-number>
<date>20060113</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>842</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>A</section>
<class>61</class>
<subclass>B</subclass>
<main-group>1</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>600152</main-classification>
<further-classification>600117</further-classification>
<further-classification>600118</further-classification>
<further-classification>600139</further-classification>
<further-classification>600145</further-classification>
<further-classification>600146</further-classification>
</classification-national>
<invention-title id="d2e71">Electric bending endoscope</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>4982725</doc-number>
<kind>A</kind>
<name>Hibino et al.</name>
<date>19910100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>600117</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>5469840</doc-number>
<kind>A</kind>
<name>Tanii et al.</name>
<date>19951100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>600117</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>5868666</doc-number>
<kind>A</kind>
<name>Okada et al.</name>
<date>19990200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>600118</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2002/0165432</doc-number>
<kind>A1</kind>
<name>Matsui</name>
<date>20021100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>600145</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2004/0054258</doc-number>
<kind>A1</kind>
<name>Maeda et al.</name>
<date>20040300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2006/0074383</doc-number>
<kind>A1</kind>
<name>Boulais</name>
<date>20060400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2007/0161861</doc-number>
<kind>A1</kind>
<name>Kawai et al.</name>
<date>20070700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>600145</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2008/0262306</doc-number>
<kind>A1</kind>
<name>Kawai</name>
<date>20081000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>600118</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>EP</country>
<doc-number>1 787 572</doc-number>
<kind>A1</kind>
<date>20070500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>JP</country>
<doc-number>2000-147058</doc-number>
<date>20000500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>JP</country>
<doc-number>2003-115847</doc-number>
<date>20030400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>JP</country>
<doc-number>2003-245246</doc-number>
<date>20030900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>JP</country>
<doc-number>2005-342147</doc-number>
<date>20051200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>WO</country>
<doc-number>WO 2006/019136</doc-number>
<kind>A1</kind>
<date>20060200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00015">
<othercit>Supplementary European Search Report mailed Feb. 2, 2012 in corresponding European Patent Application No. 07706645.4.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>8</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>600101</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>600117</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>600118</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>600139</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>600145</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>600146</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>600152</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>20</number-of-drawing-sheets>
<number-of-figures>24</number-of-figures>
</figures>
<us-related-documents>
<continuation>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>PCT/JP2007/050303</doc-number>
<date>20070112</date>
</document-id>
<parent-status>PENDING</parent-status>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>12167628</doc-number>
</document-id>
</child-doc>
</relation>
</continuation>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20080262310</doc-number>
<kind>A1</kind>
<date>20081023</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Kawai</last-name>
<first-name>Toshimasa</first-name>
<address>
<city>Yokohama</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Kawai</last-name>
<first-name>Toshimasa</first-name>
<address>
<city>Yokohama</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Scully, Scott, Murphy &#x26; Presser, P.C.</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Olympus Medical Systems Corp.</orgname>
<role>03</role>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Smith</last-name>
<first-name>Philip R</first-name>
<department>3779</department>
</primary-examiner>
<assistant-examiner>
<last-name>Boler</last-name>
<first-name>Rynae</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">In the present invention, a logical block of an FPGA is configured by a serial communication unit, a serial communication control portion, an EEPROM controller, an abnormal signal processing portion, an LED controller, an operation mode controller, a DPRAM, a clutch signal input portion, a jig substrate input output portion, a RAM, a motor controller, a motor drive waveform generating portion, an RL (right and left) motor current F/B portion, a UD (up and down) motor current F/B portion, a potentiometer control portion, a thermistor control portion, an RL encoder control portion, a UD encoder control portion, and an FPGA block abnormality monitoring portion.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="139.19mm" wi="250.61mm" file="US08622895-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="196.17mm" wi="163.75mm" file="US08622895-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="130.47mm" wi="169.84mm" file="US08622895-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="171.20mm" wi="155.87mm" file="US08622895-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="252.14mm" wi="174.92mm" orientation="landscape" file="US08622895-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="256.29mm" wi="177.72mm" orientation="landscape" file="US08622895-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="263.23mm" wi="153.75mm" file="US08622895-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="252.65mm" wi="148.08mm" orientation="landscape" file="US08622895-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="242.82mm" wi="109.22mm" orientation="landscape" file="US08622895-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="255.02mm" wi="117.94mm" orientation="landscape" file="US08622895-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="258.06mm" wi="147.57mm" file="US08622895-20140107-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="220.56mm" wi="145.37mm" file="US08622895-20140107-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="184.15mm" wi="169.84mm" file="US08622895-20140107-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00013" num="00013">
<img id="EMI-D00013" he="223.01mm" wi="171.20mm" file="US08622895-20140107-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00014" num="00014">
<img id="EMI-D00014" he="254.42mm" wi="176.28mm" file="US08622895-20140107-D00014.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00015" num="00015">
<img id="EMI-D00015" he="249.85mm" wi="166.12mm" file="US08622895-20140107-D00015.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00016" num="00016">
<img id="EMI-D00016" he="239.69mm" wi="162.39mm" file="US08622895-20140107-D00016.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00017" num="00017">
<img id="EMI-D00017" he="252.81mm" wi="170.10mm" file="US08622895-20140107-D00017.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00018" num="00018">
<img id="EMI-D00018" he="206.84mm" wi="142.07mm" file="US08622895-20140107-D00018.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00019" num="00019">
<img id="EMI-D00019" he="158.75mm" wi="163.83mm" file="US08622895-20140107-D00019.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00020" num="00020">
<img id="EMI-D00020" he="249.85mm" wi="157.82mm" orientation="landscape" file="US08622895-20140107-D00020.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">CROSS REFERENCE TO RELATED APPLICATION</heading>
<p id="p-0002" num="0001">This application is a continuation application of PCT/JP2007/050303 filed on Jan. 12, 2007 and claims benefit of Japanese Application No. 2006-006146 filed in Japan on Jan. 13, 2006, the entire contents of which are incorporated herein by this reference.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0003" num="0002">1. Field of the Invention</p>
<p id="p-0004" num="0003">The present invention relates to an electric bending endoscope including an electric bending endoscope in which a bending portion is electrically bent to a state corresponding to an absolute position signal by operating a bending operation instruction portion outputting the absolute position signal.</p>
<p id="p-0005" num="0004">2. Description of the Related Art</p>
<p id="p-0006" num="0005">In recent years, there has been widely used an endoscope which is capable of observing an organ in a body cavity by inserting a thin and long insertion portion into the body cavity, and is capable of, when necessary, performing various medical treatments by using a treatment instrument inserted into a treatment instrument channel.</p>
<p id="p-0007" num="0006">The endoscope is generally provided, on the distal end portion side thereof, with a bending portion which is bent in the up and down/left and right directions. The bending portion can be bent in a desired direction by performing a pulling and slackening operation of a bending wire connected to the bending portion.</p>
<p id="p-0008" num="0007">Generally, the bending wire has been manually operated. However, in recent years, as disclosed, for example, in Japanese Patent Application Laid-Open Publication No. 2003-245246, there is also an electric bending endoscope in which the pulling operation is performed by using bending power unit, such as an electric motor.</p>
<p id="p-0009" num="0008">In the electric bending endoscope, the bending portion is bent by such a way that the electric motor is rotated, for example, by using a joystick which is bending operation instruction unit provided in an operation portion and which outputs, for example, a bending instruction signal for an absolute position, and that a pulley is rotated by the rotation of the electric motor to pull the bending wire connected to the pulley.</p>
<p id="p-0010" num="0009">The joystick instructs a bending position by being tilted. That is, the direction to which the joystick is tilted is a direction to which the bending portion is to be bent, and the tilting angle of the joystick is the bending angle of the bending portion. When the joystick is in the upright state where the tilting angle of the joystick is 0 degrees, the bending portion is in a non-bent state (linear state). Therefore, it is possible for an operator to easily grasp the bending state of the bending portion in the body cavity from the sense of hand fingers which hold the joystick.</p>
<heading id="h-0003" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0011" num="0010">An electric bending endoscope according to the present invention includes: a bending portion provided in an insertion portion; bending drive unit having a plurality of components to bend the bending portion; bending power unit configured to drive the bending drive unit; bending state detecting unit configured to detect operation information of the bending drive unit, and to detect bending state information on the bending portion; instruction unit configured to output bending instruction information for bending the bending portion; and bending operation control unit configured by a plurality of independent logical blocks and configured to perform control to make the bending instruction information of the instruction unit coincident with the bending state information of the bending portion.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 1</figref> is a diagram showing a configuration of an electric bending endoscope apparatus according to an embodiment 1 of the present invention;</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 2</figref> is a diagram showing a configuration of a front panel of an image processing apparatus in <figref idref="DRAWINGS">FIG. 1</figref>;</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 3</figref> is a diagram showing a configuration of a bending control portion in <figref idref="DRAWINGS">FIG. 1</figref>;</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 4</figref> is a diagram showing a configuration of a control portion of the bending control portion in <figref idref="DRAWINGS">FIG. 1</figref>;</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 5</figref> is a diagram showing a configuration of logical blocks of an FPGA in <figref idref="DRAWINGS">FIG. 4</figref>;</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 6</figref> is a diagram showing a configuration of a control processing portion of a motor controller in <figref idref="DRAWINGS">FIG. 5</figref>;</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 7</figref> is a diagram showing a configuration of a servo abnormality detecting portion of the motor controller in <figref idref="DRAWINGS">FIG. 5</figref>;</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 8</figref> is a first diagram explaining servo control in the motor controller in <figref idref="DRAWINGS">FIG. 5</figref>;</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 9</figref> is a second diagram explaining the servo control in the motor controller in <figref idref="DRAWINGS">FIG. 5</figref>;</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 10</figref> is a diagram explaining a first modification of the servo control in the motor controller in <figref idref="DRAWINGS">FIG. 5</figref>;</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 11</figref> is a diagram explaining a modification of the configuration of the FPGA in <figref idref="DRAWINGS">FIG. 4</figref>;</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 12</figref> is a diagram explaining a second modification of the servo control in the motor controller in <figref idref="DRAWINGS">FIG. 5</figref>;</p>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 13</figref> is a first diagram explaining a logical element block configuring an FPGA block abnormality monitoring portion in <figref idref="DRAWINGS">FIG. 5</figref>;</p>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. 14</figref> is a second diagram explaining a logical element block configuring the FPGA block abnormality monitoring portion in <figref idref="DRAWINGS">FIG. 5</figref>;</p>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. 15</figref> is a first diagram explaining a logic determination block using the logical element blocks in <figref idref="DRAWINGS">FIG. 13</figref>;</p>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 16</figref> is a second diagram explaining a logic determination block using the logical element blocks in <figref idref="DRAWINGS">FIG. 12</figref>;</p>
<p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. 17</figref> is a third diagram explaining a logic determination block using the logical element blocks in <figref idref="DRAWINGS">FIG. 13</figref>;</p>
<p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. 18</figref> is a diagram explaining the transition of processing in the FPGA in <figref idref="DRAWINGS">FIG. 5</figref>;</p>
<p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. 19</figref> is a flow chart explaining processing in the FPGA in <figref idref="DRAWINGS">FIG. 5</figref>;</p>
<p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. 20</figref> is a flow chart explaining initial mode processing in <figref idref="DRAWINGS">FIG. 19</figref>;</p>
<p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. 21</figref> is a flow chart explaining maintenance mode processing in <figref idref="DRAWINGS">FIG. 19</figref>;</p>
<p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. 22</figref> is a flow chart explaining calibration mode processing in <figref idref="DRAWINGS">FIG. 19</figref>;</p>
<p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. 23</figref> is a flow chart explaining operation mode processing in <figref idref="DRAWINGS">FIG. 19</figref>; and</p>
<p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. 24</figref> is a timing chart explaining operation mode processing in <figref idref="DRAWINGS">FIG. 19</figref>.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE PREFERRED EMBODIMENT(S)</heading>
<p id="p-0036" num="0035">In the following, embodiments according to the present invention will be described with reference to the accompanying drawings.</p>
<heading id="h-0006" level="1">Embodiment 1</heading>
<p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. 1</figref> to <figref idref="DRAWINGS">FIG. 24</figref> relate to an embodiment 1 according to the present invention. <figref idref="DRAWINGS">FIG. 1</figref> is a diagram showing a configuration of an electric bending endoscope apparatus. <figref idref="DRAWINGS">FIG. 2</figref> is a diagram showing a configuration of a front panel of an image processing apparatus in <figref idref="DRAWINGS">FIG. 1</figref>. <figref idref="DRAWINGS">FIG. 3</figref> is a diagram showing a configuration of a bending control portion in <figref idref="DRAWINGS">FIG. 1</figref>. <figref idref="DRAWINGS">FIG. 4</figref> is a diagram showing a configuration of a control portion of the bending control portion in <figref idref="DRAWINGS">FIG. 1</figref>. <figref idref="DRAWINGS">FIG. 5</figref> is a diagram showing a configuration of a logical block of an FPGA in <figref idref="DRAWINGS">FIG. 4</figref>, <figref idref="DRAWINGS">FIG. 6</figref> is a diagram showing a configuration of a control processing portion of a motor controller in <figref idref="DRAWINGS">FIG. 5</figref>. <figref idref="DRAWINGS">FIG. 7</figref> is a diagram showing a configuration of a servo abnormality detecting portion of the motor controller in <figref idref="DRAWINGS">FIG. 5</figref>. <figref idref="DRAWINGS">FIG. 8</figref> is a first diagram explaining servo control in the motor controller in <figref idref="DRAWINGS">FIG. 5</figref>. <figref idref="DRAWINGS">FIG. 9</figref> is a second diagram explaining the servo control in the motor controller in <figref idref="DRAWINGS">FIG. 5</figref>. <figref idref="DRAWINGS">FIG. 10</figref> is a diagram explaining a first modification of the servo control in the motor controller in <figref idref="DRAWINGS">FIG. 5</figref>. <figref idref="DRAWINGS">FIG. 11</figref> is a diagram explaining a modification of the configuration of FPGA in <figref idref="DRAWINGS">FIG. 4</figref>. <figref idref="DRAWINGS">FIG. 12</figref> is a diagram explaining a second modification of the servo control in the motor controller in <figref idref="DRAWINGS">FIG. 5</figref>. <figref idref="DRAWINGS">FIG. 13</figref> is a first diagram explaining a logical element block configuring an FPGA block abnormality monitoring portion in <figref idref="DRAWINGS">FIG. 5</figref>. <figref idref="DRAWINGS">FIG. 14</figref> is a second diagram explaining the logical element block configuring the FPGA block abnormality monitoring portion in <figref idref="DRAWINGS">FIG. 5</figref>. <figref idref="DRAWINGS">FIG. 15</figref> is a first diagram explaining a logic determination block using the logical element blocks in <figref idref="DRAWINGS">FIG. 13</figref>. <figref idref="DRAWINGS">FIG. 16</figref> is a second diagram explaining a logic determination block using the logical element blocks in <figref idref="DRAWINGS">FIG. 13</figref>. <figref idref="DRAWINGS">FIG. 17</figref> is a third diagram explaining a logic determination block using the logical element blocks in <figref idref="DRAWINGS">FIG. 13</figref>. <figref idref="DRAWINGS">FIG. 18</figref> is a diagram explaining the transition of processing in the FPGA in <figref idref="DRAWINGS">FIG. 5</figref>. <figref idref="DRAWINGS">FIG. 19</figref> is a flow chart explaining processing in the FPGA in <figref idref="DRAWINGS">FIG. 5</figref>. <figref idref="DRAWINGS">FIG. 20</figref> is a flow chart explaining initial mode processing in <figref idref="DRAWINGS">FIG. 19</figref>. <figref idref="DRAWINGS">FIG. 21</figref> is a flow chart explaining maintenance mode processing in <figref idref="DRAWINGS">FIG. 19</figref>. <figref idref="DRAWINGS">FIG. 22</figref> is a flow chart explaining calibration mode processing in <figref idref="DRAWINGS">FIG. 19</figref>. <figref idref="DRAWINGS">FIG. 23</figref> is a flow chart explaining operation mode processing in <figref idref="DRAWINGS">FIG. 19</figref>. <figref idref="DRAWINGS">FIG. 24</figref> is a timing chart explaining operation mode processing in <figref idref="DRAWINGS">FIG. 19</figref>.</p>
<p id="p-0038" num="0037">In the conventional electric bending endoscope in which a microcomputer (for example, a CPU and a MPU) is usually used as a servo control portion for performing the motor control of the bending control portion and serves as a calculating portion for controlling the response speed of the motor, there is a problem that since a sequential processing is performed in the microcomputer, when a part of the processing functions stop, all the functions stop, so as to cause a trouble in the bending operation, and thereby the examination as a whole is made complicated.</p>
<p id="p-0039" num="0038">The present embodiment has been made in view of the above described circumstances. An object of the present embodiment is to provide an electric bending endoscope which is capable of, even when a trouble is caused in a part of the function of the bending control portion, continuing the bending operation.</p>
<p id="p-0040" num="0039">As shown in <figref idref="DRAWINGS">FIG. 1</figref>, an electric bending endoscope apparatus <b>1</b> according to the present embodiment incorporates an image pickup device (not shown) in a distal end rigid portion of an endoscope insertion portion (hereinafter abbreviated as insertion portion) <b>9</b>, and is mainly configured by including: an electric bending endoscope (hereinafter abbreviated as endoscope) <b>2</b> in which a bending portion <b>11</b> of the insertion portion <b>9</b> is bent by electrically pulling a bending wire (as will be described below) configuring bending drive unit; a remote control operation portion <b>7</b> as instruction unit which performs a drive operation of the bending portion <b>11</b>, and the like; an image processing apparatus <b>4</b> which generates a video signal from an image signal transmitted via a universal cable <b>12</b>; a light source apparatus <b>3</b> which supplies illumination light to an illumination optical system (not shown) via a light guide fiber bundle (not shown) incorporated in the universal cable <b>12</b>; a monitor <b>6</b>, as a display apparatus, to which the video signal generated in the image processing apparatus <b>4</b> is outputted, and which displays the video signal as an endoscopic image; air and water supply pipes; and a pump unit <b>14</b> which performs a suction operation.</p>
<p id="p-0041" num="0040">The light source apparatus <b>3</b>, the image processing apparatus <b>4</b>, and the pump unit <b>14</b> are mounted on a cart <b>15</b>. A flow rate control cassette <b>14</b><i>a </i>having a mechanism for adjusting the flow rate in the air and water supply pipes and the flow rate in the suction operation is detachably provided in the pump unit <b>14</b>. Further, it is configured such that an endoscope fixing arm <b>13</b> which holds and fixes the endoscope <b>2</b> is provided in the cart <b>15</b>, and that a proximal end grasping portion <b>10</b> of the endoscope <b>2</b> is detachably held and fixed to the distal end of the endoscope fixing arm <b>13</b>.</p>
<p id="p-0042" num="0041">It is configured such that a forceps plug <b>10</b><i>a </i>to which a suction tube from the flow rate control cassette <b>14</b><i>a </i>can be connected is arranged in the proximal end grasping portion <b>10</b> of the endoscope <b>2</b>, and that the universal cable <b>12</b> and the air and water supply tubes from the flow rate control cassette <b>14</b><i>a </i>are connected to the proximal end grasping portion <b>10</b> of the endoscope <b>2</b>. The air and water supply tubes and the like, and the suction tube are connected to, for example, an air supply pipe, a water supply pipe and a suction pipe (all not shown) in the insertion portion <b>9</b>.</p>
<p id="p-0043" num="0042">Further, a bending control portion <b>10</b><i>b </i>which controls a motor, and the like, to electrically drive the bending portion <b>11</b>, is incorporated in the proximal end grasping portion <b>10</b>. The remote control operation portion <b>7</b> is connected to the bending control portion <b>10</b><i>b </i>via a cable <b>7</b><i>b</i>. Note that the remote control operation portion <b>7</b> is also configured so as to be able to be connected to the image processing apparatus <b>4</b> via the cable <b>7</b><i>b</i>, and to be able to be connected to the bending control portion <b>10</b><i>b </i>via the universal cable <b>12</b>.</p>
<p id="p-0044" num="0043">The remote control operation portion <b>7</b> includes, although not shown, for example, a joystick which is an operation input device for performing an electric bending operation of the bending portion <b>11</b>, an operation input switch for the air and water supply operation and the suction operation, and a scope switch having a remote switch for freeze and release operations, and the like, in the image processing apparatus <b>4</b>. The image processing apparatus <b>4</b> serving as bending state detecting unit and bending operation control unit is configured to be able to be connected to the pump unit <b>14</b>. A front panel <b>4</b><i>a </i>of the image processing apparatus <b>4</b> is configured by including, as shown in <figref idref="DRAWINGS">FIG. 2</figref>, a power switch <b>20</b>, an initialization button <b>23</b> having an LED function to instruct the initialization of the electric bending endoscope apparatus <b>1</b> and to notify the completion of initialization, a calibration LED portion <b>24</b> configured to notify the calibration of the electric bending of the bending portion <b>11</b>, an operation input switch group <b>25</b> for the air and water supply operation and the suction operation of the pump unit <b>14</b>, an examination possible LED <b>26</b> configured to notify a state in which the examination by the electric bending endoscope apparatus <b>1</b> can be performed, a pipe connection display portion <b>27</b> configured to display connection states of the air supply pipe, the water supply pipe, and the suction pipe, and the like.</p>
<p id="p-0045" num="0044">As shown in <figref idref="DRAWINGS">FIG. 3</figref>, a vertical bending wire <b>33</b> and a lateral bending wire (not shown) which are extended from the bending control portion <b>10</b><i>b </i>and which are used for bending the bending portion <b>11</b>, are inserted into the insertion portion <b>9</b>. Note that in the following description, a configuration relating to the vertical bending wire <b>33</b> will be described, and a configuration relating to the lateral bending wire, which configuration is the same as the configuration of the vertical bending wire <b>33</b>, is not shown for the sake of simplicity and the explanation thereof is also omitted.</p>
<p id="p-0046" num="0045">The both end portions of the bending wire <b>33</b> is connected and fixed to a chain (not shown), which is arranged in mesh with a rotatable vertical sprocket portion <b>34</b> configuring the bending drive unit. Thereby, when the sprocket portion <b>34</b> is rotated in a predetermined direction, the bending wire <b>33</b> fixed to the chain is pulled, so as to make the bending portion <b>11</b> bent in a predetermined direction.</p>
<p id="p-0047" num="0046">The sprocket portion <b>34</b> is arranged, for example, in the bending control portion <b>10</b><i>b</i>. The sprocket portion <b>34</b> includes a plurality of gears <b>31</b> and <b>32</b>, which transmit the drive power of a bending motor <b>30</b> including a three phase motor, for example, as the vertical bending power unit, and a clutch mechanism portion <b>36</b>, as drive power transmission disconnection and recovering unit, configured to make the gears engaged and disengaged to and from each other, for example. When the bending wire <b>33</b> is put in a state free of tension by the clutch mechanism portion <b>36</b>, the bending portion <b>11</b> is put in a bending free state where the bending portion <b>11</b> can be freely bent by an external force.</p>
<p id="p-0048" num="0047">Note that the bending drive unit is configured by the gears <b>31</b> and <b>32</b>, the bending wire <b>33</b>, the sprocket portion <b>34</b>, the clutch mechanism portion <b>36</b>, and the like.</p>
<p id="p-0049" num="0048">The clutch mechanism portion <b>36</b> is configured to be switched between a drive power transmission disconnected state where the clutch mechanism portion <b>36</b> is disconnected, and a drive power transmission recovered state where the clutch mechanism portion <b>36</b> is connected, by switching a switching operation lever <b>10</b><i>c </i>(see <figref idref="DRAWINGS">FIG. 1</figref>), as state switching unit, to a drive power transmission disconnecting position (hereinafter referred to as bending free instruction position) or to a drive power transmission recovering position (hereinafter referred to as angle operation instruction position).</p>
<p id="p-0050" num="0049">That is, the bending motor <b>30</b> and the sprocket portion <b>34</b> can be reversibly engaged and disengaged with and from each other by mechanically switching the clutch mechanism portion <b>36</b> to the disconnected state or the connected state by the switching operation of the switching operation lever <b>10</b><i>c. </i></p>
<p id="p-0051" num="0050">The rotation amount of the sprocket portion <b>34</b> is detected by a potentiometer <b>35</b> which is bending angle detecting unit. Note that reference character <b>30</b><i>a </i>denotes an encoder which detects the rotation amount of the bending motor <b>30</b>. Further, reference numeral <b>38</b> denotes a thermistor which measures the temperature of the bending motor <b>30</b>. The bending state detecting unit is configured by the potentiometer <b>35</b> or the encoder <b>30</b><i>a. </i></p>
<p id="p-0052" num="0051">The remote control operation portion <b>7</b>, the encoder <b>30</b><i>a</i>, the potentiometer <b>35</b>, the clutch mechanism portion <b>36</b>, and the thermistor <b>38</b> are connected to a control portion <b>37</b> of the bending control portion <b>10</b><i>b. </i></p>
<p id="p-0053" num="0052">In the bending control portion <b>10</b><i>b</i>, as shown in <figref idref="DRAWINGS">FIG. 4</figref>, there are provided a power supply connector <b>50</b> to which a power supply cable (not shown) is connected via the universal cable <b>12</b>, and an operation portion connector <b>51</b> to which the cable <b>7</b><i>a </i>of the remote control operation portion <b>7</b> is connected. The power supply connector <b>50</b> is connected to a control power supply portion <b>52</b> and a drive power supply portion <b>53</b> in the control portion <b>37</b>. The control power supply portion <b>52</b> is configured so as to supply the control power to each portion via a DC/DC converter <b>54</b>. Further, the drive power supply portion <b>53</b> supplies the drive power so as to enable a motor driver <b>55</b> to generate three phase sinusoidal wave power.</p>
<p id="p-0054" num="0053">The operation portion connector <b>51</b> is connected to an FPGA (field programmable gate array) <b>56</b> as bending operation control unit in the bending control portion <b>10</b><i>b</i>. The FPGA <b>56</b> performs configuration based on data stored in an EEPROM <b>59</b> so that internal cells of the FPGA <b>56</b> are configured into desired logical blocks. The encoder <b>30</b><i>a</i>, the potentiometer <b>35</b>, the clutch mechanism portion <b>36</b>, and the thermistor <b>38</b> are connected to the FPGA <b>56</b>, so as to be controlled by the FPGA <b>56</b>. Further, the FPGA <b>56</b> supplies data for generating the three phase sinusoidal wave power to the motor driver <b>55</b>, and thereby the motor driver <b>55</b> supplies the three phase sinusoidal wave power to the bending motor <b>30</b>.</p>
<p id="p-0055" num="0054">The FPGA <b>56</b> outputs a WDT-CR signal which clears a WDT (watchdog timer) <b>57</b>, when an abnormality larger than a predetermined fixed level is caused in the internal cell. On the basis of the WDT-CR signal, a reset signal is outputted to the FPGA <b>56</b> from the WDT <b>57</b>, so that the FPGA <b>56</b> is resets. It is configured such that when receiving the reset signal, the FPGA <b>56</b> starts a reset IC <b>58</b>, and reconfigures the logical block of the internal cell on the basis of the data in the EEPROM <b>59</b>.</p>
<p id="p-0056" num="0055">As shown in <figref idref="DRAWINGS">FIG. 5</figref>, the logical block of the FPGA <b>56</b> is configured by a serial communication unit <b>100</b>, a serial communication control portion <b>101</b>, an EEPROM controller <b>102</b>, an abnormal signal processing portion <b>103</b>, an LED controller <b>104</b>, an operation mode controller <b>105</b>, a DPRAM <b>106</b>, a clutch signal input portion <b>107</b>, a jig substrate input output portion <b>108</b>, a RAM <b>109</b>, a motor controller <b>110</b>, a motor drive waveform generating portion <b>111</b>, an RL (right and left) motor current F/B portion <b>112</b>, a UD (up and down) motor current F/B portion <b>113</b>, a potentiometer control portion <b>114</b>, a thermistor control portion <b>115</b>, an RL encoder control portion <b>116</b>, a UD encoder control portion <b>117</b>, and an FPGA block abnormality monitoring portion <b>118</b>. Further, the motor controller <b>110</b> is configured by including respective logical blocks of a measurement processing portion <b>200</b>, a control processing portion <b>201</b>, a servo abnormality detecting portion <b>202</b>, and a servo ON/OFF control portion <b>203</b>.</p>
<p id="p-0057" num="0056">Note that in <figref idref="DRAWINGS">FIG. 5</figref>, solid lines represent a flow of normal control and data signals, and broken lines represent a flow of a logical block abnormal signal, a servo abnormal signal, or a communication abnormal signal.</p>
<p id="p-0058" num="0057">The serial communication unit <b>100</b> performs serial communication with the remote control operation portion <b>7</b> by, for example, an LVDS, or the like. The serial communication control portion <b>101</b> controls the serial communication unit <b>100</b>, and communicates with the motor controller <b>110</b> to store data received from the motor controller <b>110</b> in the DPRAM <b>106</b>.</p>
<p id="p-0059" num="0058">The EEPROM controller <b>102</b> performs configuration of the FPGA <b>56</b> according to a program stored in the EEPROM <b>59</b>.</p>
<p id="p-0060" num="0059">The abnormal signal processing portion <b>103</b> monitors abnormality in the power supply voltage and overcurrent of the bending motor <b>30</b>, and outputs a monitoring result to the operation mode controller <b>105</b>.</p>
<p id="p-0061" num="0060">The clutch signal input portion <b>107</b> receives a state signal representing the power transmission disconnected state or the drive power transmission recovered state from the clutch mechanism portion <b>36</b>, and outputs the state signal to the operation mode controller <b>105</b>.</p>
<p id="p-0062" num="0061">The jig substrate input output portion <b>108</b> transmits and receives data for performing debug processing to and from a jig substrate (not shown). Further, the LED controller <b>104</b> controls an LED of the jig substrate.</p>
<p id="p-0063" num="0062">The operation mode controller <b>105</b> outputs to the motor controller <b>110</b> an operation mode which corresponds to the power transmission disconnected state or the drive power transmission recovered state of the clutch mechanism portion <b>36</b>, and which corresponds to the connection state with the jig substrate. Note that the operation mode controller <b>105</b> is configured to receive a communication abnormal signal from the serial communication control portion <b>101</b>, and a servo abnormal signal from the motor controller <b>110</b>, and to thereby output an operation mode based on the abnormal signals to the motor controller <b>110</b>.</p>
<p id="p-0064" num="0063">Further, the motor drive waveform generating portion <b>111</b> reads sinusoidal wave data stored in the RAM <b>109</b> via the motor controller <b>110</b> to generate three phase sinusoidal wave data, and outputs the three phase sinusoidal wave data to the RL (right and left) motor driver and the UD (up and down) motor driver <b>55</b>.</p>
<p id="p-0065" num="0064">The RL (right and left) motor current F/B portion <b>112</b> converts the U phase current value and the V phase current value from the RL (right and left) motor into digital signals, and outputs the digital signals to the motor controller <b>10</b>. Similarly, the UD (up and down) motor current F/B portion <b>113</b> converts the U phase current value and the V phase current value from the UD (up and down) motor <b>30</b> into digital signals, and outputs the digital signals to the motor controller <b>110</b>.</p>
<p id="p-0066" num="0065">The potentiometer control portion <b>114</b> converts the position information on the potentiometer <b>35</b> connected to the RL (right and left) sprocket portion and the UD (up and down) sprocket portion <b>34</b> into digital signals, and outputs the digital signals to the motor controller <b>110</b>.</p>
<p id="p-0067" num="0066">The thermistor control portion <b>115</b> converts temperature data measured by the thermistor <b>38</b> provided in the RL (right and left) motor and the UD (up and down) motor <b>30</b> into digital signals, and outputs the digital signals to the motor controller <b>110</b>.</p>
<p id="p-0068" num="0067">The RL encoder control portion <b>116</b> and the UD encoder control portion <b>117</b> output count values of the encoder <b>30</b><i>a </i>provided in the RL (right and left) motor and the UD (up and down) motor <b>30</b> to the motor controller <b>110</b>.</p>
<p id="p-0069" num="0068">Then, the motor controller <b>110</b> performs the servo control of the RL (right and left) motor and the UD (up and down) motor <b>30</b> on the basis of the operation mode by using the measurement processing portion <b>200</b>, the control processing portion <b>201</b>, the servo abnormality detecting portion <b>202</b>, and the servo ON/OFF control portion <b>203</b>.</p>
<p id="p-0070" num="0069">Further, the FPGA block abnormality monitoring portion <b>118</b> is configured to receive the logical block abnormal signal of each of the above described logical blocks, the servo abnormal signal, or the communication abnormal signal, and is configured, on the basis of the abnormal signals, to output the TRG signal to the motor controller <b>10</b>, and to output the WDT-CR to the WDT <b>57</b>.</p>
<p id="p-0071" num="0070">Here, as shown in <figref idref="DRAWINGS">FIG. 6</figref>, the control processing portion <b>201</b> of the motor controller <b>110</b> is configured by including a position control block <b>201</b><i>a</i>, a speed control block <b>201</b><i>b</i>, and a torque control block <b>201</b><i>c</i>. Further, as shown in <figref idref="DRAWINGS">FIG. 7</figref>, the servo abnormality detecting portion <b>202</b> is configured by including a position deviation abnormality determining block <b>202</b><i>a</i>, a rotation direction abnormality detecting block <b>202</b><i>b</i>, an abnormal speed detecting block <b>202</b><i>c</i>, and an overload abnormality detecting block <b>202</b><i>d. </i></p>
<p id="p-0072" num="0071">Next, the servo control in the motor controller <b>110</b> will be described with reference to <figref idref="DRAWINGS">FIG. 8</figref>. The position control block <b>201</b><i>a </i>compares a position instruction value from the remote control operation portion <b>7</b> with an output value of the encoder <b>30</b><i>a</i>. When the position deviation exceeds a predetermined value, the position deviation abnormality determining block <b>202</b><i>a </i>outputs a servo abnormal signal.</p>
<p id="p-0073" num="0072">Further, the speed control block <b>201</b><i>b </i>compares the output of the position control block <b>201</b><i>a </i>with a differential value (differentiated in a differential circuit <b>211</b>) of the output value of the encoder <b>30</b><i>a</i>. The rotation direction abnormality detecting block <b>202</b><i>b </i>outputs a servo abnormal signal, when detecting an abnormality in the rotation direction on the basis of the output of the position control block <b>201</b><i>a </i>and the differential value of the output value of the encoder <b>30</b><i>a</i>. Further, the abnormal speed detecting block <b>202</b><i>c </i>outputs a servo abnormal signal, when detecting a speed abnormality on the basis of the differential value of the output value of the encoder <b>30</b><i>a. </i></p>
<p id="p-0074" num="0073">Further, the torque control block <b>201</b><i>c </i>controls the motor driver <b>55</b> by comparing the output of the speed control block <b>201</b><i>b </i>with the current value of the motor driver <b>55</b>. The overload abnormality detecting block <b>202</b><i>d </i>monitors the load state of the bending motor <b>30</b> on the basis of the output of the speed control block <b>201</b><i>b</i>, and outputs a servo abnormal signal when determining the load state as an overload state.</p>
<p id="p-0075" num="0074">An operation example at the time when there is an abnormality in the control loop, is described with reference to <figref idref="DRAWINGS">FIG. 9</figref>. Here, for the sake of simplicity, the F/B (feedback) configuration is omitted.</p>
<p id="p-0076" num="0075">For example, the content in the case where there is a speed abnormality in the speed control block <b>201</b><i>b </i>is described. This represents the case where a position control instruction value is directly switched so as to be inputted into the current control portion (torque control block <b>201</b><i>c</i>). As indicated by the mark x in the diagram, when the speed control block <b>201</b><i>b </i>becomes inoperable, a signal generated by the abnormality determining portion (as will be described below) is inputted into the switching SWs (a switch portion <b>210</b><i>a</i>, a switch portion <b>210</b><i>b</i>, and switch portion <b>210</b><i>c</i>) via the TRG, so that the position control instruction value is directly inputted into the current control portion by switching the switching SWs (the data flow shown by the broken-line arrow in the diagram).</p>
<p id="p-0077" num="0076">At this time, the loop gain constant set beforehand is also changed with absence of the speed control block <b>201</b><i>b</i>, and hence the gain setting value in the state where the speed control block <b>201</b><i>b </i>is absent is set again (is set to the value set beforehand for the state where the speed control does not exist).</p>
<p id="p-0078" num="0077">Specifically, when the speed control gain setting value is set to &#x201c;Sp&#x201d; (Sp&#x3e;0), and when the switching SWs are switched, it is clear that the closed loop characteristic is changed, from the fact that the gain setting value becomes &#x201c;1&#x201d; in the case where the speed control block <b>201</b><i>b </i>does not exist.</p>
<p id="p-0079" num="0078">Thus, the closed loop characteristic is made to remain the same as much as possible, by such a way that only the speed control block <b>201</b><i>b </i>is removed from the circuit system by switching the switch portion <b>210</b><i>b </i>and the switch portion <b>210</b><i>c </i>without switching the other control portion, for example, the switch portion <b>210</b><i>a</i>, and that the gain of the position control block <b>201</b><i>a </i>is increased by the reduced amount of the closed loop gain which is reduced to Sp-&#x3e;1.</p>
<p id="p-0080" num="0079">However, a dynamic filter is usually inserted in the speed control block <b>201</b><i>b</i>, and hence only a static gain is obtained when the speed control block <b>201</b><i>b </i>is absent. Thus, the dynamic characteristic cannot be changed. When it is desired to keep the dynamic characteristic similarly the same, this can be effected by using the configuration as shown in <figref idref="DRAWINGS">FIG. 11</figref> or <figref idref="DRAWINGS">FIG. 11</figref>.</p>
<p id="p-0081" num="0080"><figref idref="DRAWINGS">FIG. 10</figref> shows an example in which when the FPGA <b>56</b> has an enough capacity, the speed control block <b>201</b><i>b </i>is switched to a speed control block which is arranged beforehand on the cell of the FPGA <b>56</b> in parallel with the speed control block <b>201</b><i>b. </i></p>
<p id="p-0082" num="0081">In the example shown in <figref idref="DRAWINGS">FIG. 10</figref>, there is adopted a system configured such that same two components are arranged, that when an abnormality occurs, the data flow between the respective control blocks is switched by using the switching SWs (switch portion <b>210</b><i>a</i>, switch portion <b>210</b><i>b</i>, switch portion <b>210</b><i>c</i>, switch portion <b>210</b><i>d</i>, switch portion <b>210</b><i>e</i>, and switch portion <b>210</b><i>f</i>) according to the TRG generated by the abnormality determining portion.</p>
<p id="p-0083" num="0082">In the example of <figref idref="DRAWINGS">FIG. 11</figref>, there is shown a configuration example in which two EEPROMs <b>59</b> with the configuration program of the FPGA <b>56</b> stored therein beforehand are prepared so as to cope with a case where an error occurs in a part in the FPGA <b>56</b>.</p>
<p id="p-0084" num="0083">In the configuration shown in <figref idref="DRAWINGS">FIG. 11</figref>, a signal is outputted to a selection determining portion <b>220</b> from the FPGA <b>56</b> via an error status line, and a reconfiguration of the FPGA code is performed. It is configured such that either the program data of the first EEPROM <b>59</b> or the separately prepared program data of the second EEPROM <b>59</b> (program data set to be used to cope with an abnormality), is set again in the FPGA <b>56</b>.</p>
<p id="p-0085" num="0084">Further, there may also be adopted an FPGA configuration sequence in which when an abnormality occurs although the configuration is performed several times by using the program data of the first EEPROM <b>59</b>, the selection determining portion <b>220</b> makes the configuration to be performed by using the second EEPROM <b>59</b> storing the program data set to be used to cope with the abnormality. This can be realized by such a way that an abnormality occurrence counter is prepared beforehand in the selection determining portion <b>220</b>, and a switching SW <b>221</b> is switched when the abnormality occurs, for example, three times.</p>
<p id="p-0086" num="0085">Next, as an example when an abnormality occurs in the F/B (feedback) system, there will be described an example to cope with the case where an error occurs in the encoder <b>30</b><i>a</i>, with reference to <figref idref="DRAWINGS">FIG. 12</figref>.</p>
<p id="p-0087" num="0086">During the normal operation, the information from the encoder <b>30</b><i>a </i>is used as the data of the F/B system. Here, it is configured such that when an abnormality occurs in the encoder <b>30</b><i>a</i>, the data path through a switching SW <b>222</b> is switched, and the position control F/B is performed by using the data of the potentiometer <b>35</b>. Since the reliability of data of the potentiometer <b>35</b> is usually inferior to that of the encoder <b>30</b><i>a </i>(due to the linearity, noise, and the like), the potentiometer <b>35</b> is used only at the time of calibration in which the potentiometer <b>35</b> is required for detecting an absolute position. However, it may also be configured such that the potentiometer <b>35</b> is used for an interim operation at the time when the abnormality occurs.</p>
<p id="p-0088" num="0087">Next, there will be described a case where an error further occurs in the potentiometer <b>35</b> during the time when an abnormality is caused in the F/B system. When an abnormality occurs in the potentiometer <b>35</b>, a balance with a calibration sequence is required. The potentiometer <b>35</b> is the only absolute position detecting unit. In the case where the clutch of the clutch mechanism portion <b>36</b> is disconnected, a difference between the endoscope bending position and the position of the remote control operation portion <b>7</b> may be caused. Therefore, when a clutch disconnecting instruction is issued to the clutch mechanism portion <b>36</b>, in practice, the clutch is prevented from being disconnected, or a message to turn off the power supply is displayed on the monitor <b>6</b> at the time when the clutch is operated to be OFF. Further, since a maximum movable range restriction mechanical stopper (not shown) is provided on the side of the endoscope <b>2</b>, it goes without saying that the operation may be performed under the relative position restriction even in the state where the position of the joystick of the remote control operation portion <b>7</b> is deviated from the bending position.</p>
<p id="p-0089" num="0088"><figref idref="DRAWINGS">FIG. 13</figref> shows a basic logical configuration block <b>250</b> relating to each block abnormality and state detection according to the present embodiment. Further, <figref idref="DRAWINGS">FIG. 14</figref> shows a configuration (configuration which is used in the normal processing by the CPU or the like) in which the reset operation is performed by the WDT-CR when at least one abnormality is detected.</p>
<p id="p-0090" num="0089">When some of the basic logical configuration blocks <b>250</b> are combined as shown in <figref idref="DRAWINGS">FIG. 16</figref>, by using the basic logical configuration block <b>250</b> as one unit, it is possible to configure a desired abnormal processing detecting portion <b>251</b> based on the combination of the logical product and the logical sum.</p>
<p id="p-0091" num="0090">That is, the basic logical configuration block <b>250</b>, which is configured by a NAND portion, a NOR portion, and a switching portion as shown in <figref idref="DRAWINGS">FIG. 13</figref>, is hence capable of configuring a basic logic of a Boolean algebra operation element. Various logical formulas can be formed by combining the basic logical configuration blocks <b>250</b>.</p>
<p id="p-0092" num="0091">The configuration of the present embodiment is difficult to be realized by the conventional CPU which performs a determined sequence. However, the present embodiment, the major component of which is the FPGA <b>56</b>, can be hence easily realized by performing arrangement, wiring, and the like, of the basic logical configuration blocks as in the case of an electric circuit.</p>
<p id="p-0093" num="0092">Further, the input is configured by the switching setting signal, an input <b>1</b>, and an input <b>2</b>, while the output is configured by one output. With this configuration, a more fundamental basic logical configuration block can be configured. For example, in the case of one input and one output, the input <b>1</b> may be connected as in the case of an electric circuit, and the switching setting signal may be fixed in order to use the basic logical configuration block as either the AND element or the OR element.</p>
<p id="p-0094" num="0093">An application example of the abnormal processing detecting portion <b>251</b> configured by combining the basic logical configuration blocks <b>250</b> (<b>1</b>) to (n) is shown in <figref idref="DRAWINGS">FIG. 17</figref>. By configuring in the FPGA <b>56</b> the determining portion of monitoring signal of each block as will be described below, it is also possible to perform the switching operation to the normal position detecting unit at the time when an abnormality occurs in the F/B system (when an error occurs in the potentiometer <b>35</b> and the encoder <b>30</b><i>a</i>).</p>
<p id="p-0095" num="0094">For example, the electric bending control operation is usually performed on the basis of the position control which controls the bending position in correspondence with the tilting angle of the joystick of the remote control operation portion <b>7</b>. However, the electric bending control operation can also be performed by such a way that according to the occurrence of abnormality in the position control block <b>201</b><i>a</i>, the position control loop is bypassed and the servo control is performed by the speed control loop. In other words, it is possible to perform an operation to control the bending operation speed according to the tilting angle of the joystick. Although not shown in detail, an action determined on the basis of each condition can be realized by operating wiring switching, and the like, arranged beforehand in the FPGA <b>56</b>.</p>
<p id="p-0096" num="0095">Up to the above description, the switching state at the time when an abnormality occurs is explained. In <figref idref="DRAWINGS">FIG. 15</figref>, there is shown an example of determination configuration in which the abnormality detection level is switched by combining the basic logical configuration blocks <b>250</b>. In the above described configuration, the switching setting signal is fixed for each block abnormality and state detection. However, the error level can also be arbitrarily switched by connecting the switching setting signal of the first module (error level change determination logic module) to the output of another second module (abnormal state generation determination logic module).</p>
<p id="p-0097" num="0096">The operation of the present embodiment configured in this way will be described. In the present embodiment, as shown in <figref idref="DRAWINGS">FIG. 18</figref>, when a power supply is turned on, the initial mode processing is first performed. Then, after the initial mode processing, the process proceeds to the mode switching processing.</p>
<p id="p-0098" num="0097">In the mode switching processing, when the clutch is disconnected or when the bending operation start instruction is set to OFF at the time of completion of the initial mode processing, for example, the process proceeds to the calibration mode. Then, the process returns to the mode switching processing, when the clutch is again connected so that the instruction command value becomes coincident with the scope position, or when the bending operation start instruction is set to ON.</p>
<p id="p-0099" num="0098">In the mode switching processing, when the operation mode is selected, the process proceeds to the operation mode, and the servo is set to ON. When the end of the operation mode is instructed, the process returns to the mode switching processing.</p>
<p id="p-0100" num="0099">Here, the operation mode is a mode to perform an electric bending operation on the basis of an operation instruction from the remote control operation portion <b>7</b>, and the maintenance mode is a mode to perform the setting (reading and writing) of parameters, the remote control based on the HMI mode in which a state monitor, or the like, is connected with a dedicated jig or a personal computer (described below), or the like.</p>
<p id="p-0101" num="0100">Further, in the mode switching processing, when the maintenance mode is selected, the process proceeds to the maintenance mode, and the servo is set to ON. When the end of the maintenance mode is instructed, the process returns to the mode switching processing.</p>
<p id="p-0102" num="0101">Further, in the mode switching processing, when a stop factor occurs, the process proceeds to the abnormal stop mode, and the servo is set to OFF.</p>
<p id="p-0103" num="0102">The above described contents will be described in detail by using a flow chart shown in <figref idref="DRAWINGS">FIG. 19</figref>. When the power supply is turned on, the configuration of the FPGA <b>56</b> is performed by the EEPROM controller <b>102</b> in step S<b>1</b>. Subsequently, the initial mode processing (as will be described below) is performed in step S<b>2</b>, and the process waits for the completion of the initial mode processing in step S<b>3</b>.</p>
<p id="p-0104" num="0103">When the initial mode processing is completed, a calibration request is generated by the operation mode controller <b>105</b> in step S<b>4</b>. Then, in step S<b>5</b>, it is determined whether or not the maintenance mode processing request is generated by the operation mode controller <b>105</b>. When the maintenance mode processing request is generated, the maintenance mode processing (as will be described below) is performed in step S<b>6</b>, and the process returns to step S<b>5</b>.</p>
<p id="p-0105" num="0104">When the maintenance mode processing request is not generated, it is determined in step S<b>7</b> whether or not the operation mode controller <b>105</b> has returned to the mode switching processing from the maintenance mode processing. Then, when the operation mode controller <b>105</b> has returned to the mode switching processing, the calibration request is generated by the operation mode controller <b>105</b> in step S<b>8</b>, and the process returns to step S<b>5</b>.</p>
<p id="p-0106" num="0105">When the operation mode controller <b>105</b> has not returned to the mode switching processing, the operation mode controller <b>105</b> determines in step S<b>9</b> whether or not the calibration request is effective. When the calibration request is effective, the operation mode controller <b>105</b> performs the calibration processing, and determines in step S<b>11</b> whether or not the calibration processing is normally completed. When the calibration processing is not normally completed, the operation mode controller <b>105</b> returns to step S<b>5</b>. When the calibration processing is normally completed, the operation mode controller <b>105</b> cancels the calibration request in step S<b>12</b> and returns to step S<b>5</b>.</p>
<p id="p-0107" num="0106">When determining that the calibration request is not effective in step S<b>9</b>, the operation mode controller <b>105</b> determines in step S<b>13</b> whether or not the bending operation start instruction is set to OFF. When determining that the bending operation start instruction is set to OFF, the operation mode controller <b>105</b> generates the calibration request in step S<b>14</b> and returns to step S<b>5</b>.</p>
<p id="p-0108" num="0107">When determining that the bending operation start instruction is not set to OFF, the operation mode controller <b>105</b> determines in step S<b>15</b> whether or not the clutch connection is OFF. When the clutch connection is OFF, the operation mode controller <b>105</b> proceeds to step S<b>14</b>. When the clutch connection is ON, the operation mode controller <b>105</b> performs the operation mode processing (as will be described below) in step S<b>16</b> and returns to step S<b>5</b>.</p>
<p id="p-0109" num="0108">Next, the initial mode processing will be described by using a flow chart shown in <figref idref="DRAWINGS">FIG. 20</figref>. The WDT <b>57</b> is first started in step S<b>21</b>. Then, the respective logical blocks initialize internal variables in step S<b>22</b>. The RL (right and left) motor current F/B portion <b>112</b>, the UD (up and down) motor current F/B portion <b>113</b>, the potentiometer control portion <b>114</b>, and the thermistor control portion <b>115</b> start the data sampling in step S<b>23</b>, respectively.</p>
<p id="p-0110" num="0109">Then, in step <b>24</b>, the communication is started by the serial communication unit <b>100</b> and the serial communication control portion <b>101</b>. In step <b>25</b>, it is determined whether or not the external hardware is normal. When the external hardware is abnormal, the abnormal stop mode processing is performed in step S<b>26</b>.</p>
<p id="p-0111" num="0110">When it is determined that the external hardware is normal, the motor controller <b>110</b> determines in step S<b>27</b> whether or not the offset of motor current is normal. When the offset of motor current is abnormal, the motor controller <b>110</b> performs the abnormal stop mode processing in step S<b>26</b>.</p>
<p id="p-0112" num="0111">When determining that the offset of motor current is normal, the motor controller <b>110</b> detects the rotor position of the motor <b>30</b> in step S<b>28</b>, and reads parameters in the DPRAM <b>106</b> in step S<b>29</b>.</p>
<p id="p-0113" num="0112">Next, the motor controller <b>110</b> determines in step S<b>30</b> whether or not all the read parameter values are &#x201c;0&#x201d;. When all the parameter values are not &#x201c;0&#x201d;, the motor controller <b>110</b> ends the processing as it is. When all the parameter values are &#x201c;0&#x201d;, the motor controller <b>110</b> writes the default value of the parameter in the DPRAM <b>106</b> in step S<b>31</b> and ends the processing.</p>
<p id="p-0114" num="0113">Next, the maintenance mode processing will be described by using a flow chart shown in <figref idref="DRAWINGS">FIG. 21</figref>. The operation mode controller <b>105</b> starts to update with the jig (not shown). The operation mode controller <b>105</b> determines in step S<b>41</b> whether or not the servo-ON request is generated by the jig. When there is the servo-ON request in step S<b>42</b>, the operation mode controller <b>105</b> sets the servo to ON and returns to step S<b>41</b>.</p>
<p id="p-0115" num="0114">Similarly, the operation mode controller <b>105</b> determines in step S<b>43</b> whether or not the servo OFF request is generated by the jig. When there is the servo OFF request in step S<b>44</b>, the operation mode controller <b>105</b> sets the servo to OFF and returns to step S<b>41</b>.</p>
<p id="p-0116" num="0115">Next, the operation mode controller <b>105</b> determines in step S<b>45</b> whether or not the HMI mode (monitor mode for monitoring the servo state) request is generated by the jig. When there is the HMI mode request in step S<b>46</b>, the operation mode controller <b>105</b> performs the HMI mode processing and returns to step S<b>41</b>.</p>
<p id="p-0117" num="0116">Then, the operation mode controller <b>105</b> determines in step S<b>47</b> whether or not the first maintenance request is generated by the jig. When there is the first maintenance request in step S<b>48</b>, the operation mode controller <b>105</b> performs the sinusoidal wave output mode processing and returns to step S<b>41</b>.</p>
<p id="p-0118" num="0117">Subsequently, the operation mode controller <b>105</b> determines in step S<b>49</b> whether or not the second maintenance request is generated by the jig. When there is the second maintenance request in step S<b>50</b>, the operation mode controller <b>105</b> performs the torque control mode processing and returns to step S<b>41</b>.</p>
<p id="p-0119" num="0118">Further, the operation mode controller <b>105</b> determines in step S<b>51</b> whether or not the third maintenance request is generated by the jig. When there is the third maintenance request in step S<b>52</b>, the operation mode controller <b>105</b> performs the speed control mode processing and returns to step S<b>41</b>.</p>
<p id="p-0120" num="0119">Further, the operation mode controller <b>105</b> determines in step S<b>53</b> whether or not the fourth maintenance request is generated by the jig. When there is the fourth maintenance request in step S<b>54</b>, the operation mode controller <b>105</b> performs the position control mode processing and returns to step S<b>41</b>.</p>
<p id="p-0121" num="0120">Next, the operation mode controller <b>105</b> determines in step S<b>55</b> whether or not the fifth maintenance request is generated by the jig. When there is the fifth maintenance request in step S<b>56</b>, the operation mode controller <b>105</b> performs the analog input position control mode and returns to step S<b>41</b>.</p>
<p id="p-0122" num="0121">Further, the operation mode controller <b>105</b> determines in step S<b>57</b> whether or not the sixth maintenance request is generated by the jig. When there is the sixth maintenance request in step S<b>58</b>, the operation mode controller <b>105</b> performs the scope limit adjustment mode processing and returns to step S<b>41</b>.</p>
<p id="p-0123" num="0122">Subsequently, the operation mode controller <b>105</b> determines in step S<b>59</b> whether or not the seventh maintenance request is generated by the jig. When there is the seventh maintenance request in step S<b>60</b>, the operation mode controller <b>105</b> performs the lap operation mode processing and returns to step S<b>41</b>.</p>
<p id="p-0124" num="0123">Here, the lap operation mode is a mode to make a predetermined bending operation performed, for example, a mode to make a sequential operation RL&#x2192;UD&#x2192;RL, and the like, performed.</p>
<p id="p-0125" num="0124">Next, the operation mode controller <b>105</b> determines in step S<b>61</b> whether or not the eighth maintenance request is generated by the jig. When there is the eighth maintenance request in step S<b>62</b>, the operation mode controller <b>105</b> performs the calibration adjustment mode processing and returns to step S<b>41</b>.</p>
<p id="p-0126" num="0125">As described above, it is possible to independently confirm the operation of each function required for the electric bending operation.</p>
<p id="p-0127" num="0126">Next, the calibration mode processing will be described by using a flow chart shown in <figref idref="DRAWINGS">FIG. 22</figref>. The operation mode controller <b>105</b> determines in step S<b>81</b> whether or not the clutch connection is OFF. When the clutch connection is OFF, the operation mode controller <b>105</b> sets the servo to OFF, and proceeds to step S<b>83</b>. When the clutch connection is not OFF, the operation mode controller <b>105</b> proceeds to step S<b>83</b> as it is.</p>
<p id="p-0128" num="0127">Then, the operation mode controller <b>105</b> determines in step S<b>83</b> whether or not the clutch connection is ON. When the clutch connection is ON, the operation mode controller <b>105</b> proceeds to step S<b>84</b>. When the clutch connection is not ON, the operation mode controller <b>105</b> returns to step S<b>81</b>.</p>
<p id="p-0129" num="0128">Then, the operation mode controller <b>105</b> determines in step S<b>84</b> whether or not the operation amount and the present position are in a predetermined range. When the operation amount and the present position are in the predetermined range, the operation mode controller <b>105</b> proceeds to step S<b>85</b>. When the operation amount and the present position are not in the predetermined range, the operation mode controller <b>105</b> returns to step S<b>81</b>.</p>
<p id="p-0130" num="0129">Then, the operation mode controller <b>105</b> determines in step S<b>85</b> whether or not the bending operation start instruction is set to ON. When the bending operation start instruction is set to ON, the operation mode controller <b>105</b> ends the processing. When the bending operation start instruction is not set to ON, the operation mode controller <b>105</b> returns to step S<b>81</b>.</p>
<p id="p-0131" num="0130">Next, the operation mode processing will be described by using a flow chart shown in <figref idref="DRAWINGS">FIG. 23</figref> and with reference to a timing chart shown in <figref idref="DRAWINGS">FIG. 24</figref>. First, in step S<b>71</b>, the servo is set to ON. In step S<b>72</b>, it is determined whether or not the process is in the torque control cycle event period. When the process is in the torque control cycle event period, the torque control calculation processing is performed in step S<b>73</b>, and the process returns to step S<b>72</b>. When the process is not in the torque control cycle event period, the process proceeds to step S<b>74</b>.</p>
<p id="p-0132" num="0131">In step S<b>74</b>, it is determined whether or not the process is in the position and speed control event period. When the process is in the position and speed control event period, the position and speed control calculation processing is performed in step S<b>75</b>, and the process returns to step S<b>72</b>. When the process is not in the position and speed control event period, the process proceeds to step S<b>76</b>. Then, in step S<b>76</b>, it is determined whether or not the servo abnormality is detected. When the servo abnormality is detected, the abnormal stop mode processing is performed in step S<b>77</b>. When the servo abnormality is not detected, the process returns to step S<b>72</b>.</p>
<p id="p-0133" num="0132">As described above, in the present embodiment, the electric bending control is performed by separating the processing into logical blocks by means of the FPGA. Thus, in the present embodiment, unlike the conventional sequential control using a microprocessor, even when an abnormality occurs in a part of the servo systems, all the control system is not stopped, and a servo system can be effectively selected. Therefore, it is possible to improve the operability without the examination being interrupted.</p>
<p id="p-0134" num="0133">Note that in the present embodiment, the control portion <b>37</b> is provided in the bending control portion <b>10</b><i>b </i>of the endoscope <b>2</b>, but the present invention is not limited to this. The control portion <b>37</b> may be provided in the image processing apparatus <b>4</b>, or may be provided in a separate controller apparatus.</p>
<p id="p-0135" num="0134">The present invention is not limited to the above described embodiment, and various modification, changes or the like, are possible within the scope and spirit of the invention.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. An electric bending endo scope comprising:
<claim-text>a bending portion provided in an insertion portion;</claim-text>
<claim-text>a bending drive unit having a plurality of components for effecting a bending operation of the bending portion;</claim-text>
<claim-text>a bending power unit configured to drive the bending drive unit;</claim-text>
<claim-text>a bending state detecting unit configured to detect operation information of the bending drive unit, and to detect bending state information of the bending portion;</claim-text>
<claim-text>an instruction unit configured to output bending instruction information for bending the bending portion;</claim-text>
<claim-text>a bending operation control unit configured by a plurality of independent logical blocks to output a control signal for controlling a bending state of the bending portion to the bending power unit based on the bending instruction information of the instruction unit;</claim-text>
<claim-text>a block monitoring unit configured to monitor a control state of the plurality of independent logical blocks configuring the bending operation control unit; and</claim-text>
<claim-text>a logical block selecting unit configured, based on a monitoring result of the block monitoring unit, when at least one of a speed control block, a torque control block, and a position control block among the plurality of independent logical blocks becomes inoperable, to switch a switch portion provided in a circuit which electrically connects the speed control block, the torque control block, and the position control block, and set a gain setting value, to thereby make a closed loop characteristic remain the same,</claim-text>
<claim-text>wherein, when it is determined that a control state of the speed control block is abnormal by the block monitoring unit, the switch portion removes only the speed control block from the circuit, and sets the gain setting value by the position control block, to thereby make the closed loop characteristic remain the same.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The electric bending endoscope according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein at least one of the plurality of independent logical blocks includes:
<claim-text>a bending state information input logical block configured to acquire the bending state information detected by the bending state detecting unit; and</claim-text>
<claim-text>a state calculation logical block configured to perform a calculation based on the bending state information acquired by the bending state information input logical block and the bending instruction information.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The electric bending endoscope according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the block monitoring unit and the logical block selecting unit are configured by the plurality of independent logical blocks.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The electric bending endoscope according to <claim-ref idref="CLM-00002">claim 2</claim-ref>,
<claim-text>wherein the bending state information includes bending position information on the bending portion, and</claim-text>
<claim-text>wherein the state calculation logical block further at least includes:</claim-text>
<claim-text>a position information calculation logical block configured to calculate a difference between the bending position information and the bending instruction information, and to calculate position deviation information;</claim-text>
<claim-text>a speed information calculation logical block configured to calculate a temporal change rate of the bending position information; and</claim-text>
<claim-text>a position information calculation logical block configured to calculate position information on the bending portion.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The electric bending endoscope according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein each of the plurality of independent logical blocks has a function whose logic can be reconfigured.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The electric bending endoscope according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein each of the plurality of independent logical blocks has a function whose logic can be reconfigured.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The electric bending endoscope according to <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein the bending operation control unit is configured by an FPGA.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. An electric bending endoscope comprising:
<claim-text>a bending portion provided in an insertion portion;</claim-text>
<claim-text>a bending drive unit having a plurality of components for effecting a bending operation of the bending portion;</claim-text>
<claim-text>a bending power unit configured to drive the bending drive unit;</claim-text>
<claim-text>a bending state detecting unit configured to detect operation information of the bending drive unit, and to detect bending state information of the bending portion;</claim-text>
<claim-text>an instruction unit configured to output bending instruction information for bending the bending portion;</claim-text>
<claim-text>a bending operation control unit configured by a plurality of independent logical blocks to output a control signal for controlling a bending state of the bending portion to the bending power unit based on the bending instruction information of the instruction unit;</claim-text>
<claim-text>a block monitoring unit configured to monitor a control state of the plurality of independent logical blocks configuring the bending operation control unit; and</claim-text>
<claim-text>a logical block selecting unit configured, based on a monitoring result of the block monitoring unit, when at least one of a speed control block, a torque control block, and a position control block among the plurality of independent logical blocks becomes inoperable, to switch a switch portion provided in a circuit which electrically connects the speed control block, the torque control block, and the position control block, and set a gain setting value, to thereby make a closed loop characteristic remain the same,</claim-text>
<claim-text>wherein each of the speed control block, the position control block, and the torque control block includes a plurality of control blocks as same components, and when it is determined that an abnormality occurs in at least one of the plurality of independent logical blocks by the block monitoring unit, the switch portion switches data flow among the speed control block, the position control block, and the torque control block. </claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
