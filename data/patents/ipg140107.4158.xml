<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625227-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625227</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13002894</doc-number>
<date>20090703</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2008-177986</doc-number>
<date>20080708</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>248</us-term-extension>
<disclaimer>
<text>This patent is subject to a terminal disclaimer.</text>
</disclaimer>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>11</class>
<subclass>B</subclass>
<main-group>15</main-group>
<subgroup>46</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>360 7304</main-classification>
</classification-national>
<invention-title id="d2e73">Transport speed adjustment device, transport speed adjustment method and transport speed adjustment program for adjusting transport speed of tape medium</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5944802</doc-number>
<kind>A</kind>
<name>Bello et al.</name>
<date>19990800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>710 52</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>5969897</doc-number>
<kind>A</kind>
<name>Morita</name>
<date>19991000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>360 7301</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>7710681</doc-number>
<kind>B2</kind>
<name>Itagaki et al.</name>
<date>20100500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>360 7301</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>7903363</doc-number>
<kind>B2</kind>
<name>Itagaki et al.</name>
<date>20110300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>360 71</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>7995303</doc-number>
<kind>B2</kind>
<name>Karp et al.</name>
<date>20110800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>360 7304</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>8035912</doc-number>
<kind>B2</kind>
<name>Katagiri et al.</name>
<date>20111000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>360 7308</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>8316162</doc-number>
<kind>B2</kind>
<name>Katagiri et al.</name>
<date>20121100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>710 52</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2005/0041317</doc-number>
<kind>A1</kind>
<name>Jaquette</name>
<date>20050200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2005/0088771</doc-number>
<kind>A1</kind>
<name>Jaquette et al.</name>
<date>20050400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>2006/0256466</doc-number>
<kind>A1</kind>
<name>Katagiri et al.</name>
<date>20061100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>JP</country>
<doc-number>04134526</doc-number>
<kind>A</kind>
<date>19920500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>JP</country>
<doc-number>04265557</doc-number>
<kind>A</kind>
<date>19920900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>JP</country>
<doc-number>05307444</doc-number>
<kind>A</kind>
<date>19931100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>JP</country>
<doc-number>10199071</doc-number>
<kind>A</kind>
<date>19980700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>JP</country>
<doc-number>2000-348432</doc-number>
<date>20001200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00016">
<document-id>
<country>JP</country>
<doc-number>2002-528835</doc-number>
<date>20020900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00017">
<document-id>
<country>JP</country>
<doc-number>2005-063444</doc-number>
<date>20050300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00018">
<document-id>
<country>JP</country>
<doc-number>2005-516340</doc-number>
<date>20050600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00019">
<document-id>
<country>JP</country>
<doc-number>2006-318571</doc-number>
<date>20061100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00020">
<document-id>
<country>JP</country>
<doc-number>2007-42159</doc-number>
<date>20070200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00021">
<document-id>
<country>WO</country>
<doc-number>0023992</doc-number>
<date>20000400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00022">
<document-id>
<country>WO</country>
<doc-number>03065374</doc-number>
<kind>A1</kind>
<date>20030800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>14</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>None</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>9</number-of-drawing-sheets>
<number-of-figures>11</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20110116185</doc-number>
<kind>A1</kind>
<date>20110519</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Katagiri</last-name>
<first-name>Takashi</first-name>
<address>
<city>Yokohama</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Nakayama</last-name>
<first-name>Hirokazu</first-name>
<address>
<city>Fujisawa</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Oishi</last-name>
<first-name>Yutaka</first-name>
<address>
<city>Kawasaki</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Katagiri</last-name>
<first-name>Takashi</first-name>
<address>
<city>Yokohama</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Nakayama</last-name>
<first-name>Hirokazu</first-name>
<address>
<city>Fujisawa</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Oishi</last-name>
<first-name>Yutaka</first-name>
<address>
<city>Kawasaki</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Griffiths &#x26; Seaton PLLC</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>International Business Machines Corporation</orgname>
<role>02</role>
<address>
<city>Armonk</city>
<state>NY</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Wong</last-name>
<first-name>K.</first-name>
<department>2688</department>
</primary-examiner>
</examiners>
<pct-or-regional-filing-data>
<document-id>
<country>WO</country>
<doc-number>PCT/JP2009/062199</doc-number>
<kind>00</kind>
<date>20090703</date>
</document-id>
<us-371c124-date>
<date>20110106</date>
</us-371c124-date>
</pct-or-regional-filing-data>
<pct-or-regional-publishing-data>
<document-id>
<country>WO</country>
<doc-number>WO2010/004936</doc-number>
<kind>A </kind>
<date>20100114</date>
</document-id>
</pct-or-regional-publishing-data>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A tape drive capable of switching the transport speed of a tape medium among multilevel speeds calculates a data transfer rate from/to a host device, and selects an adjustment mode of the transport speed of the tape medium from a constant speed mode and a speed switch mode according to the calculated data transfer rate. The tape drive in the speed switch mode, pauses a data write or read operation to switch the transport speed of the tape medium while data is written at a first transport speed and when an available capacity of a buffer memory reaches a data volume to be received from the host device during switching of the transport speed and is read out at the first transport speed and when a data volume of a buffer memory reaches a data volume to be transmitted to the host device during switching of the transport speed.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="213.70mm" wi="152.40mm" file="US08625227-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="236.81mm" wi="159.51mm" file="US08625227-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="202.18mm" wi="153.50mm" file="US08625227-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="236.81mm" wi="191.18mm" file="US08625227-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="161.54mm" wi="175.60mm" file="US08625227-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="141.99mm" wi="166.03mm" file="US08625227-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="178.14mm" wi="139.95mm" file="US08625227-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="254.85mm" wi="165.10mm" file="US08625227-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="254.85mm" wi="159.51mm" file="US08625227-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="266.45mm" wi="172.13mm" file="US08625227-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This application is a U.S. National Stage entry under 35 U.S.C. &#xa7;371 based on International Application No. PCT/JP2009/062199, filed Jul. 3, 2009, which was published under PCT Article 21(2) and which claims priority to Japanese Patent Application no. 2008-177986, filed Jul. 8, 2008.</p>
<heading id="h-0002" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0003" num="0002">1. Field of the Invention</p>
<p id="p-0004" num="0003">The present invention relates to a method for adjusting a transport speed of a tape medium in a tape drive, especially to a method for optimally adjusting a transport speed of a linear recording tape medium in a tape drive.</p>
<p id="p-0005" num="0004">2. Description of the Related Art</p>
<p id="p-0006" num="0005">In general, during a data write operation, a tape drive temporarily stores data transmitted from a host device into a buffer memory, and thereafter reads out the stored data from the buffer memory to write the data into a tape medium. Similarly, during a data read operation, the tape drive temporarily stores data read out from the tape medium into the buffer memory, and thereafter reads out the stored data from the buffer memory to transmit the data to the host device. The tape drive performs these data write and read operations by causing relative movement between a head and the tape medium. Accordingly, in a tape drive, a data transfer rate between a tape medium and a buffer memory is proportional to a transport speed of the tape medium.</p>
<p id="p-0007" num="0006">In a conventional tape drive, the tape medium is transported at a transport speed selected from the following two values so as not to make a host device wait, in the interest of a performance of the entire system. Specifically, if the tape medium can be transported at such a transport speed that makes a data transfer rate to/from the host device equal to a data transfer rate to/from the tape medium, this transport speed is selected. On the other hand, if this transport speed is impossible, such a transport speed that makes the data transfer rate to/from the tape medium higher than the data transfer rate to/from the host device is selected. However, when the tape medium is transported at such a transport speed that the data transfer rate to/from the tape medium higher than the data transfer rate to/from the host device, back hitches occur in the tape drive. Specifically, in this case, a back hitch occurs every time the buffer memory empties during a data write operation, and every time the buffer memory becomes full during a data read operation.</p>
<p id="p-0008" num="0007">A back hitch is an operation of firstly reducing a transport speed of a tape medium to stop it for a while and then transporting the tape medium back to a predetermined position in order to reposition the tape medium to an appropriate data write or read out position. Since the back hitch is a burden to the tape medium, fewer the back hitches the better. For example, if the tape drive can be caused to constantly operate at such a transport speed that makes the data transfer rate to/from the host device equal to the data transfer rate to/from the tape medium, no back hitch occurs in the tape drive. However, in order to make the tape drive capable of constantly operating at such a transport speed that makes the data transfer rate to/from the tape medium equal to the data transfer rate to/from the host device, which can be any rate, the transport speed of the tape medium should be set switchable among on the order of 100 levels. However, this method is not realistic for the following reason.</p>
<p id="p-0009" num="0008">It is known that an error rate during a data read operation depends on both a transport speed of the tape medium during the operation and a transport speed of the tape medium during a data write operation for the data to be read out. Thus, if the transport speed of the tape medium is set switchable among on the order of 100 levels, it should be checked that an error rate during a data read operation falls within a range specified in the specifications, for each of the multilevel transport speeds. However, this means that the above test should be conducted for 10000 combinations of the multilevel transport speeds.</p>
<p id="p-0010" num="0009">For example, Japanese Patent Application Publication No. 2000-348432 discloses an example of a conventional technique for preventing decrease in data transfer efficiency between a tape drive and a host device to reduce damage on a tape medium caused by back hitches to a level equivalent to that caused by normal reproduction. Specifically, a magnetic record/reproduction system disclosed in Japanese Patent Application Publication No. 2000-348432 monitors a data volume in a buffer memory during a data reproduction operation, and outputs an instruction to decrease a transport speed of a magnetic tape in stages so as to decrease a data reproduction speed if a data transfer rate required by a host computer gets lower than a data read rate.</p>
<p id="p-0011" num="0010">Meanwhile, Japanese Patent Application Publication No. 2007-42159 discloses an improved version of the technique disclosed in Japanese Patent Application Publication No. 2000-348432. Specifically, a data reproduction device disclosed in Japanese Patent Application Publication No. 2007-42159 is capable of switching a reproduction speed of a tape drive among multilevel speeds. The data reproduction device determines the number of memory regions in storage means each available for storing a group of data; and the number of memory regions in the storage means each storing therein a group of data ready for transmission to an external device, and switches the reproduction speed according to these determined numbers. In addition, Japanese Patent Application Publication No. 2007-42159 regards it as a problem that a back hitch will eventually occur in the magnetic record/reproduction system disclosed in Japanese Patent Application Publication No. 2000-348432 if it fails to pick up any data set during the switch of the reproduction speed or is likely to fail. Therefore, Japanese Patent Application Publication No. 2007-42159 discloses a technique of compensating for a data set that a data drive has failed to pick up, with an error correcting code (C2 parity or C3 parity), and thereby causing no back hitch operation to eventually occur during the switch of the reproduction speed.</p>
<heading id="h-0003" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0012" num="0011">If the technique disclosed in Japanese Patent Application Publication No. 2007-42159 is applied to a tape drive including a phase locked loop (PLL) in a locked condition to maintain a transport speed of a tape medium constant, some back hitches still occur therein during the switch of the transport speed. This is because, since such a tape drive performs a data write or read operation under the assumption that the PLL is in a locked condition and that the transport speed of the tape medium is constant, the data write or read operation needs to be stopped for a while during the switch of the transport speed of the tape medium. Accordingly, back hitches will inevitably occur in such a tape drive.</p>
<p id="p-0013" num="0012">Note that the assumption that the PLL is in a locked condition and that the transport speed of the tape medium is constant is necessary for a track position of the tape medium and a linear recording density to fall within their allowances. In a tape drive, especially in a linear recording tape drive, an off-track displacement might result in the overwriting of data in an adjacent track. Meanwhile, if data is recorded in the tape medium with a linear recording density beyond the allowance, the tape drive might be unable to read out the data during a data read operation. Thus, the tape drive performs data write and read out operations under the assumption that the PLL is in a locked condition and that the transport speed of the tape medium is constant, and thereby assures that the track position of the tape medium and the linear recording density fall within their allowances.</p>
<p id="p-0014" num="0013">Under such circumstances, the present invention has an object to provide a transport speed adjustment method, a transport speed adjustment device and a transport speed adjustment program that are capable of solving the above problems, that is, capable of reducing back hitches while preventing decrease in data transfer efficiency between a host device and a tape drive configured to stop a data write or read operation for a while during the switch of a transport speed of a tape medium.</p>
<p id="p-0015" num="0014">It has been found that such an adjustment mode of a transport speed of a tape medium more effective in reducing back hitches varies with a change in a first transfer rate which is a data transfer rate between a host device and a tape drive. Hence, the present invention employs a configuration in which an adjustment mode of a transport speed of a tape medium is selected from multiple modes in accordance with a first transfer rate instead of employing a fixed adjustment mode of the transport speed of the tape medium. Specifically, the present invention to achieve the above object is implemented by the following transport speed adjustment device for adjusting a transport speed of a tape medium. According to the present invention, a tape drive capable of switching a transport speed of a tape medium among multilevel speeds includes receiving means, a buffer memory, transport means and writing means. The receiving means receives data from a host device through a network. The buffer memory temporarily stores the received data therein. The transport means transports the tape medium in a longitudinal direction thereof at a transport speed selected from multilevel transport speeds at which transport means can transport the tape medium. The writing means writes the data in the buffer memory into a track formed to extend in the transport direction of the tape medium. The above transport speed adjustment device is implemented by the foregoing tape drive further including the following means.</p>
<p id="p-0016" num="0015">Specifically, the above transport speed adjustment device further includes transfer rate calculation means, mode selection means, transport speed setting means, required time obtaining means, threshold calculation means, monitoring means and speed adjustment means. The transfer rate calculation means calculates a first transfer rate which is a data transfer rate between the host device and the tape drive. The mode selection means selects, from adjustment modes consisting of a speed switch mode and a constant speed mode, an adjustment mode corresponding to the calculated first transfer rate, by referring to a mode selection table in which such an adjustment mode more effective in reducing back hitches is defined in accordance with the first transfer rate. Here, the transport speed is switched between a first transport speed and a second transport speed in the speed switch mode, while the transport speed is fixed at the second transport speed in the constant speed mode. The first transport speed is the highest speed of one or more transport speeds at which the transport means can be caused to operate under a condition that a second transfer rate, which is a data transfer rate between the buffer memory and the tape medium, is lower than the first transfer rate. The second transport speed is one-level higher than the first transport speed. The transport speed setting means causes the transport means to operate at the first transport speed at the beginning of data writing, in response to selection of the speed switch mode. The required time obtaining means obtains a time required to switch the transport speed of the tape medium from the first transport speed to the second transport speed, in response to the selection of the speed switch mode. The threshold calculation means calculates, from the first transfer rate and the obtained required time, a data volume expected to be received from the host device during switch of the transport speed, as a threshold. The monitoring means monitors an available data storage capacity of the buffer memory while data is written at the first transport speed in the speed switch mode, and outputs a first switch notice if the available capacity reaches the threshold. The speed adjustment means stops movement of the writing means and causes the transport means to operate at the second transport speed, in response to the first switch notice.</p>
<p id="p-0017" num="0016">Preferably, the above transport speed adjustment device should further include compression means for compressing the received data before the data is stored in the buffer memory. The transfer rate calculation means calculates V/T as the first transfer rate, from a data volume V stored in the buffer memory in a time span T.</p>
<p id="p-0018" num="0017">Preferably, the monitoring means should also monitor an available data storage capacity of the buffer memory while data is written at the second transport speed in the speed switch mode, and also outputs a second switch notice if the available capacity reaches the initial capacity of the buffer memory. The speed adjustment means should preferably also stop movement of the writing means and causes the transport means to operate at the first transport speed, in response to the second switch notice.</p>
<p id="p-0019" num="0018">Preferably, the required time should include: a time required to pause transportation of the tape medium; a time required to rewind the tape medium for positioning of the writing means; and a time required to set the transport direction of the tape medium back to a normal transport direction and to switch the transport speed from the first transport speed to the second transport speed.</p>
<p id="p-0020" num="0019">Preferably, the above transport speed adjustment device should further include a storage for storing therein a table. In the table, each of the multilevel transport speeds at which the transport means can be caused to operate is associated with one of aforementioned second transfer rates. Here, the associated second transfer rate is to be selected when the transport means is caused to operate at the transport speed. The transport speed setting means should preferably determine a transport speed at which the transport means is caused to operate, by referring to the table.</p>
<p id="p-0021" num="0020">More preferably, the above transport speed adjustment device should further include management information adding means and correction information adding means. The management information adding means adds, to the data stored in the buffer memory, management information used for managing the data in the transport speed adjustment device. The correction information adding means adds, to the data stored in the buffer memory, error correction information used for performing error correction on the data. As the second transfer rate in the aforementioned table, V/T should more preferably be calculated from a data volume V firstly processed by both the management information adding means and the correction information adding means and then transmitted to the tape medium in a time span T.</p>
<p id="p-0022" num="0021">In addition, the present invention to achieve the above object is also implemented by the following transport speed adjustment device for adjusting a transport speed of a tape medium. According to the present invention, a tape drive capable of switching a transport speed of a tape medium among multilevel speeds includes transport means, reading means, a buffer memory and transmitting means. The transport means transports the tape medium in a longitudinal direction thereof at a transport speed selected from multilevel transport speeds at which transport means can transport the tape medium. The reading means reads out data recorded in a track formed to extend in the transport direction of the tape medium. The buffer memory temporarily stores the read out data therein. The transmitting means transmits the data in the buffer memory to a host device through a network. The above transport speed adjustment device is implemented by the foregoing tape drive further including the following means.</p>
<p id="p-0023" num="0022">Specifically, the above transport speed adjustment device further includes transfer rate calculation means, mode selection means, required time obtaining means, threshold calculation means, monitoring means and speed adjustment means. The transfer rate calculation means calculates a first transfer rate which is a data transfer rate between the host device and the transport speed adjustment device. The mode selection means selects, from adjustment modes consisting of a speed switch mode and a constant speed mode, an adjustment mode corresponding to the calculated first transfer rate, by referring to a mode selection table in which such an adjustment mode more effective in reducing back hitches is defined in accordance with the first transfer rate. Here, the transport speed is switched between a first transport speed and a second transport speed in the speed switch mode, while the transport speed is fixed at the second transport speed in the constant speed mode. The first transport speed is the highest speed of one or more transport speeds at which the transport means can be caused to operate under a condition that a second transfer rate, which is a data transfer rate between the buffer memory and the tape medium, is lower than the first transfer rate. The second transport speed is one-level higher than the first transport speed. The required time obtaining means obtains a time required to switch the transport speed of the tape medium from the first transport speed to the second transport speed, in response to the selection of the speed switch mode. The threshold calculation means calculates, from the first transfer rate and the obtained required time, a data volume expected to be transmitted to the host device during switch of the transport speed, as a threshold. The monitoring means monitors a data volume stored in the buffer memory while data is read out at the first transport speed in the speed switch mode, and outputs a first switch notice if the data volume reaches the threshold. The speed adjustment means stops movement of the reading means and causes the transport means to operate at the second transport speed, in response to the first switch notice.</p>
<p id="p-0024" num="0023">Preferably, the above transport speed adjustment device should further include decompression means for decompressing the data read out from the buffer memory before the data is transmitted to the host device. In the tape medium, compressed data should preferably be recorded. The transfer rate calculation means should preferably calculate V/T as the first transfer rate, from a data volume V forwarded from the buffer memory to the decompression means in a time span T.</p>
<p id="p-0025" num="0024">Preferably, the required time should include: a time required to pause transportation of the tape medium; a time required to rewind the tape medium for positioning of the reading means; and a time required to set the transport direction of the tape medium back to a normal transport direction and to switch the transport speed from the first transport speed to the second transport speed.</p>
<p id="p-0026" num="0025">Preferably, the above transport speed adjustment device should further include transport speed setting means for causing the transport means to operate at the second transport speed at the beginning of data reading. Note that the second transport speed is also the lowest speed of one or more transport speeds at which the transport means can be caused to operate under a condition that the second transfer rate is higher than the first transfer rate. The monitoring means should preferably also monitor a data volume stored in the buffer memory while data is read out at the second transport speed in the speed switch mode, and also outputs a second switch notice if the data volume reaches the initial capacity of the buffer memory. The speed adjustment means should preferably also stop movement of the reading means and cause the transport means to operate at the first transport speed, in response to the second switch notice.</p>
<p id="p-0027" num="0026">More preferably, the above transport speed adjustment device should further include a storage for storing therein a table. In the table, each of the multilevel transport speeds at which the transport means can be caused to operate is associated with one of aforementioned second transfer rates. Here, the associated second transfer rate is to be selected when the transport means is caused to operate at the transport speed. The transport speed setting means should more preferably determine a transport speed at which the transport means is caused to operate, by referring to the table.</p>
<p id="p-0028" num="0027">More preferably, the above transport speed adjustment device should further include error correction means for performing error correction on the data stored in the buffer memory. As the second transfer rate stored in the table, V/T should more preferably be calculated from a data volume V firstly read out from the tape medium to the buffer memory and then processed by the error correction means in a time span T.</p>
<p id="p-0029" num="0028">Hereinabove, the present invention has been described as a transport speed adjustment device for adjusting a transport speed of a tape medium. However, the present invention can also be conceived as a transport speed adjustment method to be employed in a tape drive capable of switching a transport speed of a tape medium among multilevel speeds and a transport speed adjustment program to be executed on such a tape drive.</p>
<p id="p-0030" num="0029">According to the present invention, in a tape drive configured to stop a data write or read operation for a while during the switch of a transport speed of a tape medium, such an adjustment mode of a transport speed of a tape medium more effective in reducing back hitches is selected from adjustment modes consisting of a speed switch mode and a constant speed mode, in accordance with a first transfer rate which is a data transfer rate from/to a host device. In the speed switch mode, the transport speed of the tape medium is switched between a first transport speed and a second transport speed.</p>
<p id="p-0031" num="0030">Here, the first transport speed makes a second transfer rate, which is a data transfer rate from/to the tape medium, lower than the first transfer rate, while the second transport speed is one-level higher than the first transport speed and makes the second transfer rate higher than the first transfer rate.</p>
<p id="p-0032" num="0031">Meanwhile, the transport speed of the tape medium is fixed at the second transport speed in the constant speed mode. Each of the above conventional techniques employs a fixed method for adjusting a transport speed of a tape medium, that is, a fixed adjustment mode. By contrast, in the present invention, an optimum adjustment mode is selected in accordance with the first transfer rate. Thus, the present invention can reduce more back hitches than these conventional techniques. Moreover, the present invention assures secure data reception or transmission from/to the host device even during the switch of the transport speed of the tape medium. Accordingly, the present invention makes it possible to reduce back hitches while preventing decrease in data transfer efficiency between the tape drive and the host device. The other effects of the present invention will be understood from the following description of an embodiment.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0033" num="0032">In order that the advantages of the invention will be readily understood, a more particular description of the invention briefly described above will be rendered by reference to specific embodiments that are illustrated in the appended drawings. Understanding that these drawings depict only typical embodiments of the invention and are not therefore to be considered to be limiting of its scope, the invention will be described and explained with additional specificity and detail through the use of the accompanying drawings, in which:</p>
<p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. 1</figref> shows an example of a hardware configuration of a tape drive to which the present invention can be applied;</p>
<p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. 2A</figref> shows an example of a configuration of a recording area of a tape medium, according to an embodiment of the present invention</p>
<p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. 2B</figref> shows an example of a configuration of a band;</p>
<p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. 2C</figref> shows an example of a configuration of a data set;</p>
<p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. 3</figref> shows an example of a functional configuration of a controller, according to the embodiment of the present invention;</p>
<p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. 4</figref> is a graph showing relations of the number of back hitches to transfer rates between a host device and a conventional tape drive and between the host device and the tape drive to which the present invention is applied;</p>
<p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. 5</figref> is a graph showing relations of the number of back hitches to transfer rates between a host device and a conventional tape drive with a larger buffer memory, and between the host device and the tape drive with a larger buffer memory to which the present invention is applied;</p>
<p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. 6A</figref> shows an example of a mode selection table, according to the embodiment;</p>
<p id="p-0042" num="0041"><figref idref="DRAWINGS">FIG. 6B</figref> shows an example of an association table, according to the embodiment;</p>
<p id="p-0043" num="0042"><figref idref="DRAWINGS">FIG. 6C</figref> shows an example of a required time table, according to the embodiment;</p>
<p id="p-0044" num="0043"><figref idref="DRAWINGS">FIG. 7</figref> shows an example of a travel path of a read/write head on the tape medium obtained while the transport speed of the tape medium is switched;</p>
<p id="p-0045" num="0044"><figref idref="DRAWINGS">FIG. 7</figref> shows an example of a travel path of a read/write head on the tape medium obtained while the transport speed of the tape medium is switched;</p>
<p id="p-0046" num="0045"><figref idref="DRAWINGS">FIG. 8A</figref> shows an example of a state of the buffer memory at a timing when the transport speed of the tape medium starts to be switched to the second transport speed during the data write operation;</p>
<p id="p-0047" num="0046"><figref idref="DRAWINGS">FIG. 8B</figref> shows an example of a state of the buffer memory at a timing when the transport speed starts to be switched to the first transport speed during the data write operation;</p>
<p id="p-0048" num="0047"><figref idref="DRAWINGS">FIG. 9A</figref> shows an example of a state of the buffer memory at a timing when the transport speed of the tape medium starts to be switched to the first transport speed during the data read operation;</p>
<p id="p-0049" num="0048"><figref idref="DRAWINGS">FIG. 9B</figref> shows an example of a state of the buffer memory at a timing when the transport speed starts to be switched to the second transport speed during the data read operation;</p>
<p id="p-0050" num="0049"><figref idref="DRAWINGS">FIG. 10</figref> is a flowchart showing an example of a processing flow in which the controller according to the embodiment of the present invention adjusts the transport speed of the tape medium during the data write operation; and</p>
<p id="p-0051" num="0050"><figref idref="DRAWINGS">FIG. 11</figref> is a flowchart showing an example of a processing flow in which the controller according to the embodiment of the present invention adjusts the transport speed of the tape medium during the data read operation.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DETAILED DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0052" num="0051">Hereinbelow, detailed description will be given of an embodiment of the present invention with reference to the drawings. Note, however, that the embodiment to be described below does not limit the present invention defined by the scope of the claims, and that not all the combinations of the features described in the embodiment are essential for the solving means of the present invention. Throughout the following embodiment, the same elements are denoted by the same reference numerals.</p>
<p id="p-0053" num="0052">In the following description of the present invention, a tape drive complying with the linear tape open (LTO) standard is taken as an example. The LTO standard is an open format standard developed jointly by Hewlett-Packard Company, IBM Corporation, and Seagate Technology LLC.</p>
<p id="p-0054" num="0053"><figref idref="DRAWINGS">FIG. 1</figref> shows an example of a hardware configuration of a tape drive <b>100</b> complying with the LTO standard. The embodiment of the present invention is applied to the tape drive <b>100</b>. The tape drive <b>100</b> includes a communication interface <b>105</b>, a buffer memory <b>110</b>, a recording channel <b>115</b>, a read/write unit <b>120</b>, a positioning unit <b>125</b>, a motor driver <b>130</b>, a motor <b>135</b> and a controller <b>150</b>. In addition, the tape drive <b>100</b> according to this embodiment also includes a compression/decompression unit <b>140</b> and an error correction processor <b>145</b>.</p>
<p id="p-0055" num="0054">The communication interface <b>105</b> communicates with a host device <b>200</b>. For example, the communication interface <b>105</b> receives, from the host device <b>200</b>, user data to be written in a tape medium <b>300</b> and a write command to instruct the tape drive <b>100</b> to write the data in the tape medium <b>300</b>.</p>
<p id="p-0056" num="0055">The tape drive <b>100</b> is connected to the host device <b>200</b> through a small computer system interface (SCSI) and a network such as a local area network (LAN). Alternatively, the tape drive <b>100</b> may be connected to the host device <b>200</b> through a network such as a dedicated line or the Internet. Still alternatively, the tape drive <b>100</b> may be connected to an information processor such as a personal computer through a communication interface such as a SCSI interface or a LAN to be eventually connected to the host device <b>200</b> through the information processor.</p>
<p id="p-0057" num="0056">The buffer memory <b>110</b> temporarily stores therein data to be written in the tape medium <b>300</b> and data read out from the tape medium <b>300</b>, and is configured with, for example, a dynamic random access memory (DRAM). The buffer memory <b>110</b> according to this embodiment is partitioned into segments each having a size of approximately 2 megabytes, which is equal to the size of a data set treated as a unit data in the tape drive <b>100</b> complying with the LTO standard.</p>
<p id="p-0058" num="0057">The recording channel <b>115</b> is a communication channel used for writing, into the tape medium <b>300</b>, data stored in the buffer memory <b>110</b>, and for temporarily storing data read out from the tape medium <b>300</b> into the buffer memory <b>110</b>.</p>
<p id="p-0059" num="0058">The read/write unit (read/write head) <b>120</b> has a data-read/write element, thereby writes data into the tape medium <b>300</b> and reads out data from the tape medium <b>300</b>. In addition, the read/write unit <b>120</b> according to this embodiment also has a servo read element and thereby reads out a signal from servo tracks provided on the tape medium <b>300</b>.</p>
<p id="p-0060" num="0059">The positioning unit <b>125</b> instructs the read/write unit <b>120</b> to move in a direction (width direction) parallel to the shorter sides of the tape medium <b>300</b>. Reels <b>137</b><i>a </i>and <b>137</b><i>b </i>rotates to move the tape medium <b>300</b> in a direction from the reel <b>137</b><i>a </i>to the reel <b>137</b><i>b </i>or in a direction from the reel <b>137</b><i>b </i>to the reel <b>137</b><i>a</i>. The motor driver <b>130</b> drives the motor <b>135</b>, and the motor <b>135</b> controls rotation of the reels <b>137</b><i>a </i>and <b>137</b><i>b </i>to transport the tape medium <b>300</b> in the longitudinal direction thereof. Note that, hereinbelow, the positioning unit <b>125</b>, the motor driver <b>130</b> and the motor <b>135</b> are collectively referred to as a transport unit <b>139</b>. The transport unit <b>139</b> according to the present invention is capable of switching among different transport speeds of the tape medium <b>300</b>.</p>
<p id="p-0061" num="0060">When the communication interface <b>105</b> receives data during a data write operation, the compression/decompression unit <b>140</b> compresses the received data before the data is stored in the buffer memory <b>110</b>. The data compressed by the compression/decompression unit <b>140</b> is stored in the buffer memory <b>110</b> in a manner that each data set is stored in a segment of the buffer memory <b>110</b>. On the other hand, when the compressed data read out from the tape medium <b>300</b> is stored in the buffer memory <b>110</b> during a data read operation, the compression/decompression unit <b>140</b> decompresses the compressed data before the data is transmitted to the host device <b>200</b> through the communication interface <b>105</b>.</p>
<p id="p-0062" num="0061">The controller <b>150</b> controls the whole tape drive <b>100</b>. Specifically, the controller <b>150</b> controls the writing of data into the tape medium <b>300</b> and the reading out of data from the tape medium <b>300</b> according to a command received through the communication interface <b>105</b>. In addition, the controller <b>150</b> controls the transport unit <b>139</b> to adjust the transport speed of the tape medium <b>300</b>. The controller <b>150</b> according to the present invention causes, at an appropriate timing, the transport unit <b>139</b> to transport the tape medium <b>300</b> at an appropriate transport speed so as to reduce back hitches while preventing decrease in data transfer efficiency between the tape drive <b>100</b> and the host device <b>200</b>. The transport speed adjustment performed by the controller <b>150</b> will be described in detail later.</p>
<p id="p-0063" num="0062">During the data write operation, the controller <b>150</b> according to this embodiment also creates a management information piece indicating contents of a data set stored in each segment of the buffer memory <b>110</b> and stores each management information piece in a segment including the corresponding data set. Such a management information piece is called a data set information table (DSIT). Note that, during the data read operation, the management information pieces respectively added to the data sets in the segments are not transmitted to the host device <b>200</b>.</p>
<p id="p-0064" num="0063">The foregoing controller <b>150</b> is implemented by a CPU <b>152</b>, a RAM <b>154</b> and a ROM <b>156</b>. Here, the ROM <b>156</b> stores therein a boot program executed by the CPU <b>152</b> in the boot-up of the tape drive <b>100</b> and programs causing the controller <b>150</b> to provide the above functions after the tape drive <b>100</b> is booted, such as a transport speed adjustment program according to the present invention. The CPU <b>152</b> executes these programs by using the RAM <b>154</b>.</p>
<p id="p-0065" num="0064">During the data write operation, the error correction processor <b>145</b> calculates an error correcting code (hereinbelow, referred to as ECC) for a data set stored in each segment of the buffer memory <b>110</b>, and adds the calculated ECC to the data set. In addition, during the data read operation, the error correction processor <b>145</b> performs error correction on a data set stored in each segment of the buffer memory <b>110</b> by using the ECC added to the data set.</p>
<p id="p-0066" num="0065"><figref idref="DRAWINGS">FIGS. 2A to 2C</figref> show an example of a configuration of a recording area of the tape medium <b>300</b> according to this embodiment. The tape medium <b>300</b> has multiple bands <b>305</b> arranged to extend in the longitudinal direction of the tape medium <b>300</b> from the beginning of tape (BOT) to the end of tape (EOT) as shown <figref idref="DRAWINGS">FIG. 2A</figref>. In addition, servo tracks <b>310</b> are provided on both longitudinal sides of each of the multiple bands <b>305</b> to extend in the longitudinal direction. Each servo track <b>310</b> is used to control a data writing position or a data reading position.</p>
<p id="p-0067" num="0066">As shown in <figref idref="DRAWINGS">FIG. 2B</figref>, each band <b>305</b> has multiple data tracks <b>315</b> arranged to extend in the longitudinal direction of the tape medium <b>300</b>. Each data track <b>315</b> includes multiple data sets <b>320</b> arranged side by side in the longitudinal direction of the tape medium <b>300</b>. As shown in <figref idref="DRAWINGS">FIG. 2C</figref>, each data set <b>320</b> includes: a user data set <b>325</b> transmitted from the host device <b>200</b>; and a DSIT <b>330</b> which is a management information piece for the user data set <b>325</b>. In addition, an ECC <b>335</b> calculated by the above error correction processor <b>145</b> is also added to each data set <b>320</b> according to this embodiment.</p>
<p id="p-0068" num="0067"><figref idref="DRAWINGS">FIG. 3</figref> shows an example of a functional configuration of the controller <b>150</b> according to this embodiment. As described above, the controller <b>150</b> according to this embodiment has a function of adjusting a transport speed of the tape medium <b>300</b> in addition to typical functions of a controller of a tape drive in order to reduce back hitches while preventing decrease in data transfer efficiency between the tape drive <b>100</b> and the host device <b>200</b>. The controller <b>150</b> having the function of adjusting a transport speed of the tape medium <b>300</b> as described above includes a transfer rate calculation unit <b>400</b>, a mode selection unit <b>405</b>, a transport speed setting unit <b>410</b>, a required time obtaining unit <b>415</b>, a threshold calculation unit <b>420</b>, a monitoring unit <b>425</b>, a speed adjustment unit <b>430</b>, a storage <b>435</b> and a buffer <b>440</b>.</p>
<p id="p-0069" num="0068">The transfer rate calculation unit <b>400</b> calculates a first transfer rate which is a data transfer rate between the host device <b>200</b> and the tape drive <b>100</b>. For example, the transfer rate calculation unit <b>400</b> may calculate v/t as a first transfer rate during the data write operation from a data volume v received by the communication interface <b>105</b> in a time span t. Alternatively, if the tape drive <b>100</b> compresses data received from the host device <b>200</b>, the transfer rate calculation unit <b>400</b> may calculate V/t as the first transfer rate during the data write operation from a compressed data volume V stored in the buffer memory <b>110</b> in a time span t. Still alternatively, in this case, the transfer rate calculation unit <b>400</b> may calculate v/C/t as the first transfer rate during the data write operation by using a data volume v received by the communication interface <b>105</b> in a time span t, and a compression rate C.</p>
<p id="p-0070" num="0069">Similarly, the transfer rate calculation unit <b>400</b> may calculate v/t as a first transfer rate during the data read operation from a data volume v transmitted by the communication interface <b>105</b> in a time span t, for example. Alternatively, if the tape drive <b>100</b> decompresses data read out from the tape medium <b>300</b>, the transfer rate calculation unit <b>400</b> may calculate V/t as the first transfer rate during the data read operation from a data volume V transmitted to the compression/decompression unit <b>140</b> from the buffer memory <b>110</b> in a time span t. Still alternatively, in this case, the transfer rate calculation unit <b>400</b> may calculate v/C/t as the first transfer rate during the data read operation by using a data volume v transmitted by the communication interface <b>105</b> in a time span t, and the compression rate C. Each first transfer rate calculated by the transfer rate calculation unit <b>400</b> is given to the mode selection unit <b>405</b> to be described later.</p>
<p id="p-0071" num="0070">The mode selection unit <b>405</b> selects, from adjustment modes of the transport speed of the tape medium <b>300</b> consisting of a speed switch mode and a constant speed mode, an adjustment mode corresponding to the calculated first transfer rate, by referring to a mode selection table <b>436</b> in which such adjustment modes more effective in reducing back hitches are defined in accordance with first transfer rates. In the speed switch mode, the transport speed of the tape medium <b>300</b> is switched between a first transport speed and a second transport speed, while the transport speed of the tape medium <b>300</b> is fixed at the second transport speed in the constant speed mode. Here, the first transport speed is the highest speed of one or more transport speeds at which the transport unit <b>139</b> can be caused to operate under a condition that a second transfer rate, which is a data transfer rate between the buffer memory <b>110</b> and the tape medium <b>300</b>, is lower than the first transfer rate. On the other hand, the second transport speed is one-level higher than the first transport speed. Note that the second transport speed is also the lowest speed of one or more transport speeds at which the transport unit <b>139</b> can be caused to operate under a condition that the second transfer rate is higher than the first transfer rate. Together with the first transfer rate calculated by the transfer rate calculation unit <b>400</b>, the selection result of the mode selection unit <b>405</b> is given to the transport speed setting unit <b>410</b> to be described later, and, if the speed switch mode is selected, also given to the required time obtaining unit <b>415</b>. In addition, the selection result of the mode selection unit <b>405</b> is given to the monitoring unit <b>425</b>, too.</p>
<p id="p-0072" num="0071">Hereinbelow, by referring to <figref idref="DRAWINGS">FIGS. 4 and 5</figref>, it will be explained that such an adjustment mode of the transport speed of the tape medium <b>300</b> more effective in reducing back hitches varies with a change in the first transfer rate. <figref idref="DRAWINGS">FIGS. 4 and 5</figref> each show the numbers of back hitches in a certain time period in different transfer rates between the host device <b>200</b> and the tape drive <b>100</b>. In each of <figref idref="DRAWINGS">FIGS. 4 and 5</figref>, the horizontal axis represents the first transfer rate, which is the data transfer rate between the host device <b>200</b> and the tape drive <b>100</b> while the vertical axis represents the number of back hitches in a certain time period (hereinbelow, simply referred to as the number of back hitches). In addition, in each of <figref idref="DRAWINGS">FIGS. 4 and 5</figref>, the dotted line represents data obtained when the tape drive <b>100</b> operates constantly in the constant speed mode where the transport speed of the tape medium <b>300</b> is fixed at the second transport speed. Meanwhile, the dashed-dotted line represents data obtained when the tape drive <b>100</b> operates constantly in the speed switch mode where the transport speed of the tape medium <b>300</b> is switched between the first and second transport speeds at appropriate timings according to the result of monitoring the buffer memory <b>110</b>.</p>
<p id="p-0073" num="0072">As is clear from <figref idref="DRAWINGS">FIG. 4</figref>, such an adjustment mode more effective in reducing back hitches varies between the constant speed mode and the speed switch mode with a change in the first transfer rate. For example, while the first transfer rate is in a range from 31.2 MB/s to 34.8 MB/s, the number of back hitches is smaller in the speed switch mode. On the other hand, while the first transfer rate is in a range from 34.8 MB/s to 48 MB/s, the number of back hitches is smaller in the constant speed mode. Accordingly, the present invention employs a configuration for selecting such an adjustment mode more effective in reducing back hitches in accordance with the first transfer rate. In <figref idref="DRAWINGS">FIG. 4</figref>, the solid line represents data obtained when the tape drive <b>100</b> according to the present invention actually operates. By applying the present invention to the tape drive <b>100</b>, the number of back hitches required when the first transfer rate is 31.2 MB/s can be reduced to 0 from 27 that is required in the tape drive <b>100</b> caused to operate constantly in the constant speed mode. In addition, by applying the present invention to the tape drive <b>100</b>, the peak value of the required number of back hitches in a first transfer rate range from 31.2 MB/s to 49 MB/s can be reduced to 22 from 27 that is required in the tape drive <b>100</b> caused to operate constantly in the constant speed mode, and from 25 that is required in the tape drive <b>100</b> caused to operate constantly in the speed switch mode. Note that, as is clear from <figref idref="DRAWINGS">FIG. 4</figref>, when the first transfer rate is 49 MB/s or higher, the number of the back hitches is always smaller in the constant speed mode.</p>
<p id="p-0074" num="0073"><figref idref="DRAWINGS">FIG. 5</figref> shows data obtained by using the tape drive <b>100</b> including the buffer memory <b>110</b> with a larger capacity than the buffer memory <b>110</b> of the tape drive <b>100</b> used for obtaining the data shown in <figref idref="DRAWINGS">FIG. 4</figref>. As is clear from <figref idref="DRAWINGS">FIG. 5</figref>, such an adjustment mode more effective in reducing back hitches repeatedly varies between the constant speed mode and the speed switch mode in a first transfer rate range from 30 MB/s to 160 MB/s. However, by applying the present invention to the tape drive <b>100</b>, each of the peak values of the number of back hitches observed in a first transfer rate range from 30 MB/s to 110 MB/s can be approximately halved. As described above, though back hitches can be reduced by applying the present invention to the tape drive <b>100</b>, the magnitude of the effect of this application also depends on the capacity of the buffer memory <b>110</b> included in the tape drive <b>100</b>.</p>
<p id="p-0075" num="0074">Note that at least one mode selection table <b>436</b> to which the mode selection unit <b>405</b> refers is previously stored in the storage <b>435</b> to be described later. Then, description will hereinbelow be given of a method for creating the mode selection table <b>436</b> to be stored in the storage <b>435</b>. As described above, in the mode selection table <b>436</b>, such adjustment modes more effective in reducing back hitches selected from the constant speed mode and the speed switch mode are defined in accordance with first transfer rates. <figref idref="DRAWINGS">FIG. 6A</figref> shows an example of the mode selection table <b>436</b>. In the mode selection table <b>436</b> shown in <figref idref="DRAWINGS">FIG. 6A</figref>, an adjustment mode to be selected is associated with each range of the first transfer rate. To take the data shown in <figref idref="DRAWINGS">FIG. 4</figref> as an example, the first transfer rate of 31.2 MB/s or higher but lower than 34.8 MB/s is associated with the speed switch mode while the first transfer rate of 34.8 MB/s or higher but lower than 48 MB/s is associated with the constant speed mode. Alternatively, the mode selection table <b>436</b> may list ranges of the first transfer rate at which the speed switch mode (or the constant speed mode) is to be selected.</p>
<p id="p-0076" num="0075">Regardless of the type of the mode selection table <b>436</b>, in order to create the mode selection table <b>436</b>, it is necessary to obtain the first transfer rate at each exact time when such an adjustment mode more effective in reducing back hitches varies between the constant speed mode and the speed switch mode. Such first transfer rate values are: first transfer rate values C<b>1</b>, C<b>2</b>, . . . , at the intersections of the dotted line and the dashed-dotted line in each of <figref idref="DRAWINGS">FIGS. 4 and 5</figref>; and first transfer rate values E<b>1</b>, E<b>2</b>, . . . , at the points where the number of back hitches is 0. Once the first transfer rate values C<b>1</b>, C<b>2</b>, . . . , and E<b>1</b>, E<b>2</b>, . . . , are obtained, the mode selection table <b>436</b> can be created by associating the first transfer rate in each range with either adjustment mode as follows. Specifically, for example, the first transfer rate of the first transfer rate value C<b>1</b> or higher but lower than the first transfer rate value E<b>1</b> is associated with the constant speed mode, the first transfer rate of the first transfer rate value E<b>1</b> or higher but lower than the first transfer rate value C<b>2</b> is associated with the speed switch mode, and so forth for all remaining ranges.</p>
<p id="p-0077" num="0076">Hence, how to obtain the first transfer rate values C<b>1</b>, C<b>2</b>, . . . , will be considered below. To begin with, it is assumed that the first transfer rate is V<b>1</b>, the second transfer rate corresponding to the first transport speed Vc is V<b>2</b>(Vc), the second transfer rate corresponding to the second transport speed Vn is V<b>2</b>(Vn), the capacity of the buffer memory <b>110</b> is Vb, the capacity of each data track <b>315</b> is Vt, and the data volume read out from or written in the buffer memory <b>110</b> during an operation of switching the transport speed of the tape medium <b>300</b> is Va. Note that the first transfer rate V<b>1</b> is assumed to be constant during the data write and read operations.</p>
<p id="p-0078" num="0077">Firstly, the number of back hitches in the constant speed mode is calculated. To take the data read operation as an example, if the buffer memory <b>110</b> becomes full while the transport unit <b>139</b> in the constant speed mode is transporting the tape medium <b>300</b> at the second transport speed Vn, the transport unit <b>139</b> stops the tape medium <b>300</b> and waits for the buffer memory <b>110</b> to empty while stopping the tape medium <b>300</b>. Thus, in the constant speed mode, one back hitch attributable to pause in the transportation of the tape medium <b>300</b> occurs per a cycle time, that is, the total time of: a time Vb/(V<b>2</b>(Vn)&#x2212;V<b>1</b>) taken for the empty buffer memory <b>110</b> to be filled to its capacity; and a time Vb/V<b>1</b> taken for the full buffer memory <b>110</b> to empty. Thus, the number X of back hitches in the constant speed mode occurring per a time Vt/V<b>1</b> required to read out data sets from each data track <b>315</b> is obtained from the following equation:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>X</i>=(<i>Vt/V</i>1)/(<i>Vb</i>/(<i>V</i>2(<i>Vn</i>)&#x2212;<i>V</i>1)+<i>Vb/V</i>1)&#x2003;&#x2003;(1).<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0079" num="0078">Next, the number of back hitches in the speed switch mode is calculated. To take the data read operation as an example similarly to the above, if the buffer memory <b>110</b> becomes full while the transport unit <b>139</b> in the speed switch mode is transporting the tape medium <b>300</b> at the second transport speed Vn, the transport unit <b>139</b> switches the transport speed of the tape medium <b>300</b> to the first transport speed Vc. Then, the transport unit <b>139</b> transporting the tape medium <b>300</b> at the first transport speed Vc switches the transport speed of the tape medium <b>300</b> to the second transport speed Vn immediately before the buffer memory <b>110</b> becomes full, in other words, if an available capacity of the buffer memory <b>110</b> becomes Vb&#x2212;Va. Thus, in the speed switch mode, two back hitches attributable to switch of the transport speed of the tape medium <b>300</b> occur per a cycle time, that is, the total time of: a time Vb/(V<b>2</b>(Vn)&#x2212;V<b>1</b>) taken for the empty buffer memory <b>110</b> to be filled to its capacity; and a time (Vb&#x2212;Va)/(V<b>1</b>&#x2212;V<b>2</b>(Vc)) taken for the full buffer memory <b>110</b> to become almost empty. Thus, the number X of back hitches in the speed switch mode occurring per a time Vt/V<b>1</b> required to read out data sets from each data track <b>315</b> is obtained from the following equation:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>X=</i>2*(<i>Vt/V</i>1)/(<i>Vb</i>/(<i>V</i>2(<i>Vn</i>)&#x2212;<i>V</i>1)+(<i>Vb&#x2212;Va</i>)/(<i>V</i>1<i>&#x2212;V</i>2(<i>Vc</i>)))&#x2003;&#x2003;(2).<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0080" num="0079">Note that the tape drive <b>100</b> according to the present invention switches the transport speed from the first transport speed Vc to the second transport speed Vn at the timing when a data volume stored in the buffer memory <b>110</b> becomes the data volume Va. Here, Va is the data volume to be read out from the buffer memory <b>110</b> during an operation of switching the transport speed, as described above. This allows the tape drive <b>100</b> according to the present invention to prevent decrease in data transfer efficiency between the tape drive <b>100</b> and the host device <b>200</b>. It is quite apparent that the data volume Va is proportional to the first transfer rate. The method for calculating the data volume Va will be described in detail later.</p>
<p id="p-0081" num="0080">The final values to be obtained here, that is, the first transfer rate values C<b>1</b>, C<b>2</b>, . . . , at the exact times when such an adjustment mode more effective in reducing back hitches varies between the two modes, are determined by the equality of the right-hand sides of the respective above equations (1) and (2). Incidentally, if the transport unit <b>139</b> can be caused to operate at such a transport speed that equalizes the first and second transfer rates, no back hitch occurs in the tape drive <b>100</b>. Accordingly, the other first transfer rate values E<b>1</b>, E<b>2</b>, . . . , can be determined as follows. In the speed switch mode, the number of back hitches becomes 0 when the first transfer rate V<b>1</b> becomes equal to either the second transfer rate V<b>2</b>(Vc) corresponding to the first transport speed Vc or the second transfer rate V<b>2</b>(Vn) corresponding to the second transport speed Vn. On the other hand, in the constant speed mode, the number of back hitches gets closer to 0 as the first transfer rate V<b>1</b> gets closer to the second transfer rate V<b>2</b>(Vn) corresponding to the second transport speed Vn.</p>
<p id="p-0082" num="0081">Incidentally, the above equations (1) and (2) for the number X of back hitches hold under the assumption that the first transfer rate V<b>1</b> is constant during the data write and read operations. Hence, how to obtain the number X of back hitches when the first transfer rate V<b>1</b> is not constant during the data write and read operations will be considered below. Firstly, suppose the case where the first transfer rate V<b>1</b> changes at a uniform rate from the first transfer rate V<b>1</b>_<b>1</b> at the beginning of each data track <b>315</b> to the first transfer rate V<b>1</b>_<b>2</b> at the end of the data track <b>315</b>. In this case, a time T required to read out data sets from each data track <b>315</b> is Vt/((V<b>1</b>_<b>1</b>+V<b>1</b>_<b>2</b>)/2). Thus, V<b>1</b> is regarded as a function V<b>1</b>(<i>t</i>) of a time t in the above equations (1) and (2), and then the integrals of the above entire equations (1) and (2) are calculated over the interval of the time t from 0 to T, which is defined as above. As a result, the number X of back hitches in the case where the first transfer rate V<b>1</b> changes at a uniform rate during the data write and read operations is obtained. After that, with similar procedures as used when the first transfer rate V<b>1</b> is assumed to be constant during the data write and read operations, the first transfer rate values at the exact times when such an adjustment mode more effective in reducing back hitches varies between the two modes can be obtained.</p>
<p id="p-0083" num="0082">As long as the first transfer rate V<b>1</b> changes at a uniform rate, it makes no difference whether the first transfer rate V<b>1</b> changes gradually or rapidly. However, if the first and second transport speeds Vc and Vn change with a change in the first transfer rate V<b>1</b>, it is necessary to regard Vc and Vn as functions Vc(t) and Vn(t) of a time t, respectively, and then to calculate the integrals of the above entire equations (1) and (2) over the interval of the time t from 0 to T. For example, assume the case where the first transfer rate V<b>1</b> becomes higher than the second transfer rate V<b>2</b>(Vn) at a time point tx. In this case, the integrals of the above equations (1) and (2) are calculated where Vn(t) returns the second transport speed Vn, which is a value before change, in 0&#x2266;t&#x3c;tx, and where Vn(t) returns a transport speed one-level higher than the second transport speed Vn in tx&#x2266;t&#x3c;T.</p>
<p id="p-0084" num="0083">If the first transfer rate V<b>1</b> increases and reduces in a certain range during the data write and read operations as well, the first transfer rate values at the exact times when such an adjustment mode more effective in reducing back hitches varies between the two modes can be obtained with similar procedures as used when the first transfer rate V<b>1</b> is assumed to be constant. Note, however, that a time T required to read out data sets from each data track <b>315</b> is Vt/V<b>1</b> in this case.</p>
<p id="p-0085" num="0084">As described above, the mode selection table <b>436</b> can be created irrespective of whether or not the first transfer rate V<b>1</b> is constant. In the tape drive <b>100</b> supporting the case where the first transfer rate V<b>1</b> is not constant, the storage <b>435</b> stores therein the mode selection tables <b>436</b> for the respective cases where the first transfer rate V<b>1</b> is constant, where the first transfer rate V<b>1</b> changes at a uniform rate, and where the first transfer rate V<b>1</b> changes in a certain range, during the data write and read operations. Meanwhile, the transfer rate calculation unit <b>400</b> periodically calculates the first transfer rate V<b>1</b>, and estimates, from the history thereof, how the first transfer rate V<b>1</b> will change thereafter. Upon receipt of the estimate result from the transfer rate calculation unit <b>400</b>, the mode selection unit <b>405</b> selects an appropriate mode selection table <b>436</b> on the basis of the estimate result, and thereafter selects an adjustment mode corresponding to the calculated first transfer rate by referring to the selected mode selection table <b>436</b>.</p>
<p id="p-0086" num="0085">The storage <b>435</b> is implemented by the ROM <b>156</b> shown in <figref idref="DRAWINGS">FIG. 1</figref>, and previously stores therein an association table <b>437</b> and a required time table <b>438</b> in addition to at least one mode selection table <b>436</b>. In the association table <b>437</b>, each of the multilevel transport speeds at which the transport unit <b>139</b> can be caused to operate is associated with a second transfer rate to be selected when the transport unit <b>139</b> is caused to operate at the transport speed (see <figref idref="DRAWINGS">FIG. 6B</figref>). In the tape drive <b>100</b>, data is written in or read out from the tape medium <b>300</b> by causing relative movement between the read/write head <b>120</b> and the tape medium <b>300</b>. Accordingly, the second transfer rate is proportional to the transport speed of the tape medium <b>300</b>, and thus can be adjusted through adjustment of the transport speed of the tape medium <b>300</b>.</p>
<p id="p-0087" num="0086">Note that, during the data write operation, the controller <b>150</b> according to this embodiment also functions as a management information adding unit to create a DSIT <b>330</b> for a data set stored in each segment of the buffer memory <b>110</b>, as has been described previously. In addition, the tape drive <b>110</b> according to this embodiment includes the error correction processor <b>145</b> which adds an ECC <b>335</b> to a data set stored in each segment of the buffer memory <b>110</b>, during the data write operation. Here, the ECC <b>335</b> is an error correction information piece, as described above. Similarly, during the data read operation, the error correction processor <b>145</b> performs error correction on a data set stored in each segment of the buffer memory <b>110</b> by using the ECC <b>335</b> added to the data set.</p>
<p id="p-0088" num="0087">Accordingly, as a second transfer rate to be registered in the association table <b>437</b>, V/t may be calculated from a data volume V firstly processed by both the controller <b>150</b> functioning as the management information adding unit and the error correction processor <b>145</b> and then transmitted from the buffer memory <b>110</b> to the tape medium <b>300</b> in a time span t. Similarly, as another second transfer rate to be registered in the association table <b>437</b>, V/t may be calculated from a data volume V firstly read out from the tape medium <b>300</b> into the buffer memory <b>110</b> and then processed by the error correction processor <b>145</b> in a time span t. Employment of these second transfer rates helps the speed adjustment unit <b>430</b> to more accurately adjust the transport speed of the tape medium <b>300</b> as to be described later. Note, however, that there is no problem to ignore a time required for the error correction since the error correction is executed by hardware. By contrast, the management information addition is executed using a microcode and requires a certain time. However, a series of processes during the data write or read operation including the data compression/decompression, the error correction and the management information addition are performed in parallel by pipelining, for each data set. Accordingly, none of these processes will be a bottleneck, and thus there is no problem to ignore a time required for the processes.</p>
<p id="p-0089" num="0088">In the required time table <b>438</b>, a time required to switch from a first transport speed to a second transport speed is associated with the first and second transport speeds (see <figref idref="DRAWINGS">FIG. 6C</figref>). Here, the second transport speed is one-level higher than the first transport speed, as described above. The time required for such a transport speed switch includes: a time required to pause the transportation of the tape medium <b>300</b>; a time required to rewind the tape medium <b>300</b> for the positioning of the read/write head <b>120</b>; and a time required to set the transport direction of the tape medium <b>300</b> back to the normal transport direction and to switch from a first transport speed to a second transport speed.</p>
<p id="p-0090" num="0089">Hereinbelow, specific description will be given of a method for calculating a required time to be stored in the required time table <b>438</b> with reference to <figref idref="DRAWINGS">FIG. 7</figref>. <figref idref="DRAWINGS">FIG. 7</figref> shows a travel path of the read/write head <b>120</b> on the tape medium <b>300</b> obtained while the transport speed of the tape medium <b>300</b> is shifted from the first transport speed Vc to the second transport speed Vn, which is one-level higher than the transport speed Vc. The arrow (<b>1</b>) represents a travel path obtained from when the tape medium <b>300</b> transported at the transport speed Vc starts to decelerate until when it pauses. A time t<b>1</b> required for the travel represented by the arrow (<b>1</b>) is Vc/A, where an acceleration rate is A. The arrow (<b>2</b>) represents a travel path obtained from when the tape medium <b>300</b> gets transported backward (in a direction opposite to the normal transport direction) so as to be rewound after being stopped until when the transport speed of the tape medium <b>300</b> reaches a speed Vb. A time t<b>2</b> required for the travel represented by the arrow (<b>2</b>) is Vb/A, where an acceleration rate is A. The arrow (<b>3</b>) represents a travel path obtained from when the tape medium <b>300</b> gets transported back at the speed Vb until when the read/write head <b>120</b> returns to a deceleration start position P. A time t<b>3</b> required for the travel represented by the arrow (<b>3</b>) is {(Vc/2)*(Vc/A)&#x2212;(Vb/2)*(Vb/A)}/Vb, where an acceleration rate is A.</p>
<p id="p-0091" num="0090">The arrow (<b>4</b>) represents a travel path obtained while the tape medium <b>300</b> is transported back in the speed Vb so as to be rewound by a length required for an adjustment that allows the read/write head <b>120</b> to reach a write or read start position Q after the transportation of the tape medium <b>300</b> gets stabilized at the target transport speed Vn. A time required for the travel represented by the arrow (<b>4</b>) is assumed to be t<b>4</b>. Note that the read start position Q is always located before the deceleration start position P. This is because there is a time lag from when the tape medium <b>300</b> is determined to need to decelerate to when the tape medium <b>300</b> actually starts to decelerate, and because data starts to be read out at either a position where the read/write head <b>120</b> exists when the tape medium <b>300</b> is determined to need to decelerate, or a position slightly before the position. On the other hand, the write start position Q is not always located before the deceleration start position P. This is because, though there is a time lag till when the tape medium <b>300</b> actually starts to decelerate also during the data write operation, data starts to be written in at a position slightly after a position where the read/write head <b>120</b> exists when the tape medium <b>300</b> is determined to need to decelerate. Note that a definite tendency of the position where data starts to be written can be found from observed values.</p>
<p id="p-0092" num="0091">The arrow (<b>5</b>) represents a travel path obtained from when the tape medium <b>300</b> having been transported back at the speed Vb starts to decelerate to be stopped to when the transport speed of the tape medium <b>300</b> becomes the speed Vn in the normal transport direction. A time t<b>5</b> required for the travel represented by the arrow (<b>5</b>) is Vn/A+Vb/A, where an acceleration rate is A. The arrow (<b>6</b>) represents a travel path obtained from when the tape medium <b>300</b> gets transported at the transport speed Vn until when the transportation of the tape medium <b>300</b> gets stabilized at the target transport speed Vn. A time required for the travel represented by the arrow (<b>6</b>) is assumed to be t<b>6</b>.</p>
<p id="p-0093" num="0092">With t<b>1</b> to t<b>6</b> determined above, a required time Tr is finally obtained from the following equation: Tr=Vc/A+Vb/A+{(Vc/2)*(Vc/A)&#x2212;(Vb/2)*(Vb/A)}/Vb+t<b>4</b>+Vn/A+Vb/A+t<b>6</b>. Note that the absolute value of each acceleration rate A at which the tape medium <b>300</b> decelerates or accelerates is constant. In the tape drive <b>100</b> according to this embodiment, the acceleration rate A is defined and used within an available range based on: a torque the motor <b>135</b> included in the hardware can generate; the weight of the tape medium <b>300</b>; and the radius thereof. Meanwhile, the time t<b>6</b> is defined as such a constant value required for stable operation of the tape drive <b>100</b>. Specifically, t<b>6</b> is defined in consideration of a time from when the tape medium <b>300</b> starts to be transported at a constant speed until when the positioning of the read/write head <b>120</b> is completed by using sufficient information obtained from the corresponding servo tracks. In this embodiment, the acceleration rate A and the speed t<b>6</b> is previously stored in the storage <b>435</b>.</p>
<p id="p-0094" num="0093">On the other hand, the time t<b>4</b> can be expressed using Vb by the equality of: the sum of the length of the path represented by the arrow (<b>4</b>) and the length of the distance moved in the backward direction of the path represented by the arrow (<b>5</b>); and the sum of a length s equivalent to the difference between the deceleration start position P and the write or read start position Q, a length of the distance moved in the forward direction of the path represented by the arrow (<b>5</b>) and a length of the path represented by the arrow (<b>6</b>) (where the acceleration rate A and the time t<b>6</b> are assumed to be given values since they are previously determined as described above). Meanwhile, Vb can be determined as such a value that minimizes the right-hand side of the above equation for the required time Tr so as to reduce the time required for each back hitch. Since t<b>4</b> can be expressed using Vb, if Vb is determined, t<b>4</b> is determined, too. As described above, for each pair of first and second transport speeds at which the transport unit <b>139</b> can be caused to operate, a time required to switch from the first transport speed to the second transport speed is previously calculated, and the calculated required times are previously stored in the form of the required time table <b>438</b> in the storage <b>435</b>.</p>
<p id="p-0095" num="0094">If the mode selection unit <b>405</b> selects the speed switch mode, the transport speed setting unit <b>410</b> selects a predetermined transport speed of the tape medium <b>300</b> from multiple transport speeds at which the transport unit <b>139</b> can be caused to operate, and causes the transport unit <b>139</b> to operate at the selected transport speed, at the beginning of each of the data write and read operations. Here, the predetermined transport speed to be employed at the beginning of a data write operation is the first transport speed while the predetermined transport speed to be employed at the beginning of a data read operation is the second transport speed. On the other hand, if the mode selection unit <b>405</b> selects the constant speed mode, the transport speed setting unit <b>410</b> causes the transport unit <b>139</b> to operate at the second transport speed at the beginning of each of the data write and read operations. Upon receiving the adjustment mode selection result and the first transfer rate value from the mode selection unit <b>405</b>, the transport speed setting unit <b>410</b> selects one from the predetermined transport speeds described above by, for example, determining the current first and second transport speeds <b>441</b> corresponding to the received first transfer rate value with reference to the association table <b>437</b>. Note that the transport speed setting unit <b>410</b> stores the current first and second transport speeds <b>441</b> determined as above into the buffer <b>440</b> which is implemented by the RAM <b>154</b> shown in <figref idref="DRAWINGS">FIG. 1</figref>.</p>
<p id="p-0096" num="0095">If the mode selection unit <b>405</b> selects the speed switch mode, the required time obtaining unit <b>415</b> obtains, from the required time table <b>438</b>, a time required to switch the transport speed of the tape medium <b>300</b> from the current first transport speed to the current second transport speed, which is one-level higher than the current first transport speed, in response to this selection. Note that the required time obtaining unit <b>415</b> obtains the current first and second transport speeds <b>441</b> from the buffer <b>440</b>. Together with the first transfer rate value the required time obtaining unit <b>415</b> has received from the mode selection unit <b>405</b>, the required time obtained by the required time obtaining unit <b>415</b> is given to the threshold calculation unit <b>420</b> to be described below.</p>
<p id="p-0097" num="0096">During the data write operation, the threshold calculation unit <b>420</b> calculates, from the first transfer rate and the required time received from the required time obtaining unit <b>415</b>, a data volume expected to be received from the host device <b>200</b> during the switch of the transport speed of the tape medium <b>300</b>, as a first threshold. Specifically, the threshold calculation unit <b>420</b> calculates the product of the first transfer rate and the required time as the first threshold. Similarly, during the data read operation, the threshold calculation unit <b>420</b> calculates, as a second threshold, a data volume expected to be transmitted to the host device <b>200</b> during the switch of the transport speed, from the first transfer rate and the required time received from the required time obtaining unit <b>415</b>. Specifically, the threshold calculation unit <b>420</b> calculates the product of the first transfer rate and the required time as the second threshold. The first and second thresholds calculated by the threshold calculation unit <b>420</b> are given to the monitoring unit <b>425</b> to be described below.</p>
<p id="p-0098" num="0097">The monitoring unit <b>425</b> in the speed switch mode monitors an available data storage capacity of the buffer memory <b>110</b>, and outputs a first switch notice if the available data storage capacity reaches the first threshold received from the threshold calculation unit <b>420</b> while data is written at the first transport speed. In addition, the monitoring unit <b>425</b> in the speed switch mode also outputs a second switch notice if the available data storage capacity of the buffer memory <b>110</b> reaches the initial capacity of the buffer memory <b>110</b> while data is written at the second transport speed.</p>
<p id="p-0099" num="0098">Similarly, the monitoring unit <b>425</b> in the speed switch mode monitors a data volume stored in the buffer memory <b>110</b>, and outputs the first switch notice if the data volume reaches the second threshold received from the threshold calculation unit <b>420</b> while data is read out at the first transport speed. In addition, the monitoring unit <b>425</b> in the speed switch mode also outputs the second switch notice if the data volume stored in the buffer memory <b>110</b> reaches the initial capacity of the buffer memory <b>110</b> while data is read out at the second transport speed.</p>
<p id="p-0100" num="0099">Meanwhile, the monitoring unit <b>425</b> in the constant speed mode outputs a third switch notice if the available data storage capacity of the buffer memory <b>110</b> reaches the initial capacity of the buffer memory <b>110</b> while data is written at the second transport speed. In addition, the monitoring unit <b>425</b> in the constant speed mode also outputs a fourth switch notice if a data volume stored in the buffer memory <b>110</b> reaches the initial capacity of the buffer memory <b>110</b>.</p>
<p id="p-0101" num="0100">Similarly, the monitoring unit <b>425</b> in the constant speed mode outputs the third switch notice if a data volume stored in the buffer memory <b>110</b> reaches the initial capacity of the buffer memory <b>110</b> while data is read out at the second transport speed. In addition, the monitoring unit <b>425</b> in the constant speed mode also outputs the fourth switch notice if an available data storage capacity of the buffer memory <b>110</b> reaches the initial capacity of the buffer memory <b>110</b>.</p>
<p id="p-0102" num="0101">In response to the first switch notice during the data write and read operations, the speed adjustment unit <b>430</b> stops the movement of the read/write head <b>140</b> and causes the transport unit <b>139</b> to operate at the second transport speed. In addition, in response to the second switch notice during the data write and read operations, the speed adjustment unit <b>430</b> stops the movement of the read/write head <b>140</b> and causes the transport unit <b>139</b> to operate at the first transport speed. Moreover, in response to the third switch notice during the data write and read operations, the speed adjustment unit <b>430</b> stops the movement of the read/write head <b>140</b>. In addition, in response to the fourth switch notice during the data write and read operations, the speed adjustment unit <b>430</b> causes the transport unit <b>139</b> to operate at the second transport speed. Note that the speed adjustment unit <b>430</b> obtains the current first and second transport speeds from the buffer <b>440</b>.</p>
<p id="p-0103" num="0102"><figref idref="DRAWINGS">FIGS. 8A and 8B</figref> each show a state of the buffer memory <b>110</b> at a timing when the speed adjustment unit <b>430</b> starts to switch the transport speed of the tape medium <b>300</b> during the data write operation in the speed switch mode. In each of <figref idref="DRAWINGS">FIGS. 8A and 8B</figref>, a rectangle represents the storage capacity of the buffer memory <b>110</b>, and a shaded area represents an available capacity of the buffer memory <b>110</b> and thus includes no data at that time. As described previously, when the tape drive <b>100</b> in the speed switch mode starts to write data into the tape medium <b>300</b>, the tape drive <b>100</b> is caused to operate at the first transport speed that makes the transfer rate to the tape medium <b>300</b> lower than the transfer rate from the host device <b>200</b>. Thus, in an earlier phase of this data write operation, data transmitted from the host device <b>200</b> is accumulated in the buffer memory <b>110</b>. Then, the speed adjustment unit <b>430</b> switches the transport speed to the second transport speed, which is one-level higher than the first transport speed, at a timing when the available capacity of the buffer memory <b>110</b> becomes equivalent to a data volume expected to be received from the host device <b>200</b> during the switch of the transport speed, as shown in <figref idref="DRAWINGS">FIG. 8A</figref>.</p>
<p id="p-0104" num="0103">Here, the one-level higher second transport speed makes the transfer rate to the tape medium <b>300</b> higher than the transfer rate from the host device <b>200</b>, as described previously. Thus, after the transport speed of the tape medium <b>300</b> is switched to the second transport speed, the data accumulated in the buffer memory <b>110</b> is reduced by being written into the tape medium <b>300</b>. Then, the speed adjustment unit <b>430</b> switches the transport speed to the first transport speed, which is one-level lower than the second transport speed, at a timing when the available capacity of the buffer memory <b>110</b> reaches the initial capacity of the buffer memory <b>110</b>, as shown in <figref idref="DRAWINGS">FIG. 8B</figref>. In this way, in the speed switch mode, the tape drive <b>100</b> according to the present invention repeatedly switches the transport speed of the tape medium <b>300</b> between the first and second transport speeds, and thereby prevents decrease in data transfer efficiency between the tape drive <b>100</b> and the host device <b>200</b>.</p>
<p id="p-0105" num="0104"><figref idref="DRAWINGS">FIGS. 9A and 9B</figref> each show a state of the buffer memory <b>110</b> at a timing when the speed adjustment unit <b>430</b> starts to switch the transport speed of the tape medium <b>300</b> during the data read operation in the speed switch mode. In each of <figref idref="DRAWINGS">FIGS. 9A and 9B</figref>, a rectangle represents the storage capacity of the buffer memory <b>110</b>, and a shaded area represents an available capacity of the buffer memory <b>110</b> and thus includes no data at that time. As described previously, when the tape drive <b>100</b> in the speed switch mode starts to read data from the tape medium <b>300</b>, the tape drive <b>100</b> is caused to operate at the second transport speed that makes the transfer rate from the tape medium <b>300</b> higher than the transfer rate to the host device <b>200</b>. Thus, in an earlier phase of this data read operation, data read out from the tape medium <b>300</b> is accumulated in the buffer memory <b>110</b>. Then, the speed adjustment unit <b>430</b> switches the transport speed to the first transport speed, which is one-level lower than the second transport speed, at a timing when the data volume stored in the buffer memory <b>110</b> reaches the initial capacity of the buffer memory <b>110</b>, as shown in <figref idref="DRAWINGS">FIG. 9A</figref>.</p>
<p id="p-0106" num="0105">Here, the one-level lower first transport speed makes the transfer rate from the tape medium <b>300</b> lower than the transfer rate to the host device <b>200</b>, as described previously. Thus, after the transport speed of the tape medium <b>300</b> is switched to the first transport speed, the data accumulated in the buffer memory <b>110</b> is reduced by being transmitted to the host device <b>200</b>. Then, the speed adjustment unit <b>430</b> switches the transport speed to the second transport speed, which is one-level higher than the first transport speed, at a timing when the data volume stored in the buffer memory <b>110</b> becomes equivalent to the data volume expected to be transmitted to the host device <b>200</b> during the switch of the transport speed, as shown in <figref idref="DRAWINGS">FIG. 9B</figref>. In this way, in the speed switch mode, the tape drive <b>100</b> according to the present invention repeatedly switches the transport speed of the tape medium <b>300</b> between the first and second transport speeds, and thereby prevents decrease in data transfer efficiency between the tape drive <b>100</b> and the host device <b>200</b>.</p>
<p id="p-0107" num="0106">Next, description will be given of an operation that the tape drive <b>100</b> according to this embodiment performs to adjust the transport speed of the tape medium <b>300</b> with reference to flowcharts shown in <figref idref="DRAWINGS">FIGS. 10 and 11</figref>. <figref idref="DRAWINGS">FIG. 10</figref> shows an example of a processing flow in which the tape drive <b>100</b> adjusts the transport speed during the data write operation. In <figref idref="DRAWINGS">FIG. 10</figref>, the process starts at a step of starting the data write operation, and the tape drive <b>100</b> then calculates the data transfer rate from the host device <b>200</b>, that is, the first transfer rate (step <b>700</b>). Thereafter, the tape drive <b>100</b> determines which adjustment modes of the transport speed of the tape medium <b>300</b> to employ (step <b>705</b>), and determines whether or not the determined mode in step <b>705</b> is the speed switch mode, in step <b>710</b>.</p>
<p id="p-0108" num="0107">When determining that the determined mode in step <b>705</b> is the constant speed mode (step <b>710</b>: NO), the tape drive <b>100</b> adjusts the transport speed of the tape medium <b>300</b> according to the conventional constant speed mode (step <b>715</b>). Specifically, when transporting the tape medium <b>300</b>, the tape drive <b>100</b> constantly transports it at the second transport speed. Then, if the buffer memory <b>110</b> empties, the tape drive <b>100</b> stops the tape medium <b>300</b> until the buffer memory <b>110</b> becomes filled with data. Here, the second transport speed is the lowest speed of one or more transport speeds at which the tape drive <b>100</b> can be caused to operate under a condition that the second transfer rate is higher than the first transfer rate, as described above. The tape drive <b>100</b> repeats these transport speed adjustment steps until this data write operation is completed. On the other hand, when determining that the determined mode in step <b>705</b> is the speed switch mode (step <b>710</b>: YES), the tape drive <b>100</b> transports the tape medium <b>300</b> at the first transport speed (step <b>720</b>). Here, the first transport speed is the highest speed of one or more transport speeds at which the tape drive <b>100</b> can be caused to operate under a condition that the second transfer rate is lower than the first transfer rate.</p>
<p id="p-0109" num="0108">Then, the tape drive <b>100</b> obtains a time required to switch the transport speed of the tape medium <b>300</b> from the current transport speed, that is, the first transport speed, to the second transport speed, which is one-level higher than the first transport speed (step <b>725</b>). Thereafter, based on the first transfer rate and the obtained required time, the tape drive <b>100</b> calculates, as a threshold, a data volume expected to be received from the host device <b>200</b> while the transport speed is switched from the first transport speed to the second transport speed (step <b>730</b>).</p>
<p id="p-0110" num="0109">While writing data into the tape medium <b>300</b> at the first transport speed, the tape drive <b>100</b> monitors an available data storage capacity of the buffer memory <b>110</b> in parallel (step <b>735</b>). Then, the tape drive <b>100</b> determines whether or not the available capacity reaches the threshold (step <b>740</b>). If the available capacity does not reach the threshold (step <b>740</b>: NO), the process returns to step <b>735</b>, and the tape drive <b>100</b> continues to monitor the buffer memory <b>110</b>.</p>
<p id="p-0111" num="0110">On the other hand, if the available capacity reaches the threshold in step <b>740</b>, the tape drive <b>100</b> switches the transport speed of the tape medium <b>300</b> to the second transport speed which is one-level higher than the current transport speed (step <b>745</b>). After the transport speed is switched, the tape drive <b>100</b> continues to monitor the buffer memory <b>110</b> (step <b>750</b>), and determines whether or not the available capacity reaches the initial capacity of the buffer memory <b>110</b> (step <b>755</b>).</p>
<p id="p-0112" num="0111">If the available capacity does not reach the initial capacity of the buffer memory <b>110</b> (step <b>755</b>: NO), the process returns to step <b>750</b>, and the tape drive <b>100</b> continues to monitor the buffer memory <b>110</b>. On the other hand, if the available capacity reaches the initial capacity of the buffer memory <b>110</b> (step <b>755</b>: YES), the tape drive <b>100</b> switches the transport speed of the tape medium <b>300</b> to the first transport speed, which is one-level lower than the current transport speed (step <b>760</b>). Then, the process returns to step <b>735</b>, and the tape drive <b>100</b> repeats steps <b>735</b> to <b>760</b> until this data write operation is completed.</p>
<p id="p-0113" num="0112"><figref idref="DRAWINGS">FIG. 11</figref> shows an example of a processing flow in which the tape drive <b>100</b> adjusts the transport speed of the tape medium <b>300</b> during the read write operation. In <figref idref="DRAWINGS">FIG. 11</figref>, the process starts at a step of starting the data read operation, and the tape drive <b>100</b> then calculates the data transfer rate to the host device <b>200</b>, that is, the first transfer rate (step <b>800</b>). Thereafter, the tape drive <b>100</b> determines which adjustment modes of the transport speed of the tape medium <b>300</b> to employ (step <b>805</b>), and determines whether or not the determined mode in step <b>805</b> is the speed switch mode, in step <b>810</b>.</p>
<p id="p-0114" num="0113">When determining that the determined mode in step <b>805</b> is the constant speed mode (step <b>810</b>: NO), the tape drive <b>100</b> adjusts the transport speed of the tape medium <b>300</b> according to the conventional constant speed mode (step <b>815</b>). Specifically, when transporting the tape medium <b>300</b>, the tape drive <b>100</b> constantly transports it at the second transport speed. Then, if the buffer memory <b>110</b> becomes filled with data, the tape drive <b>100</b> stops the tape medium <b>300</b> until the buffer memory <b>110</b> empties. Here, the second transport speed is the lowest speed of one or more transport speeds at which the tape drive <b>100</b> can be caused to operate under a condition that the second transfer rate is higher than the first transfer rate, as described above. The tape drive <b>100</b> repeats these transport speed adjustment steps until this data read operation is completed. On the other hand, when determining that the determined mode in step <b>805</b> is the speed switch mode (step <b>810</b>: YES), the tape drive <b>100</b> transports the tape medium <b>300</b> at the second transport speed (step <b>820</b>). Here, the second transport speed is the lowest speed of one or more transport speeds at which the tape drive <b>100</b> can be caused to operate under a condition that the second transfer rate is higher than the first transfer rate.</p>
<p id="p-0115" num="0114">Then, the tape drive <b>100</b> obtains a time required to switch the transport speed of the tape medium <b>300</b> from the current transport speed, that is, the second transport speed, to the first transport speed, which is one-level lower than the second transport speed (step <b>825</b>). Thereafter, based on the first transfer rate and the obtained required time, the tape drive <b>100</b> calculates, as a threshold, a data volume expected to be transmitted to the host device <b>200</b> while the transport speed is switched from the second transport speed to the first transport speed (step <b>830</b>).</p>
<p id="p-0116" num="0115">While reading out data from the tape medium <b>300</b> at the second transport speed, the tape drive <b>100</b> monitors a data volume occupying the buffer memory <b>110</b> in parallel (step <b>835</b>). Then, the tape drive <b>100</b> determines whether or not the occupying data volume reaches the initial capacity of the buffer memory <b>110</b> (step <b>840</b>). If the occupying data volume does not reach the buffer memory <b>110</b> (step <b>840</b>: NO), the process returns to step <b>835</b>, and the tape drive <b>100</b> continues to monitor the buffer memory <b>110</b>.</p>
<p id="p-0117" num="0116">On the other hand, if the occupying data volume reaches the initial capacity of the buffer memory <b>110</b> in step <b>840</b>, the tape drive <b>100</b> switches the transport speed of the tape medium <b>300</b> to the first transport speed which is one-level lower than the current transport speed (step <b>845</b>). After the transport speed is switched, the tape drive <b>100</b> continues to monitor the buffer memory <b>110</b> (step <b>850</b>), and determines whether or not the occupying data volume reaches the threshold (step <b>855</b>).</p>
<p id="p-0118" num="0117">If the occupying data volume does not reach the threshold (step <b>855</b>: NO), the process returns to step <b>850</b>, and the tape drive <b>100</b> continues to monitor the buffer memory <b>110</b>. On the other hand, if the available capacity reaches the threshold (step <b>855</b>: YES), the tape drive <b>100</b> switches the transport speed of the tape medium <b>300</b> to the second transport speed which is one-level higher than the current transport speed (step <b>860</b>). Then, the process returns to step <b>835</b>, and the tape drive <b>100</b> repeats steps <b>835</b> to <b>860</b> until this data read operation is completed.</p>
<p id="p-0119" num="0118">Hereinabove, the present invention has been described by using the embodiment, but the technical scope of the present invention is not limited to what is described in the above embodiment. For example, the tape drive <b>100</b> to which the present invention is applied may be configured: to encrypt data transmitted from the host device <b>200</b> and write the encrypted data into the tape medium <b>300</b>; and to decrypt data read out from the tape medium <b>300</b> and transmit the decrypted data to the host device <b>200</b>. In this case, V/t may be calculated as the first transfer rate during the data write operation from an encrypted data volume V stored in the buffer memory <b>110</b> in a time span t. Similarly, V/t may be calculated as the first transfer rate during the data read operation from a decrypted data volume V read out from the buffer memory <b>110</b> in a time span t. Note that there is no problem to ignore a time required for this data encryption/decryption since the data encryption/decryption is executed by hardware as similar to the data compression/decompression and the error correction. It will be apparent to those skilled in the art that the above embodiment can be modified and improved in various ways as described above. Thus, as a matter of course, such other modified or improved embodiments are also included in the technical scope of the present invention.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A transport speed adjustment device for adjusting a transport speed of a tape medium, comprising:
<claim-text>receiving means for receiving data from a host device through a network;</claim-text>
<claim-text>a buffer memory for temporarily storing the received data therein;</claim-text>
<claim-text>transport means for rotating the tape medium to transport a portion of the tape medium in a longitudinal direction thereof at a transport speed selected from multilevel transport speeds at which transport means can transport the tape medium;</claim-text>
<claim-text>writing means for writing the data in the buffer memory into a track formed to extend in a transport direction of the tape medium;</claim-text>
<claim-text>transfer rate calculation means for calculating a first transfer rate which is a data transfer rate between the host device and the transport speed adjustment device;</claim-text>
<claim-text>mode selection means for selecting, from adjustment modes consisting of a speed switch mode and a constant speed mode, an adjustment mode corresponding to the calculated first transfer rate, by referring to a mode selection table in which such an adjustment mode more effective in reducing back hitches is defined in accordance with a first range of transfer rates associated with the speed switch mode and a second range of transfer rates associated with the constant speed mode, wherein when the first transfer rate falls within the first range of transfer rates and the speed switch mode is selected, the transport speed of the tape medium is switched between a first transport speed and a second transport speed in the speed switch mode by correspondingly increasing or decreasing the rotation of the tape medium, and when the first transfer rate falls within the second range of transfer rates and the mode selection means selects the constant speed mode, the transport speed is fixed at the second transport speed in the constant speed mode, the first transport speed being a highest speed of one or more transport speeds at which the transport means can be caused to operate under a condition that a second transfer rate, which is a data transfer rate between the buffer memory and the tape medium, is lower than the first transfer rate, the second transport speed being one-level higher than the first transport speed;</claim-text>
<claim-text>transport speed setting means for causing the transport means to operate at the first transport speed at a beginning of data writing, in response to selection of the speed switch mode;</claim-text>
<claim-text>required time obtaining means for obtaining a time required to switch the transport speed of the tape medium from the first transport speed to the second transport speed, in response to the selection of the speed switch mode;</claim-text>
<claim-text>threshold calculation means for calculating, from the first transfer rate and a required time, a data volume expected to be received from the host device during switch of the transport speed, as a threshold;</claim-text>
<claim-text>monitoring means for monitoring an available data storage capacity of the buffer memory while data is written at the first transport speed in the speed switch mode, and outputting a first switch notice if the available capacity reaches the threshold; and</claim-text>
<claim-text>speed adjustment means for stopping movement of the writing means and causing the transport means to operate at the second transport speed, in response to the first switch notice.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The transport speed adjustment device according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>compression means for compressing the received data before the data is stored in the buffer memory, wherein</claim-text>
<claim-text>the transfer rate calculation means calculates V/T as the first transfer rate, from a data volume V stored in the buffer memory in a time span T.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The transport speed adjustment device according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein
<claim-text>the monitoring means monitors an available data storage capacity of the buffer memory while data is written at the second transport speed in the speed switch mode, and outputs a second switch notice if the available capacity reaches an initial capacity of the buffer memory, and</claim-text>
<claim-text>the speed adjustment means also stops movement of the writing means and causes the transport means to operate at the first transport speed, in response to the second switch notice.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The transport speed adjustment device according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the required time includes:
<claim-text>a time required to pause transportation of the tape medium;</claim-text>
<claim-text>a time required to rewind the tape medium for positioning of the writing means; and</claim-text>
<claim-text>a time required to set the transport direction of the tape medium back to a normal transport direction and to switch the transport speed from the first transport speed to the second transport speed.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The transport speed adjustment device according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>a storage for storing therein a table in which each of the multilevel transport speeds at which the transport means can be caused to operate is associated with the second transfer rate the second transfer rate being selected when the transport means is caused to operate at the transport speed, wherein</claim-text>
<claim-text>the transport speed setting means determines a transport speed at which the transport means is caused to operate, by referring to the table.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The transport speed adjustment device according to <claim-ref idref="CLM-00005">claim 5</claim-ref>, further comprising:
<claim-text>management information adding means for adding management information to the data stored in the buffer memory, the management information being used for managing the data in the transport speed adjustment device; and</claim-text>
<claim-text>correction information adding means for adding error correction information to the data stored in the buffer memory, the error correction information being used for performing error correction on the data, wherein</claim-text>
<claim-text>as the second transfer rate, V/T is calculated from a data volume V firstly processed by both the management information adding means and the correction information adding means and then transmitted to the tape medium in a time span T.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. A transport speed adjustment device for adjusting a transport speed of a tape medium, comprising:
<claim-text>transport means for rotating the tape medium to transport a portion of the tape medium in a longitudinal direction thereof at a transport speed selected from multilevel transport speeds at which transport means can transport the tape medium;</claim-text>
<claim-text>reading means for reading out data recorded in a track formed to extend in a transport direction of the tape medium;</claim-text>
<claim-text>a buffer memory for temporarily storing the read out data therein;</claim-text>
<claim-text>transmitting means for transmitting the data in the buffer memory to a host device through a network;</claim-text>
<claim-text>transfer rate calculation means for calculating a first transfer rate which is a data transfer rate between the host device and the transport speed adjustment device;</claim-text>
<claim-text>mode selection means for selecting, from adjustment modes consisting of a speed switch mode and a constant speed mode, an adjustment mode corresponding to the calculated first transfer rate, by referring to a mode selection table in which such an adjustment mode more effective in reducing back hitches is defined in accordance with a first range of transfer rates associated with the speed switch mode and a second range of transfer rates associated with the constant speed mode, wherein when the first transfer rate falls within the first range of transfer rates and the mode selection means selects the speed switch mode, the transport speed is switched between a first transport speed and a second transport speed in the speed switch mode by correspondingly increasing or decreasing the rotation of the tape medium, and wherein the first transfer rate falls within the second range of transfer rates and the mode selection means selects the constant speed mode, the transport speed is fixed at the second transport speed in the constant speed mode, the first transport speed being a highest speed of one or more transport speeds at which the transport means can be caused to operate under a condition that a second transfer rate, which is a data transfer rate between the buffer memory and the tape medium, is lower than the first transfer rate, the second transport speed being one-level higher than the first transport speed;</claim-text>
<claim-text>required time obtaining means for obtaining a time required to switch the transport speed of the tape medium from the first transport speed to the second transport speed, in response to the selection of the speed switch mode;</claim-text>
<claim-text>threshold calculation means for calculating, from the first transfer rate and the required time, a data volume expected to be transmitted to the host device during switch of the transport speed, as a threshold;</claim-text>
<claim-text>monitoring means for monitoring a data volume stored in the buffer memory while data is read out at the first transport speed in the speed switch mode, and outputting a first switch notice if the data volume reaches the threshold; and</claim-text>
<claim-text>speed adjustment means for stopping movement of the reading means and causing the transport means to operate at the second transport speed, in response to the first switch notice.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The transport speed adjustment device according to <claim-ref idref="CLM-00007">claim 7</claim-ref>, further comprising:
<claim-text>decompression means for decompressing the data read out from the buffer memory before the data is transmitted to the host device, wherein</claim-text>
<claim-text>compressed data is recorded in the tape medium, and</claim-text>
<claim-text>the transfer rate calculation means calculates V/T as the first transfer rate, from a data volume V forwarded from the buffer memory to the decompression means in a time span T.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The transport speed adjustment device according to <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the required time includes:
<claim-text>a time required to pause transportation of the tape medium;</claim-text>
<claim-text>a time required to rewind the tape medium for positioning of the reading means; and</claim-text>
<claim-text>a time required to set the transport direction of the tape medium back to a normal transport direction and to switch the transport speed from the first transport speed to the second transport speed.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The transport speed adjustment device according to <claim-ref idref="CLM-00007">claim 7</claim-ref>, further comprising:
<claim-text>transport speed setting means for causing the transport means to operate at the second transport speed at the beginning of data reading, wherein</claim-text>
<claim-text>the monitoring means also monitors a data volume stored in the buffer memory while data is read out at the second transport speed in the speed switch mode, and also outputs a second switch notice if the data volume reaches an initial capacity of the buffer memory, and</claim-text>
<claim-text>the speed adjustment means also stops movement of the reading means and causes the transport means to operate at the first transport speed, in response to the second switch notice.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The transport speed adjustment device according to <claim-ref idref="CLM-00010">claim 10</claim-ref>, further comprising:
<claim-text>a storage for storing therein a table in which each of the multilevel transport speeds at which the transport means can be caused to operate is associated with the second transfer rate, the second transfer rate being selected when the transport means is caused to operate at the transport speed, wherein</claim-text>
<claim-text>the transport speed setting means determines a transport speed at which the transport means is caused to operate, by referring to the table.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The transport speed adjustment device according to <claim-ref idref="CLM-00011">claim 11</claim-ref>, further comprising:
<claim-text>error correction means for performing error correction on the data stored in the buffer memory, wherein</claim-text>
<claim-text>as the second transfer rate stored in the table, V/T is calculated from a data volume V firstly read out from the tape medium to the buffer memory and then processed by the error correction means in a time span T.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. A transport speed adjustment computer program product to be executed on a tape drive capable of switching a transport speed of a tape medium among multilevel speeds, the transport speed adjustment computer program product comprising a non-transitory computer-readable storage medium having computer-readable program code portions stored therein, the computer-readable code portions comprising:
<claim-text>computer-readable code for receiving data from a host device through a network;</claim-text>
<claim-text>computer-readable code for temporarily storing the received data in a buffer memory;</claim-text>
<claim-text>computer-readable code for rotating the tape medium to thereby transport the tape medium in a longitudinal direction thereof at a transport speed;</claim-text>
<claim-text>computer-readable code for writing the data in the buffer memory into a track formed to extend in a transport direction of the tape medium;</claim-text>
<claim-text>computer-readable code for calculating a first transfer rate, which is a data transfer rate between the host device and the tape drive;</claim-text>
<claim-text>computer-readable code for selecting, from adjustment modes consisting of a speed switch mode and a constant speed mode, an adjustment mode corresponding to the calculated first transfer rate, by referring to a mode selection table in which such an adjustment mode more effective in reducing back hitches is defined in accordance with a first range of transfer rates associated with the speed switch mode and a second range of transfer rates associated with the constant speed mode, wherein when the first transfer rate falls within the first range of transfer rates and the speed switch mode is selected, the transport speed is switched between a first transport speed and a second transport speed in the speed switch mode by correspondingly increasing or decreasing the rotation of the tape medium, wherein when the first transfer rate falls within the second range of transfer rates and the constant speed mode is selected, the transport speed is fixed at the second transport speed in the constant speed mode, the first transport speed being a highest speed of one or more transport speeds at which the tape drive can be caused to operate under a condition that a second transfer rate, which is a data transfer rate between the buffer memory and the tape medium, is lower than the first transfer rate, the second transport speed being one-level higher than the first transport speed;</claim-text>
<claim-text>computer-readable code for causing the tape drive to operate at the first transport speed at a beginning of data writing, in response to selection of the speed switch mode;</claim-text>
<claim-text>computer-readable code for obtaining a time required to switch the transport speed of the tape medium from the first transport speed to the second transport speed, in response to the selection of the speed switch mode;</claim-text>
<claim-text>computer-readable code for calculating, from the first transfer rate and the required time, a data volume expected to be received from the host device during switch of the transport speed, as a threshold;</claim-text>
<claim-text>computer-readable code for monitoring whether or not an available data storage capacity of the buffer memory reaches the threshold while data is written at the first transport speed in the speed switch mode; and</claim-text>
<claim-text>computer-readable code for stopping writing the data and switching the transport speed of the tape medium to the second transport speed, in response to a monitoring result that the available capacity reaches the threshold.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. A transport speed adjustment computer program product to be executed on a tape drive capable of switching a transport speed of a tape medium among multilevel speeds, the transport speed adjustment computer program product comprising a computer-readable storage medium having computer-readable program code portions stored therein the computer-readable code portions comprising:
<claim-text>computer-readable code for rotating the tape medium to transport a portion of the tape medium in a longitudinal direction thereof at the transport speed;</claim-text>
<claim-text>computer-readable code for reading out data recorded in a track formed to extend in a transport direction of the tape medium;</claim-text>
<claim-text>computer-readable code for temporarily storing the read out data in a buffer memory;</claim-text>
<claim-text>computer-readable code for transmitting the data in the buffer memory to a host device through a network;</claim-text>
<claim-text>computer-readable code for calculating a first transfer rate which is a data transfer rate between the host device and the tape drive;</claim-text>
<claim-text>computer-readable code for selecting, from adjustment modes consisting of a speed switch mode and a constant speed mode, an adjustment mode corresponding to the calculated first transfer rate, by referring to a mode selection table in which such an adjustment mode more effective in reducing back hitches is defined in accordance with a first range of transfer rates associated with the speed switch mode and a second range of transfer rates associated with the constant speed mode, wherein when the first transfer rate falls within the first range of transfer rates and the speed switch mode is selected, the transport speed of the tape medium is switched between a first transport speed and a second transport speed in the speed switch mode by correspondingly increasing or decreasing the rotation of the tape medium, wherein when the first transfer rate falls within the second range of transfer rates and the constant switch mode is selected, the transport speed is fixed at the second transport speed in the constant speed mode, the first transport speed being a highest speed of one or more transport speeds at which the tape drive can be caused to operate under a condition that a second transfer rate, which is a data transfer rate between the buffer memory and the tape medium, is lower than the first transfer rate, the second transport speed being one-level higher than the first transport speed;</claim-text>
<claim-text>computer-readable code for obtaining a time required to switch the transport speed of the tape medium from the first transport speed to the second transport speed, in response to the selection of the speed switch mode;</claim-text>
<claim-text>computer-readable code for calculating, from the first transfer rate and the required time, a data volume expected to be transmitted to the host device during switch of the transport speed, as a threshold;</claim-text>
<claim-text>computer-readable code for monitoring whether or not a data volume stored in the buffer memory reaches the threshold while data is read out at the first transport speed in the speed switch mode; and</claim-text>
<claim-text>computer-readable code for stopping reading out the data and switching the transport speed of the tape medium to the second transport speed, in response to monitoring result that the data volume reaches the threshold. </claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
