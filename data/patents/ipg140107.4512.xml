<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625595-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625595</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12954998</doc-number>
<date>20101129</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<us-term-of-grant>
<us-term-extension>335</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>12</main-group>
<subgroup>28</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>370392</main-classification>
<further-classification>370389</further-classification>
<further-classification>370396</further-classification>
<further-classification>370351</further-classification>
</classification-national>
<invention-title id="d2e53">Fiber channel identifier mobility for fiber channel and fiber channel over ethernet networks</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5892912</doc-number>
<kind>A</kind>
<name>Suzuki et al.</name>
<date>19990400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6876656</doc-number>
<kind>B2</kind>
<name>Brewer et al.</name>
<date>20050400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>6985490</doc-number>
<kind>B2</kind>
<name>Czeiger et al.</name>
<date>20060100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370401</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>7283746</doc-number>
<kind>B2</kind>
<name>Ikeda</name>
<date>20071000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>7484021</doc-number>
<kind>B2</kind>
<name>Rastogi et al.</name>
<date>20090100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>710 74</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>7644179</doc-number>
<kind>B1</kind>
<name>Jain et al.</name>
<date>20100100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709238</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>7656812</doc-number>
<kind>B2</kind>
<name>Tadimeti et al.</name>
<date>20100200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370248</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>7664823</doc-number>
<kind>B1</kind>
<name>Wakerly</name>
<date>20100200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709211</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>7890654</doc-number>
<kind>B1</kind>
<name>Tadimeti et al.</name>
<date>20110200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709238</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>8166176</doc-number>
<kind>B2</kind>
<name>Kumar et al.</name>
<date>20120400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709227</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>2004/0151188</doc-number>
<kind>A1</kind>
<name>Maveli</name>
<date>20040800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>2005/0036499</doc-number>
<kind>A1</kind>
<name>Dutt et al.</name>
<date>20050200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>2005/0053073</doc-number>
<kind>A1</kind>
<name>Kloth et al.</name>
<date>20050300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>2006/0092932</doc-number>
<kind>A1</kind>
<name>Ghosh et al.</name>
<date>20060500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>2006/0159081</doc-number>
<kind>A1</kind>
<name>Dropps</name>
<date>20060700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>2007/0011276</doc-number>
<kind>A1</kind>
<name>Sharma et al.</name>
<date>20070100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709218</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>2007/0058619</doc-number>
<kind>A1</kind>
<name>Gopal Gowda et al.</name>
<date>20070300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00018">
<document-id>
<country>US</country>
<doc-number>2007/0130295</doc-number>
<kind>A1</kind>
<name>Rastogi et al.</name>
<date>20070600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709220</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00019">
<document-id>
<country>US</country>
<doc-number>2008/0313724</doc-number>
<kind>A1</kind>
<name>Doddapaneni et al.</name>
<date>20081200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>726  9</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00020">
<document-id>
<country>US</country>
<doc-number>2009/0092141</doc-number>
<kind>A1</kind>
<name>Banerjee</name>
<date>20090400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00021">
<document-id>
<country>US</country>
<doc-number>2009/0094354</doc-number>
<kind>A1</kind>
<name>Rastogi et al.</name>
<date>20090400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709221</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00022">
<document-id>
<country>US</country>
<doc-number>2009/0141657</doc-number>
<kind>A1</kind>
<name>Dutt et al.</name>
<date>20090600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00023">
<document-id>
<country>US</country>
<doc-number>2011/0176412</doc-number>
<kind>A1</kind>
<name>Stine et al.</name>
<date>20110700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370221</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00024">
<document-id>
<country>US</country>
<doc-number>2011/0228670</doc-number>
<kind>A1</kind>
<name>Sasso et al.</name>
<date>20110900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370221</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00025">
<document-id>
<country>US</country>
<doc-number>2011/0299539</doc-number>
<kind>A1</kind>
<name>Rajagopal et al.</name>
<date>20111200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>37039553</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00026">
<document-id>
<country>US</country>
<doc-number>2012/0054850</doc-number>
<kind>A1</kind>
<name>Bhardwaj et al.</name>
<date>20120300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>726 12</main-classification></classification-national>
</us-citation>
</us-references-cited>
<number-of-claims>24</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>370351</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370254</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370401</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370248</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370409</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>37039553</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370428</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370466</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370474</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370221</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709249</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709237</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709238</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709223</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709245</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709220</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709221</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>710 14</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>726 12</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>8</number-of-drawing-sheets>
<number-of-figures>8</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20120134672</doc-number>
<kind>A1</kind>
<date>20120531</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Banerjee</last-name>
<first-name>Subrata</first-name>
<address>
<city>Los Altos</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Banerjee</last-name>
<first-name>Subrata</first-name>
<address>
<city>Los Altos</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Edell, Shapiro &#x26; Finnan, LLC</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Cisco Technology, Inc.</orgname>
<role>02</role>
<address>
<city>San Jose</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Ly</last-name>
<first-name>Anh-Vu</first-name>
<department>2472</department>
</primary-examiner>
<assistant-examiner>
<last-name>Lopez-Vargas</last-name>
<first-name>Gustavo</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">Techniques are provided for a switch to assign proxy FCIDs to endpoint device so that the endpoint devices may achieve FCID mobility by retaining their originally assigned FCIDs. At a switch in a network, e.g., a Virtual Storage Area Network (VSAN), a fabric login request is received from a first endpoint device that is associated with a first FC identifier (FCID) that was previously assigned to the first endpoint device by another switch in the VSAN. The fabric login request is responded to with the first FCID. The first endpoint device is assigned a second FCID associated with a domain of the switch where the endpoint device is directly attached to, and the second FCID is used as a proxy FCID within the VSAN for the first endpoint device. A frame is received from the first endpoint device with a source FCID comprising the first FCID and a destination FCID comprising an FCID for a second endpoint device. The source FCID in the frame is overwritten with the second FCID. The frame is forwarded to the second endpoint device.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="182.63mm" wi="223.60mm" file="US08625595-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="228.35mm" wi="187.45mm" orientation="landscape" file="US08625595-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="236.22mm" wi="186.52mm" orientation="landscape" file="US08625595-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="230.97mm" wi="199.31mm" orientation="landscape" file="US08625595-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="209.21mm" wi="143.00mm" file="US08625595-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="204.98mm" wi="195.75mm" file="US08625595-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="186.77mm" wi="190.75mm" file="US08625595-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="209.89mm" wi="192.11mm" file="US08625595-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="196.34mm" wi="193.38mm" file="US08625595-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">TECHNICAL FIELD</heading>
<p id="p-0002" num="0001">The present disclosure generally relates to Storage Area Networks (SANs) and more particularly to providing Fiber Channel identifier (FCID) mobility for Fiber Channel and FC over Ethernet (FCoE) networks.</p>
<heading id="h-0002" level="1">BACKGROUND</heading>
<p id="p-0003" num="0002">Storage Area Networks (SANs) reliably store large amounts of data for an organization. Clusters of storage devices, e.g., FC storage arrays, in one location are called SAN islands and communicate using the FC Protocol. Users accessing a SAN may reside on an Ethernet based Local Area Network (LAN) at another location that may be coupled to an FC server cluster for communication with the FC storage array. To mediate communication between the FC server cluster and the FC storage array, an FC switch network (also called &#x201c;switched fabric&#x201d;) is employed.</p>
<p id="p-0004" num="0003">Recent advances have led to virtualization in SANs resulting in the creation of Virtual SANs (VSANs). VSANs and VLANs remove the physical boundaries of networks and allow a more functional approach. For example, an engineering department VLAN can be associated with an engineering department VSAN, or an accounting department VLAN can be associated with an accounting department VSAN, regardless of the location of network devices in the VLAN or storage devices in the VSAN. In a virtualized environment, virtual devices can move from one place to another without requiring any physical connectivity changes.</p>
<p id="p-0005" num="0004">Each FC switch or FCoE FC Forwarder (FCF) has a numbered domain that forms the first part of an FCID. The FCID comprises three bytes (Domain.Area.Port) in a frame header to identify source ports of a source device and destination ports of a destination device. When a virtual SAN device logs into the switch fabric it is assigned an FCID with a domain associated with the respective switch. When a virtual SAN device migrates from a first switch to a second switch, the virtual SAN device must log out of the SAN and log back in via the second switch, thereby acquiring a new FCID associated with the domain of the second switch.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0006" num="0005"><figref idref="DRAWINGS">FIG. 1</figref> is an example of a block diagram of a network with switches that are configured to provide FCID mobility for network endpoints that can virtually or physically migrate from one switch to another.</p>
<p id="p-0007" num="0006"><figref idref="DRAWINGS">FIG. 2</figref> is an example block diagram similar to <figref idref="DRAWINGS">FIG. 1</figref> in which a first endpoint has migrated from one switch to another switch.</p>
<p id="p-0008" num="0007"><figref idref="DRAWINGS">FIG. 3</figref> is an example block diagram similar to <figref idref="DRAWINGS">FIG. 2</figref> in which a second endpoint has migrated from one switch to another switch.</p>
<p id="p-0009" num="0008"><figref idref="DRAWINGS">FIG. 4</figref> is an example block diagram of a switch configured to provide FCID mobility for endpoint devices.</p>
<p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. 5</figref> is an example flowchart depicting a process for providing FCID mobility for network endpoints according to a first embodiment.</p>
<p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. 6</figref> is an example of a flowchart depicting a continuation of the process from <figref idref="DRAWINGS">FIG. 5</figref> for a switch to provide FCID mobility in the reverse direction from the second endpoint to the first endpoint.</p>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 7</figref> is an example flowchart depicting a process for providing FCID mobility for network endpoints according to a second embodiment.</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 8</figref> is an example of a flowchart depicting a continuation of the process from <figref idref="DRAWINGS">FIG. 7</figref> for a switch to provide FCID mobility in the reverse direction from the second endpoint to the first endpoint.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">DESCRIPTION OF EXAMPLE EMBODIMENTS</heading>
<p id="p-0014" num="0013">Overview</p>
<p id="p-0015" num="0014">Techniques are provided herein to assign proxy FCIDs to endpoint device so that the endpoint devices may achieve FCID mobility by retaining their originally assigned FCIDs. At a switch in a network, e.g., a Virtual Storage Area Network (VSAN), a login request, e.g., fabric login (FLOGI), is received from a first endpoint device that is associated with a first FC identifier (FCID) that was previously assigned to the first endpoint device by another switch in the network. The login request is responded to with the first FCID. The first endpoint device is assigned a second FCID associated with a domain of the switch and the second FCID is used as a proxy FCID within the network for the first endpoint device. A first frame is received from the first endpoint device with a source FCID comprising the first FCID and a destination FCID comprising an FCID for a second endpoint device. The source FCID in the first frame is overwritten with the second (proxy) FCID. The first frame is forwarded to the second endpoint device.</p>
<p id="p-0016" num="0015">Techniques are provided herein for receiving a second frame from another switch in the network with a destination FCID comprising the second (proxy) FCID. The destination proxy FCID in the second frame is overwritten with the first FCID and the second frame is forwarded to the first endpoint device.</p>
<p id="p-0017" num="0016">Example Embodiments</p>
<p id="p-0018" num="0017">Referring first to <figref idref="DRAWINGS">FIG. 1</figref>, an example system <b>100</b> is shown for a virtualized environment. System <b>100</b> comprises a first endpoint device <b>110</b>, an FC network (also referred to herein as a &#x201c;switched fabric&#x201d;) <b>120</b> comprising a plurality of FC and/or Fiber Channel over Ethernet (FCoE) switches <b>130</b>(<b>1</b>)-<b>130</b>(<b>4</b>), a second endpoint device <b>140</b>, and an FC name server database <b>150</b>. The FC network <b>120</b> supports SAN traffic for one or more VSANs, e.g., VSAN-<b>1</b> as shown. Each of the switches <b>130</b>(<b>1</b>)-<b>130</b>(<b>4</b>) has a corresponding administrator assigned or network assigned domain. In this example, switches <b>130</b>(<b>1</b>)-<b>130</b>(<b>4</b>) have domains of 10, 20, 30, and 40, respectively. Each of the endpoints <b>110</b> and <b>140</b> has an address that is assigned by the respective connecting switch that contains the 24-bit FC identifier (FCID). Thus, the VSAN may comprise FC network devices, FCoE network devices or both types of network devices.</p>
<p id="p-0019" num="0018">The FCID may be separated into three bytes comprising values for a Domain, Area and Port (in a Domain.Area.Port notation) that is included, e.g., in a FC frame header to identify source ports of a source device and destination ports of a destination device. The domain is always associated with the respective switch. In this example, communications between endpoint <b>110</b> and switch <b>130</b>(<b>1</b>) uses FCID 10.1.1 that was assigned by switch <b>130</b>(<b>1</b>) to endpoint <b>110</b> at the time endpoint <b>110</b> logged into the network <b>120</b>. Since &#x201c;10&#x201d; is the domain for switch <b>130</b>(<b>1</b>), all endpoint traffic to switch <b>130</b>(<b>1</b>) will normally use a 10.x.y FCID, where &#x201c;x&#x201d; and &#x201c;y&#x201d; are Area and Port values, respectively. Similarly, endpoint <b>140</b> is assigned an FCID of 30.1.1 for communication via switch <b>130</b>(<b>3</b>). The FCIDs used throughout system <b>100</b> may be stored and retrieved by any of the FC switches via the FC name server database <b>150</b>.</p>
<p id="p-0020" num="0019">Endpoints <b>110</b> and <b>140</b> may be servers that are part of a server cluster or storage devices that are part of a storage array. Each endpoint has a Port World Wide Name (PWWN) that is used for link layer connectivity, e.g., similar to a Media Access Control (MAC) address used for Ethernet communications. PWWNs may be used to set up zones within the network. Zoning rules define how storage is accessed within the SAN or VSAN. As endpoints <b>110</b> and <b>140</b> migrate from one switch to another they may remain part of the same zone. In this example, endpoint <b>110</b> has a PWWN address of PWWN<b>1</b>, endpoint <b>140</b> has a PWWN address of PWWN<b>2</b>, and both are assigned to the same zone, Z<b>1</b> as shown in <figref idref="DRAWINGS">FIG. 1</figref>.</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 1</figref> shows a bidirectional communications pathway between endpoint <b>110</b> and endpoint <b>140</b>. Switch <b>130</b>(<b>1</b>) communicates along the pathway using ports P<b>1</b> and P<b>2</b>, while switch <b>130</b>(<b>3</b>) communicates along the pathway using ports P<b>3</b> and P<b>4</b>. The port assignments, zones, domains, and FCIDs are arbitrary and were selected for ease of illustration. In order to illustrate how FCIDs are used according to the techniques described herein, it is useful to set up a communications convention for packets as they traverse the various pathways shown in <figref idref="DRAWINGS">FIGS. 1-3</figref>.</p>
<p id="p-0022" num="0021">Table 1 below illustrates the source and destination FCIDs for packets going from endpoint <b>110</b> to endpoint <b>140</b>. Each port P<b>1</b>-P<b>4</b> is bidirectional, so ingress or egress is specified in the second row of Table <b>1</b> for each port. In the third row of Table 1, the notation V<b>1</b>: 10.1.1&#x2192;30.1.1 indicates that the VSAN is VSAN-<b>1</b> (V<b>1</b>), the packet has a source FCID of 10.1.1 for endpoint <b>110</b>, and the packet has a destination FCID of 30.1.1 for endpoint <b>140</b>. Table 1 shows that the source and destination FCIDs remain the same as packets travel from endpoint <b>110</b> to endpoint <b>140</b>.</p>
<p id="p-0023" num="0022">
<tables id="TABLE-US-00001" num="00001">
<table frame="none" colsep="0" rowsep="0" pgwide="1">
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="273pt" align="center"/>
<thead>
<row>
<entry namest="1" nameend="1" rowsep="1">TABLE 1</entry>
</row>
<row>
<entry namest="1" nameend="1" align="center" rowsep="1"/>
</row>
<row>
<entry>FCIDs in the endpoint 110 &#x2192; endpoint 140 flow direction</entry>
</row>
<row>
<entry namest="1" nameend="1" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry/>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="4">
<colspec colname="1" colwidth="70pt" align="left"/>
<colspec colname="2" colwidth="63pt" align="left"/>
<colspec colname="3" colwidth="77pt" align="left"/>
<colspec colname="4" colwidth="63pt" align="left"/>
<tbody valign="top">
<row>
<entry>P1 (ingress from 110)</entry>
<entry>P2 (egress to 130(2))</entry>
<entry>P3 (ingress from 130(1))</entry>
<entry>P4 (egress to 140)</entry>
</row>
<row>
<entry>V1: 10.1.1&#x2192;30.1.1</entry>
<entry>V1: 10.1.1&#x2192;30.1.1</entry>
<entry>V1: 10.1.1&#x2192;30.1.1</entry>
<entry>V1: 10.1.1&#x2192;30.1.1</entry>
</row>
<row>
<entry namest="1" nameend="4" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0024" num="0023">Table 2 below illustrates the source and destination FCIDs for packets going from endpoint <b>140</b> to endpoint <b>110</b>. Each port P<b>1</b>-P<b>4</b> is bidirectional, so ingress or egress is specified in the second row of Table 2 for each port. In the third row of Table 2, the notation V<b>1</b>: 30.1.1&#x2192;10.1.1 indicates that the VSAN is VSAN-<b>1</b> (V<b>1</b>), the packet has a source FCID of 30.1.1 for endpoint <b>140</b>, and the packet has a destination FCID of 10.1.1 for endpoint <b>110</b>. Table 2 shows that the source and destination FCIDs remain the same as packets travel from endpoint <b>140</b> to endpoint <b>110</b>.</p>
<p id="p-0025" num="0024">
<tables id="TABLE-US-00002" num="00002">
<table frame="none" colsep="0" rowsep="0" pgwide="1">
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="273pt" align="center"/>
<thead>
<row>
<entry namest="1" nameend="1" rowsep="1">TABLE 2</entry>
</row>
<row>
<entry namest="1" nameend="1" align="center" rowsep="1"/>
</row>
<row>
<entry>FCIDs in the endpoint 140 &#x2192; endpoint 110 flow direction</entry>
</row>
<row>
<entry namest="1" nameend="1" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry/>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="4">
<colspec colname="1" colwidth="70pt" align="left"/>
<colspec colname="2" colwidth="63pt" align="left"/>
<colspec colname="3" colwidth="77pt" align="left"/>
<colspec colname="4" colwidth="63pt" align="left"/>
<tbody valign="top">
<row>
<entry>P4 (ingress from 140)</entry>
<entry>P3 (egress to 130(1))</entry>
<entry>P2 (ingress from 130(2))</entry>
<entry>P1 (egress to 110)</entry>
</row>
<row>
<entry>V1: 30.1.1&#x2192;10.1.1</entry>
<entry>V1: 30.1.1&#x2192;10.1.1</entry>
<entry>V1: 30.1.1&#x2192;10.1.1</entry>
<entry>V1: 30.1.1&#x2192;10.1.1</entry>
</row>
<row>
<entry namest="1" nameend="4" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0026" num="0025">Each of the switches <b>130</b>(<b>1</b>)-<b>130</b>(<b>4</b>) may be configured to execute an FCID mobility process to facilitate the mobility of FCIDs according to the techniques described herein. As endpoints migrate from one switch to another they will usually logout of the network on one switch and log back into another switch, thereby receiving a new FCID associated with the switch domain as described above. In addition, a number of secondary events may occur when device migration takes place, e.g., the storage arrays need to update access information and other data with the new FCID. The FCID mobility process techniques described herein allow endpoint devices or other devices to migrate from one physical switch to another while still retaining their originally assigned FCIDs. The FCID mobility process operations are generally described in connection with <figref idref="DRAWINGS">FIGS. 2-4</figref>, and a specific example is described hereinafter in connection with <figref idref="DRAWINGS">FIG. 5</figref>.</p>
<p id="p-0027" num="0026">Turning now to <figref idref="DRAWINGS">FIG. 2</figref>, system <b>100</b> is shown in which one endpoint has migrated from one switch to another. In this example, at <b>200</b>, endpoint <b>110</b> is shown migrating from switch <b>130</b>(<b>1</b>) to switch <b>130</b>(<b>2</b>). The connection of endpoint <b>110</b> to switch <b>130</b>(<b>1</b>) is taken down as shown by the dashed line between endpoint <b>110</b> and its original switch <b>130</b>(<b>1</b>) as shown in <figref idref="DRAWINGS">FIG. 1</figref>. After the migration, endpoint <b>110</b> is now connected to switch <b>130</b>(<b>2</b>) via port P<b>6</b> and a connection from switch <b>130</b>(<b>2</b>) to switch <b>130</b>(<b>3</b>) is made via port P<b>5</b> of switch <b>130</b>(<b>2</b>) and port P<b>9</b> of switch <b>130</b>(<b>3</b>). It should be understood that the movement of endpoint <b>110</b> from the left side of the figure to the right side of the figure is for illustrative effect and that no physical movement by endpoint <b>110</b> may be necessary, for example, endpoint <b>110</b> can be a virtual machine running within a physical server. The migration of endpoint <b>110</b> from one switch to another may be made for performance optimization, resource optimization, failure handling, or any number of other reasons.</p>
<p id="p-0028" num="0027">Before endpoint <b>110</b> moved to switch <b>130</b>(<b>2</b>) from switch <b>130</b>(<b>1</b>), switch <b>130</b>(<b>2</b>) was aware that endpoint <b>110</b> was online and that its current FCID before the move is 10.1.1. Switch <b>130</b>(<b>2</b>) can obtain this information either from an FC name server database <b>150</b> or some move related protocol could have informed switch <b>130</b>(<b>2</b>) about the move by sending a message that includes the current FCID of 10.1.1 for endpoint <b>110</b>. When endpoint <b>110</b> connects to switch <b>130</b>(<b>2</b>) (virtually or physically), switch <b>130</b>(<b>2</b>) allocates an FCID for endpoint <b>110</b> from its own domain, e.g., an FCID of <b>20</b>.<b>1</b>.<b>1</b> is assigned to endpoint <b>110</b>. However, when endpoint <b>110</b> logs in at switch <b>130</b>(<b>2</b>), switch <b>130</b>(<b>2</b>) responds to the fabric login (FLOGI) request with an FCID of 10.1.1, i.e., the original FCID assigned to endpoint <b>110</b> by switch <b>130</b>(<b>1</b>).</p>
<p id="p-0029" num="0028">Switch <b>130</b>(<b>2</b>) also distributes in the SAN information indicating that the allocated FCID for endpoint <b>110</b> is 10.1.1 (unchanged) and that its proxy FCID is 20.1.1. This information is sent to all the switches in VSAN <b>1</b> including switch <b>130</b>(<b>3</b>) or specifically to switch <b>130</b>(<b>3</b>) by a message. The message may be sent using a move related protocol, a proprietary protocol, or using an existing protocol, e.g., the proxy FCID information can be sent in a port login (PLOGI) frame as part of a vendor specific information field. Switches can intercept the PLOGI (at switch <b>130</b>(<b>2</b>) and switch <b>130</b>(<b>3</b>) in this example), learn the proxy FCID information, and then remove the vendor specific information from the PLOGI frames before sending the frame to the destination endpoint device. In this way, the proxy information is only learned by the intermediate switches in the communications pathway. Another way to distribute the proxy FCID to original FCID mapping for a device, is to send the mapping via an FC name server or directory server protocol. The switches to which a zoned peer of endpoint <b>110</b> are connected to are informed of the proxy to original FCID mapping for endpoint <b>110</b>. Other switches in the SAN do not need to be aware of the mapping.</p>
<p id="p-0030" num="0029">The proxy FCID mechanism allows communication between endpoint <b>110</b> and endpoint <b>140</b> as if endpoint <b>110</b> had never moved or migrated. Endpoint <b>140</b> sends frames to endpoint <b>110</b> as V<b>1</b>: 30.1.1&#x2192;10.0.0, as endpoint <b>140</b> is unaware that endpoint <b>110</b> has migrated to a different domain. Endpoint <b>110</b> still knows that its FCID is 10.1.1 even though it has migrated to another domain. Switch <b>130</b>(<b>3</b>) enforces existing zoning rules, e.g., access rules for zone Z<b>1</b>. The frame headers are rewritten to 30.1.1&#x2192;20.1.1 by switch <b>130</b>(<b>3</b>) at the ingress of port P<b>4</b>. Intermediate switches that may be in the path from switch <b>130</b>(<b>3</b>) to switch <b>130</b>(<b>2</b>) forward the frames in the usual manner based on the destination address of 20.1.1. The frames eventually reach switch <b>130</b>(<b>2</b>) along, e.g., the fabric shortest path first (FSPF) from switch <b>130</b>(<b>3</b>) to switch <b>130</b>(<b>2</b>). Switch <b>130</b>(<b>2</b>) rewrites the headers back to 30.1.1&#x2192;10.1.1 at the egress of the frames at port P<b>6</b>. The rewrite could have occurred at frame ingress at port P<b>5</b>; however, it may be more efficient from hardware resource usage perspective to do the rewrite at port P<b>6</b> egress. The FCID rewrites at switch <b>130</b>(<b>2</b>) and switch <b>130</b>(<b>3</b>) are shown in the Tables 3 and 4 below.</p>
<p id="p-0031" num="0030">
<tables id="TABLE-US-00003" num="00003">
<table frame="none" colsep="0" rowsep="0" pgwide="1">
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="273pt" align="center"/>
<thead>
<row>
<entry namest="1" nameend="1" rowsep="1">TABLE 3</entry>
</row>
<row>
<entry namest="1" nameend="1" align="center" rowsep="1"/>
</row>
<row>
<entry>FCIDs in the endpoint 110 &#x2192; endpoint 140 flow direction</entry>
</row>
<row>
<entry namest="1" nameend="1" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry/>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="4">
<colspec colname="1" colwidth="70pt" align="left"/>
<colspec colname="2" colwidth="63pt" align="left"/>
<colspec colname="3" colwidth="77pt" align="left"/>
<colspec colname="4" colwidth="63pt" align="left"/>
<tbody valign="top">
<row>
<entry>P6 (ingress from 110)</entry>
<entry>P5 (egress to 130(3))</entry>
<entry>P9 (ingress from 130(2))</entry>
<entry>P4 (egress to 140)</entry>
</row>
<row>
<entry>V1: 10.1.1&#x2192;30.1.1</entry>
<entry>V1: 20.1.1&#x2192;30.1.1</entry>
<entry>V1: 20.1.1&#x2192;30.1.1</entry>
<entry>V1: 10.1.1&#x2192;30.1.1</entry>
</row>
<row>
<entry namest="1" nameend="4" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0032" num="0031">
<tables id="TABLE-US-00004" num="00004">
<table frame="none" colsep="0" rowsep="0" pgwide="1">
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="273pt" align="center"/>
<thead>
<row>
<entry namest="1" nameend="1" rowsep="1">TABLE 4</entry>
</row>
<row>
<entry namest="1" nameend="1" align="center" rowsep="1"/>
</row>
<row>
<entry>FCIDs in the endpoint 140 &#x2192; endpoint 110 flow direction</entry>
</row>
<row>
<entry namest="1" nameend="1" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry/>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="4">
<colspec colname="1" colwidth="70pt" align="left"/>
<colspec colname="2" colwidth="63pt" align="left"/>
<colspec colname="3" colwidth="77pt" align="left"/>
<colspec colname="4" colwidth="63pt" align="left"/>
<tbody valign="top">
<row>
<entry>P4 (ingress from 140)</entry>
<entry>P9 (egress to 130(2))</entry>
<entry>P5 (ingress from 130(3))</entry>
<entry>P6 (egress to 110)</entry>
</row>
<row>
<entry>V1: 30.1.1&#x2192;10.1.1</entry>
<entry>V1: 30.1.1&#x2192;20.1.1</entry>
<entry>V1: 30.1.1&#x2192;20.1.1</entry>
<entry>V1: 30.1.1&#x2192;10.1.1</entry>
</row>
<row>
<entry namest="1" nameend="4" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0033" num="0032">Referring to <figref idref="DRAWINGS">FIG. 3</figref>, system <b>100</b> is shown in which another endpoint has migrated from one switch to another. In this example, at <b>300</b>, endpoint <b>140</b> is shown migrating from switch <b>130</b>(<b>3</b>) to switch <b>130</b>(<b>4</b>). The connection of endpoint <b>140</b> to switch <b>130</b>(<b>3</b>) is taken down as shown by the dashed line shown in <figref idref="DRAWINGS">FIG. 3</figref>. Endpoint <b>140</b> is now connected to switch <b>130</b>(<b>4</b>) via port P<b>8</b>. A connection is made from port P<b>7</b> of switch <b>130</b>(<b>4</b>) to port P<b>10</b> of switch <b>130</b>(<b>2</b>). It should be understood that the movement of endpoint <b>140</b> from the right side of the figure to the left side of the figure is for illustrative effect and that no physical movement by endpoint <b>140</b> is necessary.</p>
<p id="p-0034" num="0033">Before endpoint <b>140</b> moved to switch <b>130</b>(<b>4</b>) from switch <b>130</b>(<b>3</b>), switch <b>130</b>(<b>4</b>) was aware that endpoint <b>140</b> was online and that its current FCID before the move is 30.1.1. When endpoint <b>140</b> connects to switch <b>130</b>(<b>4</b>), either virtually or physically, switch <b>130</b>(<b>4</b>) allocates an FCID for endpoint <b>140</b> from its own domain 40, e.g., an FCID of 40.1.1 is assigned to endpoint <b>140</b>. However, when endpoint <b>140</b> logs in at switch <b>130</b>(<b>4</b>), switch <b>130</b>(<b>4</b>) responds to FLOGI request with an FCID of 30.1.1, i.e., the original FCID assigned by switch <b>130</b>(<b>3</b>).</p>
<p id="p-0035" num="0034">Switch <b>130</b>(<b>4</b>) also distributes in the SAN information indicating that the allocated FCID for endpoint <b>140</b> is 30.1.1 (unchanged) and that it has been assigned a proxy FCID is 40.1.1. This information may be sent to all the switches in VSAN <b>1</b> including switch <b>130</b>(<b>2</b>) or specifically to switch <b>130</b>(<b>2</b>) by a message. The proxy FCID mechanism allows communication between endpoint <b>110</b> and endpoint <b>140</b> as if endpoint <b>140</b> had never moved. Endpoint <b>110</b> sends frames to endpoint <b>140</b> as V<b>1</b>: 10.1.1&#x2192;30.0.0 as endpoint <b>110</b> is unaware that endpoint <b>140</b> has moved to a different domain. Endpoint <b>140</b> still knows that its assigned FCID is 30.1.1 even though it has moved to another domain. Switch <b>130</b>(<b>2</b>) enforces the existing zoning rules, e.g., access rules for zone Z<b>1</b>. The frame headers are rewritten to 20.1.1&#x2192;40.1.1 by switch <b>130</b>(<b>2</b>) at the ingress of port P<b>6</b>. Intermediate switches that may be in the path from switch <b>130</b>(<b>2</b>) to switch <b>130</b>(<b>4</b>) forward the frames in the usual manner based on the destination address of 40.1.1. The frames eventually reach switch <b>130</b>(<b>4</b>) along the FSPF from switch <b>130</b>(<b>2</b>) to switch <b>130</b>(<b>4</b>). Switch <b>130</b>(<b>4</b>) rewrites the headers back to 10.1.1&#x2192;30.1.1 at the egress of the frames at port P<b>8</b>. FCID rewrites at switch <b>130</b>(<b>2</b>) and switch <b>130</b>(<b>3</b>), respectively, are shown in the Tables 5and 6 below.</p>
<p id="p-0036" num="0035">
<tables id="TABLE-US-00005" num="00005">
<table frame="none" colsep="0" rowsep="0" pgwide="1">
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="280pt" align="center"/>
<thead>
<row>
<entry namest="1" nameend="1" rowsep="1">TABLE 5</entry>
</row>
<row>
<entry namest="1" nameend="1" align="center" rowsep="1"/>
</row>
<row>
<entry>FCIDs in the endpoint 110 &#x2192; endpoint 140 flow direction</entry>
</row>
<row>
<entry namest="1" nameend="1" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry/>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="4">
<colspec colname="1" colwidth="70pt" align="left"/>
<colspec colname="2" colwidth="70pt" align="left"/>
<colspec colname="3" colwidth="77pt" align="left"/>
<colspec colname="4" colwidth="63pt" align="left"/>
<tbody valign="top">
<row>
<entry>P6 (ingress from 110)</entry>
<entry>P10 (egress to 130(3))</entry>
<entry>P7 (ingress from 130(2))</entry>
<entry>P8 (egress to 140)</entry>
</row>
<row>
<entry>V1: 10.1.1&#x2192;30.1.1</entry>
<entry>V1: 20.1.1&#x2192;40.1.1</entry>
<entry>V1: 20.1.1&#x2192;40.1.1</entry>
<entry>V1: 10.1.1&#x2192;30.1.1</entry>
</row>
<row>
<entry namest="1" nameend="4" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0037" num="0036">
<tables id="TABLE-US-00006" num="00006">
<table frame="none" colsep="0" rowsep="0" pgwide="1">
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="273pt" align="center"/>
<thead>
<row>
<entry namest="1" nameend="1" rowsep="1">TABLE 6</entry>
</row>
<row>
<entry namest="1" nameend="1" align="center" rowsep="1"/>
</row>
<row>
<entry>FCIDs in the endpoint 140 &#x2192; endpoint 110 flow direction</entry>
</row>
<row>
<entry namest="1" nameend="1" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry/>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="4">
<colspec colname="1" colwidth="70pt" align="left"/>
<colspec colname="2" colwidth="63pt" align="left"/>
<colspec colname="3" colwidth="77pt" align="left"/>
<colspec colname="4" colwidth="63pt" align="left"/>
<tbody valign="top">
<row>
<entry>P8 (ingress from 140)</entry>
<entry>P7 (egress to 130(2))</entry>
<entry>P10 (ingress from 130(3))</entry>
<entry>P6 (egress to 110)</entry>
</row>
<row>
<entry>V1: 30.1.1&#x2192;10.1.1</entry>
<entry>V1: 40.1.1&#x2192;20.1.1</entry>
<entry>V1: 40.1.1&#x2192;20.1.1</entry>
<entry>V1: 30.1.1&#x2192;10.1.1</entry>
</row>
<row>
<entry namest="1" nameend="4" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0038" num="0037">Referring to <figref idref="DRAWINGS">FIG. 4</figref>, an example block diagram of a switch device, e.g., one of switches <b>130</b>(<b>1</b>)-<b>130</b>(<b>4</b>), is shown. The switch comprises a data processing device <b>410</b>, one or more network interfaces <b>420</b>, a memory <b>430</b>, and FC switch hardware <b>440</b>. Resident in the memory <b>430</b> is software for FCID mobility process logic <b>500</b>. Process logic <b>500</b> may also be implemented in hardware using hardware that is part of the FC switch hardware <b>440</b>, or be implemented in a combination of both hardware and software.</p>
<p id="p-0039" num="0038">The data processing device <b>410</b> is, for example, a microprocessor, a microcontroller, systems on a chip (SOCs), or other fixed or programmable logic. The data processing device <b>410</b> is also referred to herein simply as a processor. The memory <b>430</b> may be any form of random access memory (RAM), FLASH memory, disk storage, or other tangible (non-transitory) memory media device that stores data used for the techniques described herein. The memory <b>430</b> may be separate or part of the processor <b>410</b>. Instructions for performing the process logic <b>500</b> may be stored in the memory <b>430</b> for execution by the processor <b>410</b> such that when executed by the processor, causes the processor to perform the operations describe herein in connection with <figref idref="DRAWINGS">FIGS. 1-3</figref> and <b>5</b>. The network interfaces <b>420</b> enable communication over network <b>120</b> shown in <figref idref="DRAWINGS">FIG. 1</figref> and to endpoint devices, and thus include a FC, FCoE, or Host Bus Adapter (HBA) interfaces. The network interfaces <b>420</b> may be configured to be coupled to the processor <b>410</b>. It should be understood that any of the devices in system <b>100</b> may be configured with a similar hardware or software configuration as switches <b>130</b>(<b>1</b>)-<b>130</b>(<b>4</b>).</p>
<p id="p-0040" num="0039">The functions of the processor <b>410</b> may be implemented by a processor or computer readable tangible (non-transitory) medium encoded with instructions or by logic encoded in one or more tangible media (e.g., embedded logic such as an application specific integrated circuit (ASIC), digital signal processor (DSP) instructions, software that is executed by a processor, etc.), wherein the memory <b>430</b> stores data used for the computations or functions described herein (and/or to store software or processor instructions that are executed to carry out the computations or functions described herein). Thus, functions of the FCID mobility process logic <b>500</b> may be implemented with fixed logic or programmable logic (e.g., software or computer instructions executed by a processor or field programmable gate array (FPGA)).</p>
<p id="p-0041" num="0040">The FC switch hardware <b>440</b> performs the basic FC switching operations according to the FC standard, and may be implemented by one or more ASICs. In addition, the FC switch hardware <b>440</b> may be used to implement fast FCID address rewrites or overwrites in the FC frames without involving the switch Central Processing Unit (CPU), e.g., processor <b>410</b>, or a separate processor associated with one of the network interfaces <b>420</b>. The FC switch hardware <b>440</b> may be coupled to processor <b>410</b> or be implemented as part of processor <b>410</b>. Thus, the switch hardware <b>440</b> facilitates network communications, e.g., over the network including endpoint devices.</p>
<p id="p-0042" num="0041">Referring to <figref idref="DRAWINGS">FIG. 5</figref>, an example of a flowchart is shown that generally depicts the operations of the FCID mobility process logic <b>500</b> that allows endpoint devices to migrate from one physical switch to another while still retaining their originally assigned FCIDs. At <b>510</b>, at a first switch, e.g., one of switches <b>130</b>(<b>1</b>)-<b>130</b>(<b>4</b>), in a network (e.g., a VSAN), a FLOGI request is received from a first endpoint device, e.g., endpoint <b>110</b> in <figref idref="DRAWINGS">FIG. 1</figref>. The first endpoint device is associated with a first FCID that was previously assigned by another switch in the VSAN. In this example, the first endpoint is migrating from another switch to the first switch.</p>
<p id="p-0043" num="0042">At <b>515</b>, a response to the FLOGI request is sent to the first endpoint device with the first FCID, i.e., the first endpoint device's original FCID. Since the first endpoint device is assigned its original FCID by the first switch, the endpoint device does not have to make any internal changes or adjustments, and continues to communicate with other devices as if it had not migrated to the first switch. At <b>520</b>, the first endpoint device is assigned a second FCID associated with a domain of the switch. The second FCID acts as proxy FCID for the first endpoint device during communication within the VSAN, i.e., communication across the switched fabric. At this point, the first endpoint device is unaware of the proxy FCID and operates as if it had never migrated to another switch.</p>
<p id="p-0044" num="0043">At <b>525</b>, a first frame is received from the first endpoint device with a source FCID comprising the first FCID and a destination FCID comprising an FCID for a second endpoint device. At <b>530</b>, the source FCID in the first frame is overwritten with the second FCID. Thus, when transmitted or forwarded from the switch into the VSAN the frame is now associated with the switch's domain. The flow chart for the FCID mobility process logic <b>500</b> continues in <figref idref="DRAWINGS">FIG. 6</figref> when frames are received from the VSAN that are addressed to the first endpoint device.</p>
<p id="p-0045" num="0044">Turning to <figref idref="DRAWINGS">FIG. 6</figref>, FCID mobility process logic <b>500</b> performs similar operations on frames received from another switch in the VSAN. At <b>535</b>, a second frame is received from another switch in the VSAN with a destination FCID comprising the second FCID. The second FCID acts as a proxy for the first FCID of the first endpoint. At <b>540</b>, the destination FCID in the second frame is overwritten with the first FCID. At <b>545</b>, the second frame is forwarded to the first endpoint device. At this point, the first endpoint device remains unaware of the FCID proxy process occurring between switches in the fabric.</p>
<p id="p-0046" num="0045">In another example, the second endpoint device has migrated to another switch and sends a frame to the first endpoint device. A message is received at the first switch from a second switch comprising information that indicates that the second endpoint device has been assigned a fourth FCID associated with a domain of the second switch that proxies for a third FCID that was previously assigned to the second endpoint by another switch in the VSAN. A second frame is received from the second switch with a source FCID comprising the fourth FCID and a destination FCID comprising the second FCID. The source FCID in the second frame is overwritten with the third FCID and the destination FCID in the second frame is overwritten with the first FCID. The second frame is forwarded to the first endpoint device.</p>
<p id="p-0047" num="0046">In still a further example, the second endpoint device has migrated to another switch and the first endpoint device sends a frame to the second endpoint device. A message is received from a second switch comprising information that indicates that the second endpoint device has been assigned a fourth FCID that proxies for a third FCID that was previously assigned to the second endpoint by another switch in the VSAN. A second frame is received from the first endpoint device with a source FCID comprising the first FCID and a destination FCID comprising the third FCID. The source FCID in the second frame is overwritten with the second FCID and the destination FCID in the second frame is overwritten with the fourth FCID. The second frame is forwarded to the second endpoint device.</p>
<p id="p-0048" num="0047">The first switch can determine the first FCID before responding the FLOGI request in a number of ways. By way of example, a message is received by the first switch that comprises information that indicates the first endpoint device has a pending migration to the first switch and the message contains the first FCID or the first switch can look up the first FCID in an FC name server database prior to responding to the FLOGI request with the first FCID. Proxy FCIDs may also be stored and retrieved via the name server database. As described above, proxy FCIDs may be exchanged using messages that consist of PLOGI request frames or by way of messages using other protocols. In one example, a PLOGI request frame is received from the first endpoint device. The second FCID (proxy FCID) is added by the first switch to a vendor specific information field in the PLOGI frame. The PLOGI request frame is forwarded by the first switch.</p>
<p id="p-0049" num="0048">The proxy FCIDs may also be acquired by switches via PLOGI request frames. In one example, a PLOGI request frame is received from another endpoint device in the VSAN. A proxy FCID is extracted from a vendor specific information field in the PLOGI frame and the proxy FCID is used to overwrite source FCIDs for frames addressed to the first endpoint device. The PLOGI request frame is forwarded to the first endpoint device. The proxy information may be erased from the vendor specific information field prior to forwarding.</p>
<p id="p-0050" num="0049">Referring to <figref idref="DRAWINGS">FIG. 7</figref>, further techniques are provided by FCID mobility process logic <b>500</b> according to a second embodiment in which the first endpoint device has not migrated and the second endpoint device has migrated. At <b>550</b>, a first switch is coupled to the first endpoint device and a second switch. The second switch is coupled to the second endpoint device and has assigned the second endpoint device an original FCID. A message is received at the first switch from a third switch comprising information that indicates that the second endpoint device has been assigned a proxy FCID that proxies for the original FCID. At <b>555</b>, a first frame is received from the third switch with a source FCID comprising the proxy FCID and a destination FCID comprising an FCID for the first endpoint device. At <b>560</b>, the proxy FCID in the first frame is overwritten with the original FCID. And at <b>565</b>, the frame is forwarded to the first endpoint device. The flow chart for the FCID mobility process logic <b>500</b> continues in <figref idref="DRAWINGS">FIG. 8</figref> when frames are received from the first endpoint device that are addressed to the second endpoint device</p>
<p id="p-0051" num="0050">Turning to <figref idref="DRAWINGS">FIG. 8</figref>, FCID mobility process logic <b>500</b> performs similar operations on frames received from the first endpoint device. At <b>570</b>, a second frame is received from the first endpoint device with a source FCID comprising the FCID for the first endpoint device and a destination FCID comprising the original FCID. AT <b>575</b>, the original FCID in the second frame is overwritten with the proxy FCID. The second frame is forwarded to the second endpoint device.</p>
<p id="p-0052" num="0051">For simplicity of description, the above description has been provided in which all the devices are in the same VSAN. The techniques described herein are equally applicable if the devices in system <b>100</b> are in different VSANs and are communicating by way of Inter-VSAN Routing (IVR). Furthermore, the techniques described herein are applicable to Fiber Channel over Ethernet (FCoE) networks and devices. The actual rewriting of the FCIDs and FCID management may be implemented in an intelligent line card device with a programmable processor or an ASIC.</p>
<p id="p-0053" num="0052">As described above, only the originally assigned FCIDs of the endpoint devices are returned to endpoints during fabric login. In one example, if an endpoint requests the FCIDs of the peers that are in the same zone, only the originally assigned FCIDs are returned to the endpoint. Proxy FCIDs are only known to the switches. For any given endpoint, at most two FCIDs are maintained for an endpoint device, i.e., the original FCID and a proxy FCID. Original source FCIDs (source end-device to switch) and destination FCIDs (switch to destination end-device) remain unchanged, and hence, no FCID rewrites are needed at endpoints for the frames exchanged between the endpoints, e.g., at ports P<b>6</b> and P<b>4</b> shown in <figref idref="DRAWINGS">FIG. 2</figref>.</p>
<p id="p-0054" num="0053">In addition, the switches may be capable of FCID rewrites in the hardware, e.g., on frame ingress or egress from the switch ports, which make the techniques described herein available on some platforms using existing hardware. When an endpoint device moves or migrates, the name server database may be updated with the current location, e.g., current switch and port, of the endpoint device and its current proxy FCID. The remaining elements of the name server database entry for the endpoint device may remain unchanged. The FCID mobility feature can be selectively enabled on a per end-device basis, per VSAN basis, or for all the VSANs in the network.</p>
<p id="p-0055" num="0054">In sum, techniques are provided herein to assign proxy FCIDs to endpoint devices so that the endpoint devices may achieve FCID mobility by retaining their originally assigned FCIDs. At a switch in a network, e.g., a VSAN, a fabric login (FLOGI) request is received from a first endpoint device that is associated with a first FCID that was previously assigned to the first endpoint device by another switch in the VSAN. The response to the FLOGI request contains the first FCID. The first endpoint device is assigned a second FCID associated with a domain of the switch and the second FCID is used as a proxy FCID within the VSAN for the first endpoint device. A first frame is received from the first endpoint device with a source FCID comprising the first FCID and a destination FCID comprising an FCID for a second endpoint device. The source FCID in the first frame is overwritten (i.e., replaced) with the second FCID. The first frame is forwarded to the second endpoint device.</p>
<p id="p-0056" num="0055">Techniques are also provided herein for receiving a second frame from another switch in the VSAN with a destination FCID comprising the second FCID. The destination FCID in the second frame is overwritten (i.e., replaced) with the first FCID and the second frame is forwarded to the first endpoint device.</p>
<p id="p-0057" num="0056">The techniques described herein vastly reduce the operational steps for endpoint devices when the endpoint devices are migrated to different devices in the VSAN. SAN devices can retain their FCIDs as they move dynamically within a SAN among multiple SAN switches. This in turn eliminates the need for propagating device offline and device online events throughout the SAN as is typically performed when a SAN device moves to another switch or domain. Configuration changes are reduced for end devices that have peer device FCID based configurations. The edge switches where the SAN devices are attached are aware of the proxy FCIDs, and core SAN switches simply forward the traffic as they normally do and are unaware of the FCID rewrites used for device mobility.</p>
<p id="p-0058" num="0057">The above description is intended by way of example only.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method comprising:
<claim-text>at a first switch in a network, receiving a login request from a first endpoint device that is associated with a first FC identifier (FCID) that was previously assigned to the first endpoint device by a second switch in the network, wherein the second switch is associated with a different domain than the first switch;</claim-text>
<claim-text>determining that the first endpoint device has been migrated to the first switch;</claim-text>
<claim-text>responding to the login request with the first FCID;</claim-text>
<claim-text>assigning the first endpoint device a second FCID associated with a domain of the first switch, wherein the second FCID is used as a proxy FCID between switches in the network for the first endpoint device;</claim-text>
<claim-text>receiving a first frame from the first endpoint device with a source FCID comprising the first FCID and a destination FCID comprising an FCID for a second endpoint device;</claim-text>
<claim-text>overwriting the source FCID in the first frame with the second FCID such that the first frame is associated with the domain of the first switch domain after transmission from the first switch; and</claim-text>
<claim-text>forwarding the first frame to the second endpoint device associated with a third switch.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>receiving a second frame from the third switch in the network with a destination FCID comprising the second FCID;</claim-text>
<claim-text>overwriting the destination FCID in the second frame with the first FCID; and</claim-text>
<claim-text>forwarding the second frame to the first endpoint device.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>receiving a message from the third switch comprising information that indicates that the second endpoint device has been assigned a fourth FCID associated with a domain of the third switch that proxies for a third FCID that was previously assigned to the second endpoint device by a fourth switch in the network;</claim-text>
<claim-text>receiving a second frame from the third switch with a source FCID comprising the fourth FCID and a destination FCID comprising the second FCID;</claim-text>
<claim-text>overwriting the source FCID in the second frame with the third FCID and the destination FCID in the second frame with the first FCID; and</claim-text>
<claim-text>forwarding the second frame to the first endpoint device.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>receiving a message from the third switch comprising information that indicates that the second endpoint device has been assigned a fourth FCID that proxies for a third FCID that was previously assigned to the second endpoint by a fourth switch in the network;</claim-text>
<claim-text>receiving a second frame from the first endpoint device with a source FCID comprising the first FCID and a destination FCID comprising the third FCID;</claim-text>
<claim-text>overwriting the source FCID in the second frame with the second FCID and the destination FCID in the second frame with the fourth FCID; and</claim-text>
<claim-text>forwarding the second frame to the second endpoint device.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising receiving a message that the first endpoint device has a pending migration to the first switch, wherein the message contains the first FCID.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising looking up the first FCID in an FC name server database prior to responding to the login request with the first FCID.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>receiving a port login request frame from the first endpoint device;</claim-text>
<claim-text>adding the second FCID to a vendor specific information field in the port login request frame; and</claim-text>
<claim-text>forwarding the port login request frame.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>receiving a port login request frame from another endpoint device in the network;</claim-text>
<claim-text>extracting a proxy FCID from a vendor specific information field in the port login request frame, wherein the proxy FCID is used to overwrite source FCIDs for frames addressed to the first endpoint device; and</claim-text>
<claim-text>forwarding the port login request frame to the first endpoint device.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. A method comprising:
<claim-text>at a first switch coupled to a first endpoint device and a second switch in a network, wherein the second switch is associated with a first domain, and is coupled to a second endpoint device and has assigned the second endpoint device an original FCID associated with the first domain, receiving a message from a third switch associated with a second domain, the message comprising information that indicates that the second endpoint device has been assigned a proxy FCID associated with the second domain that is configured to proxy for the original FCID between switches in the network;</claim-text>
<claim-text>receiving a first frame from the third switch with a source FCID comprising the proxy FCID and a destination FCID comprising an FCID for the first endpoint device;</claim-text>
<claim-text>overwriting the proxy FCID in the first frame with the original FCID; and</claim-text>
<claim-text>forwarding the first frame to the first endpoint device.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The method of <claim-ref idref="CLM-00009">claim 9</claim-ref>, further comprising:
<claim-text>receiving a second frame from the first endpoint device with a source FCID comprising the FCID for the first endpoint device and a destination FCID comprising the original FCID;</claim-text>
<claim-text>overwriting the original FCID in the second frame with the proxy FCID; and</claim-text>
<claim-text>forwarding the second frame to the second endpoint device.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. An apparatus comprising:
<claim-text>one or more network interfaces configured to enable communication between devices in a network;</claim-text>
<claim-text>switch hardware of a first switch configured to facilitate the communication between devices; and</claim-text>
<claim-text>a processor configured to be coupled to the one or more network interfaces and the switch hardware, and configured to:
<claim-text>receive a login request via the one or more network interfaces from a first endpoint device that is associated with a first FC identifier (FCID) that was previously assigned to the first endpoint device by a second switch in the network, wherein the second switch is associated with a different domain than the first switch;</claim-text>
<claim-text>determine that the first endpoint device has been migrated to the first switch;</claim-text>
<claim-text>respond to the login request with the first FCID;</claim-text>
<claim-text>assign the first endpoint device a second FCID associated with a domain of the first switch, wherein the second FCID is used as a proxy FCID between switches in the network for the first endpoint device;</claim-text>
<claim-text>receive a first frame from the first endpoint device with a source FCID comprising the first FCID and a destination FCID comprising an FCID for a second endpoint device associated with a third switch;</claim-text>
<claim-text>overwrite the source FCID in the first frame with the second FCID using the switch hardware such that the first frame is associated with the domain of the first switch domain after transmission from the first switch; and</claim-text>
<claim-text>forward the first frame to the second endpoint device associated with a third switch via the one or more network interfaces.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The apparatus of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the processor is further configured to:
<claim-text>receive a second frame from the third switch in the network with a destination FCID comprising the second FCID;</claim-text>
<claim-text>overwrite the destination FCID in the second frame with the first FCID; and</claim-text>
<claim-text>forward the second frame to the first endpoint device.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The apparatus of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the processor is further configured to:
<claim-text>receive a message from the third switch comprising information that indicates that the second endpoint device has been assigned a fourth FCID associated with a domain of the third switch that proxies for a third FCID that was previously assigned to the second endpoint by a fourth switch in the network;</claim-text>
<claim-text>receive a second frame from the third switch with a source FCID comprising the fourth FCID and a destination FCID comprising the second FCID;</claim-text>
<claim-text>overwrite the source FCID in the second frame with the third FCID and the destination FCID in the second frame with the first FCID; and</claim-text>
<claim-text>forward the second frame to the first endpoint device.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The apparatus of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the processor is further configured to:
<claim-text>receive a message from the third switch comprising information that indicates that the second endpoint device has been assigned a fourth FCID that proxies for a third FCID that was previously assigned to the second endpoint by a fourth switch in the network;</claim-text>
<claim-text>receive a second frame from the first endpoint device with a source FCID comprising the first FCID and a destination FCID comprising the third FCID;</claim-text>
<claim-text>overwrite the source FCID in the second frame with the second FCID and the destination FCID in the second frame with the fourth FCID; and</claim-text>
<claim-text>forward the second frame to the second endpoint device.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The apparatus of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the processor is further configured to receive a message that the first endpoint device has a pending migration to the first switch, wherein the message contains the first FCID.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The apparatus of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the processor is further configured to look up the first FCID in an FC name server database prior to responding to the login request with the first FCID.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The apparatus of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the processor is further configured to:
<claim-text>receive a port login request frame from the first endpoint device;</claim-text>
<claim-text>add the second FCID to a vendor specific information field in the port login request frame; and</claim-text>
<claim-text>forward the port login request frame.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. One or more non-transitory computer readable media storing instructions that, when executed by a processor, cause the processor to:
<claim-text>receive a login request from a first endpoint device that is associated with a first FC identifier (FCID) that was previously assigned to the first endpoint device by a second switch in a network, wherein the second switch is associated with a different domain than the first switch;</claim-text>
<claim-text>determine that the first endpoint device has been migrated to the first switch;</claim-text>
<claim-text>respond to the login request with the first FCID;</claim-text>
<claim-text>assign the first endpoint device a second FCID associated with a domain of a first switch, wherein the second FCID is used as a proxy FCID between switches in the network for the first endpoint device;</claim-text>
<claim-text>receive a first frame from the first endpoint device with a source FCID comprising the first FCID and a destination FCID comprising an FCID for a second endpoint device associated with a third switch;</claim-text>
<claim-text>overwrite the source FCID in the first frame with the second FCID such that the first frame is associated with the domain of the first switch domain after transmission from the first switch; and</claim-text>
<claim-text>forward the first frame to the second endpoint device associated with a third switch.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The non-transitory computer readable media of <claim-ref idref="CLM-00018">claim 18</claim-ref>, further comprising instructions that, when executed by the processor, cause the processor to:
<claim-text>receive a second frame from the third switch in the network with a destination FCID comprising the second FCID;</claim-text>
<claim-text>overwrite the destination FCID in the second frame with the first FCID; and</claim-text>
<claim-text>forward the second frame to the first endpoint device.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The non-transitory computer readable media of <claim-ref idref="CLM-00018">claim 18</claim-ref>, further comprising instructions that, when executed by the processor, cause the processor to:
<claim-text>receive a message from the third switch comprising information that indicates that the second endpoint device has been assigned a fourth FCID associated with a domain of the third switch that proxies for a third FCID that was previously assigned to the second endpoint device by a fourth switch in the network;</claim-text>
<claim-text>receive a second frame from the third switch with a source FCID comprising the fourth FCID and a destination FCID comprising the second FCID;</claim-text>
<claim-text>overwrite the source FCID in the second frame with the third FCID and the destination FCID in the second frame with the first FCID; and</claim-text>
<claim-text>forward the second frame to the first endpoint device.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. The non-transitory computer readable media of <claim-ref idref="CLM-00018">claim 18</claim-ref>, further comprising instructions that, when executed by the processor, cause the processor to:
<claim-text>receive a message from the third switch comprising information that indicates that the second endpoint device has been assigned a fourth FCID that proxies for a third FCID that was previously assigned to the second endpoint by a fourth switch in the network;</claim-text>
<claim-text>receive a second frame from the first endpoint device with a source FCID comprising the first FCID and a destination FCID comprising the third FCID;</claim-text>
<claim-text>overwrite the source FCID in the second frame with the second FCID and the destination FCID in the second frame with the fourth FCID; and</claim-text>
</claim-text>
<claim-text>forward the second frame to the second endpoint device.</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. The non-transitory computer readable media of <claim-ref idref="CLM-00018">claim 18</claim-ref>, further comprising instructions that, when executed by the processor, cause the processor to receive a message that the first endpoint device has a pending migration to the first switch, wherein the message contains the first FCID.</claim-text>
</claim>
<claim id="CLM-00023" num="00023">
<claim-text>23. The non-transitory computer readable media of <claim-ref idref="CLM-00018">claim 18</claim-ref>, further comprising instructions that, when executed by the processor, cause the processor to look up the first FCID in an FC name server database prior to responding to the login request with the first FCID.</claim-text>
</claim>
<claim id="CLM-00024" num="00024">
<claim-text>24. The non-transitory computer readable media of <claim-ref idref="CLM-00018">claim 18</claim-ref>, further comprising instructions that, when executed by the processor, cause the processor to:
<claim-text>receive a port login request frame from the first endpoint device;</claim-text>
<claim-text>add the second FCID to a vendor specific information field in the port login request frame; and</claim-text>
<claim-text>forward the port login request frame. </claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
