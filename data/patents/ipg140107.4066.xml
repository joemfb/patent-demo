<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625135-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625135</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12920310</doc-number>
<date>20100714</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2009-182892</doc-number>
<date>20090805</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>611</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>3</main-group>
<subgroup>12</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>15</main-group>
<subgroup>16</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>K</subclass>
<main-group>15</main-group>
<subgroup>00</subgroup>
<symbol-position>L</symbol-position>
<classification-value>N</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>358  115</main-classification>
<further-classification>709201</further-classification>
<further-classification>709202</further-classification>
<further-classification>709203</further-classification>
</classification-national>
<invention-title id="d2e71">Information processing apparatus capable of communicating with an image forming apparatus having a web browser</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>2002/0027673</doc-number>
<kind>A1</kind>
<name>Roosen et al.</name>
<date>20020300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358  113</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>2003/0053118</doc-number>
<kind>A1</kind>
<name>Muramoto et al.</name>
<date>20030300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358  115</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2006/0056873</doc-number>
<kind>A1</kind>
<name>Kimura</name>
<date>20060300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>399 81</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2008/0186538</doc-number>
<kind>A1</kind>
<name>Park</name>
<date>20080800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358  115</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>JP</country>
<doc-number>2000-118085</doc-number>
<kind>A</kind>
<date>20000400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>JP</country>
<doc-number>2001-290692</doc-number>
<kind>A</kind>
<date>20011000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>JP</country>
<doc-number>2004-214692</doc-number>
<kind>A</kind>
<date>20040700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>JP</country>
<doc-number>2004-358800</doc-number>
<kind>A</kind>
<date>20041200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>JP</country>
<doc-number>2005-182253</doc-number>
<kind>A</kind>
<date>20050700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>JP</country>
<doc-number>2006-205442</doc-number>
<kind>A</kind>
<date>20060800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00011">
<othercit>PCT International Search Report and Written Opinion of the International Searching Authority, mailed Oct. 19, 2010 in PCT /JP2010/062282.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>13</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>358  115</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709201-203</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>17</number-of-drawing-sheets>
<number-of-figures>17</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20110176163</doc-number>
<kind>A1</kind>
<date>20110721</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Towata</last-name>
<first-name>Hiroaki</first-name>
<address>
<city>Kawasaki</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Towata</last-name>
<first-name>Hiroaki</first-name>
<address>
<city>Kawasaki</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Fitzpatrick, Cella, Harper &#x26; Scinto</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Canon Kabushiki Kaisha</orgname>
<role>03</role>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Guillermety</last-name>
<first-name>Fred</first-name>
<department>2672</department>
</primary-examiner>
</examiners>
<pct-or-regional-filing-data>
<document-id>
<country>WO</country>
<doc-number>PCT/JP2010/062282</doc-number>
<kind>00</kind>
<date>20100714</date>
</document-id>
<us-371c124-date>
<date>20100830</date>
</us-371c124-date>
</pct-or-regional-filing-data>
<pct-or-regional-publishing-data>
<document-id>
<country>WO</country>
<doc-number>WO2011/016339</doc-number>
<kind>A </kind>
<date>20110210</date>
</document-id>
</pct-or-regional-publishing-data>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">An information processing apparatus is provided that appropriately selects a push-type printing method or a pull-type printing method according to an image forming apparatus that requested data to be printed, thus effectively allowing the image forming apparatus to have the advantages of the respective printing methods. To accomplish this, in the information processing apparatus, when a request from a web browser of the image forming apparatus has been received, the information processing apparatus selects whether to transmit image data to the image forming apparatus by a first method in which image data is transmitted to the web browser as a response to the request from the web browser, or by a second method in which image data is transmitted as a new request without employing the web browser, and the information processing apparatus transmits the image data to the image forming apparatus according to the selected method.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="76.37mm" wi="125.14mm" file="US08625135-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="203.03mm" wi="151.21mm" orientation="landscape" file="US08625135-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="227.50mm" wi="169.59mm" orientation="landscape" file="US08625135-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="207.77mm" wi="169.59mm" orientation="landscape" file="US08625135-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="201.00mm" wi="160.78mm" file="US08625135-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="216.66mm" wi="106.26mm" file="US08625135-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="147.83mm" wi="151.21mm" file="US08625135-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="151.21mm" wi="172.38mm" file="US08625135-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="156.04mm" wi="160.78mm" file="US08625135-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="149.18mm" wi="162.14mm" file="US08625135-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="220.98mm" wi="96.52mm" orientation="landscape" file="US08625135-20140107-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="203.03mm" wi="131.49mm" orientation="landscape" file="US08625135-20140107-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="238.42mm" wi="166.88mm" file="US08625135-20140107-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00013" num="00013">
<img id="EMI-D00013" he="107.61mm" wi="130.81mm" file="US08625135-20140107-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00014" num="00014">
<img id="EMI-D00014" he="237.74mm" wi="166.88mm" file="US08625135-20140107-D00014.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00015" num="00015">
<img id="EMI-D00015" he="248.67mm" wi="174.41mm" file="US08625135-20140107-D00015.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00016" num="00016">
<img id="EMI-D00016" he="251.38mm" wi="171.03mm" file="US08625135-20140107-D00016.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00017" num="00017">
<img id="EMI-D00017" he="202.35mm" wi="159.43mm" file="US08625135-20140107-D00017.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">TECHNICAL FIELD</heading>
<p id="p-0002" num="0001">The present invention relates to an information processing apparatus that causes image forming to be executed in cooperation with an image forming apparatus, and a method and program for controlling the information processing apparatus.</p>
<heading id="h-0002" level="1">BACKGROUND ART</heading>
<p id="p-0003" num="0002">Recently, among image forming apparatus there is known an image forming apparatus that has the functions of a printer, a copier, a facsimile apparatus, a scanner, and so forth. In such a multifunction image forming apparatus, a display unit, a print unit, an imaging unit, and so forth are provided within a single case, and also, three types of applications are provided that respectively correspond to a printer, a copier, and a facsimile apparatus. Also, technology is known where a web browser is provided as a web client function in the image forming apparatus, and used for apparatus functions by acquiring (downloading) various content from a remote web server and performing browsing. Thus, it is possible to download document data to be printed that is accumulated on a web server that is an information processing apparatus or the like, and execute PDL conversion of the document data or processing of imposition information in the information processing apparatus.</p>
<p id="p-0004" num="0003">At present, as one sequence of processing that prints document data of a remote information processing apparatus, broadly speaking two printing methods have been proposed. For example, in Japanese Patent Laid-Open No. 2004-214692, a printing method has been proposed in which document data is downloaded using a browser of an image forming apparatus, and print processing logic such as PDL conversion and rasterization are executed on the downloaded document data. Below, the printing method described in Japanese Patent Laid-Open No 2004-214692 is referred to as pull-type printing. Also, in Japanese Patent Laid-Open No. 2000-118085, a printing method has been proposed in which, for a print operation of document data that has been performed with a browser of an image forming apparatus, PDL conversion is performed by a remote information processing apparatus, and the image forming apparatus is instructed to perform printing as a remote request. Here, among remote requests there are, for example, an IPP (Internet Printing Protocol), an LPR (Line Printer Daemon Protocol), web services, and so forth. Below, the printing method described in Japanese Patent Laid-Open No. 2000-118085 is referred to as push-type printing.</p>
<p id="p-0005" num="0004">However, there are the following problems in the conventional technology. For example, with pull-type printing, there is the problem that because PDL conversion is performed in the image forming apparatus, this method of printing is only compatible with limited document data that can be processed with the image forming apparatus. With push-type printing on the other hand, in some instances communication is not possible in an environment in which there is a firewall or a proxy.</p>
<p id="p-0006" num="0005">Here, for example, a configuration is assumed in which in a head office, an information processing apparatus and an image forming apparatus are connected by a local network, and a branch office has only an image forming apparatus that is connected to the head office via the internet. In this case, in the head office, the information processing apparatus and the image forming apparatus are located on the same local network, so push-type printing is possible, but in the branch office, it is necessary to connect to the information processing apparatus of the head office via the internet, so push-type printing cannot be executed. Accordingly, in this sort of configuration, pull-type printing that can be executed in all of the image forming apparatus is applied. However, because pull-type printing is also applied to an image forming apparatus that is on the local network and therefore capable of push-type printing, it is not possible for the image forming apparatus to have advantages of push-type printing such as a high degree of print logic customization. On the other hand, when push-type printing is performed for all of the image forming apparatus, there is the problem that printing cannot be executed in an image forming apparatus connected via the Internet.</p>
<heading id="h-0003" level="1">SUMMARY OF INVENTION</heading>
<p id="p-0007" num="0006">The present invention enables realization of an information processing apparatus that appropriately selects a push-type printing method or a pull-type printing method according to an image forming apparatus that requested data to be printed, thus effectively allowing the image forming apparatus to have the advantages of the respective printing methods, and a method and program for controlling the information processing apparatus.</p>
<p id="p-0008" num="0007">One aspect of the present invention provides an information processing apparatus that is capable of communicating with an image forming apparatus having a web browser, the information processing apparatus comprising: reception means for receiving a request from the web browser of the image forming apparatus; selection means for, when the reception means has received the request from the web browser, selecting to transmit image data to the image forming apparatus using a first method in which the image data is transmitted to the web browser as a response to the request from the web browser, or to transmit the image data to the image forming apparatus using a second method in which the image data is transmitted as a new request without employing the web browser; and transmission means for transmitting the image data to the image forming apparatus according to the method selected by the selection means.</p>
<p id="p-0009" num="0008">Another aspect of the present invention provides a method for controlling an information processing apparatus that is capable of communicating with an image forming apparatus having a web browser, the method comprising: receiving a request from the web browser of the image forming apparatus; when the request has been received from the web browser, selecting to transmit image data to the image forming apparatus using a first method in which the image data is transmitted to the web browser as a response to the request from the web browser, or to transmit the image data to the image forming apparatus using a second method in which the image data is transmitted as a new request without employing the web browser; and transmitting the image data to the image forming apparatus according to the method that was selected.</p>
<p id="p-0010" num="0009">Still another aspect of the present invention provides a computer-readable storage medium storing a computer program that causes a computer to execute the method for controlling the information processing apparatus.</p>
<p id="p-0011" num="0010">Further features of the present invention will be apparent from the following description of exemplary embodiments with reference to the attached drawings.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF DRAWINGS</heading>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram that shows an example of an information processing system <b>10</b> according to the present invention.</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 2</figref> is a block diagram that shows a software configuration of an image forming apparatus <b>110</b> according to the present invention.</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 3</figref> is a block diagram that shows an example configuration of a controller <b>111</b> of the image forming apparatus <b>110</b> according to the present invention.</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 4</figref> is a block diagram that shows an example configuration of an operation unit <b>112</b> of the image forming apparatus <b>110</b> according to the present invention.</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 5</figref> is a sequence diagram that shows a flow of request processing and response processing according to an HTTP protocol.</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 6</figref> shows an example of a browser screen <b>800</b> according to the present invention.</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 7</figref> shows an example of a print screen displayed when pull-type printing is selected according to the present invention.</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 8</figref> shows an example of a print screen displayed when pull-type printing is selected according to the present invention.</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 9</figref> shows an example of a print screen displayed when push-type printing is selected according to the present invention.</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 10</figref> shows HTML code for generating the print screen for pull-type printing according to the present invention.</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 11</figref> shows HTML code for generating the print screen for push-type printing according to the present invention.</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 12</figref> is a block diagram that shows a detailed configuration of an information processing apparatus <b>130</b> according to the present invention.</p>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 13</figref> shows an example of a table <b>907</b> that has been stored in a table management area <b>906</b> according to the present invention.</p>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIGS. 14A and 14B</figref> are flowcharts that show a processing procedure of print processing according to a first embodiment.</p>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. 15</figref> is a flowchart that shows a processing procedure of print processing according to a second embodiment.</p>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 16</figref> is a flowchart that shows a processing procedure of print processing according to a third embodiment.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DESCRIPTION OF EMBODIMENTS</heading>
<p id="p-0028" num="0027">Embodiments of the present invention will now be described in detail with reference to the drawings. It should be noted that the relative arrangement of the components, the numerical expressions and numerical values set forth in these embodiments do not limit the scope of the present invention unless it is specifically stated otherwise.</p>
<p id="p-0029" num="0028">Information Processing System</p>
<p id="p-0030" num="0029">Following is a description of configurations and technology common to various embodiments according to the present invention, with reference to <figref idref="DRAWINGS">FIGS. 1 to 13</figref>. <figref idref="DRAWINGS">FIG. 1</figref> is a block diagram that shows an example of an information processing system <b>10</b> according to the present invention. In the information processing system <b>10</b>, image forming apparatus <b>110</b> and <b>140</b>, a host computer <b>120</b>, and an information processing apparatus <b>130</b> are intercommunicably connected via a LAN (Local Area Network) <b>100</b>. The information processing system <b>10</b> can also be connected via the LAN <b>100</b> to a WAN (Wide Area Network) or the Internet.</p>
<p id="p-0031" num="0030">The host computer <b>120</b> includes a web browser, and can establish an HTTP connection with the image forming apparatus <b>110</b> or the information processing apparatus <b>130</b> to receive a provided service. For example, a PC (personal computer), a PDA (Personal Digital Assistant), a portable telephone, or the like can be applied as the host computer <b>120</b>.</p>
<p id="p-0032" num="0031">The information processing apparatus <b>130</b> has a software process group for realizing a web application server. A web server unit <b>131</b>, an application server unit <b>132</b>, and a data management unit <b>133</b> are provided as software modules in the information processing apparatus <b>130</b>. The web server unit <b>131</b> transmits content such as HTML in response to a request according to the HTTP protocol from a client. The application server unit <b>132</b> is implemented in the form of a CGI (Common Gateway Interface) program or a Servlet that performs predetermined processing and a dynamically changing HTTP response in response to an HTTP request. The data management unit <b>133</b> saves script data called from the application server unit <b>132</b>, stores received data, causes various data to be persistent, and so forth.</p>
<p id="p-0033" num="0032">The image forming apparatus <b>110</b> is an example of an MFP (Multi-Function Peripheral) that performs input/output and transmission/receipt of images, and various image processing. The image forming apparatus <b>110</b> includes a scanner <b>113</b> that is an image input device, a printer <b>114</b> that is an image output device, a controller <b>111</b>, and an operation unit <b>112</b> that is a user interface. The scanner <b>113</b>, the printer <b>114</b>, and the operation unit <b>112</b> are respectively connected to the controller <b>111</b>, and are controlled according to commands from the controller <b>111</b>. The controller <b>111</b> is connected to the LAN <b>100</b>. Also, the image forming apparatus <b>140</b> is capable of HTTP communications with the other apparatus <b>110</b>, <b>120</b>, and <b>130</b> via an internet <b>150</b>, and similar to the image forming apparatus <b>110</b>, includes a scanner <b>143</b>, a printer <b>144</b>, an operation unit <b>142</b>, and a controller <b>141</b>.</p>
<p id="p-0034" num="0033">Conventionally, an embedded application is implemented in an image forming apparatus, and by executing that embedded application, a print logic of the image forming apparatus such as PDL conversion is called and executed. However, with the conventional method in which the print logic is implemented by an embedded application, the print logic cannot easily be customized. Consequently, in an embodiment of the present invention, a push-type printing method is adopted in which for a print operation of document data (below, also referred to as image data) that has been performed by a web browser of the image forming apparatus <b>110</b>, PDL conversion is performed in the remote information processing apparatus <b>130</b>, and the image forming apparatus <b>110</b> is instructed to print as a remote request (for example, such as a request by IPP, web service, or LPR). With the push-printing method, it is possible for the embedded application that was implemented in the conventional image forming apparatus to be implemented as a web application of the information processing apparatus <b>130</b>. Thus, the ability to customize the print logic can be improved. However, with the push-type printing method, in some instances communication is not possible in an environment in which there is a firewall or a proxy. Consequently, in an embodiment of the present invention, a printing method is adopted in which PDL conversion is executed in the image forming apparatus, and a pull-type printing method is also adopted in which communication is possible even in an environment in which there is a firewall or a proxy. That is, in an embodiment of the present invention, an optimal printing method is selected and executed for each image forming apparatus.</p>
<p id="p-0035" num="0034">In the printing method as described above, the user uses the web browser of the image forming apparatus <b>110</b> to log into the application server unit <b>132</b> of the information processing apparatus <b>130</b>. Next, the user performs a print execution request to the application server unit <b>132</b> of the information processing apparatus <b>130</b> via a user interface displayed in the web browser. Then, the application server unit <b>132</b> performs a print request to a web service provider module <b>203</b> of the image forming apparatus <b>110</b>, described below. The web service provider module <b>203</b> of the image forming apparatus <b>110</b> executes printing according to the requested print instruction, via a print manager module <b>212</b> described later.</p>
<p id="p-0036" num="0035">Software Configuration of Image Forming Apparatus</p>
<p id="p-0037" num="0036">Next is a description of a software configuration of the image forming apparatus <b>110</b>, with reference to <figref idref="DRAWINGS">FIG. 2</figref>. <figref idref="DRAWINGS">FIG. 2</figref> is a block diagram that shows the software configuration of the image forming apparatus <b>110</b> according to the present invention. A user interface (below, referred to as a UI) module <b>201</b> is a module that performs intermediation between devices and user operation when a user performs various operations/settings of the image forming apparatus <b>110</b>. The UI module <b>201</b> performs transfer of input information to various modules described later, processing requests, data settings, and so forth according to operation by an operator.</p>
<p id="p-0038" num="0037">A web server module <b>202</b> performs an HTTP response of management information or the like of the image forming apparatus <b>110</b> to a web client (for example, the host computer <b>120</b>), in response to an HTTP request from the web client. Specifically, the web server module <b>202</b> performs an HTTP response to the web client via an HTTP module <b>205</b>, a TCP/IP communications module <b>206</b>, and a network driver <b>207</b>. The web browser module <b>204</b> reads and displays information of various web sites (homepages) on an internet or an intranet. The web browser module <b>204</b> establishes a connection with other network nodes and performs communications via the HTTP module <b>205</b>. In these communications, an HTTP request is issued for a resource described by a URL, and a response to that request is obtained. In the course of this request and response, encoding/decoding of communications data according to various encoding formats is also performed.</p>
<p id="p-0039" num="0038">The HTTP module <b>205</b> is used when the image forming apparatus <b>110</b> performs HTTP communications. The HTTP module <b>205</b> uses the TCP/IP communications module <b>206</b> to provide a communications function for the web server module <b>202</b>, the web browser module <b>204</b>, and the web service provider module <b>203</b>. Also, the HTTP module <b>205</b> is compatible with various protocols used on the web, such as HTTP, and in particular provides a communications function by a protocol compatible with security. The TCP/IP communications module <b>206</b> uses a network driver <b>207</b> to provide a network communications function for the various modules. The network driver <b>207</b> controls parts that are physically connected to the network.</p>
<p id="p-0040" num="0039">A control API <b>208</b> provides, to upstream modules such as the web server module <b>202</b>, an interface to downstream modules such as a job manager module <b>209</b>. Thus, upstream modules and downstream modules are less dependent on each other, and so they may respectively be used more flexibly. The job manager module <b>209</b> interprets various processing instructed via the control API <b>208</b> from the various modules, and gives instructions to modules <b>210</b>, <b>211</b>, <b>212</b>, and <b>213</b>. Also, the job manager module <b>209</b> performs central management of hardware processing executed within the image forming apparatus <b>110</b>.</p>
<p id="p-0041" num="0040">A codec manager module <b>210</b> manages/controls various compression/decompression of data during processing instructed by the job manager module <b>209</b>. An FBE encoder module <b>214</b> uses an FEE format to compress data that has been read by the job manager module <b>209</b> or a scanner manager module <b>211</b>. A JPEG codec module <b>215</b> performs JPEG compression/decompression processing of data that has been read by the job manager module <b>209</b>, the scanner manager module <b>211</b>, or the print manager module <b>212</b>. An MMR codec module <b>216</b> performs MMR compression/decompression processing of data that has been read by the job manager module <b>209</b>, the scanner manager module <b>211</b>, or the print manager module <b>212</b>.</p>
<p id="p-0042" num="0041">The scanner manager module <b>211</b> manages/controls scan processing instructed by the job manager module <b>209</b>. Communications between the scanner manager module <b>211</b> and the scanner <b>113</b>, which is internally connected to the image forming apparatus <b>110</b>, are performed via a SCSI driver <b>217</b>.</p>
<p id="p-0043" num="0042">The print manager module <b>212</b> manages/controls print processing instructed by the job manager module <b>209</b>. An interface between the print manager module <b>212</b> and the printer <b>114</b> is provided by an engine interface module <b>218</b>. A PDL manager module <b>213</b> performs PDL conversion of document data instructed by the job manager module <b>209</b>. Also, a parallel port driver <b>219</b> provides an interface when outputting data to an output device via a parallel port.</p>
<p id="p-0044" num="0043">Detailed Configuration of Controller</p>
<p id="p-0045" num="0044">Next is a description of the detailed configuration of the controller <b>111</b> in the image forming apparatus <b>110</b>, with reference to <figref idref="DRAWINGS">FIG. 3</figref>. <figref idref="DRAWINGS">FIG. 3</figref> is a block diagram that shows an example configuration of the controller <b>111</b> of the image forming apparatus <b>110</b> according to the present invention. The controller <b>111</b> is connected to the scanner <b>113</b> that is an image input device and the printer <b>114</b> that is an image output device, and in addition to controlling the scanner <b>113</b> and the printer <b>114</b>, is connected to the LAN or a public communications line, and performs input/output of image information and device information via the LAN or the public communications line. Therefore, the controller <b>111</b> is provided with a CPU <b>301</b>, a RAM <b>302</b>, an operation unit interface <b>306</b>, a network interface <b>308</b>, a modem <b>309</b>, a ROM <b>303</b>, an HDD (hard disk apparatus) <b>304</b>, an image bus interface <b>305</b>, a RIP (raster image processor) <b>311</b>, a device interface <b>312</b>, a scanner image processing unit <b>313</b>, a printer image processing unit <b>314</b>, an image rotation unit <b>315</b>, and an image compression unit <b>316</b>.</p>
<p id="p-0046" num="0045">The CPU <b>301</b> is connected to the RAM <b>302</b>, the ROM <b>303</b>, the HDD <b>304</b>, the image bus interface <b>305</b>, the operation unit interface <b>306</b>, the network interface <b>308</b>, and the modem <b>309</b>, via a system bus <b>307</b>. The RAM <b>302</b> is a memory for providing a work area for the CPU <b>301</b>, and is also used as an image memory for temporarily storing image data. The ROM <b>303</b> is a boot ROM, and stores a system boot program. System software, image data, and so forth are stored on the HDD <b>304</b>.</p>
<p id="p-0047" num="0046">The operation unit interface <b>306</b> is an interface for performing input/output between the controller <b>111</b> and the operation unit <b>112</b>. The operation unit interface <b>306</b> outputs image data to be displayed in the operation unit <b>112</b> to the operation unit <b>112</b>, and transmits information that a user has input via the operation unit <b>112</b> to the CPU <b>301</b>. The network interface <b>308</b> is connected to the LAN <b>100</b>, and performs input/output of information from/to the LAN <b>100</b>. The modem <b>309</b> is connected to a public communication line, and performs input/output of information from/to the public communications line. The image bus interface <b>305</b> is a bus bridge that is connected to the system bus <b>307</b> and an image bus <b>310</b> that performs high-speed transfer of image data, and performs data structure conversion.</p>
<p id="p-0048" num="0047">The RIP <b>311</b>, the device interface <b>312</b>, the scanner image processing unit <b>313</b>, the printer image processing unit <b>314</b>, the image rotation unit <b>315</b>, and the image compression unit <b>316</b> are connected to the image bus <b>310</b>. The RIP <b>311</b> converts PDL code received via the LAN <b>100</b> or the Internet into a bitmap image. The device interface <b>312</b> connects the controller <b>111</b> to the scanner <b>113</b> and the printer <b>114</b>, and performs synchronous system/asynchronous system conversion of image data. The scanner image processing unit <b>313</b> performs correction, processing, editing, and so forth of input image data. The printer image processing unit <b>314</b> performs printer correction, resolution conversion, and so forth of print output image data. The image rotation unit <b>315</b> performs rotation of image data. The image compression unit <b>316</b> performs JPEG compression/decompression processing of multilevel image data, and performs compression/decompression processing such as JBIG, MMR, or MH processing of bi-level image data.</p>
<p id="p-0049" num="0048">In addition to the configuration shown in <figref idref="DRAWINGS">FIG. 3</figref>, the controller <b>111</b> also includes an event processing unit and a script interpreter. The event processing unit receives events of operation by the user of a touch panel sheet, keys, and so forth on the operation unit <b>112</b>, and performs processing corresponding to the respective events. Also, the event processing unit receives status change events of apparatus, jobs, or the like from the control API <b>208</b>, and performs processing corresponding to the respective events. The script interpreter is an interpreter that interprets and executes scripts written in Java (registered trademark) Script (an ECMA Script) or the like. Such scripts are embedded in a document, or written in a separate file linked from a document. A content provider can use a script to program dynamic behavior of a provided document.</p>
<p id="p-0050" num="0049">Configuration of Operation Unit <b>112</b></p>
<p id="p-0051" num="0050">Next is a description of the configuration of the operation unit <b>112</b>, with reference to <figref idref="DRAWINGS">FIG. 4</figref>. <figref idref="DRAWINGS">FIG. 4</figref> is a block diagram that shows an example configuration of the operation unit <b>112</b> of the image forming apparatus <b>110</b> according to the present invention. The operation unit <b>112</b> is connected to the system bus <b>307</b> via the operation unit interface <b>306</b>. As described above, the CPU <b>301</b>, the RAM <b>302</b>, the ROM <b>303</b>, the HDD <b>304</b>, and so forth are connected to the system bus <b>307</b>. As shown in <figref idref="DRAWINGS">FIG. 4</figref>, the operation unit <b>112</b> includes an LCD display unit <b>501</b> that outputs display screens, a touch panel <b>502</b>, keys <b>503</b> including various hard keys, and an LED display unit <b>506</b>.</p>
<p id="p-0052" num="0051">The operation unit interface <b>306</b> has an input port <b>601</b> for controlling input from a user, and an output port <b>602</b> for controlling a screen output device. The input port <b>601</b> transfers user input from the touch panel <b>502</b> and the keys <b>503</b> to the CPU <b>301</b>. The CPU <b>301</b> generates display screen data based on the content of the user input and a control program, and outputs display screens to the LCD display unit <b>501</b> via the output port <b>602</b>. Also, the CPU <b>301</b> controls the LED display unit <b>506</b> as necessary via the output port <b>602</b>.</p>
<p id="p-0053" num="0052">HTTP Protocol</p>
<p id="p-0054" num="0053">Next is a description of request and a response flow according to an HTTP protocol, with reference to <figref idref="DRAWINGS">FIG. 5</figref>. <figref idref="DRAWINGS">FIG. 5</figref> is a sequence diagram that shows the flow of request processing and response processing according to the HTTP protocol. Here, a client <b>701</b> is software that transmits an HTTP request and receives an HTTP response. For example, the client <b>701</b> corresponds to the web browser of the image forming apparatus <b>110</b>, or an ordinary web browser that operates in the host computer <b>120</b>. A server <b>702</b> is software that receives the HTTP request and performs corresponding processing, and transmits back the HTTP response. For example, the server <b>702</b> corresponds to the information processing apparatus <b>130</b> or the web server module <b>202</b> of the image forming apparatus <b>110</b>.</p>
<p id="p-0055" num="0054">The client <b>701</b> transmits the HTTP request by either a GET method or a POST method. Here, when the client <b>701</b> transmits an HTTP request <b>703</b> for a desired resource to the server <b>702</b> by a GET method, the resource is ordinarily designated according to URI format (specifically, URL format). The server <b>702</b> acquires or generates data corresponding to the resource designated by the HTTP request <b>703</b>, and transmits back that data in an HTTP response <b>704</b>. Pull-type printing is an example of a printing method employing this sort of GET method.</p>
<p id="p-0056" num="0055">Next is a description of transmission of an HTTP request by a POST method. When a form is included in an HTML document, and a POST method is designated as the transmission method for the document, the following sort of processing is performed. First, information that has been input by a user via a form displayed by a web browser of the client <b>701</b> is encoded. The encoded information, that is, the input content of the form, is transmitted to the server <b>702</b> by a POST method as an attachment to an HTTP request <b>705</b>. In the server <b>702</b>, the designated resource receives and processes the data sent from the client <b>701</b>, generates an HTTP response <b>706</b>, and transmits the HTTP response <b>706</b> back to the client <b>701</b>. Push-type printing is an example of a printing method employing this sort of POST method.</p>
<p id="p-0057" num="0056">Browser Screen</p>
<p id="p-0058" num="0057">Next is a description of the configuration of a web browser screen displayed by the UI module <b>201</b> of the image forming apparatus <b>110</b>, with reference to <figref idref="DRAWINGS">FIG. 6</figref>. <figref idref="DRAWINGS">FIG. 6</figref> shows an example of a browser screen <b>800</b> according to the present invention. The display in the browser screen <b>800</b> includes a URL input field <b>807</b>, an OK button <b>808</b>, a progress bar <b>806</b>, a content display area <b>801</b>, a back button <b>802</b>, a forward button <b>803</b>, a reload button <b>805</b>, and a stop button <b>804</b>.</p>
<p id="p-0059" num="0058">The URL input field <b>807</b> is a field where a user inputs a URL of a desired resource, and when the user presses this field, a virtual full keyboard for performing character input is displayed. The user can input a desired character string using soft keys depicting key tops arranged on the virtual full keyboard. The OK button <b>808</b> is a soft key that confirms the URL character string that was input. When the URL is confirmed, the web browser module <b>204</b> issues an HTTP request for acquiring the resource. The progress bar <b>806</b> indicates the progress status of content acquisition processing according to the response to the HTTP request. The content display area <b>801</b> is an area where an acquired resource is displayed. The back button <b>802</b> is a soft key for going backward in the history of the display content and re-displaying content that was displayed prior to the content presently being displayed. The forward button <b>803</b> is a soft key for, when display is being performed by going backward in the history of the display content, displaying content that was displayed in the previous instance after the content presently being displayed. The reload button <b>805</b> again acquires and displays the content that is presently being displayed. The stop button <b>804</b> is a soft key that stops content acquisition processing that is presently being executed. The browser screen may also include a status area where messages from various functions of the image forming apparatus <b>110</b> are displayed. In this status area, it is possible to display messages prompting the attention of the user from the scanner, the printer, other functions, and so forth even while displaying the browser screen <b>800</b>. It is likewise possible to display messages from the web browser. The web browser function displays a character string of a link location URL, a character string of a content title, a message designated by a script, and so forth.</p>
<p id="p-0060" num="0059">Pull-Type Print Screen</p>
<p id="p-0061" num="0060">Next is a description of a print screen displayed when pull-type printing is selected, with reference to <figref idref="DRAWINGS">FIGS. 7</figref>, <b>8</b>, and <b>10</b>. <figref idref="DRAWINGS">FIGS. 7 and 8</figref> show an example of the print screen displayed when pull-type printing is selected according to the present invention. As shown in <figref idref="DRAWINGS">FIG. 7</figref>, when pull-type printing is selected, a document data selection area <b>809</b> is displayed in a content display area <b>801</b> of the browser screen <b>800</b>. HTML data displayed in the document data selection area <b>809</b> is shown in <figref idref="DRAWINGS">FIG. 10</figref>. Here, pull-type printing (a second method) indicates a printing method in which image data to be printed is transmitted from an information processing apparatus to an image forming apparatus, and image processing prior to printing is executed in the image forming apparatus. Image processing prior to printing refers to processing such as PDL conversion performed on image data, and processing in which image data is converted to print data in a print format.</p>
<p id="p-0062" num="0061">In pull-type printing, document data is downloaded from the information processing apparatus <b>130</b>, and a print instruction is performed in the image forming apparatus <b>110</b>, so the HTML configuration is such that the user is caused to perform a GET request for the document data. Also, in pull-type printing, because the document data is downloaded using a GET request, the document data is displayed as a hyperlink <b>810</b>. When the user presses the hyperlink <b>810</b>, downloading of the document data is started. When downloading is completed, a print dialogue <b>812</b> is displayed in the content display area <b>801</b>, as shown in <figref idref="DRAWINGS">FIG. 8</figref>. A print instruction button <b>813</b>, a BOX save button <b>814</b> that saves the downloaded document in the data management unit <b>133</b> of the image forming apparatus <b>110</b>, and a cancel button <b>815</b> for cancelling printing are displayed in the print dialogue <b>812</b>.</p>
<p id="p-0063" num="0062">Push-Type Print Screen</p>
<p id="p-0064" num="0063">Next is a description of a print screen displayed when push-type printing is selected, with reference to <figref idref="DRAWINGS">FIGS. 9 and 11</figref>. <figref idref="DRAWINGS">FIG. 9</figref> shows an example of the print screen displayed when push-type printing is selected according to the present invention. An IPP, an LPR, web services, and the like are examples of the method for making a remote request in push-type printing, but in the following description a web service is used for the remote request. Note that the same sort of processing can be performed also in the case of an IPP or an LPR.</p>
<p id="p-0065" num="0064">As shown in <figref idref="DRAWINGS">FIG. 9</figref>, when push-type printing is selected, a document data selection area <b>816</b> is displayed in the content display area <b>801</b> of the browser screen <b>800</b>. A check box <b>817</b>, document data <b>818</b>, and a print instruction button <b>819</b> are displayed in the document data selection area <b>816</b>. HTML data displayed in the document data selection area <b>816</b> is shown in <figref idref="DRAWINGS">FIG. 11</figref>. Here, push-type printing (a first method) indicates a printing method in which image processing prior to printing is executed on image data in an information processing apparatus, and that image data (print data) is transmitted to an image processing apparatus.</p>
<p id="p-0066" num="0065">In push-type printing, a user selects document data to be printed from within the check box <b>817</b> of the document data selection area <b>816</b> displayed by the web browser of the image forming apparatus <b>110</b>. Next, when the user presses the print instruction button <b>819</b>, the web browser performs a POST request to the web server unit <b>131</b> of the information processing apparatus <b>130</b>. Furthermore, processing is executed according to the content of the POST request by a business logic unit <b>903</b> (described later) of the information processing apparatus <b>130</b>. Next, a remote request is performed from the business logic unit <b>903</b> to the web service provider module <b>203</b> of the image forming apparatus <b>110</b> via a web service request unit <b>901</b>, described later. In response to the remote request from the information processing apparatus <b>130</b>, the web service provider module <b>203</b> executes printing by the printer <b>114</b> via the job manager module <b>209</b> and the print manager module <b>212</b>.</p>
<p id="p-0067" num="0066">Detailed Configuration of Information Processing Apparatus <b>130</b></p>
<p id="p-0068" num="0067">Next is a description of the detailed configuration of the information processing apparatus <b>130</b>, with reference to <figref idref="DRAWINGS">FIG. 12</figref>. <figref idref="DRAWINGS">FIG. 12</figref> is a block diagram that shows the detailed configuration of the information processing apparatus <b>130</b> according to the present invention. As shown in <figref idref="DRAWINGS">FIG. 12</figref>, the application server unit <b>132</b> includes the web service request unit <b>901</b>, a script engine unit <b>902</b>, and the business logic unit <b>903</b>. The data management unit <b>133</b> includes a program management area <b>904</b>, a data storage area <b>905</b>, and a table management area <b>906</b>.</p>
<p id="p-0069" num="0068">The business logic unit <b>903</b> is called from the web server unit <b>131</b> and executes processing in response to an HTTP request. As a result of processing, the business logic unit <b>903</b> returns dynamically generated HTML to the web server unit <b>131</b>. The script engine unit <b>902</b> is called from the business logic unit <b>903</b>, and reads a script (program execution description) from the program management area <b>904</b> described below and returns the script to the business logic unit <b>903</b>. Afterward, the business logic unit <b>903</b> sequentially executes the script read by the script engine unit <b>902</b>. The web service request unit <b>901</b> is called from the business logic unit <b>903</b>, and for example, issues a call for a web service to the external web service provider module <b>203</b>.</p>
<p id="p-0070" num="0069">The program management area <b>904</b> manages various scripts and programs called from scripts. Data in the program management area <b>904</b> can be added to or changed by a plug-in mechanism. With this plug-in mechanism, it is possible to customize functions of the information processing apparatus <b>130</b>. The data storage area <b>905</b> is an area where data of documents and the like is stored. The table management area <b>906</b> is an area where a table is stored in which information associating a printing method (pull-type printing or push-type printing) with the image forming apparatus <b>110</b> has been saved.</p>
<p id="p-0071" num="0070">Table in Table Management Area</p>
<p id="p-0072" num="0071">Next is a description of a table <b>907</b> saved in the table management area <b>906</b> of the data management unit <b>133</b> in the information processing apparatus <b>130</b>, with reference to <figref idref="DRAWINGS">FIG. 13</figref>. <figref idref="DRAWINGS">FIG. 13</figref> shows an example of the table <b>907</b> that has been stored in the table management area <b>906</b> according to the present invention. The table <b>907</b> is a data table for relating a printing method with an IP address of each image forming apparatus, the IP address serving as identification information. The information processing apparatus <b>130</b> refers to the table <b>907</b> of the table management area <b>906</b> to select which printing method to provide to an image forming apparatus that has been accessed. The table <b>907</b> may also be updated by the business logic unit <b>903</b> via the table management area <b>906</b>.</p>
<heading id="h-0006" level="1">First Embodiment</heading>
<p id="p-0073" num="0072">Next is a description of a first embodiment according to the present invention, with reference to <figref idref="DRAWINGS">FIGS. 14A and 14B</figref>. <figref idref="DRAWINGS">FIGS. 14A and 14B</figref> are a flowchart that shows a processing procedure of print processing according to the first embodiment. In the below description, the numbers following S indicate step numbers of the respective processing. Also, the processing described below is executed by the image forming apparatus <b>110</b> and the information processing apparatus <b>130</b>. Specifically, processing performed by the image forming apparatus <b>110</b> is shown on the left side of the dotted line in <figref idref="DRAWINGS">FIGS. 14A and 14B</figref>, and processing performed by the information processing apparatus <b>130</b> is shown on the right side of the dotted line.</p>
<p id="p-0074" num="0073">In S<b>1001</b>, the CPU <b>301</b> selects the web browser based on information input by a user via the operation unit <b>112</b>. Further, in S<b>1002</b>, the CPU <b>301</b> inputs a print screen URL based on the information input by the user via the operation unit <b>112</b>. Next, in S<b>1003</b>, the web browser module <b>204</b> transmits a print screen GET request to the web server unit <b>131</b> of the information processing apparatus <b>130</b> via the HTTP module <b>205</b>. Here, the web browser module <b>204</b> attaches an IP address, serving as identification information, of the image forming apparatus <b>110</b> to a header (request information) of the transmitted GET request.</p>
<p id="p-0075" num="0074">Next, in S<b>1004</b>, the web server unit <b>131</b> receives the print screen GET request from the web browser module <b>204</b>. In S<b>1005</b>, the application server unit <b>132</b> analyzes the header of the GET request from the web browser module <b>204</b>, and acquires the IP address of the image forming apparatus <b>110</b>. Once the IP address is acquired, in S<b>1006</b>, the application server unit <b>132</b> refers in the data management unit <b>133</b> to the table <b>907</b>, in which the IP address of the image forming apparatus <b>110</b> is associated with a printing method, to select the printing method to be provided for the image forming apparatus <b>110</b>. Then, in S<b>1007</b>, the application server unit <b>132</b> determines whether or not the printing method selected in S<b>1006</b> is push-type printing. When the selected printing method is not push-type printing, that is, when the selected printing method is pull-type printing, processing advances to S<b>1008</b>, and when the selected printing method is push-type printing, processing advances to S<b>1017</b>.</p>
<p id="p-0076" num="0075">When pull-type printing has been selected, in S<b>1008</b>, the application server unit <b>132</b> generates HTML data for the pull-type document data selection area <b>809</b>. Further, in S<b>1009</b>, the web server unit <b>131</b> transmits the HTML data of the browser screen <b>800</b> including the document data selection area <b>809</b> to the image forming apparatus <b>110</b> as a GET response. On the other hand, in S<b>1010</b>, based on the received HTML data, the CPU <b>301</b> displays the browser screen <b>800</b> including the document data selection area <b>809</b> in the LCD display unit <b>501</b>. Next, in S<b>1011</b>, the CPU <b>301</b> transmits the document data GET request to the web server unit <b>131</b> via the HTTP module <b>205</b>, according to the user's selection of document data by pressing the hyperlink <b>810</b>.</p>
<p id="p-0077" num="0076">Once the document data GET request is received, in S<b>1012</b>, the application server unit <b>132</b> reads that document data from the data storage area <b>905</b>, and transmits a GET response to the image forming apparatus <b>110</b> via the web server unit <b>131</b>. In S<b>1013</b>, the CPU <b>301</b> receives the document data transmitted in the response from the web server unit <b>131</b>, and temporarily saves the received document data in the RAM <b>302</b>. Further, the CPU <b>301</b> displays the browser screen <b>800</b> including the print dialogue <b>812</b> in the LCD display unit <b>501</b>. Next, in S<b>1014</b>, the CPU <b>301</b> performs PDL conversion of the document data, thus converting the document data to print data. Here, print data refers to data on which image processing prior to printing has been executed. For example, this is data that has been converted to bitmap data by the RIP <b>311</b>, and thus is in a format printable by the printer <b>114</b>. Also, when the user presses the print instruction button <b>813</b> of the print dialogue <b>812</b>, in S<b>1015</b>, the CPU <b>301</b> instructs the printer <b>114</b> to print. Here, the CPU <b>301</b> not only gives a print instruction, but also saves the document data to the HDD <b>304</b>. Then, in S<b>1016</b>, the printer <b>114</b> executes printing according to the print data. When printing is completed, the printer <b>114</b> informs the CPU <b>301</b> that printing is completed.</p>
<p id="p-0078" num="0077">When a determination is made that push-type printing has been selected in S<b>1007</b>, in S<b>1017</b>, the application server unit <b>132</b> generates the push-type document data selection area <b>816</b>. Further, in S<b>1018</b>, the web server unit <b>131</b> transmits the browser screen <b>800</b> including the document data selection area <b>816</b> to the image forming apparatus <b>110</b> as a GET response. On the other hand, in S<b>1019</b>, the CPU <b>301</b> displays the browser screen <b>800</b> including the received document data selection area <b>816</b> in the LCD display unit <b>501</b>. Next, in S<b>1020</b>, the CPU <b>301</b> selects at least one item of document data based on information input by the user via the check box <b>817</b>, and detects pressing of the print instruction button <b>819</b> by the user. Here, the user can select a plurality of check boxes <b>817</b>. When the print instruction button <b>819</b> is pressed, in S<b>1021</b>, the CPU <b>301</b> transmits a POST request to the web server unit <b>131</b> based on the selected document data and the print instruction content (print information).</p>
<p id="p-0079" num="0078">When the POST request is received, in S<b>1022</b>, the application server unit <b>132</b> reads at least one item of document data that has been selected by the user from the data management unit <b>133</b>, and executes PDL conversion by the business logic unit <b>903</b>. Next, in S<b>1023</b>, the application server unit <b>132</b> instructs the web service provider module <b>203</b> of the image forming apparatus <b>110</b> to print the print data by an LPR, a web service, an IPP, or the like via the web service request unit <b>901</b>. When the print instruction is received, in S<b>1016</b>, the CPU <b>301</b> performs printing by the printer <b>114</b> via the job manager module <b>209</b> and the print manager module <b>212</b> according to the requested print instruction, by the web service provider module <b>203</b>.</p>
<p id="p-0080" num="0079">As described above, in the information processing apparatus according to the present embodiment, when a request from a web browser of an image forming apparatus has been received, the information processing apparatus selects push-type printing in which image data is transmitted to the web browser as a response to the request from the web browser, or pull-type printing in which image data is transmitted as a new request without employing the web browser. The information processing apparatus generates a print screen based on the selected printing method, and transmits the print screen to the image forming apparatus. Also, the information processing apparatus, based on information that has been input via the transmitted print screen, in the case of push-type printing, transmits print data on which image processing prior to printing has been executed, and in the case of pull-type printing, transmits image data in its present format without image processing prior to printing being performed on the image data. Thus, with this information processing apparatus, by selecting an appropriate printing method for each image forming apparatus, it is possible to effectively allow the image forming apparatus to have the advantages of the respective printing methods. For example, in this information processing apparatus, push-type printing is selected for an image forming apparatus that is capable of push-type printing, and pull-type printing is selected for an image forming apparatus that is not capable of push-type printing. Thus, print processing that is cooperatively executed by an image forming apparatus and the information processing apparatus can be realized with all of the image forming apparatus. Also, in the case of push-type printing, image processing prior to printing is executed by the information processing apparatus. Accordingly, in the case of push-type printing, it is acceptable to only customize the print logic of the information processing apparatus, and not customize the print logic of individual image forming apparatus, so the degree of customizability can be improved.</p>
<p id="p-0081" num="0080">The present invention is not limited to the above embodiment; various modifications are possible. For example, in this information processing apparatus, a table in which IP addresses serving as identification information are associated with printing methods may be stored in advance in a memory or the like. In this case, in the information processing apparatus, a printing method may be selected by referring to the printing method in the table corresponding to the acquired IP address. By thus providing the table, it is possible to easily execute printing method selection.</p>
<heading id="h-0007" level="1">Second Embodiment</heading>
<p id="p-0082" num="0081">Next is a description of a second embodiment according to the present invention, with reference to <figref idref="DRAWINGS">FIG. 15</figref>. In the second embodiment, the configuration of the information processing system <b>10</b> and the configuration of each apparatus included in the information processing system <b>10</b> are the same as in the first embodiment, so a description thereof is omitted here. <figref idref="DRAWINGS">FIG. 15</figref> is a flowchart that shows a processing procedure of print processing according to the second embodiment. In the below description, the numbers following S indicate step numbers of the respective processing. Also, the processing described below is executed by the information processing apparatus <b>130</b>.</p>
<p id="p-0083" num="0082">In the first embodiment, a description is given of processing when information in which the IP address of each of the image forming apparatus included in the information processing system <b>10</b> is associated with a printing method has been saved in the table <b>907</b> of the information processing apparatus <b>130</b>. However, in the second embodiment, it is assumed that of the information in which the IP address of each of the connected image forming apparatus included in the information processing system <b>10</b> is associated with a printing method, only part of that information has been saved in the table <b>907</b>.</p>
<p id="p-0084" num="0083">Accordingly, in the information processing apparatus <b>130</b> according to the second embodiment, with respect to an IP address that has not been defined in the table <b>907</b>, that image forming apparatus IP address is automatically associated with a printing method. Also, it is assumed that the basis for selecting a printing method depends on the network environment of the image forming apparatus, or the advantages the image forming apparatus is desired to have. Also, in the second embodiment a determination is made of whether or not push-type printing is possible, in order to avoid the problem that with pull-type printing, the image forming apparatus can only print document data that the PDL manager module of the image forming apparatus can process. When push-type printing is possible in the image forming apparatus, push-type printing is always executed, and when push-type printing is not possible, pull-type printing is executed.</p>
<p id="p-0085" num="0084">The determination of whether or not push-type printing is possible is only performed when there is a first print screen request from an image forming apparatus. Furthermore, the information processing apparatus <b>130</b>, according to the results of that determination, updates the association information of image forming apparatus IP addresses and printing methods (selection information) in the table <b>907</b>, and from the next time the table <b>907</b> is referred to when making the determination. Push-type printing is possible when the print instruction from the information processing apparatus <b>130</b> is not blocked by a firewall, a proxy, or the like and therefore can arrive at the image forming apparatus. For example, a method employing an IPP, a method employing a web service, and a method employing an LPR are conceivable as methods for instructing push-type printing from the information processing apparatus <b>130</b> to an image forming apparatus. The processing described below is performed instead of the processing in S<b>1006</b> in the flowchart in <figref idref="DRAWINGS">FIGS. 14A and 14B</figref>. Therefore, in the second embodiment, the processing of S<b>1001</b> to S<b>1005</b> and S<b>1007</b> to S<b>1023</b> is the same as in the first embodiment, so a description thereof is omitted here.</p>
<p id="p-0086" num="0085">In S<b>2001</b>, the web server unit <b>131</b> transmits a HEAD command by the business logic unit <b>903</b> to the web server module <b>202</b> of the image forming apparatus <b>110</b> in order to determine whether or not a print instruction by IPP is possible. Here, among a plurality of existing ports for transmitting HEAD commands to the web server module <b>202</b>, the HEAD command is transmitted using a port <b>80</b>. Afterward, in S<b>2002</b>, the application server unit <b>132</b> determines whether or not a HEAD response has been received from the web server module <b>202</b>. Here, when a HEAD response has been received the processing advances to S<b>2010</b>, and when a HEAD response has not been received the processing advances to S<b>2003</b>.</p>
<p id="p-0087" num="0086">In S<b>2010</b>, the application server unit <b>132</b> selects push-type printing as the printing method. Then, in S<b>2011</b>, the application server unit <b>132</b> associates the IP address of the image forming apparatus <b>110</b> with the printing method, and saves this information in the table <b>907</b> stored in the table management area <b>906</b> via the application server unit <b>132</b>.</p>
<p id="p-0088" num="0087">On the other hand, in S<b>2003</b> to S<b>2006</b>, the application server unit <b>132</b>, using the business logic unit <b>903</b>, sequentially transmits HEAD commands to all of the above plurality of ports, and determines whether or not a HEAD response has been received. Here, when a HEAD command has been received as a result of transmitting a HEAD command to any port, processing advances to S<b>2010</b>, push-type printing is selected, and then in S<b>2011</b> the table <b>907</b> is updated. On the other hand, when a HEAD response has not been received at any port, processing advances to S<b>2007</b>.</p>
<p id="p-0089" num="0088">In S<b>2007</b>, the web server unit <b>131</b> transmits a SYN by the business logic unit <b>903</b> to a port <b>9100</b>, which is an LPR port of the web server module <b>202</b>, in order to determine whether or not a print instruction by LPR is possible. Then, in S<b>2008</b>, the application server unit <b>132</b> determines whether or not an ACK response has been received for the transmitted SYN. If an ACK response has been received, processing advances to S<b>2010</b>, push-type printing is selected, and then in S<b>2011</b> the table <b>907</b> is updated. On the other hand, if an ACK response has not been received, processing advances to S<b>2009</b>.</p>
<p id="p-0090" num="0089">In S<b>2009</b>, the application server unit <b>132</b> selects pull-type printing as the printing method of the image forming apparatus <b>110</b>. Then, processing advances to S<b>2011</b> and the table <b>907</b> is updated. However, if the selection result is already saved in the table <b>907</b>, the selection result is not saved again.</p>
<p id="p-0091" num="0090">As described above, in the information processing apparatus according to the second embodiment, when selecting a printing method, a determination is made of whether or not printing is possible by any among printing by IPP, printing by web service, and printing by LPR, and push-type printing is selected if possible. On the other hand, the information processing apparatus selects pull-type printing if none of those printing methods is possible. Thus, it is possible to select a printing method appropriate for that image forming apparatus even when information of a printing method for that image forming apparatus has not been defined in the table <b>907</b>. Also, in the information processing apparatus, by updating the result of the determination in the table <b>907</b>, from the next time it is possible to easily select a printing method without making a determination for that image forming apparatus.</p>
<heading id="h-0008" level="1">Third Embodiment</heading>
<p id="p-0092" num="0091">Next is a description of a third embodiment, with reference to <figref idref="DRAWINGS">FIG. 16</figref>. In the third embodiment, the configuration of the information processing system <b>10</b> and the configuration of each apparatus included in the information processing system <b>10</b> are the same as in the first embodiment, so a description thereof is omitted here. <figref idref="DRAWINGS">FIG. 16</figref> is a flowchart that shows a processing procedure of print processing according to the third embodiment. In the below description, the numbers following S indicate step numbers of the respective processing. Also, the processing described below is executed by the information processing apparatus <b>130</b>. The processing described below is performed instead of the processing in S<b>1008</b> in the flowchart in <figref idref="DRAWINGS">FIGS. 14A and 14B</figref>. Therefore, in the third embodiment, the processing of S<b>1001</b> to S<b>1007</b> and S<b>1009</b> to S<b>1023</b> is the same as in the first embodiment, so a description thereof is omitted here.</p>
<p id="p-0093" num="0092">In S<b>1008</b>, the print screen when pull-type printing is selected is generated. In this print screen, document data that has been saved in the data management unit <b>133</b> is displayed as document data that can be downloaded. However, in the image forming apparatus <b>110</b>, only document data in a format that can be processed by the PDL manager module <b>213</b> (for example, a format for which PDL conversion is possible) can be printed. Consequently, in the third embodiment, only document data in a format for which PDL conversion by the PDL manager module <b>213</b> of the image forming apparatus <b>110</b> is possible is displayed as a downloadable hyperlink. Accordingly, in the third embodiment, in S<b>1003</b> in the flowchart in <figref idref="DRAWINGS">FIGS. 14A and 14B</figref>, the image forming apparatus <b>110</b> transmits the GET request after embedding format information of document data that can be converted by the RIP <b>311</b> of the image forming apparatus <b>110</b> in the GET request header.</p>
<p id="p-0094" num="0093">In S<b>3001</b>, the application server unit <b>132</b> reads all of the document data to be printed from the data management unit <b>133</b>. Then, in S<b>3002</b>, the application server unit <b>132</b> analyzes the header of the GET request from the HTTP module <b>205</b> of the image forming apparatus <b>110</b> to the web server unit <b>131</b>. Further, the application server unit <b>132</b> reads the format of document data that can be converted by the codec manager module <b>210</b> of the image forming apparatus <b>110</b>.</p>
<p id="p-0095" num="0094">Next, in S<b>3003</b> to S<b>3007</b>, the application server unit <b>132</b>, with respect to all of the document data to be printed, determines whether or not to display a hyperlink (perform a selectable display), and generates HTML code. Specifically, in S<b>3004</b>, the application server unit <b>132</b> determines whether or not document data to be printed is in a format for which PDL conversion by the PDL manager module <b>213</b> of the image forming apparatus <b>110</b> is possible. Here, when the document data to be printed is in a PDL-convertible format, processing proceeds to S<b>3005</b>, and the application server unit <b>132</b> generates a hyperlink to that document data. On the other hand, when the document data to be printed is not in a PDL-convertible format, processing proceeds to S<b>3006</b>, and the application server unit <b>132</b> generates ordinary text. These processing steps are performed with respect to all documents to be printed.</p>
<p id="p-0096" num="0095">As described above, in an image forming apparatus according to the third embodiment, information about a format that can be processed by this apparatus may be added to print screen request information. Thus, when pull-type printing has been selected, according to the format information, the information processing apparatus can generate a print screen that selectably displays only image data that can be processed by that image forming apparatus. Thus, it is possible to easily select only image data that can be printed by the image forming apparatus being operated by the user, and so it is possible to provide a user-friendly operating system.</p>
<heading id="h-0009" level="1">Other Embodiments</heading>
<p id="p-0097" num="0096">Aspects of the present invention can also be realized by a computer of a system or apparatus (or devices such as a CPU or MPU) that reads out and executes a program recorded on a memory device to perform the functions of the above-described embodiment(s), and by a method, the steps of which are performed by a computer of a system or apparatus by, for example, reading out and executing a program recorded on a memory device to perform the functions of the above-described embodiment(s). For this purpose, the program is provided to the computer for example via a network or from a recording medium of various types serving as the memory device (for example, computer-readable medium).</p>
<p id="p-0098" num="0097">While the present invention has been described with reference to exemplary embodiments, it is to be understood that the invention is not limited to the disclosed exemplary embodiments. The scope of the following claims is to be accorded the broadest interpretation so as to encompass all such modifications and equivalent structures and functions.</p>
<p id="p-0099" num="0098">This application claims the benefit of Japanese Patent Application No. 2009-182892 filed on Aug. 5, 2009, which is hereby incorporated by reference herein in its entirety.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. An information processing apparatus that is capable of communicating with an image forming apparatus having a web browser, the information processing apparatus comprising:
<claim-text>a selection unit configured to select a first method or a second method based on identification information of the image forming apparatus, wherein image data is transmitted to the web browser as a response to a request from the web browser in the first method, and the image data is transmitted as a new request without employing the web browser in the second method; and</claim-text>
<claim-text>a transmission unit configured to transmit the image data to the image forming apparatus according to the selection by the selection unit.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The information processing apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>a generation unit configured to generate an operation screen according to the selection by the selection unit; and</claim-text>
<claim-text>a response unit configured to transmit the generated operation screen to the web browser.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The information processing apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>a storage unit configured to store a database in which identification information of each image forming apparatus is associated with the first method or the second method;</claim-text>
<claim-text>wherein the selection unit uses the identification information included in the request and the database to select the first method or the second method.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The information processing apparatus according to <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein the identification information of the image forming apparatus is an IP address of the image forming apparatus.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The information processing apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the image data is transmitted to the web browser as a response to a POST request from the web browser in the first method.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The information processing apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the image data is transmitted to the web browser as a web service request in the second method.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. A method for controlling an information processing apparatus that is capable of communicating with an image forming apparatus having a web browser, the method comprising:
<claim-text>selecting a first method or a second method based on identification information of the image forming apparatus, wherein image data is transmitted to the web browser as a response to the request from the web browser in the first method, and the image data is transmitted as a new request without employing the web browser in the second method; and</claim-text>
<claim-text>transmitting the image data to the image forming apparatus according to the selected method.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. A non-transitory computer-readable storage medium storing a computer program that causes a computer to execute the method for controlling an information processing apparatus according to <claim-ref idref="CLM-00007">claim 7</claim-ref>.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The method according to <claim-ref idref="CLM-00007">claim 7</claim-ref>, further comprising:
<claim-text>generating an operation screen according to the selection; and</claim-text>
<claim-text>transmitting the generated operation screen to the web browser.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The method according to <claim-ref idref="CLM-00007">claim 7</claim-ref>, further comprising:
<claim-text>storing a database in which identification information of each image forming apparatus is associated with the first method or the second method;</claim-text>
<claim-text>wherein, in the selection, the identification information included in the request and the database are used to select the first method or the second method.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The method according to <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the identification information of the image forming apparatus is an IP address of the image forming apparatus.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The method according to <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the image data is transmitted to the web browser as a response to a POST request from the web browser in the first method.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The method according to <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the image data is transmitted to the web browser as a web service request in the second method. </claim-text>
</claim>
</claims>
</us-patent-grant>
