<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625156-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625156</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12604549</doc-number>
<date>20091023</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2008-274864</doc-number>
<date>20081024</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>1111</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>N</subclass>
<main-group>1</main-group>
<subgroup>60</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>N</subclass>
<main-group>1</main-group>
<subgroup>58</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>N</subclass>
<main-group>1</main-group>
<subgroup>56</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>N</subclass>
<main-group>1</main-group>
<subgroup>50</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>3</main-group>
<subgroup>12</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>N</subclass>
<main-group>1</main-group>
<subgroup>405</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>K</subclass>
<main-group>15</main-group>
<subgroup>02</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>03</class>
<subclass>F</subclass>
<main-group>3</main-group>
<subgroup>00</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>03</class>
<subclass>G</subclass>
<main-group>15</main-group>
<subgroup>01</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>358  19</main-classification>
<further-classification>358  11</further-classification>
<further-classification>358  301</further-classification>
<further-classification>358  303</further-classification>
<further-classification>358  306</further-classification>
<further-classification>358  31</further-classification>
<further-classification>358501</further-classification>
<further-classification>358518</further-classification>
<further-classification>358533</further-classification>
<further-classification>358534</further-classification>
<further-classification>358401</further-classification>
<further-classification>399301</further-classification>
<further-classification>347116</further-classification>
</classification-national>
<invention-title id="d2e71">Image forming apparatus and control method thereof</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>4213150</doc-number>
<kind>A</kind>
<name>Robinson et al.</name>
<date>19800700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>4814886</doc-number>
<kind>A</kind>
<name>Kuge et al.</name>
<date>19890300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>5068914</doc-number>
<kind>A</kind>
<name>Klees</name>
<date>19911100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>5208684</doc-number>
<kind>A</kind>
<name>Itoh</name>
<date>19930500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>5270836</doc-number>
<kind>A</kind>
<name>Kang</name>
<date>19931200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>5294996</doc-number>
<kind>A</kind>
<name>Sobue</name>
<date>19940300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>5339171</doc-number>
<kind>A</kind>
<name>Fujisawa et al.</name>
<date>19940800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>5351312</doc-number>
<kind>A</kind>
<name>Sato et al.</name>
<date>19940900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>5479263</doc-number>
<kind>A</kind>
<name>Jacobs et al.</name>
<date>19951200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>5604605</doc-number>
<kind>A</kind>
<name>Moolenaar</name>
<date>19970200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358  303</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>5621542</doc-number>
<kind>A</kind>
<name>Ohta et al.</name>
<date>19970400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358  303</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>5649031</doc-number>
<kind>A</kind>
<name>Nakamura et al.</name>
<date>19970700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>5708514</doc-number>
<kind>A</kind>
<name>Higuchi et al.</name>
<date>19980100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>5822464</doc-number>
<kind>A</kind>
<name>Metcalfe</name>
<date>19981000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>6002493</doc-number>
<kind>A</kind>
<name>Case</name>
<date>19991200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>6101285</doc-number>
<kind>A</kind>
<name>Fan</name>
<date>20000800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>6215512</doc-number>
<kind>B1</kind>
<name>Imaizumi et al.</name>
<date>20010400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00018">
<document-id>
<country>US</country>
<doc-number>6215561</doc-number>
<kind>B1</kind>
<name>Kakutani</name>
<date>20010400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00019">
<document-id>
<country>US</country>
<doc-number>6317524</doc-number>
<kind>B1</kind>
<name>Wu et al.</name>
<date>20011100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00020">
<document-id>
<country>US</country>
<doc-number>6343158</doc-number>
<kind>B1</kind>
<name>Shiohara</name>
<date>20020100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00021">
<document-id>
<country>US</country>
<doc-number>6347159</doc-number>
<kind>B1</kind>
<name>Williams et al.</name>
<date>20020200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00022">
<document-id>
<country>US</country>
<doc-number>6529643</doc-number>
<kind>B1</kind>
<name>Loce et al.</name>
<date>20030300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00023">
<document-id>
<country>US</country>
<doc-number>6552822</doc-number>
<kind>B1</kind>
<name>Kishimoto</name>
<date>20030400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358  303</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00024">
<document-id>
<country>US</country>
<doc-number>6665448</doc-number>
<kind>B1</kind>
<name>Maurer</name>
<date>20031200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00025">
<document-id>
<country>US</country>
<doc-number>6816269</doc-number>
<kind>B1</kind>
<name>Loce et al.</name>
<date>20041100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00026">
<document-id>
<country>US</country>
<doc-number>6906825</doc-number>
<kind>B1</kind>
<name>Nakahara et al.</name>
<date>20050600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00027">
<document-id>
<country>US</country>
<doc-number>7031025</doc-number>
<kind>B1</kind>
<name>He et al.</name>
<date>20060400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00028">
<document-id>
<country>US</country>
<doc-number>7064863</doc-number>
<kind>B2</kind>
<name>Fukuda et al.</name>
<date>20060600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00029">
<document-id>
<country>US</country>
<doc-number>7164502</doc-number>
<kind>B2</kind>
<name>Nose et al.</name>
<date>20070100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00030">
<document-id>
<country>US</country>
<doc-number>7203376</doc-number>
<kind>B2</kind>
<name>Takahashi et al.</name>
<date>20070400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00031">
<document-id>
<country>US</country>
<doc-number>7295701</doc-number>
<kind>B2</kind>
<name>Suzuki et al.</name>
<date>20071100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00032">
<document-id>
<country>US</country>
<doc-number>7339698</doc-number>
<kind>B1</kind>
<name>Ohta</name>
<date>20080300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358  19</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00033">
<document-id>
<country>US</country>
<doc-number>7359091</doc-number>
<kind>B2</kind>
<name>Curry</name>
<date>20080400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00034">
<document-id>
<country>US</country>
<doc-number>7548655</doc-number>
<kind>B2</kind>
<name>Tatsumi et al.</name>
<date>20090600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00035">
<document-id>
<country>US</country>
<doc-number>7557962</doc-number>
<kind>B2</kind>
<name>Herron</name>
<date>20090700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00036">
<document-id>
<country>US</country>
<doc-number>7580074</doc-number>
<kind>B2</kind>
<name>Kuo et al.</name>
<date>20090800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>34833301</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00037">
<document-id>
<country>US</country>
<doc-number>7627192</doc-number>
<kind>B2</kind>
<name>Yokochi</name>
<date>20091200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00038">
<document-id>
<country>US</country>
<doc-number>7636179</doc-number>
<kind>B2</kind>
<name>Takahashi et al.</name>
<date>20091200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00039">
<document-id>
<country>US</country>
<doc-number>7660016</doc-number>
<kind>B2</kind>
<name>Ike et al.</name>
<date>20100200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00040">
<document-id>
<country>US</country>
<doc-number>7684079</doc-number>
<kind>B2</kind>
<name>Takata et al.</name>
<date>20100300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00041">
<document-id>
<country>US</country>
<doc-number>7684648</doc-number>
<kind>B2</kind>
<name>Miyazawa et al.</name>
<date>20100300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00042">
<document-id>
<country>US</country>
<doc-number>7702173</doc-number>
<kind>B2</kind>
<name>Gao et al.</name>
<date>20100400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00043">
<document-id>
<country>US</country>
<doc-number>7742653</doc-number>
<kind>B2</kind>
<name>Imai</name>
<date>20100600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00044">
<document-id>
<country>US</country>
<doc-number>7826098</doc-number>
<kind>B2</kind>
<name>Suzuki</name>
<date>20101100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00045">
<document-id>
<country>US</country>
<doc-number>7848591</doc-number>
<kind>B2</kind>
<name>Nakagata et al.</name>
<date>20101200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00046">
<document-id>
<country>US</country>
<doc-number>7936941</doc-number>
<kind>B2</kind>
<name>Sumiya et al.</name>
<date>20110500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00047">
<document-id>
<country>US</country>
<doc-number>7948543</doc-number>
<kind>B2</kind>
<name>Watanabe</name>
<date>20110500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00048">
<document-id>
<country>US</country>
<doc-number>7961977</doc-number>
<kind>B2</kind>
<name>Tanaka</name>
<date>20110600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00049">
<document-id>
<country>US</country>
<doc-number>7995249</doc-number>
<kind>B2</kind>
<name>Shoda et al.</name>
<date>20110800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00050">
<document-id>
<country>US</country>
<doc-number>8059910</doc-number>
<kind>B2</kind>
<name>Ishiga</name>
<date>20111100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00051">
<document-id>
<country>US</country>
<doc-number>8063994</doc-number>
<kind>B2</kind>
<name>Owaki et al.</name>
<date>20111100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00052">
<document-id>
<country>US</country>
<doc-number>8107772</doc-number>
<kind>B2</kind>
<name>Ohkawa</name>
<date>20120100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00053">
<document-id>
<country>US</country>
<doc-number>8129990</doc-number>
<kind>B2</kind>
<name>Yamamoto</name>
<date>20120300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00054">
<document-id>
<country>US</country>
<doc-number>8150198</doc-number>
<kind>B2</kind>
<name>Kubo et al.</name>
<date>20120400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00055">
<document-id>
<country>US</country>
<doc-number>8284453</doc-number>
<kind>B2</kind>
<name>Yashima et al.</name>
<date>20121000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00056">
<document-id>
<country>US</country>
<doc-number>8331731</doc-number>
<kind>B2</kind>
<name>Kashibuchi</name>
<date>20121200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00057">
<document-id>
<country>US</country>
<doc-number>2002/0039199</doc-number>
<kind>A1</kind>
<name>Nose et al.</name>
<date>20020400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00058">
<document-id>
<country>US</country>
<doc-number>2002/0041397</doc-number>
<kind>A1</kind>
<name>Rombola et al.</name>
<date>20020400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358  305</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00059">
<document-id>
<country>US</country>
<doc-number>2002/0080377</doc-number>
<kind>A1</kind>
<name>Tonami et al.</name>
<date>20020600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00060">
<document-id>
<country>US</country>
<doc-number>2002/0131061</doc-number>
<kind>A1</kind>
<name>Aoyagi et al.</name>
<date>20020900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00061">
<document-id>
<country>US</country>
<doc-number>2003/0164973</doc-number>
<kind>A1</kind>
<name>Hisatomi et al.</name>
<date>20030900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00062">
<document-id>
<country>US</country>
<doc-number>2004/0010633</doc-number>
<kind>A1</kind>
<name>Ishikawa</name>
<date>20040100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>710  1</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00063">
<document-id>
<country>US</country>
<doc-number>2004/0136034</doc-number>
<kind>A1</kind>
<name>Curry</name>
<date>20040700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00064">
<document-id>
<country>US</country>
<doc-number>2005/0062995</doc-number>
<kind>A1</kind>
<name>Loce et al.</name>
<date>20050300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00065">
<document-id>
<country>US</country>
<doc-number>2005/0134870</doc-number>
<kind>A1</kind>
<name>Kugo</name>
<date>20050600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00066">
<document-id>
<country>US</country>
<doc-number>2005/0144540</doc-number>
<kind>A1</kind>
<name>Fujishiro et al.</name>
<date>20050600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00067">
<document-id>
<country>US</country>
<doc-number>2005/0225806</doc-number>
<kind>A1</kind>
<name>Damera-Venkata</name>
<date>20051000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358  303</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00068">
<document-id>
<country>US</country>
<doc-number>2006/0017978</doc-number>
<kind>A1</kind>
<name>Minamino</name>
<date>20060100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00069">
<document-id>
<country>US</country>
<doc-number>2006/0119895</doc-number>
<kind>A1</kind>
<name>Takata et al.</name>
<date>20060600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358  326</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00070">
<document-id>
<country>US</country>
<doc-number>2006/0152764</doc-number>
<kind>A1</kind>
<name>Loce et al.</name>
<date>20060700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00071">
<document-id>
<country>US</country>
<doc-number>2006/0290767</doc-number>
<kind>A1</kind>
<name>Tezuka et al.</name>
<date>20061200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00072">
<document-id>
<country>US</country>
<doc-number>2007/0040847</doc-number>
<kind>A1</kind>
<name>Thebault et al.</name>
<date>20070200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>345616</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00073">
<document-id>
<country>US</country>
<doc-number>2007/0139674</doc-number>
<kind>A1</kind>
<name>Kawano et al.</name>
<date>20070600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00074">
<document-id>
<country>US</country>
<doc-number>2007/0211306</doc-number>
<kind>A1</kind>
<name>Abe</name>
<date>20070900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00075">
<document-id>
<country>US</country>
<doc-number>2007/0236745</doc-number>
<kind>A1</kind>
<name>Noguchi et al.</name>
<date>20071000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00076">
<document-id>
<country>US</country>
<doc-number>2007/0258103</doc-number>
<kind>A1</kind>
<name>Muramatsu</name>
<date>20071100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358  19</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00077">
<document-id>
<country>US</country>
<doc-number>2009/0003723</doc-number>
<kind>A1</kind>
<name>Kokemohr</name>
<date>20090100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00078">
<document-id>
<country>US</country>
<doc-number>2009/0027699</doc-number>
<kind>A1</kind>
<name>Nagai</name>
<date>20090100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00079">
<document-id>
<country>US</country>
<doc-number>2009/0168109</doc-number>
<kind>A1</kind>
<name>Kishi</name>
<date>20090700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00080">
<document-id>
<country>US</country>
<doc-number>2009/0207453</doc-number>
<kind>A1</kind>
<name>Ike et al.</name>
<date>20090800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00081">
<document-id>
<country>US</country>
<doc-number>2010/0129004</doc-number>
<kind>A1</kind>
<name>Ogawa</name>
<date>20100500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>382274</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00082">
<document-id>
<country>US</country>
<doc-number>2012/0269273</doc-number>
<kind>A1</kind>
<name>Nakagami et al.</name>
<date>20121000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00083">
<document-id>
<country>EP</country>
<doc-number>1 343 305</doc-number>
<kind>A1</kind>
<date>20030900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00084">
<document-id>
<country>EP</country>
<doc-number>1 736 835</doc-number>
<kind>A1</kind>
<date>20061200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00085">
<document-id>
<country>JP</country>
<doc-number>9-074488</doc-number>
<kind>A</kind>
<date>19970300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00086">
<document-id>
<country>JP</country>
<doc-number>9085993</doc-number>
<kind>A1</kind>
<date>19970300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00087">
<document-id>
<country>JP</country>
<doc-number>11-258877</doc-number>
<date>19990900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-cpc-text>G03G 15/00</classification-cpc-text>
</us-citation>
<us-citation>
<patcit num="00088">
<document-id>
<country>JP</country>
<doc-number>2001-309188</doc-number>
<kind>A</kind>
<date>20011100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00089">
<document-id>
<country>JP</country>
<doc-number>2002-118748</doc-number>
<kind>A</kind>
<date>20020400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00090">
<document-id>
<country>JP</country>
<doc-number>2002-271624</doc-number>
<kind>A</kind>
<date>20020900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00091">
<document-id>
<country>JP</country>
<doc-number>2006-065834</doc-number>
<kind>A</kind>
<date>20060300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00092">
<document-id>
<country>JP</country>
<doc-number>2006-159452</doc-number>
<kind>A</kind>
<date>20060600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00093">
<othercit>Extended European Search Report issued in corresponding European Patent Appln. No. 09173643.9 dated Feb. 5, 2010, which corresponds to related co-pending U.S. Appl. No. 12/604,521.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00094">
<othercit>Extended European Search Report issued in corresponding European Patent Appln. No. 09173642.1, dated Feb. 2, 2010, which corresponds to related co-pending U.S. Appl. No. 12/604,506.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00095">
<othercit>Kappos, David, Subject Matter Eligibility of Computer Readable Media, Feb. 23, 2010, USPTO 1351 OG 212.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00096">
<othercit>Specification and drawings of unpublished U.S. Appl. No. 12/604,521, filed Oct. 23, 2009 &#x201c;Image Processing Apparatus and Image Processing Method&#x201d;; Yuuji Takayama et al. pp. 1-40.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00097">
<othercit>Specification and drawings of unpublished U.S. Appl. No. 12/604,506, filed Oct. 23, 2009 &#x201c;Image Forming Apparatus and Control Method Thereof&#x201d;; Go Araki et al. pp. 1-74.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00098">
<othercit>Floyd, Robert et al. &#x201c;An Adaptive Algorithm for Spatial Grey Scale&#x201d; Society for Information Display 1975 Symposium Digest of Technical Papers, pp. 36-37. Cited in related co-pending U.S. Appl. No. 12/604,506.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00099">
<othercit>Extended European Search Report in corresponding European Patent Application No. 09173640.5 dated Jun. 25, 2010.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>16</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>None</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>13</number-of-drawing-sheets>
<number-of-figures>14</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20100103442</doc-number>
<kind>A1</kind>
<date>20100429</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Saiki</last-name>
<first-name>Tomoyuki</first-name>
<address>
<city>Suntou-gun</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Araki</last-name>
<first-name>Go</first-name>
<address>
<city>Suntou-gun</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Takayama</last-name>
<first-name>Yuuji</first-name>
<address>
<city>Suntou-gun</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
<us-applicant sequence="004" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Ishikawa</last-name>
<first-name>Hisashi</first-name>
<address>
<city>Urayasu</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Saiki</last-name>
<first-name>Tomoyuki</first-name>
<address>
<city>Suntou-gun</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Araki</last-name>
<first-name>Go</first-name>
<address>
<city>Suntou-gun</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Takayama</last-name>
<first-name>Yuuji</first-name>
<address>
<city>Suntou-gun</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
<inventor sequence="004" designation="us-only">
<addressbook>
<last-name>Ishikawa</last-name>
<first-name>Hisashi</first-name>
<address>
<city>Urayasu</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Rossi, Kimms &#x26; McDowell LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Canon Kabushiki Kaisha</orgname>
<role>03</role>
<address>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Poon</last-name>
<first-name>King</first-name>
<department>2675</department>
</primary-examiner>
<assistant-examiner>
<last-name>Menberu</last-name>
<first-name>Beniyam</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">An image forming apparatus forms a color image using image carriers for a plurality of colors by electrophotography. The image forming apparatus stores, for each color, information on the shift amount between an ideal scanning line and an actual scanning line in the main scanning direction on the image carrier. For each color, a color misregistration correction amount calculation unit converts a readout address in a bitmap memory (<b>403</b>), based on the stored shift amount information, and reads out image data. A color misregistration correction unit (<b>404</b>) performs tone correction for the readout image data based on the address, outputting image data containing the value of the decimal part. A multi-level error diffusion unit (<b>405</b>) performs quantization by multi-level error diffusion processing for the tone-corrected image data containing the value of the decimal part.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="167.13mm" wi="241.55mm" file="US08625156-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="258.49mm" wi="178.31mm" orientation="landscape" file="US08625156-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="154.77mm" wi="173.40mm" file="US08625156-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="217.85mm" wi="174.07mm" file="US08625156-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="249.34mm" wi="177.88mm" file="US08625156-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="232.24mm" wi="155.19mm" file="US08625156-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="258.49mm" wi="174.41mm" orientation="landscape" file="US08625156-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="233.93mm" wi="156.55mm" orientation="landscape" file="US08625156-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="237.15mm" wi="153.75mm" file="US08625156-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="210.48mm" wi="143.93mm" file="US08625156-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="129.62mm" wi="168.49mm" file="US08625156-20140107-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="242.32mm" wi="182.80mm" file="US08625156-20140107-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="217.17mm" wi="164.59mm" file="US08625156-20140107-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00013" num="00013">
<img id="EMI-D00013" he="255.69mm" wi="160.44mm" orientation="landscape" file="US08625156-20140107-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0002" num="0001">1. Field of the Invention</p>
<p id="p-0003" num="0002">The present invention relates to an image forming apparatus and control method thereof and, more particularly, to an image forming apparatus and control method thereof for forming a color image by superimposing images of a plurality of color components using a plurality of image carriers.</p>
<p id="p-0004" num="0003">2. Description of the Related Art</p>
<p id="p-0005" num="0004">There has conventionally been known an image forming apparatus which forms a color image by sequentially superimposing a plurality of images of different colors. This color image forming apparatus suffers so-called color misregistration if the image forming position of any color deviates from those of the remaining colors.</p>
<p id="p-0006" num="0005">As a method for reducing the color misregistration, the image forming position is corrected by performing image processing for image data to convert a readout address in an image memory or the like so as to cancel a positional error generated in exposure scanning (see, for example, Japanese Patent Laid-Open No. 2006-159452).</p>
<p id="p-0007" num="0006">However, the conventional correction method based on image data readout address conversion causes moir&#xe9; or jaggies at the edge of a character or line art upon correction. To suppress the generation of moir&#xe9; or jaggies, the image forming apparatus requires an edge detection unit for detecting an edge, and an exceptional processing unit for applying exceptional processing to the detected edge. This arrangement is disadvantageous in both apparatus size and processing time.</p>
<heading id="h-0002" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0008" num="0007">The present invention has been made to solve the above-described problems, and provides an image forming apparatus and control method thereof for suppressing generation of moir&#xe9; and generation of jaggies at the edge of a character or line art by a simple arrangement when correcting color misregistration in color image formation.</p>
<p id="p-0009" num="0008">According to one aspect of the present invention, there is provided an image forming apparatus which includes, for respective printing materials of a plurality of colors, a plurality of color image forming sections each for forming a visible image by exposure scanning and development on an image carrier, and forms a color image by superimposing visible images formed on a print medium by the plurality of color image forming sections, each of the plurality of color image forming sections comprising: exposure shift amount storage unit configured to store shift amount information representing a shift amount between an ideal scanning line and an actual scanning line in an exposure scanning direction on the image carrier; image data storage unit configured to store image data to be formed; address conversion unit configured to convert a readout address in the image data storage unit, based on the shift amount information stored in the exposure shift amount storage unit, and read out image data in accordance with the converted address; tone correction unit configured to perform, based on the address, tone correction for the image data read out by the address conversion unit; multi-level error diffusion unit configured to perform quantization by multi-level error diffusion processing for the image data having undergone the tone correction by the tone correction unit; and exposure control signal generation unit configured to generate an exposure control signal to perform exposure scanning of the image data, based on a quantization level of the quantization by the multi-level error diffusion unit.</p>
<p id="p-0010" num="0009">According to another aspect of the present invention, there is provided a method of controlling an image forming apparatus which includes, for respective printing materials of a plurality of colors, a plurality of color image forming sections each for forming a visible image by exposure scanning and development on an image carrier, and forms a color image by superimposing visible images formed on a print medium by the plurality of color image forming sections, the method comprising for each of the plurality of color image forming sections: an exposure shift amount acquisition step of acquiring shift amount information representing a shift amount between an ideal scanning line and an actual scanning line in an exposure scanning direction on the image carrier; an image data storage step of storing image data to be formed in an image memory; an address conversion step of converting a readout address in the image memory, based on the shift amount information, and reading out image data in accordance with the converted address; a tone correction step of performing, based on the address, tone correction for the image data read out in the address conversion step; a multi-level error diffusion step of performing quantization by multi-level error diffusion processing for the image data having undergone the tone correction in the tone correction step; and an exposure control signal generation step of generating an exposure control signal based on a quantization level of the quantization in the multi-level error diffusion step.</p>
<p id="p-0011" num="0010">The present invention can suppress generation of moir&#xe9; and generation of jaggies at the edge of a character or line art by a simple arrangement when correcting color misregistration in color image formation.</p>
<p id="p-0012" num="0011">Further features of the present invention will become apparent from the following description of exemplary embodiments (with reference to the attached drawings).</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0013" num="0012">The accompanying drawings, which are incorporated in and constitute a part of the specification, illustrate embodiments of the invention and, together with the description, serve to explain the principles of the invention.</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram showing the arrangement of an image forming apparatus according to an embodiment of the present invention;</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 2</figref> is a sectional view showing the structure of the image forming apparatus in the embodiment;</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 3</figref> is a graph for explaining a shift of a main scanning line on a photosensitive drum in the embodiment;</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 4</figref> is a table exemplifying information held in a color misregistration amount storage unit in the embodiment;</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 5</figref> is a view for explaining a correction operation to a color misregistration correction amount corresponding to the integer part in an address converter in the embodiment;</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 6</figref> is a view showing a correction operation on a color misregistration correction amount corresponding to the decimal part in a tone correction unit in the embodiment;</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 7</figref> is a block diagram showing the arrangement of a color misregistration correction unit in the embodiment;</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 8</figref> is a block diagram showing the detailed arrangements of an address counter and address converter in the color misregistration correction unit in the embodiment;</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 9</figref> is a view showing a concrete example of performing five-level error diffusion processing in the embodiment after color misregistration correction processing;</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 10</figref> is a view showing a concrete example of performing general screen processing after color misregistration correction processing;</p>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 11</figref> is a graph showing the characteristic of a PWM signal generated in a PWM processing unit in the embodiment;</p>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. 12</figref> is a view exemplifying assignment of the number of quantization levels in multi-level error diffusion processing in the second embodiment;</p>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. 13</figref> is a flowchart showing processing to switch the number of quantization levels in multi-level error diffusion processing in the second embodiment; and</p>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 14</figref> is a block diagram showing the arrangement of a color misregistration correction unit in the third embodiment.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">DESCRIPTION OF THE EMBODIMENTS</heading>
<p id="p-0028" num="0027">Preferred embodiments of the present invention will be described in detail below with reference to the accompanying drawings. Arrangements set forth in the following embodiments are merely examples, and the scope of the invention is not limited to the illustrative arrangements.</p>
<heading id="h-0005" level="1">First Embodiment</heading>
<heading id="h-0006" level="1">Apparatus Structure</heading>
<p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. 2</figref> is a sectional view of the structure of an image forming apparatus in the first embodiment. As shown in <figref idref="DRAWINGS">FIG. 2</figref>, the image forming apparatus according to the embodiment has the structure of a 4-drum type color laser beam printer.</p>
<p id="p-0030" num="0029">In the image forming apparatus, a transfer medium cassette <b>53</b> is mounted at the bottom. Print media (for example, print sheets or transparent sheets) set in the transfer medium cassette <b>53</b> are picked up one by one by a pickup roller <b>54</b>, and fed to an image forming section by conveyance roller pairs <b>55</b><i>a </i>and <b>55</b><i>b</i>. In the image forming section, a transfer conveyance belt <b>10</b> for conveying a print medium is kept taut by a plurality of rotating rollers to form a flat surface in a print medium conveyance direction (from right to left in <figref idref="DRAWINGS">FIG. 2</figref>). On the uppermost stream side, a print medium is electrostatically absorbed to the transfer conveyance belt <b>10</b>. Four photosensitive drums <b>14</b>C, <b>14</b>Y, <b>14</b>M, and <b>14</b>K are aligned as drum-like image carriers to face the conveyance surface of the belt, forming an image forming section (C, Y, M, and K represent cyan, yellow, magenta, and black color components, respectively).</p>
<p id="p-0031" num="0030">The image forming section forms images of the respective colors. Arrangements (to be referred to as color image forming sections) for forming an image of each color have the same structure except for the color of a stored printing material (toner). Thus, a C color image forming section for forming an image of the C color component will be explained.</p>
<p id="p-0032" num="0031">The C color image forming section includes a charger <b>50</b>C which uniformly charges the surface of the photosensitive drum <b>14</b>C, a developing unit <b>52</b>C which stores a C toner and develops an electrostatic latent image formed on the photosensitive drum <b>14</b>C to make the image visible, and an exposure unit <b>51</b>C. The developing unit <b>52</b>C and charger <b>50</b>C are arranged at a predetermined interval. A laser beam emitted by the exposure unit <b>51</b>C formed from a laser scanner exposes and scans, via the interval in a direction perpendicular to the sheet surface of <figref idref="DRAWINGS">FIG. 2</figref>, the surface of the photosensitive drum <b>14</b>C uniformly charged by the charger <b>50</b>C. The exposed/scanned portion is charged differently from an unexposed portion, forming an electrostatic latent image. The developing unit <b>52</b>C applies toner to the electrostatic latent image to visualize it (develop it as a toner image), forming a visible image.</p>
<p id="p-0033" num="0032">A transfer unit <b>57</b>C is arranged below the conveyance surface of the transfer conveyance belt <b>10</b>. The toner image formed (developed) on the outer surface of the photosensitive drum <b>14</b>C is absorbed by charges to a conveyed print medium by a transfer field generated by the transfer unit <b>57</b>C, thereby transferring the toner image onto the print medium.</p>
<p id="p-0034" num="0033">The remaining Y, M, and K color image forming sections also execute the same processing as that for the C color component. As a result, C, M, Y, and K toner images are sequentially transferred onto the print medium to overlap each other. After that, a fixing unit <b>58</b> thermally fuses and fixes the respective color toners superimposed on the print medium. Discharge roller pairs <b>59</b><i>a </i>and <b>59</b><i>b </i>discharge the print medium from the apparatus.</p>
<p id="p-0035" num="0034">In this example, toner images of the respective color components are directly transferred onto a print medium. However, an image forming apparatus applicable to the present invention is not limited to this arrangement. For example, it is possible that toner images of the respective color components are temporarily transferred onto the transfer conveyance belt and then the toner images transferred on the transfer conveyance belt are transferred to a print medium (secondary transfer). The transfer belt used to perform secondary transfer is called an intermediate transfer belt.</p>
<p id="p-0036" num="0035">Outline of Color Misregistration</p>
<p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. 3</figref> is a graph for explaining a &#x201c;shift&#x201d; of a main scanning line in the exposure scanning direction of the photosensitive drum <b>14</b>C (which may be any one of the photosensitive drums <b>14</b>M, <b>14</b>Y, and <b>14</b>K, and will be called the photosensitive drum <b>14</b>) serving as an image carrier. In <figref idref="DRAWINGS">FIG. 3</figref>, the horizontal direction (x direction) is a laser beam scanning direction, and the vertical direction (y direction) is the rotational direction of the photosensitive drum <b>14</b> (also the print medium conveyance direction).</p>
<p id="p-0038" num="0037">In <figref idref="DRAWINGS">FIG. 3</figref>, a straight line <b>301</b> indicates an ideal main scanning line (to be referred to as a main scanning line <b>301</b>). A curve <b>302</b> exemplifies an actual main scanning line (to be referred to as a main scanning line <b>302</b>) suffering an upward inclination to the right and a curvature arising from a positional or diameter error of the photosensitive drum <b>14</b> and a positional error of the optical system of the exposure unit <b>51</b> for each color. The inclination and curvature of the main scanning line generated in a color image forming section of any color results in color misregistration upon transferring toner images of a plurality of colors at once on a transfer medium.</p>
<p id="p-0039" num="0038">The first embodiment suppresses the generation of color misregistration by the following method. First, in the main scanning direction (X direction) serving as the exposure scanning direction, the shift amount between the ideal main scanning line <b>301</b> and the actual main scanning line <b>302</b> in the subscanning direction is measured at a plurality of points (points B, C, and D) using the scan start position of the print region as a reference point (point A). Then, the print region is divided into a plurality of regions (region <b>1</b> between Pa and Pb, region <b>2</b> between Pb and Pc, and region <b>3</b> between Pc and Pd) at these points. Straight lines Lab, Lbc, and Lcd connecting the respective points approximate inclinations of the main scanning line in the respective regions. When the difference (m<b>1</b> in region <b>1</b>, m<b>2</b>-m<b>1</b> in region <b>2</b>, or m<b>3</b>-m<b>2</b> in region <b>3</b>) in shift amount between the points is positive, the main scanning line in the target region has an upward inclination to the right. When the difference is negative, the main scanning line in the target region has a downward inclination to the right.</p>
<p id="p-0040" num="0039">In <figref idref="DRAWINGS">FIG. 3</figref>, the number of divided regions is three for descriptive convenience, but the number of regions is not limited to this example.</p>
<p id="p-0041" num="0040">Overall Arrangement of Color Misregistration Correction</p>
<p id="p-0042" num="0041"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram exemplifying the arrangement of an image forming section for correcting color misregistration arising from the inclination or curvature of the scanning line in the first embodiment.</p>
<p id="p-0043" num="0042">In <figref idref="DRAWINGS">FIG. 1</figref>, an image forming section <b>401</b> receives raster image data of 8 bits for each of C, M, Y, and K from an external apparatus (for example, a computer or controller: not shown). The image forming section <b>401</b> temporarily stores the raster image data in a bitmap memory <b>403</b> serving as an image data storage unit. Then, the image forming section <b>401</b> performs actual print processing to form bitmap information stored in the bitmap memory <b>403</b>. The bitmap memory <b>403</b> is an image memory for temporarily storing raster image data to be formed, and thus includes a page memory capable of storing image data of one page. The arrangement of the bitmap memory <b>403</b> is not limited to the page memory, and may be a band memory for storing data of a plurality of lines. For descriptive convenience, the bitmap memory <b>403</b> is assumed to have a capacity capable of storing CMYK bitmap data of one page. Needless to say, the bitmap memory <b>403</b> may hold C, M, Y, and K pages at once, like this example, but may also include a memory for, for example, each color image forming section.</p>
<p id="p-0044" num="0043">Color misregistration amount storage units <b>413</b>C, <b>413</b>M, <b>413</b>Y, and <b>413</b>K for the respective colors hold written misregistration amount information of the respective colors in the manufacture of the apparatus. The color misregistration amount storage unit is formed from, for example, a writable nonvolatile memory such as an EEPROM. The held color misregistration amount information requires a very small capacity, so one memory element may store the color misregistration amounts of all the color components. In <figref idref="DRAWINGS">FIG. 1</figref>, one memory element is assumed to store the color misregistration amounts of all the color components, and will be called a color misregistration amount storage unit <b>402</b>.</p>
<p id="p-0045" num="0044">The color misregistration amount storage unit <b>402</b> in the first embodiment stores information on the inclination and curvature of a main scanning line as color misregistration amount information. The inclination and curvature indicate shift amounts in the subscanning direction between the actual main scanning line <b>302</b> and the ideal main scanning line <b>301</b> that are measured at a plurality of points, as described with reference to <figref idref="DRAWINGS">FIG. 3</figref>. <figref idref="DRAWINGS">FIG. 4</figref> exemplifies the information stored in the color misregistration amount storage unit <b>402</b>. In <figref idref="DRAWINGS">FIG. 4</figref>, L<b>1</b> to L<b>3</b> and m<b>1</b> to m<b>3</b> have the same meanings as those of the same reference symbols in <figref idref="DRAWINGS">FIG. 3</figref>. Note that information stored for each color changes depending on the individual apparatus.</p>
<p id="p-0046" num="0045">In the first embodiment, the color misregistration amount storage unit <b>402</b> stores the shift amount between an ideal main scanning line and an actual main scanning line. However, information actually stored is not limited to this example as long as it can identify the inclination and curvature of an actual main scanning line. In this example, information in the color misregistration amount storage unit <b>402</b> is stored in advance as apparatus-specific information obtained by measuring the shift amount during the manufacture. However, the shift amount held in advance in the present invention can also be acquired by another method. For example, the image forming apparatus itself may include a detection mechanism for detecting the shift amount. In this case, a predetermined pattern for measuring a shift amount is formed for an image carrier of each color. A shift amount detected by the detection mechanism is stored.</p>
<p id="p-0047" num="0046">The image forming section <b>401</b> executes print processing after correcting image data of each color component to cancel the shift amount of the main scanning line stored in the color misregistration amount storage unit <b>402</b>.</p>
<p id="p-0048" num="0047">Color misregistration correction amount calculation units <b>410</b>C, <b>410</b>M, <b>410</b>Y, and <b>410</b>K calculate color misregistration correction amounts in the subscanning direction in accordance with the address in the main scanning direction, based on items of shift amount information of the main scanning line for the respective colors that are stored in the color misregistration amount storage unit <b>402</b>. The color misregistration correction amount calculation units <b>410</b>C, <b>410</b>M, <b>410</b>Y, and <b>410</b>K output the calculation results to corresponding color misregistration correction units <b>404</b>C, <b>404</b>M, <b>404</b>Y, and <b>404</b>K for the respective colors to set the results in them.</p>
<p id="p-0049" num="0048">Letting x (dots) be an address in the main scanning direction and y (dots) be a color misregistration amount in the subscanning direction, the color misregistration amount y in each region in <figref idref="DRAWINGS">FIG. 3</figref> is given by
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>region 1<i>:y</i>=(<i>m</i>1<i>/L</i>1)*<i>x </i><?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>region 2<i>:y</i>=((<i>m</i>2<i>&#x2212;m</i>1)/(<i>L</i>2<i>&#x2212;L</i>1))&#xd7;(<i>x&#x2212;L</i>1)+<i>m</i>1<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>region 3<i>:y</i>=((<i>m</i>3<i>&#x2212;m</i>2)/(<i>L</i>3<i>&#x2212;L</i>2))*(<i>x&#x2212;L</i>2)+<i>m</i>2&#x2003;&#x2003;(1)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where L<b>1</b>, L<b>2</b>, and L<b>3</b> are distances (mm) in the main scanning direction from the print start position to the right ends of regions <b>1</b>, <b>2</b>, and <b>3</b>, and m<b>1</b>, m<b>2</b>, and m<b>3</b> are shift amounts between the ideal main scanning line <b>301</b> and the actual main scanning line <b>302</b> at the right ends of regions <b>1</b>, <b>2</b>, and <b>3</b>. Note that the print resolution in the first embodiment is assumed to be 600 dpi.
</p>
<p id="p-0050" num="0049">Color Misregistration Correction Unit</p>
<p id="p-0051" num="0050">The color misregistration correction units <b>404</b>C, <b>404</b>M, <b>404</b>Y, and <b>404</b>K correct color misregistration represented by equation (1) that is caused by the inclination and curvature of the main scanning line. More specifically, the color misregistration correction units <b>404</b>C, <b>404</b>M, <b>404</b>Y, and <b>404</b>K adjust the output timing of bitmap data stored in the bitmap memory <b>403</b> and adjust the tone of each pixel, based on color misregistration correction amounts calculated for each dot by the color misregistration correction amount calculation units <b>410</b>C, <b>410</b>M, <b>410</b>Y, and <b>410</b>K. The color misregistration correction units <b>404</b>C, <b>404</b>M, <b>404</b>Y, and <b>404</b>K have the same arrangement with different correction amounts. Hence, the operation of the color misregistration correction unit <b>404</b>C for the C component will be explained in detail.</p>
<p id="p-0052" num="0051"><figref idref="DRAWINGS">FIG. 7</figref> is a block diagram showing the detailed arrangement of the color misregistration correction unit <b>404</b>C. As shown in <figref idref="DRAWINGS">FIG. 7</figref>, the color misregistration correction unit <b>404</b>C includes an address counter <b>801</b>, address converter <b>802</b>, line buffer <b>803</b>, and tone correction unit <b>804</b>.</p>
<p id="p-0053" num="0052">According to equation (1) described above, the address counter <b>801</b> outputs, to the address converter <b>802</b>, information necessary to generate addresses in the main scanning direction and subscanning direction to perform color misregistration correction processing. Also, the address counter <b>801</b> outputs, to the tone correction unit <b>804</b>, information representing the degree of shift (value of the decimal part to be described later) in the subscanning direction.</p>
<p id="p-0054" num="0053">The address converter <b>802</b> performs readout access to the bitmap memory <b>403</b> using address data (X address) in the main scanning direction and address data (Y address) in the subscanning direction from the address counter <b>801</b>. Data (C component data in this case) read out from the bitmap memory <b>403</b> is output to the line buffer <b>803</b>.</p>
<p id="p-0055" num="0054">As shown in <figref idref="DRAWINGS">FIG. 7</figref>, the line buffer <b>803</b> includes a register <b>805</b>, and a FIFO buffer <b>806</b> having a 1-line storage area. The line buffer <b>803</b> outputs C component data P<sub>n+1</sub>(x) and P<sub>n</sub>(x) of two pixels adjacent in the subscanning direction to the tone correction unit <b>804</b>. The tone correction unit <b>804</b> executes tone correction to be described later.</p>
<p id="p-0056" num="0055">Processes performed by the address counter <b>801</b> and address converter <b>802</b> will be described in detail with reference to <figref idref="DRAWINGS">FIG. 8</figref>. Assume that the color misregistration correction amount calculation unit <b>410</b>C calculates pixel positions L<b>1</b>&#x2032;, L<b>2</b>&#x2032;, and L<b>3</b>&#x2032; in the horizontal direction (ideal scanning direction), based on distances L<b>1</b>, L<b>2</b>, and L<b>3</b> (mm) stored in the color misregistration amount storage unit <b>402</b>.</p>
<p id="p-0057" num="0056">The color misregistration correction amount calculation unit <b>410</b>C calculates the inclination of a straight line connecting the shift amounts of respective regions. The inclination is calculated for each pixel. Letting &#x394;y be the inclination of each pixel, the inclinations of the respective regions in the information example shown in <figref idref="DRAWINGS">FIG. 4</figref> are given by
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>region 1<i>:&#x394;y</i>1<i>=m</i>1<i>/L</i>1&#x2032;<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>region 2<i>:&#x394;y</i>2=(<i>m</i>2<i>&#x2212;m</i>1)/(<i>L</i>2&#x2032;<i>&#x2212;L</i>1&#x2032;)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>region 3<i>:&#x394;y</i>3=(<i>m</i>3<i>&#x2212;m</i>2)/(<i>L</i>3&#x2032;<i>&#x2212;L</i>2&#x2032;)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0058" num="0057">A register <b>82</b> shown in <figref idref="DRAWINGS">FIG. 8</figref> stores L<b>1</b>&#x2032;, L<b>2</b>&#x2032;, and L<b>3</b>&#x2032;, and a register <b>84</b> stores &#x394;y<b>1</b>, &#x394;y<b>2</b>, and &#x394;y<b>3</b>. Note that &#x394;y<b>1</b>, &#x394;y<b>2</b>, and &#x394;y<b>3</b> have positive/negative signs.</p>
<p id="p-0059" num="0058">An X address generator <b>81</b> in the address converter <b>802</b> is reset when creating correction data for one scan of a laser beam. The X address generator <b>81</b> adds a pixel clock clk to generate a horizontal readout address (X address) in the bitmap memory <b>403</b>. Every time the pixel clock clk is input, the X address is incremented from 0 to 1, 2, . . . .</p>
<p id="p-0060" num="0059">A comparator <b>83</b> in the address counter <b>801</b> compares an X address value from the X address generator <b>81</b> and L<b>1</b>&#x2032;, L<b>2</b>&#x2032;, and L<b>3</b>&#x2032; values held in the register <b>82</b> to determine which of regions <b>1</b> to <b>3</b> shown in <figref idref="DRAWINGS">FIG. 3</figref> contains the current X address. An output signal representing the determination result is a 2-bit signal because it suffices to identify three states.</p>
<p id="p-0061" num="0060">A selector <b>85</b> selects and outputs one of the inclinations &#x394;y<b>1</b>, &#x394;y<b>2</b>, and &#x394;y<b>3</b> stored in the register <b>84</b> in accordance with a signal output from the comparator <b>83</b>. More specifically, when the current X address falls within the range (X&#x2266;L<b>1</b>&#x2032;) of region <b>1</b>, the selector <b>85</b> selects and outputs &#x394;y<b>1</b>. When the current X address falls within the range (L<b>1</b>&#x2032;&#x3c;X&#x2266;L<b>2</b>&#x2032;) of region <b>2</b>, the selector <b>85</b> selects and outputs &#x394;y<b>2</b>. When the current X address falls within the range (L<b>2</b>&#x2032;&#x3c;X) of region <b>3</b>, the selector <b>85</b> selects and outputs &#x394;y<b>3</b>.</p>
<p id="p-0062" num="0061">A counter <b>86</b> is reset prior to one scanning. A register <b>86</b><i>a </i>in the counter <b>86</b> accumulates the inclination &#x394;y output from the selector <b>85</b>, and holds the value. Since the inclination &#x394;y contains a decimal part, the register <b>86</b><i>a </i>also has a corresponding number of bits. The counter <b>86</b> outputs the integer part of the accumulation result held in the register <b>86</b><i>a </i>to a Y address generator <b>87</b> of the address converter <b>802</b>, and the decimal part to the tone correction unit <b>804</b>.</p>
<p id="p-0063" num="0062">Prior to one scanning, a predetermined reference Y address in the bitmap memory <b>403</b> is set in the Y address generator <b>87</b> in the address converter <b>802</b>. The Y address generator <b>87</b> adds an integer value from the counter <b>86</b> to the reference Y address. The sum serves as a readout Y address in the bitmap memory <b>403</b>.</p>
<p id="p-0064" num="0063">In this manner, X and Y addresses according to equation (1) are generated as integer values. By using the X and Y addresses as readout addresses, C component data at a corresponding position in the bitmap memory <b>403</b> is read out and stored in the line buffer <b>803</b>.</p>
<p id="p-0065" num="0064">A feature of reading pixel data based on X and Y addresses in the first embodiment will be explained. For example, the reference Y address is 100 to generate data for the 100th scanning. A value stored in the register <b>86</b><i>a </i>of the counter <b>86</b> is assumed to be 100.1. At this time, it is ideal to read pixel data at a position corresponding to a Y address &#x201c;100.1&#x201d; in the bitmap memory <b>403</b>. However, the pixel position in the bitmap memory <b>403</b> is represented by an integer, so the Y address &#x201c;100.1&#x201d; does not exist.</p>
<p id="p-0066" num="0065">The first embodiment, therefore, handles the Y address &#x201c;100.1&#x201d; as follows. The Y address &#x201c;100.1&#x201d; exists between Y addresses &#x201c;100&#x201d; and &#x201c;101&#x201d;. The pixel value at the address &#x201c;100&#x201d; has a 90% influences on the pixel value to be obtained (tone-corrected pixel value), and the pixel value at the address &#x201c;101&#x201d; has a 10% influence. Considering this, the first embodiment executes tone correction for a nonexistent Y address containing the decimal part by decimal part-dependent weighted interpolation for pixel values sandwiching the Y address. As a result, a pixel value corresponding to the Y address is attained.</p>
<p id="p-0067" num="0066">The tone correction unit <b>804</b> in <figref idref="DRAWINGS">FIG. 7</figref> performs this tone correction. Although the reference Y address is incremented by with each scan, the color misregistration correction amount, that is, the offset amount with respect to the reference Y address remains unchanged. Every time the address in the main scanning direction does not change, a decimal part output from the address counter <b>801</b> (counter <b>86</b>) also remains unchanged. In the first embodiment, therefore, a line position of interest in the address counter <b>801</b> may differ from a line position where a pixel of interest to undergo tone interpolation exists. The tone correction unit <b>804</b> can execute tone correction using the value of the decimal part input from the address counter <b>801</b>.</p>
<p id="p-0068" num="0067">The tone correction unit <b>804</b> receives a value &#x3b3; of the decimal part output from the counter <b>86</b>, and calculates, based on &#x3b3;, weighted correction coefficients &#x3b1; and &#x3b2; to be multiplied by multipliers <b>804</b><i>a </i>and <b>804</b><i>b</i>. An adder adds the products of two lines by the correction coefficients &#x3b1; and &#x3b2;, outputting tone-corrected data. More specifically, the tone correction unit <b>804</b> solves a weighted interpolation equation:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>P&#x2032;</i><sub>n</sub>(<i>x</i>)=<i>P</i><sub>n+1</sub>(<i>x</i>)*&#x3b2;+<i>P</i><sub>n</sub>(<i>x</i>)*&#x3b1;<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0069" num="0068">This equation is generalized. Letting Cx,y+1 be the pixel value of the C component obtained from the register <b>805</b>, and Cx,y be the pixel value of the C component obtained from the FIFO buffer <b>806</b>, a tone-corrected pixel value Hx,y is calculated by
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>Hx,y=Cx,y+</i>1<i>*&#x3b2;+Cx,y*&#x3b1;</i>&#x2003;&#x2003;(2)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0070" num="0069">The weighted correction coefficients &#x3b1; and &#x3b2; in equation (2) have the following relations with reference to the value &#x3b3; of the decimal part output from the counter <b>86</b>:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>&#x3b2;=1&#x2212;&#x3b3;<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>&#x3b1;=&#x3b3;<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0071" num="0070">As described above, to calculate a pixel value corresponding to a nonexistent Y address containing the decimal part, tone correction processing in the first embodiment refers to pixel data of two lines sandwiching the Y address. Assume that P is an X address generated by the address converter <b>802</b>, Q is the reference address of a Y address, and the offset of the Y address is 0.1. In this case, the register <b>805</b> in the line buffer <b>803</b> receives data at the address (P,Q) in the bitmap memory <b>403</b>. The pixel position referred to in correction processing is (P,Q+1). For a pixel position of interest in the register <b>805</b>, data at the address (P,Q+1) has not been read yet. The first embodiment solves this problem by using data output from the FIFO buffer <b>806</b> as C component data at the pixel (P,Q) of interest and data output from the register <b>805</b> as (P,Q+1), as shown in <figref idref="DRAWINGS">FIG. 7</figref>.</p>
<p id="p-0072" num="0071">Color Misregistration Processing (Details)</p>
<p id="p-0073" num="0072">The arrangement and operation of the color misregistration correction unit <b>404</b>C in the first embodiment have been described, and will be explained in more detail with reference to <figref idref="DRAWINGS">FIG. 5</figref>. In <figref idref="DRAWINGS">FIG. 5</figref>, a graph <b>501</b> shows a color misregistration curve plotted based on information stored in the color misregistration amount storage unit <b>402</b>. The inclination of this curve is &#x394;y<b>1</b> in region <b>1</b> and &#x394;y<b>2</b> in region <b>2</b>. Image data <b>502</b> is generated after address conversion by the address converter <b>802</b> in the first embodiment. An exposure image <b>503</b> is obtained by exposing the image carrier based on image data after color misregistration correction for each pixel by the color misregistration correction unit <b>404</b>C. The exposure image <b>503</b> reveals that generated color misregistration is roughly corrected. As represented by the image data <b>502</b>, a positive subscanning direction in the bitmap memory <b>403</b> is downward in <figref idref="DRAWINGS">FIG. 5</figref>.</p>
<p id="p-0074" num="0073">As is apparent from <figref idref="DRAWINGS">FIG. 5</figref>, the address converter <b>802</b> sequentially accumulates &#x394;y<b>1</b> while the X address is updated. However, no carry to an integer digit occurs before an address Xa, so the Y address stays on the nth line. When the X address reaches Xa, a carry to an integer digit occurs, and the Y address is updated to indicate the (n+1)th line. In <figref idref="DRAWINGS">FIG. 5</figref>, an integer carry occurs when the X address reaches Xb, Xc, Xd . . . . Note that the cycle in which a carry occurs differs between regions <b>1</b> and <b>2</b> because the inclination is different between them.</p>
<p id="p-0075" num="0074">Color misregistration correction for smaller than one pixel, that is, correction processing for a misregistration amount corresponding to the decimal part of the color misregistration correction inclination &#x394;y by the tone correction unit <b>804</b> in the first embodiment will be described in detail with reference to <figref idref="DRAWINGS">FIG. 6</figref>.</p>
<p id="p-0076" num="0075">A misregistration amount corresponding to the decimal part is corrected by adjusting the tone ratio of dots adjacent in the subscanning direction. <b>6</b><i>a </i>exemplifies a main scanning line having an upward inclination to the right. <b>6</b><i>b </i>represents the bitmap image of a horizontal straight line before tone correction. <b>6</b><i>c </i>represents a corrected bitmap image to cancel color misregistration arising from the inclination of the main scanning line. To generate a corrected bitmap represented in <b>6</b><i>c</i>, dots adjacent in the subscanning direction undergo tone correction. A table <b>6</b><i>d </i>represents the relationship between the color misregistration correction inclination &#x394;y and the correction coefficient for tone correction. In this table, a value k is the integer part (decimal part is rounded down) of the color misregistration correction amount &#x394;y, and represents a correction amount in the subscanning direction for each pixel. &#x3b2; and &#x3b1; are weighting coefficients to perform correction for smaller than one pixel in the subscanning direction, and have the relationship given by equation (2). More specifically, &#x3b1; represents a distribution factor to a preceding dot (data from the register <b>805</b> in <figref idref="DRAWINGS">FIG. 7</figref>), and &#x3b2; represents a distribution factor to a dot of interest (data from the FIFO buffer <b>806</b> in <figref idref="DRAWINGS">FIG. 7</figref>).</p>
<p id="p-0077" num="0076"><b>6</b><i>e </i>represents a bitmap image obtained upon performing tone correction for dots adjacent in the subscanning direction in accordance with the correction coefficients &#x3b1; and &#x3b2; shown in <b>6</b><i>d</i>. <b>6</b><i>e </i>shows a bitmap image after color misregistration correction in the first embodiment. <b>6</b><i>f </i>represents the formed image of the straight line upon canceling the misregistration amount of the inclination in <b>6</b><i>a. </i></p>
<p id="p-0078" num="0077">The color misregistration correction processing by the color misregistration correction unit <b>404</b>C has been described. The color misregistration correction units <b>404</b>M, <b>404</b>Y, and <b>404</b>K for the remaining color components M, Y, and K also perform the same color misregistration correction. By executing color misregistration correction for each pixel in each print color, color misregistration between the print colors can be set to be smaller than one pixel.</p>
<p id="p-0079" num="0078">Multi-level Error Diffusion Processing</p>
<p id="p-0080" num="0079">As described above, the color misregistration correction unit <b>404</b>C performs tone correction based on adjacent pixels in order to cope with the decimal part of the Y address. A pixel value obtained after the tone correction contains the value of the decimal part. As a feature of the first embodiment, the value of the decimal part of a pixel value after tone correction undergoes multi-level error diffusion processing as halftone processing to save the value. The multi-level error diffusion processing will be exemplified.</p>
<p id="p-0081" num="0080">Assuming that pixel values read from the bitmap memory <b>403</b> are Cx,y=0 and Cx,y+1=255, and the correction coefficients are &#x3b2;=0.1 and &#x3b1;=0.9, the tone-corrected pixel value Hx,y is calculated according to equation (2):</p>
<p id="p-0082" num="0081">
<maths id="MATH-US-00001" num="00001">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mtable>
        <mtr>
          <mtd>
            <mrow>
              <mi>Hx</mi>
              <mo>,</mo>
              <mrow>
                <mi>y</mi>
                <mo>=</mo>
                <mi/>
                <mo>&#x2062;</mo>
                <mi>Cx</mi>
              </mrow>
              <mo>,</mo>
              <mrow>
                <mi>y</mi>
                <mo>+</mo>
                <mrow>
                  <mn>1</mn>
                  <mo>*</mo>
                  <mi>&#x3b2;</mi>
                </mrow>
                <mo>+</mo>
                <mi>Cx</mi>
              </mrow>
              <mo>,</mo>
              <mrow>
                <mi>y</mi>
                <mo>*</mo>
                <mi>&#x3b1;</mi>
              </mrow>
            </mrow>
          </mtd>
        </mtr>
        <mtr>
          <mtd>
            <mrow>
              <mo>=</mo>
              <mi/>
              <mo>&#x2062;</mo>
              <mrow>
                <mrow>
                  <mn>255</mn>
                  <mo>&#xd7;</mo>
                  <mn>0.1</mn>
                </mrow>
                <mo>+</mo>
                <mrow>
                  <mn>0</mn>
                  <mo>&#xd7;</mo>
                  <mn>0.9</mn>
                </mrow>
              </mrow>
            </mrow>
          </mtd>
        </mtr>
        <mtr>
          <mtd>
            <mrow>
              <mo>=</mo>
              <mi/>
              <mo>&#x2062;</mo>
              <mn>25.5</mn>
            </mrow>
          </mtd>
        </mtr>
      </mtable>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>4</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0083" num="0082">A tone-corrected pixel value Hx,y+1 in next scanning upon incrementing the reference Y address by one is calculated. When a pixel value read from the bitmap memory <b>403</b> is Cx,y+2=0, Hx,y+1 is calculated according to equation (2):</p>
<p id="p-0084" num="0083">
<maths id="MATH-US-00002" num="00002">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mtable>
        <mtr>
          <mtd>
            <mrow>
              <mi>Hx</mi>
              <mo>,</mo>
              <mrow>
                <mrow>
                  <mi>y</mi>
                  <mo>+</mo>
                  <mn>1</mn>
                </mrow>
                <mo>=</mo>
                <mi/>
                <mo>&#x2062;</mo>
                <mi>Cx</mi>
              </mrow>
              <mo>,</mo>
              <mrow>
                <mi>y</mi>
                <mo>+</mo>
                <mrow>
                  <mn>2</mn>
                  <mo>*</mo>
                  <mi>&#x3b2;</mi>
                </mrow>
                <mo>+</mo>
                <mi>Cx</mi>
              </mrow>
              <mo>,</mo>
              <mrow>
                <mi>y</mi>
                <mo>+</mo>
                <mrow>
                  <mn>1</mn>
                  <mo>*</mo>
                  <mi>&#x3b1;</mi>
                </mrow>
              </mrow>
            </mrow>
          </mtd>
        </mtr>
        <mtr>
          <mtd>
            <mrow>
              <mo>=</mo>
              <mi/>
              <mo>&#x2062;</mo>
              <mrow>
                <mrow>
                  <mn>0</mn>
                  <mo>&#xd7;</mo>
                  <mn>0.1</mn>
                </mrow>
                <mo>+</mo>
                <mrow>
                  <mn>255</mn>
                  <mo>&#xd7;</mo>
                  <mn>0.9</mn>
                </mrow>
              </mrow>
            </mrow>
          </mtd>
        </mtr>
        <mtr>
          <mtd>
            <mrow>
              <mo>=</mo>
              <mi/>
              <mo>&#x2062;</mo>
              <mn>229.5</mn>
            </mrow>
          </mtd>
        </mtr>
      </mtable>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>5</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
In this case, the X address remains unchanged from one in previous scanning, so the correction coefficients &#x3b2; and &#x3b1; are &#x3b2;=0.9 and &#x3b1;=0.1, similar to previous scanning.
</p>
<p id="p-0085" num="0084">As is apparent from equations (4) and (5), the tone-corrected pixel values Hx,y and Hx,y+1 contain values of the decimal part. A normal pixel value can take only an integer value. If a tone-corrected pixel value is rounded to an integer, no density is saved before and after tone correction. As a result of rounding in this example, a pixel value &#x201c;255&#x201d; is calculated into 26 according to equation (4) and 230 according to equation (5). The sum of 26 and 230 is 256, which is different from the original value &#x201c;255&#x201d;.</p>
<p id="p-0086" num="0085">To prevent this, the first embodiment saves the density by executing the following multi-level error diffusion processing while keeping the value of the decimal part of a tone-corrected pixel value.</p>
<p id="p-0087" num="0086">Multi-level error diffusion units <b>405</b>C, <b>405</b>M, <b>405</b>Y, and <b>405</b>K perform halftone processing based on multi-level error diffusion for image data which are output from the color misregistration correction units <b>404</b>C, <b>404</b>M, <b>404</b>Y, and <b>404</b>K after color misregistration correction and tone correction. Then, the multi-level error diffusion units <b>405</b>C, <b>405</b>M, <b>405</b>Y, and <b>405</b>K determine the quantization levels of respective pixel values.</p>
<p id="p-0088" num="0087">As described above, tone-corrected data has a pixel value of the decimal part. Also in multi-level error diffusion processing, calculation is done using bits enough to handle the value of the decimal part. Consequently, the pixel value of the decimal part is diffused as a quantization error to peripheral pixels, saving the density of the tone-corrected data. Since the arrangement of multi-level error diffusion processing is also the same between the respective colors, processing to the C component will be described.</p>
<p id="p-0089" num="0088">Five-level error diffusion processing executed for a thin line image after color misregistration correction processing will be exemplified with reference to <figref idref="DRAWINGS">FIG. 9</figref>. The address converter <b>802</b> performs address conversion for an input thin line image as shown in <b>9</b><i>a</i>, obtaining an image shown in <b>9</b><i>b</i>. The address-converted image further undergoes color misregistration correction, obtaining an image shown in <b>9</b><i>c</i>. The color misregistration-corrected image undergoes five-level error diffusion processing, obtaining an image shown in <b>9</b><i>d</i>. <b>9</b><i>e </i>represents the correspondence between each pixel value in the error-diffused image and the quantization level.</p>
<p id="p-0090" num="0089">In general, the number of tone levels of one dot representable by a printer is smaller than that of one pixel in image data, and halftone needs to be expressed using halftone processing. To appropriately achieve color misregistration correction, a toner image is desirably developed based on a color misregistration-corrected image in <b>9</b><i>c </i>of <figref idref="DRAWINGS">FIG. 9</figref>. In halftone processing after color misregistration correction, the state of the color misregistration-corrected image can be held as much as possible.</p>
<p id="p-0091" num="0090">In the image after five-level error diffusion in <b>9</b><i>d</i>, pixel values in five stages are applied to five quantization levels 0 to 4 obtained by error diffusion, as shown in <b>9</b><i>e</i>. The image after five-level error diffusion in <b>9</b><i>d </i>reveals that halftone processing is done to hold the state of the color misregistration-corrected image shown in <b>9</b><i>c. </i></p>
<p id="p-0092" num="0091">For comparison with the first embodiment, screen processing will be exemplified with reference to <figref idref="DRAWINGS">FIG. 10</figref>. The screen processing is halftone processing generally used in an electrophotographic color image forming apparatus. <b>10</b><i>a </i>to <b>10</b><i>c </i>in <figref idref="DRAWINGS">FIG. 10</figref> exemplify an input thin line image, an image having undergone address conversion, and an image having undergone color misregistration correction, similar to <b>9</b><i>a </i>to <b>9</b><i>c </i>in <figref idref="DRAWINGS">FIG. 9</figref>. The color misregistration-corrected image undergoes error diffusion processing by screen processing, obtaining an image shown in <b>10</b><i>d </i>of <figref idref="DRAWINGS">FIG. 10</figref>.</p>
<p id="p-0093" num="0092">General screen processing causes disconnection of a line as represented by <b>101</b> in <b>10</b><i>d</i>, and a density mismatch before and after screen processing as represented by <b>102</b><i>a </i>and <b>102</b><i>b </i>in <b>10</b><i>c </i>and <b>10</b><i>d</i>. It becomes difficult to hold the state of a color misregistration-corrected image. The disconnection of a thin line results in jaggies at the edge of a character or line art. The disconnection of a thin line and a change of the density differ between colors or color misregistration amounts. The difference generates moir&#xe9; at a secondary color portion where a plurality of colors overlap each other. To solve these problems, it is necessary to detect a thin line and perform special processing for holding the state of a color misregistration-corrected image.</p>
<p id="p-0094" num="0093">When multi-level error diffusion in the first embodiment is applied as halftone processing after color misregistration correction, the state of a color misregistration-corrected image can be held without any special processing to a thin line. Hence, generation of moir&#xe9; and generation of jaggies at the edge of a character or line art can be suppressed easily.</p>
<p id="p-0095" num="0094">The halftone processing by the multi-level error diffusion unit <b>405</b>C has been described. The multi-level error diffusion units <b>405</b>M, <b>405</b>Y, and <b>405</b>K for the remaining color components M, Y, and K can also execute the same processing.</p>
<p id="p-0096" num="0095">PWM Processing</p>
<p id="p-0097" num="0096">PWM (Pulse Width Modulation) processing units <b>407</b>C, <b>407</b>M, <b>407</b>Y, and <b>407</b>K receive images of the respective color components having undergone the above-described multi-level error diffusion processing. The PWM processing units <b>407</b>C, <b>407</b>M, <b>407</b>Y, and <b>407</b>K generate PWM signals as exposure control signals for driving exposure units <b>408</b>C, <b>408</b>M, <b>408</b>Y, and <b>408</b>K. The exposure units <b>408</b>C, <b>408</b>M, <b>408</b>Y, and <b>408</b>K perform exposure processing to image carriers <b>409</b>C, <b>409</b>M, <b>409</b>Y, and <b>409</b>K in accordance with the PWM signals. Since the arrangements of PWM processing and exposure processing are also the same between the respective colors, processing to the C component will be described.</p>
<p id="p-0098" num="0097">An image forming apparatus which performs exposure scanning can control the exposure in accordance with a well-known PWM signal. However, the exposure corresponding to the quantization level and the developed toner density do not have a linear relationship. If an error-diffused image shown in <b>9</b><i>d </i>of <figref idref="DRAWINGS">FIG. 9</figref> is directly converted into a PWM signal to perform exposure, it becomes difficult to hold a color misregistration-corrected image. In the first embodiment, therefore, the PWM processing unit <b>407</b>C converts a quantization level obtained by multi-level error diffusion processing into a PWM signal complying with the relationship between the exposure and the toner density.</p>
<p id="p-0099" num="0098"><figref idref="DRAWINGS">FIG. 11</figref> shows the relationship between the exposure and the toner density, and an example of conversion from a quantization level obtained by error diffusion into a PWM signal. In <figref idref="DRAWINGS">FIG. 11</figref>, a curve <b>121</b> represents the relationship between the exposure and the toner density. In this case, exposures corresponding to quantization levels 0 to 4 attained by five-level error diffusion are determined at points <b>122</b><i>a </i>to <b>122</b><i>e </i>on the curve <b>121</b>. More specifically, quantization levels 0 to 4 correspond to toner densities of 0%, 25%, 50%, 75%, and 100%, respectively. Exposures corresponding to the respective toner densities are determined to be 0%, 30%, 42%, 58%, and 100%. An error-diffused image is converted into a PWM signal, making linear the relationship between the quantization level and the toner density.</p>
<p id="p-0100" num="0099">By using the PWM signal generated in this way, the exposure unit <b>408</b>C is controlled to expose the image carrier <b>409</b>C. The PWM processing unit <b>407</b>C, exposure unit <b>408</b>C, and image carrier <b>409</b>C have been described. These processes can also be done for the remaining color components M, Y, and K.</p>
<p id="p-0101" num="0100">As described above, according to the first embodiment, an image forming apparatus which forms a color image using a plurality of colors executes color misregistration correction in a linear space before quantization (halftone processing). Further, the image forming apparatus performs quantization by multi-level error diffusion to maintain the state of the corrected image. The first embodiment can suppress generation of moir&#xe9; and generation of jaggies at the edge of a character or line art by a simple arrangement without requiring special processing to a thin line.</p>
<heading id="h-0007" level="1">Second Embodiment</heading>
<p id="p-0102" num="0101">The second embodiment according to the present invention will be described. The arrangement of an image forming apparatus in the second embodiment is almost the same as that in the first embodiment. Thus, the same reference numerals as those in the first embodiment denote the same parts, and a description thereof will not be repeated. As a feature of the second embodiment, the number of quantization levels is switched in accordance with the color misregistration amount when performing multi-level error diffusion processing described in the first embodiment.</p>
<p id="p-0103" num="0102"><figref idref="DRAWINGS">FIG. 12</figref> exemplifies switching of the number of quantization levels in the second embodiment. In <figref idref="DRAWINGS">FIG. 12</figref>, a print region indicated by the laser scanning direction is divided into region <b>1</b> having a large inclination of the color misregistration amount and region <b>2</b> having a small inclination of the color misregistration amount. In region <b>2</b> where the inclination of the color misregistration amount is small, the difference between adjacent color misregistration correction amounts is smaller than that in region <b>1</b> where the inclination is large. In other words, the pixel value after tone correction changes finely. To keep the color misregistration correction precision, it is desired to set many possible values (levels) for the PWM signal value for controlling the exposure unit. For this purpose, the number of quantization levels needs to be increased.</p>
<p id="p-0104" num="0103">The second embodiment switches the number of quantization levels as follows. In region <b>1</b> where the inclination of the color misregistration amount is large, five-level error diffusion processing is done. In region <b>2</b> where the inclination of the color misregistration amount is small, nine-level error diffusion processing is performed using a larger number of quantization levels.</p>
<p id="p-0105" num="0104">The processing to switch the number of quantization levels in the second embodiment will be explained with reference to the flowchart of <figref idref="DRAWINGS">FIG. 13</figref>.</p>
<p id="p-0106" num="0105">In step S<b>131</b>, a threshold TH to switch the number of quantization levels is determined. The threshold TH may be set in advance as a fixed value or switched appropriately in accordance with an image.</p>
<p id="p-0107" num="0106">In step S<b>132</b>, the inclination &#x394;y of the color misregistration amount output from a selector <b>85</b> is acquired from an address counter <b>801</b> based on the X address. In step S<b>133</b>, the inclination &#x394;y is compared with the threshold TH.</p>
<p id="p-0108" num="0107">According to the second embodiment, the number of quantization levels in multi-level error diffusion processing is switched based on the comparison result. For example, a quantization level count switching controller (not shown) in a color misregistration correction unit <b>404</b>C performs this switching control. More specifically, a quantization level determined by the color misregistration correction unit <b>404</b>C is sent to a multi-level error diffusion unit <b>405</b>C. The multi-level error diffusion unit <b>405</b>C executes error diffusion processing at the designated quantization level.</p>
<p id="p-0109" num="0108">If the inclination &#x394;y is larger than the threshold TH in step S<b>133</b>, five-level error diffusion processing is executed in step S<b>135</b>. If the inclination &#x394;y is equal to or smaller than the threshold TH, nine-level error diffusion processing is executed in step S<b>134</b>.</p>
<p id="p-0110" num="0109">After five- or nine-level error diffusion processing, the X address is updated in step S<b>136</b>. At this time, if the X address reaches the end of the target line, the Y address is updated, too.</p>
<p id="p-0111" num="0110">Finally in step S<b>137</b>, it is determined whether processing of one page has ended. If the processing has not ended, the process returns to step S<b>132</b> to repeat the series of processes.</p>
<p id="p-0112" num="0111">As described above, the second embodiment can implement finer color misregistration correction control by switching the number of quantization levels in multi-level error diffusion processing in accordance with the inclination of the color misregistration amount.</p>
<heading id="h-0008" level="1">Third Embodiment</heading>
<p id="p-0113" num="0112">The third embodiment according to the present invention will be described. The arrangement of an image forming apparatus in the third embodiment is different from that in the first embodiment in only a tone correction unit <b>804</b> in a color misregistration correction unit <b>404</b>C. The same reference numerals as those in the first embodiment denote the same parts, and a description thereof will not be repeated.</p>
<p id="p-0114" num="0113">In the first embodiment described above, multi-level error diffusion processing is applied to image data containing the value of the decimal part after tone correction. As described above, the multi-level error diffusion processing needs to perform calculation using bits containing the decimal part. This may complicate the multi-level error diffusion processing. To prevent this, the third embodiment saves a pixel value of the decimal part after tone correction without handling the value of the decimal part in multi-level error diffusion processing.</p>
<p id="p-0115" num="0114"><figref idref="DRAWINGS">FIG. 14</figref> is a block diagram showing the arrangement of the color misregistration correction unit <b>404</b>C in the third embodiment. In <figref idref="DRAWINGS">FIG. 14</figref>, the same reference numerals as those in <figref idref="DRAWINGS">FIG. 7</figref> in the first embodiment denote the same parts, and a description thereof will not be repeated.</p>
<p id="p-0116" num="0115">In <figref idref="DRAWINGS">FIG. 14</figref>, an address counter <b>801</b> performs the same processing as that in the first embodiment. More specifically, the address counter <b>801</b> outputs, to an address converter <b>802</b>, information necessary to generate addresses in the main scanning direction and subscanning direction to perform color misregistration correction processing according to equation (1). Also, the address counter <b>801</b> outputs, to the tone correction unit <b>804</b>, information representing the degree of shift in the subscanning direction.</p>
<p id="p-0117" num="0116">A multiplier <b>141</b> multiplies image data P<sub>n+1</sub>(x) output from a register <b>805</b> by a correction coefficient &#x3b2;. Letting Mo(x) be an integer value obtained by rounding the value of the decimal part, an output from the multiplier <b>141</b> is given by
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>Mo</i>(<i>x</i>)=<i>Q</i>(<i>P</i><sub>n+1</sub>(<i>x</i>)*&#x3b2;(<i>x</i>))=<i>P</i><sub>n+1</sub>(<i>x</i>)*&#x3b2;(<i>x</i>)+<i>Qe</i>&#x2003;&#x2003;(6)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where Q is a rounding and Qe is a rounding error.
</p>
<p id="p-0118" num="0117">An adder <b>143</b> subtracts the integer value Mo(x) output from the multiplier <b>141</b> from the image data P<sub>n+1</sub>(x) from the register <b>805</b>. The difference serves as an input value Fin(x) to be stored in a FIFO buffer <b>806</b>. The input value Fin(x) is given by</p>
<p id="p-0119" num="0118">
<maths id="MATH-US-00003" num="00003">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mtable>
        <mtr>
          <mtd>
            <mrow>
              <mrow>
                <mi>Fin</mi>
                <mo>&#x2061;</mo>
                <mrow>
                  <mo>(</mo>
                  <mi>x</mi>
                  <mo>)</mo>
                </mrow>
              </mrow>
              <mo>=</mo>
              <mi/>
              <mo>&#x2062;</mo>
              <mrow>
                <mrow>
                  <msub>
                    <mi>P</mi>
                    <mrow>
                      <mi>n</mi>
                      <mo>+</mo>
                      <mn>1</mn>
                    </mrow>
                  </msub>
                  <mo>&#x2061;</mo>
                  <mrow>
                    <mo>(</mo>
                    <mi>x</mi>
                    <mo>)</mo>
                  </mrow>
                </mrow>
                <mo>-</mo>
                <mrow>
                  <mi>Mo</mi>
                  <mo>&#x2061;</mo>
                  <mrow>
                    <mo>(</mo>
                    <mi>x</mi>
                    <mo>)</mo>
                  </mrow>
                </mrow>
              </mrow>
            </mrow>
          </mtd>
        </mtr>
        <mtr>
          <mtd>
            <mrow>
              <mo>=</mo>
              <mi/>
              <mo>&#x2062;</mo>
              <mrow>
                <mrow>
                  <msub>
                    <mi>P</mi>
                    <mrow>
                      <mi>n</mi>
                      <mo>+</mo>
                      <mn>1</mn>
                    </mrow>
                  </msub>
                  <mo>&#x2061;</mo>
                  <mrow>
                    <mo>(</mo>
                    <mi>x</mi>
                    <mo>)</mo>
                  </mrow>
                </mrow>
                <mo>-</mo>
                <mrow>
                  <mrow>
                    <msub>
                      <mi>P</mi>
                      <mrow>
                        <mi>n</mi>
                        <mo>+</mo>
                        <mn>1</mn>
                      </mrow>
                    </msub>
                    <mo>&#x2061;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mi>x</mi>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mo>*</mo>
                  <mrow>
                    <mi>&#x3b2;</mi>
                    <mo>&#x2061;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mi>x</mi>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                </mrow>
                <mo>-</mo>
                <mi>Qe</mi>
              </mrow>
            </mrow>
          </mtd>
        </mtr>
        <mtr>
          <mtd>
            <mrow>
              <mo>=</mo>
              <mi/>
              <mo>&#x2062;</mo>
              <mrow>
                <mrow>
                  <mrow>
                    <msub>
                      <mi>P</mi>
                      <mrow>
                        <mi>n</mi>
                        <mo>+</mo>
                        <mn>1</mn>
                      </mrow>
                    </msub>
                    <mo>&#x2061;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mi>x</mi>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mo>*</mo>
                  <mrow>
                    <mo>{</mo>
                    <mrow>
                      <mn>1</mn>
                      <mo>-</mo>
                      <mrow>
                        <mi>&#x3b2;</mi>
                        <mo>&#x2061;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mi>x</mi>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                    </mrow>
                    <mo>}</mo>
                  </mrow>
                </mrow>
                <mo>-</mo>
                <mi>Qe</mi>
              </mrow>
            </mrow>
          </mtd>
        </mtr>
        <mtr>
          <mtd>
            <mrow>
              <mo>=</mo>
              <mi/>
              <mo>&#x2062;</mo>
              <mrow>
                <mrow>
                  <mrow>
                    <msub>
                      <mi>P</mi>
                      <mrow>
                        <mi>n</mi>
                        <mo>+</mo>
                        <mn>1</mn>
                      </mrow>
                    </msub>
                    <mo>&#x2061;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mi>x</mi>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mo>*</mo>
                  <mrow>
                    <mi>&#x3b1;</mi>
                    <mo>&#x2061;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mi>x</mi>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                </mrow>
                <mo>-</mo>
                <mi>Qe</mi>
              </mrow>
            </mrow>
          </mtd>
        </mtr>
      </mtable>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>7</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0120" num="0119">Equation (7) reveals that Fin(x) contains the rounding error Qe. In tone correction for a line of interest, the rounding error Qe is propagated to the next line. The density is saved before and after tone correction. Since P<sub>n+1</sub>(x) and Mo(x) are integer values, Fin(x) is an integer value, too.</p>
<p id="p-0121" num="0120">In next scanning, Fin(x) stored in the FIFO buffer <b>806</b> is referred to as P<sub>na</sub>(x). The adder <b>143</b> adds P<sub>na</sub>(x) and an integer value Mo(x) calculated by weighting P<sub>n+1</sub>(x) in next scanning. The sum by the adder <b>143</b> is output as tone-corrected image data P&#x2032;<sub>n</sub>(x).</p>
<p id="p-0122" num="0121">P&#x2032;<sub>n</sub>(x) is calculated by addition/subtraction of P<sub>na</sub>(x), that is, the integer value Fin(x) and the integer value Mo(x), and is an integer value, too. This integer value already reflects a pixel value of the decimal part that is corrected by a tone correction unit <b>140</b>. Hence, the third embodiment can save a pixel value of the decimal part even after tone correction without handling the value of the decimal part in subsequent multi-level error diffusion processing.</p>
<p id="p-0123" num="0122">The tone correction unit <b>140</b> in the third embodiment can omit a memory for holding the correction coefficient &#x3b1;, and one multiplier from the arrangement of the tone correction unit <b>804</b> shown in <figref idref="DRAWINGS">FIG. 7</figref> in the first embodiment.</p>
<p id="p-0124" num="0123">As described above, the third embodiment can suppress the apparatus size because a pixel value of the decimal part after tone correction can be saved without handling the value of the decimal part in multi-level error diffusion processing.</p>
<heading id="h-0009" level="1">Other Embodiments</heading>
<p id="p-0125" num="0124">Aspects of the present invention can also be realized by a computer of a system or apparatus (or devices such as a CPU or MPU) that reads out and executes a program recorded on a memory device to perform the functions of the above-described embodiment(s), and by a method, the steps of which are performed by a computer of a system or apparatus by, for example, reading out and executing a program recorded on a memory device to perform the functions of the above-described embodiment(s). For this purpose, the program is provided to the computer for example via a network or from a recording medium of various types serving as the memory device (e.g., computer-readable medium).</p>
<p id="p-0126" num="0125">While the present invention has been described with reference to exemplary embodiments, it is to be understood that the invention is not limited to the disclosed exemplary embodiments. The scope of the following claims is to be accorded the broadest interpretation so as to encompass all such modifications and equivalent structures and functions.</p>
<p id="p-0127" num="0126">This application claims the benefit of Japanese Patent Application No. 2008-274864, filed Oct. 24, 2008, which is hereby incorporated by reference herein in its entirety.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-math idrefs="MATH-US-00001" nb-file="US08625156-20140107-M00001.NB">
<img id="EMI-M00001" he="11.26mm" wi="76.20mm" file="US08625156-20140107-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00002" nb-file="US08625156-20140107-M00002.NB">
<img id="EMI-M00002" he="11.26mm" wi="76.20mm" file="US08625156-20140107-M00002.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00003" nb-file="US08625156-20140107-M00003.NB">
<img id="EMI-M00003" he="15.16mm" wi="76.20mm" file="US08625156-20140107-M00003.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. An image forming apparatus which includes, for respective printing materials of a plurality of colors, a plurality of color image forming sections each for forming a visible image by exposure scanning and development on an image carrier, and forms a color image by superimposing visible images formed on a print medium by the plurality of color image forming sections, each of the plurality of color image forming sections comprising:
<claim-text>an exposure shift amount storage unit configured to store shift amount information representing a shift amount between an ideal scanning line and an actual scanning line in an exposure scanning direction on the image carrier;</claim-text>
<claim-text>an image data storage unit configured to store image data to be formed;</claim-text>
<claim-text>address conversion unit configured to convert a readout address in the image data storage unit, based on the shift amount information stored in the exposure shift amount storage unit, and read out image data in accordance with the converted address;</claim-text>
<claim-text>a tone correction unit configured to perform, based on the address, tone correction for the image data read out by the address conversion unit;</claim-text>
<claim-text>a multi-level error diffusion unit configured to perform quantization by multi-level error diffusion processing for the image data having undergone the tone correction by the tone correction unit; and</claim-text>
<claim-text>an exposure control signal generation unit configured to generate an exposure control signal to perform exposure scanning of the image data, based on a quantization level of the quantization by the multi-level error diffusion unit,</claim-text>
<claim-text>wherein the multi-level error diffusion unit switches the number of quantization levels based on the shift amount information stored in the exposure shift amount storage unit.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein
<claim-text>the tone correction unit performs the tone correction to contain a value of a decimal part in a pixel value of the image data, and</claim-text>
<claim-text>the multi-level error diffusion unit performs quantization for the image data containing the value of the decimal part.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the exposure shift amount storage unit stores, as the shift amount information, information representing a plurality of points on the ideal scanning line on the image carrier and information representing a distance between the ideal scanning line and the actual scanning line at each point.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The apparatus according to <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein
<claim-text>the address conversion unit includes</claim-text>
<claim-text>an inclination calculation unit configured to calculate, for each region of the scanning line based on the shift amount information stored in the exposure shift amount storage unit, inclination information representing a inclination of the actual scanning line in the exposure scanning direction,</claim-text>
<claim-text>an X address generation unit configured to generate an X address corresponding to the exposure scanning direction out of readout addresses in the image data storage unit,</claim-text>
<claim-text>an accumulation unit configured to accumulate inclination information for each region corresponding to the X address, and</claim-text>
<claim-text>a Y address generation unit configured to generate a Y address corresponding to a conveyance direction of the print medium by using a value of an integer part of an accumulation result of the accumulation unit as an offset amount, and</claim-text>
<claim-text>the tone correction unit generates tone-corrected pixel data from data of two pixels adjacent in a Y address direction, based on a value of a decimal part of the accumulation result of the accumulation unit.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the multi-level error diffusion unit switches the number of quantization levels to be smaller for a larger shift amount represented by the shift amount information.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the tone correction unit performs the tone correction by propagating, to a pixel value of a next line, a rounding error generated when a pixel value of a line of interest is rounded to an integer value.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. A method of controlling an image forming apparatus which includes, for respective printing materials of a plurality of colors, a plurality of color image forming sections each for forming a visible image by exposure scanning and development on an image carrier, and forms a color image by superimposing visible images formed on a print medium by the plurality of color image forming sections, the method comprising for each of the plurality of color image forming sections:
<claim-text>an exposure shift amount acquisition step of acquiring shift amount information representing a shift amount between an ideal scanning line and an actual scanning line in an exposure scanning direction on the image carrier;</claim-text>
<claim-text>an image data storage step of storing image data to be formed in an image memory;</claim-text>
<claim-text>an address conversion step of converting a readout address in the image memory, based on the shift amount information, and reading out image data in accordance with the converted address;</claim-text>
<claim-text>a tone correction step of performing, based on the address, tone correction for the image data read out in the address conversion step;</claim-text>
<claim-text>a multi-level error diffusion step of performing quantization by multi-level error diffusion processing for the image data having undergone the tone correction in the tone correction step; and</claim-text>
<claim-text>an exposure control signal generation step of generating an exposure control signal based on a quantization level of the quantization in the multi-level error diffusion step,</claim-text>
<claim-text>wherein the multi-level error diffusion step switches the number of quantization levels based on the shift amount information stored in the exposure shift amount storage step.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. An image forming apparatus which generates an exposure control signal for forming an image on a print medium by exposure scanning on an image carrier, comprising:
<claim-text>an image data storage unit configured to store image data to be formed;</claim-text>
<claim-text>a read out unit configured to convert a readout address in the image data storage unit, based on a shift amount between an ideal scanning line and an actual scanning line in an exposure scanning direction on the image carrier, and read out image data in accordance with the converted address;</claim-text>
<claim-text>a tone correction unit configured to perform tone correction for the image data read out by the read out unit by performing weighted interpolation for each pixel values of a pixel of interest and pixels in a line adjacent to the pixel of interest according to the shift amount;</claim-text>
<claim-text>a quantization unit configured to perform quantization of the tone corrected image data; and</claim-text>
<claim-text>a generation unit configured to generate an exposure control signal to perform exposure scanning of the image data quantized by the quantization unit;</claim-text>
<claim-text>wherein the quantization unit switches the number of quantization levels based on the shift amount.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The apparatus according to <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein further comprising exposure shift amount storage unit configured to store shift amount information representing the shift amount.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. An image forming apparatus which generates an exposure control signal for forming an image on a print medium by exposure scanning on an image carrier, comprising:
<claim-text>an image data storage unit configured to store image data to be formed;</claim-text>
<claim-text>a read out unit configured to convert a readout address in the image data storage unit, based on a shift amount between an ideal scanning line and an actual scanning line in an exposure scanning direction on the image carrier, and read out image data in accordance with the converted address;</claim-text>
<claim-text>a tone correction unit configured to perform tone correction for the image data read out by the read out unit by performing weighted interpolation for each pixel values of a pixel of interest and pixels in a line adjacent to the pixel of interest according to the shift amount; and</claim-text>
<claim-text>a generation unit configured to generate an exposure control signal to perform exposure scanning of the image data, based on the tone corrected image data;</claim-text>
<claim-text>wherein the tone correction unit comprises:
<claim-text>an output unit configured to output an integer part obtained by rounding a decimal part of a result of performing weighted interpolation for a pixel value of a pixel of interest in the (n+1)th line based on the shift amount of the (n+1)th line; and</claim-text>
<claim-text>a calculation unit configured to calculate a difference value between the pixel value of the pixel of interest in the (n+1)th line and the integer part in the (n+1)th line,</claim-text>
</claim-text>
<claim-text>wherein the tone correction unit performs tone correction for the pixel of interest in the (n+1)th line, based on the integer part in the (n+1)th line output from the output unit and a difference value obtained by applying the calculation by the calculation unit to pixels adjacent to the pixel of interest in the nth line, and</claim-text>
<claim-text>wherein the tone correction unit outputs, as a tone correction result for the pixel of interest in the (n+1)th line, a result obtained by adding the integer the integer part in the (n+1)th line output from the output unit to the difference value obtained by applying the calculation by the calculation unit to pixels adjacent to the pixel of interest in the nth line.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The apparatus according to <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the tone correction unit generates tone-corrected pixel data by performing weighted interpolation for data of two pixels adjacent in the Y address direction.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. A method of controlling an image forming apparatus which generates an exposure control signal for forming an image on a print medium by exposure scanning on an image carrier, comprising:
<claim-text>an image data storage step of storing image data to be formed in an image memory;</claim-text>
<claim-text>a read out step of converting a readout address in the image memory, based on a shift amount between an ideal scanning line and an actual scanning line in an exposure scanning direction on the image carrier, and reading out image data in accordance with the converted address;</claim-text>
<claim-text>a tone correction step of performing tone correction for the image data read out in the read out step by performing weighted interpolation for each pixel values of a pixel of interest and pixels in a line adjacent to the pixel of interest according to the shift amount;</claim-text>
<claim-text>a quantization step of performing quantization of the tone corrected image data; and</claim-text>
<claim-text>a generation step of generating an exposure control signal to perform exposure scanning of the image data quantized in the quantization step,</claim-text>
<claim-text>wherein the quantization step switches the number of quantization levels based on the shift amount.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. A method of controlling an image forming apparatus which generates an exposure control signal for forming an image on a print medium by exposure scanning on an image carrier, comprising:
<claim-text>an image data storage step of storing image data to be formed in an image memory;</claim-text>
<claim-text>a read out step of converting a readout address in the image memory, based on a shift amount between an ideal scanning line and an actual scanning line in an exposure scanning direction on the image carrier, and reading out image data in accordance with the converted address;</claim-text>
<claim-text>a tone correction step of performing tone correction for the image data read out in the read out step by performing weighted interpolation for each pixel values of a pixel of interest and pixels in a line adjacent to the pixel of interest according to the shift amount; and</claim-text>
<claim-text>a generation step of generating an exposure control signal to perform exposure scanning of the image data, based on the tone corrected image data;</claim-text>
<claim-text>wherein the tone correction step comprises:
<claim-text>an output step of outputting an integer part obtained by rounding a decimal part of a result of performing weighted interpolation for a pixel value of a pixel of interest in the (n+1)th line based on the shift amount of the (n+1)th line; and</claim-text>
<claim-text>a calculation step of calculating a difference value between the pixel value of the pixel of interest in the (n+1)th line and the integer part in the (n+1)th line,</claim-text>
</claim-text>
<claim-text>wherein the tone correction step performs tone correction for the pixel of interest in the (n+1)th line, based on the integer part in the (n+1)th line output from the output step and a difference value obtained by applying the calculation in the calculation step to pixels adjacent to the pixel of interest in the nth line, and</claim-text>
<claim-text>wherein the tone correction step outputs, as a tone correction result for the pixel of interest in the (n+1)th line, a result obtained by adding the integer the integer part in the (n+1)th line output from the output step to the difference value obtained by applying the calculation by the calculation step to pixels adjacent to the pixel of interest in the nth line.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. A non-transitory computer-readable storage medium storing a program for controlling a computer to control an image forming apparatus which includes, for respective printing materials of a plurality of colors, a plurality of color image forming sections each for forming a visible image by exposure scanning and development on an image carrier, and forms a color image by superimposing visible images formed on a print medium by the plurality of color image forming sections, each of the plurality of color image forming sections, the program controlling the computer to function as:
<claim-text>an exposure shift amount storage unit configured to store shift amount information representing a shift amount between an ideal scanning line and an actual scanning line in an exposure scanning direction on the image carrier;</claim-text>
<claim-text>an image data storage unit configured to store image data to be formed;</claim-text>
<claim-text>an address conversion unit configured to convert a readout address in the image data storage unit, based on the shift amount information stored in the exposure shift amount storage unit, and read out image data in accordance with the converted address;</claim-text>
<claim-text>a tone correction unit configured to perform, based on the address, tone correction for the image data read out by the address conversion unit;</claim-text>
<claim-text>a multi-level error diffusion unit configured to perform quantization by multi-level error diffusion processing for the image data having undergone the tone correction by the tone correction unit; and</claim-text>
<claim-text>an exposure control signal generation unit configured to generate an exposure control signal to perform exposure scanning of the image data, based on a quantization level of the quantization by the multi-level error diffusion unit,</claim-text>
<claim-text>wherein the multi-level error diffusion unit switches the number of quantization levels based on the shift amount information stored in the exposure shift amount storage unit.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. A non-transitory computer-readable storage medium storing a program for controlling a computer to control an image forming apparatus which generates an exposure control signal for forming an image on a print medium by exposure scanning on an image carrier, the program controlling the computer to function as:
<claim-text>an image data storage unit configured to store image data to be formed;</claim-text>
<claim-text>a read out unit configured to convert a readout address in the image data storage unit, based on a shift amount between an ideal scanning line and an actual scanning line in an exposure scanning direction on the image carrier, and read out image data in accordance with the converted address;</claim-text>
<claim-text>a tone correction unit configured to perform tone correction for the image data read out by the read out unit by performing weighted interpolation for each pixel values of a pixel of interest and pixels in a line adjacent to the pixel of interest according to the shift amount;</claim-text>
<claim-text>quantization unit configured to perform quantization of the tone corrected image data; and</claim-text>
<claim-text>a generation unit configured to generate an exposure control signal to perform exposure scanning of the image data quantized by the quantization unit,</claim-text>
<claim-text>wherein the quantization unit switches the number of quantization levels based on the shift amount.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. A non-transitory computer-readable storage medium storing a program for controlling a computer to control an image forming apparatus which generates an exposure control signal for forming an image on a print medium by exposure scanning on an image carrier, the program controlling the computer to function as:
<claim-text>an image data storage unit configured to store image data to be formed;</claim-text>
<claim-text>a read out unit configured to convert a readout address in the image data storage unit, based on a shift amount between an ideal scanning line and an actual scanning line in an exposure scanning direction on the image carrier, and read out image data in accordance with the converted address;</claim-text>
<claim-text>a tone correction unit configured to perform tone correction for the image data read out by the read out unit by performing weighted interpolation for each pixel values of a pixel of interest and pixels in a line adjacent to the pixel of interest according to the shift amount; and</claim-text>
<claim-text>a generation unit configured to generate an exposure control signal to perform exposure scanning of the image data, based on the tone corrected image data;</claim-text>
<claim-text>wherein the tone correction unit comprises:
<claim-text>an output unit configured to output an integer part obtained by rounding a decimal part of a result of performing weighted interpolation for a pixel value of a pixel of interest in the (n+1)th line based on the shift amount of the (n+1)th line; and</claim-text>
<claim-text>a calculation unit configured to calculate a difference value between the pixel value of the pixel of interest in the (n+1)th line and the integer part in the (n+1)th line,</claim-text>
</claim-text>
<claim-text>wherein the tone correction unit performs tone correction for the pixel of interest in the (n+1)th line, based on the integer part in the (n+1)th line output from the output unit and a difference value obtained by applying the calculation by the calculation unit to pixels adjacent to the pixel of interest in the nth line, and</claim-text>
<claim-text>wherein the tone correction unit outputs, as a tone correction result for the pixel of interest in the (n+1)th line, a result obtained by adding the integer the integer part in the (n+1)th line output from the output unit to the difference value obtained by applying the calculation by the calculation unit to pixels adjacent to the pixel of interest in the nth line. </claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
