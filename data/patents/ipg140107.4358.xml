<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625430-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625430</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13368759</doc-number>
<date>20120208</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>CN</country>
<doc-number>2009 1 0108900</doc-number>
<date>20090812</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>129</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>12</main-group>
<subgroup>26</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20090101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>W</subclass>
<main-group>4</main-group>
<subgroup>00</subgroup>
<symbol-position>L</symbol-position>
<classification-value>N</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20090101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>W</subclass>
<main-group>24</main-group>
<subgroup>00</subgroup>
<symbol-position>L</symbol-position>
<classification-value>N</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>15</main-group>
<subgroup>173</subgroup>
<symbol-position>L</symbol-position>
<classification-value>N</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>370235</main-classification>
<further-classification>455433</further-classification>
<further-classification>4554561</further-classification>
<further-classification>709224</further-classification>
</classification-national>
<invention-title id="d2e71">Method and system for implementing smoothing of signaling traffic, and home location register</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6181937</doc-number>
<kind>B1</kind>
<name>Joensuu</name>
<date>20010100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6526282</doc-number>
<kind>B1</kind>
<name>Kadoshima et al.</name>
<date>20030200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455453</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2003/0027571</doc-number>
<kind>A1</kind>
<name>Karlsson et al.</name>
<date>20030200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455433</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2006/0014531</doc-number>
<kind>A1</kind>
<name>Nam et al.</name>
<date>20060100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455418</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2007/0287475</doc-number>
<kind>A1</kind>
<name>Jeong et al.</name>
<date>20071200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>4554566</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2009/0029677</doc-number>
<kind>A1</kind>
<name>Choi et al.</name>
<date>20090100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455411</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2010/0057485</doc-number>
<kind>A1</kind>
<name>Luft</name>
<date>20100300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>705  1</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>CN</country>
<doc-number>1455604</doc-number>
<kind>A</kind>
<date>20031100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>CN</country>
<doc-number>1984461</doc-number>
<kind>A</kind>
<date>20070600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>CN</country>
<doc-number>101400038</doc-number>
<kind>A</kind>
<date>20090400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>CN</country>
<doc-number>101483854</doc-number>
<kind>A</kind>
<date>20090700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>CN</country>
<doc-number>101686454</doc-number>
<kind>A</kind>
<date>20100300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>KR</country>
<doc-number>20080056374</doc-number>
<kind>A</kind>
<date>20080600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00014">
<othercit>Written Opinion of the International Searching Authority dated Nov. 18, 2010 in connection with International Patent Application No. PCT/CN2010/075866.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00015">
<othercit>International Search Report dated Nov. 18, 2010 in connection with International Patent Application No. PCT/CN2010/075866.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>21</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>None</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>4</number-of-drawing-sheets>
<number-of-figures>6</number-of-figures>
</figures>
<us-related-documents>
<continuation>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>PCT/CN2010/075866</doc-number>
<date>20100811</date>
</document-id>
<parent-status>PENDING</parent-status>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>13368759</doc-number>
</document-id>
</child-doc>
</relation>
</continuation>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20120134269</doc-number>
<kind>A1</kind>
<date>20120531</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Li</last-name>
<first-name>Shiqian</first-name>
<address>
<city>Xi'an</city>
<country>CN</country>
</address>
</addressbook>
<residence>
<country>CN</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Ye</last-name>
<first-name>Sihai</first-name>
<address>
<city>Shenzhen</city>
<country>CN</country>
</address>
</addressbook>
<residence>
<country>CN</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Xu</last-name>
<first-name>Ridong</first-name>
<address>
<city>Shenzhen</city>
<country>CN</country>
</address>
</addressbook>
<residence>
<country>CN</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Li</last-name>
<first-name>Shiqian</first-name>
<address>
<city>Xi'an</city>
<country>CN</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Ye</last-name>
<first-name>Sihai</first-name>
<address>
<city>Shenzhen</city>
<country>CN</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Xu</last-name>
<first-name>Ridong</first-name>
<address>
<city>Shenzhen</city>
<country>CN</country>
</address>
</addressbook>
</inventor>
</inventors>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Huawei Technologies Co., Ltd.</orgname>
<role>03</role>
<address>
<city>Shenzhen</city>
<country>CN</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Han</last-name>
<first-name>Clemence</first-name>
<department>2414</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">Embodiments of the present invention provide a method and a system for implementing smoothing of signaling traffic, and a home location register. The method includes: when a link between an HLR and an exchange device is congested or the HLR is overloaded, receiving, by the HLR, a location update request message of a user equipment UE sent by the exchange device, and returning a location update response message to the exchange device, so as to inform the exchange device that the location update of the UE is successful, where the HLR does not send user data corresponding to the UE to the exchange device; and when the link between the HLR and the exchange device is normal, the load of the HLR is normal, or the UE performs a service, sending, by the HLR, the user data corresponding to the UE to the exchange device.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="176.70mm" wi="155.96mm" file="US08625430-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="85.43mm" wi="162.98mm" file="US08625430-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="181.44mm" wi="156.29mm" file="US08625430-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="182.96mm" wi="159.77mm" file="US08625430-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="222.93mm" wi="120.65mm" file="US08625430-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This application is a continuation of International Application No. PCT/CN2010/075866, filed on Aug. 11, 2010, which claims priority to Chinese Patent Application No. 200910108900.7, filed on Aug. 12, 2009, both of which are hereby incorporated by reference in their entireties.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">TECHNICAL FIELD</heading>
<p id="p-0003" num="0002">The present invention relates to the field of mobile communications, and in particular, to a method and a system for implementing smoothing of signaling traffic, and a home location register.</p>
<heading id="h-0003" level="1">BACKGROUND</heading>
<p id="p-0004" num="0003">In a mobile communication system, two typical entities exist for saving user data, one is a home location register (HLR, Home Location Register) of a user equipment (UE, User Equipment), and the other one is a visitor location register (VLR, visitor location register) of the UE. The HLR manages information about a subscribed mobile user, all user data is stored in the HLR, and an address of a VLR currently visited by the UE is recorded in the user data. The VLR stores information for calling or other purposes of a mobile user visiting the VLR, and the information records an address of a location area that the UE resides. The user data in the HLR is static and permanent in a user survival period, while user data in the VLR is dynamic and exists only when the UE roams in the VLR. Lost user data in the VLR may be re-obtained from the HLR through a location update or data recovery.</p>
<p id="p-0005" num="0004">During the implementation of the present invention, the inventors find:</p>
<p id="p-0006" num="0005">In a case, after the VLR is reset due to a VLR upgrade, restarting caused by a fault, or another reason, registration of the user needs to be performed, that is, the VLR sends a location update request message to the HLR; or as for a machine user, when power supply is restored after mains power-off, a great number of machine users may be restarted and location updates may be initiated in batch. If a great number of registrations are performed in the VLR at the same time, message traffic at a D interface between the VLR and the HLR jumps sharply, and message congestion and a system breakdown easily occur.</p>
<p id="p-0007" num="0006">In another case, when the HLR is overloaded, the HLR refuses a location update service; however, since the location update of the UE is automatically performed by a terminal, the terminal may make repeated retries till the location update is successful when the location update fails. In an existing network, it is found through actual detection that, a part of terminals may make repeated retries after a failure till the location update is successful, so the HLR fails to achieve an objective of reducing traffic through refusing the location update request message, which may lead to a higher load, a worsened condition or even the system breakdown.</p>
<heading id="h-0004" level="1">SUMMARY</heading>
<p id="p-0008" num="0007">Embodiments of the present invention provide a method and a system for implementing smoothing of signaling traffic, and a home location register, so as to improve a success ratio of a location update of a UE when a link between an HLR and a VLR is congested or the HLR is overloaded, and avoid a system breakdown due to message congestion.</p>
<p id="p-0009" num="0008">An embodiment of the present invention provides a method for implementing smoothing of signaling traffic, which includes:</p>
<p id="p-0010" num="0009">when a link between an HLR and an exchange device is congested or the HLR is overloaded, receiving, by the HLR, a location update request message of a user equipment UE sent by the exchange device, and returning a location update response message to the exchange device, so as to inform the exchange device that the location update of the UE is successful, where the HLR does not send user data corresponding to the UE to the exchange device; and</p>
<p id="p-0011" num="0010">when the link between the HLR and the exchange device is normal, the load of the HLR is normal, or the UE performs a service, sending, by the HLR, the user data corresponding to the UE to the exchange device.</p>
<p id="p-0012" num="0011">An embodiment of the present invention provides a home location register HLR, which includes:</p>
<p id="p-0013" num="0012">a receiving unit, configured to receive a location update request message of a user equipment UE sent by an exchange device;</p>
<p id="p-0014" num="0013">a sending unit, configured to return a location update response message to the exchange device when a link between the home location register HLR and the exchange device is congested or the HLR is overloaded, so as to inform the exchange device that the location update of the UE is successful, where the HLR does not send user data corresponding to the UE to the exchange device; and</p>
<p id="p-0015" num="0014">an insertion unit, configured to enable the HLR to send the user data corresponding to the UE to the exchange device when the link between the HLR and the exchange device is normal, the load of the HLR is normal, or the UE performs a service.</p>
<p id="p-0016" num="0015">An embodiment of the present invention provides a system for implementing smoothing of signaling traffic, which includes a home location register HLR and an exchange device, where</p>
<p id="p-0017" num="0016">the exchange device is configured to send a location update request message of a user equipment UE to the HLR; and</p>
<p id="p-0018" num="0017">the HLR is configured to receive the location update request message sent by the exchange device when a link between the HLR and the exchange device is congested or the HLR is overloaded, and return a location update response message to the exchange device, so as to inform the exchange device that the location update of the UE is successful, where the HLR does not send user data corresponding to the UE to the exchange device; and when the link between the HLR and the exchange device is normal, the load of the HLR is normal, or the UE performs a service, the HLR sends the user data corresponding to the UE to the exchange device.</p>
<p id="p-0019" num="0018">The embodiments of the present invention provide the method and the system for implementing smoothing of signaling traffic, and the home location register, which reduces the signaling traffic and the load of the HLR by canceling the sending of the user data corresponding to the UE to the exchange device in the case that the link between the HLR and the exchange device is congested or the HLR is overloaded, thereby effectively achieving an objective of controlling system traffic and avoiding a vicious circle of repeated location updates and the HLR breakdown when link signaling congestion or HLR overload occurs. Furthermore, when the link between the HLR and the exchange device is normal, the load of the HLR is normal, or the UE performs a service, the HLR sends the user data corresponding to the UE to the exchange device, thereby achieving normal performing of the service.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 1</figref> is a schematic flowchart of a method for implementing smoothing of signaling traffic according to an embodiment of the present invention;</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 2</figref> is a schematic flow chart of another method for implementing smoothing of signaling traffic according to an embodiment of the present invention;</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 3</figref> is a schematic flow chart of another method for implementing smoothing of signaling traffic according to an embodiment of the present invention;</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 4</figref> is a schematic structural diagram of a home location register according to an embodiment of the present invention;</p>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 5</figref> is a schematic structural diagram of another home location register according to an embodiment of the present invention; and</p>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. 6</figref> is a schematic structural diagram of a system for implementing smoothing of signaling traffic according to an embodiment of the present invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0006" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0026" num="0025">It should be noted that, in an existing mobile communication system, an interface between a mobile switching center (MSC, Mobile Switching Center) and an HLR is a C interface, and an interface between a VLR and the HLR is a D interface. Currently, the MSC is generally integrated with the VLR, so an information exchange interface between the HLR and the MSC/VLR is described by using a CD interface in the present invention. Meanwhile, since the MSC and VLR are generally combined into one device, the MSC or the VLR described in the embodiments of the present invention may represent the MSC/VLR. In addition, a VMSC mentioned in the embodiments of the present invention is a visited MSC and indicates an MSC where a UE resides; and a PMSC mentioned in the embodiments of the present invention is a previous MSC where the UE resides, that is, an MSC where the UE resides before moving to the VMSC.</p>
<p id="p-0027" num="0026">The inventors find that, a location update is closely coupled to downloading of user data, and an existing location update includes two parts: one part is an update of information about a location visited by the UE, and the other part is that the HLR sends the user data to a visited VLR. User data information is more than location information, and a sending mechanism from the HLR to the VLR may be performing the sending multiple times. One time of failure may cause the whole sending of the user data to fail, thereby causing a failure of the whole location update. The failure of the location update may further cause that a mobile phone initiates the location update again, and a vicious circle is formed accordingly, which finally leads to a breakdown of the whole system.</p>
<p id="p-0028" num="0027">Since message traffic of the CD interface is asymmetric, generally, signaling link congestion occurs from the HLR to the VLR first, and at this time, if the HLR can take a measure to ensure success of the location update of the UE first, a series of problems caused by the failure of the location update can be avoided. The location update of the UE has two objectives: One is to update location information, so that the UE can be found when being called, and the other one is to obtain the user data from the HLR, where the user data is obtained so as to be used when a service is provided for the UE. It should be understood that, a proportion of a UE that performs a service at the same time when a location of the UE is updated is very low, so at this time, it is not mandatory to download the user data for a UE that does not perform a service. Therefore, when the signaling link congestion occurs at the CD interface, the HLR may perform a location update operation first and does not perform obtaining of the user data temporarily, and only data downloading for the UE that performs a service is ensured first. In this way, use of the UE is not affected, and meanwhile, a problem occurred in the case of message congestion at the CD interface. That is to say, the two functions of the location update and the obtaining the user data are logically separated; in a normal case, processing may be performed according to an existing manner; and when the message congestion at the CD interface or the HLR overload occurs, a separation manner may be adopted for processing to control the signaling traffic and the load of the HLR, thereby avoiding an occurrence of a severe consequence.</p>
<p id="p-0029" num="0028">As shown in <figref idref="DRAWINGS">FIG. 1</figref>, a method for implementing smoothing of signaling traffic provided in an embodiment of the present invention includes:</p>
<p id="p-0030" num="0029">Step <b>101</b>: When a link between an HLR and an exchange device is congested or the HLR is overloaded, the HLR receives a location update request message of a user equipment UE sent by the exchange device, and returns a location update response message to the exchange device, so as to inform the exchange device that the location update of the UE is successful, where the HLR does not send user data corresponding to the UE to the exchange device.</p>
<p id="p-0031" num="0030">Step <b>102</b>: When the link between the HLR and the exchange device is normal, the load of the HLR is normal, or the UE performs a service, the HLR sends the user data corresponding to the UE to the exchange device.</p>
<p id="p-0032" num="0031">It should be noted that, the exchange device is a mobile switching center MSC, a serving GPRS support node (SGSN, Serving GPRS Support Node), or a VLR. For example, when a system is a Global System for Mobile Communication (GSM, Global System for Mobile communication), a Code Division Multiple Access (CDMA, Code Division Multiple Access), or a Universal Mobile Telecommunication System (UMTS, Universal Mobile Telecommunication System), the exchange device may be the MSC or the VLR (which may be generically referred to as an MSC/VLR); and when the system is a General Packet Radio Service (GPRS, General Packet Radio Service), the exchange device may be the SGSN.</p>
<p id="p-0033" num="0032">It should be noted that, the user data mentioned in this embodiment of this application may be user subscription data.</p>
<p id="p-0034" num="0033">This embodiment of the present invention provides the method for implementing smoothing of signaling traffic, which reduces the signaling traffic and the load of the HLR by canceling the sending of the user data to the exchange device in the case that the link between the HLR and the exchange device is congested or the HLR is overloaded, thereby effectively achieving an objective of controlling system traffic and avoiding a vicious circle of repeated location updates and an HLR breakdown when link signaling congestion or HLR overload occurs. Furthermore, when the link between the HLR and the exchange device is normal, the load of the HLR is normal, or the UE performs a service, the HLR sends the user data to the exchange device, thereby achieving normal performing of the service.</p>
<p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. 2</figref> shows another method for implementing smoothing of signaling traffic according to an embodiment of the present invention, and this embodiment of the present invention is applied to a GSM/UMTS system, and includes:</p>
<p id="p-0036" num="0035">Step <b>201</b>: An HLR receives a location update request message of a UE sent by a VMSC (that is, an MSC of a visited domain where the UE resides, and in a specific practical application scenario, the VMSC may be replaced by an MSC/VLR or a VLR), where the location update request message is used to perform a location update of the UE; and the location update request message may include a separation capability identifier of the VMSC, and the separation capability identifier is used to indicate whether the VMSC has a capability of making a location update function and a user data downloading function separated from each other.</p>
<p id="p-0037" num="0036">Step <b>202</b>: When a CD interface link between the HLR and the VMSC/VLR is congested or the HLR is overloaded, the HLR can know, according to the separation capability identifier of the VMSC included in the location update request message that is sent by the VMSC, that the VMSC has the separation capability, and the HLR sends a location update response message to the VMSC, where the location update response message includes a fake online identifier, the fake online identifier is used to indicate that the UE is in a fake online state, and the fake online state means that the HLR informs the VMSC that the location update of the UE is successful and does not send user data to the VMSC. The HLR may further record the fake online identifier of the UE, that is, set the UE in the fake online state.</p>
<p id="p-0038" num="0037">Step <b>203</b>: The VMSC receives the location update response message sent by the HLR. Since the location update response message includes the fake online identifier, the VMSC may confirm that the UE is in the fake online state and inform the UE of the success of the location update.</p>
<p id="p-0039" num="0038">Step <b>204</b>: When the CD interface link between the HLR and the VMSC/VLR is normal or the load of the HLR is normal, the HLR detects the UE in the fake online state according to the fake online identifier and sends a user data message to the VMSC corresponding to the UE in the fake online state.</p>
<p id="p-0040" num="0039">Step <b>205</b>: The VMSC receives the user data message and records the user data in the VLR.</p>
<p id="p-0041" num="0040">It should be noted that, in an existing GSM/UMTS system, the sending the user data is a necessary step in a location update process. If the location update response message is directly returned without sending the user data, the location update process fails, and the MSC does not send a location update success response to the UE. In this case, the UE may repeatedly initiate the location update. Therefore, for the MSC, the separation capability identifier needs to be added for indicating that the MSC has the capability of making the location update and the downloading of the user data separated from each other. After the MSC/VLR initiates the location update request message to the HLR, if the user data sent by the HLR is not received while a location update reception message is directly received, the MSC returns location update success to the UE. In step <b>201</b>, the VMSC informs the HLR of the separation capability of the VMSC through the separation capability identifier included in the location update request message, so that a separation policy may be adopted for the location update sent by the VMSC when the CD interface link between the HLR and the VMSC/VLR is congested or the HLR is overloaded. The separation capability identifier of the VMSC may not be included in the location update request message in step <b>201</b>, but information about separation capabilities of all MSCs is informed to the HLR through a pre-configuration manner or is sent to the VLR through another message.</p>
<p id="p-0042" num="0041">It should be further noted that, according to an existing location update process, after the location update of the UE is successful, and the HLR returns the location update response message to the VMSC, the HLR may send a user data deletion message to a PMSC/VLR for instructing the PMSC/VLR to delete locally saved user data information of the UE. However, in the case that the link between the HLR and the PMSC/VLR is congested or the HLR is overloaded, a direct signaling exchange between the HLR and the PMSC/VLR may further aggravate the signaling traffic and increase the load of the HLR, thereby increasing a risk of an HLR breakdown. Therefore, an improved design for the foregoing process is performed in this embodiment of the present invention, in which after step <b>202</b>, the HLR does not send the user data deletion message to the PMSC/VLR, but the HLR initiates a user data deletion process to the PMSC/VLR in the case that the signaling traffic on the link between the HLR and the VMSC/VLR is normal or the load of the HLR is normal. That is, after step <b>202</b>, the method may further include:</p>
<p id="p-0043" num="0042">Step <b>203</b>&#x2032;: After the HLR returns the location update response message to the VMSC, the HLR does not immediately send the user data deletion message to the PMSC/VLR, but initiates the user data deletion process to the PMSC/VLR (that is, delivering a location cancel request message to the PMSC) in the case that the signaling traffic on the link between the HLR and the VMSC/VLR is normal or the load of the HLR is normal.</p>
<p id="p-0044" num="0043">As for step <b>203</b>&#x2032;, it should be noted that, step <b>203</b>&#x2032; has no sequential correlation with steps <b>204</b> and <b>205</b>, and may be performed before, after or between steps <b>204</b> and <b>205</b>. On the other hand, in some specific application architecture, in the case that the VMSC/VLR and the PMSC/VLR are connected to the HLR through a same STP, or that the VMSC/VLR and the PMSC/VLR share a part of the link, that the HLR does not send the user data deletion message to the PMSC/VLR may effectively reduce the link signaling traffic and the load of the HLR, thereby avoiding the link congestion and a system breakdown.</p>
<p id="p-0045" num="0044">In this embodiment, step <b>204</b> and step <b>205</b> are subsequent processes of sending the user data to the VMSC/VLR by the HLR in the case that the link signaling traffic is normal or the load of the HLR is normal, which may be referred to as manner 1 herein. Likewise, the HLR may send the user data when the UE performs a service, so that the service can be normally performed, where the service may include a calling service and a called service. Correspondingly, the HLR may send the user data to the VMSC/VLR by adopting the following two manners.</p>
<p id="p-0046" num="0045">Manner 2: When the UE performs a called service, a calling-side device obtains routing information of the UE from the HLR, and the HLR judges whether the UE is in the fake online state according to whether the UE includes the fake online identifier. If the UE includes the fake online identifier, it is determined that the UE is in the fake online state, and a user data sending process is initiated to the VMSC/VLR to send the user data to the VMSC/VLR where the UE resides, so that the subsequent service can be normally performed. That is, manner 2 includes the following steps:</p>
<p id="p-0047" num="0046">Step <b>206</b>: The HLR receives, from the calling-side device, a message for obtaining the routing information of the UE, judges whether the UE is in the fake online state according to whether the UE includes the fake online identifier, where the fake online state represents that the HLR returns the location update response message to the VMSC/VLR where the UE resides, but does not send the user data.</p>
<p id="p-0048" num="0047">Step <b>207</b>: If the UE is in the fake online state, the HLR initiates the user data sending process to send the user data to the VMSC/VLR where the UE resides, so that the subsequent service can be normally performed.</p>
<p id="p-0049" num="0048">Manner 3: When the UE performs a calling service, the VMSC/VLR where the UE resides judges whether the UE is in the fake online state, that is, judges whether the UE has the fake online identifier; if yes, it proves that the VMSC/VLR does not store the user data information of the UE, and the UE is in the fake online state. The VMSC/VLR actively initiates a data recovery process to the HLR to request the HLR to send the user data to the VMSC/VLR. That is, manner 3 includes:</p>
<p id="p-0050" num="0049">Step <b>208</b>: The VMSC/VLR receives the calling service initiated by the UE, judges whether the UE is in the fake online state, and if yes, initiates the data recovery process to the HLR, that is, sends a user data recovery request to the HLR, where the user data recovery request carries number information of the UE.</p>
<p id="p-0051" num="0050">Step <b>209</b>: The HLR receives the user data recovery request and sends the user data to the VMSC/VLR.</p>
<p id="p-0052" num="0051">Through the foregoing three manners, the VMSC/VLR obtains the user data of the UE, which ensures normal performing of the subsequent service. After the user data is obtained, the method further includes:</p>
<p id="p-0053" num="0052">Step <b>210</b>: After sending the user data of the UE to the VMSC/VLR through the foregoing three manners, the HLR deletes the fake online identifier of the UE, that is, the UE is not in the fake online state any longer.</p>
<p id="p-0054" num="0053">Step <b>211</b>: After obtaining the user data of the UE in the fake online state, the VMSC/VLR deletes the fake online identifier of the UE.</p>
<p id="p-0055" num="0054">Furthermore, step <b>203</b>&#x2032; may be performed after step <b>210</b>, that is, the PMSC/VLR is instructed to delete the user data of the UE after the HLR deletes the fake online identifier of the UE.</p>
<p id="p-0056" num="0055">This embodiment of the present invention provides the another method for implementing smoothing of signaling traffic and the method is based on the GSM/UMTS system, which reduces the signaling traffic at the CD interface and the load of the HLR by canceling the sending of the user data to the VMSC/VLR in the case that the CD interface link between the HLR and the VMSC/VLR is congested or the HLR is overloaded, thereby effectively achieving an objective of controlling system traffic and avoiding a vicious circle of repeated location updates and the HLR breakdown when CD interface signaling congestion or HLR overload occurs. Furthermore, when the CD interface link between the HLR and the VMSC/VLR is normal, the load of the HLR is normal, or the UE performs a service, the HLR sends the user data to the VMSC/VLR, thereby achieving the normal performing of the service.</p>
<p id="p-0057" num="0056">The embodiment corresponding to <figref idref="DRAWINGS">FIG. 2</figref> is based on the GSM/UMTS system. Likewise, as for a GPRS system, a processing process for smoothing signaling traffic is similar to the embodiment corresponding to <figref idref="DRAWINGS">FIG. 2</figref>, except that the VMSC in the embodiment corresponding to <figref idref="DRAWINGS">FIG. 2</figref> is replaced by an SGSN.</p>
<p id="p-0058" num="0057"><figref idref="DRAWINGS">FIG. 3</figref> shows another method for implementing smoothing of signaling traffic according to an embodiment of the present invention. This embodiment of the present invention is applied to a CDMA system, and the method includes:</p>
<p id="p-0059" num="0058">Step <b>301</b>: A VMSC receives a location update request message sent by a UE, and forwards the location update request message to an HLR, where the location update request message may include number information of the UE.</p>
<p id="p-0060" num="0059">Step <b>302</b>: When a CD interface link between the HLR and the VMSC/VLR is congested or the HLR is overloaded, the HLR allocates a fake online identifier to the UE to set the UE in a fake online state, returns a location update response message to the VMSC, and sets a value of AuthorizationPeriod in the location update response message to 1, where the location update response message does not include user data, that is, the HLR does not deliver the user data corresponding to the UE to the VMSC/VLR.</p>
<p id="p-0061" num="0060">Step <b>303</b>: The VMSC receives the location update response message and informs the UE of success of the location update.</p>
<p id="p-0062" num="0061">Step <b>304</b>: When the CD interface link between the HLR and the VMSC/VLR is normal or the load of the HLR is normal, the HLR detects the UE in the fake online state according to the fake online identifier and sends a user data message to the VMSC corresponding to the UE in the fake online state.</p>
<p id="p-0063" num="0062">Step <b>305</b>: The VMSC receives the user data message and records the user data in the VLR.</p>
<p id="p-0064" num="0063">Similar to the foregoing embodiment, in this embodiment of the present invention, after the HLR returns the location update response message to the VMSC, the HLR may not send a user data deletion message to a PMSC/VLR, instead, the HLR initiates a user data deletion process to the PMSC/VLR in the case that the link signaling traffic between the HLR and the VMSC/VLR is normal or the load of the HLR is normal. That is, after step <b>302</b>, the method may further include:</p>
<p id="p-0065" num="0064">Step <b>303</b>&#x2032;: After the HLR returns the location update response message to the VMSC, the HLR does not immediately send the user data deletion message to the PMSC/VLR, but initiates the user data deletion process to the PMSC/VLR in the case that the link signaling traffic between the HLR and the VMSC/VLR is normal or the load of the HLR is normal.</p>
<p id="p-0066" num="0065">As for step <b>303</b>&#x2032;, it should be noted that, step <b>303</b>&#x2032; has no sequential correlation with steps <b>304</b> and <b>305</b>, and may be performed before, after or between steps <b>304</b> and <b>305</b>. On the other hand, in some specific application architecture, the VMSC/VLR and the PMSC/VLR is connected to the HLR through a same STP, or in the case that the VMSC/VLR and the PMSC/VLR share a part of the link, that the HLR does not send the user data deletion message to the PMSC/VLR may effectively reduce the link signaling traffic and the load of the HLR, thereby avoiding link congestion and a system breakdown.</p>
<p id="p-0067" num="0066">In this embodiment, step <b>304</b> and step <b>305</b> are subsequent processes of sending the user data to the VMSC/VLR by the HLR in the case that the link signaling traffic is normal or the load of the HLR is normal, which may be referred to as manner 1 herein. Likewise, the HLR may send the user data when the UE performs a service, so that the service can be normally performed, where the service may include a calling service and a called service. Correspondingly, the HLR may send the user data to the VMSC/VLR by adopting the following two manners.</p>
<p id="p-0068" num="0067">Manner 2: When the UE performs a called service, a calling-side device obtains routing information of the UE from the HLR, and the HLR judges whether the UE is in the fake online state according to whether the UE includes the fake online identifier. If the UE includes the fake online identifier, it is determined that the UE is in the fake online state, and a user data sending process is initiated to the VMSC/VLR to send the user data to the VMSC/VLR where the UE resides, so that the subsequent service can be normally performed. That is, manner 2 includes the following steps:</p>
<p id="p-0069" num="0068">Step <b>306</b>: The HLR receives, from the calling-side device, a message for obtaining the routing information of the UE, judges whether the UE is in the fake online state according to whether the UE includes the fake online identifier, where the fake online state represents that the HLR returns the location update response message to the VMSC/VLR where the UE resides, but does not send the user data.</p>
<p id="p-0070" num="0069">Step <b>307</b>: If the UE is in the fake online state, the HLR initiates the user data sending process to send the user data to the VMSC/VLR where the UE resides, so that the subsequent service can be normally performed.</p>
<p id="p-0071" num="0070">Manner 3: When the UE performs a calling service, the VMSC/VLR where the UE resides judges whether a value of AuthorizationPeriod corresponding to the UE is 1. If yes, the VMSC/VLR actively initiates a location update process to the HLR. Correspondingly, manner 3 includes:</p>
<p id="p-0072" num="0071">Step <b>308</b>: The VMSC/VLR receives the calling service initiated by the UE and judges whether the value of AuthorizationPeriod corresponding to the UE is 1. If yes, the VMSC/VLR actively initiates the location update process to the HLR.</p>
<p id="p-0073" num="0072">Step <b>309</b>: The HLR receives the location update request message sent by the VMSC/VLR, and sends the user data to the VMSC/VLR. It should be noted that in this step, the HLR may also determine whether the UE is in the fake online state according to whether the HLR records the fake online identifier of the UE, if yes, delivers the user data, and if not, determines, according to a current state of the HLR, whether to deliver the user data (for example, when the link between the HLR and the exchange device is congested or the HLR is overloaded, the HLR may not deliver the user data to the VMSC).</p>
<p id="p-0074" num="0073">Through the foregoing three manners, the VMSC/VLR obtains the user data of the UE, which ensures normal performing of the subsequent service. After the user data is obtained, the method further includes:</p>
<p id="p-0075" num="0074">Step <b>310</b>: After sending the user data of the UE to the VMSC/VLR through the foregoing three manners, the HLR deletes the fake online identifier of the UE, that is, the UE is not in the fake online state any longer.</p>
<p id="p-0076" num="0075">Step <b>311</b>: After obtaining the user data of the UE in the fake online state, the VMSC/VLR sets the value of AuthorizationPeriod corresponding to the UE to 0, that is, when the UE performs the calling service, it is not required to initiate the location update to the HLR.</p>
<p id="p-0077" num="0076">Furthermore, step <b>303</b>&#x2032; may be performed after step <b>310</b>, that is, the PMSC/VLR is instructed to delete the user data of the UE after the HLR deletes the fake online identifier of the UE.</p>
<p id="p-0078" num="0077">This embodiment of the present invention provides the another method for implementing smoothing of signaling traffic and the method is based on the CDMA system, which reduces the signaling traffic at the CD interface and the load of the HLR by canceling the sending of the user data to the VMSC/VLR in the case that the CD interface link between the HLR and the VMSC/VLR is congested or the HLR is overloaded, thereby effectively achieving an objective of controlling system traffic and avoiding a vicious circle of repeated location updates and an HLR breakdown when CD interface signaling congestion or HLR overload occurs. Furthermore, when the CD interface link between the HLR and the VMSC/VLR is normal, the load of the HLR is normal, or the UE performs a service, the HLR sends the user data to the VMSC/VLR, thereby achieving the normal performing of the service.</p>
<p id="p-0079" num="0078">In addition to the foregoing method embodiments, correspondingly, an embodiment of the present invention further provides a system for implementing smoothing of signaling traffic and a home location register HLR.</p>
<p id="p-0080" num="0079"><figref idref="DRAWINGS">FIG. 4</figref> shows a home location register HLR according to an embodiment of the present invention, which includes a receiving unit <b>401</b>, a sending unit <b>402</b> and an insertion unit <b>403</b>.</p>
<p id="p-0081" num="0080">The receiving unit <b>401</b> is configured to receive a location update request message of a user equipment UE sent by an exchange device.</p>
<p id="p-0082" num="0081">The sending unit <b>402</b> is configured to return a location update response message to the exchange device when a link between the home location register HLR and the exchange device is congested or the HLR is overloaded, so as to inform the exchange device that the location update of the UE is successful, where the HLR does not send user data corresponding to the UE to the exchange device.</p>
<p id="p-0083" num="0082">The insertion unit <b>403</b> is configured to enable the HLR to send the user data corresponding to the UE to the exchange device when the link between the HLR and the exchange device is normal, the load of the HLR is normal, or the UE performs a service.</p>
<p id="p-0084" num="0083">The exchange device is a mobile switching center MSC, a serving GPRS support node SGSN or a VLR.</p>
<p id="p-0085" num="0084">More particularly, <figref idref="DRAWINGS">FIG. 5</figref> shows another home location register according to an embodiment of the present invention, which specifically provides further details of <figref idref="DRAWINGS">FIG. 4</figref> and further includes a state identification unit <b>404</b> and an obtaining unit <b>405</b> in addition to the receiving unit <b>401</b>, the sending unit <b>402</b> and the insertion unit <b>403</b>.</p>
<p id="p-0086" num="0085">The state identification unit <b>404</b> is configured to allocate a fake online identifier to the UE after the receiving unit <b>401</b> receives the location update request message of the UE and when the link between the HLR and the exchange device is congested or the HLR is overloaded, where the fake online identifier is used to indicate that the UE is in a fake online state.</p>
<p id="p-0087" num="0086">When the system is a Global System for Mobile Communication GSM, a General Packet Radio Service System CPRS or a Universal Mobile Telecommunication System UMTS, the HLR further includes the obtaining unit <b>405</b>, where the obtaining unit <b>405</b> is configured to obtain a separation capability of the exchange device. Further, the obtaining unit <b>405</b> is specifically configured to obtain a separation capability identifier of the exchange device from the location update request message received by the receiving unit <b>401</b>, where the separation capability identifier is used to indicate that the exchange device has a capability of making a location update function and a user data downloading function separated from each other.</p>
<p id="p-0088" num="0087">In a specific implementation manner, the insertion unit <b>403</b> is specifically configured to enable the HLR to determine the UE in the fake online state according to the fake online identifier, and send the user data corresponding to the UE to the exchange device corresponding to the UE when the link between the HLR and the exchange device is normal and the load of the HLR is normal.</p>
<p id="p-0089" num="0088">In another specific implementation manner, the insertion unit <b>403</b> is specifically configured to judge whether the UE is in the fake online state according to whether the UE includes the fake online identifier when the UE performs a calling service or a called service. If yes, the HLR sends the user data to the exchange device corresponding to the UE.</p>
<p id="p-0090" num="0089">In an existing location update process, after receiving a location update request message sent by the exchange device where the UE currently resides, the HLR needs to initiate a user data deletion process to a previous exchange device PMSC where the UE resides. When the link between the HLR and the exchange device where the UE resides is congested or the HLR is overloaded, the user data deletion process may further aggregate the signal traffic and increase the load of the HLR. The process is changed in this embodiment of the present invention, that is, the HLR does not initiate the user data deletion process temporarily when the link between the HLR and the exchange device where the UE resides is congested or the HLR is overloaded. Correspondingly, when the system returns to be normal, the sending unit <b>402</b> is further configured to initiate the user data deletion process to the previous exchange device where the UE resides to delete user data that correspond to the UE and is recorded in the previous exchange device when the link between the HLR and the exchange device is normal or the load of the HLR is normal.</p>
<p id="p-0091" num="0090">After the insertion unit <b>403</b> sends the user data corresponding to the UE to the exchange device, the HLR needs to delete the fake online identifier of the UE recorded by the HLR, that is, the state identification unit <b>404</b> is further configured to delete the fake online identifier of the UE recorded by the state identification unit after the insertion unit <b>403</b> sends the user data corresponding to the UE to the exchange device where the UE resides.</p>
<p id="p-0092" num="0091"><figref idref="DRAWINGS">FIG. 6</figref> shows a system for smoothing signaling traffic according to an embodiment of the present invention, which includes an HLR <b>601</b> and an exchange device <b>602</b> where a UE resides.</p>
<p id="p-0093" num="0092">The exchange device <b>602</b> is configured to send a location update request message of the user equipment UE to the HLR <b>601</b>.</p>
<p id="p-0094" num="0093">The HLR <b>601</b> is configured to receive the location update request message sent by the exchange device <b>602</b> when a link between the HLR <b>601</b> and the exchange device <b>602</b> is congested or the HLR is overloaded, so as to inform the exchange device <b>602</b> that the location update of the UE is successful, where the HLR <b>601</b> does not send user data corresponding to the UE to the exchange device <b>602</b>; and when the link between the HLR <b>601</b> and the exchange device <b>602</b> is normal, the load of the HLR <b>601</b> is normal, or the UE performs a service, the HLR <b>601</b> sends the user data corresponding to the UE to the exchange device <b>602</b>.</p>
<p id="p-0095" num="0094">The embodiments of the present invention provides the system for smoothing signaling traffic and the home location register, which reduces the signaling traffic and the load of the HLR by canceling the sending of the user data to the exchange device where the UE resides in the case that the link between the HLR and the exchange device where the UE resides is congested or the HLR is overloaded, thereby effectively achieving an objective of controlling system traffic and avoiding a vicious circle of repeated location updates and an HLR breakdown when link signaling congestion or HLR overload occurs. Furthermore, when the link between the HLR and the exchange device where the UE resides is normal, the load of the HLR is normal, or the UE performs a service, the HLR sends the user data to the exchange device where the UE resides, thereby achieving normal performing of the service.</p>
<p id="p-0096" num="0095">Those of ordinary skill in the art should understand that all or a part of the steps of the methods according to the embodiments may be implemented by a program instructing relevant hardware. The program may be stored in a computer readable storage medium, such as a ROM/a RAM, a magnetic disk, and a CD-ROM.</p>
<p id="p-0097" num="0096">The foregoing described only exemplary embodiments of the present invention. It should be noted by persons of ordinary skill in the art that modifications and variations may be made without departing from the principle of the present invention, which should also be construed to be covered by the protection scope of the present invention.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method for implementing smoothing of signaling traffic, the method comprising:
<claim-text>when a link between a home location register (HLR) and an exchange device is congested or the HLR is overloaded, receiving, by the HLR, a location update request message of a user equipment (UE) sent by the exchange device, and returning a location update response message to the exchange device, so as to inform the exchange device that the location update of the UE is successful, wherein the HLR does not send user data corresponding to the UE to the exchange device; and</claim-text>
<claim-text>sending, by the HLR, the user data corresponding to the UE to the exchange device when the link between the HLR and the exchange device is normal, the load of the HLR is normal, or the UE performs a service.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein after the HLR receives the location update request message of the user equipment UE sent by the exchange device, the method further comprises:
<claim-text>allocating, by the HLR, a fake online identifier to the UE, wherein the fake online identifier is used to indicate that the UE is in a fake online state.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the location update response message comprises the fake online identifier or a value of AuthorizationPeriod in the location update response message as 1.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method according to <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein the sending, by the HLR, the user data corresponding to the UE to the exchange device when the link between the HLR and the exchange device is normal, the load of the HLR is normal, or the UE performs the service specifically comprises:
<claim-text>when the UE is a caller, judging, by the exchange device, according to whether the UE comprises the fake online identifier, whether it is required to request the user data of the UE from the HLR; and</claim-text>
<claim-text>if yes, initiating, by the exchange device, a user data request to the HLR, and receiving the user data that corresponds to the UE and is returned by the HLR.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method according to <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein the exchange device is a mobile switching center (MSC), and the sending, by the HLR, the user data corresponding to the UE to the exchange device when the link between the HLR and the exchange device is normal, the load of the HLR is normal, or the UE performs the service specifically comprises:
<claim-text>when the UE is a caller, judging, by the MSC, according to the value of AuthorizationPeriod of the UE, whether it is required to initiate a location update to the HLR; and</claim-text>
<claim-text>if yes, initiating, by the MSC, the location update to the HLR, and receiving the user data that corresponds to the UE and is returned by the HLR.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the sending, by the HLR, the user data corresponding to the UE to the exchange device when the link between the HLR and the exchange device is normal, the load of the HLR is normal, or the UE performs the service specifically comprises:
<claim-text>when the link between the HLR and the exchange device is normal or the load of the HLR is normal, determining, by the HLR, the UE in the fake online state according to the fake online identifier, and sending the user data corresponding to the UE to the exchange device corresponding to the UE.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the sending, by the HLR, the user data corresponding to the UE to the exchange device when the link between the HLR and the exchange device is normal, the load of the HLR is normal, or the UE performs the service specifically comprises:
<claim-text>when the UE is a called party, receiving, by the HLR, a routing request sent by a calling-side device, and judging whether the UE is in the fake online state according to whether the UE comprises the fake online identifier; and</claim-text>
<claim-text>if yes, sending, by the HLR, the user data to the exchange device corresponding to the UE.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein after the sending, by the HLR, the user data corresponding to the UE to the exchange device, the method further comprises:
<claim-text>deleting, by the HLR, the fake online identifier of the UE recorded in the HLR.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein before the returning the location update response message to the exchange device, the method further comprises:
<claim-text>obtaining, by the HLR, a separation capability of the exchange device.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The method according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the location update request message comprises a separation capability identifier of the exchange device, and the separation capability identifier is used to indicate that the exchange device has a capability of making a location update function and a user data downloading function separated from each other; and
<claim-text>correspondingly, the obtaining, by the HLR, the separation capability of the exchange device specifically is obtaining, by the HLR, the separation capability identifier of the exchange device from the location update request message.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein after the returning the location update response message to the exchange device, and before the link between the HLR and the exchange device is normal or the load of the HLR is normal, the HLR does not initiate a user data deletion process to a previous exchange device where the UE resides.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>when the link between the HLR and the exchange device is normal or the load of the HLR is normal, initiating, by the HLR, a user data deletion process to a previous exchange device where the UE resides to delete the user data that corresponds to the UE and is recorded in the previous exchange device where the UE resides.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. A home location register (HLR), comprising:
<claim-text>a receiving unit, configured to receive a location update request message of a user equipment (UE) sent by an exchange device;</claim-text>
<claim-text>a sending unit, configured to return a location update response message to the exchange device when a link between the home location register HLR and the exchange device is congested or the HLR is overloaded, so as to inform the exchange device that the location update of the UE is successful, wherein the HLR does not send user data corresponding to the UE to the exchange device; and</claim-text>
<claim-text>an insertion unit, configured to enable the HLR to send the user data corresponding to the UE to the exchange device when the link between the HLR and the exchange device is normal, the load of the HLR is normal, or the UE performs a service.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The HLR according to <claim-ref idref="CLM-00013">claim 13</claim-ref>, further comprising:
<claim-text>a state identification unit, configured to allocate a fake online identifier to the UE after the receiving unit receives the location update request message of the UE and when the link between the HLR and the exchange device is congested or the HLR is overloaded, wherein the fake online identifier is used to indicate that the UE is in a fake online state.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The HLR according to <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein the insertion unit is specifically configured to determine, by the HLR, the UE in the fake online state according to the fake online identifier, and send the user data corresponding to the UE to the exchange device corresponding to the UE when the link between the HLR and the exchange device is normal and the load of the HLR is normal.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The HLR according to <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein the state identification unit is further configured to delete the fake online identifier of the UE recorded in the state identification unit after the insertion unit sends the user data corresponding to the UE to the exchange device.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The HLR according to <claim-ref idref="CLM-00013">claim 13</claim-ref>, further comprising:
<claim-text>an obtaining unit, configured to obtain a separation capability of the exchange device.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The HLR according to <claim-ref idref="CLM-00017">claim 17</claim-ref>, wherein the obtaining unit is specifically configured to obtain a separation capability identifier of the exchange device from the location update request message received by the receiving unit, wherein the separation capability identifier is used to indicate that the exchange device has a capability of making a location update function and a user data downloading function separated from each other.</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The HLR according to <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the insertion unit is specifically configured to judge whether the UE is in a fake online state according to whether the UE comprises a fake online identifier when the UE performs a calling service or a called service, and if yes, enable the HLR to send the user data to the exchange device corresponding to the UE.</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The HLR according to <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the sending unit is further configured to initiate a user data deletion process to a previous exchange device where the UE resides to delete the user data corresponding to the UE recorded in the previous exchange device when the link between the HLR and the exchange device is normal or the load of the HLR is normal.</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. A system for smoothing signaling traffic, the system comprising a home location register (HLR) and an exchange device, wherein
<claim-text>the exchange device is configured to send a location update request message of a user equipment (UE) to the HLR; and</claim-text>
<claim-text>the HLR is configured to receive the location update request message sent by the exchange device when a link between the HLR and the exchange device is congested or the HLR is overloaded, and return a location update response message to the exchange device, so as to inform the exchange device that the location update of the UE is successful, wherein the HLR does not send user data corresponding to the UE to the exchange device; and when the link between the HLR and the exchange device is normal, the load of the HLR is normal, or the UE performs a service, the HLR sends the user data corresponding to the UE to the exchange device. </claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
