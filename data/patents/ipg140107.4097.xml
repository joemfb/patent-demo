<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625166-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625166</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13097706</doc-number>
<date>20110429</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2010-114518</doc-number>
<date>20100518</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>207</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>T</subclass>
<main-group>5</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>K</subclass>
<main-group>15</main-group>
<subgroup>00</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>N</subclass>
<main-group>1</main-group>
<subgroup>40</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>358  326</main-classification>
<further-classification>358  306</further-classification>
<further-classification>358  323</further-classification>
</classification-national>
<invention-title id="d2e71">Image processing method and apparatus utilizing halftone processing and test patch</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5768410</doc-number>
<kind>A</kind>
<name>Ohta et al.</name>
<date>19980600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>5907415</doc-number>
<kind>A</kind>
<name>Yabe</name>
<date>19990500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>6023344</doc-number>
<kind>A</kind>
<name>Yabe</name>
<date>20000200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>6359703</doc-number>
<kind>B1</kind>
<name>Yabe</name>
<date>20020300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>7251422</doc-number>
<kind>B2</kind>
<name>Tokuyama et al.</name>
<date>20070700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>7289294</doc-number>
<kind>B2</kind>
<name>Lee et al.</name>
<date>20071000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2008/0088862</doc-number>
<kind>A1</kind>
<name>Harashima et al.</name>
<date>20080400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2008/0246982</doc-number>
<kind>A1</kind>
<name>Kaneko et al.</name>
<date>20081000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358  19</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2009/0109509</doc-number>
<kind>A1</kind>
<name>Yabe</name>
<date>20090400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>2010/0053646</doc-number>
<kind>A1</kind>
<name>Shishikura et al.</name>
<date>20100300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>2011/0141525</doc-number>
<kind>A1</kind>
<name>Ng et al.</name>
<date>20110600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358  306</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>CN</country>
<doc-number>1673889</doc-number>
<kind>A</kind>
<date>20050900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>CN</country>
<doc-number>101166222</doc-number>
<kind>A</kind>
<date>20080400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>JP</country>
<doc-number>2004-240112</doc-number>
<kind>A</kind>
<date>20040800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>JP</country>
<doc-number>2004-355798</doc-number>
<kind>A</kind>
<date>20041200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00016">
<document-id>
<country>JP</country>
<doc-number>2007-208639</doc-number>
<kind>A</kind>
<date>20070800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00017">
<document-id>
<country>JP</country>
<doc-number>2010-054577</doc-number>
<kind>A</kind>
<date>20100300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00018">
<othercit>Chinese Official Action dated Jul. 24, 2013 in counterpart Chinese Application 201110129497.3.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>9</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>None</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>13</number-of-drawing-sheets>
<number-of-figures>24</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20110286047</doc-number>
<kind>A1</kind>
<date>20111124</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Yabe</last-name>
<first-name>Takashi</first-name>
<address>
<city>Yokohama</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Yabe</last-name>
<first-name>Takashi</first-name>
<address>
<city>Yokohama</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Fitzpatrick, Cella, Harper &#x26; Scinto</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Canon Kabushiki Kaisha</orgname>
<role>03</role>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Reinier</last-name>
<first-name>Barbara</first-name>
<department>2672</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">Upon setting of a halftone process of an initial setting, there is such a problem that graininess deteriorates due to an aging change or an environmental change. To solve this problem, an image processing apparatus executes a halftone process on a test image for tone correction and prints the processed test image; forms a tone correction table in accordance with read values from the printed test image; obtains graininess from a read value of a low density portion of a tone correction patch of the test image for the tone correction; discriminates whether the obtained graininess exceeds a predetermined reference level; and changes a setting of the halftone process so as to reduce the graininess when it is discriminated that the obtained graininess exceeds the predetermined reference level.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="202.18mm" wi="159.77mm" file="US08625166-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="158.75mm" wi="180.51mm" file="US08625166-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="228.85mm" wi="166.88mm" file="US08625166-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="247.99mm" wi="143.76mm" file="US08625166-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="248.67mm" wi="158.07mm" file="US08625166-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="247.99mm" wi="161.46mm" file="US08625166-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="234.36mm" wi="137.58mm" file="US08625166-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="244.52mm" wi="182.54mm" file="US08625166-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="220.73mm" wi="167.56mm" file="US08625166-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="245.96mm" wi="192.11mm" file="US08625166-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="259.50mm" wi="158.07mm" file="US08625166-20140107-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="224.79mm" wi="174.41mm" file="US08625166-20140107-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="221.40mm" wi="166.88mm" orientation="landscape" file="US08625166-20140107-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00013" num="00013">
<img id="EMI-D00013" he="141.73mm" wi="94.66mm" file="US08625166-20140107-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0002" num="0001">1. Field of the Invention</p>
<p id="p-0003" num="0002">The present invention relates to an image processing apparatus and an image processing method for reading a patch for tone correction printed by the image processing apparatus and controlling a halftone process in the image processing apparatus in accordance with a result of the reading so as to reduce graininess.</p>
<p id="p-0004" num="0003">2. Description of the Related Art</p>
<p id="p-0005" num="0004">In recent years, there is a case where in a screen (parameter for a halftone process) which has been set as a default into an image processing apparatus, a deterioration of graininess becomes conspicuous in association with an aging change or an environmental change and the user calls a service person. In such a case, the service person prints an image sample by the image processing apparatus, confirms the image sample by visual inspection, and if necessary, changes the screen to the screen (parameter for the halftone process) in which the graininess decreases in a service mode of the image processing apparatus.</p>
<p id="p-0006" num="0005">That is, the service person manually sets the screen setting in which the graininess is small among a plurality of screen settings prepared in the image processing apparatus, thereby coping with such a situation.</p>
<p id="p-0007" num="0006">Japanese Patent Application Laid-Open No. 2007-208639 discloses a point that graininess is improved in the image processing apparatus.</p>
<p id="p-0008" num="0007">Japanese Patent Application Laid-Open No. 2004-240112 discloses a point that a focusing situation of an exposure image forming system in an output is discriminated from graininess of an output image and a focus of the exposure image forming system is adjusted based on a result of the discrimination.</p>
<p id="p-0009" num="0008">As for the graininess, the graininess is corrected through visual inspection of the user or service person in the present situation. That is, in the present situation, if the user or service person is not aware of deterioration in graininess in the image processing apparatus, he cannot change the screen. Since the graininess deteriorates gradually, it is not easy to know a degree of deterioration in graininess as compared with an initial setting and it is difficult to be aware of the graininess deterioration.</p>
<p id="p-0010" num="0009">According to Japanese Patent Application Laid-Open No. 2007-208639, the graininess is obtained and a screen coefficient in the image processing apparatus is changed. However, when the screen coefficient is changed, the tone differs delicately depending on the screen. Therefore, it is necessary that the sample image is printed by the image processing apparatus by using the changed screen, the tone in the printed image is evaluated, and the tone correction is made again. When the service person changes the screen, it is changed to a screen which is not used so far in the image processing apparatus. Therefore, since the foregoing tone correction has to be also made again, it is troublesome. Naturally, if the screen is manually changed, it is troublesome for the user or service person, a machine stops for such a period of time, and productivity also deteriorates.</p>
<heading id="h-0002" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0011" num="0010">It is, therefore, an object of the invention to solve the foregoing problems.</p>
<p id="p-0012" num="0011">The present invention provides an image processing apparatus that: executes a halftone process on a test image for tone correction and prints the processed test image; forms a tone correction table in accordance with read values from the printed test image; obtains graininess from a read value of a low density portion of a tone correction patch of the test image for the tone correction; discriminates whether the obtained graininess exceeds a predetermined reference level; and changes a setting of the halftone process so as to reduce the graininess when it is discriminated that the obtained graininess exceeds the predetermined reference level.</p>
<p id="p-0013" num="0012">Further features of the present invention will become apparent from the following description of exemplary embodiments with reference to the attached drawings.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram of an image processing apparatus which is used in an embodiment of the invention.</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 2</figref> is a flowchart for an auto tone correcting process in the first embodiment.</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 3</figref> is an operation display screen of an operating unit in the first embodiment.</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 4</figref> is an operation display screen of the operating unit in the first embodiment.</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 5</figref> is an operation display screen of the operating unit in the first embodiment.</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 6</figref> is an operation display screen of the operating unit in the first embodiment.</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 7</figref> is an operation display screen of the operating unit in the first embodiment.</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 8</figref> is a tone correction patch in the first embodiment.</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 9</figref> is a diagram for discriminating graininess in the first embodiment.</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 10</figref> is an operation display screen of the operating unit in the first embodiment.</p>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 11</figref> is a flowchart in the second embodiment.</p>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIGS. 12A</figref>, <b>12</b>B and <b>12</b>C are diagrams for discriminating graininess in the second embodiment.</p>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. 13</figref> is a flowchart in the third embodiment.</p>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 14</figref> is an operation display screen of an operating unit in the third embodiment.</p>
<p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. 15</figref> is a chart illustrating an image creation in the third embodiment.</p>
<p id="p-0029" num="0028"><figref idref="DRAWINGS">FIGS. 16A</figref>, <b>16</b>B, <b>16</b>C and <b>16</b>D are diagrams for discriminating graininess in the third embodiment.</p>
<p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. 17</figref> is a diagram illustrating a combination of screens.</p>
<p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. 18</figref> is a diagram illustrating a correspondence between a memory and setting values.</p>
<p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. 19</figref> is a diagram illustrating an example of a test page.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">DESCRIPTION OF THE EMBODIMENTS</heading>
<p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. 1</figref> illustrates a block diagram of an image processing apparatus which is used in an embodiment of the invention. A multifunction peripheral <b>101</b> (hereinbelow, abbreviated to &#x201c;MFP <b>101</b>&#x201d;) is illustrated as an example of the image processing apparatus. The MFP <b>101</b> has: a scanner unit <b>102</b> for reading an image; an operating unit <b>103</b> for operating the MFP <b>101</b>; a printer unit <b>104</b> for executing a printing; an HDD <b>105</b> for storing various kinds of data; a RAM <b>107</b>; a CPU <b>106</b> for controlling processes of the MFP; a scanner image processing unit <b>108</b> for processing the image read by the scanner unit <b>102</b>; a &#x3b3;-correction processing unit <b>109</b> for executing a &#x3b3;-correction process to the image processed by the scanner image processing unit <b>108</b>; and a screen processing unit <b>110</b> for executing a screen process to the image processed by the &#x3b3;-correction processing unit <b>109</b>.</p>
<p id="p-0034" num="0033">First Embodiment</p>
<p id="p-0035" num="0034">The first embodiment will be described hereinbelow with reference to the block diagram of <figref idref="DRAWINGS">FIG. 1</figref> and a flowchart of <figref idref="DRAWINGS">FIG. 2</figref>.</p>
<p id="p-0036" num="0035">First, a flow for a process of an automatic tone correction in a set of image forming screens (halftone process/error diffusion) in color (in this instance, cyan, magenta, yellow, and black) will be described.</p>
<p id="p-0037" num="0036">First, the user operates the operating unit <b>103</b> of the MFP <b>101</b> in <figref idref="DRAWINGS">FIG. 1</figref> so as to display a display screen for an auto tone correction mode illustrated in <figref idref="DRAWINGS">FIG. 3</figref>. When it is confirmed in step <b>201</b> in <figref idref="DRAWINGS">FIG. 2</figref> that the user selected a full correction button <b>301</b> in <figref idref="DRAWINGS">FIG. 3</figref> and pressed an OK button <b>303</b>, the operating unit <b>103</b> displays a display screen for starting the auto tone correction mode in <figref idref="DRAWINGS">FIG. 4</figref>. When a start button <b>401</b> in <figref idref="DRAWINGS">FIG. 4</figref> is pressed, an auto tone correcting process in step <b>202</b> in <figref idref="DRAWINGS">FIG. 2</figref> is started.</p>
<p id="p-0038" num="0037">In the auto tone correcting process, first, various kinds of setting control of the printer unit <b>104</b> such as process control of devices and the like is made in step <b>203</b> in <figref idref="DRAWINGS">FIG. 2</figref>. Subsequently, the processing routine advances to step <b>204</b> and a setting of a screen (halftone process/error diffusion) which is used to output a print for copying is made. Specifically speaking, an error diffusion <b>0</b> of the screen setting which has been stored in the RAM <b>107</b> and is used here is set into the screen processing (halftone process) unit <b>110</b> by the CPU <b>106</b> in <figref idref="DRAWINGS">FIG. 1</figref>. Since the auto tone correction is made, &#x201c;through&#x201d; is preset into the &#x3b3;-correction processing unit <b>109</b>. After completion of those setting processes, a print display screen of a test page in <figref idref="DRAWINGS">FIG. 5</figref> is displayed. When a print start button <b>501</b> is pressed here, the processing routine advances to step <b>205</b> in <figref idref="DRAWINGS">FIG. 2</figref> and a print output is performed. A test page image (<b>601</b> in <figref idref="DRAWINGS">FIG. 6</figref>) which is used here has been stored in the HDD <b>105</b> or RAM <b>107</b> in <figref idref="DRAWINGS">FIG. 1</figref>. Under control of the CPU <b>106</b>, a &#x3b3;-correction process (through/input is output as it is) and the foregoing screen process are executed to the test page image and a test print is output by the printer unit <b>104</b>. When the test print is output, an operating unit display screen for reading the test page in <figref idref="DRAWINGS">FIG. 6</figref> is displayed. The user watches this display screen, sets the test page into the scanner unit <b>102</b> of the MFP <b>101</b>, closes a pressing plate, a document feeder, and the like, and fixes the test page (<b>206</b> in <figref idref="DRAWINGS">FIG. 2</figref>). When the user presses a read-in start button <b>602</b> in <figref idref="DRAWINGS">FIG. 6</figref>, the read-in of the test page is started in step <b>207</b> in <figref idref="DRAWINGS">FIG. 2</figref>.</p>
<p id="p-0039" num="0038">The test page is read by the scanner unit <b>102</b> in <figref idref="DRAWINGS">FIG. 1</figref> and stored as (digital) test data into the RAM <b>107</b> or HDD <b>105</b>. A patch density of each patch in the test data is measured by using the stored test data in order to measure the tone of the test page to which the process by the set screen for the auto tone correction has been performed. An example of a tone correction patch is illustrated in <figref idref="DRAWINGS">FIG. 8</figref>. After each density of the patch was measured, a correction &#x3b3; for converting each patch density measurement result into a target tone is formed so as to obtain a predetermined target tone and stored into the RAM <b>107</b>. After that, until the next auto tone correction is made, when printing, the correction &#x3b3; is set into the &#x3b3;-correction processing unit <b>109</b>, the image data processed by the scanner image processing unit <b>108</b> is processed and output to the screen processing unit <b>110</b> (step <b>209</b>).</p>
<p id="p-0040" num="0039">According to the auto tone correction in the related art, the processing routine is finished by the processes mentioned above. However, in the first embodiment, the following processes are subsequently executed.</p>
<p id="p-0041" num="0040">First, graininess of the patch is measured in step <b>210</b>. Specifically speaking, in the digital data of the test page stored in the RAM <b>107</b> or HDD <b>105</b> by the patch reading for the tone correction, graininess in a patch portion of a low density suitable to measure a predetermined graininess surrounded by a square illustrated in <figref idref="DRAWINGS">FIG. 8</figref> is measured. For example, among continuous tone of levels 0 to 255, it is sufficient to measure the graininess from any one of the patches of the levels 32 to 64(patches of the densities in a range from &#xbc; to &#x215b; of the whole density range). In order to describe the color here, graininess is measured in each of the colors of black <b>801</b>, yellow <b>802</b>, magenta <b>803</b>, and cyan <b>804</b>. Naturally, the color which is measured is variable in accordance with the color of toner or ink which is used here. As disclosed in Japanese Patent Application Laid-Open No. 2004-240112, the graininess can be obtained by calculating a standard deviation performed by using FFT (Fast Fourier Transform) and a VTF (Visual Transfer Function) filter of human visual characteristics. The larger the graininess is, the larger the standard deviation is. Naturally, the invention is not limited to the foregoing method but any method may be used so long as the graininess can be obtained.</p>
<p id="p-0042" num="0041">Subsequently, the graininess level in step <b>211</b> is discriminated by using the graininess obtained in step <b>210</b>. Specifically speaking, whether or not the graininess exceeds a predetermined reference level B at the error diffusion setting <b>0</b> serving as an initial halftone processing parameter as illustrated in <figref idref="DRAWINGS">FIG. 9</figref> is discriminated. If it does not exceed the level B as a result of the discrimination, the processing routine is finished. If it exceeds the level B, in step <b>212</b>, a memory setting of the screen which has been preset is updated to a screen setting of an error diffusion <b>2</b> serving as a halftone processing parameter in which the graininess decreases. The processing routine advances to step <b>213</b>.</p>
<p id="p-0043" num="0042">Now, the screen may be updated in step <b>212</b> in accordance with the read-in graininess in each color of cyan, magenta, yellow, and black, or it is also possible to calculate an average of the granularities of all of the colors and update the screen on the basis of the obtained average value. Since yellow is difficult to be recognized, it is also possible to construct in such a manner that the graininess regarding yellow is not referred to but the discrimination about the graininess is made on the basis of the average of the granularities of the other colors. Furthermore, as for yellow, it is desirable to determine the graininess by using the colors such as cyan, magenta, and the like other than black, because yellow and these colors have the similar characteristics as color toner. Since black is frequently used in the monochromatic printing and is liable to deteriorate, it is desirable that the screen for the halftone process of black is determined based on the graininess of black. As for the screens of cyan, magenta, and yellow, the patches of small densities of cyan and magenta may be representatively used or the graininess may be determined by the average value of the granularities of the patches of small densities of cyan and magenta. With respect to the screens whose granularities are similar, they may be substituted by the screen of a similar color.</p>
<p id="p-0044" num="0043">In step <b>213</b> in <figref idref="DRAWINGS">FIG. 2</figref>, whether or not the user desires to update the screen immediately is confirmed by an operation display screen of <figref idref="DRAWINGS">FIG. 7</figref>. If a &#x201c;NO&#x201d; button <b>702</b> is pressed, the processing routine is finished as it is. If a &#x201c;YES&#x201d; button <b>701</b> is pressed, the processing routine advances to step <b>214</b>. The screen setting serving as a halftone processing parameter updated in step <b>212</b> has been stored in the RAM <b>107</b> and the following processes are executed by using the screen setting. As mentioned above, the error diffusion <b>2</b> is set as a screen setting serving as a halftone processing parameter which is used here.</p>
<p id="p-0045" num="0044">Although the processes of subsequent steps <b>215</b> to <b>221</b> are executed by using the screen setting set in step <b>214</b>, since their processing contents are similar to those of steps <b>205</b> to <b>211</b>, their description is omitted here. In step <b>221</b>, it is discriminated whether or not the graininess of the patch of the low density of the test print which was output with the screen process using the error diffusion setting <b>2</b> as illustrated in <figref idref="DRAWINGS">FIG. 9</figref> exceeds the predetermined reference level B. If it does not exceed the level B, the processing routine is finished. If it exceeds the level B, this means that in spite of a fact that the memory setting of the screen serving as a halftone processing parameter has been updated in step <b>212</b>, it is determined that the graininess is small. Since it is considered that there is an abnormality in the printer, the MFP <b>101</b> calls the service person through a network I/F (interface) (not shown) in step <b>222</b>. A UI (user interface) for promoting the user to call the service person may be displayed.</p>
<p id="p-0046" num="0045">As an example of the error diffusion setting, if a multilevel error diffusion is used as an error diffusion <b>0</b> which has been set as an initial value and a binary error diffusion is used as an error diffusion <b>2</b> which is subsequently set, an engine which becomes difficult to reproduce dots because the reproduction of the dots became unstable in the case of the multivalue can stably reproduce the dots by a binary value. The graininess decreases and picture quality is improved.</p>
<p id="p-0047" num="0046">In the above description, the system asks the user about whether or not he immediately updates the screen as a halftone processing parameter. However, if the screen as a halftone processing parameter is immediately updated, the auto tone correction is made twice, so that it takes a long time. Therefore, as a service mode, as illustrated in <figref idref="DRAWINGS">FIG. 10</figref>, &#x201c;display&#x201d; and &#x201c;non-display&#x201d; of an immediate screen change setting display screen illustrated in <figref idref="DRAWINGS">FIG. 7</figref> may be switched. That is, if the user sets a &#x201c;non-display&#x201d; mode by selecting a non-display button <b>1002</b> and pressing an OK button <b>1003</b>, the halftone processing parameter is not immediately changed but the screen can be automatically changed at the time of the next auto tone correction at a predetermined period (every predetermined number of print outputs, a temperature/humidity change amount is equal to or larger than a predetermined value) while the user is not aware of it. Since the screen has been updated in step <b>212</b> in <figref idref="DRAWINGS">FIG. 2</figref>, in the screen setting in next step <b>214</b>, the updated screen is used from that point of time and the graininess can be reduced more than the graininess before that. In this case, the test page image is not read by the scanner unit <b>102</b> but, in place of it, the test page image is read on the way of a conveyance before the sheet discharge of a printed matter of the printer <b>104</b> by a measuring device (not shown) arranged on a conveyance path of the printed matter in the printer <b>104</b>.</p>
<p id="p-0048" num="0047">The value in the memory will now be described again. There is a difference between the setting value which is set in the initial setting and actually used upon printing and the setting value which is used in the next auto tone correction. In step <b>204</b> of <figref idref="DRAWINGS">FIG. 2</figref>, the multilevel error diffusion, which is set in the initial setting and actually used upon printing, is set as the setting value as illustrated at <b>1801</b> in <figref idref="DRAWINGS">FIG. 18</figref>. In step <b>212</b> in <figref idref="DRAWINGS">FIG. 2</figref>, the binary error diffusion is set for the next auto tone correction as illustrated at <b>1802</b> in <figref idref="DRAWINGS">FIG. 18</figref>. In step <b>214</b> in <figref idref="DRAWINGS">FIG. 2</figref>, the binary error diffusion is set for the next auto tone correction and for the error diffusion which is actually used upon printing as illustrated at <b>1803</b> and <b>1804</b> in <figref idref="DRAWINGS">FIG. 18</figref>.</p>
<p id="p-0049" num="0048">As described above, according to the first embodiment, merely by making the auto tone correction provided hitherto, the screen can be automatically selected in consideration of the graininess and the screen (halftone processing parameter) can be changed based on the graininess without separately executing the print output operation of the test image for the graininess.</p>
<p id="p-0050" num="0049">Even if the setting adapted to automatically change the screen has been set, when the user wants to immediately change the screen, it can be changed.</p>
<p id="p-0051" num="0050">Second Embodiment</p>
<p id="p-0052" num="0051">Although the first embodiment has been described with respect to the case of the auto tone correction in one screen, there is such a situation that three screens such as screen for copying, screen for the large number of lines upon printing, and screen for the small number of lines upon printing are used in the image processing apparatus. That is, the error diffusion is used as a halftone process upon copying and two kinds of dithers of a high resolution and a low resolution are used upon printing.</p>
<p id="p-0053" num="0052">Therefore, the second embodiment will be described with respect to the case of the auto tone correction in three screens with reference to <figref idref="DRAWINGS">FIG. 11</figref>. &#x201c;Printing&#x201d; denotes that an image described by a Page Description Language (hereinbelow, abbreviated as &#x201c;PDL&#x201d;) is output.</p>
<p id="p-0054" num="0053">First, a flow for processes of the auto tone correction in the image creation of three sets of the error diffusion for copying, high line screen ruling upon printing, and low line screen ruling upon printing in a color (in this instance, Cyan, Magenta, Yellow, Black) will be described.</p>
<p id="p-0055" num="0054">First, the user operates the operating unit <b>103</b> of the MFP <b>101</b> in <figref idref="DRAWINGS">FIG. 1</figref> so as to display the display screen of the auto tone correction mode illustrated in <figref idref="DRAWINGS">FIG. 3</figref>. When it is confirmed in step <b>1101</b> in <figref idref="DRAWINGS">FIG. 11</figref> that the user selected the full correction button <b>301</b> in <figref idref="DRAWINGS">FIG. 3</figref> and pressed the OK button <b>303</b>, the operating unit <b>103</b> displays the display screen for starting the auto tone correction in <figref idref="DRAWINGS">FIG. 4</figref>. When the start button <b>401</b> in <figref idref="DRAWINGS">FIG. 4</figref> is pressed, the auto tone correcting process is started in step <b>1102</b> in <figref idref="DRAWINGS">FIG. 11</figref> and an initialization of N=1 is executed.</p>
<p id="p-0056" num="0055">In the auto tone correcting process, first, various kinds of setting control of the printer unit <b>104</b> such as process control of the devices and the like is made. Subsequently, step <b>1104</b> follows. When N=1, since the setting of the first screen is made, the setting of the screen (error diffusion) which is used to output the print for copying is made. Specifically speaking, in the CPU <b>106</b> n <figref idref="DRAWINGS">FIG. 1</figref>, the error diffusion <b>0</b> (multivalue) of the screen setting (halftone processing parameter) which is used here is set into the screen processing unit <b>110</b>. Since the auto tone correction is made, &#x201c;through&#x201d; (the input is output as it is) is preset into the &#x3b3;-correction processing unit <b>109</b>. When those setting processes are finished, the print display screen of the test page in <figref idref="DRAWINGS">FIG. 5</figref> is displayed. When the print start button <b>501</b> is pressed here, the processing routine advances to step <b>1105</b> in <figref idref="DRAWINGS">FIG. 11</figref> and the first print of N=1 is output. The test page image (<b>601</b> in <figref idref="DRAWINGS">FIG. 6</figref>) which is used here has been stored in the HDD <b>105</b> or RAM <b>107</b> in <figref idref="DRAWINGS">FIG. 1</figref>. Under control of the CPU <b>106</b>, the &#x3b3;-correction process (through/input is output as it is) and the foregoing set screen process are executed to the test page image and the test print is output by the printer unit <b>104</b>. When the test print is output, the operating unit display screen for reading the test page in <figref idref="DRAWINGS">FIG. 6</figref> is displayed. The user watches this display screen, sets the test page into the scanner unit <b>102</b> of the MFP <b>101</b>, closes the pressing plate, document feeder, and the like, and fixes the test page (<b>1106</b> in <figref idref="DRAWINGS">FIG. 11</figref>). When the user presses the read-in start button <b>602</b> in <figref idref="DRAWINGS">FIG. 6</figref>, the read-in of the test page is started in step <b>1107</b> in <figref idref="DRAWINGS">FIG. 11</figref>.</p>
<p id="p-0057" num="0056">The test page is read by the scanner unit <b>102</b> in <figref idref="DRAWINGS">FIG. 1</figref> and stored as (digital) test data into the RAM <b>107</b> or HDD <b>105</b>. A patch density of each patch in the test data is measured by using the stored test data in order to measure the tone in the set screen for the auto tone correction. An example of the tone correction patch is illustrated in <figref idref="DRAWINGS">FIG. 8</figref>. After each density of the patch was measured, a correction &#x3b3; for converting each patch density measurement result into a target tone is formed so as to obtain a predetermined target tone and stored into the RAM <b>107</b>. After that, until the next auto tone correction is made, when printing, the correction &#x3b3; is set into the &#x3b3;-correction processing unit <b>109</b>, the image data processed by the scanner image processing unit <b>108</b> is processed and output to the screen processing unit <b>110</b> (step <b>1109</b>).</p>
<p id="p-0058" num="0057">According to the auto tone correction in the related art, the processing routine is finished by the processes mentioned above. However, in the second embodiment, the following processes are subsequently executed.</p>
<p id="p-0059" num="0058">First, graininess of the patch is measured in step <b>1110</b>. Specifically speaking, in the digital data of the test page stored in the RAM <b>107</b> or HDD <b>105</b> by the patch reading for the tone correction, graininess in the patch portion of the low density suitable to measure a predetermined graininess surrounded by the square illustrated in <figref idref="DRAWINGS">FIG. 8</figref> is measured in a manner similar to the first embodiment. In <figref idref="DRAWINGS">FIG. 8</figref>, since the image is printed in color, each of the colors of black <b>801</b>, yellow <b>802</b>, magenta <b>803</b>, and cyan <b>804</b> is output for the tone correction. Although all of the colors may be measured, the graininess is measured with respect to cyan showing typical characteristics from a viewpoint of a speed and a combination of the black, yellow, magenta, and cyan screens is determined by the graininess of cyan.</p>
<p id="p-0060" num="0059">Subsequently, the graininess level is discriminated in step <b>1111</b> by using the graininess obtained in step <b>1110</b>. Specifically speaking, whether or not the graininess exceeds a predetermined reference level B<b>1</b> at the error diffusion setting <b>0</b> serving as an initial halftone processing parameter as illustrated in <figref idref="DRAWINGS">FIG. 12A</figref> is discriminated. If it does not exceed the level B<b>1</b>, since there is no problem, the processing routine advances to step <b>1113</b> as it is. If it exceeds the level B<b>1</b>, in step <b>1112</b>, a memory setting of the first screen for copying which has been preset is changed to a screen setting of an error diffusion <b>1</b> in which the graininess decreases. In this instance, the screen settings of the respective colors of cyan, magenta, yellow, and black are updated together. When they are updated, the processing routine advances to step <b>1113</b> and whether or not three screens have been finished is confirmed. Since the screen is the first screen at this point of time (that is, NO in step <b>1113</b>), step <b>1114</b> follows and a count value is incremented to N=2. In step <b>1104</b>, the screen setting for the larger number of lines of the printer of the second screen is executed to the cyan, magenta, yellow, and black screens. The graininess level discrimination in step <b>1111</b> is performed in a manner similar to that described for the first screen.</p>
<p id="p-0061" num="0060">In step <b>1111</b>, whether or not the graininess exceeds a predetermined reference level B<b>2</b> at the screen setting <b>0</b> for the large number of lines serving as an initial halftone processing parameter as illustrated in <figref idref="DRAWINGS">FIG. 12B</figref> is discriminated by using the graininess obtained in step <b>1110</b>. If it does not exceed the level B<b>2</b>, since there is no problem, step <b>1113</b> follows. If it exceeds the level B<b>2</b>, in step <b>1112</b>, a memory setting of the second screen for the large number of lines which has been preset is changed to the screen setting of the screen setting <b>1</b> for the large number of lines serving as a halftone processing parameter in which the graininess decreases. In this instance, the screen settings of the respective colors of cyan, magenta, yellow, and black are updated together. Specifically speaking, in the screen setting <b>0</b> for the large number of lines, a combination of the screens of the respective colors of the setting <b>5</b> in <figref idref="DRAWINGS">FIG. 17</figref> is used. In the screen setting <b>1</b> for the large number of lines, a combination of the screens of the respective colors of the setting <b>4</b> in <figref idref="DRAWINGS">FIG. 17</figref> is used. As an initial setting, the screen setting <b>0</b> for the large number of lines is preset. When they are updated, the processing routine advances to step <b>1113</b> and whether or not three screens have been finished is confirmed. Since the screen is the second screen at this point of time (that is, NO in step <b>1113</b>), step <b>1114</b> follows and a count value is incremented to N=3. In step <b>1104</b>, the screen setting for the small number of lines of the printer of the third screen is executed to the cyan, magenta, yellow, and black screens. The graininess level discrimination in step <b>1111</b> is performed in a manner similar to that described for the first screen.</p>
<p id="p-0062" num="0061">In step <b>1111</b>, whether or not the graininess exceeds a predetermined reference level B<b>3</b> at the screen setting <b>0</b> for the small number of lines serving as an initial halftone processing parameter as illustrated in FIG. <b>12</b>C is discriminated by using the graininess obtained in step <b>1110</b>. If it does not exceed the level B<b>3</b>, since there is no problem, step <b>1113</b> follows. If it exceeds the level B<b>3</b>, in step <b>1112</b>, a memory setting of the third screen for the small number of lines which has been preset is changed to the screen setting of the screen setting <b>1</b> for the low number of lines serving as a halftone processing parameter in which the graininess decreases. In this instance, the screen settings of the respective colors of cyan, magenta, yellow, and black are updated together. Specifically speaking, in the screen setting <b>0</b> for the small number of lines, a combination of the screens of the respective colors of the setting <b>3</b> in <figref idref="DRAWINGS">FIG. 17</figref> is used. In the screen setting <b>1</b> for the small number of lines, a combination of the screens of the respective colors of the setting <b>2</b> in <figref idref="DRAWINGS">FIG. 17</figref> is used. As an initial setting, the screen setting <b>0</b> for the small number of lines is preset. When they are updated, the processing routine advances to step <b>1113</b> and whether or not three screens have been finished is confirmed. Since the three screens have been finished at this point of time, step <b>1115</b> follows and whether or not the screens over the graininess level exist is discriminated and how many screens over the graininess level is confirmed. For example, there are two screens of the first and third screens over the graininess level, M=2. N=1 is set as an initial value of a counter N. If there are no screens over the graininess level, a discrimination result of step <b>1115</b> is NO and the processing routine is finished. If YES in step <b>1115</b>, step <b>1116</b> follows and whether or not the screen setting is immediately updated is confirmed. If NO in step <b>1116</b>, the processing routine is finished. If YES in step <b>1116</b>, step <b>1104</b> follows. In the subsequent processes, since there are two screens of the first and third screens over the graininess level, the page of the error diffusion for copying and the two pages of the small number of lines for printing are sequentially confirmed. First, the error diffusion for copying is performed as the first screen and the graininess is measured as mentioned above. Since the screen is the first screen, the processing routine is returned to step <b>1104</b>. The screen setting of the small number of lines for printing is performed as the second screen. It is confirmed in step <b>1113</b> that the two screens were finished, and the processing routine is finished.</p>
<p id="p-0063" num="0062">As described above, according to the second embodiment, merely by making the auto tone correction provided hitherto, the screen can be automatically selected in consideration of the graininess in the screen of each mode and the screen setting serving as a halftone processing parameter can be changed in consideration of the graininess without separately executing the operation for the graininess.</p>
<p id="p-0064" num="0063">Further, the measurement of the graininess can be also shortened by measuring one color upon selection of the color screen. Although the screen setting as a halftone processing parameter has been performed to cyan here, naturally, the same advantage will be also obtained in the case of magenta. In the event that the measurement of the graininess is performed by measuring yellow or black as the one color, even if the setting <b>3</b> depicted in <figref idref="DRAWINGS">FIG. 17</figref> is changed to the setting <b>2</b>, for example, the number of lines and the angle remain unchanged because the setting contents of the settings <b>2</b> and <b>3</b> are identical in yellow or black as shown in <figref idref="DRAWINGS">FIG. 17</figref>. For this reason, parameters cannot be changed when yellow or black is selected as the one color. Therefore, it is desirable to select cyan or magenta as the one color.</p>
<p id="p-0065" num="0064">Third Embodiment</p>
<p id="p-0066" num="0065">Although the first and second embodiments have been described with respect to the case of the auto tone correction in color, the third embodiment will be described with respect to a case of the auto tone correction in monochrome with reference to <figref idref="DRAWINGS">FIG. 13</figref>.</p>
<p id="p-0067" num="0066">Although the cyan, magenta, yellow, and black patches are printed upon printing of one test page in color as illustrated in <figref idref="DRAWINGS">FIG. 8</figref>, in the case of monochrome, a printing in which the halftone processing parameter has been changed can be performed by printing of one page as illustrated in <figref idref="DRAWINGS">FIG. 14</figref>. Therefore, the granularities of a plurality of screens can be measured by reading one page once.</p>
<p id="p-0068" num="0067">That is, in step <b>1312</b> in <figref idref="DRAWINGS">FIG. 13</figref>, an image creation <b>1</b> in <figref idref="DRAWINGS">FIG. 15</figref> is performed as the first screen, an image creation <b>2</b> is performed as the second screen, an image creation <b>3</b> is performed as the third screen, and an image creation <b>4</b> is performed as the fourth screen, respectively. In step <b>1111</b> in <figref idref="DRAWINGS">FIG. 13</figref>, in the first screen, as illustrated in <figref idref="DRAWINGS">FIG. 16A</figref>, whether or not the graininess exceeds the predetermined reference level B<b>1</b> is confirmed. In the second screen, as illustrated in <figref idref="DRAWINGS">FIG. 16B</figref>, whether or not the graininess exceeds the predetermined reference level B<b>2</b> is confirmed. In the third screen, as illustrated in <figref idref="DRAWINGS">FIG. 16C</figref>, whether or not the graininess exceeds the predetermined reference level B<b>3</b> is confirmed. In the fourth screen, as illustrated in <figref idref="DRAWINGS">FIG. 16D</figref>, whether or not the graininess exceeds a predetermined reference level B<b>4</b> is confirmed. In accordance with a result of each confirmation, the screen settings are updated in step <b>1312</b> as described in the first and second embodiments. Since there are four kinds of image creation in this case, whether or not the four screens have been finished is confirmed in step <b>1313</b>. If NO in step <b>1313</b>, the processes are repeated until they are finished. If the four screens have been finished (YES), step <b>1115</b> follows. In step <b>1115</b>, whether or not the screens over the graininess level exist is discriminated and how many screens over the graininess level is confirmed. If there are no screens over the graininess level (NO), the processing routine is finished.</p>
<p id="p-0069" num="0068">If the screens over the graininess level exist (YES), since it is sufficient to use one page in the case of monochrome, the setting of each screen is made once again in step <b>1204</b> and one page is output. At this time, the graininess level of only the image creation portion over the graininess level in step <b>1115</b> is discriminated in step <b>1111</b>. If necessary, the memory setting is updated. Whether or not the necessary image creation of M screens has been finished is confirmed in step <b>1318</b>. If YES, the processing routine is finished.</p>
<p id="p-0070" num="0069">In the third embodiment, as an image creation of monochrome, the setting of the graininess <b>0</b> of the image creation <b>1</b> is made by the multilevel error diffusion, the setting of the graininess <b>1</b> is made by the binary error diffusion, and the initial setting is made by the multilevel error diffusion. Upon setting of the graininess <b>0</b> of the image creation <b>2</b>, the process is executed by the screen setting having characteristics in which the number of lines per inch is equal to 283 and a screen angle is equal to 45&#xb0;, and the image creation is performed. Upon setting of the graininess <b>1</b>, the process is executed by the screen setting having characteristics in which the number of lines per inch is equal to 212 and a screen angle is equal to 45&#xb0;. Upon initial setting, the process is executed by the screen setting having characteristics in which the number of lines per inch is equal to 283 and a screen angle is equal to 45&#xb0;. Similarly, upon setting of the graininess <b>0</b> of the image creation <b>3</b>, the process is executed by the screen setting having characteristics in which the number of lines per inch is equal to 170 and a screen angle is equal to 45&#xb0;. Upon setting of the graininess <b>1</b>, the process is executed by the screen setting having characteristics in which the number of lines per inch is equal to 141 and a screen angle is equal to 45&#xb0;. Upon initial setting, the process is executed by the screen setting having characteristics in which the number of lines per inch is equal to 170 and a screen angle is equal to 45&#xb0;. Upon setting of the graininess <b>0</b> of the image creation <b>4</b>, the process is executed by the screen setting having characteristics in which the number of lines per inch is equal to 121 and a screen angle is equal to 45&#xb0;. Upon setting of the graininess <b>1</b>, the process is executed by the screen setting having characteristics in which the number of lines per inch is equal to 106 and a screen angle is equal to 45&#xb0;. Upon initial setting, the process is executed by the screen setting having characteristics in which the number of lines per inch is equal to 121 and a screen angle is equal to 45&#xb0;. Naturally, a similar advantage will be obtained in the case of any other number of screens and any other angle so long as the number of lines of the graininess <b>1</b> is smaller than that of the graininess <b>0</b>. If the number of lines is reduced, even if the engine is granular, the dots are concentrated and the graininess can be improved.</p>
<p id="p-0071" num="0070">As described above, according to the third embodiment, merely by making the auto tone correction provided hitherto, the screen can be automatically selected in consideration of the graininess in the screen of each image creation and the screen can be changed in consideration of the graininess without separately executing the operation for the graininess.</p>
<p id="p-0072" num="0071">Fourth Embodiment</p>
<p id="p-0073" num="0072">Although the predetermined screen setting has been made in the first, second, and third embodiment, a case where the number of lines is automatically changed will now be described.</p>
<p id="p-0074" num="0073">A test page <b>1901</b> illustrated in <figref idref="DRAWINGS">FIG. 19</figref> is screen halftone processed and output. Graininess in a patch portion <b>1902</b> is measured. In accordance with the measured graininess level, the number of lines of the screen corresponding to it is selected as illustrated in <figref idref="DRAWINGS">FIG. 17</figref>, so that the same graininess can be always maintained. When the graininess is very low, the large number of lines of the screen is used. On the contrary, when the graininess is very high, by stably printing by the small number of lines of the screen, an output in which the graininess does not change even if maintenance is not performed can be performed. When the graininess deteriorates by a certain level or more, the maintenance is performed, the graininess is improved, and the screen setting that is optimum to the printer can be determined by measuring the test page of FIG. <b>19</b>.</p>
<p id="p-0075" num="0074">Consequently, the screen of the graininess that is optimum to the printer can be automatically set.</p>
<p id="p-0076" num="0075">Other Embodiments</p>
<p id="p-0077" num="0076">The invention is also realized by executing the following processes. That is, software (program) for realizing the functions of the embodiments mentioned above is supplied to a system or an apparatus through a network or various kinds of storage media and a computer (or a CPU or MPU) of the system or apparatus reads out the program and executes processes based on the program.</p>
<p id="p-0078" num="0077">Consequently, merely by making the auto tone correction provided hitherto, the screen can be automatically selected in consideration of the graininess and the screen can be changed in consideration of the graininess without separately executing the operation for the graininess.</p>
<p id="p-0079" num="0078">Even if a mode for automatically changing the screen has been set, when the user wants to immediately change the screen, he can change it.</p>
<p id="p-0080" num="0079">While the present invention has been described with reference to exemplary embodiments, it is to be understood that the invention is not limited to the disclosed exemplary embodiments. The scope of the following claims is to be accorded the broadest interpretation so as to encompass all such modifications and equivalent structures and functions.</p>
<p id="p-0081" num="0080">This application claims the benefit of Japanese Patent Application No. 2010-114518, filed May 18, 2010, which is hereby incorporated by reference herein in its entirety.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is: </us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. An image processing apparatus comprising:
<claim-text>a print unit configured to execute a halftone process on a test image for tone correction and print the processed test image;</claim-text>
<claim-text>a forming unit configured to form a tone correction table in accordance with read values from the printed test image;</claim-text>
<claim-text>a calculating unit configured to obtain graininess from a read value of a low density portion of a tone correction patch of the test image for the tone correction;</claim-text>
<claim-text>a discriminating unit configured to discriminate whether the obtained graininess exceeds a predetermined reference level;</claim-text>
<claim-text>a setting change unit configured to change a setting of the halftone process so as to reduce the graininess when said discriminating unit discriminates that the obtained graininess exceeds the predetermined reference level; and</claim-text>
<claim-text>an instruction unit configured to provide an instruction for immediately making effective the setting of the halftone process changed by said setting change unit,</claim-text>
<claim-text>wherein, when said instruction unit does not provide the instruction, said forming unit uses the test image on which the halftone process is executed with the setting changed by said setting change unit, upon next forming the tone correction table.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein
<claim-text>the test image has yellow, magenta, and cyan test images, and</claim-text>
<claim-text>said discriminating unit discriminates the graininess by using the graininess of cyan or magenta without using the graininess with respect to yellow.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The apparatus according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein
<claim-text>the test image further has a black test image, and</claim-text>
<claim-text>with respect to black, said discriminating unit obtains the graininess of the black test image and makes the discrimination.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. An image processing method comprising:
<claim-text>executing a halftone process on a test image for tone correction and printing the processed test image;</claim-text>
<claim-text>forming a tone correction table in accordance with read values from the printed test image;</claim-text>
<claim-text>obtaining graininess from a read value of a low density portion of a tone correction patch of the test image for the tone correction;</claim-text>
<claim-text>discriminating whether the obtained graininess exceeds a predetermined reference level;</claim-text>
<claim-text>changing a setting of the halftone process so as to reduce the graininess when it is discriminated that the obtained graininess exceeds the predetermined reference level; and</claim-text>
<claim-text>providing an instruction for immediately making effective the changed setting of the halftone process,</claim-text>
<claim-text>wherein, when the instruction is not provided in said providing, said forming uses the test image on which the halftone process is executed with the changed setting, upon next forming the tone correction table.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method according to <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein
<claim-text>the test image has yellow, magenta, and cyan test images, and</claim-text>
<claim-text>said discriminating discriminates the graininess by using the graininess of cyan or magenta without using the graininess with respect to yellow.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method according to <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein
<claim-text>the test image further has a black test image, and</claim-text>
<claim-text>with respect to black, said discriminating obtains the graininess of the black test image and makes the discrimination.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. A non-transitory computer-readable storage medium storing a computer-executable program for causing a computer to execute an image processing method, the method comprising:
<claim-text>executing a halftone process on a test image for tone correction and printing the processed test image;</claim-text>
<claim-text>forming a tone correction table in accordance with read values from the printed test image;</claim-text>
<claim-text>obtaining graininess from a read value of a low density portion of a tone correction patch of the test image for the tone correction;</claim-text>
<claim-text>discriminating whether the obtained graininess exceeds a predetermined reference level; and</claim-text>
<claim-text>changing a setting of the halftone process so as to reduce the graininess when it is discriminated that the obtained graininess exceeds the predetermined reference level; and</claim-text>
<claim-text>providing an instruction for immediately making effective the changed setting of the halftone process,</claim-text>
<claim-text>wherein, when the instruction is not provided by said providing, the forming uses the test image on which the halftone process is executed with the changed setting, upon next forming the tone correction table.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein, when said instruction unit provides the instruction, said calculating unit obtains graininess from a read value of a low density portion of a tone correction patch of the test image on which the halftone process is executed with the changed setting and which is printed, and wherein, when said discriminating unit again discriminates that the obtained graininess exceeds the predetermined reference level, a service call is made.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The method according to <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein, when the instruction is provided in said providing, said obtaining obtains graininess from a read value of a low density portion of a tone correction patch of the test image on which the halftone process is executed with the changed setting and which is printed, and wherein, when said discriminating again discriminates that the obtained graininess exceeds the predetermined reference level, a service call is made.</claim-text>
</claim>
</claims>
</us-patent-grant>
