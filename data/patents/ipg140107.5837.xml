<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08626945-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08626945</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>10529334</doc-number>
<date>20030731</date>
</document-id>
</application-reference>
<us-application-series-code>10</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>DE</country>
<doc-number>102 44 612</doc-number>
<date>20020925</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>2037</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>15</main-group>
<subgroup>173</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>709238</main-classification>
<further-classification>709239</further-classification>
</classification-national>
<invention-title id="d2e71">Method for transparently exchanging data packets</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6381646</doc-number>
<kind>B2</kind>
<name>Zhang et al.</name>
<date>20020400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709227</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6636505</doc-number>
<kind>B1</kind>
<name>Wang et al.</name>
<date>20031000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370352</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>6778525</doc-number>
<kind>B1</kind>
<name>Baum et al.</name>
<date>20040800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370351</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>6829250</doc-number>
<kind>B2</kind>
<name>Voit et al.</name>
<date>20041200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370467</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>7058059</doc-number>
<kind>B1</kind>
<name>Henry et al.</name>
<date>20060600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>3703951</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>7099944</doc-number>
<kind>B1</kind>
<name>Anschutz et al.</name>
<date>20060800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709227</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>7107360</doc-number>
<kind>B1</kind>
<name>Phadnis et al.</name>
<date>20060900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709250</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>7170905</doc-number>
<kind>B1</kind>
<name>Baum et al.</name>
<date>20070100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370467</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>7171491</doc-number>
<kind>B1</kind>
<name>O'Toole et al.</name>
<date>20070100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709244</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>7228358</doc-number>
<kind>B1</kind>
<name>McManus</name>
<date>20070600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709239</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>7353280</doc-number>
<kind>B2</kind>
<name>Chiles et al.</name>
<date>20080400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709228</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>7379475</doc-number>
<kind>B2</kind>
<name>Minami et al.</name>
<date>20080500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370469</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>7383339</doc-number>
<kind>B1</kind>
<name>Meenan et al.</name>
<date>20080600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709227</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>7428585</doc-number>
<kind>B1</kind>
<name>Owens et al.</name>
<date>20080900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709223</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>2001/0034759</doc-number>
<kind>A1</kind>
<name>Chiles et al.</name>
<date>20011000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709203</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>2002/0002621</doc-number>
<kind>A1</kind>
<name>Zhang et al.</name>
<date>20020100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>2002/0129165</doc-number>
<kind>A1</kind>
<name>Dingsor et al.</name>
<date>20020900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00018">
<document-id>
<country>US</country>
<doc-number>2003/0167405</doc-number>
<kind>A1</kind>
<name>Freund et al.</name>
<date>20030900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>713201</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00019">
<document-id>
<country>US</country>
<doc-number>2003/0236916</doc-number>
<kind>A1</kind>
<name>Adcox et al.</name>
<date>20031200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709245</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00020">
<document-id>
<country>US</country>
<doc-number>2004/0044789</doc-number>
<kind>A1</kind>
<name>Angel et al.</name>
<date>20040300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709238</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00021">
<document-id>
<country>DE</country>
<doc-number>100 14 090</doc-number>
<kind>A1</kind>
<date>20011100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00022">
<document-id>
<country>EP</country>
<doc-number>0 887 738</doc-number>
<kind>A1</kind>
<date>19981200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00023">
<document-id>
<country>WO</country>
<doc-number>WO 01/71977</doc-number>
<kind>A2</kind>
<date>20010900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00024">
<document-id>
<country>WO</country>
<doc-number>WO 02/15494</doc-number>
<kind>A1</kind>
<date>20020200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00025">
<othercit>M. Holdrege and P. Srisuresh, &#x201c;Protocol Complications with the IP Network Address Translator&#x201d;, Network Working Group, Jan. 2001, Internet: URL:http//www.faqs.org/ftp/rfc/pdf/rfc3027.txt.pdf, pp. 1-20.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>22</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>709237</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709238</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370469</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>1</number-of-drawing-sheets>
<number-of-figures>2</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20060080458</doc-number>
<kind>A1</kind>
<date>20060413</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Lindemann</last-name>
<first-name>Werner</first-name>
<address>
<city>M&#xfc;lheim</city>
<country>DE</country>
</address>
</addressbook>
<residence>
<country>DE</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Sch&#xf6;nfeld</last-name>
<first-name>Norbert</first-name>
<address>
<city>Dortmund</city>
<country>DE</country>
</address>
</addressbook>
<residence>
<country>DE</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Lindemann</last-name>
<first-name>Werner</first-name>
<address>
<city>M&#xfc;lheim</city>
<country>DE</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Sch&#xf6;nfeld</last-name>
<first-name>Norbert</first-name>
<address>
<city>Dortmund</city>
<country>DE</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Buchanan Ingersoll &#x26; Rooney PC</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Siemens Enterprise Communiucations GmbH &#x26; Co. KG</orgname>
<role>03</role>
<address>
<city>Munich</city>
<country>DE</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Donabed</last-name>
<first-name>Ninos</first-name>
<department>2444</department>
</primary-examiner>
</examiners>
<pct-or-regional-filing-data>
<document-id>
<country>WO</country>
<doc-number>PCT/DE03/02583</doc-number>
<kind>00</kind>
<date>20030731</date>
</document-id>
<us-371c124-date>
<date>20050324</date>
</us-371c124-date>
</pct-or-regional-filing-data>
<pct-or-regional-publishing-data>
<document-id>
<country>WO</country>
<doc-number>WO2004/030317</doc-number>
<kind>A </kind>
<date>20040408</date>
</document-id>
</pct-or-regional-publishing-data>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">The invention relates to a method for transparently exchanging data packets with a packet-oriented network, via which a number of network elements and a network node device are connected based on a common access method. The network elements are allocated unique local addresses only within the network. The network node device connects the packet-oriented network to an external device based on a point-to-point protocol and performs an address conversion of the address of a network element, said address being allocated within the packet-oriented network, into an address valid for the external device. A verification of message header entries of the data packets exchanged between the external device and the network element permits the establishment of a temporary transparent connection of the network element to the external device in the event an entry is detected the characterizes an expanded point-to-point protocol, e.g. PPPoE, whereby the address newly allocated by the external device is transmitted to the external device without address conversion.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="150.96mm" wi="117.52mm" file="US08626945-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="237.74mm" wi="181.78mm" orientation="landscape" file="US08626945-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">CROSS REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This application is the U.S. National Stage of International Application No. PCT/DE2003/002583, filed Jul. 31, 2003 and claims the benefit thereof. The International Application claims the benefits of German application No. 10244612.1 filed Sep. 25, 2002, both applications are incorporated by reference herein in their entirety.</p>
<heading id="h-0002" level="1">FIELD OF THE INVENTION</heading>
<p id="p-0003" num="0002">The invention relates to a method and an arrangement for transparently exchanging data of a network element arranged in a packet-oriented network with a network-external device, as required, via a network node element.</p>
<heading id="h-0003" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0004" num="0003">Modern communication protocols in packet-oriented networks, e.g. the Internet protocol IP, use a destination address for the addressing of network elements and for the route definition&#x2014;also known by the technical term &#x201c;routing&#x201d;&#x2014;of the data packets between the origin and destination. This address is formed for the Internet protocol IP from an IP address and a UDP or TCP port number (User Datagram Protocol or Transmission Control Protocol). For the sake of simplicity, the term network element address is used below to refer to the IP address in combination with the relevant port number. This type of addressing simplifies global communication and accessibility, yet requires a large number of globally unique addresses.</p>
<p id="p-0005" num="0004">For this reason, processes are often used for reducing the number of global addresses required for worldwide communication. One possibility is the allocation of private addresses, i.e. which are unique in the local area only and are therefore only locally valid in local networks, also known as LANs (Local Area Networks).</p>
<p id="p-0006" num="0005">For communication with communication partners outside the local network, the local addresses must be converted into other local or global addresses. This process of address conversion is known by the technical terms NAT (Network Address Translation) or NPAT (Network and Port Address Translation). Both conversion processes are defined, for example, in the document RFC 1631 (Request for Comment) by the IETF (Internet Engineering Task Force).</p>
<p id="p-0007" num="0006">For the routing of data packets, the addresses of the local network are converted to publicly registered (i.e. global) addresses using address conversion processes.</p>
<p id="p-0008" num="0007">A special form of address conversion exists whereby the addresses of all network elements in the packet-oriented network are converted to a single address. This enables the addresses of one or more network elements to be concealed&#x2014;in a process also known by the technical term &#x201c;masquerading&#x201d;&#x2014;in which a packet-oriented network is outwardly represented by just a single address, for example.</p>
<p id="p-0009" num="0008">Network elements&#x2014;e.g. networked computer systems such as workplace computers&#x2014;which communicate with one another only within the LAN, do not require allocation of global addresses for LAN-internal data communication. A communication with a network element outside the LAN&#x2014;in particular on the Internet&#x2014;whereby said network element establishes a localized end point, is allocated a global address on the basis of an allocation table via a reserved network element referred to below as a network node device. The functions of such a network node device are handled mainly by a router provided for this purpose, or even by a computer system used for network administration, also known as proxy servers or gateways. For the sake of simplicity, the term &#x201c;router&#x201d; is used below to mean all network node devices of this type.</p>
<p id="p-0010" num="0009">Such routers are equipped with specialized functions, depending on the composition&#x2014;with regard to topography, communication protocols, and access processes&#x2014;of the networks to be connected. Routers that connect a LAN to a data communication service provider are considered below. The provider generally allocates to the connected network node device, for the duration of a communication connection, a global address via which connection requests of network elements from the LAN are handled by means of the aforementioned address conversion process.</p>
<p id="p-0011" num="0010">Where appropriate, the provider is also referred to as an &#x201c;external device&#x201d; in order to highlight its topographical aspect as the end point of a point-to-point communication with the router. The term data communication is used to describe the exchange of packet-oriented data, which&#x2014;for example&#x2014;is used for computer-aided data exchange or even data exchange by communication devices.</p>
<p id="p-0012" num="0011">A connection to the provider's network is possible using a variety of access options. For reasons of clarity, an access based on a point-to-point communication protocol&#x2014;abbreviated to PPP&#x2014;is explained below by way of example. The PPP facilitates the exchange of data via synchronous and asynchronous dial-up or dedicated lines and operates independently of the physical interface being used, provided a transparent, fully duplex-compatible line is available.</p>
<p id="p-0013" num="0012">By way of expansion of the PPP protocol, a protocol is described by the IETF in document RFC 2516 that enables PPP sessions to be conducted via a transmission medium&#x2014;in particular the so-called Ethernet&#x2014;with one access for multiple communication partners, whereby PPP data packets are encapsulated in Ethernet frames. This protocol is referred to below as PPPoE (PPP over Ethernet). The expanded packet-oriented protocol PPPoE permits logical point-to-point connection via the otherwise connectionless medium of Ethernet.</p>
<p id="p-0014" num="0013">A data packet according to the IP (Internet protocol) is converted into a data packet according to the PPPoE protocol, whereby the so-called IP datagram&#x2014;the original IP data packet&#x2014;is provided with a PPP header and a PPPoE header. The data packet is then encapsulated in an Ethernet frame for transmission via the LAN.</p>
<p id="p-0015" num="0014">An exemplary embodiment for a data connection using the PPPoE protocol is provided, for example, by a LAN formed from several workplace computers and a router, whereby data packets can be exchanged between the workplace computers and the router both according to the PPPoE protocol and also using the Internet protocol. The data of both potential protocols mentioned above is transported over Ethernet as data packets, for which purpose the data is encapsulated into a so-called Ethernet frame which is forwarded by the router to a modulation/demodulation device (abbreviated to modem) connected to it.</p>
<p id="p-0016" num="0015">The modem modulates these data packets into a data stream and forwards this to the provider, e.g. via a fixed communication link. The reverse procedure from the provider is effected in similar fashion with demodulation of the data stream into data packets.</p>
<p id="p-0017" num="0016">A PPPoE communication connection as described above is used, in particular, in an xDSL data line (Digital Subscriber Line, with &#x201c;x&#x201d; standing for different variants such as&#x2014;for example&#x2014;Asymmetrical DSL (ADSL), or Symmetric Bitrate (SDSL)).</p>
<p id="p-0018" num="0017">In the application mentioned, address conversion as mentioned above also has the advantage that several workplace computers having different IP addresses that are valid only within a LAN, are involved in the data communication via a single IP address of the router. This IP address is normally allocated by the provider for the relevant data communication session.</p>
<p id="p-0019" num="0018">The address conversion is normally carried out by the router within the IP layer, which&#x2014;in the widest sense&#x2014;is localized on layer 3 of the ISO/OSI layer model (International Standardization Organization, Open Systems Interconnection). This address conversion produces problems resulting in restrictions to the use of various applications. Some of these problems are described briefly below.</p>
<p id="p-0020" num="0019">Problems occur when an exchange of IP and/or port addresses in superordinate protocol layers is required by applications&#x2014;such as, for example, &#x201c;active ftp&#x201d; or &#x201c;Netmeeting&#x201d;&#x2014;or by specifications. Since conventional routers do not process these protocol layers, a conflict occurs in the unique address allocation.</p>
<p id="p-0021" num="0020">A further problem arises if an incoming connection at a network element, i.e. at its so-called logical port, is to be set up within the LAN, if this was not based on an outgoing connection setup on the same port. In this case the router is unable to identify, from the received port address, the network element that is to be addressed within the LAN. Server operation of a network element localized in the LAN is therefore not easily achievable.</p>
<p id="p-0022" num="0021">Certain applications based on a PPPoE driver in a network element of the LAN cannot be used if the router does not offer a PPPoE protocol going toward the LAN.</p>
<p id="p-0023" num="0022">The object of the invention is to specify an arrangement and a method, the application of which results in the above problems being avoided.</p>
<p id="p-0024" num="0023">This object is achieved by the claims.</p>
<p id="p-0025" num="0024">A packet-oriented network comprising a number of network elements is connected via a network node device with an external device, for example a so-called Internet Service Provider (ISP). While a connection is being set up between a first network element and the external device, this process generally being accompanied by the transmission of a user name&#x2014;and password, if applicable&#x2014;to the external device, an address to be used for the connection is obtained from the external device by the first network element or the network node element. In particular, this network element address is an Internet Protocol address (IP address). The previously allocated address, which is valid only within the packet-oriented network&#x2014;the local address&#x2014;of the first network element, is overwritten during the connection setup, e.g. with the address obtained from the external device.</p>
<p id="p-0026" num="0025">According to the invention, the message header entries of the data packets exchanged between the external device and the network element are verified. If an expanded packet-oriented protocol is detected in the characterizing entry of a data packet, a temporarily transparent connection is set up between the corresponding network element and the external device, whereby the address transferred from the external device to the network node device is used instead of the address allocated to the network element in the packet-oriented network. A communication protocol according to PPPoE (Point-to-Point Protocol over Ethernet), for example, is used as an expanded packet-oriented protocol.</p>
<p id="p-0027" num="0026">One main advantage of the method according to the invention is apparent in that a &#x201c;transparent&#x201d; connection is automatically effected as required. This eliminates the need for previously used methods, such as the elaborate protocol analyses of higher protocol layers within the communication protocol that takes place in the network node device, e.g. using a so-called &#x201c;Application Level Gateway&#x201d;, which is described in the documents RFC 3027 or RFC 3022.</p>
<p id="p-0028" num="0027">In a transparent connection, the PPPoE protocol is used for communication between the network element involved and the external device, rendering address conversion in the network node device unnecessary. Instead, the network element uses the address that was obtained during the connection setup from the external device and forwards it, unchanged, via the network node device to the external device.</p>
<p id="p-0029" num="0028">It is possible, advantageously, for a transparent connection to be set up by any network element within the packet-oriented network. The network node device therefore does not&#x2014;as used to be the case&#x2014;need to route data packets of incoming connections to &#x201c;new&#x201d; port addresses to a permanently configured computer system. Such configurations, which are known in the prior art, are also known as &#x201c;exposed machines&#x201d;.</p>
<p id="p-0030" num="0029">It is therefore possible, advantageously, for a PPPoE driver to be used in a network element despite the use of a route-determining network node device, in particular a router. In this way, services of the external device&#x2014;in particular of a so-called ISP (Internet Service Provider)&#x2014;which are dependent on a subscriber logging into the network element, can be used advantageously.</p>
<p id="p-0031" num="0030">The network element, which is connected to the external device via a transparent connection, can easily be operated, advantageously, as a server.</p>
<p id="p-0032" num="0031">In addition to a maximum number of transparent connections, said maximum number usually being defined by the external device, it will still be possible&#x2014;advantageously&#x2014;for &#x201c;conventional&#x201d; connections to the remaining network elements&#x2014;i.e. connections implemented with address conversion and routing&#x2014;to be handled.</p>
<p id="p-0033" num="0032">Advantageous developments of the invention are described in the dependent claims.</p>
<p id="p-0034" num="0033">A verification is carried out&#x2014;advantageously&#x2014;before the transparent connection for a network element is established, to determine whether a transparent connection of the same type exists for at least one other network element. Such a maximum number of transparent connections and/or &#x201c;conventional&#x201d; connections&#x2014;see above&#x2014;depends, for example, on the specifications of the external device.</p>
<p id="p-0035" num="0034">The transparent connection is terminated, advantageously, as soon as a connection release request&#x2014;also known by the technical term PPPoE Active Discovery Terminate process&#x2014;is detected. A communication release request of this type is transmitted in a characterizing entry, for example by a data packet with reserved structure (also known as a connection control element).</p>
<p id="p-0036" num="0035">A connection release request of this type is also triggered, advantageously, when a predefined period during which no data packets have been exchanged according to the expanded packet-oriented protocol, has been exceeded (this is also known by the technical term &#x201c;timeout&#x201d;). A measure of this kind prevents any transparent connections from being occupied if a connection control element transporting the connection release request is not received due to a transmission error.</p>
<p id="p-0037" num="0036">An exemplary embodiment of the invention is described in greater detail below with the help of the diagrams.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. 1</figref>: is a structural diagram that schematically illustrates a data communication connection between a packet-oriented network and an external device, and</p>
<p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. 2</figref>: is a structural diagram that schematically illustrates a network node device according to the invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DETAILED DESCRIPTION OF THE INVENTION</heading>
<p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. 1</figref> is a packet-oriented network LAN showing a first network element PC<b>1</b>, a second network element PC<b>2</b> and a third network element PC<b>3</b>.</p>
<p id="p-0041" num="0040">The network elements PC<b>1</b>, PC<b>2</b>, PC<b>3</b> are connected to one another and to a network node device ROU via a common transmission medium, for example an Ethernet. The network node device ROU has a first network interface IF<b>1</b> for connection to the packet-oriented network LAN, and a second network interface IF<b>2</b>, which connects the network node device ROU to an input of a modulation/demodulation device MOD&#x2014;also known as a modem. Data is exchanged between the second network interface IF<b>2</b> and the input to the modem MOD on a packet-oriented basis, just as in the packet-oriented network LAN.</p>
<p id="p-0042" num="0041">In an alternative embodiment, modulation/demodulation functions are integrated into the network node device ROU, which means that use of the modem MOD is no longer required.</p>
<p id="p-0043" num="0042">The network node device ROU is implemented, for example, as a router or, alternatively, as a gateway or a proxy server.</p>
<p id="p-0044" num="0043">The modem MOD is connected to an external device H. The connection of the modem MOD to the external device H is effected, for example, via a permanently allocated telecommunications line.</p>
<p id="p-0045" num="0044">Furthermore, the method according to the invention is not limited to a physical transfer process. Possible alternatives to a permanently assigned telecommunications line include, for example, embodiments using ATM (Asynchronous Transfer Mode) or radio link techniques.</p>
<p id="p-0046" num="0045">Each respective network element PC<b>1</b>, PC<b>2</b>, PC<b>3</b> has a corresponding local address A<b>1</b>, A<b>2</b>, A<b>3</b>, i.e. one that is unique only within the packet oriented network LAN, allocated to it within the packet-oriented network LAN. The allocation of the respective addresses A<b>1</b>, A<b>2</b>, A<b>3</b> to the respective network element PC<b>1</b>, PC<b>2</b>, PC<b>3</b> is effected dynamically, for example, via a master computer or server (not shown), or is even permanently set on a network card (not shown), which is allocated to the respective network element PC<b>1</b>, PC<b>2</b>, PC<b>3</b>. The protocol DHCP (Dynamic Host Configuration Protocol), for example, is used for the dynamic allocation of the respective addresses A<b>1</b>, A<b>2</b>, A<b>3</b>.</p>
<p id="p-0047" num="0046">An address (not shown) has generally been allocated, in turn, to the network node device ROU during a connection setup, said address being unique and/or valid in the connected network (not shown) of the external device H.</p>
<p id="p-0048" num="0047">The communication of the network elements PC<b>1</b>, PC<b>2</b>, PC<b>3</b> with one another and with the network node device ROU is effected within the packet-oriented network LAN via data packets, e.g. in the form of so-called Ethernet frames. An Ethernet frame of this type consists of an Ethernet message header entry, also known as the &#x201c;header&#x201d;, and a checksum field. The Ethernet message header entry and the checksum field of a data packet of this type enclose a datagram, which is described in greater detail below.</p>
<p id="p-0049" num="0048">In the case of communication according to the Internet Protocol (IP), the corresponding Ethernet frame contains an IP diagram, which is characterized by an IP message header entry. If communication takes place according to the PPPoE protocol (Point-to-Point Protocol over Ethernet), the datagram encapsulated in the Ethernet frame contains a PPPoE datagram, which is characterized by a PPPoE message header entry. The PPPoE datagram, in turn, contains a datagram according to the PPP protocol (Point-to-Point Protocol) with a corresponding PPP message header entry. The PPPoE datagram furthermore contains a user data entry, which in turn contains an IP datagram with the aforementioned structure.</p>
<p id="p-0050" num="0049">The following is based on a communication from the external device H via the modem MOD and via the network node device ROU, with network elements PC<b>1</b>, PC<b>2</b>, PC<b>3</b> of the packet-oriented network LAN. These network elements PC<b>1</b>, PC<b>2</b>, PC<b>3</b> communicate, in a first stage, with the switched network node device ROU according to the Internet protocol. In order to address a respective network device PC<b>1</b>, PC<b>2</b>, PC<b>3</b>, the network node device ROU performs an address conversion&#x2014;also known as Network Address Translation or NAT&#x2014;between the address allocated by the external device H, particularly in the form of an Internet Protocol address or IP address, and the respective address A<b>1</b>, A<b>2</b>, A<b>3</b> which is valid only in the packet-oriented network LAN.</p>
<p id="p-0051" num="0050">In a second stage, it is assumed that the first network element PC<b>1</b> modifies the communication protocol, i.e. now initiates a PPPoE communication connection instead of the Internet protocol. The network node device ROU detects this change in a manner yet to be described, and then sets up a transparent connection TC&#x2014;symbolized in the diagram by a dotted line. For the sake of clarity the dotted line symbolizing the transparent connection TC is shown in the diagram as merely running alongside the network node device ROU. In fact, this transparent connection TC is effected with the active involvement of the network node device ROU.</p>
<p id="p-0052" num="0051">In order to establish the transparent connection TC, addresses that uniquely identify respective network interfaces (not shown) of the first network element PC<b>1</b> or of the network node device ROU, are taken into account and/or modified.</p>
<p id="p-0053" num="0052">One address of this type, which uniquely identifies the respective network interface, is known as a MAC (Media Access Control) address. The MAC address is an unalterable hardware address used for the globally unique identification of a node (e.g. hardware address of a network interface).</p>
<p id="p-0054" num="0053">The network node device ROU receives data packets from the first network element PC<b>1</b> at the first network interface IF<b>1</b>, which connects the network node device to the packet-oriented network LAN. Characterizing message header entries of the data packets transmitted from the first network element PC<b>1</b> have the MAC address of the first network element PC<b>1</b>, as the original MAC address, and the MAC address of the first network interface IF<b>1</b> of the network node device ROU, as the destination MAC address. The network node device ROU transfers these data packets internally to a second network interface IF<b>2</b> that connects the network node device ROU to the external device H, whereby a modification to the original or destination MAC addresses is carried out beforehand. The MAC address of the external device H to be used as the destination was transmitted to the network node device ROU during the connection setup between the first network element PC<b>1</b> and the external device H, whereby this MAC address has been stored by the transmitting network node device ROU. The network node device ROU sets the MAC address of the second network interface IF<b>2</b> as the original MAC address and the MAC address of the external device H&#x2014;which was previously stored&#x2014;as the destination MAC address. For data packets transmitted from the external device H, the procedure is reversed accordingly for the respective MAC addresses.</p>
<p id="p-0055" num="0054">When the transparent connection TC is set up, the first network element PC<b>1</b> is allocated a new address A<b>1</b> (IP address) by the external device H. This new address overwrites the previously valid address A<b>1</b>.</p>
<p id="p-0056" num="0055">In order to control the transparent connection TC, a so-called &#x201c;Session ID&#x201d;, which uniquely identifies the data connection layer (&#x201c;Session&#x201d;) of the transparent connection TC, is agreed in addition between the external device H and the first network node device PC<b>1</b>.</p>
<p id="p-0057" num="0056">The PPPoE protocol is used for communication between the first network element PC<b>1</b> and the external device H on the basis of the transparent connection TC, whereby an address conversion by the network node device ROU is no longer required. Instead, the address A<b>1</b> of the network element PC<b>1</b> obtained during the connection setup (see above) of the transparent connection TC is forwarded, unchanged, via the modem MOD to the external device H.</p>
<p id="p-0058" num="0057">If the setup of the transparent connection is initiated by the first network element PC<b>1</b>, for example, the data exchange is effected via a PPPoE driver (not shown) in the first network element PC<b>1</b>. The transparent connection TC is effected bidirectionally, i.e. return packets from the external device H are also transmitted to the first network element PC<b>1</b>, via the network node device ROU, without address conversion or protocol conversion.</p>
<p id="p-0059" num="0058">The network node device ROU detects, on the basis of the PPPoE message header entries, an existing transparent connection TC and initiates the release of the transparent connection TC, possibly on the basis of reserved protocol elements&#x2014;also known as connection control elements&#x2014;such as for example a connection release request. In addition to a dedicated connection release request by a connection control element, an event (&#x201c;timeout&#x201d;) is also triggered by the network node device ROU as soon as there is no exchange of data packets taking place according to the PPPoE protocol over a predefined period. The network node device ROU terminates the data connection (&#x201c;session&#x201d;) with this event on the basis of the transparent connection TC. Upon termination of the transparent connection TC of the first network element with the external device H, a transparent connection (not shown) with the external device H can be set up for the network-elements PC<b>1</b>, PC<b>2</b>, PC<b>3</b>.</p>
<p id="p-0060" num="0059">The management of communication connections between the network elements PC<b>1</b>, PC<b>2</b>, PC<b>3</b> with the external device H is explained below in a further embodiment. External devices H, such as&#x2014;for example&#x2014;an Internet provider, often support only a limited number of simultaneous connections, in this case from the packet-oriented network LAN.</p>
<p id="p-0061" num="0060">For example, if the provider supports only one PPPoE connection, then other existing transparent communication connections according to the PPPoE protocol are liable to be interrupted in order to make exclusive communication access available to the network element PC<b>1</b> in question for the duration of a transparent connection TC.</p>
<p id="p-0062" num="0061">If the network element PC<b>1</b> wishes to set up a transparent connection TC to the external device H, while the second network element PC<b>2</b> is already conducting a transparent connection of this type (not shown), the exclusive access must be protected by means of a transparent connection TC of the first network element. This is one example of a priority rule according to the so-called &#x201c;first come first served&#x201d; principle&#x2014;as implemented, for example, in the network node device ROU. If a larger number of connections to the packet-oriented network LAN are possible from the external device H, further strategies may need to be implemented in order to implement a priority rule in the network node device ROU.</p>
<p id="p-0063" num="0062">In addition to a transparent connection TC, communication with the external device H on the basis of &#x201c;conventional&#x201d; connections&#x2014;i.e. effected with an address conversion and routing&#x2014;is still possible for the network elements PC<b>1</b>, PC<b>2</b>, PC<b>3</b> via the network node device ROU.</p>
<p id="p-0064" num="0063">The schematic structure of the network node device ROU is explained in greater detail below with further references to the functional units shown in <figref idref="DRAWINGS">FIG. 1</figref>.</p>
<p id="p-0065" num="0064"><figref idref="DRAWINGS">FIG. 2</figref> shows a network node element ROU with a first network interface IF<b>1</b> and a second network interface IF<b>2</b>. The first network interface IF<b>1</b> (cf. <figref idref="DRAWINGS">FIG. 1</figref>) is connected to the network elements PC<b>1</b>, PC<b>2</b>, PC<b>3</b> of the packet-oriented network LAN, and the second network interface IF<b>2</b> could be connected with the modulation/demodulation device MOD. Furthermore, the two interfaces IF<b>1</b>, IF<b>2</b> that are provided for bidirectional communication are largely identically configured.</p>
<p id="p-0066" num="0065">The first and the second network interface IF<b>1</b>, IF<b>2</b> of the network node device ROU are each connected to a respective interface transfer unit LI<b>1</b>, LI<b>2</b>. The interface transfer units LI<b>1</b>, LI<b>2</b> are used for exchanging data packets from the network node device ROU, via the respective network interface IF<b>1</b>, IF<b>2</b> and for transfer to additional internal units of the network node device ROU, said additional units being described below.</p>
<p id="p-0067" num="0066">The first interface transfer unit LI<b>1</b> is connected to a monitoring unit MON. The monitoring unit MON verifies the message header entries of exchanged data packets. Furthermore, the monitoring unit MON controls a first and a second bridging device BDP<b>1</b>, BDP<b>2</b>, which control the routing of the data packets within the network node device ROU.</p>
<p id="p-0068" num="0067">If the monitoring unit MON detects that a data packet transferred via the interface transfer unit LI<b>1</b> is a connection control element with a PPPoE message header entry, then this data packet is transferred by the monitoring unit MON to the first bridging device BDP<b>1</b>, via a route SC, to the second bridging device BDP<b>2</b>, which forwards the data packet to the interface transfer unit LI<b>2</b> and finally to the network interface IF<b>2</b>. The aforementioned modification of the MAC addresses in the data packets is carried out in the monitoring unit MON or in one of the two bridging devices BDP<b>1</b>, BDP<b>2</b>. Alternatively, this exchange is carried out in a protocol unit (not shown).</p>
<p id="p-0069" num="0068">If, however, no PPPoE message header entry is detected by the monitoring unit MON, then the data packet&#x2014;including other functional units to be explained in greater detail below&#x2014;is converted, inter alia, into a data packet according to the PPPoE protocol.</p>
<p id="p-0070" num="0069">The data packet in question is then forwarded in turn to the first bridging device BDP<b>1</b>, from where&#x2014;this time&#x2014;it is forwarded to a routing unit IPR, as shown in the diagram by a vertical double-ended arrow. These are data packets for purely Internet Protocol-based (&#x201c;pure IP&#x201d;) communication without PPPoE datagrams, for which address conversion of the IP address and possibly of the TCP (Transfer Control Protocol) port number is to be carried out. This address conversion is implemented in the aforementioned routing unit IPR, where a connection to the external device H has been set up beforehand. In an address conversion of this kind, the internet protocol message header entry of the IP datagram contained in the Ethernet data packet is processed, whereby an entry of the IP address and possibly of the TCP port number is modified accordingly in a data field of the IP message header entry.</p>
<p id="p-0071" num="0070">The data packet is then transferred to a PPP converter unit PPP, in which the IP datagram is provided with a PPP data header entry.</p>
<p id="p-0072" num="0071">The data packet is then transferred to a PPPoE converter unit, in which the analogous processing stage takes place with a PPPoE message header entry.</p>
<p id="p-0073" num="0072">The data packet is then transferred to the second bridging device BDP<b>2</b>, which, under the control of the monitoring unit MON, initiates a transfer to the second interface transfer unit LI<b>2</b>. This unit finally transfers the data packet to the second network interface IF<b>2</b>.</p>
<p id="p-0074" num="0073">Since communication is bidirectional, the data packets are also routed in the opposite direction. This takes place analogously to the procedure described above.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method for transparently exchanging data packets of a packet-oriented network by a network node device, the packet oriented network comprised of at least one network element connected to the network node device, each network element having a unique address within the packet-oriented network, the network node device utilizing the method comprising:
<claim-text>setting up a connection between a first network element and an external device, the connection being set up such that the unique address of the first network element is converted to an address valid for the external device;</claim-text>
<claim-text>verifying message header entries of data packets exchanged between the external device and the first network element;</claim-text>
<claim-text>determining whether a message header entry characterizing an expanded packet-oriented protocol is within the message header entries;</claim-text>
<claim-text>if the message header entry is determined to characterize an expanded packet-oriented protocol, establishing a temporarily transparent connection between the first network element and the external device, the unique address of the first network element that is valid for the external device being transferred to the external device without converting that unique address for a duration of the temporarily transparent connection.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the unique address of the first network element is assigned by the external device while the connection is set up between the first network element and the external device.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein a modulation/demodulation device connects the external device to the network node device such that the network node device exchanges data packets of the packet-oriented network with the external device via the modulation/demodulation device.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein a verification is carried out before the transparent connection for the first network element is set up to determine whether a transparent connection already exists for a least one other network element.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein a maximum number of transparent connections is defined depending on a specification of the external device.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein a modulation/demodulation device connects the external device to the network node device such that the network node device exchanges data packets of the packet-oriented network with the external device via the modulation/demodulation device.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method according to <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein a verification is carried out before the transparent connection for the first network element is set up to determine whether a transparent connection already exists for a least one other network element.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein a verification is carried out before the transparent connection for the first network element is set up to determine whether a transparent connection already exists for a least one other network element.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein a maximum number of transparent connections is defined depending on a specification of the external device.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The method according to <claim-ref idref="CLM-00009">claim 9</claim-ref> further comprising rejecting an establishment of the transparent connection if another network element already has a transparent connection established.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The method according to <claim-ref idref="CLM-00009">claim 9</claim-ref> further comprising cancelling an existing transparent connection and subsequently establishing a transparent connection between the external device and a second network element.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref> further comprising terminating the transparent connection after a connection release request is detected.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The method according to <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein the connection release request is triggered when no data packets have been exchanged according to the expanded packet-oriented protocol within a predefined time period.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the communication of the at least one network element with the network node device is effected according to Internet protocol or according to PPPoE communication protocol.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein the expanded packet-oriented protocol is PPPoE.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the at least one network element is comprised of a plurality of network elements and communication of the network elements is effected according to at least one of Internet protocol and PPPoE communication protocol.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. A network node element for supporting a transparent exchange of data packets comprising: at least one first network interface to connect to a packet-oriented network; at least one second network interface to connect to an external device;
<claim-text>at least one monitoring unit operatively connected to at least one of the at least one first network interface and the at least one second network interface, the at least one monitoring unit to establish a temporarily transparent connection between at least one network element of the packet-oriented network and the external device; and</claim-text>
<claim-text>wherein the network node element does not convert a unique address of any network element that is allocated to that network element by the external device for a duration of a temporarily transparent connection established between that network element and the external device.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The network node element according to <claim-ref idref="CLM-00017">claim 17</claim-ref>, wherein the network node element is a router.</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The network node element according to <claim-ref idref="CLM-00018">claim 18</claim-ref>, wherein the at least one monitoring unit controls at least one bridging device of the network node element.</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The network node element according to <claim-ref idref="CLM-00017">claim 17</claim-ref>, wherein the at least one monitoring unit controls at least one bridging device of the network node element.</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. The method of <claim-ref idref="CLM-00017">claim 17</claim-ref> wherein the expanded packet-oriented protocol is PPPoE.</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. The network node element according to <claim-ref idref="CLM-00017">claim 17</claim-ref> wherein the at least one second network interface is comprised of a modem connected to the network node element. </claim-text>
</claim>
</claims>
</us-patent-grant>
