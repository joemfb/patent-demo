<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08624765-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08624765</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13578298</doc-number>
<date>20100514</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>03</class>
<subclass>M</subclass>
<main-group>1</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>341122</main-classification>
</classification-national>
<invention-title id="d2e43">Sample and hold circuit and A/D converter</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>4893122</doc-number>
<kind>A</kind>
<name>Hoehn</name>
<date>19900100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>341122</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>5172117</doc-number>
<kind>A</kind>
<name>Mills et al.</name>
<date>19921200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>341157</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>6337651</doc-number>
<kind>B1</kind>
<name>Chiang</name>
<date>20020100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>341161</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>7969336</doc-number>
<kind>B2</kind>
<name>Yoshioka</name>
<date>20110600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>341122</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>JP</country>
<doc-number>59-149418</doc-number>
<date>19840800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>JP</country>
<doc-number>5-284030</doc-number>
<date>19931000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>JP</country>
<doc-number>7-7426</doc-number>
<date>19950100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>JP</country>
<doc-number>2008-502264</doc-number>
<date>20080100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00009">
<othercit>International Search Report in International Application No. PCT/JP2010/058228; Mailing Date: Jul. 6, 2010.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00010">
<othercit>B. Razavi, &#x201c;Design of Analog CMOS Integrated Circuits,&#x201d; McGraw-Hill, Pub., pp. 424-427 (2002).</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00011">
<othercit>B. Ginetti et al., &#x201c;A CMOS 13-b Cyclic RSD A/D Converter,&#x201d; IEEE Journal of Solid-State Circuits, vol. 27, No. 7, pp. 957-965 (Jul. 1992).</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00012">
<othercit>M. Paavola et al., &#x201c;A 62&#x3bc;A Interface ASIC for a Capacitive 3-Axis Micro-Accelerometer&#x201d; 2007 IEEE International Solid-State Circuits Conference, Digest of Technical Papers, pp. 318-319 (Fig. 17.9.3) (2007).</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>9</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>341122</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>341155</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>327 94</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>327 96</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>13</number-of-drawing-sheets>
<number-of-figures>13</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20130050002</doc-number>
<kind>A1</kind>
<date>20130228</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Watanabe</last-name>
<first-name>Hikaru</first-name>
<address>
<city>Nagoya</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Watanabe</last-name>
<first-name>Hikaru</first-name>
<address>
<city>Nagoya</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Finnegan, Henderson, Farabow, Garrett &#x26; Dunner, LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Toyota Jidosha Kabushiki Kaisha</orgname>
<role>03</role>
<address>
<city>Toyota-shi, Aichi-ken</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Young</last-name>
<first-name>Brian</first-name>
<department>2819</department>
</primary-examiner>
</examiners>
<pct-or-regional-filing-data>
<document-id>
<country>WO</country>
<doc-number>PCT/JP2010/058228</doc-number>
<kind>00</kind>
<date>20100514</date>
</document-id>
<us-371c124-date>
<date>20120810</date>
</us-371c124-date>
</pct-or-regional-filing-data>
<pct-or-regional-publishing-data>
<document-id>
<country>WO</country>
<doc-number>WO2011/142036</doc-number>
<kind>A </kind>
<date>20111117</date>
</document-id>
</pct-or-regional-publishing-data>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">The present invention is related to a sample and hold circuit and an A/D converter, and prevents an output saturation for an input voltage over a power supply voltage range in the sample and hold circuit. A first switch which is turned on when an input voltage is to be sampled; a sampling capacitor configured to sample the input voltage input via the first switch when the first switch is turned on, and sample a predetermined reference voltage when the first switch is turned off; an adding/subtracting part configured to perform an addition or a subtraction between the input voltage sampled by the sampling capacitor and the predetermined reference voltage sampled by the sampling capacitor; and a hold part configured to hold and output a voltage obtained by the addition or the subtraction by the adding/subtracting part are provided.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="142.83mm" wi="243.08mm" file="US08624765-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="243.50mm" wi="162.05mm" orientation="landscape" file="US08624765-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="264.16mm" wi="193.04mm" file="US08624765-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="246.72mm" wi="142.24mm" orientation="landscape" file="US08624765-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="239.95mm" wi="155.28mm" orientation="landscape" file="US08624765-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="239.35mm" wi="155.02mm" orientation="landscape" file="US08624765-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="111.17mm" wi="135.21mm" file="US08624765-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="251.46mm" wi="163.32mm" orientation="landscape" file="US08624765-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="237.32mm" wi="159.43mm" file="US08624765-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="109.98mm" wi="174.58mm" file="US08624765-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="231.48mm" wi="153.67mm" orientation="landscape" file="US08624765-20140107-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="242.65mm" wi="172.13mm" orientation="landscape" file="US08624765-20140107-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="123.95mm" wi="153.25mm" file="US08624765-20140107-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00013" num="00013">
<img id="EMI-D00013" he="258.83mm" wi="181.53mm" orientation="landscape" file="US08624765-20140107-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This application is a national phase application of International Application No. PCT/JP2010/058228, filed May 14, 2010, the content of which is incorporated herein by reference.</p>
<heading id="h-0002" level="1">TECHNICAL FIELD</heading>
<p id="p-0003" num="0002">The present invention is related to a sample and hold circuit and an A/D (Analog-to-Digital) converter. In particular, the present invention is related to a sample and hold circuit and an A/D converter suited for converting an input analog voltage to a digital value and outputting it.</p>
<heading id="h-0003" level="1">BACKGROUND ART</heading>
<p id="p-0004" num="0003">An A/D converter for converting an input analog voltage to a digital value is known (for example, see Patent Document 1). The A/D converter disclosed in Patent Document 1 generates a determination signal according to a level of the input analog voltage, performs voltage-shifting based on the determination signal such that the sampled and held analog voltage falls in an input voltage range of the A/D converter, and then converts the voltage-shifted voltage to the digital value. Further, the A/D converter remove a component corresponding to the voltage shift from the digital value thus obtained by the conversion, thereby obtaining the digital value corresponding to the analog voltage.</p>
<p id="p-0005" num="0004">[Patent Document 1] Japanese Laid-open Patent Publication No. 7-7426</p>
<heading id="h-0004" level="1">DISCLOSURE OF INVENTION</heading>
<heading id="h-0005" level="1">Problem to be Solved by Invention</heading>
<p id="p-0006" num="0005">However, according to the A/D converter disclosed in Patent Document 1, the analog voltage to be input is not adjusted before the analog voltage is sampled and held. According to the configuration in which such an adjustment is not performed, an output saturation of the sample and hold circuit may occur if the analog voltage to be input is near a power supply potential. For this reason, according to the A/D converter disclosed in Patent Document 1, the A/D conversion of the input analog voltage may not be performed with high accuracy over a whole range from a negative power supply potential to a positive power supply potential.</p>
<p id="p-0007" num="0006">The present invention is made in consideration of the matters described above, and an object of the invention is to provide a sample and hold circuit and an A/D converter which may prevent the output saturation for the input voltage from a negative power supply potential to a positive power supply potential.</p>
<heading id="h-0006" level="1">Means to Solve the Problem</heading>
<p id="p-0008" num="0007">The object is achieved by a sample and hold circuit which includes a first switch which is turned on when an input voltage is to be sampled; a first sampling part configured to sample the input voltage input via the first switch when the first switch is turned on; a second sampling part configured to sample a predetermined reference voltage when the first switch is turned off; an adding/subtracting part configured to perform an addition or a subtraction between the input voltage sampled by the first sampling part and the predetermined reference voltage sampled by the second sampling part; and a hold part configured to hold and output a voltage obtained by the addition or the subtraction by the adding/subtracting part.</p>
<p id="p-0009" num="0008">In this embodiment, the sample and hold circuit performs an addition or a subtraction between the sampled input voltage and the sampled predetermined reference voltage, and holds and outputs a voltage obtained by the addition or the subtraction. According to such a configuration, since a held voltage output from the sample and hold circuit can be adjusted, the output saturation can be prevented for the input voltage from a negative power supply potential to a positive power supply potential in the sample and hold circuit.</p>
<p id="p-0010" num="0009">It is noted that the sample and hold circuit may be configured such that the first and second sampling parts are a common sampling capacitor which is capable of accumulating input charge according to the input voltage and reference charge according to the reference voltage, the adding/subtracting part includes a second switch which is turned on after the input charge is accumulated in the sampling capacitor; a temporary storage capacitor to which the input charge accumulated in the sampling capacitor is transferred when the second switch is turned on; a third switch which is turned on after the input charge accumulated in the sampling capacitor is transferred to the temporary storage capacitor; and a re-transferring part which returns the input charge, which has been transferred to the temporary storage capacitor, after the reference charge is accumulated in the sampling capacitor when the third switch is turned on, in order to perform the addition or the subtraction of the charge accumulated in the sampling capacitor.</p>
<p id="p-0011" num="0010">Further, the sample and hold circuit may be configured such that hold part includes an operational amplifier; and a fourth switch which is provided on a line connecting a connection point between the first switch and the sampling capacitor and an output terminal of the operational amplifier and turned on when a hold output is performed, and the second switch and the temporary storage capacitor are provided on a line connecting a connection point between the sampling capacitor and an input terminal of the operational amplifier and a connection point between the fourth switch and the output terminal of the operational amplifier.</p>
<p id="p-0012" num="0011">Further, the sample and hold circuit may be configured such that a capacity of the temporary storage capacitor is greater than that of the sampling capacitor.</p>
<p id="p-0013" num="0012">Further, the sample and hold circuit may be configured such that the adding/subtracting part includes a first comparing part configured to determine whether the input voltage sampled by the first sampling part is greater than a first predetermined value; and an applying voltage switching part configured to switch, according to a determination result of the first comparing part, the predetermined reference voltage to be applied to an input side terminal of the sampling capacitor when the third switch is turned on at the time of transferring the input charge accumulated in the sampling capacitor to the temporary storage capacitor.</p>
<p id="p-0014" num="0013">Further, the sample and hold circuit may be configured such that the hold part includes an operational amplifier, and the adding/subtracting part includes a fifth switch configured to electrically connect an output side terminal of the temporary storage capacitor and the output terminal of the operational amplifier after the input charge accumulated in the sampling capacitor is transferred to the temporary storage capacitor; a second comparing part configured to determine whether a voltage of the output terminal of the operational amplifier after the input charge accumulated in the sampling capacitor is transferred to the temporary storage capacitor; and a sampling voltage switching part configured to switch the predetermined reference voltage sampled by the second sampling part according to a determination result of the second comparing part, and the re-transferring part returns the input charge, which has been transferred to the temporary storage capacitor, to the sampling capacitor in which the reference charge according to the predetermined reference voltage is accumulated, after the reference voltage is sampled by the second sampling part.</p>
<p id="p-0015" num="0014">Further, the sample and hold circuit may be applied to an A/D converter which includes an A/D converting part configured to perform an A/D conversion of an analog output voltage output by the hold part of the sample and hold circuit; and a digital value calculating part configured to derive an output digital value by performing an addition or a subtraction between a digital value obtained as a result of the A/D conversion by the A/D converting part and a digital value corresponding to the predetermined reference voltage sampled by the second sampling capacitor.</p>
<p id="p-0016" num="0015">Further, the object is achieved by a sample and hold circuit for sampling and holding a potential difference between two input voltages. The sample and hold circuit includes a pair of first switches which is turned on when the respective input voltages are to be sampled; a pair of sampling capacitors configured to accumulate input charges according to the input voltages input via the first switches in order to sample the input voltages input via the first switches when the first switches are turned on and reference charges according to two predetermined reference voltages in order to sample the predetermined reference voltages when the first switches are turned off; an adding/subtracting part configured to perform an addition or a subtraction between the input voltages sampled by the pair of the sampling capacitors and the predetermined reference voltages sampled by the pair of the sampling capacitors; and a hold part configured to hold and output the potential difference between two voltages obtained by the addition or the subtraction by the adding/subtracting part. The adding/subtracting part includes a pair of second switches which is turned on after the input charges are accumulated in the pair of the sampling capacitors; a pair of temporary storage capacitors to which the input charges accumulated in the pair of the sampling capacitors are transferred when the pair of the second switches is turned on; a third switch configured to connect input side terminals of the pair of the sampling capacitors when the input charges accumulated in the pair of the sampling capacitors are transferred to the pair of the temporary storage capacitors; a pair of fourth switches which is turned on after the input charges accumulated in the pair of the sampling capacitors are transferred to the pair of the temporary storage capacitors; and a re-transferring part which returns the input charges, which have been transferred to the pair of the temporary storage capacitors, after the reference charges are accumulated in the pair of the sampling capacitors when the pair of the fourth switches is turned on, in order to perform the addition or the subtraction of the charges accumulated in the pair of the sampling capacitors.</p>
<p id="p-0017" num="0016">In this embodiment, the sample and hold circuit performs an addition or a subtraction between the sampled two input voltages and the sampled two predetermined reference voltages, and holds and outputs a potential difference between two voltages obtained by the addition or the subtraction. According to such a configuration, since the potential difference between these two held voltages output from the sample and hold circuit can be adjusted, the output saturation can be prevented for the input voltage from a negative power supply potential to a positive power supply potential in the sample and hold circuit.</p>
<p id="p-0018" num="0017">It is noted that the sample and hold circuit may be configured such that the adding/subtracting part removes an amount of charges when turning on the pair of the fourth switches causes the reference charges to be accumulated in the pair of the sampling capacitors, the amount of charges corresponding to an input common-mode and remaining in the pair of the sampling capacitors.</p>
<p id="p-0019" num="0018">Further, the sample and hold circuit may be applied to an A/D converter which includes an A/D converting part configured to perform an A/D conversion of a potential difference between two analog output voltages output by the hold part of the sample and hold circuit; and a digital value calculating part configured to derive an output digital value by performing an addition or a subtraction between a digital value obtained as a result of the A/D conversion by the A/D converting part and digital values according to the predetermined reference voltages sampled by the pair of the sampling capacitors.</p>
<heading id="h-0007" level="1">Advantage of the Invention</heading>
<p id="p-0020" num="0019">According to the present invention, the output saturation for the input voltage over a power supply voltage range in the sample and hold circuit can be prevented.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0008" level="1">BRIEF DESCRIPTION OF DRAWINGS</heading>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 1</figref> is a diagram for illustrating a configuration of a sample and hold circuit according a first embodiment of the present invention.</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 2</figref> is a flowchart of an example of a control routine executed in an A/D converter including the sample and hold circuit according the first embodiment of the present invention.</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 3</figref> is a diagram for illustrating a status of the sample and hold circuit according the first embodiment of the present invention which is implemented at the time of sampling an input analog potential Vin.</p>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 4</figref> is a diagram for illustrating a status of the sample and hold circuit according the first embodiment of the present invention which is implemented at the time of transferring charge from a sampling capacitor Cs to a temporary storage capacitor Cf.</p>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. 5</figref> is a diagram for illustrating a status of the sample and hold circuit according the first embodiment of the present invention which is implemented at the time of sampling a reference potential Vref.</p>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. 6</figref> is a diagram for illustrating a status of the sample and hold circuit according the first embodiment of the present invention which is implemented at the time of transferring charge from the temporary storage capacitor Cf to the sampling capacitor Cs.</p>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 7</figref> is a diagram for illustrating a configuration of a sample and hold circuit according a second embodiment of the present invention.</p>
<p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. 8</figref> is a flowchart of an example of a control routine executed in an A/D converter including the sample and hold circuit according the second embodiment of the present invention.</p>
<p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. 9</figref> is a diagram for illustrating a status of the sample and hold circuit according the second embodiment of the present invention which is implemented at the time of sampling an input analog potential Vin.</p>
<p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. 10</figref> is a diagram for illustrating a status of the sample and hold circuit according the second embodiment of the present invention which is implemented at the time of transferring charge from a sampling capacitor Cs to a temporary storage capacitor Cf.</p>
<p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. 11</figref> is a diagram for illustrating a status of the sample and hold circuit according the second embodiment of the present invention which is implemented at the time of sampling a reference potential Vref.</p>
<p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. 12</figref> is a diagram for illustrating a status of the sample and hold circuit according the second embodiment of the present invention which is implemented at the time of transferring charge from the temporary storage capacitor Cf to the sampling capacitor Cs.</p>
<p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. 13</figref> is a diagram for illustrating a relationship between an input analog voltage Vin&#x2032; and an output analog voltage Vo&#x2032; in the sample and hold circuit according the second embodiment of the present invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0009" level="1">DESCRIPTION OF REFERENCE SYMBOLS</heading>
<p id="p-0034" num="0000">
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0033"><b>20</b>, <b>100</b> sample and hold circuit</li>
    <li id="ul0001-0002" num="0034"><b>22</b>, <b>102</b><i>p</i>, <b>102</b><i>n </i>input terminal</li>
    <li id="ul0001-0003" num="0035"><b>24</b>, <b>104</b> control circuit</li>
    <li id="ul0001-0004" num="0036"><b>26</b>, <b>28</b>, <b>32</b>, <b>106</b>, <b>108</b>, <b>110</b>, <b>122</b> reference terminal</li>
    <li id="ul0001-0005" num="0037"><b>30</b>, <b>120</b> operational amplifier</li>
    <li id="ul0001-0006" num="0038"><b>34</b>, <b>36</b>, <b>124</b>, <b>126</b> comparator</li>
    <li id="ul0001-0007" num="0039">Cs sampling capacitor</li>
    <li id="ul0001-0008" num="0040">Cf temporary storage capacitor</li>
    <li id="ul0001-0009" num="0041">S<b>1</b> through S<b>11</b> switch</li>
    <li id="ul0001-0010" num="0042">Vin, Vinp, Vinn input analog potential</li>
    <li id="ul0001-0011" num="0043">Vin&#x2032; input analog voltage</li>
    <li id="ul0001-0012" num="0044">Vicm input common-mode potential</li>
    <li id="ul0001-0013" num="0045">Vo, Vop, Von output analog potential</li>
    <li id="ul0001-0014" num="0046">Vo&#x2032; output analog voltage</li>
    <li id="ul0001-0015" num="0047">Vocm output common-mode potential</li>
    <li id="ul0001-0016" num="0048">Vref, Vrefp, Vrefn reference potential</li>
    <li id="ul0001-0017" num="0049">Vref&#x2032; reference voltage</li>
</ul>
</p>
<heading id="h-0010" level="1">BEST MODE FOR CARRYING OUT THE INVENTION</heading>
<p id="p-0035" num="0050">In the following, concrete embodiments of a sample and hold circuit and an A/D (Analog-to-Digital) converter according the present invention will be described in detail by referring to the accompanying drawings.</p>
<p id="h-0011" num="0000">[First Embodiment]</p>
<p id="p-0036" num="0051"><figref idref="DRAWINGS">FIG. 1</figref> is a diagram for illustrating a configuration of a sample and hold circuit <b>20</b> according a first embodiment of the present invention. The sample and hold circuit <b>20</b> according the embodiment is of a single-ended input type for sampling and holding an input analog voltage and outputting it. The sample and hold circuit <b>20</b> is applied to an A/D converter (an algorithmic ADC, a cyclic ADC, a pipelined ADC, or the like) which converts the input analog voltage to a digital value.</p>
<p id="p-0037" num="0052">As illustrated in <figref idref="DRAWINGS">FIG. 1</figref>, the sample and hold circuit <b>20</b> includes a capacitor Cs which is capable of sampling the input analog voltage. In the following, the capacitor Cs is referred to as a sampling capacitor Cs. It is assumed that the sampling capacitor Cs has a capacity Cs. An input side terminal of the sampling capacitor Cs is connected to an input terminal <b>22</b> via a switch S<b>1</b>. To the input terminal <b>22</b> is input an analog potential Vin which is to be A/D converted. The switch S<b>1</b> is provided for connecting or disconnecting the input side terminal of the sampling capacitor Cs and the input terminal <b>22</b>.</p>
<p id="p-0038" num="0053">The switch S<b>1</b> is controlled by a control circuit <b>24</b> described hereinafter. Specifically, the switch S<b>1</b> is controlled such that it is turned off when the input analog potential Vin is not to be sampled while it is turned on when the input analog potential Vin is to be sampled. The sampling capacitor Cs is capable of accumulating input charge according to the analog potential Vin input via the switch S<b>1</b> when the switch S<b>1</b> is in its ON state, and performs sampling of the input analog voltage by such accumulation of the input charge.</p>
<p id="p-0039" num="0054">Further, to the input side terminal of the sampling capacitor Cs are connected a first reference terminal <b>26</b> and a second reference terminal <b>28</b> via a switch S<b>2</b>. The switch S<b>2</b> is provided for connecting or disconnecting the first reference terminal <b>26</b> or the second reference terminal <b>28</b> and the input side terminal of the sampling capacitor Cs. The switch S<b>2</b> connects the input side terminal of the sampling capacitor Cs to the first reference terminal <b>26</b> or the second reference terminal <b>28</b> or disconnects it from the first reference terminal <b>26</b> or the second reference terminal <b>28</b>.</p>
<p id="p-0040" num="0055">To the first reference terminal <b>26</b> is supplied a reference potential Vref. Further, to the second reference terminal <b>28</b> is supplied an output common-mode potential Vocm. The switch S<b>2</b> is controlled by the control circuit <b>24</b>. Specifically, the switch S<b>2</b> is controlled such that it connects the first reference terminal <b>26</b> and the input side terminal of the sampling capacitor Cs when the reference potential Vref is to be sampled and it connects the second reference terminal <b>28</b> and the input side terminal of the sampling capacitor Cs when the output common-mode potential Vocm is to be sampled.</p>
<p id="p-0041" num="0056">The sampling capacitor Cs is capable of accumulating reference charge according to the reference potential Vref input via the switch S<b>2</b> when the switch S<b>2</b> connects the first reference terminal <b>26</b> and the input side terminal of the sampling capacitor Cs, and performs sampling of the reference potential Vref by such accumulation of the reference charge. On the other hand, the sampling capacitor Cs is capable of accumulating reference charge according to the output common-mode potential Vocm input via the switch S<b>2</b> when the switch S<b>2</b> connects the second reference terminal <b>28</b> and the input side terminal of the sampling capacitor Cs, and performs sampling of the potential Vocm by such accumulation of the reference charge.</p>
<p id="p-0042" num="0057">It is noted that in the embodiment it is assumed that the reference potential Vref corresponds to a positive power supply potential VDD (Vref=VDD), and the output common-mode potential Vocm is set to an intermediate value (=(VDD+VSS)/2) between the output common-mode potential Vocm and the positive power supply potential VDD. The output common-mode potential Vocm is set to zero, for example. Further, in the following, it is assumed that the input analog potential Vin input to the sample and hold circuit <b>20</b> with reference to the output common-mode potential Vocm is an input analog voltage Vin&#x2032; (=input analog potential Vin&#x2212;Vocm), the output analog potential Vo output from the sample and hold circuit <b>20</b> with reference to the output common-mode potential Vocm is an output analog voltage Vo&#x2032; (=output analog potential Vo&#x2212;Vocm), the reference potential Vref with reference to the output common-mode potential Vocm voltage is a reference voltage Vref&#x2032; (=reference potential Vref&#x2212;Vocm).</p>
<p id="p-0043" num="0058">The sample and hold circuit <b>20</b> further includes an operational amplifier <b>30</b>. To the output side terminal of the sampling capacitor Cs are connected a third reference terminal <b>32</b> via a switch S<b>3</b> and a negative input terminal (an inverting terminal) of the operational amplifier <b>30</b> via a switch S<b>4</b>. To the third reference terminal <b>32</b> is input an input common-mode potential Vicm of the operational amplifier <b>30</b>. Further, a positive input terminal (a non-inverting terminal) of the operational amplifier <b>30</b> is connected to a terminal to which the input common-mode potential Vicm is input.</p>
<p id="p-0044" num="0059">It is noted that in the embodiment the input common-mode potential Vicm is an appropriate voltage for operating the operational amplifier <b>30</b> and can be set independently from the output common-mode potential Vocm. However, in the following, it is assumed that the input common-mode potential Vicm is the same as the output common-mode potential Vocm (i.e., Vicm=Vocm). It is noted that since electrical shortings between the input terminal and the output terminal of the operational amplifier <b>30</b> cause an offset cancellation, the electrical shortings cause the input common-mode potential Vicm and the output common-mode potential Vocm to automatically be equal to each other. Further, it is assumed that the operational amplifier <b>30</b> has a sufficient gain for an output range whose center is located at the output common-mode potential Vocm. The output range is about a half of the potential difference between the positive power supply potential VDD and the negative power supply potential VSS (specifically, the output range is from &#x2212;(VDD&#x2212;VSS)/2&#x2212;&#x3b1; to +(VDD&#x2212;VSS)/2+&#x3b1;, where &#x3b1; is a small value, &#x201c;0.2&#x201d;, for example).</p>
<p id="p-0045" num="0060">The switch S<b>3</b> is provided for connecting or disconnecting the output side terminal of the sampling capacitor Cs and the third reference terminal <b>32</b>. The switch S<b>3</b> is controlled by the control circuit <b>24</b>. Specifically, the switch S<b>3</b> is controlled such that it is turned off when the sampling at the sampling capacitor Cs is not to be performed while it is turned on when the sampling at the sampling capacitor Cs is to be performed. The switch S<b>4</b> is provided for connecting or disconnecting the output side terminal of the sampling capacitor Cs and the negative input terminal of the operational amplifier <b>30</b>. The switch S<b>4</b> is controlled by the control circuit <b>24</b> as described hereinafter.</p>
<p id="p-0046" num="0061">The negative input terminal of the operational amplifier <b>30</b> is connected to a capacitor Cf via a switch S<b>5</b>. The switch S<b>5</b> is provided for connecting or disconnecting the negative input terminal of the operational amplifier <b>30</b> and the input side terminal of the capacitor Cf. The switch S<b>5</b> is controlled by the control circuit <b>24</b> as described hereinafter. The capacitor Cf is a temporary storage capacitor to which the charge accumulated in the sampling capacitor Cs is transferred. In the following, the capacitor Cf is referred to as a temporary storage capacitor Cf. It is assumed that the temporary storage capacitor Cf has a capacity Cf. The capacity Cf of the temporary storage capacitor Cf is set such that it is greater than the capacity Cs of the sampling capacitor Cs (i.e., Cf=a*Cs, where a is greater than 1, a=2, for example).</p>
<p id="p-0047" num="0062">To an output side terminal of the temporary storage capacitor Cf are connected the output terminal of the operational amplifier <b>30</b> via a switch S<b>6</b> and the second reference terminal <b>28</b> via a switch S<b>7</b>. The switch S<b>6</b> is provided for connecting or disconnecting the output side terminal of the temporary storage capacitor Cf and the output terminal of the operational amplifier <b>30</b>. The switch S<b>6</b> is controlled by the control circuit <b>24</b>. Further, the switch S<b>7</b> is provided for connecting or disconnecting the output side terminal of the temporary storage capacitor Cf and the second reference terminal <b>28</b>. The switch S<b>7</b> is controlled by the control circuit <b>24</b>.</p>
<p id="p-0048" num="0063">Further, the output terminal of the operational amplifier <b>30</b> is connected to the input side terminal of the sampling capacitor Cs via a switch S<b>8</b>. The switch S<b>8</b> is provided for connecting or disconnecting the output terminal of the operational amplifier <b>30</b> and the input side terminal of the sampling capacitor Cs. The switch S<b>8</b> is controlled by the control circuit <b>24</b>.</p>
<p id="p-0049" num="0064">To the output terminal of the operational amplifier <b>30</b> are connected positive input terminals of two comparators <b>34</b> and <b>36</b> via a switch S<b>9</b>. The switch S<b>9</b> is provided for connecting or disconnecting the output terminal of the operational amplifier <b>30</b> and the positive input terminals of the comparators <b>34</b> and <b>36</b>. The switch S<b>9</b> is controlled by the control circuit <b>24</b>. Further, the positive input terminals of the comparators <b>34</b> and <b>36</b> are connected to the input side terminal of the sampling capacitor Cs via a switch S<b>10</b>. The switch S<b>10</b> is provided for connecting or disconnecting the positive input terminals of the comparators <b>34</b> and the input side terminal of the sampling capacitor Cs. The switch S<b>10</b> is controlled by the control circuit <b>24</b>.</p>
<p id="p-0050" num="0065">To negative input terminals of the comparators <b>34</b> and <b>36</b> is connected a second reference terminal <b>28</b>. The comparators <b>34</b> and <b>36</b> have offsets, respectively. The comparators <b>34</b> and <b>36</b> compare the voltages input to the input terminals thereof and output comparison results to the control circuit <b>24</b> when the switch S<b>9</b> or S<b>10</b> is in its ON state. Specifically, at that time, the comparators and <b>36</b> compare the analog potential Vo at the output terminal of the operational amplifier <b>30</b> or the input analog potential Vin with a voltage (i.e., a value described in detail hereinafter) based on the output common-mode potential Vocm, and outputs the comparison results to the control circuit <b>24</b>. The control circuit <b>24</b> controls connection/disconnection of the switch S<b>2</b> based on the comparison results of the comparators <b>34</b> and <b>36</b> as described hereinafter.</p>
<p id="p-0051" num="0066">Next, with reference to <figref idref="DRAWINGS">FIG. 2</figref> through <figref idref="DRAWINGS">FIG. 6</figref>, operations of the sample and hold circuit <b>20</b> and the A/D converter according to the embodiment are described.</p>
<p id="p-0052" num="0067"><figref idref="DRAWINGS">FIG. 2</figref> is a flowchart of an example of a control routine executed in an A/D conversion device including the sample and hold circuit <b>20</b> according the embodiment. <figref idref="DRAWINGS">FIG. 3</figref> is a diagram for illustrating a status of the sample and hold circuit <b>20</b> according the embodiment which is implemented at the time of sampling the input analog potential Vin (the input analog voltage Vin&#x2032;). <figref idref="DRAWINGS">FIG. 4</figref> is a diagram for illustrating a status of the sample and hold circuit <b>20</b> according the embodiment which is implemented at the time of transferring charge from the sampling capacitor Cs to the temporary storage capacitor Cf. <figref idref="DRAWINGS">FIG. 5</figref> is a diagram for illustrating a status of the sample and hold circuit <b>20</b> according the embodiment which is implemented at the time of sampling the reference potential Vref (the reference voltage Vref&#x2032;). Further, <figref idref="DRAWINGS">FIG. 6</figref> is a diagram for illustrating a status of the sample and hold circuit <b>20</b> according the embodiment which is implemented at the time of transferring charge from the temporary storage capacitor Cf to the sampling capacitor Cs.</p>
<p id="p-0053" num="0068">In the embodiment, the switch S<b>1</b> is in its OFF state immediately before the A/D converter performs the A/D conversion. When the A/D conversion is performed in such a status, at first, the control circuit <b>24</b> of the sample and hold circuit <b>20</b> performs sampling of the input analog potential Vin (step <b>100</b>). Specifically, at that time, the control circuit <b>24</b> turns on the switch S<b>1</b> from its OFF state, turns the switches S<b>2</b>, S<b>8</b> and S<b>9</b> off, and turns the switch S<b>3</b> on (see <figref idref="DRAWINGS">FIG. 3</figref>).</p>
<p id="p-0054" num="0069">When the switches S<b>1</b> and S<b>3</b> are turned on and the switch S<b>2</b> is turned off, a potential difference (input voltage) between the analog potential Vin input to the input terminal <b>22</b> and the input common-mode potential Vicm is applied to the sampling capacitor Cs and thus the charge (input charge) according to the potential difference is accumulated in the sampling capacitor Cs. In this case, the sampling of the input analog potential Vin is performed at the sampling capacitor Cs.</p>
<p id="p-0055" num="0070">It is noted that the control circuit <b>24</b> turns the switches S<b>4</b>, S<b>5</b> and S<b>7</b> on and turns the switch S<b>6</b> off (see <figref idref="DRAWINGS">FIG. 3</figref>) when or before the sampling of the input analog potential Vin is performed at the sampling capacitor Cs. When the switches S<b>4</b>, S<b>5</b> and S<b>7</b> are turned on and the switch S<b>6</b> is turned off, the temporary storage capacitor Cf is short-circuited to the output common-mode potential Vocm and thus the remaining charge accumulated in the temporary storage capacitor Cf is discharged. For this reason, if the sampling of the input analog potential Vin is performed at the sampling capacitor Cs, the charge accumulated in the temporary storage capacitor Cf is reset.</p>
<p id="p-0056" num="0071">Further, when the sampling of the input analog potential Vin is performed at the sampling capacitor Cs, the control circuit <b>24</b> turns the switch S<b>10</b> on (see <figref idref="DRAWINGS">FIG. 3</figref>). When the switch S<b>10</b> is turned on, the input analog potential Vin input to the input terminal <b>22</b> is input to the positive input terminal of the comparator <b>34</b>. The comparator <b>34</b> supplies the comparison result to the control circuit <b>24</b>. The comparison result indicates whether the input analog potential Vin input to the positive input terminal is greater than the output common-mode potential Vocm input to the negative input terminal by more than 1/b of the reference voltage Vref&#x2032;, that is to say, whether the input analog voltage Vin&#x2032; is greater than the 1/b of the reference voltage Vref&#x2032; (i.e., Vin&#x2032;&#x3e;Vref&#x2032;/b). The control circuit <b>24</b> determines whether the input analog voltage Vin&#x2032; is greater than the 1/b of the reference voltage Vref&#x2032; based on the comparison result information from the comparator <b>34</b> (step <b>102</b>). However, a value of b is greater than 1, which is necessary to perform the process for preventing the output saturation even though the input analog potential Vin is within a predetermined range which is out of the range from the negative power supply potential VSS to the positive power supply potential VDD. The value of b is 2, for example.</p>
<p id="p-0057" num="0072">It is noted that if the sampling of the input analog potential Vin is performed at the sampling capacitor Cs, the output terminal of the operational amplifier <b>30</b> may be opened or short-circuited to the output common-mode potential Vocm. Alternatively, the input terminal and the output terminal of the operational amplifier <b>30</b> may be short-circuited to implement the offset cancellation.</p>
<p id="p-0058" num="0073">If the sampling of the input analog potential Vin at the sampling capacitor Cs is completed and the input charge according to the input analog potential Vin (specifically, Vin&#x2212;Vicm) is accumulated in the sampling capacitor Cs, then the control circuit <b>24</b> performs a process for transferring the input charge accumulated in the sampling capacitor Cs to the temporary storage capacitor Cf. Specifically, at that time, the control circuit <b>24</b> turns off the switches S<b>1</b> and S<b>7</b> from their ON states, and turns on the switches S<b>6</b> and S<b>9</b> from their OFF states (see <figref idref="DRAWINGS">FIG. 4</figref>).</p>
<p id="p-0059" num="0074">If the control circuit <b>24</b> determines that the condition Vin&#x2032;&#x3e;Vref&#x2032;/b is not met based on the comparison result of the comparator <b>34</b> in step <b>102</b>, the control circuit <b>24</b> connects the switch S<b>2</b> to the second reference terminal <b>28</b> to connect the second reference terminal <b>28</b> and the sampling capacitor Cs (step <b>104</b>). When such a connection is implemented, the output common-mode potential Vocm is applied to the input side terminal of the sampling capacitor Cs, and the input charge according to the input analog potential Vin accumulated in the sampling capacitor Cs with reference to the applied potential Vocm is transferred to the temporary storage capacitor Cf. In this case, since the voltage across the temporary storage capacitor Cf is Cs/Cf*Vin&#x2032;, the analog potential Vo at the output terminal of the operational amplifier <b>30</b> is the potential (Vo=Cs/Cf*Vin&#x2032;+Vocm) according to the respective capacities Cs and Cf of the sampling capacitor Cs and the temporary storage capacitor Cf and the input analog voltage Vin&#x2032;.</p>
<p id="p-0060" num="0075">On the other hand, if the control circuit determines that the condition Vin&#x2032;&#x3e;Vref&#x2032;/b is met based on the comparison result of the comparator <b>34</b> in step <b>102</b>, the control circuit <b>24</b> connects the switch S<b>2</b> to the first reference terminal <b>26</b> to connect the first reference terminal <b>26</b> and the sampling capacitor Cs (step <b>106</b>). When such a connection is implemented, the reference potential Vref is applied to the input side terminal of the sampling capacitor Cs, and the input charge according to the input analog potential Vin accumulated in the sampling capacitor Cs with reference to the applied potential Vref is transferred to the temporary storage capacitor Cf. In this case, since the charge according to the reference voltage Vref&#x2032; remains at the sampling capacitor Cs, the voltage across the temporary storage capacitor Cf is (Cs/Cf)*(Vin&#x2032;&#x2212;Vref&#x2032;), and the analog potential Vo at the output terminal of the operational amplifier <b>30</b> is the potential (Vo=(Cs/Cf)*(Vin&#x2032;&#x2212;Vref&#x2032;)+Vocm) according to the respective capacities Cs and Cf of the sampling capacitor Cs and the temporary storage capacitor Cf, the input analog voltage Vin&#x2032; and the reference voltage Vref&#x2032;.</p>
<p id="p-0061" num="0076">Thus, the charge transferred from the sampling capacitor Cs to the temporary storage capacitor Cf corresponds to the input analog voltage Vin&#x2032; (specifically, (Cs/Cf)*Vin&#x2032;) if the input analog voltage Vin&#x2032; is not greater than 1/b of the reference voltage Vref&#x2032;, while it corresponds to the value (specifically, (Cs/Cf)*(Vin&#x2032;&#x2212;Vref&#x2032;)) which is obtained by subtracting the reference voltage Vref&#x2032; from the input analog potential Vin if the input analog voltage Vin&#x2032; is greater than 1/b of the reference voltage Vref&#x2032;. In this way, after the sampling of the input analog potential Vin at the sampling capacitor Cs is completed, the charge according to the magnitude of the input analog voltage Vin&#x2032; is transferred to the temporary storage capacitor Cf.</p>
<p id="p-0062" num="0077">According to such a configuration, if it is assumed, for example, that the condition a=2 is met with respect to the ratio between the capacity Cs of the sampling capacitor Cs and the capacity Cf of the temporary storage capacitor Cf and the condition b=2 is met with respect to the value b, the output analog voltage Vo&#x2032; falls within a range from &#x2212;Vref&#x2032;/2 to +Vref&#x2032;/4 (i.e., &#x2212;Vref&#x2032;/2=&#x3c;Vo&#x2032;=&#x3c;+Vref&#x2032;/4) when the input analog voltage Vin&#x2032; has a range from &#x2212;Vref&#x2032; to +Vref&#x2032;/2. Further, when the input analog voltage Vin&#x2032; has a range from +Vref&#x2032;/2 to a value near +Vref&#x2032;, the output analog voltage Vo&#x2032; falls within a range from &#x2212;Vref&#x2032;/4 to a value near 0 (i.e., the output common-mode potential Vocm) (i.e., &#x2212;Vref&#x2032;=&#x3c;Vo&#x2032;=&#x3c;0). For this reason, at the time of transferring the charge from the sampling capacitor Cs to the temporary storage capacitor Cf, the output saturation of the operational amplifier <b>30</b> is prevented.</p>
<p id="p-0063" num="0078">It is noted that if the charge is transferred from the sampling capacitor Cs to the temporary storage capacitor Cf as described above, the output analog potential Vo (=Vo&#x2032;+Vocm) at the output terminal of the operational amplifier <b>30</b> is input to the positive input terminal of the comparator <b>36</b>. The comparator <b>36</b> supplies the comparison result to the control circuit <b>24</b>. The comparison result indicates whether the output analog potential Vo input to the positive input terminal is greater than the output common-mode potential Vocm input to the negative input terminal by more than 1/(a*b) of the reference voltage Vref&#x2032;, that is to say, whether the output analog voltage Vo&#x2032; is greater than the 1/(a*b) of the negative reference voltage Vref&#x2032; (i.e., Vo&#x2032;&#x3e;&#x2212;Vref&#x2032;/(a*b)). The control circuit <b>24</b> determines whether the condition Vo&#x2032;&#x3e;&#x2212;Vref&#x2032;/(a*b) is met based on the comparison result information from the comparator <b>36</b>.</p>
<p id="p-0064" num="0079">After the transfer of the charge from the sampling capacitor Cs to the temporary storage capacitor Cf is completed, if the control circuit <b>24</b> determines that the condition Vo&#x2032;&#x3e;&#x2212;Vref&#x2032;/(a*b) is met based on the comparison result of the comparator <b>36</b> in step <b>108</b>, it performs a process for sampling the output common-mode potential Vocm (step <b>110</b>). Specifically, at that time, the control circuit <b>24</b> connects the switch S<b>2</b> to the second reference terminal <b>28</b>, turns on the switch S<b>3</b> from its OFF state, and turns off the switch S<b>4</b> from its ON state.</p>
<p id="p-0065" num="0080">When the switch S<b>2</b> is connected to the second reference terminal <b>28</b> and the switch S<b>3</b> is turned on, the potential difference (0 in the embodiment) between the output common-mode potential Vocm input to the second reference terminal <b>28</b> and the input common-mode potential Vicm is applied to the sampling capacitor Cs, and thus the charge according to the potential difference is accumulated in the sampling capacitor Cs. Thus, if the condition Vo&#x2032;&#x3e;&#x2212;Vref&#x2032;/(a*b) is met, the sampling of the output common-mode potential Vocm is performed at the sampling capacitor Cs.</p>
<p id="p-0066" num="0081">On the other hand, after the transfer of the charge from the sampling capacitor Cs to the temporary storage capacitor Cf is completed, if the control circuit <b>24</b> determines that the condition Vo&#x2032;&#x3e;&#x2212;Vref&#x2032;/(a*b) is not met based on the comparison result of the comparator <b>36</b> in step <b>108</b>, it performs a process for sampling the reference potential Vref (step <b>112</b>). Specifically, at that time, the control circuit <b>24</b> connects the switch S<b>2</b> to the first reference terminal <b>26</b>, turns on the switch S<b>3</b> from its OFF state, and turns off the switch S<b>4</b> from its ON state (see <figref idref="DRAWINGS">FIG. 5</figref>).</p>
<p id="p-0067" num="0082">When the switch S<b>2</b> is connected to the first reference terminal <b>26</b> and the switch S<b>3</b> is turned on, the potential difference between the reference potential Vref input to the first reference terminal <b>26</b> and the input common-mode potential Vicm is applied to the sampling capacitor Cs, and thus the charge according to the potential difference is accumulated in the sampling capacitor Cs. Thus, if the condition Vo&#x2032;&#x3e;&#x2212;Vref&#x2032;/(a*b) is not met, the sampling of the reference potential Vref is performed at the sampling capacitor Cs.</p>
<p id="p-0068" num="0083">It is noted that the control circuit <b>24</b> keeps the ON states of the switches S<b>5</b> and S<b>6</b> and turns off the switches S<b>4</b> and S<b>9</b> from their ON states when the control circuit <b>24</b> performs the sampling of the output common-mode potential Vocm or the reference potential Vref at the sampling capacitor Cs (see <figref idref="DRAWINGS">FIG. 5</figref>). When such a process is performed, the charge transferred to the temporary storage capacitor Cf and accumulated therein is held in the temporary storage capacitor Cf.</p>
<p id="p-0069" num="0084">When the sampling of the output common-mode potential Vocm or the reference potential Vref at the sampling capacitor Cs is performed as described above, then the control circuit <b>24</b> performs a process for returning the charge, which has been transferred to the temporary storage capacitor Cf and accumulated therein, to the sampling capacitor Cs (step <b>114</b>). Specifically, at that time, the control circuit <b>24</b> turns off the switches S<b>2</b>, S<b>3</b> and S<b>6</b> from their ON states, and turns on the switches S<b>4</b>, S<b>7</b> and S<b>8</b> from their OFF states. When such states of the respective switches are implemented, the charge (specifically, the charge according to the input analog voltage Vin&#x2032; or a voltage obtained by subtracting the reference voltage Vref&#x2032; from the input analog voltage Vin&#x2032;) accumulated in the temporary storage capacitor Cf with reference to the output common-mode potential Vocm is re-transferred to the sampling capacitor Cs.</p>
<p id="p-0070" num="0085">When such a re-transfer of the charge is performed, the voltage across the sampling capacitor Cs is Vin&#x2032; or Vin&#x2032;&#x2212;Vref&#x2032;, if the condition Vo&#x2032;&#x3e;&#x2212;Vref&#x2032;/(a*b) is met and thus the sampling of the output common-mode potential Vocm at the sampling capacitor Cs is performed in step <b>110</b>. It is noted that the voltage across the sampling capacitor Cs is Vin&#x2032; when the condition Vin&#x2032;&#x3e;+Vref&#x2032;/b is not met, and the voltage across the sampling capacitor Cs is Vin&#x2032;&#x2212;Vref&#x2032; when the condition Vin&#x2032;&#x3e;+Vref&#x2032;/b is met.</p>
<p id="p-0071" num="0086">On the other hand, if the condition Vo&#x2032;&#x3e;&#x2212;Vref&#x2032;/(a*b) is not met and thus the sampling of the reference potential Vref is performed at the sampling capacitor Cs, the voltage across the sampling capacitor Cs is Vin&#x2032;+Vref&#x2032;. It is noted that the voltage across the sampling capacitor Cs is Vin&#x2032;+Vref&#x2032; when the condition Vo&#x2032;&#x3e;&#x2212;Vref&#x2032;/(a*b) is not met, that is to say, when Vin&#x2032;&#x3c;&#x2212;Vref&#x2032;/b is met.</p>
<p id="p-0072" num="0087">Thus, the voltage across the sampling capacitor Cs after the re-transfer of the charge from the temporary storage capacitor Cf to the sampling capacitor Cs is Vin&#x2032;+Vref&#x2032; if Vin&#x2032;&#x3c;&#x2212;Vref&#x2032;/b, Vin&#x2032; if &#x2212;Vref&#x2032;/b&#x3c;Vin&#x2032;&#x3c;Vref&#x2032;/b, and Vin&#x2032;&#x2212;Vref&#x2032; if Vin&#x2032;&#x3e;+Vref&#x2032;/b. For this reason, the output analog voltage Vo&#x2032; at the output terminal of the operational amplifier <b>30</b> falls within a range from &#x2212;Vref&#x2032; to +Vref&#x2032;. The voltage across the sampling capacitor Cs is sampled and held as the output analog voltage Vo&#x2032; of the operational amplifier <b>30</b> (step <b>16</b>).</p>
<p id="p-0073" num="0088">In this way, according to the sample and hold circuit <b>20</b> of the present embodiment, if the input analog voltage Vin&#x2032; is within a range from the negative power supply potential VSS (=&#x2212;Vref&#x2032;) to the positive power supply potential VDD (=+Vref&#x2032;), the output analog voltage Vo&#x2032; sampled and held to be output can be adjusted to fall within the range from &#x2212;Vref&#x2032; to +Vref&#x2032;.</p>
<p id="p-0074" num="0089">As described above, the value of b is greater than 1, which is necessary to perform the process for preventing the output saturation even though the input analog potential Vin is within a predetermined range which is out of the range from the negative power supply potential VSS to the positive power supply potential VDD. For this reason, the sample and hold circuit <b>20</b> performs the sample and hold process without causing the output saturation of the operational amplifier <b>30</b>, if the input analog potential Vin is near the negative power supply potential VSS or the positive power supply potential VDD, or if the input analog potential Vin is slightly smaller than the negative power supply potential VSS or greater than the positive power supply potential VDD. In other words, the sample and hold circuit <b>20</b> can prevent the output saturation for the input analog potential Vin from the negative power supply potential VSS to the positive power supply potential VDD (and further the input analog potential Vin which is slightly smaller than the negative power supply potential VSS or greater than the positive power supply potential VDD) in performing the sample and hold process. Further, conversely, the sample and hold circuit <b>20</b> can increase a range of the input analog potential Vin which is permitted in terms of preventing the output saturation to b times (greater than one time) of the power supply potentials VSS and VDD with respect to the input common-mode potential Vicm.</p>
<p id="p-0075" num="0090">It is noted that, according to the sample and hold circuit <b>20</b> described above, in the course of holding and outputting the output analog potential Vo based on the input analog potential Vin, the sampling of the input analog potential Vin is performed at the sampling capacitor Cs, the sampling of the reference potential Vref or the output common-mode potential Vocm after the transfer of the charge from the sampling capacitor Cs to the temporary storage capacitor Cf is performed at the sampling capacitor Cs, and then the charge accumulated in the temporary storage capacitor Cf is returned to the sampling capacitor Cs to perform the hold and output process from the operational amplifier <b>30</b>. In the sample and hold circuit <b>20</b>, the respective processes from the input of the input analog potential Vin to the output of the output analog potential Vo are performed using the sampling capacitor Cs as a base point. For this reason, even if the ratio between the capacity of the sampling capacitor Cs and the capacity of the temporary storage capacitor Cf (i.e., the value a) has variations, the sample and hold circuit <b>20</b> can perform the hold and output process of the output analog potential Vo without being influenced by the variations.</p>
<p id="p-0076" num="0091">In the embodiment, the A/D converter converts the output analog potential Vo output from the sample and hold circuit <b>20</b> to a digital value (step <b>118</b>). It is noted that since the output analog potential Vo output from the sample and hold circuit <b>20</b> is obtained through an addition or a subtraction of the charge or the voltage due to the charge transfer between the sampling capacitor Cs and the temporary storage capacitor Cf and the voltage sampling, it does not correspond to the input analog potential Vin in a one-to-one relationship.</p>
<p id="p-0077" num="0092">Therefore, the A/D converter adds or subtracts a digital value corresponding to the added or subtracted charge or voltage, if necessary, to or from the digital value obtained by the A/D conversion in step <b>118</b> to calculate a final output digital value. Then, the A/D converter outputs the calculated final digital value to the outside.</p>
<p id="p-0078" num="0093">Specifically, when the A/D converter performs the addition or the subtraction of the charge or the voltage due to the charge transfer between the sampling capacitor Cs and the temporary storage capacitor Cf or the voltage sampling, it stores the fact in a memory at that time. Then, the A/D converter determines that the addition or the subtraction of the charge is not performed in the processes from the input of the input analog potential Vin to the output of the output analog potential Vo based on the information stored in the memory if &#x2212;Vref&#x2032;/b&#x3c;Vin&#x2032;&#x3c;Vref&#x2032;/b, and outputs the digital value, which is obtained by A/D converting the output analog potential Vo, as it is as the final output digital value. Further, the A/D converter determines that the subtraction of the charge corresponding to the reference voltage Vref&#x2032; from the charge accumulated in the sampling capacitor Cs is performed at the time of transferring the charge from the sampling capacitor Cs to the temporary storage capacitor Cf based on the information stored in the memory if Vin&#x2032;&#x3e;+Vref&#x2032;/b, and outputs the digital value, which is obtained by adding the digital value corresponding the reference voltage Vref&#x2032; to the digital value obtained by A/D converting the output analog potential Vo in order to compensate for the subtraction, as the final output digital value. Further, the A/D converter determines that the addition of the charge corresponding the reference voltage Vref&#x2032; to the charge accumulated in the sampling capacitor Cs is performed by re-transferring the charge from the temporary storage capacitor Cf to the sampling capacitor Cs after the sampling of the reference potential Vref is performed based on the information stored in the memory if Vin&#x2032;&#x3c;&#x2212;Vref&#x2032;/b, and outputs the digital value, which is obtained by subtracting the digital value corresponding the reference voltage Vref&#x2032; from the digital value obtained by A/D converting the output analog potential Vo in order to compensate for the addition, as the final output digital value.</p>
<p id="p-0079" num="0094">According to the digital process, a digital output which corresponds to the input analog potential Vin in a one-to-one relationship can be obtained. Thus, according to the A/D converter, it is possible to precisely perform the A/D conversion of the input analog potential Vin in the range which is slightly greater than the range from the negative power supply potential VSS to the positive power supply potential VDD, in addition to the range from the negative power supply potential VSS to the positive power supply potential VDD. Further, according to the digital process, a precise A/D conversion to obtain the digital output which corresponds to the input analog potential Vin in a one-to-one relationship can be implemented by simple digital calculations such an addition or a subtraction of the digital value.</p>
<p id="p-0080" num="0095">It is noted that the comparators <b>34</b> and <b>36</b> of the sample and hold circuit <b>20</b> have predetermined offsets; however, even if the offsets have deviations from design values, they do not substantially affect A/D conversion characteristics of the A/D converter. This is because if the operational amplifier <b>30</b> has a sufficient gain over the output voltage range, the A/D converted digital value or the final digital output value obtained by addition or the subtraction of the value is not affected, although the offset variations of the comparators <b>34</b> and <b>36</b> have a slight influence on the output voltage of the operational amplifier <b>30</b>.</p>
<p id="p-0081" num="0096">According to the first embodiment described above, the switch S<b>1</b> corresponds to &#x201c;a first switch&#x201d; in claims; the sampling capacitor Cs corresponds to &#x201c;a first sampling part&#x201d; and &#x201c;a second sampling part&#x201d; in claims; the reference potential Vref (reference voltage Vref&#x2032;) or the output common-mode potential Vocm corresponds to &#x201c;a predetermined reference voltage&#x201d; in claims; the switches S<b>4</b>, S<b>5</b> and S<b>7</b> correspond to &#x201c;a second switch&#x201d; in claims; the switch S<b>2</b> corresponds to &#x201c;a third switch&#x201d; in claims; &#x201c;an adding/subtracting part&#x201d; and &#x201c;a hold part&#x201d; in claims are implemented by the processes <b>102</b> through <b>108</b>, <b>114</b> and <b>116</b> executed by the switches S<b>2</b> through S<b>10</b>, the temporary storage capacitor Cf, the operational amplifier <b>30</b>, the comparators <b>34</b> and <b>36</b> and the control circuit <b>24</b>; and &#x201c;a re-transferring part&#x201d; in claims is implemented by the process <b>114</b> executed by the control circuit <b>24</b>.</p>
<p id="p-0082" num="0097">Further, the switch S<b>8</b> corresponds to &#x201c;a fourth switch&#x201d; in claims, the switch S<b>6</b> corresponds to &#x201c;a fifth switch&#x201d; in claims, &#x201c;a first comparing part&#x201d; in claims is implemented by the process <b>102</b> executed by the control circuit <b>24</b>, &#x201c;an applying voltage switching part&#x201d; in claims is implemented by the processes <b>104</b> and <b>106</b> executed by the control circuit <b>24</b>, &#x201c;a second comparing part&#x201d; in claims is implemented by the process <b>108</b> executed by the control circuit <b>24</b>, &#x201c;sampling voltage switching part&#x201d; in claims is implemented by the processes <b>110</b> and <b>112</b> executed by the control circuit <b>24</b>, &#x201c;an A/D converting part&#x201d; in claims is implemented by the process <b>118</b> executed by the A/D converter, and &#x201c;a digital value calculating part&#x201d; is implemented by the process <b>108</b> executed by the A/D converter.</p>
<p id="h-0012" num="0000">[Second Embodiment]</p>
<p id="p-0083" num="0098"><figref idref="DRAWINGS">FIG. 7</figref> is a diagram for illustrating a configuration of a sample and hold circuit <b>100</b> according a second embodiment of the present invention. The sample and hold circuit <b>100</b> according the embodiment is of a differential input type for sampling and holding a potential difference between two input analog voltages and outputting it. The sample and hold circuit <b>20</b> is applied to an A/D converter (an algorithmic ADC, a cyclic ADC, a pipelined ADC, or the like) which converts the input analog voltage to a digital value.</p>
<p id="p-0084" num="0099">As illustrated in <figref idref="DRAWINGS">FIG. 7</figref>, the sample and hold circuit <b>100</b> includes a pair of capacitors Csp and Csn which capacitors are capable of sampling two input analog voltages. In the following, the capacitors Csp and Csn are referred to as sampling capacitors Csp and Csn. It is assumed that the sampling capacitors Csp and Csn have capacities Csp and Csn. To an input side terminal of the sampling capacitor Csp is connected an input terminal <b>102</b><i>p </i>via a switch S<b>1</b><i>p</i>, and to an input side terminal of the sampling capacitor Csn is connected an input terminal <b>102</b><i>n </i>via a switch S<b>1</b><i>n</i>. To the input terminal <b>102</b><i>p </i>is input an input analog potential Vinp, and to the input terminal <b>102</b><i>n </i>is input an input analog potential Vinn. The switch S<b>1</b><i>p </i>is provided for connecting or disconnecting the input side terminal of the sampling capacitor Csp and the input terminal <b>102</b><i>p</i>. Further, the switch S<b>1</b><i>n </i>is provided for connecting or disconnecting the input side terminal of the sampling capacitor Csn and the input terminal <b>102</b><i>n. </i></p>
<p id="p-0085" num="0100">The switches S<b>1</b><i>p </i>and S<b>1</b><i>n </i>are controlled by a control circuit <b>104</b> described hereinafter. Specifically, the switches S<b>1</b><i>p </i>and S<b>1</b><i>n </i>are controlled such that the switches S<b>1</b><i>p </i>and S<b>1</b><i>n </i>are turned off when the input analog potentials Vinp and Vinn are not to be sampled while the switches S<b>1</b><i>p </i>and S<b>1</b><i>n </i>are turned on when the input analog potentials Vinp and Vinn are to be sampled. The sampling capacitor Csp is capable of accumulating input charge according to the analog potential Vinp input via the switch S<b>1</b><i>p </i>when the switch S<b>1</b><i>p </i>is in its ON state, and performs sampling of the input analog voltage by such accumulation of the input charge. The sampling capacitor Csn is capable of accumulating input charge according to the analog potential Vinn input via the switch S<b>1</b><i>n </i>when the switch S<b>1</b><i>n </i>is in its ON state, and performs sampling of the input analog voltage by such accumulation of the input charge.</p>
<p id="p-0086" num="0101">Further, to the input side terminal of the sampling capacitor Csp are connected a first reference terminal <b>106</b>, a second reference terminal <b>108</b> and a third reference terminal <b>110</b> via a switch S<b>2</b><i>p</i>. Further, to the input side terminal of the sampling capacitor Csn are connected the first reference terminal <b>106</b>, the second reference terminal <b>108</b> and the third reference terminal <b>110</b> via a switch S<b>2</b><i>n</i>. The switches S<b>2</b><i>p </i>and S<b>2</b><i>n </i>are provided for connecting or disconnecting the first, the second and the third reference terminals <b>106</b>, <b>108</b> and <b>110</b> and the input side terminals of the sampling capacitors Csp and Csn. The switches S<b>2</b><i>p </i>and S<b>2</b><i>n </i>connect the input side terminals of the sampling capacitors Csp and Csn to any of the first, the second and the third reference terminals <b>106</b>, <b>108</b> and <b>110</b>.</p>
<p id="p-0087" num="0102">To the first reference terminal <b>106</b> is supplied a reference potential Vrefp. Further, to the second reference terminal <b>108</b> is supplied an output common-mode potential Vocm. Further, to the third reference terminal <b>110</b> is supplied a reference potential Vrefn. The switches S<b>2</b><i>p </i>and S<b>2</b><i>n </i>are controlled by the control circuit <b>104</b>. Specifically, the switches S<b>2</b><i>p </i>and S<b>2</b><i>n </i>are controlled such that the switches S<b>2</b><i>p </i>and S<b>2</b><i>n </i>connect the first reference terminals <b>106</b> and the input side terminals of the sampling capacitors Csp and Csn when the reference potential Vrefp is to be sampled, connect the second reference terminals <b>108</b> and the input side terminals of the sampling capacitors Csp and Csn when the output common-mode potential Vocm is to be sampled, and connect the third reference terminals <b>110</b> and the input side terminals of the sampling capacitors Csp and Csn when the reference potential Vref is to be sampled.</p>
<p id="p-0088" num="0103">The sampling capacitors Csp and Csn are capable of accumulating reference charges according to the reference potential Vrefp input via the switches S<b>2</b><i>p </i>and S<b>2</b><i>n </i>when the switches S<b>2</b><i>p </i>and S<b>2</b><i>n </i>connect the first reference terminals <b>106</b> and the input side terminals of the sampling capacitors Csp and Csn, and performs sampling of the reference potential Vrefp by such accumulation of the reference charges. On the other hand, the sampling capacitors Csp and Csn are capable of accumulating reference charges according to the output common-mode potential Vocm input via the switches S<b>2</b><i>p </i>and S<b>2</b><i>n </i>when the switches S<b>2</b><i>p </i>and S<b>2</b><i>n </i>connect the second reference terminals <b>108</b> and the input side terminals of the sampling capacitors Csp and Csn, and perform sampling of the output common-mode potential Vocm by such accumulation of the reference charges. Further, the sampling capacitors Csp and Csn are capable of accumulating reference charges according to the reference potential Vrefn input via the switches S<b>2</b><i>p </i>and S<b>2</b><i>n </i>when the switches S<b>2</b><i>p </i>and S<b>2</b><i>n </i>connect the third reference terminals <b>110</b> and the input side terminals of the sampling capacitors Csp and Csn, and perform sampling of the reference potential Vrefn by such accumulation of the reference charges.</p>
<p id="p-0089" num="0104">In the embodiment, it is assumed that the reference potential Vrefp is the positive power supply potential VDD and the reference potential Vrefn is the negative power supply potential VSS (i.e., Vrefp=VDD, and Vrefn=VSS). Further, the output common-mode potential Vocm is set to an intermediate value (=(VDD+VSS)/2) between the positive power supply potential VDD and the negative power supply potential VSS. It is noted that if it is assumed that reference potential Vrefp is the positive power supply potential VDD and the reference potential Vrefn is the negative power supply potential VSS, the output common-mode potential Vocm is an intermediate value (=(Vrefp+Vrefn)/2) between the reference potential Vrefp and the reference potential Vrefn.</p>
<p id="p-0090" num="0105">Further, the input side terminal of the sampling capacitor Csp is connected to the input side terminal of the sampling capacitor Csn via a switch <b>11</b>. The switch <b>11</b> is provided for connecting or disconnecting the input side terminals of the sampling capacitor Csp and Csn, and is controlled by the control circuit <b>104</b> as described hereinafter.</p>
<p id="p-0091" num="0106">The sample and hold circuit <b>100</b> further includes an operational amplifier <b>120</b>. To the output side terminal of the sampling capacitor Csp are connected a fourth reference terminal <b>122</b> via a switch S<b>3</b><i>p </i>and a negative input terminal (an inverting terminal) of the operational amplifier <b>120</b> via a switch S<b>4</b><i>p</i>. Further, to the output side terminal of the sampling capacitor Csn are connected the fourth reference terminal <b>122</b> via a switch S<b>3</b><i>n </i>and a positive input terminal (a non-inverting terminal) of the operational amplifier <b>120</b> via a switch S<b>4</b><i>n</i>. To the fourth reference terminals <b>122</b> is input an input common-mode potential Vicm of the operational amplifier <b>120</b>.</p>
<p id="p-0092" num="0107">It is noted that in the embodiment the input common-mode potential Vicm is an appropriate voltage for operating the operational amplifier <b>120</b> and can be set independently from the output common-mode potential Vocm. Specifically, the input common-mode potential Vicm is an intermediate value (=(Vinp+Vinn)/2) between the input analog potential Vinp and the input analog potential Vinn. However, the input common-mode potential Vicm may be the same as the output common-mode potential Vocm (i.e., Vicm=Vocm). It is noted that since electrical shortings between the input terminal and the output terminal of the operational amplifier <b>120</b> cause an offset cancellation, the electrical shortings cause the input common-mode potential Vicm and the output common-mode potential Vocm to automatically be equal to each other. Further, it is assumed that the operational amplifier <b>120</b> has a sufficient gain for an output range whose center is located at the output common-mode potential Vocm. The output range is about a half of the potential difference between the positive power supply potential VDD and the negative power supply potential VSS (specifically, the output range is from &#x2212;(VDD&#x2212;VSS)/2&#x2212;&#x3b1; to +(VDD&#x2212;VSS)/2+&#x3b1;, where &#x3b1; is a small value, &#x201c;0.2&#x201d;, for example).</p>
<p id="p-0093" num="0108">The switches S<b>3</b><i>p </i>and S<b>3</b><i>n </i>are provided for connecting or disconnecting the output side terminals of the sampling capacitors Csp and Csn and the fourth reference terminals <b>122</b>. The switches S<b>3</b><i>p </i>and S<b>3</b><i>n </i>are controlled by the control circuit <b>104</b>. Specifically, the switches S<b>3</b><i>p </i>and S<b>3</b><i>n </i>are controlled such that the switches S<b>3</b><i>p </i>and S<b>3</b><i>n </i>are turned off when the sampling at the sampling capacitors Csp and Csn is not to be performed while the switches S<b>3</b><i>p </i>and S<b>3</b><i>n </i>are turned on when the sampling at the sampling capacitors Csp and Csn is to be performed. Further, the switches S<b>4</b><i>p </i>and S<b>4</b><i>n </i>are provided for connecting or disconnecting the output side terminals of the sampling capacitors Csp and Csn and the input terminals of the operational amplifier <b>120</b>. The switch S<b>4</b> is controlled by the control circuit <b>104</b> as described hereinafter.</p>
<p id="p-0094" num="0109">The negative input terminal of the operational amplifier <b>120</b> is connected to a capacitor Cfp via a switch S<b>5</b><i>p</i>. Further, the positive input terminal of the operational amplifier <b>120</b> is connected to a capacitor Cfn via a switch S<b>5</b><i>n</i>. The switches S<b>5</b><i>p </i>and S<b>5</b><i>n </i>are provided for connecting or disconnecting the input terminals of the operational amplifier <b>120</b> and the input side terminals of the capacitor Cfp and Cfn. The switches S<b>5</b><i>p </i>and S<b>5</b><i>n </i>are controlled by the control circuit <b>104</b> as described hereinafter. The capacitors Cfp and Cfn are temporary storage capacitors to which the charges accumulated in the sampling capacitors Csp and Csn are transferred. In the following, the capacitors Cfp and Cfn are referred to as temporary storage capacitors Cfp and Cfn. It is assumed that the temporary storage capacitors Cfp and Cfn have capacities Cfp and Cfn. The capacity Cfp of the temporary storage capacitor Cfp is greater than the capacity Csp of the sampling capacitor Csp, and the capacity Cfn of the temporary storage capacitor Cfn is greater than the capacity Csn of the sampling capacitor Csn. Specifically, Cfp=a*Csp, and Cfn=a*Csn. The value a is greater than 1, and a=2, for example.</p>
<p id="p-0095" num="0110">To an output side terminal of the temporary storage capacitor Cfp are connected the positive output terminal (voltage Vop) of the operational amplifier <b>120</b> via a switch S<b>6</b><i>p </i>and the second reference terminal <b>108</b> via a switch S<b>7</b><i>p</i>. Further, to an output side terminal of the temporary storage capacitor Cfn are connected the negative output terminal (voltage Von) of the operational amplifier <b>120</b> via a switch S<b>6</b><i>n </i>and the second reference terminal <b>108</b> via a switch S<b>7</b><i>n</i>. The switches S<b>6</b><i>p </i>and S<b>6</b><i>n </i>are provided for connecting or disconnecting the output side terminals of the temporary storage capacitors Cfp and Cfn and the output terminals of the operational amplifier <b>120</b>. The switches S<b>6</b><i>p </i>and S<b>6</b><i>n </i>are controlled by the control circuit <b>104</b>. Further, the switches S<b>7</b><i>p </i>and S<b>7</b><i>n </i>are provided for connecting or disconnecting the output side terminals of the temporary storage capacitors Cfp and Cfn and the second reference terminals <b>108</b>. The switches S<b>7</b><i>p </i>and S<b>7</b><i>n </i>are controlled by the control circuit <b>104</b>.</p>
<p id="p-0096" num="0111">Further, the positive output terminal of the operational amplifier <b>120</b> is connected to the input side terminal of the sampling capacitor Csp via a switch S<b>8</b><i>p</i>. Further, the negative output terminal of the operational amplifier <b>120</b> is connected to the input side terminal of the sampling capacitor Csn via a switch S<b>8</b><i>n</i>. The switches S<b>8</b><i>p </i>and S<b>8</b><i>n </i>are provided for connecting or disconnecting the output terminal of the operational amplifier <b>120</b> and the input side terminals of the sampling capacitors Csp and Csn. The switches S<b>8</b><i>p </i>and S<b>8</b><i>n </i>are controlled by the control circuit <b>104</b>.</p>
<p id="p-0097" num="0112">To the positive output terminal of the operational amplifier <b>120</b> are connected positive input terminals of two comparators <b>124</b> and <b>126</b>. Further, to the negative output terminal of the operational amplifier <b>120</b> are connected negative input terminals of two comparators <b>124</b> and <b>126</b>. The comparator <b>124</b> has a offset of +(Vrefp&#x2212;Vrefn)/(a*b). Further, the comparator <b>126</b> has a offset of &#x2212;(Vrefp&#x2212;Vrefn)/(a*b). The comparators <b>124</b> and <b>126</b> compare voltages input to the input terminals and output the comparison results to the control circuit <b>104</b>. The control circuit <b>104</b> controls connection/disconnection of the switches S<b>2</b><i>p </i>and S<b>2</b><i>n </i>based on the comparison results of the comparators <b>124</b> and <b>126</b> as described hereinafter. However, the value of b is greater than 1, which is necessary to perform the process for preventing the output saturation even though an input analog voltage Vin&#x2032; (=Vinp&#x2212;Vinn) is within a predetermined range which is out of the range from the negative power supply potential VSS to the positive power supply potential VDD. The value of b is 2, for example.</p>
<p id="p-0098" num="0113">Next, with reference to <figref idref="DRAWINGS">FIG. 8</figref> through <figref idref="DRAWINGS">FIG. 13</figref>, operations of the sample and hold circuit <b>100</b> and the A/D converter according to the embodiment are described.</p>
<p id="p-0099" num="0114"><figref idref="DRAWINGS">FIG. 8</figref> is a flowchart of an example of a control routine executed in an A/D conversion device including the sample and hold circuit <b>100</b> according the embodiment. <figref idref="DRAWINGS">FIG. 9</figref> is a diagram for illustrating a status of the sample and hold circuit <b>100</b> according the embodiment which is implemented at the time of sampling the input analog potential Vin (=Vinp&#x2212;Vinn). <figref idref="DRAWINGS">FIG. 10</figref> is a diagram for illustrating a status of the sample and hold circuit <b>100</b> according the embodiment which is implemented at the time of transferring charges from the sampling capacitors Csp and Csn to the temporary storage capacitors Cfp and Cfn. <figref idref="DRAWINGS">FIG. 11</figref> is a diagram for illustrating a status of the sample and hold circuit <b>100</b> according the embodiment which is implemented at the time of sampling the reference voltage Vref&#x2032; (=Vrefp&#x2212;Vrefn). <figref idref="DRAWINGS">FIG. 12</figref> is a diagram for illustrating a status of the sample and hold circuit <b>100</b> according the embodiment which is implemented at the time of transferring charges from the temporary storage capacitors Cfp and Cfn to the sampling capacitors Csp and Csn. Further, <figref idref="DRAWINGS">FIG. 13</figref> is a diagram for illustrating a relationship between an input analog voltage Vin&#x2032; and an output analog voltage Vo&#x2032; (=Vop&#x2212;Von) in the sample and hold circuit according the second embodiment of the present invention.</p>
<p id="p-0100" num="0115">In the embodiment, the switches S<b>1</b><i>p </i>and S<b>1</b><i>n </i>are in their OFF states immediately before the A/D converter performs the A/D conversion. When the A/D conversion is performed in such a status, at first, the control circuit <b>104</b> of the sample and hold circuit <b>100</b> performs sampling of the input analog potentials Vinp and Vinn (step <b>200</b>). Specifically, at that time, the control circuit <b>104</b> turns on the switches S<b>1</b><i>p </i>and S<b>1</b><i>n </i>from their OFF states, turns the switches S<b>2</b><i>p</i>, S<b>2</b><i>n</i>, S<b>8</b><i>n</i>, S<b>8</b><i>p</i>, S<b>9</b><i>p</i>, S<b>9</b><i>n </i>and S<b>11</b> off, and turns the switch S<b>3</b><i>p </i>and S<b>3</b><i>n </i>on (see <figref idref="DRAWINGS">FIG. 9</figref>).</p>
<p id="p-0101" num="0116">When the switches S<b>1</b><i>p </i>and S<b>3</b><i>p </i>are turned on and the switch S<b>2</b><i>p </i>is turned off, a potential difference (input voltage) between the analog potential Vinp input to the input terminal <b>102</b><i>p </i>and the input common-mode potential Vicm is applied to the sampling capacitor Csp and thus the charge (input charge) according to the potential difference is accumulated in the sampling capacitor Csp. In this case, the sampling of the input analog potential Vinp is performed at the sampling capacitor Csp. Similarly, when the switches S<b>1</b><i>n </i>and S<b>3</b><i>n </i>are turned on and the switch S<b>2</b><i>n </i>is turned off, a potential difference (input voltage) between the analog potential Vinn input to the input terminal <b>102</b><i>n </i>and the input common-mode potential Vicm is applied to the sampling capacitor Csn and thus the charge (input charge) according to the potential difference is accumulated in the sampling capacitor Csn. In this case, the sampling of the input analog potential Vinn is performed at the sampling capacitor Csn.</p>
<p id="p-0102" num="0117">It is noted that the control circuit <b>104</b> turns the switches S<b>4</b><i>p</i>, S<b>4</b><i>n</i>, S<b>5</b><i>p</i>, S<b>5</b><i>n</i>, S<b>7</b><i>p </i>and S<b>7</b><i>n </i>on and turns the switch S<b>6</b><i>p </i>and S<b>6</b><i>n </i>off (see <figref idref="DRAWINGS">FIG. 9</figref>) when or before the sampling of the input analog potentials Vinp and Vinn are performed at the sampling capacitors Csp and Csn. When such a switch status is implemented, the temporary storage capacitors Cfp and Cfn are short-circuited to the output common-mode potential Vocm and thus the remaining charge accumulated in the temporary storage capacitors Cfp and Cfn is discharged. For this reason, if the sampling of the input analog potentials Vinp and Vinn is performed at the sampling capacitors Csp and Csn, the charge accumulated in the temporary storage capacitors Cfp and Cfn is reset.</p>
<p id="p-0103" num="0118">Further, as described above, if the sampling of the input analog potentials Vinp and Vinn is performed at the sampling capacitors Csp and Csn, the output terminals of the operational amplifier <b>120</b> may be opened or short-circuited to the output common-mode potential Vocm. Alternatively, the input terminals and the output terminals of the operational amplifier <b>120</b> may be short-circuited to implement the offset cancellation.</p>
<p id="p-0104" num="0119">If the sampling of the input analog potentials Vinp and Vinn at the sampling capacitors Csp and Csn is completed and the input charges according to the input analog potentials Vinp and Vinn are accumulated in the sampling capacitors Csp and Csn, then the control circuit <b>104</b> performs a process for transferring the input charges accumulated in the sampling capacitors Csp and Csn to the temporary storage capacitors Cfp and Cfn (step <b>202</b>). Specifically, at that time, the control circuit <b>104</b> turns off the switches S<b>1</b><i>p</i>, S<b>1</b><i>n</i>, S<b>7</b><i>p </i>and S<b>7</b><i>n </i>from their ON states, and turns on the switches S<b>6</b><i>p</i>, S<b>6</b><i>n </i>and S<b>11</b> from their OFF states (see <figref idref="DRAWINGS">FIG. 10</figref>).</p>
<p id="p-0105" num="0120">When such a status is implemented, since the sampling capacitors Csp and Csn are connected in series, only the input charges according to a differential component Vin&#x2032; (=Vinp&#x2212;Vinn) of the input analog potentials Vinp and Vinn sampled at the sampling capacitors Csp and Csn are transferred from the sampling capacitors Csp and Csn to the temporary storage capacitors Cfp and Cfn. In this case, a differential output voltage Vo&#x2032; (=Vop&#x2212;Von) between the positive output terminal and the negative output terminal of the operational amplifier <b>120</b> is (Cs/Cf)*Vin&#x2032; (=1/a*Vin&#x2032;).</p>
<p id="p-0106" num="0121">Since the value of a is greater than 1 as described above, the differential output voltage Vo&#x2032; of the operational amplifier <b>120</b> is smaller than the input analog potential Vin&#x2032;. In this case, even if the input analog potential Vin&#x2032; is near the difference (VDD&#x2212;VSS) between the positive power supply potential VDD and the negative power supply potential VSS, when the transfer of the charges from the sampling capacitors Csp and Csn to the temporary storage capacitors Cfp and Cfn is performed, the differential output voltage Vo&#x2032; of the operational amplifier <b>120</b> is smaller than the power supply voltage (VDD&#x2212;VSS) and falls within a range from &#x2212;(VDD&#x2212;VSS)/a to +(VDD&#x2212;VSS)/a. For this reason, the output saturation of the operational amplifier <b>120</b> is prevented at the time of transferring the charges from the sampling capacitors Csp and Csn to the temporary storage capacitors Cfp and Cfn, thereby assuring the operations of the operational amplifier <b>120</b>.</p>
<p id="p-0107" num="0122">It is noted that if the input charges according to the differential component Vin&#x2032; are transferred from the sampling capacitors Csp and Csn to the temporary storage capacitors Cfp and Cfn, the charge components according to the input common-mode component (Vinp+Vinn)/2 of the input analog potentials Vinp and Vinn are not transferred to the temporary storage capacitors Cfp and Cfn, that is to say, to the side of the operational amplifier <b>120</b>, and thus remains in the sampling capacitors Csp and Csn. In this case, the voltage across the sampling capacitors Csp and Csn is the input common-mode potential (Vinp+Vinn)/2. It is noted that, at that time, since the input side terminals of the sampling capacitors Csp and Csn do not have the potentials fixed, the potentials input to the input terminals of the operational amplifier <b>120</b> are substantially fixed to the set input common-mode potential Vicm without being affected by the common-mode of the input analog potentials Vinp and Vinn sampled at the sampling capacitors Csp and Csn even if there are common-mode variations in the input analog potentials Vinp and Vinn.</p>
<p id="p-0108" num="0123">It is noted that if the charges are transferred from the sampling capacitors Csp and Csn to the temporary storage capacitors Cfp and Cfn as described above, the differential output voltage Vo&#x2032; (=Vop+Von) at the output terminals of the operational amplifier <b>120</b> is input to the input terminals of the comparators <b>124</b> and <b>126</b>. The comparators <b>124</b> and <b>126</b> output the comparison result, which indicates whether the differential output voltage Vo&#x2032; of the operational amplifier <b>120</b> input to the input terminals is within a range from &#x2212;Vref&#x2032;/(a*b) to +Vref&#x2032;/(a*b), to the control circuit <b>104</b>. For example, the comparator <b>124</b> supplies the comparison result, which indicates whether the differential output voltage Vo&#x2032; of the operational amplifier <b>120</b> input to the input terminals is greater than +Vref&#x2032;/(a*b), to the control circuit <b>104</b>, and the comparator <b>126</b> supplies the comparison result, which indicates whether the differential output voltage Vo&#x2032; of the operational amplifier <b>120</b> input to the input terminals is smaller than &#x2212;Vref&#x2032;/(a*b), to the control circuit <b>104</b>.</p>
<p id="p-0109" num="0124">The control circuit <b>104</b> determines, based on the comparison results from the comparators <b>124</b> and <b>126</b>, whether (1) the differential output voltage Vo&#x2032; of the operational amplifier <b>120</b> is greater than +Vref&#x2032;/(a*b), (2) within a range from &#x2212;Vref&#x2032;/(a*b) to +Vref&#x2032;/(a*b), or (3) smaller than &#x2212;Vref&#x2032;/(a*b) (step <b>204</b>). Then, the determination result is stored as a digital value D<b>0</b>=+1, 0, &#x2212;1, for example.</p>
<p id="p-0110" num="0125">After such a storing process is performed, then the control circuit <b>104</b> performs a process for discharging to remove the charge component according to the input common-mode component (Vinp+Vinn)/2 remaining in the sampling capacitors Csp and Csn (step <b>206</b>). Specifically, at that time, the control circuit <b>104</b> connects the switches S<b>2</b><i>p </i>and S<b>2</b><i>n </i>to the second reference terminal <b>108</b>, turns on the switches S<b>3</b><i>p </i>and S<b>3</b><i>n </i>from their OFF states, and turns off the switches S<b>4</b><i>p </i>and S<b>4</b><i>n </i>from their ON states (see <figref idref="DRAWINGS">FIG. 11</figref>). When such a switch status is implemented, the input common-mode potential Vicm and the output common-mode potential Vocm are applied across the sampling capacitors Csp and Csn and thus the charge components according to the input common-mode component (Vinp+Vinn)/2 remaining in the sampling capacitors Csp and Csn are discharged and removed.</p>
<p id="p-0111" num="0126">Further, the control circuit <b>104</b> performs the voltage sampling at the sampling capacitors Csp and Csn according to the comparison results of the comparators <b>124</b> and <b>126</b> (step <b>208</b>) after the sampling capacitors Csp and Csn are discharged. Specifically, at that time, based the comparison results of the comparators <b>124</b> and <b>126</b>, the control circuit <b>104</b> connects the switch S<b>2</b><i>p </i>to the third reference terminal <b>110</b> and the switch S<b>2</b><i>n </i>to the first reference terminal <b>106</b> if it determines that Vo&#x2032;&#x3e;+Vref&#x2032;/(a*b), connects the switches S<b>2</b><i>p </i>and S<b>2</b><i>n </i>to the second reference terminals <b>108</b> if it determines that &#x2212;Vref&#x2032;/(a*b)&#x3c;Vo&#x2032;&#x3c;+Vref&#x2032;/(a*b), and connects the switch S<b>2</b><i>p </i>to the first reference terminal <b>106</b> and the switch S<b>2</b><i>n </i>to the third reference terminal <b>110</b> if it determines that Vo&#x2032;&#x3c;&#x2212;Vref&#x2032;/(a*b).</p>
<p id="p-0112" num="0127">When the switch S<b>2</b><i>p </i>is connected to the third reference terminal <b>110</b> and the switch S<b>2</b><i>n </i>is connected to the first reference terminal <b>106</b>, the potential difference between the reference potential Vrefn and the input common-mode potential Vicm is applied to the sampling capacitor Csp and the potential difference between the reference potential Vrefp and the input common-mode potential Vicm is applied to the sampling capacitor Csn, and thus the sampling capacitors Csp and Csn have the charges accumulated according to the respective potential differences. Thus, If Vo&#x2032;&#x3e;+Vref&#x2032;/(a*b), the sampling of the reference potential Vrefn at the sampling capacitor Csp and the sampling of the reference potential Vrefp at the sampling capacitor Csn are performed.</p>
<p id="p-0113" num="0128">Further, when the switches S<b>2</b><i>p </i>and S<b>2</b><i>n </i>are connected to the second reference terminals <b>108</b>, the potential difference between the output common-mode potential Vocm and the input common-mode potential Vicm is applied to the sampling capacitors Csp and Csn, and thus the sampling capacitors Csp and Csn have the charges accumulated according to the applied potential difference. Thus, if Vref&#x2032;/(a*b)&#x3c;Vo&#x2032;&#x3c;+Vref&#x2032;/(a*b), the sampling of the output common-mode potential Vocm is performed at the sampling capacitors Csp and Csn.</p>
<p id="p-0114" num="0129">Further, when the switch S<b>2</b><i>p </i>is connected to the first reference terminal <b>106</b> and the switch S<b>2</b><i>n </i>is connected to the third reference terminal <b>110</b>, the potential difference between the reference potential Vrefp and the input common-mode potential Vicm is applied to the sampling capacitor Csp and the potential difference between the reference potential Vrefn and the input common-mode potential Vicm is applied to the sampling capacitor Csn, and thus the sampling capacitors Csp and Csn have the charges accumulated according to the respective potential differences. Thus, If Vo&#x2032;&#x3c;&#x2212;Vref&#x2032;/(a*b), the sampling of the reference potential Vrefp at the sampling capacitor Csp and the sampling of the reference potential Vrefn at the sampling capacitor Csn are performed.</p>
<p id="p-0115" num="0130">It is noted that the discharge of the sampling capacitors Csp and Csn and the sampling of the reference potentials Vrefp and Vrefn and the output common-mode potential Vocm are performed in this order; however, they may be performed simultaneously. In this case, the sampling of the reference potentials Vrefp and Vrefn and the output common-mode potential Vocm at the sampling capacitors Csp and Csn is performed, the charge component according to the input common-mode component (Vinp+Vinn)/2, which has been accumulated before the sampling is performed, is discharged and removed automatically.</p>
<p id="p-0116" num="0131">It is noted that the control circuit <b>104</b> keeps the ON states of the switches S<b>5</b><i>p</i>, S<b>5</b><i>n</i>, S<b>6</b><i>p </i>and S<b>6</b><i>n </i>and turns off the switches S<b>4</b><i>p</i>, S<b>4</b><i>n</i>, S<b>9</b><i>p </i>and S<b>9</b><i>n </i>from their ON states when the control circuit <b>24</b> performs the sampling of the output common-mode potential Vocm or the reference potentials Vrefp and Vrefn at the sampling capacitors Csp and Csn (see <figref idref="DRAWINGS">FIG. 11</figref>). When such a process is performed, the charges transferred to the temporary storage capacitors Cfp and Cfn and accumulated therein are held in the temporary storage capacitors Cfp and Cfn.</p>
<p id="p-0117" num="0132">When the sampling of the output common-mode potential Vocm or the reference potentials Vrefp and Vrefn at the sampling capacitors Csp and Csn is performed as described above, then the control circuit <b>104</b> performs a process for returning the charges, which have been transferred to the temporary storage capacitors Cfp and Cfn and accumulated therein, to the sampling capacitors Csp and Csn (step <b>210</b>). Specifically, at that time, the control circuit <b>104</b> turns off the switches S<b>2</b>, S<b>3</b> and S<b>6</b> from their ON states, and turns on the switches S<b>4</b><i>p</i>, S<b>4</b><i>n</i>, S<b>7</b><i>p</i>, S<b>7</b><i>n</i>, S<b>8</b><i>p </i>and S<b>8</b><i>n </i>from their OFF states. When such states of the respective switches are implemented, the charges accumulated in the temporary storage capacitors Cfp and Cfn according to the differential component Vin&#x2032; Vinp&#x2212;Vinn) are re-transferred to the sampling capacitors Csp and Csn.</p>
<p id="p-0118" num="0133">When such a re-transfer of the charges is performed, the voltages across the sampling capacitors Csp and Csn are substantially equal to (Vinp&#x2212;Vrefp) and (Vinn&#x2212;Vrefp), if the condition Vo&#x2032;&#x3e;+Vref&#x2032;/(a*b) is met and thus the sampling of the reference potential Vrefn at the sampling capacitor Csp and the sampling of the reference potential Vrefp at the sampling capacitor Csn are performed in step <b>204</b>. In this case, the differential output voltage Vo&#x2032; (=Vop&#x2212;Von) at the output terminal of the operational amplifier <b>120</b> is Vin&#x2032;&#x2212;Vref&#x2032;.</p>
<p id="p-0119" num="0134">Further, the voltages across the sampling capacitors Csp and Csn are substantially equal to Vinp and Vinn, if the condition &#x2212;Vref&#x2032;/(a*b)&#x3c;Vo&#x3c;+Vref&#x2032;/(a*b) is met and thus the sampling of the output common-mode potential Vocm at the sampling capacitors Csp and Csn is performed in step <b>204</b>. In this case, the differential output voltage Vo&#x2032; (=Vop&#x2212;Von) at the output terminal of the operational amplifier <b>120</b> is Vin&#x2032;.</p>
<p id="p-0120" num="0135">Further, the voltages across the sampling capacitors Csp and Csn are substantially equal to (Vinp+Vrefp) and (Vinn+Vrefp), if the condition Vo&#x2032;&#x3c;&#x2212;Vref&#x2032;/(a*b) is met and thus the sampling of the reference potential Vrefp at the sampling capacitor Csp and the sampling of the reference potential Vrefn at the sampling capacitor Csn are performed in step <b>204</b>. In this case, the differential output voltage Vo&#x2032; (=Vop&#x2212;Von) at the output terminal of the operational amplifier <b>120</b> is Vin&#x2032;+Vref&#x2032;.</p>
<p id="p-0121" num="0136">Thus, after the re-transfer of the charges from the temporary storage capacitors Cfp and Cfn to the sampling capacitors Csp and Csn, the voltages across the sampling capacitors Csp and Csn are Vin&#x2032;&#x2212;Vref&#x2032; if Vo&#x2032;&#x3e;+Vref&#x2032;/(a*b), that is to say, if Vin&#x2032;&#x3e;+Vref&#x2032;/b; Vin&#x2032; if &#x2212;Vref&#x2032;/(a*b)&#x3c;Vo&#x2032;&#x3c;+Vref&#x2032;/(a*b), that is to say, &#x2212;Vref&#x2032;/b&#x3c;Vin&#x2032;&#x3c;+Vref&#x2032;/b; and Vin&#x2032;+Vref&#x2032; if Vo&#x2032;&#x3c;&#x2212;Vref&#x2032;, that is to say, Vin&#x2032;&#x3c;&#x2212;Vref&#x2032;/b. For this reason, the differential output voltage Vo&#x2032; at the output terminal of the operational amplifier <b>120</b> falls within a range from &#x2212;Vref&#x2032;/b to +Vref&#x2032;/b. The output analog voltage Vo&#x2032; of the operational amplifier <b>120</b> is sampled, held and output (step <b>212</b>).</p>
<p id="p-0122" num="0137">In this way, according to the sample and hold circuit <b>100</b> of the present embodiment, if the input analog voltages Vinp and Vinn are within a range of the reference voltage Vref&#x2032; (=the power supply potential VDD&#x2212;VSS), the differential output voltage Vo&#x2032; sampled and held to be output can be adjusted to fall within the range from &#x2212;Vref&#x2032;/b to +Vref&#x2032;/b.</p>
<p id="p-0123" num="0138">As described above, the value of b is greater than 1, which is necessary to perform the process for preventing the output saturation even though an input analog voltage Vin&#x2032; (=Vinp&#x2212;Vinn) is within a predetermined range which is out of the range from the negative power supply potential VSS to the positive power supply potential VDD. For this reason, the sample and hold circuit <b>100</b> performs the sample and hold process without causing the output saturation of the operational amplifier <b>120</b>, if the differential output voltage Vo&#x2032; is near the negative power supply potential VSS or the positive power supply potential VDD, or if the differential output voltage Vo&#x2032; is slightly smaller than the negative power supply potential VSS or greater than the positive power supply potential VDD. In other words, the sample and hold circuit <b>100</b> can prevent the output saturation for the differential output voltage Vo&#x2032; from the negative power supply potential VSS to the positive power supply potential VDD (and further the differential output voltage Vo&#x2032; which is slightly smaller than the negative power supply potential VSS or greater than the positive power supply potential VDD) in performing the sample and hold process. Further, conversely, the sample and hold circuit <b>100</b> can increase a range of the differential output voltage Vo&#x2032; which is permitted in terms of preventing the output saturation to b times (greater than one time) of the range of the power supply voltage (VDD&#x2212;VSS).</p>
<p id="p-0124" num="0139">Further, according to the sample and hold circuit <b>100</b>, even if the input common-mode component Vicm (=(Vinp&#x2212;Vinn)/2) of the input analog potential Vinp and Vinn is greatly deviated from the output common-mode potential Vocm, only the input charge according to the differential component Vin&#x2032; (=Vinp&#x2212;Vinn) of the input analog potential Vinp and Vinn is transferred from the sampling capacitors Csp and Csn to the temporary storage capacitors Cfp and Cfn. In other words, the input charge according to the input common-mode component Vicm (Vinp+Vinn)/2 is not transferred from the sampling capacitors Csp and Csn to the temporary storage capacitors Cfp and Cfn. Then, the input common-mode component Vicm (Vinp+Vinn)/2 remaining in the sampling capacitors Csp and Csn is discharged and removed by the sampling of the reference potentials Vrefp and Vrefn and the output common-mode potential Vocm.</p>
<p id="p-0125" num="0140">For this reason, according to the sample and hold circuit <b>100</b>, even if the input analog potentials Vinp and Vinn, in which the input common-mode potential Vicm is changed, is applied, the deviation of the input potential of the operational amplifier <b>120</b> from a predetermined design value can be suppressed, and only the differential input component Vin&#x2032; (=Vinp&#x2212;Vinn) of the input analog potential Vinp, Vinn can be sampled and held precisely. Further, according to the sample and hold circuit <b>100</b>, the input potential of the operational amplifier <b>120</b> can be made free from the influence of the input common-mode component Vicm by removing the input common-mode component Vicm, which enables the A/D converter to perform the differential input A/D conversion with high CMRR (Common-Mode Rejection Ratio).</p>
<p id="p-0126" num="0141">It is noted that, according to the sample and hold circuit <b>100</b> described above, in the course of holding the differential output voltage Vo&#x2032; based on the differential input voltage Vin&#x2032;, the sampling of the input analog potentials Vinp and Vinn is performed at the sampling capacitors Csp and Csn, the sampling of the reference potentials Vrefp and Vrefn or the output common-mode potential Vocm after the transfer of the charges from the sampling capacitors Csp and Csn to the temporary storage capacitors Cfp and Cfn is performed at the sampling capacitors Csp and Csn, and then the charges accumulated in the temporary storage capacitors Cfp and Cfn are returned to the sampling capacitors Csp and Csn to perform the hold and output process from the operational amplifier <b>120</b>. In the sample and hold circuit <b>100</b>, the respective processes from the input of the differential input voltage Vin&#x2032; to the output of the differential output voltage Vo&#x2032; are performed using the sampling capacitors Csp and Csn as a base point. For this reason, according to the sample and hold circuit <b>100</b>, even if the ratios between the capacity values of the sampling capacitors Csp and Csn and the capacity values of the temporary storage capacitors Cfp and Cfn (i.e., the value a) have variations or there are variations between the ratio of the capacity value of the sampling capacitor Csp to the capacity value of the temporary storage capacitor Cfp and the ratio of the capacity value of the sampling capacitor Csn to the capacity value of the temporary storage capacitor Cfn, the sample and hold circuit <b>20</b> can perform the hold and output process of the differential output voltage Vo without being influenced by the variations.</p>
<p id="p-0127" num="0142">In the embodiment, the A/D converter converts the differential output voltage Vo&#x2032; output from the sample and hold circuit <b>100</b> to a digital value (step <b>214</b>). It is noted that since the differential output voltage Vo&#x2032; output from the sample and hold circuit <b>100</b> is obtained through an addition or a subtraction of the charge or the voltage due to the charge transfers between the sampling capacitors Csp and Csn and the temporary storage capacitors Cfp and Cfn and the voltage sampling, it does not correspond to the differential input voltage Vin&#x2032; in a one-to-one relationship.</p>
<p id="p-0128" num="0143">Therefore, the A/D converter adds or subtracts a digital value corresponding to the added or subtracted charge or voltage, if necessary, to or from the digital value obtained by the A/D conversion in step <b>214</b> to calculate a final output digital value. Then, the A/D converter outputs the calculated final digital value to the outside.</p>
<p id="p-0129" num="0144">Specifically, the A/D converter reads the determination result of step <b>204</b> from the memory. Further, the A/D converter determines that the subtraction of the charge corresponding the reference voltage Vref&#x2032; from the charges accumulated in the sampling capacitors Csp and Csn is performed at the time of transferring the charges from the sampling capacitors Csp and Csn to the temporary storage capacitors Cfp and Cfn if Vin&#x2032;&#x3e;+Vref&#x2032;/b, and outputs the digital value, which is obtained by adding the digital value corresponding the reference voltage Vref&#x2032; to the digital value obtained by A/D converting the differential output voltage Vo&#x2032; in order to compensate for the subtraction, as the final output digital value. Further, the A/D converter determines that the addition or the subtraction of the charge is not performed in the processes from the input of the differential input voltage Vin&#x2032; to the output of the differential output voltage Vo&#x2032; if &#x2212;Vref&#x2032;/b&#x3c;Vin&#x2032;&#x3c;Vref&#x2032;/b, and outputs the digital value, which is obtained by A/D converting the differential output voltage Vo&#x2032;, as it is as the final output digital value. Further, the A/D converter determines that the addition of the charge corresponding the reference voltage Vref&#x2032; to the charges accumulated in the sampling capacitors Csp and Csn is performed at the time of re-transferring the charges from the temporary storage capacitors Cfp and Cfn back to the sampling capacitors Csp and Csn if Vin&#x2032;&#x3c;&#x2212;Vref&#x2032;/b, and outputs the digital value, which is obtained by subtracting the digital value corresponding to the reference voltage Vref&#x2032; from the digital value obtained by A/D converting the differential output voltage Vo&#x2032; in order to compensate for the addition, as the final output digital value.</p>
<p id="p-0130" num="0145">According to the digital process, a differential digital output which corresponds to the differential input voltage Vin&#x2032; in a one-to-one relationship can be obtained. Thus, according to the A/D converter, it is possible to precisely perform the A/D conversion of the differential input voltage Vin&#x2032; in the range which is slightly greater than the range from the negative power supply potential VSS to the positive power supply potential VDD, in addition to the range from the negative power supply potential VSS to the positive power supply potential VDD. Further, according to the digital process, a precise A/D conversion to obtain the differential digital output which corresponds to the differential input voltage Vin&#x2032; in a one-to-one relationship can be implemented by simple digital calculations such an addition or a subtraction of the digital value.</p>
<p id="p-0131" num="0146">For example, if it is assumed that the condition b=2 is met, as illustrated in <figref idref="DRAWINGS">FIG. 13</figref>, the differential output voltage Vo&#x2032; to be held and output falls in a range from &#x2212;Vref&#x2032;/2 to +Vref&#x2032;/2 for the differential input voltage Vin&#x2032; ranging from &#x2212;3/2*Vref&#x2032; to +3/2*Vref&#x2032;. In other words, when Vref&#x2032;/2 is assured for the output voltage range of the operational amplifier <b>120</b>, the sample and hold process and the A/D conversion can be implemented with high accuracy even if the differential input voltage Vin&#x2032; varies over a wider range up to the one-half of the power supply voltage (VDD&#x2212;VSS).</p>
<p id="p-0132" num="0147">It is noted that the comparators <b>124</b> and <b>126</b> of the sample and hold circuit <b>100</b> have predetermined offsets; however, even if the offsets have deviations from design values, they do not substantially affect A/D conversion characteristics of the A/D converter. This is because if the operational amplifier <b>120</b> has a sufficient gain over the output voltage range, the A/D converted digital value or the final digital output value obtained by addition or the subtraction of the value is not effected, although the offset variations of the comparators <b>124</b> and <b>126</b> have a slight influence on the differential input voltage Vin&#x2032; of the operational amplifier <b>120</b>.</p>
<p id="p-0133" num="0148">According to the second embodiment described above, the switches S<b>1</b><i>p </i>and S<b>1</b><i>n </i>correspond to &#x201c;first switches&#x201d; in claims; the sampling capacitors Csp and Csn correspond to &#x201c;a first sampling part&#x201d; and &#x201c;a second sampling part&#x201d; in claims; the reference potentials Vrefp and Vrefn or the output common-mode potential Vocm corresponds to &#x201c;predetermined reference voltages&#x201d; in claims; the switches S<b>4</b><i>p</i>, S<b>4</b><i>n</i>, S<b>5</b><i>p</i>, S<b>5</b><i>n</i>, S<b>7</b><i>p </i>and S<b>7</b><i>n </i>correspond to &#x201c;second switches&#x201d; in claims; the switch S<b>11</b> corresponds to &#x201c;a third switch&#x201d; in claims; the switches S<b>2</b><i>p </i>and S<b>2</b><i>n </i>correspond to &#x201c;a fourth switch&#x201d; in claims; &#x201c;an adding/subtracting part&#x201d; and &#x201c;a hold part&#x201d; in claims are implemented by the processes <b>202</b> through <b>212</b> executed by the switches S<b>2</b><i>p</i>, S<b>2</b><i>n </i>through S<b>8</b><i>p</i>, S<b>8</b><i>n </i>and S<b>11</b>, the temporary storage capacitores Cfp, Cfn, the operational amplifier <b>120</b>, the comparators <b>124</b> and <b>126</b> and the control circuit <b>104</b>; and &#x201c;a re-transferring part&#x201d; in claims is implemented by the process <b>210</b> executed by the control circuit <b>104</b>.</p>
<p id="p-0134" num="0149">Further, &#x201c;an A/D converting part&#x201d; in claims is implemented by the process <b>214</b> executed by the A/D converter, and &#x201c;a digital value calculating part&#x201d; is implemented by the process <b>216</b> executed by the A/D converter.</p>
<p id="p-0135" num="0150">It is noted that according to the first and second embodiments, the sampling of the input analog potentials Vin, Vinp and Vinn is performed in the sample and hold circuits <b>20</b> and <b>100</b>, the charges obtained by the sampling are transferred from the sampling capacitors Cs, Csp and Csn to the temporary storage capacitors Cf, Cfp and Cfn, and then the reference potentials Vref, Vrefp, Vrefn and Vocm are sampled in the sample and hold circuit <b>20</b> and <b>100</b>; however, conversely, at first, the reference potentials Vref, Vrefp, Vrefn and Vocm may be sampled in the sample and hold circuits <b>20</b> and <b>100</b>, the charges obtained by the sampling may be transferred from the sampling capacitors Cs, Csp and Csn to the temporary storage capacitors Cf, Cfp and Cfn, then the sampling of the input analog potentials Vin, Vinp and Vinn may be performed in the sample and hold circuits <b>20</b> and <b>100</b>.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A sample and hold circuit, comprising:
<claim-text>a first switch which is turned on when an input voltage is to be sampled;</claim-text>
<claim-text>a first sampling part configured to sample the input voltage input via the first switch when the first switch is turned on;</claim-text>
<claim-text>a second sampling part configured to sample a predetermined reference voltage when the first switch is turned off;</claim-text>
<claim-text>an adding/subtracting part configured to perform an addition or a subtraction between the input voltage sampled by the first sampling part and the predetermined reference voltage sampled by the second sampling part; and</claim-text>
<claim-text>a hold part configured to hold and output a voltage obtained by the addition or the subtraction by the adding/subtracting part,</claim-text>
<claim-text>wherein the first and the second sampling parts are a common sampling capacitor which is capable of accumulating an input charge according to the input voltage and a reference charge according to the reference voltage, and</claim-text>
<claim-text>the adding/subtracting part includes</claim-text>
<claim-text>a second switch which is turned on after the input charge is accumulated in the sampling capacitor,</claim-text>
<claim-text>a temporary storage capacitor to which the input charge accumulated in the sampling capacitor is transferred when the second switch is turned on,</claim-text>
<claim-text>a third switch which is turned on after the input charge accumulated in the sampling capacitor is transferred to the temporary storage capacitor, and</claim-text>
<claim-text>a re-transferring part which returns the input charge, which has been transferred to the temporary storage capacitor, after the reference charge is accumulated in the sampling capacitor when the third switch is turned on, in order to perform the addition or the subtraction of the charge accumulated in the sampling capacitor.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The sample and hold circuit of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the hold part includes
<claim-text>an operational amplifier, and</claim-text>
<claim-text>a fourth switch which is provided on a line connecting a connection point between the first switch and the sampling capacitor and an output terminal of the operational amplifier and turned on when a hold output is performed,</claim-text>
<claim-text>the second switch and the temporary storage capacitor are provided on a line connecting a connection point between the sampling capacitor and an input terminal of the operational amplifier and a connection point between the fourth switch and the output terminal of the operational amplifier.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The sample and hold circuit of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein a capacity of the temporary storage capacitor is greater than that of the sampling capacitor.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The sample and hold circuit of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the adding/subtracting part includes
<claim-text>a first comparing part configured to determine whether the input voltage sampled by the first sampling part is greater than a first predetermined value, and</claim-text>
<claim-text>an applying voltage switching part configured to switch, according to a determination result of the first comparing part, the predetermined reference voltage to be applied to an input side terminal of the sampling capacitor when the third switch is turned on at the time of transferring the input charge accumulated in the sampling capacitor to the temporary storage capacitor.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The sample and hold circuit of <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein the hold part includes an operational amplifier,
<claim-text>the adding/subtracting part includes</claim-text>
<claim-text>a fifth switch configured to electrically connect an output side terminal of the temporary storage capacitor and the output terminal of the operational amplifier after the input charge accumulated in the sampling capacitor is transferred to the temporary storage capacitor;</claim-text>
<claim-text>a second comparing part configured to determine whether a voltage of the output terminal of the operational amplifier after the input charge accumulated in the sampling capacitor is transferred to the temporary storage capacitor is greater than a second predetermined value; and</claim-text>
<claim-text>a sampling voltage switching part configured to switch the predetermined reference voltage sampled by the second sampling part according to a determination result of the second comparing part, and</claim-text>
<claim-text>the re-transferring part returns the input charge, which has been transferred to the temporary storage capacitor, to the sampling capacitor in which the reference charge according to the predetermined reference voltage is accumulated, after the predetermined reference voltage is sampled by the second sampling part.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. An A/D converter, comprising:
<claim-text>an A/D converting part configured to perform an A/D conversion of an analog output voltage output by the hold part of the sample and hold circuit of <claim-ref idref="CLM-00001">claim 1</claim-ref>; and</claim-text>
<claim-text>a digital value calculating part configured to derive an output digital value by performing an addition or a subtraction between a digital value obtained as a result of the A/D conversion by the A/D converting part and a digital value corresponding to the predetermined reference voltage sampled by the second sampling capacitor.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. A sample and hold circuit for sampling and holding a potential difference between two input voltages, comprising:
<claim-text>a pair of first switches which is turned on when the respective input voltages are to be sampled;</claim-text>
<claim-text>a pair of sampling capacitors configured to accumulate input charges according to the input voltages input via the first switches in order to sample the input voltages input via the first switches when the first switches are turned on and reference charges according to two predetermined reference voltages in order to sample the predetermined reference voltages when the first switches are turned off;</claim-text>
<claim-text>an adding/subtracting part configured to perform an addition or a subtraction between the input voltages sampled by the pair of the sampling capacitors and the predetermined reference voltages sampled by the pair of the sampling capacitors; and</claim-text>
<claim-text>a hold part configured to hold and output the potential difference between two voltages obtained by the addition or the subtraction by the adding/subtracting part, wherein</claim-text>
<claim-text>the adding/subtracting part includes</claim-text>
<claim-text>a pair of second switches which is turned on after the input charges are accumulated in the pair of the sampling capacitors,</claim-text>
<claim-text>a pair of temporary storage capacitors to which the input charges accumulated in the pair of the sampling capacitors are transferred when the pair of the second switches is turned on,</claim-text>
<claim-text>a third switch configured to connect input side terminals of the pair of the sampling capacitors when the input charges accumulated in the pair of the sampling capacitors are transferred to the pair of the temporary storage capacitors,</claim-text>
<claim-text>a pair of fourth switches which is turned on after the input charges accumulated in the pair of the sampling capacitors are transferred to the pair of the temporary storage capacitors, and</claim-text>
<claim-text>a re-transferring part which returns the input charges, which have been transferred to the pair of the temporary storage capacitors, after the reference charges are accumulated in the pair of the sampling capacitors when the pair of the fourth switches is turned on, in order to perform the addition or the subtraction of the charges accumulated in the pair of the sampling capacitors.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The sample and hold circuit of <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the adding/subtracting part removes an amount of charges when turning on the pair of the fourth switches causes the reference charges to be accumulated in the pair of the sampling capacitors, the amount of charges corresponding to an input common-mode and remaining in the pair of the sampling capacitors.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. An A/D converter, comprising:
<claim-text>an ND converting part configured to perform an A/D conversion of a potential difference between two analog output voltages output by the hold part of the sample and hold circuit of <claim-ref idref="CLM-00007">claim 7</claim-ref>; and</claim-text>
<claim-text>a digital value calculating part configured to derive an output digital value by performing an addition or a subtraction between a digital value obtained as a result of the A/D conversion by the A/D converting part and digital values according to the predetermined reference voltages sampled by the pair of the sampling capacitors. </claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
