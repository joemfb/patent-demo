<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08626870-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08626870</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13041975</doc-number>
<date>20110307</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>KR</country>
<doc-number>10-2010-0020148</doc-number>
<date>20100305</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>163</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>15</main-group>
<subgroup>16</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>709217</main-classification>
</classification-national>
<invention-title id="d2e71">Method and apparatus for generating and reproducing adaptive stream based on file format, and recording medium thereof</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>8244901</doc-number>
<kind>B2</kind>
<name>Furbeck</name>
<date>20120800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709231</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>8260871</doc-number>
<kind>B2</kind>
<name>Fallen et al.</name>
<date>20120900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709207</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>8332404</doc-number>
<kind>B2</kind>
<name>Camble et al.</name>
<date>20121200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707736</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>8531561</doc-number>
<kind>B2</kind>
<name>Shintani</name>
<date>20130900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2005/0102371</doc-number>
<kind>A1</kind>
<name>Aksu</name>
<date>20050500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709217</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2006/0212902</doc-number>
<kind>A1</kind>
<name>Seo et al.</name>
<date>20060900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2006/0274612</doc-number>
<kind>A1</kind>
<name>Kim</name>
<date>20061200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2007/0192761</doc-number>
<kind>A1</kind>
<name>Sahita et al.</name>
<date>20070800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>717140</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2007/0261092</doc-number>
<kind>A1</kind>
<name>Ozawa et al.</name>
<date>20071100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>2008/0028170</doc-number>
<kind>A1</kind>
<name>Clinick et al.</name>
<date>20080100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>2008/0163375</doc-number>
<kind>A1</kind>
<name>Savagaonkar et al.</name>
<date>20080700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>726 26</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>2008/0320100</doc-number>
<kind>A1</kind>
<name>Batson et al.</name>
<date>20081200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709217</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>2011/0167345</doc-number>
<kind>A1</kind>
<name>Jones et al.</name>
<date>20110700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>715716</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>2011/0219098</doc-number>
<kind>A1</kind>
<name>Xu et al.</name>
<date>20110900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709219</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>2011/0246660</doc-number>
<kind>A1</kind>
<name>Bouazizi</name>
<date>20111000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709231</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>2012/0005303</doc-number>
<kind>A1</kind>
<name>Hwang et al.</name>
<date>20120100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709217</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>2012/0011270</doc-number>
<kind>A1</kind>
<name>Priddle et al.</name>
<date>20120100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709231</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00018">
<document-id>
<country>US</country>
<doc-number>2012/0259942</doc-number>
<kind>A1</kind>
<name>Brookins et al.</name>
<date>20121000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709213</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00019">
<document-id>
<country>US</country>
<doc-number>2012/0259946</doc-number>
<kind>A1</kind>
<name>Stockhammer et al.</name>
<date>20121000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709217</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00020">
<document-id>
<country>JP</country>
<doc-number>2007-295038</doc-number>
<date>20071100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00021">
<document-id>
<country>JP</country>
<doc-number>2010-016649</doc-number>
<date>20100100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00022">
<document-id>
<country>KR</country>
<doc-number>1020060067849</doc-number>
<date>20060600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00023">
<document-id>
<country>WO</country>
<doc-number>WO 2005006330</doc-number>
<kind>A1</kind>
<date>20050100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
</us-citation>
<us-citation>
<patcit num="00024">
<document-id>
<country>WO</country>
<doc-number>WO 2010117316</doc-number>
<kind>A1</kind>
<date>20101000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
</us-citation>
<us-citation>
<nplcit num="00025">
<othercit>Knowlton, C., Live Broadcasting with Silverlight and Windows Media, 2009, Microsoft, pp. 1-108.</othercit>
</nplcit>
<category>cited by examiner</category>
</us-citation>
<us-citation>
<nplcit num="00026">
<othercit>Alex Zambelli, &#x201c;IIS Smooth Streaming Technical Overview&#x201d;, Microsoft Silverlight, Windows Server, Internet Information Services 7.0, Mar. 2009.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>30</number-of-claims>
<us-exemplary-claim>13</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>709217</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>13</number-of-drawing-sheets>
<number-of-figures>14</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20110219098</doc-number>
<kind>A1</kind>
<date>20110908</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Xu</last-name>
<first-name>Yiling</first-name>
<address>
<city>Suwon-si</city>
<country>KR</country>
</address>
</addressbook>
<residence>
<country>KR</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Rhyu</last-name>
<first-name>Sung-Ryeul</first-name>
<address>
<city>Yongin-si</city>
<country>KR</country>
</address>
</addressbook>
<residence>
<country>KR</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Zhang</last-name>
<first-name>Guanhua</first-name>
<address>
<city>Suwon-si</city>
<country>KR</country>
</address>
</addressbook>
<residence>
<country>KR</country>
</residence>
</us-applicant>
<us-applicant sequence="004" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Song</last-name>
<first-name>Jae-Yeon</first-name>
<address>
<city>Seoul</city>
<country>KR</country>
</address>
</addressbook>
<residence>
<country>KR</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Xu</last-name>
<first-name>Yiling</first-name>
<address>
<city>Suwon-si</city>
<country>KR</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Rhyu</last-name>
<first-name>Sung-Ryeul</first-name>
<address>
<city>Yongin-si</city>
<country>KR</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Zhang</last-name>
<first-name>Guanhua</first-name>
<address>
<city>Suwon-si</city>
<country>KR</country>
</address>
</addressbook>
</inventor>
<inventor sequence="004" designation="us-only">
<addressbook>
<last-name>Song</last-name>
<first-name>Jae-Yeon</first-name>
<address>
<city>Seoul</city>
<country>KR</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>The Farrell Law Firm, P.C.</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Samsung Electronics Co., Ltd</orgname>
<role>03</role>
<address>
<country>KR</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Baturay</last-name>
<first-name>Alicia</first-name>
<department>2441</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A method and an apparatus for generating and reproducing an adaptive stream based on a file format is disclosed. The method includes receiving one or more segments, each of which includes a manifest box, a moov box, and a media data box, from a server and analyzing the manifest box, the moov box, and the media data box; and decoding and reproducing the one or more segments based on a result of analyzing of the manifest box, moov box, and media data box, wherein the manifest box, moov box, and media data box are included in a single file.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="235.97mm" wi="170.52mm" file="US08626870-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="228.01mm" wi="173.82mm" file="US08626870-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="244.52mm" wi="169.67mm" file="US08626870-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="228.18mm" wi="175.18mm" file="US08626870-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="232.07mm" wi="145.63mm" file="US08626870-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="234.19mm" wi="172.55mm" file="US08626870-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="129.29mm" wi="159.00mm" file="US08626870-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="131.57mm" wi="169.33mm" file="US08626870-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="126.58mm" wi="173.40mm" file="US08626870-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="184.40mm" wi="128.44mm" orientation="landscape" file="US08626870-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="227.16mm" wi="169.93mm" file="US08626870-20140107-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="235.54mm" wi="180.26mm" file="US08626870-20140107-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="182.80mm" wi="162.14mm" file="US08626870-20140107-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00013" num="00013">
<img id="EMI-D00013" he="202.18mm" wi="162.64mm" file="US08626870-20140107-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">PRIORITY</heading>
<p id="p-0002" num="0001">This application claims priority under 35 U.S.C. &#xa7;119(a) to an application entitled &#x201c;Method And Apparatus For Generating And Reproducing Adaptive Stream Based On File Format, And Recording Medium Thereof&#x201d; filed in the Korean Intellectual Property Office on Mar. 5, 2010 and assigned Serial No. 10-2010-0020148, the entire contents of which are incorporated herein by reference.</p>
<heading id="h-0002" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0003" num="0002">1. Field of the Invention</p>
<p id="p-0004" num="0003">The present invention relates generally to a content transmission system, and, more particularly, to a method and an apparatus for generating and reproducing an adaptive stream based on a file format.</p>
<p id="p-0005" num="0004">2. Description of the Related Art</p>
<p id="p-0006" num="0005">International Organization for Standardization/International Electro-technical Commission (ISO/IEC) 14496-12 defines an ISO base file format as a standard file format used for a multimedia service. The ISO base file format has a flexible and extendable file structure and, thus, serves as a basis for various media file formats. The ISO base file format has a standardized file structure for packaging media resources and metadata and thus has an object-oriented design capable of including various types of media resources and metadata. For example, the Joint Photographic Experts Group (JPEG) 2000 and 3rd Generation Partnership Project (3GPP) file formats are based on the ISO base file format, and the Moving Picture Experts Group (MPEG)-4 file format also corresponds to an extension of the ISO base file format.</p>
<p id="p-0007" num="0006">Meanwhile, the Audio/Video (A/V) streaming using HyperText Transfer Protocol (HTTP) corresponds to a streaming scheme, which minimizes the burden of the server and depends entirely on the intelligent processing of a client. The client achieves the streaming by using only a partial file transport request or a file transport request of the HTTP. Therefore, in order to adapt to data rate change of the network, files should be compressed at various data rates for the same content and should be previously uploaded in the server. Further, in order to adapt to a change of the network, the entire content file should be divided into proper-sized fragments and the divided fragments should be stored as files. Further, a separate metadata file containing information about a method of sequentially taking such fragmented files and reproducing A/V content from them should be uploaded in the server. An example of such a metadata file is Manifest, which implies, in general, a file providing information relating to a file list. A file used to transmit configuration information and additional information about files, such as time and bandwidth of data constituting content, when content information is transmitted, is referred to as a &#x201c;Manifest file&#x201d;. Further, it is possible to previously transmit information relating to the file list to the client so that the client can select a file.</p>
<p id="p-0008" num="0007">Further, the Manifest provides information on an adaptive stream. For example, the Manifest provides information on the bitrate used for each segment. Therefore, the terminal can choose a proper segment based on the information on the adaptive stream.</p>
<p id="p-0009" num="0008">However, when content is transmitted after being divided into small units in order to adapt to a changing broadcast environment, a scheme for efficiently transferring the Manifest file is required. Further, a scheme by which a client can find a proper file for reproduction through a file format transmitted from a server, is also required. Additionally, at the time of scheduling in the server, files should be mapped to corresponding segments by referring to different Uniform Resource Locators (URLs), which increases the scheduling load.</p>
<heading id="h-0003" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0010" num="0009">Accordingly, the present invention has been made to solve the above-mentioned problems occurring in the prior art, and the present invention provides a method and an apparatus for generating and reproducing an adaptive stream based on a file format, which can efficiently transfer, receive, and reproduce Manifest information.</p>
<p id="p-0011" num="0010">Further, the present invention provides a method and an apparatus for generating an adaptive stream based on a file format, which enables efficient scheduling by a server.</p>
<p id="p-0012" num="0011">In accordance with an aspect of the present invention, a method of transmitting a file in a server is provided, the method including generating a single file including a manifest box, a moov box, and one or more segments, each of which includes a media data box; and transmitting the generated single file to a terminal.</p>
<p id="p-0013" num="0012">In accordance with another aspect of the present invention, an apparatus for generating a file in a server, the apparatus including a generator to generate a manifest box to transmit manifest information is provided, a moov box, and a segment including a media data box; and a transmitter to transmit the manifest box, the moov box, and the segment including the media data box to a terminal, wherein the manifest box, the moov box, and the segment are transmitted in a single file.</p>
<p id="p-0014" num="0013">In accordance with another aspect of the present invention, a method of reproducing a file in a terminal is provided, the method including receiving a manifest box, a moov box, and a segment from a server and analyzing the manifest box, the moov box, and the segment; and performing decoding and reproducing based on a result of analyzing of the manifest box, the moov box, and the segment, wherein the manifest box, the moov box, and the segment are included in a single file.</p>
<p id="p-0015" num="0014">In accordance with another aspect of the present invention, an apparatus for reproducing a file in a terminal is provided, the apparatus including a parser to receive a manifest box, a moov box, and a segment from a server and analyze the manifest box, the moov box, and the segment; and a decoder to perform decoding based on a result of analyzing of the manifest box, the moov box, and the segment, wherein the manifest box, the moov box, and the segment are included in a single file.</p>
<p id="p-0016" num="0015">In accordance with another aspect of the present invention, a recording medium capable of storing a data structure is provided, the recording medium including a manifest box to transmit manifest information; a moov box; and one or more segments, each of which includes a media data box, wherein the manifest box, the moov box, and the one or more segments are included in a single file.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0017" num="0016">The above and other aspects, features and advantages of the present invention will be more apparent from the following detailed description taken in conjunction with the accompanying drawings, in which:</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 1</figref> illustrates a schema of a manifest of a current mechanism;</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 2</figref> illustrates a structure of a file format relating to the manifest shown in <figref idref="DRAWINGS">FIG. 1</figref>;</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 3</figref> illustrates a manifest configuration according to the first embodiment of the present invention;</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 4</figref> illustrates a manifest configuration according to the second embodiment of the present invention;</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 5</figref> illustrates a manifest configuration according to the third embodiment of the present invention;</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 6</figref> illustrates the mani box located in the moov level or moov box according to the fourth embodiment of the present invention;</p>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 7</figref> illustrates the mani box located in the meta level or meta box according to the fifth embodiment of the present invention;</p>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. 8</figref> illustrates an example of the segment structure according to the present invention;</p>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. 9</figref> illustrates another example of the segment structure according to the present invention;</p>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 10</figref> illustrates an example in which other new fields can be added in the manifest in the file format according to the present invention;</p>
<p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. 11</figref> is a flowchart illustrating a method of reproducing a file by a terminal;</p>
<p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. 12</figref> is a flowchart illustrating the operation of the server;</p>
<p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. 13</figref> illustrates block diagram of the terminal; and</p>
<p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. 14</figref> illustrates block diagram of the server.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DETAILED DESCRIPTION OF EMBODIMENTS OF THE PRESENT INVENTION</heading>
<p id="p-0032" num="0031">Hereinafter, embodiments of the present invention will be described with reference to the accompanying drawings. In the following description, a detailed description of known functions and configurations incorporated herein will be omitted when it may make the subject matter of the present invention rather unclear. Further, in the following description of the present invention, various specific definitions are provided only to help general understanding of the present invention, and it is apparent to those skilled in the art that the present invention can be implemented without such definitions.</p>
<p id="p-0033" num="0032">In the following description of the operations of servers and terminals, the process of generating and parsing the file format not described in detail follows the ISO/IEC 14496-12, to which the present invention is not limited.</p>
<p id="p-0034" num="0033">Manifest parameters include schema and attributes as shown in <figref idref="DRAWINGS">FIG. 1</figref>. <figref idref="DRAWINGS">FIG. 2</figref> illustrates a structure of a file format relating to the Manifest shown in <figref idref="DRAWINGS">FIG. 1</figref>.
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0034">I. URLTemplate&#x2014;corresponds to a unique URL created by combining fixed portions, which include a segment ID and a track ID. URLTemplate includes URLs of each segment along with track ID and segment ID. A URLTemplate indicates a template for accessing each segment. URLTemplate can be overridden by a URL in the segment if necessary. The following is an example of URLTemplate.</li>
    <li id="ul0001-0002" num="0035">http://example.com/vod/movie/18888/Track/{TrackID}/Segments/{segmentID}</li>
    <li id="ul0001-0003" num="0036">II. NextAdaptiveControlURL&#x2014;used to indicate the next XML URL which is necessary for continuous viewing. NextAdaptiveControlURL is optional and can be used in a live adaptive streaming or for advertisement.</li>
    <li id="ul0001-0004" num="0037">III. RefDataURL&#x2014;used to indicate a part of or an entire head data (.ref). RefDataURL is optional when segments can decode themselves.</li>
    <li id="ul0001-0005" num="0038">IV. Track&#x2014;a set of contiguous segments of a particular type with different bitrates.</li>
</ul>
</p>
<p id="p-0035" num="0039">i. ID&#x2014;indicates a Track ID.</p>
<p id="p-0036" num="0040">ii. Types&#x2014;indicates the type of Track. Types can be Video, Audio, Packed or combined Video and Audio, and I-Frame.</p>
<p id="p-0037" num="0041">iii. BitRate&#x2014;indicates a bitrate of segments in Track.</p>
<p id="p-0038" num="0042">iv. StartTime&#x2014;indicates a time stamp which specifies the start time of a track. StartTime is optional</p>
<p id="p-0039" num="0043">v. SegmentStartID&#x2014;indicates the initial ID of segments which belong to the track. SegmentStartID is optional.</p>
<p id="p-0040" num="0044">vi. SegmentDuration&#x2014;indicates the duration of each segment. SegmentDuration is optional.</p>
<p id="p-0041" num="0045">vii. SegmentCount&#x2014;indicates the total number of segments which belong to the track. SegmentCount is optional.</p>
<p id="p-0042" num="0046">viii. Segment&#x2014;is a concatenation of some basic units, each including a fragment made of only audio or video data or both audio and video data divided based on specific time interval. Segment is a basic unit of transfer between the server and the client. Segment is assigned a time stamp for temporal and spatial locating or AN synchronization. (The element segment is optional. If the optional attributes of a track element are specified, all of the information of each segment can be deduced and the element segment becomes unnecessary.)
<ul id="ul0002" list-style="none">
    <li id="ul0002-0001" num="0000">
    <ul id="ul0003" list-style="none">
        <li id="ul0003-0001" num="0047">ID&#x2014;a segment ID.</li>
        <li id="ul0003-0002" num="0048">StartTime&#x2014;indicates the starting time of the segment.</li>
        <li id="ul0003-0003" num="0049">Duration&#x2014;indicates the duration of the segment.</li>
        <li id="ul0003-0004" num="0050">URL&#x2014;URL is optional when URLTemplate is used. URL can be specified for special usage (e.g., content or advertisement video from another server) and the URLTemplate would be ignored for this segment.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0043" num="0051">The present invention includes the addition of changed elements into several file formats in order to efficiently transfer Manifest information within a file.</p>
<p id="p-0044" num="0052">In the current mechanism as shown in <figref idref="DRAWINGS">FIG. 2</figref>, the manifest and data (e.g., audio, video) are separated. The terminal requests and acquires the manifest from the server. The terminal can then be aware of information about a head and each segment. The head information, which corresponds to information about decoding and composition, is stored in the moov box in the file format. The segment information is a part of the service data and includes a moof box and a media data (mdat) box.</p>
<p id="p-0045" num="0053">The moof box stores information about this part of the service, and mdat box stores real data, for example, media stream or media data, such as video and audio. The example described in the current mechanism is based on the current file format. If the file format is modified in the future, the head and segment may also be mapped to the new format.</p>
<p id="p-0046" num="0054">Currently, the manifest is not stored inside the file format, and the file format and the manifest are separately requested and sent to the terminal.</p>
<p id="p-0047" num="0055">Head information and segments are divided into different files with different URLs. That is, different files have different URLs. Therefore, at the time of scheduling, the server should refer to different URLs in order to map each segment to each file, which increases the load of the scheduling.</p>
<p id="p-0048" num="0056">The ISO-based media file format includes a plurality of boxes containing detailed information on audio/video data and audio/video. The box described herein can be also referred to as a data block or a container.</p>
<p id="p-0049" num="0057">In the first to third embodiments of the present invention, the manifest is configured in a mani box within one file format.</p>
<p id="p-0050" num="0058"><figref idref="DRAWINGS">FIG. 3</figref> illustrates a manifest configuration according to the first embodiment of the present invention.</p>
<p id="p-0051" num="0059">Manifest, head information, segments, and the next manifest are all included in one file. The manifest is stored in the mani box and the head information is stored in the moov box.</p>
<p id="p-0052" num="0060">The SegmentOffset and SegmentSize attributes are defined in the manifest to signal the offset and size of each segment in the file. Thus, the terminal can request the server to provide an expected segment based on http range. Further, the URLTemplate attribute is created with a fixed part and range information. That is, it is possible to acquire each segment in the same URL based on the information of the SegmentOffset and SegmentSize attributes of the manifest.</p>
<p id="p-0053" num="0061">Further, when the manifest box inside file format is defined, the NextAdaptiveControlURL attribute is not used. Since the next manifest is also stored in this file, i.e. within a single file, the offset of the next manifest is defined in the current manifest box.</p>
<p id="p-0054" num="0062">Other parameters are the same as those of the current manifest.</p>
<p id="p-0055" num="0063"><figref idref="DRAWINGS">FIG. 4</figref> illustrates a manifest configuration according to the second embodiment of the present invention.</p>
<p id="p-0056" num="0064">In the second embodiment of the present invention, head information and all segments are still in one file, but the manifest is delivered separately from the one file as shown in <figref idref="DRAWINGS">FIG. 4</figref>. The manifest can be stored by another single file or transmitted through a separate message other than the file structure, or can be acquired through a separate URL. That is, the manifest and a single file, including all segments, and head information are separately acquired by the terminal. The new mechanism according to the present embodiment has a construction similar to that of the current mechanism described above in with respect to <figref idref="DRAWINGS">FIG. 2</figref> in that the single file includes all segments and head information without the manifest information. However, although head information and each segment should be accessed and acquired through different URLs in the current mechanism described above, the head information and all segments should be acquired through one URL in the second embodiment of the present invention. That is, in order to acquire all segments through one URL as described above, a new attribute, &#x201c;Headinfo,&#x201d; for acquiring the location of head information within the manifest should be defined.</p>
<p id="p-0057" num="0065">Therefore, since the head information is stored in the moov box, the Headinfo attribute contains the location of the moov box in the file. To this end, HeadInfo is defined with parameters including HeadOffset and HeadSize.</p>
<p id="p-0058" num="0066">If head information and the remaining segments are divided into two files with different URLs, then RefDataURL could be used here to indicate the head information.</p>
<p id="p-0059" num="0067">The SegmentOffset and SegmentSize attributes can be defined in the manifest in order to signal the offset and size of each segment in the file. Therefore, the terminal can request the expected segment based on an http range. Further, the the URLTemplate attribute is created with a fixed part and range information.</p>
<p id="p-0060" num="0068">In the second embodiment of the present invention, the manifest is received separately. Therefore, the mani box is not used, and the next manifest is indicated by the NextAaptiveControlURL attribute. That is, it is possible to interpret the next manifest information through the NextAaptiveControlURL attribute.</p>
<p id="p-0061" num="0069"><figref idref="DRAWINGS">FIG. 5</figref> illustrates a manifest configuration according to the third embodiment of the present invention.</p>
<p id="p-0062" num="0070">In this mechanism, some of the segments can be in one file (the main file), and others can be in another file (an auxiliary file). As shown in <figref idref="DRAWINGS">FIG. 5</figref>, segments #<b>1</b> and #<b>2</b> are in one file, and the SegmentOffset and SegmentSize attributes indicate locations of segments #<b>1</b> and #<b>2</b> within the one file. However, segment #<b>3</b> is in another file, and the location of segment #<b>3</b> is indicated by the SegmentURL attribute. For example, in a hybrid network, some segments can be taken from a file through a wired network, and some segments can be taken from a file through a wireless network. Therefore, in the case that a segment is stored in the main file, SegmentOffset and SegmentSize are used to indicate the segment location in the file. In the case that the segment is stored in another file (auxiliary file), SegmentURL is used to indicate the segment location.</p>
<p id="p-0063" num="0071">The Manifest can be stored in the main file as in the example shown in <figref idref="DRAWINGS">FIG. 5</figref> and can also be stored separately.</p>
<p id="p-0064" num="0072">The location of the manifest in the file format can vary. Not only can the mani box be defined in the file level, but the mani box can also be located in another level. For example, the mani box can be located at the moov level.</p>
<p id="p-0065" num="0073"><figref idref="DRAWINGS">FIG. 6</figref> illustrates the mani box located in the moov level or moov box according to the fourth embodiment of the present invention.</p>
<p id="p-0066" num="0074">The description regarding the manifest box in the moov level is similar to the description about the manifest box in the file level or file box, that is, similar to the description in the first embodiment of the present invention.</p>
<p id="p-0067" num="0075">In general, the moov box is not updated. However, the manifest update may be required, for example, in the case of a live stream. When a manifest update is required, the moov box should support an update mechanism and carry the next manifest box as shown in the following structure. In the first moov box, except for the normal track box, the mani box is added. When a new mani box is required, the moov box is updated to carry the new mani box. <figref idref="DRAWINGS">FIG. 6</figref> illustrates a segment structure. The structure shown in <figref idref="DRAWINGS">FIG. 6</figref> is based on , which will be described later. However, if the free space is used, the structure shown in <figref idref="DRAWINGS">FIG. 6</figref> is based on the second case, which will be described later.</p>
<p id="p-0068" num="0076">The location of the manifest in the file format can vary. Not only can the mani box be defined in the file level, but the mani box can also be located in another level. For example, the mani box can be located in the meta level.</p>
<p id="p-0069" num="0077"><figref idref="DRAWINGS">FIG. 7</figref> illustrates the mani box located in the meta level or meta box according to the fifth embodiment of the present invention.</p>
<p id="p-0070" num="0078">The description of the manifest box in the meta level is similar to the description of the manifest box in the file level or file box, that is, similar to the description in the first embodiment of the present invention.</p>
<p id="p-0071" num="0079">In general, the meta box is not updated. However, the manifest update may be required, for example, in the case of a live stream. When the manifest update is required, the meta box should support an update mechanism and transmit the next manifest box. In the first meta box, except for the normal metadata information box, the mani box is added. When a new mani box is required, the meta box is updated to carry the new mani box. <figref idref="DRAWINGS">FIG. 7</figref> illustrates a segment structure. The structure shown in <figref idref="DRAWINGS">FIG. 7</figref> is based on the first case, which will be described later. However, if the free space is used, the structure shown in <figref idref="DRAWINGS">FIG. 7</figref> is based on the second case, which will be described later.</p>
<p id="p-0072" num="0080">In the new manifest configutation, a new mani box is proposed in order to support various embodiments described above. Various boxes may be included within the proposed mani box. The newly defined boxes are as shown in Table 1 below.</p>
<p id="p-0073" num="0081">
<tables id="TABLE-US-00001" num="00001">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="offset" colwidth="14pt" align="left"/>
<colspec colname="1" colwidth="70pt" align="left"/>
<colspec colname="2" colwidth="133pt" align="left"/>
<thead>
<row>
<entry/>
<entry namest="offset" nameend="2" rowsep="1">TABLE 1</entry>
</row>
<row>
<entry/>
<entry namest="offset" nameend="2" align="center" rowsep="1"/>
</row>
<row>
<entry/>
<entry>New Box</entry>
<entry>Description</entry>
</row>
<row>
<entry/>
<entry namest="offset" nameend="2" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry/>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="4">
<colspec colname="offset" colwidth="14pt" align="left"/>
<colspec colname="1" colwidth="42pt" align="left"/>
<colspec colname="2" colwidth="28pt" align="left"/>
<colspec colname="3" colwidth="133pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>mani</entry>
<entry/>
<entry>For transmitting manifest information</entry>
</row>
<row>
<entry/>
<entry/>
<entry>mahd</entry>
<entry>Manifest header, overall information</entry>
</row>
<row>
<entry/>
<entry/>
<entry>mxml</entry>
<entry>Manifest XML container</entry>
</row>
<row>
<entry/>
<entry/>
<entry>nmof</entry>
<entry>Next manifest offset</entry>
</row>
<row>
<entry/>
<entry/>
<entry>nmsz</entry>
<entry>Next manifest size</entry>
</row>
<row>
<entry/>
<entry namest="offset" nameend="3" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
<br/>
Hereinafter, the newly defined boxes in Table 1 will be described in detail.
<ul id="ul0004" list-style="none">
    <li id="ul0004-0001" num="0082">2.1 mani box</li>
    <li id="ul0004-0002" num="0083">Box Type: &#x201c;mani&#x201d;</li>
    <li id="ul0004-0003" num="0084">Container: File</li>
    <li id="ul0004-0004" num="0085">Quantity: zero or more</li>
</ul>
</p>
<p id="p-0074" num="0086">The mani box is used when the manifest is delivered within the file. In the case of Content on Delivery CoD, one file has one mani box. In the case of live adaptive streaming, there could be more than one mani box.</p>
<p id="h-0006" num="0000">An example of the syntax is as follows.</p>
<p id="p-0075" num="0087">
<tables id="TABLE-US-00002" num="00002">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="28pt" align="left"/>
<colspec colname="1" colwidth="189pt" align="left"/>
<thead>
<row>
<entry/>
<entry namest="offset" nameend="1" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry/>
<entry>aligned(8) class ManifestBox extends Box(&#x2018;mani&#x2019;){</entry>
</row>
<row>
<entry/>
<entry>}</entry>
</row>
<row>
<entry/>
<entry namest="offset" nameend="1" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
<ul id="ul0005" list-style="none">
    <li id="ul0005-0001" num="0088">2.2 mand</li>
    <li id="ul0005-0002" num="0089">Box Type: &#x201c;mand&#x201d;</li>
    <li id="ul0005-0003" num="0090">Container: mani box</li>
    <li id="ul0005-0004" num="0091">Quantity: exactly one</li>
</ul>
</p>
<p id="p-0076" num="0092">This box includes information about manifest, and an example of the syntax is as follows.</p>
<p id="p-0077" num="0093">
<tables id="TABLE-US-00003" num="00003">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="14pt" align="left"/>
<colspec colname="1" colwidth="203pt" align="left"/>
<thead>
<row>
<entry/>
<entry namest="offset" nameend="1" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry/>
<entry>aligned(8) class ManifestHeaderBox extends FullBox(&#x2018;mahd&#x2019;,</entry>
</row>
<row>
<entry/>
<entry>version, 0) {</entry>
</row>
<row>
<entry/>
<entry>if (version == 1) {</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="28pt" align="left"/>
<colspec colname="1" colwidth="189pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>unsigned int(64) creation_time;</entry>
</row>
<row>
<entry/>
<entry>unsigned int(64) modification_time;</entry>
</row>
<row>
<entry/>
<entry>unsigned int(32) timescale;</entry>
</row>
<row>
<entry/>
<entry>unsigned int(64) duration;</entry>
</row>
<row>
<entry/>
<entry>unsigned int(64) size;</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="14pt" align="left"/>
<colspec colname="1" colwidth="203pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>} else { // version==0</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="28pt" align="left"/>
<colspec colname="1" colwidth="189pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>unsigned int(32) creation_time;</entry>
</row>
<row>
<entry/>
<entry>unsigned int(32) modification_time;</entry>
</row>
<row>
<entry/>
<entry>unsigned int(32) timescale;</entry>
</row>
<row>
<entry/>
<entry>unsigned int(32) duration;</entry>
</row>
<row>
<entry/>
<entry>unsigned int(32) size;</entry>
</row>
<row>
<entry/>
<entry>}</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="14pt" align="left"/>
<colspec colname="1" colwidth="203pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>}</entry>
</row>
<row>
<entry/>
<entry namest="offset" nameend="1" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0078" num="0094">In the syntax, &#x201c;version&#x201d; is an integer that specifies the version of the manifest box, which can be expressed as 0 or 1 based on the current specification.</p>
<p id="p-0079" num="0095">&#x201c;creation_time&#x201d; is an integer that declares the creation time of the presentation, in seconds past midnight, Jan. 1, 1904, Coordinated Universal Time (UTC).</p>
<p id="p-0080" num="0096">&#x201c;modification time&#x201d; is an integer that declares the most recent time the presentation was modified, in seconds past midnight, Jan. 1, 1904, in UTC time;</p>
<p id="p-0081" num="0097">&#x201c;timescale&#x201d; is an integer that specifies the time-scale for the entire presentation, and corresponds to the number of time units that pass in one second, for example, a time coordinate system that measures time in one-sixtieths of one second has a time scale of 60);</p>
<p id="p-0082" num="0098">&#x201c;duration&#x201d; is an integer that declares the length of the presentation in the indicated timescale, and this property is derived from the presentation's tracks (i.e., the value of this field corresponds to the duration of the longest track in the presentation.</p>
<p id="p-0083" num="0099">&#x201c;size&#x201d; is an integer that specifies the number of bytes in this box.
<ul id="ul0006" list-style="none">
    <li id="ul0006-0001" num="0100">2.3 mxml</li>
    <li id="ul0006-0002" num="0101">Box Type: &#x201c;mxml&#x201d;</li>
    <li id="ul0006-0003" num="0102">Container: mani box</li>
    <li id="ul0006-0004" num="0103">Quantity: exactly one</li>
</ul>
</p>
<p id="p-0084" num="0104">This box (manifest MXML box) is a container for the manifest XML, and an example of the syntax is as follows.</p>
<p id="p-0085" num="0105">
<tables id="TABLE-US-00004" num="00004">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="217pt" align="left"/>
<thead>
<row>
<entry namest="1" nameend="1" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry>aligned(8) class MXMLBox extends FullBox(&#x201c;mxml &#x201c;, version = 0, 0) {</entry>
</row>
<row>
<entry>string xml;</entry>
</row>
<row>
<entry>}</entry>
</row>
<row>
<entry namest="1" nameend="1" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
<ul id="ul0007" list-style="none">
    <li id="ul0007-0001" num="0106">2.4 nmof</li>
    <li id="ul0007-0002" num="0107">Box Type: &#x201c;nmof&#x201d;</li>
    <li id="ul0007-0003" num="0108">Container: mani box</li>
    <li id="ul0007-0004" num="0109">Quantity: zero or one
<br/>
This box (Next Manifest Offset box) is used when a next mani box is created in the file and indicates the offset value, and an example of the syntax is as follows.
</li>
</ul>
</p>
<p id="p-0086" num="0110">
<tables id="TABLE-US-00005" num="00005">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="42pt" align="left"/>
<colspec colname="1" colwidth="175pt" align="left"/>
<thead>
<row>
<entry/>
<entry namest="offset" nameend="1" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry/>
<entry>aligned(8) class NextManifestOffsetBox</entry>
</row>
<row>
<entry/>
<entry>extends FullBox(&#x201c;nmof&#x201d;, version = 0, 0) {</entry>
</row>
<row>
<entry/>
<entry>unsigned int(32) size;</entry>
</row>
<row>
<entry/>
<entry>}</entry>
</row>
<row>
<entry/>
<entry namest="offset" nameend="1" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
<ul id="ul0008" list-style="none">
    <li id="ul0008-0001" num="0111">2.5 nmsz</li>
    <li id="ul0008-0002" num="0112">Box Type: &#x201c;nmsz&#x201d;</li>
    <li id="ul0008-0003" num="0113">Container: mani box</li>
    <li id="ul0008-0004" num="0114">Quantity: zero or one
<br/>
This box (Next Manifest Size box) is used when a next mani box is created in the file and indicates the size of the next mani box, and an example of the syntax is as follows.
</li>
</ul>
</p>
<p id="p-0087" num="0115">
<tables id="TABLE-US-00006" num="00006">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="14pt" align="left"/>
<colspec colname="1" colwidth="203pt" align="left"/>
<thead>
<row>
<entry/>
<entry namest="offset" nameend="1" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry/>
<entry>aligned(8) class NextManifestSizeBoxextends FullBox(&#x201c;nmof&#x201d;,</entry>
</row>
<row>
<entry/>
<entry>version = 0, 0) {</entry>
</row>
<row>
<entry/>
<entry>unsigned int(32) next_manifest_offset;</entry>
</row>
<row>
<entry/>
<entry>}</entry>
</row>
<row>
<entry/>
<entry namest="offset" nameend="1" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
<br/>
The first case of the segment structure is shown in <figref idref="DRAWINGS">FIG. 8</figref>.
</p>
<p id="p-0088" num="0116">In the case of the live stream, when the manifest is created, the length of each segment may already be known. That is, next manifest actual offset (nmao) is determined in advance. Therefore, the exact offset and size of each segment is fixed, and the offset of the next manifest can be predicted.</p>
<p id="h-0007" num="0000">The second case of the segment structure is shown in <figref idref="DRAWINGS">FIG. 9</figref>.</p>
<p id="p-0089" num="0117">Case 2 of the segment structure additionally includes free space.</p>
<p id="p-0090" num="0118">Under some conditions, when the manifest is created, the actual size of each segment is not known. In this case, it is possible to assume and assign a fixed size for each segment, and the fixed size should be large enough for each segment. Therefore, free space for carrying extra data are included in the media data box. If the segment does not use all the reserved space, the free space is used for the remaining size. Because the fixed size is reserved for all the segments, the offset of the next manifest can be known and indicated in the previous manifest box.</p>
<p id="p-0091" num="0119"><figref idref="DRAWINGS">FIG. 10</figref> illustrates an example in which other new fields can be added in the manifest in the file format according to the present invention.</p>
<p id="p-0092" num="0120">In addition to the new fields described above, other fields can also be used in the manifest.</p>
<p id="p-0093" num="0121">The field Language <b>1001</b> and <b>1002</b>&#x2014;Different tracks/segments can provide different languages for the same service. In that case, the language of each track/segment can be indicated in the manifest.</p>
<p id="p-0094" num="0122">SubtitleLanguage <b>1003</b> and <b>1004</b>&#x2014;Different tracks/segments can provide different subtitle languages for the same service. In that case, the subtitle language of each track/segment can be indicated in the manifest.</p>
<p id="p-0095" num="0123">AccessNetwork <b>1005</b> and <b>1006</b>&#x2014;In the third embodiment of the present invention, AccessNetwork has been described. In a hybrid network, the tracks/segments may come from different networks. Therefore, this information can be indicated in the manifest to help the terminal choose a proper network to access.</p>
<p id="p-0096" num="0124">CameraAngle <b>1007</b> and <b>1008</b>&#x2014;Different camera angles can be provided for the same service. The terminal can choose one track/segment with a specific camera angle from the manifest.</p>
<p id="p-0097" num="0125"><figref idref="DRAWINGS">FIG. 11</figref> is a flowchart illustrating a method of reproducing a file by a terminal.</p>
<p id="p-0098" num="0126">In step <b>1100</b>, the terminal determines if the manifest is separate from the data file. If the manifest is separate from the data file, the terminal requests and obtains the manifest in step <b>1110</b>. However, if the manifest is in the same file, the terminal accesses the manifest box and obtains information of the manifest in step <b>1112</b>.</p>
<p id="p-0099" num="0127">In step <b>1114</b>, the terminal parses the manifest to obtain different bitrates of the tracks. In step <b>1116</b>, the terminal selects a proper track segment based on its current condition.</p>
<p id="p-0100" num="0128">In step <b>1118</b>, the terminal can get the header information by parsing the moov box. According to the second embodiment of the present invention, the terminal can access the moov box by using the information relating to the head size and the information relating to the head offset.</p>
<p id="p-0101" num="0129">Thereafter, in step <b>1120</b>, the terminal determines if the segment is in the same file or a different file.</p>
<p id="p-0102" num="0130">When the segment is in the same file, the terminal requests the segment based on the SegmentOffset and SegmentSize attributes, and decodes and reproduces the segment in step <b>1122</b>.</p>
<p id="p-0103" num="0131">When the segment is in a different file, the terminal requests the segment based on the SegmentURL, SegmentOffset, and SegmentSize attributes, and decodes and reproduces the segment in step <b>1124</b>.</p>
<p id="p-0104" num="0132">After steps <b>1122</b> and <b>1124</b>, the terminal determines if the terminal wants to continue the service instep <b>1126</b>.</p>
<p id="p-0105" num="0133">If the terminal does not want to continue the service, the terminal ends the process. If the terminal wants to continue, the terminal proceeds to step <b>1128</b>.</p>
<p id="p-0106" num="0134">In step <b>1128</b>, the terminal determines if a new manifest is needed. If a new manifest is needed, e.g., in the case of live stream, the terminal should obtain the new manifest.</p>
<p id="p-0107" num="0135">In step <b>1130</b>, the terminal determines if the new manifest is in the same file. When the new manifest is in the same file, the terminal proceeds to step <b>1112</b>, in which the terminal obtains the manifest based on the next manifest offset box and next manifest size box. However, as a result of the determination in step <b>1130</b>, when the new manifest is in a different file, the terminal proceeds to step <b>1110</b>, in which the terminal acquires the manifest from the server based on the NextAdaptiveControlURL attribute. After getting the new manifest box, the terminal parses and repeats the above steps.</p>
<p id="p-0108" num="0136">As a result of the determination in step <b>1128</b>, when a new manifest is not needed, the terminal continues to request the next segment based on its current condition in step <b>1132</b>, and then receives, decodes, and reproduces the segment in step <b>1134</b>. The terminal then determines whether the terminal wants to continue the service and repeats the above steps.</p>
<p id="p-0109" num="0137">The above-described operation of the terminal described above can be applied to all the embodiments of the present invention.</p>
<p id="p-0110" num="0138"><figref idref="DRAWINGS">FIG. 12</figref> is a flowchart illustrating the operation of the server.</p>
<p id="p-0111" num="0139">In step <b>1200</b>, the server collects service information to create the manifest.</p>
<p id="p-0112" num="0140">In step <b>1210</b>, the server determines whether the manifest is in the same file as that of other service data.</p>
<p id="p-0113" num="0141">If the manifest is separate, that is, if the manifest is in a file different from that of other service data, the server creates a manifest, which is separate and has a single URL, in step <b>1212</b>. In step <b>1214</b>, when the server receives a manifest request from the terminal, the server transmits the manifest created based on the single URL to the terminal.</p>
<p id="p-0114" num="0142">After parsing the manifest, the terminal requests that the server provide an expected segment.</p>
<p id="p-0115" num="0143">When the server receives the request for the segment, the server creates a moov box by using head information in step <b>1219</b>, and transmits the segment requested by the terminal and the moov box to the terminal in step <b>1220</b>. Thus, upon receiving a segment request from the terminal, the server transmits the expected segment to the terminal.</p>
<p id="p-0116" num="0144">As a result of the determination in step <b>1210</b>, if the manifest is in the same file as that of another service data, the server creates the manifest box inside the file in step <b>1218</b>. The created manifest is then downloaded by the terminal. When the server receives the request for the segment, the server create a moov box by using head information in step <b>1219</b>, and transmits the segment requested by the terminal and the moov box to the terminal in step <b>1220</b>. That is, upon receiving a segment request from the terminal, the server transmits the expected segment to the terminal. Otherwise, the manifest box created in step <b>1218</b> together with the moov box created in step <b>1219</b> and the segment which will be transmitted to the user may be organized into one file, which is then transmitted to the terminal. The operation of the server described above can be applied to all the embodiments of the present invention.</p>
<p id="p-0117" num="0145"><figref idref="DRAWINGS">FIG. 13</figref> is a block diagram of the terminal.</p>
<p id="p-0118" num="0146">The terminal <b>1300</b> includes a manifest parser <b>1310</b>, a file parser <b>1320</b>, and a decoder <b>1330</b>. The terminal <b>1300</b>, the manifest parser <b>1310</b>, the file parser <b>1320</b>, and the decoder <b>1330</b> are each embodied as hardware or a combination of hardware and software.</p>
<p id="p-0119" num="0147">The manifest parser <b>1310</b> acquires and parses the manifest if the manifest is separate from the moov box and the media data box. Moreover, the file parser <b>1320</b> requests and parses other boxes including the moov box and various other boxes in the segment, other than the manifest box. If the manifest is inside the file, the manifest parser <b>1310</b> detects and analyzes the manifest box in the file.</p>
<p id="p-0120" num="0148">The file parser <b>1320</b> analyzes other boxes and mdat in the file. The terminal then requests, decodes, and reproduces the expect segment.</p>
<p id="p-0121" num="0149"><figref idref="DRAWINGS">FIG. 14</figref> is a block diagram of the server.</p>
<p id="p-0122" num="0150">The server <b>1400</b> includes a service data provider <b>1410</b>, a manifest generator <b>1412</b>, and a file generator <b>1414</b>. The server, the service data provider <b>1410</b>, the manifest generator <b>1412</b>, and the file generator <b>1414</b> are each embodied as hardware or a combination of hardware and software.</p>
<p id="p-0123" num="0151">The service data provider <b>1410</b> of the server <b>1400</b> has all the service sources.</p>
<p id="p-0124" num="0152">A controller not shown in the drawings receives a manifest request from the terminal and determines if the manifest is separate.</p>
<p id="p-0125" num="0153">If the manifest is separate from the data file, the manifest generator <b>1412</b> creates the manifest information based on service data and some information (e.g., the location of the segment) from the file.</p>
<p id="p-0126" num="0154">If the manifest is inside the file, the file generator <b>1414</b> creates the file such that the manifest box is included in the file. When the manifest is separate from the data file, the file is created to include other files including the moov box and segments, except for the manifest file.</p>
<p id="p-0127" num="0155">Further, although not shown, it is possible to record, store, and reproduce data according to the file format generated according to an embodiment of the present invention. That is, when the manifest is included in a single file, it is possible to store multiple segments together with the moov box and the mani box within the single file in a storage medium (e.g., CD, DVD, BD, or USB) and to reproduce the segments by first reading and analyzing the mani box. It is also possible to store the manifest in a separate file different from a file for other segments and the moov box and to reproduce a segment including desired data by first reading and analyzing the mani box stored in the separate file. When a storage medium is employed for the storage and reproduction, the URL described above in the embodiments of the present invention can be replaced by storage location information (e.g., a memory address), which can result in easier storage and reproduction.</p>
<p id="p-0128" num="0156">According to the present invention, it is possible to efficiently transfer, receive, and reproduce Manifest information. Also, according to the present invention, a server can perform an efficient scheduling.</p>
<p id="p-0129" num="0157">While the invention has been shown and described with reference to certain embodiments thereof, it will be understood by those skilled in the art that various changes in form and details may be made therein without departing from the spirit and scope of the invention as defined by the appended claims and their equivalents.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method of transmitting a file in a server, the method comprising:
<claim-text>generating a single file including a manifest box, a moov box, and one or more segments, wherein each of the one or more segments comprises a media data box, and wherein the manifest box comprises manifest information for the one or more segments; and</claim-text>
<claim-text>transmitting the generated single file to a terminal,</claim-text>
<claim-text>wherein the manifest information comprises information on a next manifest offset and a next manifest size.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the manifest information comprises:
<claim-text>offset information and size information of the one or more segments.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the single file comprises:
<claim-text>some segments among segments to be transmitted and a file separate from the single file which includes the remaining segments among the one or more segments to be transmitted.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein locations of the some segments are indicated by offset information and size information of the some segments, and locations of the remaining segments are indicated by a SegmentURL attribute.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the manifest box is stored in the moov box.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the single file further comprises:
<claim-text>a meta data box and the manifest box is stored in the meta data box.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. An apparatus for generating a file in a server, the apparatus comprising:
<claim-text>a generator to generate a single file including a manifest box, a moov box, and one or more segments, wherein each of the one or more segments comprises a media data box, and wherein the manifest box comprises manifest information for the one or more segments; and</claim-text>
<claim-text>a transmitter to transmit the generated single file to a terminal,</claim-text>
<claim-text>wherein the manifest information comprises information on a next manifest offset and a next manifest size.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The apparatus of <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the manifest information comprises:
<claim-text>offset information and size information of the one or more segments.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The apparatus of <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the single file comprises:
<claim-text>some segments among segments to be transmitted and a file separate from the single file includes the remaining segments among the one or more segments to be transmitted.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The apparatus of <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein locations of the some segments are indicated by offset information and size information of the some segments, and locations of the remaining segments are indicated by SegmentURL attribute.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The apparatus of <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the manifest box is stored in the moov box.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The apparatus of <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the single file further comprises a meta data box and the manifest box is stored in the meta data box.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. A method of reproducing a file in a terminal, the method comprising:
<claim-text>receiving a single file including a manifest box, a moov box, and one or more segments from a server;</claim-text>
<claim-text>extracting the manifest box, the moov box, and the one or more segments from the single file;</claim-text>
<claim-text>analyzing the manifest box, the moov box, and the one or more segments, wherein the manifest box comprises manifest information for the one or more segments; and</claim-text>
<claim-text>performing decoding and reproducing based on a result of analyzing of the manifest box, the moov box, and the one or more segments,</claim-text>
<claim-text>wherein the manifest information comprises information on a next manifest offset and a next manifest size.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The method of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the manifest information comprises:
<claim-text>offset information and size information of the segment.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The method of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the single file comprises:
<claim-text>some segments among segments to be transmitted and a file separate from the single file comprises the remaining segments among the one or more segments to be transmitted.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The method of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein locations of the some segments are indicated by offset information and size information of the some segments, and locations of the remaining segments are indicated by SegmentURL attribute.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The method of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the manifest box is stored in the moov box.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The method of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the single file further comprises a meta data box and the manifest box is stored in the meta data box.</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. An apparatus for reproducing a file in a terminal, the apparatus comprising:
<claim-text>a parser to receive a single file including a manifest box, a moov box, and one or more segments from a server, extract the manifest box, the moov box, and the one or more segments from the single file, and analyze the manifest box, the moov box, and the one or more segments, wherein the manifest box comprises manifest information for the one or more segments; and</claim-text>
<claim-text>a decoder to perform decoding based on a result of analyzing of the manifest box, the moov box, and the one or more segments,</claim-text>
<claim-text>wherein the manifest information comprises information on a next manifest offset and a next manifest size.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The apparatus of <claim-ref idref="CLM-00019">claim 19</claim-ref>, wherein the manifest information comprises:
<claim-text>offset information and size information of the segment.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. The apparatus of <claim-ref idref="CLM-00019">claim 19</claim-ref>, wherein the single file comprises:
<claim-text>some segments among segments to be transmitted and a file separate from the single file comprises the remaining segments among the one or more segments to be transmitted.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. The apparatus of <claim-ref idref="CLM-00021">claim 21</claim-ref>, wherein locations of the some segments are indicated by offset information and size information of the some segments, and locations of the remaining segments are indicated by SegmentURL attribute.</claim-text>
</claim>
<claim id="CLM-00023" num="00023">
<claim-text>23. The apparatus of <claim-ref idref="CLM-00019">claim 19</claim-ref>, wherein the manifest box is stored in the moov box.</claim-text>
</claim>
<claim id="CLM-00024" num="00024">
<claim-text>24. The apparatus of <claim-ref idref="CLM-00019">claim 19</claim-ref>, wherein the single file further comprises a meta data box and the manifest box is stored in the meta data box.</claim-text>
</claim>
<claim id="CLM-00025" num="00025">
<claim-text>25. A non-transitory recording medium capable of storing a data structure, the recording medium comprising:
<claim-text>a manifest box;</claim-text>
<claim-text>a moov box; and</claim-text>
<claim-text>one or more segments,</claim-text>
<claim-text>wherein the manifest box comprises manifest information for the one or more segments,</claim-text>
<claim-text>wherein each of the one or more segments comprises a media data box,</claim-text>
<claim-text>wherein the manifest box, the moov box, and the one or more segments are transmitted in a single file, and</claim-text>
<claim-text>wherein the manifest information comprises information on a next manifest offset and a next manifest size.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00026" num="00026">
<claim-text>26. The recording medium of <claim-ref idref="CLM-00025">claim 25</claim-ref>, wherein the manifest information comprises:
<claim-text>offset information and size information of the one or more segments.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00027" num="00027">
<claim-text>27. The recording medium of <claim-ref idref="CLM-00025">claim 25</claim-ref>, wherein the single file comprises:
<claim-text>some segments among all segments and a file separate from the single file comprises the remaining segments among the all segments.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00028" num="00028">
<claim-text>28. The recording medium of <claim-ref idref="CLM-00027">claim 27</claim-ref>, wherein locations of the some segments are indicated by offset information and size information of the some segments, and locations of the remaining segments are indicated by SegmentURL attribute.</claim-text>
</claim>
<claim id="CLM-00029" num="00029">
<claim-text>29. The recording medium of <claim-ref idref="CLM-00025">claim 25</claim-ref>, wherein the manifest box is stored in the moov box.</claim-text>
</claim>
<claim id="CLM-00030" num="00030">
<claim-text>30. The recording medium of <claim-ref idref="CLM-00025">claim 25</claim-ref>, wherein the single file further comprises a meta data box and the manifest box is stored in the meta data box. </claim-text>
</claim>
</claims>
</us-patent-grant>
