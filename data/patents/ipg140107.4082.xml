<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625151-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625151</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12911606</doc-number>
<date>20101025</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2009-250830</doc-number>
<date>20091030</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>489</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>K</subclass>
<main-group>15</main-group>
<subgroup>02</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>358  15</main-classification>
<further-classification>358  12</further-classification>
<further-classification>347  8</further-classification>
<further-classification>400582</further-classification>
</classification-national>
<invention-title id="d2e71">Movement detection apparatus and recording apparatus</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>8319806</doc-number>
<kind>B2</kind>
<name>Mikami</name>
<date>20121100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>347110</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>2005/0053408</doc-number>
<kind>A1</kind>
<name>Otsuka</name>
<date>20050300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2006/0119633</doc-number>
<kind>A1</kind>
<name>Hsu</name>
<date>20060600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2008/0030536</doc-number>
<kind>A1</kind>
<name>Furukawa</name>
<date>20080200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2009/0058895</doc-number>
<kind>A1</kind>
<name>Kida</name>
<date>20090300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>347  8</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2010/0254744</doc-number>
<kind>A1</kind>
<name>Taniguchi</name>
<date>20101000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>400582</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2011/0027404</doc-number>
<kind>A1</kind>
<name>Siddiqui et al.</name>
<date>20110200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>425377</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2011/0102814</doc-number>
<kind>A1</kind>
<name>Okamura</name>
<date>20110500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358  15</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2011/0102815</doc-number>
<kind>A1</kind>
<name>Watanabe</name>
<date>20110500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358  15</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>CN</country>
<doc-number>1721198</doc-number>
<kind>A</kind>
<date>20060100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>CN</country>
<doc-number>101105667</doc-number>
<kind>A</kind>
<date>20080100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>CN</country>
<doc-number>101403874</doc-number>
<kind>A</kind>
<date>20090400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>EP</country>
<doc-number>1647411</doc-number>
<kind>A2</kind>
<date>20060400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>EP</country>
<doc-number>2138317</doc-number>
<kind>A2</kind>
<date>20091200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>GB</country>
<doc-number>2334517</doc-number>
<kind>A</kind>
<date>19990800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00016">
<document-id>
<country>JP</country>
<doc-number>9-81340</doc-number>
<kind>A</kind>
<date>19970300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00017">
<document-id>
<country>JP</country>
<doc-number>9-81340</doc-number>
<kind>C</kind>
<date>19970300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00018">
<document-id>
<country>JP</country>
<doc-number>2001-163477A</doc-number>
<kind>A</kind>
<date>20010600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00019">
<document-id>
<country>JP</country>
<doc-number>2004-015965A</doc-number>
<kind>A</kind>
<date>20040100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00020">
<document-id>
<country>JP</country>
<doc-number>2007-217174</doc-number>
<kind>A</kind>
<date>20070800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00021">
<document-id>
<country>JP</country>
<doc-number>2007-217176</doc-number>
<kind>A</kind>
<date>20070800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>18</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>None</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>19</number-of-drawing-sheets>
<number-of-figures>19</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20110102816</doc-number>
<kind>A1</kind>
<date>20110505</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Hayashi</last-name>
<first-name>Masashi</first-name>
<address>
<city>Kawasaki</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Nishikori</last-name>
<first-name>Hitoshi</first-name>
<address>
<city>Inagi</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Hayashi</last-name>
<first-name>Masashi</first-name>
<address>
<city>Kawasaki</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Nishikori</last-name>
<first-name>Hitoshi</first-name>
<address>
<city>Inagi</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Canon U.S.A., Inc. IP Division</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Canon Kabushiki Kaisha</orgname>
<role>03</role>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Kau</last-name>
<first-name>Steven</first-name>
<department>2671</department>
</primary-examiner>
<assistant-examiner>
<last-name>Thomas</last-name>
<first-name>Ashish K</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A conveyance mechanism includes a conveyance belt having a detection pattern containing a plurality of isolated patterns. The shape of the plurality of isolated patterns contained in the detection pattern, the size of a template area from which a template pattern is to be extracted, and the size of a seek area are associated with each other so that a part of the detection pattern contained in the template pattern extracted from first image data invariably serves as a unique pattern in the seek area of second image data.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="105.41mm" wi="112.35mm" file="US08625151-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="188.89mm" wi="141.82mm" orientation="landscape" file="US08625151-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="230.04mm" wi="161.88mm" orientation="landscape" file="US08625151-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="122.26mm" wi="92.71mm" file="US08625151-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="188.89mm" wi="127.76mm" file="US08625151-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="249.09mm" wi="150.88mm" file="US08625151-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="132.84mm" wi="133.27mm" file="US08625151-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="106.76mm" wi="102.70mm" file="US08625151-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="98.72mm" wi="142.83mm" file="US08625151-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="238.51mm" wi="161.37mm" orientation="landscape" file="US08625151-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="114.72mm" wi="160.87mm" file="US08625151-20140107-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="239.01mm" wi="160.36mm" orientation="landscape" file="US08625151-20140107-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="112.78mm" wi="152.32mm" file="US08625151-20140107-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00013" num="00013">
<img id="EMI-D00013" he="98.72mm" wi="156.38mm" file="US08625151-20140107-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00014" num="00014">
<img id="EMI-D00014" he="131.32mm" wi="146.30mm" file="US08625151-20140107-D00014.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00015" num="00015">
<img id="EMI-D00015" he="235.03mm" wi="99.74mm" orientation="landscape" file="US08625151-20140107-D00015.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00016" num="00016">
<img id="EMI-D00016" he="237.57mm" wi="110.24mm" orientation="landscape" file="US08625151-20140107-D00016.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00017" num="00017">
<img id="EMI-D00017" he="239.52mm" wi="116.25mm" orientation="landscape" file="US08625151-20140107-D00017.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00018" num="00018">
<img id="EMI-D00018" he="236.56mm" wi="105.75mm" orientation="landscape" file="US08625151-20140107-D00018.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00019" num="00019">
<img id="EMI-D00019" he="238.00mm" wi="110.74mm" orientation="landscape" file="US08625151-20140107-D00019.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0002" num="0001">1. Field of the Invention</p>
<p id="p-0003" num="0002">The present invention relates to a technique for detecting the movement of an object through image processing, and to a technical field of a recording apparatus.</p>
<p id="p-0004" num="0003">2. Description of the Related Art</p>
<p id="p-0005" num="0004">When performing printing on a medium such as a print sheet while it is being conveyed, a low conveyance precision causes an uneven density of a halftone image or a magnification error, resulting in degraded quality of a printed image. Therefore, although recording apparatuses employ high-precision components and carry an accurate conveyance mechanism, there is a strong demand for higher print quality and higher conveyance precision. At the same time, there is also a strong demand for cost reduction. The achievement of both higher precision and lower cost is demanded.</p>
<p id="p-0006" num="0005">To meet this demand, an attempt is made to detect the movement of a medium with high precision to achieve stable conveyance through feedback control. A method used in this attempt, also referred to as direct sensing, images the surface of the medium to detect through image processing the movement of the medium being conveyed.</p>
<p id="p-0007" num="0006">Japanese Patent Application Laid-Open No. 2007-217176 discusses a method for detecting the movement of the medium. The method in Japanese Patent Application Laid-Open No. 2007-217176 images the surface of a moving medium a plurality of times in a time sequential manner by using an image sensor, and compares acquired images through pattern matching to detect an amount of movement of the medium. Hereinafter, a method for directly detecting the surface of an object to detect its moving state is referred to as direct sensing, and a detector employing this method is referred to as a direct sensor.</p>
<p id="p-0008" num="0007">With direct sensing, a template pattern is extracted from first image data, and an area having a large correlation with the template pattern is sought among areas in second image data through image processing. In this process, a pattern which is identical or very similar to a certain template pattern may exist at a plurality of positions within a seek range. In this case, if a wrong position among the plurality of positions is determined in pattern matching, a detection error results. Therefore, for high-precision direct sensing, a template pattern becomes a unique pattern within the seek range.</p>
<heading id="h-0002" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0009" num="0008">According to an aspect of the present invention, an apparatus includes a conveyance mechanism including a conveyance belt having detection patterns containing a plurality of isolated patterns and configured to convey a medium in a predetermined direction, a sensor configured to capture an image of an area on the conveyance belt containing at least a part of the detection patterns to acquire first and second data, and a processing unit configured to extract a template pattern containing a part of the detection patterns from the first data, and seek an area having a correlation with the template pattern within a seek area of the second data to obtain a moving state of the conveyance belt, wherein form of the plurality of isolated patterns contained in the detection patterns, size of the template pattern, and size of the seek area are associated with each other so that the part of the detection patterns contained in the template pattern serves as a unique pattern in the seek area.</p>
<p id="p-0010" num="0009">According to the present invention, direct sensing reliably enables detecting a moving state of an object with high precision.</p>
<p id="p-0011" num="0010">Further features and aspects of the present invention will become apparent from the following detailed description of exemplary embodiments with reference to the attached drawings.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0012" num="0011">The accompanying drawings, which are incorporated in and constitute a part of the specification, illustrate exemplary embodiments, features, and aspects of the invention and, together with the description, serve to explain the principles of the invention.</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 1</figref> is a sectional view of a printer of an exemplary embodiment of the present invention.</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 2</figref> is a system block diagram of the printer.</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 3</figref> illustrates a configuration of a direct sensor.</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 4</figref> is a flow chart illustrating processing of medium feeding, recording, and discharging.</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 5</figref> is a flow chart illustrating processing of medium conveyance.</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 6</figref> illustrates processing for obtaining an amount of movement of a medium through pattern matching.</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 7</figref> is a schematic view of the inside of a conveyance belt.</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 8</figref> is an enlarged view of a detection pattern marked on the conveyance belt.</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 9</figref> illustrates an exemplary unit pattern containing isolated patterns differentiated in size.</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 10</figref> illustrates a phenomenon of image extension caused by movement.</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 11</figref> illustrates first and second image data when an image extension occurs.</p>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 12</figref> is a graph illustrating a relation between the amount of image extension and the pattern detection accuracy.</p>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. 13</figref> illustrates a phenomenon of image interference between adjacent isolated patterns.</p>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. 14</figref> is a graph illustrating a relation between the amount of image extension and the pattern detection accuracy.</p>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 15</figref> illustrates a defocusing state of a captured image of isolated patterns.</p>
<p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. 16</figref> illustrates an exemplary unit pattern containing isolated patterns differentiated in shape.</p>
<p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. 17</figref> illustrates an exemplary unit pattern containing isolated patterns differentiated in contrast, density, or color.</p>
<p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. 18</figref> illustrates an exemplary unit pattern containing isolated patterns with arrangement differentiated in a moving direction.</p>
<p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. 19</figref> illustrates an exemplary unit pattern containing isolated patterns with arrangement differentiated in a direction perpendicular to the moving direction.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">DESCRIPTION OF THE EMBODIMENTS</heading>
<p id="p-0032" num="0031">Various exemplary embodiments, features, and aspects of the invention will be described in detail below with reference to the drawings. However, the components described in the following exemplary embodiments are illustrative and are not meant to limit the scope of the present invention.</p>
<p id="p-0033" num="0032">The scope of the present invention widely ranges from a printer to a field of movement detection requiring high-precision detection of the movement of an object. For example, the present invention is applicable to printers, scanners, and other devices used in technical, industrial, and physical distribution fields for conveying an object and performing inspection, reading, processing, marking, and other various pieces of processing to the object. Further, the present invention is applicable to diverse types of printers including ink jet printers, electrophotographic printers, thermal printers, and dot impact printers. In the present specification, a medium means a sheet-like or plate-shaped medium such as paper, a plastic sheet, a film, glass, ceramics, resin, and so on. Further, in the present specification, the upstream and downstream sides mean the upstream and downstream sides of the sheet movement direction at the time of image recording on a sheet.</p>
<p id="p-0034" num="0033">An embodiment of an ink jet printer which is an exemplary recording apparatus will be described below. The printer according to the present exemplary embodiment is termed a serial printer which alternately performs main scanning and sub scanning to form a two-dimensional image. With main scanning, the printer reciprocally moves a print head. With sub scanning, the printer conveys a medium in a stepwise feeding by a predetermined amount. The present invention is applicable not only to a serial printer but also to a line printer having a full line print head covering the print width which moves a medium with respect to the fixed print head to form a two-dimensional image.</p>
<p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. 1</figref> is a sectional view illustrating a configuration of a part of a printer. The printer includes a conveyance mechanism for moving the medium in the sub scanning direction (first direction or a predetermined direction) by a belt conveyance system, and a recording unit configured to perform recording on the moving medium by using a print head. The printer further includes a rotary encoder <b>133</b> configured to indirectly detect a moving state of an object, and a direct sensor <b>134</b> configured to directly detect the moving state of the object.</p>
<p id="p-0036" num="0035">The conveyance mechanism includes a first roller <b>202</b> and a second roller <b>203</b> which are rotating members, and a wide conveyance belt <b>205</b> applied between the first and second rollers by a predetermined tension. A medium <b>206</b> adhering to the surface of the conveyance belt <b>205</b> by electrostatic attraction or adhesion is conveyed by the movement of the conveyance belt <b>205</b>. The rotational force of the conveyance motor <b>171</b>, a driving source for sub scanning, is transmitted to the first roller <b>202</b>, i.e., a drive roller, via the drive belt <b>172</b> to rotate the first roller <b>202</b>. The first roller <b>202</b> and the second roller <b>203</b> rotate in synchronization with each other via the conveyance belt <b>205</b>. The conveyance mechanism further includes a feed roller pair <b>209</b> for separating one medium from media <b>207</b> loaded on a tray <b>208</b> and feeding it onto the conveyance belt <b>205</b>, and a feed motor <b>161</b> (not illustrated in <figref idref="DRAWINGS">FIG. 1</figref>) for driving the feed roller pair <b>209</b>. A paper end sensor <b>132</b> disposed on the downstream side of the feed motor <b>161</b> detects a leading edge or trailing edge of a medium to acquire a timing of medium conveyance.</p>
<p id="p-0037" num="0036">The rotary encoder (rotational angle sensor) <b>133</b> is used to detect a rotating state of the first roller <b>202</b> to indirectly acquire the moving state of the conveyance belt <b>205</b>. The rotary encoder <b>133</b> including a photograph interrupter optically reads slits circumferentially arranged at equal intervals on a code wheel <b>204</b> coaxially attached to the first roller <b>202</b> to generate a pulse signal.</p>
<p id="p-0038" num="0037">The direct sensor <b>134</b> is disposed below the conveyance belt <b>205</b> (on the rear surface side of the medium <b>206</b>, i.e., the side opposite to the side on which the medium <b>206</b> is loaded). The direct sensor <b>134</b> includes an image sensor (imaging device) for capturing an image of an area containing markers on the surface of the conveyance belt <b>205</b>. The direct sensor <b>134</b> directly detects a moving state of the conveyance belt <b>205</b> through image processing to be described below. Since the medium <b>206</b> firmly sticks to the surface of the conveyance belt <b>205</b>, a variation in the relative position by the slip between the surface of the conveyance belt <b>205</b> and the medium <b>206</b> is vanishingly small. Therefore, it is assumed that the direct sensor <b>134</b> can directly detect a moving state of the medium <b>206</b>. The function of direct sensor <b>134</b> is not limited to capturing an image of the rear surface of the conveyance belt <b>205</b>, but may be configured to capture an image of an area on the front surface of the conveyance belt <b>205</b> not covered by the medium <b>206</b>. Further, the direct sensor <b>134</b> may capture an image of the surface of medium <b>206</b> instead of the surface of the conveyance belt <b>205</b>.</p>
<p id="p-0039" num="0038">The recording unit includes a carriage <b>212</b> reciprocally moving in the main scanning direction, a print head <b>213</b>, and an ink tank <b>211</b>, the latter two being mounted on the carriage <b>212</b>. The carriage <b>212</b> reciprocally moves in the main scanning direction (second direction) by the driving force of a main scanning motor <b>151</b> (not illustrated in <figref idref="DRAWINGS">FIG. 1</figref>). Nozzles of the print head <b>213</b> discharge ink in synchronization with the movement of the carriage <b>212</b> to perform printing on the medium <b>206</b>. The print head <b>213</b> and the ink tank <b>211</b> may be detachably attached to the carriage <b>212</b> either integrally as one unit or individually as separate components. The print head <b>213</b> discharges ink through the ink jet method. The ink discharge method may be based on a heater element, a piezo-electric element, an electrostatic element, an MEMS element, and so on.</p>
<p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. 2</figref> is a system block diagram of the printer. A controller <b>100</b> includes a central processing unit (CPU) <b>101</b>, a read-only memory (ROM) <b>102</b>, and a random access memory (RAM) <b>103</b>. The controller <b>100</b> serves also as a control unit and a processing unit to perform various control of the entire printer as well as image processing. An information processing apparatus <b>110</b> is an apparatus which supplies image data to be recorded on a medium, such as a computer, a digital camera, a TV, and a mobile phone. The information processing apparatus <b>110</b> is connected with the controller <b>100</b> via an interface <b>111</b>. An operation unit <b>120</b>, which is a user interface for an operator, includes various input switches <b>121</b> including a power switch and a display unit <b>122</b>. A sensor unit <b>130</b> includes various sensors for detecting various states of the printer. A home position sensor <b>131</b> detects the home position of the carriage <b>212</b> reciprocally moving. The sensor unit <b>130</b> includes the above-mentioned paper end sensor <b>132</b>, the rotary encoder <b>133</b>, and the direct sensor <b>134</b>. Each of these sensors is connected to the controller <b>100</b>. Based on commands of the controller <b>100</b>, the print head and various motors for the printer are driven via respective drivers. A head driver <b>140</b> drives the print head <b>213</b> according to record data. A motor driver <b>150</b> drives the main scanning motor <b>151</b>. A motor driver <b>160</b> drives the feed motor <b>161</b>. A motor driver <b>170</b> drives the conveyance motor <b>171</b> for sub scanning.</p>
<p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. 3</figref> illustrates a configuration of the direct sensor <b>134</b> for performing direct sensing. The direct sensor <b>134</b> is a single sensor unit which includes a light-emitting unit including a light source <b>301</b> such as a light-emitting diode (LED), an organic light-emitting diode (OLED), and a semiconductor laser; a light receiving unit including an image sensor <b>302</b> and an imaging optical system <b>303</b> such as a refractive-index distribution lens array; and a circuit unit <b>304</b> such as a drive circuit and an A/D converter circuit. The light source <b>301</b> illuminates a part of the rear surface of the conveyance belt <b>205</b> which is an image capture target. The image sensor <b>302</b> images via the imaging optical system <b>303</b> a predetermined imaging area illuminated by the light source <b>301</b>. The image sensor <b>302</b> is a two-dimensional area sensor such as a CCD image sensor and a CMOS image sensor, or a line sensor. An analog signal from the image sensor <b>302</b> is converted to digital form and captured as digital image data. The image sensor <b>302</b> is used to image the surface of an object (conveyance belt <b>205</b>) and acquire a plurality of pieces of image data at different timings (these pieces of image data acquired in succession are referred to as first and second image data). As described below, by extracting a template pattern from the first image data, and seeking an area in the second image data having a large correlation with the extracted template pattern through image processing, the moving state of the object can be acquired. The image processing may be performed by the controller <b>100</b> or a processing unit included in the unit of the direct sensor <b>134</b>.</p>
<p id="p-0042" num="0041"><figref idref="DRAWINGS">FIG. 4</figref> is a flow chart illustrating processing of medium feeding, recording, and discharging. This processing is performed based on commands of the controller <b>100</b>. In step S<b>501</b>, the processing drives the feed motor <b>161</b> to rotate the feed roller pair <b>209</b> to separate one medium from the medium <b>207</b> on the tray <b>208</b> and feed it along the conveyance path. When the paper end sensor <b>132</b> detects the leading edge of the medium <b>206</b> being fed, the processing performs the medium positioning operation based on the detection timing to convey the medium to a predetermined recording start position.</p>
<p id="p-0043" num="0042">In step S<b>502</b>, the processing conveys the medium in a stepwise feeding by a predetermined amount by using the conveyance belt <b>205</b>. The predetermined amount equals the length in the sub scanning direction in recording of one band (one main scanning of the print head). For example, when performing multipass recording in a two-pass manner while causing each stepwise feeding by the length of a half of the nozzle array width in the sub scanning direction of the print head <b>213</b>, the predetermined amount equals the length of a half of the nozzle array width.</p>
<p id="p-0044" num="0043">In step S<b>503</b>, the processing performs recording for one band while moving the print head <b>213</b> in the main scanning direction by the carriage <b>212</b>. In step S<b>504</b>, the processing determines whether recording of all record data is completed. When the processing determines that recording is not completed (NO in step S<b>504</b>), the processing returns to step S<b>502</b> to repeat recording in a stepwise feeding (sub scanning) and one band (one main scanning). When the processing determines that recording is completed (YES in step S<b>504</b>), the processing proceeds to step S<b>505</b>. In step S<b>505</b>, the processing discharges the medium <b>206</b> from the recording unit, thus forming a two-dimensional image on the medium <b>206</b>.</p>
<p id="p-0045" num="0044">Processing of the stepwise feeding in step S<b>502</b> will be described in detail below with reference to the flow chart illustrated in <figref idref="DRAWINGS">FIG. 5</figref>. In step S<b>601</b>, an image of an area containing markers of the conveyance belt <b>205</b> is captured by using the image sensor of the direct sensor <b>134</b>. The acquired image data denotes the position of the conveyance belt <b>205</b> before starting movement and is stored in the RAM <b>103</b>. In step S<b>602</b>, while monitoring the rotating state of the roller <b>202</b> by the rotary encoder <b>133</b>, the processing drives the conveyance motor <b>171</b> to move the conveyance belt <b>205</b>, in other words, starts conveyance control for the medium <b>206</b>. The controller <b>100</b> performs servo control so that the medium <b>206</b> is conveyed by a target conveyance amount. The processing executes step S<b>603</b> and subsequent steps in parallel with the medium conveyance control using the rotary encoder <b>133</b>.</p>
<p id="p-0046" num="0045">In step S<b>603</b>, an image of the conveyance belt <b>205</b> is captured by using the direct sensor <b>134</b>. Specifically, the processing starts imaging the conveyance belt <b>205</b> when the medium is assumed to have been conveyed by a predetermined amount based on the target amount of medium conveyance (hereinafter referred to as target conveyance amount) to perform recording for one band, the image sensor width in the first direction, and the medium movement speed. In this example, a specific slit on the code wheel <b>204</b> to be detected by the rotary encoder <b>133</b> when the medium has been conveyed by a predetermined conveyance amount is specified, and the processing starts imaging the conveyance belt <b>205</b> when the rotary encoder <b>133</b> detects the slit. Step S<b>603</b> will be described in detail below.</p>
<p id="p-0047" num="0046">In step S<b>604</b>, through image processing, the processing detects the distance over which the conveyance belt <b>205</b> has moved between imaging timing of the second image data in step S<b>603</b> and that of the first image data in the previous step. Processing for detecting an amount of movement will be described below. An image of the conveyance belt <b>205</b> is captured the number of times predetermined for the target conveyance amount at predetermined intervals. In step S<b>605</b>, the processing determines whether the image of the conveyance belt <b>205</b> has been captured the predetermined number of times. When the image of the conveyance belt <b>205</b> has not been captured the predetermined number of times (NO in step S<b>605</b>), the processing returns to step S<b>603</b> to repeat processing until imaging is completed. The processing repeats the processing the predetermined number of times while accumulating a conveyance amount each time a conveyance amount is detected, thus obtaining a conveyance amount for one band from the timing of first imaging in step S<b>601</b>. In step S<b>606</b>, the processing calculates a difference between a conveyance amount acquired by the direct sensor <b>134</b> and a conveyance amount acquired by the rotary encoder <b>133</b> for one band. Since the rotary encoder <b>133</b> indirectly detects a conveyance amount while the direct sensor <b>134</b> directly detects a conveyance amount, the detection precision of the former is lower than that of the latter. Therefore, the above-mentioned difference can be recognized as a detection error of the rotary encoder <b>133</b>.</p>
<p id="p-0048" num="0047">In step S<b>607</b>, the processing corrects medium conveyance control by the detection error amount of the rotary encoder obtained in step S<b>606</b>. There are two different correction methods: a method for increasing or decreasing the current position information for medium conveyance control by the detection error, and a method for increasing or decreasing the target conveyance amount by the detection error. Either method can be employed. When the processing has accurately conveyed the medium <b>206</b> by the target conveyance amount through feedback control, the conveyance operation for one band is completed.</p>
<p id="p-0049" num="0048"><figref idref="DRAWINGS">FIG. 6</figref> illustrates in detail direct sensing in step S<b>604</b>. <figref idref="DRAWINGS">FIG. 7</figref> schematically illustrates first image data <b>700</b> and second image data <b>701</b> of the conveyance belt <b>205</b> acquired in imaging by the direct sensor <b>134</b>. A black dot pattern <b>702</b> (a portion having a luminance gradient) in the first image data <b>700</b> and the second image data <b>701</b> is an image of one of many markers applied to the conveyance belt <b>205</b> on a random basis or based on a predetermined rule. When the subject is a medium as is the case with the apparatus illustrated in <figref idref="DRAWINGS">FIG. 2</figref>, a microscopic pattern on the surface of the medium (for example, a paper fiber pattern) plays a similar role to the markers. The processing sets a template area at an upstream position in the first image data <b>700</b>, and extracts an image of this portion as a template pattern <b>703</b>. When the second image data <b>701</b> is acquired, the processing searches for a position (within the second image data <b>701</b>) of a pattern similar to the extracted template pattern <b>703</b>. Search is made by using a technique of pattern matching. Any one of known similarity determination algorithms including sum of squared difference (SSD), sum of absolute difference (SAD), and normalized cross-correlation (NCC) can be employed. In this example, a most similar pattern is located in an area <b>704</b>. The processing obtains a difference in the number of pixels of the image sensor (imaging device) in the sub scanning direction between the template pattern <b>703</b> in the first image data <b>700</b> and the area <b>704</b> in the second image data <b>701</b>. By multiplying the difference in the number of pixels by the distance corresponding to one pixel, the amount of movement (conveyance amount m) can be obtained.</p>
<p id="p-0050" num="0049"><figref idref="DRAWINGS">FIG. 7</figref> is a schematic view of the inside of the conveyance belt <b>205</b>, i.e., a part of an endless belt. An optically recognizable detection pattern <b>290</b> is marked in an area on the inner surface of the belt facing the image sensor. The detection pattern <b>290</b> is formed over the entire circumferential surface of the conveyance belt <b>205</b> along the moving direction (y direction). The detection pattern <b>290</b> is marked with at least any one of the following methods (1) to (6).
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0050">(1) Directly paint a coating material onto the conveyance belt.</li>
    <li id="ul0001-0002" num="0051">(2) Stick a patterned seal on the conveyance belt.</li>
    <li id="ul0001-0003" num="0052">(3) Form concave and convex portions on the surface of the conveyance belt.</li>
    <li id="ul0001-0004" num="0053">(4) Scrape the film surface of the conveyance belt.</li>
    <li id="ul0001-0005" num="0054">(5) Apply laser marking to the material of the conveyance belt.</li>
    <li id="ul0001-0006" num="0055">(6) Form a non-transparent pattern on the inner surface of a transparent conveyance belt.</li>
</ul>
</p>
<p id="p-0051" num="0056"><figref idref="DRAWINGS">FIG. 8</figref> is an enlarged view of a detection pattern <b>290</b> marked on the conveyance belt <b>205</b>. The detection pattern <b>290</b> is oblong along the moving direction (y direction). In one embodiment, the lateral size of the detection pattern <b>290</b> is equal to or larger than the imaging area of the image sensor, and is 2.000 mm in this example. The detection pattern <b>290</b> is formed by repetitively arranging a unit pattern over the entire circumferential surface of the conveyance belt <b>205</b>. The unit pattern has a predetermined unit length (one period) not less than the moving directional length of the imaging area to be imaged by the image sensor. In this example, the circumferential length of the conveyance belt <b>205</b> is 256 mm, and one unit is 12.800 mm which is 1/20 of the circumferential length of the conveyance belt <b>205</b>.</p>
<p id="p-0052" num="0057">Each unit pattern (one unit) forming the detection pattern <b>290</b> includes a plurality of isolated patterns arranged so that all of the five rules (first to fifth rules) described below are satisfied.</p>
<p id="p-0053" num="0058">The first rule is that one or more isolated patterns exist in the template area from which a template pattern is extracted. The size of the template area is associated with isolated patterns so that one or more isolated patterns are invariably contained in the template pattern extracted from the first image data <b>700</b>. To satisfy this condition, a moving directional interval between isolated patterns contained in a unit pattern is made smaller than the moving directional size of the template area.</p>
<p id="p-0054" num="0059">If the pitch of isolated patterns is much larger than the size of the template area, there may be a situation that the template area contains no isolated pattern and a blank template pattern is invariably acquired. There may be another situation that a template pattern containing only apart of one isolated pattern is acquired and a blank template pattern is acquired in other cases. Such a template pattern does not serve as a unique pattern in a seek area in which the second image data <b>701</b> is sought, and therefore may cause a detection error in pattern matching.</p>
<p id="p-0055" num="0060">The second rule is that each individual isolated pattern is given uniqueness with which each pattern is distinguishable from other ones. A method for giving uniqueness to each isolated pattern is to differentiate isolated patterns in at least any one of size, shape, contrast, density, color, and arrangement. If the seek area in the second image data contains a plurality of patterns identical or very similar to the template pattern, the template pattern does not serve as a unique pattern and therefore may cause a detection error in pattern matching.</p>
<p id="p-0056" num="0061"><figref idref="DRAWINGS">FIG. 9</figref> illustrates an exemplary unit pattern satisfying the above-mentioned first and second rules. Referring to <figref idref="DRAWINGS">FIG. 9</figref>, dashed lines <b>3109</b> illustrate a template area to be extracted as a template pattern in the first image data. The size of this template area is such that the template area can contain at least a part of any one isolated pattern. As the second rule, a plurality of isolated patterns contained in one unit is different in size. In one embodiment, to give uniqueness in size to each isolated pattern, the minimum size difference is equal to or larger than the pixel pitch of the image sensor. In this example, isolated patterns <b>3101</b>, <b>3102</b>, <b>3103</b>, and <b>3104</b> are 1.600 mm, 1.400 mm, 1.200 mm, and 1.000 mm in diameter, respectively. Differentiating isolated patterns in size in this way enables distinguishing each individual isolated pattern from other ones in terms of the size regardless of whether all or part of these isolated patterns are contained in the template pattern.</p>
<p id="p-0057" num="0062">The third rule is a condition related to the interval between adjacent isolated patterns based on the moving speed. The moving directional interval between adjacent isolated patterns is made larger than the moving distance of the conveyance belt <b>205</b> during an exposure time for one image capturing. In this example, the maximum moving speed of a speed range detectable with direct sensing is 400 mm/s, and the exposure time for one image capturing by the image sensor, i.e., exposure time for acquisition of one image, is 1 ms. Therefore, the maximum moving distance during the exposure time for one image capturing is 400 mm/s&#xd7;1 ms=400 &#x3bc;m. Therefore, the interval between any two adjacent isolated patterns is made larger than 400 &#x3bc;m. Referring to <figref idref="DRAWINGS">FIG. 9</figref>, intervals <b>3105</b>, <b>3106</b>, <b>3107</b>, and <b>3108</b> between isolated patterns are 1.600 mm, 1.800 mm, 2.000 mm, and 2.200 mm, respectively, which are sufficiently larger than 400 &#x3bc;m.</p>
<p id="p-0058" num="0063">A reason for the above will be described below. When imaging an object moving at high speed, acquired image data involves image extension in the moving direction as seen in defocusing by camera shake. A difference in moving speed at the time of imaging of the first and second image data may degrade the accuracy of pattern matching since the two pieces of image data are different in amount of image extension. Although with an exposure time sufficiently shorter than the moving speed, image extension can be restrained, an integrated amount of incident light decreases, which results in degradation of image contrast and an increase in image noise.</p>
<p id="p-0059" num="0064">Referring to <figref idref="DRAWINGS">FIG. 10</figref>, image data <b>3601</b> is obtained by imaging an isolated pattern (having a diameter of 160 &#x3bc;m) in a motionless state during a 1 ms exposure time by using an image sensor having a pixel pitch of 12 &#x3bc;m. On the other hand, image data <b>3602</b> is obtained by imaging the same isolated pattern while it is moving at a speed of 150 mm/s. <figref idref="DRAWINGS">FIG. 11</figref> illustrates states of first image data <b>4100</b> and second image data <b>4101</b>.</p>
<p id="p-0060" num="0065">Although an identical isolated pattern has been imaged, the image data <b>3602</b> has an oblong isolated pattern shape in the moving direction in comparison with the image data <b>3601</b>. Further, the image data <b>3602</b> has slightly defocused edge portions (having a moderate density transition) in comparison with the image data <b>3601</b>. The amount of extension is determined by the product of the moving speed and the exposure time. Therefore, a difference in moving speed at the time of first and second image data acquisitions results in different image shapes of the isolated pattern because of a difference in amount of image extension.</p>
<p id="p-0061" num="0066"><figref idref="DRAWINGS">FIG. 12</figref> is a graph illustrating a relation between the amount of image extension (&#x3bc;m) and the pattern detection accuracy (&#x3bc;m). <figref idref="DRAWINGS">FIG. 12</figref> demonstrates that the pattern detection accuracy decreases (the value of &#xb1;3&#x3c3; increases) with increasing amount of image extension. Therefore, when image extension occurs, an isolated pattern changes in shape, and the pattern detection accuracy in pattern matching decreases.</p>
<p id="p-0062" num="0067">Further, this phenomenon of image extension causes image interference between adjacent isolated patterns possibly resulting in degradation of pattern detection accuracy. A mechanism of image extension and a method for restraining image extension will be described below. Referring to <figref idref="DRAWINGS">FIG. 13</figref>, image data <b>3801</b> and <b>3802</b> denote two different isolated patterns having an interval between adjacent isolated patterns of 34 &#x3bc;m and 70 &#x3bc;m, respectively. <figref idref="DRAWINGS">FIG. 14</figref> is a graph illustrating change in pattern detection accuracy with respect to change in the amount of image extension. <figref idref="DRAWINGS">FIG. 14</figref> demonstrates that a difference in interval between adjacent isolated patterns causes a difference in amount of image extension with which the pattern detection accuracy rapidly decreases. This difference arises because image interference between adjacent isolated patterns by image extension is more likely to occur as an interval between adjacent isolated patterns becomes smaller. Image data <b>3803</b> in <figref idref="DRAWINGS">FIG. 13</figref> illustrates a state of image interference caused by image extension. When image interference occurs, the shape of the isolated pattern is largely deformed causing remarkable degradation in pattern detection accuracy. When an interval between adjacent isolated patterns is 34 &#x3bc;m, image interference occurs with less amount of image extension than when an interval therebetween is 70 &#x3bc;m. For this reason, a difference in tendency of accuracy degradation arises.</p>
<p id="p-0063" num="0068">To restrain effects of image extension and image interference, the interval, in a moving direction between adjacent isolated patterns, is made larger than the moving distance of the conveyance belt during the exposure time for one image capturing by the image sensor.</p>
<p id="p-0064" num="0069">The fourth rule is a condition related to the interval between adjacent isolated patterns based on the characteristics of the imaging optical system <b>303</b> included in the direct sensor.</p>
<p id="p-0065" num="0070">The above-mentioned third rule pays attention to image interference between isolated patterns. One of causes of image interference between isolated patterns is the aberration performance of the imaging optical system <b>303</b>. More specifically, inferior aberration performance of the imaging optical system <b>303</b> included in the direct sensor causes image defocusing and deformation of an image captured by the image sensor, which possibly results in the above-mentioned image interference.</p>
<p id="p-0066" num="0071"><figref idref="DRAWINGS">FIG. 15</figref> illustrates a defocusing state of a captured image of isolated patterns illustrated in <figref idref="DRAWINGS">FIG. 9</figref>. Each of defocused isolated patterns has a larger size and a lower contrast than a focused isolated pattern (white dashed lines). Therefore, since the interval between adjacent isolated patterns decreases, image interference is more likely to occur. To restrain this phenomenon, patterning with wider intervals is performed while predicting image extension and image deformation in consideration of the aberration performance of the imaging optical system <b>303</b>. In other words, the interval in the moving direction between adjacent isolated patterns is maintained so that image interference between isolated patterns does not occur by the effect of aberration of the imaging optical system <b>303</b> when an image is captured by the image sensor.</p>
<p id="p-0067" num="0072">In one embodiment, the fifth rule is a condition related to the isolated pattern size. When a phenomenon of image extension occurs, the contrast (gray scale) of the image of the isolated pattern decreases. Each graph illustrated in <figref idref="DRAWINGS">FIG. 10</figref> denotes a density transition of isolated pattern for each of the image data <b>3601</b> and <b>3602</b>. The image data <b>3602</b> has a more moderate density transition at edge portions and a narrower range of the peak density value than the image data <b>3601</b>. This means that the peak density value further decreases when the amount of image extension exceeds the isolated pattern size. This phenomenon becomes noticeable when the isolated pattern size is small with respect to image extension. In image correlation processing for pattern matching, a decrease in contrast (decrease in the amount of pixel gradation information) causes a quantization error, which possibly results in degradation of pattern detection accuracy. To acquire sufficient gradation information even in the case of image extension, the isolated pattern size in the moving direction is larger than the amount of image extension. More specifically, the size of each of the isolated patterns in the moving direction is larger than the moving distance of the conveyance belt during the exposure time at the time of one image capturing. Further, the size is at least four times the size of one pixel of the image sensor.</p>
<p id="p-0068" num="0073"><figref idref="DRAWINGS">FIG. 16</figref> illustrates a modification of the second rule. In the modification, each isolated pattern is given uniqueness by being differentiated in shape. Referring to <figref idref="DRAWINGS">FIG. 16</figref>, dashed lines denote a template area to be extracted as a template pattern in the first image data. The size of this template area is such that it can contain at least a part of any one isolated pattern. A size (diameter) of each of four isolated patterns <b>3201</b>, <b>3202</b>, <b>3203</b>, and <b>3204</b> in the moving direction is identical and 1.600 mm, but is different in size (diameter) in a direction perpendicular to the moving direction (also referred to as other direction). In this example, isolated patterns <b>3201</b>, <b>3202</b>, <b>3203</b>, and <b>3204</b> are 1.600 mm, 1.400 mm, 1.200 mm, and 1,000 mm in size in the other direction, respectively. The isolated pattern <b>3201</b> is a true circle. The isolated patterns <b>3202</b>, <b>3203</b>, and <b>3204</b> are ellipses differentiated in shape, i.e., gradually collapsing in the moving direction. As a result, the shape of each isolated pattern contained in the template pattern is given uniqueness.</p>
<p id="p-0069" num="0074"><figref idref="DRAWINGS">FIG. 17</figref> illustrates another modification of the second rule. In the modification, each isolated pattern is given uniqueness by being differentiated in at least any one of contrast, density, and color. Each of four isolated patterns <b>3301</b>, <b>3302</b>, <b>3303</b>, and <b>3304</b> is identical in shape and size (a true circle having a diameter of 1.600 mm), but is different in contrast (gray scale), density, or color. As a result, each isolated pattern contained in the template pattern is given uniqueness by being differentiated in contrast, density, or color.</p>
<p id="p-0070" num="0075"><figref idref="DRAWINGS">FIG. 18</figref> illustrates still another modification of the second rule. In the modification, each isolated pattern is differentiated in interval in a moving direction. Each isolated pattern is identical in shape and size (a true circle having a diameter of 0.500 mm), but is different in interval to an adjacent isolated pattern (intervals <b>3401</b>, <b>3402</b>, <b>3403</b>, <b>3404</b>, <b>3405</b>, and <b>3406</b>). In this example, the intervals <b>3401</b>, <b>3402</b>, <b>3403</b>, <b>3404</b>, <b>3405</b>, and <b>3406</b> are 2.000 mm, 1.800 mm, 1.600 mm, 1.400 mm, and 1.000 mm, respectively. As a result, each isolated pattern contained in the template pattern is given uniqueness by being differentiated in interval to an adjacent isolated pattern.</p>
<p id="p-0071" num="0076"><figref idref="DRAWINGS">FIG. 19</figref> illustrates still another modification of the second rule. In the modification, each isolated pattern is differentiated both in interval in a moving direction and in interval in a direction perpendicular to the moving direction. Each isolated pattern is identical in shape and size (a true circle having a diameter of 1.000 mm) and in interval in the moving direction to an adjacent isolated pattern, but is different in interval to an adjacent isolated pattern in a direction perpendicular to the moving direction (intervals <b>3501</b>, <b>3502</b>, <b>3503</b>, <b>3504</b>, <b>3505</b>, <b>3506</b>, <b>3506</b>, and <b>3507</b>). In this example, the intervals <b>3501</b>, <b>3502</b>, <b>3503</b>, <b>3504</b>, <b>3505</b>, <b>3506</b>, <b>3506</b>, and <b>3507</b> are 0.200 mm, &#x2212;0.200 mm, 0.400 mm, &#x2212;0.400 mm, 0.600 mm, &#x2212;0.600 mm, and 0.800 mm, respectively. As a result, each isolated pattern contained in the template pattern is given uniqueness by being differentiated in interval to an adjacent isolated pattern in a direction perpendicular to the moving direction. Isolated patterns may be arranged based on the modifications of <figref idref="DRAWINGS">FIGS. 19 and 18</figref>, i.e., each isolated pattern may be differentiated both in interval in a moving direction and in interval in a direction perpendicular to the moving direction.</p>
<p id="p-0072" num="0077">Any combination of the above-mentioned modifications may be used. More specifically, each isolated pattern is given uniqueness with which each pattern is distinguishable from other ones, by being differentiated in at least anyone of size, shape, contrast, density, and color. Although the above descriptions have been made based on cases where each isolated pattern has a circular form, the isolated pattern shape is not limited thereto but may be any other shape, for example, a polygon (a rectangle or triangle) and any combination of polygons and circles.</p>
<p id="p-0073" num="0078">As mentioned above, the form of each isolated pattern in a detection pattern, the size of a template area from which the template pattern is to be extracted, and the size of the seek area are associated with each other so that a part of the detection pattern contained in the template pattern serves as a unique pattern in the seek area. If accuracy degradation is permissible to a certain extent, it is not necessary to satisfy all of the above-mentioned five rules. For example, only the first and second rules may be applied. Alternatively, at least any one of the third to fifth rules may be added to the first and second rules.</p>
<p id="p-0074" num="0079">According to the above-mentioned exemplary embodiments, pattern matching can be accurately determined and high-precision direct sensing can be achieved. Accordingly, media can be conveyed with high precision, thus a recording apparatus capable of high-quality image recording is achieved.</p>
<p id="p-0075" num="0080">While the present invention has been described with reference to exemplary embodiments, it is to be understood that the invention is not limited to the disclosed exemplary embodiments. The scope of the following claims is to be accorded the broadest interpretation so as to encompass all modifications, equivalent structures, and functions.</p>
<p id="p-0076" num="0081">This application claims priority from Japanese Patent Application No. 2009-250830 filed Oct. 30, 2009, which is hereby incorporated by reference herein in its entirety.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. An apparatus comprising:
<claim-text>a conveyance mechanism including a conveyance belt on which detection patterns containing a plurality of isolated patterns are intentionally marked, configured to convey a medium in a predetermined direction;</claim-text>
<claim-text>a sensor configured to capture an image of an area on the conveyance belt containing at least a part of the detection patterns to acquire first and second data; and</claim-text>
<claim-text>a processing unit configured to extract a template pattern containing a part of the detection patterns from the first data, and seek an area having a correlation with the template pattern within a seek area of the second data to obtain a moving state of the conveyance belt,
<claim-text>wherein state of the plurality of isolated patterns contained in the detection patterns, size of the template pattern, and size of the seek area are associated with each other so that the part of the detection patterns contained in the template pattern serves as a unique pattern in the seek area,</claim-text>
</claim-text>
<claim-text>wherein each of the isolated patterns is given uniqueness with which each pattern is distinguishable from other patterns, by a combination of or at least any one of size, shape, contrast, density, color, and interval arrangement.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>,
<claim-text>wherein each detection pattern is formed by repetitively arranging a unit pattern over an entire circumferential surface of the conveyance belt in the predetermined direction, and the unit pattern has a predetermined unit length not less than a length of the imaging area.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>,
<claim-text>wherein an interval in the predetermined direction between isolated patterns contained in the unit pattern is smaller than a size of the template area in the predetermined direction.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>,
<claim-text>wherein an interval in the predetermined direction between adjacent isolated patterns is larger than a moving distance of the conveyance belt during an exposure for one image capturing.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>,
<claim-text>wherein a size of each of the plurality of isolated patterns in the predetermined direction is larger than a maximum moving distance of the conveyance belt during an exposure for one image capturing.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>,
<claim-text>wherein an interval in the predetermined direction between adjacent isolated patterns is maintained such that image interference between isolated patterns does not occur due to an effect of aberration of an optical system when an image is captured.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>,
<claim-text>wherein the detection patterns are marked using a combination of or at least any one of the following methods: directly painting a coating material onto the conveyance belt; sticking a patterned seal to the conveyance belt; forming concave and convex portions on a surface of the conveyance belt; scraping a film surface of the conveyance belt; and applying laser marking to a material of the conveyance belt.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>a control unit configured to control a drive of the conveyance mechanism based on the moving state.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The apparatus according to <claim-ref idref="CLM-00008">claim 8</claim-ref>, further comprising:
<claim-text>an encoder configured to detect a rotating state of a drive roller for driving the conveyance belt,</claim-text>
<claim-text>wherein the control unit controls a drive of the drive roller based on the detected rotating state and the moving state.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. A recording apparatus comprising:
<claim-text>the apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>; and</claim-text>
<claim-text>a recording unit configured to perform recording on the medium.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. A method comprising:
<claim-text>conveying a medium in a predetermined direction by a conveyance mechanism including a conveyance belt on which detection patterns containing a plurality of isolated patterns are intentionally marked;</claim-text>
<claim-text>capturing an image of an area on the conveyance belt containing at least a part of the detection patterns to acquire first and second data; and</claim-text>
<claim-text>extracting a template pattern containing a part of the detection patterns from the first data, and seeking an area having a correlation with the template pattern within a seek area of the second data to obtain a moving state of the conveyance belt,
<claim-text>wherein state of the plurality of isolated patterns contained in the detection patterns, size of the template pattern, and size of the seek area are associated with each other so that the part of the detection patterns contained in the template pattern serves as a unique pattern in the seek area,</claim-text>
</claim-text>
<claim-text>wherein each of the isolated patterns is given uniqueness with which each pattern is distinguishable from other patterns, by a combination of or at least any one of size, shape, contrast, density, color, and interval arrangement.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The method according to <claim-ref idref="CLM-00011">claim 11</claim-ref>, further comprising forming each detection pattern by repetitively arranging a unit pattern over an entire circumferential surface of the conveyance belt in the predetermined direction, and the unit pattern has a predetermined unit length not less than a length of the imaging area.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The method according to <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein an interval in the predetermined direction between adjacent isolated patterns is larger than a moving distance of the conveyance belt during an exposure for one image capturing.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The method according to <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein a size of each of the plurality of isolated patterns in the predetermined direction is larger than a maximum moving distance of the conveyance belt during an exposure for one image capturing.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The method according to <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein an interval in the predetermined direction between adjacent isolated patterns is maintained such that image interference between isolated patterns does not occur due to an effect of aberration of an optical system when an image is captured.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The method according to <claim-ref idref="CLM-00011">claim 11</claim-ref>, further comprising marking the detection patterns by using a combination of or at least any one of the following methods: directly painting a coating material onto the conveyance belt; sticking a patterned seal to the conveyance belt; forming concave and convex portions on a surface of the conveyance belt; scraping a film surface of the conveyance belt; and applying laser marking to a material of the conveyance belt.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The method according to <claim-ref idref="CLM-00011">claim 11</claim-ref>, further comprising:
<claim-text>controlling a drive of the conveyance mechanism based on the moving state.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The method according to <claim-ref idref="CLM-00017">claim 17</claim-ref>, further comprising:
<claim-text>detecting a rotating state of a drive roller for driving the conveyance belt,</claim-text>
<claim-text>wherein the controlling a drive of the drive roller is based on the detected rotating state and the moving state.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
