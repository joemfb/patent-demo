<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625436-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625436</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13080552</doc-number>
<date>20110405</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<us-term-of-grant>
<us-term-extension>205</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>12</main-group>
<subgroup>26</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>370241</main-classification>
<further-classification>370310</further-classification>
<further-classification>370328</further-classification>
<further-classification>370338</further-classification>
</classification-national>
<invention-title id="d2e53">Displaying a wideband spectrum using a narrowband receiver</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6850735</doc-number>
<kind>B2</kind>
<name>Sugar et al.</name>
<date>20050200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455 6711</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>7079812</doc-number>
<kind>B2</kind>
<name>Miller et al.</name>
<date>20060700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455 631</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>7460837</doc-number>
<kind>B2</kind>
<name>Diener</name>
<date>20081200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455 677</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>7596181</doc-number>
<kind>B2</kind>
<name>Chang et al.</name>
<date>20090900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>375260</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>7653020</doc-number>
<kind>B2</kind>
<name>Roberts</name>
<date>20100100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370318</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>7715800</doc-number>
<kind>B2</kind>
<name>Sinha</name>
<date>20100500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455 6711</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>7929508</doc-number>
<kind>B1</kind>
<name>Yucek et al.</name>
<date>20110400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370338</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>8457023</doc-number>
<kind>B2</kind>
<name>Norlen et al.</name>
<date>20130600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370281</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2004/0023674</doc-number>
<kind>A1</kind>
<name>Miller</name>
<date>20040200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455462</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>2005/0227625</doc-number>
<kind>A1</kind>
<name>Diener</name>
<date>20051000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455 677</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>2008/0227401</doc-number>
<kind>A1</kind>
<name>Scherzer et al.</name>
<date>20080900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455 6713</main-classification></classification-national>
</us-citation>
</us-references-cited>
<number-of-claims>26</number-of-claims>
<us-exemplary-claim>14</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>None</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>1</number-of-drawing-sheets>
<number-of-figures>1</number-of-figures>
</figures>
<us-related-documents>
<us-provisional-application>
<document-id>
<country>US</country>
<doc-number>61321210</doc-number>
<date>20100406</date>
</document-id>
</us-provisional-application>
<us-provisional-application>
<document-id>
<country>US</country>
<doc-number>61321179</doc-number>
<date>20100406</date>
</document-id>
</us-provisional-application>
<us-provisional-application>
<document-id>
<country>US</country>
<doc-number>61321214</doc-number>
<date>20100406</date>
</document-id>
</us-provisional-application>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20110242984</doc-number>
<kind>A1</kind>
<date>20111006</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Ponnuswamy</last-name>
<first-name>Subburajan</first-name>
<address>
<city>Cupertino</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Ponnuswamy</last-name>
<first-name>Subburajan</first-name>
<address>
<city>Cupertino</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<last-name>Shah</last-name>
<first-name>Varun A.</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Aruba Networks, Inc.</orgname>
<role>02</role>
<address>
<city>Sunnyvale</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Jiang</last-name>
<first-name>Charles C</first-name>
<department>2472</department>
</primary-examiner>
<assistant-examiner>
<last-name>Ling</last-name>
<first-name>Amy</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">Methods of aggregating spectrum data captured from a narrowband radio to form a spectrum covering a much wider frequency band. Frequency data, such as FFT spectrum data captured from a narrowband receiver such as an IEEE 802.11 Wi-Fi receiver are combined to display representative real-time FFT, average FFT, and FFT duty cycle data of a wideband spectrum. Data is captured from narrow band radios such as access points, station monitors, or client devices on a wireless network. A wideband spectrum may be aggregated from data captured from one or from multiple devices. Data may be stored for later analysis and display.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="241.47mm" wi="177.46mm" file="US08625436-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="249.00mm" wi="187.37mm" file="US08625436-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">CROSS-REFERENCES TO RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This application claims the benefit of priority on U.S. Provisional Patent Application No. 61/321,210 filed Apr. 6, 2010 and entitled &#x201c;Automatic conversion of access points to spectrum monitors and hybrid mode access point&#x201d;, U.S. Provisional Patent Application No. 61/321,179 filed Apr. 6, 2010 and entitled &#x201c;Measuring and displaying wireless network quality&#x201d;, and U.S. Provisional Patent Application No. 61/321,214 filed Apr. 6, 2010 and entitled &#x201c;Displaying a Wideband spectrum using a narrowband receiver&#x201d;, all incorporated herein by reference.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0003" num="0002">The present invention relates to wireless digital networks, and in particular, to combining data from narrowband receivers to display representative wideband spectra.</p>
<p id="p-0004" num="0003">Wireless digital networks are becoming ubiquitous in enterprises, providing secure and cost-effective access to resources. Those networks usually have a plurality of access points (AP) deployed through the enterprise. WiFi networks operating in accordance with IEEE 802.11 standards are examples of such networks.</p>
<p id="p-0005" num="0004">Unfortunately, the frequencies used by these networks are shared. They are shared not only among the wireless networks themselves, but also with other non-network radiators. Non-network radiators, devices such as microwave ovens, wireless video streaming devices, cordless phones and the like, as well as other wireless networking devices, can cause interference with the operation of a network. Interfering devices can come and go, change their nature, and move around. As an example, replacing or adding a microwave oven in an employee lounge area can dramatically alter the interference present to a network.</p>
<p id="p-0006" num="0005">In searching out sources of interference to a wireless network, various pieces of test equipment such as spectrum analyzers are used. A professional spectrum analyzer has a calibrated receiver of exquisite sensitivity, and is able to display and measure signals over a wide range of frequencies and amplitudes. They also range in price from a few thousand dollars to tens of thousands of dollars, and require a skilled operator. This places them outside the realm of the normal wireless network engineer.</p>
<p id="p-0007" num="0006">What a digital wireless network does have is a plurality of narrowband radios, in the form of access points and wireless client devices. While these radios may not have the performance of a high quality spectrum analyzer, they are capable of collecting data on narrow portions of the spectrum used by the network.</p>
<p id="p-0008" num="0007">What is needed are tools to combine narrowband spectrum information to display representative wideband spectra.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0009" num="0008">The invention may be best understood by referring to the following description and accompanying drawings that are used to illustrate embodiments of the invention in which:</p>
<p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. 1</figref> shows devices in a wireless network.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0011" num="0010">Embodiments of the invention relate to methods of aggregating spectrum data captured from a narrowband radio to form a spectrum covering a much wider frequency band. Spectrum data such as Fast Fourier Transform (FFT) data captured from a narrowband receiver such as an IEEE 802.11 Wi-Fi receiver, are combined to display representative real-time FFT, average FFT, and FFT duty cycle data of a wideband spectrum.</p>
<p id="p-0012" num="0011">Spectrum data is captured by a narrowband radio operating on a particular channel with a given frequency and channel width. Such data from multiple channel scans, overlapping or nonoverlapping, are combined to form a representative spectrum covering a much wider frequency band.</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 1</figref> shows a network in which controller <b>100</b> communicates with a digital network such as the Internet <b>150</b>. Controller <b>100</b> also supports devices such as access points (AP) <b>200</b> and spectrum monitors (SM) <b>300</b>. Wireless client devices <b>400</b> connect to APs <b>200</b> and access services such as the Internet <b>150</b> through controller <b>100</b>.</p>
<p id="p-0014" num="0013">Also shown in <figref idref="DRAWINGS">FIG. 1</figref> is monitoring process <b>180</b> and display <b>190</b>. While shown as a separate device communicating with controller <b>100</b>, monitoring process <b>180</b> may operate within controller <b>100</b>, or on any suitable computing device attached to the network, such as a laptop or desktop computer.</p>
<p id="p-0015" num="0014">As is known to the art, controller <b>100</b>, APs <b>200</b>, and spectrum monitor <b>300</b> are purpose-made digital devices, each containing a processor, memory hierarchy, and input-output interfaces. In one embodiment of the invention, a MIPS-class processor such as those from Cavium or RMI is used. Other suitable processors, such as those from Intel or AMD may also be used. The memory hierarchy traditionally comprises fast read/write memory for holding processor data and instructions while operating, and nonvolatile memory such as EEPROM and/or Flash for storing files and system startup information. Wired interfaces are typically IEEE 802.3 Ethernet interfaces, used for wired connections to other network devices such as switches, or to a controller. Wireless interfaces may be WiMAX, 3G, 4G, and/or IEEE 802.11 wireless interfaces. In one embodiment of the invention, controllers and APs operate under control of a LINUX operating system, with purpose-built programs providing host controller and access point functionality.</p>
<p id="p-0016" num="0015">Wireless client devices <b>400</b> contain a processor, memory hierarchy, and a number of interfaces including a wireless interface for communicating with APs <b>200</b>. Typical wireless client devices include personal computers, handheld and tablet computers, Wi-Fi phones, wireless barcode scanners, and the like.</p>
<p id="p-0017" num="0016">Traditional spectrum analyzers use wideband receivers so that they can monitor the entire frequency spectrum of interest at all times. The advantage of wideband receivers is that data can be collected and processed in real-time for an entire band to support the display of real-time FFT, FFT average, and FFT duty cycle. Traditional spectrum analyzers typically use purpose built hardware with specialized spectrum analysis software and are made by companies such as Agilent Technologies, Rhode &#x26; Schwarz, and Anritsu.</p>
<p id="p-0018" num="0017">According to the present invention, methods are provided for supporting spectrum analysis functions using data collected from a narrowband radio such as an IEEE 802.11 radio. The radio may or may not be providing services to IEEE 802.11 clients while acting as a spectrum analyzer. Suitable radios include the radios in network access points and in wireless client devices where such data collection is supported by the drivers operating the radio. An IEEE 802.11 radio is only capable of receiving signals that fall within 5 to 40 MHz wide channels, since IEEE 802.11 channels are either 20 MHz or 40 MHz wide. Future IEEE 802.11 radios may be able to operate in 80 MHz channels. The width of the channel in an 802.11 radio receiver is restricted to the channel widths defined by the IEEE. There may also be other constraints such as the requirement to receive 802.11 frames, provide intrusion detection systems (IDS), and support interference classification that may limit the channel widths and dwell times that can be used by an 802.11 radio. The methods described here apply to any narrowband receiver such as that implementing IEEE 802.11, IEEE 802.16 or IEEE 802.15 standards or similar protocols that can be used to construct a standalone spectrum analyzer or a spectrum analyzer that provides spectrum analysis functions along with any combination of client connectivity services (e.g., as an Access Pont), Interference Classification, or IDS.</p>
<p id="p-0019" num="0018">For spectrum analysis, the spectrum of interest at any time could be as wide as 200 MHz or more. In order to support such wideband spectrum visibility using a narrowband radio, the spectrum analyzer (radio) needs to &#x201c;scan&#x201d; multiple channels in real-time and combine the time and frequency domain information gathered from multiple channels to form a coherent view of the wideband spectrum. The spectrum analysis function selects the best set of FFT samples among the hundreds or thousands of available samples per second that accurately represents the view of the spectrum in order to display the entire spectrum on a device such as a computer display.</p>
<p id="p-0020" num="0019">An FFT sample from a narrowband radio is represented as a set of amplitude values where each amplitude value corresponds to a frequency bin. The number of frequency bins in an FFT sample is determined by the channel width and the FFT size. For example, an FFT on a 20 MHz channel may produce FFT samples with 64 frequency bins, with each bin representing 312.5 KHz (i.e., 20 MHz/64). Other parameters associated with FFT include the starting frequency, the sampling time, and the sampling frequency or interval. The sampling time is the amount of time spent taking one FFT sample and the sampling frequency is the number of samples per second.</p>
<p id="p-0021" num="0020">For each display interval, the dwell time, which is the amount of time to be spent looking for activity on each channel is selected. The dwell time on each channel may be fixed or may vary based on certain conditions. A fixed dwell time may be obtained by dividing the total display interval (e.g., one second) by a multiple of the number of channels to be scanned. For example, given a display interval of one second and the number of channels to be scanned of five, the default dwell time would be 200 milliseconds (1000/5) per channel. The default dwell time could also be 100 milliseconds (1000/(2&#xd7;5)), where the spectrum analyzer scans each channel twice within the interval of one second. However, a fixed dwell time may not be appropriate under all circumstances. One such scenario is when the spectrum analyzer also supports IDS. A radio supporting IDS and spectrum analysis must be able to adaptively determine the dwell time on each channel so that IDS functions can be effectively supported without affecting the ability to receive representative FFT information from all channels for an accurate FFT display. The interferer profile is used to determine the amount of time spent on each channel (dwell time), the sequence of scanning, and the number of times to visit a channel per display interval. When interferers or rogue devices are detected on a specific 802.11 channel, those channels are scanned with a higher probability. Dwell times are also accordingly adjusted to capture sufficient 802.11 frames and/or FFT samples to perform the necessary IDS and interference classification functions.</p>
<p id="p-0022" num="0021">Some channels are known or likely to have more interferers and/or 802.11 devices. For example, microwave ovens operate in a specific frequency range in the 2.4 GHz band, and 5 GHz cordless phones operate in a specific portion of the UNII band. According to the invention, the scanning algorithm assigns a higher weight to those channels to provide scanning preference and increased dwell time if necessary.</p>
<p id="p-0023" num="0022">When a certain type of interferer (e.g. a frequency hopper such as a 2.4 GHz frequency hopping phone) is partially detected, the scanning algorithm adaptively changes the dwell time on a channel to receive sufficient samples on that channel that would help further classify the type and subtype of the interferer (e.g., Bluetooth, Xbox, cordless phone).</p>
<p id="p-0024" num="0023">Another aspect of scanning according to the present invention is to select among multiple channel widths supported by the radio, including 20 MHz and 40 MHz channel scanning. The advantage of 20 MHz scanning is that all 802.11 devices (including those operating in 20 MHz and 40 MHz channelization) can be reliably detected. If only 40 MHz channels are scanned, 20 MHz 802.11 devices operating on the extended channel (i.e., one half of the 40 MHz channel) or 40 MHz 802.11 devices operating with the different combination of primary and extensions channels cannot be reliably detected.</p>
<p id="p-0025" num="0024">On the other hand, 40 MHz scanning has fewer channels to scan, and the FFT information obtained from 40 MHz channels is sufficient for the interference classifier. The process herein disclosed uses a combination of 20 MHz and 40 MHz scanning to optimize scan efficiency without sacrificing the ability to receive and decode 802.11 signals or classify interferers. A threshold determines the time interval within which the spectrum analyzer must scan all possible 20 MHz channels within the selected band at least once. The scanning order and dwell time can be combined with this threshold to select the ordering and dwell times of each 20 MHz or 40 MHz channel. The same process can be extended to 80 MHz channels or higher width channels when available.</p>
<p id="p-0026" num="0025">Once the dwell time and scanning method are selected, the radio still could receive hundreds or thousands of FFT samples and 802.11 frames per second on each channel. FFT sample selection selects a best sample for each channel out of thousands and these best samples are combined together to construct the real-time view of the wideband display for every display interval. The best sample to display is not always the sample with the highest signal strength. The sample selection method according to the present invention uses at least three thresholds to select the best sample from each channel.</p>
<p id="p-0027" num="0026">Prior to sample selection, the samples are categorized into Wi-Fi and non-Wi-Fi samples. The first threshold is used to select the Wi-Fi (802.11) FFT sample with the highest signal strength that exceeds this threshold. If no samples exceed the first threshold, no 802.11 sample is selected. The second threshold is used to select the non-Wi-Fi FFT sample with the highest signal strength that exceeds this threshold. As with the Wi-Fi FFT samples, if no samples exceed the threshold, no non-Wi-Fi FFT sample is selected. The third threshold is used to select the best of the Wi-Fi and non-Wi-Fi sample for display. The spectrum analyzer may be configured to prefer non-Wi-Fi samples or Wi-Fi samples at any time. Alternatively, the system may be configured to provide equal weight to both Wi-Fi and non-Wi-Fi samples. The third threshold, which may be positive or negative or zero, is added to the signal strength value of the non-Wi-Fi FFT sample. After the third threshold is applied and the signal strength value is normalized, the sample with the highest signal strength value is selected for display. The third threshold and therefore the preference for one type of sample over the other may be randomized, if necessary, to accurately portray the spectrum activity on the real channel.</p>
<p id="p-0028" num="0027">Once the samples are selected per 802.11 channel (e.g., 20 MHz or 40 MHz), the samples need to be combined to construct the view of the wideband spectrum. Since the samples selected from adjacent channels may not be from the same time instance, the FFT display may show FFT bins from adjacent channels with significantly different amplitudes. A technique of using FFT average information to fill in the FFT bins at the edge of the channels, as long as the peaks of the FFT do not fall in these bins, is used to smooth out these differences in amplitude levels of adjacent channels.</p>
<p id="p-0029" num="0028">Various methods known to the art may be used to fill in the FFT bins at the edge of the channels, such as simple averaging among bins. In such an approach, samples from bins of the same frequency are processed generating an average, weighted average, or other similar calculation. As an alternative, a smoothing process may be used incorporating data from nearby frequency bins in the process. An example of such a process would be the application of splines to smooth the transition from channel to channel across a range of frequency bins.</p>
<p id="p-0030" num="0029">When the above described sample selection method is used and a frequency hopping device is active on the channel it is possible that the sample selection would always select samples with the highest signal strength on each channel. Since a frequency hopper hops at a higher rate, it is highly likely that the radio receives at least one FFT sample corresponding to a hopper on all channels it scans during a specified interval such as one second. However, this may result in a FFT display that incorrectly shows the frequency hopper's FFT signature as a constant source interferer. Selecting FFT samples in the presence of frequency hoppers uses the knowledge from the classification engine to select appropriate samples that correctly represents an instantaneous FFT signature. In this case, the FFT sample with the highest signal strength is not always selected for all channels. Once the identity of the frequency hopper is known based on the interferer classification, associated information such as signal strength, occupied bandwidth, hopping rate, hopping pattern, and burst size are known. Sample selection uses these parameters to select FFT sample signatures that match the frequency hopper's hopping pattern instead of choosing samples with highest signal strength on all channels.</p>
<p id="p-0031" num="0030">Yet another requirement of the FFT display is the ability to see the average FFT display over a specified display interval. FFT averaging combines the converted 802.11 samples and other non-Wi-Fi FFT samples to calculate the average for every frequency bin. The 802.11 radio is programmed to deliver one FFT sample for every FFT_SCAN interval in order to minimize the impact on the CPU processing. For example, if two FFT samples are separated by only FFT_SCAN, it can be estimated that the signal was active for the entire duration of the FFT_SCAN. Therefore, the duration of the non-Wi-Fi interferer signal is accurately estimated by calculating the time difference between consecutive FFT samples. The duration of signals is accumulated in units of time that is a multiple of the FFT sampling duration along with aggregated amplitude per bin. The duration of a received Wi-Fi frame is calculated based on the modulation, coding, length and other related parameters. The converted Wi-Fi FFT samples are then used to update the FFT amplitude bins and duration using the same units as the non-Wi-Fi FFT signature. When neither Wi-Fi nor non-Wi-Fi signals are present, all FFT bin amplitudes are updated with the amplitude of the noise floor in that instant. The duration is also updated accordingly. Once every update interval (e.g., one second), the FFT average amplitude for every bin is calculated by dividing the total amplitude per bin by the total time spent on each channel.</p>
<p id="p-0032" num="0031">Similar to the FFT average, the FFT duty cycle also needs to be calculated for display purposes. The FFT duty cycle indicates the percentage of time a specific FFT bin has signal amplitude that is above a specific FFT_DUTY_CYCLE_SIGNAL_THRESHOLD. The duration of the non-FFT signal above this threshold is accumulated per bin similar to the estimation process described in FFT averaging for each channel. When Wi-Fi frames are received, the frames are converted into FFT samples and the FFT duration bins are updated if the corresponding bin in the converted FFT sample exceeds the FFT_DUTY_CYCLE_SIGNAL_THRESHOLD threshold. Once every update interval (e.g., one second), the FFT duty cycle for every bin is calculated by dividing the accumulated duration for each bin by the total time spent on a channel.</p>
<p id="p-0033" num="0032">According to the invention, spectrum data is collected by one or more radios on a network, such as access points, dedicated spectrum monitors, or from suitably equipped client devices. Spectrum data may be combined on a device producing a wideband spectrum, or may be sent in combined or uncombined form to another device such as monitoring process <b>180</b> for combining into a wideband spectrum according to the processes described herein. As an example, samples from radios are combined by monitoring process <b>180</b> and displayed on display <b>190</b>. Samples from physically close APs may be combined to provide estimates of the wideband spectrum in a particular area. These samples may be combined with samples from suitable client devices in the area. Such samples may be stored in time-stamped fashion for later combination and analysis.</p>
<p id="p-0034" num="0033">Monitoring process <b>180</b> and display <b>190</b> may be present as a separate device on the network, or as part of another device such as a wireless client in the form of a suitable desktop, laptop, or handheld computer. Sample data from radios such as access points <b>200</b> station monitor <b>300</b> and client device <b>400</b> may be stored locally or stored centrally such as in controller <b>100</b> for later retrieval and analysis. Such samples may be pushed from a device such as access point <b>200</b> to a collection point such as monitoring process <b>180</b>, or may be polled or pulled by monitoring process <b>180</b> working with access point <b>200</b>.</p>
<p id="p-0035" num="0034">The present invention may be realized in hardware, software, or a combination of hardware and software. The present invention may be realized in a centralized fashion in one computer system, or in a distributed fashion where different elements are spread across several interconnected computer systems. Any kind of computer system or other apparatus adapted for carrying out the methods described herein is suited. A typical combination of hardware and software may be a general purpose computer system with a computer program that, when being loaded and executed, controls the computer system such that it carries out the methods described herein.</p>
<p id="p-0036" num="0035">The present invention also may be embedded in a computer program product, which comprises all the features enabling the implementation of the methods described herein, and which when loaded in a computer system is able to carry out these methods. Computer program in the present context means any expression, in any language, code or notation, of a set of instructions intended to cause a system having an information processing capability to perform a particular function either directly or after either or both of the following: a) conversion to another language, code or notation; b) reproduction in a different material form.</p>
<p id="p-0037" num="0036">This invention may be embodied in other forms without departing from the spirit or essential attributes thereof. Accordingly, reference should be made to the following claims, rather than to the foregoing specification, as indicating the scope of the invention.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>I claim:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A non-transitory machine readable medium comprising a set of instructions which, when executed by one or more hardware processors, causes performance of a set of operations comprising:
<claim-text>accumulating spectral data from a radio scanning a plurality of channels;</claim-text>
<claim-text>for each of the plurality of channels, selecting spectral data representing (a) a signal strength of a Wi-Fi signal transmitted on each channel or (b) a signal strength of a non-Wi-Fi signal transmitted on each channel;</claim-text>
<claim-text>the selecting operation comprising:
<claim-text>for a first channel of the plurality of channels: selecting a first spectral data representing a signal strength of a Wi-Fi signal transmitted on the first channel;</claim-text>
<claim-text>for a second channel of the plurality of channels: selecting a second spectral data representing a signal strength of a non-Wi-Fi signal transmitted on the second channel;</claim-text>
</claim-text>
<claim-text>combining the first spectral data re representing the signal of the Wi-Fi signal transmitted on the first channel and the second spectral data representing the signal strength of the non-Wi-Fi signal transmitted on the second channel to produce a spectrum display representing both: the signal strength of the Wi-Fi signal transmitted on the first channel and the signal strength of the non-Wi-Fi signal transmitted on the second channel.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The machine readable medium of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein the first spectral data representing the signal strength of the Wi-Fi signal is selected for the first channel based at least on the signal strength of the Wi-Fi signal exceeding a threshold value.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The machine readable medium of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein the first spectral data representing the signal strength of the Wi-Fi signal is selected for the first channel based at least on the signal strength of the Wi-Fi signal exceeding a signal strength of a non-Wi-Fi signal transmitted on the first channel.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The machine readable medium of <claim-ref idref="CLM-00001">claim 1</claim-ref> the first spectral data representing the signal strength of Wi-Fi signal is selected for the first channel based at least on (a) the signal strength of the Wi-Fi signal exceeding a signal strength of a non-Wi-Fi signal transmitted on the first channel and (b) the signal strength of the non-Wi-Fi signal transmitted on the first channel not meeting a threshold value.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The machine readable medium of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein the second spectral data representing the signal strength of the non-Wi-Fi signal is selected for the second channel based at least on the signal strength of the non-Wi-Fi signal transmitted on the second channel exceeding a signal strength of a Wi-Fi signal transmitted on the second channel.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The machine readable medium of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein the second spectral data representing the strength of the non-Wi-Fi signal is selected for the second channel based at least on the signal strength of the non-Wi-Fi signal transmitted on the second channel exceeding a threshold value.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. A non-transitory machine readable medium comprising instructions which, when executed by one or more hardware processors, causes performance of operations comprising:
<claim-text>detecting at least one wireless signal from an interferer device on a first channel of a plurality of channels without detecting any wireless signal from the interferer device on a second channel of the plurality of channels;</claim-text>
<claim-text>responsive to the detecting operation:
<claim-text>setting a first dwell time for the first channel of the plurality of channels: and</claim-text>
<claim-text>setting a second dwell time for the second channel of the plurality of channels that is shorter than the first dwell time for the first channel;</claim-text>
</claim-text>
<claim-text>scanning the first channel for a first period of time, corresponding to the first dwell time, to generate a first spectral data representing a signal strength of at least one wireless signal detected on the first channel; and</claim-text>
<claim-text>scanning the second channel for a second period of time, corresponding to the second dwell time, to generate a second spectral data representing a signal strength of at least one wireless signal detected on the second channel.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The machine readable medium of <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the first dwell time and the second dwell time are further based on a device type of the interferer device.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The machine readable medium of <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the first dwell time and the second dwell time are further based on a hopping rate of the interferer device for hopping between different channels of the plurality of channels to transmit a plurality of wireless signals.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The machine readable medium of <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the first dwell time and the second dwell time are further based on an occupied bandwidth for wireless signals transmitted by the interferer device.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The machine readable medium of <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the first dwell time and the second dwell time are further based on a hopping pattern of the interferer device for hopping between different channels of the plurality of channels to transmit a plurality of wireless signals.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The machine readable medium of <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the operations further comprise accumulating the first spectral data and the second spectral data to generate spectrum display representing one or more wireless signals detected during the first period of time on the first channel and one or more wireless signals detected during the second period of time on the second channel.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The machine readable medium of <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the first dwell time and the second dwell time are further based on a frequency band associated with the first channel and a frequency band associated with the second channel.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. A system comprising:
<claim-text>at least one device including a hardware processor;</claim-text>
<claim-text>the system being configured to perform operations comprising:</claim-text>
<claim-text>accumulating spectral data from a radio scanning a plurality of channels;</claim-text>
<claim-text>for each of the plurality of channels, selecting spectral data representing (a) a signal strength of a Wi-Fi signal transmitted on each channel or (b) a signal strength of a non-Wi-Fi signal transmitted on each channel;</claim-text>
<claim-text>the selecting operation comprising:
<claim-text>for a first channel of the plurality of channels: selecting a first spectral data representing a signal strength of a Wi-Fi signal transmitted on the first channel;</claim-text>
<claim-text>for a second channel of the plurality of channels: selecting a second spectral data representing a signal strength of a non-Wi-Fi signal transmitted on the second channel;</claim-text>
</claim-text>
<claim-text>combining the first spectral data representing the signal strength of the Wi-Fi signal transmitted on the first channel and the second spectral data representing the signal strength of the non-Wi-Fi signal transmitted on the second channel to produce a spectrum display representing both: the signal strength of the Wi-Fi signal transmitted on the first channel and the signal strength of the non-Wi-Fi signal transmitted on the second channel.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The system of <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein the first spectral data representing the signal strength of the Wi-Fi signal is selected for the first channel based at least on the signal strength of the Wi-Fi signal exceeding a threshold value.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The system of <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein the first spectral data representing the signal strength of the Wi-Fi signal is selected for the first channel based at least on the signal strength of the Wi-Fi signal exceeding a signal strength of a non-Wi-Fi signal transmitted on the first channel.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The system of <claim-ref idref="CLM-00014">claim 14</claim-ref>, the first spectral data representing the signal strength of the Wi-Fi signal is selected for the first channel based at least on (a) the signal strength of the Wi-Fi signal exceeding a signal strength of a non-Wi-Fi signal transmitted on the first channel and (b) the signal strength of the non-Wi-Fi signal transmitted on the first channel not meeting a threshold value.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The system of <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein the second spectral data representing the signal strength of the non-Wi-Fi signal is selected for the second channel based at least on the signal strength of the non-Wi-Fi signal transmitted on the second channel exceeding a signal strength of a Wi-Fi signal transmitted on the second channel.</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The system of <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein the second spectral data representing the signal strength of the non-Wi-Fi signal is selected for the second channel based at least on the signal strength of the non-Wi-Fi signal transmitted on the second channel exceeding a threshold value.</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. A system comprising:
<claim-text>at least one device including a hardware processor;</claim-text>
<claim-text>the system being configured to perform operations comprising:</claim-text>
<claim-text>detecting at least one wireless signal from an interferer device on a first channel of a plurality of channels without detecting any wireless signal from the interferer device on a second channel of the plurality of channels;</claim-text>
<claim-text>responsive to the detecting operation:
<claim-text>setting a first dwell time for the first channel of the plurality of channels; and</claim-text>
<claim-text>setting a second dwell time for the second channel of the plurality of channels that is shorter than the first dwell time for the first channel;</claim-text>
</claim-text>
<claim-text>scanning the first channel for a first period of time, corresponding to the first dwell time, to generate a first spectral data representing a signal strength of at least one wireless signal detected on the first channel; and</claim-text>
<claim-text>scanning the second channel for a second period of time, corresponding to the second dwell time, to generate a second spectral data representing a signal strength of at least one wireless signal detected on the second channel.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. The system of <claim-ref idref="CLM-00020">claim 20</claim-ref>, wherein the first dwell time and the second dwell time are further based on a device type of the interferer device.</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. The system of <claim-ref idref="CLM-00020">claim 20</claim-ref>, wherein the first dwell time and the second dwell time are further based on a hopping rate of the interferer device for hopping between different channels of the plurality of channels to transmit a plurality of wireless signals.</claim-text>
</claim>
<claim id="CLM-00023" num="00023">
<claim-text>23. The system of <claim-ref idref="CLM-00020">claim 20</claim-ref>, wherein the first dwell time and the second dwell time are further based on an occupied bandwidth for wireless signals transmitted by the interferer device.</claim-text>
</claim>
<claim id="CLM-00024" num="00024">
<claim-text>24. The system of <claim-ref idref="CLM-00020">claim 20</claim-ref>, wherein the first dwell time and the second dwell time are further based on a hopping pattern of the interferer device for hopping between different channels of the plurality of channels to transmit a plurality of wireless signals.</claim-text>
</claim>
<claim id="CLM-00025" num="00025">
<claim-text>25. The system of <claim-ref idref="CLM-00020">claim 20</claim-ref>, wherein the operations further comprise accumulating the first spectral data and the second spectral data to generate spectrum display representing one or more wireless signals detected during the first period of time on the first channel and one or more wireless signals detected during the second period of time on the second channel.</claim-text>
</claim>
<claim id="CLM-00026" num="00026">
<claim-text>26. The system of <claim-ref idref="CLM-00020">claim 20</claim-ref>, wherein the first dwell time and the second dwell time are further based on a frequency band associated with the first channel and a frequency band associated with the second channel. </claim-text>
</claim>
</claims>
</us-patent-grant>
