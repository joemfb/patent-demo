<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625428-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625428</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12995868</doc-number>
<date>20080605</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<us-term-of-grant>
<us-term-extension>450</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>12</main-group>
<subgroup>26</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>370235</main-classification>
</classification-national>
<invention-title id="d2e53">Method and apparatus for handling a switch using a preferred destination list</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6870840</doc-number>
<kind>B1</kind>
<name>Hill et al.</name>
<date>20050300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370389</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>7023837</doc-number>
<kind>B1</kind>
<name>Srinivasan</name>
<date>20060400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370352</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2003/0118035</doc-number>
<kind>A1</kind>
<name>Sharma et al.</name>
<date>20030600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2008/0123561</doc-number>
<kind>A1</kind>
<name>Sharma et al.</name>
<date>20080500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>GB</country>
<doc-number>2 334 033</doc-number>
<kind>A</kind>
<date>20000500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>WO</country>
<doc-number>WO 01/67686</doc-number>
<kind>A1</kind>
<date>20010900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00007">
<othercit>International Search Report for PCT/SE2008/050671 dated Feb. 11, 2009.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00008">
<othercit>Chinese First Office Action Corresponding to Chinese Patent Application No. 200880129678.2; Issuing Date: Jan. 7, 2013; 3 Pages.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>25</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>370352-356</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370389</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370392</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370400</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370401</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>5</number-of-drawing-sheets>
<number-of-figures>10</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20110075561</doc-number>
<kind>A1</kind>
<date>20110331</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Norman</last-name>
<first-name>M&#xe5;rten</first-name>
<address>
<city>Sp&#xe5;nga</city>
<country>SE</country>
</address>
</addressbook>
<residence>
<country>SE</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Norman</last-name>
<first-name>M&#xe5;rten</first-name>
<address>
<city>Sp&#xe5;nga</city>
<country>SE</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Myers Bigel Sibley &#x26; Sajovec</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Telefonaktiebolaget LM Ericsson (publ)</orgname>
<role>03</role>
<address>
<city>Stockholm</city>
<country>SE</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Pham</last-name>
<first-name>Chi</first-name>
<department>2471</department>
</primary-examiner>
<assistant-examiner>
<last-name>Chowdhury</last-name>
<first-name>Fahmida</first-name>
</assistant-examiner>
</examiners>
<pct-or-regional-filing-data>
<document-id>
<country>WO</country>
<doc-number>PCT/SE2008/050671</doc-number>
<kind>00</kind>
<date>20080605</date>
</document-id>
<us-371c124-date>
<date>20101202</date>
</us-371c124-date>
</pct-or-regional-filing-data>
<pct-or-regional-publishing-data>
<document-id>
<country>WO</country>
<doc-number>WO2009/148371</doc-number>
<kind>A </kind>
<date>20091210</date>
</document-id>
</pct-or-regional-publishing-data>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">The present invention relates to switching technology, such Ethernet, where data switching is performed based on a collision-prone switching table (<b>31</b>). The invention provides a possibility to avoid difficult collision-caused flooding and makes it possible to use simple and inexpensive switching equipment, while still not having to worry about consequences of collision-caused flooding. A preferred destination list (<b>43</b>) is provided. This list identifies one or more preferred switching destinations (<b>1, 11</b>). For each preferred destination, a switching address and a corresponding port identification is obtained (<b>53</b>). An order (<b>55</b>) is then made to enter and lock the obtained switching address and corresponding port identification into the switching table (<b>31</b>).</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="108.03mm" wi="109.14mm" file="US08625428-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="226.82mm" wi="141.56mm" file="US08625428-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="193.55mm" wi="172.13mm" file="US08625428-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="246.04mm" wi="172.30mm" file="US08625428-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="236.39mm" wi="127.59mm" file="US08625428-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="69.00mm" wi="111.93mm" file="US08625428-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">CROSS REFERENCE TO RELATED APPLICATION</heading>
<p id="p-0002" num="0001">This application is a 35 U.S.C. &#xa7;371 national stage application of PCT International Application No. PCT/SE2008/050671, filed on 5 Jun. 2008, the disclosure and content of which is incorporated by reference herein in its entirety. The above-referenced PCT International Application was published in the English language as International Publication No. WO 2009/148371 A1 on 10 Dec. 2009.</p>
<heading id="h-0002" level="1">TECHNICAL FIELD</heading>
<p id="p-0003" num="0002">The present invention pertains to the field of switching, and more particularly to the part of this field where the switching is performed using a collision-prone switching table.</p>
<heading id="h-0003" level="1">BACKGROUND</heading>
<p id="p-0004" num="0003">Traditionally, ATM (Asynchronous Transfer Mode) has often been used for data transport in many cellular communication networks, such as the 3GPP (Third Generation Partnership Project) standardized WCDMA (Wideband Code Division Multiple Access), but now IP (Internet Protocol) based transport is being introduced. Ethernet is one technology that often is used as a carrier for the IP packets. Ethernet is a packet transfer technology based on a 48-bit MAC (Media Access) address and supports networks ranging from two up to thousands or more nodes. Nodes of an Ethernet based network are normally connected in a tree, ring or hub structure using Ethernet switches. The Ethernet switch is a device that receives an Ethernet packet from one port, looks at the destination MAC address and forwards it to another port that will either reach the destination or another switch that can forward it to the destination. The Ethernet switch is self-learning. By looking at incoming packets, it learns that a source MAC address of the incoming packet is associated with an incoming port at which the incoming packet is received and stores the port/MAC address association in a switching table. The switching table is then used to switch incoming packets. A destination MAC address is searched for in the switching table, and the switch can see which port to forward the packet to. If the destination address is not found in the switching table, the switch is unable to know which port to forward to. This is solved by process known as flooding, i.e. sending the packet to all ports except the one it came from (the incoming port). Flooding is the same method as the deprecated ancestor &#x201c;Ethernet hub&#x201d; used. An Ethernet hub has design that is a lot simpler, but will waste capacity of the Ethernet network by flooding all packets to every destination. The introduction of the Ethernet switch improved the situation significantly by only sending packets to the intended destination/receiver instead of everyone on the whole Ethernet. But as indicated above, the switch is sometimes forced to waste capacity by flooding when it has not been able to learn an address.</p>
<p id="p-0005" num="0004">Due to, for example, cost considerations, it is normally not possible to design the switching table so that it can learn every MAC address. The switching table is, therefore, often limited to a few thousand MAC addresses since a large RAM (Random Access Memory) will cost more, and most switches will not need more. Consequently, there cannot be a one-to-one mapping of the 48-bit MAC addresses to the positions in the switching table, since a table address, indicating a position in the switching table, will be just 10-20 bits for a reasonably sized RAM. Algorithms have been developed for searching the switching table for the right position. Furthermore, there is a need to verify that the position is valid (often by storing the valid MAC address at the position itself). Some of the more common algorithms for this switching table look-up are the following: content-addressable memory, which is fast but expensive (consumes a lot of RAM); searching, which is cheap but slow; and hashing or truncation of address, which is both fast and cheap.</p>
<p id="p-0006" num="0005">Hashing and truncation look-up thus have some advantages. However, these techniques are also prone to collisions. That is, more than one MAC address may be mapped to the same position in the switching table. When two (or more) MAC addresses are allocated to the same position in the switching table, only one of the addresses can be stored in the switching table. Thus the Ethernet switch is only able to work as a switch for one of the addresses (the one that happens to be stored). Any other MAC address associated with the same position in the switching table will have to be handled by flooding. For various reasons, this behavior can normally be accepted in traditional IP/Ethernet datacom oriented networks. The probability for collision is fairly low for small networks (low number of MAC addresses). Furthermore, networks are often over-dimensioned. For example, most Ethernet LANs (Local Area Networks) have a significant overcapacity to each computer. Moreover, traffic is often bursty making problems temporary. It is also unlikely that two computers with colliding MAC addresses will transmit at the same time for extended periods of time. Soon after one of the computers is going idle, the switch will refresh the switching table and stop the flooding of the other computer. Additionally, should the flooding become a serious problem, the computer or an Ethernet board could be replaced. Due to this equipment change, the MAC address is changed, and the collision is gone and eventually written off as &#x201c;No Fault Found&#x201d;, i.e. in most cases the problem is not even detected by the person solving it.</p>
<p id="p-0007" num="0006">However, with the introduction of data transport using Ethernet switches in cellular and other telecom oriented networks, the difficulties with collision-prone switching tables are more pronounced. In a transport network, all nodes are essentially active all the time. Thus any MAC look-up collision will lead to permanent flooding of the traffic. A datacom network, on the other hand, will see this type of flooding only when two colliding MAC addresses are active at the same time. Furthermore, in a cellular network, RBSs (Radio Base Stations) are distributed over large areas and often at hard-to-reach locations. Therefore, the cost for transport link capacity is often an issue due to the use of microwave links with limited bandwidth or leased lines with high cost/capacity. This makes it desirable to keep the peak capacity low. As result, flooding will be a waste of expensive capacity. In the telecom world, equipment reliability is extremely high, and acceptance of random difficulties low. A Non-performing RBS will be detected. The operator will replace board(s), and the MTBF (Mean Time Between Failure) statistics for the RBS will be affected. Some Ethernet connections may also be throttled to a low bit-rate like 1 Mbit/s or 10 Mbit/s due to limited capacity in packet processing and/or links. This can both be node internal links, links on boards and links in the transport network. Such links will suffer from flooding by dropped packets and/or delays due to flooding packets which are intended for another destination are adding to the intended payload. Moreover, it is becoming customary to add various types of site equipment, such as site control equipment, Web cameras, Climate control equipment, or laptops (for visiting technicians), to RBS sites. Traffic load from the site equipment is generally low and will usually not be a problem if it should be flooded. However, the site equipment adds MAC addresses to the switching table, thus increasing a probability for collisions.</p>
<p id="p-0008" num="0007">One way to overcome the above-described difficulties with the collision-prone switching table is to over-dimension all transport links to be able handle the worst case(s) of flooding. Although this can be feasible for some links, it will in general be too expensive when all links are considered.</p>
<p id="p-0009" num="0008">Another way would be to introduce some form of advanced MAC address planning and/or detection and correction. This is feasible for a small network or a limited part of a network but will be complicated for a large network and adds to the maintenance cost.</p>
<p id="p-0010" num="0009">Consequently, there is a need to overcome or at least mitigate the above-described difficulties with the collision-prone switching table in a simple and cost-effective manner.</p>
<heading id="h-0004" level="1">SUMMARY</heading>
<p id="p-0011" num="0010">A main object of the inventions is thus to provide ways and means that allow the above-described difficulties with switching based on a collision-prone switching table to be overcome or at least mitigated.</p>
<p id="p-0012" num="0011">According one aspect of the present invention, the above-stated object is achieved with a method for handling a switch with a collision-prone switching table. According to the method, it is suggested to provide a preferred destination list. This list identifies one or more preferred switching destinations. For each preferred destination, a switching address and a corresponding port identification is obtained. An order is then made to enter and lock the obtained switching address and corresponding port identification into the switching table.</p>
<p id="p-0013" num="0012">Consequently, the above-indicated method provides a possibility to avoid collision-caused flooding from the switch for certain identified destination(s) (the preferred destinations). To provide this opportunity is of great value, since in many switching scenarios there are often only relatively few destinations that will cause really difficult cases of flooding in the event of collision. To remove these cases from consideration makes it possible avoid using more complex or expensive switching equipment, while still not having to worry about consequences of collision-caused flooding.</p>
<p id="p-0014" num="0013">According to another aspect of the invention, the above-stated object is achieved with a switching arrangement capable of performing the above-indicated method.</p>
<p id="p-0015" num="0014">One main advantage of the invention is thus that it allows for improved switching and switching equipment which are still relatively simple and cost-effective.</p>
<p id="p-0016" num="0015">A person skilled in the art will appreciate that further objects and advantages may be associated with particular embodiments of the invention, as will become clear in the detailed description.</p>
<p id="p-0017" num="0016">The invention will now be described further using exemplary embodiments and referring to the drawings.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 1</figref> is block diagram illustrating a scenario where the present invention may be applied.</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 2</figref> is diagram illustrating a format of an Ethernet frame.</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 3</figref> is diagram illustrating a format for an entry in a switching table.</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 4</figref> is block diagram illustrating a switching arrangement according to an embodiment of the invention.</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIGS. 5</figref><i>a</i>-<b>5</b><i>c </i>are tables illustrating formats for a preferred destination list according to embodiments of the invention.</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 6</figref> is flow chart illustrating a method according to an embodiment of the invention.</p>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 7</figref> is a flow chart illustrating a method according to an embodiment of the invention.</p>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. 8</figref> is a flow chart illustrating a method according to an embodiment of the invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0006" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram illustrating one exemplary situation to which the present invention may be advantageously applied. A control node, here an RNC <b>1</b> (Radio Network Controller) is connected to an RBS <b>3</b> via a data transport link. In this example, the RNC <b>1</b> and the RBS form part of a WCDMA system, and the connection between the RNC <b>1</b> and the RBS <b>3</b> is the so-called Iub interface. From a purely logical viewpoint, the connection is point-to-point. From a physical viewpoint, however, the connection is implementation dependent and can be based on a chain or tree structure where some RBSs serve as hubs and some RBSs constitute &#x201c;leaves&#x201d; in the chain or tree. When an RBS serves as a hub, it not only receives and transmits data relating to its own operation but is also responsible for forwarding data to or from one or more other RBSs. A leaf RBS does not forward data to or from other RBSs, but only receives and transmits data relating to its own operation.</p>
<p id="p-0027" num="0026">The RBS <b>3</b> of <figref idref="DRAWINGS">FIG. 1</figref> includes an Ethernet switch <b>5</b> with a switch controller <b>7</b>. For the sake simplicity, only three ports p<b>1</b>-p<b>3</b> of the Ethernet switch <b>5</b> are shown in <figref idref="DRAWINGS">FIG. 1</figref>. Of course, the Ethernet switch <b>5</b> may (and usually will) include many more ports. The port p<b>1</b> is here connected to an RBS control unit <b>9</b>. In this WCDMA example, the RBS control unit <b>9</b> may be a 3GPP specified Iub control plane termination; it can also be 3GPP Mub O&#x26;M (Operation and Maintenance) termination. The port p<b>2</b> is connected to the RNC <b>1</b> via the Iub interface. The port p<b>3</b> is connected to an RBS base band unit <b>11</b>. In this WCDMA example, the RBS base band unit <b>11</b> may be a 3GPP specified Iub user plane termination.</p>
<p id="p-0028" num="0027">The Ethernet switch <b>5</b> is capable of switching Ethernet frames between the ports p<b>1</b>-p<b>3</b> based on switching addresses. In Ethernet systems (48 bit) MAC addresses are used as switching addresses. An Ethernet frame structure is illustrated by a diagram in <figref idref="DRAWINGS">FIG. 2</figref>. The frame includes a destination MAC address <b>12</b><i>a</i>, a source MAC address <b>12</b><i>b</i>, a type indicator <b>12</b><i>c</i>, payload <b>12</b><i>d </i>and a CRC <b>12</b><i>e </i>(Cyclic Redundancy Check). The switching is performed using a switching table (not shown in <figref idref="DRAWINGS">FIG. 1</figref>). The switching table includes a number of positions, where each position includes an entry of information that indicates how switching is to be performed between the ports of the Ethernet switch <b>5</b>. A typical format of an entry in the switching table is illustrated with a diagram in <figref idref="DRAWINGS">FIG. 3</figref>. The entry includes a MAC address <b>13</b><i>a </i>and an output port identifier <b>13</b><i>b </i>identifying an output port that is associated with the MAC address <b>13</b><i>a</i>. The entry also includes a lock bit <b>13</b><i>c </i>that can be used to lock the entry, i.e. provide an indication that the entry is not allowed to be changed. The entry further includes a recently used bit <b>13</b><i>d </i>indicating whether or not the entry has been used recently, and a valid bit <b>13</b><i>e </i>indicating whether or not the entry is valid. When the Ethernet switch <b>5</b> receives an Ethernet frame, the destination MAC address <b>12</b><i>a </i>is identified, and the switch controller <b>7</b> tries to find a position in switching table having an entry where the MAC address <b>13</b><i>a </i>corresponds to the destination MAC address <b>12</b><i>a</i>. If such a position can be found, the received Ethernet frame is forwarded to the output port specified by the entry at that position. In this is example, it is assumed that the switching table is collision-prone. For example, a hash function may be used to locate positions in the switching table. The hash function is formally a mapping from the set of MAC addresses to the set of positions in the switching table. However, the number of positions in the switching table is, e.g. for cost reasons, much smaller than the number of possible MAC addresses. It follows that the mapping cannot be injective, so that there are positions in the switching table that each correspond to two or more MAC addresses. The Ethernet switch <b>5</b> resorts to flooding if a destination MAC address <b>12</b><i>a </i>cannot not be found at the position specified by the hash function, e.g. because the entry is empty, invalid or because the entry is taken by another MAC address (collision).</p>
<p id="p-0029" num="0028">The recently used bit <b>13</b><i>d </i>can be used in process known as &#x201c;aging&#x201d;, which is a form of updating of the switching table. During the aging process, each entry in the switching table is inspected in turn. If the lock bit <b>13</b><i>c </i>indicates that the entry under inspection is locked, no further action is performed. If the entry is not locked, it is checked whether the recently used bit <b>13</b><i>d </i>indicates that the entry has not been recently used, in which case the valid bit <b>13</b><i>e </i>is set to indicate that the entry is invalid; and the entry may then be overwritten with new information. If, on the other hand, the recently used bit <b>13</b><i>d </i>indicates that the entry has been recently used, the recently used bit <b>13</b><i>d </i>is changed to indicate that the entry has not been recently used. In this way, entries that are not frequently used can be flushed from the switching table.</p>
<p id="p-0030" num="0029">In <figref idref="DRAWINGS">FIG. 1</figref>, the highest data rates occur on the Iub downlink, i.e. for data sent from the RNC <b>1</b> to the base band unit <b>11</b> via the Ethernet switch <b>5</b>. Typical peak rates for this downlink may be around 170 Mbit/s. The data rates for the Iub uplink (base band unit <b>11</b> to RNC <b>1</b>) are also fairly high. Typical peak rates for this uplink may be around 68 Mbit/s. Data rates to and from the RBS control unit <b>9</b> are, however, considerably lower, typically below 1 Mbit/s. Consequently, most Ethernet frames processed by the Ethernet switch <b>5</b> are to or from the base band unit <b>11</b>. Assume that the RNC <b>1</b> has a MAC address A, that the RBS control unit <b>9</b> has a MAC address B and that the base band unit <b>11</b> has a MAC address C. Further assume that a collision exists in the switching table such that the position to which the MAC address C is allocated by the hash function is taken by some other MAC address. In this case, the Ethernet switch <b>5</b> must handle the Iub downlink by flooding on all ports except p<b>2</b>. This means that the RBS control unit <b>9</b> will receive a data rate that greatly exceeds what it is designed for. This might upset the proper operation of the RBS control unit <b>9</b>. For example, the port p<b>1</b> and/or the RBS control unit <b>9</b> may be overloaded, causing Ethernet frames actually intended for the MAC address B to be lost or delayed. A similar situation would occur if a collision existed for the MAC address A. A collision with respect to the MAC address B is, however, less severe. This may add some additional load, but this additional load is almost negligible compared the normal uplink/downlink Iub load.</p>
<p id="p-0031" num="0030">According to embodiments of the invention there are provided ways and means that make it possible to avoid various problematic situations, e.g. as illustrated in <figref idref="DRAWINGS">FIG. 1</figref>, associated with collision-prone switching tables.</p>
<p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. 4</figref> is a block diagram illustrating a switching arrangement according to one embodiment of the invention. The arrangement of <figref idref="DRAWINGS">FIG. 4</figref> comprises a switch <b>21</b>, which may be an Ethernet switch, and an external switch controller, here in the form of a board controller <b>23</b>.</p>
<p id="p-0033" num="0032">The switch <b>21</b> includes a switch fabric <b>25</b>, where the actual switching occurs. The switch <b>21</b> also includes an internal switch controller <b>27</b>, which is connected to the switch fabric <b>25</b> as well as to other parts of the switch, as illustrated in the figure. The switching operation of the switch <b>21</b> is performed based on a collision-prone switching table <b>31</b>. In this particular embodiment, a hash function calculator <b>29</b> is provided to translate switching addresses, e.g. MAC addresses, into positions of the switching table <b>31</b>. An entry in the switching table <b>31</b> may, for example, be in the format indicated in <figref idref="DRAWINGS">FIG. 3</figref> or similar. To avoid unnecessary detail, only three ports p<b>1</b>-p<b>3</b> are shown in <figref idref="DRAWINGS">FIG. 4</figref>. The ports p<b>1</b>-p<b>3</b> all include both an input side and an output side. However, for the sake of simplicity, only the input side of the port p<b>2</b> and the output sides of the ports p<b>1</b> and p<b>3</b> are shown in <figref idref="DRAWINGS">FIG. 4</figref>. Here, the input side of the port p<b>2</b> includes a FIFO (First In First Out) list, where incoming data packets, e.g. Ethernet frames, are temporarily captured so that destination and source addresses can be extracted, e.g. for switching and learning purposes. The output side of the port p<b>1</b> includes an out queue <b>35</b>, where outgoing data packets, e.g. Ethernet frames, are buffered awaiting transmission. The port p<b>3</b> includes a corresponding out queue <b>37</b>. Here, the board controller <b>23</b> also includes an ARP detector <b>38</b> connected to the control logic <b>39</b>. The ARP detector may, however, be located elsewhere, e.g. in the switch <b>21</b>, or incorporated in the control logic <b>39</b>. An advantageous use of the ARP detector <b>38</b> will be described later on.</p>
<p id="p-0034" num="0033">The board controller <b>23</b> includes control logic <b>39</b>, which is responsible for the operation of the board controller. The board controller <b>23</b> further includes interface equipment <b>41</b>, which connects the board controller <b>23</b> to the switch <b>21</b>. In this particular embodiment, the interface equipment <b>41</b> provides connections to the internal switch controller <b>27</b> as well as to the switch fabric <b>25</b>. The board controller also includes a preferred destination list <b>43</b>, which has information relating to one or more preferred switching destinations. The preferred destination list <b>43</b> may be stored on an electronic storage device, e.g. a memory such as a RAM. A preferred switching destination is a destination that should take precedence over other destinations for having its switching address and corresponding port identification entered in the switching table <b>31</b>. The preferred switching destinations may be those that would cause the worst cases of flooding in the case of collisions, i.e. normally those destinations that can be expected to receive the highest data rates. In a cellular or other telecom network this would normally be destinations that are responsible for receiving user plane data. For example, in the situation illustrated in <figref idref="DRAWINGS">FIG. 1</figref>, the RBS base band unit <b>11</b> and possibly also the RNC <b>1</b> could be indicated in the preferred destination list <b>43</b>.</p>
<p id="p-0035" num="0034">The preferred destination list <b>43</b> may also be located elsewhere, e.g. in the switch <b>21</b>.</p>
<p id="p-0036" num="0035">An example of a format for the preferred destination list <b>43</b> is illustrated with a table in <figref idref="DRAWINGS">FIG. 5</figref><i>a</i>. Here, the preferred destination list includes information regarding switching address, e.g. a MAC address, and an identification of a switch port connected directly or indirectly to a preferred destination associated with the switching address. The list also includes some general description (purely optional) of each preferred destination in the list. In this particular example, only one preferred destination (the RBS base band unit of <figref idref="DRAWINGS">FIG. 1</figref>) is included in the list. Consequently, the preferred destination list of <figref idref="DRAWINGS">FIG. 5</figref><i>a </i>indicates the MAC address MAC C as the switching address and the port p<b>3</b> as the port that is connected to RBS baseband unit <b>11</b>.</p>
<p id="p-0037" num="0036">Another example format for the preferred destination list <b>43</b> is illustrated with a table in <figref idref="DRAWINGS">FIG. 5</figref><i>b</i>. The list in <figref idref="DRAWINGS">FIG. 5</figref><i>b </i>differs from the list of <figref idref="DRAWINGS">FIG. 5</figref><i>a </i>in that the table includes an IP address for the preferred destination instead of the switching address (e.g MAC address). Here, the switching address (e.g. a MAC address) can be obtained from the IP address, e.g. by using conventional protocols. For example, in an Ethernet embodiment, ARP (Address Resolution Protocol) may be used to obtain the MAC address based on the IP address.</p>
<p id="p-0038" num="0037">Yet another example format for the preferred destination list <b>43</b> is illustrated with a table in <figref idref="DRAWINGS">FIG. 5</figref><i>c</i>. Here, both switching address (here MAC address) and IP address are provided in the list.</p>
<p id="p-0039" num="0038">In the embodiment of <figref idref="DRAWINGS">FIG. 4</figref>, the switch control functionality is divided into an external control and an internal control. This division is merely exemplary, and the switch control may, for example, be completely performed within the switch <b>21</b> or be divided in some other way.</p>
<p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. 6</figref> is a flow chart illustrating a method for handling a switch with a collision-prone switching table according to one embodiment of the invention. The method of <figref idref="DRAWINGS">FIG. 6</figref> could, for example, be performed in the switching arrangement of <figref idref="DRAWINGS">FIG. 4</figref>.</p>
<p id="p-0041" num="0040">In <figref idref="DRAWINGS">FIG. 6</figref>, it is assumed that a preferred destination list is provided. The preferred destination list indicates one or more preferred destinations. After a start <b>51</b>, which could include the providing of the preferred destination list, information relating to a first preferred destination (e.g. the base band unit <b>11</b>) is read from the preferred destination list at a block <b>53</b>. The read information includes the switching address (e.g. MAC C) and the identification of the associated port (e.g. p<b>3</b>) to which the first preferred destination is connected. Alternatively, the switching address may be obtained based an IP address, as explained earlier. The IP address may be provided by the preferred destination list. In the embodiment of <figref idref="DRAWINGS">FIG. 4</figref>, the block <b>53</b> could, for example, be performed by the control logic <b>39</b> of the board controller <b>23</b>. At a block <b>55</b>, a lock order is sent to the switching table. The lock order informs the switching table of the switching address and the associated switch port relating to the first preferred destination. The lock order has the effect that the switching table enters the switching address and the port identification in a position, which is based on the switching address, e.g. through the use of a hash function or other look-up algorithm. The order also has the effect that the switching table locks this position, e.g. by setting a lock bit to indicate that the position is locked. This means that the entry relating to the first preferred destination may not be changed, e.g. by the aging process or otherwise. In the embodiment of <figref idref="DRAWINGS">FIG. 4</figref>, the lock order could, for example, be generated by the control logic <b>39</b> of the board controller <b>23</b> and transmitted to the switching table <b>31</b> via the interface equipment <b>41</b> and the internal switch controller <b>27</b>. At a block <b>57</b>, it is determined whether the preferred destination list includes more preferred destinations. If so, the method returns to block <b>53</b> and performs the actions of blocks <b>53</b> and <b>55</b> with respect to the next preferred destination in the list. This is continued until all preferred destinations in the list have been processed, after which the method stops at <b>59</b>.</p>
<p id="p-0042" num="0041">Although somewhat unlikely, it may happen that the switching addresses of two (or more) preferred destinations are associated with the same position in the switching table (collision). It is, therefore, advisable to introduce some form of importance ranking of the preferred destinations. For example, based on this ranking, the preferred destinations may be arranged so that the most important preferred destination (e.g. the worst case of flooding) is the first preferred destination in the list, any other preferred destinations being arranged in descending order of importance after the most important preferred destination. This will guarantee that a more important preferred destination always takes precedence in the switching table over a less important preferred destination. This procedure is summarized with a simple flow chart in <figref idref="DRAWINGS">FIG. 8</figref>. At a block <b>71</b>, the preferred destinations are ranked according to importance. The preferred destinations are thereafter ordered in the preferred destination list based on the importance ranking at a block <b>73</b>.</p>
<p id="p-0043" num="0042"><figref idref="DRAWINGS">FIG. 7</figref> is a flow chart illustrating a method for handling a switch with a collision-prone switching table according to another embodiment of the invention. The method of <figref idref="DRAWINGS">FIG. 7</figref> could, for example, be performed in the switching arrangement of <figref idref="DRAWINGS">FIG. 4</figref>. The method of <figref idref="DRAWINGS">FIG. 7</figref> has several blocks in common with the method of <figref idref="DRAWINGS">FIG. 6</figref>; these blocks have been given the same reference numerals as in <figref idref="DRAWINGS">FIG. 6</figref> and will not be explained a second time. The method of <figref idref="DRAWINGS">FIG. 7</figref> introduces two new aspects, which can be used independently of each other. First, the method takes into consideration that a preferred destination may not originally be privy to its own switching address. Second, the method takes into account that a switching address for a preferred destination may subsequently be changed. Consequently, at a block <b>54</b><i>a</i>, it is determined whether a preferred destination should be informed of its switching address from the preferred destination list. This may be determined from information included in the preferred destination list or from information obtained elsewhere. If it is determined that the preferred destination under consideration should be informed of the switching address, the switching address is sent to the preferred destination at a block <b>54</b><i>b</i>. In the embodiment of <figref idref="DRAWINGS">FIG. 4</figref>, the blocks <b>54</b><i>a </i>and <b>54</b><i>b </i>could, for example be performed or initiated by the control logic <b>39</b> in the board controller <b>23</b>. In some types of systems, it may be possible to allocate a new switching address for a destination. Therefore, at a block <b>61</b>, it is detected that a new switching address has been allocated to a destination that is in the preferred destination list. In response to the detection at the block <b>61</b>, the preferred destination list is updated with the new switching address. After the preferred destination list has been updated, an updated lock order is sent to the switching table at a block <b>65</b>. The updated lock order causes the switching table entry where the previous switching address is entered to be unlocked; this entry is then allowed to be overwritten and may eventually be marked as invalid by the aging process. The updated lock order also causes the new switching address and the corresponding port identification to be entered into the switching table. In a particular embodiment, the allocation of the new switching address may be detected through ARP, gratuitous ARP, or similar messages. ARP (Address Resolution Protocol) is an Ethernet protocol (specified in IETF RFC 826) used to find which MAC address to use for reaching a destination having a given IP address. Gratuitous ARP is a special case where an Ethernet node announces its IP address to inform that a new MAC address is to be used for reaching this IP address. This makes the change effective immediately, since all nodes on the Ethernet will receive the gratuitous ARP and can update a local copy of the MAC address to use for reaching the announced IP address. As mentioned above, the preferred destination list may provide at least one IP address for any preferred destination in the list, thus aiding in the detection of a new MAC address. With the particular embodiment of <figref idref="DRAWINGS">FIG. 4</figref>, the above-mentioned ARP based detection of the new switching address may of course be performed by the ARP detector <b>38</b>.</p>
<p id="p-0044" num="0043">The present invention makes it possible to provide simple and low-cost switching and switching equipment which do not suffer to any great extent from difficulties that can otherwise be associated with flooding. The invention can be applied in many systems and scenarios. For example, the invention can be advantageously applied in cellular and other telecom oriented networks. In particular, the invention can be used to avoid flooding from destinations that receive high data rates, e.g. destinations that are responsible for receiving user plane data.</p>
<p id="p-0045" num="0044">VLAN (Virtual LAN) systems constitute another application for the invention. VLAN is an add-on to the Ethernet standard where a VLAN identity tag is added to each Ethernet frame. This makes it possible for one physical Ethernet switch to act as up to 4096 virtual switches. An operator can, therefore, run up to 4096 logically independent networks on one physical network. Flooding effects will be mitigated since flooding will stay within one VLAN. However, the risk of collision will generally increase since all VLANs share the same physical switching table.</p>
<p id="p-0046" num="0045">Above, the invention has been described using various embodiments. The described and indicated embodiments are, however, intended only as non-limiting examples. Instead, the scope of protection is defined by the appending claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method for handling a switch with a collision-prone switching table, the method comprising:
<claim-text>providing a preferred destination list indentifying one or more preferred switching destinations; and</claim-text>
<claim-text>for each preferred destination in the preferred destination list:
<claim-text>obtaining a switching address and a corresponding switching port identification for the preferred switching destination; and</claim-text>
<claim-text>ordering the obtained switching address and the corresponding switching port identification to be entered and locked into the collision-prone switching table.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the switch is connected to one or more destinations in a radio base station for a cellular communication system.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein providing the preferred destination list comprises providing a preferred destination list that indicates at least one destination in the radio base station as a preferred switching destination.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method according to <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein the indicated at least one preferred destination in the radio base station comprises a destination that is responsible for receiving user plane data.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method according <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein the user plane data emanates from a network control node.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein ordering the obtained switching address and the corresponding switching port identification to be entered and locked into the collision-prone switching table comprises obtaining the switching address and the corresponding switching port identification from the preferred destination list.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the preferred destination list comprises an IP address for a preferred switching destination in the preferred destination list, and wherein obtaining the switching address and the corresponding switching port identification for the preferred switching destination comprises using the IP address for obtaining the switching address of the preferred switching destination having that IP address.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the method further comprises informing at least one preferred switching destination indicated in the preferred destination list of its switching address.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the method further comprises:
<claim-text>detecting that a new switching address has been allocated to a switching destination indicated in the preferred destination list; and</claim-text>
<claim-text>updating the preferred destination list and the collision-prone switching table based on the new switching address.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the method further comprises providing an importance ranking of the one or more preferred switching destinations.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The method according to <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the one or more preferred switching destinations are ordered in the preferred destination list based on the importance ranking.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. A switching arrangement comprising:
<claim-text>a switch with a collision-prone switching table;</claim-text>
<claim-text>a preferred destination list identifying one or more preferred switching destinations; and</claim-text>
<claim-text>a controller configured to obtain for each preferred switching destination in the preferred destination list a switching address and a corresponding switching port identification and to generate an order to enter and lock the obtained switching address and corresponding switching port identification into the collision-prone switching table.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The switching arrangement according to <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein the switch is capable of being connected to one or more destinations in a radio base station for a cellular communication system.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The switching arrangement according to <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the preferred destination list indicates at least one destination in the radio base station as a preferred switching destination.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The switching arrangement according to <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein the indicated at least one preferred switching destination in the radio base station comprises a destination that is responsible for receiving user plane data.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The switching arrangement according to <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the switch is capable of being connected to a control node transmitting the user plane data.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The switching arrangement according to <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein the controller is configured to obtain the switching address and the corresponding switching port identification from the preferred destination list (<b>43</b>).</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The switching arrangement according to <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein the preferred destination list comprises an IP address for a preferred switching destination in the list, and wherein the controller is configured to use the IP address to obtain the switching address for the preferred switching destination having that IP address.</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The switching arrangement according to <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein the controller is configured to inform at least one preferred switching destination indicated in the preferred destination list of the switching address obtained by the controller.</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The switching arrangement according to <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein:
<claim-text>the switching arrangement further comprises a detector configured to detect that a new switching address has been allocated to a preferred switching destination indicated in the preferred destination list; and wherein</claim-text>
<claim-text>the controller is configured to initiate updating of the preferred destination list and the collision-prone switching table based on the new switching address.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. The switching arrangement according to <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein the one or more preferred switching destinations are ordered in the preferred destination list based on an importance ranking.</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the collision-prone switching table stores destination addresses at positions within the table, wherein more than one destination address can be mapped to a same position in the table.</claim-text>
</claim>
<claim id="CLM-00023" num="00023">
<claim-text>23. The method according to <claim-ref idref="CLM-00022">claim 22</claim-ref>, wherein positions in the collision-prone switching table are associated with destination addresses by hashing and/or truncation look-up.</claim-text>
</claim>
<claim id="CLM-00024" num="00024">
<claim-text>24. The switching arrangement according to <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein the collision-prone switching table stores destination addresses at positions within the table, wherein more than one destination address can be mapped to a same position in the table.</claim-text>
</claim>
<claim id="CLM-00025" num="00025">
<claim-text>25. The switching arrangement of <claim-ref idref="CLM-00024">claim 24</claim-ref>, wherein positions in the collision-prone switching table are associated with destination addresses by hashing and/or truncation look-up. </claim-text>
</claim>
</claims>
</us-patent-grant>
