<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08626503-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08626503</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12882862</doc-number>
<date>20100915</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="regional">
<country>EP</country>
<doc-number>05106466</doc-number>
<date>20050714</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>536</us-term-extension>
<disclaimer>
<text>This patent is subject to a terminal disclaimer.</text>
</disclaimer>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20130101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>10</class>
<subclass>L</subclass>
<main-group>21</main-group>
<subgroup>04</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>704228</main-classification>
<further-classification>704500</further-classification>
</classification-national>
<invention-title id="d2e73">Audio encoding and decoding</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5579430</doc-number>
<kind>A</kind>
<name>Grill et al.</name>
<date>19961100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>5706309</doc-number>
<kind>A</kind>
<name>Eberlein et al.</name>
<date>19980100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>6539357</doc-number>
<kind>B1</kind>
<name>Sinha</name>
<date>20030300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>6625218</doc-number>
<kind>B1</kind>
<name>Iganami</name>
<date>20030900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>7502743</doc-number>
<kind>B2</kind>
<name>Thumpudi et al.</name>
<date>20090300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>7573912</doc-number>
<kind>B2</kind>
<name>Lindblom</name>
<date>20090800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370487</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>7720676</doc-number>
<kind>B2</kind>
<name>Philippe et al.</name>
<date>20100500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2004/0044527</doc-number>
<kind>A1</kind>
<name>Thumpudi et al.</name>
<date>20040300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2004/0049379</doc-number>
<kind>A1</kind>
<name>Thumpudi et al.</name>
<date>20040300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>2004/0125960</doc-number>
<kind>A1</kind>
<name>Fosgate et al.</name>
<date>20040700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>381 20</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>2005/0058304</doc-number>
<kind>A1</kind>
<name>Baumgarte et al.</name>
<date>20050300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>381 98</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>2005/0074127</doc-number>
<kind>A1</kind>
<name>Herre et al.</name>
<date>20050400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>2005/0177360</doc-number>
<kind>A1</kind>
<name>Schuijers et al.</name>
<date>20050800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>2006/0009225</doc-number>
<kind>A1</kind>
<name>Herre et al.</name>
<date>20060100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455450</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>2006/0165184</doc-number>
<kind>A1</kind>
<name>Purnhagen et al.</name>
<date>20060700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>375242</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>2006/0239473</doc-number>
<kind>A1</kind>
<name>Kjorling et al.</name>
<date>20061000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>381 98</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>2006/0265087</doc-number>
<kind>A1</kind>
<name>Philippe et al.</name>
<date>20061100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00018">
<document-id>
<country>US</country>
<doc-number>2007/0183601</doc-number>
<kind>A1</kind>
<name>Van Loon et al.</name>
<date>20070800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00019">
<document-id>
<country>US</country>
<doc-number>2007/0233467</doc-number>
<kind>A1</kind>
<name>Oshikiri</name>
<date>20071000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00020">
<document-id>
<country>US</country>
<doc-number>2008/0195397</doc-number>
<kind>A1</kind>
<name>Myburg et al.</name>
<date>20080800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>704500</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00021">
<document-id>
<country>EP</country>
<doc-number>1107232</doc-number>
<kind>A2</kind>
<date>20010600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00022">
<document-id>
<country>EP</country>
<doc-number>0957639</doc-number>
<date>20061200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00023">
<document-id>
<country>JP</country>
<doc-number>11-330980</doc-number>
<date>19991100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00024">
<document-id>
<country>JP</country>
<doc-number>2001-268697</doc-number>
<date>20010900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00025">
<document-id>
<country>JP</country>
<doc-number>2004-264810</doc-number>
<date>20040900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00026">
<document-id>
<country>JP</country>
<doc-number>2004-264811</doc-number>
<date>20040900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00027">
<document-id>
<country>JP</country>
<doc-number>2008-521009</doc-number>
<date>20090100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00028">
<document-id>
<country>JP</country>
<doc-number>2010-254409</doc-number>
<date>20110300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00029">
<document-id>
<country>RU</country>
<doc-number>2129336</doc-number>
<kind>C1</kind>
<date>19990400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00030">
<document-id>
<country>RU</country>
<doc-number>2141166</doc-number>
<kind>C1</kind>
<date>19991100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00031">
<document-id>
<country>RU</country>
<doc-number>2005104123</doc-number>
<date>20050700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00032">
<document-id>
<country>RU</country>
<doc-number>2327304</doc-number>
<date>20080600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00033">
<document-id>
<country>RU</country>
<doc-number>2396608</doc-number>
<date>20100900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00034">
<document-id>
<country>WO</country>
<doc-number>WO-03090208</doc-number>
<date>20031000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00035">
<document-id>
<country>WO</country>
<doc-number>WO 2004/008805</doc-number>
<date>20040100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00036">
<document-id>
<country>WO</country>
<doc-number>WO 2005101370</doc-number>
<kind>A1</kind>
<date>20051000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-cpc-text>G10L 19/00</classification-cpc-text>
</us-citation>
<us-citation>
<nplcit num="00037">
<othercit>Herre, et al.; &#x201c;The Reference Model Architecture for MPEG Spatial Audio Coding&#x201d;; May 28-31, 2005; AES Convention Paper 6447, Presented at the 118th Convention; Barcelona, Spain.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00038">
<othercit>Russian Decision to Grant with English Translation, mailed Oct. 22, 2010, in related Russian patent application No. 2008105556/09(006016), 22 pages.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00039">
<othercit>Eshet, et al.; &#x201c;Multistage Quanitzation via Conditional Hierarchical Mapping&#x201d;; ACSSC Nov. 2003; pp. 860-864, vol. 1.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>14</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>7042001</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>704219-230</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>704500-504</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>11</number-of-drawing-sheets>
<number-of-figures>16</number-of-figures>
</figures>
<us-related-documents>
<continuation-in-part>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>11995538</doc-number>
</document-id>
<parent-grant-document>
<document-id>
<country>US</country>
<doc-number>7966191</doc-number>
</document-id>
</parent-grant-document>
<parent-pct-document>
<document-id>
<country>WO</country>
<doc-number>PCT/IB2006/052309</doc-number>
<date>20060707</date>
</document-id>
</parent-pct-document>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>12882862</doc-number>
</document-id>
</child-doc>
</relation>
</continuation-in-part>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20110091045</doc-number>
<kind>A1</kind>
<date>20110421</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Schuijers</last-name>
<first-name>Erik Gosuinus Petrus</first-name>
<address>
<city>Eindhoven</city>
<country>NL</country>
</address>
</addressbook>
<residence>
<country>NL</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Hotho</last-name>
<first-name>Gerard Herman</first-name>
<address>
<city>Eindhove</city>
<country>NL</country>
</address>
</addressbook>
<residence>
<country>NL</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Purnhagen</last-name>
<first-name>Heiko</first-name>
<address>
<city>Sundbyberg</city>
<country>SE</country>
</address>
</addressbook>
<residence>
<country>SE</country>
</residence>
</us-applicant>
<us-applicant sequence="004" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Schildbach</last-name>
<first-name>Wolfgang Alexander</first-name>
<address>
<city>Nuremberg</city>
<country>DE</country>
</address>
</addressbook>
<residence>
<country>DE</country>
</residence>
</us-applicant>
<us-applicant sequence="005" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Horich</last-name>
<first-name>Holger</first-name>
<address>
<city>Fuerth</city>
<country>DE</country>
</address>
</addressbook>
<residence>
<country>DE</country>
</residence>
</us-applicant>
<us-applicant sequence="006" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Kjoerling</last-name>
<first-name>Hans Magnus Kristofer</first-name>
<address>
<city>Solna</city>
<country>SE</country>
</address>
</addressbook>
<residence>
<country>SE</country>
</residence>
</us-applicant>
<us-applicant sequence="007" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Roeden</last-name>
<first-name>Karl Jonas</first-name>
<address>
<city>Solna</city>
<country>SE</country>
</address>
</addressbook>
<residence>
<country>SE</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Schuijers</last-name>
<first-name>Erik Gosuinus Petrus</first-name>
<address>
<city>Eindhoven</city>
<country>NL</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Hotho</last-name>
<first-name>Gerard Herman</first-name>
<address>
<city>Eindhove</city>
<country>NL</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Purnhagen</last-name>
<first-name>Heiko</first-name>
<address>
<city>Sundbyberg</city>
<country>SE</country>
</address>
</addressbook>
</inventor>
<inventor sequence="004" designation="us-only">
<addressbook>
<last-name>Schildbach</last-name>
<first-name>Wolfgang Alexander</first-name>
<address>
<city>Nuremberg</city>
<country>DE</country>
</address>
</addressbook>
</inventor>
<inventor sequence="005" designation="us-only">
<addressbook>
<last-name>Horich</last-name>
<first-name>Holger</first-name>
<address>
<city>Fuerth</city>
<country>DE</country>
</address>
</addressbook>
</inventor>
<inventor sequence="006" designation="us-only">
<addressbook>
<last-name>Kjoerling</last-name>
<first-name>Hans Magnus Kristofer</first-name>
<address>
<city>Solna</city>
<country>SE</country>
</address>
</addressbook>
</inventor>
<inventor sequence="007" designation="us-only">
<addressbook>
<last-name>Roeden</last-name>
<first-name>Karl Jonas</first-name>
<address>
<city>Solna</city>
<country>SE</country>
</address>
</addressbook>
</inventor>
</inventors>
</us-parties>
<examiners>
<primary-examiner>
<last-name>Azad</last-name>
<first-name>Abul</first-name>
<department>2657</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">An audio encoder (<b>109</b>) has a hierarchical encoding structure and generates a data stream comprising one or more audio channels as well as parametric audio encoding data. The encoder (<b>109</b>) comprises an encoding structure processor (<b>305</b>) which inserts decoder tree structure data into the data stream. The decoder tree structure data comprises at least one data value indicative of a channel split characteristic for an audio channel at a hierarchical layer of the hierarchical decoder structure and may specifically specify the decoder tree structures to be applied by a decoder. A decoder (<b>115</b>) comprises a receiver (<b>401</b>) which receives the data stream and a decoder structure processor (<b>405</b>) for generating the hierarchical decoder structure in response to the decoder tree structure data. A decode processor (<b>403</b>) then generates output audio channels from the data stream using the hierarchical decoder structure.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="124.97mm" wi="164.00mm" file="US08626503-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="215.90mm" wi="174.07mm" orientation="landscape" file="US08626503-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="209.72mm" wi="160.78mm" orientation="landscape" file="US08626503-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="199.39mm" wi="161.88mm" file="US08626503-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="213.70mm" wi="179.83mm" file="US08626503-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="226.48mm" wi="177.97mm" file="US08626503-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="203.79mm" wi="182.46mm" file="US08626503-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="218.02mm" wi="186.10mm" file="US08626503-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="215.65mm" wi="183.05mm" file="US08626503-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="199.22mm" wi="161.37mm" file="US08626503-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="183.98mm" wi="137.24mm" file="US08626503-20140107-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="180.00mm" wi="172.13mm" file="US08626503-20140107-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">CROSS REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This application is a continuation-in-part of U.S. patent application Ser. No. 11/995,538, filed Jan. 13, 2008, which claims priority from PCT/IB06/52309, filed Jul. 7, 2006, and claims priority to European Patent Application No. 05106466.5 filed Jul. 14, 2006, each of which is incorporated by this reference thereto.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0003" num="0002">1. Technical Field</p>
<p id="p-0004" num="0003">The invention relates to audio encoding and/or decoding using hierarchical encoding structures and/or hierarchical decoder structures.</p>
<p id="p-0005" num="0004">2. Description of the Prior Art</p>
<p id="p-0006" num="0005">In the field of audio processing, it is well known to convert a number of audio channels into another, larger number of audio channels. Such a conversion may be performed for various reasons. For example, an audio signal may be converted into another format to provide an enhanced user experience. E.g. traditional stereo recordings only comprise two channels whereas modern advanced audio systems typically use five or six channels, as in the popular 5.1 surround sound systems. Accordingly, the two stereo channels may be converted into five or six channels in order to take full advantage of the advanced audio system.</p>
<p id="p-0007" num="0006">Another reason for a channel conversion is coding efficiency. It has been found that e.g. stereo audio signals can be encoded as single channel audio signals combined with a parameter bit stream describing the spatial properties of the audio signal. The decoder can reproduce the stereo audio signals with a very satisfactory degree of accuracy. In this way, substantial bit rate savings may be obtained.</p>
<p id="p-0008" num="0007">There are several parameters which may be used to describe the spatial properties of audio signals. One such parameter is the inter-channel cross-correlation, such as the cross-correlation between the left channel and the right channel for stereo signals. Another parameter is the power ratio of the channels. In so-called (parametric) spatial audio (en)coders these and other parameters are extracted from the original audio signal so as to produce an audio signal having a reduced number of channels, for example only a single channel, plus a set of parameters describing the spatial properties of the original audio signal. In so-called (parametric) spatial audio decoders, the original audio signal is reconstructed.</p>
<p id="p-0009" num="0008">Spatial Audio Coding is a recently introduced technique to efficiently code multi-channel audio material. In Spatial Audio Coding, an M-channel audio signal is described as an N-channel audio signal plus a set of corresponding spatial parameters where N is typically smaller than M. Hence, in the Spatial Audio encoder the M-channel signal is down-mixed to an N-channel signal and the spatial parameters are extracted. In the decoder, the N-channel signal and the spatial parameters are employed to (perceptually) reconstruct the M-channel signal.</p>
<p id="p-0010" num="0009">Such spatial audio coding preferably employs a cascaded or tree-based hierarchical structure comprising standard units in the encoder and the decoder. In the encoder, these standard units can be down-mixers combining channels into a lower number of channels such as 2-to-1, 3-to-1, 3-to-2, etc. down-mixers, while in the decoder corresponding standard units can be up-mixers splitting channels into a higher number of channels such as 1-to-2, 2-to-3 up-mixers.</p>
<p id="p-0011" num="0010">However, a problem with such an approach is that the decoder structure must match the structure of the encoder. Although this may be achieved by the use of a standardized encoder and decoder structure, such an approach is inflexible and will tend to result in suboptimal performance.</p>
<p id="p-0012" num="0011">Hence, an improved system would be advantageous and in particular a system allowing increased flexibility, reduced complexity and/or improved performance would be advantageous.</p>
<p id="p-0013" num="0012">Accordingly, the Invention seeks to preferably mitigate, alleviate or eliminate one or more of the above mentioned disadvantages singly or in any combination.</p>
<p id="p-0014" num="0013">According to a first aspect of the invention there is provided an apparatus for generating a number of output audio channels; the apparatus comprising: means for receiving a data stream comprising a number of input audio channels and parametric audio data; the data stream further comprising decoder tree structure data for a hierarchical decoder structure, the decoder tree structure data comprising at least one data value indicative of channel split characteristics for an audio channel at a hierarchical layer of the hierarchical decoder structure; means for generating the hierarchical decoder structure in response to the decoder tree structure data; and means for generating the number of output audio channels from the data stream using the hierarchical decoder structure.</p>
<p id="p-0015" num="0014">The invention may allow a flexible generation of audio channels and may in particular allow a decoder functionality to adapt to an encoder structure used for generating the data stream. The invention may e.g. allow an encoder to select a suitable encoding approach for a multi-channel signal while allowing the apparatus to automatically adapt thereto. The invention may allow a data stream having an improved quality to bit-rate ratio. In particular, the invention may allow automatic adaptation and/or a high degree of flexibility while providing the improved audio quality achievable from hierarchical encoding/decoding structures. The invention may furthermore allow an efficient communication of information of the hierarchical decoder structure. Specifically, the invention may allow a low overhead for the decoder tree structure data. The invention may provide an apparatus which automatically adapts to the received bit-stream and which may be used with any suitable hierarchical encoding structure.</p>
<p id="p-0016" num="0015">Each audio channel may support an individual audio signal. The data stream may be a single bit-stream or may e.g. be a combination of a plurality of sub-bit-stream for example distributed through different distribution channels. The data stream may have a limited duration such as a fixed duration corresponding to a data file of a given size. The channel split characteristic may be a characteristic indicative of how many channels a given audio channel is split into at a hierarchical layer. For example, the channel split characteristic may reflect if a given audio channel is not divided or whether it is divided into two audio channels.</p>
<p id="p-0017" num="0016">The decoder tree structure data may comprise data for the hierarchical decoder structure of a plurality of audio channels. Specifically, the decoder tree structure data may comprise a set of data for each of the number of input audio channels. For example, the decoder tree structure data may comprise data for a decoder tree structure for each input signal.</p>
<p id="p-0018" num="0017">According to an optional feature of the invention, the decoder tree structure data comprises a plurality of data values, each data value indicative of a channel split characteristic for one channel at one hierarchical layer of the hierarchical decoder structure.</p>
<p id="p-0019" num="0018">This may provide for an efficient communication of data allowing the apparatus to adapt to the encoding used for the data stream. The decoder tree structure data may specifically comprise one data value for each channel split function in the hierarchical decoder structure. The decoder tree structure data may also comprise one data value for each output channel indicating that no further channel splits occur for a given hierarchical layer signal.</p>
<p id="p-0020" num="0019">According to an optional feature of the invention, a predetermined data value is indicative of no channel split for the channel at the hierarchical layer.</p>
<p id="p-0021" num="0020">This may provide for an efficient communication of data allowing the apparatus to effectively and reliably adapt to the encoding used for the data stream.</p>
<p id="p-0022" num="0021">According to an optional feature of the invention, a predetermined data value is indicative of a one-to-two channel split for the channel at the hierarchical layer.</p>
<p id="p-0023" num="0022">This may provide for an efficient communication of data allowing the apparatus to effectively and reliably adapt to the encoding used for the data stream. In particular, this may allow very efficient information transfer for many hierarchical systems using low complexity standard channel split functions.</p>
<p id="p-0024" num="0023">According to an optional feature of the invention, the plurality of data values are binary data values.</p>
<p id="p-0025" num="0024">This may provide for an efficient communication of data allowing the apparatus to effectively and reliably adapt to the encoding used for the data stream. In particular, this may allow very efficient information transfer for systems mainly using one specific channel split functionality, such as a one-to-two channel split functionality.</p>
<p id="p-0026" num="0025">According to an optional feature of the invention, one predetermined binary data value is indicative of a one-to-two channel split and another predetermined binary data value is indicative of no channel split.</p>
<p id="p-0027" num="0026">This may provide for an efficient communication of data allowing the apparatus to effectively and reliably adapt to the encoding used for the data stream. In particular, this may allow very efficient information transfer for systems based around a low complexity one-to-two channel split functionality. An efficient decoding may be achieved by a low complexity hierarchical decoder structure which may be generated in response to low complexity data. The feature may allow a low overhead for the communication of decoder tree structure data and may be particularly suited for data streams encoded by a simple encoding function.</p>
<p id="p-0028" num="0027">According to an optional feature of the invention, the data stream further comprises an indication of the number of input channels.</p>
<p id="p-0029" num="0028">This may facilitate the decoding and the generation of the decoding structure and/or may allow a more efficient encoding of information of the hierarchical decoder structure in the decoder tree structure data. In particular, the means for generating the hierarchical decoder structure may do so in response to the indication of the number of input channels. For example, in many practical situations the number of input channels can be derived from the data-stream), however in some special cases the audio and parameters data may be separated. In such cases it may be beneficial if the number of input channels is known as the data stream data might have been manipulated (e.g. downmixed from stereo to mono).</p>
<p id="p-0030" num="0029">According to an optional feature of the invention, the data stream further comprises an indication of the number of output channels.</p>
<p id="p-0031" num="0030">This may facilitate the decoding and the generation of the decoding structure and/or may allow a more efficient encoding of information of the hierarchical decoder structure in the decoder tree structure data. In particular, the means for generating the hierarchical decoder structure may do so in response to the indication of the number of output channels. Also, the indication may be used as an error check of the decoder tree structure data.</p>
<p id="p-0032" num="0031">According to an optional feature of the invention, the data stream comprises an indication of a number of one-to-two channel split functions in the hierarchical decoder structure.</p>
<p id="p-0033" num="0032">This may facilitate the decoding and the generation of the decoding structure and/or may allow a more efficient encoding of information of the hierarchical decoder structure in the decoder tree structure data. In particular, the means for generating the hierarchical decoder structure may do so in response to the indication of number of one-to-two channel split functions in the hierarchical decoder structure.</p>
<p id="p-0034" num="0033">According to an optional feature of the invention, the data stream further comprises an indication of a number of two-to-three channel split functions in the hierarchical decoder structure.</p>
<p id="p-0035" num="0034">This may facilitate the decoding and the generation of the decoding structure and/or may allow a more efficient encoding of information of the hierarchical decoder structure in the decoder tree structure data. In particular, the means for generating the hierarchical decoder structure may do so in response to the indication of the number of two-to-three channel split functions in the hierarchical decoder structure.</p>
<p id="p-0036" num="0035">According to an optional feature of the invention, the decoder tree structure data comprises a data for a plurality of decoder tree structures ordered in response to the presence of a two-to-three channel split functionality.</p>
<p id="p-0037" num="0036">This may facilitate the decoding and the generation of the decoding structure and/or may allow a more efficient encoding of information of the hierarchical decoder structure in the decoder tree structure data. In particular, the feature may allow advantageous performance in systems wherein two-to-three channel splits may only occur at the root layer. E.g. the means for generating the hierarchical decoder structure may first generate the two-to-three split functionality for two input channels followed by the generation of the remaining structure using only one-to-two channel split functionality. The remaining structure may specifically be generated in response to the binary decoder tree structure data thus reducing the required bit rate. The data stream may further contain information of the ordering of the plurality of decoder tree structures.</p>
<p id="p-0038" num="0037">According to an optional feature of the invention, the decoder tree structure data for at least one input channel comprises an indication of a two-to-three channel split function being present at the root layer followed by binary data where each binary data value is indicative of either no split functionality or a one-to-two channel split functionality for dependent layers of the two-to-three split functionality.</p>
<p id="p-0039" num="0038">This may facilitate the decoding and the generation of the decoding structure and/or may allow a more efficient encoding of information of the hierarchical decoder structure in the decoder tree structure data. In particular, the feature may allow advantageous performance in systems where two-to-three channel splits may only occur at the root layer. E.g. the means for generating the hierarchical decoder structure may first generate the two-to-three split functionality for an input channel followed by the generation of the remaining structure using only one-to-two channel split functionality. The remaining structure may specifically be generated in response to binary decoder tree structure data thus reducing the required bit rate.</p>
<p id="p-0040" num="0039">According to an optional feature of the invention, the data stream comprises an indication of a loudspeaker position for at least one of the output channels.</p>
<p id="p-0041" num="0040">This may allow facilitated decoding and may allow improved performance and/or adaptation of the apparatus thus providing increased flexibility.</p>
<p id="p-0042" num="0041">According to an optional feature of the invention, the means for generating the hierarchical decoder structure is arranged to determine multiplication parameters for channel split functions of the hierarchical layers in response to the decoder tree structure data.</p>
<p id="p-0043" num="0042">This may allow improved performance and/or an improved adaptation/flexibility. In particular, the feature may allow not only the hierarchical decoder structure but also the operation of the channel split functions to adapt to the received data stream. The multiplication parameters may be matrix multiplication parameters.</p>
<p id="p-0044" num="0043">According to an optional feature of the invention, the decoder tree structure comprises at least one channel split functionality in at least one hierarchical layer, the at least one channel split functionality comprising: de-correlation means for generating a de-correlated signal directly from an audio input channel of the data stream; at least one channel split unit for generating a plurality of hierarchical layer output channels from an audio channel from a higher hierarchical layer and the de-correlated signal; and means for determining at least one characteristic of the de-correlation filter or the channel split unit in response to the decoder tree structure data.</p>
<p id="p-0045" num="0044">This may allow improved performance and/or an improved adaptation/flexibility. In particular, the feature may allow a hierarchical decoder structure which has improved decoding performance and which may generate output channels having increased audio quality. In particular, a hierarchical decoder structure wherein no de-correlation signals are generated by cascaded de-correlation filters may be achieved and dynamically and automatically adapted to the received data stream.</p>
<p id="p-0046" num="0045">The de-correlation filter receives the audio input channel of the data stream without modifications, and specifically without any prior filtering of the signal (such as by another de-correlation filter). The gain of the de-correlation filter may specifically be determined in response to the decoder tree structure data.</p>
<p id="p-0047" num="0046">According to an optional feature of the invention, the de-correlation means comprises a level compensation means for performing an audio level compensation on the audio input channel to generate a level compensated audio signal; and a de-correlation filter for filtering the level compensated audio signal to generate the de-correlated signal.</p>
<p id="p-0048" num="0047">This may allow improved quality and/or facilitated implementation.</p>
<p id="p-0049" num="0048">According to an optional feature of the invention, the level compensation means comprises a matrix multiplication by a pre-matrix. This may allow an efficient implementation.</p>
<p id="p-0050" num="0049">According to an optional feature of the invention, the coefficients of the pre-matrix have at least one unity value for a hierarchical decoder structure comprising only one-to-two channel split functionality.</p>
<p id="p-0051" num="0050">This may reduce complexity and allow an efficient implementation. The hierarchical decoder structure may comprise other functionality than the one-to-two channel split functionality but will in accordance with this feature not comprise any other channel split functionality.</p>
<p id="p-0052" num="0051">According to an optional feature of the invention, the apparatus further comprises means for determining the pre-matrix for the at least one channel split functionality in the at least one hierarchical layer in response to parameters of a channel split functionality in a higher hierarchical layer.</p>
<p id="p-0053" num="0052">This may allow efficient implementation and/or improved performance. The channel split functionality in a higher hierarchical layer may include a two-to-three channel split functionality e.g. located at the root layer of a decoder tree structure.</p>
<p id="p-0054" num="0053">According to an optional feature of the invention, the apparatus comprises means for determining a channel split matrix for the at least one channel split functionality in response to parameters of the at least one channel split functionality in the at least one hierarchical layer.</p>
<p id="p-0055" num="0054">This may allow efficient implementation and/or improved performance. This may be particular advantageous for hierarchical decoder tree structures comprising only one-to-two channel split functionality.</p>
<p id="p-0056" num="0055">According to an optional feature of the invention, the apparatus further comprises means for determining the pre-matrix for the at least one channel split functionality in the at least one hierarchical layer in response to parameters of a two-to-three up-mixer of a higher hierarchical layer.</p>
<p id="p-0057" num="0056">This may allow efficient implementation and/or improved performance. This may be particular advantageous for hierarchical decoder tree structures comprising a two-to-three channel split functionality at the root layer of a decoder tree structure.</p>
<p id="p-0058" num="0057">According to an optional feature of the invention, the means for determining the pre-matrix is arranged to determine the pre-matrix for the at least one channel split functionality in response to determine a first sub-pre-matrix corresponding to a first input of the two-to-three up-mixer and a second sub-pre-matrix corresponding to a second input of the two-to-three up-mixer.</p>
<p id="p-0059" num="0058">This may allow efficient implementation and/or improved performance. This may be particularly advantageous for hierarchical decoder tree structures comprising a two-to-three channel split functionality at the root layer of a decoder tree structure.</p>
<p id="p-0060" num="0059">According to another aspect of the invention, there is provided an apparatus for generating a data stream comprising a number output audio channels, the apparatus comprising: means for receiving a number of input audio channels; hierarchical encoding means for parametrically encoding the number of input audio channels to generate the data stream comprising the number of output audio channels and parametric audio data; means for determining a hierarchical decoder structure corresponding to the hierarchical encoding means; and means for including decoder tree structure data comprising at least one data value indicative of a channel split characteristic for an audio channel at a hierarchical layer of the hierarchical decoder structure in the data stream.</p>
<p id="p-0061" num="0060">According to another aspect of the invention, there is provided a data stream comprising: a number of encoded audio channels; parametric audio data; and decoder tree structure data for a hierarchical decoder structure, the decoder tree structure data comprising at least one data value indicative of channel split characteristics for audio channels at hierarchical layers of the hierarchical decoder structure.</p>
<p id="p-0062" num="0061">According to another aspect of the invention, there is provided a storage medium having stored thereon a signal as described above.</p>
<p id="p-0063" num="0062">According to another aspect of the invention, there is provided a method of generating a number of output audio channels; the method comprising: receiving a data stream comprising a number of input audio channels and parametric audio data; the data stream further comprising decoder tree structure data for a hierarchical decoder structure, the decoder tree structure data comprising at least on data value indicative of channel split characteristics for an audio channel at a hierarchical layer of the hierarchical decoder structure; generating the hierarchical decoder structure in response to the decoder tree structure data; and generating the number of output audio channels from the data stream using the hierarchical decoder structure.</p>
<p id="p-0064" num="0063">According to another aspect of the invention, there is provided a method of generating a data stream comprising a number of output audio channels, the method comprising: receiving a number of input audio channels; hierarchical encoding means parametrically encoding the number of input audio channels to generate the data stream comprising the number of output audio channels and parametric audio data; determining a hierarchical decoder structure corresponding to the hierarchical encoding means; and including decoder tree structure data comprising at least one data value indicative of a channel split characteristic for an audio channel at a hierarchical layer of the hierarchical decoder structure in the data stream.</p>
<p id="p-0065" num="0064">According to another aspect of the invention, there is provided receiver for generating a number of output audio channels; the receiver comprising: means for receiving a data stream comprising a number of input audio channels and parametric audio data; the data stream further comprising decoder tree structure data for a hierarchical decoder structure, the decoder tree structure data comprising at least on data value indicative of channel split characteristics for an audio channel at a hierarchical layer of the hierarchical decoder structure; means for generating the hierarchical decoder structure in response to the decoder tree structure data; and means for generating the number of output audio channels from the data stream using the hierarchical decoder structure.</p>
<p id="p-0066" num="0065">According to another aspect of the invention, there is provided transmitter for generating a data stream comprising a number of output audio channels, the transmitter comprising: means for receiving a number of input audio channels; hierarchical encoding means for parametrically encoding the number of input audio channels to generate the data stream comprising the number of output audio channels and parametric audio data; means for determining a hierarchical decoder structure corresponding to the hierarchical encoding means; and means for including decoder tree structure data comprising at least one data value indicative of a channel split characteristic for an audio channel at a hierarchical layer of the hierarchical decoder structure in the data stream.</p>
<p id="p-0067" num="0066">According to another aspect of the invention, there is provided transmission system comprising a transmitter for generating a data stream and a receiver for generating a number of output audio channels; wherein the transmitter comprises: means for receiving a number of input audio channels, hierarchical encoding means for parametrically encoding the number of input audio channels to generate the data stream comprising the number of audio channels and parametric audio data, means for determining a hierarchical decoder structure corresponding to the hierarchical encoding means, means for including decoder tree structure data comprising at least one data value indicative of a channel split characteristic for an audio channel at a hierarchical layer of the hierarchical decoder structure in the data stream, and means for transmitting the data stream to the receiver; and the receiver comprises: means for receiving the data stream, means for generating the hierarchical decoder structure in response to the decoder tree structure data, and means for generating the number of output audio channels from the data stream using the hierarchical decoder structure.</p>
<p id="p-0068" num="0067">According to another aspect of the invention, there is provided method of receiving a data stream; the method comprising: receiving a data stream comprising a number of input audio channels and parametric audio data; the data stream further comprising decoder tree structure data for a hierarchical decoder structure, the decoder tree structure data comprising at least on data value indicative of channel split characteristics for an audio channel at a hierarchical layer of the hierarchical decoder structure; generating the hierarchical decoder structure in response to the decoder tree structure data; and generating the number of output audio channels from the data stream using the hierarchical decoder structure.</p>
<p id="p-0069" num="0068">According to another aspect of the invention, there is provided method of transmitting a data stream comprising a number of output audio channels, the method comprising: receiving a number of input audio channels; parametrically encoding the number of input audio channels to generate the data stream comprising the number of output audio channels and parametric audio data; determining a hierarchical decoder structure corresponding to the hierarchical encoding means; including decoder tree structure data comprising at least one data value indicative of a channel split characteristic for an audio channel at a hierarchical layer of the hierarchical decoder structure in the data stream; and transmitting the data stream.</p>
<p id="p-0070" num="0069">According to another aspect of the invention, there is provided method of transmitting and receiving a data stream, the method comprising: at a transmitter: receiving a number of input audio channels, parametrically encoding the number of input audio channels to generate the data stream comprising the number of audio channels and parametric audio data, determining a hierarchical decoder structure corresponding to the hierarchical encoding means, including decoder tree structure data comprising at least one data value indicative of a channel split characteristic for an audio channel at a hierarchical layer of the hierarchical decoder structure in the data stream, and transmitting the data stream to the receiver; and at a receiver: receiving the data stream, generating the hierarchical decoder structure in response to the decoder tree structure data, and generating the number of output audio channels from the data stream using the hierarchical decoder structure.</p>
<p id="p-0071" num="0070">According to another aspect of the invention, there is provided computer program product for executing any of the methods described above.</p>
<p id="p-0072" num="0071">According to another aspect of the invention, there is provided an audio playing device comprising an apparatus as described above.</p>
<p id="p-0073" num="0072">According to another aspect of the invention, there is provided an audio recording device comprising an apparatus as described above.</p>
<p id="p-0074" num="0073">These and other aspects, features and advantages of the invention will be apparent from and elucidated with reference to the embodiment(s) described hereinafter.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<p id="p-0075" num="0074">Embodiments of the invention will be described, by way of example only, with reference to the drawings, in which:</p>
<p id="p-0076" num="0075"><figref idref="DRAWINGS">FIG. 1</figref> illustrates a transmission system for communication of an audio signal in accordance with some embodiments of the invention;</p>
<p id="p-0077" num="0076"><figref idref="DRAWINGS">FIG. 2</figref> illustrates an example of a hierarchical encoder structure that may be employed in some embodiments of the invention;</p>
<p id="p-0078" num="0077"><figref idref="DRAWINGS">FIG. 3</figref> illustrates an example of an encoder in accordance with some embodiments of the invention;</p>
<p id="p-0079" num="0078"><figref idref="DRAWINGS">FIG. 4</figref> illustrates an example of a decoder in accordance with some embodiments of the invention;</p>
<p id="p-0080" num="0079"><figref idref="DRAWINGS">FIG. 5</figref> illustrates an example of some hierarchical decoder structures that may be employed in some embodiments of the invention;</p>
<p id="p-0081" num="0080"><figref idref="DRAWINGS">FIG. 6</figref> illustrates example hierarchical decoder structures having two-to-three up-mixers at the root;</p>
<p id="p-0082" num="0081"><figref idref="DRAWINGS">FIG. 7</figref> illustrates an example hierarchical decoder structure comprising a plurality of decoder tree structures;</p>
<p id="p-0083" num="0082"><figref idref="DRAWINGS">FIG. 8</figref> illustrates an example of a one-to-two up-mixer;</p>
<p id="p-0084" num="0083"><figref idref="DRAWINGS">FIG. 9</figref> illustrates an example of some hierarchical decoder structures that may be employed in some embodiments of the invention;</p>
<p id="p-0085" num="0084"><figref idref="DRAWINGS">FIG. 10</figref> illustrates an example of some hierarchical decoder structures that may be employed in some embodiments of the invention;</p>
<p id="p-0086" num="0085"><figref idref="DRAWINGS">FIG. 11</figref> illustrates an exemplary flow chart for a method of decoding in accordance with some embodiments of the invention;</p>
<p id="p-0087" num="0086"><figref idref="DRAWINGS">FIG. 12</figref> illustrates an example of a matrix decoder structure in accordance with some embodiments of the invention;</p>
<p id="p-0088" num="0087"><figref idref="DRAWINGS">FIG. 13</figref> illustrates an example of a hierarchical decoder structure that may be employed in some embodiments of the invention;</p>
<p id="p-0089" num="0088"><figref idref="DRAWINGS">FIG. 14</figref> illustrates an example of a hierarchical decoder structure that may be employed in some embodiments of the invention;</p>
<p id="p-0090" num="0089"><figref idref="DRAWINGS">FIG. 15</figref> illustrates a method of transmitting and receiving an audio signal in accordance with some embodiments of the invention; and</p>
<p id="p-0091" num="0090"><figref idref="DRAWINGS">FIG. 16</figref> illustrates an apparatus for generating a number of output audio channels in accordance with an embodiment of the invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<p id="p-0092" num="0091">The following description focuses on embodiments of the invention applicable to encoding and decoding of a multi channel audio signal using a number of low complexity channel down-mixers and up-mixers. However, it will be appreciated that the invention is not limited to this application. It will be understood by the person skilled in the art that a down-mixer is arranged to combine a number of audio channels into a lower number of audio channels and additional parametric data, and that an up-mixer is arranged to generate a number of audio channels from a lower number of audio channels and parametric data. Thus, an up-mixer provides a channel split functionality.</p>
<p id="p-0093" num="0092"><figref idref="DRAWINGS">FIG. 1</figref> illustrates a transmission system <b>100</b> for communication of an audio signal in accordance with some embodiments of the invention. The transmission system <b>100</b> comprises a transmitter <b>101</b> which is coupled to a receiver <b>103</b> through a network <b>105</b> which specifically may be the Internet.</p>
<p id="p-0094" num="0093">In the specific example, the transmitter <b>101</b> is a signal recording device and the receiver is a signal player device <b>103</b> but it will be appreciated that in other embodiments a transmitter and receiver may used in other applications and for other purposes. For example, the transmitter <b>101</b> and/or the receiver <b>103</b> may be part of a transcoding functionality and may e.g. provide interfacing to other signal sources or destinations.</p>
<p id="p-0095" num="0094">In the specific example where a signal recording function is supported, the transmitter <b>101</b> comprises a digitizer <b>107</b> which receives an analog signal that is converted to a digital PCM signal by sampling and analog-to-digital conversion.</p>
<p id="p-0096" num="0095">The transmitter <b>101</b> is coupled to the encoder <b>109</b> of <figref idref="DRAWINGS">FIG. 1</figref> which encodes the PCM signal in accordance with an encoding algorithm. The encoder <b>100</b> is coupled to a network transmitter <b>111</b> which receives the encoded signal and interfaces to the Internet <b>105</b>. The network transmitter may transmit the encoded signal to the receiver <b>103</b> through the Internet <b>105</b>.</p>
<p id="p-0097" num="0096">The receiver <b>103</b> comprises a network receiver <b>113</b> which interfaces to the Internet <b>105</b> and which is arranged to receive the encoded signal from the transmitter <b>101</b>.</p>
<p id="p-0098" num="0097">The network receiver <b>111</b> is coupled to a decoder <b>115</b>. The decoder <b>115</b> receives the encoded signal and decodes it in accordance with a decoding algorithm.</p>
<p id="p-0099" num="0098">In the specific example where a signal playing function is supported, the receiver <b>103</b> further comprises a signal player <b>117</b> which receives the decoded audio signal from the decoder <b>115</b> and presents this to the user. Specifically, the signal player <b>113</b> may comprise a digital-to-analog converter, amplifiers and speakers as required for outputting the decoded audio signal.</p>
<p id="p-0100" num="0099">In the example of <figref idref="DRAWINGS">FIG. 1</figref>, the encoder <b>109</b> and decoder <b>115</b> use a cascaded or tree-based structure consisting of small building blocks. The encoder <b>109</b> thus uses a hierarchical encoding structure wherein the audio channels are progressively processed in different layers of the hierarchical structure. Such a structure may lead to a particularly advantageous encoding with high audio quality yet relatively low complexity and easy implementation of the encoder <b>109</b>.</p>
<p id="p-0101" num="0100"><figref idref="DRAWINGS">FIG. 2</figref> illustrates an example of a hierarchical encoder structure that may be employed in some embodiments of the invention.</p>
<p id="p-0102" num="0101">In the example, the encoder <b>109</b> encodes a 5.1 channel surround sound input signal consisting of a left front (l<sub>f</sub>), left surround (l<sub>a</sub>), right front (r<sub>f</sub>), right surround, center (c<sub>0</sub>) and a subwoofer or Low Frequency Enhancement (lfe) channel. The channels are first segmented and transformed to the frequency domain in the segmentation blocks <b>201</b>. The resulting frequency domain signals are fed pair wise to Two-To-One (TTO) down-mixers <b>203</b> which down-mix two input signals into a single output channel and extract the corresponding parameters. Thus, the three TTO down-mixers <b>203</b> down-mix the six input channels to three audio channels and parameters.</p>
<p id="p-0103" num="0102">As illustrated in <figref idref="DRAWINGS">FIG. 2</figref>, the output of the TTO down-mixers <b>203</b> are used as input for other TTO down-mixers <b>205</b>, <b>207</b>. Specifically, two of the TTO down-mixers <b>203</b> are coupled to a fourth TTO down-mixer <b>205</b> which combines the corresponding channels into a single channel. The third of the TTO down-mixers <b>203</b> is together with the fourth TTO down-mixer <b>205</b> coupled to a fifth TTO down-mixer <b>207</b> which combines the remaining two channels into a single channel (M). This signal is finally transformed back to the time domain resulting in an encoded multi-channel audio bitstream m.</p>
<p id="p-0104" num="0103">The TTO down-mixers <b>203</b> may be considered to comprise the first layer of the encoding structure, with a second layer comprising the fourth TTO down-mixer <b>205</b> and the third layer comprising the fifth TTO down-mixer <b>207</b>. Thus, a combination of a number of audio channels into a lower number of audio channels is taking place in each layer of the hierarchical encoder structure.</p>
<p id="p-0105" num="0104">The hierarchical encoding structure of the encoder <b>109</b> may result in very efficient and high quality encoding for low complexity. Furthermore, the hierarchical encoding structure may be varied depending on the nature of the signal which is encoded. For example, if a simple stereo signal is encoded, this may be achieved by a hierarchical encoding structure comprising only a single TTO down-mixer and a single layer.</p>
<p id="p-0106" num="0105">In order for the decoder <b>115</b> to handle signals encoded using different hierarchical encoding structures, it must be able to adapt to the hierarchical encoding structure used for the specific signal. Specifically, the decoder <b>115</b> comprises functionality for configuring itself to have a hierarchical decoder structure that matches the hierarchical encoding structure of the encoder <b>109</b>. However, in order to do so, the decoder <b>115</b> must be provided with information of the hierarchical encoding structure used for encoding the received bitstream.</p>
<p id="p-0107" num="0106"><figref idref="DRAWINGS">FIG. 3</figref> illustrates an example of the encoder <b>109</b> in accordance with some embodiments of the invention.</p>
<p id="p-0108" num="0107">The encoder <b>109</b> comprises a receive processor <b>301</b> which receives a number of input audio channels. For the specific example of <figref idref="DRAWINGS">FIG. 2</figref>, the encoder <b>109</b> receives six input channels. The receive processor <b>301</b> is coupled to an encode processor <b>303</b> which has a hierarchical encoding structure. As an example, the hierarchical encoding structure of the encode processor <b>303</b> may correspond to that illustrated in <figref idref="DRAWINGS">FIG. 2</figref>.</p>
<p id="p-0109" num="0108">The encode processor <b>303</b> is furthermore coupled to an encoding structure processor <b>305</b> which is arranged to determine the hierarchical encoding structure used by the encode processor <b>303</b>. The encode processor <b>303</b> may specifically feed structure data to the encoding structure processor <b>305</b>. In response, the encoding structure processor <b>305</b> generates decoder tree structure data which is indicative of the hierarchical decoder structure that must be used by the decoder to decode the encoded signal generated by the encode processor <b>303</b>.</p>
<p id="p-0110" num="0109">It will be appreciated, that the decoder tree structure data may directly be determined as data describing the hierarchical encoding structure or may e.g. be data which directly describes the hierarchical decoder structure that must be used (e.g. it may describe the complementary structure to that of the encode processor <b>303</b>).</p>
<p id="p-0111" num="0110">The decoder tree structure data specifically comprises at least one data value indicative of a channel split characteristic for an audio channel at hierarchical layers of the hierarchical decoder structure. Thus, the decoder tree structure data may comprise at least one indication of where an audio channel must be split in the decoder. Such an indication may for example be an indication of a layer in which the encoding structure comprises a down-mixer or may equivalently be an indication of a layer of the decoder tree structure that must comprise an up-mixer.</p>
<p id="p-0112" num="0111">The encode processor <b>303</b> and the encoding structure processor <b>305</b> are coupled to a data stream generator <b>307</b> which generates a bit stream comprising the encoded audio from the encode processor <b>303</b> and the decoder tree structure data from the encoding structure processor <b>305</b>. This data stream is then fed to the network transmitter <b>111</b> for communication to the receiver <b>103</b>.</p>
<p id="p-0113" num="0112"><figref idref="DRAWINGS">FIG. 4</figref> illustrates an example of the decoder <b>115</b> in accordance with some embodiments of the invention.</p>
<p id="p-0114" num="0113">The decoder <b>115</b> comprises a receiver <b>401</b> which receives the data stream transmitted from the network receiver <b>113</b>. The decoder <b>115</b> furthermore comprises a decode processor <b>403</b> and a decoder structure processor <b>405</b> coupled to the receiver <b>401</b>.</p>
<p id="p-0115" num="0114">The receiver <b>401</b> extracts the decoder tree structure data and feeds this to the decoder structure processor <b>405</b> whereas the audio encoding data comprising a number of audio channels and the parametric audio data is fed to the decode processor <b>403</b>.</p>
<p id="p-0116" num="0115">The decoder structure processor <b>405</b> is arranged to determine the hierarchical decoder structure in response to the received decoder tree structure data. Specifically, the decoder structure processor <b>405</b> may extract the data values specifying the data splits and may generate information of the hierarchical decoder structure that complements the hierarchical encoding structure of the encode processor <b>303</b>. This information is fed to the decode processor <b>403</b> causing this to be configured for the specified hierarchical decoder structure.</p>
<p id="p-0117" num="0116">Subsequently, the decoder structure processor <b>405</b> proceeds to generate the output channels corresponding to the original inputs to the encoder <b>109</b> using the hierarchical decoder structure.</p>
<p id="p-0118" num="0117">Thus, the system may allow an efficient and high quality encoding, decoding and distribution of audio signals and specifically of multi-channel audio signals. A very flexible system is enabled wherein decoders may automatically adapt to the encoders and the same decoders may thus be used with a number of different encoders.</p>
<p id="p-0119" num="0118">The decoder tree structure data is effectively communicated using data values which are indicative of channel split characteristics for the audio channels at the different hierarchical layers of the hierarchical decoder structure. Thus, the decoder tree structure data is optimized for flexible and high performance hierarchical encoding and decoding structures.</p>
<p id="p-0120" num="0119">For example, a 5.1 channel signal (i.e. a six channel signal) may be encoded as a stereo signal plus a set of spatial parameters. Such encoding can be achieved by many different hierarchical encoding structures that use simple TTO or Three-To-Two (TTT) down-mixers and thus many different hierarchical decoder structures are possible using One-To-Two (OTT) or Two-To-Three (TTT) up-mixers. Thus, in order to decode the corresponding spatial bit stream, the decoder should have knowledge of the hierarchical encoding structure that has been employed in the encoder. One straightforward approach is then to signal the tree in the bit-stream by means of an index into a look-up table. An example of suitable look-up table may be:</p>
<p id="p-0121" num="0120">
<tables id="TABLE-US-00001" num="00001">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="1" colwidth="112pt" align="center"/>
<colspec colname="2" colwidth="105pt" align="left"/>
<thead>
<row>
<entry namest="1" nameend="2" align="center" rowsep="1"/>
</row>
<row>
<entry>Tree codeword</entry>
<entry>Tree</entry>
</row>
<row>
<entry namest="1" nameend="2" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry>0 . . . 000</entry>
<entry>Mono to 5.1 variant A</entry>
</row>
<row>
<entry>0 . . . 001</entry>
<entry>Mono to 5.1 variant B</entry>
</row>
<row>
<entry>0 . . . 010</entry>
<entry>Stereo to 5.1 variant A</entry>
</row>
<row>
<entry>. . .&#x2003;</entry>
<entry>. . .</entry>
</row>
<row>
<entry>1 . . . 111</entry>
<entry>. . .</entry>
</row>
<row>
<entry namest="1" nameend="2" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0122" num="0121">However, using such a look-up table has the disadvantage that all hierarchical encoding structures which possibly may be used must be explicitly specified in the look-up table. However, this requires that all decoders/encoders must receive updated look-up tables in order to introduce a new hierarchical encoding structure to the system. This is highly undesirable and results in complex operation and an inflexible system.</p>
<p id="p-0123" num="0122">In contrast, the use of decoder tree structure data where data values indicate channel splits at the different layers of the hierarchical decoder structure allows a simple general communication of the decoder tree structure data which may describe any hierarchical decoder structure. Thus, new encoding structures may readily be used without requiring any prior notification of the corresponding decoders.</p>
<p id="p-0124" num="0123">Thus, in contrast to the look-up based approach, the system of <figref idref="DRAWINGS">FIG. 1</figref> can handle an arbitrary number of input and output channels while maintaining full flexibility. This is achieved by specifying a description of the encoder/decoder tree in the bit-stream. From this description the decoder can derive where and how to apply the subsequent parameters encoded in the bit stream.</p>
<p id="p-0125" num="0124">The decoder tree structure data may specifically comprise a plurality of data values where each data value is indicative of a channel split characteristic for one channel at one hierarchical layer of the hierarchical decoder structure. Specifically, the decoder tree structure data may comprise one data value for each up-mixer to be included in the hierarchical decoder structure. Furthermore, one data value may be included for each channel which is not to be split further. Thus, if a data value of the decoder tree structure data has a value corresponding to one specific predetermined data value this may indicate that the corresponding channel is not to be split further but is in fact an output channel of the decoder <b>115</b>.</p>
<p id="p-0126" num="0125">In some embodiments, the system may only incorporate encoders which exclusively use TTO down-mixers and the decoder may accordingly be implemented using only OTT up-mixers. In such an embodiment, a data value may be included for each channel of the decoder. Furthermore, the data value may take on one of two possible values with one value indicating that the channel is not split and the other value indicating that the channel is split into two channels by an OTT up-mixer. Furthermore, the order of the data values in the decoder tree structure data may indicate which channels are split and thus the location of the OTT up-mixers in the hierarchical decoder structure. Thus, a decoder tree structure data comprising simple binary values completely describing the required hierarchical decoder structure may be achieved.</p>
<p id="p-0127" num="0126">As a specific example, the derivation of a bit string description of the hierarchical decoder structure of the decoder of <figref idref="DRAWINGS">FIG. 5</figref> will be described.</p>
<p id="p-0128" num="0127">In the example, it is assumed that encoders may only use TTO down-mixers and thus the decoder tree may be described by a binary string. In the example of <figref idref="DRAWINGS">FIG. 5</figref>, a single input audio channel is expanded to a five channel output signal using OTT up-mixers. In the example, four layers of depth can be discerned, the first, denoted with 0, is at the layer of the input signal, the last, denoted with 3, is at the layer of the output signals. It will be appreciated that in this description the layers are characterized by the audio channels with the up-mixers forming the layer boundaries, the layers may equivalently be considered to comprise or be formed by the up-mixers.</p>
<p id="p-0129" num="0128">In the example, the hierarchical decoder structure of <figref idref="DRAWINGS">FIG. 5</figref> may be described by the bit string &#x201c;111001000&#x201d; derived by the following steps:
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0000">
    <ul id="ul0002" list-style="none">
        <li id="ul0002-0001" num="0129">1&#x2014;The input signal at layer 0, t<sub>0</sub>, is split (OTT up-mixer A), as a result all signal at layer 0 are accounted for, move on to layer 1.</li>
        <li id="ul0002-0002" num="0130">1&#x2014;The first signal at layer 1 (coming out of the top of OTT up-mixer A) is split (OTT up-mixer B).</li>
        <li id="ul0002-0003" num="0131">1&#x2014;The second signal at layer 1 (coming out of the bottom of OTT up-mixer A) is split (OTT up-mixer C), all signals at layer 1 are described, move on to layer 2.</li>
        <li id="ul0002-0004" num="0132">0&#x2014;The first signal at layer 2 (top of OTT up-mixer B) is not split any further.</li>
        <li id="ul0002-0005" num="0133">0 The second signal at layer 2 (bottom of OTT up-mixer B) is not split any further.</li>
        <li id="ul0002-0006" num="0134">1&#x2014;The third signal at layer 2 (top of OTT up-mixer C) is again split.</li>
        <li id="ul0002-0007" num="0135">0&#x2014;The fourth signal at layer 2 (bottom of OTT up-mixer D) is not split any further, all signals at layer 2 are described, move on to layer 3.</li>
        <li id="ul0002-0008" num="0136">0&#x2014;The first signal at layer 3 (top of OTT up-mixer D) is not split any further</li>
        <li id="ul0002-0009" num="0137">0&#x2014;The second signal at layer 3 (bottom of OTT up-mixer D) is not split any further, all signals have been described.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0130" num="0138">In some embodiments, the encoding may be limited to using only TTO and TTT down-mixers and thus the decoding may be limited to using only OTT and TTT up-mixers. Although, the TTT up-mixers may be used in many different configurations, it is particularly advantageous to use them in a mode where (waveform) prediction is used to accurately estimate the three output signals from the two input signals. Due to this predictive nature of the TTT up-mixers, the logical position for these up-mixers is at the root of the tree. This is a consequence of the OTT up-mixers destroying the original waveform thereby making prediction unsuitable. Thus, in some embodiments, the only up-mixers that are used in the decoder structure are OTT up-mixers or TTT up-mixers in the root layer.</p>
<p id="p-0131" num="0139">Hence, for such systems, three different situations can be discerned which together allow for a universal tree description:
<ul id="ul0003" list-style="none">
    <li id="ul0003-0001" num="0140">1.) Trees that have a TTT up-mixer as root.</li>
    <li id="ul0003-0002" num="0141">2) Trees consisting only of OTT up-mixers.</li>
    <li id="ul0003-0003" num="0142">3) &#x201c;Empty trees&#x201d;, i.e., a direct mapping from input to output channel(s).</li>
</ul>
</p>
<p id="p-0132" num="0143"><figref idref="DRAWINGS">FIG. 6</figref> illustrates example hierarchical decoder structures having TTT up-mixers at the root and <figref idref="DRAWINGS">FIG. 7</figref> illustrates an example hierarchical decoder structure comprising a plurality of decoder tree structures. The hierarchical decoder structure of <figref idref="DRAWINGS">FIG. 7</figref> comprises decoder tree structures according to all three examples presented above.</p>
<p id="p-0133" num="0144">In some embodiments, the decoder tree structure data is ordered in order of whether an input channel comprises a TTT up-mixer or does not. The decoder tree structure data may comprise an indication of a TTT up-mixer being present at the root layer followed by binary data indicative of whether the channels of the lower layers are split by a OTT up-mixer or are not split further. This may improve performance in terms of bit-rate and low signaling costs.</p>
<p id="p-0134" num="0145">For example, the decoder tree structure data may indicate how many TTT up-mixers are included in the hierarchical decoder structure. As each tree structure may only comprise one TTT up-mixer which is located at the root level, the remainder of the tree may be described by a binary string as described previously (i.e. as the tree is a OTT up-mixer tree only for lower layers, the same approach as described for an OTT up-mixer only hierarchical decoder structure can be applied).</p>
<p id="p-0135" num="0146">Also, the remaining tree structures are either OTT up-mixer only trees or empty trees which can also be described by binary strings. Thus, all trees can be described by binary data values and the interpretation of the binary string may depend on which category the tree belongs to. This information may be provided by the location of the tree in the decoder tree structure data. For example, all trees comprising a TTT up-mixer may be located first in the decoder tree structure data, followed by the OTT up-mixer only trees, followed by the empty trees. If the number of TTT up-mixers and OTT up-mixers in the hierarchical decoder structure is included in the decoder tree structure data, the decoder can be configured without requiring any further data. Thus, a highly efficient communication of information of the required decoder structure is achieved. The overhead of communicating the decoder tree structure data may be kept very low, yet a highly flexible system is provided which may describe a wide variety of hierarchical decoder structures.</p>
<p id="p-0136" num="0147">As a specific example, the hierarchical decoder structures of the decoder of <figref idref="DRAWINGS">FIG. 7</figref> may be derived from decoder tree structure data by the following process:
<ul id="ul0004" list-style="none">
    <li id="ul0004-0001" num="0000">
    <ul id="ul0005" list-style="none">
        <li id="ul0005-0001" num="0148">The number of input signals is derived from the (possibly encoded) down-mix.</li>
        <li id="ul0005-0002" num="0149">The number of OTT up-mixers and TTT up-mixers of the whole tree are signaled in the decoder tree structure data and may be extracted therefrom. The number of output signals can be derived as: #output signals=#input signals+#TTT up-mixers+#OTT up-mixers.</li>
        <li id="ul0005-0003" num="0150">The input channels may be remapped in the decoder tree structure data such that after remapping first the trees according to situation 1) are encountered, followed by the trees according to situation 2) and then 3). For the example of <figref idref="DRAWINGS">FIG. 7</figref> this would result in the order 3, 0, 1, 2, 4, i.e., signal 0 is signal 3 after remapping, signal 1 is signal 0 after remapping, etc.</li>
        <li id="ul0005-0004" num="0151">For each TTT up-mixer, three OTT-only tree descriptions are given using the method described above, one OTT-only tree per TTT output channel.</li>
        <li id="ul0005-0005" num="0152">For all remaining input signals OTT-only descriptions are given.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0137" num="0153">In some embodiments, an indication of a loudspeaker position for the output channels is included in the decoder tree structure data. For example, a look-up table of predetermined loudspeaker locations may be used, such as for example:</p>
<p id="p-0138" num="0154">
<tables id="TABLE-US-00002" num="00002">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="1" colwidth="98pt" align="center"/>
<colspec colname="2" colwidth="119pt" align="left"/>
<thead>
<row>
<entry namest="1" nameend="2" align="center" rowsep="1"/>
</row>
<row>
<entry>Bit string</entry>
<entry>(Virtual) loudspeaker position</entry>
</row>
<row>
<entry namest="1" nameend="2" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry>0 . . . 000</entry>
<entry>Left (front)</entry>
</row>
<row>
<entry>0 . . . 001</entry>
<entry>Right (front)</entry>
</row>
<row>
<entry>0 . . . 010</entry>
<entry>Center</entry>
</row>
<row>
<entry>0 . . . 011</entry>
<entry>LFE</entry>
</row>
<row>
<entry>0 . . . 100</entry>
<entry>Left surround</entry>
</row>
<row>
<entry>0 . . . 101</entry>
<entry>Right surround</entry>
</row>
<row>
<entry>0 . . . 110</entry>
<entry>Center surround</entry>
</row>
<row>
<entry>. . .&#x2003;</entry>
<entry>. . .</entry>
</row>
<row>
<entry namest="1" nameend="2" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0139" num="0155">Alternatively, the loudspeaker locations can be represented using a hierarchical approach. E.g. a few first bits specify the x-axis, e.g. L, R, C, then another few bits specify the y-axis, e.g. Front, Side, Surround and another few bits specify the z-axis (elevation).</p>
<p id="p-0140" num="0156">As a specific example, the following provides an exemplary bit stream syntax for a bit-stream following the described guidelines above. In the example, the number of input and output signals is explicitly coded in the bit-stream. Such information can be used to validate part of the bit-stream.</p>
<p id="p-0141" num="0157">
<tables id="TABLE-US-00003" num="00003">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="217pt" align="left"/>
<thead>
<row>
<entry namest="1" nameend="1" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry>Syntax</entry>
</row>
<row>
<entry>TreeDescription( )</entry>
</row>
<row>
<entry>{</entry>
</row>
<row>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;numInChan = <b>bsNumInChan</b>+1;</entry>
</row>
<row>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;numOutChan = <b>bsNumOutChan</b>+2;</entry>
</row>
<row>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;numTttUp_mixers = <b>bsNumTttUp</b>_<b>mixers</b>;</entry>
</row>
<row>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;numOttUp_mixers = <b>bsNumOttUp</b>_<b>mixers</b>;</entry>
</row>
<row>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;For (ch=0; ch&#x3c; numInChan; ch++) {</entry>
</row>
<row>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;<b>bsChannelRemapping</b>[ch]</entry>
</row>
<row>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;}</entry>
</row>
<row>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;For (ch=0; ch&#x3c; numOutChan; ch++) {</entry>
</row>
<row>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;<b>bsOutputChannelPos</b>[ch]</entry>
</row>
<row>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;}</entry>
</row>
<row>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;Idx = 0;</entry>
</row>
<row>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;ottUp_mixerIdx = 0;</entry>
</row>
<row>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;For (i=0; i&#x3c; numTttUp_mixers; i++) {</entry>
</row>
<row>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;TttConfig(i);</entry>
</row>
<row>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;for (ch=0; ch&#x3c;3; ch++, idx++) {</entry>
</row>
<row>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;OttTreeDescription(idx);</entry>
</row>
<row>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;}</entry>
</row>
<row>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;}</entry>
</row>
<row>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;while (ottUp-mixerIdx &#x3c; numOttUp_mixersidx &#x3c; numInChan</entry>
</row>
<row>
<entry>+ numTttUp_mixers) {</entry>
</row>
<row>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;OttTreeDescription(idx);</entry>
</row>
<row>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;idx++;</entry>
</row>
<row>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;}</entry>
</row>
<row>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;numOttUp_mixers = ottUp_mixerIdx + 1;</entry>
</row>
<row>
<entry>}</entry>
</row>
<row>
<entry namest="1" nameend="1" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0142" num="0158">In this example, each OttTree is handled in the OttTreeDescription( ) which is illustrated below.</p>
<p id="p-0143" num="0159">
<tables id="TABLE-US-00004" num="00004">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="21pt" align="left"/>
<colspec colname="1" colwidth="196pt" align="left"/>
<thead>
<row>
<entry/>
<entry namest="offset" nameend="1" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry/>
<entry>Syntax</entry>
</row>
<row>
<entry/>
<entry>OttTreeDescription(idx)</entry>
</row>
<row>
<entry/>
<entry>{</entry>
</row>
<row>
<entry/>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;CurrLayerSignals = 1</entry>
</row>
<row>
<entry/>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;NextLayerSignals = 0</entry>
</row>
<row>
<entry/>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;while (CurrLayerSignals&#x3e;0) {</entry>
</row>
<row>
<entry/>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;<b>bsOttUp</b>_<b>mixerPresent</b></entry>
</row>
<row>
<entry/>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;if (bsOttUp_mixerPresent == 1) {</entry>
</row>
<row>
<entry/>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;OttConfig(ottUp_mixerIdx);</entry>
</row>
<row>
<entry/>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;ottDefaultCld[ottUp_mixerIdx] =</entry>
</row>
<row>
<entry/>
<entry><b>bsOttDefaultCld</b>[ottUp_mixerIdx];</entry>
</row>
<row>
<entry/>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;ottModeLfe[ottUp_mixerIdx] =</entry>
</row>
<row>
<entry/>
<entry><b>bsOttModeLfe</b>[ottUp_mixerIdx];</entry>
</row>
<row>
<entry/>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;NextLayerSignals += 2;</entry>
</row>
<row>
<entry/>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;ottUp_mixerIdx ++;</entry>
</row>
<row>
<entry/>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;}</entry>
</row>
<row>
<entry/>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;CurrLayerSignals&#x2212;&#x2212;;</entry>
</row>
<row>
<entry/>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;if ((CurrLayerSignals == 0) &#x26;&#x26;</entry>
</row>
<row>
<entry/>
<entry>(NextLayerSignals&#x3e;0)) {</entry>
</row>
<row>
<entry/>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;CurrLayerSignals = NextLayerSignals;</entry>
</row>
<row>
<entry/>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;NextLayerSignals = 0;</entry>
</row>
<row>
<entry/>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;&#x2003;}</entry>
</row>
<row>
<entry/>
<entry>&#x2003;&#x2003;&#x2003;&#x2003;}</entry>
</row>
<row>
<entry/>
<entry>}</entry>
</row>
<row>
<entry/>
<entry namest="offset" nameend="1" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0144" num="0160">In the above syntax bold formatting is used to indicate elements read from the bit stream.</p>
<p id="p-0145" num="0161">It will be appreciated that the notion of hierarchical layers is not needed in such a description. For example a description based on a principle of &#x201c;as long as there are open ends, there are more bits to come&#x201d; could also be applied. In order to decode the data, this notion may become useful however.</p>
<p id="p-0146" num="0162">Apart from the single bits denoting whether or not an OTT up-mixer is present, the following data is included for the OTT up-mixer:
<ul id="ul0006" list-style="none">
    <li id="ul0006-0001" num="0000">
    <ul id="ul0007" list-style="none">
        <li id="ul0007-0001" num="0163">The default Channel Level Difference.</li>
        <li id="ul0007-0002" num="0164">Whether the OTT up-mixer is an LFE (Low Frequency Enhancement) OTT up-mixer, i.e., whether the parameters are only band-limited and do not contain any correlation/coherence data.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0147" num="0165">Additionally, data may specify specific properties of the up-mixers, such as in the example of the TTT up-mixer, which mode to use (waveform based prediction, energy based description, etc.).</p>
<p id="p-0148" num="0166">As will be known to a person skilled in the art, an OTT up-mixer uses a de-correlated signal to split a single channel into two channels. Furthermore, the de-correlated signal is derived from the single input channel signal. <figref idref="DRAWINGS">FIG. 8</figref> illustrates an example of an OTT up-mixer according to this approach. Thus, the exemplary decoder of <figref idref="DRAWINGS">FIG. 5</figref> may be represented by the diagram of <figref idref="DRAWINGS">FIG. 9</figref> wherein the de-correlator blocks generating the de-correlated signals are explicitly shown.</p>
<p id="p-0149" num="0167">However, as can be seen, this approach leads to a cascading of de-correlator blocks such that the de-correlated signal for a lower layer OTT up-mixer is generated from an input signal which has been generated from another de-correlated signal. Thus, rather than being generated from the original input signal at the root level, the de-correlated signals of the lower layers will have been processed by several de-correlation blocks. As each de-correlation block comprises a de-correlation filter, this approach may result in a &#x201c;smearing&#x201d; of the de-correlated signal (for example transients may be significantly distorted). This results in audio quality degradation for the output signal.</p>
<p id="p-0150" num="0168">Thus, in order to improve the audio quality, the de-correlators applied in the decoder up-mix may therefore in some embodiments be moved such that a cascading of de-correlated signals is prevented. <figref idref="DRAWINGS">FIG. 10</figref> illustrates an example of a decoder structure corresponding to that of <figref idref="DRAWINGS">FIG. 9</figref> but with the de-correlators directly coupled to the input channel. Thus, instead of taking the output of the predecessor OTT up-mixer as input to the de-correlator, the de-correlator up-mixers directly take the original input signal t<sub>0</sub>, pre-processed by the gain up-mixers G<sub>B</sub>, G<sub>C </sub>and G<sub>D</sub>. These gains ensure that the power at the input of the de-correlator is identical to the power that would have been achieved at the input of the de-correlator in the structure of <figref idref="DRAWINGS">FIG. 9</figref>. The structure obtained in this way doesn't contain a cascade of de-correlators thereby resulting in improved audio quality.</p>
<p id="p-0151" num="0169">In the following, an example of how to determine matrix multiplication parameters for the up-mixers of the hierarchical layers in response to the decoder tree structure data will be described. Particularly, the description will focus on embodiments wherein the de-correlation filters for generating the de-correlated signals of the up-mixers are connected directly to the audio input channels of the decoding structure. Thus, the description will focus on embodiments of encoders such as that illustrated in <figref idref="DRAWINGS">FIG. 10</figref>.</p>
<p id="p-0152" num="0170"><figref idref="DRAWINGS">FIG. 11</figref> illustrates an exemplary flow chart for a method of decoding in accordance with some embodiments of the invention.</p>
<p id="p-0153" num="0171">In step <b>1101</b>, the quantized and coded parameters are decoded from the received bit-stream. As will be appreciated by the person skilled in the art, this may result in a number of vectors of conventional parametric audio coding parameters, such as:</p>
<p id="p-0154" num="0172">CLD<sub>0</sub>=[&#x2212;10 15 10 12 . . . 10]</p>
<p id="p-0155" num="0173">CLD<sub>1</sub>=[5 1 2 15 10 . . . 2]</p>
<p id="p-0156" num="0174">ICC<sub>0</sub>=[1 0.6 0.9 0.3 . . . &#x2212;1]</p>
<p id="p-0157" num="0175">ICC<sub>1</sub>=[0 1 0.6 0.9 . . . 0.3]</p>
<p id="p-0158" num="0176">etc.</p>
<p id="p-0159" num="0177">Each vector represents the parameters along the frequency axis.</p>
<p id="p-0160" num="0178">Step <b>1101</b> is followed by step <b>1103</b> wherein the matrices for the individual up-mixers are determined from the decoded parametric data.</p>
<p id="p-0161" num="0179">The (frequency independent) generalized OTT and TTT matrices may respectively be given as:</p>
<p id="p-0162" num="0180">
<maths id="MATH-US-00001" num="00001">
<math overflow="scroll">
<mrow>
  <mrow>
    <mrow>
      <mo>[</mo>
      <mtable>
        <mtr>
          <mtd>
            <msub>
              <mi>y</mi>
              <mn>0</mn>
            </msub>
          </mtd>
        </mtr>
        <mtr>
          <mtd>
            <msub>
              <mi>y</mi>
              <mn>1</mn>
            </msub>
          </mtd>
        </mtr>
      </mtable>
      <mo>]</mo>
    </mrow>
    <mo>=</mo>
    <mrow>
      <mrow>
        <mo>[</mo>
        <mtable>
          <mtr>
            <mtd>
              <msub>
                <mi>H</mi>
                <mn>11</mn>
              </msub>
            </mtd>
            <mtd>
              <msub>
                <mi>H</mi>
                <mn>12</mn>
              </msub>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <msub>
                <mi>H</mi>
                <mn>21</mn>
              </msub>
            </mtd>
            <mtd>
              <msub>
                <mi>H</mi>
                <mn>22</mn>
              </msub>
            </mtd>
          </mtr>
        </mtable>
        <mo>]</mo>
      </mrow>
      <mo>&#x2061;</mo>
      <mrow>
        <mo>[</mo>
        <mtable>
          <mtr>
            <mtd>
              <msub>
                <mi>x</mi>
                <mn>0</mn>
              </msub>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <msub>
                <mi>d</mi>
                <mn>0</mn>
              </msub>
            </mtd>
          </mtr>
        </mtable>
        <mo>]</mo>
      </mrow>
    </mrow>
  </mrow>
  <mo>,</mo>
  <mstyle>
    <mtext>
</mtext>
  </mstyle>
  <mo>&#x2062;</mo>
  <mrow>
    <mrow>
      <mo>[</mo>
      <mtable>
        <mtr>
          <mtd>
            <msub>
              <mi>y</mi>
              <mn>0</mn>
            </msub>
          </mtd>
        </mtr>
        <mtr>
          <mtd>
            <msub>
              <mi>y</mi>
              <mn>1</mn>
            </msub>
          </mtd>
        </mtr>
        <mtr>
          <mtd>
            <msub>
              <mi>y</mi>
              <mn>2</mn>
            </msub>
          </mtd>
        </mtr>
      </mtable>
      <mo>]</mo>
    </mrow>
    <mo>=</mo>
    <mrow>
      <mrow>
        <mo>[</mo>
        <mtable>
          <mtr>
            <mtd>
              <msub>
                <mi>M</mi>
                <mn>11</mn>
              </msub>
            </mtd>
            <mtd>
              <msub>
                <mi>M</mi>
                <mn>12</mn>
              </msub>
            </mtd>
            <mtd>
              <msub>
                <mi>M</mi>
                <mn>13</mn>
              </msub>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <msub>
                <mi>M</mi>
                <mn>21</mn>
              </msub>
            </mtd>
            <mtd>
              <msub>
                <mi>M</mi>
                <mn>22</mn>
              </msub>
            </mtd>
            <mtd>
              <msub>
                <mi>M</mi>
                <mn>23</mn>
              </msub>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <msub>
                <mi>M</mi>
                <mn>31</mn>
              </msub>
            </mtd>
            <mtd>
              <msub>
                <mi>M</mi>
                <mn>32</mn>
              </msub>
            </mtd>
            <mtd>
              <msub>
                <mi>M</mi>
                <mn>33</mn>
              </msub>
            </mtd>
          </mtr>
        </mtable>
        <mo>]</mo>
      </mrow>
      <mo>&#x2061;</mo>
      <mrow>
        <mo>[</mo>
        <mtable>
          <mtr>
            <mtd>
              <msub>
                <mi>x</mi>
                <mn>0</mn>
              </msub>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <msub>
                <mi>x</mi>
                <mn>1</mn>
              </msub>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <msub>
                <mi>d</mi>
                <mn>0</mn>
              </msub>
            </mtd>
          </mtr>
        </mtable>
        <mo>]</mo>
      </mrow>
    </mrow>
  </mrow>
  <mo>,</mo>
</mrow>
</math>
</maths>
</p>
<p id="p-0163" num="0181">The signals x<sub>i</sub>, d<sub>i </sub>and y<sub>i </sub>represent input signals, de-correlated signals derived from the signals x<sub>i </sub>and the output signals respectively. The matrix entries H<sub>ij </sub>and M<sub>ij </sub>are functions of the parameters derived in step <b>1103</b>.</p>
<p id="p-0164" num="0182">The method then divides into two parallel paths wherein one path is directed to deriving tree-pre matrix values (step <b>1105</b>) and one path is directed to deriving tree-mix matrix values (step <b>1107</b>).</p>
<p id="p-0165" num="0183">The pre-matrices correspond to the matrix multiplications applied to the input signal before the de-correlation and the matrix application. Specifically, the pre-matrices correspond to the gain up-mixers applied to the input signal prior to the de-correlation filters.</p>
<p id="p-0166" num="0184">In more detail, a straightforward decoder implementation will in general lead to a cascade of de-correlation filters, as e.g. applied in <figref idref="DRAWINGS">FIG. 9</figref>. As explained above, it is preferable to prevent this cascading. In order to do so, the de-correlation filters are all moved to the same hierarchical level as shown in <figref idref="DRAWINGS">FIG. 10</figref>. In order to assure that the de-correlated signals have the appropriate energy level, i.e., identical to the level of the de-correlated signal in the straightforward case of <figref idref="DRAWINGS">FIG. 9</figref>, the pre-matrices are applied prior to the de-correlation.</p>
<p id="p-0167" num="0185">As an example, the gain G<sub>B </sub>in <figref idref="DRAWINGS">FIG. 10</figref> is derived as following. First, it is important to note that a 1-to-2 up-mixer divides the input signal power to the upper and lower output of the 1-to-2 up-mixer. This property is reflected in the Inter-channel Intensity Difference (IID) or Inter-channel Level Difference (ICLD) parameters. Hence, the gain G<sub>B </sub>is calculated as the energy ratio of the upper output divided by the sum of the upper and lower output of 1-to-2 up-mixer A. It will be appreciated that since the IID or ICLD parameters can be time- and frequency-variant, the gain may also vary both over time and frequency.</p>
<p id="p-0168" num="0186">The mix matrices are the matrices applied to the input signal by the up-mixers in order to generate the additional channels.</p>
<p id="p-0169" num="0187">The final pre- and mix-matrix equations are a result of a cascade of the OTT and TTT up-mixers. As the decoder structure has been amended to prevent a cascade of de-correlators this must be taken into account when determining the final equations.</p>
<p id="p-0170" num="0188">In embodiments, where only predetermined configurations are used, the relationship between the matrix entries H<sub>ij </sub>and M<sub>ij </sub>and the final matrix equations is constant and a standard modification can be applied.</p>
<p id="p-0171" num="0189">However, for the more flexible and dynamic approach previously described, the determination of the pre- and mix-matrix values can be determined through more complex approaches as will be described later.</p>
<p id="p-0172" num="0190">Step <b>1105</b> is followed by step <b>1109</b> wherein the pre-matrices derived in step <b>1005</b> are mapped to the actual frequency grid that is applied to transform the time domain signal to the frequency domain (in step <b>1113</b>).</p>
<p id="p-0173" num="0191">Step <b>1109</b> is followed by step <b>1111</b> wherein interpolation of the frequency matrix parameters may be interpolated. Specifically, depending on whether or not the temporal update of the parameters corresponds to the update of the time-to-frequency transform of step <b>1113</b>, interpolation may be applied.</p>
<p id="p-0174" num="0192">In step <b>1113</b>, the input signals are converted to the frequency domain in order to apply the mapped and optionally interpolated pre-matrices.</p>
<p id="p-0175" num="0193">Step <b>1115</b> follows step <b>1111</b> and step <b>1113</b> and comprise applying the pre-matrices to the frequency domain input signals. The actual matrix application is a set of matrix multiplications.</p>
<p id="p-0176" num="0194">Step <b>1115</b> is followed by step <b>1117</b> wherein part of the signals resulting from the matrix application of step <b>1115</b> is fed to a de-correlation filter to generate de-correlated signals.</p>
<p id="p-0177" num="0195">The same approach is applied to derive the mix-matrix equations.</p>
<p id="p-0178" num="0196">Specifically, step <b>1107</b> is followed by step <b>1119</b> wherein the equations determined in step <b>1107</b> are mapped to the frequency grid of the time-to-frequency transform of step <b>1113</b>.</p>
<p id="p-0179" num="0197">Step <b>1119</b> is followed by step <b>1121</b> wherein the mix-matrix values are optionally interpolated, again depending on the temporal update of parameters and transform.</p>
<p id="p-0180" num="0198">The values generated in steps <b>1115</b>, <b>1117</b> and <b>1121</b> thus form the parameters required for the up-mix matrix multiplication and this is performed in step <b>1123</b>.</p>
<p id="p-0181" num="0199">Step <b>1123</b> is followed by step <b>1125</b> wherein the resulting output is transformed back to the time domain.</p>
<p id="p-0182" num="0200">The steps corresponding to steps <b>1115</b>, <b>1117</b> and <b>1123</b> in <figref idref="DRAWINGS">FIG. 11</figref> can be illustrated further by <figref idref="DRAWINGS">FIG. 12</figref>. <figref idref="DRAWINGS">FIG. 12</figref> illustrates an example of a matrix decoder structure in accordance with some embodiments of the invention.</p>
<p id="p-0183" num="0201"><figref idref="DRAWINGS">FIG. 12</figref> illustrates how the input downmix channels can be used to re-construct the multi-channel output. As outlined above, the process can be described by two matrix multiplications with intermediate decorrelation units.</p>
<p id="p-0184" num="0202">Hence, the processing of the input channels to form the output channels can be described according to:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>v<sup>n,k</sup>=M<sub>1</sub><sup>n,k</sup>x<sup>n,k </sup><?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>y<sup>n,k</sup>=M<sub>1</sub><sup>n,k</sup>w<sup>n,k </sup><?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where
</p>
<p id="p-0185" num="0203">M<sub>1</sub><sup>n,k </sup>is a two dimensional matrix mapping a certain number of input channels to a certain number of channels going into the decorrelators, and is defined for every time-slot n, and every subband k; and</p>
<p id="p-0186" num="0204">M<sub>2</sub><sup>n,k </sup>is a two dimensional matrix mapping a certain number of pre-processed channels to a certain number of output channels, and is defined for every time-slot n, and every hybrid subband k.</p>
<p id="p-0187" num="0205">In the following an example of how the pre- and mix-matrix equations of steps <b>1105</b> and <b>1107</b> may be generated from the decoder tree structure data will be described.</p>
<p id="p-0188" num="0206">Firstly, decoder tree structures having only OTT up-mixers will be considered with reference to the exemplary tree of <figref idref="DRAWINGS">FIG. 13</figref>.</p>
<p id="p-0189" num="0207">For this type of trees it is beneficial to define a number of helper variables:</p>
<p id="p-0190" num="0208">
<maths id="MATH-US-00002" num="00002">
<math overflow="scroll">
<mrow>
  <mrow>
    <msup>
      <mi>Tree</mi>
      <mn>1</mn>
    </msup>
    <mo>=</mo>
    <mrow>
      <mo>[</mo>
      <mtable>
        <mtr>
          <mtd>
            <mn>0</mn>
          </mtd>
          <mtd>
            <mn>1</mn>
          </mtd>
          <mtd>
            <mn>2</mn>
          </mtd>
          <mtd>
            <mn>3</mn>
          </mtd>
          <mtd>
            <mn>4</mn>
          </mtd>
        </mtr>
        <mtr>
          <mtd>
            <mstyle>
              <mspace width="0.3em" height="0.3ex"/>
            </mstyle>
          </mtd>
          <mtd>
            <mn>0</mn>
          </mtd>
          <mtd>
            <mn>0</mn>
          </mtd>
          <mtd>
            <mn>1</mn>
          </mtd>
          <mtd>
            <mn>1</mn>
          </mtd>
        </mtr>
        <mtr>
          <mtd>
            <mstyle>
              <mspace width="0.3em" height="0.3ex"/>
            </mstyle>
          </mtd>
          <mtd>
            <mstyle>
              <mspace width="0.3em" height="0.3ex"/>
            </mstyle>
          </mtd>
          <mtd>
            <mstyle>
              <mspace width="0.3em" height="0.3ex"/>
            </mstyle>
          </mtd>
          <mtd>
            <mn>0</mn>
          </mtd>
          <mtd>
            <mn>0</mn>
          </mtd>
        </mtr>
      </mtable>
      <mo>]</mo>
    </mrow>
  </mrow>
  <mo>,</mo>
</mrow>
</math>
</maths>
<br/>
describes the OTT up-mixer indices that are encountered for each OTT up-mixer (i.e. in the example, the signal being input to the 4<sup>th </sup>OTT up-mixer has passed through the 0<sup>th </sup>and 1<sup>st </sup>OTT up-mixer, as given by the 5<sup>th </sup>column in the Tree<sup>1 </sup>matrix. Similarly, the signal being input to the 2<sup>nd </sup>OTT up-mixer has passed through the 0<sup>th </sup>OTT box, as given by the 3<sup>rd </sup>column in the Tree<sup>1 </sup>matrix, and so on.).
</p>
<p id="p-0191" num="0209">
<maths id="MATH-US-00003" num="00003">
<math overflow="scroll">
<mrow>
  <mrow>
    <msubsup>
      <mi>Tree</mi>
      <mi>sign</mi>
      <mn>1</mn>
    </msubsup>
    <mo>=</mo>
    <mrow>
      <mo>[</mo>
      <mtable>
        <mtr>
          <mtd>
            <mn>1</mn>
          </mtd>
          <mtd>
            <mn>1</mn>
          </mtd>
          <mtd>
            <mn>1</mn>
          </mtd>
          <mtd>
            <mn>1</mn>
          </mtd>
          <mtd>
            <mn>1</mn>
          </mtd>
        </mtr>
        <mtr>
          <mtd>
            <mstyle>
              <mspace width="0.3em" height="0.3ex"/>
            </mstyle>
          </mtd>
          <mtd>
            <mn>1</mn>
          </mtd>
          <mtd>
            <mrow>
              <mo>-</mo>
              <mn>1</mn>
            </mrow>
          </mtd>
          <mtd>
            <mn>1</mn>
          </mtd>
          <mtd>
            <mrow>
              <mo>-</mo>
              <mn>1</mn>
            </mrow>
          </mtd>
        </mtr>
        <mtr>
          <mtd>
            <mstyle>
              <mspace width="0.3em" height="0.3ex"/>
            </mstyle>
          </mtd>
          <mtd>
            <mstyle>
              <mspace width="0.3em" height="0.3ex"/>
            </mstyle>
          </mtd>
          <mtd>
            <mstyle>
              <mspace width="0.3em" height="0.3ex"/>
            </mstyle>
          </mtd>
          <mtd>
            <mn>1</mn>
          </mtd>
          <mtd>
            <mn>1</mn>
          </mtd>
        </mtr>
      </mtable>
      <mo>]</mo>
    </mrow>
  </mrow>
  <mo>,</mo>
</mrow>
</math>
</maths>
<br/>
describes whether the upper or the lower path is pursued for each OTT up-mixer. A positive sign indicates the upper path, and a negative sign indicates the lower path.
</p>
<p id="p-0192" num="0210">The matrix corresponds to the Tree<sup>1 </sup>matrix, and hence when a certain column and row in the Tree<sup>1 </sup>matrix points out a certain OTT up-mixer, the same column and row in the Tree<sub>sign</sub><sup>1 </sup>matrix indicates if the lower or upper part of that specific OTT up-mixer is used to reach the OTT up-mixer given in the first row of the specific column. (i.e. in the example, the signal being input to the 4th OTT up-mixer has passed through the upper path of the 0th OTT up-mixer (as indicated by the 3<sup>rd </sup>row, 5<sup>th </sup>column in the Tree<sub>sign</sub><sup>1 </sup>matrix), and the lower path of the 1<sup>st </sup>OTT up-mixer (as indicated by the 2<sup>nd </sup>row, 5<sup>th </sup>column in the Tree<sub>sign</sub><sup>1 </sup>matrix).
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>Tree<sub>depth</sub><sup>1</sup>=[1 2 2 3 3]<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
describes the depth of the tree for each OTT up-mixer (i.e. in the example up-mixer <b>0</b> is at layer 1, up-mixer <b>1</b> and <b>2</b> are at layer 2 and the up-mixer <b>3</b> and <b>4</b> are at layer 3); and
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>Tree<sub>elements</sub>=[5]<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
denotes the number of elements in the tree (i.e. in the example, the tree comprises five up-mixers).
</p>
<p id="p-0193" num="0211">A temporary matrix K<sub>1 </sub>describing the pre-matrix for only the de-correlated signals is then defined according to:</p>
<p id="p-0194" num="0212">
<maths id="MATH-US-00004" num="00004">
<math overflow="scroll">
<mrow>
  <mrow>
    <msub>
      <mi>K</mi>
      <mn>1</mn>
    </msub>
    <mo>&#x2061;</mo>
    <mrow>
      <mo>(</mo>
      <mi>i</mi>
      <mo>)</mo>
    </mrow>
  </mrow>
  <mo>=</mo>
  <mrow>
    <mo>{</mo>
    <mrow>
      <mrow>
        <mtable>
          <mtr>
            <mtd>
              <mrow>
                <mrow>
                  <munderover>
                    <mo>&#x220f;</mo>
                    <mrow>
                      <mi>p</mi>
                      <mo>=</mo>
                      <mn>0</mn>
                    </mrow>
                    <mrow>
                      <mrow>
                        <msub>
                          <mi>Tree</mi>
                          <mi>depth</mi>
                        </msub>
                        <mo>&#x2061;</mo>
                        <mrow>
                          <mo>(</mo>
                          <mrow>
                            <mi>i</mi>
                            <mo>-</mo>
                            <mn>1</mn>
                          </mrow>
                          <mo>)</mo>
                        </mrow>
                      </mrow>
                      <mo>-</mo>
                      <mn>1</mn>
                    </mrow>
                  </munderover>
                  <mo>&#x2062;</mo>
                  <msub>
                    <mi>X</mi>
                    <mrow>
                      <mi>Tree</mi>
                      <mo>&#x2061;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mrow>
                          <mi>i</mi>
                          <mo>,</mo>
                          <mi>p</mi>
                        </mrow>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                  </msub>
                </mrow>
                <mo>,</mo>
              </mrow>
            </mtd>
            <mtd>
              <mrow>
                <mrow>
                  <mrow>
                    <msub>
                      <mi>Tree</mi>
                      <mi>depth</mi>
                    </msub>
                    <mo>&#x2061;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <mi>i</mi>
                        <mo>-</mo>
                        <mn>1</mn>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mo>&#x3e;</mo>
                  <mn>1</mn>
                </mrow>
                <mo>,</mo>
                <mrow>
                  <mi>i</mi>
                  <mo>&#x3e;</mo>
                  <mn>0</mn>
                </mrow>
                <mo>,</mo>
              </mrow>
            </mtd>
            <mtd>
              <mrow>
                <mrow>
                  <mi>for</mi>
                  <mo>&#x2062;</mo>
                  <mstyle>
                    <mspace width="0.8em" height="0.8ex"/>
                  </mstyle>
                  <mo>&#x2062;</mo>
                  <mn>0</mn>
                </mrow>
                <mo>&#x2264;</mo>
                <mi>i</mi>
                <mo>&#x2264;</mo>
                <msub>
                  <mi>Tree</mi>
                  <mi>elements</mi>
                </msub>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <mn>1</mn>
                <mo>,</mo>
              </mrow>
            </mtd>
            <mtd>
              <mi>otherwise</mi>
            </mtd>
            <mtd>
              <mstyle>
                <mspace width="0.3em" height="0.3ex"/>
              </mstyle>
            </mtd>
          </mtr>
        </mtable>
        <mo>&#x2062;</mo>
        <mstyle>
          <mtext>
</mtext>
        </mstyle>
        <mo>&#x2062;</mo>
        <mi>where</mi>
        <mo>&#x2062;</mo>
        <mstyle>
          <mtext>
</mtext>
        </mstyle>
        <mo>&#x2062;</mo>
        <msub>
          <mi>X</mi>
          <mrow>
            <msup>
              <mi>Tree</mi>
              <mn>1</mn>
            </msup>
            <mo>&#x2061;</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>i</mi>
                <mo>,</mo>
                <mi>p</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
        </msub>
      </mrow>
      <mo>=</mo>
      <mrow>
        <mo>{</mo>
        <mtable>
          <mtr>
            <mtd>
              <mrow>
                <msub>
                  <mi>c</mi>
                  <mrow>
                    <mi>l</mi>
                    <mo>,</mo>
                    <mrow>
                      <msup>
                        <mi>Tree</mi>
                        <mn>1</mn>
                      </msup>
                      <mo>&#x2061;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mrow>
                          <mi>i</mi>
                          <mo>,</mo>
                          <mi>p</mi>
                        </mrow>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </msub>
                <mo>,</mo>
              </mrow>
            </mtd>
            <mtd>
              <mrow>
                <mrow>
                  <msubsup>
                    <mi>Tree</mi>
                    <mi>sign</mi>
                    <mn>1</mn>
                  </msubsup>
                  <mo>&#x2061;</mo>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mi>i</mi>
                      <mo>,</mo>
                      <mi>p</mi>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                </mrow>
                <mo>=</mo>
                <mn>1</mn>
              </mrow>
            </mtd>
          </mtr>
          <mtr>
            <mtd>
              <mrow>
                <msub>
                  <mi>c</mi>
                  <mrow>
                    <mi>r</mi>
                    <mo>,</mo>
                    <mrow>
                      <msup>
                        <mi>Tree</mi>
                        <mn>1</mn>
                      </msup>
                      <mo>&#x2061;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mrow>
                          <mi>i</mi>
                          <mo>,</mo>
                          <mi>p</mi>
                        </mrow>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                </msub>
                <mo>,</mo>
              </mrow>
            </mtd>
            <mtd>
              <mrow>
                <mrow>
                  <msubsup>
                    <mi>Tree</mi>
                    <mi>sign</mi>
                    <mn>1</mn>
                  </msubsup>
                  <mo>&#x2061;</mo>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mi>i</mi>
                      <mo>,</mo>
                      <mi>p</mi>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                </mrow>
                <mo>=</mo>
                <mrow>
                  <mo>-</mo>
                  <mn>1</mn>
                </mrow>
              </mrow>
            </mtd>
          </mtr>
        </mtable>
      </mrow>
    </mrow>
  </mrow>
</mrow>
</math>
</maths>
<br/>
is the gain value for the OTT up-mixer indicated by Tree<sup>1 </sup>(i,p) depending on whether the upper or lower output of the OTT box is used, and where
</p>
<p id="p-0195" num="0213">
<maths id="MATH-US-00005" num="00005">
<math overflow="scroll">
<mrow>
  <mrow>
    <msub>
      <mi>c</mi>
      <mrow>
        <mi>l</mi>
        <mo>,</mo>
        <mi>X</mi>
      </mrow>
    </msub>
    <mo>=</mo>
    <mrow>
      <mrow>
        <msqrt>
          <mfrac>
            <msubsup>
              <mi>IID</mi>
              <mrow>
                <mi>lin</mi>
                <mo>,</mo>
                <mi>X</mi>
              </mrow>
              <mn>2</mn>
            </msubsup>
            <mrow>
              <mn>1</mn>
              <mo>+</mo>
              <msubsup>
                <mi>IID</mi>
                <mrow>
                  <mi>lin</mi>
                  <mo>,</mo>
                  <mi>X</mi>
                </mrow>
                <mn>2</mn>
              </msubsup>
            </mrow>
          </mfrac>
        </msqrt>
        <mo>&#x2062;</mo>
        <mstyle>
          <mspace width="0.8em" height="0.8ex"/>
        </mstyle>
        <mo>&#x2062;</mo>
        <mi>and</mi>
        <mo>&#x2062;</mo>
        <mstyle>
          <mspace width="0.8em" height="0.8ex"/>
        </mstyle>
        <mo>&#x2062;</mo>
        <msub>
          <mi>c</mi>
          <mrow>
            <mi>r</mi>
            <mo>,</mo>
            <mi>X</mi>
          </mrow>
        </msub>
      </mrow>
      <mo>=</mo>
      <msqrt>
        <mfrac>
          <mn>1</mn>
          <mrow>
            <mn>1</mn>
            <mo>+</mo>
            <msubsup>
              <mi>IID</mi>
              <mrow>
                <mi>lin</mi>
                <mo>,</mo>
                <mi>X</mi>
              </mrow>
              <mn>2</mn>
            </msubsup>
          </mrow>
        </mfrac>
      </msqrt>
    </mrow>
  </mrow>
  <mo>,</mo>
  <mstyle>
    <mtext>
</mtext>
  </mstyle>
  <mo>&#x2062;</mo>
  <mrow>
    <mrow>
      <mi>where</mi>
      <mo>&#x2062;</mo>
      <mstyle>
        <mspace width="0.8em" height="0.8ex"/>
      </mstyle>
      <mo>&#x2062;</mo>
      <msub>
        <mi>IID</mi>
        <mrow>
          <mi>lin</mi>
          <mo>,</mo>
          <mi>X</mi>
        </mrow>
      </msub>
    </mrow>
    <mo>=</mo>
    <mrow>
      <msup>
        <mn>10</mn>
        <mfrac>
          <msub>
            <mi>IID</mi>
            <mi>X</mi>
          </msub>
          <mn>20</mn>
        </mfrac>
      </msup>
      <mo>.</mo>
    </mrow>
  </mrow>
</mrow>
</math>
</maths>
</p>
<p id="p-0196" num="0214">The IID values are the Inter-channel Intensity Difference values obtained from the bitstream.</p>
<p id="p-0197" num="0215">The final pre-mix matrix M<sub>1 </sub>is then constructed as:</p>
<p id="p-0198" num="0216">
<maths id="MATH-US-00006" num="00006">
<math overflow="scroll">
<mrow>
  <mrow>
    <msub>
      <mi>M</mi>
      <mn>1</mn>
    </msub>
    <mo>&#x2061;</mo>
    <mrow>
      <mo>(</mo>
      <mi>i</mi>
      <mo>)</mo>
    </mrow>
  </mrow>
  <mo>=</mo>
  <mrow>
    <mrow>
      <mo>[</mo>
      <mtable>
        <mtr>
          <mtd>
            <mn>1</mn>
          </mtd>
        </mtr>
        <mtr>
          <mtd>
            <mrow>
              <msub>
                <mi>K</mi>
                <mn>1</mn>
              </msub>
              <mo>&#x2061;</mo>
              <mrow>
                <mo>(</mo>
                <mi>i</mi>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mtd>
        </mtr>
      </mtable>
      <mo>]</mo>
    </mrow>
    <mo>.</mo>
  </mrow>
</mrow>
</math>
</maths>
</p>
<p id="p-0199" num="0217">Remembering that the objective of the pre-mix matrix is to be able to move the decorrelators included in the OTT up-mixer in <figref idref="DRAWINGS">FIG. 13</figref>, prior to the OTT boxes. Hence, the pre-mix matrix needs to supply a &#x201c;dry&#x201d; input signal for all decorrelators in the OTT up-mixer, where the input signals have the level they would have had at the specific point in the tree where the decorrelator was situated prior to moving it in front of the tree.</p>
<p id="p-0200" num="0218">Also remembering that the pre-matrix only applies a pre-gain for signals going into decorrelators, and the mixing of the decorrelator signals and the &#x201c;dry&#x201d; downmix signal takes place in the mix-matrix M<sub>2 </sub>which will be elaborated on below, the first element of the pre-mix matrix gives an output that is directly coupled to the M<sub>2 </sub>matrix (see <figref idref="DRAWINGS">FIG. 12</figref>, where the m/c line illustrates this).</p>
<p id="p-0201" num="0219">Given that a OTT up-mixer only tree is currently being observed, it is clear that also the second element of the pre-mix vector M<sub>1 </sub>will be one, since the signal going into the decorrelator in OTT up-mixer zero, is exactly the downmix input signal, and that there for this OTT up-mixer is no difference to move the decorrelator in front of the whole tree since it is already first in the tree.</p>
<p id="p-0202" num="0220">Furthermore, given that the input vector to the decorrelators are given by v<sup>n,k</sup>=M<sub>1</sub><sup>n,k</sup>x<sup>n,k </sup>and observing <figref idref="DRAWINGS">FIG. 13</figref>, and <figref idref="DRAWINGS">FIG. 12</figref>, and the way the elements in the M<sub>1</sub><sup>n,k </sup>matrix were derived, it is clear that the first row of M<b>1</b> corresponds to the m signal in <figref idref="DRAWINGS">FIG. 12</figref>, the subsequent rows corresponds to the decorrelator input signal of OTT box 0, . . . , 4. Hence, the w<sup>n,k </sup>vector will be as following:</p>
<p id="p-0203" num="0221">
<maths id="MATH-US-00007" num="00007">
<math overflow="scroll">
<mrow>
  <msup>
    <mi>w</mi>
    <mrow>
      <mi>n</mi>
      <mo>,</mo>
      <mi>k</mi>
    </mrow>
  </msup>
  <mo>=</mo>
  <mrow>
    <mo>[</mo>
    <mtable>
      <mtr>
        <mtd>
          <mi>m</mi>
        </mtd>
      </mtr>
      <mtr>
        <mtd>
          <msub>
            <mi>e</mi>
            <mn>0</mn>
          </msub>
        </mtd>
      </mtr>
      <mtr>
        <mtd>
          <msub>
            <mi>e</mi>
            <mn>1</mn>
          </msub>
        </mtd>
      </mtr>
      <mtr>
        <mtd>
          <msub>
            <mi>e</mi>
            <mn>2</mn>
          </msub>
        </mtd>
      </mtr>
      <mtr>
        <mtd>
          <msub>
            <mi>e</mi>
            <mn>3</mn>
          </msub>
        </mtd>
      </mtr>
      <mtr>
        <mtd>
          <msub>
            <mi>e</mi>
            <mn>4</mn>
          </msub>
        </mtd>
      </mtr>
    </mtable>
    <mo>]</mo>
  </mrow>
</mrow>
</math>
</maths>
<br/>
where e<sub>n </sub>denotes the decorrelator output from the n<sup>th </sup>OTT box in <figref idref="DRAWINGS">FIG. 13</figref>.
</p>
<p id="p-0204" num="0222">Now observing the mix matrix M<sub>2 </sub>the elements of this matrix can be deducted similarly. However, for this matrix the objective is to gain adjust the dry signal and mix it with the relevant decorrelator outputs. Remembering that the every OTT up-mixer in the tree can be described by the following:</p>
<p id="p-0205" num="0223">
<maths id="MATH-US-00008" num="00008">
<math overflow="scroll">
<mrow>
  <mrow>
    <mo>[</mo>
    <mtable>
      <mtr>
        <mtd>
          <mrow>
            <msub>
              <mi>Y</mi>
              <mn>1</mn>
            </msub>
            <mo>&#x2061;</mo>
            <mrow>
              <mo>[</mo>
              <mi>k</mi>
              <mo>]</mo>
            </mrow>
          </mrow>
        </mtd>
      </mtr>
      <mtr>
        <mtd>
          <mrow>
            <msub>
              <mi>Y</mi>
              <mn>2</mn>
            </msub>
            <mo>&#x2061;</mo>
            <mrow>
              <mo>[</mo>
              <mi>k</mi>
              <mo>]</mo>
            </mrow>
          </mrow>
        </mtd>
      </mtr>
    </mtable>
    <mo>]</mo>
  </mrow>
  <mo>=</mo>
  <mrow>
    <mrow>
      <mo>[</mo>
      <mtable>
        <mtr>
          <mtd>
            <mrow>
              <mi>H</mi>
              <mo>&#x2062;</mo>
              <mstyle>
                <mspace width="0.3em" height="0.3ex"/>
              </mstyle>
              <mo>&#x2062;</mo>
              <mn>11</mn>
            </mrow>
          </mtd>
          <mtd>
            <mrow>
              <mi>H</mi>
              <mo>&#x2062;</mo>
              <mstyle>
                <mspace width="0.3em" height="0.3ex"/>
              </mstyle>
              <mo>&#x2062;</mo>
              <mn>12</mn>
            </mrow>
          </mtd>
        </mtr>
        <mtr>
          <mtd>
            <mrow>
              <mi>H</mi>
              <mo>&#x2062;</mo>
              <mstyle>
                <mspace width="0.3em" height="0.3ex"/>
              </mstyle>
              <mo>&#x2062;</mo>
              <mn>21</mn>
            </mrow>
          </mtd>
          <mtd>
            <mrow>
              <mi>H</mi>
              <mo>&#x2062;</mo>
              <mstyle>
                <mspace width="0.3em" height="0.3ex"/>
              </mstyle>
              <mo>&#x2062;</mo>
              <mn>22</mn>
            </mrow>
          </mtd>
        </mtr>
      </mtable>
      <mo>]</mo>
    </mrow>
    <mo>&#x2061;</mo>
    <mrow>
      <mo>[</mo>
      <mtable>
        <mtr>
          <mtd>
            <mrow>
              <mi>X</mi>
              <mo>&#x2061;</mo>
              <mrow>
                <mo>[</mo>
                <mi>k</mi>
                <mo>]</mo>
              </mrow>
            </mrow>
          </mtd>
        </mtr>
        <mtr>
          <mtd>
            <mrow>
              <mi>Q</mi>
              <mo>&#x2061;</mo>
              <mrow>
                <mo>[</mo>
                <mi>k</mi>
                <mo>]</mo>
              </mrow>
            </mrow>
          </mtd>
        </mtr>
      </mtable>
      <mo>]</mo>
    </mrow>
  </mrow>
</mrow>
</math>
</maths>
<br/>
where, Y<sub>1 </sub>is the upper output of the OTT box, and Y<sub>2 </sub>is the lower and X is the dry input signal and Q is the decorrelator signal.
</p>
<p id="p-0206" num="0224">Since the output channels are formed by the matrix multiplication y<sup>n,k</sup>=M<sub>2</sub><sup>n,k</sup>w<sup>n,k </sup>and the w<sup>n,k </sup>vector is formed as a combination of the downmix signal and the output of the decorrelators as indicated by <figref idref="DRAWINGS">FIG. 12</figref>, every row of the M<sub>2 </sub>matrix corresponds to an output channel, and every element in the specific row, indicates how much of the downmix signal and the different decorrelators that should be mixed to form the specific output channel.</p>
<p id="p-0207" num="0225">As an example the first row of the mix matrix M<sub>2 </sub>can be observed.</p>
<p id="p-0208" num="0226">
<maths id="MATH-US-00009" num="00009">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <msup>
          <mi>y</mi>
          <mrow>
            <mi>n</mi>
            <mo>,</mo>
            <mi>k</mi>
          </mrow>
        </msup>
        <mo>=</mo>
        <mrow>
          <msubsup>
            <mi>M</mi>
            <mn>2</mn>
            <mrow>
              <mi>n</mi>
              <mo>,</mo>
              <mi>k</mi>
            </mrow>
          </msubsup>
          <mo>&#x2062;</mo>
          <msup>
            <mi>w</mi>
            <mrow>
              <mi>n</mi>
              <mo>,</mo>
              <mi>k</mi>
            </mrow>
          </msup>
        </mrow>
      </mrow>
    </mtd>
  </mtr>
  <mtr>
    <mtd>
      <mrow>
        <mo>=</mo>
        <mrow>
          <mo>[</mo>
          <mtable>
            <mtr>
              <mtd>
                <mrow>
                  <mi>H</mi>
                  <mo>&#x2062;</mo>
                  <mstyle>
                    <mspace width="0.3em" height="0.3ex"/>
                  </mstyle>
                  <mo>&#x2062;</mo>
                  <msub>
                    <mn>11</mn>
                    <mn>0</mn>
                  </msub>
                  <mo>&#x2062;</mo>
                  <mi>H</mi>
                  <mo>&#x2062;</mo>
                  <mstyle>
                    <mspace width="0.3em" height="0.3ex"/>
                  </mstyle>
                  <mo>&#x2062;</mo>
                  <msub>
                    <mn>11</mn>
                    <mn>1</mn>
                  </msub>
                  <mo>&#x2062;</mo>
                  <mi>H</mi>
                  <mo>&#x2062;</mo>
                  <mstyle>
                    <mspace width="0.3em" height="0.3ex"/>
                  </mstyle>
                  <mo>&#x2062;</mo>
                  <msub>
                    <mn>11</mn>
                    <mn>3</mn>
                  </msub>
                </mrow>
              </mtd>
              <mtd>
                <mrow>
                  <mi>H</mi>
                  <mo>&#x2062;</mo>
                  <mstyle>
                    <mspace width="0.3em" height="0.3ex"/>
                  </mstyle>
                  <mo>&#x2062;</mo>
                  <msub>
                    <mn>12</mn>
                    <mn>0</mn>
                  </msub>
                  <mo>&#x2062;</mo>
                  <mi>H</mi>
                  <mo>&#x2062;</mo>
                  <mstyle>
                    <mspace width="0.3em" height="0.3ex"/>
                  </mstyle>
                  <mo>&#x2062;</mo>
                  <msub>
                    <mn>11</mn>
                    <mn>1</mn>
                  </msub>
                  <mo>&#x2062;</mo>
                  <mi>H</mi>
                  <mo>&#x2062;</mo>
                  <mstyle>
                    <mspace width="0.3em" height="0.3ex"/>
                  </mstyle>
                  <mo>&#x2062;</mo>
                  <msub>
                    <mn>11</mn>
                    <mn>3</mn>
                  </msub>
                </mrow>
              </mtd>
              <mtd>
                <mrow>
                  <mi>H</mi>
                  <mo>&#x2062;</mo>
                  <mstyle>
                    <mspace width="0.3em" height="0.3ex"/>
                  </mstyle>
                  <mo>&#x2062;</mo>
                  <msub>
                    <mn>12</mn>
                    <mn>1</mn>
                  </msub>
                  <mo>&#x2062;</mo>
                  <mi>H</mi>
                  <mo>&#x2062;</mo>
                  <mstyle>
                    <mspace width="0.3em" height="0.3ex"/>
                  </mstyle>
                  <mo>&#x2062;</mo>
                  <msub>
                    <mn>11</mn>
                    <mn>3</mn>
                  </msub>
                </mrow>
              </mtd>
              <mtd>
                <mn>0</mn>
              </mtd>
              <mtd>
                <mrow>
                  <mi>H</mi>
                  <mo>&#x2062;</mo>
                  <mstyle>
                    <mspace width="0.3em" height="0.3ex"/>
                  </mstyle>
                  <mo>&#x2062;</mo>
                  <msub>
                    <mn>12</mn>
                    <mn>3</mn>
                  </msub>
                </mrow>
              </mtd>
              <mtd>
                <mn>0</mn>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
              </mtd>
              <mtd>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
              </mtd>
              <mtd>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
              </mtd>
              <mtd>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
              </mtd>
              <mtd>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
              </mtd>
              <mtd>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
              </mtd>
              <mtd>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
              </mtd>
              <mtd>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
              </mtd>
              <mtd>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
              </mtd>
              <mtd>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
              </mtd>
              <mtd>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
              </mtd>
              <mtd>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
              </mtd>
              <mtd>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
              </mtd>
              <mtd>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
              </mtd>
              <mtd>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
              </mtd>
              <mtd>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
              </mtd>
              <mtd>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
              </mtd>
              <mtd>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
              </mtd>
              <mtd>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
              </mtd>
              <mtd>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
              </mtd>
              <mtd>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
              </mtd>
              <mtd>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
              </mtd>
              <mtd>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
              </mtd>
              <mtd>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
              </mtd>
              <mtd>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
              </mtd>
              <mtd>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
              </mtd>
            </mtr>
          </mtable>
          <mo>]</mo>
        </mrow>
      </mrow>
    </mtd>
  </mtr>
  <mtr>
    <mtd>
      <mrow>
        <mo>=</mo>
        <mrow>
          <mo>[</mo>
          <mtable>
            <mtr>
              <mtd>
                <mi>m</mi>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <msub>
                  <mi>e</mi>
                  <mn>0</mn>
                </msub>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <msub>
                  <mi>e</mi>
                  <mn>1</mn>
                </msub>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <msub>
                  <mi>e</mi>
                  <mn>2</mn>
                </msub>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <msub>
                  <mi>e</mi>
                  <mn>3</mn>
                </msub>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <msub>
                  <mi>e</mi>
                  <mn>4</mn>
                </msub>
              </mtd>
            </mtr>
          </mtable>
          <mo>]</mo>
        </mrow>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0209" num="0227">The first element of the first row in M<sub>2 </sub>corresponds to the contribution of the &#x201c;m&#x201d; signal, and is the contribution to the output given by the upper outputs of OTT up-mixer <b>0</b>, <b>1</b> and <b>3</b>. Given the H matrix above, this corresponds to H<b>11</b><sub>0</sub>, H<b>11</b><sub>1 </sub>and H<b>11</b><sub>3</sub>, since the amount of dry signal for the upper output of an OTT box is given by the H<b>11</b> element of the OTT up-mixer.</p>
<p id="p-0210" num="0228">The second element corresponds to the contribution of de-correlator D<b>1</b>, which according to the above is situated in OTT up-mixer <b>0</b>. Hence, the contribution of this is H<b>11</b><sub>0</sub>, H<b>11</b><sub>3 </sub>and H<b>12</b><sub>0</sub>. This is evident, since the H<b>12</b><sub>0 </sub>element gives the decorrelator output from OTT up-mixer <b>0</b>, and that signal is subsequently passed through OTT up-mixer <b>1</b> and <b>3</b>, as part of the dry signal, and thus gain adjusted according to the H<b>11</b><sub>0 </sub>and H<b>11</b><sub>3 </sub>elements.</p>
<p id="p-0211" num="0229">Similarly, the third element corresponds to the contribution of the de-correlator D<b>2</b>, which according to the above is situated in OTT up-mixer <b>1</b>. Hence, the contribution of this is H<b>12</b><sub>0 </sub>and H<b>11</b><sub>3</sub>.</p>
<p id="p-0212" num="0230">The fifth element corresponds to the contribution of the de-correlator D<b>3</b>, which according to the above notation is situated in OTT up-mixer <b>3</b>. Hence, the contribution of this is H<b>12</b><sub>3</sub>.</p>
<p id="p-0213" num="0231">The fourth and sixth element of the first row is zero since no contribution of de-correlator D<b>4</b> or D<b>6</b> is part of the output channel corresponding to the first row in the matrix.</p>
<p id="p-0214" num="0232">The above, walk-trough example makes it evident that the matrix elements can be deducted as products of OTT up-mixer matrix elements H.</p>
<p id="p-0215" num="0233">In order to derive the mix-matrix M<sub>2 </sub>for a general tree, a similar procedure as for matrix M<sub>1 </sub>can be derived. First the following helper variables are derived:</p>
<p id="p-0216" num="0234">The matrix Tree, holds a column for every out channel, describing the indexes of the OTT up-mixers the signal must pass to reach each output channel.</p>
<p id="p-0217" num="0235">
<maths id="MATH-US-00010" num="00010">
<math overflow="scroll">
<mrow>
  <mi>Tree</mi>
  <mo>=</mo>
  <mrow>
    <mo>[</mo>
    <mtable>
      <mtr>
        <mtd>
          <mn>0</mn>
        </mtd>
        <mtd>
          <mn>0</mn>
        </mtd>
        <mtd>
          <mn>0</mn>
        </mtd>
        <mtd>
          <mn>0</mn>
        </mtd>
        <mtd>
          <mn>0</mn>
        </mtd>
        <mtd>
          <mn>0</mn>
        </mtd>
      </mtr>
      <mtr>
        <mtd>
          <mn>1</mn>
        </mtd>
        <mtd>
          <mn>1</mn>
        </mtd>
        <mtd>
          <mn>1</mn>
        </mtd>
        <mtd>
          <mn>1</mn>
        </mtd>
        <mtd>
          <mn>2</mn>
        </mtd>
        <mtd>
          <mn>2</mn>
        </mtd>
      </mtr>
      <mtr>
        <mtd>
          <mn>3</mn>
        </mtd>
        <mtd>
          <mn>3</mn>
        </mtd>
        <mtd>
          <mn>4</mn>
        </mtd>
        <mtd>
          <mn>4</mn>
        </mtd>
        <mtd>
          <mstyle>
            <mspace width="0.3em" height="0.3ex"/>
          </mstyle>
        </mtd>
        <mtd>
          <mstyle>
            <mspace width="0.3em" height="0.3ex"/>
          </mstyle>
        </mtd>
      </mtr>
      <mtr>
        <mtd>
          <mstyle>
            <mspace width="0.3em" height="0.3ex"/>
          </mstyle>
        </mtd>
        <mtd>
          <mstyle>
            <mspace width="0.3em" height="0.3ex"/>
          </mstyle>
        </mtd>
        <mtd>
          <mstyle>
            <mspace width="0.3em" height="0.3ex"/>
          </mstyle>
        </mtd>
        <mtd>
          <mstyle>
            <mspace width="0.3em" height="0.3ex"/>
          </mstyle>
        </mtd>
        <mtd>
          <mstyle>
            <mspace width="0.3em" height="0.3ex"/>
          </mstyle>
        </mtd>
        <mtd>
          <mstyle>
            <mspace width="0.3em" height="0.3ex"/>
          </mstyle>
        </mtd>
      </mtr>
    </mtable>
    <mo>]</mo>
  </mrow>
</mrow>
</math>
</maths>
</p>
<p id="p-0218" num="0236">The matrix Tree<sub>sign </sub>holds an indicator for every up-mixer in the tree to indicate if the upper (1) or lower (&#x2212;1) path should be used to reach the current output channel.</p>
<p id="p-0219" num="0237">
<maths id="MATH-US-00011" num="00011">
<math overflow="scroll">
<mrow>
  <msub>
    <mi>Tree</mi>
    <mi>sign</mi>
  </msub>
  <mo>=</mo>
  <mrow>
    <mo>[</mo>
    <mtable>
      <mtr>
        <mtd>
          <mn>1</mn>
        </mtd>
        <mtd>
          <mn>1</mn>
        </mtd>
        <mtd>
          <mn>1</mn>
        </mtd>
        <mtd>
          <mn>1</mn>
        </mtd>
        <mtd>
          <mrow>
            <mo>-</mo>
            <mn>1</mn>
          </mrow>
        </mtd>
        <mtd>
          <mrow>
            <mo>-</mo>
            <mn>1</mn>
          </mrow>
        </mtd>
      </mtr>
      <mtr>
        <mtd>
          <mn>1</mn>
        </mtd>
        <mtd>
          <mn>1</mn>
        </mtd>
        <mtd>
          <mrow>
            <mo>-</mo>
            <mn>1</mn>
          </mrow>
        </mtd>
        <mtd>
          <mrow>
            <mo>-</mo>
            <mn>1</mn>
          </mrow>
        </mtd>
        <mtd>
          <mn>1</mn>
        </mtd>
        <mtd>
          <mrow>
            <mo>-</mo>
            <mn>1</mn>
          </mrow>
        </mtd>
      </mtr>
      <mtr>
        <mtd>
          <mn>1</mn>
        </mtd>
        <mtd>
          <mrow>
            <mo>-</mo>
            <mn>1</mn>
          </mrow>
        </mtd>
        <mtd>
          <mn>1</mn>
        </mtd>
        <mtd>
          <mrow>
            <mo>-</mo>
            <mn>1</mn>
          </mrow>
        </mtd>
        <mtd>
          <mstyle>
            <mspace width="0.3em" height="0.3ex"/>
          </mstyle>
        </mtd>
        <mtd>
          <mstyle>
            <mspace width="0.3em" height="0.3ex"/>
          </mstyle>
        </mtd>
      </mtr>
      <mtr>
        <mtd>
          <mstyle>
            <mspace width="0.3em" height="0.3ex"/>
          </mstyle>
        </mtd>
        <mtd>
          <mstyle>
            <mspace width="0.3em" height="0.3ex"/>
          </mstyle>
        </mtd>
        <mtd>
          <mstyle>
            <mspace width="0.3em" height="0.3ex"/>
          </mstyle>
        </mtd>
        <mtd>
          <mstyle>
            <mspace width="0.3em" height="0.3ex"/>
          </mstyle>
        </mtd>
        <mtd>
          <mstyle>
            <mspace width="0.3em" height="0.3ex"/>
          </mstyle>
        </mtd>
        <mtd>
          <mstyle>
            <mspace width="0.3em" height="0.3ex"/>
          </mstyle>
        </mtd>
      </mtr>
    </mtable>
    <mo>]</mo>
  </mrow>
</mrow>
</math>
</maths>
</p>
<p id="p-0220" num="0238">The Tree<sub>depth </sub>vector holds the number of up-mixers that must be passed to get to a specific output channel.
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>Tree<sub>depth</sub>=[3 3 3 3 2 2]<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0221" num="0239">The Tree<sub>elements </sub>vector holds the number of up-mixers in every sub tree of the whole tree
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>Tree<sub>elements</sub>=[5].<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0222" num="0240">Provided that the above defined notation is sufficient to describe all trees that can be signaled, the M<sub>2 </sub>matrix can be defined. The matrix for a sub-tree k, creating N output channels from 1 input channel is defined according to:</p>
<p id="p-0223" num="0241">
<maths id="MATH-US-00012" num="00012">
<math overflow="scroll">
<mrow>
  <mrow>
    <msub>
      <mi>M</mi>
      <mn>2</mn>
    </msub>
    <mo>&#x2061;</mo>
    <mrow>
      <mo>(</mo>
      <mrow>
        <mi>j</mi>
        <mo>,</mo>
        <mi>i</mi>
      </mrow>
      <mo>)</mo>
    </mrow>
  </mrow>
  <mo>=</mo>
  <mrow>
    <mo>{</mo>
    <mrow>
      <mtable>
        <mtr>
          <mtd>
            <mrow>
              <mtable>
                <mtr>
                  <mtd>
                    <mrow>
                      <munderover>
                        <mo>&#x220f;</mo>
                        <mrow>
                          <mi>p</mi>
                          <mo>=</mo>
                          <mrow>
                            <mi>max</mi>
                            <mo>&#x2061;</mo>
                            <mrow>
                              <mo>(</mo>
                              <mrow>
                                <mn>0</mn>
                                <mo>,</mo>
                                <mrow>
                                  <mi>i</mi>
                                  <mo>-</mo>
                                  <mn>1</mn>
                                </mrow>
                              </mrow>
                              <mo>)</mo>
                            </mrow>
                          </mrow>
                        </mrow>
                        <mrow>
                          <mrow>
                            <msub>
                              <mi>Tree</mi>
                              <mi>depth</mi>
                            </msub>
                            <mo>&#x2061;</mo>
                            <mrow>
                              <mo>(</mo>
                              <mi>j</mi>
                              <mo>)</mo>
                            </mrow>
                          </mrow>
                          <mo>-</mo>
                          <mn>1</mn>
                        </mrow>
                      </munderover>
                      <mo>&#x2062;</mo>
                      <msub>
                        <mi>X</mi>
                        <mrow>
                          <mi>Tree</mi>
                          <mo>&#x2061;</mo>
                          <mrow>
                            <mo>(</mo>
                            <mrow>
                              <mi>p</mi>
                              <mo>,</mo>
                              <mi>j</mi>
                            </mrow>
                            <mo>)</mo>
                          </mrow>
                        </mrow>
                      </msub>
                    </mrow>
                  </mtd>
                  <mtd>
                    <mrow>
                      <mi>i</mi>
                      <mo>=</mo>
                      <mrow>
                        <mrow>
                          <mn>0</mn>
                          <mo>&#x2062;</mo>
                          <mstyle>
                            <mspace width="0.8em" height="0.8ex"/>
                          </mstyle>
                          <mo>&#x2062;</mo>
                          <mi>or</mi>
                          <mo>&#x2062;</mo>
                          <mstyle>
                            <mspace width="0.8em" height="0.8ex"/>
                          </mstyle>
                          <mo>&#x2062;</mo>
                          <mrow>
                            <mo>(</mo>
                            <mrow>
                              <mi>i</mi>
                              <mo>-</mo>
                              <mn>1</mn>
                            </mrow>
                            <mo>)</mo>
                          </mrow>
                        </mrow>
                        <mo>&#x2208;</mo>
                        <mrow>
                          <mo>{</mo>
                          <mrow>
                            <mi>Tree</mi>
                            <mo>&#x2062;</mo>
                            <mstyle>
                              <mspace width="0.8em" height="0.8ex"/>
                            </mstyle>
                            <mo>&#x2062;</mo>
                            <mrow>
                              <mo>(</mo>
                              <mrow>
                                <mn>0</mn>
                                <mo>,</mo>
                                <mi>j</mi>
                              </mrow>
                              <mo>)</mo>
                            </mrow>
                            <mo>&#x2062;</mo>
                            <mstyle>
                              <mspace width="0.8em" height="0.8ex"/>
                            </mstyle>
                            <mo>&#x2062;</mo>
                            <mi>&#x2026;</mi>
                            <mo>&#x2062;</mo>
                            <mstyle>
                              <mspace width="0.8em" height="0.8ex"/>
                            </mstyle>
                            <mo>&#x2062;</mo>
                            <mi>Tree</mi>
                            <mo>&#x2062;</mo>
                            <mstyle>
                              <mspace width="0.8em" height="0.8ex"/>
                            </mstyle>
                            <mo>&#x2062;</mo>
                            <mrow>
                              <mo>(</mo>
                              <mrow>
                                <mrow>
                                  <mrow>
                                    <msub>
                                      <mi>Tree</mi>
                                      <mi>depth</mi>
                                    </msub>
                                    <mo>&#x2061;</mo>
                                    <mrow>
                                      <mo>(</mo>
                                      <mi>j</mi>
                                      <mo>)</mo>
                                    </mrow>
                                  </mrow>
                                  <mo>-</mo>
                                  <mn>1</mn>
                                </mrow>
                                <mo>,</mo>
                                <mi>j</mi>
                              </mrow>
                              <mo>)</mo>
                            </mrow>
                          </mrow>
                          <mo>}</mo>
                        </mrow>
                      </mrow>
                    </mrow>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mn>0</mn>
                  </mtd>
                  <mtd>
                    <mi>otherwise</mi>
                  </mtd>
                </mtr>
              </mtable>
              <mo>}</mo>
            </mrow>
          </mtd>
          <mtd>
            <mrow>
              <mrow>
                <msub>
                  <mi>Tree</mi>
                  <mi>depth</mi>
                </msub>
                <mo>&#x2061;</mo>
                <mrow>
                  <mo>(</mo>
                  <mi>j</mi>
                  <mo>)</mo>
                </mrow>
              </mrow>
              <mo>&#x3e;</mo>
              <mn>0</mn>
            </mrow>
          </mtd>
        </mtr>
        <mtr>
          <mtd>
            <mn>1</mn>
          </mtd>
          <mtd>
            <mi>otherwise</mi>
          </mtd>
        </mtr>
      </mtable>
      <mo>&#x2062;</mo>
      <mstyle>
        <mtext>
</mtext>
      </mstyle>
      <mo>&#x2062;</mo>
      <mi>for</mi>
      <mo>&#x2062;</mo>
      <mstyle>
        <mspace width="0.8em" height="0.8ex"/>
      </mstyle>
      <mo>&#x2062;</mo>
      <mrow>
        <mo>{</mo>
        <mrow>
          <mrow>
            <mtable>
              <mtr>
                <mtd>
                  <mrow>
                    <mn>0</mn>
                    <mo>&#x2264;</mo>
                    <mi>j</mi>
                    <mo>&#x3c;</mo>
                    <msub>
                      <mi>Tree</mi>
                      <mi>outChannels</mi>
                    </msub>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <mn>0</mn>
                    <mo>&#x2264;</mo>
                    <mi>i</mi>
                    <mo>&#x3c;</mo>
                    <msub>
                      <mi>Tree</mi>
                      <mi>elements</mi>
                    </msub>
                  </mrow>
                </mtd>
              </mtr>
            </mtable>
            <mo>&#x2062;</mo>
            <mstyle>
              <mtext>
</mtext>
            </mstyle>
            <mo>&#x2062;</mo>
            <mi>where</mi>
            <mo>&#x2062;</mo>
            <mstyle>
              <mtext>
</mtext>
            </mstyle>
            <mo>&#x2062;</mo>
            <msub>
              <mi>X</mi>
              <mrow>
                <mi>Tree</mi>
                <mo>&#x2061;</mo>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mi>p</mi>
                    <mo>,</mo>
                    <mi>j</mi>
                  </mrow>
                  <mo>)</mo>
                </mrow>
              </mrow>
            </msub>
          </mrow>
          <mo>=</mo>
          <mrow>
            <mo>{</mo>
            <mtable>
              <mtr>
                <mtd>
                  <mrow>
                    <mrow>
                      <mtable>
                        <mtr>
                          <mtd>
                            <mrow>
                              <mi>H</mi>
                              <mo>&#x2062;</mo>
                              <mstyle>
                                <mspace width="0.3em" height="0.3ex"/>
                              </mstyle>
                              <mo>&#x2062;</mo>
                              <msub>
                                <mn>11</mn>
                                <mrow>
                                  <mi>Tree</mi>
                                  <mo>&#x2061;</mo>
                                  <mrow>
                                    <mo>(</mo>
                                    <mrow>
                                      <mi>p</mi>
                                      <mo>,</mo>
                                      <mi>j</mi>
                                    </mrow>
                                    <mo>)</mo>
                                  </mrow>
                                </mrow>
                              </msub>
                            </mrow>
                          </mtd>
                          <mtd>
                            <mrow>
                              <mrow>
                                <mi>p</mi>
                                <mo>&#x2260;</mo>
                                <mrow>
                                  <mrow>
                                    <mi>max</mi>
                                    <mo>&#x2061;</mo>
                                    <mrow>
                                      <mo>(</mo>
                                      <mrow>
                                        <mn>0</mn>
                                        <mo>,</mo>
                                        <mrow>
                                          <mi>i</mi>
                                          <mo>-</mo>
                                          <mn>1</mn>
                                        </mrow>
                                      </mrow>
                                      <mo>)</mo>
                                    </mrow>
                                  </mrow>
                                  <mo>&#x2062;</mo>
                                  <mstyle>
                                    <mspace width="0.8em" height="0.8ex"/>
                                  </mstyle>
                                  <mo>&#x2062;</mo>
                                  <mi>OR</mi>
                                  <mo>&#x2062;</mo>
                                  <mstyle>
                                    <mspace width="0.8em" height="0.8ex"/>
                                  </mstyle>
                                  <mo>&#x2062;</mo>
                                  <mi>i</mi>
                                </mrow>
                              </mrow>
                              <mo>=</mo>
                              <mn>0</mn>
                            </mrow>
                          </mtd>
                        </mtr>
                        <mtr>
                          <mtd>
                            <mrow>
                              <mi>H</mi>
                              <mo>&#x2062;</mo>
                              <mstyle>
                                <mspace width="0.3em" height="0.3ex"/>
                              </mstyle>
                              <mo>&#x2062;</mo>
                              <msub>
                                <mn>12</mn>
                                <mrow>
                                  <mi>Tree</mi>
                                  <mo>&#x2061;</mo>
                                  <mrow>
                                    <mo>(</mo>
                                    <mrow>
                                      <mi>p</mi>
                                      <mo>,</mo>
                                      <mi>j</mi>
                                    </mrow>
                                    <mo>)</mo>
                                  </mrow>
                                </mrow>
                              </msub>
                            </mrow>
                          </mtd>
                          <mtd>
                            <mrow>
                              <mi>p</mi>
                              <mo>=</mo>
                              <mrow>
                                <mrow>
                                  <mrow>
                                    <mi>max</mi>
                                    <mo>&#x2061;</mo>
                                    <mrow>
                                      <mo>(</mo>
                                      <mrow>
                                        <mn>0</mn>
                                        <mo>,</mo>
                                        <mrow>
                                          <mi>i</mi>
                                          <mo>-</mo>
                                          <mn>1</mn>
                                        </mrow>
                                      </mrow>
                                      <mo>)</mo>
                                    </mrow>
                                  </mrow>
                                  <mo>&#x2062;</mo>
                                  <mstyle>
                                    <mspace width="0.8em" height="0.8ex"/>
                                  </mstyle>
                                  <mo>&#x2062;</mo>
                                  <mi>AND</mi>
                                  <mo>&#x2062;</mo>
                                  <mstyle>
                                    <mspace width="0.8em" height="0.8ex"/>
                                  </mstyle>
                                  <mo>&#x2062;</mo>
                                  <mi>i</mi>
                                </mrow>
                                <mo>&#x2260;</mo>
                                <mn>0</mn>
                              </mrow>
                            </mrow>
                          </mtd>
                        </mtr>
                      </mtable>
                      <mo>}</mo>
                    </mrow>
                    <mo>,</mo>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mrow>
                      <msub>
                        <mi>Tree</mi>
                        <mi>sign</mi>
                      </msub>
                      <mo>&#x2061;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mrow>
                          <mi>p</mi>
                          <mo>,</mo>
                          <mi>j</mi>
                        </mrow>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>=</mo>
                    <mn>1</mn>
                  </mrow>
                </mtd>
              </mtr>
              <mtr>
                <mtd>
                  <mrow>
                    <mrow>
                      <mtable>
                        <mtr>
                          <mtd>
                            <mrow>
                              <mi>H</mi>
                              <mo>&#x2062;</mo>
                              <mstyle>
                                <mspace width="0.3em" height="0.3ex"/>
                              </mstyle>
                              <mo>&#x2062;</mo>
                              <msub>
                                <mn>21</mn>
                                <mrow>
                                  <mi>Tree</mi>
                                  <mo>&#x2061;</mo>
                                  <mrow>
                                    <mo>(</mo>
                                    <mrow>
                                      <mi>p</mi>
                                      <mo>,</mo>
                                      <mi>j</mi>
                                    </mrow>
                                    <mo>)</mo>
                                  </mrow>
                                </mrow>
                              </msub>
                            </mrow>
                          </mtd>
                          <mtd>
                            <mrow>
                              <mrow>
                                <mi>p</mi>
                                <mo>&#x2260;</mo>
                                <mrow>
                                  <mrow>
                                    <mi>max</mi>
                                    <mo>&#x2061;</mo>
                                    <mrow>
                                      <mo>(</mo>
                                      <mrow>
                                        <mn>0</mn>
                                        <mo>,</mo>
                                        <mrow>
                                          <mi>i</mi>
                                          <mo>-</mo>
                                          <mn>1</mn>
                                        </mrow>
                                      </mrow>
                                      <mo>)</mo>
                                    </mrow>
                                  </mrow>
                                  <mo>&#x2062;</mo>
                                  <mstyle>
                                    <mspace width="0.8em" height="0.8ex"/>
                                  </mstyle>
                                  <mo>&#x2062;</mo>
                                  <mi>OR</mi>
                                  <mo>&#x2062;</mo>
                                  <mstyle>
                                    <mspace width="0.8em" height="0.8ex"/>
                                  </mstyle>
                                  <mo>&#x2062;</mo>
                                  <mi>i</mi>
                                </mrow>
                              </mrow>
                              <mo>=</mo>
                              <mn>0</mn>
                            </mrow>
                          </mtd>
                        </mtr>
                        <mtr>
                          <mtd>
                            <mrow>
                              <mi>H</mi>
                              <mo>&#x2062;</mo>
                              <mstyle>
                                <mspace width="0.3em" height="0.3ex"/>
                              </mstyle>
                              <mo>&#x2062;</mo>
                              <msub>
                                <mn>22</mn>
                                <mrow>
                                  <mi>Tree</mi>
                                  <mo>&#x2061;</mo>
                                  <mrow>
                                    <mo>(</mo>
                                    <mrow>
                                      <mi>p</mi>
                                      <mo>,</mo>
                                      <mi>j</mi>
                                    </mrow>
                                    <mo>)</mo>
                                  </mrow>
                                </mrow>
                              </msub>
                            </mrow>
                          </mtd>
                          <mtd>
                            <mrow>
                              <mi>p</mi>
                              <mo>=</mo>
                              <mrow>
                                <mrow>
                                  <mrow>
                                    <mi>max</mi>
                                    <mo>&#x2061;</mo>
                                    <mrow>
                                      <mo>(</mo>
                                      <mrow>
                                        <mn>0</mn>
                                        <mo>,</mo>
                                        <mrow>
                                          <mi>i</mi>
                                          <mo>-</mo>
                                          <mn>1</mn>
                                        </mrow>
                                      </mrow>
                                      <mo>)</mo>
                                    </mrow>
                                  </mrow>
                                  <mo>&#x2062;</mo>
                                  <mstyle>
                                    <mspace width="0.8em" height="0.8ex"/>
                                  </mstyle>
                                  <mo>&#x2062;</mo>
                                  <mi>AND</mi>
                                  <mo>&#x2062;</mo>
                                  <mstyle>
                                    <mspace width="0.8em" height="0.8ex"/>
                                  </mstyle>
                                  <mo>&#x2062;</mo>
                                  <mi>i</mi>
                                </mrow>
                                <mo>&#x2260;</mo>
                                <mn>0</mn>
                              </mrow>
                            </mrow>
                          </mtd>
                        </mtr>
                      </mtable>
                      <mo>}</mo>
                    </mrow>
                    <mo>,</mo>
                  </mrow>
                </mtd>
                <mtd>
                  <mrow>
                    <mrow>
                      <msub>
                        <mi>Tree</mi>
                        <mi>sign</mi>
                      </msub>
                      <mo>&#x2061;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mrow>
                          <mi>p</mi>
                          <mo>,</mo>
                          <mi>j</mi>
                        </mrow>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>=</mo>
                    <mrow>
                      <mo>-</mo>
                      <mn>1</mn>
                    </mrow>
                  </mrow>
                </mtd>
              </mtr>
            </mtable>
          </mrow>
        </mrow>
      </mrow>
    </mrow>
  </mrow>
</mrow>
</math>
</maths>
<br/>
where the H elements are defined by the parameters corresponding to the OTT up-mixer with index Tree(p,j).
</p>
<p id="p-0224" num="0242">In the following a more general tree involving TTT up-mixers at the root level is assumed, such as for example the decoder structure of <figref idref="DRAWINGS">FIG. 14</figref>. The up-mixers containing two variables M<b>1</b><sub>i</sub>; and M<b>2</b><sub>i </sub>denote OTT trees and thus not necessarily single OTT up-mixers. Furthermore, at first it is assumed that the TTT up-mixers do not employ a de-correlated signal, i.e., the TTT matrix can be described as a 3&#xd7;2 matrix:</p>
<p id="p-0225" num="0243">
<maths id="MATH-US-00013" num="00013">
<math overflow="scroll">
<mrow>
  <mrow>
    <mi>M</mi>
    <mo>&#x2062;</mo>
    <mstyle>
      <mspace width="0.3em" height="0.3ex"/>
    </mstyle>
    <mo>&#x2062;</mo>
    <msub>
      <mn>1</mn>
      <mi>TTT</mi>
    </msub>
  </mrow>
  <mo>=</mo>
  <mrow>
    <mo>[</mo>
    <mtable>
      <mtr>
        <mtd>
          <mrow>
            <mi>M</mi>
            <mo>&#x2062;</mo>
            <mstyle>
              <mspace width="0.3em" height="0.3ex"/>
            </mstyle>
            <mo>&#x2062;</mo>
            <msubsup>
              <mn>1</mn>
              <mi>TTT</mi>
              <mrow>
                <mn>0</mn>
                <mo>,</mo>
                <mn>0</mn>
              </mrow>
            </msubsup>
          </mrow>
        </mtd>
        <mtd>
          <mrow>
            <mi>M</mi>
            <mo>&#x2062;</mo>
            <mstyle>
              <mspace width="0.3em" height="0.3ex"/>
            </mstyle>
            <mo>&#x2062;</mo>
            <msubsup>
              <mn>1</mn>
              <mi>TTT</mi>
              <mrow>
                <mn>0</mn>
                <mo>,</mo>
                <mn>1</mn>
              </mrow>
            </msubsup>
          </mrow>
        </mtd>
      </mtr>
      <mtr>
        <mtd>
          <mrow>
            <mi>M</mi>
            <mo>&#x2062;</mo>
            <mstyle>
              <mspace width="0.3em" height="0.3ex"/>
            </mstyle>
            <mo>&#x2062;</mo>
            <msubsup>
              <mn>1</mn>
              <mi>TTT</mi>
              <mrow>
                <mn>1</mn>
                <mo>,</mo>
                <mn>0</mn>
              </mrow>
            </msubsup>
          </mrow>
        </mtd>
        <mtd>
          <mrow>
            <mi>M</mi>
            <mo>&#x2062;</mo>
            <mstyle>
              <mspace width="0.3em" height="0.3ex"/>
            </mstyle>
            <mo>&#x2062;</mo>
            <msubsup>
              <mn>1</mn>
              <mi>TTT</mi>
              <mrow>
                <mn>1</mn>
                <mo>,</mo>
                <mn>1</mn>
              </mrow>
            </msubsup>
          </mrow>
        </mtd>
      </mtr>
      <mtr>
        <mtd>
          <mrow>
            <mi>M</mi>
            <mo>&#x2062;</mo>
            <mstyle>
              <mspace width="0.3em" height="0.3ex"/>
            </mstyle>
            <mo>&#x2062;</mo>
            <msubsup>
              <mn>1</mn>
              <mi>TTT</mi>
              <mrow>
                <mn>2</mn>
                <mo>,</mo>
                <mn>0</mn>
              </mrow>
            </msubsup>
          </mrow>
        </mtd>
        <mtd>
          <mrow>
            <mi>M</mi>
            <mo>&#x2062;</mo>
            <mstyle>
              <mspace width="0.3em" height="0.3ex"/>
            </mstyle>
            <mo>&#x2062;</mo>
            <msubsup>
              <mn>1</mn>
              <mi>TTT</mi>
              <mrow>
                <mn>2</mn>
                <mo>,</mo>
                <mn>1</mn>
              </mrow>
            </msubsup>
          </mrow>
        </mtd>
      </mtr>
    </mtable>
    <mo>]</mo>
  </mrow>
</mrow>
</math>
</maths>
</p>
<p id="p-0226" num="0244">Under these assumptions and in order to derive the final pre- and mix-matrices for the first TTT up-mixer, two sets of pre-mix matrices are derived for each OTT tree, one describing the pre-matrixing for the first input signal of the TTT up-mixer and one describing the pre-matrixing for the second input signal of the TTT up-mixer. After application of both pre-matrixing blocks and de-correlation the signals can be summed.</p>
<p id="p-0227" num="0245">The output signals may thus be derived as the following:</p>
<p id="p-0228" num="0246"><chemistry id="CHEM-US-00001" num="00001">
<img id="EMI-C00001" he="119.97mm" wi="100.08mm" file="US08626503-20140107-C00001.TIF" alt="embedded image" img-content="chem" img-format="tif"/>
</chemistry>
</p>
<p id="p-0229" num="0247">Finally, in case the TTT up-mixer would employ de-correlation, the contribution of the de-correlated signal can be added in the form of a post-process. After the TTT up-mixer de-correlated signal has been derived, the contribution to each output signal is simply the contribution given by the [M<sub>13</sub>, M<sub>23</sub>, M<sub>33</sub>] vector spread by the IIDs of each following OTT up-mixer.</p>
<p id="p-0230" num="0248"><figref idref="DRAWINGS">FIG. 15</figref> illustrates a method of transmitting and receiving an audio signal in accordance with some embodiments of the invention.</p>
<p id="p-0231" num="0249">The method initiates in step <b>1501</b> wherein a transmitter receives a number of input audio channels.</p>
<p id="p-0232" num="0250">Step <b>1501</b> is followed by step <b>1503</b> wherein the transmitter parametrically encodes the number of input audio channels to generate the data stream comprising the number of audio channels and parametric audio data.</p>
<p id="p-0233" num="0251">Step <b>1503</b> is followed by step <b>1505</b> wherein the hierarchical decoder structure corresponding to the hierarchical encoding means is determined.</p>
<p id="p-0234" num="0252">Step <b>1505</b> is followed by step <b>1507</b> wherein the transmitter includes decoder tree structure data comprising at least one data value indicative of a channel split characteristic for an audio channel at a hierarchical layer of the hierarchical decoder structure in the data stream.</p>
<p id="p-0235" num="0253">Step <b>1507</b> is followed by step <b>1509</b> wherein the transmitter transmits the data stream to the receiver.</p>
<p id="p-0236" num="0254">Step <b>1509</b> is followed by step <b>1511</b> wherein a receiver receives the data stream.</p>
<p id="p-0237" num="0255">Step <b>1511</b> is followed by step <b>1513</b> wherein the hierarchical decoder structure to be used by the receiver is determined in response to the decoder tree structure data.</p>
<p id="p-0238" num="0256">Step <b>1513</b> is followed by step <b>1515</b> wherein the receiver generates the number of output audio channels from the data stream using the hierarchical decoder structure.</p>
<p id="p-0239" num="0257">It will be appreciated that the above description for clarity has described embodiments of the invention with reference to different functional units and processors. However, it will be apparent that any suitable distribution of functionality between different functional units or processors may be used without detracting from the invention. For example, functionality illustrated to be performed by separate processors or controllers may be performed by the same processor or controllers. Hence, references to specific functional units are only to be seen as references to suitable means for providing the described functionality rather than indicative of a strict logical or physical structure or organization.</p>
<p id="p-0240" num="0258">The invention can be implemented in any suitable form including hardware, software, firmware or any combination of these. The invention may optionally be implemented at least partly as computer software running on one or more data processors and/or digital signal processors. The elements and components of an embodiment of the invention may be physically, functionally and logically implemented in any suitable way. Indeed the functionality may be implemented in a single unit, in a plurality of units or as part of other functional units. As such, the invention may be implemented in a single unit or may be physically and functionally distributed between different units and processors.</p>
<p id="p-0241" num="0259">Although the present invention has been described in connection with some embodiments, it is not intended to be limited to the specific form set forth herein. Rather, the scope of the present invention is limited only by the accompanying claims. Additionally, although a feature may appear to be described in connection with particular embodiments, one skilled in the art would recognize that various features of the described embodiments may be combined in accordance with the invention. In the claims, the term comprising does not exclude the presence of other elements or steps.</p>
<p id="p-0242" num="0260">Furthermore, although individually listed, a plurality of means, elements or method steps may be implemented by e.g. a single unit or processor. Additionally, although individual features may be included in different claims, these may possibly be advantageously combined, and the inclusion in different claims does not imply that a combination of features is not feasible and/or advantageous. Also the inclusion of a feature in one category of claims does not imply a limitation to this category but rather indicates that the feature is equally applicable to other claim categories as appropriate. Furthermore, the order of features in the claims do not imply any specific order in which the features must be worked and in particular the order of individual steps in a method claim does not imply that the steps must be performed in this order. Rather, the steps may be performed in any suitable order. In addition, singular references do not exclude a plurality. Thus references to &#x201c;a&#x201d;, &#x201c;an&#x201d;, &#x201c;first&#x201d;, &#x201c;second&#x201d; etc do not preclude a plurality. Reference signs in the claims are provided merely as a clarifying example shall not be construed as limiting the scope of the claims in any way.</p>
<p id="p-0243" num="0261">In accordance with an embodiment of the present case, an apparatus for generating a number of output audio channels comprises a data stream comprising a number of input audio channels, the number being one or greater than one, and parametric audio data describing spatial properties; the data stream further comprising decoder tree structure data for a matrix decoder structure, the decoder tree structure data comprising at least one data value from which matrix multiplication coefficients of the matrix decoder structure are generatable, the matrix decoder structure comprising matrix multiplications (M<b>1</b>, M<b>2</b>) and intermediate decorrelation units (D<sub>1</sub>, . . . , D<sub>5</sub>); the matrix decoder structure in response to the decoder tree structure data; and the number of output audio channels from the data stream using the matrix decoder structure.</p>
<p id="p-0244" num="0262">Further, the decoder tree structure data may comprise a plurality of data values, each data value indicative of a channel split characteristic for one channel at one hierarchical layer of the hierarchical decoder structure.</p>
<p id="p-0245" num="0263">Further, a predetermined data value may be indicative of no channel split for the channel at the hierarchical layer.</p>
<p id="p-0246" num="0264">Further, a predetermined data value may be indicative of a one-to-two channel split for the channel at the hierarchical layer.</p>
<p id="p-0247" num="0265">Further, the plurality of data values may be binary data values.</p>
<p id="p-0248" num="0266">Further, one predetermined binary data value may be indicative of a one-to-two channel split and another predetermined binary data value is indicative of no channel split.</p>
<p id="p-0249" num="0267">Further, the data stream may further comprise an indication of the number of input channels.</p>
<p id="p-0250" num="0268">Further, the data stream may further comprise an indication of the number of output channels.</p>
<p id="p-0251" num="0269">Further, the data stream may further comprise an indication of a number of one-to-two channel split functions in the hierarchical decoder structure.</p>
<p id="p-0252" num="0270">Further, the data stream may further comprise an indication of a number of two-to-three channel split functions in the hierarchical decoder structure.</p>
<p id="p-0253" num="0271">Further, the decoder tree structure data may comprise a data for a plurality of decoder tree structures ordered in response to the presence of a two-to-three channel split functionality.</p>
<p id="p-0254" num="0272">Further, the decoder tree structure data for at least one input channel may comprise an indication of a two-to-three channel split function being present at the root layer followed by binary data wherein each binary data value is indicative of either no split functionality or a one-to-two channel split functionality for dependent layers of the two-to-three split functionality.</p>
<p id="p-0255" num="0273">Further, the data stream may further comprise an indication of a loudspeaker position for at least one of the output channels.</p>
<p id="p-0256" num="0274">Further, the means for generating the matrix decoder structure may be arranged to determine, as the multiplication coefficients of the matrix decoder structure, multiplication parameters for channel split functions of the hierarchical layers in response to the decoder tree structure data.</p>
<p id="p-0257" num="0275">Further, the matrix decoder structure may comprise at least one channel split functionality in at least one hierarchical layer, the at least one channel split functionality comprises the intermediate de-correlation units for generating a de-correlated signal from an output obtained by processing the audio input channel of the data stream by a pre matrix (M<b>1</b>) used in a first matrix multiplication; and wherein a matrix used in a second matrix multiplication comprises a mix matrix (M<b>2</b>) comprising at least one channel split unit for generating a plurality of hierarchical layer output channels from an audio channel from a higher hierarchical layer and the de-correlated signal.</p>
<p id="p-0258" num="0276">Further, the first multiplication matrix (M<b>1</b>) may comprise a level compensation means for performing an audio level compensation on the audio input channel to generate a level compensated audio signal; and wherein the decorrelation units (D<sub>1</sub>, . . . D<sub>5</sub>) are adapted for filtering the level compensated audio signal to generate the de-correlated signal.</p>
<p id="p-0259" num="0277">Further, the level compensation means to comprise a matrix multiplication by a pre-matrix.</p>
<p id="p-0260" num="0278">Further, the first multiplication matrix is a pre matrix (M<b>1</b>) and the coefficients of the pre matrix (M<b>1</b>) have at least one unity value for the matrix decoder structure, the matrix decoder structure may comprise only a one-to-two channel split functionality.</p>
<p id="p-0261" num="0279">Further, the first multiplication matrix is a pre matrix (M<b>1</b>) and the apparatus may further comprise for determining the pre matrix (M<b>1</b>) for the at least one channel split functionality in at least one hierarchical layer in response to parameters of a channel split functionality in a higher hierarchical layer.</p>
<p id="p-0262" num="0280">Further, a channel split matrix (Tree) may comprise for an at least one channel split functionality in response to parameters of the at least one channel split functionality in at least one hierarchical layer.</p>
<p id="p-0263" num="0281">Further, the first multiplication matrix is a pre matrix (M<b>1</b>) and the apparatus may further comprise for determining the pre-matrix (M<b>1</b>) for at least one channel split functionality in at least one hierarchical layer in response to parameters of a two-to-three channel split functionality of a higher hierarchical layer.</p>
<p id="p-0264" num="0282">Further, the pre matrix (M<b>1</b>) may be arranged to determine the pre-matrix for the at least one channel split functionality in response to a determination of a first sub-pre-matrix corresponding to a first input of the two-to-three up-mixer and a second sub-pre-matrix corresponding to a second input of the two-to-three up-mixer.</p>
<p id="p-0265" num="0283"><figref idref="DRAWINGS">FIG. 16</figref> illustrates an apparatus for generating a number of output audio channels. The apparatus comprises a receiver <b>1600</b> for receiving a data stream <b>1601</b>, where the data stream comprises a number of input audio channels, the number being one or greater than one and parametric audio data describing spatial properties. Furthermore, the data stream comprises decoder tree structure data for a matrix decoder structure, the decoder tree structure data comprising at least one data value for which matrix multiplication coefficients of the matrix decoder structure are generatable, where the matrix decoder structure comprises matrix multiplications and intermediate decorrelation units. The apparatus furthermore comprises a structure generator <b>1602</b> for generating the matrix decoder structure <b>1604</b> in response to the decoder tree structure data included in the data stream received by the receiver <b>1600</b>. Furthermore, the apparatus for generating a number of output audio channels comprises an output generator <b>1606</b> for generating the number of output audio channels from the data stream using the matrix decoder structure.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-chemistry idref="CHEM-US-00001" cdx-file="US08626503-20140107-C00001.CDX" mol-file="US08626503-20140107-C00001.MOL"/>
<us-math idrefs="MATH-US-00001" nb-file="US08626503-20140107-M00001.NB">
<img id="EMI-M00001" he="19.73mm" wi="76.20mm" file="US08626503-20140107-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00002" nb-file="US08626503-20140107-M00002.NB">
<img id="EMI-M00002" he="11.26mm" wi="76.20mm" file="US08626503-20140107-M00002.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00003" nb-file="US08626503-20140107-M00003.NB">
<img id="EMI-M00003" he="11.26mm" wi="76.20mm" file="US08626503-20140107-M00003.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00004" nb-file="US08626503-20140107-M00004.NB">
<img id="EMI-M00004" he="28.96mm" wi="96.35mm" file="US08626503-20140107-M00004.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00005" nb-file="US08626503-20140107-M00005.NB">
<img id="EMI-M00005" he="16.59mm" wi="76.20mm" file="US08626503-20140107-M00005.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00006" nb-file="US08626503-20140107-M00006.NB">
<img id="EMI-M00006" he="7.45mm" wi="76.20mm" file="US08626503-20140107-M00006.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00007" nb-file="US08626503-20140107-M00007.NB">
<img id="EMI-M00007" he="22.94mm" wi="76.20mm" file="US08626503-20140107-M00007.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00008" nb-file="US08626503-20140107-M00008.NB">
<img id="EMI-M00008" he="7.45mm" wi="76.20mm" file="US08626503-20140107-M00008.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00009" nb-file="US08626503-20140107-M00009.NB">
<img id="EMI-M00009" he="50.80mm" wi="76.20mm" file="US08626503-20140107-M00009.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00010" nb-file="US08626503-20140107-M00010.NB">
<img id="EMI-M00010" he="15.16mm" wi="76.20mm" file="US08626503-20140107-M00010.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00011" nb-file="US08626503-20140107-M00011.NB">
<img id="EMI-M00011" he="15.16mm" wi="76.20mm" file="US08626503-20140107-M00011.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00012" nb-file="US08626503-20140107-M00012.NB">
<img id="EMI-M00012" he="54.36mm" wi="116.08mm" file="US08626503-20140107-M00012.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00013" nb-file="US08626503-20140107-M00013.NB">
<img id="EMI-M00013" he="13.38mm" wi="76.20mm" file="US08626503-20140107-M00013.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. An apparatus for generating a number of output audio channels, the apparatus comprising:
<claim-text>a receiver configured for receiving a data stream comprising a number of input audio channels, the number being one or greater than one, and parametric audio data describing spatial properties;</claim-text>
<claim-text>wherein the data stream further comprising decoder tree structure data for a matrix decoder structure, the decoder tree structure data comprising at least one data value from which matrix multiplication coefficients of the matrix decoder structure are generatable, the matrix decoder structure comprising matrix multiplications and intermediate decorrelation units;</claim-text>
<claim-text>a structure generator configured for generating the matrix decoder structure in response to the decoder tree structure data included in the data stream received by the receiver; and</claim-text>
<claim-text>an output generator configured for generating the number of output audio channels from the data stream using the matrix decoder structure.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The apparatus of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the structure generator is arranged to determine, as the multiplication coefficients of the matrix decoder structure, multiplication parameters for channel split functions of the hierarchical layers in response to the decoder tree structure data.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The apparatus of <claim-ref idref="CLM-00001">claim 1</claim-ref>,
<claim-text>wherein the matrix decoder structure comprises at least one channel split functionality in at least one hierarchical layer, the at least one channel split functionality comprises the intermediate de-correlation units for generating a de-correlated signal from an output obtained by processing the audio input channel of the data stream by a pre matrix used in a first matrix multiplication; and</claim-text>
<claim-text>wherein a matrix used in a second matrix multiplication comprises a mix matrix comprising at least one channel split unit for generating a plurality of hierarchical layer output channels from an audio channel from a higher hierarchical layer and the de-correlated signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The apparatus of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the first multiplication matrix comprises a level compensator for performing an audio level compensation on the audio input channel to generate a level compensated audio signal; and
<claim-text>wherein the decorrelation units are adapted for filtering the level compensated audio signal to generate the de-correlated signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The apparatus of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the first multiplication matrix is a pre matrix and the coefficients of the pre matrix have at least one unity value for the matrix decoder structure, the matrix decoder structure comprising only a one-to-two channel split functionality.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The apparatus of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the first multiplication matrix is a pre matrix and wherein the apparatus further comprises a processor for determining the pre matrix for the at least one channel split functionality in at least one hierarchical layer in response to parameters of a channel split functionality in a higher hierarchical layer.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The apparatus of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising a processor for determining a channel split matrix for an at least one channel split functionality in response to parameters of the at least one channel split functionality in at least one hierarchical layer.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The apparatus of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the first multiplication matrix is a pre matrix and wherein the apparatus further comprises a processor for determining the pre matrix for at least one channel split functionality in at least one hierarchical layer in response to parameters of a two-to-three channel split functionality of a higher hierarchical layer.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The apparatus of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the processor for determining the pre matrix is arranged to determine the pre matrix for the at least one channel split functionality in response to a determination of a first sub-pre-matrix corresponding to a first input of the two-to-three up-mixer and a second sub-pre-matrix corresponding to a second input of the two-to-three up-mixer.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. A method of generating a number of output audio channels, the method comprising:
<claim-text>receiving a data stream comprising a number of input audio channels, the number being one or greater than one, and parametric audio data describing spatial properties; the data stream further comprising decoder tree structure data for a matrix decoder structure, the decoder tree structure data comprising at least one data value from which matrix multiplication coefficients of the matrix decoder structure are generatable, the matrix decoder structure comprising matrix multiplications and intermediate decorrelation units;</claim-text>
<claim-text>generating the matrix decoder structure in response to the decoder tree structure data included in the data stream received; and</claim-text>
<claim-text>generating the number of output audio channels from the data stream using the matrix decoder structure.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. A receiver for generating a number of output audio channels, the receiver comprising: an apparatus for generating a number of output audio channels, the apparatus comprising;
<claim-text>a receiver configured for receiving a data stream comprising a number of input audio channels, the number being one or greater than one, and parametric audio data describing spatial properties; the data stream further comprising decoder tree structure data for a matrix decoder structure, the decoder tree structure data comprising at least one data value from which matrix multiplication coefficients of the matrix decoder structure are generatable, the matrix decoder structure comprising matrix multiplications and intermediate decorrelation units;</claim-text>
<claim-text>a structure generator configured for generating the matrix decoder structure in response to the decoder tree structure data included in the data stream received by the receiver; and</claim-text>
<claim-text>an output generator configured for generating the number of output audio channels from the data stream using the matrix decoder structure.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. A method of receiving a data stream, the method comprising a method of generating a number of output audio channels, the method comprising:
<claim-text>receiving a data stream comprising a number of input audio channels, the number being one or greater than one, and parametric audio data describing spatial properties; the data stream further comprising decoder tree structure data for a matrix decoder structure, the decoder tree structure data comprising at least one data value from which matrix multiplication coefficients of the matrix decoder structure are generatable, the matrix decoder structure comprising matrix multiplications and intermediate decorrelation units;</claim-text>
<claim-text>generating the matrix decoder structure in response to the decoder tree structure data included in the data stream received; and</claim-text>
<claim-text>generating the number of output audio channels from the data stream using the matrix decoder structure.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. A tangible computer program product adapted to execute a method of generating a number of output audio channels, the method comprising:
<claim-text>receiving a data stream comprising a number of input audio channels, the number being one or greater than one, and parametric audio data describing spatial properties; the data stream further comprising decoder tree structure data for a matrix decoder structure, the decoder tree structure data comprising at least one data value from which matrix multiplication coefficients of the matrix decoder structure are generatable, the matrix decoder structure comprising matrix multiplications and intermediate decorrelation units;</claim-text>
<claim-text>generating the matrix decoder structure in response to the decoder tree structure data included in the data stream received; and</claim-text>
<claim-text>generating the number of output audio channels from the data stream using the matrix decoder structure.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. An audio playing device comprising an apparatus for generating a number of output audio channels, the apparatus comprising:
<claim-text>a receiver configured for receiving a data stream comprising a number of input audio channels, the number being one or greater than one, and parametric audio data describing spatial properties; the data stream further comprising decoder tree structure data for a matrix decoder structure, the decoder tree structure data comprising at least one data value from which matrix multiplication coefficients of the matrix decoder structure are generatable, the matrix decoder structure comprising matrix multiplications and intermediate decorrelation units;</claim-text>
<claim-text>a structure generator configured for generating the matrix decoder structure in response to the decoder tree structure data included in the data stream received by the receiver: and</claim-text>
<claim-text>an output generator configured for generating the number of output audio channels from the data stream using the matrix decoder structure. </claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
