<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08627445-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08627445</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12041318</doc-number>
<date>20080303</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2007-053550</doc-number>
<date>20070303</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>873</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>29</main-group>
<subgroup>06</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>15</main-group>
<subgroup>16</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>726 12</main-classification>
<further-classification>726 14</further-classification>
<further-classification>709228</further-classification>
<further-classification>370392</further-classification>
</classification-national>
<invention-title id="d2e71">Proxy connection method and adapter to IMS/MMD network</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6980556</doc-number>
<kind>B2</kind>
<name>Vimpari</name>
<date>20051200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>37039552</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6993595</doc-number>
<kind>B1</kind>
<name>Luptowski et al.</name>
<date>20060100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709245</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>7328281</doc-number>
<kind>B2</kind>
<name>Takeda et al.</name>
<date>20080200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709246</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>7411967</doc-number>
<kind>B2</kind>
<name>Thubert et al.</name>
<date>20080800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370401</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>7773983</doc-number>
<kind>B2</kind>
<name>Takeda</name>
<date>20100800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455420</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2003/0135586</doc-number>
<kind>A1</kind>
<name>Minborg et al.</name>
<date>20030700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709219</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2004/0057435</doc-number>
<kind>A1</kind>
<name>Ruyle et al.</name>
<date>20040300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>3703955</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2005/0222815</doc-number>
<kind>A1</kind>
<name>Tolly</name>
<date>20051000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>702185</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2006/0253873</doc-number>
<kind>A1</kind>
<name>Lim et al.</name>
<date>20061100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>725 62</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>2007/0060124</doc-number>
<kind>A1</kind>
<name>Kalavade</name>
<date>20070300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455433</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>2007/0180485</doc-number>
<kind>A1</kind>
<name>Dua</name>
<date>20070800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>725114</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>2007/0183363</doc-number>
<kind>A1</kind>
<name>Liden</name>
<date>20070800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370331</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>2008/0144602</doc-number>
<kind>A1</kind>
<name>Casey</name>
<date>20080600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370352</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>JP</country>
<doc-number>2004-7321</doc-number>
<kind>A</kind>
<date>20040100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>JP</country>
<doc-number>2004-193739</doc-number>
<kind>A</kind>
<date>20040700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>16</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>726  2-  4</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>726 12</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>726 14</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>726 15</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709227</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709228</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709245</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370389</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370392</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>3703955</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>4</number-of-drawing-sheets>
<number-of-figures>4</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20080216167</doc-number>
<kind>A1</kind>
<date>20080904</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Imai</last-name>
<first-name>Naoki</first-name>
<address>
<city>Saitama</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Isomura</last-name>
<first-name>Manabu</first-name>
<address>
<city>Saitama</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Horiuchi</last-name>
<first-name>Hiroki</first-name>
<address>
<city>Saitama</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Imai</last-name>
<first-name>Naoki</first-name>
<address>
<city>Saitama</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Isomura</last-name>
<first-name>Manabu</first-name>
<address>
<city>Saitama</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Horiuchi</last-name>
<first-name>Hiroki</first-name>
<address>
<city>Saitama</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Westerman, Hattori, Daniels &#x26; Adrian, LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>KDDI Corporation</orgname>
<role>03</role>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Davis</last-name>
<first-name>Zachary A</first-name>
<department>2492</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A client for IPv4 having a SIP function sends a first REGISTER message to an adapter. Then, the adapter executes an authentication sequence of EAP-AKA for an access gateway connected between an IMS/MMD network and an IPv4 network, then establishes a tunnel connection. Then, the adapter generates a second REGISTER message corresponding to IPv6 based on the first REGISTER message corresponding to IPv4. The adapter sends the second REGISTER message to a SIP server connected to the IMS/MMD network through the tunnel connection to the access gateway.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="257.05mm" wi="184.40mm" file="US08627445-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="248.92mm" wi="166.62mm" orientation="landscape" file="US08627445-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="269.07mm" wi="183.64mm" file="US08627445-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="193.29mm" wi="179.75mm" file="US08627445-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="257.64mm" wi="143.93mm" orientation="landscape" file="US08627445-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">PRIORITY CLAIM</heading>
<p id="p-0002" num="0001">The present application claims priority to Japanese Patent Application No. 2007-053550 filed on Mar. 3, 2007, which is incorporated herein by reference.</p>
<heading id="h-0002" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0003" num="0002">1. Field of the Invention</p>
<p id="p-0004" num="0003">The present invention relates to a method and an adapter connected to an IMS/MMD (IP Multimedia Subsystem/Multimedia Domain) network.</p>
<p id="p-0005" num="0004">2. Description of the Related Art</p>
<p id="p-0006" num="0005">3GPP2 (3rd Generation Partnership Project 2, the standard of a third-generation mobile phone system) or 3GPP standardizes an IMS/MMD platform to make a mobile communication network ALL-IP. The IMS/MMD platform (hereinafter called &#x201c;ALL-IP core network&#x201d;) uses IPv6 technology. This is an important base technology in the next generation network (NGN: Next Generation Network). According to J. Rosenberg et al., &#x201c;SIP: Session Initiation Protocol&#x201d;, IETF RFC3261, June, 2002, the ALL-IP core network uses SIP (Session Initiation Protocol) for communication control of multimedia data including voice data.</p>
<p id="p-0007" num="0006">According to SIP, position information of a client (e.g., a mobile terminal) is registered in a registrar server. The SIP proxy server connects these clients by using the registration information.</p>
<p id="p-0008" num="0007">Actually, the ALL-IP core network incorporates an authentication/encrypting protocol such as IMS-AKA (IP Multimedia Subsystem/Authentication and Key Agreement) into basic SIP. An IPv6 client having a SIP enhanced function of 3GPP or 3GPP2 can connect with the ALL-IP core network directly.</p>
<p id="p-0009" num="0008">However, many existing clients such as a portable telephone do not comprise a protocol stack of IPv6. Also, these clients cannot process an encrypting protocol which requires high computing power. Thus, even if these clients comprise a SIP function, they cannot execute a registration authentication sequence for the registrar server connected to the ALL-IP core network. Such a problem disturbs early conversion to IMS/MMD.</p>
<heading id="h-0003" level="1">BRIEF SUMMARY OF THE INVENTION</heading>
<p id="p-0010" num="0009">Thus, the object of the present invention is to provide a proxy connection method and an adapter which enables an IMS/MMD non-compliant client having a SIP function to communicate with an IMS/MMD compliant client through the IMS/MMD network.</p>
<p id="p-0011" num="0010">The present invention is based on a proxy connection method of an adapter for communicating with a SIP server connected to a first network of the IPv6, an access gateway connected between the first network and a second network of IPv4, and a client for IPv4 having a SIP function. The adapter is connected to the second network between the access gateway and the client.</p>
<p id="p-0012" num="0011">According to the present invention, the method has</p>
<p id="p-0013" num="0012">a first step in which the client sends a first registration request to the adapter,</p>
<p id="p-0014" num="0013">a second step in which the adapter establishes a tunnel connection to the access gateway,</p>
<p id="p-0015" num="0014">a third step in which the adapter generates a second registration request corresponding to IPv6 based on the first registration request corresponding to IPv4, and</p>
<p id="p-0016" num="0015">a fourth step in which the adapter sends the second registration request to the SIP server through the tunnel connection to the access gateway.</p>
<p id="p-0017" num="0016">It is preferred that the adapter stores in advance a SIP address authorized for a proxy connection, and</p>
<p id="p-0018" num="0017">wherein, for the second step, the adapter determines whether a registration address included in the first registration request matches with the SIP address previously stored. If they match, the adapter establishes the tunnel connection to the access gateway.</p>
<p id="p-0019" num="0018">It is preferred that, for the second step, the adapter discovers the address of the access gateway by searching for a DNS (Domain Name System) server connected to the second network.</p>
<p id="p-0020" num="0019">It is preferred that, for the second step, the adapter executes an authentication sequence of EAP-AKA (Extensible Authentication Protocol Method for 3rd Generation Authentication and Key Agreement), and then the adapter establishes the tunnel connection according to IPsec (Internet Protocol security protocol).</p>
<p id="p-0021" num="0020">It is preferred that, for the third step, the adapter generates the second registration request by using an IPv6 address obtained at the time of establishment of the tunnel connection in the second step.</p>
<p id="p-0022" num="0021">It is preferred that, for the fourth step, the adapter discovers the address of the SIP server by referring to a DHCP (Dynamic Host Configuration Protocol) server connected to the first network.</p>
<p id="p-0023" num="0022">It is preferred that, for the fourth step, the adapter discovers a DNS server connected to the first network by referring to a DHCP server connected to the first network, and then discovers the address of the SIP server by searching for the DNS server.</p>
<p id="p-0024" num="0023">It is preferred that the first network is based on IMS/MMD (IP Multimedia Subsystem/Multimedia Domain), and</p>
<p id="p-0025" num="0024">wherein, for the fourth step,</p>
<p id="p-0026" num="0025">the adapter sends a REGISTER of the second registration request to the SIP server through the tunnel connection to the access gateway,</p>
<p id="p-0027" num="0026">the SIP server sends a 401 Unauthorized to the adapter through the tunnel connection to the access gateway,</p>
<p id="p-0028" num="0027">the adapter sends a second REGISTER of the response to the SIP server through the tunnel connection to the access gateway,</p>
<p id="p-0029" num="0028">the SIP server transmits a first 200 OK through the tunnel connection to the access gateway, and</p>
<p id="p-0030" num="0029">the adapter sends a second 200 OK based on the first 200 OK to the client.</p>
<p id="p-0031" num="0030">According to the present invention, the adapter has</p>
<p id="p-0032" num="0031">client side SIP transmit/receive means for receiving the first registration request from the client;</p>
<p id="p-0033" num="0032">tunnel connection establishment means for establishing a tunnel connection to the access gateway, when the first registration request is received;</p>
<p id="p-0034" num="0033">the second registration request generating means for generating a second registration request corresponding to IPv6 based on the first registration request corresponding to IPv4; and</p>
<p id="p-0035" num="0034">server side SIP transmit/receive means for sending the second registration request to the SIP server through the tunnel connection to the access gateway.</p>
<p id="p-0036" num="0035">It is preferred that the adapter further has authorization address memory means for storing in advance a SIP address authorized for proxy connection, and</p>
<p id="p-0037" num="0036">determination means for determining whether a registration address included in the first registration request matches with an address authorized for proxy connection, wherein, if they match, the tunnel connection establishment means establishes the tunnel connection to the access gateway.</p>
<p id="p-0038" num="0037">It is preferred that the tunnel establishment means discovers the address of the access gateway by searching for a DNS server connected to the second network.</p>
<p id="p-0039" num="0038">It is preferred that the adapter further has authentication means for executing an authentication sequence of EAP-AKA to the access gateway, if the registration address and the address authorized for proxy connection match, and</p>
<p id="p-0040" num="0039">the tunnel connection establishment means establishes the tunnel connection according to IPsec to the access gateway after the execution of the authentication sequence.</p>
<p id="p-0041" num="0040">It is preferred that the second registration request generating means generates the second registration request by using an IPv6 address obtained at the time of the establishment of the tunnel connection.</p>
<p id="p-0042" num="0041">It is preferred that the adapter further has SIP-server discovery means for discovering the address of the SIP server by referring to a DHCP server connected to the first network.</p>
<p id="p-0043" num="0042">It is preferred that the adapter further has SIP-server discovery means for discovering a DNS server connected to the first network by referring to a DHCP server connected to the first network, and discovering the address of the SIP server by retrieving a DNS server.</p>
<p id="p-0044" num="0043">It is preferred that the first network is based on IMS/MMD, and</p>
<p id="p-0045" num="0044">wherein the server side SIP transmit/receive means sends a REGISTER of the second registration request to a SIP server through a tunnel connection to the access gateway, receives a 401 Unauthorized from the SIP server, sends a second REGISTER including a response to the SIP server, and receives a first 200 OK from the SIP server, and</p>
<p id="p-0046" num="0045">the client side SIP transmit/receive means sends a second 200 OK based on the first 200 OK to the client.</p>
<p id="p-0047" num="0046">According to the present invention, a method is provided for making a computer to function as an adapter, and the method comprising the steps of:</p>
<p id="p-0048" num="0047">receiving the first registration request from the client,</p>
<p id="p-0049" num="0048">establishing a tunnel connection to the access gateway,</p>
<p id="p-0050" num="0049">generating a second registration request corresponding to IPv6 based on the first registration request corresponding to IPv4, and</p>
<p id="p-0051" num="0050">sending the second registration request to the SIP server through the tunnel connection to the access gateway.</p>
<p id="p-0052" num="0051">According to the proxy connection method and the adapter of the present invention, an IMS/MMD non-compliant client having a SIP function can communicate with an IMS/MMD compliant client through the IMS/MMD network.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE SEVERAL VIEWS OF THE DRAWINGS</heading>
<p id="p-0053" num="0052"><figref idref="DRAWINGS">FIG. 1</figref> is a system configuration diagram of the present invention.</p>
<p id="p-0054" num="0053"><figref idref="DRAWINGS">FIG. 2</figref> is a sequence diagram of the present invention.</p>
<p id="p-0055" num="0054"><figref idref="DRAWINGS">FIG. 3</figref> is an illustration of a transcription containing messages of a REGISTER and a 200 OK generated and received by the IMS/MMD adapter.</p>
<p id="p-0056" num="0055"><figref idref="DRAWINGS">FIG. 4</figref> is a functional configuration diagram of the IMS/MMD adapter of the present invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DETAILED DESCRIPTION OF THE INVENTION</heading>
<p id="p-0057" num="0056"><figref idref="DRAWINGS">FIG. 1</figref> is a system configuration diagram of the present invention.</p>
<p id="p-0058" num="0057">According to <figref idref="DRAWINGS">FIG. 1</figref>, ALL-IP core network <b>91</b> of IMS/MMD is connected to access network <b>92</b> of IPv6 and access network <b>93</b> of IPv4. IMS/MMD compliant client <b>5</b> is connected to access network <b>92</b> directly. IMS/MMD compliant client <b>5</b> connects with ALL-IP core network <b>91</b> through access network <b>92</b>.</p>
<p id="p-0059" num="0058">P-CSCF (Proxy-Call Session Control Function) <b>3</b> and S-CSCF (Serving-Call Session Control Function) <b>4</b> provided in IMS/MMD, are connected to ALL-IP core network <b>91</b>.</p>
<p id="p-0060" num="0059">P-CSCF <b>3</b> is a SIP server for sending/receiving messages to/from user clients directly. When P-CSCF <b>3</b> receives a registration request (REGISTER) from a user client, it executes an authentication sequence and establishes an IPsec tunnel connection. All SIP messages from user clients are safely transferred through the IPsec tunnel connection.</p>
<p id="p-0061" num="0060">S-CSCF <b>4</b> is, for example, a registrar server, and it is a SIP server for storing subscriber information and position information of a user client. This has a session control function between user clients and a routing function to the other client.</p>
<p id="p-0062" num="0061">Further, access gateway <b>2</b> is connected to ALL-IP core network <b>91</b>, to connect with access network <b>93</b> of IPv4. Access gateway <b>2</b> has a protocol conversion function between IPv4 and IPv6. Access gateway <b>2</b> is called PDG (Packet Data Gateway) according to IMS, or, is called PDIF (Packet Data Inter-working Function) according to MMD.</p>
<p id="p-0063" num="0062">Access network <b>93</b> is interconnected to home network <b>94</b> through IMS/MMD adapter <b>1</b>. IMS/MMD non-compliant client <b>6</b> having a SIP function is connected to home network <b>94</b>. IMS/MMD adapter <b>1</b> executes a proxy connection process to ALL-IP network <b>91</b> instead of IMS/MMD non-compliant client <b>6</b>.</p>
<p id="p-0064" num="0063">IMS/MMD non-compliant client <b>6</b> having a SIP function connects to access gateway <b>2</b> through IMS/MMD adapter <b>1</b>, and communicates with P-CSCF <b>3</b> and IMS/MMD compliant client <b>5</b> connected to IMS/MMD core network <b>91</b>. IMS/MMD non-compliant client <b>6</b> has a SIP function such as in a portable telephone, an IP telephone, an IP television telephone, etc., for example. However, this does not have a connect function to access gateway <b>2</b> and an authentication function of IMS/MMD.</p>
<p id="p-0065" num="0064"><figref idref="DRAWINGS">FIG. 2</figref> is a sequence diagram of the present invention.</p>
<p id="p-0066" num="0065">First of all, a registration sequence will be explained.</p>
<p id="p-0067" num="0066">(S<b>200</b>) IMS/MMD adapter <b>1</b> stores in advance a SIP address (SIP-URI (Uniform Resource Identifier)) to authorize proxy connection. Thus, a SIP-URI for which proxy connection is not authorized, is ignored. According to <figref idref="DRAWINGS">FIG. 2</figref>, IMS/MMD adapter <b>1</b> stores in advance SIP-URI [rickey@example.com] of IMS/MMD non-compliant client <b>6</b>. Further, IMS/MMD adapter <b>1</b> stores in advance the authentication information to access gateway <b>2</b>.</p>
<p id="p-0068" num="0067">(S<b>201</b>) IMS/MMD non-compliant client <b>6</b> transmits a REGISTER (registration request) to IMS/MMD adapter <b>1</b> set as a SIP proxy.</p>
<p id="p-0069" num="0068">(S<b>202</b>) IMS/MMD adapter <b>1</b> determines whether a SIP-URI described in &#x201c;From&#x201d; or &#x201c;To&#x201d; of the REGISTER is the SIP-URI authorized for proxy connection previously registered.</p>
<p id="p-0070" num="0069">(S<b>203</b>) When the SIP-URI of the REGISTER is authorized for proxy connection, IMS/MMD adapter <b>1</b> confirms a connection state with access gateway <b>2</b> corresponding to the SIP-URI. When IMS/MMD adapter <b>1</b> does not recognize the presence of the access gateway <b>2</b>, a DNS (Domain Name System) server connected to access network <b>93</b> is searched for. Thereby, an address of access gateway <b>2</b> is discovered.</p>
<p id="p-0071" num="0070">(S<b>204</b>) When the connection state is unconnected, IMS/MMD adapter <b>1</b> executes an EAP-AKA authentication sequence to access gateway <b>2</b>. Then, IMS/MMD adapter <b>1</b> establishes a tunnel connection according to IPsec to access gateway <b>2</b>. Then, IMS/MMD adapter <b>1</b> obtains IPv6 address [2001:abcd::10] of the access gateway <b>2</b> when the tunnel connection is established.</p>
<p id="p-0072" num="0071">(S<b>205</b>) IMS/MMD adapter <b>1</b> discovers P-CSCF<b>3</b> by using for example DHCPv6. The DNS server is searched for, if necessary, and finally, the IP address of P-CSCF<b>3</b> is obtained.</p>
<p id="p-0073" num="0072">(S<b>206</b>) IMS/MMD adapter <b>1</b> generates a REGISTER (registration request) to send to P-CSCF<b>3</b> by using the SIP-URI received from IMS/MMD non-compliant client <b>6</b>. The REGISTER is received by P-CSCF<b>3</b> through the tunnel connection to access gateway <b>2</b>. Further, the REGISTER transferred in S<b>201</b> and the REGISTER transferred in S<b>206</b> are different DIALOGs.</p>
<p id="p-0074" num="0073">(S<b>207</b>) P-CSCF<b>3</b> sends a 401 Unauthorized to IMS/MMD adapter <b>1</b>.</p>
<p id="p-0075" num="0074">(S<b>208</b>) Correspondingly IMS/MMD adapter <b>1</b> transmits a reply to the Challenge request step-by-step according to IMS/MMD.</p>
<p id="p-0076" num="0075">(S<b>209</b>) Correspondingly P-CSCF<b>3</b> sends a 200 OK to IMS/MMD adapter <b>1</b>.</p>
<p id="p-0077" num="0076">(S<b>210</b>) IMS/MMD adapter <b>1</b> transcribes some of the information of the 200 OK received from P-CSCF<b>3</b>, to a 200 OK to be sent to IMS/MMD non-compliant client <b>6</b>. The 200 OK is sent to IMS/MMD non-compliant client <b>6</b>. Next, a registration-cancellation sequence will be explained.</p>
<p id="p-0078" num="0077">(S<b>221</b>) IMS/MMD non-compliant client <b>6</b> sends a De-REGISTER (registration-cancellation) to IMS/MMD adapter <b>1</b>.</p>
<p id="p-0079" num="0078">(S<b>222</b>) IMS/MMD adapter <b>1</b> sends a De-REGISTER to P-CSCF<b>3</b> through the tunnel connection to access gateway <b>2</b> as a proxy of IMS/MMD non-compliant client <b>6</b>. Further, the De-REGISTER transferred in S<b>221</b> and the De-REGISTER transferred in S<b>222</b> become different DIALOGs.</p>
<p id="p-0080" num="0079">(S<b>223</b>) Correspondingly P-CSCF<b>3</b> sends a 200 OK to IMS/MMD adapter <b>1</b>.</p>
<p id="p-0081" num="0080">(S<b>224</b>) IMS/MMD adapter <b>1</b> transcribes some of the information of the 200 OK received from P-CSCF<b>3</b>, to a 200 OK to be sent to IMS/MMD non-compliant client <b>6</b>. The 200 OK is sent to IMS/MMD non-compliant client <b>6</b>.</p>
<p id="p-0082" num="0081">(S<b>225</b>) Finally, IMS/MMD adapter <b>1</b> executes a release of the IPsec tunnel connection to access gateway <b>2</b> corresponding to the SIP-URI.</p>
<p id="p-0083" num="0082"><figref idref="DRAWINGS">FIG. 3</figref> is an illustration of the transcription containing messages of a REGISTER and a 200 OK generated and received by the IMS/MMD adapter.</p>
<p id="p-0084" num="0083">According to <figref idref="DRAWINGS">FIG. 3</figref>, the description of [To:] and [Contact:] of the REGISTER received in S<b>201</b> is transcribed to [To:] and [Contact:] of the REGISTER transmitted in S<b>206</b>. Also, the description of [To:] and [Contact:] of the 200 OK received in S<b>209</b> is transcribed to [To:] and [Contact:] of a 200 OK transmitted in S<b>210</b>. Further, here, IMS/MMD adapter <b>1</b> changes IPv4 address [192.0.2.201] to IPv6 address [2001:abcd::10].</p>
<p id="p-0085" num="0084">Further, according to <figref idref="DRAWINGS">FIG. 3</figref>, the SIP-URI to the IMS/MMD non-compliant client and the SIP-URI to the SIP server are the same. However, they do not always have to be the same, and it is sufficient if both are correlated to each other by the IMS/MMD adapter.</p>
<p id="p-0086" num="0085"><figref idref="DRAWINGS">FIG. 4</figref> is functional configuration diagram of the IMS/MMD adapter of the present invention.</p>
<p id="p-0087" num="0086">According to <figref idref="DRAWINGS">FIG. 4</figref>, IMS/MMD adapter <b>1</b> has client side SIP transmitter-receiver <b>101</b>, authorization address memory <b>102</b>, determination unit <b>103</b>, access gateway connection state manager <b>104</b>, tunnel connection establishment unit <b>105</b>, authentication unit <b>106</b>, SIP server discovery unit <b>107</b>, second registration request generator <b>108</b>, server side SIP transmitter-receiver <b>109</b> and registration response generator <b>110</b>. These function units can be realized by executing a program on a computer mounted on the IMS/MMD adapter.</p>
<p id="p-0088" num="0087">Client side SIP transmitter-receiver <b>101</b> sends and receives SIP messages and data to and from IMS/MMD non-compliant client <b>6</b> through home network <b>94</b>. When client side SIP transmitter-receiver <b>101</b> receives a REGISTER (registration request) from IMS/MMD non-compliant client <b>6</b>, it forwards the REGISTER to determination unit <b>103</b>. Also, a 200 OK (i.e., a registration response) received from registration response generator <b>110</b> is sent to IMS/MMD non-compliant client <b>6</b>.</p>
<p id="p-0089" num="0088">Authorized address memory <b>102</b> has previously stored a SIP-URI authorized for proxy connection.</p>
<p id="p-0090" num="0089">Determination unit <b>103</b> determines whether the SIP-URI (included in &#x201c;From&#x201d; or &#x201c;To&#x201d;) included in the REGISTER received by client side SIP transmitter-receiver <b>101</b> matches with the SIP-URI authorizing proxy connection stored in authorization address memory <b>102</b>. The matched result is forwarded to access gateway connection state manager <b>104</b>.</p>
<p id="p-0091" num="0090">Also, the matched REGISTER is forwarded to second registration request generator <b>108</b>.</p>
<p id="p-0092" num="0091">Access gateway connection state manager <b>104</b> manages a connection state with access gateway <b>2</b> for every SIP-URL. When access gateway connection state manager <b>104</b> receives a matched result from determination unit <b>103</b>, this determines whether a tunnel connection is established for access gateway <b>2</b>. When the tunnel connection is not established, access gateway connection state manager <b>104</b> instructs tunnel connection establishment unit <b>105</b> to establish a tunnel connection.</p>
<p id="p-0093" num="0092">Also, when an authentication sequence is needed to access gateway <b>2</b>, access gateway connection state manager <b>104</b> instructs authentication unit <b>106</b> to execute an authentication sequence. Further, when an IP address of P-CSCF<b>3</b> connected to ALL-IP core network <b>91</b> is unclear, access gateway connection state manager <b>104</b> instructs SIP server discovery unit <b>107</b> to discover the IP address of P-CSCF<b>3</b>.</p>
<p id="p-0094" num="0093">Tunnel connection establishment unit <b>105</b> establishes a tunnel connection according to IPsec for access gateway <b>2</b> based on a designation from access gateway connection state manager <b>104</b>. Also, when an authentication sequence is executed by authentication unit <b>106</b>, tunnel connection establishment unit <b>105</b> establishes a tunnel connection to an access gateway after the execution of the authentication sequence. Here, when IMS/MMD adapter <b>1</b> does not recognize the presence of access gateway <b>2</b>, tunnel connection establishment unit <b>105</b> searches for a DNS server connected to access network <b>93</b>. Thereby, the address of access gateway <b>2</b> is discovered.</p>
<p id="p-0095" num="0094">Authentication unit <b>106</b> executes an authentication sequence of EAP-AKA for an access gateway based on a designation from access gateway connection state manager <b>104</b>.</p>
<p id="p-0096" num="0095">SIP server discovery unit <b>107</b> discovers the IP address of P-CSCF<b>3</b> by referring to a DHCP server connected to ALL-IP core network <b>3</b>.</p>
<p id="p-0097" num="0096">Second registration request generator <b>108</b> generates a REGISTER corresponding to IPv6 based on the REGISTER corresponding to IPv4. The specific example was mentioned above with reference to <figref idref="DRAWINGS">FIG. 3</figref>.</p>
<p id="p-0098" num="0097">Server side SIP transmitter-receiver <b>109</b> sends and receives SIP messages and data for a server connected to ALL-IP core network <b>91</b> and an IMS/MMD compliant client through access gateway <b>2</b>. According to the present invention, server side SIP transmitter-receiver <b>109</b> sends a REGISTER of the second registration request to a SIP server through the tunnel connection to the access gateway, and it receives a 401 Unauthorized from the SIP server. Then, server side SIP transmitter-receiver <b>109</b> sends a second REGISTER to a SIP server again, and it receives a first 200 OK from the SIP server.</p>
<p id="p-0099" num="0098">Registration response generator <b>110</b> generates a 200 OK to be sent to IMS/MMD non-compliant client <b>6</b> based on the 200 OK received from server side SIP transmitter-receiver <b>109</b>. The generated 200 OK is forwarded to client side SIP transmitter-receiver <b>101</b>.</p>
<p id="p-0100" num="0099">According to the proxy connection method and the adapter of the present invention, an IMS/MMD non-compliant client having a SIP function can communicate with an IMS/MMD compliant client through an IMS/MMD network.</p>
<p id="p-0101" num="0100">Many widely different embodiments of the present invention may be constructed without departing from the spirit and scope of the present invention. It should be understood that the present invention is not limited to the specific embodiments described in the specification, except as defined in the appended claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A proxy connection method of operating an adapter for connecting an IPv4-compliant client having a SIP (Session Initiation Protocol) function, to a SIP server which is connected with a first IPv6 network, via a second IPv4 network and an access gateway, the IPv4-compliant client being connected with the second IPv4 network,
<claim-text>wherein the adapter is connected with the second IPv4 network,</claim-text>
<claim-text>the method comprising:</claim-text>
<claim-text>receiving a first REGISTER message from the client via the second IPv4 network, the first REGISTER message being for requesting the SIP server to register position information of the client, and the first REGISTER message having an IPv4 address of the client;</claim-text>
<claim-text>upon reception of the first REGISTER message, establishing a tunnel connection between the adapter and the access gateway on the second IPv4 network, to thereby allow use of an IPv6 address for communication between the adapter and the access gateway, via the second IPv4 network;</claim-text>
<claim-text>upon establishment of the tunnel connection, retrieving an IPv6 address of the access gateway via the established tunnel connection, and generating a second REGISTER message from the first REGISTER message, the second REGISTER message having the retrieved IPv6 address of the access gateway;</claim-text>
<claim-text>sending the second REGISTER message to the SIP server through the tunnel connection, the access gateway and the first IPv6 network sequentially, to thereby allow the SIP server to register the position information of the client as the same address as the IPv6 address of the access gateway; and</claim-text>
<claim-text>disconnecting the tunnel connection upon completion of the registration of the position information of the client at the SIP server,</claim-text>
<claim-text>wherein use of the tunnel connection allows address translation for the client between the first IPv6 network and the second IPv4 network, to thereby allow the IPv4-compliant client to be connected to an IPv6-compliant client which is connected with the first IPv6 network.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The proxy connection method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the adapter has stored therein a SIP address for which proxy connection has been authorized, and
<claim-text>the establishing includes making a determination as to whether or not a to-be-registered address included in the first REGISTER message matches the SIP address stored in the adapter, and establishing the tunnel connection, if the to-be-registered address matches the SIP address.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The proxy connection method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the establishing includes discovering an address of the access gateway using a DNS (Domain Name System) server connected to the second IPv4 network.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The proxy connection method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the establishing includes executing an authentication sequence of EAP-AKA (Extensible Authentication Protocol Method for 3rd Generation Authentication and Key Agreement), and thereafter, establishing the tunnel connection according to IPSec (Internet Protocol security protocol).</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The proxy connection method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the generating includes obtaining the IPv6 address of the access gateway when the tunnel connection is established, and generating the second REGISTER message using the obtained IPv6 address of the access gateway.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The proxy connection method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the sending includes discovering an address of the SIP server using a DHCP (Dynamic Host Configuration Protocol) server connected to the first IPv6 network.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The proxy connection method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the sending includes discovering a DNS (Domain Name System) server connected to the first IPv6 network using a DHCP (Dynamic Host Configuration Protocol) server connected to the first IPv6 network, and discovering an address of the SIP server using the DNS server.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The proxy connection method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the second IPv4 network includes an IPv4 access network connected with the first IPv6 network via the access gateway, and an IPv4 home network with which the IPV4-compliant client is connected, with the IPv4 access network and the IPv4 home network interconnected via the adapter.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. An adapter for connecting an IPv4-compliant client having a SIP (Session Initiation Protocol) function, to a SIP server which is connected with a first IPv6 network, via a second IPv4 network and an access gateway, the IPv4-compliant client being connected with the second IPv4 network,
<claim-text>wherein the adapter is connected with the second IPv4 network,</claim-text>
<claim-text>the adapter comprising:</claim-text>
<claim-text>a client-side SIP transceiver that receives a first REGISTER message from the client via the second IPv4 network, the first REGISTER message being for requesting the SIP server to register position information of the client, and the first REGISTER message having an IPv4 address of the client;</claim-text>
<claim-text>a tunnel-connection establishment unit configured to establish a tunnel connection between the adapter and the access gateway on the second IPv4 network, to thereby allow use of an IPv6 address for communication between the adapter and the access gateway, via the second IPv4 network, upon reception of the first REGISTER message;</claim-text>
<claim-text>a second-REGISTER-message generator configured to retrieve an IPv6 address of the access gateway via the established tunnel connection, and generate a second REGISTER message from the first REGISTER message, the second REGISTER message having the retrieved IPv6 address of the access gateway, upon establishment of the tunnel connection;</claim-text>
<claim-text>a server-side SIP transceiver that sends the second REGISTER message to the SIP server through the tunnel connection, the access gateway and the first IPv6 network sequentially, to thereby allow the SIP server to register the position information of the client as the same address as the IPv6 address of the access gateway; and,</claim-text>
<claim-text>a tunnel-connection disconnection unit configured to disconnect the tunnel connection upon completion of the registration of the position information of the client at the SIP server,</claim-text>
<claim-text>wherein use of the tunnel connection allows address translation for the client between the first IPv6 network and the second IPv4 network, to thereby allow the IPv4-compliant client to be connected to an IPv6-compliant client which is connected with the first IPv6 network.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The adapter according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, further comprising an authorization address memory in which a SIP address for which proxy connection has been authorized is stored, wherein the tunnel-connection establishment unit is configured to make a determination as to whether or not a to-be-registered address included in the first REGISTER message matches the SIP address stored in the authorization address memory, and to establish the tunnel connection, if the to-be-registered address matches the SIP address.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The adapter according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the tunnel-connection establishment unit is configured to discover an address of the access gateway using a DNS (Domain Name System) server connected to the second IPv4 network.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The adapter according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the tunnel-connection establishment unit is configured to execute an authentication sequence of EAP-AKA (Extensible Authentication Protocol Method for 3rd Generation Authentication and Key Agreement), and thereafter, to establish the tunnel connection according to IPSec (Internet Protocol Security protocol).</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The adapter according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the second-REGISTER-message generator is configured to obtain the IPv6 address of the access gateway when the tunnel connection is established, and to generate the second REGISTER message using the obtained IPv6 address of the access gateway.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The adapter according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, further comprising a first SIP-server discover unit configured to discover an address of the SIP server using a DHCP (Dynamic Host Configuration Protocol) server connected to the first IPv6 network.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The adapter according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, further comprising a second SIP-server discover unit configured to discover a DNS (Domain Name System) server connected to the first IPv6 network using a DHCP (Dynamic Host Configuration Protocol) server connected to the first IPv6 network, and to discover an address of the SIP server using the DNS server.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The adapter according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the second IPv4 network includes an IPv4 access network connected with the first IPv6 network via the access gateway, and an IPv4 home network with which the IPV4-compliant client is connected, with the IPv4 access network and the IPv4 home network interconnected via the adapter. </claim-text>
</claim>
</claims>
</us-patent-grant>
