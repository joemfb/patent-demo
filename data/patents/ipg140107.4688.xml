<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625776-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625776</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12565374</doc-number>
<date>20090923</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<us-term-of-grant>
<us-term-extension>1045</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>M</subclass>
<main-group>9</main-group>
<subgroup>08</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>37940614</main-classification>
</classification-national>
<invention-title id="d2e53">Detection and suppression of returned audio at near-end</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>4995030</doc-number>
<kind>A</kind>
<name>Helf</name>
<date>19910200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6865270</doc-number>
<kind>B1</kind>
<name>Troxel</name>
<date>20050300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>6925175</doc-number>
<kind>B2</kind>
<name>Tegethoff</name>
<date>20050800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>37940601</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2006/0007872</doc-number>
<kind>A1</kind>
<name>Liu</name>
<date>20060100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370286</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2006/0140392</doc-number>
<kind>A1</kind>
<name>Ahmadi</name>
<date>20060600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2006/0161428</doc-number>
<kind>A1</kind>
<name>Fouret</name>
<date>20060700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2008/0218586</doc-number>
<kind>A1</kind>
<name>Graham et al.</name>
<date>20080900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>348 1409</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2009/0185674</doc-number>
<kind>A1</kind>
<name>Sorensen et al.</name>
<date>20090700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>37940601</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2009/0202063</doc-number>
<kind>A1</kind>
<name>Frauenthal et al.</name>
<date>20090800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>CA</country>
<doc-number>2513224</doc-number>
<date>20040300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>CA</country>
<doc-number>2611302</doc-number>
<date>20061200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>CN</country>
<doc-number>1223036</doc-number>
<kind>A</kind>
<date>19990700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>GB</country>
<doc-number>2439989</doc-number>
<date>20080100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>GB</country>
<doc-number>2439990</doc-number>
<date>20080100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>GB</country>
<doc-number>2439991</doc-number>
<date>20080100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00016">
<document-id>
<country>WO</country>
<doc-number>8907370</doc-number>
<date>19890800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00017">
<document-id>
<country>WO</country>
<doc-number>9642142</doc-number>
<date>19961200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00018">
<document-id>
<country>WO</country>
<doc-number>97/49196</doc-number>
<kind>A2</kind>
<date>19971200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00019">
<document-id>
<country>WO</country>
<doc-number>9749196</doc-number>
<date>19971200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00020">
<document-id>
<country>WO</country>
<doc-number>03049285</doc-number>
<date>20030600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00021">
<document-id>
<country>WO</country>
<doc-number>2006111370</doc-number>
<date>20061000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00022">
<document-id>
<country>WO</country>
<doc-number>2006111370</doc-number>
<kind>A1</kind>
<date>20061000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00023">
<othercit>&#x201c;CIGear Unified Communications, VoIP and Network Solutions&#x201d; www.cigear.com/iptube-dlt1-dual-t1-dual-101000baset-echo-cancellation-p-1553.html.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00024">
<othercit>&#x201c;Polycom MGC/MGC+ Unified Conferencing Bridges Solution Overview&#x201d; Polycom Solution Overview Booklet.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00025">
<othercit>&#x201c;Adaptive Filtering Algorithms for Acoustic Echo and Noise Cancellation&#x201d; by Geert Rombouts Apr. 25, 2003.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00026">
<othercit>&#x201c;Bi-Directional (Near-End and Far-End) Adaptive Line Echo Cancellation&#x201d; www.tecteon.com/web/index.php?id=73.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00027">
<othercit>&#x201c;Network Adaptive Line Echo Canceller (LEC)&#x201d; www.tecteon.com/web/index.php?id=75.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00028">
<othercit>&#x201c;Automated Bi-Directional (Near and Far End) Echo Cancellation White Paper&#x201d; Tecteon booklet.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00029">
<othercit>&#x201c;Tecteon Superior Quality Sound; Bi-Directional Echo Conceller&#x201d; Tecteon Information Flyer.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00030">
<othercit>&#x201c;200 OK; Commentary on VoIP Network Design, Engineering, and Operations.&#x201d; May 26, 2008 by Mark Lindsey www.200ok.info/2008/05/why-wont-anybody-build-far-end-echo.html.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00031">
<othercit>EP Search Report dated Dec. 10, 2010, in application No. 10009945.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00032">
<othercit>First Office Action in counterpart Chinese Appl. 201010287069.9, dated Jan. 17, 2013.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>32</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>37940614</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>5</number-of-drawing-sheets>
<number-of-figures>6</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20110069830</doc-number>
<kind>A1</kind>
<date>20110324</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Chu</last-name>
<first-name>Peter L.</first-name>
<address>
<city>Lexington</city>
<state>MA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Dunlap</last-name>
<first-name>Wayne</first-name>
<address>
<city>Austin</city>
<state>TX</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Chu</last-name>
<first-name>Peter L.</first-name>
<address>
<city>Lexington</city>
<state>MA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Dunlap</last-name>
<first-name>Wayne</first-name>
<address>
<city>Austin</city>
<state>TX</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Wong, Cabello, Lutsch, Rutherford &#x26; Brucculeri, LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Polycom, Inc.</orgname>
<role>02</role>
<address>
<city>San Jose</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Jamal</last-name>
<first-name>Alexander</first-name>
<department>2656</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">Audio from a near-end that has been acoustically coupled at the far-end and returned to the near-end unit is detected and suppressed at the near-end of a conference. First and second energy outputs for separate bands are determined for the near-end audio being sent from the near-end unit and for the far-end audio being received at the near-end unit. The near-end unit compares the first and second energy outputs to one another for each of the bands over a time delay range and detects the return of the sent near-end audio in the received far-end audio based on the comparison. The comparison can use a cross-correlation to find an estimated time delay used for further analysis of the near and far-end energies. The near-end unit suppresses any detected return by muting or reducing what far-end audio is output at its loudspeaker.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="207.35mm" wi="173.14mm" file="US08625776-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="225.38mm" wi="192.79mm" file="US08625776-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="234.27mm" wi="184.15mm" file="US08625776-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="241.47mm" wi="177.29mm" file="US08625776-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="257.98mm" wi="193.38mm" file="US08625776-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="179.92mm" wi="195.75mm" file="US08625776-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND</heading>
<p id="p-0002" num="0001">During a conference, at least two communication systems (i.e., a near-end unit and a far-end unit) participate in a call. Typically, the units will have near-end echo cancellation. For example, a near-end unit <b>10</b> schematically shown in <figref idref="DRAWINGS">FIG. 1</figref> has an audio decoder <b>12</b>, an audio coder <b>14</b>, a loudspeaker <b>20</b>, and a microphone <b>40</b> and communicatively couples to a far end unit <b>16</b> using techniques known in the art. During a conference, the audio decoder <b>12</b> receives far-end audio, decodes it, and sends the decoded audio to the loudspeaker <b>20</b> so the near-end participant can listen. In turn, the microphone <b>40</b> picks up near-end audio from the participant, and the audio coder <b>14</b> encodes the near-end audio and sends it to the far-end unit <b>16</b>. Due to the proximity of the loudspeaker <b>20</b> and microphone <b>40</b>, acoustic coupling (indicated by arrow <b>11</b>) may occur in which far-end audio output by the loudspeaker <b>20</b> is picked up by the microphone <b>40</b> and fed back to the far-end unit <b>16</b>.</p>
<p id="p-0003" num="0002">To reduce the effects of this acoustic coupling (<b>11</b>), the near-end unit <b>10</b> has a near-end echo canceller <b>30</b> that operates between the decoder/coder <b>12</b>/<b>14</b> and the loudspeaker/microphone <b>20</b>/<b>40</b>. The near-end echo canceller <b>30</b> subtracts the audio emitted from the loudspeaker <b>20</b> that has been picked up by the microphone <b>40</b>. The audio coder <b>14</b> then transmits the resulting signal to the far-end unit <b>16</b>. In this way, the near-end echo cancellation reduces the acoustic coupling in the loudspeaker-to-microphone acoustic path at the near-end and helps to prevent the far-end participant from hearing his own voice come back to him as returned echo.</p>
<p id="p-0004" num="0003">Although near-end echo cancellation may be used at the near-end unit, the far-end unit <b>16</b> in some instances may not have a working acoustic echo canceller. In this case, the near-end participant will hear his voice come back to him due to the acoustic coupling (indicated by arrow <b>17</b>) between the loudspeaker and microphone at the far-end. Therefore, near-end echo cancellation may benefit the person at the far-end, but it does nothing to prevent the near-end from hearing near-end audio returned from the far-end as echo.</p>
<p id="p-0005" num="0004">The subject matter of the present disclosure is directed to overcoming, or at least reducing the effects of, one or more of the problems set forth above.</p>
<heading id="h-0002" level="1">SUMMARY</heading>
<p id="p-0006" num="0005">Audio from a near-end that has been acoustically coupled at the far-end and returned to the near-end unit is detected and suppressed at the near-end of a conference. First energy outputs for separate bands are determined for the near-end audio being sent from the near-end unit, and second energy outputs for the separate bands are determined for the far-end audio being received at the near-end unit. The near-end unit compares the first and second energy outputs for each of the bands to one another over a time delay range and detects the return of the sent near-end audio in the received far-end audio based on the comparison. The comparison can use a cross-correlation to find an estimated time delay used for further analysis of the near and far-end energies. The near-end unit suppresses any detected return by muting or reducing what far-end audio is output at its loudspeaker.</p>
<p id="p-0007" num="0006">The foregoing summary is not intended to summarize each potential embodiment or every aspect of the present disclosure.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0008" num="0007"><figref idref="DRAWINGS">FIG. 1</figref> illustrates a near-end echo canceller according to the prior art.</p>
<p id="p-0009" num="0008"><figref idref="DRAWINGS">FIG. 2</figref> illustrates an arrangement for far-end echo detection and suppression according to the present disclosure.</p>
<p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. 3</figref> illustrates a signal processing operation for far-end echo detection and suppression according to the present disclosure.</p>
<p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. 4</figref> diagrammatically illustrates the far-end echo detection and suppression of an example signal.</p>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 5</figref> illustrates additional stages of the signal processing operation of <figref idref="DRAWINGS">FIG. 3</figref>.</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 6</figref> illustrates a multipoint bridge unit having a far-end echo detection and suppression module according to the present disclosure.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0014" num="0013">A. Near-End Unit Having Echo Detection and Suppression</p>
<p id="p-0015" num="0014">A near-end unit <b>10</b> schematically shown in <figref idref="DRAWINGS">FIG. 2</figref> can be used for teleconferencing or videoconferencing. As noted previously, the near-end unit <b>10</b> has an audio decoder <b>12</b>, an audio coder <b>14</b>, a loudspeaker <b>20</b>, and a microphone <b>40</b> and communicatively couples to a far-end unit <b>16</b> using techniques known in the art. During a conference, the audio decoder <b>12</b> receives far-end audio, decodes it, and sends the decoded audio to the loudspeaker <b>20</b> so the near-end participant can listen. In turn, the microphone <b>40</b> picks up near-end audio from the participant, and the audio coder <b>14</b> encodes the near-end audio and sends it to the far-end unit <b>16</b>.</p>
<p id="p-0016" num="0015">To reduce the effects of the acoustic coupling (indicated by arrow <b>11</b>) at the near-end, the near-end unit <b>10</b> has a near-end echo canceller <b>30</b> that subtracts the audio emitted from the loudspeaker <b>20</b> that has been picked up by the near-end microphone <b>40</b> through acoustic coupling. As noted previously, the near-end echo cancellation <b>30</b> reduces the acoustic coupling in the loudspeaker-to-microphone acoustic path at the near-end and helps to prevent the far-end participant from hearing his voice come back to him as echo.</p>
<p id="p-0017" num="0016">In addition to these components, however, the near-end unit <b>10</b> has a module <b>50</b> for detecting and suppressing near-end audio returned from the far-end through acoustic coupling (indicated by arrow <b>17</b>). When the far-end unit <b>16</b> fails to provide sufficient echo cancellation, the module <b>50</b> detects the presence of near-end audio returned in the far-end audio and prevents or suppresses that returned audio from being relayed through the loudspeaker <b>20</b> at the near-end.</p>
<p id="p-0018" num="0017">As shown, the module <b>50</b> receives the decoded audio from the audio decoder <b>12</b> before the audio proceeds to the loudspeaker <b>20</b> and echo canceller <b>30</b>. In this arrangement, the module <b>50</b> detects returned near-end audio in the far-end audio decoded by the audio decoder <b>12</b>. As noted herein, the returned audio occurs when near-end audio is picked-up by the microphone <b>40</b> at the near-end, is transmitted to the far-end unit <b>16</b>, undergoes loudspeaker-to-microphone acoustic coupling (<b>17</b>) at the far-end, and is then returned to the near-end's decoder <b>12</b> to be output by the near-end loudspeaker <b>20</b>. As expected, receiving one's own voice replayed back can be very distracting for the near-end participant in the conference. When the module <b>50</b> detects such returned audio, the near-end loudspeaker <b>20</b> may be muted or otherwise turned down, thereby eliminating or reducing what returned audio is output by the loudspeaker <b>20</b> at the near-end.</p>
<p id="p-0019" num="0018">Although the location of the module <b>50</b> is conceptually straightforward in the near-end unit <b>10</b>, there are a number of practical challenges at the near-end to detecting near-end audio that has been returned from the far-end. For example, the module <b>50</b> must be able to handle any time delay in the far-end audio. This delay can range anywhere from 10's of milliseconds to 1 second or more and may change over time during a conference call. In addition, the audio coder and other components (not shown) at the far-end unit <b>16</b> may introduce significant non-linear distortion and noise to the returned audio that the module <b>50</b> must deal with. Further, the returned audio may have wide-ranging amplitude and frequency responses so that the returned audio's amplitude may be very weak or very strong at any given time and may alter drastically in frequency from the original signal.</p>
<p id="p-0020" num="0019">B. Process for Echo Detection and Suppression</p>
<p id="p-0021" num="0020">To detect and suppress the returned audio in light of the above challenges, the module <b>50</b> of <figref idref="DRAWINGS">FIG. 2</figref> performs a signal processing operation <b>100</b> as shown in <figref idref="DRAWINGS">FIG. 3</figref>. In the operation <b>100</b>, the module <b>50</b> obtains both the near-end and far-end audio signals (Blocks <b>110</b>/<b>120</b>) and uses filterbanks to separately filter the obtained signals into a number of bands (Blocks <b>112</b>/<b>122</b>). The module <b>50</b> samples the output for each band and each signal at a predetermined interval (Block <b>114</b>/<b>124</b>) and finds the energy of the sampled output for each band (Block <b>116</b>/<b>126</b>).</p>
<p id="p-0022" num="0021">As shown <figref idref="DRAWINGS">FIG. 4</figref>, for example, the module <b>50</b> can obtain the near-end and far-end audio signals <b>150</b>/<b>160</b> at a sample rate of about 48 kHz, and the near-end and far-end signals are fed to separate filterbanks <b>152</b>/<b>162</b> that consist of five sub-bands centered at about 400, 800, 1200, 1600, and 2000 Hz. The filterbanks <b>152</b>/<b>162</b> can use filters that are cosine and sine modulated versions of a Blackman window of 10-ms in length, producing real and imaginary parts of the sub-band signal every 20-ms. Such a filterbank may be implemented very efficiently because of the commonality of operations between the different sub-bands. These separate filterbanks <b>152</b>/<b>162</b> filter the signals into five bands (<b>1</b>-<b>5</b>). The output of each band (<b>1</b>-<b>5</b>) can be sampled at every 20-ms, and the module <b>50</b> can find the energy of the sampled output for each band (<b>1</b>-<b>5</b>) to produce sampled output signals <b>155</b>/<b>165</b>.</p>
<p id="p-0023" num="0022">Continuing with the operation <b>100</b> of <figref idref="DRAWINGS">FIG. 3</figref>, the module <b>50</b> compares the energy variations in the near-end and far-end signals as a function of time in a range of time delay (Block <b>130</b>). In doing this comparison, the module <b>50</b> cross-correlates the corresponding bands of each of the signals at different time delays. From this cross-correlation, the module <b>50</b> determines the presence of returned near-end audio in the received far-end audio at a given time delay when there is a peak in the cross-correlation values for each of the bands of the two compared signals.</p>
<p id="p-0024" num="0023">As shown in <figref idref="DRAWINGS">FIG. 4</figref>, for example, the operation <b>100</b> runs a cross-correlation window <b>170</b> described in more detail below. From the results of the window <b>170</b>, the operation <b>100</b> determines at which time delay value <b>180</b> high cross-correlation values <b>185</b> occur between what is sent by the near-end unit at one point in time to what is received from the far-end unit at a subsequent point in time. High cross-correlation values <b>185</b> at a particular time delay value <b>180</b> indicates the presence of returned near-end audio in the far-end audio received at this time delay.</p>
<p id="p-0025" num="0024">Returning to <figref idref="DRAWINGS">FIG. 3</figref>, the operation <b>100</b> determines from the cross-correlation results whether near-end audio is probably being returned in the far-end audio received (Decision <b>135</b>). If returned audio is not occurring (no for Decision <b>135</b>), the operation <b>100</b> can return to repeating steps of finding energy to determine if audio is currently being returned (i.e., Blocks <b>110</b>, <b>120</b>, etc.). However, if enough high correlations occur at the same time delay value (yes for Decision <b>135</b>), the operation <b>100</b> declares the presence of returned near-end audio at that time delay. At this point, the module <b>50</b> uses the estimated time delay value at which the near-end audio is probably being returned from the far-end and continues processing to handle the returned audio.</p>
<p id="p-0026" num="0025">Although the cross-correlation process (Block <b>130</b>) for detecting the presence of the returned audio at a time delay is reliable, the process can be slow due to the integration over time needed to obtain accurate estimates. If the cross-correlation is used alone, some returned audio may be output at the near-end. Accordingly, the cross-correlation process (Block <b>130</b>) is essentially used to estimate a time delay value for potential returned audio. Once this is done, the module <b>50</b> preferably uses a faster-responding detection scheme that directly uses the sub-band energy when the cross-correlation process (Block <b>130</b>) has determined that near-end audio is being returned.</p>
<p id="p-0027" num="0026">To handle the returned audio in this faster scheme, the operation <b>100</b> determines the echo return loss (ERL) using a peak energy algorithm when the cross-correlation is high enough (Block <b>200</b>). In general, this process <b>200</b> finds the peak energy of the outgoing (near-end) audio in each band and finds the peak energy of the incoming (far-end) audio in each band at the estimated time delay. If the near-end energy is being returned in the received far-end audio at the time delay, then the peak energy for one or more of the bands will reflect this.</p>
<p id="p-0028" num="0027">After finding the echo return loss, the operation <b>100</b> then implements a sub-band doubletalk detector using the estimated time delay of the returned audio (Block <b>210</b>). At this point, the operation <b>100</b> knows the estimated time delay at which the near-end audio is being returned from the far-end, and the operation <b>100</b> knows the energy that comes back at that estimated time delay. Therefore, the doubletalk detection (Block <b>210</b>) can determine whether the energy coming in from the far-end audio is primarily or solely due to the near-end audio (speech) being returned as echo or whether someone at the far-end is speaking over some portion of possible echo.</p>
<p id="p-0029" num="0028">In essence, if the doubletalk detection (Block <b>210</b>) determines that peak energy in any particular sub-band of the far-end audio at the time delay is greater than the peak energy of the same band in the near-end audio, then the doubletalk detection (Block <b>210</b>) can determine that far-end speech is occurring. Therefore, the doubletalk detection will not suppress or mute the far-end audio being output at the near-end unit <b>10</b>. Ultimately, if doubletalk is not occurring, then the operation <b>100</b> has the module <b>50</b> suppress or mute the far-end audio to prevent returned near-end audio from being output at the near-end. Again, the near-end loudspeaker <b>20</b> may be muted or otherwise turned down to suppress the returned audio.</p>
<p id="p-0030" num="0029">1. Details of Cross-Correlation Process</p>
<p id="p-0031" num="0030">Given the above-description of the process for determining the presence of returned audio and its time delay, discussion now turns to particular examples of the cross-correlation process for estimating a time delay at which near-end audio is potentially being returned. In one implementation, the module <b>50</b> in <figref idref="DRAWINGS">FIG. 3</figref> can use a moving average operation to determine the cross-correlation between the near and far-end sub-band energies. For two sequences in time x(t),y(t), for example, a definition of cross-correlation for a time delay or lag k at a time index n is provided by:</p>
<p id="p-0032" num="0031">
<maths id="MATH-US-00001" num="00001">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mrow>
            <mi>Corr</mi>
            <mo>&#x2061;</mo>
            <mrow>
              <mo>[</mo>
              <mi>n</mi>
              <mo>]</mo>
            </mrow>
          </mrow>
          <mo>&#x2061;</mo>
          <mrow>
            <mo>[</mo>
            <mi>k</mi>
            <mo>]</mo>
          </mrow>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mrow>
            <mo>(</mo>
            <mrow>
              <munderover>
                <mo>&#x2211;</mo>
                <mrow>
                  <mi>t</mi>
                  <mo>=</mo>
                  <mi>n</mi>
                </mrow>
                <mrow>
                  <mi>n</mi>
                  <mo>-</mo>
                  <mi>N</mi>
                </mrow>
              </munderover>
              <mo>&#x2062;</mo>
              <mrow>
                <mrow>
                  <mi>x</mi>
                  <mo>&#x2061;</mo>
                  <mrow>
                    <mo>(</mo>
                    <mi>t</mi>
                    <mo>)</mo>
                  </mrow>
                </mrow>
                <mo>&#x2062;</mo>
                <mrow>
                  <mi>y</mi>
                  <mo>&#x2061;</mo>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mi>t</mi>
                      <mo>-</mo>
                      <mi>k</mi>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                </mrow>
              </mrow>
            </mrow>
            <mo>)</mo>
          </mrow>
          <mo>/</mo>
          <mrow>
            <mo>(</mo>
            <mrow>
              <msqrt>
                <mrow>
                  <munderover>
                    <mo>&#x2211;</mo>
                    <mrow>
                      <mi>t</mi>
                      <mo>=</mo>
                      <mi>n</mi>
                    </mrow>
                    <mrow>
                      <mi>n</mi>
                      <mo>-</mo>
                      <mi>N</mi>
                    </mrow>
                  </munderover>
                  <mo>&#x2062;</mo>
                  <mrow>
                    <msup>
                      <mi>x</mi>
                      <mn>2</mn>
                    </msup>
                    <mo>&#x2061;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mi>t</mi>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                </mrow>
              </msqrt>
              <mo>&#x2062;</mo>
              <msqrt>
                <mrow>
                  <munderover>
                    <mo>&#x2211;</mo>
                    <mrow>
                      <mi>t</mi>
                      <mo>=</mo>
                      <mi>n</mi>
                    </mrow>
                    <mrow>
                      <mi>n</mi>
                      <mo>-</mo>
                      <mi>N</mi>
                    </mrow>
                  </munderover>
                  <mo>&#x2062;</mo>
                  <mrow>
                    <msup>
                      <mi>y</mi>
                      <mn>2</mn>
                    </msup>
                    <mo>&#x2061;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mi>t</mi>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                </mrow>
              </msqrt>
            </mrow>
            <mo>)</mo>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>1</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0033" num="0032">Here, the first sequence in time x(t) can correspond to the sampled energy of a given band for the near-end audio, while the second sequence in time y(t) can correspond to the sampled energy of the given band for the far-end audio. In equation (1), if the value of Corr[n][k] is close to 1, then the time sequences x(t),y(t) are very similar in shape for the time index n and time delay or lag k. The summation over N terms in equation (1) may be viewed as a moving average operation.</p>
<p id="p-0034" num="0033">As an alternative to the moving average of equation (1), the module <b>50</b> can reduce computation by replacing the moving average operation with an Infinite Impulse Response (IIR) filter. In this implementation, the IIR filter can be provided as:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>Corr[<i>n][k</i>]=NumCross(<i>n</i>)/(&#x221a;{square root over (DemX(<i>n</i>))}&#x221a;{square root over (DenY(<i>n</i>))})&#x2003;&#x2003;(2)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0035" num="0034">where</p>
<p id="p-0036" num="0035">NumCross(n)=&#x3b1;&#xb7;NumCross(n&#x2212;1)+(1&#x2212;&#x3b1;)&#xb7;x(n)y(n&#x2212;k)</p>
<p id="p-0037" num="0036">DenX(n)=&#x3b1;&#xb7;DenX(n&#x2212;1)+(1&#x2212;&#x3b1;)&#xb7;x<sup>2</sup>(n)</p>
<p id="p-0038" num="0037">DenY(n)=&#x3b1;&#xb7;DenY(n&#x2212;1)+(1&#x2212;&#x3b1;)&#xb7;y<sup>2</sup>(n)</p>
<p id="p-0039" num="0038">When used, equation (2) can find the cross-correlation in time between the near-end and far-end bandpass energy time sequences (energy found at 20-ms intervals). When the cross-correlation between the near and far-end bandpass energy time sequences is high, the module <b>50</b> estimates this to be a reliable estimation that near-end audio is being returned at the corresponding time delay or lag k and uses this estimation to perform further processing.</p>
<p id="p-0040" num="0039">As shown in <figref idref="DRAWINGS">FIG. 4</figref>, for example, the cross-correlation can be done efficiently using the Infinite Impulse Response (IIR) window <b>170</b> (as described above) with a time constant (&#x3b1;) of 0.8 seconds. The time delay or lag k is preferably constrained in the range of 0 to about 3 seconds (i.e., 2.56 seconds). The presence of returned audio will cause a peak in the cross-correlation value <b>185</b> at some time lag (k) <b>180</b> for each of the sub-bands. If the cross-correlation peak value <b>185</b> is high for all the sub-bands at a similar cross-correlation time lag (k) <b>180</b> for all of the sub-bands, then there is a high probability that near-end audio is being returned at that time index.</p>
<p id="p-0041" num="0040">2. Details of Peak Energy and Double Talk Detection</p>
<p id="p-0042" num="0041">Given the above-description of the cross-correlation process for estimating a time delay at which near-end audio is potentially being returned, discussion now turns to the faster-responding detection scheme that determines the echo return loss (ERL) (<b>200</b>) using a peak energy algorithm and then implements a sub-band doubletalk detector (<b>210</b>) using the estimated time delay. As shown in more detail in <figref idref="DRAWINGS">FIG. 5</figref>, for example, when the cross-correlation between the near and far-ends is high enough at a particular time delay, the ERL process (<b>200</b>) estimates the ratio of the energies of the far-end energy to the near-end energy (i.e., Echo Return Loss (ERL)) for each band (Block <b>202</b>). The ERL process (<b>200</b>) then multiples the near-end energy by the ERL value (Block <b>204</b>). Because near-end audio is believed to be returning, the expected result should equal the far-end energy. If it does not, then the process (<b>200</b>) may terminate and return to estimating a probable time delay of returned audio. Otherwise, the operation <b>100</b> continues processing by implementing the sub-band doubletalk detector (<b>210</b>).</p>
<p id="p-0043" num="0042">The doubletalk detector (<b>210</b>) then delays the near-end energy versus time so that it matches the delay of the far-end energy (Block <b>212</b>). Then, the doubletalk detector (<b>210</b>) selects a first of the bands (Block <b>216</b>), multiplies the ERL times the near-end energy for that band (Block <b>218</b>), and compares the far-end energy to the ERL times the near-end energy (Decision <b>220</b>).</p>
<p id="p-0044" num="0043">If the comparison shows that the far-end energy is at or below twice its expected value (yes-Decision <b>220</b>), then the band count for probable returned audio is incremented (Block <b>222</b>). If the far end energy for the band is more than twice its expected value, then the band is not added to the band count. Either way, the doubletalk detector (<b>210</b>) determines if more bands remain to be analyzed (Decision <b>226</b>) and operates accordingly. After comparing the far-end energy to the ERL times the near-end energy band-by-band (Block <b>216</b> through <b>226</b>), the doubletalk detector (<b>210</b>) determines whether enough bands of the far-end energy are at or below twice their expected value (Decision <b>228</b>).</p>
<p id="p-0045" num="0044">If enough bands of the far-end energy are more than (i.e., not at or below) twice their expected value (no at Decision <b>228</b>), then the doubletalk detector (<b>210</b>) does not declare that returned audio is being received. Instead, this may indicate that a participant at the far-end is talking while the near-end is silent or is producing much less energy. Therefore, the audio being output by the near-end loudspeaker (<b>20</b>; <figref idref="DRAWINGS">FIG. 2</figref>) is not muted or reduced.</p>
<p id="p-0046" num="0045">If enough bands of the far-end energy are at or below twice their expected value (yes at Decision <b>228</b>), then the doubletalk detector (<b>210</b>) declares the presence of returned near-end audio as echo (Block <b>230</b>). The total number of bands that must show that the near-end energy times the ERL for that band is at or below the expected value to warrant declaring returned audio may depend on the implementation. In general, however, if a majority or more than half of the bands show the required result, then the doubletalk detector (<b>210</b>) can declare that returned audio is being received.</p>
<p id="p-0047" num="0046">At this point, the module (<b>50</b>) of the near-end unit (<b>10</b>) in <figref idref="DRAWINGS">FIG. 2</figref> can suppress the returned audio by muting or turning down the audio output by the near-end loudspeaker (<b>20</b>). The actual amount of time for muting or suppressing the audio may depend on the implementation and may last for the amount of time that returned audio is detected or may last for some predetermined amount of time. For example, the output audio can be suppressed at the near-end for a predetermined time interval, until detection of the returned audio ceases, or until speech having a magnitude greater than the returned is detected in the far-end audio received.</p>
<p id="p-0048" num="0047">As the operation <b>100</b> of <figref idref="DRAWINGS">FIGS. 3-5</figref> continues during a call, the module <b>50</b> of <figref idref="DRAWINGS">FIG. 2</figref> can produce half-duplex suppression of the returned audio at the near-end unit <b>10</b> so that the near-end participant will not hear her voice relayed back to her by the far-end unit's failure to cancel out any acoustic coupling that may be occurring at the far-end. However, if the far-end has a working echo canceller, the operation <b>100</b> is expected to not detect returned audio falsely. In general, the module's ability to detect returned near-end audio is expected to operate under various amplitudes, phase-variations, and changes in delay over time, as well as audio codec distortions. Based on what they hear, neither near-end nor far-end participant may know whether or not their own echo canceller is working, making automated operation of the module <b>50</b> beneficial.</p>
<p id="p-0049" num="0048">The module <b>50</b> for detecting and suppressing the returned audio can be used with Polycom's HDX9004 system. Using a sampling rate is 48 kHz, for example, the module <b>50</b> in the HDX9004 system can process 20-ms blocks of far-end and near-end audio at a time and can declare the presence or absence of returned near-end audio in the far-end audio block using a low computing cost of about 1.37 million instructions per second on a Trimedia PNX1700 chip used in the system. In addition, the module <b>50</b> can detect the very first occurrence of returned audio and reliably estimate a time delay for it within about 2 to 3 seconds of a participant's speech. At that point, the module <b>50</b> can mute the output audio in about 0.2 seconds of speech.</p>
<p id="p-0050" num="0049">C. Multipoint Bridge Unit</p>
<p id="p-0051" num="0050">Previous arrangements focused on using the module <b>50</b> in a conferencing unit (e.g., near-end unit). Yet, far-end echo is a common problem in multi-way calls having multiple sites jointly connected in a call. The more sites involved increase the chances that one site may lack an echo canceller to reduce the effects of acoustic coupling at the site. Therefore, the disclosed techniques for detecting and suppressing returned audio can also be used in a multipoint bridge unit that handles calls for multiple units. Suitable examples of multipoint bridge units include the MGC-25, MGC-F50 (RediConvene&#x2122;), or MGC+100 (RediConvene&#x2122;), which are unified multipoint conferencing bridges with integrated conference management available from Polycom, Inc.&#x2014;the assignee of the present disclosure.</p>
<p id="p-0052" num="0051">As schematically shown in <figref idref="DRAWINGS">FIG. 6</figref>, a multipoint bridge unit <b>300</b> has a number of input/output connections <b>310</b>A-N to various endpoints <b>10</b>A-N that it handles for conference calls. These connections <b>310</b>A-N couple to a common interface <b>320</b>, which in turn connects to various audio modules <b>330</b>A-N for each of the connected endpoints. As is typical, the audio modules <b>330</b>A-N handle the audio for the endpoints <b>10</b>A-N in the conference calls. For example, one audio module <b>310</b>A can receive the input (near-end) audio from a dedicated endpoint <b>10</b>A for sending on to one or more other endpoints in a conference call. Likewise, the same audio module <b>310</b>A can send output (far-end) audio from the other endpoints to the dedicated endpoint <b>10</b>A. To handle the sending and receiving of audio between the endpoints, each module <b>330</b> can have audio ports <b>340</b> and/or broadcast ports <b>345</b> for the endpoints in the call, depending on how the calls are set up. For example, an audio port <b>340</b> can be assigned to one of the endpoints in the call to which the endpoint dedicated to the module <b>330</b> is participating in, and the port <b>340</b> can be used to send and receive audio with that endpoint. On the other hand, the broadcast port <b>345</b> can be assigned to one of the endpoints in the call that is only receiving audio.</p>
<p id="p-0053" num="0052">In addition to the conventional components described above, the unit <b>300</b> has a module <b>350</b> for detecting and suppressing returned audio. When one of the particular endpoints <b>10</b> fails to provide sufficient echo cancellation (e.g., it lacks an echo canceller), the module <b>350</b> detects the presence of returned audio (echo) from that endpoint and prevents or suppresses that returned audio from being relayed to the other endpoints. Therefore, this module <b>350</b> can use the same processes discussed previously with respect to an endpoint unit.</p>
<p id="p-0054" num="0053">Digital electronic circuitry, computer hardware, firmware, software, or any combination thereof can implement the techniques of the present disclosure, and a computer program tangibly embodied in a machine-readable medium for execution by a programmable processor can also implement the disclosed techniques so that a programmable processor can execute a program of instructions to perform functions of the disclosed techniques by operating on input data and generating output. Suitable processors include, by way of example, both general and special purpose microprocessors. Generally, a processor will receive instructions and data from a read-only memory and/or a random access memory. Accordingly, the near-end conferencing unit <b>10</b> of <figref idref="DRAWINGS">FIG. 2</figref> and the multipoint bridge unit <b>300</b> of <figref idref="DRAWINGS">FIG. 5</figref> can each have a processor (not shown) to execute instructions and handle data for the module <b>50</b>/<b>350</b>.</p>
<p id="p-0055" num="0054">Generally, a computer includes one or more mass storage devices (e.g., magnetic disks, internal hard disks, removable disks, magneto-optical disks, optical disks, etc.) for storing data files. Storage devices suitable for tangibly embodying computer program instructions and data include all forms of non-volatile memory, including by way of example, semiconductor memory devices (e.g., EPROM, EEPROM, and flash memory devices), magnetic disks (e.g., internal hard disks and removable disks), magneto-optical disks, CD-ROM disks, and other computer-readable media. Any of the foregoing can be supplemented by or incorporated into application-specific integrated circuits.</p>
<p id="p-0056" num="0055">The foregoing description of preferred and other embodiments is not intended to limit or restrict the scope or applicability of the inventive concepts conceived of by the Applicants. In exchange for disclosing the inventive concepts contained herein, the Applicants desire all patent rights afforded by the appended claims. Therefore, it is intended that the appended claims include all modifications and alterations to the full extent that they come within the scope of the following claims or the equivalents thereof.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-math idrefs="MATH-US-00001" nb-file="US08625776-20140107-M00001.NB">
<img id="EMI-M00001" he="9.14mm" wi="76.20mm" file="US08625776-20140107-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method of suppressing near-end audio acoustically coupled at a far-end and returned to the near-end in a conference, the method comprising:
<claim-text>determining first energy output of near-end audio sent from a near-end conferencing unit to a far-end conferencing unit by filtering the near-end audio into the first bands and determining first energy outputs of each of the first bands;</claim-text>
<claim-text>determining second energy output of far-end audio sent from the far-end conferencing unit to the near-end conferencing unit by filtering the far-end audio into the second bands and determining second energy outputs of each of the second bands;</claim-text>
<claim-text>detecting a return of the near-end audio in the far-end audio by
<claim-text>cross-correlating variations in the first and second energy outputs for each of the bands to one another at increments of time delay over a time delay range,</claim-text>
<claim-text>determining the time delay having a greatest cross-correlation for all of the bands,</claim-text>
<claim-text>estimating for each of the bands a ratio of the far-end energy to the near-end energy,</claim-text>
<claim-text>determining a result by multiplying the near-end energy by the ratio, and</claim-text>
<claim-text>determining whether the result is equal to the far-end energy,</claim-text>
<claim-text>wherein the detected return is caused by the near-end audio sent from the near-end conferencing unit to the far-end conferencing unit being acoustically coupled at the far-end conferencing unit and returned as part of the far-audio sent from the far-end conferencing unit; and</claim-text>
</claim-text>
<claim-text>suppressing the detected return from output at the near-end conferencing unit.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the first and second bands each center at 400, 800, 1200, 1600, and 2000 Hz.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein comparing the first and second energy outputs to one another over the time delay range comprises comparing the first and second energy outputs for each of the bands to one another over the time delay range.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein detecting the return comprises:
<claim-text>offsetting the near-end energy versus time to match the far-end energy;</claim-text>
<claim-text>comparing the far-end energy outputs to the offset near-end energy outputs times the ratio for each of the bands; and</claim-text>
<claim-text>determining a count of how many of the bands have near-end energy outputs multiplied times the ratio that is at least less than or equal to an expected value.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein detecting the return comprises declaring a presence of the return when the determined count is greater than a threshold.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the time delay range is from 0 to about 3-seconds.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein determining the first and second energy outputs is done at predetermined sample times.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein suppressing the detected return from output at the near-end conferencing unit comprises muting output of the far-end audio at a near-end loudspeaker.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein suppressing the detected return at the near-end comprises reducing output of the far-end audio at a near-end loudspeaker.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the detected return is suppressed at the near-end conferencing unit for a predetermined time interval, until detection of the return ceases, or until speech having a magnitude greater than the return is detected in the far-end audio.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. A non-transitory machine-readable medium having program instructions stored thereon for causing a programmable control device to perform a method of suppressing near-end audio acoustically coupled at a far-end and returned to the near-end in a conference, the method comprising:
<claim-text>determining first energy output of near-end audio sent from a near-end conferencing unit to a far-end conferencing unit by filtering the near-end audio into first bands and determining first energy outputs of each of the first bands;</claim-text>
<claim-text>determining second energy output of far-end audio sent from the far-end conferencing unit to the near-end conferencing unit by filtering the far-end audio into second bands and determining second energy outputs of each of the second bands;</claim-text>
<claim-text>detecting a return of the near-end audio in the far-end audio by
<claim-text>cross-correlating variations in the first and second energy outputs for each of the bands to one another at increments of time delay over a time delay range,</claim-text>
<claim-text>determining the time delay having a greatest cross-correlation for all of the bands,</claim-text>
<claim-text>estimating for each of the bands a ratio of the far-end energy to the near-end energy,</claim-text>
<claim-text>determining a result by multiplying the near-end energy by the ratio, and</claim-text>
<claim-text>determining whether the result is equal to the far-end energy,</claim-text>
<claim-text>wherein the detected return is caused by the near-end audio sent from the near-end conferencing unit to the far-end conferencing unit being acoustically coupled at the far-end conferencing unit and returned as part of the far-audio sent from the far-end conferencing unit; and</claim-text>
</claim-text>
<claim-text>suppressing the detected return from output at the near-end conferencing unit.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. A method of suppressing near-end audio acoustically coupled at a far-end and returned to the near-end in a conference, the method comprising:
<claim-text>sending near-end audio from a near-end conferencing unit to a far-end conferencing unit;</claim-text>
<claim-text>determining first energy outputs of first bands of the near-end audio at the near-end conferencing unit;</claim-text>
<claim-text>receiving far-end audio from the far-end conferencing unit at the near-end conferencing unit;</claim-text>
<claim-text>determining second energy outputs of each of second bands of the far-end audio received at the near-end conferencing unit;</claim-text>
<claim-text>detecting a return of the sent near-end audio in the received far-end audio by cross-correlation variations in the first and second energy outputs for each of the bands to one another at increments of time delay over a time delay range and determining the time delay having a greatest cross-correlation for all of the bands, the detected return being caused by the near-end audio sent from the near-end conferencing unit to the far-end conferencing unit being acoustically coupled at the far-end conferencing unit and returned as part of the far-end audio received at the near-end conferencing unit; and</claim-text>
<claim-text>suppressing the detected return from output at the near-end conferencing unit.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The method of <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein determining the first energy outputs of first bands of near-end audio comprises:
<claim-text>obtaining the near-end audio at the near-end conferencing unit;</claim-text>
<claim-text>filtering the near-end audio into the first bands at the near-end conferencing unit; and</claim-text>
<claim-text>determining the first energy outputs of each of the first bands.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The method of <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein determining the second energy outputs of second bands of far-end audio comprises:
<claim-text>obtaining the far-end audio received from the far-end conferencing unit at the near-end conferencing unit;</claim-text>
<claim-text>filtering the far-end audio into the second bands at the near-end conferencing unit; and</claim-text>
<claim-text>determining the second energy outputs of each of the second bands.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. A conferencing unit, comprising:
<claim-text>a coder unit receiving near-end audio from a microphone and sending near-end audio signals to a far-end conferencing unit;</claim-text>
<claim-text>a decoder unit receiving a far-end audio signal from the far-end conferencing unit and sending far-end audio for output at a loudspeaker; and</claim-text>
<claim-text>a processor unit operatively coupled to the coder and decoder units and configured to:
<claim-text>filter the near-end audio into first bands,</claim-text>
<claim-text>determine first energy outputs of each of the first bands,</claim-text>
<claim-text>filter the far-end audio into second bands,</claim-text>
<claim-text>determine second energy outputs of each of the second bands, detect return caused by the near-end audio sent from the near-end conferencing unit to the far-end conferencing unit being acoustically coupled at the far-end conferencing unit and returned within the far-end audio received at the near-end conferencing unit, wherein to detect the return, the processor is configured to&#x2014;cross-correlate variations in the first and second energy outputs to one another for each of the bands at increments of time delay over a time delay range, and determine the time delay having a greatest cross-correlation for all of the bands, and</claim-text>
<claim-text>suppress sending the detected return to a near-end loudspeaker.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The unit of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the conferencing unit is a near-end conferencing unit communicatively coupled to the far-end conferencing network via a network.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The unit of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the conferencing unit is a multipoint conferencing bridge unit communicatively coupled to a near-conferencing unit and the far-end conferencing network via a network.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The unit of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein to detect the return, the processor is configured to:
<claim-text>estimate for each of the bands a ratio of the far-end energy to the near-end energy;</claim-text>
<claim-text>determine a result by multiplying the near-energy by the ratio; and</claim-text>
<claim-text>determine whether the result is equal to the far-end energy.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The unit of <claim-ref idref="CLM-00018">claim 18</claim-ref>, wherein to detect the return, the processor is configured to:
<claim-text>offset the near-end energy versus time to match the far-end energy;</claim-text>
<claim-text>compare the far-end energy outputs to the offset near-end energy outputs times the ratio for each of the bands; and</claim-text>
<claim-text>determine a count of how many of the bands have near-end energy outputs multiplied times the ratio that is at least less than or equal to an expected value.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The unit of <claim-ref idref="CLM-00019">claim 19</claim-ref>, wherein to detect the return, the processor is configured to declare a presence of the return when the determined count is greater than a threshold.</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. The unit of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein suppressing the detected return from output at the near-end conferencing unit comprises:
<claim-text>muting output of the far-end audio at a near-end loudspeaker; or</claim-text>
<claim-text>reducing output of the far-end audio at the near-end loudspeaker.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. The unit of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the detected return is suppressed at the near-end conferencing unit for a predetermined time interval, until detection of the return ceases, or until speech having a magnitude greater than the return is detected in the far-end audio.</claim-text>
</claim>
<claim id="CLM-00023" num="00023">
<claim-text>23. The method of <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein detecting the return comprises:
<claim-text>estimating for each of the bands a ratio of the far-end energy to the near-end energy;</claim-text>
<claim-text>determining a result by multiplying the near-energy by the ratio; and</claim-text>
<claim-text>determining whether the result is equal to the far-end energy.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00024" num="00024">
<claim-text>24. The method of <claim-ref idref="CLM-00023">claim 23</claim-ref>, wherein detecting the return comprises:
<claim-text>offsetting the near-end energy versus time to match the far-end energy;</claim-text>
<claim-text>comparing the far-end energy outputs to the offset near-end energy outputs times the ratio for each of the bands; and</claim-text>
<claim-text>determining a count of how many of the bands have near-end energy outputs multiplied times the ratio that is at least less than or equal to an expected value.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00025" num="00025">
<claim-text>25. The method of <claim-ref idref="CLM-00024">claim 24</claim-ref>, wherein detecting the return comprises declaring a presence of the return when the determined count is greater than a threshold.</claim-text>
</claim>
<claim id="CLM-00026" num="00026">
<claim-text>26. The method of <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein suppressing the detected return from output at the near-end conferencing unit comprises:
<claim-text>muting output of the far-end audio at a near-end loudspeaker; or</claim-text>
<claim-text>reducing output of the far-end audio at the near-end loudspeaker.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00027" num="00027">
<claim-text>27. The method of <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein the detected return is suppressed at the near-end conferencing unit for a predetermined time interval, until detection of the return ceases, or until speech having a magnitude greater than the return is detected in the far-end audio.</claim-text>
</claim>
<claim id="CLM-00028" num="00028">
<claim-text>28. The medium of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein comparing the first and second energy outputs to one another over the time delay range comprises comparing the first and second energy outputs for each of the bands to one another over the time delay range.</claim-text>
</claim>
<claim id="CLM-00029" num="00029">
<claim-text>29. The medium of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein detecting the return comprises:
<claim-text>offsetting the near-end energy versus time to match the far-end energy;</claim-text>
<claim-text>comparing the far-end energy outputs to the offset near-end energy outputs times the ratio for each of the bands; and</claim-text>
<claim-text>determining a count of how many of the bands have near-end energy outputs multiplied times the ratio that is at least less than or equal to an expected value.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00030" num="00030">
<claim-text>30. The medium of <claim-ref idref="CLM-00029">claim 29</claim-ref>, wherein detecting the return comprises declaring a presence of the return when the determined count is greater than a threshold.</claim-text>
</claim>
<claim id="CLM-00031" num="00031">
<claim-text>31. The medium of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein suppressing the detected return from output at the near-end conferencing unit comprises:
<claim-text>muting output of the far-end audio at a near-end loudspeaker; or</claim-text>
<claim-text>reducing output of the far-end audio at the near-end loudspeaker.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00032" num="00032">
<claim-text>32. The medium of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the detected return is suppressed at the near-end conferencing unit for a predetermined time interval, until detection of the return ceases, or until speech having a magnitude greater than the return is detected in the far-end audio. </claim-text>
</claim>
</claims>
</us-patent-grant>
