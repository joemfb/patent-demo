<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625218-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625218</doc-number>
<kind>B1</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13718404</doc-number>
<date>20121218</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>11</class>
<subclass>B</subclass>
<main-group>20</main-group>
<subgroup>10</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>360 39</main-classification>
<further-classification>702195</further-classification>
</classification-national>
<invention-title id="d2e43">ACQ in the presence of baseline pop</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6556933</doc-number>
<kind>B1</kind>
<name>Sacks et al.</name>
<date>20030400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>702 79</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>7116504</doc-number>
<kind>B1</kind>
<name>Oberg</name>
<date>20061000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>360 39</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2013/0024163</doc-number>
<kind>A1</kind>
<name>Xia et al.</name>
<date>20130100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>702191</main-classification></classification-national>
</us-citation>
</us-references-cited>
<number-of-claims>20</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>360 39</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>360 53</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>36912401</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>36912405</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>3691241</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>36912411</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>369174</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>702104</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>702106</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>702189-195</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>5</number-of-drawing-sheets>
<number-of-figures>7</number-of-figures>
</figures>
<us-related-documents>
<us-provisional-application>
<document-id>
<country>US</country>
<doc-number>61579592</doc-number>
<date>20111222</date>
</document-id>
</us-provisional-application>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only" applicant-authority-category="assignee">
<addressbook>
<orgname>Marvell International Ltd.</orgname>
<address>
<city>Hamilton</city>
<country>BM</country>
</address>
</addressbook>
<residence>
<country>BM</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Song</last-name>
<first-name>Hongxin</first-name>
<address>
<city>Sunnyvale</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Madden</last-name>
<first-name>Michael</first-name>
<address>
<city>Mountain View</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Marvell International Ltd.</orgname>
<role>03</role>
<address>
<city>Hamilton</city>
<country>BM</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Bernardi</last-name>
<first-name>Brenda</first-name>
<department>2688</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">Systems and methods for the correction of DC noise in signals read by a head of a disk drive are presented. Circuitry on a first data path may be configured to filter an input signal to remove a DC component. Acquisition parameters on the first data path may be configured based on the filtered signal. Circuitry on a second data path may be configured to adjust the input signal based on the configured acquisition parameters. A mean of a window of data samples of the adjusted input signal may be computed. Based on the computed mean, a correction may be applied to the adjusted input signal until a stopping rule is satisfied.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="245.36mm" wi="180.51mm" file="US08625218-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="120.90mm" wi="154.86mm" file="US08625218-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="213.53mm" wi="189.82mm" orientation="landscape" file="US08625218-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="240.20mm" wi="184.49mm" file="US08625218-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="209.55mm" wi="172.64mm" file="US08625218-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="252.05mm" wi="184.15mm" file="US08625218-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATION</heading>
<p id="p-0002" num="0001">This patent application claims the benefit under 35 U.S.C. &#xa7;119(e) of U.S. Provisional Application No. 61/579,592, filed Dec. 22, 2011, which is hereby incorporated by reference herein in its entirety.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">BACKGROUND OF THE DISCLOSURE</heading>
<p id="p-0003" num="0002">The background description provided herein is for the purpose of generally presenting the context of the disclosure. Work of the inventors hereof, to the extent the work is described in this background section, as well as aspects of the description that may not otherwise qualify as prior art at the time of filing, is neither expressly nor impliedly admitted as prior art against the present disclosure.</p>
<p id="p-0004" num="0003">The disclosed technology relates generally to the correction of DC noise in signals read by a head of a disk drive. When a low quality head is used to read data signals on a disk drive, the head is subject to instability events. Such head instability events (HIE) manifest themselves as DC noise, which is also referred to as temporary baseline pop. The severity and frequency of the baseline pop is variable. For example, the baseline pop can last for a length of hundreds to thousands of bits and can result in a DC upshift of up to 50% of the amplitude of the envelope of the signal.</p>
<p id="p-0005" num="0004">Baseline pop resulting from HIEs can cause distortion in both the preamble and the data portion of the signal being read. For example, baseline pop in the preamble portion impacts the acquisition of timing and gain parameters. Baseline pop in the data portion introduces data errors. Furthermore, HIEs may occur in any portion of the disk being read and their occurrence is difficult to anticipate.</p>
<heading id="h-0003" level="1">SUMMARY OF THE DISCLOSURE</heading>
<p id="p-0006" num="0005">In accordance with the principles of the present disclosure, methods and apparatus are provided for mitigating the effects of baseline pop resulting from HIEs.</p>
<p id="p-0007" num="0006">Circuitry on a first datapath may be configured to filter an input signal to remove a DC component. The input signal on the first datapath may be a preamble sequence appended by a sync mark. Acquisition parameters on the first datapath may be configured based on the filtered signal by circuitry on the first datapath. Circuitry on a second datapath may be configured to adjust the input signal based on the configured acquisition parameters.</p>
<p id="p-0008" num="0007">Circuitry on the first datapath may be configured to collect a window of data samples of the adjusted input signal. A mean of the window of data samples of the adjusted input signal may be computed. Based on the computed mean, a baseline pop correction may be applied to the adjusted input signal until a stopping rule is satisfied. The stopping rule may be satisfied if the sync mark of the input signal is detected. In some embodiments, the stopping rule may be satisfied if a pseudo sync mark of the input signal is detected.</p>
<p id="p-0009" num="0008">Circuitry on the first datapath may be further configured to subtract the computed mean from the adjusted input signal in order to correct the baseline pop. The circuitry on the second datapath may be further configured to select data samples in the window of data samples to have an identical phase characteristic. The circuitry on the second datapath may compare the computed mean to a threshold and may use the computed mean as an estimate of the baseline pop if the computed mean is above the threshold.</p>
<p id="p-0010" num="0009">The circuitry on the second datapath may be further configured to adjust a gain and a timing characteristic of the input signal on the second datapath based on the acquisition parameters. Computing the mean may further comprise averaging amplitudes of data samples in the window of data samples. The circuitry on the second datapath may be configured to decode a corrected input signal on the second datapath.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE FIGURES</heading>
<p id="p-0011" num="0010">The above, and other aspects and advantages of the invention, will be apparent upon consideration of the following detailed description, taken in conjunction with the accompanying drawings, in which like reference characters refer to like parts throughout, and in which:</p>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 1</figref> illustrates an exemplary signal waveform distorted by baseline pop in accordance with an arrangement;</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 2</figref> illustrates an exemplary block diagram for acquiring a signal after correcting baseline pop in accordance with an arrangement;</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 3</figref> illustrates exemplary data portions for which various system blocks are active in accordance with an arrangement;</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 4</figref> illustrates exemplary circuitry for rejecting baseline pop in accordance with an arrangement;</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 5</figref> illustrates exemplary circuitry for correcting baseline pop in accordance with an arrangement;</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 6</figref> illustrates exemplary signal waveforms showing windows in which baseline pop correction is applied in accordance with an arrangement; and</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 7</figref> illustrates an exemplary process for correcting baseline pop in accordance with an arrangement.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DETAILED DESCRIPTION OF THE DISCLOSURE</heading>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 1</figref> illustrates an exemplary signal waveform distorted by baseline pop in accordance with an arrangement. The plot shown in <figref idref="DRAWINGS">FIG. 1</figref> depicts the variation in amplitude over time of the envelope of a signal being read by a head of a disk drive. The signal being read may be either a preamble sequence or data. X-axis <b>110</b> of the plot indicates the progression of time and y-axis <b>120</b> indicates the amplitude of signal envelope <b>130</b>.</p>
<p id="p-0020" num="0019">As illustrated in <figref idref="DRAWINGS">FIG. 1</figref>, the amplitude of signal envelope <b>130</b> may change dramatically at time t<sub>1</sub>, as indicated by signal segment <b>140</b>. Such a change may be caused by baseline pop or DC noise resulting from an HIE, as discussed above in connection with the background of the disclosure. For example, baseline pop may begin at time t<sub>1 </sub>and last until time t<sub>2</sub>. Signal segment <b>140</b> indicates the portion of signal envelope <b>130</b> between t<sub>1 </sub>and t<sub>2</sub>. Signal segment <b>140</b> may be different from the portion of signal envelope <b>130</b> prior to time t<sub>1 </sub>and the portion of signal envelope <b>130</b> after time t<sub>2</sub>, with respect to amplitude. For example, the amplitude of signal segment <b>140</b> may be higher on average or in the mean than the amplitude of signal envelope prior to time t<sub>1</sub>.</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 2</figref> illustrates an exemplary block diagram for acquiring a signal after correcting baseline pop in accordance with an arrangement. System <b>200</b> includes analog to digital converter (ADC) <b>210</b>, preamble DC correction (PADCR) circuitry <b>220</b>, timing loop (TL) and automatic gain control (AGC) circuitry <b>224</b>, preamble DC rejection (PADCC) circuitry <b>230</b>, finite impulse response (FIR) filter <b>240</b>, moving average FIR (MAFIR) circuitry <b>260</b>, and FIR memory circuitry <b>280</b>.</p>
<p id="p-0022" num="0021">In an arrangement, PADCC circuitry <b>230</b>, FIR filter <b>240</b>, MAFIR circuitry <b>260</b>, and FIR memory circuitry <b>280</b> may be connected to ADC <b>210</b> on a top datapath. PADCR circuitry <b>220</b> and TL and AGC circuitry <b>224</b> may be connected to ADC <b>210</b> on a bottom datapath.</p>
<p id="p-0023" num="0022">The circuit blocks in system <b>200</b> may be preceded by an analog front-end connected to the head of the disk drive (not shown). The analog front-end may receive an analog signal read by the head. ADC <b>210</b> may receive the analog signal from the analog front-end and digitize the signal so that it may be processed by the circuit blocks of system <b>200</b>.</p>
<p id="p-0024" num="0023">The bottom datapath of system <b>200</b> may operate on preamble sequences of the input signal. A preamble sequence may be any predetermined sequence of bits. Preamble sequences may also be periodic, i.e., the predetermined sequence of bits may be repeated. In an implementation, a preamble sequence may be appended by a sync mark. Generally, preamble sequences may precede data portions of the input signal. Circuit blocks on the bottom datapath may be operable to acquire timing and gain control parameters from the preamble sequence. PADCR circuitry <b>220</b> may receive a digital signal from ADC <b>210</b>. The operation of PADCR circuitry <b>220</b> is described further in connection with <figref idref="DRAWINGS">FIG. 4</figref> below.</p>
<p id="p-0025" num="0024">TL and AGC circuitry <b>224</b> may acquire parameters useful for the correct acquisition of the input signal. For example, TL and AGC circuitry <b>224</b> may be operable to lock on to a phase and/or a gain of the signal received from PADCR <b>220</b>. TL and AGC circuitry <b>224</b> may be operable to correct the phase and/or the gain of the signal received from PADCR circuitry <b>220</b>. The phase and/or the gain may be referred to as acquisition parameters.</p>
<p id="p-0026" num="0025">The top datapath of system <b>200</b> may operate on preamble sequences and data portions of the input signal. Unlike preamble sequences, data portions of the input signal are a priori unknown. PADCC circuitry <b>230</b> may receive a digital signal from ADC <b>210</b>. The operation of PADCC circuitry <b>230</b> is described further in connection with <figref idref="DRAWINGS">FIG. 5</figref> below. The remainder of the circuit blocks on the top datapath, FIR filter <b>240</b>, MAFIR circuitry <b>260</b>, and FIR memory circuitry <b>280</b>, may decode the input signal and described further in related U.S. patent application Ser. No. 13/683,638, filed Nov. 21, 2012, which is incorporated by reference herein in its entirety.</p>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 3</figref> illustrates exemplary data portions for which various system blocks are active in accordance with an arrangement. The input signal read by the head of the disk drive may contain both preamble sequences and data portions. As an illustration, a preamble sequence <b>310</b> may precede a data portion <b>320</b> in the input signal. Different circuit blocks of system <b>200</b> of <figref idref="DRAWINGS">FIG. 2</figref> may operate on different portions of the input signal as indicated in <figref idref="DRAWINGS">FIG. 3</figref>. For example, PADCR circuitry <b>220</b> may be active during time period <b>330</b> when preamble sequence <b>310</b> of the input signal is received. PADCC circuitry <b>230</b> may be active during time period <b>340</b> when preamble sequence <b>310</b> and data portion <b>320</b> of the input signal are received. PADCC circuitry <b>230</b> may be active only for a small segment of data portion <b>320</b>. MAFIR circuitry <b>260</b> may be active during time period <b>350</b> when data portion <b>320</b> of the input signal is received.</p>
<p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. 4</figref> illustrates exemplary circuitry for rejecting baseline pop in accordance with an arrangement. Circuitry <b>400</b> includes PADCR circuitry <b>410</b>, ADC <b>450</b>, and TL and AGC circuitry <b>460</b> which may be substantially similar to PADCR circuitry <b>220</b>, ADC <b>210</b>, and TL and AGC circuitry <b>224</b>, respectively, of <figref idref="DRAWINGS">FIG. 2</figref>. PADCR circuitry <b>410</b> includes filter <b>420</b> and multiplexer <b>430</b>.</p>
<p id="p-0029" num="0028">PADCR circuitry <b>410</b> operates on preamble sequences as described in connection with <figref idref="DRAWINGS">FIG. 3</figref> above. PADCR circuitry <b>410</b> may remove the DC component from preamble sequences without modifying the gain or phase of the preamble sequences. PADCR circuitry <b>410</b> includes filter <b>420</b> for removing the DC component from preamble sequences. Filter <b>420</b> may be connected to ADC <b>450</b> to receive an input signal corresponding to a preamble sequence. Filter <b>420</b> may transmit its output to multiplexer <b>430</b>.</p>
<p id="p-0030" num="0029">Filter <b>420</b> may be a band-pass filter of the form indicated in <figref idref="DRAWINGS">FIG. 4</figref>. For example, for a general nT preamble sequence, defined by a binary sequence of n consecutive zeros followed by n consecutive ones, an exemplary filter <b>420</b> may be specified by (1&#x2212;D^n)/2, where 2n indicates the number of bits in the preamble sequence and T is the time duration of the portion of the signal corresponding to one bit. Filter <b>420</b> may reject the DC component of the signal being filtered while introducing no amplitude or phase distortion at the frequency of the preamble sequence. In general, filter <b>420</b> may be an n-tap FIR filter with unit gain that does not introduce any amplitude or phase distortion in the preamble sequence. Filter <b>420</b> may also be configured to minimize the latency introduced in the preamble sequence by the operation of filter <b>420</b>.</p>
<p id="p-0031" num="0030">PADCR circuitry <b>410</b> also includes multiplexer <b>430</b> connected to filter <b>420</b>, ADC <b>450</b>, and TL and AGC circuitry <b>460</b>. Through multiplexer <b>430</b>, PADCR circuitry <b>410</b> may control whether TL and AGC circuitry <b>460</b> receives the output of filter <b>420</b> or the unfiltered preamble sequence received from ADC <b>450</b>. The operation of multiplexer <b>430</b> may be controlled by D_PADCR_EN control signal <b>440</b>. For example, when control signal <b>440</b> is low, multiplexer <b>430</b> may feed the unfiltered preamble sequence received from ADC <b>450</b> through to TL and AGC circuitry <b>460</b>. When control signal <b>440</b> is high, multiplexer <b>430</b> may feed the preamble sequence filtered by filter <b>420</b> through to TL and AGC circuitry <b>460</b>. Control signal <b>440</b> may be stored in a register. In some embodiments, as a result of the multiplexing by multiplexer <b>430</b>, the latency of the preamble sequence may increase resulting in a longer preamble sequence.</p>
<p id="p-0032" num="0031">Circuitry <b>400</b> may produce a zero phase start (ZPS) in which the VCO locks on to the phase of the preamble sequence. Returning back to <figref idref="DRAWINGS">FIG. 2</figref>, TL and AGC circuitry <b>224</b> may acquire acquisition parameters, e.g., timing and gain parameters, useful for the proper acquisition of the preamble sequence. TL and AGC circuitry <b>224</b> may acquire timing and gain parameters from a preamble sequence received from PADCR circuitry <b>220</b>. The timing and gain parameters acquired by TL and AGC circuitry <b>224</b> may be used by circuitry on the top datapath of <figref idref="DRAWINGS">FIG. 2</figref> for the acquisition of the preamble sequence.</p>
<p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. 5</figref> illustrates exemplary circuitry for correcting baseline pop in accordance with an arrangement. Circuitry <b>500</b> shows PADCC circuitry <b>230</b> in greater detail. Circuitry <b>500</b> includes PADCC circuitry <b>510</b>, ADC <b>550</b>, and FIR <b>570</b>. PADCC circuitry <b>510</b>, ADC <b>550</b>, and FIR <b>570</b> may be substantially similar to PADCC circuitry <b>230</b>, ADC <b>210</b>, and FIR <b>240</b>, respectively, of <figref idref="DRAWINGS">FIG. 2</figref>.</p>
<p id="p-0034" num="0033">PADCC circuitry <b>510</b> estimates the amount of baseline pop or DC bias in the input signal received from ADC <b>550</b> and corrects the baseline pop of the input signal based on the estimate. In particular, PADCC circuitry <b>510</b> removes baseline pop from the preamble sequence based on a sync mark of the preamble sequence. Removing baseline pop from a signal may be referred to as applying a correction to the signal.</p>
<p id="p-0035" num="0034">PADCC circuitry <b>510</b> includes PADCC estimator <b>520</b>, multiplexer <b>530</b>, and subtractor <b>560</b>. PADCC estimator <b>520</b> may be connected to ADC <b>550</b> and multiplexer <b>530</b>. PADCC estimator <b>520</b> estimates the amount of baseline pop or DC bias in the input signal received from ADC <b>550</b>. PADCC estimator <b>520</b> transmits the estimate to multiplexer <b>530</b>.</p>
<p id="p-0036" num="0035">PADCC estimator <b>520</b> receives samples of the preamble sequence from ADC <b>550</b>. Samples received during a particular window may be used to perform the baseline pop estimation. As described above in connection with <figref idref="DRAWINGS">FIG. 2</figref>, preamble sequences may be periodic. Accordingly, the average or mean amplitude of a preamble sequence over one or more periods is zero. When the head of the disk drive is operating normally, no baseline pop is introduced. Therefore, the mean amplitude of the preamble sequence over one or more periods remains zero when the head is operating normally. However, when an HIE occurs, baseline pop, i.e., a DC bias, is introduced. In this case, the mean amplitude of the preamble sequence over one or more periods is no longer zero and instead has a value indicative of the amount of baseline pop. PADCC estimator <b>520</b> may rely on this to estimate the baseline pop.</p>
<p id="p-0037" num="0036">PADCC estimator <b>520</b> may select a window of samples of the preamble sequence received from ADC <b>550</b> over which to estimate the baseline pop. The window of samples may be selected such that the window does not contain a phase jump, i.e., the phase of the preamble sequence during the selected window remains constant. In particular, if the selected window includes a phase jump, then the assumption that the mean amplitude of the preamble sequence over one or more periods is zero is no longer valid. Generally, the length of the window of samples over which baseline pop is estimated should be maximized for accuracy and reliability based on the following requirements: (1) output samples received from ADC <b>550</b> are valid preamble sequence samples, (2) output samples received from ADC <b>550</b> have not been subject to adjustment from TL and AGC circuitry, such as TL and AGC circuitry <b>224</b> of <figref idref="DRAWINGS">FIG. 2</figref>, and (3) the length of the window of samples should be a multiple of the preamble period, i.e., 2n.</p>
<p id="p-0038" num="0037">Accordingly, PADCC estimator <b>520</b> may select a window of samples corresponding to the ZPS described in connection with <figref idref="DRAWINGS">FIG. 4</figref> above. The length of the ZPS may be variable. In an exemplary embodiment, the ZPS may be 8, 16, or 32 point, i.e., the number of samples in the ZPS may be 8, 16, or 32.</p>
<p id="p-0039" num="0038">The baseline pop estimate may be compared against a threshold value to ensure that the baseline pop detected is indeed caused by improper function of the disk drive head. For example, if the baseline pop estimate is a low value then it might simply be caused by noise. Accordingly, PADCC circuitry <b>510</b> may rely on the baseline pop estimate provided the baseline pop estimate exceeds a threshold value. Exemplary threshold values may be 0, 2, 4, or 6, although any other suitable value may also be used.</p>
<p id="p-0040" num="0039">The value of the threshold being used may be stored in a register. If the baseline pop estimate is less than or equal to the threshold value stored in this register, then the baseline pop estimate is set to zero.</p>
<p id="p-0041" num="0040">PADCC circuitry <b>510</b> includes multiplexer <b>530</b> connected to PADCC estimator <b>520</b> and subtractor <b>560</b>. Through multiplexer <b>530</b>, PADCR circuitry <b>510</b> may control whether subtractor <b>560</b> receives the baseline pop estimate from PADCC estimator <b>520</b> or a constant zero value. The operation of multiplexer <b>530</b> may be controlled by D_ACQ_PADCC_EN control signal <b>540</b>. For example, when control signal <b>540</b> is low, multiplexer <b>530</b> may feed the constant zero value through to subtractor <b>560</b>. When control signal <b>540</b> is high, multiplexer <b>530</b> may feed the baseline pop estimate generated by PADCC estimator <b>520</b> through to subtractor <b>560</b>. Control signal <b>540</b> may be stored in a register.</p>
<p id="p-0042" num="0041">PADCC circuitry <b>510</b> may begin applying a correction, i.e., correcting the baseline pop, as soon as PADCC estimator <b>520</b> generates an estimate of the baseline pop. In particular, the baseline pop may be corrected by subtracting the estimate of the baseline pop generated by PADCC estimator <b>520</b> from the output of ADC <b>550</b>. Subtractor <b>560</b> may perform this operation. The duration for which baseline pop correction is applied is based on a stopping rule which is described in connection with <figref idref="DRAWINGS">FIG. 6</figref> below.</p>
<p id="p-0043" num="0042"><figref idref="DRAWINGS">FIG. 6</figref> illustrates exemplary signal waveforms showing windows in which baseline pop correction is applied in accordance with an arrangement. Waveform <b>610</b> shows the ZPS as described in connection with <figref idref="DRAWINGS">FIG. 5</figref> above. In particular, the portion of waveform <b>610</b> with a high value indicates the ZPS. Waveform <b>620</b> shows the window of preamble sequence samples used by PADCC estimator <b>520</b> of <figref idref="DRAWINGS">FIG. 5</figref> to estimate the baseline pop. Evident from waveform <b>620</b> is that the estimation window begins prior to the start of the ZPS and ends after the end of the ZPS. The portions of the estimation window before and after the ZPS correspond to the extension of the ZPS to the past and future as described in connection with <figref idref="DRAWINGS">FIG. 5</figref> above.</p>
<p id="p-0044" num="0043">PADCC estimator <b>520</b> completes generating an estimate of the baseline pop by the end of the estimation window. Baseline pop correction is then immediately applied. This is shown in waveforms <b>650</b>, <b>670</b>, and <b>690</b>. Each of waveforms <b>650</b>, <b>670</b>, and <b>690</b> shows that the baseline pop correction begins as soon as the PADCC estimation window of waveform <b>620</b> ends.</p>
<p id="p-0045" num="0044">The remainder of the waveforms shown in <figref idref="DRAWINGS">FIG. 6</figref> illustrate when PADCC circuitry <b>510</b> terminates the baseline pop correction. In particular, the termination of the baseline pop correction is based on a stopping rule dependent on a sync mark appended to a preamble sequence. A sync mark may be any suitable end-of-signal mark indicating the end of a preamble sequence.</p>
<p id="p-0046" num="0045">Waveforms <b>640</b>, <b>660</b>, and <b>680</b> show three different points at which the baseline pop correction may be terminated. Waveform <b>640</b> shows a sync mark detected either by a sync mark detector driven by outputs of a Viterbi decoder or by a sync mark detector driven by equalized FIR samples.</p>
<p id="p-0047" num="0046">Waveform <b>660</b> shows the occurrence of a sync mark at the end of a preamble sequence. The sync mark may be detected by PADCC circuitry <b>510</b>. The falling edge of the sync mark indicates the end of the sync mark. Accordingly, as shown by waveform <b>670</b>, correction of the baseline pop terminates according to a stopping rule which is satisfied when the falling edge of the sync mark is detected.</p>
<p id="p-0048" num="0047">In some instances, the sync mark may not be detected. If the sync mark is not detected then the baseline pop correction may not terminate. To avoid this, PADCC circuitry <b>510</b> may be configured to end the baseline pop correction according to a stopping rule which is satisfied when a predetermined duration is completed. In particular, after a predetermined duration from the point at which baseline pop correction begins, a pseudo sync mark detection event occurs. Such a pseudo sync mark is shown by waveform <b>680</b>. The falling edge of the pseudo sync mark may indicate the end of the sync mark. Accordingly, as shown by waveform <b>690</b>, correction of the baseline pop terminates on the falling edge of the pseudo sync mark.</p>
<p id="p-0049" num="0048">In some implementations, there may be a latency between the detection of the sync mark and the termination of the correction of baseline pop. This may be referred to as sync mark detection (SMD) latency. A by-product of SMD latency may be that the baseline pop correction may be terminated after the point at which the sync mark actually ends. Thus, baseline pop correction may also be applied to a segment of the data portion following the preamble sequence and the sync mark. This is shown in waveforms <b>640</b> and <b>650</b>.</p>
<p id="p-0050" num="0049">It is clear from waveforms <b>650</b>, <b>670</b>, and <b>690</b>, that the baseline pop correction ends on or after the falling edge of the sync mark. Thus, the baseline pop correction is also applied to the sync mark appended to the preamble sequence. This is advantageous because it helps ensure that the sync mark is reliably detected by circuit blocks on the top datapath of <figref idref="DRAWINGS">FIG. 2</figref>.</p>
<p id="p-0051" num="0050"><figref idref="DRAWINGS">FIG. 7</figref> illustrates an exemplary process for correcting baseline pop in accordance with an arrangement. The process of <figref idref="DRAWINGS">FIG. 7</figref> begins at <b>710</b>. At <b>710</b>, the input signal received from ADC <b>210</b> of <figref idref="DRAWINGS">FIG. 2</figref> is processed on a first datapath. The samples of the received signal corresponding to a preamble sequence may be processed in a manner substantially similar to that described in connection with <figref idref="DRAWINGS">FIGS. 2 and 4</figref> above. In particular, PADCR circuitry <b>220</b> of <figref idref="DRAWINGS">FIG. 2</figref> may process the received samples to reject the DC component using a filter.</p>
<p id="p-0052" num="0051">At <b>720</b>, the samples of the preamble sequence processed on the first datapath may be used to configure acquisition parameters. Acquisition parameters, e.g., timing and/or gain parameters, may be configured in a manner substantially similar to that described in connection with <figref idref="DRAWINGS">FIGS. 2 and 4</figref> above. For example, TL and AGC circuitry <b>224</b> of <figref idref="DRAWINGS">FIG. 2</figref> may determine timing and gain parameters.</p>
<p id="p-0053" num="0052">At <b>730</b>, the input signal on a second datapath may be adjusted based on the acquisition parameters configured at <b>720</b>. For example, the timing and gain parameters determined by TL and AGC circuitry <b>224</b> of <figref idref="DRAWINGS">FIG. 2</figref> may be used to adjust the signal output by ADC <b>210</b> of <figref idref="DRAWINGS">FIG. 2</figref> for improved signal acquisition. The signal output by ADC <b>210</b> may correspond to a preamble sequence.</p>
<p id="p-0054" num="0053">At <b>740</b>, samples of a preamble sequence may be collected during a window. Samples of the preamble sequence may be collected by PADCC circuitry <b>230</b> of <figref idref="DRAWINGS">FIG. 2</figref> in a manner substantially similar to that described in connection with <figref idref="DRAWINGS">FIG. 5</figref> above. At <b>750</b>, a mean amplitude value of the samples collected during the window at <b>740</b> may be computed. The mean amplitude may be computed by PADCC circuitry <b>230</b> of <figref idref="DRAWINGS">FIG. 2</figref> in a manner substantially similar to that described in connection with <figref idref="DRAWINGS">FIG. 5</figref> above. The mean amplitude may serve as an estimate of the amount of baseline pop present in the signal read by a faulty disk drive head.</p>
<p id="p-0055" num="0054">At <b>760</b>, a determination may be made as to whether the mean amplitude computed at <b>750</b> is above or below a threshold value. The comparison may be made by PADCC circuitry <b>230</b> of <figref idref="DRAWINGS">FIG. 2</figref> in a manner substantially similar to that described in connection with <figref idref="DRAWINGS">FIG. 5</figref> above. In response to a determination that the mean amplitude is below the threshold, the process proceeds to <b>770</b> where the estimate of the baseline pop is set to zero. Otherwise, the process proceeds to <b>780</b>.</p>
<p id="p-0056" num="0055">At <b>780</b>, a correction to the signal output by ADC <b>210</b> of <figref idref="DRAWINGS">FIG. 2</figref> may be applied, i.e., the baseline pop distortion may be corrected. In particular, the estimate of baseline pop computed at <b>750</b> may be subtracted from the signal adjusted at <b>730</b>. Correction of the baseline pop may be performed in a manner substantially similar to that described in connection with <figref idref="DRAWINGS">FIGS. 5 and 6</figref> above.</p>
<p id="p-0057" num="0056">At <b>790</b>, the correction of the baseline pop may continue until a stopping rule is satisfied. The stopping rule may be based on the detection of a sync mark appended to the preamble sequence. The termination of the correction of the baseline pop in accordance with the stopping rule may be performed in a manner substantially similar to that described in connection with <figref idref="DRAWINGS">FIGS. 5 and 6</figref> above.</p>
<p id="p-0058" num="0057">The above described implementations are presented for the purposes of illustration and not of limitation. Other embodiments are possible and one or more parts of techniques described above may be performed in a different order (or concurrently) and still achieve desirable results. In addition, techniques of the disclosure may be implemented in hardware, such as on an application specific integrated circuit (ASIC) or on a field-programmable gate array (FPGA). The techniques of the disclosure may also be implemented in software.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method for acquiring an input signal distorted by baseline pop, the method comprising:
<claim-text>filtering the input signal on a first datapath to remove a DC component;</claim-text>
<claim-text>configuring acquisition parameters based on the filtered signal;</claim-text>
<claim-text>adjusting the input signal on a second datapath based on the acquisition parameters;</claim-text>
<claim-text>computing a mean of a window of data samples of the adjusted input signal; and</claim-text>
<claim-text>applying a correction, based on the mean, to the adjusted input signal until a stopping rule is satisfied.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> further comprising:
<claim-text>subtracting the mean from the adjusted input signal for the correction of the baseline pop.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> further comprising selecting data samples in the window of data samples to have an identical phase characteristic.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> further comprising:
<claim-text>comparing the computed mean to a threshold; and</claim-text>
<claim-text>using the computed mean as an estimate of the baseline pop if the computed mean is above the threshold.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the stopping rule is satisfied if a sync mark of the input signal is detected.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein the input signal on the first datapath is a preamble sequence appended by the sync mark.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the stopping rule is satisfied if a pseudo sync mark of the input signal is detected.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> further comprising adjusting a gain and a timing of the input signal on the second datapath based on the acquisition parameters.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein computing the mean further comprises averaging amplitudes of data samples in the window of data samples.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> further comprising decoding a corrected input signal on the second datapath.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. A system for acquiring an input signal distorted by baseline pop, the system comprising:
<claim-text>circuitry on a first datapath configured to:
<claim-text>filter the input signal to remove a DC component; and</claim-text>
<claim-text>configure acquisition parameters based on the filtered signal; and</claim-text>
</claim-text>
<claim-text>circuitry on a second datapath configured to:
<claim-text>adjust the input signal based on the acquisition parameters;</claim-text>
<claim-text>compute a mean of a window of data samples of the adjusted input signal; and</claim-text>
<claim-text>apply a correction, based on the mean, to the adjusted input signal until a stopping rule is satisfied.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The system of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the circuitry on the first datapath is further configured to:
<claim-text>subtract the mean from the adjusted input signal for the correction of the baseline pop.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The system of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the circuitry on the second datapath is further configured to select data samples in the window of data samples to have an identical phase characteristic.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The system of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the circuitry on the second datapath is further configured to:
<claim-text>compare the computed mean to a threshold; and</claim-text>
<claim-text>use the computed mean as an estimate of the baseline pop if the computed mean is above the threshold.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The system of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the stopping rule is satisfied if a sync mark of the input signal is detected.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The system of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the input signal on the first datapath is a preamble sequence appended by the sync mark.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The system of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the stopping rule is satisfied if a pseudo sync mark of the input signal is detected.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The system of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the circuitry on the second datapath is further configured to adjust a gain and a timing of the input signal on the second datapath based on the acquisition parameters.</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The system of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein computing the mean further comprises averaging amplitudes of data samples in the window of data samples.</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The system of <claim-ref idref="CLM-00011">claim 11</claim-ref> wherein the circuitry on the second datapath is further configured to decode a corrected input signal on the second datapath. </claim-text>
</claim>
</claims>
</us-patent-grant>
