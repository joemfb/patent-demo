<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625511-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625511</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13091689</doc-number>
<date>20110421</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>CN</country>
<doc-number>2008 1 0224607</doc-number>
<date>20081021</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>391</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20090101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>W</subclass>
<main-group>4</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>12</main-group>
<subgroup>66</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20090101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>W</subclass>
<main-group>72</main-group>
<subgroup>00</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>370329</main-classification>
<further-classification>370341</further-classification>
<further-classification>370352</further-classification>
</classification-national>
<invention-title id="d2e71">Method and communication terminal for implementing a voice service through a wireless network</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>8204029</doc-number>
<kind>B2</kind>
<name>Stephenson et al.</name>
<date>20120600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370338</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>8289941</doc-number>
<kind>B2</kind>
<name>Kezys</name>
<date>20121000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370338</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2006/0077968</doc-number>
<kind>A1</kind>
<name>Pitsoulakis et al.</name>
<date>20060400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2006/0126594</doc-number>
<kind>A1</kind>
<name>Tu</name>
<date>20060600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2007/0253405</doc-number>
<kind>A1</kind>
<name>Willis et al.</name>
<date>20071100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2007/0280200</doc-number>
<kind>A1</kind>
<name>Patel</name>
<date>20071200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2008/0102843</doc-number>
<kind>A1</kind>
<name>Todd et al.</name>
<date>20080500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455445</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2008/0261593</doc-number>
<kind>A1</kind>
<name>Wong et al.</name>
<date>20081000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>4554351</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2012/0270541</doc-number>
<kind>A1</kind>
<name>Rydnell et al.</name>
<date>20121000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>4554261</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>2013/0003703</doc-number>
<kind>A1</kind>
<name>Todd et al.</name>
<date>20130100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370331</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>CN</country>
<doc-number>101034997</doc-number>
<kind>A</kind>
<date>20070900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>WO</country>
<doc-number>WO 2007033485</doc-number>
<kind>A2</kind>
<date>20070300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00013">
<othercit>Office Action issued in corresponding Chinese Patent Application No. 200810224607.2, mailed Sep. 26, 2011.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00014">
<othercit>Office Action issued in corresponding Chinese Patent Application No. 200810224607.2, mailed Nov. 28, 2012.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00015">
<othercit>Written Opinion of the International Searching Authority issued in corresponding PCT Patent Application No. PCT/CN2009/074501, mailed Feb. 4, 2010.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00016">
<othercit>International Search Report issued in corresponding PCT Patent Application No. PCT/CN2009/074501, mailed Feb. 4, 2010.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00017">
<othercit>Extended European Search Report issued in corresponding European Patent Application No. 09821582.5, mailed May 23, 2012.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00018">
<othercit>Office Action issued in corresponding Chinese Patent Application No. 200810224607.2, mailed Apr. 16, 2012.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>10</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>None</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>7</number-of-drawing-sheets>
<number-of-figures>7</number-of-figures>
</figures>
<us-related-documents>
<continuation>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>PCT/CN2009/074501</doc-number>
<date>20091021</date>
</document-id>
<parent-status>PENDING</parent-status>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>13091689</doc-number>
</document-id>
</child-doc>
</relation>
</continuation>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20110199974</doc-number>
<kind>A1</kind>
<date>20110818</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Ye</last-name>
<first-name>Xiaoling</first-name>
<address>
<city>Shenzhen</city>
<country>CN</country>
</address>
</addressbook>
<residence>
<country>CN</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Ye</last-name>
<first-name>Xiaoling</first-name>
<address>
<city>Shenzhen</city>
<country>CN</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Brinks Gilson &#x26; Lione</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Huawei Device Co., Ltd.</orgname>
<role>03</role>
<address>
<city>Shenzhen</city>
<country>CN</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Pham</last-name>
<first-name>Chi</first-name>
<department>2471</department>
</primary-examiner>
<assistant-examiner>
<last-name>Hyun</last-name>
<first-name>Soon-Dong D</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">The present invention discloses a method and a communication terminal for implementing a voice service through a wireless network. The method includes: generating a request for a voice service according to a voice service access code and generating a trigger signal according to the request; setting up a connection with the wireless network according to the trigger signal; performing network registration for the voice service; and processing a call of the voice service through the network connection after the network registration is successful. The technical solution of the present invention overcomes the conflict between Voice over Internet Protocol (VoIP) and dial-on-demand when VoIP traffic is carried over a Packet Switched (PS) network, so that no radio bandwidth is wasted and that the user can use VoIP at any time with no need to modify the network.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="117.69mm" wi="158.67mm" file="US08625511-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="116.67mm" wi="158.50mm" file="US08625511-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="206.42mm" wi="133.60mm" file="US08625511-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="150.71mm" wi="141.56mm" file="US08625511-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="167.47mm" wi="119.13mm" file="US08625511-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="150.28mm" wi="112.01mm" file="US08625511-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="188.47mm" wi="118.36mm" file="US08625511-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="200.41mm" wi="125.31mm" file="US08625511-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This application is a continuation of International Application No. PCT/CN2009/074501, filed on Oct. 21, 2009, which claims priority to Chinese Patent Application No. 200810224607.2, filed on Oct. 21, 2008, both of which are hereby incorporated by reference in their entireties.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">FIELD OF THE INVENTION</heading>
<p id="p-0003" num="0002">The present invention relates to mobile communications, and in particular, to a method and a communication terminal for implementing voice services through a wireless network.</p>
<heading id="h-0003" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0004" num="0003">The Customer Premises Equipment (CPE), such as an Integrated Access Device (IAD) and an Analog Telephony Adapter (ATA), is relative to network-side equipment. It provides an interface for a communication terminal to communicate with a core network. In a home network, the IAD used at present accesses the core network by different means, such as Digital Subscriber Line (DSL), Asynchronous Transfer Mode (ATM), and Ethernet (ETH). The CPE faces the access network and provides the communication terminal with the functions such as the data service function and the Voice over Internet Protocol (VoIP) service function.</p>
<p id="p-0005" num="0004">With the convergence of core networks, a terminal must support access to the core network through different edge networks. The IAD therefore also supports data and VoIP services in a radio way. A fixed access network has sufficient bandwidth and is capable of providing smooth paths for connected communication terminals. For a wireless network, however, bandwidth resources are precious. Even when a communication terminal is online, if the network detects that the terminal does not produce real Internet traffic, the network will disconnect the terminal actively. Therefore, the communication terminal must support the dial-on-demand function. In the prior art, dial-on-demand in a wireless network is mature for data applications. For VoIP services, however, no mature solution is available. The terminal that provides the VoIP service must send periodical registration update messages to a server to maintain the connection with the server in the radio access network, or else the server will determine that the VoIP device is unavailable. When originating a VoIP call, the communication terminal sets up a Packet Switched (PS) connection temporarily and initiates a re-registration process.</p>
<p id="p-0006" num="0005">During the implementation of the present invention, the inventor finds at least the following problems in the prior art: (1) Because the setup of a radio bearer connection takes time, the call of the communication terminal may fail. (2) To guarantee success of the VoIP service, it is necessary to set up a connection with a wireless bearer via a data service, that is a network data domain, and then originate the call. This is too inconvenient for the communication terminal. Moreover, in the case of emergency calls, a user has no time to set up a wireless network connection, and therefore emergency calls are affected. (3) After the connection is disconnected due to dial-on-demand, the communication terminal fails to receive new calls. Because of such problems, in the operation of some wireless networks, dial-on-demand is always disabled when the VoIP service is enabled.</p>
<heading id="h-0004" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0007" num="0006">Embodiments of the present invention provide a method and a communication terminal for implementing a voice service through a wireless network, so as to resolve the problem of the voice service inability caused by the dial-on-demand function on the communication terminal.</p>
<p id="p-0008" num="0007">A method for implementing a voice service through a wireless network includes:</p>
<p id="p-0009" num="0008">generating a request for a voice service according to an operation on a communication terminal and generating a trigger signal according to the request;</p>
<p id="p-0010" num="0009">setting up a connection with a wireless network according to the trigger signal;</p>
<p id="p-0011" num="0010">performing network registration for the voice service; and</p>
<p id="p-0012" num="0011">processing a call of the voice service through the network connection after the network registration is successful.</p>
<p id="p-0013" num="0012">A communication terminal for implementing a voice service through a wireless network includes:</p>
<p id="p-0014" num="0013">a Plain Old Telephone Service (POTS) unit, configured to generate a request for a voice service according to an operation on the communication terminal;</p>
<p id="p-0015" num="0014">a triggering logic unit, configured to generate a trigger signal according to the request;</p>
<p id="p-0016" num="0015">a dial-on-demand unit, configured to set up a connection with the wireless network according to the trigger signal; and</p>
<p id="p-0017" num="0016">a voice service unit, configured to request network registration and process a call of a voice service through the network connection after the network registration is successful.</p>
<p id="p-0018" num="0017">The embodiments of the present invention provide the following benefit: the technical solution provided in the embodiments of the present invention overcomes the conflict between a VoIP service and dial-on-demand when VoIP traffic is carried over a PS network, so that no radio bandwidth is wasted and that the user can use the VoIP service at any time with no need to modify the network.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 1</figref> illustrates an internal structure of a communication terminal in an embodiment of the present invention;</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 2</figref> illustrates a procedure of a method in an embodiment of the present invention;</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 3</figref> illustrates a structure of a server in an embodiment of the present invention;</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 4</figref> illustrates a procedure of a method on a communication terminal side in an embodiment of the present invention;</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 5</figref> illustrates a procedure of call transfer after dial-on-demand is enabled in an embodiment of the present invention;</p>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 6</figref> illustrates a first implementation of VoIP on the communication terminal side in an embodiment of the present invention; and</p>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. 7</figref> illustrates a second implementation of VoIP on the communication terminal side in an embodiment of the present invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0006" level="1">DETAILED DESCRIPTION OF THE EMBODIMENTS</heading>
<p id="p-0026" num="0025">To better explain the purpose, technical features, and benefits of the present invention, the technical solution of the present invention is described in detail with reference to the accompanying drawings and exemplary embodiments. The embodiments of the present invention provide a solution to resolve the conflict between the VoIP service and dial-on-demand functions of the CPE (IAD) and to compromise between the bandwidth requirement of the radio access network and the need of communication terminals to use VoIP.</p>
<p id="p-0027" num="0026">A POTS phone triggering method is adopted. When the communication terminal requests a VoIP service, a POTS phone triggers the IAD to set up a connection to the PS network before a VoIP call is originated. The POTS unit is the communication interface for the POTS phone to implement the VoIP service through the PS network. The POTS phone is the fixed phone in daily use. The VoIP service is a bearer mode of voice services. Because the packets of VoIP are transferred over the PS network, the VoIP service is a voice service based on IP transport.</p>
<p id="p-0028" num="0027">As shown in <figref idref="DRAWINGS">FIG. 1</figref>, based on the existing IAD service module, the IAD further includes a triggering logic unit <b>102</b>, configured to judge whether the trigger condition of a dialing-one-demand unit <b>103</b> is met and provide the dial-on-demand unit <b>103</b> with a decision on whether to disconnect a network connection, and further configured to trigger the dial-on-demand unit <b>103</b> to start the wireless network connection. In the IAD service module to which the triggering logic unit <b>102</b> is added, a voice service unit <b>101</b> is connected to and communicates with a POTS unit <b>104</b>; the voice service unit <b>101</b> is also connected to and sends a request to the triggering logic unit <b>102</b>; the triggering logic unit <b>102</b> communicates with the voice service unit <b>101</b> and the POTS unit <b>104</b> each to receive a request and a signal, and also communicates with the dial-on-demand unit <b>103</b> to send an instruction. Specifically:</p>
<p id="p-0029" num="0028">The voice service unit <b>101</b> is configured to request network registration; and configured to process a specific voice service. That is, the voice service unit is configured to process the information data generated due to events that are forwarded by the POTS unit <b>104</b> and are from users/POTS phones and to control the entire call process, in which the entire call process includes origination, connection, and teardown of the call.</p>
<p id="p-0030" num="0029">This includes encapsulating or decapsulating digital voice data, determining the IP address of the associated gateway according to information in an area code database, adding the IP address to IP packets, and selecting an optimal route. The voice service unit <b>101</b> compresses voice data codes with a compression algorithm, packetizes the data according to the Transmission Control Protocol/Internet Protocol (TCP/IP) standard and delivers data packets to their destination through the core network. Or, after receiving data packets, the voice service unit <b>101</b> strings the data packets together and decompresses them to restore an original voice signal. Further, the voice service unit <b>101</b> maps an area code to the IP address of a gateway in the area and stores the IP address in a database. When the communication terminal originates a call, the gateway determines the IP address of the associated gateway according to the information in the area code database, adds the IP address to IP packets, and selects an optimal route to reduce the transmission delay. The IP packets are delivered to the destination gateway through the Internet. In areas where the Internet is not available or a gateway is not configured, a router can be installed and the nearest gateway switches a call through the toll telephone network to implement communication services.</p>
<p id="p-0031" num="0030">The triggering logic unit <b>102</b> is configured to generate a trigger signal according to a request or a signal from the voice service unit <b>101</b> or/and the POTS unit <b>104</b> and send the trigger signal to the dial-on-demand unit <b>103</b>.</p>
<p id="p-0032" num="0031">The dial-on-demand unit <b>103</b> is configured to dial according to the detected trigger signal from the triggering logic unit <b>102</b>.</p>
<p id="p-0033" num="0032">The POTS unit <b>104</b> is a necessary interface between the network and the POTS phones. It is configured to send events triggered by the user/POTS phone, for example, signals generated by off-hook, dialing, hookflash, on-hook, and sounds, to the voice service unit <b>101</b>, and send events of the voice service unit <b>101</b>, for example, tone playing and sound signals, to the user/POTS phone.</p>
<p id="p-0034" num="0033">The POTS unit <b>104</b> may include:</p>
<p id="p-0035" num="0034">a terminal call transferring unit <b>107</b>, configured to send a call transfer operation code after the network connection is set up, where the call transfer operation code is used to request the transfer of a call of the voice service to a Public Switched Telephone Network (PSTN) number or telecommunications network number (a number in the CS domain, in which CS is short for Circuit Switched) of the communication terminal.</p>
<p id="p-0036" num="0035">The POTS unit <b>104</b> may further include:</p>
<p id="p-0037" num="0036">a terminal call transfer canceling unit <b>108</b>, configured to send a call transfer cancellation operation code to the server after the call of the voice service is transferred.</p>
<p id="p-0038" num="0037">With the communication terminal (that is, CPE) provided according to the above embodiment of the present invention, when the terminal implements the VoIP service through the PS network, the conflict with dial-on-demand is overcome, so that no radio bandwidth is wasted and that the VoIP service can be used at any time.</p>
<p id="p-0039" num="0038">Corresponding to the communication terminal, a server according to an embodiment of the present invention is illustrated in <figref idref="DRAWINGS">FIG. 3</figref>. The server is located in a public network and includes:</p>
<p id="p-0040" num="0039">a network connecting unit <b>109</b>, configured to set up a wireless network connection with the communication terminal; and particularly, set up a network connection at the bearer layer;</p>
<p id="p-0041" num="0040">a voice service registering unit <b>110</b>, configured to receive a request for network registration from the communication terminal, complete the network registration, and receive a voice service call; and</p>
<p id="p-0042" num="0041">a call transferring unit <b>105</b>, configured to transfer an incoming voice service call to a PSTN number, or a CS number, or other numbers of the current communication terminal after the bearer layer network connection is set up between the communication terminal and the wireless network. Specifically, a user inputs the call transfer operation code through the POTS unit <b>104</b>, and the call transferring unit <b>105</b> identifies the call transfer operation code from the POTS unit <b>104</b> and sends the operation code, if it is determined that the call transfer operation code is correct, to the voice service unit <b>101</b>. The voice service unit <b>101</b> sends a call transfer request to the network-side server. The network-side server processes the request and the call transfer is complete. Call transfer includes the following types:</p>
<p id="p-0043" num="0042">1. If the communication terminal supports PSTN lines, the call is transferred to a PSTN number supported by the IAD.</p>
<p id="p-0044" num="0043">2. The call is transferred to a CS number of the IAD, that is, a telecommunications network number.</p>
<p id="p-0045" num="0044">3. The call is transferred to other numbers. For example, when &#x201c;**51*22334455#&#x201d; is inputted to the terminal call transferring unit <b>107</b> of the POTS unit <b>104</b> to set call transfer, the home gateway terminal routes the call of the POTS phone under the gateway to the network-side server and the network-side server processes the call transfer. Afterwards, the network-side server transfers a call to the home gateway from the outside to the number 22334455, instead of routing the call to the home gateway terminal.</p>
<p id="p-0046" num="0045">The network-side server further includes:</p>
<p id="p-0047" num="0046">a call transfer canceling unit <b>106</b>, configured to cancel the call transfer service of the communication terminal if receiving a call transfer cancellation operation code from the communication terminal after the network registration is successful and the incoming call is transferred. Specifically, the user inputs the call transfer cancellation operation code to the terminal call transfer canceling unit <b>108</b> of the POTS unit <b>104</b>; the communication terminal sends the operation code to the network-side server; the network-side server identifies the call transfer cancellation operation code from the POTS unit <b>104</b> and processes the cancellation of the call transfer service if it is determined that the operation code is correct.</p>
<p id="p-0048" num="0047">The network-side server cooperates with the communication terminal and sets up a wireless network connection with the communication terminal to implement the VoIP service. After receiving a call transfer operation code, the network-side server transfers a call destined for the communication terminal to other networks, and after receiving a call transfer cancellation operation code from the communication terminal, the network-side server cancels the call transfer service of the communication terminal.</p>
<p id="p-0049" num="0048">To further disclose the technical solution of the present invention, a complete service procedure is described. When a user requires a VoIP service, the user performs an appropriate operation on the communication terminal. The operation generates a service access code and the service access code generates a request. As shown in <figref idref="DRAWINGS">FIG. 4</figref>, the procedure includes:</p>
<p id="p-0050" num="0049">Step A: The communication terminal generates a trigger signal according to the request for a voice service.</p>
<p id="p-0051" num="0050">Step B: The communication terminal sets up a network connection with the wireless network according to the trigger signal.</p>
<p id="p-0052" num="0051">Step C: The communication terminal performs network registration for the voice service.</p>
<p id="p-0053" num="0052">Step D: The communication terminal originates a call of the voice service through the network connection after the network registration is successful.</p>
<p id="p-0054" num="0053">Through the above steps, the communication terminal is connected to the network. Through the network connection, the user can use the VoIP service normally. Furthermore, because the request is generated by using the following method provided by the embodiment of the present invention, the conflict between the VoIP service and dial-on-demand is overcome, so that no radio bandwidth is wasted and that the user can use VoIP at any time with no need to modify the network. Specifically:</p>
<p id="p-0055" num="0054">When there is no data service on the IAD and dial-on-demand is enabled, the IAD is disconnected from the PS network.</p>
<p id="p-0056" num="0055">Step <b>201</b>: The user inputs a specific service access code, for example, *67*, through the communication terminal. The voice service unit <b>101</b> of the communication terminal is triggered to send the service access code.</p>
<p id="p-0057" num="0056">Step <b>202</b>: The triggering logic unit <b>102</b> receives the service access code, determines that the communication terminal requires the VoIP service according to the service access code, and generates and sends a trigger signal immediately.</p>
<p id="p-0058" num="0057">Step <b>203</b>: The dial-on-demand unit <b>103</b> receives the trigger signal and sets up a connection with the PS network.</p>
<p id="p-0059" num="0058">After the connection with the PS network is successfully set up, the dial-on-demand unit <b>103</b> notifies the voice service unit to perform network registration.</p>
<p id="p-0060" num="0059">Step <b>204</b>: If the communication terminal is not hooked on, after the network registration is successful, the communication terminal is notified that the VoIP service is ready and a dial tone is played to the communication terminal.</p>
<p id="p-0061" num="0060">Steps <b>201</b> to <b>204</b> describe the process of setting up a connection with the PS network according to the need of dial-on-demand.</p>
<p id="p-0062" num="0061">Step <b>205</b>: After the network connection is set up, the dial-on-demand unit <b>103</b> queries the triggering logic unit <b>102</b> about whether an active voice service exists. If an active service exists, the dial-on-demand unit <b>103</b> queries again at a predetermined interval; if no active service exists, the procedure goes to step <b>206</b>.</p>
<p id="p-0063" num="0062">The query step is included because it is possible that the communication terminal is in a conversation but the user has left.</p>
<p id="p-0064" num="0063">Step <b>206</b>: When there is no voice call, the communication terminal decides to end the use of the VoIP service; and if there is no data service within a period of time, the dial-on-demand function is enabled.</p>
<p id="p-0065" num="0064">The above steps describe the process of triggering dial-on-demand and the process of enabling dial-on-demand automatically in detail. The conflict between the VoIP service and dial-on-demand is overcome, so that no radio bandwidth is wasted and that the user can use the VoIP service at any time with no need to modify the wireless network.</p>
<p id="p-0066" num="0065">In practice, if the communication terminal enables dial-on-demand, the service logic for receiving a call must be improved, as shown in <figref idref="DRAWINGS">FIG. 5</figref>.</p>
<p id="p-0067" num="0066">After dial-on-demand is enabled, because the communication terminal is disconnected from the PS network, VoIP signaling cannot be sent to the IAD. The IAD may support the following steps:</p>
<p id="p-0068" num="0067">Step <b>301</b>: The communication terminal presets the transfer of a VoIP call to other numbers when dial-on-demand is enabled through the network service located in the communication terminal. The communication terminal has the following options for call transfer:</p>
<p id="p-0069" num="0068">1. If the communication terminal supports PSTN lines, the call is transferred to a PSTN number supported by the IAD.</p>
<p id="p-0070" num="0069">2. The call is transferred to a CS number of the IAD, that is, a telecommunications network number.</p>
<p id="p-0071" num="0070">3. The call is transferred to other numbers.</p>
<p id="p-0072" num="0071">The call transfer service requires support of the network-side server and the communication terminal must have activated the service.</p>
<p id="p-0073" num="0072">Step <b>302</b>: With dial-on-demand enabled, before the IAD is disconnected from the network, the IAD transfers a VoIP call according to the above setting and sends a call transfer operation code to the network.</p>
<p id="p-0074" num="0073">Step <b>303</b>: When VoIP service registration is successful, the IAD can cancel the call transfer service according to the configured option and send a call transfer cancellation operation code to the network.</p>
<p id="p-0075" num="0074">Steps <b>201</b> to <b>206</b> correspond to steps <b>301</b> to <b>303</b>. In the IAD service module provided in the embodiment of the present invention, the POTS unit <b>104</b> receives the specific service access code, for example, *67*, and sends the service access code to the triggering logic unit <b>102</b>; the triggering logic unit <b>102</b> receives the service access code, determines that the communication terminal requires the VoIP service according to the service access code, and sends a trigger signal to the dial-on-demand unit <b>103</b> immediately; the dial-on-demand unit <b>103</b> receives the trigger signal and sets up a connection with the PS network; after the PS network is connected successfully, the dial-on-demand unit <b>103</b> notifies the voice service unit <b>101</b> to perform network registration.</p>
<p id="p-0076" num="0075">After the network connection is set up, if it is necessary to enable dial-on-demand, the dial-on-demand unit <b>103</b> queries the triggering logic unit <b>102</b> about whether an active voice service exists and if there is no active voice service, enables the dial-on-demand function.</p>
<p id="p-0077" num="0076">With the technical solution in steps <b>301</b> to <b>303</b>, the call transfer service function of the communication terminal is implemented.</p>
<p id="p-0078" num="0077">When the communication terminal sets up a connection with the PS network according to the need of dial-on-demand, the implementation is not limited to that described in steps <b>201</b> to <b>204</b>. Other embodiments of the present invention provide the following procedures.</p>
<p id="p-0079" num="0078">When there is no data service on the IAD and dial-on-demand is enabled, the IAD is disconnected from the PS network. As shown in <figref idref="DRAWINGS">FIG. 6</figref>, a procedure for setting up a connection with the PS network includes:</p>
<p id="p-0080" num="0079">Step <b>401</b>: The communication terminal is in use and hooked off for dialing. The POTS unit <b>104</b> is triggered to generate and send an off-hook instruction.</p>
<p id="p-0081" num="0080">Step <b>402</b>: The triggering logic unit <b>102</b> receives the off-hook instruction, determines that the communication terminal requires VoIP according to the instruction, and sends a trigger signal immediately.</p>
<p id="p-0082" num="0081">Step <b>403</b>: The dial-on-demand unit <b>103</b> receives the trigger signal and sets up a connection with the PS network.</p>
<p id="p-0083" num="0082">After the connection with the PS network is successfully set up, the dial-on-demand unit <b>103</b> notifies the voice service unit <b>101</b> to perform network registration.</p>
<p id="p-0084" num="0083">Step <b>404</b>: If the communication terminal is not hooked on, after the network registration is successful, the communication terminal is notified that the VoIP service is ready and a dial tone is played to the communication terminal.</p>
<p id="p-0085" num="0084">Steps <b>401</b> to <b>404</b> describe a process where the communication terminal sets up a connection with the PS network according to an off-hook action, therefore providing an alternative solution for VoIP implementation. The solution overcomes the conflict between VoIP and dial-on-demand, so that no radio bandwidth is wasted and that the user can use VoIP at any time.</p>
<p id="p-0086" num="0085">When there is no data service on the IAD and dial-on-demand is enabled, the IAD is disconnected from the PS network. As shown in <figref idref="DRAWINGS">FIG. 7</figref>, a procedure for setting up a connection with the PS network includes:</p>
<p id="p-0087" num="0086">Step <b>501</b>: The communication terminal is in use and hooked off and dialing of digits is ongoing. The POTS unit <b>104</b> is triggered to generate and send an off-hook instruction.</p>
<p id="p-0088" num="0087">Step <b>502</b>: The triggering logic unit <b>102</b> receives the dialed digits, analyzes the digits, and determines that the communication terminal requires VoIP according to the digits, and sends a trigger signal immediately.</p>
<p id="p-0089" num="0088">Step <b>503</b>: The dial-on-demand unit <b>103</b> receives the trigger signal and sets up a connection with the PS network.</p>
<p id="p-0090" num="0089">After the connection with the PS network is successfully set up, the dial-on-demand unit <b>103</b> notifies the voice service unit <b>101</b> to perform network registration.</p>
<p id="p-0091" num="0090">Step <b>504</b>: If the communication terminal is not hooked on, after the network registration is successful, a Session Initiation Protocol (SIP) call is originated to the network.</p>
<p id="p-0092" num="0091">If the network access and registration process exceeds a specific length of time, a voice announcement or a music prompt may be played to the communication terminal, for example, &#x201c;Connecting to the network. Please wait&#x201d;, &#x201c;Registering with the server. Please wait.&#x201d;, or &#x201c;The call is being connected. Please wait&#x201d;. Or, the communication terminal is notified that the VoIP service is ready and a dial tone is played to the communication terminal.</p>
<p id="p-0093" num="0092">Steps <b>501</b> to <b>504</b> describe a process where the communication terminal sets up a connection with the PS network according to an off-hook and dialing action, therefore providing an alternative solution for VoIP implementation. The solution overcomes the conflict between the VoIP service and dial-on-demand, so that no radio bandwidth is wasted and that the user can use the VoIP service at any time.</p>
<p id="p-0094" num="0093">With the technical solution provided in the embodiments of present invention, when the communication terminal is disconnected from the PS network, the IAD can be connected with the PS network through POTS phone triggering, Foreign Exchange Station (FXS) off-hook triggering, or dialing triggering. Furthermore, after dial-on-demand is enabled, before the communication terminal is disconnected from the PS network, call transfer is set to ensure that an incoming VoIP call is received. In addition, after successful VoIP service registration, if a VoIP call is transferred and call transfer needs to be cancelled, the IAD sends a call transfer cancellation operation code to the network. The technical solution overcomes the conflict between VoIP and dial-on-demand when the VoIP service is carried over a PS network, so that no radio bandwidth is wasted and that the user can use VoIP at any time.</p>
<p id="p-0095" num="0094">Those skilled in the art understand that the foregoing embodiments of the present invention can be implemented by hardware or by software on a necessary universal hardware platform. The technical solution of the present invention may be embodied in a software product which can be stored in a nonvolatile storage medium. The storage medium may be a Compact Disk Read-Only Memory (CD-ROM), a USB flash disk, or a removable hard drive. The software product includes a number of instructions that enable a computer device (such as a personal computer, a server, or a network device), to execute the method provided in the embodiments of the present invention.</p>
<p id="p-0096" num="0095">Although the present invention has been described through exemplary embodiments, the invention is not limited to such embodiments. It is apparent that those skilled in the art can make various modifications and variations to the invention without departing from the spirit and scope of the present invention. The invention is intended to cover the modifications and variations provided that they fall within the scope of protection defined by the claims or their equivalents.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method for a communication terminal implementing a voice service through a wireless network, wherein the communication terminal has a dial-on-demand function; the method comprising:
<claim-text>determining that dial-on-demand is enabled and the communication terminal is disconnected with the wireless network;</claim-text>
<claim-text>acquiring an operation on the communication terminal;</claim-text>
<claim-text>generating a request for a voice service according to the operation on the communication terminal and generating a trigger signal according to the request;</claim-text>
<claim-text>setting up a network connection with the wireless network according to the trigger signal;</claim-text>
<claim-text>performing network registration for the voice service; and</claim-text>
<claim-text>processing a call of the voice service through the network connection after the network registration is successful.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the generating the request for a voice service according to the operation on the communication terminal comprises:
<claim-text>generating the request according to a service access code.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the generating the request for a voice service according to the operation on the communication terminal comprises:
<claim-text>generating the request according to a signal of the operation on the communication terminal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the generating the request for a voice service according to the operation on the communication terminal comprises:
<claim-text>generating the request according to digits dialed from the communication terminal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein after the setting up the network connection with the wireless network, the method further comprises:
<claim-text>requesting a transfer of an incoming call of a voice service to a Public Switched Telephone Network (PSTN) number of the communication terminal or a telecommunications network number of the communication terminal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00005">claim 5</claim-ref>, after the transfer of the incoming call of the voice service to the PSTN number the communication terminal or the telecommunications network number of the communication terminal, the method further comprising:
<claim-text>requesting a server to cancel the transfer of the incoming call of the voice service transfer.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein after the processing a call of the voice service through the network connection, the method further comprises:
<claim-text>when it is determined that there is no data service within a period of time, enabling the dial-on-demand function.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. A communication terminal for implementing a voice service through a wireless network, wherein the communication terminal has a dial-on-demand function;
<claim-text>the communication terminal comprising:</claim-text>
<claim-text>a determining unit, configured to determine that the dial-on-demand is enabled and the communication terminal is disconnected with the wireless network;</claim-text>
<claim-text>an acquiring unit, configured to acquire an operation on the communication terminal;</claim-text>
<claim-text>a Plain Old Telephone Service (POTS) unit, configured to generate a request for a voice service according to the operation on the communication terminal;</claim-text>
<claim-text>a triggering logic unit, configured to generate a trigger signal according to the request;</claim-text>
<claim-text>a dial-on-demand unit, configured to set up a network connection with the wireless network according to the trigger signal; and</claim-text>
<claim-text>a voice service unit, configured to request network registration and process a call of the voice service through the network connection after the network registration is successful.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The communication terminal of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the POTS unit comprises:
<claim-text>a terminal call transferring unit, configured to send a call transfer operation code after the network connection is set up, wherein the call transfer operation code is used to request the transfer of an incoming call of a voice service to a Public Switched Telephone Network (PSTN) number of the communication terminal or a telecommunications network number of the communication terminal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The communication terminal of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the POTS unit further comprises:
<claim-text>a terminal call transfer canceling unit, configured to send a call transfer cancellation operation code to a server after the incoming call of the voice service is transferred. </claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
