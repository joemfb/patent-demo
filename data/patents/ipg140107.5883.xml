<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08626992-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08626992</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13237769</doc-number>
<date>20110920</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2010-267545</doc-number>
<date>20101130</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>25</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>12</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>711103</main-classification>
<further-classification>711E12008</further-classification>
</classification-national>
<invention-title id="d2e71">Storage device with identification information</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6446177</doc-number>
<kind>B1</kind>
<name>Tanaka et al.</name>
<date>20020900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>711163</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>RE42398</doc-number>
<kind>E</kind>
<name>Tanaka et al.</name>
<date>20110500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>711163</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>7978516</doc-number>
<kind>B2</kind>
<name>Olbrich et al.</name>
<date>20110700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>36518511</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>8001350</doc-number>
<kind>B2</kind>
<name>Hiroyoshi</name>
<date>20110800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2008/0263305</doc-number>
<kind>A1</kind>
<name>Shu et al.</name>
<date>20081000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2010/0115183</doc-number>
<kind>A1</kind>
<name>Araki et al.</name>
<date>20100500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>711103</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2011/0078363</doc-number>
<kind>A1</kind>
<name>Yeh et al.</name>
<date>20110300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>711103</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>JP</country>
<doc-number>2002-073424</doc-number>
<date>20020300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>JP</country>
<doc-number>2009-175992</doc-number>
<kind>A</kind>
<date>20090800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>JP</country>
<doc-number>2009-217603</doc-number>
<date>20090900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>JP</country>
<doc-number>2009-245163</doc-number>
<kind>A</kind>
<date>20091000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>JP</country>
<doc-number>2010-086601</doc-number>
<date>20100400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>JP</country>
<doc-number>2010-525453</doc-number>
<date>20100700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00014">
<othercit>Office Action for Japanese Patent Application No. 2010-267545 dated Apr. 9, 2013.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>12</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>711103</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>711E12008</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>8</number-of-drawing-sheets>
<number-of-figures>8</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20120137052</doc-number>
<kind>A1</kind>
<date>20120531</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Ono</last-name>
<first-name>Chihiro</first-name>
<address>
<city>Kanagawa</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Komaki</last-name>
<first-name>Shigeru</first-name>
<address>
<city>Kanagawa</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Ono</last-name>
<first-name>Chihiro</first-name>
<address>
<city>Kanagawa</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Komaki</last-name>
<first-name>Shigeru</first-name>
<address>
<city>Kanagawa</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Patterson &#x26; Sheridan, LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Kabushiki Kaisha Toshiba</orgname>
<role>03</role>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Chery</last-name>
<first-name>Mardochee</first-name>
<department>2188</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">According to one embodiment, a storage device includes identification information storage module, location information storage module, determination module, and control module. The identification information storage module stores identification information identifying nonvolatile memories. The location information storage module stores location information identifying bad area in the nonvolatile memories. The determination module determines whether each of pieces of identification information stored in each of the nonvolatile memories matches with any one of the pieces of identification information stored in the identification information storage module. The control module controls one of the nonvolatile memories to prevent one of the pieces of location information from being used, and to prevent access from the host, when the determination module determines that the one of the pieces of identification information of the one of the nonvolatile memories does not match with any one of the pieces of identification information stored in the identification information storage module.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="150.79mm" wi="195.83mm" file="US08626992-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="211.16mm" wi="164.25mm" orientation="landscape" file="US08626992-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="238.42mm" wi="99.82mm" orientation="landscape" file="US08626992-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="241.22mm" wi="181.69mm" file="US08626992-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="219.54mm" wi="170.18mm" orientation="landscape" file="US08626992-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="92.46mm" wi="154.77mm" file="US08626992-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="209.38mm" wi="181.02mm" file="US08626992-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="214.97mm" wi="177.55mm" orientation="landscape" file="US08626992-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="153.75mm" wi="173.31mm" file="US08626992-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This application is based upon and claims the benefit of priority from Japanese Patent Application No. 2010-267545, filed Nov. 30, 2010, the entire contents of which are incorporated herein by reference.</p>
<heading id="h-0002" level="1">FIELD</heading>
<p id="p-0003" num="0002">Embodiments described herein relate generally to a storage device and a control method.</p>
<heading id="h-0003" level="1">BACKGROUND</heading>
<p id="p-0004" num="0003">As for a storage location for data of an information processing device, a solid state drive (SSD) with a nonvolatile semiconductor memory such as a NAND-type flash memory mounted thereon has been attracting attention.</p>
<p id="p-0005" num="0004">In the SSD, a plurality of flash memory chips are mounted as a storage location for data. Such a flash memory chip may generate a block (hereinafter, referred to as a &#x201c;bad block&#x201d;) that cannot be used as a memory area because of a lot of errors or the like.</p>
<p id="p-0006" num="0005">Therefore, a technology for managing bad blocks, and controlling writing of data depending on the bad blocks has been developed for the SSD.</p>
<p id="p-0007" num="0006">In the SSD, a flash memory chip or a flash memory board is replaced, removed, and so on as necessary. In the conventional technology, when a flash memory chip or a flash memory board mounted on the SSD is replaced, removed, and so on, it is difficult to perform a processing appropriate for a certain situation for example because inconsistency occurs in managed location information of bad blocks.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE SEVERAL VIEWS OF THE DRAWINGS</heading>
<p id="p-0008" num="0007">A general architecture that implements the various features of the invention will now be described with reference to the drawings. The drawings and the associated descriptions are provided to illustrate embodiments of the invention and not to limit the scope of the invention.</p>
<p id="p-0009" num="0008"><figref idref="DRAWINGS">FIG. 1</figref> is an exemplary block diagram of a configuration of an SSD device according to a first embodiment;</p>
<p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. 2</figref> is an exemplary view of a configuration of a serial flash memory in the first embodiment;</p>
<p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. 3</figref> is an exemplary flowchart of retrieval processing of bad blocks in the SSD device in the first embodiment;</p>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 4</figref> is an exemplary block diagram of a configuration of an SSD device according to a second embodiment;</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 5</figref> is an exemplary view of a hardware configuration of a PC used as an information processing device in the second embodiment;</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 6</figref> is an exemplary flowchart of an initial operation when the power is applied in the SSD device in the second embodiment;</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 7</figref> is an exemplary block diagram of a configuration of an SSD device according to a third embodiment; and</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 8</figref> is an exemplary flowchart of an initial operation when the power is applied in the SSD device in the third embodiment.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0017" num="0016">In general, according to one embodiment of the invention, a storage device, comprises an identification information storage module, a location information storage module, a determination module, and a control module. The identification information storage module is configured to store therein a plurality of pieces of identification information that identify a plurality of nonvolatile memories, respectively, the nonvolatile memories being to be accessed from a host. The location information storage module is configured to store therein pieces of location information identifying a bad area in one of the nonvolatile memories. The determination module is configured to determine whether each of pieces of identification information stored in each of the nonvolatile memories connected thereto matches with any one of the pieces of identification information stored in the identification information storage module. The control module is configured to control one of the nonvolatile memories identified by one of the pieces of the identification information to prevent one of the pieces of location information stored in the location information storage module from being used, and to prevent access from the host, when the determination module determines that the one of the pieces of identification information of the one of the nonvolatile memories does not match with any one of the pieces of identification information stored in the identification information storage module.</p>
<p id="p-0018" num="0017">An exemplary embodiment is described below with reference to the accompanying drawings.</p>
<p id="p-0019" num="0018">An example in which a storage device and a control method according to the embodiment are applied to a solid state drive (SSD) device connected to a personal computer serving as a host device will be described below.</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram of a configuration of an SSD device <b>100</b> according to the embodiment.</p>
<p id="p-0021" num="0020">As illustrated in <figref idref="DRAWINGS">FIG. 1</figref>, the SSD device (storage device) <b>100</b> functions as a memory of an information processing device such as a personal computer, and comprises an SSD controller <b>101</b>, a serial flash memory <b>102</b>, a data buffer memory <b>103</b>, a first flash memory chip <b>121</b>, a second flash memory chip <b>122</b>, a third flash memory chip <b>123</b>, and a fourth flash memory chip <b>124</b>.</p>
<p id="p-0022" num="0021">The SSD device <b>100</b> according to the embodiment is an example in which four flash memory chips are mounted. However, as for the number of flash memory chips, the SSD device <b>100</b> may have various configurations. Thus, it is not limited to the configuration of the embodiment, but general concept of the embodiment is applicable to any configurations.</p>
<p id="p-0023" num="0022">The first flash memory chip <b>121</b>, the second flash memory chip <b>122</b>, the third flash memory chip <b>123</b>, and the fourth flash memory chip <b>124</b> are NAND-type nonvolatile memories that can continue to retain memory contents such as data even if the power supply is cut off. The first flash memory chip <b>121</b> to the fourth flash memory chip <b>124</b> are to be accessed from the host, and data is read therefrom or written thereto in accordance with a request from the host.</p>
<p id="p-0024" num="0023">The first flash memory chip <b>121</b>, the second flash memory chip <b>122</b>, the third flash memory chip <b>123</b>, and the fourth flash memory chip <b>124</b> are divided into areas in block units. In this embodiment, one block is composed of 16 sectors. However, the block configuration is not limited thereto. In the first flash memory chip <b>121</b> to the fourth flash memory chip <b>124</b>, deletion and writing of data are performed in the block units. A block number is assigned to each block. The block number is used as location information of a block when the block is accessed, and so on.</p>
<p id="p-0025" num="0024">The first flash memory chip <b>121</b>, the second flash memory chip <b>122</b>, the third flash memory chip <b>123</b>, and the fourth flash memory chip <b>124</b> identify and manage a bad area that cannot be accessed by writing, reading, or the like in the block units. Hereinafter, the block that becomes the bad area will be referred to as a &#x201c;bad block&#x201d;. In the embodiment, the bad area is managed in the block units as an example. However, it is not limited to be managed in the block units, and may be managed in other units.</p>
<p id="p-0026" num="0025">The first flash memory chip <b>121</b>, the second flash memory chip <b>122</b>, the third flash memory chip <b>123</b>, and the fourth flash memory chip <b>124</b> are inspected before shipment or during failure diagnosis or the like of the SSD device <b>100</b>. In the inspection, a flash memory chip that does not satisfy a required standard is replaced. After the flash memory chip is replaced, the inspection is conducted on the flash memory chips again. Conventionally, for the SSD device in which replacement is completed, all of the flash memory chips or flash memory boards are inspected so as to retrieve bad blocks. However, if the retrieval is performed on all of the blocks in all of the flash memory chips or the flash memory boards, it requires a considerable time. Therefore, in the embodiment, the retrieval is performed only on the replaced flash memory chip, thereby reducing the retrieval time.</p>
<p id="p-0027" num="0026">At first, in the manufacturing process of the SSD device <b>100</b> according to the embodiment, a memory ID is stored in a specified area in each of the flash memory chips in advance. For example, the first flash memory chip <b>121</b> stores therein a memory ID <b>131</b>, the second flash memory chip <b>122</b> stores therein a memory ID <b>132</b>, the third flash memory chip <b>123</b> stores therein a memory ID <b>133</b>, and the fourth flash memory chip <b>124</b> stores therein a memory ID <b>134</b>.</p>
<p id="p-0028" num="0027">Each of the memory IDs <b>131</b> to <b>134</b> is an ID assigned uniquely to the corresponding flash memory chip to be manufactured. Each of the memory IDs <b>131</b> to <b>134</b> of the corresponding flash memory chip is data of about several bytes to tens of bytes, and is a value unique to the corresponding flash memory chip. Therefore, there are no flash memory chips having an identical memory ID. In the embodiment, unique serial numbers of 16 bytes are assigned to the memory IDs <b>131</b> to <b>134</b>.</p>
<p id="p-0029" num="0028">Therefore, in the case where a flash memory chip is replaced, if the flash memory chip is accessed, the memory ID that can be referred to from the SSD controller <b>101</b> is changed.</p>
<p id="p-0030" num="0029">The data buffer memory <b>103</b> functions as a data transfer cache between the first flash memory chip <b>121</b> to the fourth flash memory chip <b>124</b>, and as a work area memory for a central processing unit (CPU) <b>111</b>. For example, the data buffer memory <b>103</b> is a volatile memory that temporarily stores therein data received from the host device, which is not illustrated, to be written to the first flash memory chip <b>121</b> to the fourth flash memory chip <b>124</b>, and data read from the first flash memory chip <b>121</b> to the fourth flash memory chip <b>124</b> to be transferred to the host device when data is transferred. A dynamic random access memory (DRAM) is used as the data buffer memory <b>103</b>, for example. Instead of a DRAM, a ferroelectric random access memory (FeRAM) may be used.</p>
<p id="p-0031" num="0030">The serial flash memory <b>102</b> is a nonvolatile memory that can continue to retain data for conducting an inspection on a flash memory chip or the like.</p>
<p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. 2</figref> is a view illustrating an example of a configuration of the serial flash memory <b>102</b>. As illustrated in <figref idref="DRAWINGS">FIG. 2</figref>, the serial flash memory <b>102</b> stores therein a memory ID <b>201</b>_<b>1</b> of the first flash memory chip, a memory ID <b>201</b>_<b>2</b> of the second flash memory chip, a memory ID <b>201</b>_<b>3</b> of the third flash memory chip, and a memory ID <b>201</b>_<b>4</b> of the fourth flash memory chip. In other words, the serial flash memory <b>102</b> according to the embodiment stores therein the memory IDs <b>201</b>_<b>1</b> to <b>201</b>_<b>4</b> of the first flash memory chip <b>121</b> to the fourth flash memory chip <b>124</b> of 64 bytes as a whole. In this manner, the serial flash memory <b>102</b> stores therein (a plurality of) memory IDs for the number of the connected flash memory chips.</p>
<p id="p-0033" num="0032">Furthermore, the serial flash memory <b>102</b> stores therein location information for identifying bad blocks in the first flash memory chip <b>121</b> to the fourth flash memory chip <b>124</b> (a first bad block <b>202</b>_<b>1</b>, a second bad block <b>202</b>_<b>2</b>, a third bad block <b>202</b>_<b>3</b>, . . . , and an n-th bad block <b>202</b><sub>&#x2014;</sub><i>n</i>). In the embodiment, the serial flash memory <b>102</b> stores therein a chip number and a block number as the location information of a bad block. The chip number is a number for identifying a destination of the SSD device <b>100</b>, that is, a connected flash memory chip. It is sufficient to identify the connected flash memory chip, and a memory ID, for example, may be used as the information for identifying the chip.</p>
<p id="p-0034" num="0033">In other words, the flash memory chips contain bad blocks at the time of shipment, and store therein information indicating whether a block is a bad block for each of the blocks in advance. Because the bad block is a block from and to which data cannot be read and written normally, the SSD device <b>100</b> needs to access to the data while avoiding such bad blocks.</p>
<p id="p-0035" num="0034">Therefore, in the manufacturing process of the SSD device <b>100</b>, after the flash memory chips are connected, a retrieval module <b>154</b> retrieves the bad blocks recorded at the time of the shipment of the flash memories. A register module <b>153</b> then registers the location information of the bad blocks <b>202</b>_<b>1</b> to <b>202</b><sub>&#x2014;</sub><i>n</i>, which is a retrieval result, in the serial flash memory <b>102</b>.</p>
<p id="p-0036" num="0035">In the embodiment, the serial flash memory is used as a memory that stores therein the memory IDs and the location information of the bad blocks. Alternatively, other nonvolatile memories may be used.</p>
<p id="p-0037" num="0036">Referring back to <figref idref="DRAWINGS">FIG. 1</figref>, the SSD controller <b>101</b> comprises the CPU <b>111</b>, a boot read-only memory (ROM) <b>112</b>, a host interface controller <b>114</b>, a buffer memory controller <b>115</b>, and a flash memory controller <b>116</b>.</p>
<p id="p-0038" num="0037">The host interface controller <b>114</b> is a circuit that has a function for communicating with and connecting to the host device.</p>
<p id="p-0039" num="0038">The buffer memory controller <b>115</b> is a circuit that has a function for controlling data access, such as write and read of data to and from the data buffer memory <b>103</b>.</p>
<p id="p-0040" num="0039">The flash memory controller <b>116</b> is a circuit that has a function for controlling data access, such as write and read of data to and from the first flash memory chip <b>121</b> to the fourth flash memory chip <b>124</b>.</p>
<p id="p-0041" num="0040">The boot ROM <b>112</b> stores therein a control program <b>150</b>.</p>
<p id="p-0042" num="0041">The CPU <b>111</b> controls the host interface controller <b>114</b>, the buffer memory controller <b>115</b>, and the flash memory controller <b>116</b>, and processes and controls a command (instruction) of data access, such as write and read of data to and from the first flash memory chip <b>121</b> to the fourth flash memory chip <b>124</b>.</p>
<p id="p-0043" num="0042">At the time of booting of the SSD device <b>100</b>, the CPU <b>111</b> reads a boot program stored in the boot ROM <b>112</b>, loads the boot program on the data buffer memory <b>103</b> or the like, and thus executes firmware. When an inspection is conducted on the SSD device <b>100</b>, the control program <b>150</b> is invoked. This allows a determination module <b>151</b>, a controller <b>152</b>, the register module <b>153</b>, and the retrieval module <b>154</b> stored in the control program <b>150</b> to be realized as a software configuration on the CPU <b>111</b>.</p>
<p id="p-0044" num="0043">The determination module <b>151</b> determines whether each of the memory IDs <b>131</b> to <b>134</b> stored in the flash memory chips <b>121</b> to <b>124</b> connected to the SSD device <b>100</b> match with any one of the plurality of memory IDs <b>201</b>_<b>1</b> to <b>201</b>_<b>4</b> stored in the serial flash memory <b>102</b>.</p>
<p id="p-0045" num="0044">The controller <b>152</b> controls the flash memory chips <b>121</b> to <b>124</b> via the flash memory controller <b>116</b>. For example, if the determination module <b>151</b> determines that one of the memory IDs of the flash memory chips <b>121</b> to <b>124</b> does not match with any of the memory IDs stored in the serial flash memory <b>102</b>, the location information of the bad blocks in the flash memory chip storing therein the non-matched memory ID cannot be used because it is different from the location information of the bad blocks stored in the serial flash memory <b>102</b>. Therefore, the controller <b>152</b> performs control so as to stop using the location information of the bad blocks stored in the serial flash memory <b>102</b> for the flash memory chip that stores therein the non-matched memory ID, and to prevent access from the host to the flash memory chip.</p>
<p id="p-0046" num="0045">If the determination module <b>151</b> determines that any of the memory IDs <b>131</b> to <b>134</b> stored in the flash memory chips <b>121</b> to <b>124</b> does not match with the memory IDs <b>201</b>_<b>1</b> to <b>201</b>_<b>4</b> stored in the serial flash memory <b>102</b>, the retrieval module <b>154</b> retrieves the bad blocks from the flash memory chip that stores therein the non-matched memory ID.</p>
<p id="p-0047" num="0046">The register module <b>153</b> registers the location information of the bad blocks retrieved by the retrieval module <b>154</b> in a storage area that stores therein the location information of the bad blocks in the serial flash memory <b>102</b>.</p>
<p id="p-0048" num="0047">When the inspection is conducted on the SSD device <b>100</b> for the first time, the serial flash memory <b>102</b> stores therein no memory ID and no location information of bad blocks. In this case, the retrieval module <b>154</b> retrieves the bad blocks from the first flash memory chip <b>121</b> to the fourth flash memory chip <b>124</b> that are connected to the SSD device <b>100</b>. The register module <b>153</b> then registers the memory IDs of the connected flash memory chips in the serial flash memory <b>102</b>, and registers the location information of the bad blocks retrieved by the retrieval module <b>154</b> in the serial flash memory <b>102</b>.</p>
<p id="p-0049" num="0048">The retrieval processing of the bad blocks in the SSD device <b>100</b> according to the embodiment will now be described. <figref idref="DRAWINGS">FIG. 3</figref> is a flowchart of the processing described above in the SSD device <b>100</b> according to the embodiment.</p>
<p id="p-0050" num="0049">At first, the SSD device <b>100</b> receive start of the retrieval of the bad blocks from a destination thereof via the host interface controller <b>114</b> (S<b>301</b>). This causes the control program <b>150</b> that operates on the CPU <b>111</b> in the SSD device <b>100</b> to start control for retrieving the bad blocks.</p>
<p id="p-0051" num="0050">Next, the determination module <b>151</b> determines whether a memory ID and location information of the bad blocks are written in the serial flash memory <b>102</b> (S<b>302</b>).</p>
<p id="p-0052" num="0051">If the determination module <b>151</b> determines that there is no memory ID and no location information written in the serial flash memory <b>102</b> (No at S<b>302</b>), the retrieval module <b>154</b> retrieves the bad blocks from all of the flash memory chips (e.g., the first flash memory chip <b>121</b> to the fourth flash memory chip <b>124</b>) connected to the SSD device <b>100</b> (S<b>311</b>).</p>
<p id="p-0053" num="0052">Subsequently, the register module <b>153</b> registers the memory IDs of all of the flash memory chips (e.g., the first flash memory chip <b>121</b> to the fourth flash memory chip <b>124</b>) connected to the SSD device <b>100</b> in the serial flash memory <b>102</b>, and registers the location information of the bad blocks, which is a retrieval result made by the retrieval module <b>154</b>, in the serial flash memory <b>102</b> (S<b>312</b>). The processing is then completed.</p>
<p id="p-0054" num="0053">By contrast, if the determination module <b>151</b> determines that the memory IDs and the location information of the bad blocks have already been written in the serial flash memory <b>102</b> (Yes at S<b>302</b>), the determination module <b>151</b> determines whether the memory IDs of the flash memory chips connected to the SSD device <b>100</b> match with the memory IDs registered in the serial flash memory <b>102</b> (S<b>303</b>). If they match with each other (Yes at S<b>303</b>), the process proceeds to S<b>306</b>.</p>
<p id="p-0055" num="0054">On the contrary, if the determination module <b>151</b> determines that the memory IDs of the flash memory chips connected to the SSD device <b>100</b> do not match with the memory IDs registered in the serial flash memory <b>102</b> (No at S<b>303</b>), it is considered that the correspondence between the bad blocks in the flash memory chips mounted on the SSD device <b>100</b> and the bad blocks stored in the serial flash memory <b>102</b> is not correct. Thus, the bad blocks need to be examined. Therefore, the retrieval module <b>154</b> retrieves the bad blocks from the flash memory chip that stores therein the non-matched memory ID (S<b>304</b>). In the embodiment, the flash memory chip storing therein the non-matched memory ID is considered to be newly connected as a replacement. The retrieval module <b>154</b> reads the location information of the bad blocks written by a supplier of the flash memory chip in advance from the flash memory chip, thereby detecting the location information of the bad blocks.</p>
<p id="p-0056" num="0055">The register module <b>153</b> then updates the location information in the serial flash memory <b>102</b> with the location information (chip number and block number) of the bad blocks, which is a retrieval result (S<b>305</b>). Before performing the update, the register module <b>153</b> deletes the location information of the removed flash memory chip.</p>
<p id="p-0057" num="0056">The determination module <b>151</b> then determines whether the determination of whether the memory IDs of the flash memory chips match with the memory IDs registered in the serial flash memory <b>102</b> is completed for all of the flash memory chips connected to the SSD device <b>100</b> (S<b>306</b>). If the determination is yet to be completed (No at S<b>306</b>), the determination is made, starting from S<b>303</b> again.</p>
<p id="p-0058" num="0057">If the determination is completed for all of the flash memory chips (Yes at S<b>306</b>), the location information of the bad blocks in all of the flash memory chips is considered to be registered in the serial flash memory <b>102</b>, and the processing is completed.</p>
<p id="p-0059" num="0058">Accordingly, the location information of the bad blocks in the flash memory chips connected to the SSD device <b>100</b> is registered in the serial flash memory <b>102</b>.</p>
<p id="p-0060" num="0059">In this manner, after the location information of the bad blocks in the SSD device <b>100</b> is specified, an examination is made on the SSD device <b>100</b>. In the process of the examination, the bad blocks stored in the serial flash memory <b>102</b> are used as reference to read and write data from and to a specified flash memory chip. At this time, if the data cannot be read and written from and to blocks other than the bad blocks, a flash memory chip is replaced as necessary. If the flash memory chip is replaced, the processing illustrated in <figref idref="DRAWINGS">FIG. 3</figref> is performed again. Following such a process makes it possible to provide the SSD device <b>100</b> with high reliability.</p>
<p id="p-0061" num="0060">The embodiment is explained as an example in which a flash memory chip is used. However, it is not limited to the flash memory chip, and may be applied to a replaceable flash memory board. In this case, except that flash memory boards with a flash memory chip mounted thereon are mounted on the SSD device, other configuration is the same as the configuration described above.</p>
<p id="p-0062" num="0061">In a conventional SSD device, because the replaced flash memory chip cannot be detected, the detection of the bad blocks needs to be performed on all of the flash memory chips by a write read test. Thus, it takes a long time to perform the detection, and the detection may not be accurate in some cases.</p>
<p id="p-0063" num="0062">By contrast, in the embodiment, in the manufacturing process of the SSD device <b>100</b>, when an inspection is conducted again on the SSD device, having been inspected once, after a flash memory chip or a flash memory board is replaced, the location information written by the supplier of the flash memory in advance at the time of the shipment of the flash memory chip can be used as the location information of the flash memory chips not replaced or the bad blocks.</p>
<p id="p-0064" num="0063">Furthermore, with the SSD device <b>100</b> according to the embodiment, the retrieval module <b>154</b> retrieves the location information written by the supplier in advance at the time of the shipment for the retrieval of the bad blocks from the replaced flash memory chip. This makes it possible to avoid the bad blocks accurately, and to provide the SSD device <b>100</b> with high reliability.</p>
<p id="p-0065" num="0064">The SSD device <b>100</b> according to the first embodiment is explained as an example in which the location information of the bad blocks is retrieved before the shipment or the like. However, in the SSD device, a flash memory chip or a flash memory board may be replaced after the SSD device is shipped. If such replacement is made, the SSD device may not operate properly. Therefore, a second embodiment is explained as an example in which an abnormality caused by replacement of a flash memory chip or a flash memory board in the SSD device is detected.</p>
<p id="p-0066" num="0065"><figref idref="DRAWINGS">FIG. 4</figref> is an exemplary block diagram of a configuration of an SSD device <b>400</b> according to the second embodiment. As illustrated in <figref idref="DRAWINGS">FIG. 4</figref>, compared with the SSD device <b>100</b> according to the first embodiment, the SSD device <b>400</b> according to the second embodiment has the following configuration: the SSD controller <b>101</b> is replaced with an SSD controller <b>401</b> that performs processing different from that by the SSD controller <b>101</b>; each of the first flash memory chip <b>121</b> to the fourth flash memory chip <b>124</b> is mounted on the corresponding memory board; and a fifth flash memory chip <b>421</b> is added.</p>
<p id="p-0067" num="0066">A first memory board <b>441</b> has the first flash memory chip <b>121</b> mounted thereon, a second memory board <b>442</b> has the second flash memory chip <b>122</b> mounted thereon, a third memory board <b>443</b> has the third flash memory chip <b>123</b> mounted thereon, and a fourth memory board <b>444</b> has the fourth flash memory chip <b>124</b> mounted thereon. In this manner, a flash memory chip can be replaced by replacing the corresponding memory board. However, if a user replaces it after the SSD device is shipped, a failure may occur. The embodiment prevents occurrence of such failure.</p>
<p id="p-0068" num="0067">The fifth flash memory chip <b>421</b> is a memory chip mounted not on a memory board but on the SSD device <b>400</b> directly. The fifth flash memory chip <b>421</b> also holds a memory ID <b>431</b>.</p>
<p id="p-0069" num="0068">In the same manner as in the first embodiment, the serial flash memory <b>102</b> stores therein the memory IDs of the first flash memory chip <b>121</b> to the fifth flash memory chip <b>421</b>, and location information of bad blocks in the flash memory chips.</p>
<p id="p-0070" num="0069">The SSD device <b>400</b> is used as a storage module for an information processing device. <figref idref="DRAWINGS">FIG. 5</figref> is a view of a hardware configuration of a PC used as an information processing device. As illustrated in <figref idref="DRAWINGS">FIG. 5</figref>, an information processing device <b>500</b> comprises a CPU <b>501</b>, a RAM <b>502</b>, a ROM <b>503</b>, a power source unit <b>504</b>, an input interface (I/F) <b>505</b>, and the SSD device <b>400</b>.</p>
<p id="p-0071" num="0070">In the information processing device <b>500</b> according to the embodiment, when the power is applied by the power source unit <b>504</b>, the basic input/output system (BIOS) stored in the ROM <b>503</b> is read by the CPU <b>501</b>, and the RAM <b>502</b> is used as a work area to start an initial operation. At this time, an initial operation is performed in the SSD device <b>400</b> as well.</p>
<p id="p-0072" num="0071">Referring back to <figref idref="DRAWINGS">FIG. 4</figref>, the SSD controller <b>401</b> is different from the SSD controller <b>101</b> in the first embodiment in that the control program <b>150</b> installed in the boot ROM <b>112</b> is replaced with a control program <b>450</b>.</p>
<p id="p-0073" num="0072">The control program <b>450</b> comprises a determination module <b>451</b>, a controller <b>452</b>, and a setting module <b>453</b>. The control program <b>450</b> is invoked when the power is applied.</p>
<p id="p-0074" num="0073">The determination module <b>451</b> determines whether each of the memory IDs <b>131</b> to <b>134</b>, and <b>431</b> stored in the flash memory chips <b>121</b> to <b>124</b>, and <b>421</b> connected to the SSD device <b>400</b> matches with the memory IDs <b>201</b>_<b>1</b> to <b>201</b>_<b>4</b> stored in the serial flash memory <b>102</b>.</p>
<p id="p-0075" num="0074">The setting module <b>453</b> performs setting in accordance with the determination result of the determination module <b>451</b>. For example, if the determination module <b>451</b> determines that each of the memory IDs of the flash memory chips does not match with any of the memory IDs registered in the serial flash memory <b>102</b>, the setting module <b>453</b> performs the setting to notify that it is an abnormal state. If the determination module <b>451</b> determines that the memory IDs of all of the flash memory chips are registered in the serial flash memory <b>102</b>, the setting module <b>453</b> performs the setting to notify that it is a normal state.</p>
<p id="p-0076" num="0075">The controller <b>452</b> performs operational control in accordance with the setting made by the setting module <b>453</b>. For example, if the determination module <b>451</b> determines that any of the memory IDs in the flash memory chips does not match with the memory IDs stored in the serial flash memory <b>102</b>, the controller <b>452</b> performs operational control to be performed on the occurrence of a failure in accordance with the setting made by the setting module <b>453</b>, notifying that it is an abnormal state. As for the operational control to be performed on the occurrence of a failure, the controller <b>452</b> performs control to stop using the location information of the bad blocks stored in the serial flash memory <b>102</b>, and to prevent access from the host. If the determination module <b>451</b> determines that all of the memory IDs in the flash memory chips match with the memory IDs stored in the serial flash memory <b>102</b>, the controller <b>452</b> performs normal operational control in accordance with the setting made by the setting module <b>453</b>, notifying that it is a normal state. Because other operational control performed on the occurrence of a failure and normal operational control are considered to be the same as the control performed conventionally, the description thereof will be omitted.</p>
<p id="p-0077" num="0076">As described above, with the SSD device <b>400</b> according to the second embodiment, in the same manner as in the first embodiment, a memory ID is stored in each of the flash memory chips, and the memory IDs of all of the flash memory chips are stored in the serial flash memory <b>102</b>. The memory IDs of the flash memory chips are compared with the memory IDs of the serial flash memory when the power is applied. If the memory IDs of the flash memory chips do not match with the memory IDs stored in the serial flash memory, it is considered to be a failed state, and no normal response is made.</p>
<p id="p-0078" num="0077">The initial operation when the power is applied in the SSD device <b>400</b> according to the second embodiment will now be described. <figref idref="DRAWINGS">FIG. 6</figref> is a flowchart of the initial operation described above in the SSD device <b>400</b> according to the second embodiment.</p>
<p id="p-0079" num="0078">At first, in response to application of the power in the information processing device <b>500</b>, the power is started to be supplied to the SSD device <b>400</b> as well by the application of the power (S<b>601</b>).</p>
<p id="p-0080" num="0079">Next, the determination module <b>451</b> determines whether each of the memory IDs of the flash memory chips connected to the SSD device <b>400</b> match with any of the memory IDs registered in the serial flash memory <b>102</b> (S<b>602</b>). If they match with each other (Yes at S<b>602</b>), the determination module <b>451</b> determines whether the determination of whether each of the memory IDs of the flash memory chips match with any of the memory IDs registered in the serial flash memory <b>102</b> is completed for all of the flash memory chips (S<b>603</b>). If the determination is yet to be performed for all of the flash memory chips (No at S<b>603</b>), the process returns to S<b>602</b> to perform the processing again. By contrast, if the memory IDs of all of the flash memory chips match with the memory IDs registered in the serial flash memory <b>102</b> and the determination is completed (Yes at S<b>603</b>), the setting module <b>453</b> sets the SSD device <b>400</b> in a normal state (S<b>604</b>). The controller <b>452</b> then performs the normal operational control in accordance with the setting (S<b>605</b>).</p>
<p id="p-0081" num="0080">On the contrary, if the determination module <b>451</b> determines that one of the memory IDs of the flash memory chips connected to the SSD device <b>400</b> do not match with any of the memory IDs registered in the serial flash memory <b>102</b> (No at S<b>602</b>), the setting module <b>453</b> sets the SSD device <b>400</b> in an abnormal state (S<b>606</b>). Subsequently, the controller <b>452</b> performs the operational control performed on the occurrence of a failure in accordance with the setting and the processing is then completed (S<b>607</b>). As an example of the operational control performed on the occurrence of a failure, an error conforming to a standard such as serial attached SCSI (SAS) and serial advanced technology attachment (SATA) is notified to the information processing device <b>500</b>, which is the host.</p>
<p id="p-0082" num="0081">As in the processing process described above, only when the memory IDs of the flash memories match with the memory IDs in the serial flash memory as a whole, it is determined that the location information of the bad blocks in the mounted flash memories is stored in the serial flash memory <b>102</b>, and normal operation is continued.</p>
<p id="p-0083" num="0082">In the second embodiment as well, the register module <b>153</b> and the like may be provided in the control program <b>450</b> and an inspection before the shipment may be conducted in the same manner as in the first embodiment.</p>
<p id="p-0084" num="0083">Furthermore, a plurality of flash memory chips may be mounted on a flash memory board installed on the SSD device. In this case, the determination of whether the memory IDs of the flash memory chips match with the memory IDs registered in the serial flash memory may be performed on each flash memory board or on each of the flash memory chips mounted on the flash memory board.</p>
<p id="p-0085" num="0084">Conventionally, it is not confirmed whether the correspondence between the location information of the bad blocks in the mounted flash memories and the location information of the bad blocks in the serial flash memory is correct. Therefore, if a flash memory (flash memory chip or flash memory board) is replaced, wrong location information of the bad blocks is used. As a result, the SSD device operates without avoiding the bad blocks properly.</p>
<p id="p-0086" num="0085">By contrast, if a flash memory chip or a flash memory board is replaced, or if a flash memory chip fails to operate normally, the SSD device <b>400</b> according to the second embodiment can detect these conditions readily and prevent occurrence of malfunction.</p>
<p id="p-0087" num="0086">The SSD devices <b>100</b> and <b>400</b> according to the first and the second embodiments have the configurations described above, thereby preventing inconsistency in the location information of the bad blocks in the replaced flash memory. Accordingly, the SSD devices <b>100</b> and <b>400</b> can prevent access when mismatching occurs in the location information of the bad blocks, thereby securing reliability.</p>
<p id="p-0088" num="0087">In the first and the second embodiments, the memory IDs are used for determining whether a flash memory chip is replaced. However, usage of the memory IDs is not limited to the determination on whether a flash memory chip is replaced. Therefore, a third embodiment is explained as an example in which whether to set a test mode for conducting a test is determined based on the memory IDs when the power is applied.</p>
<p id="p-0089" num="0088"><figref idref="DRAWINGS">FIG. 7</figref> is a block diagram of a configuration of an SSD device <b>700</b> according to the third embodiment. As illustrated in <figref idref="DRAWINGS">FIG. 7</figref>, compared with the SSD device <b>400</b> according to the second embodiment, the SSD device <b>700</b> according to the third embodiment has a configuration in which the SSD controller <b>401</b> is replaced with an SSD controller <b>711</b> that performs processing different from that by the SSD controller <b>401</b>.</p>
<p id="p-0090" num="0089">The SSD controller <b>711</b> is different from the SSD controller <b>401</b> according to the second embodiment in that the control program <b>450</b> installed in the boot ROM <b>112</b> is replaced with a control program <b>750</b>.</p>
<p id="p-0091" num="0090">The control program <b>750</b> comprises a determination module <b>751</b>, a controller <b>752</b>, and a setting module <b>753</b>. The control program <b>750</b> is invoked when the power is applied.</p>
<p id="p-0092" num="0091">The determination module <b>751</b> refers to the insides of the flash memory chips <b>121</b> to <b>124</b> connected to the SSD device <b>700</b> to determine whether the memory IDs are stored therein. If the determination module <b>751</b> cannot recognize the memory IDs, the determination module <b>751</b> determines that the flash memory chips or the memory boards are not connected. In this manner, the determination module <b>751</b> according to the third embodiment determines whether all of the memory boards are connected to the SSD device <b>700</b> based on the memory IDs of the flash memory chips.</p>
<p id="p-0093" num="0092">In this manner, with the SSD device <b>700</b> according to the third embodiment, when all of the memory boards are removed, the SSD device <b>700</b> shifts to the test mode. With this configuration, if an inspector wants to test the SSD device <b>700</b>, only by removing all of the memory boards from the SSD device <b>700</b> to boot it up, it is possible to cause the SSD device <b>700</b> to shift to the test mode. In the determination on whether the SSD device <b>700</b> shifts to the test mode in the embodiment, whether a memory ID is present in the fifth flash memory chip <b>421</b> is not determined. This is because the fifth flash memory chip <b>421</b> is mounted on the board of the SSD device <b>700</b> main body, and unlike memory boards, it cannot be removed readily.</p>
<p id="p-0094" num="0093">The test mode is a mode for diagnosing whether the board of the SSD device <b>700</b> main body including the SSD controller <b>711</b> functions properly. In the test mode, because flash memory access to be performed in the normal operation is not performed, the processing of reading data required for the boot-up of the SSD device <b>700</b> from the flash memory is not performed when the power is applied. In the test mode, by control performed by the control program <b>750</b>, the CPU <b>111</b> confirms connections and operations of the SSD controller <b>711</b>, the serial flash memory <b>102</b>, the data buffer memory <b>103</b>, the flash memories, and the like, and generates a test result log to notify it to the host device (e.g., the information processing device <b>500</b>).</p>
<p id="p-0095" num="0094">The setting module <b>753</b> performs setting in accordance with the determination result of the determination module <b>751</b>. For example, if the determination module <b>751</b> can refer to no memory ID, and determines that all of the memory boards are removed, the setting module <b>753</b> performs the setting for shifting to the test mode. If the determination module <b>751</b> can refer to one or more memory IDs of the flash memory boards, the determination module <b>751</b> determines that there is a connected memory board, and the setting module <b>753</b> performs the setting for shifting to the normal state.</p>
<p id="p-0096" num="0095">The controller <b>752</b> performs operational control in accordance with the setting made by the setting module <b>753</b>. For example, if the setting module <b>753</b> performs the setting so as to perform a normal operation because the determination module <b>751</b> can refer to the memory IDs of the flash memory boards, and determines that one or more memory boards are connected, the controller <b>752</b> performs a normal operation. If the setting module <b>753</b> performs the setting so as to shift to the test mode because the determination module <b>751</b> determines that all of the memory boards are removed, the controller <b>752</b> performs a test operation. Because the operational control performed in the test mode is considered to be the same as the control performed conventionally, the description thereof will be omitted.</p>
<p id="p-0097" num="0096">The initial operation when the power is applied in the SSD device <b>700</b> according to the third embodiment will now be described. <figref idref="DRAWINGS">FIG. 8</figref> is a flowchart of the initial operation described above in the SSD device <b>700</b> according to the third embodiment.</p>
<p id="p-0098" num="0097">At first, in response to application of the power performed by an inspector, the power is started to be supplied to the SSD device <b>700</b> as well by the application of the power (S<b>801</b>).</p>
<p id="p-0099" num="0098">Next, the determination module <b>751</b> attempts to refer to a memory ID registered in the serial flash memory <b>102</b> to confirm whether a memory board corresponding to the memory ID is present (S<b>802</b>).</p>
<p id="p-0100" num="0099">Subsequently, the determination module <b>751</b> determines whether one or more memory boards connected to the SSD device <b>700</b> are present (S<b>803</b>). If the determination module <b>751</b> determines that one or more memory boards are present (Yes at S<b>803</b>), the setting module <b>753</b> performs setting so as to perform the normal operation (S<b>804</b>). The controller <b>752</b> then performs normal operational control in accordance with the setting (S<b>805</b>).</p>
<p id="p-0101" num="0100">By contrast, if the determination module <b>751</b> determines that no memory board connected to the SSD device <b>700</b> is present (No at S<b>803</b>), the setting module <b>753</b> performs setting so as to shift to the test mode (S<b>806</b>). The controller <b>752</b> performs the test operation in accordance with the setting, and the processing is completed (S<b>807</b>).</p>
<p id="p-0102" num="0101">In this manner, with the SSD device <b>700</b> according to the embodiment, the board configuration is confirmed when the power is applied, and if the fact that no memory board (sub board) with a flash memory mounted thereon is connected is detected, the SSD device <b>700</b> shifts to the test mode for testing the board as a single body, and does not make a normal response to the host device (e.g., the information processing device <b>500</b>).</p>
<p id="p-0103" num="0102">The SSD device <b>700</b> according to the third embodiment is explained as an example in which the SSD device <b>700</b> shifts to the test mode when all of the memory boards are removed. However, it is not limited to the case where all of the memory boards are removed. For example, the SSD device <b>700</b> may shift to the test mode in the case where a predetermined number of memory boards are removed, such as the case where more than half of the memory boards are removed.</p>
<p id="p-0104" num="0103">In a conventional SSD device, if all of the memory boards with flash memory chips mounted thereon are not connected, the SSD device is considered to be in a failed state, and the board of the SSD device main body cannot be diagnosed as a single body. Therefore, because a solder joint inspection is conducted with an analyzing device using X-ray, it takes time and costs.</p>
<p id="p-0105" num="0104">By contrast, with the SSD device <b>700</b> according to the embodiment, in the manufacturing process of the SSD device <b>700</b>, a diagnosis can be conducted on the board including the SSD controller <b>711</b> as a single body, which facilitates detection of malfunction such as abnormal connection.</p>
<p id="p-0106" num="0105">Moreover, the various modules of the systems described herein can be implemented as software applications, hardware and/or software modules, or components on one or more computers, such as servers. While the various modules are illustrated separately, they may share some or all of the same underlying logic or code.</p>
<p id="p-0107" num="0106">While certain embodiments have been described, these embodiments have been presented by way of example only, and are not intended to limit the scope of the inventions. Indeed, the novel embodiments described herein may be embodied in a variety of other forms; furthermore, various omissions, substitutions and changes in the form of the embodiments described herein may be made without departing from the spirit of the inventions. The accompanying claims and their equivalents are intended to cover such forms or modifications as would fall within the scope and spirit of the inventions.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A storage device, comprising:
<claim-text>a plurality of replaceable nonvolatile memories that each store respective unique identification information and are to be accessed from a host;</claim-text>
<claim-text>an identification information storage module configured to store therein a plurality of pieces of identification information that identify a plurality of nonvolatile memories, respectively;</claim-text>
<claim-text>a location information storage module configured to store therein pieces of location information each identifying a bad area in one of the nonvolatile memories identified by one of the pieces of identification information;</claim-text>
<claim-text>a determination module configured to determine whether the unique identification information stored in respective nonvolatile memories connected thereto matches any one of the pieces of identification information stored in the identification information storage module; and</claim-text>
<claim-text>a control module configured to prevent one of the pieces of location information stored in the location information storage module from being used, and to prevent access to one of the nonvolatile memories identified by one of the pieces of identification information from the host, when the determination module determines that one of the unique identification information of one of the nonvolatile memories does not match any one of the pieces of identification information stored in the identification information storage module.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The storage device of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising a retrieval module configured to retrieve location information of a bad area from one of the nonvolatile memories when the determination module determines that the one of the unique identification information of the one of the nonvolatile memories does not match any one of the pieces of identification information stored in the identification information storage module.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The storage device of <claim-ref idref="CLM-00002">claim 2</claim-ref>, further comprising a register module configured to register the location information of the bad area retrieved by the retrieval module, in the location information storage module.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The storage device of <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein,
<claim-text>when the unique identification information of the nonvolatile memories are not stored in the identification information storage module, the retrieval module is configured to retrieve location information of bad areas from the nonvolatile memories, and,</claim-text>
<claim-text>when the unique identification information of the nonvolatile memories are not stored in the identification information storage module, the register module is configured to register the unique identification information of the nonvolatile memories connected thereto, and to register pieces of the location information of the bad areas retrieved by the retrieval module in the identification information storage module.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The storage device of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the control module is further configured to perform an operation control to be carried out upon occurrence of failure, when the determination module determines that the unique identification information of the one of the nonvolatile memories does not match any one of the pieces of identification information stored in the identification information storage module.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The storage device of <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein the control module is further configured to perform a normal operation control, when the determination module determines that all of the unique identification information of the nonvolatile memories match the pieces of identification information stored in the identification information storage module.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. A control method performed in a storage device comprising a plurality of replaceable nonvolatile memories that each store respective unique identification information and are to be accessed from a host, an identification information storage module and a location information storage module, the identification information storage module storing therein a plurality of pieces of identification information that identify respective nonvolatile memories, the location information storage module storing therein pieces of location information each identifying a bad area in one of the nonvolatile memories identified by one of the pieces of identification information, the method comprising:
<claim-text>determining, by a determination module, whether the unique identification information stored in respective nonvolatile memories connected thereto matches any one of the pieces of identification information stored in the identification information storage module; and</claim-text>
<claim-text>preventing one of the pieces of location information stored in the location information storage module from being used, and preventing access to one of the nonvolatile memories identified by one of the pieces of identification information from the host, when the determination module determines that one of the unique identification information of one of the nonvolatile memories does not match any one of the pieces of identification information stored in the identification information storage module.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The control method of <claim-ref idref="CLM-00007">claim 7</claim-ref>, further comprising retrieving, by a retrieval module, location information of a bad area from one of the nonvolatile memories when the determination module determines that the one of the unique identification information of the one of the nonvolatile memories does not match any one of the pieces of identification information stored in the identification information storage module.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The control method of <claim-ref idref="CLM-00008">claim 8</claim-ref>, further comprising registering, by a register module, the location information of the bad area retrieved by the retrieval module, in the location information storage module.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The control method of <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein,
<claim-text>when the unique identification information of the nonvolatile memories are not stored in the identification information storage module, the retrieval module is configured to retrieve location information of bad areas from the nonvolatile memories, and</claim-text>
<claim-text>when the unique identification information of the nonvolatile memories are not stored in the identification information storage module, the register module is configured to register the unique identification information of the nonvolatile memories connected thereto, and to register pieces of the location information of the bad areas retrieved by the retrieval module in the identification information storage module.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The control method of <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein an operation control to be carried out upon occurrence of failure is performed, when the determination module determines that the unique identification information of the one of the nonvolatile memories does not match any one of the pieces of identification information stored in the identification information storage module.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The control method of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein a normal operation control is performed, when the determination module determines that all of the unique identification information of the nonvolatile memories match the pieces of identification information stored in the identification information storage module. </claim-text>
</claim>
</claims>
</us-patent-grant>
