<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08621864-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08621864</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12891151</doc-number>
<date>20100927</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<us-term-of-grant>
<us-term-extension>476</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>F</section>
<class>02</class>
<subclass>B</subclass>
<main-group>33</main-group>
<subgroup>44</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification> 606052</main-classification>
<further-classification> 60611</further-classification>
<further-classification>701108</further-classification>
<further-classification>701109</further-classification>
<further-classification>12356826</further-classification>
</classification-national>
<invention-title id="d2e53">Engine exhaust manifold pressure control of intake flow</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6035640</doc-number>
<kind>A</kind>
<name>Kolmanovsky et al.</name>
<date>20000300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 606052</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6305167</doc-number>
<kind>B1</kind>
<name>Weisman et al.</name>
<date>20011000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 60602</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>6408834</doc-number>
<kind>B1</kind>
<name>Brackney et al.</name>
<date>20020600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>6418719</doc-number>
<kind>B2</kind>
<name>Terry et al.</name>
<date>20020700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 60602</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>6460522</doc-number>
<kind>B1</kind>
<name>Rimnac</name>
<date>20021000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>12356824</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>6480782</doc-number>
<kind>B2</kind>
<name>Brackney et al.</name>
<date>20021100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>701108</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>6588210</doc-number>
<kind>B2</kind>
<name>Kreso</name>
<date>20030700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 60602</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>6604361</doc-number>
<kind>B2</kind>
<name>Buckland et al.</name>
<date>20030800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 606052</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>6625985</doc-number>
<kind>B2</kind>
<name>Shirakawa</name>
<date>20030900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>6625986</doc-number>
<kind>B2</kind>
<name>Mazaud et al.</name>
<date>20030900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>6672060</doc-number>
<kind>B1</kind>
<name>Buckland et al.</name>
<date>20040100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 60602</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>7031824</doc-number>
<kind>B2</kind>
<name>Gangopadhyay</name>
<date>20060400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>701108</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>7089738</doc-number>
<kind>B1</kind>
<name>Boewe et al.</name>
<date>20060800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 606052</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>7437874</doc-number>
<kind>B2</kind>
<name>Ramamurthy et al.</name>
<date>20081000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 60602</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>7637107</doc-number>
<kind>B2</kind>
<name>Ramamurthy</name>
<date>20091200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 60611</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>7779633</doc-number>
<kind>B2</kind>
<name>Roettger et al.</name>
<date>20100800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 60602</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>7784451</doc-number>
<kind>B2</kind>
<name>Chi</name>
<date>20100800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>12356819</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00018">
<document-id>
<country>US</country>
<doc-number>7848872</doc-number>
<kind>B2</kind>
<name>Ma et al.</name>
<date>20101200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>701108</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00019">
<document-id>
<country>US</country>
<doc-number>8006494</doc-number>
<kind>B2</kind>
<name>Nagae</name>
<date>20110800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 606052</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00020">
<document-id>
<country>US</country>
<doc-number>8103427</doc-number>
<kind>B2</kind>
<name>Osburn et al.</name>
<date>20120100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>701108</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00021">
<document-id>
<country>US</country>
<doc-number>8209979</doc-number>
<kind>B2</kind>
<name>Wang et al.</name>
<date>20120700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 60602</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00022">
<document-id>
<country>US</country>
<doc-number>8316829</doc-number>
<kind>B2</kind>
<name>Piper et al.</name>
<date>20121100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>12356821</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00023">
<document-id>
<country>US</country>
<doc-number>2003/0177766</doc-number>
<kind>A1</kind>
<name>Wang et al.</name>
<date>20030900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00024">
<document-id>
<country>US</country>
<doc-number>2003/0192516</doc-number>
<kind>A1</kind>
<name>Brunemann et al.</name>
<date>20031000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00025">
<document-id>
<country>US</country>
<doc-number>2008/0149078</doc-number>
<kind>A1</kind>
<name>Hill et al.</name>
<date>20080600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>12356811</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00026">
<document-id>
<country>US</country>
<doc-number>2010/0131171</doc-number>
<kind>A1</kind>
<name>Muller et al.</name>
<date>20100500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>701102</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00027">
<document-id>
<country>US</country>
<doc-number>2010/0170244</doc-number>
<kind>A1</kind>
<name>Brooks et al.</name>
<date>20100700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 60602</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00028">
<document-id>
<country>US</country>
<doc-number>2012/0023932</doc-number>
<kind>A1</kind>
<name>Ge et al.</name>
<date>20120200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification> 60602</main-classification></classification-national>
</us-citation>
<us-citation>
<nplcit num="00029">
<othercit>J. Chauvin, &#x201c;Motion Planning for Experimental Airpath Control of a Diesel HCCI Engine&#x201d;, Control Eng. Pract., vol. 16, p. 1081-1091, 2008.</othercit>
</nplcit>
<category>cited by examiner</category>
</us-citation>
<us-citation>
<nplcit num="00030">
<othercit>J. Wahlstrom, &#x201c;EGR-VGT Control and Tuning for Pumping Work Minimization and Emission Control,&#x201d; Control Sys. Tech., vol. 18, No. 4, 2010.</othercit>
</nplcit>
<category>cited by examiner</category>
</us-citation>
<us-citation>
<nplcit num="00031">
<othercit>J. Chauvin, &#x201c;Experimental Motion Planning in Airpath Control for HCCI Engine&#x201d;, American Control Conference, p. 1874-1879, 2006.</othercit>
</nplcit>
<category>cited by examiner</category>
</us-citation>
<us-citation>
<nplcit num="00032">
<othercit>International Search Report and Written Opinion, PCT/US2010/050394, Cummins Inc., International Search Authority/KR, Jun. 22, 2011.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>26</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification> 606052</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification> 60287</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification> 60288</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification> 60597</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification> 60600</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification> 60608</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>12356818</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>12356826</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>701108</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>7</number-of-drawing-sheets>
<number-of-figures>8</number-of-figures>
</figures>
<us-related-documents>
<us-provisional-application>
<document-id>
<country>US</country>
<doc-number>61245909</doc-number>
<date>20090925</date>
</document-id>
</us-provisional-application>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20110154820</doc-number>
<kind>A1</kind>
<date>20110630</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Osburn</last-name>
<first-name>Andrew W.</first-name>
<address>
<city>Nashville</city>
<state>IN</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Geveci</last-name>
<first-name>Mert</first-name>
<address>
<city>Athens</city>
<state>GA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Books</last-name>
<first-name>Martin T.</first-name>
<address>
<city>Columbus</city>
<state>IN</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Osburn</last-name>
<first-name>Andrew W.</first-name>
<address>
<city>Nashville</city>
<state>IN</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Geveci</last-name>
<first-name>Mert</first-name>
<address>
<city>Athens</city>
<state>GA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Books</last-name>
<first-name>Martin T.</first-name>
<address>
<city>Columbus</city>
<state>IN</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Krieg DeVault LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Cummins Inc.</orgname>
<role>02</role>
<address>
<city>Columbus</city>
<state>IN</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Denion</last-name>
<first-name>Thomas</first-name>
<department>3748</department>
</primary-examiner>
<assistant-examiner>
<last-name>Olszewski</last-name>
<first-name>Thomas</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A method for controlling charge flow in an internal combustion engine includes operating an engine having a VGT. The method includes determining a target and current charge flow and EGR flow. The method further includes determining an error term for the charge flow and the EGR flow, and determining an exhaust pressure feedback command in response to the error terms. The exhaust pressure feedback command is combined with an exhaust pressure feedforward command, and the VGT is controlled in response to the exhaust pressure feedback command. The method additionally includes determining the exhaust pressure feedback command in response to a current EGR valve position. The method further includes controlling an EGR flow rate with the EGR valve at relatively closed EGR valve positions, and controlling the EGR flow rate with exhaust pressure at relatively open EGR valve positions.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="228.60mm" wi="178.99mm" file="US08621864-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="102.19mm" wi="162.48mm" file="US08621864-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="232.49mm" wi="178.22mm" file="US08621864-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="233.60mm" wi="175.26mm" orientation="landscape" file="US08621864-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="243.92mm" wi="157.06mm" orientation="landscape" file="US08621864-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="240.71mm" wi="167.39mm" file="US08621864-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="183.81mm" wi="162.48mm" orientation="landscape" file="US08621864-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="181.10mm" wi="167.05mm" orientation="landscape" file="US08621864-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">CROSS REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">The present application claims the benefit of U.S. Provisional Patent Application 61/245,909 filed Sep. 25, 2009, and is incorporated herein by reference.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">BACKGROUND</heading>
<p id="p-0003" num="0002">The intake flow of an internal combustion engine, including fresh air and any recirculated gases, is an important parameter to control for the engine to properly achieve targeted torque and power, and to control emissions generated by the engine. The control of the intake flow is performed by many actuators, often including an exhaust gas recirculation (EGR) valve and a variable geometry turbocharger (VGT) with a position that defines the operating characteristics of the VGT. The position of the VGT can indicate a position of one or more nozzles, vanes, or other devices associated with the turbocharger.</p>
<p id="p-0004" num="0003">Known controls for intake flow include targeting a specified fresh air flow and EGR flow, and controlling the EGR valve and VGT positions to achieve the both flows and therefore the desired intake flow. The EGR valve and VGT positions are each only effective at certain operating conditions, and are highly coupled with respect to effects on the intake flow parameters. Presently available controls decouple the EGR valve and VGT position through a number of techniques to achieve targeted intake flow parameters, including operating the EGR valve and VGT positions as serial controllers, and applying a mathematical transform to decouple the EGR valve and VGT position as intake flow parameter actuators.</p>
<p id="p-0005" num="0004">Presently known controllers are effective for achieving the intake parameter values&#x2014;for example as described in reference U.S. Pat. No. 6,408,834 entitled &#x201c;System for decoupling EGR flow and turbocharger swallowing capacity/efficiency control mechanisms.&#x201d; However, presently available controllers result in a system that is highly complex, that requires a great deal of effort to calibrate, and that has a coupling between the intake manifold pressure and EGR valve position and the fuel flow rate to the engine. Therefore, further technological developments are desirable in this area.</p>
<heading id="h-0003" level="1">SUMMARY</heading>
<p id="p-0006" num="0005">One embodiment is a unique method for controlling charge flow for an engine with exhaust pressure. An additional embodiment is a unique method for controlling EGR flow with exhaust pressure when the EGR valve is relatively open, and controlling the EGR flow with the EGR valve when the EGR valve is closed or relatively closed. Other embodiments include unique methods, systems, and apparatus to control charge flow and EGR flow. Further embodiments, forms, objects, features, advantages, aspects, and benefits shall become apparent from the following description and drawings.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0007" num="0006"><figref idref="DRAWINGS">FIG. 1</figref> is a schematic illustration of a system for controlling intake flow for an internal combustion engine.</p>
<p id="p-0008" num="0007"><figref idref="DRAWINGS">FIG. 2</figref> is a schematic illustration of a controller for controlling intake flow for an internal combustion engine.</p>
<p id="p-0009" num="0008"><figref idref="DRAWINGS">FIG. 3A</figref> is a first portion of a schematic illustration of a control loop for controlling intake flow for an internal combustion engine.</p>
<p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. 3B</figref> is a second portion of the schematic illustration of the control loop for controlling intake flow for an internal combustion engine.</p>
<p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. 4</figref> is an illustration of interactions between EGR flow, exhaust pressure, and EGR valve position.</p>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 5</figref> is an illustration of interactions between charge flow, exhaust pressure, and EGR valve position.</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 6A</figref> is a first portion of a schematic illustration of a control loop for controlling intake flow for an internal combustion engine.</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 6B</figref> is a second portion of the schematic illustration of the control loop for controlling intake flow for an internal combustion engine.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DESCRIPTION OF THE ILLUSTRATIVE EMBODIMENTS</heading>
<p id="p-0015" num="0014">For the purposes of promoting an understanding of the principles of the invention, reference will now be made to the embodiments illustrated in the drawings and specific language will be used to describe the same. It will nevertheless be understood that no limitation of the scope of the invention is thereby intended, any alterations and further modifications in the illustrated embodiments, and any further applications of the principles of the invention as illustrated therein as would normally occur to one skilled in the art to which the invention relates are contemplated herein.</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 1</figref> is a schematic illustration of a system <b>100</b> for controlling intake flow for an internal combustion engine. The system <b>100</b> includes an internal combustion engine <b>102</b> that may be any type of internal combustion engine understood in the art. The engine produces a pre-EGR exhaust stream <b>116</b> and receives a charge flow <b>110</b> comprising an intake air stream <b>106</b> mixed with an exhaust gas recirculation (EGR) stream <b>112</b>. The engine <b>102</b> is fluidly coupled to an intake manifold <b>108</b> and an exhaust manifold <b>118</b>. The intake manifold <b>108</b> is illustrated as the position where the EGR stream <b>112</b> and the intake air stream <b>106</b> mix, but those streams may mix at any location upstream of the engine <b>102</b>. The EGR stream <b>112</b> has an EGR exit stream <b>120</b> that passes through an EGR valve <b>114</b>. The EGR exit stream <b>120</b> is illustrated as exiting the exhaust manifold <b>118</b>, but the EGR exit stream <b>120</b> may exit at any location downstream of the engine <b>102</b> and upstream of a turbine <b>124</b>.</p>
<p id="p-0017" num="0016">The turbine <b>124</b> is a variable geometry turbine (VGT) <b>124</b> that is the turbine side of a turbocharger. The compressor side of the turbocharger is not shown to allow a clear description of aspects of the present application. The VGT <b>124</b> may be of any type known in the art, including at least a swing vane VGT, a sliding nozzle VGT, and an internal or external bypass VGT. The mechanism of producing the variable geometry of the VGT <b>124</b> is not important, although the VGT <b>124</b> should be a device that can modulate the pressure of the exhaust stream <b>122</b>. An effluent stream <b>126</b> flows out of the system <b>100</b>.</p>
<p id="p-0018" num="0017">The system <b>100</b> further includes a controller <b>104</b>. The controller <b>104</b> structured to perform certain operations control the intake flow of the engine <b>102</b>, including the flow rate of the EGR stream <b>112</b> and the flow rate of the charge flow <b>110</b>. In certain embodiments, the controller <b>104</b> forms a portion of a processing subsystem including one or more computing devices having memory, processing, and communication hardware. The controller <b>104</b> may be a single device or a distributed device, and the functions of the controller may be performed by hardware or software. More specific descriptions of an exemplary embodiment of the controller <b>104</b> are provided in the section referencing <figref idref="DRAWINGS">FIG. 2</figref>.</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 2</figref> is a schematic illustration of a controller <b>104</b> for controlling intake flow for an internal combustion engine <b>102</b>. The controller <b>104</b> includes modules structured to functionally execute operations for controlling the intake flow for the engine <b>102</b>. The description herein includes the use of modules to highlight the functional independence of the features of the elements described. A module may be implemented as operations by software, hardware, or at least partially performed by a user or operator. In certain embodiments, modules represent software elements as a computer program encoded on a computer readable medium, wherein a computer performs the described operations when executing the computer program. A module may be a single device, distributed across devices, and/or a module may be grouped in whole or part with other modules or devices. The operations of any module may be performed wholly or partially in hardware, software, or by other modules. The presented organization of the modules is exemplary only, and other organizations that perform equivalent functions are contemplated herein.</p>
<p id="p-0020" num="0019">The controller <b>104</b> includes a reference module <b>202</b> that interprets a target charge flow <b>216</b> and a target EGR flow <b>218</b>. Interpreting, as utilized herein, includes receiving values by any method known in the art, including at least receiving values from a datalink or network communication, receiving an electronic signal (e.g. a voltage, frequency, current, or PWM signal) indicative of the value, receiving a software parameter indicative of the value, reading the value from a memory location on a computer readable medium, receiving the value as a run-time parameter by any means known in the art, and/or by receiving a value by which the interpreted parameter can be calculated, and/or by referencing a default value that is interpreted to be the parameter value.</p>
<p id="p-0021" num="0020">The controller <b>104</b> further includes an operating conditions module <b>206</b> that interprets a current charge flow <b>220</b>, a current EGR flow <b>222</b>, and an EGR valve position <b>224</b>. Current values, as utilized herein, refer to values in close temporal relation to the operating time of the controller <b>104</b>, but the current values need not be absolutely contemporaneous. For example, and without limitation, a current value may be a value from a prior execution cycle of the controller <b>104</b>, a last known reliable value, a value that was most recently saved on a computer readable medium, or other value that generally represents a latest known value for the parameter which is &#x201c;current.&#x201d;</p>
<p id="p-0022" num="0021">The controller <b>104</b> further includes an error determination module <b>204</b> that determines a charge flow error term <b>236</b> in response to the current charge flow <b>220</b> and the target charge flow <b>216</b>, and determines an EGR flow error term <b>238</b> in response to the target EGR flow <b>218</b> and the current EGR flow <b>222</b>. The controller <b>104</b> further includes a feedback module <b>210</b> that determines an exhaust pressure feedback command <b>244</b> and an EGR valve feedback command <b>246</b> in response to the charge flow error term <b>236</b> and the EGR flow error term <b>238</b>. In a further embodiment, the feedback module <b>210</b> also determines the exhaust pressure feedback command <b>244</b> and the EGR valve feedback command <b>246</b> in response to the EGR valve position <b>224</b>.</p>
<p id="p-0023" num="0022">In certain embodiments, the feedback module <b>210</b> utilizes an EGR valve command <b>234</b> instead of, or as a substitute for, the EGR valve position <b>224</b>. For example, and without limitation, an EGR valve position <b>224</b> feedback value may not be available and the EGR valve command <b>234</b> may be utilized instead, the EGR valve may be a very responsive portion of the system <b>100</b> wherein the EGR valve command <b>234</b> provides a reliable indication of a current EGR valve position <b>224</b>, and/or the controller <b>104</b> may be calibrated based on EGR valve command <b>234</b> values rather than EGR valve position <b>224</b> data. The feedback commands <b>244</b>, <b>246</b> may be determined from the error terms <b>236</b>, <b>238</b> according to standard PID controllers or any portion thereof (e.g. proportional-integral or integral control only), according to fuzzy logic, according to neural networks, or any other feedback control mechanism understood in the art.</p>
<p id="p-0024" num="0023">The controller <b>104</b> further includes a feedforward module <b>208</b> that interprets a feedforward exhaust pressure command <b>228</b> and a feedforward EGR valve position command <b>230</b>. The feedforward commands <b>228</b>, <b>230</b> may be provided by stored open-loop data, according to a model of the system <b>100</b>, according to default steady state values for EGR valve position and VGT position data to achieve the target charge flow <b>216</b> and target EGR flow <b>218</b>, or by any other feedforward control mechanism understood in the art.</p>
<p id="p-0025" num="0024">The controller <b>104</b> further includes an inner loop control module <b>212</b> that determines an exhaust pressure command <b>250</b> in response to the feedforward exhaust pressure command <b>228</b> and the exhaust pressure feedback command <b>244</b>. The inner loop control module <b>212</b> may determine the exhaust pressure command <b>250</b> by adding the feedforward and feedback commands <b>228</b>, <b>244</b>, by weighting the commands <b>228</b>, <b>244</b>, and/or by using a calibrated lookup table including exhaust pressure commands <b>250</b> as a function of the feedforward exhaust pressure command <b>228</b> and the exhaust pressure feedback command <b>244</b>. Any method of mixing a feedforward and feedback command known in the art is contemplated herein.</p>
<p id="p-0026" num="0025">The inner loop control module <b>212</b> further provides a VGT command <b>232</b> in response to the exhaust pressure command <b>250</b>. In certain embodiments, the VGT command <b>232</b> is an output of a control algorithm that utilizes the exhaust pressure command <b>250</b> as a target value, that determines an exhaust pressure error term <b>240</b> by comparing the exhaust pressure command <b>250</b> to the current exhaust pressure <b>226</b>, and by applying any known control scheme to the resulting exhaust pressure error term <b>240</b>. The operation to control the VGT command <b>232</b> in response to the exhaust pressure error term <b>240</b> may be implemented as an inner loop controller to an outer loop control scheme that controls the current charge flow <b>220</b> and the current EGR flow <b>222</b>. Therefore, the VGT command <b>232</b> may be a VGT inner loop command <b>248</b>, and/or the VGT inner loop command <b>248</b> may be a preliminary VGT command <b>232</b> subject to modification by other algorithms (not shown). In certain embodiments, the controller <b>104</b> further includes an EGR valve command module <b>214</b> that determines an EGR valve command <b>234</b> in response to the EGR valve feedback command <b>246</b> and the feedforward EGR valve position command <b>230</b>.</p>
<p id="p-0027" num="0026">In certain embodiments, the feedback module <b>210</b> further determines the exhaust pressure feedback command <b>244</b> and EGR valve feedback <b>246</b> command from a non-linear gain matrix <b>242</b> that includes a function of the EGR valve position <b>224</b>. The EGR valve command <b>234</b>, as noted previously, may be substituted for the EGR valve position <b>224</b> in certain embodiments. The non-linear gain matrix <b>242</b> enables various behaviors that may be desirable in certain embodiments dependent upon the system <b>100</b> response. The non-linear gain matrix <b>242</b> allows the system <b>100</b> to favor different control modes (e.g. EGR valve control over VGT position control) at various operating system conditions as deemed appropriate. Specific, non-limiting examples are described as follows.</p>
<p id="p-0028" num="0027">In one example, an exemplary non-linear gain matrix <b>242</b> favors EGR valve control of the current EGR flow at low flow rates and/or low EGR valve positions, and exhaust pressure control of the current EGR flow at high flow rates and high EGR valve positions. In the example, the non-linear gain matrix <b>242</b> may increase the response of the EGR valve or the VGT according to the favored control mechanism, and/or reduce the response of the EGR valve or the VGT according to the control mechanism that is not favored. In another example, the non-linear gain matrix <b>242</b> favors exhaust pressure control of the current charge flow <b>220</b>. In a further example, the non-linear gain matrix further favors EGR valve control of the current charge flow at high &#x394;P/P values, where the &#x394;P is a difference between the current exhaust pressure and a current intake pressure. Non-limiting examples of the &#x394;P value include the pressure in the exhaust manifold <b>118</b> minus the pressure in the intake manifold <b>108</b>, the pressure drop across the engine, the pressure of the exhaust stream <b>122</b> minus the pressure of the charge flow <b>110</b> stream, or other similar pressure differentials. The P is the current exhaust pressure, for example in the exhaust manifold <b>118</b>.</p>
<p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. 3A</figref> and <figref idref="DRAWINGS">FIG. 3B</figref> combine to form a schematic illustration of a control loop for controlling intake flow for an internal combustion engine. The intake flow is the current charge flow <b>220</b>, and/or a fresh air intake combined with the current EGR flow <b>222</b>, or equivalent streams that together describe the amount and composition of the charge flow <b>220</b>. The control loop includes receiving the target charge flow <b>216</b> and the target EGR fraction <b>302</b>.</p>
<p id="p-0030" num="0029">Following the top branch, a current charge flow value <b>220</b> is subtracted <b>308</b> to determine a charge flow error term <b>236</b>, and a charge flow control scheme <b>312</b> determines a pre-modified exhaust pressure feedback command <b>304</b>. The charge flow control scheme <b>312</b> includes any control scheme understood in the art to generate the pre-modified exhaust pressure feedback command <b>304</b> in response to the charge flow error term <b>236</b>, including without limitation a PID controller, a PI controller, and/or a fuzzy logic controller.</p>
<p id="p-0031" num="0030">Following the lower branch, a current charge flow value <b>220</b> is multiplied <b>310</b> by the target EGR fraction <b>302</b> to determine the target EGR flow <b>218</b>. In alternate embodiments, a main engine control scheme (not shown) provides a target EGR flow <b>218</b> directly, although it is more common that the target EGR fraction <b>302</b> is requested. The current EGR flow <b>222</b> is subtracted from the target EGR flow <b>218</b> to determine an EGR flow error term <b>238</b>, and an EGR flow control scheme <b>316</b> determines a pre-modified EGR valve feedback command <b>306</b>. The EGR flow control scheme <b>316</b> includes any control scheme understood in the art to generate the pre-modified EGR valve feedback command <b>304</b> in response to the EGR flow error term <b>238</b>, including without limitation a PID controller, a PI controller, and/or a fuzzy logic controller.</p>
<p id="p-0032" num="0031">The pre-modified exhaust pressure feedback command <b>304</b> and the pre-modified EGR valve feedback command <b>306</b> are provided to a non-linear gain matrix <b>318</b> which favors one of EGR valve control or exhaust pressure control in response to an EGR valve position <b>224</b> and/or an EGR valve command <b>234</b>. The EGR valve command <b>234</b> may be used when the response time of the EGR valve position <b>224</b> (i.e. the time lag between a commanded EGR valve position before the EGR valve achieves the commanded position) can be effectively ignored, and depends upon the responsiveness of the EGR valve hardware utilized in a specific system <b>100</b> as will be understood to one of skill in the art.</p>
<p id="p-0033" num="0032">The non-linear gain matrix <b>318</b> may further favor one of EGR valve control or exhaust pressure control in response to other operating conditions, including a current charge flow rate <b>220</b>, a current EGR flow rate <b>222</b>, and/or a current exhaust pressure <b>226</b>. The control outputs of the non-linear gain matrix <b>318</b> are passed through integrators <b>320</b>, <b>322</b> for integrator control; additionally or alternatively, the control outputs of the non-linear gain matrix <b>318</b> may be derivated, or left unadjusted for derivative or proportional control. Other control operations known in the art at blocks <b>320</b>, <b>322</b> may be performed, and several parameters may be acted on simultaneously or combined in the blocks <b>320</b>, <b>322</b> (e.g. a proportional and integral aspect of the feedback commands <b>244</b>, <b>246</b> may be acted upon and combined). The blocks <b>320</b>, <b>322</b> provide an exhaust pressure feedback command <b>244</b> and an EGR valve feedback command <b>246</b>.</p>
<p id="p-0034" num="0033">Again following the top branch, a feedforward exhaust pressure command <b>228</b> is added to determine an exhaust pressure command <b>250</b>. In the example control loop, an inner loop controller determines an exhaust pressure error term <b>240</b> by subtracting the current exhaust pressure <b>226</b> from the exhaust pressure command <b>250</b>, and an exhaust pressure control <b>326</b> scheme determines a VGT command in response to the exhaust pressure error term <b>240</b>.</p>
<p id="p-0035" num="0034">Following the bottom branch, a feedforward EGR valve position command <b>230</b> is added to determine an EGR valve command <b>234</b>. The VGT command <b>232</b> and the EGR valve command <b>234</b> are provided to an engine controller (not shown), which may be the same computing device as the controller <b>104</b>, and a sensors and parameter determination block <b>328</b> provides updated values for the current exhaust pressure <b>226</b>, current charge flow <b>220</b>, and current EGR flow <b>222</b>. Any of the operations shown in the control loop of <figref idref="DRAWINGS">FIGS. 3A and 3B</figref> are illustrative, and any similar operations known in the art are contemplated herein. Examples, without limitation, include any alternate methods of mixing a feedforward and feedback command, and alternate sign conventions for determining error terms <b>236</b>, <b>238</b>, <b>240</b>.</p>
<p id="p-0036" num="0035">The feedforward commands <b>228</b>, <b>230</b> are determined by any method understood in the art, including at least modeling of the system and/or test data from steady state operating points. The feedforward commands <b>228</b>, <b>230</b> are the preferred operating points of the system according to the target charge flow <b>216</b> and target EGR fraction <b>302</b>, and may be selected, without limitation, to provide desired system fuel economy, emissions characteristics, and/or preferred hardware operating positions. In certain embodiments, the feedforward commands <b>228</b>, <b>230</b> may be omitted at certain operating regions of the engine, and/or omitted entirely. Where the feedforward commands <b>228</b>, <b>230</b> are omitted, the system <b>100</b> operates only with feedback control according to the feedback commands <b>244</b>, <b>246</b>.</p>
<p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. 4</figref> is an illustration <b>400</b> of interactions between EGR flow <b>222</b>, exhaust pressure <b>226</b>, and EGR valve position <b>224</b>. The data in <figref idref="DRAWINGS">FIG. 4</figref> is illustrative for one engine configuration only, and will vary with the specific hardware for a given system. However, the general character of the data in the illustration <b>400</b> is broadly applicable to many engine configurations having a VGT. The type of data shown in <figref idref="DRAWINGS">FIG. 4</figref> can be readily generated for a given system by one of skill in the art with the benefit of the disclosures herein, for example by sweeping exhaust pressures at selected fixed EGR positions. The curves represent increasing EGR valve positions <b>224</b>, including 0% open <b>406</b>, 20% open <b>408</b>, 40% open <b>410</b>, 60% open <b>412</b>, 80% open <b>416</b>, and 100% open <b>418</b>. It is seen in <figref idref="DRAWINGS">FIG. 4</figref> that at a lower region <b>404</b> the VGT has very little effect on the EGR flow rate when the EGR valve is open at very low opening percentages, and that at an upper region <b>420</b> the EGR valve position has very little effect on the EGR flow rate. For example, opening the valve from 60% to 100% at an exhaust pressure of about 300 kPa only increase the EGR flow rate from about 5 kg/min to about 5.1 kg/min.</p>
<p id="p-0038" num="0037">Accordingly, an exemplary non-linear gain matrix <b>318</b> favors exhaust pressure based control of the EGR flow when the EGR valve position <b>224</b> is at medium to high values, and favors EGR valve position based control of the EGR flow when the EGR valve is at a low value or closed. It is further seen that a portion of some of the curves <b>412</b>, <b>416</b>, <b>418</b> have a reverse-acting portion, or non-monotonic portion <b>420</b>. The non-linear gain matrix <b>318</b> may be configured, and/or the feedforward exhaust pressure command <b>228</b> may be calculated, to manage the non-monotonic portion <b>420</b>, for example by utilizing EGR valve control in the non-monotonic portion <b>420</b>, or by open-loop control of the exhaust pressure out of the non-monotonic portion <b>420</b> before closed-loop feedback control is resumed. In certain embodiments, the non-linear gain matrix <b>318</b> excludes VGT control of the EGR flow rate in the region <b>404</b>, and excludes EGR valve control of the EGR flow rate in the region <b>402</b>. In alternate embodiments, the non-linear gain matrix <b>318</b> diminishes VGT control of the EGR flow rate in the region <b>404</b>, and diminishes EGR valve control of the EGR flow rate in the region <b>402</b>.</p>
<p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. 5</figref> is an illustration <b>500</b> of interactions between charge flow <b>220</b>, exhaust pressure <b>226</b>, and EGR valve position <b>224</b>. The data in <figref idref="DRAWINGS">FIG. 5</figref> is illustrative for one engine configuration only, and will vary with the specific hardware for a given system. The type of data shown in <figref idref="DRAWINGS">FIG. 5</figref> can be readily generated for a given system by one of skill in the art with the benefit of the disclosures herein. The curves represent increasing EGR valve positions <b>224</b>, including 0% open <b>506</b>, 20% open <b>508</b>, 40% open <b>510</b>, 60% open <b>512</b>, 80% open <b>516</b>, and 100% open <b>518</b>. The curves exhibit a maximum and reversal at the right-hand side of the illustration <b>500</b>. The reversal occurs for very high values of &#x394;P/P where, as stated preceding, the &#x394;P is a difference between the exhaust pressure and an intake pressure for the engine, and the P is the exhaust pressure.</p>
<p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. 5</figref> illustrates that, for a wide range of exhaust pressure values, the EGR valve position has little effect on the charge flow amount. It is also seen that, at very high values of &#x394;P/P, or alternatively at very high values of the exhaust pressure, the EGR valve position can affect the charge flow amount. Accordingly, at high &#x394;P/P values an exemplary controller <b>104</b> further includes EGR valve position into the control of charge flow. In certain embodiments, the EGR valve position is not included in the control of charge flow at any engine operating conditions.</p>
<p id="p-0041" num="0040">Accordingly, an exemplary non-linear gain matrix <b>318</b> favors exhaust pressure control of charge flow at exhaust pressures below a very high exhaust pressure threshold (e.g. below about 300 kPa in the example), and/or at any engine condition except where a very high &#x394;P/P is present. The exemplary non-linear gain matrix <b>318</b> further includes EGR valve control of the charge flow above the very high exhaust pressure threshold and/or at engine conditions where a very high &#x394;P/P is present.</p>
<p id="p-0042" num="0041"><figref idref="DRAWINGS">FIGS. 6A and 6B</figref> combine as another schematic illustration of a control loop <b>600</b> for controlling intake flow for an internal combustion engine. The control loop <b>600</b> controls a target charge flow <b>216</b> and a target EGR fraction <b>302</b> using feedback terms of current charge flow <b>220</b> and current EGR flow <b>222</b>. The overall control loop <b>600</b>, in certain embodiments, is an outer loop control. The control loop <b>600</b> includes an inner loop control <b>602</b>, which controls an exhaust pressure feedback command <b>244</b> and an EGR valve feedback command <b>246</b> in an inner loop that provides a VGT command <b>232</b> with a feedback term of exhaust pressure <b>226</b>. Thus, in certain embodiments, the controller <b>104</b> provides a VGT command <b>232</b> in response to the exhaust pressure command <b>244</b> and the current exhaust pressure <b>226</b> by determining a VGT inner loop command in response to the exhaust pressure error term <b>240</b>.</p>
<p id="p-0043" num="0042">As is evident from the figures and text presented above, a variety of embodiments according to the present invention are contemplated.</p>
<p id="p-0044" num="0043">One exemplary embodiment is a method including operating an internal combustion engine having a variable geometry turbocharger (VGT) and interpreting a target charge flow, a current charge flow, a target exhaust gas recirculation (EGR) flow, and a current EGR flow. The method further includes determining a charge flow error term in response to the current charge flow and the target charge flow, determining an EGR flow error term in response to the target EGR flow and the current EGR flow, interpreting an EGR valve position, and determining an exhaust pressure feedback command and an EGR valve feedback command in response to the charge flow error term, the EGR flow error term, and the EGR valve position. The method further includes interpreting a feedforward exhaust pressure command and a feedforward EGR valve position command, determining an exhaust pressure command in response to the feedforward exhaust pressure command and the exhaust pressure feedback command, and providing a VGT command in response to the exhaust pressure command.</p>
<p id="p-0045" num="0044">Certain embodiments of the method include one or more of the following described features and operations.</p>
<p id="p-0046" num="0045">The exemplary method includes determining an exhaust pressure error term in response to the exhaust pressure command and a current exhaust pressure, where providing a VGT command in response to the exhaust pressure command further includes determining a VGT inner loop command in response to the exhaust pressure error term. The method further includes determining the exhaust pressure feedback command and the EGR valve feedback command from a non-linear gain matrix that includes a function of the EGR valve position. The method further includes the non-linear gain matrix favoring EGR valve control of the current EGR flow at low EGR valve positions and low exhaust pressures, and favoring exhaust pressure control of the current EGR flow at high EGR valve positions and high exhaust pressures. The method further includes the non-linear gain matrix favoring exhaust pressure control of the current charge flow. The method further includes the non-linear gain matrix further favoring EGR valve control of the current charge flow at high &#x394;P/P values, where the &#x394;P is the pressure drop across the engine, or a difference between the current exhaust pressure and a current intake pressure, and where the P is the current exhaust pressure.</p>
<p id="p-0047" num="0046">Another exemplary embodiment is a system including an internal combustion engine having a variable geometry turbocharger (VGT) and an intake manifold that provides a charge flow to the internal combustion engine, the charge flow comprising fresh air flow combined with exhaust gas recirculation (EGR) flow, the intake manifold positioned downstream of the VGT on an intake side. The system further includes an exhaust manifold positioned upstream of the VGT on an exhaust side and a controller structured to perform certain operations for controlling the intake flow with exhaust gas pressure. The controller interprets a target charge flow, a current charge flow, a target exhaust gas recirculation (EGR) flow, a current EGR flow, and an EGR valve position. The controller determines a charge flow error term in response to the current charge flow and the target charge flow, and an EGR flow error term in response to the target EGR flow and the current EGR flow. The controller further determines an exhaust pressure feedback command and an EGR valve feedback command in response to the charge flow error term, the EGR flow error term, and the EGR valve position. The controller further interprets a feedforward exhaust pressure command and a feedforward EGR valve position command, determines an exhaust pressure command in response to the feedforward exhaust pressure command and the exhaust gas feedback command, and provides a VGT command in response to the exhaust pressure command.</p>
<p id="p-0048" num="0047">Yet another exemplary embodiment is an apparatus including a reference module that interprets a target charge flow and a target exhaust gas recirculation (EGR) flow. The apparatus includes an operating conditions module that interprets a current charge flow, a current EGR flow, and an EGR valve position. The apparatus further includes an error determination module that determines a charge flow error term in response to the current charge flow and the target charge flow, and determines an EGR flow error term in response to the target EGR flow and the current EGR flow. The apparatus further includes a feedback module that determines an exhaust pressure feedback command and an EGR valve feedback command in response to the charge flow error term, the EGR flow error term, and the EGR valve position. In certain embodiments, the feedback module determines the exhaust pressure feedback command and an EGR valve feedback command in response to an EGR valve command instead of, or in addition to, the EGR valve position. The apparatus further includes a feedforward module that interprets a feedforward exhaust pressure command and a feedforward EGR valve position command, and an inner loop control module that determines an exhaust pressure command in response to the feedforward exhaust pressure command and the exhaust pressure feedback command. The inner loop control module further provides a VGT command in response to the exhaust pressure command. The apparatus further includes an EGR valve command module that determines an EGR valve command in response to the EGR valve feedback command and the feedforward EGR valve position command.</p>
<p id="p-0049" num="0048">Certain embodiments of the apparatus include one or more of the following described features and operations.</p>
<p id="p-0050" num="0049">The apparatus further includes the error determination module further determining an exhaust pressure error term in response to the exhaust pressure command and a current exhaust pressure, and the inner loop control module further determining a VGT inner loop command in response to the exhaust pressure error term, and providing the VGT command further in response to the VGT inner loop command. The feedback module further determines the exhaust pressure feedback command and EGR valve feedback command from a non-linear gain matrix that includes a function of the EGR valve position. In certain embodiments, the non-linear gain matrix favors EGR valve control of the current EGR flow at low flow rates and low EGR valve positions, and exhaust pressure control of the current EGR flow at high flow rates and high EGR valve positions. In certain embodiments, the non-linear gain matrix favors exhaust pressure control of the current charge flow. In certain further embodiments, the non-linear gain matrix further favors EGR valve control of the current charge flow at high &#x394;P/P values, where the &#x394;P is a difference between the current exhaust pressure and a current intake pressure, and where the P is the current exhaust pressure.</p>
<p id="p-0051" num="0050">Another exemplary embodiment is a method including operating an internal combustion engine having a variable geometry turbocharger (VGT), interpreting a target charge flow, a current charge flow, a target exhaust gas recirculation (EGR) flow, and a current EGR flow, and determining a charge flow error term in response to the current charge flow and the target charge flow. The method further includes determining an EGR flow error term in response to the target EGR flow and the current EGR flow, and determining an exhaust pressure feedback command in response to the charge flow error term and the EGR flow error term. The method further includes interpreting a feedforward exhaust pressure command, and determining an exhaust pressure command in response to the feedforward exhaust pressure command and the exhaust pressure feedback command. The exemplary method further includes providing a VGT command in response to the exhaust pressure command.</p>
<p id="p-0052" num="0051">A further embodiment of the method includes interpreting an EGR valve position, where determining the exhaust pressure feedback command is further in response to the EGR valve position. A further method includes determining an EGR valve feedback command in response to the charge flow error term, the EGR flow error term, and the EGR valve position. In certain embodiments, the method includes providing a response to the EGR flow error term that is primarily weighted to the exhaust pressure feedback command when the EGR valve position is above 40% open, and that is primarily weighted to the EGR valve feedback command when the EGR valve position is below 40% open. Alternatively, the method includes providing a response to the EGR flow error term that is primarily weighted to the exhaust pressure feedback command when the EGR valve position is above 60% open, and that is primarily weighted to the EGR valve feedback command when the EGR valve position is below 60% open.</p>
<p id="p-0053" num="0052">In certain embodiments, the method includes determining the exhaust pressure feedback command and the EGR valve feedback command from a non-linear gain matrix that is a function of the EGR valve position. In a further embodiment, the non-linear gain matrix favors EGR valve control of the current EGR flow at low EGR valve positions and low exhaust pressures, and exhaust pressure control of the current EGR flow at high EGR valve positions and high exhaust pressures. Additionally or alternatively, the non-linear gain matrix favors exhaust pressure control of the current charge flow. In certain embodiments, the non-linear gain matrix further favors EGR valve control of the current charge flow at high &#x394;P/P values, wherein the &#x394;P is a difference between the current exhaust pressure and a current intake pressure, and wherein the P is the current exhaust pressure. In certain embodiments, the method includes determining an exhaust pressure error term in response to the exhaust pressure command and a current exhaust pressure, where providing a VGT command in response to the exhaust pressure command further includes determining a VGT inner loop command in response to the exhaust pressure error term.</p>
<p id="p-0054" num="0053">Yet another exemplary embodiment is a system including an internal combustion engine having a variable geometry turbocharger (VGT), an intake manifold that provides a charge flow to the internal combustion engine, where the charge flow includes fresh air flow combined with exhaust gas recirculation (EGR) flow, and where the intake manifold is positioned downstream of the VGT on an intake side. The system further includes an exhaust manifold positioned upstream of the VGT on an exhaust side, and a controller including modules structured to functionally execute operations for controlling charge flow and/or EGR flow for the engine.</p>
<p id="p-0055" num="0054">The exemplary controller includes a reference module that interprets a target charge flow, and a target exhaust gas recirculation (EGR) flow. The controller further includes an operating conditions module that interprets a current charge flow and a current EGR flow, and an error determination module that determines a charge flow error term in response to the current charge flow and the target charge flow. The error determination module further determines an EGR flow error term in response to the target EGR flow and the current EGR flow. The controller further includes a feedback module that determines an exhaust pressure feedback command in response to the charge flow error term and the EGR flow error term, and a feedforward module that interprets a feedforward exhaust pressure command. The exemplary controller further includes an inner loop control module that determines an exhaust pressure command in response to the feedforward exhaust pressure command and the exhaust pressure feedback command, and that provides a VGT command in response to the exhaust pressure command. The VGT is responsive to the VGT command.</p>
<p id="p-0056" num="0055">The exemplary system further includes an EGR valve disposed between the VGT and the intake manifold, where the operating conditions module further determines an EGR valve position, and where the feedback module further determines the exhaust pressure feedback command in response to the EGR valve position. An exemplary system further includes the feedback module determining an EGR valve feedback command in response to the charge flow error term, the EGR flow error term, and the EGR valve position, where the feedforward module further determines a feedforward EGR valve position command. The exemplary controller further includes an EGR valve command module that determines an EGR valve command in response to the EGR valve feedback command and the feedforward EGR valve position command, and the EGR valve is responsive to the EGR valve command.</p>
<p id="p-0057" num="0056">A further embodiment of the system includes the feedback module further determining the exhaust pressure feedback command and EGR valve feedback command from a non-linear gain matrix that is a function of the EGR valve position. In certain embodiments, the non-linear gain matrix favors EGR valve control of the current EGR flow at low flow rates and low EGR valve positions, and favors exhaust pressure control of the current EGR flow at high flow rates and high EGR valve positions. In certain embodiments, the non-linear gain matrix favors exhaust pressure control of the current charge flow. In certain further embodiments, the non-linear gain matrix further favors EGR valve control of the current charge flow at high &#x394;P/P values, where the &#x394;P is a difference between the current exhaust pressure and a current intake pressure, and wherein the P is the current exhaust pressure.</p>
<p id="p-0058" num="0057">In certain embodiments, the system includes the error determination module further determining an exhaust pressure error term in response to the exhaust pressure command and a current exhaust pressure. The inner loop control module further determines a VGT inner loop command in response to the exhaust pressure error term, and provides the VGT command further in response to the VGT inner loop command.</p>
<p id="p-0059" num="0058">While the invention has been illustrated and described in detail in the drawings and foregoing description, the same is to be considered as illustrative and not restrictive in character, it being understood that only certain exemplary embodiments have been shown and described and that all changes and modifications that come within the spirit of the inventions are desired to be protected. In reading the claims, it is intended that when words such as &#x201c;a,&#x201d; &#x201c;an,&#x201d; &#x201c;at least one,&#x201d; or &#x201c;at least one portion&#x201d; are used there is no intention to limit the claim to only one item unless specifically stated to the contrary in the claim. When the language &#x201c;at least a portion&#x201d; and/or &#x201c;a portion&#x201d; is used the item can include a portion and/or the entire item unless specifically stated to the contrary.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method, comprising:
<claim-text>operating an internal combustion engine having a variable geometry turbocharger (VGT);</claim-text>
<claim-text>interpreting a target charge flow, a current charge flow, a target exhaust gas recirculation (EGR) flow, and a current EGR flow;</claim-text>
<claim-text>determining a charge flow error term in response to the current charge flow and the target charge flow;</claim-text>
<claim-text>determining an EGR flow error term in response to the target EGR flow and the current EGR flow;</claim-text>
<claim-text>determining an exhaust pressure feedback command in response to the charge flow error term and the EGR flow error term;</claim-text>
<claim-text>interpreting a feedforward exhaust pressure command;</claim-text>
<claim-text>determining an exhaust pressure command in response to the feedforward exhaust pressure command and the exhaust pressure feedback command; and</claim-text>
<claim-text>providing a VGT command in response to the exhaust pressure command.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising interpreting an EGR valve position, and wherein the determining the exhaust pressure feedback command is further in response to the EGR valve position.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00002">claim 2</claim-ref>, further comprising determining an EGR valve feedback command in response to the charge flow error term, the EGR flow error term, and the EGR valve position.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00003">claim 3</claim-ref>, further comprising providing a response to the EGR flow error term that is primarily weighted to the exhaust pressure feedback command when the EGR valve position is above 40% open, and that is primarily weighted to the EGR valve feedback command when the EGR valve position is below 40% open.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00003">claim 3</claim-ref>, further comprising providing a response to the EGR flow error term that is primarily weighted to the exhaust pressure feedback command when the EGR valve position is above 60% open, and that is primarily weighted to the EGR valve feedback command when the EGR valve position is below 60% open.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein the exhaust pressure feedback command and the EGR valve feedback command are determined from a non-linear gain matrix comprising a function of the EGR valve position.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein the non-linear gain matrix favors EGR valve control of the current EGR flow at low EGR valve positions and low exhaust pressures, and exhaust pressure control of the current EGR flow at high EGR valve positions and high exhaust pressures.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method of <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the non-linear gain matrix favors exhaust pressure control of the current charge flow.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The method of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the non-linear gain matrix further favors EGR valve control of the current charge flow at high &#x394;P/P values, wherein the &#x394;P is a difference between the current exhaust pressure and a current intake pressure, and wherein the P is the current exhaust pressure.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising determining an exhaust pressure error term in response to the exhaust pressure command and a current exhaust pressure, wherein providing a VGT command in response to the exhaust pressure command further comprises determining a VGT inner loop command in response to the exhaust pressure error term.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. An apparatus, comprising:
<claim-text>a reference module structured to interpret a target charge flow, and a target exhaust gas recirculation (EGR) flow;</claim-text>
<claim-text>an operating conditions module structured to interpret a current charge flow and a current EGR flow;</claim-text>
<claim-text>an error determination module structured to determine a charge flow error term in response to the current charge flow and the target charge flow, and to determine an EGR flow error term in response to the target EGR flow and the current EGR flow;</claim-text>
<claim-text>a feedback module structured to determine an exhaust pressure feedback command in response to the charge flow error term and the EGR flow error term;</claim-text>
<claim-text>a feedforward module structured to interpret a feedforward exhaust pressure command; and</claim-text>
<claim-text>an inner loop control module structured to determine an exhaust pressure command in response to the feedforward exhaust pressure command and the exhaust pressure feedback command and to provide a VGT command in response to the exhaust pressure command.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The apparatus of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the operating conditions module is further structured to determine an EGR valve position, and wherein the feedback module is further structured to determine the exhaust pressure feedback command in response to the EGR valve position.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The apparatus of <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein the feedback module is further structured to determine an EGR valve feedback command in response to the charge flow error term, the EGR flow error term, and the EGR valve position;
<claim-text>wherein the feedforward module is further structured to determine an EGR feedforward EGR valve position; the apparatus further comprising an EGR valve command module structured to determine an EGR valve command in response to the EGR valve feedback command and the feedforward EGR valve position command.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The apparatus of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the feedback module is further structured to determine the exhaust pressure feedback command and EGR valve feedback command from a non-linear gain matrix comprising a function of the EGR valve position.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The apparatus of <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein the non-linear gain matrix favors EGR valve control of the current EGR flow at low flow rates and low EGR valve positions, and exhaust pressure control of the current EGR flow at high flow rates and high EGR valve positions.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The apparatus of <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein the non-linear gain matrix favors exhaust pressure control of the current charge flow.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The apparatus of <claim-ref idref="CLM-00016">claim 16</claim-ref>, wherein the non-linear gain matrix further favors EGR valve control of the current charge flow at high &#x394;P/P values, wherein the &#x394;P is a difference between the current exhaust pressure and a current intake pressure, and wherein the P is the current exhaust pressure.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The apparatus of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the error determination module is further structured to determine an exhaust pressure error term in response to the exhaust pressure command and a current exhaust pressure, and wherein the inner loop control module is further structured to determine a VGT inner loop command in response to the exhaust pressure error term, and to provide the VGT command further in response to the VGT inner loop command.</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. A system, comprising:
<claim-text>an internal combustion engine having a variable geometry turbocharger (VGT);</claim-text>
<claim-text>an intake manifold that provides a charge flow to the internal combustion engine, the charge flow comprising fresh air flow combined with exhaust gas recirculation (EGR) flow, the intake manifold positioned downstream of the VGT on an intake side;</claim-text>
<claim-text>an exhaust manifold positioned upstream of the VGT on an exhaust side;</claim-text>
<claim-text>a controller, comprising:
<claim-text>a reference module structured to interpret a target charge flow, and a target exhaust gas recirculation (EGR) flow;</claim-text>
<claim-text>an operating conditions module structured to interpret a current charge flow and a current EGR flow;</claim-text>
<claim-text>an error determination module structured to determine a charge flow error term in response to the current charge flow and the target charge flow, and to determine an EGR flow error term in response to the target EGR flow and the current EGR flow;</claim-text>
<claim-text>a feedback module structured to determine an exhaust pressure feedback command in response to the charge flow error term and the EGR flow error term;</claim-text>
<claim-text>a feedforward module structured to interpret a feedforward exhaust pressure command; and</claim-text>
<claim-text>an inner loop control module structured to determine an exhaust pressure command in response to the feedforward exhaust pressure command and the exhaust pressure feedback command and to provide a VGT command in response to the exhaust pressure command; and</claim-text>
</claim-text>
<claim-text>wherein the VGT is responsive to the VGT command.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The system of <claim-ref idref="CLM-00019">claim 19</claim-ref>, further comprising an EGR valve disposed between the VGT and the intake manifold, wherein the operating conditions module is further structured to determine an EGR valve position, and wherein the feedback module is further structured to determine the exhaust pressure feedback command in response to the EGR valve position.</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. The system of <claim-ref idref="CLM-00020">claim 20</claim-ref>, wherein the feedback module is further structured to determine an EGR valve feedback command in response to the charge flow error term, the EGR flow error term, and the EGR valve position; wherein the feedforward module is further structured to determine a feedforward EGR valve position command; wherein the controller further comprises an EGR valve command module structured to determine an EGR valve command in response to the EGR valve feedback command and the feedforward EGR valve position command; and wherein the EGR valve is responsive to the EGR valve command.</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. The system of <claim-ref idref="CLM-00021">claim 21</claim-ref>, wherein the feedback module is further structured to determine the exhaust pressure feedback command and EGR valve feedback command from a non-linear gain matrix comprising a function of the EGR valve position.</claim-text>
</claim>
<claim id="CLM-00023" num="00023">
<claim-text>23. The system of <claim-ref idref="CLM-00022">claim 22</claim-ref>, wherein the non-linear gain matrix favors EGR valve control of the current EGR flow at low flow rates and low EGR valve positions, and exhaust pressure control of the current EGR flow at high flow rates and high EGR valve positions.</claim-text>
</claim>
<claim id="CLM-00024" num="00024">
<claim-text>24. The system of <claim-ref idref="CLM-00022">claim 22</claim-ref>, wherein the non-linear gain matrix favors exhaust pressure control of the current charge flow.</claim-text>
</claim>
<claim id="CLM-00025" num="00025">
<claim-text>25. The system of <claim-ref idref="CLM-00024">claim 24</claim-ref>, wherein the non-linear gain matrix further favors EGR valve control of the current charge flow at high &#x394;P/P values, wherein the &#x394;P is a difference between the current exhaust pressure and a current intake pressure, and wherein the P is the current exhaust pressure.</claim-text>
</claim>
<claim id="CLM-00026" num="00026">
<claim-text>26. The system of <claim-ref idref="CLM-00019">claim 19</claim-ref>, wherein the error determination module is further structured to determine an exhaust pressure error term in response to the exhaust pressure command and a current exhaust pressure, and wherein the inner loop control module is further structured to determine a VGT inner loop command in response to the exhaust pressure error term, and to provide the VGT command further in response to the VGT inner loop command. </claim-text>
</claim>
</claims>
</us-patent-grant>
