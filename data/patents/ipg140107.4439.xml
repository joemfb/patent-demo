<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625515-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625515</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13147409</doc-number>
<date>20090203</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<us-term-of-grant>
<us-term-extension>137</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20090101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>W</subclass>
<main-group>4</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20090101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>W</subclass>
<main-group>72</main-group>
<subgroup>00</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>370329</main-classification>
<further-classification>370401</further-classification>
<further-classification>4554521</further-classification>
</classification-national>
<invention-title id="d2e53">Method and apparatus for dynamic channel assignment and stream control in multi-hop wireless networks</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>2006/0114851</doc-number>
<kind>A1</kind>
<name>Gupta et al.</name>
<date>20060600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370329</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>2006/0215605</doc-number>
<kind>A1</kind>
<name>Srikrishna et al.</name>
<date>20060900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370329</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2007/0087756</doc-number>
<kind>A1</kind>
<name>Hoffberg</name>
<date>20070400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455450</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2007/0147248</doc-number>
<kind>A1</kind>
<name>Kodialam et al.</name>
<date>20070600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370235</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2008/0080545</doc-number>
<kind>A1</kind>
<name>Wong et al.</name>
<date>20080400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370437</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2008/0107069</doc-number>
<kind>A1</kind>
<name>Wu et al.</name>
<date>20080500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370329</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2008/0151821</doc-number>
<kind>A1</kind>
<name>Cho et al.</name>
<date>20080600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370329</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>WO</country>
<doc-number>WO02093782</doc-number>
<date>20021100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00009">
<othercit>Royer et al., &#x201c;A Review of Current Routing Protocols for Ad Hoc Mobile Wireless Networks&#x201d;, IEEE Personal Communications, IEEE Communications Society, US, vol. 6, No. 2, Apr. 1, 1999, pp. 46-55.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00010">
<othercit>International Search Report for PCT/US2009/000671 dated Sep. 10, 2009.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>8</number-of-claims>
<us-exemplary-claim>4</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>370329</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>11</number-of-drawing-sheets>
<number-of-figures>15</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20110286418</doc-number>
<kind>A1</kind>
<date>20111124</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Liu</last-name>
<first-name>Hang</first-name>
<address>
<city>Yardley</city>
<state>PA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Luo</last-name>
<first-name>Lin</first-name>
<address>
<city>Piscataway</city>
<state>NJ</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Liu</last-name>
<first-name>Hang</first-name>
<address>
<city>Yardley</city>
<state>PA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Luo</last-name>
<first-name>Lin</first-name>
<address>
<city>Piscataway</city>
<state>NJ</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<last-name>Shedd</last-name>
<first-name>Robert D.</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
<agent sequence="02" rep-type="attorney">
<addressbook>
<last-name>Schaefer</last-name>
<first-name>Jerome G.</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Thomson Licensing</orgname>
<role>03</role>
<address>
<city>Boulogne-Billancourt</city>
<country>FR</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Sefcheck</last-name>
<first-name>Gregory</first-name>
<department>2477</department>
</primary-examiner>
<assistant-examiner>
<last-name>Smith</last-name>
<first-name>Joshua</first-name>
</assistant-examiner>
</examiners>
<pct-or-regional-filing-data>
<document-id>
<country>WO</country>
<doc-number>PCT/US2009/000671</doc-number>
<kind>00</kind>
<date>20090203</date>
</document-id>
<us-371c124-date>
<date>20110802</date>
</us-371c124-date>
</pct-or-regional-filing-data>
<pct-or-regional-publishing-data>
<document-id>
<country>WO</country>
<doc-number>WO2010/090617</doc-number>
<kind>A </kind>
<date>20100812</date>
</document-id>
</pct-or-regional-publishing-data>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A method and apparatus are described for determining a route, channel assignment, multiple-in, multiple out stream control and a transmission schedule in a network, including determining the route responsive to long term network conditions and long term traffic conditions of the network, determining the channel assignment, the multiple-in multiple-out stream control, and the transmission schedule responsive to local channel conditions, local link conditions and local traffic conditions of the network and determining if there has been a change in one of the long tem network conditions and the long term traffic conditions of the network.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="254.25mm" wi="166.45mm" file="US08625515-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="229.36mm" wi="155.19mm" file="US08625515-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="154.69mm" wi="139.36mm" file="US08625515-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="253.24mm" wi="175.68mm" file="US08625515-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="193.55mm" wi="180.42mm" file="US08625515-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="194.48mm" wi="185.08mm" file="US08625515-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="253.92mm" wi="165.35mm" file="US08625515-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="263.06mm" wi="203.62mm" file="US08625515-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="212.01mm" wi="160.53mm" file="US08625515-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="203.03mm" wi="172.55mm" file="US08625515-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="123.36mm" wi="128.95mm" file="US08625515-20140107-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="127.17mm" wi="184.15mm" file="US08625515-20140107-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<p id="p-0002" num="0001">This application claims the benefit, under 35 U.S.C. &#xa7;365 of International Application PCT/US09/000671, filed Feb. 3, 2009, which was published in accordance with PCT Article 21(2) on Aug. 12, 2010 in English.</p>
<heading id="h-0001" level="1">FIELD OF THE INVENTION</heading>
<p id="p-0003" num="0002">The present invention relates in general to wireless networks and, in particular, to dynamic channel assignment and multiple-in multiple-out steam control in multi-hop wireless networks.</p>
<heading id="h-0002" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0004" num="0003">In multi-hop wireless networks, a node can be equipped with multiple radios, each radio with multiple-input and multiple-output (MIMO) antenna technology. MIMO is the use of multiple antennas and advanced signal processing techniques at the physical layer of both the transmitter and receiver to improve communication performance. It offers significant increases in data throughput via spatial multiplexing or spatial reuse, without consuming additional bandwidth. In spatial multiplexing, MIMO can allow transmitting multiple independent data streams simultaneously over the MIMO antenna elements, each stream is transmitted from a different transmit antenna element in the same frequency channel. If these signals arrive at the receiver antenna array with different spatial signatures, the receiver can separate these streams. MIMO link can also suppress interference from neighboring links. Multiple streams can be transmitted simultaneously with interference suppressed in the same vicinity using the same frequency channel as long as the total number of streams (data streams and interference streams) is not greater than the number of receiving antennas. Furthermore each node equips multiple radios and can simultaneously operate on multiple channels. Of course, the total number of available channels is limited. The performance of a multi-hop wireless network depends on the channels that radio nodes operate and the MIMO streams that a radio transmits. The operating channel of a radio and the number of streams that a radio can transmit are inter-dependent.</p>
<p id="p-0005" num="0004">In one prior art scheme, channel assignment has been studied in multi-radio multi-hop wireless mesh networks. However, the previous work has not considered the effect of MIMO or spatial multiplexing or spatial reuse on channel assignment. In another prior art scheme, the capacity gain of stream control in single-channel MIMO wireless mesh networks has been investigated. However, a single channel was used and the channel assignment was not considered. Channel assignment and MIMO stream control are inter-dependent and also depend on the traffic demand, data routing and transmission scheduling in multi-radio, multi-channel, multi-hop, MIMO wireless networks (M4 wireless networks). They should be determined jointly with data routing and transmission scheduling to obtain the optimal performance.</p>
<p id="p-0006" num="0005">To obtain full benefits of multi-radios and MIMO technique, the channel assignment and the number and mode of MIMO stream transmissions for a radio should be determined jointly. In addition, data routing and transmission scheduling should also be considered while determining how to assign the operating channel of the radios (called channel assignment) and select MIMO streams and modes to transmit/receive for radios (called stream control) in multi-radio, multi-channel, multi-hop wireless networks with MIMO links. In the past, channel assignment and stream control has not been jointly determined nor has data routing and transmission scheduling been taken into consideration when performing channel assignment and stream control, in particular for multi-radio, multi-channel, multi-hop wireless networks with MIMO links.</p>
<heading id="h-0003" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0007" num="0006">The present invention is directed to a method and apparatus to jointly assign the operating channels/frequency spectrum of one or more radios in a node and the streams of the multiple-input and multiple-output (MIMO) radio in multi-hop wireless networks. The present invention describes the methods of joint channel assignment, MIMO stream control, data routing and transmission scheduling for bandwidth access and sharing along time, frequency, and space domains in multi-hop wireless networks with MIMO links in order to maximize the network throughput subject to some fairness constraints.</p>
<p id="p-0008" num="0007">The present invention is directed to a method and apparatus for joint channel assignment, stream control, routing and scheduling in M4 wireless networks. In addition, the present invention describes the method in which routing is established to select the optimal path in terms of longer-time average traffic demands and channel quality for system stability, while scheduling, channel assignment and stream control are jointly determined for opportunistic bandwidth access and sharing in time, frequency and space dimensions based on instantaneous local channel condition variations and traffic dynamics.</p>
<p id="p-0009" num="0008">A method and apparatus are described for determining a route, channel assignment, multiple-in, multiple out stream control and a transmission schedule in a network, including determining the route responsive to long term network conditions and long term traffic conditions of the network, determining the channel assignment, the multiple-in multiple-out stream control, and the transmission schedule responsive to local channel conditions, local link conditions and local traffic conditions of the network and determining if there has been a change in one of the long term network conditions and the long term traffic conditions of the network.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0010" num="0009">The present invention is best understood from the following detailed description when read in conjunction with the accompanying drawings. The drawings include the following figures briefly described below:</p>
<p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. 1</figref> illustrates a multi-radio, multi-channel, multi-hop, MIMO (M4) wireless mesh network (WMN).</p>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 2</figref> illustrates the MIMO streams and their channel gains for link (A, B) and link (C, D).</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 3</figref> is a flowchart for the routing, scheduling, channel assignment and stream control procedure in accordance with an exemplary embodiment of the present invention.</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 4</figref> is a flowchart for the joint scheduling, channel assignment and stream control method in accordance with an exemplary embodiment of the present invention.</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIGS. 5(</figref><i>a</i>), <b>5</b>(<i>b</i>), <b>5</b>(<i>c</i>) and <b>5</b>(<i>d</i>) illustrate an example for the joint scheduling, channel assignment and stream control method in a multi-hop wireless network with six nodes in accordance with an exemplary embodiment of the present invention.</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 6</figref> is a flowchart for the channel assignment procedure (first stage) in the two-stage channel assignment and stream control method in accordance to an exemplary embodiment of the present invention.</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 7</figref> is a flowchart for the stream control procedure (second stage) in the two-stage channel assignment and stream control method in accordance to an exemplary embodiment of the present invention.</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 8</figref> is a flowchart for two links sharing a channel with MIMO in the two-stage channel assignment and stream control method in accordance with an exemplary embodiment of the present invention.</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIGS. 9(</figref><i>a</i>) and <b>9</b>(<i>b</i>) illustrate an example for stream control and link pairing in a wireless network with six nodes.</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 10</figref> is a block diagram of an exemplary implementation of the central controller of the present invention.</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 11</figref> is a block diagram of an exemplary implementation of the mesh access point/mesh router/mesh node in accordance with the present invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS</heading>
<p id="p-0022" num="0021">As used herein, &#x201c;/&#x201d; denotes alternative names for the same or similar components or structures. That is, a &#x201c;/&#x201d; can be taken as meaning &#x201c;or&#x201d; as used herein.</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 1</figref> shows a multi-radio, multi-channel, multi-hop, MIMO (M4) wireless mesh network (WMN). Each mesh node/mesh access point (MAP)/mesh router is equipped with one or more radios. Each radio has multiple MIMO antenna elements and can form MIMO links with neighboring radios if the radios operate on the same channel. Mesh nodes can aggregate traffic for wireless clients/stations (STAs) such as laptops and smart phones, in its coverage area. Mesh nodes are interconnected via wireless links to form a multi-hop wireless backbone infrastructure for relaying the traffic for each other. The mesh nodes participate in routing and data forwarding. Some of the wireless mesh nodes are equipped with gateway functionality to enable connectivity to the wired Internet and called gateway nodes. In such networks traffic is mainly routed by the WMN wireless backbone between the non-gateway nodes and the wired Internet through the gateways.</p>
<p id="p-0024" num="0023">The WMN backbone network is modeled as a directed graph G=(V,E) where V represents the set of nodes in the network and E the set of directed links. If node u can transmit directly to node v, then this direct transmission is represented by a link, u-&#x3e;v, with the link belonging to the set E. The set of gateway nodes is denoted by V<sub>G</sub><u style="single">&#x2282;</u>V and hence V<sub>M</sub>=V\V<sub>G </sub>(V<sub>M </sub>belongs to V, and V<sub>M </sub>and V<sub>G </sub>are mutually exclusive) represents the set of the non-gateway nodes. The aggregate user traffic load on node u is denoted by l(u). The load l(u) may be due to outgoing or incoming traffic. However, for ease of explanation, herein, it can be assumed that l(u) represents only outgoing traffic. The method and results easily apply (by flow reversal) to the more general case of both outgoing and incoming traffic.</p>
<p id="p-0025" num="0024">It can be assumed that there are C orthogonal channels available in the network numbered from 1 to C, for example, with IEEE 802.11b networks C=3 in the 2.4 GHz industrial, scientific and medical (ISM) band, and with 802.11a C=12 in the 5 GHz Unlicensed National Information Infrastructure (U-NII) band.</p>
<p id="p-0026" num="0025">A node u&#x2208;V has N(u) radios and F(u) denotes the set of channels assigned to node u and |F(u)| is the number of channels in F(u), i.e. the number of channels assigned to node u (obviously, |F(u)|&#x2266;N(u)). In single-antenna systems, one of the practical constraints on radio assignment is that it is not useful to have two radios tuned to the same channel at a given node, since local interference at the node will ensure that only one of them is active at any time. However, this constraint is relaxed in MIMO systems as explained below. A communication between two nodes u and v is possible only when there is a common channel among the sets F(u) and F(v).</p>
<p id="p-0027" num="0026">By exploiting multi-paths in indoor or outdoor environments, MIMO is able to provide very high data rate by simultaneously transmitting multiple independent data streams on the same wireless channel. This kind of simultaneous transmissions, referred to as spatial multiplexing, is very desirable to WMNs where network capacity is the main concern. Assume the transmitter u and the receiver v of a MIMO link e=(u, v) are equipped with K<sub>u </sub>and K<sub>v </sub>antenna elements, respectively, there can be no more than K<sub>e</sub>=min{K<sub>u</sub>K<sub>v</sub>} concurrent MIMO streams over link e. Furthermore MIMO can suppress interference from transmission between the neighboring nodes. The receiver can isolate and decode all incoming streams successfully as long as the total number of streams (including the data streams and the interference streams) is less than or equal to its number of antenna elements, i.e. the degree of freedom (DOF).</p>
<p id="p-0028" num="0027">On a MIMO link the channel gains for the streams can have quite large disparities. As an example, consider the four nodes in <figref idref="DRAWINGS">FIG. 1</figref>, labeled as A, B, C and D. Assume that each node has a single radio with K=4 antennas. Also consider two MIMO links (A, B) and (C, D), as shown in <figref idref="DRAWINGS">FIG. 2</figref>. The normalized gains of the four streams of the two links are 1, 1, 0.6 and 0.6. The two links are close to each other and thus are subject to mutual interference, so the total number of independent streams transmitted cannot be greater than four.</p>
<p id="p-0029" num="0028">A transmission mode (mode) represents the MIMO streams, the modulation and the channel coding used by a radio to transmit signals. If the two links transmit in a TDMA manner, then the total normalized throughput is 3.2. That is, if link (A,B) transmits four MIMO streams in a time slot and link (C,D) transmits four MIMO streams in the next time slot and link (A,B) then transmits four MIMO streams again in the next time slot, then the normalized throughput is 3.2. However, if the best two channel streams/modes are selected for transmission from each link, (that is, link (A, B) and link (C, D) each transmit two streams with maximum channel gains simultaneously) then the total normalized throughput is 4. How to select channel streams and modes for transmission is called stream control.</p>
<p id="p-0030" num="0029">R<sub>T </sub>denotes the transmission range. For direct communications, two nodes need to be within transmission range of each other, and need to have a common channel assigned to their radios. c(e, i, j) denotes the average link capacity or data rate for link/edge e=(u, v) when it works on channel i and transmits j independent streams. The number of interfering streams at the receiver is not greater than K&#x2212;j, where K is the number of antenna elements of the radio.</p>
<p id="p-0031" num="0030">R<sub>I </sub>denotes the interference range. Assume that R<sub>I </sub>is equal to q&#xd7;R<sub>T </sub>where q&#x2267;1. A pair of links that use the same channel and are within interference range may interfere with each other's communications. I(e)&#x2208;E denotes the set of edges that interfere with an edge e&#x2208;E. It should be noted that simultaneous link transmissions on two edges e<sub>1 </sub>and e<sub>2 </sub>that interfere with each other is possible, as long as these transmissions are on distinct channels or if the transmissions are on the same channel but the receivers have sufficient degrees of freedom to suppress interference.</p>
<p id="p-0032" num="0031">An optimal framework to maximize the capacity of the network while considering the fairness constraints is described first. A goal is to maximize a proportional parameter/factor &#x3bb; where at least &#x3bb;l(u) traffic throughput can be routed from each node u&#x2208;V to the wired Internet via the gateways. As defined above, l(u) represents the traffic load on node u. This problem is implicitly coupled with routing, channel assignment, scheduling and stream control problems. Hence, the present invention seeks 1) a channel assignment specifying the channels assigned to the radios on each node u&#x2208;V, denoted by F(u); 2) a network flow f(e,i,j), for each link e=(u, v)&#x2208;E, on each channel i belonging to F(e) and for each number of streams j over e and 3) a schedule that determines/establishes/specifies the set of simultaneous communications on each of available channels i=1, 2, . . . , C and MIMO streams at each time slot t, for t=1, 2, . . . , T where T is the period of the schedule. Here f(e,i,j) or f(u,v,i,j) denotes the average rate at which traffic is transmitted from node u to node v on channel i when using j streams. The network flow must satisfy flow conservation at all nodes when &#x3bb;l(u) flow is sourced (transmitted) from every node u&#x2208;V. A schedule is feasible if in every time slot the number of radios assigned for transmitting and receiving at a node u does not exceed the number of radios on node u, N(u), and the number of antennas dedicated at every radio for communication or for canceling out interference does not exceed the number of the radio's antenna elements. A schedule can achieve a particular flow f(e, i, j) if the average rate for the communication (e, i, j) over the T slots is f(e, i, j).</p>
<p id="p-0033" num="0032">Let &#x3b4;(u) denote all the edges in E that are incident (incoming or outgoing) to node u&#x2208;V. Among these the incoming edges are denoted by &#x3b4;<sup>&#x2212;</sup>(u) and the outgoing links are denoted by &#x3b4;<sup>+</sup>(u). Also, I<sub>&#x3b4;</sub><sub><sup2>&#x2212;</sup2></sub>(u) denotes the set of links that interfere with links directed to node u. Thus, I<sub>&#x3b4;</sub><sub><sup2>&#x2212;</sup2></sub>(u)=U <sub>e=(v,u)&#x2208;E</sub>I(e). It should be noted that this set of links can be considered as causing interference to transmission received at node u. The set &#x3b4;<sup>&#x2212;</sup>(u) is included in the set I<sub>&#x3b4;</sub><sub><sup2>&#x2212;</sup2></sub>(u). Likewise, I<sub>&#x3b4;</sub><sub><sup2>+</sup2></sub>(u) denotes the set of links that get interference from links directed out of node u. Thus I<sub>&#x3b4;</sub><sub><sup2>+</sup2></sub>(u)=U<sub>e=(u,v)&#x2208;E</sub>I(e). It should be noted that the set of links can be thought of as getting interference from transmissions initiated by node u. The set &#x3b4;<sup>+</sup>(u) is included in the set I<sub>&#x3b4;</sub><sub><sup2>+</sup2></sub>(u). For an edge e=(u, v)&#x2208;E , let X<sub>(e,i,j)</sub>(t) be 1 if there is a communication (e,i,j) from u to v on channel i and using j streams at time slot t, and let X(<sub>e,i,j)</sub>(t) be 0 otherwise. Thus, the average flow rate f(e,i,j) for this communication over T time slots is given by</p>
<p id="p-0034" num="0033">
<maths id="MATH-US-00001" num="00001">
<math overflow="scroll">
<mrow>
  <mrow>
    <mi>f</mi>
    <mo>&#x2061;</mo>
    <mrow>
      <mo>(</mo>
      <mrow>
        <mi>e</mi>
        <mo>,</mo>
        <mi>i</mi>
        <mo>,</mo>
        <mi>j</mi>
      </mrow>
      <mo>)</mo>
    </mrow>
  </mrow>
  <mo>=</mo>
  <mrow>
    <mfrac>
      <mn>1</mn>
      <mi>T</mi>
    </mfrac>
    <mo>&#x2062;</mo>
    <mrow>
      <munder>
        <mo>&#x2211;</mo>
        <mrow>
          <mi>t</mi>
          <mo>&#x2208;</mo>
          <mrow>
            <mo>{</mo>
            <mrow>
              <mn>1</mn>
              <mo>,</mo>
              <mn>2</mn>
              <mo>,</mo>
              <mstyle>
                <mspace width="0.6em" height="0.6ex"/>
              </mstyle>
              <mo>&#x2062;</mo>
              <mrow>
                <mi>&#x2026;</mi>
                <mo>&#x2062;</mo>
                <mstyle>
                  <mspace width="0.8em" height="0.8ex"/>
                </mstyle>
                <mo>&#x2062;</mo>
                <mi>T</mi>
              </mrow>
            </mrow>
            <mo>}</mo>
          </mrow>
        </mrow>
      </munder>
      <mo>&#x2062;</mo>
      <mrow>
        <msub>
          <mi>X</mi>
          <mrow>
            <mo>(</mo>
            <mrow>
              <mi>e</mi>
              <mo>,</mo>
              <mi>i</mi>
              <mo>,</mo>
              <mi>j</mi>
            </mrow>
            <mo>)</mo>
          </mrow>
        </msub>
        <mo>&#x2062;</mo>
        <mrow>
          <mrow>
            <mi>c</mi>
            <mo>&#x2061;</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>e</mi>
                <mo>,</mo>
                <mi>i</mi>
                <mo>,</mo>
                <mi>j</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>.</mo>
        </mrow>
      </mrow>
    </mrow>
  </mrow>
</mrow>
</math>
</maths>
<br/>
Rearranging the terms yields
</p>
<p id="p-0035" num="0034">
<maths id="MATH-US-00002" num="00002">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mfrac>
            <mn>1</mn>
            <mi>T</mi>
          </mfrac>
          <mo>&#x2062;</mo>
          <mrow>
            <munder>
              <mo>&#x2211;</mo>
              <mrow>
                <mi>t</mi>
                <mo>&#x2208;</mo>
                <mrow>
                  <mo>{</mo>
                  <mrow>
                    <mn>1</mn>
                    <mo>,</mo>
                    <mn>2</mn>
                    <mo>,</mo>
                    <mstyle>
                      <mspace width="0.6em" height="0.6ex"/>
                    </mstyle>
                    <mo>&#x2062;</mo>
                    <mrow>
                      <mi>&#x2026;</mi>
                      <mo>&#x2062;</mo>
                      <mstyle>
                        <mspace width="0.8em" height="0.8ex"/>
                      </mstyle>
                      <mo>&#x2062;</mo>
                      <mi>T</mi>
                    </mrow>
                  </mrow>
                  <mo>}</mo>
                </mrow>
              </mrow>
            </munder>
            <mo>&#x2062;</mo>
            <msub>
              <mi>X</mi>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>e</mi>
                  <mo>,</mo>
                  <mi>i</mi>
                  <mo>,</mo>
                  <mi>j</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </msub>
          </mrow>
        </mrow>
        <mo>=</mo>
        <mfrac>
          <mrow>
            <mi>f</mi>
            <mo>&#x2061;</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>e</mi>
                <mo>,</mo>
                <mi>i</mi>
                <mo>,</mo>
                <mi>j</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mrow>
            <mi>c</mi>
            <mo>&#x2061;</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>e</mi>
                <mo>.</mo>
                <mi>i</mi>
                <mo>.</mo>
                <mi>j</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
        </mfrac>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>1</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
Then the following cross-layer optimization problem is formulated.
</p>
<p id="p-0036" num="0035">
<maths id="MATH-US-00003" num="00003">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mi>max</mi>
        <mo>&#x2062;</mo>
        <mstyle>
          <mspace width="0.8em" height="0.8ex"/>
        </mstyle>
        <mo>&#x2062;</mo>
        <mi>&#x3bb;</mi>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>2</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mo>&#x2200;</mo>
          <mrow>
            <mi>u</mi>
            <mo>&#x2208;</mo>
            <msub>
              <mi>V</mi>
              <mi>M</mi>
            </msub>
          </mrow>
        </mrow>
        <mo>,</mo>
        <mrow>
          <mrow>
            <munder>
              <mo>&#x2211;</mo>
              <mrow>
                <mrow>
                  <mi>e</mi>
                  <mo>&#x2208;</mo>
                  <mrow>
                    <msup>
                      <mi>&#x3b4;</mi>
                      <mo>-</mo>
                    </msup>
                    <mo>&#x2061;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mi>u</mi>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                </mrow>
                <mo>,</mo>
                <mi>i</mi>
                <mo>,</mo>
                <mi>j</mi>
              </mrow>
            </munder>
            <mo>&#x2062;</mo>
            <mrow>
              <mi>f</mi>
              <mo>&#x2061;</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>e</mi>
                  <mo>,</mo>
                  <mi>i</mi>
                  <mo>,</mo>
                  <mi>j</mi>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
          <mo>=</mo>
          <mrow>
            <mrow>
              <munder>
                <mo>&#x2211;</mo>
                <mrow>
                  <mrow>
                    <mi>e</mi>
                    <mo>&#x2208;</mo>
                    <mrow>
                      <msup>
                        <mi>&#x3b4;</mi>
                        <mo>+</mo>
                      </msup>
                      <mo>&#x2061;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mi>u</mi>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                  </mrow>
                  <mo>,</mo>
                  <mi>i</mi>
                  <mo>,</mo>
                  <mi>j</mi>
                </mrow>
              </munder>
              <mo>&#x2062;</mo>
              <mrow>
                <mi>f</mi>
                <mo>&#x2061;</mo>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mi>e</mi>
                    <mo>,</mo>
                    <mi>i</mi>
                    <mo>,</mo>
                    <mi>j</mi>
                  </mrow>
                  <mo>)</mo>
                </mrow>
              </mrow>
            </mrow>
            <mo>+</mo>
            <mrow>
              <mi>&#x3bb;</mi>
              <mo>&#x2062;</mo>
              <mstyle>
                <mspace width="0.3em" height="0.3ex"/>
              </mstyle>
              <mo>&#x2062;</mo>
              <mrow>
                <mi>l</mi>
                <mo>&#x2061;</mo>
                <mrow>
                  <mo>(</mo>
                  <mi>u</mi>
                  <mo>)</mo>
                </mrow>
              </mrow>
            </mrow>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>3</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mo>&#x2200;</mo>
          <mrow>
            <mo>(</mo>
            <mrow>
              <mi>e</mi>
              <mo>,</mo>
              <mi>i</mi>
              <mo>,</mo>
              <mi>j</mi>
            </mrow>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>,</mo>
        <mrow>
          <mrow>
            <mi>f</mi>
            <mo>&#x2061;</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>e</mi>
                <mo>,</mo>
                <mi>i</mi>
                <mo>,</mo>
                <mi>j</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mo>&#x2264;</mo>
          <mrow>
            <mi>c</mi>
            <mo>&#x2061;</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>e</mi>
                <mo>,</mo>
                <mi>i</mi>
                <mo>,</mo>
                <mi>j</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>4</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mo>&#x2200;</mo>
          <mrow>
            <mi>u</mi>
            <mo>&#x2208;</mo>
            <mi>V</mi>
          </mrow>
        </mrow>
        <mo>,</mo>
        <mrow>
          <mrow>
            <munderover>
              <mo>&#x2211;</mo>
              <mrow>
                <mi>i</mi>
                <mo>=</mo>
                <mn>1</mn>
              </mrow>
              <mi>c</mi>
            </munderover>
            <mo>&#x2062;</mo>
            <mrow>
              <munder>
                <mo>&#x2211;</mo>
                <mrow>
                  <mi>e</mi>
                  <mo>&#x2208;</mo>
                  <mrow>
                    <mi>&#x3b4;</mi>
                    <mo>&#x2061;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mi>u</mi>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                </mrow>
              </munder>
              <mo>&#x2062;</mo>
              <mrow>
                <munderover>
                  <mo>&#x2211;</mo>
                  <mrow>
                    <mi>j</mi>
                    <mo>=</mo>
                    <mn>1</mn>
                  </mrow>
                  <mi>K</mi>
                </munderover>
                <mo>&#x2062;</mo>
                <mfrac>
                  <mrow>
                    <mi>f</mi>
                    <mo>&#x2061;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <mi>e</mi>
                        <mo>,</mo>
                        <mi>i</mi>
                        <mo>,</mo>
                        <mi>j</mi>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mrow>
                    <mi>c</mi>
                    <mo>&#x2061;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <mi>e</mi>
                        <mo>,</mo>
                        <mi>i</mi>
                        <mo>,</mo>
                        <mi>j</mi>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                </mfrac>
              </mrow>
            </mrow>
          </mrow>
          <mo>&#x2264;</mo>
          <mrow>
            <mi>N</mi>
            <mo>&#x2061;</mo>
            <mrow>
              <mo>(</mo>
              <mi>u</mi>
              <mo>)</mo>
            </mrow>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>5</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mo>&#x2200;</mo>
          <mi>i</mi>
        </mrow>
        <mo>,</mo>
        <mrow>
          <mi>u</mi>
          <mo>&#x2208;</mo>
          <mi>V</mi>
        </mrow>
        <mo>,</mo>
        <mrow>
          <mrow>
            <munder>
              <mo>&#x2211;</mo>
              <mrow>
                <mi>e</mi>
                <mo>&#x2208;</mo>
                <msub>
                  <mi>I</mi>
                  <mrow>
                    <msup>
                      <mi>&#x3b4;</mi>
                      <mo>-</mo>
                    </msup>
                    <mo>&#x2061;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mi>u</mi>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                </msub>
              </mrow>
            </munder>
            <mo>&#x2062;</mo>
            <mrow>
              <munderover>
                <mo>&#x2211;</mo>
                <mrow>
                  <mi>j</mi>
                  <mo>=</mo>
                  <mn>1</mn>
                </mrow>
                <mi>K</mi>
              </munderover>
              <mo>&#x2062;</mo>
              <mrow>
                <mfrac>
                  <mrow>
                    <mi>f</mi>
                    <mo>&#x2061;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <mi>e</mi>
                        <mo>,</mo>
                        <mi>i</mi>
                        <mo>,</mo>
                        <mi>j</mi>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mrow>
                    <mi>c</mi>
                    <mo>&#x2061;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <mi>e</mi>
                        <mo>,</mo>
                        <mi>i</mi>
                        <mo>,</mo>
                        <mi>j</mi>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                </mfrac>
                <mo>&#x2062;</mo>
                <mi>j</mi>
              </mrow>
            </mrow>
          </mrow>
          <mo>&#x2264;</mo>
          <msub>
            <mi>KC</mi>
            <mi>q</mi>
          </msub>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>6</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mo>&#x2200;</mo>
          <mi>i</mi>
        </mrow>
        <mo>,</mo>
        <mrow>
          <mi>u</mi>
          <mo>&#x2208;</mo>
          <mi>V</mi>
        </mrow>
        <mo>,</mo>
        <mrow>
          <mrow>
            <munder>
              <mo>&#x2211;</mo>
              <mrow>
                <mi>e</mi>
                <mo>&#x2208;</mo>
                <msub>
                  <mi>I</mi>
                  <mrow>
                    <msup>
                      <mi>&#x3b4;</mi>
                      <mo>+</mo>
                    </msup>
                    <mo>&#x2061;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mi>u</mi>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                </msub>
              </mrow>
            </munder>
            <mo>&#x2062;</mo>
            <mrow>
              <munderover>
                <mo>&#x2211;</mo>
                <mrow>
                  <mi>j</mi>
                  <mo>=</mo>
                  <mn>1</mn>
                </mrow>
                <mi>K</mi>
              </munderover>
              <mo>&#x2062;</mo>
              <mrow>
                <mfrac>
                  <mrow>
                    <mi>f</mi>
                    <mo>&#x2061;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <mi>e</mi>
                        <mo>,</mo>
                        <mi>i</mi>
                        <mo>,</mo>
                        <mi>j</mi>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                  <mrow>
                    <mi>c</mi>
                    <mo>&#x2061;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <mi>e</mi>
                        <mo>,</mo>
                        <mi>i</mi>
                        <mo>,</mo>
                        <mi>j</mi>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                  </mrow>
                </mfrac>
                <mo>&#x2062;</mo>
                <mi>j</mi>
              </mrow>
            </mrow>
          </mrow>
          <mo>&#x2264;</mo>
          <msub>
            <mi>KC</mi>
            <mi>q</mi>
          </msub>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>7</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0037" num="0036">The present invention seeks to maximize &#x3bb; where at least &#x3bb;l(u) throughput can be routed from each non-gateway node u to the Internet through one or more gateways. Equation (3) is the flow conservation constraint. At any non-gateway node u, the total outgoing flow must equal the total incoming flow plus node u's own aggregate traffic. Equation (4) ensures that no capacities are violated. Equation (5) is the radio constraint. Since a radio can only be engaged in one communication (either send or receive) at a time, a node u can participate in at most N(u) communications (send or receive) at the same time. Thus, &#x3a3;<sub>e&#x2208;&#x3b4;(u),i,j</sub>X<sub>(e,i,j)</sub>(t)&#x2266;N(u). Averaging over all time slots:</p>
<p id="p-0038" num="0037">
<maths id="MATH-US-00004" num="00004">
<math overflow="scroll">
<mrow>
  <mrow>
    <mfrac>
      <mn>1</mn>
      <mi>T</mi>
    </mfrac>
    <mo>&#x2062;</mo>
    <mrow>
      <munder>
        <mo>&#x2211;</mo>
        <mrow>
          <mi>t</mi>
          <mo>&#x2208;</mo>
          <mrow>
            <mo>{</mo>
            <mrow>
              <mn>1</mn>
              <mo>,</mo>
              <mn>2</mn>
              <mo>,</mo>
              <mstyle>
                <mspace width="0.6em" height="0.6ex"/>
              </mstyle>
              <mo>&#x2062;</mo>
              <mrow>
                <mi>&#x2026;</mi>
                <mo>&#x2062;</mo>
                <mstyle>
                  <mspace width="0.8em" height="0.8ex"/>
                </mstyle>
                <mo>&#x2062;</mo>
                <mi>T</mi>
              </mrow>
            </mrow>
            <mo>}</mo>
          </mrow>
        </mrow>
      </munder>
      <mo>&#x2062;</mo>
      <mrow>
        <munder>
          <mo>&#x2211;</mo>
          <mrow>
            <mrow>
              <mi>e</mi>
              <mo>&#x2208;</mo>
              <mrow>
                <mi>&#x3b4;</mi>
                <mo>&#x2061;</mo>
                <mrow>
                  <mo>(</mo>
                  <mi>u</mi>
                  <mo>)</mo>
                </mrow>
              </mrow>
            </mrow>
            <mo>,</mo>
            <mi>i</mi>
            <mo>,</mo>
            <mi>j</mi>
          </mrow>
        </munder>
        <mo>&#x2062;</mo>
        <mrow>
          <msub>
            <mi>X</mi>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>e</mi>
                <mo>,</mo>
                <mi>i</mi>
                <mo>,</mo>
                <mi>j</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </msub>
          <mo>&#x2061;</mo>
          <mrow>
            <mo>(</mo>
            <mi>t</mi>
            <mo>)</mo>
          </mrow>
        </mrow>
      </mrow>
    </mrow>
  </mrow>
  <mo>&#x2264;</mo>
  <mrow>
    <mrow>
      <mi>N</mi>
      <mo>&#x2061;</mo>
      <mrow>
        <mo>(</mo>
        <mi>u</mi>
        <mo>)</mo>
      </mrow>
    </mrow>
    <mo>.</mo>
  </mrow>
</mrow>
</math>
</maths>
<br/>
Thus, from Equation (1) the radio constraint (Equation (5)) is derived.
</p>
<p id="p-0039" num="0038">The last two constraints (Equations (6) and (7)) are the interference constraints. Node u must dedicate enough degrees of freedom for interference suppressions from all simultaneous interfering communications on the same channel. In addition, other nodes must dedicate enough antennas for interference suppression from the transmission on node u if the other nodes work on the same channel as node u. This is modeled as the following set of necessary conditions that must be satisfied by any feasible solution. For any node u working on channel i and for any time slot t, &#x3a3;<sub>e&#x2208;I</sub><sub><sub2>&#x3b4;</sub2></sub><sub><sup2>&#x2212;</sup2></sub><sub>(u)</sub>&#x3a3;<sub>j=1</sub><sup>K</sup>X<sub>(e,i,j)</sub>(t)j&#x2266;KC<sub>q </sub>and &#x3a3;<sub>e&#x2208;I</sub><sub><sub2>&#x3b4;</sub2></sub><sub><sup2>+</sup2></sub><sub>(u)</sub>&#x3a3;<sub>j=1</sub><sup>K</sup>X<sub>(e,i,j)</sub>(t) j&#x2266;KC<sub>q</sub>, where C<sub>q </sub>is a constant that depends only on q. For example, C<sub>q</sub>=4,8,12 for q=1,2,2.5 respectively. Average the above equations over all time slots to derive equations (6) and (7).</p>
<p id="p-0040" num="0039">It is clear that any optimal solution must satisfy the above constraints and hence solving this linear programming problem (LP) provides an upper bound on the fraction of demand/load &#x3bb;, that is, &#x3bb;l(u) traffic that the network can route from node u to Internet via one or more gateways. The solution itself, however, may not be feasible in terms of channel assignment and schedulability. Besides, the formulation only gives a long-term optimum average. The formulation accounts for the average traffic demands l(u) and the long-term average link capacities c(e,i,j). However, the actual channel conditions on a wireless link may change over a much shorter time-scale/time period, for example, a time period for a few packet transmissions. In general, it is desirable that the network layer selects the route based on the network global view and longer-term expected characteristics to achieve system stability. Link layer and physical layer mechanisms accounts for local instantaneous channel variations and traffic dynamics to benefit from opportunistic transmissions.</p>
<p id="p-0041" num="0040">Next, a method is described that. is based on such time-scale separation in which the path is established for a longer-term use, while scheduling, channel assignment and stream control are dynamically adapted to the short-term channel conditions and traffic dynamics.</p>
<p id="p-0042" num="0041">Referring to an exemplary embodiment of the present invention, the flow solution, obtained by solving the joint routing, channel assignment, MIMO stream control, scheduling equations to maximize the network throughput and maintain the fairness, can be used as the input to determine the long-term routing. And then scheduling, channel assignment and stream control can be performed for opportunistic bandwidth access and sharing along time, frequency, and space domains to adapt to the shorter-term channel condition variations and traffic dynamics.</p>
<p id="p-0043" num="0042"><figref idref="DRAWINGS">FIG. 3</figref> is a flowchart for the routing, scheduling, channel assignment and stream control procedure in accordance with an exemplary embodiment of the present invention. At <b>305</b> long term routing is determined based on the network global view and long term expected network and traffic characteristics. That is, long term routing is determined based on joint routing, channel assignment, MIMO stream control and scheduling (to maximize network throughput and fairness). At <b>310</b> channel assignment, MIMO stream control and transmission scheduling are determined based on the local short term channel, link and traffic conditions. At <b>315</b> a test is performed to determine if the longer term network and traffic conditions have changed. If the longer term network and traffic conditions have changed then processing continues at <b>305</b>. If the longer term network and traffic conditions have not changed then processing continues at <b>310</b>.</p>
<p id="p-0044" num="0043">The optimal &#x3bb; value (as computed by solving the above equations (2)-(7)) is denoted as &#x3bb;* and the optimal flow solution as f* (e,i, j). Then a flow control is performed at the source node u of each flow and routing is determined based on the flow solution. Each node u injects traffic at an average rate no larger than &#x3bb;* l(u) to avoid overwhelming the network. Routing is determined as follows. For each link e=(u,v) that consists of a pair of radios, one radio on node u and the other radio on node v, the link's carried traffic is calculated as</p>
<p id="p-0045" num="0044">
<maths id="MATH-US-00005" num="00005">
<math overflow="scroll">
<mrow>
  <mrow>
    <mi>f</mi>
    <mo>&#x2061;</mo>
    <mrow>
      <mo>(</mo>
      <mrow>
        <mi>u</mi>
        <mo>,</mo>
        <mi>v</mi>
      </mrow>
      <mo>)</mo>
    </mrow>
  </mrow>
  <mo>=</mo>
  <mrow>
    <munderover>
      <mo>&#x2211;</mo>
      <mrow>
        <mi>i</mi>
        <mo>=</mo>
        <mn>1</mn>
      </mrow>
      <mi>C</mi>
    </munderover>
    <mo>&#x2062;</mo>
    <mrow>
      <munderover>
        <mo>&#x2211;</mo>
        <mrow>
          <mi>j</mi>
          <mo>=</mo>
          <mn>1</mn>
        </mrow>
        <mi>K</mi>
      </munderover>
      <mo>&#x2062;</mo>
      <mrow>
        <mrow>
          <mi>f</mi>
          <mo>&#x2061;</mo>
          <mrow>
            <mo>(</mo>
            <mrow>
              <mi>u</mi>
              <mo>,</mo>
              <mi>v</mi>
              <mo>,</mo>
              <mi>i</mi>
              <mo>,</mo>
              <mi>j</mi>
            </mrow>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>.</mo>
      </mrow>
    </mrow>
  </mrow>
</mrow>
</math>
</maths>
<br/>
The interest here is the volume of traffic on a link (between two radios) for routing purposes regardless of which channel a node works on/communicates over and regardless of how many MIMO streams are used.
</p>
<p id="p-0046" num="0045">In an exemplary embodiment of the present invention, a greedy maximal scheduling algorithm is used on multi-channel and MIMO networks to jointly perform scheduling, channel assignment and stream control.</p>
<p id="p-0047" num="0046">In single-channel, single-radio single-antenna networks, the maximum system capacity can be achieved by the following throughput-optimal scheduling algorithm: at each time slot t, the schedule M(t) should be chosen to maximize the queue-weighted rate-sum &#x3a3;<sub>e:E&#x2208;M(t)</sub>q<sub>e</sub>(t)r<sub>e</sub>, where q<sub>e</sub>(t) and r<sub>e </sub>are the current queue size and the transmission rate at link e, respectively.</p>
<p id="p-0048" num="0047">It should be noted that a node may have multiple radios. It is possible to have multiple links between two nodes in the transmission range, which share the same queue. A link is formed by a pair of radios, one on each node. r<sub>e </sub>is the link capacity or transmission rate on link e between a pair of radios on node u and node v. q<sub>e </sub>represents the size of queue at node u wherein data will be sent to node v. The data in the queue may be sent in multiple parallel links between node u and node v. The Greedy Maximal Scheduling (GMS) algorithm can be viewed as an approximation to throughput-optimal algorithms. Roughly speaking, a schedule M(t) is maximal if M(t) is a non-interfering schedule, and no more links can be added to M(t) without violating the interference constraint. The Greedy Maximal Scheduling is used with multi-channel and MIMO networks, and it is called mmGMS herein. The mmGMS method of the present invention computes a maximal schedule by starting from the link-channel-stream triplet with the largest queue weighted rate q<sub>e</sub>(t)r<sub>e</sub><sup>(i,j)</sup>, where r<sub>e</sub><sup>(i,j) </sup>is the transmission rate/capacity of link e on channel i using the j-th stream. Specifically, the mmGMS method of the present invention proceeds as follows.
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0000">
    <ul id="ul0002" list-style="none">
        <li id="ul0002-0001" num="0048">1. Starting from an empty schedule M<sup>i</sup>(t) for a time slot t on channel i, form a set S of all link-channel-stream triplets (e,i,j) and determine the weight of the link-channel-stream triplet (e,i,j) to be q<sub>e</sub>r<sub>e</sub><sup>(i,j)</sup>.</li>
        <li id="ul0002-0002" num="0049">2. Search for the link-channel-stream triplet (e,i,j) with the largest weight q<sub>e</sub>r<sub>e</sub><sup>(i,j)</sup>. Add (e,i,j) to M<sup>i</sup>(t), meaning that in the t-th slot link e can transmit on channel i using the j-th stream. Remove from S the triplet (e,i,j) and update the queue size q<sub>e</sub>=q<sub>e</sub>&#x2212;r<sub>e</sub><sup>(i,j)&#x3b4;</sup>, where &#x3b4; is the time slot length. Assign channel i to link e that belongs to nodes u and v where e=(u,v), i.e., assign an unused radio on node u to operate on channel i F(u)=F(u)&#x222a;{i} if it has not been done and assign an unused radio on the node v to operate on channel i if it has not been done F(v)=F(v)&#x222a;{i}.</li>
        <li id="ul0002-0003" num="0050">3. Remove from S all the triplets (e&#x2032;,i,j&#x2032;), where e&#x2032;&#x2208;I(e) and j&#x2032; is the stream on e&#x2032; with the lowest channel gain. Since e and e&#x2032; interfere with each other so it is assumed here that one degree of freedom on e&#x2032; corresponding to the lowest-channel-gain stream is dedicated to suppress interference from the transmission (e,i,j).</li>
        <li id="ul0002-0004" num="0051">4. If |F(u)|&#x2267;N(u) (node u has used up all its radios, i.e no radio interfaces are available on node u anymore), remove from S all the triplets (e&#x2032;,i&#x2032;,j&#x2032;) where e&#x2032; is any link incident on node u (e&#x2032;&#x2208;&#x3b4;(u)), i&#x2032; is any channel not in F(u) (i&#x2032;&#x2209;F(u)), and j&#x2032;=1, 2, . . . , K.</li>
        <li id="ul0002-0005" num="0052">5. Do the same for the receiving node v. If |F(v)|&#x2267;N(v) (node v has used up all its radios, i.e no radio interfaces are available on node v anymore), remove from S all the triplets (e&#x2033;,i&#x2033;,j&#x2033;) where e&#x2033; is any link incident on node v (e&#x2033;&#x2208;&#x3b4;(v)), channel i&#x2033; is any channel not in F(v) (i&#x2033;&#x2209;F(v)), and j&#x2033;=1, 2, . . . , K.</li>
        <li id="ul0002-0006" num="0053">6. Repeat the above steps from step 2 until S is empty.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0049" num="0054"><figref idref="DRAWINGS">FIG. 4</figref> is a flowchart for the joint scheduling, channel assignment and stream control method in accordance with an exemplary embodiment of the present invention. At <b>405</b>, the time slot counter/pointer t is initialized. At <b>410</b> starting from an empty schedule M<sup>i</sup>(t) for each channel i, form a set S of all link-channel-stream triplets (e,i,j) in the network and determine the weight of the link-channel-stream triplet (e,i,j) to be q<sub>e</sub>r<sub>e</sub><sup>(i,j)</sup>. At <b>415</b> search for the link-channel-stream triplet (e,i,j) with the largest/maximum weight q<sub>e</sub>r<sub>e</sub><sup>(i,j)</sup>. Schedule the link-channel-stream triplet in time slot t and assign the channel and MIMO stream to the transmitting and receiving radios of link e and update the queue size and remove the link-channel-stream triplet from the set S. That is, (e,i,j) is added to M<sup>i</sup>(t) , meaning that in the t-th slot link e can transmit on channel i using the j-th stream. The queue size q<sub>e</sub>=q<sub>e</sub>&#x2212;r<sub>e</sub><sup>(i,j)&#x3b4;</sup> is updated, where &#x3b4; is the time slot length. Assign channel i to link e that belongs to nodes u and v where e=(u,v), i.e., assign an unused radio on node u to operate on channel i F(u)=F(u)&#x222a;{i} if it has not been done and assign an unused radio on the node v to operate on channel i if it has not been done F(v)=F(v)&#x222a;{i}. At <b>420</b> remove from S all the triplets (e&#x2032;,i,j&#x2032;), that are in the interference range of (e,i,j) where e&#x2032;&#x2208;I(e) and j&#x2032; is the stream on e&#x2032; with the lowest channel gain. Since e and e&#x2032; interfere with each other, it is assumed here that one degree of freedom on e&#x2032; corresponding to the lowest-channel-gain stream is dedicated to suppress interference from the transmission (e,i,j).</p>
<p id="p-0050" num="0055">At <b>425</b> a test is performed to determine if all radios on the transmitting node of link e have been assigned. If all radios on the transmitting node of link e have been assigned (if |F(u)|&#x2267;N(u) that is, if node u has used up all its radios, i.e no radio interfaces are available on node u anymore) then at <b>430</b>, remove from S all the triplets (e&#x2032;,i&#x2032;,j&#x2032;) where e&#x2032; is any link incident on the transmitting node and does not use the channels assigned to the transmitting node. That is, remove from S all the triplets (e&#x2032;,i&#x2032;,j&#x2032;) where e&#x2032; is any link incident on node u (e&#x2032;&#x2208;&#x3b4;(u)), i&#x2032; is any channel not in F(u) (i&#x2032;&#x2209;F(u)), and j&#x2032;=1, 2, . . . , K. If all radios on the transmitting node of link e have not been assigned then processing proceeds to <b>435</b>. At <b>435</b> a test is performed to determine if all the radios on the receiving node of link e have been assigned. If all radios on the receiving node of link e have been assigned (if |F(v)|&#x2267;N(v) that is if node v has used up all its radios, i.e no radio interfaces are available on node v anymore) then at <b>440</b>, remove from S all the triplets (e&#x2033;,i&#x2033;,j&#x2033;) where e&#x2033; is any link incident on node v (e&#x2033;&#x2208;&#x3b4;(v)), channel i&#x2033; is any channel not in F(v) (i&#x2033;&#x2209;F(v)), and j&#x2033;=1, 2, . . . , K. If all the radios on the receiving node of link e have not been assigned then processing proceeds to <b>445</b>. At <b>445</b> a test is performed to determine if set S is empty. If set S is not empty then processing proceeds to <b>415</b>. If set S is empty then the time slot counter/pointer is incremented at <b>450</b>. A test is performed at <b>455</b> to determine if the time slot counter/pointer has exceeded the maximum value of time slots available that it can be (t&#x3e;7). If the time slot counter/pointer has not exceeded the maximum value of time slots available then processing proceeds to <b>410</b>. If the time slot counter/pointer has exceeded the maximum value of time slots available then processing ends.</p>
<p id="p-0051" num="0056">As an example, consider a multi-hop wireless network with six nodes as shown in <figref idref="DRAWINGS">FIGS. 5(</figref><i>a</i>), <b>5</b>(<i>b</i>), <b>5</b>(<i>c</i>) and <b>5</b>(<i>d</i>). Each of the six nodes A to F is equipped with a single radio and each radio has 2 MIMO antenna elements. Three MIMO links exist between A and B, C and D, E and F, respectively. Each of the links has two streams, shown as the two lines between the two nodes. The three links are close to each other, so there is mutual interference if the links work on the same channel. Assume there are two non-overlapping channels available in the network, named channel <b>1</b> (CH<b>1</b>) and channel <b>2</b> (CH<b>2</b>) respectively, and also assume each link has three units of data in its queue.</p>
<p id="p-0052" num="0057">At the beginning of time slot t, the channel conditions on channel <b>1</b> and channel <b>2</b> are illustrated on <figref idref="DRAWINGS">FIG. 5(</figref><i>a</i>). The numbers beside the lines are the channel gains for the respective streams, while those in the parentheses denote the aggregate rates of the corresponding links. The aggregate rate of a link is the transmission rate on that link when the link uses all streams to transmit. For example, link C-D can transmit at 2.4 data-units per time-slot if it transmits two independent streams at a time. The scheduling, channel assignment, and stream control method in the present invention proceeds as follows.
<ul id="ul0003" list-style="none">
    <li id="ul0003-0001" num="0000">
    <ul id="ul0004" list-style="none">
        <li id="ul0004-0001" num="0058">Form a set S of twelve link-channel-stream triplets, denoted by the twelve lines in the <figref idref="DRAWINGS">FIG. 5(</figref><i>a</i>). It should be noted that for a given link on a given channel, the streams are sorted in the descending order of channel gains. For example, (C-D,1,1) refers to the stream of link C-D on channel <b>1</b> with stream <b>1</b>. Its link gain is 1.</li>
        <li id="ul0004-0002" num="0059">Add (C-D, 1, 1) to M<sup>1</sup>(t) as it has the largest weight</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0053" num="0060">
<maths id="MATH-US-00006" num="00006">
<math overflow="scroll">
<mrow>
  <mrow>
    <msub>
      <mi>q</mi>
      <mrow>
        <mi>C</mi>
        <mo>&#x2062;</mo>
        <mstyle>
          <mtext>-</mtext>
        </mstyle>
        <mo>&#x2062;</mo>
        <mi>D</mi>
      </mrow>
    </msub>
    <mo>&#x2062;</mo>
    <msubsup>
      <mi>r</mi>
      <mrow>
        <mi>C</mi>
        <mo>&#x2062;</mo>
        <mstyle>
          <mtext>-</mtext>
        </mstyle>
        <mo>&#x2062;</mo>
        <mi>D</mi>
      </mrow>
      <mrow>
        <mo>(</mo>
        <mrow>
          <mn>1</mn>
          <mo>,</mo>
          <mn>1</mn>
        </mrow>
        <mo>)</mo>
      </mrow>
    </msubsup>
  </mrow>
  <mo>=</mo>
  <mrow>
    <mrow>
      <mn>3</mn>
      <mo>&#xd7;</mo>
      <mrow>
        <mo>(</mo>
        <mrow>
          <mfrac>
            <mn>1</mn>
            <mrow>
              <mn>1</mn>
              <mo>+</mo>
              <mn>0.6</mn>
            </mrow>
          </mfrac>
          <mo>&#xd7;</mo>
          <mn>2.4</mn>
        </mrow>
        <mo>)</mo>
      </mrow>
    </mrow>
    <mo>=</mo>
    <mn>4.5</mn>
  </mrow>
</mrow>
</math>
</maths>
<br/>
among all the link-channel-stream triplets. Update the queue size at link C-D to
</p>
<p id="p-0054" num="0061">
<maths id="MATH-US-00007" num="00007">
<math overflow="scroll">
<mrow>
  <msub>
    <mi>q</mi>
    <mrow>
      <mi>C</mi>
      <mo>&#x2062;</mo>
      <mstyle>
        <mtext>-</mtext>
      </mstyle>
      <mo>&#x2062;</mo>
      <mi>D</mi>
    </mrow>
  </msub>
  <mo>=</mo>
  <mrow>
    <mrow>
      <mn>3</mn>
      <mo>-</mo>
      <mrow>
        <mo>(</mo>
        <mrow>
          <mfrac>
            <mn>1</mn>
            <mrow>
              <mn>1</mn>
              <mo>+</mo>
              <mn>0.6</mn>
            </mrow>
          </mfrac>
          <mo>&#xd7;</mo>
          <mn>2.4</mn>
        </mrow>
        <mo>)</mo>
      </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
      <mn>1.5</mn>
      <mo>.</mo>
    </mrow>
  </mrow>
</mrow>
</math>
</maths>
<ul id="ul0005" list-style="none">
    <li id="ul0005-0001" num="0000">
    <ul id="ul0006" list-style="none">
        <li id="ul0006-0001" num="0062">Remove (C-D, 1, 1) from set S. In addition, one degree of freedom at links A-B and E-F must be dedicated to suppress interference from (C-D, 1, 1) on channel 1, so the triplets (A-B,1,2) and (E-F,1,2) are removed from set S. The triplets (C-D,2,1) and (C-D,2,2) are also removed from set S because channel <b>1</b> has been assigned to nodes C and D (they have only one radio). The set S after this step is shown in <figref idref="DRAWINGS">FIG. 5(</figref><i>b</i>), where the removed triplets are denoted by dashed lines.</li>
        <li id="ul0006-0002" num="0063">In set S (among the triplets denoted by solid lines), (A-B,2,1) has the largest weight</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0055" num="0064">
<maths id="MATH-US-00008" num="00008">
<math overflow="scroll">
  <mrow>
    <mrow>
      <msub>
        <mi>q</mi>
        <mrow>
          <mi>A</mi>
          <mo>&#x2062;</mo>
          <mstyle>
            <mtext>-</mtext>
          </mstyle>
          <mo>&#x2062;</mo>
          <mi>B</mi>
        </mrow>
      </msub>
      <mo>&#x2062;</mo>
      <msubsup>
        <mi>r</mi>
        <mrow>
          <mi>A</mi>
          <mo>&#x2062;</mo>
          <mstyle>
            <mtext>-</mtext>
          </mstyle>
          <mo>&#x2062;</mo>
          <mi>B</mi>
        </mrow>
        <mrow>
          <mo>(</mo>
          <mrow>
            <mn>2</mn>
            <mo>,</mo>
            <mn>1</mn>
          </mrow>
          <mo>)</mo>
        </mrow>
      </msubsup>
    </mrow>
    <mo>=</mo>
    <mrow>
      <mrow>
        <mn>3</mn>
        <mo>&#xd7;</mo>
        <mrow>
          <mo>(</mo>
          <mrow>
            <mfrac>
              <mn>1</mn>
              <mrow>
                <mn>1</mn>
                <mo>+</mo>
                <mn>0.8</mn>
              </mrow>
            </mfrac>
            <mo>&#xd7;</mo>
            <mn>2.4</mn>
          </mrow>
          <mo>)</mo>
        </mrow>
      </mrow>
      <mo>=</mo>
      <mn>4.</mn>
    </mrow>
  </mrow>
</math>
</maths>
<maths id="MATH-US-00008-2" num="00008.2">
<math overflow="scroll">
  <mrow>
    <mi>Add</mi>
    <mo>&#x2062;</mo>
    <mstyle>
      <mspace width="0.8em" height="0.8ex"/>
    </mstyle>
    <mo>&#x2062;</mo>
    <mrow>
      <mo>(</mo>
      <mrow>
        <mrow>
          <mi>A</mi>
          <mo>&#x2062;</mo>
          <mstyle>
            <mtext>-</mtext>
          </mstyle>
          <mo>&#x2062;</mo>
          <mi>B</mi>
        </mrow>
        <mo>,</mo>
        <mn>2</mn>
        <mo>,</mo>
        <mn>1</mn>
      </mrow>
      <mo>)</mo>
    </mrow>
    <mo>&#x2062;</mo>
    <mstyle>
      <mspace width="0.8em" height="0.8ex"/>
    </mstyle>
    <mo>&#x2062;</mo>
    <mi>to</mi>
    <mo>&#x2062;</mo>
    <mstyle>
      <mspace width="0.8em" height="0.8ex"/>
    </mstyle>
    <mo>&#x2062;</mo>
    <mrow>
      <msup>
        <mi>M</mi>
        <mn>2</mn>
      </msup>
      <mo>&#x2061;</mo>
      <mrow>
        <mo>(</mo>
        <mi>t</mi>
        <mo>)</mo>
      </mrow>
    </mrow>
  </mrow>
</math>
</maths>
<br/>
and update the queue size at link A-B to
</p>
<p id="p-0056" num="0065">
<maths id="MATH-US-00009" num="00009">
<math overflow="scroll">
<mrow>
  <msub>
    <mi>q</mi>
    <mrow>
      <mi>A</mi>
      <mo>&#x2062;</mo>
      <mstyle>
        <mtext>-</mtext>
      </mstyle>
      <mo>&#x2062;</mo>
      <mi>B</mi>
    </mrow>
  </msub>
  <mo>=</mo>
  <mrow>
    <mrow>
      <mn>3</mn>
      <mo>-</mo>
      <mrow>
        <mo>(</mo>
        <mrow>
          <mfrac>
            <mn>1</mn>
            <mrow>
              <mn>1</mn>
              <mo>+</mo>
              <mn>0.8</mn>
            </mrow>
          </mfrac>
          <mo>&#xd7;</mo>
          <mn>2.4</mn>
        </mrow>
        <mo>)</mo>
      </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
      <mn>1.67</mn>
      <mo>.</mo>
    </mrow>
  </mrow>
</mrow>
</math>
</maths>
<br/>
Remove from S the triplets (A-B,2,1), (E-F,2,2) and (A-B,1,1). The updated set S is shown in <figref idref="DRAWINGS">FIG. 5(</figref><i>c</i>).
<ul id="ul0007" list-style="none">
    <li id="ul0007-0001" num="0000">
    <ul id="ul0008" list-style="none">
        <li id="ul0008-0001" num="0066">In the set S, (E-F,2,1) has the largest weight</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0057" num="0067">
<maths id="MATH-US-00010" num="00010">
<math overflow="scroll">
<mrow>
  <mrow>
    <msub>
      <mi>q</mi>
      <mrow>
        <mi>E</mi>
        <mo>&#x2062;</mo>
        <mstyle>
          <mtext>-</mtext>
        </mstyle>
        <mo>&#x2062;</mo>
        <mi>F</mi>
      </mrow>
    </msub>
    <mo>&#x2062;</mo>
    <msubsup>
      <mi>r</mi>
      <mrow>
        <mi>E</mi>
        <mo>&#x2062;</mo>
        <mstyle>
          <mtext>-</mtext>
        </mstyle>
        <mo>&#x2062;</mo>
        <mi>F</mi>
      </mrow>
      <mrow>
        <mo>(</mo>
        <mrow>
          <mn>2</mn>
          <mo>,</mo>
          <mn>1</mn>
        </mrow>
        <mo>)</mo>
      </mrow>
    </msubsup>
  </mrow>
  <mo>=</mo>
  <mrow>
    <mrow>
      <mn>3</mn>
      <mo>&#xd7;</mo>
      <mrow>
        <mo>(</mo>
        <mrow>
          <mfrac>
            <mn>1</mn>
            <mrow>
              <mn>1</mn>
              <mo>+</mo>
              <mn>0.6</mn>
            </mrow>
          </mfrac>
          <mo>&#xd7;</mo>
          <mn>2</mn>
        </mrow>
        <mo>)</mo>
      </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
      <mn>3.75</mn>
      <mo>.</mo>
    </mrow>
  </mrow>
</mrow>
</math>
</maths>
<br/>
Add (E-F,2,1) to M<sup>2</sup>(t) and update the queue size at link E-F to
</p>
<p id="p-0058" num="0068">
<maths id="MATH-US-00011" num="00011">
<math overflow="scroll">
<mrow>
  <msub>
    <mi>q</mi>
    <mrow>
      <mi>E</mi>
      <mo>&#x2062;</mo>
      <mstyle>
        <mtext>-</mtext>
      </mstyle>
      <mo>&#x2062;</mo>
      <mi>F</mi>
    </mrow>
  </msub>
  <mo>=</mo>
  <mrow>
    <mrow>
      <mn>3</mn>
      <mo>-</mo>
      <mrow>
        <mo>(</mo>
        <mrow>
          <mfrac>
            <mn>1</mn>
            <mrow>
              <mn>1</mn>
              <mo>+</mo>
              <mn>0.6</mn>
            </mrow>
          </mfrac>
          <mo>&#xd7;</mo>
          <mn>2</mn>
        </mrow>
        <mo>)</mo>
      </mrow>
    </mrow>
    <mo>=</mo>
    <mrow>
      <mn>1.75</mn>
      <mo>.</mo>
    </mrow>
  </mrow>
</mrow>
</math>
</maths>
<br/>
Remove from S the triplets (E-F,2,1), (A-B,2,1) and (E-F,1,2). The resulting set S is shown in <figref idref="DRAWINGS">FIG. 5(</figref><i>d</i>).
<ul id="ul0009" list-style="none">
    <li id="ul0009-0001" num="0000">
    <ul id="ul0010" list-style="none">
        <li id="ul0010-0001" num="0069">Up to this point, there is only (C-D,1,2) left in the set S. Add it to M<sup>1</sup>(t) and update the queue size at C-D to</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0059" num="0070">
<maths id="MATH-US-00012" num="00012">
<math overflow="scroll">
<mrow>
  <msub>
    <mi>q</mi>
    <mrow>
      <mi>C</mi>
      <mo>&#x2062;</mo>
      <mstyle>
        <mtext>-</mtext>
      </mstyle>
      <mo>&#x2062;</mo>
      <mi>D</mi>
    </mrow>
  </msub>
  <mo>=</mo>
  <mrow>
    <mrow>
      <mn>1.5</mn>
      <mo>-</mo>
      <mrow>
        <mo>(</mo>
        <mrow>
          <mfrac>
            <mn>0.6</mn>
            <mrow>
              <mn>1</mn>
              <mo>+</mo>
              <mn>0.6</mn>
            </mrow>
          </mfrac>
          <mo>&#xd7;</mo>
          <mn>2.4</mn>
        </mrow>
        <mo>)</mo>
      </mrow>
    </mrow>
    <mo>=</mo>
    <mn>0.6</mn>
  </mrow>
</mrow>
</math>
</maths>
<br/>
from set S.
</p>
<p id="p-0060" num="0071">At the end, the schedule includes (C-D, 1, 1), (C-D, 1, 2), (A-B, 2, 1) (E-F, 2, 1). That is, link C-D is active on channel <b>1</b> with 2 streams, simultaneously links A-B and E-F are scheduled on channel <b>2</b> with 1 stream each, respectively.</p>
<p id="p-0061" num="0072">In an alternative embodiment the channel assignment, MIMO stream control, and transmission scheduling procedure in the present invention is performed in two stages. The first stage is channel assignment for a time slot t. Channel assignment is performed, assuming no stream control. That is, in this stage, if a link with a pair of radios (one for transmitting and the other for receiving) is selected and assigned a channel, all of the radio's degrees of freedom (MIMO antenna elements) are dedicated to transmitting and receiving simultaneous spatial multiplexing streams on this link. With spatial multiplexing, multiple streams are transmitted simultaneously and each stream is transmitted from a different transmit antenna in the same frequency channel. If these signals arrive at the receiver antenna array with sufficiently different spatial signatures, the receiver can separate these streams. The maximum number of spatial streams is limited by the lesser of the number of antennas at the transmitter or receiver. The second stage is stream control for the time slot t. In the first stage, some of links cannot obtain an idle channel, and cannot be scheduled to be active for transmission because of the limited number of available channels and the interference constraint (another link in the interference range has been scheduled). However, an unassigned link can share a channel with the neighboring links in the spatial domain using MIMO antenna technique as long as the total number of communication streams being transmitted by radios located within the interference range is less than the effective degrees of freedom (the number of receiving MIMO antenna elements) of the receiving radios. In the second stage, it is determined whether or how a link unassigned in the first stage can share with an active link (i.e. a link assigned a channel in the first stage) on the channel of the active link. This procedure is referred to as the MIMO link pairing. After pairing, the two links can be active simultaneously on the same channel under the constraint that the total number of streams is not greater than the degrees of freedom.</p>
<p id="p-0062" num="0073">In an exemplary embodiment for the channel assignment of the above first stage of the present invention, the following procedure is performed to assign the channel in a time slot, t.
<ul id="ul0011" list-style="none">
    <li id="ul0011-0001" num="0000">
    <ul id="ul0012" list-style="none">
        <li id="ul0012-0001" num="0074">1. Starting from an empty schedule M<sup>i</sup>(t) for each channel i and assuming no MIMO stream control, form a set S of all link-channel pairs (e,i). Let r<sub>e</sub><sup>i </sup>denote link e's capacity on channel i using all the K streams for spatial multiplexing, where K is the degree of freedom of the link, i.e. the lesser in the number of antenna elements at the transmitting or receiving radios. Determine the weight of the link-channel pair (e,i) to be q<sub>e</sub>r<sub>e</sub><sup>i</sup>. Search for the link-channel pair (e,i) with the largest/maximum weight q<sub>e</sub>r<sub>e</sub><sup>i</sup>. Add (e,i) to M<sup>i</sup>(t) , meaning that in the t-th slot link e can transmit on channel i. Assign channel i to link e that belongs to nodes u and v where e=(u,v), i.e., assign an unused radio on node u to operate on channel i if it has not been done F(u)=F(u)&#x222a;{i} and assign an unused radio on node v to operate on channel i if it has not been done F(v)=F(v)&#x222a;{i}.</li>
        <li id="ul0012-0002" num="0075">2. Remove from set S the link-channel pair (e,i) and update the queue size q<sub>e</sub>=q<sub>e</sub>&#x2212;r<sub>e</sub><sup>i&#x3b4;</sup>, where &#x3b4; is the time slot length.</li>
        <li id="ul0012-0003" num="0076">3. Remove from set S all the link-channel pair (e&#x2032;,i), where e&#x2032;e&#x2208;I(e).</li>
        <li id="ul0012-0004" num="0077">4. If |F(u)|&#x2267;N(u) (node u has used up all its radios, no radio interfaces are available on node u anymore.), remove from set S all the link-channel pairs (e&#x2032;,i&#x2032;) where e&#x2032; is any link incident on node u (e&#x2032;&#x2208;&#x3b4;(u)), and channel i&#x2032;&#x2208;1, 2, . . . C.</li>
        <li id="ul0012-0005" num="0078">5. If |F(v)&#x2267;N(v) (node v has used up all its radios, no radio interfaces are available on node v anymore), remove from set S all the link-channel pairs (e&#x2033;,i&#x2033;) where e&#x2033; is any link incident on node v, (e&#x2033;&#x2208;&#x3b4;(v)), and channel i&#x2033;&#x2208;1, 2, . . . C.</li>
        <li id="ul0012-0006" num="0079">6. Repeat the above steps from step 2 until set S is empty.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0063" num="0080"><figref idref="DRAWINGS">FIG. 6</figref> is a flowchart for the channel assignment procedure (first stage) in the two-stage channel assignment and stream control method in accordance to an exemplary embodiment of the present invention. At <b>605</b> the time slot counter/pointer is initialized. At <b>610</b> starting from an empty schedule M<sup>i</sup>(t) for each channel i and assuming no MIMO stream control, form a set S of all link-channel pairs (e,i). Let r<sub>e</sub><sup>i </sup>denote link e's capacity on channel i using all the K streams for spatial multiplexing, where K is the degree of freedom of the link, i.e. the lesser in the number of antenna elements at the transmitting or receiving radios. Determine the weight of each link-channel pair (e,i) to be q<sub>e</sub>r<sub>e</sub><sup>i</sup>. At <b>615</b> search for the link-channel pair (e, i) with the largest/maximum weight q<sub>e</sub>r<sub>e</sub><sup>i</sup>. Add (e, i) to M<sup>i</sup>(t), meaning that in the t-th slot link e can transmit on channel i (add it to the schedule for the current time slot). Assign channel i to link e that belongs to nodes u and v where e=(u,v), i.e., assign an unused radio on node u to operate on channel i if it has not been done F(u)=F(u)&#x222a;{i} and assign an unused radio on node v to operate on channel i if it has not been done F(v)=F(v)&#x222a;{i}. Remove from set S the link-channel pair (e,i) and update the queue size q<sub>e</sub>=q<sub>e</sub>&#x2212;r<sub>e</sub><sup>i&#x3b4;</sup>, where &#x3b4; is the time slot length. At <b>620</b>, remove from set S all the link-channel pair (e&#x2032;,i), where e&#x2032;&#x2208;I(e). That is, remove all the link-channel pairs that are in the interference range of link e and use the same channel i.</p>
<p id="p-0064" num="0081">A test is performed at <b>625</b> to determine if all the radios on the transmitting node of link e have been assigned. At <b>630</b>, if |F(u)|&#x2267;N(u) (node u has used up all its radios, no radio interfaces are available on node u anymore&#x2014;if all the radios on the transmitting node of link e have been assigned), remove from set S all the link-channel pairs (e&#x2032;,i&#x2032;) where e&#x2032; is any link incident on node u (e&#x2032;&#x2208;&#x3b4;(u)), and channel i&#x2032;&#x2208;1, 2, . . . C. If all the radios on the transmitting node of link e have not been assigned, then processing proceeds to <b>635</b>. A test is performed at <b>635</b> to determine if all radios on the receiving node have been assigned. At <b>640</b> if |F(v)|&#x2267;N(v) (node v has used up all its radios, no radio interfaces are available on node v anymore&#x2014;if all radios on the receiving node of link e have been assigned), remove from set S all the link-channel pairs (e&#x2033;,i&#x2033;) where e&#x2033; is any link incident on node v, (e&#x2033;&#x2208;&#x3b4;(v)), and channel i&#x2033;&#x2208;1, 2, . . . C. A test is performed at <b>645</b> to determine if the set S is empty. If all radios on the receiving node on link e have not been assigned then processing proceeds to <b>645</b>. If set S is empty then perform MIMO stream control and link pairing (see <figref idref="DRAWINGS">FIG. 7</figref> and description below) at <b>650</b>. If set S is not empty the processing proceeds to <b>615</b>. At <b>655</b> increment the time slot counter/pointer. A test is performed at <b>660</b> to determine if the time slot counter/pointer has exceeded the maximum value of time slots available that it can be (t&#x3e;T). If the time slot counter/pointer has not exceeded the maximum value of time slots available then processing proceeds to <b>410</b>. If the time slot counter/pointer has exceeded the maximum value of time slots available then processing ends.</p>
<p id="p-0065" num="0082">After the first stage (channel assignment), some links are assigned a channel and will be active in the slot t. Other links cannot be assigned a channel because the number of available channels is limited and there is an interference constraint. An unassigned link represents a link between two nodes each of which has at least one unassigned/unused radio. If there are still radios that are not assigned to a working channel at the first stage, two of the available radios in the transmission range may form a link and simultaneously operate on the same channel as a neighboring link to take advantage of MIMO for better throughput and fairness, i.e. pairing a link with another link.</p>
<p id="p-0066" num="0083">An exemplary embodiment for stream control (second stage) in accordance with the present invention is now described. The links not having a channel assigned in the above described first stage can be assigned a channel and paired with a neighbor MIMO link using the follow procedure:
<ul id="ul0013" list-style="none">
    <li id="ul0013-0001" num="0000">
    <ul id="ul0014" list-style="none">
        <li id="ul0014-0001" num="0084">1. For any two nodes u, v in the transmission range with unassigned radios, where |F(u)|&#x3c;N(u) and |F(v)|&#x3c;N(v) (the transmitting radio not assigned and the receiving radio not assigned), construct min{N(u)&#x2212;|F(u)|, N(v)&#x2212;|F(v)|} parallel edges corresponding to the unassigned links between nodes u and v. All the unassigned links form a set U.</li>
        <li id="ul0014-0002" num="0085">2. Search for the unassigned links with the highest queue size, i.e. the highest workload remaining after the first stage channel assignment, assuming that it is L&#x2208;(u,v). It should be noted that the remaining queue size is the aggregated remaining queue size in node u corresponding to all the links between nodes u and v L&#x2208;(u, v). These links share a queue.</li>
        <li id="ul0014-0003" num="0086">3. For the unassigned link L with the maximum remaining queue size, try to find the pairing link candidate L&#x2032; operating on channel i. A pairing link candidate L&#x2032; must satisfy (a) L&#x2032; is the only link that has been assigned on channel i among the neighboring links of link L in the first stage (the neighboring links of link L are the links in the interference range of link L). Let N(L, i) denote the set of links that have been assigned on channel i and interfere with link L on channel i. That is, the set of neighboring links of link L that have been assigned on channel i. |N(L, i)| is the number of links in N(L,i). Then |N(L,i)|=1 and L&#x2032;&#x2208;N(L,i). And (b) no neighboring links of link L&#x2032; has been assigned on channel i, i.e. paired with link L&#x2032; in the second stage, i.e. N(L&#x2032;,i)=&#x3a6;.</li>
        <li id="ul0014-0004" num="0087">4. Determine the throughput of links L and L&#x2032; (the data rate that can transmit on L and L&#x2032;) in this time slot as well as the MIMO streams and mode used by links L and L&#x2032; for transmission if L is assigned on channel i and transmit simultaneously with link L&#x2032; with MIMO, i.e. if L and L&#x2032; pair. An exemplary embodiment for step 4 procedure is described below and depicted in <figref idref="DRAWINGS">FIG. 8</figref>.</li>
        <li id="ul0014-0005" num="0088">5. There may be multiple pairing candidates for an unassigned link L. Repeat steps 3 and 4 for all the pairing candidates.</li>
        <li id="ul0014-0006" num="0089">6. Select a candidate to pair among the candidate links such that link L can have the maximum throughput if pairing with this candidate. Assuming the candidate link L&#x2032; is selected and L&#x2032; operates on channel i, assign channel i on link L where L&#x2208;(u,v). That is, assign an unused radio on node u to operate on channel i (F(u)=F(u)&#x222a;{i}) and an unused radio on node v to operate on channel i (F(v)=F(v)&#x222a;{i}.</li>
        <li id="ul0014-0007" num="0090">7. Add (L,i) to M<sup>i</sup>(t), meaning that in the t-th time slot link L can be active on channel i using the MIMO streams and mode determined in step 4. Update M<sup>i</sup>(t) for link (L&#x2032;, i) with the new MIMO streams and mode determined in step 4. Links L and L&#x2032; operate based on the MIMO streams and mode determined in step 4. After pairing, link L&#x2032; may not transmit using all its MIMO streams as determined in the first stage because it will share the same channel with link L. The total number of MIMO parallel streams on link L and L&#x2032; should not be greater than the degree of freedom, or the number of the antenna elements, K.</li>
        <li id="ul0014-0008" num="0091">8. Update the queue size of link L and L&#x2032;. q<sub>L</sub>=q<sub>L</sub>&#x2212;&#x3b8;<sub>L</sub><sup>i&#x3b4;</sup> and q<sub>L&#x2032;</sub>=q<sub>L&#x2032;</sub>+r<sub>L&#x2032;</sub><sup>i&#x3b4;</sup>&#x2212;&#x3b8;<sub>L&#x2032;</sub><sup>i&#x3b4;</sup> where &#x3b8;<sub>L</sub><sup>i </sup>and &#x3b8;<sub>L&#x2032;</sub><sup>i </sup>are the throughput on link L and L&#x2032; in time slot t, respectively, (determined in step 4) and &#x3b4; is the time slot length. Due to the channel sharing of MIMO links L and L&#x2032;, data cannot transmit at the full link capacity of link L or link L&#x2032;, i.e. either link cannot transmit at its full degree of freedom, i.e. transmitting different streams on each of its antenna element. The actual transmission rate on links L and L&#x2032; are &#x3b8;<sub>L</sub><sup>i </sup>and &#x3b8;<sub>L&#x2032;</sub><sup>i</sup>, respectively, not r<sub>L</sub><sup>i </sup>and r<sub>L&#x2032;</sub><sup>i</sup>. Recall in the first stage, the queue of link L&#x2032; was updated with r<sub>L&#x2032;</sub><sup>i </sup>transmission rate. It needs to be modified in this step. Remove link L from the unassigned link set U.</li>
        <li id="ul0014-0009" num="0092">9. If |F(u)|&#x2267;N(u) (node u has used up all its radios, no radio interfaces are available on node u anymore.), remove from U all the links e where e is any link incident on node u (e&#x2208;&#x3b4;(u)).</li>
        <li id="ul0014-0010" num="0093">10. If |F(v)|&#x2267;N(v) (node v has used up all its radios, no radio interfaces are available on node v anymore), remove from the set U all the link-channel pairs e&#x2032; where e&#x2032; is any link incident on node v (e&#x2032;&#x2208;&#x3b4;(v)).</li>
        <li id="ul0014-0011" num="0094">11. It is possible that link L cannot find a link to pair. If so, the link L is inactive in this time slot, and remove link L from the unassigned link set U.</li>
        <li id="ul0014-0012" num="0095">12. Repeat step 2 until the set U becomes empty.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0067" num="0096"><figref idref="DRAWINGS">FIG. 7</figref> is a flowchart for the stream control procedure (second stage) in the two-stage channel assignment and stream control method in accordance to an exemplary embodiment of the present invention. For any two nodes u, v in the transmission range with unassigned radios, where |F(u)|&#x3c;N(u) and |F(v)|&#x3c;N(v) (the transmitting radio is not assigned and the receiving radio is not assigned), construct min{N(u)&#x2212;|F(u)|, N(v)&#x2212;|F(v)|} parallel edges corresponding to the unassigned links between nodes u and v so as to form a set U having all the unassigned links at <b>705</b>. At <b>710</b> search the set U for the unassigned links with the highest/maximum queue size, i.e. the highest workload remaining after the first stage channel assignment, assuming that it is L&#x2208;(u,v). It should be noted that the remaining queue size is the aggregated queue size in node u corresponding to all the links L&#x2208;(u,v). These links share a queue. At <b>715</b> for the unassigned link L with the maximum remaining queue size, find all the pairing link candidates L&#x2032; operating on channel i. A pairing link candidate L&#x2032; must satisfy (a) L&#x2032; is the only link that has been assigned on channel i among the neighboring links of link L in the first stage Let N(L,i) denote the set of links that have been assigned on channel i and interfere with link L on channel i. That is, the set of neighboring links of link L that have been assigned on channel i. |N(L,i)| is the number of links in N(L,i). Then |N(L,i)|=1 and L&#x2032;&#x2208;N(L,i). And (b) no neighboring links of link L&#x2032; has been assigned on channel i, i.e. paired with link L&#x2032; in the second stage, i.e. N(L&#x2032;,i)=&#x3a6;.</p>
<p id="p-0068" num="0097">A test is performed at <b>720</b> to determine if any link pair candidates have been located/found. If any link pair candidates have been located then at <b>725</b> determine the throughput of links L and L&#x2032; (the data rate that can transmit on L and L&#x2032;) in this time slot as well as the MIMO streams and mode used by links L and L&#x2032; for transmission if L is assigned on channel i and transmit simultaneously with link L&#x2032; with MIMO, i.e. if L and L&#x2032; pair. An exemplary embodiment for this procedure is described below and depicted in <figref idref="DRAWINGS">FIG. 8</figref>. A test is performed at <b>730</b> to determine if more link pair candidates exist/have been located. If more/additional link pair candidates have been located then processing proceeds to <b>725</b>. If there are no more link pair candidates then at <b>735</b> select a candidate to pair among the candidate links such that link L can have the maximum throughput if pairing with this candidate. Assume the candidate link L&#x2032; is selected and L&#x2032; operates on channel i, assign channel i on link L where L&#x2208;(u,v). That is, assign an unused radio on node u to operate on channel i (F(u)=F(u)&#x222a;{i}) and an unused radio on node v to operate on channel i (F(v)=F(v)&#x222a;{i}). Add (L,i) to M<sup>i</sup>(t) (add link L to the transmit schedule), meaning that in the t-th time slot link L can be active on channel i using the MIMO streams and mode determined in <b>725</b>. Update M<sup>i</sup>(t) for link (L&#x2032;,i) with the new MIMO streams and mode determined in <b>725</b>. Links L and L&#x2032; operate based on the MIMO streams and mode determined in <b>725</b>. After pairing, link L&#x2032; may not transmit using all its MIMO streams as determined in the first stage because it will share the same channel with link L. The total number of MIMO parallel streams on link L and L&#x2032; should not be greater than the degree of freedom, or the number of the antenna elements, K. Update the queue size of link L and L&#x2032;. q<sub>L</sub>=q<sub>L</sub>&#x2212;&#x3b8;<sub>L</sub><sup>i&#x3b4;</sup> and q<sub>L&#x2032;</sub>=q<sub>L&#x2032;</sub>+r<sub>L&#x2032;</sub><sup>i&#x3b4;</sup>&#x2212;&#x3b8;<sub>L&#x2032;</sub><sup>i&#x3b4;</sup> where &#x3b8;<sub>L</sub><sup>i </sup>and &#x3b8;<sub>L&#x2032;</sub><sup>i </sup>are the throughput on link L and L&#x2032; in time slot t, respectively, (determined in <b>725</b>) and &#x3b4; is the time slot length. Due to the channel sharing of MIMO links L and L&#x2032;, data cannot transmit at the full link capacity of link L or link L&#x2032;, i.e. either link cannot transmit at its full degree of freedom, i.e. transmitting different streams on each of its antenna elements. The actual transmission rate on links L and L&#x2032; are &#x3b8;<sub>L</sub><sup>i </sup>and &#x3b8;<sub>L&#x2032;</sub><sup>i</sup>, respectively, not r<sub>L</sub><sup>i </sup>and r<sub>L&#x2032;</sub><sup>i</sup>. Recall in the first stage, the queue of link L&#x2032; was updated with r<sub>L&#x2032;</sub><sup>i </sup>transmission rate. It needs to be modified in this step. Remove link L from the unassigned link set U.</p>
<p id="p-0069" num="0098">A test is performed at <b>740</b> to determine if all radios on the transmitting node of link L have been assigned. At <b>745</b> if |F(u)|&#x2267;N(u) (node u has used up all its radios, no radio interfaces are available on node u anymore&#x2014;if all radios on the transmitting node of link L have been assigned), remove from U all the links e where e is any link incident on node u (e&#x2208;&#x3b4;(u)). A test is performed at <b>750</b> to determine if all radios on the receiving node of link L have been assigned. If all radios on the transmitting node of link L have not been assigned then processing proceeds to <b>750</b>. At <b>755</b> if |F(v)|&#x2267;N(v) (node v has used up all its radios, no radio interfaces are available on node v anymore&#x2014;if all radios on the receiving node of link L have been assigned), remove from the set U all the link-channel pairs e&#x2032; where e&#x2032; is any link incident on node v (e&#x2032;&#x2208;&#x3b4;(v)). A test is performed at <b>760</b> to determine if set U is empty. If all radios on the receiving node of link L have not been assigned then processing proceeds to <b>760</b>. If set U is empty, then processing ends. If set U is not empty, then processing proceeds to <b>710</b>.</p>
<p id="p-0070" num="0099">If no link pair was located for link L then at <b>765</b> the link L is inactive in this time slot, and remove the unassigned link L from the unassigned link set U. Processing then proceeds to <b>760</b>.</p>
<p id="p-0071" num="0100">As an exemplary embodiment for determining the throughput of links L and L&#x2032; as well as the MIMO streams, and mode used by links L and L&#x2032; for transmission if the links are paired and sharing channel i (above <b>725</b> of <figref idref="DRAWINGS">FIG. 7</figref>), the following procedure is performed.
<ul id="ul0015" list-style="none">
    <li id="ul0015-0001" num="0000">
    <ul id="ul0016" list-style="none">
        <li id="ul0016-0001" num="0101">1. Form a set F of link-stream pairs (l, k), where l&#x2208;{L,L&#x2032;} and k&#x2208;{1, 2, . . . K} and define a stream set S that is initially empty, S=&#x3a6;.</li>
        <li id="ul0016-0002" num="0102">2. Link L&#x2032; was assigned in the first stage for transmitting with all its degrees of freedom, i.e. transmitting different streams on all its antenna elements with the total link data rate r<sub>L&#x2032;</sub><sup>i</sup>. Now it will share the channel with link L. Let &#x3c0;<sub>L&#x2032;</sub> denote the queue size of link L&#x2032; if link L&#x2032; is not assigned in the first stage, &#x3c0;<sub>L&#x2032;</sub>=q<sub>L&#x2032;</sub>+r<sub>L&#x2032;</sub><sup>i&#x3b4;</sup>. Update the queue size. Let &#x3c0;<sub>L</sub>denote the current queue size of link L &#x3c0;<sub>L</sub>=q<sub>L</sub>. Let &#x3b8;<sub>l</sub><sup>i </sup>denote the throughput of link l (l&#x2208;{L,L&#x2032;}) if links L and L&#x2032; are paired. Initialize &#x3b8;<sub>l</sub><sup>i</sup>=0 . Assign a weight for each link stream pair in set F.</li>
        <li id="ul0016-0003" num="0103">3. Search in set F for the link-stream pair (l, k) with the maximum weight q<sub>l</sub>r<sub>l</sub><sup>(i,k)</sup>. Remove (l, k) from set F and add it to set S, meaning that l may transmit on channel i using the k-th stream in the t-th slot. Update the throughput of link l &#x3b8;<sub>l</sub><sup>i</sup>=&#x3b8;<sub>l</sub><sup>i</sup>+r<sub>l</sub><sup>(i,k)</sup>, and the queue size &#x3c0;<sub>l</sub>=&#x3c0;<sub>l</sub>&#x2212;r<sub>l</sub><sup>(i,k)&#x3b4;</sup> where &#x3b4; is the time slot length and r<sub>l</sub><sup>(i,k) </sup>is the data rate when l may transmit on channel i using the k-th stream.</li>
        <li id="ul0016-0004" num="0104">4. Remove from set F the link-stream pair (l&#x2032;, k&#x2032;) where l&#x2032;&#x2208;{L,L&#x2032;} and l&#x2032;&#x2260;l and k&#x2032; is the stream on l&#x2032; with the lowest channel gain. Since l and l&#x2032; interfere with each other, one degree of freedom on l&#x2032; corresponding to the lowest-channel-gain stream is dedicated to suppress interference from the transmission (l,k).</li>
        <li id="ul0016-0005" num="0105">5. Repeat step 3 until the number of elements in set S is greater than K, i.e |S|&#x3e;K , or set F has become empty.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0072" num="0106"><figref idref="DRAWINGS">FIG. 8</figref> is a flowchart of <b>725</b> from <figref idref="DRAWINGS">FIG. 7</figref>, which was described immediately above. <figref idref="DRAWINGS">FIG. 8</figref> is for two links sharing a channel with MIMO (<b>725</b> of FIG. <b>7</b>&#x2014;second stage) in the two-stage channel assignment and stream control method in accordance with an exemplary embodiment of the present invention. At <b>805</b> form a set F of link-stream pairs (l, k), where l&#x2208;{L,L&#x2032;} and k&#x2208;{1, 2, . . . K} where K is the number of antennas. At <b>810</b> define a stream set S that is initially empty, S=&#x3a6;. At <b>815</b> link L&#x2032; was assigned in the first stage for transmitting with all its degrees of freedom, i.e. transmitting different streams on all its antenna elements with the total link data rate r<sub>L&#x2032;</sub><sup>i</sup>. Now it will share the channel with link L. Let &#x3c0;<sub>L&#x2032;</sub> denote the queue size of link L&#x2032; if link L&#x2032; is not assigned in the first stage, &#x3c0;<sub>L&#x2032;</sub>=q<sub>L&#x2032;</sub>+r<sub>L&#x2032;</sub><sup>i&#x3b4;</sup>. Update the pairing candidate link's queue size. Let &#x3c0;<sub>L </sub>denote the current queue size of link L &#x3c0;<sub>L</sub>=q<sub>L</sub>. Let &#x3b8;<sub>l</sub><sup>i </sup>denote the throughput of link l (l&#x2208;{L,L&#x2032;}) if links L and L&#x2032; are paired. Initialize &#x3b8;<sub>l</sub><sup>i</sup>=0. At <b>820</b> assign a weight for each link stream pair in set F. At <b>825</b> search in set F for the link-stream pair (l, k) with the maximum weight q<sub>l</sub>r<sub>l</sub><sup>(i,k)</sup>. Remove (l, k) from set F and add it to set S, meaning that l may transmit on channel i using the k-th stream in the t-th slot. Update the throughput of link l &#x3b8;<sub>l</sub><sup>i</sup>=&#x3b8;<sub>l</sub><sup>i</sup>+r<sub>l</sub><sup>(i,k)</sup>, and the queue size &#x3c0;<sub>l</sub>=&#x3c0;<sub>l</sub>&#x2212;r<sub>l</sub><sup>(i,k)&#x3b4;</sup> where &#x3b4; is the time slot length and r<sub>l</sub><sup>(i,k) </sup>is the data rate when l may transmit on channel i using the k-th stream. At <b>830</b> remove from set F the link-stream pair (l&#x2032;, k&#x2032;) where l&#x2032;&#x2208;{L,L&#x2032;} and l&#x2032;&#x2260;l and k&#x2032; is the stream on l&#x2032; with the lowest channel gain. Since l and l&#x2032; interfere with each other, one degree of freedom on l&#x2032; corresponding to the lowest-channel-gain stream is dedicated to suppress interference from the transmission (l,k). A test is performed at <b>835</b> to determine if the number of elements in set S is greater than K, i.e |S|&#x3e;K, or set F is empty. If the number of elements in set S is greater than K, i.e |S|&#x3e;K, or set F is empty then processing ends. If the number of elements in set S is less than or equal to K, i.e |S|&#x2266;K, and set F is not empty then processing proceeds to <b>825</b>.</p>
<p id="p-0073" num="0107">As an example, consider a wireless network with six nodes as shown in <figref idref="DRAWINGS">FIG. 9(</figref><i>a</i>). Each of the six nodes A to F is equipped with two radios and each radio has two MIMO antenna elements. Six MIMO links exist&#x2014;links e<sub>1 </sub>and e<sub>2 </sub>between A and D (e<sub>1</sub>, e<sub>2</sub>&#x2208;(A, D)), links e<sub>3 </sub>and e<sub>4 </sub>between B and E (e<sub>3</sub>, e<sub>4</sub>&#x2208;(B,E)), and e<sub>5 </sub>and e<sub>6 </sub>between C and F (e<sub>5</sub>, e<sub>6</sub>&#x2208;(C, F)), respectively. Each of the links has two streams at maximum, shown as the two lines between the two corresponding radios. The numbers beside the lines in <figref idref="DRAWINGS">FIG. 9(</figref><i>a</i>) are the channel gains for the respective streams, while those in the parentheses denote the aggregate rates of the corresponding links. The aggregate rate of a link is the transmission rate on that link when it uses all its streams to transmit. For example, link e<sub>l </sub>can transmit at 8 data-units per time-slot if it transmits two independent streams at a time. Links (A, D) and (B, E) interfere each other, and (B,E) and (C, F) also interfere, but (A,D) and (C,F) do not interfere each other. There are two available non-overlapping channels, CH<b>1</b> and CH<b>2</b>.</p>
<p id="p-0074" num="0108">Assuming link e<sub>1 </sub>works on CH<b>1</b>, e<sub>3 </sub>on CH <b>2</b>, e<sub>5 </sub>on CH<b>1</b> according to channel assignment procedure (first stage in the above description (<figref idref="DRAWINGS">FIG. 6</figref>)) that are shown in solid lines in <figref idref="DRAWINGS">FIG. 9(</figref><i>a</i>). Due to one unused radio on each node, there are three unassigned links e<sub>2</sub>&#x2208;(A, D) , e<sub>4</sub>&#x2208;(B, E) and e<sub>6</sub>&#x2208;(C, F) that are shown as dashed lines in <figref idref="DRAWINGS">FIG. 9(</figref><i>a</i>).</p>
<p id="p-0075" num="0109">Assume links (B, E) have the largest workload (queue size), then stream control starts with link e<sub>4</sub>&#x2208;(B, E). e<sub>4</sub>&#x2208;(B, E) cannot be paired with link e<sub>1 </sub>or link e<sub>5 </sub>because both of link e<sub>1 </sub>and link e<sub>5 </sub>have been assigned to work on CH<b>1</b> (condition in <b>3</b>(<i>a</i>) is not satisfied). e<sub>3 </sub>on CH <b>2</b> is a pairing candidate for e<sub>4</sub>. If e<sub>4 </sub>and e<sub>3 </sub>are paired, the stream with channel gain 1 on e<sub>4 </sub>and the stream with channel gain 1 on e<sub>3 </sub>are selected. That is, the streams with the highest gain are selected. Links e<sub>3 </sub>and e<sub>4 </sub>are paired on CH<b>2</b>. Similarly links e<sub>2 </sub>and e<sub>1 </sub>are paired on CH<b>1</b>, and links e<sub>6 </sub>and e<sub>5 </sub>are paired on CH<b>1</b> and the stream with channel gain 1 on each link is selected to be active, as shown in <figref idref="DRAWINGS">FIG. 9(</figref><i>b</i>). The throughput for link e<sub>1 </sub>is</p>
<p id="p-0076" num="0110">
<maths id="MATH-US-00013" num="00013">
<math overflow="scroll">
<mrow>
  <msubsup>
    <mi>&#x3b8;</mi>
    <msub>
      <mi>e</mi>
      <mn>1</mn>
    </msub>
    <mrow>
      <mi>CH</mi>
      <mo>&#x2062;</mo>
      <mstyle>
        <mspace width="0.3em" height="0.3ex"/>
      </mstyle>
      <mo>&#x2062;</mo>
      <mn>1</mn>
    </mrow>
  </msubsup>
  <mo>=</mo>
  <mrow>
    <mrow>
      <mfrac>
        <mn>1</mn>
        <mrow>
          <mn>1</mn>
          <mo>+</mo>
          <mn>0.6</mn>
        </mrow>
      </mfrac>
      <mo>&#xd7;</mo>
      <mn>8</mn>
    </mrow>
    <mo>=</mo>
    <mn>5.</mn>
  </mrow>
</mrow>
</math>
</maths>
<br/>
Similarly, the throughput for links e<sub>2 </sub>. . . e<sub>6 </sub>are &#x3b8;<sub>e</sub><sub><sub2>2</sub2></sub><sup>CH1</sup>=5, &#x3b8;<sub>e</sub><sub><sub2>3</sub2></sub><sup>CH2</sup>=5, &#x3b8;<sub>e</sub><sub><sub2>4</sub2></sub><sup>CH2</sup>=5, &#x3b8;<sub>e</sub><sub><sub2>5</sub2></sub><sup>CH1</sup>=5, &#x3b8;<sub>e</sub><sub><sub2>6</sub2></sub><sup>CH1</sup>=5, respectively. The aggregate throughput between nodes A and D is 10, i.e. the total throughput of (A, D) is 10. Similarly, the total throughput of (B, E) is 10 and the total throughput of (C, F) is also 10. If there is no pairing, links e<sub>2</sub>, e<sub>4 </sub>and e<sub>6 </sub>are not active and the throughput between nodes A and D (A, D) would be 8. Similarly, the total throughput of (B, E) would be 8 and throughput of (C, F) would also be 8.
</p>
<p id="p-0077" num="0111">The methods in the present invention can be implemented in a central controller or implemented in a distributed manner. If the method is implemented in a central controller, the central controller can be hosted in the gateway, a mesh node or a separate node connected to the wireless mesh network. The separate node can be in the mesh network or in the wired network connected to the mesh network. Referring to <figref idref="DRAWINGS">FIG. 10</figref>, which is a block diagram of an exemplary implementation of the central controller of the present invention. The monitoring module collects the network state information from the mesh nodes through the communication module. The control module runs at least one embodiment of the present invention as a routine to determine the routing, channel assignment, stream control and transmission scheduling. The control module sends the instructions for the determined routing, channel assignment, stream control and scheduling to the mesh nodes via communication module.</p>
<p id="p-0078" num="0112">Referring to <figref idref="DRAWINGS">FIG. 11</figref>, which is a block diagram of an exemplary implementation of the mesh access point/mesh router/mesh node in accordance with the present invention. The mesh node includes a host computing system and one or more wireless communication modules. The host processing system can be a general-purpose computer or a specific-purpose computing system. The host computing system can include a central processing unit (CPU), a memory and an input/output (I/O) interface. The wireless communication module can include a media access control (MAC) and baseband processor, radio transmitter and/or receiver, and multiple MIMO antenna elements. The radio transmitter and/or receiver may be a radio transceiver or a separate radio transmitter and radio receiver. An antenna transmits and receives radio signals. The radio transmitter and/or receiver perform radio signal processing. The MAC and baseband processor performs MAC control and data framing, modulation/demodulation, coding/decoding for the transmission/receiving. The wireless communication module monitors and measures the wireless link, channel and network state information and reports the information to the central controller.</p>
<p id="p-0079" num="0113">In an alternative embodiment, the present invention can be implemented distributively in the mesh nodes. At least one embodiment of the present invention can be implemented as a routine in the host computing system or in the wireless communication module of the mesh node to determine the routing, transmission scheduling, channel assignment and MIMO stream control.</p>
<p id="p-0080" num="0114">In another embodiment, the present invention can be implemented in a combination of centralized and distributed manner. As an example, the routing may be determined by the central controller but the channel assignment, transmission scheduling, and steam control may be determined by the individual mesh nodes.</p>
<p id="p-0081" num="0115">The block diagrams of <figref idref="DRAWINGS">FIGS. 10 and 11</figref> may be implemented as hardware, software, firmware, a field programmable gate array (FPGA), an application specific integrated circuit (ASIC), a reduced instruction set computer (RISC) or any combination thereof. Further, the exemplary processes illustrated in the various flowcharts and text above are operationally implemented in either the host processing system or the wireless communication module or a combination of the host processing system and the communication module. The block diagrams thus fully enable the various methods/processes to be practiced in hardware, software, firmware, a field programmable gate array (FPGA), an application specific integrated circuit (ASIC), a reduced instruction set computer (RISC) or any combination thereof.</p>
<p id="p-0082" num="0116">It is to be understood that the present invention may be implemented in various forms of hardware, software, firmware, special purpose processors, or a combination thereof. Preferably, the present invention is implemented as a combination of hardware and software. Moreover, the software is preferably implemented as an application program tangibly embodied on a program storage device. The application program may be uploaded to, and executed by, a machine comprising any suitable architecture. Preferably, the machine is implemented on a computer platform having hardware such as one or more central processing units (CPU), a random access memory (RAM), and input/output (I/O) interface(s). The computer platform also includes an operating system and microinstruction code. The various processes and functions described herein may either be part of the microinstruction code or part of the application program (or a combination thereof), which is executed via the operating system. In addition, various other peripheral devices may be connected to the computer platform such as an additional data storage device and a printing device.</p>
<p id="p-0083" num="0117">It is to be further understood that, because some of the constituent system components and method steps depicted in the accompanying figures are preferably implemented in software, the actual connections between the system components (or the process steps) may differ depending upon the manner in which the present invention is programmed. Given the teachings herein, one of ordinary skill in the related art will be able to contemplate these and similar implementations or configurations of the present invention.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-math idrefs="MATH-US-00001" nb-file="US08625515-20140107-M00001.NB">
<img id="EMI-M00001" he="7.79mm" wi="76.20mm" file="US08625515-20140107-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00002" nb-file="US08625515-20140107-M00002.NB">
<img id="EMI-M00002" he="8.13mm" wi="76.20mm" file="US08625515-20140107-M00002.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00003" nb-file="US08625515-20140107-M00003.NB">
<img id="EMI-M00003" he="51.14mm" wi="76.20mm" file="US08625515-20140107-M00003.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00004" nb-file="US08625515-20140107-M00004.NB">
<img id="EMI-M00004" he="8.13mm" wi="76.20mm" file="US08625515-20140107-M00004.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00005" nb-file="US08625515-20140107-M00005.NB">
<img id="EMI-M00005" he="9.14mm" wi="76.20mm" file="US08625515-20140107-M00005.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00006" nb-file="US08625515-20140107-M00006.NB">
<img id="EMI-M00006" he="6.35mm" wi="76.20mm" file="US08625515-20140107-M00006.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00007" nb-file="US08625515-20140107-M00007.NB">
<img id="EMI-M00007" he="6.35mm" wi="76.20mm" file="US08625515-20140107-M00007.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00008 MATH-US-00008-2" nb-file="US08625515-20140107-M00008.NB">
<img id="EMI-M00008" he="10.24mm" wi="76.20mm" file="US08625515-20140107-M00008.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00009" nb-file="US08625515-20140107-M00009.NB">
<img id="EMI-M00009" he="6.35mm" wi="76.20mm" file="US08625515-20140107-M00009.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00010" nb-file="US08625515-20140107-M00010.NB">
<img id="EMI-M00010" he="6.35mm" wi="76.20mm" file="US08625515-20140107-M00010.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00011" nb-file="US08625515-20140107-M00011.NB">
<img id="EMI-M00011" he="6.35mm" wi="76.20mm" file="US08625515-20140107-M00011.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00012" nb-file="US08625515-20140107-M00012.NB">
<img id="EMI-M00012" he="6.35mm" wi="76.20mm" file="US08625515-20140107-M00012.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00013" nb-file="US08625515-20140107-M00013.NB">
<img id="EMI-M00013" he="6.01mm" wi="76.20mm" file="US08625515-20140107-M00013.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method for determining a route, channel assignment, multiple-in, multiple out stream control and a transmission schedule in a network, said method comprising:
<claim-text>determining said route responsive to long term network conditions and long term traffic conditions of the network;</claim-text>
<claim-text>determining said channel assignment, said multiple-in multiple-out stream control, and said transmission schedule responsive to local channel conditions, local link conditions and local traffic conditions of the network;</claim-text>
<claim-text>determining if there has been a change in one of said long term network conditions and said long term traffic conditions of the network;</claim-text>
<claim-text>forming a first set of link-channel-stream triplets in a network;</claim-text>
<claim-text>determining a weight for each link-channel-stream triplet;</claim-text>
<claim-text>locating said link-channel-stream triplet having a maximum weight;</claim-text>
<claim-text>scheduling said link-channel-steam triplet in a time slot;</claim-text>
<claim-text>assigning a channel to transmitting and receiving radios of a link associated with said link-channel-stream triplet;</claim-text>
<claim-text>updating a queue size of said link;</claim-text>
<claim-text>removing said link-channel-stream triplet from said first set;</claim-text>
<claim-text>removing all link-channel-stream triplets that are in an interference range of said link and use a same channel from said first set and where a stream has a lowest channel gain from said set;</claim-text>
<claim-text>removing all link-channel-stream triplets that are incident on a transmitting node of said link and not communicating using channels assigned to said transmitting node from said first set; and</claim-text>
<claim-text>removing all link-channel-stream triplets that are incident on a receiving node of said link and not communicating using channels assigned to said receiving node from said first set.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>initializing a time slot pointer;</claim-text>
<claim-text>determining if said first set is empty;</claim-text>
<claim-text>incrementing said time slot pointer; and</claim-text>
<claim-text>determining if said time slot pointer has reached a maximum value.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said network is a multi-hop wireless network.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. A method for determining a route, channel assignment, multiple-in, multiple out stream control and a transmission schedule in a network, said method comprising:
<claim-text>determining said route responsive to long term network conditions and long term traffic conditions of the network;</claim-text>
<claim-text>determining said channel assignment, said multiple-in multiple-out stream control, and said transmission schedule responsive to local channel conditions, local link conditions and local traffic conditions of the network;</claim-text>
<claim-text>determining if there has been a change in one of said long term network conditions and said long term traffic conditions of the network;</claim-text>
<claim-text>forming a first set including all link-channel pairs in said network;</claim-text>
<claim-text>determining a weight for each link-channel pair;</claim-text>
<claim-text>locating said link-channel pair having a maximum weight;</claim-text>
<claim-text>scheduling said link-channel pair in a time slot;</claim-text>
<claim-text>assigning a channel to transmitting and receiving radios of a link associated with said link-channel pair;</claim-text>
<claim-text>updating a queue size of said link;</claim-text>
<claim-text>removing said link-channel pair from said first set;</claim-text>
<claim-text>removing all link-channel pairs that are incident on a transmitting node of said link from said first set;</claim-text>
<claim-text>removing all link-channel pairs that are incident on a receiving node of said link from said first set; and</claim-text>
<claim-text>performing multiple-in multiple-out stream control and link pairing.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method according to <claim-ref idref="CLM-00004">claim 4</claim-ref>, further comprising: initializing a time slot pointer; determining if said set is empty; incrementing said time slot pointer; and
<claim-text>determining if said time slot pointer has reached a maximum value.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method according to <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein said performing act further comprises:
<claim-text>forming a second set including all unassigned link-channel pairs in said network;</claim-text>
<claim-text>locating said unassigned link-channel pair with a maximum remaining queue size;</claim-text>
<claim-text>locating all link-channel pairing candidates for said unassigned link with said maximum remaining queue size;</claim-text>
<claim-text>determining a throughput, said multiple-in multiple-out stream control and a transmission mode between said unassigned link with said maximum remaining queue size and each of said link-channel pairing candidates;</claim-text>
<claim-text>selecting said candidate link-channel pair such that said unassigned link has a maximum throughput if paired with said link-channel pair;</claim-text>
<claim-text>assigning said channel to said transmitting radio and said receiving radio of said unassigned link;</claim-text>
<claim-text>scheduling said unassigned link in a time slot;</claim-text>
<claim-text>assigning said multiple-in multiple out stream control to said unassigned link and said selected candidate link-channel pair;</claim-text>
<claim-text>assigning said transmission mode to said unassigned link and said selected candidate link-channel pair;</claim-text>
<claim-text>updating said queue size of said unassigned link and said selected candidate link-channel pair;</claim-text>
<claim-text>removing said unassigned link from said second set;</claim-text>
<claim-text>removing all unassigned links that are incident on a transmitting node of said link from said second set; and</claim-text>
<claim-text>removing all unassigned links that are incident on a receiving node of said link from said second set.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method according to <claim-ref idref="CLM-00006">claim 6</claim-ref>, further comprising removing said unassigned link from said second set if no candidate link-channel pair can be located.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method according to <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein said determining act further comprises: forming a third set including said unassigned links and said candidate link-channel pairs; defining and initializing a fourth set; updating a queue of said candidate link-channel pair; assigning a weight for each link-stream pair in said third set; locating said link-stream pair having a maximum weight; removing said link-stream pair having said maximum weight from said third set; adding said link-stream pair having said maximum weight to said fourth set; updating said queue size and said throughput of said unassigned link; removing said link-stream pair having a lowest channel gain from said third set, wherein said link-stream pair is not said unassigned link. </claim-text>
</claim>
</claims>
</us-patent-grant>
