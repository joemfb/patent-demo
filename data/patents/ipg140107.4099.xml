<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625168-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625168</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13762200</doc-number>
<date>20130207</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2009-184800</doc-number>
<date>20090807</date>
</priority-claim>
</priority-claims>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>N</subclass>
<main-group>1</main-group>
<subgroup>40</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>K</subclass>
<main-group>15</main-group>
<subgroup>00</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>N</subclass>
<main-group>1</main-group>
<subgroup>46</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>7</main-group>
<subgroup>04</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>358  328</main-classification>
<further-classification>358  114</further-classification>
<further-classification>358505</further-classification>
<further-classification>726 26</further-classification>
</classification-national>
<invention-title id="d2e61">Device capable of reading plural documents, method of controlling the device, and program</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6463435</doc-number>
<kind>B1</kind>
<name>Bergmans</name>
<date>20021000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>2006/0028689</doc-number>
<kind>A1</kind>
<name>Perry</name>
<date>20060200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2007/0201085</doc-number>
<kind>A1</kind>
<name>Yokochi</name>
<date>20070800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2008/0104685</doc-number>
<kind>A1</kind>
<name>Ishiguro</name>
<date>20080500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2008/0174811</doc-number>
<kind>A1</kind>
<name>Tanaka</name>
<date>20080700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2008/0184364</doc-number>
<kind>A1</kind>
<name>Ishiguro</name>
<date>20080700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2008/0252937</doc-number>
<kind>A1</kind>
<name>Nakai</name>
<date>20081000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2010/0140362</doc-number>
<kind>A1</kind>
<name>Tokumaru</name>
<date>20100600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>235494</main-classification></classification-national>
</us-citation>
</us-references-cited>
<number-of-claims>12</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>None</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>7</number-of-drawing-sheets>
<number-of-figures>7</number-of-figures>
</figures>
<us-related-documents>
<continuation>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>13592048</doc-number>
<date>20120822</date>
</document-id>
<parent-grant-document>
<document-id>
<country>US</country>
<doc-number>8395823</doc-number>
</document-id>
</parent-grant-document>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>13762200</doc-number>
</document-id>
</child-doc>
</relation>
</continuation>
<continuation>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>12753680</doc-number>
<date>20100402</date>
</document-id>
<parent-grant-document>
<document-id>
<country>US</country>
<doc-number>8274709</doc-number>
<date>20120925</date>
</document-id>
</parent-grant-document>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>13592048</doc-number>
</document-id>
</child-doc>
</relation>
</continuation>
<continuation>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>PCT/JP2009/069174</doc-number>
<date>20091111</date>
</document-id>
<parent-status>PENDING</parent-status>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>12753680</doc-number>
</document-id>
</child-doc>
</relation>
</continuation>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20130148170</doc-number>
<kind>A1</kind>
<date>20130613</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only" applicant-authority-category="assignee">
<addressbook>
<orgname>Canon Kabushiki Kaisha</orgname>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Kakutani</last-name>
<first-name>Naoya</first-name>
<address>
<city>Kawasaki</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Canon U.S.A., Inc. IP Division</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Canon Kabushiki Kaisha</orgname>
<role>03</role>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Lett</last-name>
<first-name>Thomas</first-name>
<department>2673</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">Provided is a device that prevents unauthorized copying of a document to which copy inhibition information is added.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="155.79mm" wi="191.85mm" file="US08625168-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="176.19mm" wi="192.87mm" file="US08625168-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="190.33mm" wi="167.89mm" file="US08625168-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="114.72mm" wi="165.35mm" file="US08625168-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="110.24mm" wi="118.53mm" file="US08625168-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="183.90mm" wi="134.54mm" file="US08625168-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="224.28mm" wi="142.24mm" file="US08625168-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="262.72mm" wi="193.55mm" file="US08625168-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This application is a Continuation of U.S. patent application Ser. No. 13/592,048, filed Aug. 22, 2012, which is a Continuation of U.S. patent application Ser. No. 12/753,680, filed Apr. 2, 2010, now U.S. Pat. No. 8,274,709, which is a Continuation of International Application No. PCT/JP2009/069174, filed Nov. 11, 2009, which claims the benefit of Japanese Patent Application No. 2009-184800, filed Aug. 7, 2009, all of which are hereby incorporated by reference herein in their entirety.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">TECHNICAL FIELD</heading>
<p id="p-0003" num="0002">The present invention relates to a device capable of reading plural documents, a method of controlling the device, and a program.</p>
<heading id="h-0003" level="1">BACKGROUND ART</heading>
<p id="p-0004" num="0003">In recent years, unauthorized copying of documents has become more frequent as a result of the spread of copiers. A technique is provided as a countermeasure that inhibits copying of a specific document. The technique that inhibits copying is as follows.</p>
<p id="p-0005" num="0004">A copier disclosed in patent literature 1 adds copy inhibition information to a document. When the copier reads the document, the copier inhibits copying of the document.</p>
<p id="p-0006" num="0005">A copier disclosed in patent literature 2 adds conditional copy permission information and a condition (for example, a password) to a document. When the copier reads the document, the copier requests a user to input the condition added to the document. If the input condition is correct, the copier makes a copy of the document. If the input condition is wrong, the copier does not make a copy of the document.</p>
<heading id="h-0004" level="1">CITATION LIST</heading>
<heading id="h-0005" level="1">Patent Literature</heading>
<p id="p-0007" num="0006">PTL 1: Japanese Patent Laid-Open No. 04-009963</p>
<p id="p-0008" num="0007">PTL 2: Japanese Patent Laid-Open No. 2002-305646</p>
<heading id="h-0006" level="1">SUMMARY OF INVENTION</heading>
<heading id="h-0007" level="1">Technical Problem</heading>
<p id="p-0009" num="0008">However, if a malicious user wants to make an unauthorized copy of a document to which copy inhibition information is added, such a user may think as follows.</p>
<p id="p-0010" num="0009">I have a document to which conditional copy permission information and a condition are added. Fortunately, I know the condition (for example, a password). When I put the document on a document plate, the copier would ask me to input the condition. At this time, I can input the condition correctly. As long as I can input the condition correctly, the copier has no other choice but to make a copy of the document on the document plate. So I try to put the document to which the conditional copy permission information is added, together with a document to which copy inhibition information is added. Then, a copy of the document to which the copy inhibition information is added should be made. Such a malicious user may think as described above, and make an unauthorized copy of the document.</p>
<p id="p-0011" num="0010">The present invention is made to inhibit the malicious user from making an unauthorized copy of the document. Also, other output techniques (for example, techniques of sending e-mails, facsimiles, etc.) may have a problem similar to the above-described problem.</p>
<heading id="h-0008" level="1">Solution to Problem</heading>
<p id="p-0012" num="0011">A device according to an embodiment of the present invention includes generating means for reading a plurality of documents and generating document images corresponding to the documents; and extracting means capable of extracting conditional output permission information and output inhibition information from the generated document images. If the conditional output permission information and the output inhibition information are extracted by the extracting means, the generated document images are not output. Accordingly, unauthorized outputting by a malicious user can be inhibited.</p>
<p id="p-0013" num="0012">Also, a device according to an embodiment of the present invention includes reading means for reading a document that is inhibited from being output and a document that is conditionally permitted to be output; and inhibiting means for inhibiting the documents read by the reading means from being copied.</p>
<heading id="h-0009" level="1">Advantageous Effects of Invention</heading>
<p id="p-0014" num="0013">With the present invention, the behavior of a malicious user can be prevented when the user intends to make an unauthorized copy of a document that is inhibited from being output.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0010" level="1">BRIEF DESCRIPTION OF DRAWINGS</heading>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram of a MFP according to a first embodiment.</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 2</figref> is a flowchart showing a document creation process of the MFP.</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 3</figref> illustrates a part of a bar code plotted with a reference grid.</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 4</figref> illustrates a method of finding a bar code from a document image.</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 5</figref> illustrates a bar code.</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 6</figref> illustrates examples of screens for setting specific information.</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 7</figref> is a flowchart showing a flow of copy control executed by the MFP.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0011" level="1">DESCRIPTION OF EMBODIMENTS</heading>
<p id="p-0022" num="0021">Preferred embodiments of the present invention will be described below with reference to the attached drawings.</p>
<p id="h-0012" num="0000">First Embodiment</p>
<p id="p-0023" num="0022">A copy of a document to which conditional copy permission information and a condition are added can be made only if the condition is satisfied. Owing to this, for example, if a user who knows the condition of the document inputs the condition correctly to a copier and intends to make a copy of the document, the copier has no choice but to make a copy of the document.</p>
<p id="p-0024" num="0023">A first embodiment of the present invention aims at such a user who uses the document to make a copy of another document to which copy inhibition information is added. In particular, in this embodiment, the user is not only inhibited from making a copy of another document, but also from making a copy of the document (the document to which the conditional copy permission information and the condition are added) as a penalty.</p>
<p id="p-0025" num="0024">Now, words used in the first embodiment of the present invention will be described. Specific information represents any information listed below. First specific information includes two pieces of information of copy inhibition information and a document ID. Second specific information includes three pieces of information of conditional copy permission information, a condition, and a document ID. Also, in the first embodiment of the present invention, the copy inhibition information and the conditional copy permission information are collectively called copy control information.</p>
<p id="p-0026" num="0025">Next, a process of creating a document to which specific information is added will be described. Firstly, specific information is encoded to acquire embedded information. Secondly, an image of the embedded information is formed to generate a bar code. The generated bar code is replicated. The resulting plurality of bar codes are combined to generate a bar code group. Thirdly, the bar code group is merged with a document image, to generate a document image with the bar codes merged. Lastly, the document image with the bar codes merged is printed. Accordingly, a document to which the specific information is added in the form of the bar codes is created. The process series is called &#x201c;addition&#x201d; of the specific information. Also, the process of encoding the specific information to form an image of the specific information (with this process, a bar code is generated) is called bar-coding of the specific information.</p>
<p id="p-0027" num="0026">The bar code group, in which the plurality of bar codes are combined, is merged with the document image and printed, in order to obtain an effect of increasing resistance characteristics. Since the bar code group is merged with the document image and printed, the specific information can be extracted from the document as long as at least a single bar code is present in the document in an uncontaminated manner.</p>
<p id="p-0028" num="0027">In the following embodiments including the first embodiment of the present invention, processes in respective steps in a mode, in which a bar code group is used (a mode in which the bar code group is merged with the document image and printed, and a mode in which the printed document is read and copying of the document is controlled), will be described for example. However, a mode in which only a single bar code is merged with a document image and printed, and a mode in which the printed document is read and copying of the document is controlled, may be conceived although the above-described effect is degraded.</p>
<p id="p-0029" num="0028">In this embodiment, the number of bar codes included in a bar code group corresponds to the size of a document image. For example, when the document image has a size that is printed on an A4-size (21&#xd7;29.7 cm) sheet, a bar code group includes 21&#xd7;29 bar codes. Accordingly, bar codes are included in the entire area of the created document.</p>
<p id="p-0030" num="0029">Next, a process of extracting specific information from a document, to which the specific information is added in the form of bar codes, will be described. Firstly, a document put on a document plate or an auto document feeder (ADF) is read, and a document image of the read document is generated. Secondly, bar codes are found from the document image. Thirdly, information in the found bar codes is acquired to acquire embedded information. Fourthly, the embedded information is decoded to acquire specific information. Accordingly, the specific information can be acquired from the document to which the specific information is added in the form of the bar codes. The second and later processes in the process series is called &#x201c;extraction&#x201d; of the specific information.</p>
<p id="p-0031" num="0030">The embedded information includes an error correction code, but the specific information does not include an error correction code.</p>
<p id="p-0032" num="0031">A configuration of a multi function peripheral (MFP) according to the first embodiment of the present invention will be described in detail with reference to <figref idref="DRAWINGS">FIG. 1</figref>. <figref idref="DRAWINGS">FIG. 1</figref> is a block diagram showing the configuration of the MFP according to this embodiment.</p>
<p id="p-0033" num="0032">A control unit <b>1</b> controls operations of respective units in the MFP. The control unit <b>1</b> includes a central processing unit (CPU) (not shown here). The control unit <b>1</b> also decodes embedded information.</p>
<p id="p-0034" num="0033">An operation unit <b>5</b> receives an operation input to the MFP from a user.</p>
<p id="p-0035" num="0034">A user authentication unit <b>6</b> manages information required for authenticating a user who uses the MFP. The operation of the user authentication unit <b>6</b> will be described later in more detail.</p>
<p id="p-0036" num="0035">A reading unit <b>2</b> reads (for example, scans) the document and generates a document image of the document. It is to be noted that a document is a paper document such as a printed matter, whereas a document image is digital (or analog) data.</p>
<p id="p-0037" num="0036">An information acquisition unit <b>3</b> finds a bar code from the document image, and acquires information in the bar code.</p>
<p id="p-0038" num="0037">A memory <b>7</b> stores the document image.</p>
<p id="p-0039" num="0038">An output unit <b>8</b> outputs the document image after the memory <b>7</b> reads the document image. For example, the output unit <b>8</b> prints the document image, or sends the document image to an external device. Herein, the external device is, for example, a PC that is connected with the MFP through a network.</p>
<p id="p-0040" num="0039">A display unit <b>9</b> displays a display screen under the control of the control unit <b>1</b>.</p>
<p id="p-0041" num="0040">A data base <b>10</b> performs print setting for the MFP and records a log of use.</p>
<p id="p-0042" num="0041">An encoding unit <b>11</b> performs encoding and image formation as described above.</p>
<p id="p-0043" num="0042">Next, an operation performed by a user and a process performed by the MFP in accordance with the operation by the user to add specific information will be described in detail.</p>
<p id="p-0044" num="0043">A user who wants to add specific information to a document inputs a user ID and a password through the operation unit <b>5</b> while watching a setting screen <b>3002</b> displayed on the display unit <b>9</b>.</p>
<p id="p-0045" num="0044">The information input through the operation unit <b>5</b> is sent from the operation unit <b>5</b> to the user authentication unit <b>6</b>. The user authentication unit <b>6</b> determines whether the input password is correct with reference to the managed information.</p>
<p id="p-0046" num="0045">If it is determined that the password is correct, the user authentication unit <b>6</b> sends the determination of the correct password and the user ID to the control unit <b>1</b>.</p>
<p id="p-0047" num="0046">The control unit <b>1</b> that has received the determination of the correct password and the user ID causes the display unit <b>9</b> to display a check box (not shown here). The check box has an item by which the user can select whether specific information is added. If the user checks the box through the operation unit <b>5</b>, the control unit <b>1</b> causes the display unit <b>9</b> to display a print security setting dialogue box <b>31</b> shown in <figref idref="DRAWINGS">FIG. 6(</figref><i>a</i>).</p>
<p id="p-0048" num="0047">Next, the user may check one of radio buttons <b>32</b> in the print security setting dialogue box <b>31</b> through the operation unit <b>5</b>. Then, the user can select one of an option to &#x201c;inhibit copy&#x201d; and an option to &#x201c;set condition for permitting copy.&#x201d; If the selected option is to &#x201c;inhibit copy,&#x201d; copy inhibition information and a document ID are added as specific information to a document to be printed (which will be described later). If the selected option is to &#x201c;set condition for permitting copy,&#x201d; conditional copy permission information, a document ID, and a condition are added as specific information to a document to be printed (which will be described later).</p>
<p id="p-0049" num="0048">If the user selects to &#x201c;set condition for permitting copy,&#x201d; a condition input field <b>33</b> is allowed to be input, and the user may input the condition (for example, a password or a user ID) in the field. If the condition is a password, the user may input a password at this time. If the condition is a user ID, the user does not have to input a user ID at this time, and may input merely selection of the user ID as the condition. This is because the user ID has been already input for user authentication.</p>
<p id="p-0050" num="0049">It is to be noted that the same document ID is added to documents created by a single copy operation. Herein, the single copy operation is copying of a set of documents put on the document plate or the ADF by a single instruction for copying.</p>
<p id="p-0051" num="0050">Thus, for example, it is assumed that a user puts a set of documents (for example, 4 sheets) on the ADF and gives an instruction to the MFP for making three sets of copies. In this case, the three sets of copies (that is, 12 sheets) are created by a single copy operation. The same document ID is added to the three sets of copies.</p>
<p id="p-0052" num="0051">Specific information may be added by an input through a driver or a utility in the PC connected with the MFP. In the first embodiment of the present invention, the copy control information which is added to a single document is only one of the copy inhibition information and the conditional copy permission information.</p>
<p id="p-0053" num="0052">Next, a method of creating a document including a bar code will be described in detail with reference to <figref idref="DRAWINGS">FIG. 2</figref>. <figref idref="DRAWINGS">FIG. 2</figref> is a flowchart showing a document creation process of the MFP.</p>
<p id="p-0054" num="0053">The control unit <b>1</b> determines whether the box is checked (S<b>101</b>).</p>
<p id="p-0055" num="0054">If it is determined that the box is checked in S<b>101</b>, the control unit <b>1</b> uses the print security setting dialogue box <b>31</b> to receive the selection of the user through the operation unit <b>5</b>. Then, the control unit <b>1</b> sends specific information corresponding to the selection to the encoding unit <b>11</b> (S<b>102</b>). As described above, if the selected option is to &#x201c;inhibit copy,&#x201d; the specific information corresponding to the selection includes copy inhibition information and a document ID. If the selected option is to &#x201c;set condition for permitting copy,&#x201d; the specific information corresponding to the selection includes conditional copy permission information, a document ID, and a condition.</p>
<p id="p-0056" num="0055">Next, the reading unit <b>2</b> reads a document, generates a document image, and sends the generated document image to the memory <b>7</b> and the information acquisition unit <b>3</b> (S<b>103</b>).</p>
<p id="p-0057" num="0056">Next, the encoding unit <b>11</b> encodes the specific information and forms an image of the specific information to generate a bar code. Also, the encoding unit <b>11</b> replicates the bar code by the number corresponding to the size of the document image (for example, 608 bar codes). Then, the encoding unit <b>11</b> combines the resultant plurality of bar codes (for example, 609 bar codes) to generate a bar code group, and sends the bar code group to the memory <b>7</b> (S<b>104</b>).</p>
<p id="p-0058" num="0057">Next, when the control unit <b>1</b> detects that the memory <b>7</b> has received the bar code group and the document image, the memory <b>7</b> merges the bar code group with the document image to generate the document image with the bar codes merged (S<b>105</b>). As described above, in this embodiment, the plurality of bar codes are combined to generate the bar code group, and the generated bar code group is merged with the document image. Thus, the document image with the bar codes merged is generated. Alternatively, a similar image may be generated even if the process is changed such that bar codes are repeatedly merged with a document image one by one.</p>
<p id="p-0059" num="0058">Next, the control unit <b>1</b> sends the document image with the bar codes merged from the memory <b>7</b> to the output unit <b>8</b>, and causes the output unit <b>8</b> to output the document image (S<b>106</b>). A method of outputting the document image by the output unit <b>8</b> may be, for example, printing of the document image. When the document image is printed, a copy of the document that is the original of the document image is made.</p>
<p id="p-0060" num="0059">If a check box <b>2011</b> is not checked, the reading unit <b>2</b> reads the document, generates the document image, and sends the generated document image to the memory <b>7</b> (S<b>107</b>). Next, when the control unit <b>1</b> detects that the memory <b>7</b> has received the document image, the control unit <b>1</b> causes the memory <b>7</b> to send the document image to the output unit <b>8</b>, and causes the output unit <b>8</b> to output the document image (S<b>108</b>).</p>
<p id="p-0061" num="0060">Next, the bar code will be described in detail with reference to <figref idref="DRAWINGS">FIGS. 3 and 5</figref>. <figref idref="DRAWINGS">FIG. 5</figref> illustrates a bar code. <figref idref="DRAWINGS">FIG. 3</figref> illustrates a part of the bar code plotted with a reference grid.</p>
<p id="p-0062" num="0061">Reference sign <b>1600</b> in <figref idref="DRAWINGS">FIG. 5</figref> denotes a bar code having a size of about 1&#xd7;1 cm. The bar code <b>1600</b> has two types of regions including high-density regions (<b>1605</b> to <b>1608</b>) and low-density regions (<b>1609</b> to <b>1612</b>).</p>
<p id="p-0063" num="0062">Each high-density region includes encoded copy control information, and each low-density region includes an encoded condition. Although it is described later, the condition included in the low-density region may be directly a condition or may be a hashed condition. If a condition is not present, that is, if the high-density region includes copy inhibition information (in a case of a second embodiment, copy inhibition information or copy permission information), the low-density region includes dummy information (meaningless information). The high-density region uses a large number of error correction codes as compared with the low-density region.</p>
<p id="p-0064" num="0063">The high-density region is smaller than the low-density region although the error correction codes are used by a large number because the copy control information has a smaller data size than the data size of the condition. In the specification, the condition is a user ID and a password for the simplification of description. However, the condition is not limited thereto. For example, the condition may be other information such as a date or a section to which a user belongs. Alternatively, the condition may be created by combining various pieces of information (for example, a date, a user ID, a password, and a section to which a user belongs may be combined). To handle any complicated condition (although the capacity is limited), in the specification, the low-density region is larger than the high-density region.</p>
<p id="p-0065" num="0064"><figref idref="DRAWINGS">FIG. 3</figref> illustrates a part of the bar code plotted with a reference grid. <figref idref="DRAWINGS">FIG. 3</figref> illustrates information dots <b>1401</b> and array dots <b>1402</b> which define a bar code. The array dots <b>1402</b> are located on a reference grid <b>1403</b> indicated by dotted lines, at a regular interval (in particular, on the intersections of the reference grid <b>1403</b>).</p>
<p id="p-0066" num="0065">The information dots are located at positions shifted from the intersections of the reference grid <b>1403</b>. The specific information is expressed by shift directions of the information dots (directions in which the information dots are shifted from the intersections). Although the reference grid is indicated by dotted lines in <figref idref="DRAWINGS">FIG. 3</figref>, the reference grid is not actually printed.</p>
<p id="p-0067" num="0066">Next, a process of extracting specific information from a document image will be described. As described above, the process of extracting the specific information includes (1) finding bar codes from a document image, (2) acquiring information in the found bar codes to acquire embedded information, and (3) decoding the embedded information to acquire the specific information.</p>
<p id="p-0068" num="0067">First, the method of (1) finding the bar codes from the document image will be described in detail with reference to <figref idref="DRAWINGS">FIG. 4</figref>.</p>
<p id="p-0069" num="0068">The information acquisition unit <b>3</b> selects a desirable dot <b>1501</b> in a document image. Then, the information acquisition unit <b>3</b> selects a desirable dot <b>1502</b> located near the selected dot. The information acquisition unit <b>3</b> rotates the positions of the selected dots around a center point between the dots by 90&#xb0;. If other dots are present at the position after the rotation, the information acquisition unit <b>3</b> determines that the selected dots are the array dots which are vertically and horizontally arranged at a regular interval.</p>
<p id="p-0070" num="0069">In contrast, if other dots are not present, the information acquisition unit <b>3</b> determines that the selected dots are the information dots which are arranged at random positions.</p>
<p id="p-0071" num="0070">In this way, the information acquisition unit <b>3</b> finds the two array dots, and then finds other array dots under the rule in which the array dots are vertically and horizontally arranged at a regular interval. The information acquisition unit <b>3</b> finds a plurality of array dots (for example, 100 dots each in the horizontal and vertical directions), and then virtually plots a reference grid on the reference dots. In this case, the reference grid has about 200 lines in the vertical direction, and about 200 lines in the horizontal direction. Thus, the reference grid has about 400 lines in total. The number of lines is determined with reference to <figref idref="DRAWINGS">FIG. 3</figref> (in <figref idref="DRAWINGS">FIG. 3</figref>, two array dots are arranged in the vertical direction and three array dots are arranged in the horizontal direction, and hence three lines are arranged in the vertical direction and six lines are arranged in the horizontal direction).</p>
<p id="p-0072" num="0071">In the first embodiment of the present invention, the above-described processes (from the process of selecting a desirable dot to the process of virtually plotting the reference grid) are collectively called finding of bar codes. This is because a bar code must be present in a region defined by this reference grid. In the following embodiments including this embodiment, it is assumed that a bar code (including a high-density region and a low-density region) has a size equivalent to a size of a region defined by &#x201c;vertically arranged 100 lines&#x201d;&#xd7;&#x201c;horizontally arranged 100 lines&#x201d; (an interval between two lines is about 100 &#x3bc;m). The information acquisition unit <b>3</b> plots a reference grid having a size that is at least twice the size of the aforementioned reference grid in the vertical and horizontal directions. Hence, at least a single bar code is present in the reference grid.</p>
<p id="p-0073" num="0072">The information acquisition unit <b>3</b> repeatedly performs the above-described processes (from the process of selecting a desirable dot to the process of virtually plotting a reference grid) an N-number of times (for example, 20 times) while a subject region is changed. For example, the entire document image is divided into the N-number of regions (e.g., vertically arranged 4 regions and horizontally arranged 5 regions, that is, 20 regions in total), and the above-described processes are repeated the N-number of times. By repeating the above-described processes the N-number of times, even if a plurality of bar code groups are present in a document image, at least a single bar code can be found from each of the bar code groups.</p>
<p id="p-0074" num="0073">For example, there may be a case in which two documents are put on the document plate, copy inhibition information is added to the first document, and conditional copy permission information is added to the second document. In this case, a plurality of bar code groups are present in document images. Even in this case, since the reference grid is plotted in the various regions, the information acquisition unit <b>3</b> can find at least a single bar code included in each of the bar code groups. That is, a bar code corresponding to the copy inhibition information and a bar code corresponding to the conditional copy permission information can be found.</p>
<p id="p-0075" num="0074">The given description is for the method of finding bar codes.</p>
<p id="p-0076" num="0075">Next, the method of (2) acquiring the information in the found bar codes to acquire the embedded information will be described.</p>
<p id="p-0077" num="0076">(2-1) The information acquisition unit <b>3</b> obtains the shift directions of the information dots from the intersections of the reference grid. In the aforementioned example, the vertically arranged 200 lines and the horizontally arranged 200 lines are plotted. Thus, 40000 intersections in total are present. Among these 40000 intersections, array dots are present on 20000 intersections, and hence shift directions of information dots are obtained from the residual 20000 intersections. Accordingly, 3-bit information is acquired for every information dot.</p>
<p id="p-0078" num="0077">In particular, the information acquisition unit <b>3</b> acquires information of 0 to 7 (3-bit information) such that 0 is acquired when an information dot is shifted to the upper side, 1 is acquired when an information dot is shifted to the upper right side, 2 is acquired when an information dot is shifted to the right side, etc. (hereinafter, a value of information is incremented by one as the direction is shifted by 45&#xb0;). As a result, information of 3 bits&#xd7;20000=60000 bits can be acquired. The 60000-bit information includes embedded information.</p>
<p id="p-0079" num="0078">(2-2) Next, a process of finding embedded information from the acquired information (for example, 60000-bit information) will be described.</p>
<p id="p-0080" num="0079">Though it is not described when the encoding process is described, the encoding unit <b>11</b> acquires embedded information such that a predetermined bit string (for example, a bit string including 20 bits of 01010101010101010101) is included at the start during encoding.</p>
<p id="p-0081" num="0080">The information acquisition unit <b>3</b> finds the predetermined bit string from the acquired information (for example, 60000-bit information). Then, the information acquisition unit <b>3</b> determines the information as the embedded information until the next predetermined bit string is found.</p>
<p id="p-0082" num="0081">That is, the information acquisition unit <b>3</b> determines &#x201c;the predetermined bit string+the information string interposed between the predetermined bit strings&#x201d; as the embedded information. Thus, the information acquisition unit <b>3</b> acquires &#x201c;the predetermined bit string+the information string interposed between the predetermined bit strings&#x201d; as the embedded information.</p>
<p id="p-0083" num="0082">The information acquisition unit <b>3</b> performs the aforementioned processes (processes of 2-1 and 2-2) for all the plural reference grids (i.e., 20 reference grids).</p>
<p id="p-0084" num="0083">The given description is for the method of (2) acquiring the information in the bar codes to acquire the embedded information.</p>
<p id="p-0085" num="0084">Finally, the process of (3) decoding the embedded information to acquire the specific information will be described.</p>
<p id="p-0086" num="0085">The control unit <b>1</b> that has found a single bar code decodes embedded information included in a high-density region of the bar code. To be more specific, an error correction code and a predetermined bit string are removed (deleted) from the embedded information. Since the control unit <b>1</b> performs decoding, the control unit <b>1</b> can acquire copy control information and a document ID.</p>
<p id="p-0087" num="0086">Also, when the control unit <b>1</b> acquires conditional copy permission information as the copy control information, the control unit <b>1</b> decodes embedded information included in a low-density region to acquire a condition. The low-density region is not always decoded, but is decoded only when the conditional copy permission information is acquired because the data size of the embedded information in the low-density region is larger than the data size of the high-density region and hence decoding for the embedded information in the low-density region may take a time.</p>
<p id="p-0088" num="0087">The given description is for the process of (3) decoding the embedded information to acquire the specific information.</p>
<p id="p-0089" num="0088">The above-described process series is called &#x201c;extraction.&#x201d; By performing the extraction process, the specific information can be acquired from the document image.</p>
<p id="p-0090" num="0089">Next, control for copying executed by the MFP that has a function of inhibiting unauthorized copying will be described in detail with reference to <figref idref="DRAWINGS">FIGS. 1 and 7</figref>. <figref idref="DRAWINGS">FIG. 7</figref> is a flowchart showing a flow of control for copying executed by the MFP according to this embodiment. It is to be noted that the MFP is a copier that can add and extract specific information.</p>
<p id="p-0091" num="0090">A user who wants to make a copy of a document with bar codes merged inputs a user ID and a password through the operation unit <b>5</b> while watching the setting screen <b>3002</b> displayed on the display unit <b>9</b>. The information input through the operation unit <b>5</b> is sent from the operation unit <b>5</b> to the user authentication unit <b>6</b>. The user authentication unit <b>6</b> determines whether the input password is correct with reference to the managed information (S<b>2301</b>).</p>
<p id="p-0092" num="0091">In step S<b>2301</b>, if the user authentication unit <b>6</b> determines that the password is not correct, the MFP waits for the input of the correct password.</p>
<p id="p-0093" num="0092">In step S<b>2301</b>, if the user authentication unit <b>6</b> determines that the password is correct, the user authentication unit <b>6</b> sends the determination of the correct password and the user ID to the control unit <b>1</b>. The control unit <b>1</b> that has received the determination of the correct password and the user ID causes the display unit <b>9</b> to display a notification that allows a user to give a copy start instruction.</p>
<p id="p-0094" num="0093">Then, the user inputs the copy start instruction through the operation unit <b>5</b>. Then, the operation unit <b>5</b> notifies the start of copying to the control unit <b>1</b>. The control unit <b>1</b> controls the reading unit <b>2</b> to read the document. The document image generated in this way is sent to the memory <b>7</b> and the information acquisition unit <b>3</b> (S<b>2302</b>). If a plurality of documents to be read by the reading unit <b>2</b> are present, document images for the plural documents are generated. When the memory <b>7</b> receives the document image, the control unit <b>1</b> starts to execute image processing for the document image. The image processing is required for the document image to allow the output unit <b>8</b> to print the document image (for example, half toning).</p>
<p id="p-0095" num="0094">Next, the information acquisition unit <b>3</b> finds a bar code from the document image, and acquires information in the found bar code to acquire embedded information (S<b>2303</b>). As described above, the process in S<b>2303</b> is performed the N-number of times (for example, 20 times), and hence 20 pieces of the embedded information are possibly acquired at maximum.</p>
<p id="p-0096" num="0095">Next, the control unit <b>1</b> asks the information acquisition unit <b>3</b> whether the bar-code information acquiring process executed in step S<b>2302</b> has been completed (S<b>2304</b>). If the bar-code information acquiring process has not been completed, the flow returns to the process in step S<b>2303</b>.</p>
<p id="p-0097" num="0096">If the information acquisition unit <b>3</b> has completed the bar-code information acquiring process in step S<b>2304</b>, the control unit <b>1</b> determines whether the information acquisition unit <b>3</b> has acquired at least a piece of embedded information from the document image in the bar-code information acquiring process (S<b>2305</b>).</p>
<p id="p-0098" num="0097">If the information acquisition unit <b>3</b> has acquired at least a single piece of embedded information from the document image in step S<b>2305</b>, the control unit <b>1</b> decodes information in a high-density region of the acquired embedded information (S<b>2306</b>).</p>
<p id="p-0099" num="0098">Then, the control unit <b>1</b> acquires copy control information and a document ID in specific information. The copy control information may include either or both copy inhibition information and conditional copy permission information.</p>
<p id="p-0100" num="0099">Next, the control unit <b>1</b> determines whether the information in the high-density region of the embedded information has been decoded successfully (S<b>2307</b>).</p>
<p id="p-0101" num="0100">If the control unit <b>1</b> determines that the information in the high-density region of the embedded information has been decoded successfully in step S<b>2307</b>, the control unit <b>1</b> determines whether decoding of all information in the high-density region of the embedded information has been completed (S<b>2308</b>).</p>
<p id="p-0102" num="0101">If the control unit <b>1</b> determines that decoding of all information in the high-density region of the embedded information has not been completed in step S<b>2308</b>, the control unit <b>1</b> stops the copy operation of the MFP. That is, the document image generated by the reading unit <b>2</b> is not output.</p>
<p id="p-0103" num="0102">If the control unit <b>1</b> determines that all information of the embedded information has been completed in step S<b>2308</b>, the control unit <b>1</b> determines whether the copy control information includes copy inhibition information (S<b>2309</b>).</p>
<p id="p-0104" num="0103">If the control unit <b>1</b> determines that the copy control information includes the copy inhibition information in S<b>2309</b>, the control unit <b>1</b> stops the copy operation of the MFP. That is, the document image generated by the reading unit <b>2</b> is not output.</p>
<p id="p-0105" num="0104">If the MFP has extracted the copy inhibition information and the conditional copy permission information in the process in step S<b>2309</b> (that is, if the copy control information acquired in S<b>2306</b> includes both), no document is copied. In other words, the document, to which the conditional copy permission information is added and which should be copied, and the document, to which the copy inhibition information is added, are not copied. That is, if both information is extracted, the MFP (the control unit <b>1</b> included therein) gives preference to the copy inhibition information and inhibits the document from being copied. As a result, the behavior of the malicious user can be prevented from making an unauthorized copy of the document to which the copy inhibition information is added by using the document to which the conditional copy permission information is added.</p>
<p id="p-0106" num="0105">In this case, the control unit <b>1</b> performs control not to request the user to input the condition associated with the conditional copy permission information. That is, the display unit <b>9</b> does not display the screen to allow the user to input information corresponding to the condition. The condition associated with the conditional copy permission information is a condition included in a bar code that is equivalent to the bar code from which the conditional copy permission information is acquired.</p>
<p id="p-0107" num="0106">If the control unit <b>1</b> determines that the copy control information does not include the copy inhibition information in S<b>2309</b>, the control unit <b>1</b> determines whether a predetermined (for example, two) or larger number of pieces of copy permission information associated with different document IDs have been extracted (S<b>2310</b>). The conditional copy permission information associated with the document ID is conditional copy permission information included in a bar code that is equivalent to the bar code from which the document ID is acquired.</p>
<p id="p-0108" num="0107">If the control unit <b>1</b> determines that the predetermined or larger number (for example, two) of pieces of the conditional copy permission information associated with the different document IDs have been extracted in S<b>2310</b>, the control unit <b>1</b> stops the copy operation of the MFP. That is, the document image generated by the reading unit <b>2</b> is not output.</p>
<p id="p-0109" num="0108">The document image is not output in such a case (i.e., in the case in which the predetermined or larger number of pieces of the conditional copy permission information have been extracted), in order to inhibit the malicious user from making a copy of the document. Making an unauthorized copy by the malicious user may be the behavior as follows.</p>
<p id="p-0110" num="0109">The behavior is such that a user puts a document, to which conditional copy permission information including a condition that the user knows is added, on a document plate simultaneously with a document, to which conditional copy permission information including a condition that the user does not know is added, so as to make a copy of the document to which the conditional copy permission information including the condition that the user does not know is added.</p>
<p id="p-0111" num="0110">In this case (i.e., in the case in which the predetermined or larger number of pieces of the conditional copy permission information have been extracted), according to the first embodiment of the present invention, conditions associated with the conditional copy permission information which have been extracted by the predetermined or larger number of pieces are not extracted. That is, decoding is not performed for a low-density region of embedded information. Decoding is not performed because the execution speed of other jobs (for example, copying of another document, printing of another document image, transmission of another document image) may be delayed while the MFP extracts the conditions. If the execution speed of other jobs do not have to be considered, of course, the conditions associated with the conditional copy permission information which have been extracted by the predetermined or larger number of pieces can be acquired.</p>
<p id="p-0112" num="0111">In contrast, if a smaller number than the predetermined number of pieces of the conditional copy permission information associated with different document IDs have been extracted, as long as all conditions for the smaller number of pieces of the information extracted are satisfied, copies of document images are made (S<b>2311</b>, S<b>2312</b>, S<b>2313</b>). Occasionally, the number of conditions for the smaller number of pieces of the information may be only one. In this case, satisfying only a single condition is satisfying all conditions for the smaller number of pieces of the information.</p>
<p id="p-0113" num="0112">Now, it is assumed that a plurality of (for example, a predetermined number or larger number of) documents to which conditional copy permission information is added are put on the document plate. In such a situation, it is also assumed that different document IDs are added to the documents. Then, the number of the document IDs is a predetermined number or larger, and the pieces of the conditional copy permission information associated with the different document IDs are extracted. Hence, no document is copied. In contrast, it is assumed that the respective documents have the same document ID. Then, the number of pieces of the conditional copy permission information becomes one, and the number of the document IDs becomes smaller than the predetermined number. Hence, (if the condition is satisfied) the document images can be copied. The copies of the respective documents are made when the same document ID is added to the respective documents because the documents are created by a single copy operation and making copies of such documents is hardly unauthorized copying.</p>
<p id="p-0114" num="0113">If the control unit <b>1</b> determines that the predetermined or larger number of pieces of the conditional copy permission information associated with the different document IDs have not been extracted (for example, if only a piece of the conditional copy permission information has been extracted) in S<b>2310</b>, the MFP acquires all conditions associated with the smaller number than the predetermined number of pieces of the conditional copy permission information (S<b>2311</b>). That is, the control unit <b>1</b> decodes the embedded information in the low-density region.</p>
<p id="p-0115" num="0114">If the extracted condition includes a password, the control unit <b>1</b> causes the display unit <b>9</b> to display the screen to request the user to input information corresponding to the condition (i.e., password). In contrast, if the extracted condition does not include a password (for example, all conditions are user IDs), the display unit <b>9</b> does not have to display any particular screen. This is because the information corresponding to the condition (i.e., user ID) has been already input for user authentication.</p>
<p id="p-0116" num="0115">Then, the control unit <b>1</b> determines whether the information input by the user satisfies all conditions extracted in S<b>2311</b> (S<b>2312</b>).</p>
<p id="p-0117" num="0116">If the control unit <b>1</b> determines that the input information satisfies all conditions in S<b>2312</b>, the MFP starts to output the document images (S<b>2313</b>). For example, when the user ID sent in S<b>2301</b> matches with the solely extracted condition (in this case, the user ID in the extracted condition), the copy operation is started accordingly.</p>
<p id="p-0118" num="0117">If the user has the other document to be scanned, the user removes the document from the document plate and puts the other document on the document plate. Then, when the user inputs a copy start instruction through the operation unit <b>5</b>, the MFP executes the process from S<b>2302</b>.</p>
<p id="p-0119" num="0118">In contrast, if the control unit <b>1</b> determines that the condition is not satisfied in S<b>2312</b>, the control unit <b>1</b> stops the copy operation of the MFP. That is, a copy of the document image generated by the reading unit <b>2</b> is not made.</p>
<p id="p-0120" num="0119">The given description is for the control for copying executed by the MFP that has a function of inhibiting unauthorized copying.</p>
<p id="h-0013" num="0000">Second Embodiment</p>
<p id="p-0121" num="0120">In a second embodiment of the present invention, control for copying executed by a MFP different from the control according to the first embodiment of the present invention will be described. First, part that is different from the first embodiment of the present invention will be described.</p>
<p id="p-0122" num="0121">Copy control information in the second embodiment of the present invention includes copy permission information in addition to conditional copy permission information and copy inhibition information. If the MFP reads a document to which the copy permission information is added, the MFP makes a copy of the document without requesting a user to input a condition, unlike the conditional copy permission information. That is, if a copy of the document, to which the copy permission information is added, is made, the user can make a copy of the document without condition.</p>
<p id="p-0123" num="0122">Since the copy permission information is additionally included in the copy control information, the specific information includes two pieces of information of copy permission information and a document ID.</p>
<p id="p-0124" num="0123">Next, an operation performed by a user and a process performed by the MFP in accordance with the operation by the user to add specific information will be described in detail with reference to <figref idref="DRAWINGS">FIG. 6(</figref><i>b</i>). In the second embodiment of the present invention, an option to &#x201c;permit copy&#x201d; is added in a print security setting dialogue box <b>31</b>. If the user selects this option, the copy permission information and the document ID are added as the specific information to a document to be printed. The behavior when that option is selected is similar to that in the first embodiment of the present invention.</p>
<p id="p-0125" num="0124">Other part not described herein is similar to that in the first embodiment of the present invention. More specifically, the configuration of the MFP, the process of creating the document to which the specific information is added, and the process of extracting the specific information from a document to which the specific information is added in the form of bar codes, are similar to those in the first embodiment. That is, the MFP can extract the specific information.</p>
<p id="p-0126" num="0125">Next, control for copying executed by the MFP that has a function of inhibiting unauthorized copying will be described in detail according to the second embodiment of the present invention. The control additionally includes a step (S<b>2308</b>.<b>5</b>) between S<b>2308</b> and S<b>2309</b> in the flowchart shown in <figref idref="DRAWINGS">FIG. 7</figref>. S<b>2308</b>.<b>5</b> is a step of determining whether a predetermined or larger number of pieces of copy permission information associated with different document IDs have been extracted. Hereinafter, part that is changed because this step is added will be described.</p>
<p id="p-0127" num="0126">If the control unit <b>1</b> determines that decoding of all embedded information has been completed in step S<b>2308</b>, the control unit <b>1</b> determines whether a predetermined or larger number of pieces of the copy permission information associated with the different document IDs have been extracted. The predetermined number is desirably larger than the aforementioned predetermined number. This is because the behavior of simultaneously making copies of documents to which copy permission information is added may have less intension of making unauthorized copies than the behavior of simultaneously making copies of documents to which conditional copy permission information is added.</p>
<p id="p-0128" num="0127">If the control unit <b>1</b> determines that the predetermined or lager number of pieces of the copy permission information have been extracted, the control unit <b>1</b> stops the copy operation of the MFP. That is, the document image generated by the reading unit <b>2</b> is not output. Then, the control unit <b>1</b> progresses the process to the &#x201c;end&#x201d; of the flowchart in <figref idref="DRAWINGS">FIG. 7</figref>.</p>
<p id="p-0129" num="0128">The document image is not output in such a case (i.e., in the case in which the predetermined or larger number of pieces of the copy permission information have been extracted), in order to inhibit the malicious user from making a copy of the document. Making an unauthorized copy by the malicious user may be such that a user puts a plurality of documents, to which copy permission information is added, on a document plate, and then the user puts a document, to which copy inhibition information is added, to make a copy of the document.</p>
<p id="p-0130" num="0129">In this case, major part of a generated document image includes bar codes of copy permission information, and residual part includes copy inhibition information. Thus, the information acquisition unit <b>3</b> less likely finds a bar code including the copy inhibition information. Of course, the information acquisition unit <b>3</b> can theoretically find the bar code including the copy inhibition information. However, if the bar code is contaminated, such a bar code is less likely found. In light of this, the new step (S<b>2308</b>.<b>5</b>) is added to inhibit the malicious user from making an unauthorized copy.</p>
<p id="p-0131" num="0130">The control for copying is described. If the control unit <b>1</b> determines that the predetermined (for example, five) or larger number of pieces of the copy permission information have not been extracted, the control unit <b>1</b> progresses the process to S<b>2309</b>, and determines whether the copy inhibition information has been extracted (S<b>2309</b>).</p>
<p id="p-0132" num="0131">If the control unit <b>1</b> determines that the copy inhibition information has been extracted (if YES in S<b>2309</b>), the control unit <b>1</b> stops the copy operation of the MFP. That is, the document image generated by the reading unit <b>2</b> is not output.</p>
<p id="p-0133" num="0132">If the MFP has extracted the copy inhibition information and the copy permission information in this process (that is, if the copy control information acquired in S<b>2306</b> includes both), no document is copied. In other words, the document, to which the copy permission information is added and which should be copied, and the document, to which the copy inhibition information is added, are not copied. As a result, the behavior of the malicious user can be prevented from making an unauthorized copy of the document to which the copy inhibition information is added by using the document to which the copy permission information is added.</p>
<p id="p-0134" num="0133">In contrast, if the control unit <b>1</b> determines that the copy inhibition information has not been extracted (if NO in S<b>2309</b>), the control unit <b>1</b> determines whether a predetermined (for example, two) or larger number of pieces of the conditional copy permission information associated with different document IDs have been extracted (S<b>2310</b>).</p>
<p id="p-0135" num="0134">If the control unit <b>1</b> determines that the predetermined or larger number of the copy permission information associated with the different document IDs have been extracted (if YES in S<b>2310</b>), the control unit <b>1</b> stops the copy operation of the MFP. That is, the document image generated by the reading unit <b>2</b> is not copied.</p>
<p id="p-0136" num="0135">In contrast, if the control unit <b>1</b> determines that the predetermined or larger number of pieces of the conditional copy permission information associated with the different document IDs have not been extracted (if NO in S<b>2310</b>), the control unit <b>1</b> determines whether the copy permission information and the conditional copy permission information have been extracted (S<b>2310</b>.<b>3</b>). This step (S<b>2310</b>.<b>3</b>) is also additionally included in the flowchart in <figref idref="DRAWINGS">FIG. 7</figref>.</p>
<p id="p-0137" num="0136">If the control unit <b>1</b> determines that the copy permission information and the conditional copy permission information have been extracted (if YES in S<b>2310</b>.<b>3</b>), the control unit <b>1</b> stops the copy operation of the MFP. That is, the document image generated by the reading unit <b>2</b> is not output.</p>
<p id="p-0138" num="0137">In contrast, if the control unit <b>1</b> determines that the copy permission information and the conditional copy permission information have not been extracted (if NO in S<b>2310</b>.<b>3</b>), the control unit <b>1</b> determines whether only the copy permission information has been extracted (S<b>2310</b>.<b>6</b>). That is, it is determined whether only the copy permission information has been extracted while the copy inhibition information or the conditional copy permission information is not extracted. If the control unit <b>1</b> determines that only the copy permission information has been extracted, the document image is output. In contrast, if the control unit <b>1</b> determines that the extracted information is not only the copy permission information, the process is executed from S<b>2311</b> in the flowchart shown in <figref idref="DRAWINGS">FIG. 7</figref>. Other part not described herein is subjected to the operation control similar to that in the first embodiment of the present invention.</p>
<p id="p-0139" num="0138">As it is found through the processes, the second embodiment of the present invention aims at such a user who uses a document, to which copy permission information is added, that is, which is copied without condition to make a copy of another document, to which conditional copy permission information including a condition that the user does not know is added. In particular, in this embodiment, the user is not only inhibited from making a copy of another document, but also from making a copy of the document (the document to which the copy permission information is added) as a penalty.</p>
<p id="h-0014" num="0000">Other Embodiments</p>
<p id="p-0140" num="0139">Described above is inhibition of making a copy of a document under various circumstances. However, a subject for inhibition is not limited to a copy operation. For example, outputting, for example, transmitting a document image to an external device may be inhibited. Regarding this, the copy inhibition information is called output inhibition information, the conditional copy permission information is called conditional output permission information, and the copy permission information is called output permission information.</p>
<p id="p-0141" num="0140">In this specification, a bar code is an image that represents information in accordance with the thickness of a line and the position of a dot. The processes performed by the MFP have been described above on the basis of an exemplary form of a bar code. However, persons skilled in the art can replace the bar code in the above-described form with a bar code in a different form (for example, a two-dimensional bar code, such as a QR code or a griff code, or a bar code of a typically used type including a plurality of bars). Alternatively, the bar code in the above-described form may be replaced with a watermark or a mark. However, if a mark is used, different shapes of marks have to be defined for different pieces of information. Also, in this case, the MFP determines information indicated by a predetermined mark by using an existing pattern matching technique. The process of determining the information indicated by the predetermined mark by the pattern matching technique is also called extraction of information in this specification. Also, the watermark, the predetermined mark, and other bar codes in various forms are collectively called embedded images.</p>
<p id="p-0142" num="0141">The determination has been made for the information indicated by the predetermined mark by using the pattern matching technique. Alternatively, the MFP does not have to determine the information indicated by the predetermined mark, and may control outputting (for example, copying) in accordance with the predetermined mark when the predetermined mark is found. For example, the MFP may inhibit a copy operation when the MFP detects a mark of &#x201c;&#x2218; (white circle).&#x201d; Thus, when the MFP finds the &#x201c;&#x2218;,&#x201d; the copy operation is stopped in accordance with the mark of the &#x201c;&#x2218;.&#x201d; The same can be said to the conditional copy permission information. When the MFP finds a predetermined mark, the MFP controls outputting in accordance with the predetermined mark. In this case, a bar code or a watermark is not decoded. Outputting is controlled merely with reference to the shape of the image. In this specification, finding a predetermined mark is called &#x201c;detection&#x201d; of a predetermined mark.</p>
<p id="p-0143" num="0142">In the above-described embodiments, the high-density region and the low-density region are provided, and important information is included in the high-density region. Accordingly, an effect can be obtained such that important information can be more likely extracted correctly from a document. However, persons skilled in the art may intentionally degrade the aforementioned effect. In this case, the densities in the regions do not have to be different from one another, and all regions in a bar code may have the same density.</p>
<p id="p-0144" num="0143">In the above-described embodiments, as a method of associating two pieces of information (for example, conditional copy permission information and a document ID, or conditional copy permission information and a condition) with one another, the method of allowing the two pieces of information to be included in the same bar code has been disclosed. However, the method of associating the two pieces of information with one another may be another method. For example, predetermined information (for example, AAA) may be added to the start of the information, thereby associating the respective pieces of information with one another.</p>
<p id="p-0145" num="0144">In the above-described embodiments, the number of document IDs is counted to identify the number of different bar codes. However, there is another identification method. For example, if information relating to a version of a bar code is added to a document, the MFP can identify the number of different bar codes with reference to a difference in versions of the bar codes. The information for identifying the difference in bar codes (for example, a document ID or version information of a bar code) is collectively called document identification information.</p>
<p id="p-0146" num="0145">In the above description, a single document ID is added to only documents that are created by a single copy operation. However, a single document ID may be added to documents that are created by a single print operation (for example, a print operation performed in response to a print instruction from a personal computer).</p>
<p id="p-0147" num="0146">In the above-described embodiments, a condition is expressed by a bit string and then is bar-coded. However, the condition does not have to be expressed in the direct form (in the form of a bit string directly corresponding to the condition). That is, the condition does not have to be bar-coded. Instead of the bar-coded condition, a hashed condition may be bar-coded. In this case, the MFP has to hold a hash function used for hashing the condition. In the embodiments of the present invention, the MFP that adds specific information is the same as the MFP that extracts the specific information. However, different MFPs may perform the respective processes. In this case, the MFP that adds a bar code and the MFP that extracts a bar code have to hold the same hash function. This is because, in a case in which the respective MFPs use different hash functions, even if a hashed condition is the same as a condition input by a user, the values of the two hashed conditions do not correspond to one another.</p>
<p id="p-0148" num="0147">When the hashed condition is bar-coded, the steps in the flowcharts in <figref idref="DRAWINGS">FIGS. 2 and 7</figref> are modified as follows. In the flowchart in <figref idref="DRAWINGS">FIG. 2</figref>, a step of hashing a condition by using a hash function (S<b>103</b>.<b>5</b>) is added between steps S<b>103</b> and S<b>104</b>. In the process in step S<b>103</b>.<b>5</b>, the condition is hashed and then bar-coded.</p>
<p id="p-0149" num="0148">Also, in the flowchart in <figref idref="DRAWINGS">FIG. 7</figref>, a process of hashing an input condition by using a hash function is added to step S<b>2312</b>. In step S<b>2312</b>, an extracted condition in a hashed state is compared with an input condition in a hashed state.</p>
<p id="p-0150" num="0149">Also, the present invention may be implemented by executing the following processes. In particular, a software (program) that implements the function of any of the embodiments is supplied to a system or a device through a network or through any of various recording media, and a computer (or CPU, MPU, etc.) in the system or the device reads and executes the program.</p>
<p id="h-0015" num="0000">Reference Signs List</p>
<p id="p-0151" num="0150"><b>1</b> control unit</p>
<p id="p-0152" num="0151"><b>2</b> reading unit</p>
<p id="p-0153" num="0152"><b>3</b> information acquisition unit</p>
<p id="p-0154" num="0153"><b>5</b> operation unit</p>
<p id="p-0155" num="0154"><b>6</b> user authentication unit</p>
<p id="p-0156" num="0155"><b>7</b> memory</p>
<p id="p-0157" num="0156"><b>8</b> output unit</p>
<p id="p-0158" num="0157"><b>9</b> display unit</p>
<p id="p-0159" num="0158"><b>10</b> data base</p>
<p id="p-0160" num="0159"><b>11</b> encoding unit</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A device having a reading unit configured to read a document placed on a document plate for generating a document image in response to an instruction from a user to start a copy, and a detection unit configured to detect a bar code from the document image generated by the reading unit, the device comprising:
<claim-text>a determination unit configured to determine after the reading unit generates a document image corresponding to a plurality of sheets of a document in response to an instruction from a user to start a copy with the plurality of sheets of the document being placed on the document plate, whether or not the number of bar codes detected by the detection unit from the document image is equal to or more than a predetermined number; and</claim-text>
<claim-text>a control unit configured to control not to print the generated document image corresponding to the plurality of sheets of the document in response to the determination that the number of bar codes detected by the detection unit is equal to or more than the predetermined number.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The device according to <claim-ref idref="CLM-00001">claim 1</claim-ref>,
<claim-text>wherein the plurality of sheets of the document having a bar code printed is a copy-permitted document with copy permission information being added which is permitted to be copied without requesting a user to input condition information, and</claim-text>
<claim-text>wherein the control unit controls not to print the generated document image corresponding to the plurality of sheets of the document in response to the determination that the number of detected bar codes corresponding to the copy permission information is equal to or more than the predetermined number, and controls to print the generated document image corresponding to the plurality of sheets of the document in response to the determination that the number of detected bar codes corresponding to the copy permission information is less than the predetermined number.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The device according to <claim-ref idref="CLM-00001">claim 1</claim-ref>,
<claim-text>wherein the plurality of sheets of the document having a bar code printed is a conditional-copy-permitted document with conditional copy permission information being added which is inhibited to be copied in a case where the conditional copy permission information added to the document does not match condition information input by a user and permitted to be copied in a case where the conditional copy permission information added to the document matches condition information input by a user, and</claim-text>
<claim-text>wherein the control unit controls not to print the generated document image corresponding to the plurality of sheets of the document in response to the determination that the number of detected bar codes corresponding to the conditional copy permission information is equal to or more than the predetermined number, and controls to print the generated document image corresponding to the plurality of sheets of the document in response to the determination that the number of detected bar codes corresponding to the conditional copy permission information is less than the predetermined number.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The device according to <claim-ref idref="CLM-00001">claim 1</claim-ref>,
<claim-text>wherein the bar code is a QR code.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. A method of controlling a device, the device having a reading unit configured to read a document placed on a document plate for generating a document image in response to an instruction from a user to start a copy, and a detection unit configured to detect a bar code from the document image generated by the reading unit, the method comprising:
<claim-text>determining after the reading unit generates a document image corresponding to a plurality of sheets of a document in response to an instruction from a user to start a copy with the plurality of sheets of the document being placed on the document plate, whether or not the number of bar codes detected by the detection unit from the document image is equal to or more than a predetermined number; and</claim-text>
<claim-text>controlling not to print the generated document image corresponding to the plurality of sheets of the document in response to the determination that the number of bar codes detected by the detection unit is equal to or more than the predetermined number.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method according to <claim-ref idref="CLM-00005">claim 5</claim-ref>,
<claim-text>wherein the plurality of sheets of the document having a bar code printed is a copy-permitted document with copy permission information being added which is permitted to be copied without requesting a user to input condition information, and</claim-text>
<claim-text>wherein the controlling step further comprises controlling not to print the generated document image corresponding to the plurality of sheets of the document in response to determining that the number of detected bar codes corresponding to the copy permission information is equal to or more than the predetermined number, and controlling to print the generated document image corresponding to the plurality of sheets of the document in response to determining that the number of detected bar codes corresponding to the copy permission information is less than the predetermined number.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method according to <claim-ref idref="CLM-00005">claim 5</claim-ref>,
<claim-text>wherein the plurality of sheets of the document having a bar code printed is a conditional-copy-permitted document with conditional copy permission information being added which is inhibited to be copied in a case where the conditional copy permission information added to the document does not match condition information input by a user and permitted to be copied in a case where the conditional copy permission information added to the document matches condition information input by a user, and</claim-text>
<claim-text>wherein the controlling step further comprises controlling not to print the generated document image corresponding to the plurality of sheets of the document in response to determining that the number of detected bar codes corresponding to the conditional copy permission information is equal to or more than the predetermined number, and controlling to print the generated document image corresponding to the plurality of sheets of the document in response to determining that the number of detected bar codes corresponding to the conditional copy permission information is less than the predetermined number.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method according to <claim-ref idref="CLM-00005">claim 5</claim-ref>,
<claim-text>wherein the bar code is a QR code.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. A non-transitory computer-readable medium having instructions recorded thereon, which, when executed by a computer, cause the computer to perform a method of controlling a device, the device having a reading unit configured to read a document placed on a document plate for generating a document image in response to an instruction from a user to start a copy, and a detection unit configured to detect a bar code from the document image generated by the reading unit, the method comprising:
<claim-text>determining after the reading unit generates a document image corresponding to a plurality of sheets of a document in response to an instruction from a user to start a copy with the plurality of sheets of the document being placed on the document plate, whether or not the number of bar codes detected by the detection unit from the document image is equal to or more than a predetermined number; and</claim-text>
<claim-text>controlling not to print the generated document image corresponding to the plurality of sheets of the document in response to the determination that the number of bar codes detected by the detection unit is equal to or more than the predetermined number.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The non-transitory computer-readable medium according to <claim-ref idref="CLM-00009">claim 9</claim-ref>,
<claim-text>wherein the plurality of sheets of the document having a bar code printed is a copy-permitted document with copy permission information being added which is permitted to be copied without requesting a user to input condition information, and</claim-text>
<claim-text>wherein the controlling step further comprises controlling not to print the generated document image corresponding to the plurality of sheets of the document in response to determining that the number of detected bar codes corresponding to the copy permission information is equal to or more than the predetermined number, and controlling to print the generated document image corresponding to the plurality of sheets of the document in response to determining that the number of detected bar codes corresponding to the copy permission information is less than the predetermined number.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The non-transitory computer-readable medium according to <claim-ref idref="CLM-00009">claim 9</claim-ref>,
<claim-text>wherein the plurality of sheets of the document having a bar code printed is a conditional-copy-permitted document with conditional copy permission information being added which is inhibited to be copied in a case where the conditional copy permission information added to the document does not match condition information input by a user and permitted to be copied in a case where the conditional copy permission information added to the document matches condition information input by a user, and</claim-text>
<claim-text>wherein the controlling step further comprises controlling not to print the generated document image corresponding to the plurality of sheets of the document in response to determining that the number of detected bar codes corresponding to the conditional copy permission information is equal to or more than the predetermined number, and controlling to print the generated document image corresponding to the plurality of sheets of the document in response to determining that the number of detected bar codes corresponding to the conditional copy permission information is less than the predetermined number.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The non-transitory computer-readable medium according to <claim-ref idref="CLM-00009">claim 9</claim-ref>,
<claim-text>wherein the bar code is a QR code.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
