<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08624571-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08624571</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12647377</doc-number>
<date>20091224</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<us-term-of-grant>
<us-term-extension>79</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>05</class>
<subclass>F</subclass>
<main-group>1</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>323283</main-classification>
</classification-national>
<invention-title id="d2e53">DC-DC converters with pulse generators shared between PWM and PFM modes</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>7439720</doc-number>
<kind>B2</kind>
<name>Nguyen</name>
<date>20081000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>2005/0057238</doc-number>
<kind>A1</kind>
<name>Yoshida</name>
<date>20050300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>323282</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2006/0200300</doc-number>
<kind>A1</kind>
<name>Bryan et al.</name>
<date>20060900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>701112</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2007/0257647</doc-number>
<kind>A1</kind>
<name>Chen et al.</name>
<date>20071100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>323282</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2008/0022139</doc-number>
<kind>A1</kind>
<name>Lin et al.</name>
<date>20080100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>713320</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2008/0061758</doc-number>
<kind>A1</kind>
<name>Nishida</name>
<date>20080300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>323284</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2008/0169796</doc-number>
<kind>A1</kind>
<name>Buethker et al.</name>
<date>20080700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>323282</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2009/0174379</doc-number>
<kind>A1</kind>
<name>Lima</name>
<date>20090700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2009/0218998</doc-number>
<kind>A1</kind>
<name>Huang</name>
<date>20090900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>2009/0218999</doc-number>
<kind>A1</kind>
<name>Kikuchi</name>
<date>20090900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>2010/0225293</doc-number>
<kind>A1</kind>
<name>Wang et al.</name>
<date>20100900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>323290</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>2011/0012658</doc-number>
<kind>A1</kind>
<name>Hsieh et al.</name>
<date>20110100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>327172</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>WO</country>
<doc-number>2008020385</doc-number>
<kind>A2</kind>
<date>20080200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00014">
<othercit>Xu Zhang and Dragan Maksimovic, &#x201c;Digital PWM/PFM Controller with Input Voltage Feed-Forward for Synchronous Buck Converters&#x201d;, Colorado Power Electronics Center, ECE Department, University of Colorado, Boulder, CO 80309-0425, 2008 IEEE, p. 523-528.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00015">
<othercit>&#x201c;International Search Report&#x201d; mailed on Aug. 23, 2011 for International application No. PCT/SG2010/000480, International filing date: Dec. 22, 2010.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>17</number-of-claims>
<us-exemplary-claim>17</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>323271</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>323282-284</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>323234</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>323272</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>323285</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>5</number-of-drawing-sheets>
<number-of-figures>6</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20110156684</doc-number>
<kind>A1</kind>
<date>20110630</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>da Silva</last-name>
<first-name>Jos&#xe9; Barreiro</first-name>
<address>
<city>Woburn</city>
<state>MA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Shah</last-name>
<first-name>Rajul Ramesh</first-name>
<address>
<city>Gilbert</city>
<state>AZ</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Riehl</last-name>
<first-name>Patrick Stanley</first-name>
<address>
<city>Cambridge</city>
<state>MA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>da Silva</last-name>
<first-name>Jos&#xe9; Barreiro</first-name>
<address>
<city>Woburn</city>
<state>MA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Shah</last-name>
<first-name>Rajul Ramesh</first-name>
<address>
<city>Gilbert</city>
<state>AZ</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Riehl</last-name>
<first-name>Patrick Stanley</first-name>
<address>
<city>Cambridge</city>
<state>MA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<last-name>Hsu</last-name>
<first-name>Winston</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
<agent sequence="02" rep-type="attorney">
<addressbook>
<last-name>Margo</last-name>
<first-name>Scott</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>MediaTek Singapore Pte. Ltd.</orgname>
<role>03</role>
<address>
<city>Singapore</city>
<country>SG</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Berhane</last-name>
<first-name>Adolf</first-name>
<department>2838</department>
</primary-examiner>
<assistant-examiner>
<last-name>Gblende</last-name>
<first-name>Jeffrey</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A DC-DC converter system having at least one DC-DC converter operating in either a PWM mode or a PFM mode is provided. The DC-DC converter system includes a state machine configured to control the switching between the PWM mode and PFM mode. The state machine determines whether an inductor current provided by the DC-DC converter reaches a first specified value for a selective number of clock cycles so switching between the PWM mode and PFM mode is to occur. A pulse generator circuit is connected to the state machine and being configured to provide the appropriate switching period for the PWM mode and the PFM mode at the time of switching. The pulse generator circuit is shared amongst the PWM mode or PFM mode and utilizes a master clock for its operations.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="141.48mm" wi="206.16mm" file="US08624571-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="205.74mm" wi="152.57mm" orientation="landscape" file="US08624571-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="248.67mm" wi="85.09mm" orientation="landscape" file="US08624571-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="202.78mm" wi="116.25mm" orientation="landscape" file="US08624571-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="160.44mm" wi="219.96mm" file="US08624571-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="115.57mm" wi="239.18mm" file="US08624571-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0002" num="0001">The invention is related to the field of DC-DC converters, and in particular to DC-DC converters with pulse generators shared between PWM and PFM modes</p>
<p id="p-0003" num="0002">DC-DC converters are commonly used to supply DC power to electronic devices, such as personal computers, hand-held devices, and the like, and are available in a variety of configurations for deriving a desired DC output voltage from a given source of DC input voltage. For example, a buck mode or step-down DC-DC converter is often used to supply a regulated DC output voltage, whose value is less than the value of the DC source voltage. A typical step-down DC-DC converter includes one or more power switches, current flow paths through which are coupled between a DC input voltage terminal and a reference voltage terminal (e.g., ground), and the common or phase node between which is connected through an output inductor to an output voltage node, to which a storage capacitor and the powered load/device are connected. By controllably switching the power switches on and off, the upstream end of the output inductor is alternately connected between the DC input voltage and the reference voltage. This produces an alternately ramped-up and ramped-down output current through the output inductor to the output node, and causes a stepped-down DC output voltage to be delivered to the load. The DC-DC converter may be configured as a voltage mode converter or a current mode converter.</p>
<p id="p-0004" num="0003">In addition to the above-described voltage mode and current mode DC-DC converters, there is an additional type of DC-DC converter, known as a constant on-time or pulse-frequency modulated (PFM) DC-DC converter. This type of converter is typically used in applications where load current demand is relatively small, as in the case of a &#x201c;sleep&#x201d; or &#x201c;quiescent&#x201d; mode of operation of a notebook computer, for example. A PFM converter includes a control loop having a voltage comparator, the output of which is used to create a triggering signal for a one-shot that sets a constant on-time for a relatively narrow pulse-width switching signal upon which switching times of the power switches are based. Because of its relatively narrow pulse-width, the switching signal provides the PFM mode converter with ability to turn on the power switches for very short time intervals&#x2014;just sufficient to meet the very low current demands of the load, thereby saving power and prolonging battery life. This mode of operation is customarily referred to as discontinuous conduction mode (DCM), because for each switching pulse, the current delivered through the inductor is allowed to reach zero, and the power switches are opened when this happens.</p>
<heading id="h-0002" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0005" num="0004">According to one aspect of the invention, there is provided a DC-DC converter system having at least one DC-DC converter operating in either a PWM mode or a PFM mode. The DC-DC converter system includes a state machine configured to control the switching between the PWM mode and PFM mode. The state machine checks to see if an inductor current provided by the DC-DC converter reaches a first specified value for a selective number of clock cycles so switching between the PWM mode and PFM mode is to occur. A pulse generator circuit is connected to the state machine and being configured to provide the appropriate switching period for the PWM mode and the PFM mode at the time of switching. The pulse generator circuit is shared amongst the PWM mode or PFM mode and utilizes a master clock for its operations.</p>
<p id="p-0006" num="0005">According to another aspect of the invention, there is provided a method of performing the operations of a DC-DC converter system having at least one DC-DC converter operating in either a PWM mode or a PFM mode. The method includes controlling the switching between the PWM mode and PFM mode. The controlling step includes checking to see if an inductor current provided by the DC-DC converter reaches a first specified value for a selective number of clock cycles so switching between the PWM mode and PFM mode is to occur. Also, the method includes providing a pulse generator circuit configured to provide the appropriate switching period for the PWM mode and the PFM mode at the time of switching. The pulse generator circuit is shared amongst the PWM mode or PFM mode and utilizes a master clock for its operations.</p>
<p id="p-0007" num="0006">According to another aspect of the invention, there is provided a DC-DC converter system having at least one DC-DC converter operating in either a PWM mode or a PFM mode. The DC-DC converter system comprises a state machine configured to control the switching between the PWM mode and PFM mode. The state machine determines whether an inductor current provided by said DC-DC converter crosses a zero value in the PWM mode and checks for a selective number of clock cycles to detect if the current does not cross the zero value in the PFM mode, so switching between the PWM mode and PFM mode. The DC-DC converter system further comprises a pulse generator circuit connected to the state machine and being configured to provide the appropriate switching period for the PWM mode and the PFM mode at the time of switching.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0008" num="0007"><figref idref="DRAWINGS">FIG. 1</figref> is a schematic diagram illustrating a general depiction of the invention;</p>
<p id="p-0009" num="0008"><figref idref="DRAWINGS">FIGS. 2A-2B</figref> are graphs illustrating waveforms during the PWM mode and the PFM mode;</p>
<p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. 3</figref> is a graph illustrating features of the automatic mode switching (AMS);</p>
<p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. 4</figref> is a graph illustrating the efficiency from a behavioral simulation of the AMS; and</p>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 5</figref> is a graph illustrating the output voltage during the transition from the PWM mode to the PFM mode.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">DETAILED DESCRIPTION OF THE INVENTION</heading>
<p id="p-0013" num="0012">The invention provides a single pulse generator that is shared between the PFM and PWM modes. This allows for area savings and makes possible to enhance the way the system switches between the modes.</p>
<p id="p-0014" num="0013">In DC-DC converters using switching inductive elements, it is typical to use two operation modes to maximize conversion efficiency depending on load-current conditions. The Pulse Width Modulation (PWM) mode is suitable for delivery of large currents, while the Pulse Frequency Modulation (PFM) mode is suitable for small load currents. In PWM, the switching period is fixed and the duty cycle is adjustable. In PFM, the pulse width is fixed and the period between pulses is adjustable. In the implementation of these modes, the circuits that define the duty cycle for PWM and the pulse width for PFM are usually independent. In the invention, these two variables are obtained from the same circuit.</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 1</figref> is a schematic diagram illustrating a general depiction of the automated mode switch (AMS) for PFM and PWM modes. The AMS <b>2</b> includes an AMS state machine <b>4</b> being arranged to provide the controls for switching between PWM and PFM modes. The AMS state machine <b>4</b> is connected to a pulse generator circuit <b>6</b>. The pulse generator circuit <b>6</b> is shared amongst the PWM and PFM modes (e.g. the AMS <b>2</b> uses the single pulse generator circuit <b>6</b> to serve both PWM and PFM modes). Moreover, AMS state machine <b>4</b> receives as input the load current i<sub>L</sub>, a signal system_reset, and shares the clock signal PWM<sub>CLK </sub>with the pulse generator circuit <b>6</b>. The state machine <b>4</b> uses the signal system_reset to reset its state variables and content during power up. In addition, the state machine <b>4</b> uses the load current i<sub>L </sub>to determine when switching occurs, this will be discussed further below. Also, the pulse generator circuit <b>6</b> receives input signals from a mixed-signal DC-DC buck converter that can operate in either PWM or PFM modes.</p>
<p id="p-0016" num="0015">When switching to PFM mode, it is desirable that the ratio between the on-time and total switching period is similar to the duty-cycle in the PWM mode. This condition ensures a smooth transition, since it satisfies the balance in the inductor's volt-second and capacitor's charge achieved by the loop while in PWM mode. The pulse generator circuit <b>6</b> includes a first multiplexing element <b>12</b> that receives as input the signal PWM<sub>thresh</sub>. Also, the input signal PWM<sub>thresh </sub>is provided to a low pass filter LPF that provides its output to the amplifier &#xd7;2. The output amplifier multiples by 2 its input to produce the output signal PFM<sub>thresh</sub>. A mode signal is provided via a not gate <b>16</b> to the low pass filter LPF by the AMS state machine <b>4</b> to activate it when the PWM mode is present otherwise it is in a frozen state. The first multiplexing element <b>12</b> receives as input the mode signal and outputs either the signal PWM<sub>thresh </sub>or PFM<sub>thresh </sub>based on the mode signal. The mode signal identifies whether PFM mode or PWM mode is active. The digital analog converter (DAC) <b>14</b> receives the output signal of the first multiplexing element <b>12</b> and outputs a signal v<sub>thresh </sub>that is provided as input to a comparator <b>8</b>.</p>
<p id="p-0017" num="0016">A second multiplexing element <b>10</b> receives as input signals PWM<sub>CLK </sub>and PFM<sub>TRIGGER</sub>. Also, the second multiplexing element <b>10</b> receives as input the mode signal provided by the AMS state machine <b>4</b> and outputs either the signal PWM<sub>CLK </sub>or PFM<sub>TRIGGER </sub>as the output signal ramp_reset based on the mode signal. Depending on the value provided by the signal ramp_reset, a NMOS switch sw either is open or closed. The NMOS switch sw is open and closed as to allow the charging and discharging of capacitor C to as to produce a ramp voltage v<sub>ramp</sub>. The voltage v<sub>ramp </sub>is defined as the voltage across the capacitor C. Also, the voltage v<sub>ramp </sub>is provided as input to the comparator <b>8</b>. The comparator <b>8</b> provides an output signal v<sub>ctrl </sub>used in switching between PWM and PFM modes.</p>
<p id="p-0018" num="0017">In this arrangement, the PFM mode is synchronous to the clock, and can have a minimum switching period of two clock cycles. Therefore, to preserve the duty cycle, the on-time of the PFM pulse should be twice the duty cycle during PWM mode. This is accomplished by taking the digital average, using the low pass filter LPF, of the duty cycle, multiply it by two using the amplifier &#xd7;2, and use the result to define the on-time during PFM. During the PFM mode, the filtering circuit is put in a frozen state.</p>
<p id="p-0019" num="0018">The pulse generation circuit <b>6</b> is configured in the analog domain that utilizes a master clock PWM<sub>CLK </sub>for all operations. The pulse generator circuit <b>6</b> is shared between the PWM and PFM modes. This allows for area savings and makes possible to enhance the way the system switches between the modes.</p>
<p id="p-0020" num="0019">In the PWM mode, the voltage v<sub>ramp </sub>is reset every clock period, and the duty cycle is defined by comparing the voltage v<sub>ramp </sub>with a threshold voltage. During the PFM mode, the voltage v<sub>ramp </sub>is reset by a trigger signal PFM<sub>TRIGGER </sub>and the pulse width is defined by comparing the ramp voltage with a threshold voltage.</p>
<p id="p-0021" num="0020">During the PWM mode, an AMS state machine <b>4</b> is used to monitor the load current i<sub>L </sub>using a polling method&#x2014;it wakes up a current comparator <b>18</b> periodically (every N<sub>POLL </sub>clock cycles) and checks whether the load current i<sub>L </sub>has crossed zero for a single clock cycle. If this is the case, the state machine then checks for this condition every clock cycle. If verified for N<sub>LOW </sub>consecutive clock cycles, an assumption is made that the load current i<sub>L </sub>is too light, and the DC-DC converter is switched from PWM to PFM mode. If, at any time, the zero-crossing condition is not verified, the state machine will go back to the periodic polling mode. Note the comparator <b>18</b> compares the current value i<sub>thresh</sub>, which in this case is zero, to that of the current load i<sub>L</sub>.</p>
<p id="p-0022" num="0021">During the PFM mode, the AMS state machine <b>4</b> monitors the current comparator <b>18</b> every time the output NMOS switch sw is on. Zero crossings mean that DC-DC converter should remain in PFM mode. If a zero crossing is not detected, the state machine checks the number of consecutive times that this condition happens. After a N<sub>HIGH </sub>number of times, it switches the DC-DC back to PWM mode.</p>
<p id="p-0023" num="0022">Although the PFM mode operation is based on a synchronous state machine, one of its interface signals operates asynchronously: the zero-crossing current comparator <b>18</b> is active as long as the NMOS power switch is active, and if a zero-crossing condition is detected, the power switches are disabled promptly, without waiting for a clock edge. Allowing the NMOS device to be on any further would be wasteful in terms of power.</p>
<p id="p-0024" num="0023">An example of the waveforms generated for each of the modes is shown in <figref idref="DRAWINGS">FIGS. 2A-2B</figref>. In the PWM mode, the threshold voltage PWM<sub>thresh </sub>is typically generated by an error-amplifier and compensation circuit that determines the optimum duty cycle. In the PFM mode, the threshold voltage PFM<sub>thresh </sub>can be set to be a constant value, but it can be derived from the value used previously during the PWM mode.</p>
<p id="p-0025" num="0024">An example of the mode switching approach in operation is shown in <figref idref="DRAWINGS">FIG. 3</figref>. In this case, the load current i<sub>L </sub>is ramped down slowly until it reaches zero, triggering the operation from PWM to PFM, and then ramps up, triggering the system back to PWM. For illustration purposes, N<sub>POLL</sub>=128, N<sub>LOW</sub>=8, and N<sub>HIGH</sub>=8. Note that these values can be made programmable.</p>
<p id="p-0026" num="0025">A behavioral simulation is also included here for validation of the described approach. The simulation uses the load current profile shown previously in <figref idref="DRAWINGS">FIG. 3</figref>. The behavioral model includes resistive and capacitive power losses from the switches and from the control loop. <figref idref="DRAWINGS">FIG. 4</figref> shows the efficiency curve obtained from the simulation.</p>
<p id="p-0027" num="0026">As the load current ramps down to zero during the PWM mode, the efficiency reaches a maximum and starts dropping around 0.8 ms. The converter operating mode gets automatically switched soon after that, and it can be observed how the efficiency improves once it is in PFM mode. As the load current increases, a slight drop in efficiency is again observed around 1.25 ms, and the converter is switched back to PWM mode. The time between 0 and 0.2 ms is not relevant to the analysis as the converter is powering up.</p>
<p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. 5</figref> shows the simulated output voltage during the transition from the PWM to PFM mode. As mentioned above, the converter uses two clock cycles during PFM at its fastest, and this is seen in the first PFM cycle. The output voltage shows only minor variations, as ensured by the pulse generation circuit <b>4</b> in <figref idref="DRAWINGS">FIG. 1</figref>.</p>
<p id="p-0029" num="0028">The invention requires the PFM mode to run from a state machine which is clocked by the same clock signal used in the PWM mode. The switching frequency in the PFM mode is dependent on load current and battery voltage, and by running it synchronously, the switching frequency is effectively quantized. Although this can seem lower than optimal, the effect on power delivery efficiency is negligible, and it allows for a simplified handover between the modes and simpler implementation of features such as lock-out times and minimum switching rates.</p>
<p id="p-0030" num="0029">The invention uses a larger polling period instead of monitoring the zero-current crossing comparator at every clock cycle. The invention provides a pulse generation circuit to provide the PFM on-time calculation needed for switching between the PWM and PFM modes. The invention eliminates the need for the on-time calculation to be based on a fixed preset, with no dependence on the PWM operation. Therefore, the invention takes into account the inductor and capacitor state variables that can have different balances during the PWM and PFM modes that cause voltage fluctuations during the transition. The pulse generator circuit permits PWM and PFM modes to share the same duty-cycle and on-time generator. Also, the pulse generator is configured to operate in analog with a single master clock for all operations.</p>
<p id="p-0031" num="0030">Although the present invention has been shown and described with respect to several preferred embodiments thereof, various changes, omissions and additions to the form and detail thereof, may be made therein, without departing from the spirit and scope of the invention.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A DC-DC converter system having at least one DC-DC converter operating in either a PWM mode or a PFM mode, said DC-DC converter system comprising:
<claim-text>a state machine configured to control the switching between the PWM mode and PFM mode, said state machine determining whether an inductor current provided by said DC-DC converter reaches a first specified value for a selective number of clock cycles so switching between the PWM mode and PFM mode is to occur; and</claim-text>
<claim-text>a pulse generator circuit connected to said state machine, wherein the pulse generator circuit comprises a low pass filter and an amplifier arrangement for computing a pulse width of the PFM mode using a pulse width of the PWM mode as an input.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The DC-DC converter system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein state machine polls a current comparator to check the inductor current.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The DC-DC converter system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said state machine determines when the first specified value crosses a zero value in the PWM mode and checks for said number of clock cycles if the first specified value is the same value to initiate switching to said PFM.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The DC-DC converter system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said state machine determines when the first specified value greater than zero in the PFM mode and checks for said number of clock cycles if the first specified value is the same value to initiate switching to said PWM.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The DC-DC converter system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said pulse generator circuit is configured to operate in the analog domain.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The DC-DC converter system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said pulse generator circuit and said state machine share a master clock.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The DC-DC converter system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said low pass filter receives a signal from said state machine defining the current mode of use.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. A method of performing the operations of a DC-DC converter system having at least one DC-DC converter operating in either a PWM mode or a PFM mode, said method comprising:
<claim-text>controlling the switching between the PWM mode and PFM mode by determining whether an inductor current provided by said DC-DC converter reaches a first specified value for a selective number of clock cycles so switching between the PWM mode and PFM mode is to occur; and</claim-text>
<claim-text>providing a pulse generator circuit comprising a low pass filter and an amplifier arranged for computing a pulse width of the PFM mode using a pulse width of the PWM mode as an input.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The method of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein said controlling step comprises polling a current comparator to check the inductor current.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The method of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein said controlling step comprises determining when the first specified value crosses a zero value in the PWM mode and checking for said number of clock cycles if the first specified value is the same value to initiate switching to said PFM.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The method of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein said controlling step comprises determining when the first specified value greater than zero in the PFM mode and checking for said number of clock cycles if the first specified value is the same value to initiate switching to said PWM.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. A DC-DC converter system having at least one DC-DC converter operating in either a PWM mode or a PFM mode, said DC-DC converter system, comprising:
<claim-text>a state machine configured to control the switching between the PWM mode and PFM mode, said state machine determining whether an inductor current provided by said DC-DC converter crosses a zero value in the PWM mode and checking for a selective number of clock cycles to detect if the current does not cross the zero value in the PFM mode, so switching between the PWM mode and PFM mode; and</claim-text>
<claim-text>a pulse generator circuit connected to said state machine, wherein the pulse generator circuit comprises a low pass filter and an amplifier arrangement for computing a pulse width of the PFM mode using a pulse width of the PWM mode as an input.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The DC-DC converter system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the pulse generator circuit is shared amongst the PWM mode and the PFM mode, and the pulse generator circuit is arranged to generate PWM pulses.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The method of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the pulse generator circuit is shared amongst the PWM mode and the PFM mode, and the pulse generator circuit is arranged to generate PWM pulses.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The DC-DC converter system of <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein the pulse generator circuit is shared amongst the PWM mode and the PFM mode, and the pulse generator circuit is arranged to generate PWM pulses.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. A DC-DC converter system having at least one DC-DC converter operating in either a PWM mode or a PFM mode, said DC-DC converter system comprising:
<claim-text>a state machine configured to control the switching between the PWM mode and PFM mode, said state machine determining whether an inductor current provided by said DC-DC converter reaches a first specified value for a selective number of clock cycles so switching between the PWM mode and PFM mode is to occur; and</claim-text>
<claim-text>a pulse generator circuit connected to said state machine and being configured to utilize a pulse width of the PWM mode to determine a starting pulse width of the PFM mode;</claim-text>
<claim-text>wherein said starting pulse width of the PFM mode is defined to be twice the pulse width of the PWM mode for a same effective duty cycle.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. A method of performing the operations of a DC-DC converter system having at least one DC-DC converter operating in either a PWM mode or a PFM mode, said method comprising:
<claim-text>controlling the switching between the PWM mode and PFM mode by determining whether an inductor current provided by said DC-DC converter reaches a first specified value for a selective number of clock cycles so switching between the PWM mode and PFM mode is to occur; and</claim-text>
<claim-text>providing a pulse generator circuit configured to utilize a pulse width of the PWM mode to determine a starting pulse width of the PFM mode;</claim-text>
<claim-text>wherein said starting pulse width of the PFM mode is defined to be twice the pulse width of the PWM mode for a same effective duty cycle. </claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
