<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625435-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625435</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12884250</doc-number>
<date>20100917</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<us-term-of-grant>
<us-term-extension>607</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>01</class>
<subclass>R</subclass>
<main-group>31</main-group>
<subgroup>08</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>11</main-group>
<subgroup>00</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>12</main-group>
<subgroup>28</subgroup>
<symbol-position>L</symbol-position>
<classification-value>N</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20110101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>12</main-group>
<subgroup>56</subgroup>
<symbol-position>L</symbol-position>
<classification-value>N</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>370241</main-classification>
<further-classification>37039553</further-classification>
</classification-national>
<invention-title id="d2e53">Generating and allocating performance monitoring traffic</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>7620322</doc-number>
<kind>B2</kind>
<name>Sparks et al.</name>
<date>20091100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>398 49</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>7929448</doc-number>
<kind>B2</kind>
<name>Kotrla et al.</name>
<date>20110400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370244</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2004/0022185</doc-number>
<kind>A1</kind>
<name>Wils et al.</name>
<date>20040200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370226</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2010/0182914</doc-number>
<kind>A1</kind>
<name>DelRegno et al.</name>
<date>20100700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370249</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2010/0254409</doc-number>
<kind>A1</kind>
<name>Lu et al.</name>
<date>20101000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370477</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2010/0329147</doc-number>
<kind>A1</kind>
<name>Nam et al.</name>
<date>20101200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370254</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2011/0044174</doc-number>
<kind>A1</kind>
<name>Szymanski</name>
<date>20110200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370238</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2011/0069622</doc-number>
<kind>A1</kind>
<name>Gintis et al.</name>
<date>20110300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370251</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2011/0258346</doc-number>
<kind>A1</kind>
<name>Said et al.</name>
<date>20111000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709249</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>2012/0033549</doc-number>
<kind>A1</kind>
<name>Joshi et al.</name>
<date>20120200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370228</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>2013/0028080</doc-number>
<kind>A1</kind>
<name>Rao et al.</name>
<date>20130100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370230</main-classification></classification-national>
</us-citation>
</us-references-cited>
<number-of-claims>20</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>370241</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>37039553</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>9</number-of-drawing-sheets>
<number-of-figures>9</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20120069744</doc-number>
<kind>A1</kind>
<date>20120322</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Krzanowski</last-name>
<first-name>Roman</first-name>
<address>
<city>White Plains</city>
<state>NY</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Shannon</last-name>
<first-name>Frank M.</first-name>
<address>
<city>Arnold</city>
<state>MD</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Bjorkman</last-name>
<first-name>William A.</first-name>
<address>
<city>Odenton</city>
<state>MD</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Krzanowski</last-name>
<first-name>Roman</first-name>
<address>
<city>White Plains</city>
<state>NY</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Shannon</last-name>
<first-name>Frank M.</first-name>
<address>
<city>Arnold</city>
<state>MD</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Bjorkman</last-name>
<first-name>William A.</first-name>
<address>
<city>Odenton</city>
<state>MD</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Verizon Patent and Licensing Inc.</orgname>
<role>02</role>
<address>
<city>Basking Ridge</city>
<state>NJ</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Faroul</last-name>
<first-name>Farah</first-name>
<department>2471</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A method includes monitoring, by a first network device, traffic from a customer device, wherein the traffic is to be forwarded via a provider's network. The method also includes identifying a traffic pattern associated with the traffic, identifying a link on which the identified traffic pattern was transmitted and generating performance monitoring traffic. The method further includes forwarding, by the first network device, the performance monitoring traffic to the provider's network via the link on which the identified traffic pattern was transmitted.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="146.47mm" wi="223.60mm" file="US08625435-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="231.31mm" wi="189.65mm" orientation="landscape" file="US08625435-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="197.36mm" wi="166.62mm" orientation="landscape" file="US08625435-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="242.91mm" wi="151.21mm" orientation="landscape" file="US08625435-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="164.08mm" wi="153.84mm" orientation="landscape" file="US08625435-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="240.28mm" wi="175.60mm" orientation="landscape" file="US08625435-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="224.96mm" wi="164.68mm" orientation="landscape" file="US08625435-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="135.89mm" wi="132.67mm" orientation="landscape" file="US08625435-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="210.23mm" wi="154.43mm" orientation="landscape" file="US08625435-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="222.33mm" wi="169.84mm" orientation="landscape" file="US08625435-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND INFORMATION</heading>
<p id="p-0002" num="0001">Link aggregation is a mechanism used to route data between end points using multiple network links and/or ports. For example, a link aggregation group (LAG) may include two or more physical links connecting two end point devices. In a LAG, the physical links are configured to act as a single logical connection between the end point devices. Monitoring LAGs may allow a service provider to ensure that the LAGs are operating properly.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0002" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0003" num="0002"><figref idref="DRAWINGS">FIG. 1</figref> illustrates an exemplary network in which systems and methods described herein may be implemented;</p>
<p id="p-0004" num="0003"><figref idref="DRAWINGS">FIG. 2</figref> illustrates an exemplary configuration of logic components implemented in one or more of the network devices of <figref idref="DRAWINGS">FIG. 1</figref>;</p>
<p id="p-0005" num="0004"><figref idref="DRAWINGS">FIG. 3</figref> illustrates an exemplary configuration of logic components implemented in one or more of the network interface devices of <figref idref="DRAWINGS">FIG. 1</figref>;</p>
<p id="p-0006" num="0005"><figref idref="DRAWINGS">FIG. 4</figref> is a flow diagram illustrating processing associated with the network of <figref idref="DRAWINGS">FIG. 1</figref> in accordance with an exemplary implementation;</p>
<p id="p-0007" num="0006"><figref idref="DRAWINGS">FIG. 5</figref> illustrates a portion of one or more of the network interface devices of <figref idref="DRAWINGS">FIG. 1</figref> in accordance with an exemplary implementation;</p>
<p id="p-0008" num="0007"><figref idref="DRAWINGS">FIG. 6</figref> illustrates the direction of performance monitoring traffic flow in accordance with the flow diagram of <figref idref="DRAWINGS">FIG. 5</figref>;</p>
<p id="p-0009" num="0008"><figref idref="DRAWINGS">FIG. 7</figref> is a flow diagram illustrating processing associated with processing performance monitoring traffic in accordance with an exemplary implementation;</p>
<p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. 8</figref> illustrates a portion of the network of <figref idref="DRAWINGS">FIG. 1</figref> in accordance with the flow diagram of <figref idref="DRAWINGS">FIG. 7</figref>; and</p>
<p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. 9</figref> illustrates another exemplary network in which systems and methods described herein may be implemented.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0003" level="1">DETAILED DESCRIPTION OF PREFERRED EMBODIMENTS</heading>
<p id="p-0012" num="0011">The following detailed description refers to the accompanying drawings. The same reference numbers in different drawings may identify the same or similar elements. Also, the following detailed description does not limit the invention.</p>
<p id="p-0013" num="0012">Implementations described herein relate to monitoring traffic and generating performance monitoring traffic. In one exemplary implementation, a network interface device monitors customer traffic and identifies various patterns or flows associated with the customer traffic. The network interface device may generate and forward performance monitoring traffic or test traffic designed to conform to the identified patterns or flows associated with the customer traffic. For example, the network interface device may determine on what link a particular customer traffic flow is forwarded. The network interface device may then forward test traffic on the same link or path. The test traffic may then be used to estimate the behavior of the network with respect to handling a customer's traffic.</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram of an exemplary network <b>100</b> in which systems and methods described herein may be implemented. Network <b>100</b> may include network <b>120</b>, network devices <b>130</b> and <b>140</b>, network interface devices (NIDs) <b>150</b> and <b>160</b>, links <b>172</b> and <b>174</b> and link <b>180</b>. In an exemplary implementation, network <b>120</b> and network device <b>130</b> may be part of spanning tree protocol (STP) domain <b>110</b> (illustrated within the dotted line in <figref idref="DRAWINGS">FIG. 1</figref>) that includes network <b>120</b>. In one implementation, network <b>120</b> may include a switched Ethernet system/network (SES). Alternatively, network <b>120</b> and domain <b>110</b> may represent any network in which data is transmitted from customer sites to other devices in network <b>100</b>.</p>
<p id="p-0015" num="0014">In an exemplary implementation, network device <b>130</b> may represent a switch, such as a layer <b>2</b> switch, that is used to transmit or forward traffic to other devices in network <b>100</b>. In one implementation, network device <b>130</b> may represent an external network to network interface (ENNI). That is, network device <b>130</b> may represent the interface between network <b>120</b> and external devices/network. Network device <b>130</b> may include edge ports <b>132</b> and <b>134</b> used to forward and receive data from other devices in network <b>100</b> via links <b>172</b> and <b>174</b>. Only two edge ports are shown on network device <b>130</b> for simplicity. It should be understood that network device <b>130</b> may include additional ports (e.g., edge ports) for receiving and transmitting data.</p>
<p id="p-0016" num="0015">Network device <b>140</b> may represent a switch, such as a layer <b>2</b> switch, used to transmit or forward traffic to other devices in network <b>100</b>, such as network device <b>130</b>. In an exemplary implementation, network device <b>130</b> may be coupled to network device <b>140</b> via a LAG. For example, referring to <figref idref="DRAWINGS">FIG. 1</figref>, network device <b>130</b> may be coupled to network device <b>140</b> via LAG <b>170</b>, which includes links <b>172</b> and <b>174</b>.</p>
<p id="p-0017" num="0016">Links <b>172</b> and <b>174</b> may include wired, wireless and/or optical transmission media coupling network devices <b>130</b> and <b>140</b> in a LAG configuration. A LAG, as discussed briefly above, includes two or more links that are configured to act as a single logical connection between the end point devices. Therefore, in this implementation, LAG <b>170</b> includes links <b>172</b> and <b>174</b> that are configured to act as a single logical connection for routing data between network devices <b>130</b> and <b>140</b>.</p>
<p id="p-0018" num="0017">NIDs <b>150</b> and <b>160</b> may each represent an interface device that monitors traffic flowing between various networks/network devices. For example, NIDs <b>150</b> and <b>160</b> may monitor traffic flow from network device <b>140</b> to network device <b>130</b>. NIDs <b>150</b> and <b>160</b> may also generate performance monitoring or test traffic for transmission to network device <b>130</b> and/or network <b>120</b>, as described in detail below. The performance monitoring/test traffic may be used to calculate various performance monitoring parameters that may be used for service level agreement (SLA) purposes, quality of service (QoS) purposes, various monitoring and/or testing purposes, etc., as described in detail below.</p>
<p id="p-0019" num="0018">NIDs <b>150</b> and <b>160</b> may each be positioned as a &#x201c;bump-in-the-wire&#x201d; between network devices <b>130</b> and <b>140</b>. In an exemplary implementation, NIDs <b>150</b> and <b>160</b> may demarc the boundary between the service provider's administrative domain or network and the customer's administrative domain or network. In such an implementation, NIDs <b>150</b> and <b>160</b> may be located at the &#x201c;handoff&#x201d; from the service provider to the customer. For example, network device <b>140</b> may represent a customer's edge device (e.g., a device located at a point where the customer's network interfaces with an external network) and network device <b>130</b> may represent a service provider's edge device (e.g., a device located at a point where the service provider's network interfaces with a customer's network).</p>
<p id="p-0020" num="0019">In one implementation, NIDs <b>150</b> and <b>160</b> may operate in a &#x201c;transparent&#x201d; mode. In the transparent mode, NIDS <b>150</b> and <b>160</b> do not actively participate in the LAG control plane (LACP) traffic. In such an implementation, NIDs <b>150</b> and <b>160</b> may pass all LACP frames and may not take action related to the status of LAG <b>170</b>. NIDs <b>150</b> and <b>160</b>, however, may act as demarcation points between a customer and a service provider and may generate performance monitoring traffic (PMT) for testing and monitoring purposes, as described in more detail below.</p>
<p id="p-0021" num="0020">Link <b>180</b> may include a wired, wireless and/or optical transmission media coupling NIDs <b>150</b> and <b>160</b>. In an exemplary implementation, link <b>180</b> may function as a management link and allow NIDs <b>150</b> and <b>160</b> to exchange control information. For example, NIDs <b>150</b> and <b>160</b> may exchange information via link <b>180</b> to synchronize their states (e.g., active or standby states) with respect to LAG <b>170</b> and/or monitoring LAG <b>170</b>.</p>
<p id="p-0022" num="0021">The network configuration illustrated in <figref idref="DRAWINGS">FIG. 1</figref> is provided for simplicity. It should be understood that a typical network <b>100</b> may include more or fewer network devices, NIDs and links. For example, LAG <b>170</b> may include more than two links. Network <b>100</b> may also include additional elements, such as gateways, routers, monitoring systems, etc., that aid in routing traffic and monitoring a LAG.</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 2</figref> illustrates an exemplary configuration of network device <b>130</b>. Network device <b>140</b> may be configured in a similar manner. Referring to <figref idref="DRAWINGS">FIG. 2</figref>, network device <b>130</b> may include LAG configuration logic <b>210</b>, routing logic <b>220</b> and input/output logic <b>230</b>. The exemplary configuration illustrated in <figref idref="DRAWINGS">FIG. 2</figref> is provided for simplicity. It should be understood that network devices <b>130</b> and <b>140</b> may include more or more fewer logic devices than illustrated in <figref idref="DRAWINGS">FIG. 2</figref>.</p>
<p id="p-0024" num="0023">LAG configuration logic <b>210</b> may include logic that is associated with configuring a LAG. For example, LAG configuration logic <b>210</b> of network device <b>130</b> may include logic for setting up parameters for a LAG, such as LAG <b>170</b>, between network device <b>130</b> and network device <b>140</b>. As one example, LAG configuration logic <b>210</b> may be associated with configuring a speed at which data will be transmitted via the LAG, configuring the number of links in the LAG, configuring which ports will transmit/receive via the LAG links, configuring one network device in the LAG group as a master device and another as a slave device, configuring the LAG for automated set up in which the LAG is automatically configured, configuring the LAG for manual set up requiring an operator to set up the LAG, etc.</p>
<p id="p-0025" num="0024">Routing logic <b>220</b> may include logic for routing data between end point devices. For example, routing logic <b>220</b> may identify forwarding information for routing data frames between network devices <b>130</b> and <b>140</b> via LAG <b>170</b>.</p>
<p id="p-0026" num="0025">Input/output logic <b>230</b> may include logic for receiving and outputting data frames via network devices <b>130</b>/<b>140</b>. For example, input/output logic <b>230</b> of network device <b>130</b> may route data to ports <b>132</b> and <b>134</b> for transmission to network device <b>140</b>, and receive data at ports <b>132</b> and <b>134</b> transmitted from ports <b>142</b> and <b>144</b> of network device <b>140</b>.</p>
<p id="p-0027" num="0026">In an exemplary implementation, LAG configuration logic <b>210</b>, routing logic <b>220</b> and input/output logic <b>230</b> may include one or more processors, microprocessors or other processing logic used to interpret and execute instructions. In such implementations, LAG configuration logic <b>210</b>, routing logic <b>220</b> and input/output logic <b>230</b> may include software instructions stored in a computer-readable medium. A computer-readable medium may be defined as one or more memory devices. The software instructions may be read into memory from another computer-readable medium or from another device via a communication interface. The software instructions contained in memory may cause the various logic components, such as LAG configuration logic <b>210</b>, routing logic <b>220</b> and input/output logic <b>230</b>, to perform processes that are described below. Alternatively, hardwired circuitry may be used in place of or in combination with software instructions to implement processes consistent with exemplary embodiments. Thus, systems and methods described herein are not limited to any specific combination of hardware circuitry and software.</p>
<p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. 3</figref> illustrates an exemplary configuration of NID <b>150</b>. NID <b>160</b> may be configured in a similar manner. Referring to <figref idref="DRAWINGS">FIG. 3</figref>, NID <b>150</b> may include traffic monitoring logic <b>310</b>, rules logic <b>320</b>, PMT generation logic <b>330</b>, communication logic <b>340</b> and input/output logic <b>350</b>. The exemplary configuration illustrated in <figref idref="DRAWINGS">FIG. 3</figref> is provided for simplicity. It should be understood that NIDs <b>150</b> and <b>160</b> may include more or more fewer logic devices than illustrated in <figref idref="DRAWINGS">FIG. 3</figref>.</p>
<p id="p-0029" num="0028">Traffic monitoring logic <b>310</b> may include logic that monitors and &#x201c;learns&#x201d; traffic flow patterns, such as patterns associated with data flows between user ports and network ports on NID <b>150</b>, as described in detail below. User ports on NIDs <b>150</b>/<b>160</b> may represent ports coupled to network device <b>140</b> that receive, for example, customer traffic. Network ports on NIDs <b>150</b>/<b>160</b> may represent ports coupled to network device <b>130</b> that forward, for example, customer traffic to/from a service provider's network (e.g., network <b>110</b> or network <b>120</b>).</p>
<p id="p-0030" num="0029">In an exemplary implementation, traffic monitoring logic <b>310</b> may also learn whether one or more links in LAG <b>170</b> are transmitting data. For example, traffic monitoring logic <b>310</b> may determine that one link in LAG <b>170</b> is actively transmitting data, while another link is not active or is in a standby state. This may correspond to an active/standby (A/S) LAG mode. In the A/S mode, the standby link may transmit &#x201c;keep alive&#x201d; messages, or transmit no traffic at all. Alternatively, traffic monitoring logic <b>310</b> may determine that that both links in LAG <b>170</b> (e.g., links <b>172</b> and <b>174</b>) are operating in an active mode (e.g., corresponding to an active/active (A/A) LAG mode). PMT generation logic <b>330</b> may use the A/S or A/A status of the links to identify a link upon with to transmit PMT, as described below. For example, PMT generation logic <b>330</b> may forward PMT traffic on the same link(s) that data traffic is traversing to aid in ensuring the accuracy of the performance measurements.</p>
<p id="p-0031" num="0030">Traffic monitoring logic <b>310</b>, as described above, may identify data flows traversing NID <b>150</b>. In an exemplary implementation, traffic monitoring logic <b>310</b> may identify certain combinations of information in various fields of a data flow. These fields may include media access control (MAC) source and destination address (SA, DA) fields, a virtual local area network identifier (VLAN ID) field, a class of service/priority code point (COS/PCP) field, layer <b>3</b> information field(s), etc. The information identified in one or more of these fields, such as the DA, SA and/or VLAN ID, may be used by NID <b>150</b> to particularly identify data flows and further identify links upon which the data flows are transmitted. PMT generation logic <b>330</b> may use this information when forwarding PMT to ensure that the PMT conforms to customer traffic flowing through NIDs <b>150</b>/<b>160</b>. For example, traffic monitoring logic <b>310</b> may monitor an Ethernet virtual connection (EVC) with a VLAN ID of <b>100</b>. If this EVC having a VLAN ID of <b>100</b> is detected on link <b>172</b>, PMT generation logic <b>330</b> may allocate PMT for this EVC to link <b>172</b>.</p>
<p id="p-0032" num="0031">Rules logic <b>320</b> may store rules associated with allocating PMT to links in a LAG. For example, in one implementation, rules logic <b>320</b> may indicate that PMT should be allocated to the active link, if the LAG interface operates in the A/S mode. Another rule stored in rules logic <b>320</b> may indicate that PMT for a specific VLAN ID should be forwarded on the same link as the traffic to which the VLAN ID is allocated. Still another rule in rules logic <b>320</b> may indicate that PMT for the specific DA/SA signature should be forwarded on the same link as the traffic to which the DA/SA signature is allocated. Rules logic <b>320</b> may store additional rules indicating that PMT should be routed on network device <b>150</b> in accordance with COS/PCP information. For example, if a traffic flow having a particular priority code included in COS/PCP field indicates that the traffic flow is &#x201c;high&#x201d; priority, the traffic flow may be routed via particular queues in various network devices (e.g., NID <b>150</b>, network device <b>130</b>, etc.) that are associated with handling high priority traffic. Rules logic <b>320</b> may indicate that PMT will be routed via the same queues, buffers, ports, etc., as the traffic flow that the PMT is intended to emulate.</p>
<p id="p-0033" num="0032">Rules logic <b>320</b> may also store decision rules associated with changing flow patterns. For example, traffic monitoring logic <b>310</b> may monitor the traffic flow continuously. As the flow pattern changes, traffic monitoring logic <b>310</b> may detect changes in the traffic flow. Accordingly, one or more rules stored in rules logic <b>320</b> may indicate that the allocation of PMT will change according to changes in the flows identified by traffic monitoring logic <b>310</b>.</p>
<p id="p-0034" num="0033">As another example, in some instances, traffic monitoring logic <b>310</b> may determine that no traffic flow is being received. In this case, rules logic <b>320</b> may indicate that the last learned or prescribed flow pattern should continue to be used by PMT generation logic <b>330</b> to generate the PMT until another flow pattern is received and identified. In still other instances, traffic monitoring logic <b>310</b> may determine that a specific flow pattern is detected on both links <b>172</b> and <b>174</b> of LAG <b>170</b>. In this case, rules logic <b>320</b> may indicate that such a flow pattern should be rejected as being non-specific and indicate that PMT generation logic <b>330</b> may use arbitrary rules or predetermined rules to generate PMT for transmitting on one of the links. Alternatively, rules logic <b>320</b> may indicate that PMT generation logic <b>310</b> is to send no PMT to any link(s) in response to detecting a non-specific flow pattern on both links In some implementations, rules logic <b>320</b> may store a rule to prevent too frequent changes with respect to the generation and transmission of PMT. Such a rule may prevent changes in the transmission of PMT based on a &#x201c;bouncing&#x201d; of links caused by problems in LAG <b>170</b>.</p>
<p id="p-0035" num="0034">In an exemplary implementation, rules stored in rules logic <b>320</b> may be provided to NIDs <b>150</b>/<b>160</b> by, for example, network personnel associated with monitoring performance of network domain <b>110</b> and/or network <b>120</b>. For example, network personnel may enter the rules into NIDs <b>150</b>/<b>160</b> or forward the rules to NIDs <b>150</b>/<b>160</b> for storage in rules logic <b>320</b>. In each case, traffic monitoring logic <b>310</b> and rules stored in rules logic <b>320</b> may be designed to aid PMT generation logic <b>330</b> (in NID <b>150</b>) in generating and forwarding PMT that conforms to or mirrors observed traffic flows received by NID <b>150</b>. For example, PMT generation logic <b>330</b> may use information identified by traffic monitoring logic <b>310</b> to determine on what link a specific traffic flow is present or is being forwarded. PMT generation logic <b>330</b> may then use rules in rules logic <b>320</b> to allocate PMT to that link. Modeling the PMT to conform to learned traffic flows may result in more accurate estimation of performance parameters associated with a network. For example, as described above, PMT generation logic <b>330</b> may access rules stored in rules logic <b>320</b> and determine that PMT generated by PMT generation logic <b>330</b> is to be forwarded on the same link(s) that real or live customer data traffic is traversing. This helps ensure the accuracy of the performance measurements made with respect to the PMT.</p>
<p id="p-0036" num="0035">As also described above, traffic monitoring logic <b>310</b> may continuously monitor traffic received by NIDs <b>150</b> and <b>160</b>. As the traffic patterns change, PMT generation logic <b>330</b> may automatically change the allocation of the PMT among various links, such as links in a LAG, in accordance with the changed traffic patterns to reflect the current or more recently identified traffic flows.</p>
<p id="p-0037" num="0036">In some implementations, PMT generation logic <b>330</b> may also include logic to prevent too frequent changes to the test traffic flows. For example, if LAG <b>170</b> is experiencing a problem and traffic is frequently bouncing between links <b>172</b> and <b>174</b>, traffic monitoring logic <b>310</b> may identify the changing of the traffic flows between links <b>172</b> and <b>174</b>. PMT generation logic <b>330</b> and/or rules logic <b>320</b>, however, may store a rule indicating that the transmission of PMT should not be changed or switched between links more than once every predetermined period of time. This may avoid unnecessarily changing of the link on which PMT is transmitted based on problems with LAG <b>170</b>, as opposed to reflecting real traffic flows in network <b>100</b>.</p>
<p id="p-0038" num="0037">As described previously, traffic monitoring logic <b>310</b> may monitor the patterns of traffic received from user ports and destined for forwarding via network ports on NID <b>150</b>. In an exemplary implementation, NIDs <b>150</b> and <b>160</b> may monitor traffic in this direction and PMT generation logic <b>330</b> may forward PMT in this same direction.</p>
<p id="p-0039" num="0038">Communication logic <b>340</b> may include logic that allows a NID, such as NID <b>150</b>, to communicate with other devices, such as NID <b>160</b>. For example, referring to <figref idref="DRAWINGS">FIG. 1</figref>, NIDs <b>150</b> and <b>160</b> may be coupled to each other via link <b>180</b>. Communication logic <b>340</b> may allow NIDs <b>150</b> and <b>160</b> to communicate with each other in a peer-to-peer fashion via link <b>180</b>. In an exemplary implementation, communication logic <b>340</b> may forward LAG synchronization information between NIDs <b>150</b> and <b>160</b> via link <b>180</b>. Communication logic <b>340</b> may also allow NIDs to forward various information, such as control information to other devices in network <b>100</b>. For example, in some implementations, communication logic <b>340</b> may allow NID <b>150</b> to send control messages to network devices <b>130</b> and <b>140</b>.</p>
<p id="p-0040" num="0039">Input/output logic <b>350</b> may include logic for receiving and outputting data via one or more links of LAG <b>170</b>. For example, input/output logic <b>350</b> may route data from user ports on NID <b>150</b> to network ports on NID <b>150</b>. In some implementations, input/output logic <b>350</b> may include queues and buffers for temporarily buffering data for output via network ports on NID <b>150</b>.</p>
<p id="p-0041" num="0040">In an exemplary implementation, traffic monitoring logic <b>310</b>, rules logic <b>320</b>, PMT generation logic <b>330</b>, communication logic <b>340</b> and input/output logic <b>350</b> may include one or more processors, microprocessors or other processing logic used to interpret and execute instructions. In such implementations, traffic monitoring logic <b>310</b>, rules logic <b>320</b>, PMT generation logic <b>330</b>, communication logic <b>340</b> and input/output logic <b>350</b> may include software instructions stored in a computer-readable medium. The software instructions may be read into memory from another computer-readable medium or from another device via a communication interface. The software instructions contained in memory may cause the various logic components, such as traffic monitoring logic <b>310</b>, rules logic <b>320</b>, PMT generation logic <b>330</b>, communication logic <b>340</b> and input/output logic <b>350</b> to perform processes that are described below. Alternatively, hardwired circuitry may be used in place of or in combination with software instructions to implement processes consistent with exemplary embodiments. Thus, systems and methods described herein are not limited to any specific combination of hardware circuitry and software.</p>
<p id="p-0042" num="0041">As described above, in certain situations, a service provider may wish to perform performance monitoring associated with providing services to a customer. For example, a service provider associated with NIDs <b>150</b> and <b>160</b> may perform performance monitoring for a customer associated with network device <b>140</b>, as described in detail below.</p>
<p id="p-0043" num="0042"><figref idref="DRAWINGS">FIG. 4</figref> illustrates exemplary processing associated with monitoring traffic and generating PMT. Processing may begin with NIDs <b>150</b> and <b>160</b> receiving traffic via LAG <b>170</b> (act <b>410</b>). For example, assume that input/output logic <b>350</b> of NID <b>150</b> receives traffic on a user port associated with network device <b>140</b>. Traffic monitoring logic <b>310</b> may monitor the traffic (act <b>420</b>). For example, traffic monitoring logic <b>310</b> may monitor the traffic received on a user port, which is destined for a network port on NID <b>150</b>.</p>
<p id="p-0044" num="0043">As an example, <figref idref="DRAWINGS">FIG. 5</figref> illustrates a number of user ports labeled <b>500</b>-<b>1</b> through <b>500</b>-N (referred to collectively as user ports <b>500</b>), a number of queues labeled <b>510</b>-<b>1</b> through <b>510</b>-N (referred to collectively as queues <b>510</b>) and a number of network ports <b>520</b>-<b>1</b> through <b>520</b>-N (referred to collectively as network ports <b>520</b>) located on NID <b>150</b>. It should be understood that additional devices, such as additional buffers, queues and/or ports, may be included in NID <b>150</b>. Incoming traffic received by NID <b>150</b> may be received on one of user ports <b>500</b>, queued in one of queues <b>510</b> (depending on the traffic load) and forwarded to one of network ports <b>520</b> for transmission via one of the links in LAG <b>170</b> (e.g., link <b>172</b>). In an exemplary implementation, queues <b>510</b> may be divided into queues associated with various classes of traffic, such as queues that will handle different priorities of traffic. For example, information included in a COS/PCP field of an incoming data frame may indicate that a data flow is associated with &#x201c;high priority&#x201d; traffic. PMT generated by PMT generation logic <b>330</b> will be forwarded via the same ports, queues and links as the customer traffic to which it is intended to conform or emulate.</p>
<p id="p-0045" num="0044">Traffic monitoring logic <b>310</b> may identify patterns of traffic associated with the received traffic (act <b>430</b>). For example, as discussed above, traffic monitoring logic <b>310</b> may identify or learn a specific flow based on one or more of the DA, SA and/or VLAN ID associated with the received traffic. Traffic monitoring logic <b>310</b> may also identify COS bits in a PCP field, or layer <b>3</b> information included in flow to identify a particular pattern/flow.</p>
<p id="p-0046" num="0045">PMT generation logic <b>330</b> may use the identified/learned data flows and generate PMT for forwarding on a link in accordance with rules stored in rules logic <b>320</b> (act <b>440</b>). For example, PMT generation logic <b>330</b> may generate and forward PMT flows that conform to the learned flows/patterns identified by traffic monitoring logic <b>310</b> and in conjunction with rules stored in rules logic <b>320</b> associated with identifying a link upon which to forward the PMT. As an example, PMT generation logic <b>330</b> may use rules stored in rules logic <b>320</b> to identify a link upon which to send the PMT (act <b>450</b>). For example, if LAG <b>170</b> is operating in an A/S mode, PMT generation logic <b>330</b> may identify the active link as the link upon which to send the PMT, based on a rule stored in rules logic <b>320</b>. In other instances, PMT generation logic <b>330</b> may forward the PMT on the specific link on which a traffic pattern is detected. In still other instances, PMT generation logic <b>330</b> may use arbitrary rules to identify a flow pattern for the PMT if no flow pattern is detected.</p>
<p id="p-0047" num="0046">In each case, PMT generation logic <b>330</b> may generate PMT that is intended to conform to real incoming traffic flows, including identifying one or more links on which to forward the PMT in accordance with rules stored in rules logic <b>320</b>. PMT generation logic <b>330</b> may then forward the PMT to input/output logic <b>350</b> for forwarding via the identified link(s) (act <b>460</b>).</p>
<p id="p-0048" num="0047">As an example, PMT generation logic <b>330</b> may forward a certain number of packets every predetermined period of time on a particular link to conform to an identified data flow associated with that particular link. For example, PMT generation logic <b>330</b> may send <b>200</b> packets (i.e., PMT packets) via input/output logic <b>350</b> every three seconds for a ten minute interval on link <b>172</b>. As another example, PMT generation logic <b>330</b> may forward one packet every predetermined duration (e.g., every one second, every 100 milliseconds, etc.) continuously on a particular link, or until an identified flow pattern changes.</p>
<p id="p-0049" num="0048"><figref idref="DRAWINGS">FIG. 6</figref> illustrates the direction of data flow and PMT flow in network <b>100</b>. As illustrated, a traffic flow having a particular DA/SA/PCP/VLAN ID may be forwarded from network device <b>140</b> toward NIDs <b>150</b>/<b>160</b>. NID <b>150</b> and/or <b>160</b> may forward PMT via network ports and/or links on NIDs <b>150</b>/<b>160</b> toward network device <b>130</b> to conform to identified traffic patterns.</p>
<p id="p-0050" num="0049">After PMT is forwarded, the PMT may be used to estimate various parameters associated with LAG <b>170</b>, network <b>120</b> and/or domain <b>110</b>. For example, <figref idref="DRAWINGS">FIG. 7</figref> illustrates exemplary processing associated with the transmitted PMT. Processing may begin with network personnel and/or devices in network <b>100</b> identifying parameters that are to be monitored with respect to the transmitted PMT. As an example, assume that network personnel associated with monitoring network <b>120</b> may wish to monitor latency, packet loss and jitter.</p>
<p id="p-0051" num="0050">A monitoring device in network <b>100</b> may receive the transmitted PMT (act <b>710</b>). For example, a monitoring device located at an edge portion or a destination portion of network <b>100</b> may be configured to receive PMT. As an example, <figref idref="DRAWINGS">FIG. 8</figref> illustrates an exemplary portion of network <b>100</b> associated with monitoring PMT. Referring to <figref idref="DRAWINGS">FIG. 8</figref>, network <b>120</b> includes monitoring device <b>810</b>. Monitoring device <b>810</b> may include one or more processors, microprocessors or other processing logic associated with calculating various parameters associated with PMT. In some implementations, monitoring device <b>810</b> may be located at a portion of network <b>120</b> so that monitoring device <b>820</b> may receive or intercept the PMT. In other instances, some PMT may be addressed to monitoring device <b>810</b>.</p>
<p id="p-0052" num="0051">Continuing with the example above, monitoring device <b>810</b> may receive the PMT and calculate latency, packet loss and jitter values based on the received PMT (act <b>720</b>). For example, the PMT may include time tag information indicating when it was transmitted from NID <b>150</b>. In this case, based on the time that the PMT was received, monitoring device <b>810</b> may determine latency associated with forwarding the PMT. Monitoring device <b>810</b> may also determine packet loss by, for example, comparing information in the received PMT with information indicating the number of packets included in the transmitted PMT. Monitoring logic <b>810</b> may also determine a jitter value by comparing variations in latency associated with received packets. In each case, monitoring device <b>810</b> may calculate the desired parameters associated with the PMT.</p>
<p id="p-0053" num="0052">In an exemplary implementation, monitoring device <b>810</b> may forward the calculated values to a network monitoring system (act <b>730</b>). The network monitoring system may then determine whether network <b>120</b> and/or domain <b>110</b> are meeting various requirements (e.g., SLA requirements, QoS requirements, etc.) associated with routing customer data via network <b>120</b>/domain <b>110</b>.</p>
<p id="p-0054" num="0053">As described above, NIDs <b>150</b> and <b>160</b> may monitor traffic and generate PMT for transmission via a service provider's network. In accordance with another exemplary implementation, a single NID may be used. For example, <figref idref="DRAWINGS">FIG. 9</figref> illustrates an exemplary network <b>900</b> that includes NID <b>910</b>, as opposed to NIDs <b>150</b> and <b>160</b> illustrated in <figref idref="DRAWINGS">FIG. 1</figref>. In network <b>900</b>, NID <b>910</b> may act as a demarcation point between a customer's network and a service provider's network (similar to NIDs <b>150</b> and <b>160</b>). In network <b>900</b>, NID <b>910</b> may include similar logic components as NIDs <b>150</b>/<b>160</b> illustrated in <figref idref="DRAWINGS">FIG. 3</figref> and described above. In this implementation, NID <b>910</b> may continuously monitor traffic and generate PMT as described above with respect to NIDs <b>150</b> and <b>160</b>.</p>
<p id="p-0055" num="0054">In some implementations, performance monitoring may be performed without the use of NIDs <b>150</b>/<b>160</b> or <b>910</b>. For example, performance monitoring may be performed at the link level. In this scenario, network device <b>130</b> may monitor traffic received on links <b>132</b> and <b>134</b>. Network device <b>130</b> may also include rules and/or logic similar to that described above with respect to <figref idref="DRAWINGS">FIG. 3</figref>. Network device <b>130</b> may then monitor the received traffic and determine that PMT should run over link <b>132</b> for a given service.</p>
<p id="p-0056" num="0055">As an example, network device <b>140</b> may be sending all traffic over link <b>132</b> for VLAN ID <b>10</b>. Network device <b>130</b> may monitor traffic received via links <b>132</b> and <b>134</b> and generate PMT for forwarding via link <b>132</b> to conform to the traffic associated with VLAN ID <b>10</b>. Network device <b>130</b> may forward the PMT to network device <b>140</b> (e.g., a maintenance point on network device <b>140</b>) via link <b>132</b>. In some implementations, network device <b>140</b> may reflect back the PMT to network device <b>130</b> via link <b>132</b>. In this manner, PMT may be generated and forwarded by devices other than NIDs.</p>
<p id="p-0057" num="0056">Implementations described herein provide for monitoring traffic on a network and generating and forwarding PMT or test traffic to conform to learned traffic flow patterns associated with the monitored traffic. In an exemplary implementation, a network interface device may determine on what link a particular customer traffic flow has been forwarded and forward PMT on the same link or path to conform to the customer traffic flow. In this manner, the PMT may then be routed in a similar manner as the customer's traffic. This may allow more accurate monitoring of the operation of the network.</p>
<p id="p-0058" num="0057">The foregoing description of exemplary implementations provides illustration and description, but is not intended to be exhaustive or to limit the embodiments to the precise form disclosed. Modifications and variations are possible in light of the above teachings or may be acquired from practice of the embodiments.</p>
<p id="p-0059" num="0058">For example, in the implementations described above, NIDs <b>150</b>, <b>160</b> and/or NID <b>910</b> were described as monitoring data received via a LAG/LAG interface. In some implementations, NIDs <b>150</b>, <b>160</b> and/or <b>910</b> may monitor any location in a network, such as any demarcation point between a customer network and a service provider's network and generate PMT as described above. That is, in some implementations, NIDs <b>150</b>, <b>160</b> and/or <b>190</b> may be used to generate PMT for any type of network connection, and not just those involving LAGs.</p>
<p id="p-0060" num="0059">In addition, implementations have been described above with respect to identifying traffic patterns based on particular fields identified in received traffic flows. In other implementations, traffic flows may be identified based on other information/fields included in received traffic flows.</p>
<p id="p-0061" num="0060">Further, implementations have been described above with respect to a LAG that is illustrated as including two links. It should be understood that in other implementations, a LAG may include more than two links that connect end point devices (e.g., network devices <b>130</b> and <b>140</b>). In addition, each network interface device in network <b>100</b> (e.g., NIDs <b>150</b>/<b>160</b>) may include a large number of network ports or paths upon which traffic may be forwarded. In each case, PMT generation logic <b>330</b> may forward PMT on a link or path that conforms with learned traffic patterns associated with traffic flowing through the particular NID.</p>
<p id="p-0062" num="0061">Still further, while series of acts have been described with respect to <figref idref="DRAWINGS">FIGS. 4 and 7</figref>, the order of the acts may be varied in other implementations. Moreover, non-dependent acts may be implemented in parallel.</p>
<p id="p-0063" num="0062">It will be apparent that various features described above may be implemented in many different forms of software, firmware, and hardware in the implementations illustrated in the figures. The actual software code or specialized control hardware used to implement the various features is not limiting. Thus, the operation and behavior of the features were described without reference to the specific software code&#x2014;it being understood that one of ordinary skill in the art would be able to design software and control hardware to implement the various features based on the description herein.</p>
<p id="p-0064" num="0063">Further, certain portions of the invention may be implemented as &#x201c;logic&#x201d; that performs one or more functions. This logic may include hardware, such as one or more processors, microprocessor, application specific integrated circuits, field programmable gate arrays or other processing logic, software, or a combination of hardware and software.</p>
<p id="p-0065" num="0064">In the preceding specification, various preferred embodiments have been described with reference to the accompanying drawings. It will, however, be evident that various modifications and changes may be made thereto, and additional embodiments may be implemented, without departing from the broader scope of the invention as set forth in the claims that follow. The specification and drawings are accordingly to be regarded in an illustrative rather than restrictive sense.</p>
<p id="p-0066" num="0065">No element, act, or instruction used in the description of the present application should be construed as critical or essential to the invention unless explicitly described as such. Also, as used herein, the article &#x201c;a&#x201d; is intended to include one or more items. Further, the phrase &#x201c;based on&#x201d; is intended to mean &#x201c;based, at least in part, on&#x201d; unless explicitly stated otherwise.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method, comprising:
<claim-text>monitoring, by a first network device, traffic from a customer device, wherein the traffic is to be forwarded via a provider's network, wherein the first network device is coupled to the provider's network via at least a first link and a second link;</claim-text>
<claim-text>identifying, by the first network device, a traffic pattern associated with the traffic;</claim-text>
<claim-text>detecting, by the first network device, that the identified traffic pattern was transmitted on the first link;</claim-text>
<claim-text>generating, by the first network device, first performance monitoring traffic;</claim-text>
<claim-text>forwarding, by the first network device, the first performance monitoring traffic to the provider's network via the first link;</claim-text>
<claim-text>identifying a second traffic pattern associated with traffic from the customer device;</claim-text>
<claim-text>detecting that the second traffic pattern was transmitted on the second link;</claim-text>
<claim-text>generating second performance monitoring traffic; and</claim-text>
<claim-text>forwarding the second performance monitoring traffic to the provider's network via the second link.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the identifying a traffic pattern comprises:
<claim-text>identifying at least one of a source address, destination address, virtual local area network identifier (VLAN ID) or class of service associated with the traffic.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00002">claim 2</claim-ref>,
<claim-text>wherein the forwarding the first performance monitoring traffic comprises:</claim-text>
<claim-text>forwarding the first performance monitoring traffic on the first link in response to detecting that the traffic was transmitted on the first link.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>identifying, by the first network device, an active link in a link aggregation group; and</claim-text>
<claim-text>forwarding, by the first network device, performance monitoring traffic via the active link.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>changing, by the first network device, a link upon which performance monitoring traffic is transmitted in response to changing traffic patterns identified by the first network device.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>determining, by the first network device, that no traffic is being received; and</claim-text>
<claim-text>forwarding, by the first network device, the first performance monitoring traffic based on a previously identified data flow.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>determining at least one of latency, packet loss or jitter based on the first performance monitoring traffic.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the generating first performance monitoring traffic comprises:
<claim-text>generating test traffic to conform to customer traffic received by the first network device.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. A method, comprising:
<claim-text>monitoring, by at least one interface device coupled to at least one link in a link aggregation group (LAG), traffic received via the LAG;</claim-text>
<claim-text>identifying, by the at least one interface device, a plurality of data flows associated with the traffic;</claim-text>
<claim-text>identifying, by the at least one interface device, a first link in the LAG on which a first one of the plurality of data flows was transmitted;</claim-text>
<claim-text>identifying, by the at least one interface device, a second link in the LAG on which a second one of the plurality of data flows was transmitted;</claim-text>
<claim-text>generating, by the at least one interface device, performance monitoring traffic based on the identified first and second data flows;</claim-text>
<claim-text>forwarding, by the at least one interface device, the performance monitoring traffic on the first link in response to the identified first data flow; and</claim-text>
<claim-text>forwarding, by the at least one interface device, the performance monitoring traffic on the second link in response to the identified second data flow.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The method of <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the identifying the plurality of data flows comprises:
<claim-text>identifying a data flow based on at least one of a source address, destination address, virtual local area network identifier (VLAN ID) or class of service associated with traffic received via the LAG.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The method of <claim-ref idref="CLM-00010">claim 10</claim-ref>, further comprising:
<claim-text>forwarding, via links in the LAG, a plurality of performance monitoring traffic patterns, each of the plurality of performance monitoring traffic patterns corresponding to one of the plurality of identified data flows.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The method of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the forwarding a plurality of performance monitoring traffic patterns further comprises:
<claim-text>forwarding the plurality of performance monitoring traffic patterns via links in the LAG on which the corresponding data flows were transmitted.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The method of <claim-ref idref="CLM-00009">claim 9</claim-ref>, further comprising:
<claim-text>identifying, by the at least one interface device, an active link in the LAG; and</claim-text>
<claim-text>forwarding, by the at least one interface device, performance monitoring traffic via the active link.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The method of <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the at least one interface device comprises a plurality of interface devices, and wherein the monitoring comprises:
<claim-text>monitoring, by a first one of the plurality of interface devices, the first link in the LAG, and</claim-text>
<claim-text>monitoring, by a second one of the plurality of interface devices, the second link in the LAG.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. A device, comprising:
<claim-text>a plurality of ports configured to transmit and receive data over a plurality of transmission links, the plurality of transmission links comprising a link aggregation group (LAG); and</claim-text>
<claim-text>logic configured to:
<claim-text>monitor data received via the LAG,</claim-text>
<claim-text>identify data flow patterns associated with the received data, wherein each of the data flow patterns has a corresponding receive port and a corresponding transmit port;</claim-text>
<claim-text>generate test traffic, and</claim-text>
<claim-text>forward, via one of the plurality of transmit ports, the test traffic based on the identified data flow patterns,</claim-text>
</claim-text>
<claim-text>wherein when forwarding the test traffic, the logic is configured to:
<claim-text>identify, for each of the identified data flow patterns, a link in the LAG on which the identified data flow pattern was received, and</claim-text>
<claim-text>transmit, for each of the identified data flow patterns, the test traffic on the identified link.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The device of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein when identifying data flow patterns, the logic is configured to:
<claim-text>identify a data flow based on at least one of a source address, destination address, virtual local area network identifier (VLAN ID) or class of service associated with data received via the LAG.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The device of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein when generating test traffic, the logic is configured to:
<claim-text>generate a plurality of test traffic flows, and when forwarding the test traffic, the logic is configured to:</claim-text>
<claim-text>forward the plurality of test traffic flows on links corresponding to links on which the plurality of identified data flow patterns were received.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The device of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the logic is further configured to:
<claim-text>identify an active link in the LAG, and</claim-text>
<claim-text>forward the test traffic via the active link.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The device of <claim-ref idref="CLM-00018">claim 18</claim-ref>, wherein the logic is further configured to:
<claim-text>identify changes in an active or standby status of links in the LAG, and</claim-text>
<claim-text>forward the test traffic on a link in the LAG based on the identified changes.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The device of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the logic is further configured to:
<claim-text>change a link upon which the test traffic is forwarded based on changes in the identified data flow patterns. </claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
