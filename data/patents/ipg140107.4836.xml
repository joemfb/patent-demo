<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625929-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625929</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13231268</doc-number>
<date>20110913</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2010-210959</doc-number>
<date>20100921</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>132</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>K</subclass>
<main-group>9</main-group>
<subgroup>40</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>382284</main-classification>
</classification-national>
<invention-title id="d2e71">Image processing apparatus and storage medium</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>7876320</doc-number>
<kind>B2</kind>
<name>Marugame</name>
<date>20110100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>345420</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>2010/0149384</doc-number>
<kind>A1</kind>
<name>Iijima et al.</name>
<date>20100600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>348241</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2010/0157072</doc-number>
<kind>A1</kind>
<name>Luo et al.</name>
<date>20100600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>3482084</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>JP</country>
<doc-number>09-261526</doc-number>
<date>19971000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>JP</country>
<doc-number>2002-290817</doc-number>
<date>20021000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>JP</country>
<doc-number>2008-099260</doc-number>
<date>20080400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>JP</country>
<doc-number>2009-194700</doc-number>
<date>20090800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>9</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>None</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>15</number-of-drawing-sheets>
<number-of-figures>20</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20120070100</doc-number>
<kind>A1</kind>
<date>20120322</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Naito</last-name>
<first-name>Yukihiro</first-name>
<address>
<city>Hachioji</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Naito</last-name>
<first-name>Yukihiro</first-name>
<address>
<city>Hachioji</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Scully, Scott, Murphy &#x26; Presser, P.C.</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Olympus Corporation</orgname>
<role>03</role>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Koziol</last-name>
<first-name>Stephen R</first-name>
<department>2665</department>
</primary-examiner>
<assistant-examiner>
<last-name>Saini</last-name>
<first-name>Amandeep</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">An image processing apparatus includes a first synthesizing unit that determines a first synthesis ratio of a plurality of images based on correlation amounts between a reference image and the plurality of images excluding the reference image and synthesizes a first image from a plurality of images based on the first synthesis ratio, a noise reducing unit that reduces noise of a plurality of images including the first image using a plurality of parameters and generates a plurality of noise-reduced first images including at least an image obtained by reducing noise of the first image, and a second synthesizing unit that determines a second synthesis ratio according to the first synthesis ratio and synthesizes a second image from the plurality of noise-reduced images based on the second synthesis ratio.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="155.70mm" wi="240.03mm" file="US08625929-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="240.45mm" wi="154.60mm" orientation="landscape" file="US08625929-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="147.15mm" wi="147.83mm" file="US08625929-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="158.75mm" wi="186.01mm" file="US08625929-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="250.70mm" wi="164.85mm" orientation="landscape" file="US08625929-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="234.70mm" wi="162.05mm" orientation="landscape" file="US08625929-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="244.77mm" wi="180.59mm" orientation="landscape" file="US08625929-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="147.83mm" wi="151.89mm" file="US08625929-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="179.83mm" wi="182.54mm" file="US08625929-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="256.12mm" wi="168.23mm" orientation="landscape" file="US08625929-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="155.19mm" wi="140.12mm" file="US08625929-20140107-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="156.63mm" wi="182.80mm" file="US08625929-20140107-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="272.46mm" wi="171.03mm" orientation="landscape" file="US08625929-20140107-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00013" num="00013">
<img id="EMI-D00013" he="237.74mm" wi="113.79mm" orientation="landscape" file="US08625929-20140107-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00014" num="00014">
<img id="EMI-D00014" he="156.04mm" wi="188.04mm" file="US08625929-20140107-D00014.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00015" num="00015">
<img id="EMI-D00015" he="240.45mm" wi="180.51mm" orientation="landscape" file="US08625929-20140107-D00015.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">FIELD OF THE INVENTION</heading>
<p id="p-0002" num="0001">The present invention relates to an image processing apparatus and a storage medium.</p>
<heading id="h-0002" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0003" num="0002">To obtain an image with less noise upon picking up a still image in an image pickup apparatus such as a digital camera, it is effective to ensure a sufficient exposure time. However, if the exposure time is extended, there is a problem of blurring an image and making a picked-up image unclear due to a movement of a camera by a camera shake and due to a movement of an object.</p>
<p id="p-0004" num="0003">An electronic blur correction method has been proposed as a method for dealing with such a blur. For example, JP9-261526A discloses a method for obtaining a good blur-free image by performing a synthesizing process after successively performing an image pickup operation in a short exposure time to cause a little blur a plurality of times and performing a position adjustment process so that motions between a plurality of obtained images are canceled.</p>
<p id="p-0005" num="0004">If a synthesizing process is performed in a region where a position adjustment process failed, there is a problem of image blurring or double image. For this problem, a method in which a difference value between corresponding pixels is calculated before an addition process (averaging process) by a synthesizing process and a position adjustment process is judged to have failed and the synthesizing process is not performed when the difference value exceeds a threshold is proposed in JP2002-290817A.</p>
<p id="p-0006" num="0005">Similarly, a method for suppressing the occurrence of a blur and a double image by adjusting a weight of a weighted averaging process in a synthesizing process based on a difference value between corresponding pixels is proposed in JP2008-99260A. By adjusting a synthesis weight by pixel in this way, it is possible to suppress the occurrence of a problem in a region where a position adjustment failed (pixel selection process).</p>
<p id="p-0007" num="0006">However, an SN improvement effect by synthesis varies by pixel in these methods, with the result that an image with varying noise is generated (noise nonuniformity).</p>
<p id="p-0008" num="0007">A method for dealing with this problem is proposed in JP2009-194700A. The method disclosed in JP2009-194700A is described with reference to <figref idref="DRAWINGS">FIG. 15</figref>.</p>
<p id="p-0009" num="0008">An image is picked up by an image pickup device <b>801</b> through an optical system <b>800</b> constructed by a lens or the like and stored in a frame memory <b>802</b>. By repeating the above image pickup process a specified number of times, a plurality of images are stored in the frame memory <b>802</b>. A motion information acquiring unit <b>803</b> detects motion vectors between the plurality of images stored in the frame memory <b>802</b> and outputs the motion vectors as motion information to a synthesizing unit <b>804</b>. The synthesizing unit <b>804</b> additively synthesizes the plurality of images stored in the frame memory <b>802</b> after adjusting the positions thereof using the motion information. In the additive synthesis, a process is performed to exclude pixels unsuitable for synthesis and outputs the process result as synthesis number information together with a synthesized image. A parameter control unit <b>805</b> outputs a noise reduction parameter at each pixel to a noise reducing unit <b>806</b>, considering required noise reduction strength at each pixel from the synthesis number information. The noise reducing unit <b>806</b> performs a noise reduction process on each pixel with the noise reduction parameter designated by the parameter control unit <b>805</b> for the input synthesized image and outputs the resultant to an image processing unit <b>807</b>. The image processing unit <b>807</b> generates an output image by performing necessary image processings such as a color processing and a gradation conversion processing. By changing the noise reduction strength by pixel according to a variation of a synthesis number in this way, it becomes possible to synthesize images while suppressing the occurrence of noise nonuniformity.</p>
<heading id="h-0003" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0010" num="0009">One aspect of the present invention is directed to an image processing apparatus for synthesizing a plurality of images. The image processing apparatus includes a first synthesizing unit that determines one out of a plurality of images as a reference image, determines a first synthesis ratio based on correlation amounts between the reference image and the plurality of images excluding the reference image and synthesizes a first image from the plurality of images based on the first synthesis ratio, a noise reducing unit that reduces noise of at least the first image using a plurality of parameters and generates a plurality of noise-reduced images including at least a noise-reduced first image obtained as a result of reducing noise of the first image, and a second synthesizing unit that determines a second synthesis ratio according to the first synthesis ratio and synthesizes a second image from the plurality of noise-reduced images based on the second synthesis ratio.</p>
<p id="p-0011" num="0010">Another aspect of the present invention is directed to a non-temporary computer-readable storage medium storing an image processing program for processing picked-up images by a computer. The image processing program causes the computer to perform a first synthesizing procedure for determining one out of a plurality of images as a reference image, determining a first synthesis ratio based on correlation amounts between the reference image and the plurality of images excluding the reference image and synthesizing a first image from the plurality of images based on the first synthesis ratio, a noise reducing procedure for reducing noise of at least the first image using a plurality of parameters and generating a plurality of noise-reduced images including at least a noise-reduced first image obtained as a result of reducing noise of the first image, and a second synthesizing procedure for determining a second synthesis ratio according to the first synthesis ratio and synthesizing a second image from the plurality of noise-reduced images based on the second synthesis ratio.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 1</figref> is a schematic construction diagram of an image processing apparatus according to a first embodiment of the present invention.</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 2</figref> is a schematic construction diagram of a second synthesizing unit of the first embodiment.</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 3A</figref> is a graph showing a method for calculating a first synthesis ratio of the first embodiment.</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 3B</figref> is a graph showing a method for calculating a second synthesis ratio of the first embodiment.</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 4</figref> is a diagram showing a modification of the first embodiment.</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 5</figref> is a diagram showing a modification of the first embodiment.</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 6</figref> is a schematic construction diagram of an image processing apparatus according to a second embodiment of the present invention.</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 7</figref> is a schematic construction diagram of a second synthesizing unit of the second embodiment.</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 8A</figref> is a graph showing a method for calculating a first synthesis ratio of the second embodiment.</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 8B</figref> is a graph showing a method for calculating a second synthesis ratio of the second embodiment.</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 8C</figref> is a graph showing a method for calculating a third synthesis ratio of the second embodiment.</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 9</figref> is a schematic construction diagram of an image processing apparatus according to a third embodiment of the present invention.</p>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 10</figref> is a schematic construction diagram of a second synthesizing unit of the third embodiment.</p>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. 11A</figref> is a graph showing a method for calculating a first synthesis ratio of the third embodiment.</p>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. 11B</figref> is a graph showing a method for calculating a second synthesis ratio of the third embodiment.</p>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 12</figref> is a schematic construction diagram of an image processing apparatus according to a fourth embodiment of the present invention.</p>
<p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. 13</figref> is a table showing synthesis ratio information of the fourth embodiment.</p>
<p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. 14A</figref> is a graph showing a method for calculating a first synthesis ratio of the fourth embodiment.</p>
<p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. 14B</figref> is a graph showing a method for calculating a second synthesis ratio of the fourth embodiment.</p>
<p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. 15</figref> is a schematic construction diagram of an image processing apparatus in a conventional example.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DESCRIPTION OF PREFERRED EMBODIMENTS</heading>
<p id="p-0032" num="0031">An image processing apparatus according to a first embodiment of the present invention is described with reference to <figref idref="DRAWINGS">FIG. 1</figref>. <figref idref="DRAWINGS">FIG. 1</figref> is a schematic construction diagram of the image processing apparatus of this embodiment.</p>
<p id="p-0033" num="0032">The image processing apparatus of this embodiment includes an optical system <b>100</b>, an image pickup device <b>101</b>, a frame memory <b>102</b>, a motion information acquiring unit <b>103</b>, a first synthesizing unit <b>104</b>, a first noise reducing unit <b>105</b>, a second noise reducing unit <b>105</b>&#x2032;, a second synthesizing unit <b>107</b> and an image processing unit <b>108</b>.</p>
<p id="p-0034" num="0033">The image pickup device <b>101</b> outputs an electrical signal corresponding to light incident on a light receiving surface via the optical system <b>100</b> constructed by a lens or the like at a predetermined timing. This electrical signal is stored as image data in the frame memory <b>102</b>. By repeating such an image pickup process a specified number of times, a plurality of image data are stored in the frame memory <b>102</b>. Image data is merely treated as an image below.</p>
<p id="p-0035" num="0034">The motion information acquiring unit <b>103</b> detects motion vectors between a plurality of images stored in the frame memory <b>102</b> and output the motion vectors as motion information to the first synthesizing unit <b>104</b>. In this embodiment, the motion information acquiring unit <b>103</b> selects a reference image out of a plurality of images and detects motion vectors between the reference image and the other images.</p>
<p id="p-0036" num="0035">After adjusting the positions of the plurality of images stored in the frame memory <b>102</b> using the motion information for additive synthesis, the first synthesizing unit <b>104</b> normalizes an additive synthesis result according to the number of the added images and outputs the resultant as a synthesized image.</p>
<p id="p-0037" num="0036">The first synthesizing unit <b>104</b> performs a pixel selection process for determining not to use pixels of the other image for synthesis when the absolute value of a difference between a pixel of the reference image and that of the other image is larger than a predetermined value (i.e. when a correlation amount between the pixel of the reference image and that of the other image is small) in additive synthesis. The first synthesizing unit <b>104</b> outputs the number of images synthesized by the first synthesizing unit <b>104</b> at each pixel position of the synthesized image as synthesis number information (first synthesis ratio) to the second synthesizing unit <b>107</b>.</p>
<p id="p-0038" num="0037">The first noise reducing unit <b>105</b> performs a noise reduction process on the reference image based on a first noise reduction parameter (first parameter) and outputs the processed reference image to the second synthesizing unit <b>107</b>. The first noise reduction parameter is a parameter adjusted in advance on the premise of being applied to one reference image, and selected according to the conditions (ISO sensitivity, etc.) at the time of an image pickup process.</p>
<p id="p-0039" num="0038">The second noise reducing unit <b>105</b>&#x2032; performs a noise reduction process on the synthesized image output by the first synthesizing unit <b>104</b> based on a second noise reduction parameter (second parameter) and outputs the processed synthesized image to the second synthesizing unit <b>107</b>. The second noise reduction parameter is a parameter adjusted in advance on the premise that a plurality of images are noise-reduced by being synthesized in the first synthesizing unit <b>104</b>, and selected according to the conditions (ISO sensitivity, etc.) at the time of an image pickup operation similar to the first noise reduction parameter. Since a noise reduction effect by synthesizing the plurality of images in the first synthesizing unit <b>104</b> can be expected, the second noise reduction parameter is a parameter having weaker noise reduction strength than the first noise reduction parameter. Typically, the second noise reduction parameter is set assuming a reduction in noise amount when all the images are synthesized without the pixel selection process being performed in the first synthesizing unit <b>104</b>. For example, in the case of synthesis based on four images, the second noise reduction parameter is set assuming a reduction in noise amount when the absolute values of differences between a pixel of a reference image and those of the other three images are respectively equal to or smaller than the predetermined value and an image is synthesized using all the four images.</p>
<p id="p-0040" num="0039">The first noise reducing unit <b>105</b> and the second noise reducing unit <b>105</b>&#x2032; may be general-purpose noise reducing units. Further, these units need not necessarily perform the same process, but it is preferable to suppress an apparatus size by a technique such as the one for causing these units to perform the same process and using the same process block in a time division manner.</p>
<p id="p-0041" num="0040">Next, the construction of the second synthesizing unit <b>107</b> is shown in <figref idref="DRAWINGS">FIG. 2</figref>.</p>
<p id="p-0042" num="0041">The second synthesizing unit <b>107</b> includes a weighted averaging unit <b>200</b> and a synthesis ratio determining unit <b>201</b>. The second synthesizing unit <b>107</b> further synthesizes an image from the image output from the noise reducing unit <b>105</b> and that output from the second noise reducing unit <b>105</b>&#x2032; based on the synthesis number information.</p>
<p id="p-0043" num="0042">The synthesis ratio determining unit <b>201</b> determines a synthesis ratio (second synthesis ratio) of two output images from the synthesis number information. <figref idref="DRAWINGS">FIGS. 3A</figref>, <b>3</b>B show examples of the synthesis ratio. A first synthesis ratio in <figref idref="DRAWINGS">FIG. 3A</figref> is a synthesis ratio of the output image output from the first noise reducing unit <b>105</b>, and a second synthesis ratio in <figref idref="DRAWINGS">FIG. 3B</figref> is a synthesis ratio of the output image output from the second noise reducing unit <b>105</b>&#x2032;. The synthesis ratio determining unit <b>201</b> maintains relationships as shown in <figref idref="DRAWINGS">FIGS. 3A and 3B</figref> set beforehand by a technique such as broken line approximation or tabulation. In the examples shown in <figref idref="DRAWINGS">FIGS. 3A and 3B</figref>, the synthesis ratio determining unit <b>201</b> outputs a value close to 1.0 as the first synthesis ratio and a value close to 0.0 as the second synthesis ratio at a pixel where the synthesis number is small so that the synthesis ratio of the output image output from the first noise reducing unit <b>105</b> (image obtained by performing the noise reduction process on the reference image with a strong noise reduction parameter) is relatively higher.</p>
<p id="p-0044" num="0043">On the other hand, at a pixel where the synthesis number is large, the synthesis ratio determining unit <b>201</b> outputs a value close to 0.0 as the first synthesis ratio and a value close to 1.0 as the second synthesis ratio so that the synthesis ratio of the output image output from the second noise reducing unit <b>105</b>&#x2032; (image obtained by performing the noise reduction process on the synthesized image generated by the first synthesizing unit <b>104</b> with the second noise reduction parameter which is a weak noise reduction parameter) is relatively higher.</p>
<p id="p-0045" num="0044">In this way, the smaller the synthesis number, the higher the ratio of the noise-reduced reference image in the synthesis ratio determined in the synthesis ratio determining unit <b>201</b>. That is, the higher the ratio of the reference image in the image synthesized in the first synthesizing unit <b>104</b>, the higher the ratio of the noise-reduced reference image in the image to be synthesized in the second synthesizing unit <b>107</b>.</p>
<p id="p-0046" num="0045">Based on these synthesis ratios, the weighted averaging unit <b>200</b> performs a weighted averaging process on the two output images. As a result, a relatively weak noise reduction process is applied to pixels in a region where a position adjustment can be performed without any problem in the first synthesizing unit <b>104</b> and the synthesis number is large.</p>
<p id="p-0047" num="0046">On the other hand, a relatively strong noise reduction process is applied to pixels in a region where the synthesis number is small due to a failure in the position adjustment in the first synthesizing unit <b>104</b>.</p>
<p id="p-0048" num="0047">Necessary image processing such as a color processing and a gradation conversion processing are performed on the image output from the second synthesizing unit <b>107</b> in the image processing unit <b>108</b>.</p>
<p id="p-0049" num="0048">Effects of the first embodiment of the present invention are described.</p>
<p id="p-0050" num="0049">It becomes possible to synthesize images while suppressing the occurrence of noise nonuniformity by changing the noise reduction strength by pixel according to a variation of the synthesis number as in this embodiment. The strengths of the noise reduction parameters (first noise reduction parameter, second noise reduction parameter) used at this time need not be controlled by pixel according to the synthesis number and the same noise reduction parameters can be used at each pixel. Thus, general-purpose noise reduction parameters can be used and a special modification for the noise reduction process is not necessary. As a result, an effect of improving image quality by adopting the general-purpose high-performance noise reduction process and an effect of facilitating the apparatus design by adopting the existing pre-designed noise reduction process can be obtained.</p>
<p id="p-0051" num="0050">In this embodiment, the positions of the images are adjusted by the motion information acquiring unit <b>103</b>. However, if the frame rate at the time of the image pickup operation is sufficiently high, it is also possible to omit the position adjustment process since amounts of change between images are small.</p>
<p id="p-0052" num="0051">In the construction shown in <figref idref="DRAWINGS">FIG. 1</figref>, an image picked up by the image pickup device <b>101</b> is input to the image processing unit <b>108</b> after noise reduction in the first noise reducing unit <b>105</b> and the second noise reducing unit <b>105</b>&#x2032;. Thus, if the image pickup device <b>101</b> is a single-plate image pickup device such as the one with a Bayer array, the noise reduction process also needs to be a process compatible with the single-plate image pickup device. If a noise reduction process desired to be adopted is a process compatible only with an RGB or YCbCr type image pickup device composed of three two-dimensional CCD device(3CCD), the image processing apparatus may be constructed as shown in <figref idref="DRAWINGS">FIG. 4</figref>. In the construction shown in <figref idref="DRAWINGS">FIG. 4</figref>, a single image picked up by an image pickup device <b>101</b> is noise-reduced in a first noise reducing unit <b>301</b> and a second noise reducing unit <b>301</b>&#x2032; after being converted into 3CCD images in image processings in a first image processing unit <b>300</b> and a second image processing unit <b>300</b>&#x2032;. Then, an image is synthesized based on synthesis number information in a second synthesizing unit <b>302</b>.</p>
<p id="p-0053" num="0052">The image processing apparatus may also be constructed as shown in <figref idref="DRAWINGS">FIG. 5</figref>. In the construction shown in <figref idref="DRAWINGS">FIG. 5</figref>, all images picked up by an image pickup device <b>101</b> are stored in a frame memory <b>311</b> after each of them is converted into 3CCD images in an image processing unit <b>310</b>. Then, a position adjustment process in a motion information acquiring unit <b>312</b> and a first synthesizing unit <b>313</b>, a noise reducing process in a first noise reducing unit <b>314</b> and a second noise reduction unit <b>314</b>&#x2032; and a synthesizing process in a second synthesizing unit <b>315</b> are applied to the 3CCD converted images.</p>
<p id="p-0054" num="0053">Next, a second embodiment of the present invention is described with reference to <figref idref="DRAWINGS">FIG. 6</figref>. <figref idref="DRAWINGS">FIG. 6</figref> is a schematic construction diagram of an image pickup apparatus according to this embodiment.</p>
<p id="p-0055" num="0054">In the first embodiment, the noise reduction process corresponding to a variation of the synthesis number is realized using two kinds of parameters having different noise reduction strengths (first noise reduction parameter and second noise reduction parameter). The second embodiment aims to realize a finer control by increasing the number of the kinds of parameters to three. Parts different from the first embodiment are described below.</p>
<p id="p-0056" num="0055">The image pickup apparatus of this embodiment includes a third noise reducing unit <b>105</b>&#x2033; in addition to a first noise reducing unit <b>105</b> and a second noise reducing unit <b>105</b>&#x2032;.</p>
<p id="p-0057" num="0056">The third noise reducing unit <b>105</b>&#x2033; performs a noise reduction process to a synthesized image output by a first synthesizing unit <b>104</b> based on a third noise reduction parameter similar to the second noise reducing unit <b>105</b>&#x2032; and outputs the processed image to a second synthesizing unit <b>400</b>. The third noise reduction parameter is a parameter having noise reduction strength weaker than that of a first noise reduction parameter and stronger than that of the second noise reduction parameter.</p>
<p id="p-0058" num="0057">Typically, the first noise reduction parameter is a parameter adjusted in advance on the premise of being applied to one reference image and the second noise reduction parameter is a parameter set to be weak assuming a reduction in noise amount when all images are synthesized without a pixel selection process being performed in the first synthesizing unit <b>104</b>. The third noise reduction parameter is a parameter having intermediate noise reduction strength between the first noise reduction parameter and the second noise reduction parameter.</p>
<p id="p-0059" num="0058"><figref idref="DRAWINGS">FIG. 7</figref> shows the construction of the second synthesizing unit <b>400</b>.</p>
<p id="p-0060" num="0059">The second synthesizing unit <b>400</b> further synthesizes an image from images output from the first noise reducing unit <b>105</b>, the second noise reducing unit <b>105</b>&#x2032; and the third noise reducing unit <b>105</b>&#x2033; based on synthesis number information output from the first synthesizing unit <b>104</b>.</p>
<p id="p-0061" num="0060">A synthesis ratio determining unit <b>402</b> determines synthesis ratios of the three output images from the synthesis number information. <figref idref="DRAWINGS">FIGS. 8A</figref>, <b>8</b>B and <b>8</b>C show examples of the synthesis ratio. A first synthesis ratio in <figref idref="DRAWINGS">FIG. 8A</figref> is a synthesis ratio of the image output from the first noise reducing unit <b>105</b>, a second synthesis ratio in <figref idref="DRAWINGS">FIG. 8B</figref> is a synthesis ratio of the image output from the second noise reducing unit <b>105</b>&#x2032; and a third synthesis ratio in <figref idref="DRAWINGS">FIG. 8C</figref> is a synthesis ratio of the image output from the third noise reducing unit <b>105</b>&#x2033;. The synthesis ratio determining unit <b>402</b> maintains relationships as shown in <figref idref="DRAWINGS">FIGS. 8A</figref>, <b>8</b>B and <b>8</b>C set beforehand by a technique such as broken line approximation or tabulation.</p>
<p id="p-0062" num="0061">In the examples shown in <figref idref="DRAWINGS">FIGS. 8A</figref>, <b>8</b>B and <b>8</b>C, a value close to 1.0 is output as the first synthesis ratio and values close to 0.0 are output as the second synthesis ratio and the third synthesis ratio at a pixel where the synthesis number is small so that the synthesis ratio of the image output from the first noise reducing unit <b>105</b> (image obtained by performing the noise reduction process on a reference image with a strong noise reduction parameter) is relatively higher.</p>
<p id="p-0063" num="0062">On the other hand, at a pixel where the synthesis number is large, a value close to 1.0 is output as the second synthesis ratio and values close to 0.0 are output as the first synthesis ratio and the third synthesis ratio so that the synthesis ratio of the image output from the second noise reducing unit <b>105</b>&#x2032; (image obtained by performing the noise reduction process on the synthesized image generated by the first synthesizing unit <b>104</b> with a weak noise reduction parameter) is relatively higher.</p>
<p id="p-0064" num="0063">In the case of the intermediate synthesis number, the third synthesis ratio is set at a value close to 1.0 and the first synthesis ratio and the second synthesis ratio are set at values close to 0.0 so as to exhibit an intermediate property.</p>
<p id="p-0065" num="0064">A weighted averaging unit <b>401</b> performs a weighted averaging process on the respective output images based on such synthesis ratios. As a result, a relatively weak noise reduction process is applied to pixels in a region where a position adjustment can be performed without any problem in the first synthesizing unit <b>104</b> and the synthesis number is large.</p>
<p id="p-0066" num="0065">On the other hand, a relatively strong noise reduction process is applied to pixels in a region where the synthesis number is small due to a failure in the position adjustment in the first synthesizing unit <b>104</b>.</p>
<p id="p-0067" num="0066">In the case of the intermediate synthesis number, an intermediate property of these is exhibited.</p>
<p id="p-0068" num="0067">Necessary image processing such as a color processing and a gradation conversion processing are performed on the image output from the second synthesizing unit <b>400</b> in an image processing unit <b>108</b>.</p>
<p id="p-0069" num="0068">Effects of the second embodiment of the present invention are described.</p>
<p id="p-0070" num="0069">The control of the noise reduction strength in response to a variation of the synthesis number becomes finer by increasing the number of the kinds of the noise reduction parameters used from two to three as in this embodiment, and an effect of further improving image quality can be obtained in addition to the effects in the first embodiment.</p>
<p id="p-0071" num="0070">Although two noise reducing units are used as the noise reducing units for reducing the noise of the synthesized image in the second embodiment, the number of the noise reducing units can be set at N (N is a natural number equal to or greater than 2) without being limited to this. It is possible to make the control finer and obtain an image with reduced noise by increasing the number of the noise reducing units.</p>
<p id="p-0072" num="0071">Next, a third embodiment of the present invention is described with reference to <figref idref="DRAWINGS">FIG. 9</figref>. <figref idref="DRAWINGS">FIG. 9</figref> is a schematic construction diagram of an image pickup apparatus according to this embodiment.</p>
<p id="p-0073" num="0072">In the second embodiment, the noise reduction strength corresponding to a variation of the synthesis number is controlled by applying the first noise reduction parameter to the reference image and applying the second noise reduction parameter and the third noise reduction parameter to the synthesized images using the three kinds of parameters (first noise reduction parameter, second noise reduction parameter, third noise reduction parameter) having different noise reduction strengths. On the contrary, in the third embodiment, two kinds of noise reduction parameters are applied only to synthesized images. Parts different from the first and second embodiments are described below.</p>
<p id="p-0074" num="0073">The image pickup apparatus of this embodiment includes a first noise reducing unit <b>501</b> and a second noise reducing units <b>105</b>&#x2032;.</p>
<p id="p-0075" num="0074">A second synthesizing unit <b>500</b> further synthesizes an image from output images output from the first noise reducing unit <b>501</b> and the second noise reducing unit <b>105</b>&#x2032; based on synthesis number information output from a first synthesizing unit <b>104</b>.</p>
<p id="p-0076" num="0075">The first noise reducing unit <b>501</b> performs a noise reduction process on a synthesized image synthesized in the first synthesizing unit <b>104</b> based on a fourth noise reduction parameter and outputs the processed image to the second synthesizing unit <b>500</b>. The fourth noise reduction parameter is a parameter for relatively strengthening noise reduction strength. The fourth noise reduction parameter is a parameter adjusted in advance on the premise of being applied to one reference image. Note that the fourth noise reduction parameter may be a parameter having noise reduction strength stronger than that of a second noise reduction parameter and weaker than a parameter adjusted on the premise of being applied to one reference image.</p>
<p id="p-0077" num="0076"><figref idref="DRAWINGS">FIG. 10</figref> shows the construction of the second synthesizing unit <b>500</b>.</p>
<p id="p-0078" num="0077">The second synthesizing unit <b>500</b> further synthesizes the image from images output from the first noise reducing unit <b>501</b> and the second noise reducing unit <b>105</b>&#x2032; based on the synthesis number information output from the first synthesizing unit <b>104</b>.</p>
<p id="p-0079" num="0078">A synthesis ratio determining unit <b>600</b> determines synthesis ratios of the two output images from the synthesis number information. <figref idref="DRAWINGS">FIGS. 11A and 11B</figref> show examples of the synthesis ratio. A first synthesis ratio in <figref idref="DRAWINGS">FIG. 11A</figref> is a synthesis ratio of the image output from the first noise reducing unit <b>501</b> and a second synthesis ratio in <figref idref="DRAWINGS">FIG. 11B</figref> is a synthesis ratio of the image output from the second noise reducing unit <b>105</b>&#x2032;. The synthesis ratio determining unit <b>600</b> maintains relationships as shown in <figref idref="DRAWINGS">FIGS. 11A and 11B</figref> set beforehand by a technique such as broken line approximation or tabulation.</p>
<p id="p-0080" num="0079">In the examples shown in <figref idref="DRAWINGS">FIGS. 11A and 11B</figref>, a value close to 1.0 is output as the first synthesis ratio and a value close to 0.0 is output as the second synthesis ratio at a pixel where the synthesis number is small so that the synthesis ratio of the image output from the first noise reducing unit <b>501</b> (image obtained by performing a relatively strong noise reduction process on the synthesized image generated by the first synthesizing unit <b>104</b>) is relatively higher.</p>
<p id="p-0081" num="0080">On the other hand, at a pixel where the synthesis number is large, a value close to 1.0 is output as the second synthesis ratio and a value close to 0.0 is output as the first synthesis ratio so that the synthesis ratio of the image output from the second noise reducing unit <b>105</b>&#x2032; (image obtained by performing the noise reduction process on the synthesized image generated by the first synthesizing unit <b>104</b> with a weak noise reduction parameter) is relatively higher.</p>
<p id="p-0082" num="0081">A weighted averaging unit <b>601</b> performs a weighted averaging process on the respective output images based on such synthesis ratios.</p>
<p id="p-0083" num="0082">Necessary image processing such as a color processing and a gradation conversion processing are performed on the image output from the second synthesizing unit <b>500</b> in an image processing unit <b>108</b>.</p>
<p id="p-0084" num="0083">Effects of the third embodiment of the present invention are described.</p>
<p id="p-0085" num="0084">Effects similar to those of the first and second embodiments can be obtained also by preparing a plurality of noise reduction parameters to be used and applying these only to synthesized images as in this embodiment. Further, since the noise reduction process is performed only on the synthesized images, an effect of simplifying a process construction can be obtained.</p>
<p id="p-0086" num="0085">Although the noise reduction process is performed on the synthesized images using the two noise reducing units in the third embodiment, the number of the noise reducing units can be set at N (N is a natural number equal to or greater than 2) without being limited to this. It is possible to make the control finer and obtain an image with reduced noise by increasing the number of the noise reducing units.</p>
<p id="p-0087" num="0086">Next, a fourth embodiment of the present invention is described with reference to <figref idref="DRAWINGS">FIG. 12</figref>. <figref idref="DRAWINGS">FIG. 12</figref> is a schematic construction diagram of an image pickup apparatus according to this embodiment.</p>
<p id="p-0088" num="0087">In the first to third embodiments, the pixel selection process performed in the first synthesizing unit <b>104</b> assumes the method proposed in JP2002-290817A and the like in which method selection is made as to whether or not to synthesize for each pixel of each image and, as a result, the first synthesizing unit <b>104</b> outputs the synthesis number information for each pixel of the synthesized image. In the case of this construction, there is no problem if the maximum number of images to be picked up is determined beforehand, but there is a problem of being unable to determine a bit width for storing the synthesis number information if the maximum number is not determined.</p>
<p id="p-0089" num="0088">Further, there is also a problem that the construction shown in the first embodiment cannot be applied if the pixel selection process adopts the method disclosed in JP2008-99260A or the like in which method weighted average weights are adjusted.</p>
<p id="p-0090" num="0089">Accordingly, in the fourth embodiment, a first synthesizing unit <b>700</b> outputs a cumulative value of weights of a plurality of images excluding a reference image as synthesis ratio information instead of the synthesis number information output by the first synthesizing unit <b>104</b> of the first embodiment. Parts different from the first embodiment are described below.</p>
<p id="p-0091" num="0090"><figref idref="DRAWINGS">FIG. 13</figref> shows a table showing the synthesis ratio information output by the first synthesizing unit <b>700</b>. In this embodiment, it is assumed that four images (images <b>1</b> to <b>4</b>) are picked up and synthesized and the image <b>1</b> is a reference image. Further, three pixels (pixels A to C) out of pixels of each image are described as an example. The weights (synthesis ratios) of the images are set beforehand according to a state of position adjustment and one example is shown in <figref idref="DRAWINGS">FIG. 13</figref>.</p>
<p id="p-0092" num="0091">At a certain pixel A, it is not necessary to perform the pixel selection process and the pixels of the four images are synthesized at an equal ratio (0.25) since the position adjustment was successfully performed. The synthesis ratio information at this time is 0.75 which is a cumulative value of the synthesis ratios of the images <b>2</b> to <b>4</b> excluding the image <b>1</b> as the reference image.</p>
<p id="p-0093" num="0092">At another pixel B, the synthesis ratios of the images <b>1</b> to <b>4</b> are values as shown in <figref idref="DRAWINGS">FIG. 13</figref> if the position adjustment fails in the image <b>4</b>. In this case, the synthesis ratio information is 0.4 which is a cumulative value of the synthesis ratios of the images <b>2</b> to <b>4</b>.</p>
<p id="p-0094" num="0093">At another pixel C, the synthesis ratios of the images <b>2</b> to <b>4</b> are all 0.0 as shown in <figref idref="DRAWINGS">FIG. 13</figref> if all the position adjustments fail. In this case, the synthesis ratio information is 0.0.</p>
<p id="p-0095" num="0094">The second synthesizing unit <b>701</b> determines synthesis ratios from relationships shown in <figref idref="DRAWINGS">FIGS. 14A and 14B</figref> based on the synthesis ratio information output from the first synthesizing unit <b>700</b>. <figref idref="DRAWINGS">FIG. 14A</figref> is a graph showing a relationship between the synthesis ratio information and a first synthesis ratio, and <figref idref="DRAWINGS">FIG. 14B</figref> is a graph showing a relationship between the synthesis ratio information and a second synthesis ratio. In the examples shown in <figref idref="DRAWINGS">FIGS. 14A and 14B</figref>, a value close to 1.0 is output as the first synthesis ratio and a value close to 0.0 is output as the second synthesis ratio at a pixel where the synthesis ratio information is small so that a synthesis ratio of an output image output from a first noise reducing unit <b>105</b> is relatively higher.</p>
<p id="p-0096" num="0095">On the other hand, at a pixel where the synthesis ratio information is large, a value close to 1.0 is output as the second synthesis ratio and a value close to 0.0 is output as the first synthesis ratio so that a synthesis ratio of an output image output from a second noise reducing unit <b>105</b>&#x2032; is relatively higher.</p>
<p id="p-0097" num="0096">Effects of the fourth embodiment of the present invention are described.</p>
<p id="p-0098" num="0097">Since the first synthesizing unit <b>700</b> outputs a cumulative value of the weights of a plurality of images excluding a reference image as synthesis ratio information in this embodiment, the construction shown in the first embodiment can be applied also in the case of adopting the method for adjusting weighted average weights for the pixel selection process.</p>
<p id="p-0099" num="0098">Although the cumulative value of the weights of the plurality of images excluding the reference image is the synthesis ratio information in this embodiment, the weight of the reference image may be the synthesis ratio information. In this case, similar effects can be obtained by horizontally flipping the graphs of <figref idref="DRAWINGS">FIGS. 14A</figref>, <b>14</b>B to appropriately set them.</p>
<p id="p-0100" num="0099">This embodiment is also applicable to the second or third embodiment.</p>
<p id="p-0101" num="0100">Although a hardware process is assumed as the process performed by the image processing apparatus in the description of the above embodiments, limitation to such a construction is not necessary. For example, the process may be alternatively performed by software.</p>
<p id="p-0102" num="0101">In this case, the image processing apparatus includes a CPU, a main storage device such as a RAM and a non-temporary computer-readable storage medium storing a program for realizing the entirety or part of the above process. Here, this program is called an image processing program. The CPU reads the image processing program stored in the above storage medium and performs information processing/arithmetic processing, thereby realizing a process similar to that of the above image pickup device.</p>
<p id="p-0103" num="0102">Here, the non-temporary computer-readable storage medium is a magnetic disc, a magneto-optical disc, a CD-ROM, a DVD-ROM, a semiconductor memory or the like. Further, this image processing program may be delivered to a computer via a communication line and the computer having received this delivery may implement the image processing program.</p>
<p id="p-0104" num="0103">The present invention is not limited to the above embodiments and it goes without saying that various changes and improvements, which can be made without departing from the scope of the technical concept of the present invention, are included.</p>
<p id="p-0105" num="0104">The present application claims a priority based on Japanese Patent Application No. 2010-210959 filed with the Japanese Patent Office on Sep. 21, 2010, all the contents of which are hereby incorporated by reference.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. An image processing apparatus for synthesizing an image from a plurality of images, comprising:
<claim-text>a first synthesizing unit that determines one out of a plurality of images as a reference image, determines a first synthesis ratio based on correlation amounts between the reference image and the plurality of images excluding the reference image and synthesizes a first image from the plurality of images based on the first synthesis ratio;</claim-text>
<claim-text>a noise reducing unit that reduces noise of at least the first image using a plurality of parameters and generates a plurality of noise-reduced images including at least a noise-reduced first image obtained as a result of reducing noise of the first image; and</claim-text>
<claim-text>a second synthesizing unit that determines a second synthesis ratio according to the first synthesis ratio and synthesizes a second image from the plurality of noise-reduced images based on the second synthesis ratio.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The image processing apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein:
<claim-text>the noise reducing unit comprises:</claim-text>
<claim-text>a reference image noise reducing unit that reduces noise of the reference image using the first parameter and generates a noise-reduced reference image, and</claim-text>
<claim-text>a first image noise reducing unit that reduces noise of the first image using a second parameter having lower noise reduction strength than the first parameter and generates the noise-reduced first image;</claim-text>
<claim-text>the second synthesis ratio is a synthesis ratio of the noise-reduced reference image and the noise-reduced first image; and</claim-text>
<claim-text>the second synthesizing unit determines the second synthesis ratio according to the first synthesis ratio and synthesizes the second image from the noise-reduced reference image and the noise-reduced first image based on the second synthesis ratio.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The image processing apparatus according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the second synthesizing unit determines the second synthesis ratio so that a ratio of the noise-reduced reference image increases as a ratio of the reference image in the first synthesis ratio increases.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The image processing apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein:
<claim-text>the noise reducing unit comprises a first image noise reducing unit that reduces noise of the first image using N (N is a natural number equal to or greater than 2) parameters and generates N noise-reduced first images;</claim-text>
<claim-text>the second synthesis ratio is a synthesis ratio in the N noise-reduced first images; and</claim-text>
<claim-text>the second synthesizing unit determines the second synthesis ratio according to the first synthesis ratio and further synthesizes the second image based on the second synthesis ratio.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The image processing apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein:
<claim-text>the noise reducing unit comprises:</claim-text>
<claim-text>a reference image noise reducing unit that reduces noise of the reference image using the first parameter and generates a noise-reduced reference image, and</claim-text>
<claim-text>a first image noise reducing unit that reduces noise of the first image using N (N is a natural number equal to or greater than 2) parameters each having noise reduction strength lower than the first parameter and generates N noise-reduced first images;</claim-text>
<claim-text>the second synthesis ratio is a synthesis ratio of the noise-reduced reference image and the N noise-reduced first images; and</claim-text>
<claim-text>the second synthesizing unit determines the second synthesis ratio according to the first synthesis ratio and synthesizes the second image from the noise-reduced reference image and the N noise-reduced first images based on the second synthesis ratio.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The image processing apparatus according to <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein the second synthesizing unit determines the second synthesis ratio so that a ratio of the noise-reduced reference image increases as a ratio of the reference image in the first synthesis ratio increases.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The image processing apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the first synthesizing unit weights the plurality of images and determines a cumulative value of the weights of the plurality of images excluding the reference image as synthesis ratio information.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The image processing apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the first synthesizing unit weights the plurality of images and determines the weight of the reference image out of the plurality of images as synthesis ratio information.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. A computer-readable storage device storing an image processing program for processing picked-up images by a computer, the image processing program causing the computer to perform:
<claim-text>a first synthesizing procedure for determining one out of a plurality of images as a reference image, determining a first synthesis ratio based on correlation amounts between the reference image and the plurality of images excluding the reference image and synthesizing a first image from the plurality of images based on the first synthesis ratio;</claim-text>
<claim-text>a noise reducing procedure for reducing noise of at least the first image using a plurality of parameters and generating a plurality of noise-reduced images including at least a noise-reduced first image obtained as a result of reducing noise of the first image; and</claim-text>
<claim-text>a second synthesizing procedure for determining a second synthesis ratio according to the first synthesis ratio and synthesizing a second image from the plurality of noise-reduced images based on the second synthesis ratio. </claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
