<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08626884-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08626884</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12833732</doc-number>
<date>20100709</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>CN</country>
<doc-number>2008 1 0003912</doc-number>
<date>20081111</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>171</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>15</main-group>
<subgroup>177</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>709222</main-classification>
<further-classification>709220</further-classification>
<further-classification>709221</further-classification>
<further-classification>709227</further-classification>
<further-classification>709228</further-classification>
<further-classification>370401</further-classification>
<further-classification>370431</further-classification>
</classification-national>
<invention-title id="d2e71">Method for establishing data connection on mobile network, mobile network, and policy control entity</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6621793</doc-number>
<kind>B2</kind>
<name>Widegren et al.</name>
<date>20030900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>3702301</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>2004/0066769</doc-number>
<kind>A1</kind>
<name>Ahmavaara et al.</name>
<date>20040400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370338</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2004/0187021</doc-number>
<kind>A1</kind>
<name>Rasanen</name>
<date>20040900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>713200</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2008/0316972</doc-number>
<kind>A1</kind>
<name>Shaheen</name>
<date>20081200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370331</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2009/0010271</doc-number>
<kind>A1</kind>
<name>Bachmann et al.</name>
<date>20090100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370401</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2009/0215454</doc-number>
<kind>A1</kind>
<name>Przybysz et al.</name>
<date>20090800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>4554351</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>CN</country>
<doc-number>1633202</doc-number>
<kind>A</kind>
<date>20050600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>CN</country>
<doc-number>1665322</doc-number>
<kind>A</kind>
<date>20050900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>CN</country>
<doc-number>1859300</doc-number>
<kind>A</kind>
<date>20061100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>CN</country>
<doc-number>1859336</doc-number>
<kind>A</kind>
<date>20061100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>CN</country>
<doc-number>1881959</doc-number>
<kind>A</kind>
<date>20061200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>CN</country>
<doc-number>1934828</doc-number>
<kind>A</kind>
<date>20070300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>CN</country>
<doc-number>101483928</doc-number>
<kind>B</kind>
<date>20110400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>EP</country>
<doc-number>1 959 695</doc-number>
<kind>A1</kind>
<date>20080800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>ES</country>
<doc-number>2351792</doc-number>
<kind>T3</kind>
<date>20110200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00016">
<document-id>
<country>WO</country>
<doc-number>WO 2004/074967</doc-number>
<kind>A2</kind>
<date>20040900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00017">
<document-id>
<country>WO</country>
<doc-number>WO 2005/062545</doc-number>
<kind>A1</kind>
<date>20050700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00018">
<document-id>
<country>WO</country>
<doc-number>WO 2007/039006</doc-number>
<kind>A1</kind>
<date>20070400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00019">
<document-id>
<country>WO</country>
<doc-number>WO 2007/138407</doc-number>
<kind>A2</kind>
<date>20071200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00020">
<document-id>
<country>WO</country>
<doc-number>WO 2009/089780</doc-number>
<kind>A1</kind>
<date>20090700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00021">
<othercit>3GPP: 3rd Generation Partnership Project (3GPP TS 23.401); Technical Specification Group Services and System Aspects; General Packet Radio Services (GPRS) enhancements for Evolved Universal Terestrial Radio Access Network (E-UTRAN), Release 8 (online) vol. 23.401, No. v8.0.0, pp. 1-167 retrieved from the internet: URL: http://www.3gpp.org/ftp/.</othercit>
</nplcit>
<category>cited by examiner</category>
</us-citation>
<us-citation>
<nplcit num="00022">
<othercit>Office Action issued in corresponding Chinese Patent Application No. 200810003912.9, mailed Dec. 11, 2009.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00023">
<othercit>3<sup>rd </sup>Generation Partnership Project: Technical Specification Group Services and System Aspects; General Packet Radio Service (GPRS) enhancements for Evolved Universal Terrestrial Radio Access Network (E-UTRAN) access (Release 8), Global System for Mobile Communications. 3GPP TS 23.401, V8.0.0. Dec. 2007.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00024">
<othercit>Written Opinion issued in corresponding PCT Patent Application No. PCT/CN2009/070059, mailed Apr. 23, 2009.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00025">
<othercit>Extended European Search Report issued in corresponding European Patent Application No. 09702148.9, mailed Apr. 26, 2011.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00026">
<othercit>3GPP, &#x201c;3<sup>rd </sup>Generation Partnership Project; Technical Specification Group Services and System Aspects; General Packet Radio Service (GPRS) Enhancements for Evolved Universal Terrestrial Radio Access Network (E-UTRAN) Access&#x201d; (Release 8), 3GPP TS 23.401, V8.0.0, Dec. 2007.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00027">
<othercit>3GPP, &#x201c;3<sup>rd </sup>Generation Partnership Project; Technical Specification Group Services and System Aspects; Architecture Enhancements for non-3GPP Accesses&#x201d; (Release 8), 3GPP TS 23.402, V8.0.0, Dec. 2007.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00028">
<othercit>3GPP, &#x201c;3<sup>rd </sup>Generation Partnership Project; Technical Specification Group Services and System Aspects; Policy and Charging Control Architecture&#x201d; (Release 8), 3GPP TS 23.203, V8.0.0, Dec. 2007.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00029">
<othercit>3GPP, &#x201c;3<sup>rd </sup>Generation Partnership Project; Access to Trusted Non-3GPP IP Access Handover with PMIPv6 on S2a and Chained S8a/S2a&#x201d;, 3GPP TS 23.402, V8.0.0, Dec. 2007.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00030">
<othercit>Office Action mailed Feb. 14, 2012, in commonly owned U.S. Appl. No. 13/270,029, filed Oct. 10, 2011.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00031">
<othercit>Office Action issued in corresponding European Patent Application No. 09702148.9, mailed Feb. 6, 2012.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00032">
<othercit>Office Action issued in commonly owned U.S. Appl. No. 13/270,029, mailed Feb. 28, 2013.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>5</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>709220</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709221</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>709222</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>8</number-of-drawing-sheets>
<number-of-figures>10</number-of-figures>
</figures>
<us-related-documents>
<continuation>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>PCT/CN2009/070059</doc-number>
<date>20090107</date>
</document-id>
<parent-status>PENDING</parent-status>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>12833732</doc-number>
</document-id>
</child-doc>
</relation>
</continuation>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20100274878</doc-number>
<kind>A1</kind>
<date>20101028</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Yin</last-name>
<first-name>Yu</first-name>
<address>
<city>Shenzhen</city>
<country>CN</country>
</address>
</addressbook>
<residence>
<country>CN</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Hu</last-name>
<first-name>Ying</first-name>
<address>
<city>Shenzhen</city>
<country>CN</country>
</address>
</addressbook>
<residence>
<country>CN</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Wang</last-name>
<first-name>Shanshan</first-name>
<address>
<city>Shenzhen</city>
<country>CN</country>
</address>
</addressbook>
<residence>
<country>CN</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Yin</last-name>
<first-name>Yu</first-name>
<address>
<city>Shenzhen</city>
<country>CN</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Hu</last-name>
<first-name>Ying</first-name>
<address>
<city>Shenzhen</city>
<country>CN</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Wang</last-name>
<first-name>Shanshan</first-name>
<address>
<city>Shenzhen</city>
<country>CN</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Brinks Gilson &#x26; Lione</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Huawei Technologies Co., Ltd.</orgname>
<role>03</role>
<address>
<city>Shenzhen</city>
<country>CN</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Wang</last-name>
<first-name>Liangche A</first-name>
<department>2447</department>
</primary-examiner>
<assistant-examiner>
<last-name>Ndiaye</last-name>
<first-name>Cheikh</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A method for establishing data connections on a mobile network, a mobile network, and a policy control entity are disclosed. The method includes: establishing a data channel between a user equipment (UE) and a gateway (GW), and allocating an Internet Protocol (IP) address to the UE according to an address allocation request or a data channel setup request sent from the UE; and triggering the policy control entity to establish or update a policy control session according to the IP address. By using the mobile network and the policy control entity under the present invention, after the data channel is established between the UE and the GW, the GW may trigger the policy control entity to establish or update a policy control session.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="100.92mm" wi="159.60mm" file="US08626884-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="192.62mm" wi="159.68mm" file="US08626884-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="223.52mm" wi="169.25mm" file="US08626884-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="215.56mm" wi="138.35mm" orientation="landscape" file="US08626884-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="205.40mm" wi="154.86mm" orientation="landscape" file="US08626884-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="99.23mm" wi="142.16mm" file="US08626884-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="182.54mm" wi="91.52mm" orientation="landscape" file="US08626884-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="177.21mm" wi="92.12mm" orientation="landscape" file="US08626884-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="176.70mm" wi="110.83mm" orientation="landscape" file="US08626884-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This application is a continuation of International Application No. PCT/CN2009/070059, filed on Jan. 7, 2009, which claims priority to Chinese Patent Application No. 200810003912.9, filed on Jan. 11, 2008, both of which are hereby incorporated by reference in their entireties.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">FIELD OF THE INVENTION</heading>
<p id="p-0003" num="0002">The present invention relates to a communications technology, and in particular, to a method for establishing data connections on a mobile network, a mobile network, and a policy control entity.</p>
<heading id="h-0003" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0004" num="0003">On an evolved packet system (EPS) network, user equipment (UE) accesses an evolved packet core (EPC) through a serving gateway (SGW) on a radio access network, and accesses an external packet data network (PDN) through a PDN GW. A policy control entity may dynamically generate a service data policy rule according to service information about the UE, and send the service data policy rule to the PDN GW and the SGW, thus implementing service-level dynamic policy control on the data.</p>
<p id="p-0005" num="0004">In the prior art, the process of establishing a data connection to access a PDN by the UE includes: the SGW forwards a connection setup message sent from the UE to a PDN GW that corresponds to the PDN; the PDN GW returns a connection setup ACK to the SGW; the SGW returns a response indicating the completion of data connection setup to the UE.</p>
<p id="p-0006" num="0005">The SGW may be a network element (NE) where a control plane and a user plane are separated or integrated. For example, the SGW may be a mobility management entity (MME) or a GW on the EPS network, or an integrated serving GPRS support node (SGSN) on a third generation (3G) network.</p>
<p id="p-0007" num="0006">During the implementation of the present invention, the inventor discovers the following problems in the prior art: When the UE accesses the core network for the first time, the UE may not request the allocation of an Internet Protocol (IP) address but requests only the setup of a data channel. If the network needs to implement policy control, the prior policy control procedures related to the EPS network data connection are not applicable to scenarios where no IP connection is established for the data channel between the UE and the PDN GW. This is because the prior policy control session is connected over IP. In addition, for the mobility management protocol between GWs, the prior art is applicable to only the GPRS Tunneling Protocol (GTP) not requiring an IP address and is inapplicable to the mobile IP protocol.</p>
<heading id="h-0004" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0008" num="0007">Embodiments of the present invention provide a method for establishing data connections on a mobile network, a mobile network, and a policy control entity. Thus, after a data channel is established between a UE and a GW, the GW triggers the policy control entity to establish or update a policy control session.</p>
<p id="p-0009" num="0008">The technical solution of the present invention is as follows:</p>
<p id="p-0010" num="0009">A method for establishing data connections on a mobile network includes:
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0000">
    <ul id="ul0002" list-style="none">
        <li id="ul0002-0001" num="0010">establishing a data channel between a UE and a GW;</li>
        <li id="ul0002-0002" num="0011">allocating an IP address to the UE according to an address allocation request or a data channel setup request sent from the UE; and</li>
        <li id="ul0002-0003" num="0012">sending a policy control session setup or update request carrying the IP address to a policy control entity so that the policy control entity establishes or updates a policy control session according to the policy control session setup or update request.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0011" num="0013">A policy control entity includes:
<ul id="ul0003" list-style="none">
    <li id="ul0003-0001" num="0000">
    <ul id="ul0004" list-style="none">
        <li id="ul0004-0001" num="0014">a receiving unit, configured to receive a policy control session setup or update request carrying a data channel ID from a GW;</li>
        <li id="ul0004-0002" num="0015">an establishing unit, configured to establish a policy control session according to the data channel ID carried in the policy control session setup request; and</li>
        <li id="ul0004-0003" num="0016">an updating unit, configured to update an IP address and a policy control rule of the policy control session according to the policy control session update request.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0012" num="0017">A mobile network includes:
<ul id="ul0005" list-style="none">
    <li id="ul0005-0001" num="0000">
    <ul id="ul0006" list-style="none">
        <li id="ul0006-0001" num="0018">a GW, configured to: establish a data channel with a UE, allocate an IP address to the UE according to an address allocation request or a data channel setup request sent from the UE, and send a policy control session setup or update request carrying the IP address to a policy control entity; and</li>
        <li id="ul0006-0002" num="0019">the policy control entity, configured to establish or update a policy control session according to the policy control session setup or update request.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0013" num="0020">By using the method for establishing data connections on a mobile network, the mobile network, and the policy control entity provided in embodiments of the present invention, after a data channel is established between the UE and the GW, the GW triggers the policy control entity to establish or update the policy control session. When the UE obtains an IP address through the PDN GW, the PDN GW establishes or updates the policy control session; or when the UE obtains an IP address through the SGW, the SGW establishes a mobile IP connection with the PDN GW and then establishes or updates the policy control session. In embodiments of the present invention, the policy control can still be implemented when the UE does not request the allocation of an IP address. Thus, embodiments of the present invention are applicable to the GTP protocol and the mobile IP protocol.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0014" num="0021"><figref idref="DRAWINGS">FIG. 1</figref> shows network architecture that supports service-level dynamic policy control on a next generation mobile communication network;</p>
<p id="p-0015" num="0022"><figref idref="DRAWINGS">FIG. 2</figref> is a flowchart of a method for establishing a data connection in an embodiment of the present invention;</p>
<p id="p-0016" num="0023"><figref idref="DRAWINGS">FIG. 3</figref> is a schematic diagram illustrating a process of establishing a data connection in Embodiment 1 of the present invention;</p>
<p id="p-0017" num="0024"><figref idref="DRAWINGS">FIG. 4</figref> is a schematic diagram illustrating a process of establishing a data connection in Embodiment 2 of the present invention;</p>
<p id="p-0018" num="0025"><figref idref="DRAWINGS">FIG. 5</figref> is a schematic diagram illustrating a process of establishing a data connection in Embodiment 3 of the present invention;</p>
<p id="p-0019" num="0026"><figref idref="DRAWINGS">FIG. 6</figref> is a schematic diagram illustrating a process of establishing a data connection in Embodiment 4 of the present invention;</p>
<p id="p-0020" num="0027"><figref idref="DRAWINGS">FIG. 7</figref> shows architecture of a mobile network in an embodiment of the present invention;</p>
<p id="p-0021" num="0028"><figref idref="DRAWINGS">FIG. 8</figref> shows a structure of a mobile network in Embodiment 4 of the present invention;</p>
<p id="p-0022" num="0029"><figref idref="DRAWINGS">FIG. 9</figref> shows a structure of a mobile network in Embodiment 5 of the present invention; and</p>
<p id="p-0023" num="0030"><figref idref="DRAWINGS">FIG. 10</figref> shows a structure of a mobile network in Embodiment 6 of the present invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0006" level="1">DETAILED DESCRIPTION OF THE INVENTION</heading>
<p id="p-0024" num="0031">Embodiments of the present invention provide a method for establishing data connections on a mobile network, a mobile network, and a policy control entity. Thus, after a data channel is established between the UE and the GW, the GW triggers the policy control entity to establish or update the policy control session. For better understanding of the objective, technical solution and merits of the present invention, the following describes the present invention in detail with reference to the accompanying drawings and exemplary embodiments.</p>
<p id="p-0025" num="0032"><figref idref="DRAWINGS">FIG. 1</figref> shows network architecture that supports service-level dynamic policy control on a next generation mobile communication network. <figref idref="DRAWINGS">FIG. 2</figref> is a flowchart of a method for establishing data connections in an embodiment of the present invention. The method includes the following steps:</p>
<p id="p-0026" num="0033">Step <b>201</b>: A data channel is established between the UE and the GW.</p>
<p id="p-0027" num="0034">Step <b>202</b>: The GW allocates an IP address to the UE according to an address allocation request sent from the UE.</p>
<p id="p-0028" num="0035">Step <b>203</b>: The GW triggers the policy control entity to establish or update the policy control session according to the IP address.</p>
<p id="p-0029" num="0036">In step <b>201</b>, the process of establishing a data channel between the UE and the GW may include: establishing a data channel between the UE and the PDN GW; or establishing a data channel between the UE and the SGW. The UE sends an IP address allocation request, for example, a Dynamic Host Control Protocol (DHCP) message, to request the allocation of an IP address for accessing the PDN. The PDN GW sends an IP address allocation response that carries the allocated IP address.</p>
<p id="p-0030" num="0037">In step <b>202</b>, the process of triggering the policy control entity to establish or update the policy control session by the GW according to the IP address may include: establishing a policy control session between the PDN GW and the policy control entity; or establishing a policy control session between the SGW and the policy control entity; or establishing a policy control session between the PDN GW or the SGW and the policy control entity, and then updating the policy control rule by the policy control entity according to the allocated IP address.</p>
<p id="p-0031" num="0038"><figref idref="DRAWINGS">FIG. 3</figref> is a schematic diagram illustrating a process of establishing a data connection in Embodiment 1 of the present invention. The process includes the following steps:</p>
<p id="p-0032" num="0039">Step <b>301</b>: A UE establishes a data channel with a PDN GW, for example, an attach connection with the UE. The UE does not request the allocation of an IP address in the attach request. The network establishes a GTP bearer by using the GTP mobility management protocol. In the connection setup process, the U E obtains the connection related configuration information that may include a bearer control mode.</p>
<p id="p-0033" num="0040">Step <b>302</b>: The UE sends an address allocation request (for example, a DHCP request) to the PDN GW, requesting the allocation of an IP address for accessing the PDN. The PDN GW allocates the address according to the address allocation request, including allocating the IP address by the PDN GW itself or allocating the IP address to the UE through other servers or GWs.</p>
<p id="p-0034" num="0041">Step <b>303</b>: The PDN GW sends an address allocation response that carries the allocated IP address to the UE. In addition, the address allocation response may carry the PDN configuration information, including a domain name service (DNS) address, a proxy-call session control function (P-CSCF) address, and an application server address.</p>
<p id="p-0035" num="0042">Step <b>304</b>: The PDN GW sends a policy control session setup request to a policy control entity according to the IP address, requesting to establish a policy control session of this IP connection.</p>
<p id="p-0036" num="0043">Step <b>305</b>: The policy control entity establishes a policy control session according to the IP address carried in the policy control session setup request.</p>
<p id="p-0037" num="0044">In step <b>305</b>, the policy control entity may also send the policy control rule of the IP connection to the PDN GW.</p>
<p id="p-0038" num="0045">Step <b>303</b> may be executed before or after step <b>304</b>. Step <b>303</b> is optional.</p>
<p id="p-0039" num="0046"><figref idref="DRAWINGS">FIG. 4</figref> is a schematic diagram illustrating a process of establishing a data connection in Embodiment 2 of the present invention. The process includes the following steps:</p>
<p id="p-0040" num="0047">Step <b>401</b>: A UE establishes a data channel with a PDN GW. The PDN GW establishes a policy control session a policy control entity. The PDN GW provides the policy control entity with a data channel ID. The data channel ID includes a UE ID and an ID that is used for accessing the PDN. The policy control entity may send related policy control rule information to the PDN GW. The policy control rule information may be used for establishing a data channel, for example, reserving bandwidth resources for the data channel. In the data connection setup process, the UE may also obtain the connection related configuration information from the PDN GW, for example, the bearer control mode.</p>
<p id="p-0041" num="0048">Step <b>402</b>: The UE sends an address allocation request, requesting the allocation of an IP address for accessing the PDN. After receiving the request, the PDN GW allocates an IP address to the UE, including allocating an IP address by the PDN GW itself or forwarding the request to other servers or GWs.</p>
<p id="p-0042" num="0049">Step <b>403</b>: The PDN GW sends an address allocation response that carries the allocated IP address. In addition, the address allocation response may carry the PDN configuration information, including a DNS server address, a P-CSCF address, and an application server address.</p>
<p id="p-0043" num="0050">Step <b>404</b>: The PDN GW sends a policy control session update request that carries the UE IP address and data channel ID to the policy control entity.</p>
<p id="p-0044" num="0051">Step <b>405</b>: The policy control entity may associate the data channel ID with a previously established policy control session to update the IP address of the policy control session. The policy control entity may also update the policy control rule, including provision of data packet filter and distribution information according to the IP address. Then, the policy control entity sends the updated policy control rule to the PDN GW.</p>
<p id="p-0045" num="0052">Step <b>403</b> may be executed before or after step <b>404</b>. Step <b>403</b> is optional.</p>
<p id="p-0046" num="0053">In the preceding process, the UE accesses the same PDN. In step <b>401</b>, no IP address is allocated to the UE, but an IP address is allocated to the UE in step <b>402</b> and step <b>403</b>.</p>
<p id="p-0047" num="0054"><figref idref="DRAWINGS">FIG. 5</figref> is a schematic diagram illustrating a process of establishing a data connection in Embodiment 3 of the present invention. The process includes the following steps:</p>
<p id="p-0048" num="0055">Step <b>501</b>: A UE establishes a data channel with an SGW. The SGW may also provide a policy control entity with a data channel ID, and establish a policy control session with the policy control entity to implement policy control on the data channel between the UE and the SGW. The data channel ID includes a UE ID and an ID that is used for accessing the PDN. In the data connection setup process, the UE may also obtain the connection related configuration information from the SGW, for example, the bearer control mode.</p>
<p id="p-0049" num="0056">Step <b>502</b>: The UE sends an address allocation request to the SGW, requesting the allocation of an IP address for accessing the PDN.</p>
<p id="p-0050" num="0057">Step <b>503</b>: The SGW sends a connection setup request, for example, a proxy mobile IP (PMIP) binding update request, requesting the PDN GW to establish an IP connection for the UE to access the PDN. The PDN GW allocates an IP address, including allocating an IP address by the PDN GW itself or through other servers and GWs.</p>
<p id="p-0051" num="0058">Step <b>504</b>: To establish a policy control session of the IP connection with the policy control entity, the PDN GW needs to obtain a related policy control rule.</p>
<p id="p-0052" num="0059">Step <b>505</b>: The PDN GW sends a connection setup ACK to the SGW, where the connection setup ACK includes an address allocation response that carries the allocated IP address. In addition, the connection setup ACK may carry the PDN configuration information sent to the UE, including a DNS server address, a P-CSCF address, and an application server address.</p>
<p id="p-0053" num="0060">Step <b>506</b>: If necessary, the SGW may initiate a process of updating or establishing the policy control session of the IP connection to the policy control entity, including providing the policy control entity with the connected IP address and the data channel ID.</p>
<p id="p-0054" num="0061">Step <b>507</b>: The SGW sends an address allocation response that carries the allocated IP address to the UE. In addition, the address allocation response may carry the PDN configuration information, including a DNS server address, a P-CSCF address, and an application server address.</p>
<p id="p-0055" num="0062">Step <b>506</b> may be executed before or after step <b>507</b>. Step <b>507</b> is optional. In addition, if the SGW already establishes a session with the policy control entity in step <b>501</b>, the policy control entity may also initiate a request for updating the policy control rule to the SGW after receiving the IP address in step <b>504</b>. If the SGW does not establish a session with the policy control entity in step <b>501</b>, the PDN GW may establish a policy control session of the IP connection with the policy control entity after the PDN GW establishes an IP connection for the UE to access the PDN. For details, see the description in Embodiment 1 of the present invention.</p>
<p id="p-0056" num="0063"><figref idref="DRAWINGS">FIG. 6</figref> is a schematic diagram illustrating a process of establishing a data connection in Embodiment 4 of the present invention. The process includes the following steps:</p>
<p id="p-0057" num="0064">Step <b>601</b>: A UE sends a data channel setup request to an SGW, for example, an attach request, where the data channel setup request does not request the allocation of an IP address.</p>
<p id="p-0058" num="0065">Step <b>602</b>: The SGW sends a data channel setup request to the PDN GW, for example, a PMIP binding update request or a GTP create session request. The PDN GW establishes an IP connection for the UE to access the PDN according to the data channel setup request. The PDN GW allocates an IP address, including allocating an IP address by the PDN GW itself or through other servers and GWs.</p>
<p id="p-0059" num="0066">Step <b>603</b>: To establish a policy control session of the IP connection with a policy control entity, the PDN GW needs to obtain a related policy control rule.</p>
<p id="p-0060" num="0067">Step <b>604</b>: The PDN GW sends a data channel setup ACK to the SGW, where the data channel setup ACK includes an address allocation response that carries the allocated IP address. In addition, the data channel setup ACK may carry the PDN configuration information sent to the UE, including a DNS server address, a P-CSCF address, and an application server address.</p>
<p id="p-0061" num="0068">Step <b>605</b>: If necessary, the SGW may initiate a process of establishing a policy control session of the IP connection to the policy control entity, including providing the policy control entity with the connected IP address.</p>
<p id="p-0062" num="0069">Step <b>606</b>: The SGW sends a data channel setup ACK to the UE, for example, an attach complete message, where the data channel setup ACK does not carry the IP address allocated to the UE.</p>
<p id="p-0063" num="0070">Step <b>607</b>: The UE sends an address allocation request to the SGW or the PDN GW, requesting the allocation of an IP address.</p>
<p id="p-0064" num="0071">Step <b>608</b>: The SGW or the PDN GW sends an address allocation response that carries the allocated IP address to the UE. In addition, the address allocation response may carry the PDN configuration information, including a DNS server address, a P-CSCF address, and an application server address.</p>
<p id="p-0065" num="0072">If step <b>603</b> is omitted in the preceding process, the PDN GW does not establish a policy control session with the policy control entity.</p>
<p id="p-0066" num="0073">It is understandable to those skilled in the art that all or part of the steps in the methods according to the preceding embodiments may be performed by hardware instructed by a program. The program may be stored in a computer readable storage medium, such as a read-only memory/random access memory (ROM/RAM), a magnetic disk, and a compact disk.</p>
<p id="p-0067" num="0074"><figref idref="DRAWINGS">FIG. 7</figref> shows architecture of a mobile network in an embodiment of the present invention. The mobile network includes a UE <b>710</b>, a GW <b>720</b>, and a policy control entity <b>730</b>.</p>
<p id="p-0068" num="0075">The GW <b>720</b> is configured to: establish a data channel with the UE <b>710</b>, and allocate an IP address to the UE according to the address allocation request or data channel setup request sent from the UE <b>710</b>.</p>
<p id="p-0069" num="0076">The policy control entity <b>730</b> is configured to establish or update a policy control session according to the IP address provided by the GW <b>720</b>.</p>
<p id="p-0070" num="0077">Specifically, the GW <b>720</b> includes a PDN GW and an SGW.</p>
<p id="p-0071" num="0078"><figref idref="DRAWINGS">FIG. 8</figref> shows a structure of a mobile network in Embodiment 4 of the present invention. The mobile network includes a UE <b>810</b>, a PDN GW <b>820</b>, a policy control entity <b>830</b>, and an SGW.</p>
<p id="p-0072" num="0079">The PDN GW <b>820</b> includes:
<ul id="ul0007" list-style="none">
    <li id="ul0007-0001" num="0000">
    <ul id="ul0008" list-style="none">
        <li id="ul0008-0001" num="0080">a first allocating unit <b>821</b>, configured to allocate an IP address to the UE <b>810</b> according to the address allocation request or the data channel setup request sent from the UE <b>810</b>, where the data channel setup request does not request the allocation of an IP address; and</li>
        <li id="ul0008-0002" num="0081">a first sending unit <b>822</b>, configured to send a policy control session setup request that carries the IP address allocated to the UE <b>810</b> to the policy control entity <b>830</b> according to the IP address allocated by the first allocating unit <b>821</b>.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0073" num="0082">The first sending unit <b>822</b> of the PDN GW is further configured to send a data channel setup ACK to the SGW. The data channel setup ACK includes an address allocation response that carries the allocated IP address to the SGW.</p>
<p id="p-0074" num="0083">The SGW includes:
<ul id="ul0009" list-style="none">
    <li id="ul0009-0001" num="0000">
    <ul id="ul0010" list-style="none">
        <li id="ul0010-0001" num="0084">a sending unit, configured to send a policy control session setup request that carries the IP address to the policy control entity according to the IP address carried in the data channel setup ACK.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0075" num="0085">The policy control entity <b>830</b> includes:
<ul id="ul0011" list-style="none">
    <li id="ul0011-0001" num="0000">
    <ul id="ul0012" list-style="none">
        <li id="ul0012-0001" num="0086">a receiving unit <b>831</b>, configured to receive a policy control session setup request from the PDN GW <b>820</b> and/or the SGW; and</li>
        <li id="ul0012-0002" num="0087">an establishing unit <b>832</b>, configured to establish a policy control session according to the IP address that is allocated to the UE <b>810</b> and carried in the policy control session request.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0076" num="0088">The first sending unit <b>822</b> of the PDN GW is further configured to send an address allocation response that carries the allocated IP address to the UE <b>810</b>.</p>
<p id="p-0077" num="0089">The address allocation response may further carry the PDN configuration information, including a DNS server address, a P-CSCF address, and an application server address.</p>
<p id="p-0078" num="0090"><figref idref="DRAWINGS">FIG. 9</figref> shows a structure of a mobile network in Embodiment 5 of the present invention. The mobile network includes a UE <b>910</b>, a PDN GW <b>920</b>, and a policy control entity <b>930</b>.</p>
<p id="p-0079" num="0091">The PDN GW <b>920</b> includes:
<ul id="ul0013" list-style="none">
    <li id="ul0013-0001" num="0000">
    <ul id="ul0014" list-style="none">
        <li id="ul0014-0001" num="0092">a second sending unit <b>922</b>, configured to send a policy control session setup request that carries a data channel ID to the policy control entity <b>930</b>, where the data channel ID includes a UE ID and an ID that is used for accessing the PDN.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0080" num="0093">The policy control entity <b>930</b> includes:
<ul id="ul0015" list-style="none">
    <li id="ul0015-0001" num="0000">
    <ul id="ul0016" list-style="none">
        <li id="ul0016-0001" num="0094">a receiving unit <b>931</b>, configured to receive a policy control session setup request from the PDN GW <b>920</b>; and an establishing unit <b>932</b>, configured to establish a policy control session according to the data channel ID carried in the policy control session request.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0081" num="0095">The PDN GW <b>920</b> may further include:
<ul id="ul0017" list-style="none">
    <li id="ul0017-0001" num="0000">
    <ul id="ul0018" list-style="none">
        <li id="ul0018-0001" num="0096">a second allocating unit <b>921</b>, configured to allocate an IP address to the UE <b>910</b> according to the address allocation request sent from the UE <b>910</b>.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0082" num="0097">The second sending unit <b>922</b> is further configured to send a policy control session update request that carries the IP address to the policy control entity <b>930</b> according to the IP address allocated by the second allocating unit <b>921</b>.</p>
<p id="p-0083" num="0098">The policy control entity <b>930</b> may further include an updating unit <b>933</b>.</p>
<p id="p-0084" num="0099">The receiving unit <b>931</b> is further configured to receive a policy control session update request that carries the IP address allocated to the UE <b>910</b> and the data channel ID sent from the PDN GW <b>920</b>.</p>
<p id="p-0085" num="0100">The updating unit <b>933</b> is configured to: associate the data channel ID with a previously established policy control session, and update the IP address and the policy control rule of the policy control session.</p>
<p id="p-0086" num="0101">The policy control entity <b>930</b> may further include a sending unit configured to send the updated policy control rule to the PDN GW <b>920</b>.</p>
<p id="p-0087" num="0102">The second sending unit <b>922</b> is further configured to send an address allocation response that carries the allocated IP address to the UE <b>910</b>.</p>
<p id="p-0088" num="0103">The address allocation response may further carry the PDN configuration information, including a DNS server address, a P-CSCF address, and an application server address.</p>
<p id="p-0089" num="0104"><figref idref="DRAWINGS">FIG. 10</figref> shows a structure of a mobile network in Embodiment 6 of the present invention. The mobile network includes a UE <b>1010</b>, an SGW <b>1000</b>, a PDN GW <b>1020</b>, and a policy control entity <b>1030</b>.</p>
<p id="p-0090" num="0105">The SGW <b>1000</b> includes a sending unit <b>1001</b> configured to send a policy control session setup request that carries a data channel ID to the policy control entity <b>1030</b>.</p>
<p id="p-0091" num="0106">The policy control entity <b>1030</b> includes: a receiving unit <b>1031</b>, configured to receive a policy control session setup request from the SGW <b>1000</b>; and an establishing unit <b>1032</b>, configured to establish a policy control session according to the data channel ID carried in the policy control session request.</p>
<p id="p-0092" num="0107">The sending unit <b>1001</b> of the SGW is further configured to send a connection setup request sent from the UE <b>910</b> to the PDN GW <b>1020</b>.</p>
<p id="p-0093" num="0108">The PDN GW <b>1020</b> includes: a third allocating unit <b>1021</b>, configured to allocate an IP address to the UE <b>1010</b> according to the connection setup request; and a third sending unit <b>1022</b>, configured to send a policy control session update request that carries the IP address to the policy control entity <b>1030</b>.</p>
<p id="p-0094" num="0109">The receiving unit <b>1031</b> of the policy control entity <b>1030</b> is further configured to receive a policy control session update request that carries the IP address allocated to the UE <b>1010</b> and the data channel ID from the PDN GW <b>1020</b>. The policy control entity <b>1030</b> further includes: an updating unit <b>1033</b>, configured to associate the data channel ID with a previously established policy control session, and update the IP address and the policy control rule of the policy control session; and a sending unit, configured to send the updated policy control rule to the PDN GW <b>1020</b> and the SGW <b>1000</b> according to the IP address carried in the policy control session update request.</p>
<p id="p-0095" num="0110">The third sending unit <b>1022</b> of the PDN GW is further configured to send a connection setup ACK that includes an address allocation response carrying the allocated IP address to the SGW <b>1000</b>. The sending unit <b>1001</b> of the SGW is configured to send the address allocation response that carries the IP address to the UE <b>1010</b>.</p>
<p id="p-0096" num="0111">The sending unit <b>1001</b> of the SGW is further configured to send a policy control session update request that carries the IP address and the data channel ID to the policy control entity <b>1030</b>. The updating unit <b>1033</b> of the policy control entity is further configured to update the policy control rule corresponding to the data channel ID according to the IP address carried in the policy control session update request, and send the updated policy control rule to the SGW <b>1000</b> through the sending unit. The address allocation response may further carry the PDN configuration information, including a DNS server address, a P-CSCF address, and an application server address.</p>
<p id="p-0097" num="0112">As shown in <figref idref="DRAWINGS">FIG. 8</figref>, a policy control entity provided in Embodiment 7 of the present invention includes a receiving unit <b>831</b> and an establishing unit <b>832</b>.</p>
<p id="p-0098" num="0113">The receiving unit <b>831</b> is configured to receive a policy control session setup request that carries a data channel ID from the GW.</p>
<p id="p-0099" num="0114">The establishing unit <b>832</b> is configured to establish a policy control session according to the data channel ID carried in the policy control session request.</p>
<p id="p-0100" num="0115">As shown in <figref idref="DRAWINGS">FIG. 9</figref>, a policy control entity provided in Embodiment 8 of the present invention includes a receiving unit <b>931</b>, an establishing unit <b>932</b>, and an updating unit <b>933</b>.</p>
<p id="p-0101" num="0116">The receiving unit <b>931</b> is configured to receive a policy control session setup request that carries a data channel ID sent from the GW, and receive a policy control session update request that carries an IP address allocated to the UE and a data channel ID sent from the GW.</p>
<p id="p-0102" num="0117">The establishing unit <b>932</b> is configured to establish a policy control session according to the data channel ID carried in the policy control session request.</p>
<p id="p-0103" num="0118">The updating unit <b>933</b> is configured to: associate the data channel ID with a previously established policy control session, and update the IP address of the policy control session and the policy control rule.</p>
<p id="p-0104" num="0119">In addition, the policy control entity may include a sending unit configured to send an initial policy control rule and an updated policy control rule to the GW.</p>
<p id="p-0105" num="0120">Thus, by using the method for establishing data connections, the mobile network, and the policy control entity provided in embodiments of the present invention, after a data channel is established between the UE and the GW, the GW triggers the policy control entity to establish or update the policy control session. When the UE obtains an IP address through the PDN GW, the PDN GW establishes or updates the policy control session; or when the UE obtains an IP address through the SGW, the SGW establishes a mobile IP connection with the PDN GW and then establishes or updates the policy control session. In embodiments of the present invention, the policy control can still be implemented when the UE does not request the allocation of an IP address. Thus, embodiments of the present invention are applicable to the GTP protocol and the mobile IP protocol.</p>
<p id="p-0106" num="0121">Detailed above are a method for establishing data connections, a mobile network, and a policy control entity under the present invention. Although the invention is described through several exemplary embodiments, the invention is not limited to such embodiments. It is apparent that those skilled in the art can make various modifications and variations to the invention without departing from the scope of the invention. The invention shall cover the modifications and variations provided that they fall within the scope of protection defined by the following claims or their equivalents.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method for establishing data connections on a mobile network, comprising:
<claim-text>establishing a data channel between a user equipment (UE) and a packet data network (PDN) gateway (GW); wherein during the establishing the data channel, the UE does not request an IP address allocation;</claim-text>
<claim-text>establishing, by a policy control entity, a policy control session with the PDN GW according to a data channel ID provided by the PDN GW, wherein the policy control session is used to implement policy control on the data channel, and the data channel ID is used to identify the established data channel between the UE and the PDN GW;</claim-text>
<claim-text>after the data channel is established, allocating, by the PDN GW, an Internet Protocol (IP) address for the UE to access the PDN according to an address allocation request sent from the UE;</claim-text>
<claim-text>sending, by the PDN GW, a policy control session update request carrying the IP address to the policy control entity; and</claim-text>
<claim-text>updating, by the policy control entity, a policy control rule corresponding to the policy control session with the PDN GW according to the IP address carried in the policy control session update request.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the data channel ID comprises a UE ID or an ID that is used for accessing the PDN.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. A mobile network, comprising:
<claim-text>a packet data network (PDN) gateway (GW) configured to</claim-text>
<claim-text>establish a data channel between a user equipment (UE) and the PDN GW, wherein during the establishing the data channel, the UE does not request an IP address allocation,</claim-text>
<claim-text>allocate an Internet Protocol (IP) address to the UE to access the PDN according to an address allocation request sent from the UE after the data channel is established, and</claim-text>
<claim-text>send a policy control session update request that carries the IP address to a policy control entity; and</claim-text>
<claim-text>the policy control entity, configured to</claim-text>
<claim-text>establish a policy control session with the PDN GW according to a data channel ID provided by the PDN GW, wherein the policy control session is used to implement policy control on the data channel, and the data channel ID is used to identify the established data channel between the UE and the PDN GW; and</claim-text>
<claim-text>update a policy rule corresponding to the policy control session with the PDN GW according to the IP address carried in the policy control session update request.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the policy control session update request further carries the data channel ID, the method comprising:
<claim-text>associating, by the policy control entity, the data channel ID with the established policy control session; and</claim-text>
<claim-text>updating, by the policy control entity, the IP address of the policy control session.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The mobile network of <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein the policy control session update request carries the data channel ID, the policy control entity configured to: associate the data channel ID with the established policy control session, and update the IP address of the policy control session.</claim-text>
</claim>
</claims>
</us-patent-grant>
