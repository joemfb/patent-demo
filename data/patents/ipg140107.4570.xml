<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625657-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625657</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12593944</doc-number>
<date>20070402</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<us-term-of-grant>
<us-term-extension>789</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20110101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>B</subclass>
<main-group>1</main-group>
<subgroup>7075</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20110101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>B</subclass>
<main-group>1</main-group>
<subgroup>7085</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>375150</main-classification>
<further-classification>375149</further-classification>
</classification-national>
<invention-title id="d2e53">Methods, apparatuses and computer program products for code correlation of multi-path spread spectrum signals</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5347536</doc-number>
<kind>A</kind>
<name>Meehan</name>
<date>19940900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
<classification-national><country>US</country><main-classification>375  1</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>5495499</doc-number>
<kind>A</kind>
<name>Fenton et al.</name>
<date>19960200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
<classification-national><country>US</country><main-classification>375205</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>5809064</doc-number>
<kind>A</kind>
<name>Fenton et al.</name>
<date>19980900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
<classification-national><country>US</country><main-classification>375208</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>5903597</doc-number>
<kind>A</kind>
<name>Pon</name>
<date>19990500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>375150</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>6198765</doc-number>
<kind>B1</kind>
<name>Cahn et al.</name>
<date>20010300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>375142</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>6463091</doc-number>
<kind>B1</kind>
<name>Zhodzicshsky et al.</name>
<date>20021000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>375149</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>6493378</doc-number>
<kind>B1</kind>
<name>Zhodzishsky et al.</name>
<date>20021200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
<classification-national><country>US</country><main-classification>375149</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2001/0002203</doc-number>
<kind>A1</kind>
<name>Cahn et al.</name>
<date>20010500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
<classification-national><country>US</country><main-classification>375142</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2007/0098055</doc-number>
<kind>A1</kind>
<name>Raman et al.</name>
<date>20070500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>375150</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>2007/0121708</doc-number>
<kind>A1</kind>
<name>Simpson</name>
<date>20070500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>375149</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>EP</country>
<doc-number>1 117 186</doc-number>
<kind>A1</kind>
<date>20010700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>WO</country>
<doc-number>WO 99/35763</doc-number>
<date>19990700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00013">
<othercit>Roberts, Randy, &#x201c;Technical Tricks, Mar. 1993: More About Sliding Correlators&#x201d;, 1 pgs.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00014">
<othercit>&#x201c;All about Correlators&#x201d;, Feb. 1993, Spread Spectrum Scene, Spring 96 Issue of What's New, Apr. 29, 7 pgs.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>21</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>375142</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375145</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375149</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375150</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375343</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>2</number-of-drawing-sheets>
<number-of-figures>4</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20100111140</doc-number>
<kind>A1</kind>
<date>20100506</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Qin</last-name>
<first-name>Zhengdi</first-name>
<address>
<city>Tampere</city>
<country>FI</country>
</address>
</addressbook>
<residence>
<country>FI</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Qin</last-name>
<first-name>Zhengdi</first-name>
<address>
<city>Tampere</city>
<country>FI</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Ziegler IP Law Group, LLC</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Core Wireless Licensing S.a.r.l.</orgname>
<role>03</role>
<address>
<city>Luxembourg</city>
<country>LU</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Deppe</last-name>
<first-name>Betsy</first-name>
<department>2633</department>
</primary-examiner>
</examiners>
<pct-or-regional-filing-data>
<document-id>
<country>WO</country>
<doc-number>PCT/IB2007/002080</doc-number>
<kind>00</kind>
<date>20070402</date>
</document-id>
<us-371c124-date>
<date>20091112</date>
</us-371c124-date>
</pct-or-regional-filing-data>
<pct-or-regional-publishing-data>
<document-id>
<country>WO</country>
<doc-number>WO2008/120037</doc-number>
<kind>A </kind>
<date>20081009</date>
</document-id>
</pct-or-regional-publishing-data>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A method including correlating a code having a first offset with a signal to produce a first correlation result; correlating the code having a second offset with the signal to produce a second correlation result; determining a cost function using the first correlation result and the second correlation result; and adjusting the first offset and the second offset in dependence upon the cost function, wherein the cost function uses a first weighting for the first correlation result and a second, different weighting for the second correlation result.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="116.50mm" wi="137.84mm" file="US08625657-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="223.10mm" wi="152.74mm" file="US08625657-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="234.36mm" wi="170.60mm" file="US08625657-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">FIELD OF THE INVENTION</heading>
<p id="p-0002" num="0001">Embodiments of the present invention relate to correlating a code with a signal. Some embodiments relate to correlating a spreading code and a received spread spectrum communications signal that may be subject to multi-path effects.</p>
<heading id="h-0002" level="1">BACKGROUND TO THE INVENTION</heading>
<p id="p-0003" num="0002">Spread spectrum communication techniques spread information using a pseudorandom spreading code and then transmit the spread signal. A receiver receives the spread signal and correlates the received signal against the same pseudorandom spreading code. A peak in the correlation indicates the time of arrival of the spread signal and the correlation result at that code offset provides the original information.</p>
<p id="p-0004" num="0003">A problem can arise when a spread signal takes multiple different paths to the receiver by, for example, bouncing off the ground or surrounding topography or buildings. The signal from one path is noise in respect of the signal from another path.</p>
<p id="p-0005" num="0004">It would be desirable to provide a receiver that operates effectively in the presence of multi-path spread spectrum signals.</p>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE INVENTION</heading>
<p id="p-0006" num="0005">According to some embodiments of the invention there is provided a method comprising: correlating a code having a first offset with a signal to produce a first correlation result; correlating the code having a second offset with the signal to produce a second correlation result; determining a cost function using the first correlation result and the second correlation result; and adjusting the first offset and the second offset in dependence upon the cost function, wherein the cost function uses a first weighting for the first correlation result and a second, different weighting for the second correlation result.</p>
<p id="p-0007" num="0006">According to some embodiments of the invention there is provided an apparatus comprising: a code generator configured for generating a code having a first offset and the code with a second offset; a first correlator configured for correlating the code having the first offset with a signal to produce a first correlation result; a second correlator configured for correlating the code having the second offset with the signal to produce a second correlation result; circuitry configured for determining a cost function using the first correlation result and the second correlation result and configured for controlling adjustment of the first offset and the second offset in dependence upon the cost function, wherein the cost function uses a first weighting for the first correlation result and a second, different weighting for the second correlation result</p>
<p id="p-0008" num="0007">According to some embodiments of the invention there is provided a computer program product which when loaded into a processor enables: determining a cost function using a first correlation result, formed by correlation of a code having a first offset with a signal, and a second correlation result, formed by correlation of the code having a second offset with the signal; controlling adjustment of the first offset and the second offset in dependence upon the cost function, wherein the cost function uses a first weighting for the first correlation result and a second, different weighting for the second correlation result.</p>
<p id="p-0009" num="0008">According to some embodiments of the invention there is provided a method comprising: a) correlating a code having a first offset with a signal to produce a first correlation result; b) correlating the code having a second offset with the signal to produce a second correlation result; c) determining a cost function using the first correlation result and the second correlation result; and d) adjusting the first offset and the second offset in dependence upon the cost function to maintain a predetermined differential relationship between the first correlation result and the second correlation result.</p>
<p id="p-0010" num="0009">According to some embodiments of the invention there is provided an apparatus comprising: a code generator configured for generating a code having a first offset and the code with a second offset; a first correlator configured for correlating the code having the first offset with a signal to produce a first correlation result; a second correlator configured for correlating the code having the second offset with the signal to produce a second correlation result; circuitry configured for determining a cost function using the first correlation result and the second correlation result and for configured controlling adjustment of the first offset and the second offset in dependence upon the cost function to maintain a predetermined differential relationship between the first correlation result and the second correlation result.</p>
<p id="p-0011" num="0010">According to some embodiments of the invention there is provided a computer program product which when loaded into a processor enables: determining a cost function using a first correlation result, formed by correlation of a code having a first offset with a signal, and a second correlation result, formed by correlation of the code having a second offset with the signal; controlling adjustment of the first offset and the second offset in dependence upon the cost function to maintain a predetermined differential relationship between the first correlation result and the second correlation result.</p>
<p id="p-0012" num="0011">The correlation that occurs using the first code with the first offset is an early correlation when it occurs with a code offset that is before that of the punctual signal and the correlation that occurs using the second code with the second offset is a late correlation because it occurs with a code offset that is after that of the punctual signal. By using values for the first offset and the second offset that are asymmetrically spaced on either side of that for the punctual signal so that the first offset is greater than the second offset, the decision window for the late correlation is reduced compared to that for the early correlation. The correlation process is therefore less affected by multi-path effects because the late correlation window is smaller.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0013" num="0012">For a better understanding of the present invention reference will now be made by way of example only to the accompanying drawings in which:</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 1</figref> schematically illustrates a method <b>10</b> for controlling correlation of a signal s and a code c;</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 2</figref> illustrates <b>30</b> the auto-correlation function of the correlation processes;</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 3</figref> schematically illustrates an apparatus that is suitable for performing the method illustrated in <figref idref="DRAWINGS">FIG. 1</figref>; and</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 4</figref> schematically illustrates one embodiment of circuitry used in the apparatus.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DETAILED DESCRIPTION OF EMBODIMENTS OF THE INVENTION</heading>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 1</figref> schematically illustrates a method <b>10</b> for controlling correlation of a signal s and a code c.</p>
<p id="p-0019" num="0018">The signal s is typically a received spread spectrum communication signal that has been spread using a pseudorandom spreading code c. The received spread spectrum communication signal is then de-spread by correlation with the same pseudorandom spreading code c. At least two different correlations occur, with different offsets of the pseudorandom spreading code c.</p>
<p id="p-0020" num="0019">Referring to <figref idref="DRAWINGS">FIG. 1</figref>, at step <b>12</b> the signal s is received.</p>
<p id="p-0021" num="0020">Next at step <b>14</b>, the code c having a first offset &#x3c6;<sub>1 </sub>is correlated with the signal s to produce <b>15</b> a first correlation result A. At step <b>16</b>, the same code c having a second offset &#x3c6;<sub>2 </sub>is correlated with the signal s to produce <b>17</b> a second correlation result B. The second offset &#x3c6;<sub>2 </sub>is delayed (late) relative to the first offset &#x3c6;<sub>1 </sub>(early).</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 2</figref> illustrates one auto-correlation function R <b>30</b> that could be used for the correlation steps <b>14</b>, <b>16</b>. This particular auto-correlation can be represented as
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>R</i>(<i>t</i>)=1&#x2212;<i>t/T </i>for &#x2212;<i>T&#x3c;t&#x3c;T </i><?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>R</i>(<i>t</i>)=0 for elsewhere.<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0023" num="0022">T is the chip interval of the code c.</p>
<p id="p-0024" num="0023">This correlation function is a simplistic view of a typical correlation function which is used for clarity. It should be appreciated that a &#x2018;real&#x2019; correlation function R may differ significantly from the simplistic function illustrated and its slopes may, for example, be non-linear.</p>
<p id="p-0025" num="0024">The normalized values of the first correlation result A and the second correlation result B before feedback loop obtained lock is reached are schematically illustrated in the figure. The first correlation result A at feedback loop obtained lock is also illustrated and has a value a. The second correlation result B at feedback loop obtained lock is also illustrated and has a value b. The first offset of the code c used to obtain the first correlation result A has as a generality a value &#x3c6;<sup>A</sup><sub>1 </sub>and at feedback loop obtained lock has a value &#x3c6;<sup>a</sup><sub>1</sub>. The second offset of the code c used to obtain the second correlation result B has as a generality a value &#x3c6;<sup>B</sup><sub>2 </sub>and at feedback loop obtained lock has a value &#x3c6;<sup>b</sup><sub>2</sub>. It should be appreciated that the value of &#x3c6;<sup>B</sup><sub>2</sub>&#x2212;&#x3c6;<sup>A</sup><sub>1 </sub>is a constant, although it may be user programmable <b>90</b>.</p>
<p id="p-0026" num="0025">A cost function F may be defined as:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>F</i>=(<i>A/a&#x2212;B/b</i>) where <i>a&#x2260;b </i><?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
and where a is the value of the correlation function, at feedback loop obtained lock, at the first offset &#x3c6;<sup>a</sup><sub>1 </sub>and b is the value of the correlation function, at feedback loop obtained lock, at the second offset &#x3c6;<sup>b</sup><sub>2 </sub>
</p>
<p id="p-0027" num="0026">This function is zero valued at feedback loop obtained lock.</p>
<p id="p-0028" num="0027">The relative values of a and b may be user programmable <b>92</b>. The value a+b need not be a constant and may vary. The values of a and b may vary independently.</p>
<p id="p-0029" num="0028">For example, the value a and/or the value of b and/or the value of a+b may be varied dynamically. In one embodiment, the size of the correlation window (a+b) is varied and/or the ratio of b/a is varied using a feedback loop to obtain optimal reception. This may result in a smaller correlation window being used in urban environments for example.</p>
<p id="p-0030" num="0029">Referring back to <figref idref="DRAWINGS">FIG. 1</figref>, after obtaining the first correlation result A and the second correlation result B, at step <b>18</b> the cost function F is determined using the first correlation result A and the second correlation result B.</p>
<p id="p-0031" num="0030">The value of the cost function F is used to adjust the first offset &#x3c6;<sub>1 </sub>and the second offset &#x3c6;<sub>2 </sub>and the adjusted values are fedback via feedback loop <b>27</b> and the method <b>10</b> is repeated. The feedback loop <b>27</b> may be a delay locked loop (DLL) or a phase locked loop (PLL). If the cost function F is +ve, then the first offset &#x3c6;<sub>1 </sub>and the second offset &#x3c6;<sub>2 </sub>are both reduced by an amount dependent upon the magnitude of F. If the cost function F is &#x2212;ve, then the first offset &#x3c6;<sub>1 </sub>and the second offset &#x3c6;<sub>2 </sub>are both increased by an amount dependent upon the magnitude of F. The difference between &#x3c6;<sub>1 </sub>and &#x3c6;<sub>2 </sub>therefore remains constant. Referring back to <figref idref="DRAWINGS">FIG. 2</figref>, this has the effect of moving A and B towards a and b i.e. the method <b>10</b> finds a feedback loop obtained lock via a negative feedback.</p>
<p id="p-0032" num="0031">When feedback loop obtained lock has been achieved, the method <b>10</b> maintains a predetermined relationship between the first correlation result A and the second correlation result B i.e. A/B=a/b where a/b&#x3c;1.</p>
<p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. 3</figref> schematically illustrates an apparatus <b>40</b> that is suitable for performing the method <b>10</b>. The apparatus <b>40</b> comprises a code generator <b>42</b> for generating a code <b>44</b> with a first offset and a code <b>46</b> with a second offset, a first correlator <b>50</b> for producing the first correlation result A, a second correlator <b>52</b> for producing the second correlation result B and circuitry for controlling the code generator <b>42</b>. The first correlator <b>50</b> and the second correlator <b>52</b> receive the signal s <b>51</b>.</p>
<p id="p-0034" num="0033">The first correlator <b>50</b> performs step <b>14</b> of the method <b>10</b>. The second correlator <b>52</b> performs step <b>16</b> of the method <b>10</b>. The circuitry <b>60</b> performs step <b>18</b> of the method <b>10</b>. The code generator performs step <b>26</b> of the method <b>10</b>.</p>
<p id="p-0035" num="0034">The circuitry <b>60</b> comprises a first multiplier <b>20</b> that applies a first weighting (1/a) to the first correlation result A to produce a first weighted correlation result <b>21</b>. The circuitry <b>60</b> comprises a second multiplier <b>22</b> that applies a second weighting (1/b) to the second correlation result B to produce a second weighted correlation result <b>23</b>.</p>
<p id="p-0036" num="0035">The circuitry <b>60</b> subtracts one of the weighted first and second correlation results from the other of the first and second weighted correlation results to produce the cost function value <b>25</b>. In this implementation, the second weighted correlation result <b>23</b> (B/b) is subtracted from the first weighted correlation result <b>21</b> (A/a) as described in relation to block <b>24</b> of the method <b>10</b> shown in <figref idref="DRAWINGS">FIG. 1</figref>.</p>
<p id="p-0037" num="0036">The cost function value <b>25</b> controls the code generator <b>42</b> to adjust the first offset and the second offset in dependence upon the cost function value <b>25</b> as described in relation to step <b>26</b> of the method <b>10</b>.</p>
<p id="p-0038" num="0037">The apparatus <b>40</b> may in some embodiments be a module that is sold for integration into or attachment to an electronic device. The apparatus <b>40</b> may in some embodiments be an electronic device. An electronic device may be, for example, a mobile cellular telephone, a personal wireless communication device, a satellite positioning receiver etc.</p>
<p id="p-0039" num="0038">The circuitry <b>60</b> of the apparatus <b>40</b> may be implemented in software, firmware or hardware. <figref idref="DRAWINGS">FIG. 4</figref> schematically illustrates a software implementation.</p>
<p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. 4</figref> schematically illustrates a computer comprising a processor or controller <b>70</b> and a memory <b>72</b>. The memory <b>72</b> stores computer program instructions <b>74</b> that control the operation of the circuitry <b>40</b> when loaded into the processor <b>70</b>. The computer program instructions <b>74</b> provide the logic and routines that enables the electronic device to perform at least step <b>18</b> of method <b>10</b>.</p>
<p id="p-0041" num="0040">The computer program instructions may arrive as a computer program product at the circuitry <b>40</b> via an electromagnetic carrier signal or be copied from a physical entity <b>76</b> such as a computer program product, a memory device or a record medium such as a CD-ROM or DVD.</p>
<p id="p-0042" num="0041">The computer program product determines the cost function F using the first correlation result A (formed by correlation of a code having a first offset with a signal) and the second correlation result B (formed by correlation of the code having a second offset with the signal) and controls adjustment of the first offset and the second offset in dependence upon the cost function F. At feedback loop obtained lock the computer program product controls adjustment of the first offset and the second offset in dependence upon the cost function F to maintain a predetermined relationship between the first correlation result A and the second correlation result B i.e. A/B=a/b.</p>
<p id="p-0043" num="0042">Although embodiments of the present invention have been described in the preceding paragraphs with reference to various examples, it should be appreciated that modifications to the examples given can be made without departing from the scope of the invention as claimed. For example, although a particular cost function F has been described it will be appreciated that different costs functions may be used, in particular, differently expressed but mathematically equivalent cost functions may be used and reference to &#x2018;cost function&#x2019; or &#x2018;cost function F&#x2019; should be interpreted accordingly.</p>
<p id="p-0044" num="0043">Whilst endeavoring in the foregoing specification to draw attention to those features of the invention believed to be of particular importance it should be understood that the Applicant claims protection in respect of any patentable feature or combination of features hereinbefore referred to and/or shown in the drawings whether or not particular emphasis has been placed thereon.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>I claim:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method comprising:
<claim-text>correlating a pseudo-random spreading code having a first offset with a spread signal to produce a first correlation result;</claim-text>
<claim-text>correlating the pseudo-random spreading code with a second offset having the spread signal to produce a second correlation result;</claim-text>
<claim-text>determining a value of a cost function using the first correlation result and the second correlation result;</claim-text>
<claim-text>adjusting the first offset and the second offset in dependence upon the value of the cost function, the cost function using a first weighting for the first correlation result and a second, different weighting for the second correlation result such that a ratio of the first weighting to the second weighting is less than 1; and</claim-text>
<claim-text>providing a feedback loop that is at lock when the first correlation result is a predetermined factor of the second correlation result, wherein the predetermined factor is a ratio of a first value of a correlation function, at feedback loop obtained lock, at the first offset to a second value of the correlation function, at feedback loop obtained lock, at the second offset.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. A method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the step of adjusting the first offset and the second offset in dependence upon the value of the cost function maintains a predetermined relationship between the first correlation result and the second correlation result.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. A method as claimed in <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the first correlation result is an early correlation result and the second offset is a late correlation result and the ratio of the early correlation result to the late correlation result is less than 1.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. A method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the value of the cost function is dependent upon a ratio of the first correlation result to a first value of a correlation function, at feedback loop obtained lock, at the first offset and a ratio of the second correlation result to a second value of the correlation function, at feedback loop obtained lock, at the second offset.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. A method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the value of the cost function is the difference between a ratio of the first correlation result to a value of a correlation function, at feedback loop obtained lock, at the first offset and a ratio of the second correlation result to a value of the correlation function, at feedback loop obtained lock, at the second offset.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. A method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein a difference between the first and second offsets is programmable.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. A method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the second offset is delayed relative to the first offset.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. A method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the signal is a spread spectrum communication signal.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. A method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the signal is a received signal.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. An apparatus comprising:
<claim-text>a code generator configured for generating a pseudo-random spreading code having a first offset and the pseudo-random spreading code having a second offset;</claim-text>
<claim-text>a first correlator configured for correlating the pseudo-random spreading code having the first offset with a spread signal to produce a first correlation result;</claim-text>
<claim-text>a second correlator configured for correlating the pseudo-random spreading code having the second offset with the spread signal to produce a second correlation result;</claim-text>
<claim-text>circuitry configured for determining a value of a cost function using the first correlation result and the second correlation result and configured for controlling adjustment of the first offset and the second offset in dependence upon the value of the cost function, wherein the cost function uses a first weighting for the first correlation result and a second, different weighting for the second correlation result such that a ratio of the first weighting to the second weighting is less than 1; and</claim-text>
<claim-text>a feedback loop that is at lock when the first correlation result is a predetermined factor of the second correlation result, wherein the predetermined factor is a ratio of a first value of a correlation function, at feedback loop obtained lock, at the first offset to a second value of the correlation function, at feedback loop obtained lock, at the second offset.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. An apparatus as claimed in <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the circuitry is arranged to maintain a predetermined relationship between the first correlation result and the second correlation result; wherein the circuitry enables programming of the predetermined relationship.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. An apparatus as claimed in <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the circuitry is configured to:
<claim-text>divide the first correlation result by a first value to provide a weighted first correlation result;</claim-text>
<claim-text>divide the second correlation result by a second value, different to the first value, to provide a weighted second correlation result;</claim-text>
<claim-text>enable programming of the first and second values,</claim-text>
<claim-text>wherein the second value is greater than the first value; and subtract the weighted second correlation result from the second weighted correlation result.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. An apparatus as claimed in <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the circuitry is configured to maintain a constant difference between the first offset and the second offset.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. An apparatus as claimed in <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the constant is programmable.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. An apparatus as claimed in <claim-ref idref="CLM-00010">claim 10</claim-ref>, configured as a module for an electronic device.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. An apparatus as claimed in <claim-ref idref="CLM-00010">claim 10</claim-ref>, configured as an electronic device.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. An apparatus as claimed in <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the value of the cost function is dependent upon a ratio of the first correlation result to a first value of a correlation function, at feedback loop obtained lock, at the first offset and a ratio of the second correlation result to a second value of the correlation function, at feedback loop obtained lock, at the second offset.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. An apparatus as claimed in <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the value of the cost function is the difference between a ratio of the first correlation result to a value of a correlation function, at feedback loop obtained lock, at the first offset and a ratio of the second correlation result to a value of the correlation function, at feedback loop obtained lock, at the second offset.</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. A non-transitory computer-readable storage medium encoded with instructions that, when executed by a processor, enable the processor to perform:
<claim-text>determining a value of a cost function based on a first correlation result, formed by correlation of a pseudo-random spreading code having a first offset with a spread signal, and a second correlation result, formed by correlation of the pseudo-random spreading code having a second offset with the spread signal;</claim-text>
<claim-text>controlling adjustment of the first offset and the second offset in dependence upon the value of the cost function, wherein the cost function uses a first weighting for the first correlation result and a second, different weighting for the second correlation result such that a ratio of the first weighting to the second weighting is less than 1; and</claim-text>
<claim-text>wherein a feedback loop is at lock when the first correlation result is a predetermined factor of the second correlation result, wherein the predetermined factor is a ratio of a first value of a correlation function, at feedback loop obtained lock, at the first offset to a second value of the correlation function, at feedback loop obtained lock, at the second offset.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. A non-transitory computer-readable storage medium as claimed in <claim-ref idref="CLM-00019">claim 19</claim-ref>, wherein the value of the cost function is dependent upon a ratio of the first correlation result to a first value of a correlation function, at feedback loop obtained lock, at the first offset and a ratio of the second correlation result to a second value of the correlation function, at feedback loop obtained lock, at the second offset.</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. A non-transitory computer-readable storage medium as claimed in <claim-ref idref="CLM-00019">claim 19</claim-ref>, wherein the value of the cost function is the difference between a ratio of the first correlation result to a value of a correlation function, at feedback loop obtained lock, at the first offset and a ratio of the second correlation result to a value of the correlation function, at feedback loop obtained lock, at the second offset. </claim-text>
</claim>
</claims>
</us-patent-grant>
