<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08627314-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08627314</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13447288</doc-number>
<date>20120416</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>TW</country>
<doc-number>100125811 A</doc-number>
<date>20110721</date>
</priority-claim>
</priority-claims>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>9</main-group>
<subgroup>455</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>718  1</main-classification>
</classification-national>
<invention-title id="d2e61">Method for managing power of host computer</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>2010/0070784</doc-number>
<kind>A1</kind>
<name>Gupta et al.</name>
<date>20100300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>713310</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>2010/0262964</doc-number>
<kind>A1</kind>
<name>Uyeda et al.</name>
<date>20101000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>718  1</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2011/0191477</doc-number>
<kind>A1</kind>
<name>Zhang et al.</name>
<date>20110800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709226</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2012/0297236</doc-number>
<kind>A1</kind>
<name>Ziskind et al.</name>
<date>20121100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>714  3</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2012/0324441</doc-number>
<kind>A1</kind>
<name>Gulati et al.</name>
<date>20121200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>718  1</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>JP</country>
<doc-number>2010134687</doc-number>
<kind>A</kind>
<date>20100600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>JP</country>
<doc-number>2010262382</doc-number>
<kind>A</kind>
<date>20101100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>WO</country>
<doc-number>2010140183</doc-number>
<kind>A1</kind>
<date>20101200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>19</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>718  1</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>713310</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>7</number-of-drawing-sheets>
<number-of-figures>7</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20130024860</doc-number>
<kind>A1</kind>
<date>20130124</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Lee</last-name>
<first-name>Chung-I</first-name>
<address>
<city>New Taipei</city>
<country>TW</country>
</address>
</addressbook>
<residence>
<country>TW</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Yeh</last-name>
<first-name>Chien-Fa</first-name>
<address>
<city>New Taipei</city>
<country>TW</country>
</address>
</addressbook>
<residence>
<country>TW</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Lu</last-name>
<first-name>Chiu-Hua</first-name>
<address>
<city>New Taipei</city>
<country>TW</country>
</address>
</addressbook>
<residence>
<country>TW</country>
</residence>
</us-applicant>
<us-applicant sequence="004" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Yen</last-name>
<first-name>Tsung-Hsin</first-name>
<address>
<city>New Taipei</city>
<country>TW</country>
</address>
</addressbook>
<residence>
<country>TW</country>
</residence>
</us-applicant>
<us-applicant sequence="005" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Lin</last-name>
<first-name>Chien-Chih</first-name>
<address>
<city>New Taipei</city>
<country>TW</country>
</address>
</addressbook>
<residence>
<country>TW</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Lee</last-name>
<first-name>Chung-I</first-name>
<address>
<city>New Taipei</city>
<country>TW</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Yeh</last-name>
<first-name>Chien-Fa</first-name>
<address>
<city>New Taipei</city>
<country>TW</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Lu</last-name>
<first-name>Chiu-Hua</first-name>
<address>
<city>New Taipei</city>
<country>TW</country>
</address>
</addressbook>
</inventor>
<inventor sequence="004" designation="us-only">
<addressbook>
<last-name>Yen</last-name>
<first-name>Tsung-Hsin</first-name>
<address>
<city>New Taipei</city>
<country>TW</country>
</address>
</addressbook>
</inventor>
<inventor sequence="005" designation="us-only">
<addressbook>
<last-name>Lin</last-name>
<first-name>Chien-Chih</first-name>
<address>
<city>New Taipei</city>
<country>TW</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Altis Law Group, Inc.</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Hon Hai Precision Industry Co., Ltd.</orgname>
<role>03</role>
<address>
<city>New Taipei</city>
<country>TW</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Puente</last-name>
<first-name>Emerson</first-name>
<department>2196</department>
</primary-examiner>
<assistant-examiner>
<last-name>Sun</last-name>
<first-name>Charlie</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">In a method for managing power of host computers using a control computer, the method generates a power management command, groups virtual machines installed in the host computers at a first time if the power management command is a first type, to obtain a first group of the virtual machines. The method further relocates the virtual machines in the host computers based on the first group of the virtual machines, and closes idle host computers. Closed host computers are powered on if the power management command is the second type, all the virtual machines at a second time are grouped, to obtain a second group of the virtual machines. The virtual machines are relocated into each host computer based on the second group of the virtual machines.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="160.87mm" wi="150.62mm" file="US08627314-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="133.10mm" wi="126.07mm" file="US08627314-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="172.30mm" wi="136.57mm" file="US08627314-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="173.74mm" wi="103.63mm" file="US08627314-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="190.16mm" wi="149.52mm" file="US08627314-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="174.75mm" wi="118.36mm" file="US08627314-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="169.84mm" wi="130.30mm" file="US08627314-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="177.21mm" wi="126.07mm" file="US08627314-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND</heading>
<p id="p-0002" num="0001">1. Technical Field</p>
<p id="p-0003" num="0002">Embodiments of the present disclosure relate to cloud computing technology, and particularly to a control computer and method for managing power of virtual machines installed in host computers.</p>
<p id="p-0004" num="0003">2. Description of Related Art</p>
<p id="p-0005" num="0004">In cloud computing technology, a storage container includes a plurality of host computers, where each host computer is installed with a plurality of virtual machines (VMs) that provide multiple services to users. Because each host computer needs an individual power supply, the power consumption of the storage container is great. Therefore, an efficient method for managing power of virtual machines installed in host computers is desired.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0002" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0006" num="0005"><figref idref="DRAWINGS">FIG. 1</figref> is a schematic diagram of one embodiment of a control computer electronically connected with a plurality of host computers.</p>
<p id="p-0007" num="0006"><figref idref="DRAWINGS">FIG. 2</figref> is a block diagram of one embodiment of the control computer including a power management system.</p>
<p id="p-0008" num="0007"><figref idref="DRAWINGS">FIG. 3</figref> is a block diagram of function modules of the power management system included in the control computer.</p>
<p id="p-0009" num="0008"><figref idref="DRAWINGS">FIG. 4</figref> is a flowchart of one embodiment of a method for managing power of the host computers using the control computer.</p>
<p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. 5</figref> is a schematic diagram of one embodiment of a plurality of virtual machines installed in the host computers.</p>
<p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. 6</figref> is a schematic diagram of an example of relocating the virtual machines installed in the host computers according to a first command type.</p>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 7</figref> is a schematic diagram of an example of relocating the virtual machines installed in the host computers according to a second command type.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0003" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0013" num="0012">All of the processes described below may be embodied in, and fully automated via, functional code modules executed by one or more general purpose electronic devices or processors. The code modules may be stored in any type of non-transitory computer-readable medium or other storage device. Some or all of the methods may alternatively be embodied in specialized hardware. Depending on the embodiment, the non-transitory computer-readable medium may be a hard disk drive, a compact disc, a digital video disc, a tape drive or other suitable storage medium.</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 1</figref> is a schematic diagram of one embodiment of a control computer <b>2</b> electronically connected with a plurality of host computers (hereinafter referred to as &#x201c;hosts&#x201d;) <b>5</b>. The control computer <b>2</b> is connected to the host computers <b>5</b> and a database <b>3</b> through a network <b>4</b>. For example, the network <b>4</b> may be the Internet, an intranet, or any other relevant network.</p>
<p id="p-0015" num="0014">In one embodiment, the host computers <b>5</b> are located in a storage container of a specific space. Each host computer <b>5</b> is installed with a plurality of virtual machines (VMs) that provide services to users. For example, as shown in <figref idref="DRAWINGS">FIG. 5</figref>, the virtual machines &#x201c;VM<b>01</b>&#x201d; and &#x201c;VM<b>02</b>&#x201d; are installed in the host computer &#x201c;Host<b>01</b>,&#x201d; the virtual machines &#x201c;VM<b>03</b>&#x201d; and &#x201c;VM<b>04</b>&#x201d; are installed in the host computer &#x201c;Host<b>02</b>,&#x201d; the virtual machine &#x201c;VM<b>05</b>&#x201d; is installed in the host computer &#x201c;Host<b>03</b>,&#x201d; and he virtual machine &#x201c;VM<b>06</b>&#x201d; is installed in the host computer &#x201c;Host<b>04</b>&#x201d;.</p>
<p id="p-0016" num="0015">The database <b>3</b> stores information of the virtual machines, such as a name, an identifier (ID), and a resource usage (or resource usage rate) of each of the virtual machines. For example, the resource usage may include a central processing unit (CPU) usage, a network bandwidth usage, a hard disk usage, and a memory usage of the host computer <b>5</b> occupied by the virtual machines.</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 2</figref> is a block diagram of one embodiment of the control computer <b>2</b> including a power management system <b>24</b>. The control computer <b>2</b> further includes a display device <b>20</b>, an input device <b>22</b>, a storage device <b>23</b>, and at least one processor <b>25</b>. The control computer <b>2</b> may be a computer, a server, or any other computing device. <figref idref="DRAWINGS">FIG. 2</figref> illustrates only one example of the control computer <b>2</b> that may include more or fewer components than as illustrated, or a different configuration of the various components may exist in other embodiments.</p>
<p id="p-0018" num="0017">The display device <b>20</b> may be a liquid crystal display (LCD) or a cathode ray tube (CRT) display, and the input device <b>22</b> may be a mouse, a keyboard, a touch screen, and/or a touchpad used for inputting data.</p>
<p id="p-0019" num="0018">The power management system <b>24</b> is used to send a power management command to the host computers <b>5</b>, and control the host computers <b>5</b> power on or power off according to the power management command In one embodiment, the power management system <b>24</b> may include computerized instructions in the form of one or more programs that are executed by the at least one processor <b>25</b> and stored in the storage device <b>23</b> (or memory). A detailed description of the power management system <b>24</b> will be given in the following paragraphs.</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 3</figref> is a block diagram of function modules of the power management system <b>24</b> included in the control computer <b>2</b>. In one embodiment, the power management system <b>24</b> may include one or more modules, for example, a command generating module <b>201</b>, a command determining module <b>202</b>, a grouping module <b>203</b>, a relocating module <b>204</b>, a first controlling module <b>205</b>, and a second controlling module <b>206</b>. In general, the word &#x201c;module&#x201d;, as used herein, refers to logic embodied in hardware or firmware, or to a collection of software instructions, written in a programming language, such as, Java, C, or assembly. One or more software instructions in the modules may be embedded in firmware, such as in an EPROM. The modules described herein may be implemented as either software and/or hardware modules and may be stored in any type of non-transitory computer-readable medium or other storage device. Some non-limiting examples of non-transitory computer-readable medium include CDs, DVDs, BLU-RAY, flash memory, and hard disk drives.</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 4</figref> is a flowchart of one embodiment of a method for managing power of the host computers <b>5</b> using the control computer <b>2</b>. Depending on the embodiment, additional blocks may be added, others removed, and the ordering of the blocks may be changed.</p>
<p id="p-0022" num="0021">In block S<b>10</b>, the command generating module <b>201</b> generates a power management command for the host computers <b>5</b>. In one embodiment, the power management command includes a first type for shutting down idle host computers <b>5</b> to save power consumption, and a second type for powering on closed host computers <b>5</b> to decrease workloads of the host computers <b>5</b>.</p>
<p id="p-0023" num="0022">In one embodiment, the power management command is generated when a specific time arrives. For example, if a first specific time (e.g., PM 8:00) arrives, the command generating module <b>201</b> sends a power management command of the first type to the host computers <b>5</b>. If a second specific time (e.g., AM 8:00) arrives, the command generating module <b>201</b> sends a power management command of the second type to the host computers <b>5</b>.</p>
<p id="p-0024" num="0023">In other embodiment, the command generating module <b>201</b> may generate the power management command when the resource usages of the virtual machines match a specific criteria. For example, if the resource usages of the virtual machines in one of the host computers <b>5</b> is less than a first value (e.g., 40%), or the resource usage of the virtual machines in all the host computers <b>5</b> is less than a second value (e.g., 200%), the command generating module <b>201</b> sends the power management command of the first type to the host computers <b>5</b>. If the resource usages of the virtual machines in one of the host computers <b>5</b> is greater than a third value (e.g., 90%), or the resource usage of the virtual machines in all the host computers <b>5</b> is greater than a fourth value (e.g., 500%), the command generating module <b>201</b> sends the power management command of the second type to the host computers <b>5</b>. The resource usages are selected from the group including the CPU usage, the network bandwidth usage, the hard disk usage, and the memory usage of the host computer <b>5</b> occupied by the virtual machines.</p>
<p id="p-0025" num="0024">In block S<b>11</b>, the command determining module <b>202</b> determines a command type of the power management command As mentioned above, the command type includes the first type and the second type. If the power management command is the first type, blocks S<b>21</b>-S<b>22</b> are executed. If the power management command is the second type, blocks S<b>31</b>-S<b>32</b> are executed.</p>
<p id="p-0026" num="0025">If the command type is the first type, in block S<b>21</b>, the grouping module <b>203</b> groups the virtual machines installed in the host computers <b>5</b> in a first group at a first time according to resource usages of the virtual machines. In this embodiment, the word &#x201c;group&#x201d; means that divide the virtual machines into a plurality of subsets (sub-groups). For example, the grouping module <b>203</b> divides the virtual machines of &#x201c;VM<b>01</b>, VM<b>02</b>, VM<b>03</b>, VM<b>04</b>, VM<b>05</b>, and VM<b>06</b>&#x201d; into three sub-groups, such as (VM<b>01</b>, VM<b>02</b>), (VM<b>03</b>, VM<b>04</b>), and (VM<b>05</b>, VM<b>06</b>). An example of obtaining the first group of the virtual machines is provided as following steps a1 to a6. If the virtual machines are grouped at the first time when the first specific time (e.g., PM 8:00) arrives.</p>
<p id="p-0027" num="0026">Step a1, the grouping module <b>203</b> obtains the resource usages of the virtual machines from the host computers <b>5</b>, and stores a name of each virtual machine and corresponding resource usage into a first data structure. If the resource usage is the CPU usage, the grouping module <b>203</b> obtains the CPU usages of each virtual machine using a virtual machine manager in each host computer <b>5</b>. As shown in <figref idref="DRAWINGS">FIG. 5</figref>, &#x201c;Hypervisor&#x201d; represents the virtual machine manager. In one embodiment, the first data structure is a first in first out (FIFO) list used to store the name of the virtual machine and the corresponding CPU usage. For example, the first data structure &#x201c;CPU Usage List <b>1</b>&#x201d; may be represented as: &#x3c;CPU Usage List <b>1</b>&#x3e;(VM<b>01</b>=20%, VM<b>02</b>=15%, VM<b>03</b>=5%, VM<b>04</b>=10%, VM<b>05</b>=30%, VM<b>06</b>=3%). In other embodiment, the obtained CPU usage may be an average value in a specific time length (e.g., PM 6:00-8:00), or an empirical value (e.g., a preset value).</p>
<p id="p-0028" num="0027">Step a2, the grouping module <b>203</b> calculates a summation &#x201c;U<sub>total</sub>&#x201d; of the resource usages in the first data structure.</p>
<p id="p-0029" num="0028">Step a3, the grouping module <b>203</b> calculates a first average value &#x201c;Vavg<b>1</b>&#x201d; of the resource usage in each host computer <b>5</b> used to allocate the virtual machines according to a formula of Vavg<b>1</b>=(U<sub>total</sub>&#xf7;N<b>1</b>). &#x201c;N<b>1</b>&#x201d; represents a number of the host computers <b>5</b> being used to allocate the virtual machines. An initial value of &#x201c;N<b>1</b>&#x201d; equals to a number &#x201c;N<b>0</b>&#x201d; of the host computers need to keep working (hereinafter referred to as &#x201c;operated host computers&#x201d;). For example, N<b>0</b>=int(U<sub>total</sub>&#xf7;U<sub>threshold</sub>)+1. &#x201c;U<sub>threshold</sub>&#x201d; represents a threshold value (e.g., 80%) of the CPU usage, &#x201c;int ( )&#x201d; represents a function to obtain a round number of a division value of &#x201c;U<sub>total</sub>&#xf7;U<sub>threshold</sub>&#x201d;. In this example, U<sub>total</sub>=(20%+15%+5%+10%+30%+3%)=83%, then, N<b>0</b>=int(83%&#xf7;80%)+1=2. In other embodiment, the number of the operated host computers may be an empirical value, such as N<b>0</b>=3.</p>
<p id="p-0030" num="0029">Step a4, the grouping module <b>203</b> searches for one or more subsets of the virtual machines in the first data structure such that a summation of the resource usages in the searched subset is greater than the first average value &#x201c;Vavg<b>1</b>,&#x201d; selects a subset whose summation is minimum, and determines the selected subset as one subset of the first group of the virtual machines.</p>
<p id="p-0031" num="0030">Step a5, if a number of remaining virtual machines in the first data structure is less than or equal to two, the procedure ends, the remaining virtual machines in the first data structure are regarded as one subset of the first group of the virtual machines.</p>
<p id="p-0032" num="0031">Step a6, if the number of the remaining virtual machines in the first data structure is greater than two, the grouping module <b>203</b> removes the virtual machines in the selected subset from the first data structure, executes an operation of N<b>1</b>=N<b>1</b>&#x2212;1, and the procedure returns to step a2.</p>
<p id="p-0033" num="0032">Using the above-mentioned steps a1 to a6, the first group of the virtual machines in the first data structure of &#x201c;CPU Usage List <b>1</b>&#x201d; is as follows: (VM<b>01</b>, VM<b>02</b>, VM<b>03</b>), and (VM<b>04</b>, VM<b>05</b>, VM<b>06</b>). &#x201c;(VM<b>01</b>, VM<b>02</b>, VM<b>03</b>)&#x201d; represents the first subset of the first group of the virtual machines, and &#x201c;(VM<b>04</b>, VM<b>05</b>, VM<b>06</b>)&#x201d; represents the second subset of the first group of the virtual machines.</p>
<p id="p-0034" num="0033">In block S<b>22</b>, the relocating module <b>204</b> relocates the virtual machines in the host computers <b>5</b> based on the first group of the virtual machines. Then, the second controlling module <b>206</b> closes idle host computers whose virtual machines are removed. For example, as shown in <figref idref="DRAWINGS">FIG. 6</figref>, the virtual machine &#x201c;VM<b>03</b>&#x201d; is removed from host computer &#x201c;Host<b>02</b>&#x201d; to &#x201c;Host<b>01</b>,&#x201d; and the virtual machines &#x201c;VM<b>05</b>&#x201d; and &#x201c;VM<b>06</b>&#x201d; are removed from host computer &#x201c;Host<b>03</b>&#x201d; and &#x201c;Host<b>04</b>&#x201d; to &#x201c;Host<b>02</b>.&#x201d; Thus, host computer &#x201c;Host<b>03</b>&#x201d; and &#x201c;Host<b>04</b>&#x201d; become idle, and are closed by the relocating module <b>204</b>.</p>
<p id="p-0035" num="0034">In other embodiment, the relocating module <b>204</b> may relocate the first subset (VM<b>01</b>, VM<b>02</b>, VM<b>03</b>) of the first group in the host computer &#x201c;Host<b>02</b>,&#x201d; and relocate the second subset (VM<b>04</b>, VM<b>05</b>, VM<b>06</b>) of the first group in the host computer &#x201c;Host<b>01</b>&#x201d;.</p>
<p id="p-0036" num="0035">If the command type is the second type, in block S<b>31</b>, the first controlling module <b>205</b> powers on the closed host computers. The grouping module <b>203</b> groups the virtual machines in a second group at a second time according to the resource usages of the virtual machines. An example of obtaining the second group of the virtual machines is provided as following steps b1-b6. If the virtual machines are grouped at the second time when the second specific time (e.g., AM 8:00) arrives. In other embodiment, the first controlling module <b>205</b> and the second controlling module <b>206</b> can be combined with the grouping module <b>203</b> to form one module.</p>
<p id="p-0037" num="0036">Step b1, the grouping module <b>203</b> obtains the resource usages of the virtual machines from the host computers &#x201c;Host<b>01</b>&#x201d; and &#x201c;Host<b>02</b>&#x201d;, and stores the name of each virtual machine and corresponding resource usage into a second data structure. If the resource usage is the CPU usage, the second data structure is the FIFO list used to stores the name of the virtual machine and the corresponding CPU usage. For example, the second data structure &#x201c;CPU Usage List <b>2</b>&#x201d; is represented as: &#x3c;CPU Usage List <b>1</b>&#x3e;(VM<b>01</b>=25%, VM<b>02</b>=20%, VM<b>03</b>=25%, VM<b>04</b>=25%, VM<b>05</b>=50%, VM<b>06</b>=30%). In other embodiments, the obtained CPU usage may be an average value in a specific time length (e.g., AM 7:00-8:00), or an empirical value (e.g., a preset value).</p>
<p id="p-0038" num="0037">Step b2, the grouping module <b>203</b> calculates a summation &#x201c;U<sub>total</sub>&#x201d; of the resource usages in the second data structure.</p>
<p id="p-0039" num="0038">Step b3, the grouping module <b>203</b> calculates a second average value &#x201c;Vavg<b>2</b>&#x201d; of the resource usage in each host computer <b>5</b> used to allocate the virtual machines according to a formula of Vavg<b>2</b>=(U<sub>total</sub>&#xf7;N<b>2</b>). &#x201c;N<b>2</b>&#x201d; represents a number of the host computers <b>5</b> used to allocate the virtual machines. An initial value of &#x201c;N<b>2</b>&#x201d; equals to a total number of the host computers <b>5</b> (e.g., N<b>2</b>=4).</p>
<p id="p-0040" num="0039">Step b4, the grouping module <b>203</b> searches for one or more subsets of the virtual machines in the second data structure such that a summation of the resource usages in the searched subset is greater than the second average value &#x201c;Vavg<b>2</b>,&#x201d; selects a subset whose summation is minimum, and determines the selected subset as one subset of the second group of the virtual machines.</p>
<p id="p-0041" num="0040">Step b5, if a number of remaining virtual machines in the second data structure is less than or equal to two, the procedure ends, the remaining virtual machines in the second data structure are regarded as one subset of the second group of the virtual machines.</p>
<p id="p-0042" num="0041">Step b6, if the number of the remaining virtual machines in the second data structure is greater than two, the grouping module <b>203</b> removes the virtual machines in the selected subset from the second data structure, executes an operation of N<b>2</b>=N<b>2</b>&#x2212;1, and the procedure returns to step b2.</p>
<p id="p-0043" num="0042">Using the above-mentioned steps b1-b6, the second group of the virtual machines in the second data structure of &#x201c;CPU Usage List <b>2</b>&#x201d; is as follows: (VM<b>01</b>, VM<b>02</b>), (VM<b>03</b>, VM<b>04</b>), and (VM<b>05</b>, VM<b>06</b>). &#x201c;(VM<b>01</b>, VM<b>02</b>) represents the first subset of the second group of the virtual machines, &#x201c;(VM<b>03</b>, VM<b>04</b>)&#x201d; represents the second subset, &#x201c;(VM<b>05</b>)&#x201d; represents the third subset, and &#x201c;(VM<b>06</b>)&#x201d; represents the fourth subset.</p>
<p id="p-0044" num="0043">In block S<b>32</b>, the relocating module <b>204</b> relocates the virtual machines into each host computer <b>5</b> based on the second group of the virtual machines. For example, as shown in <figref idref="DRAWINGS">FIG. 7</figref>, the virtual machines &#x201c;VM<b>01</b>&#x201d; and &#x201c;VM<b>02</b>&#x201d; are removed to &#x201c;Host<b>02</b>,&#x201d; the virtual machines &#x201c;VM<b>03</b>&#x201d; and &#x201c;VM<b>04</b>&#x201d; are removed to &#x201c;Host<b>03</b>,&#x201d; the virtual machine &#x201c;VM<b>05</b>&#x201d; is removed to &#x201c;Host<b>01</b>,&#x201d; and the virtual machine &#x201c;VM<b>06</b>&#x201d; is removed to &#x201c;Host<b>04</b>&#x201d;.</p>
<p id="p-0045" num="0044">In other embodiments, the relocating module <b>204</b> may relocate the first subset (VM<b>01</b>, VM<b>02</b>) in the host computer &#x201c;Host<b>01</b>,&#x201d; relocate the second subset (VM<b>03</b>, VM<b>04</b>) in the host computer &#x201c;Host<b>02</b>,&#x201d; relocate the third subset (VM<b>05</b>) in the host computer &#x201c;Host<b>03</b>,&#x201d; and relocate the fourth subset (VM<b>06</b>) in the host computer &#x201c;Host<b>04</b>&#x201d;.</p>
<p id="p-0046" num="0045">It should be emphasized that the above-described embodiments of the present disclosure, particularly, any embodiments, are merely possible examples of implementations, merely set forth for a clear understanding of the principles of the disclosure. Many variations and modifications may be made to the above-described embodiment(s) of the disclosure without departing substantially from the spirit and principles of the disclosure. All such modifications and variations are intended to be included herein within the scope of this disclosure and the present disclosure and protected by the following claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A computer-implemented method for managing power of a plurality of host computers using a control computer comprising a processor, the method comprising execution of the steps comprising:
<claim-text>generating a power management command for the plurality of host computers by the control computer;</claim-text>
<claim-text>determining a command type of the power management command, the command type comprising a first type and a second type;</claim-text>
<claim-text>grouping virtual machines installed in the plurality of host computers in a first group at a first time according to an average value of resource usages of the virtual machines upon the condition that the command type is the first type, the first group of the virtual machines being obtained by searching for one or more subsets of the virtual machines such that a summation of the resource usages in the searched subset is greater than the average value, selecting a subset whose summation is minimum, and determining the selected subset as one subset of the first group of the virtual machines;</claim-text>
<claim-text>relocating the virtual machines in the host computers based on the first group of the virtual machines, and closing idle host computers that do not include any virtual machine;</claim-text>
<claim-text>powering on closed host computers upon the condition that the command type is the second type, grouping the virtual machines in a second group at a second time according to the resource usages of the virtual machines; and</claim-text>
<claim-text>relocating the virtual machines into each of the plurality of host computers based on the second group of the virtual machines.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the power management command is generated upon the condition that a specific time arrives or the resource usages of the virtual machines matches a specific criteria.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the first group of the virtual machines is obtained by:
<claim-text>(a1) obtaining the resource usages of the virtual machines from the host computers, and storing a name of each of the virtual machines and corresponding resource usage into a first data structure;</claim-text>
<claim-text>(a2) calculating a summation &#x201c;U<sub>total</sub>&#x201d; of the resource usages in the first data structure;</claim-text>
<claim-text>(a3) calculating a first average value &#x201c;Vavg<b>1</b>&#x201d; of the resource usage of each of the host computers used to allocate the virtual machines according to a formula of Vavg<b>1</b>=U<sub>total</sub>&#xf7;N<b>1</b>, wherein &#x201c;N<b>1</b>&#x201d; represents a number of the host computers used to allocate the virtual machines, an initial value of &#x201c;N<b>1</b>&#x201d; equal to a number &#x201c;N<b>0</b>&#x201d; of the host computers need to keep working;</claim-text>
<claim-text>(a4) searching for one or more subsets of the virtual machines in the first data structure such that a summation of the resource usages in the searched subset is greater than the first average value &#x201c;Vavg<b>1</b>,&#x201d; selecting a subset whose summation is minimum, and determining the selected subset as one subset of the first group of the virtual machines;</claim-text>
<claim-text>(a5) determining remaining virtual machines in the first data structure as one subset of the first group of the virtual machines upon the condition that a number of the remaining virtual machines in the first data structure is less than or equal to two;</claim-text>
<claim-text>(a6) removing the virtual machines in the selected subset from the first data structure upon the condition that the number of the remaining virtual machines in the first data structure is greater than two, executing an operation of N<b>1</b>=N<b>1</b>&#x2212;1, and returning to step (a2).</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method according to <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein the number &#x201c;N<b>0</b>&#x201d; of the host computers need to keep working is determined by a formula of N<b>0</b>=int(U<sub>total</sub>&#xf7;U<sub>threshold</sub>)+1, &#x201c;U<sub>threshold</sub>&#x201d; represents a threshold value of the CPU usage, &#x201c;int( )&#x201d; represents a function to obtain a round number of a division value of &#x201c;U<sub>total</sub>&#xf7;U<sub>threshold</sub>&#x201d;.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method according to <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein the number &#x201c;N<b>0</b>&#x201d; of the host computers need to keep working is a preset value.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the second group of the virtual machines is obtained by:
<claim-text>(b1) obtaining the resource usages of the virtual machines from the host computers, and storing a name of each of the virtual machines and corresponding resource usage into a second data structure;</claim-text>
<claim-text>(b2) calculating a summation &#x201c;U<sub>total</sub>&#x201d; of the resource usages in the second data structure;</claim-text>
<claim-text>(b3) calculating a second average value &#x201c;Vavg<b>2</b>&#x201d; of the resource usage in each of the host computers used to allocate the virtual machines according to a formula of Vavg<b>2</b>=U<sub>total</sub>&#xf7;N<b>2</b>, wherein &#x201c;N<b>2</b>&#x201d; represents a number of the host computers used to allocate the virtual machines, an initial value of &#x201c;N<b>2</b>&#x201d; equal to a total number of the host computers;</claim-text>
<claim-text>(b4) searching for one or more subsets of the virtual machines in the second data structure such that a summation of the resource usages in the searched subset is greater than the second average value &#x201c;Vavg<b>2</b>,&#x201d; selecting a subset whose summation is minimum, and determining the selected subset as one subset of the second group of the virtual machines;</claim-text>
<claim-text>(b5) determining remaining virtual machines in the second data structure as one subset of the second group of the virtual machines upon the condition that a number of the remaining virtual machines in the second data structure is less than or equal to two;</claim-text>
<claim-text>(b6) removing the virtual machines in the selected subset from the second data structure upon the condition that the number of the remaining virtual machines in the second data structure is greater than two, executing an operation of N<b>2</b>=N<b>2</b>&#x2212;1, and returning to step (b2).</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. A control computer, comprising:
<claim-text>a storage device;</claim-text>
<claim-text>at least one processor; and</claim-text>
<claim-text>one or more modules that are stored in the storage device and executed by the at least one processor, the one or more modules comprising:</claim-text>
<claim-text>a command generating module that generates a power management command for managing power of a plurality of host computers;</claim-text>
<claim-text>a command determining module that determines a command type of the power management command, the command type comprising a first type and a second type;</claim-text>
<claim-text>a grouping module that groups virtual machines installed in the plurality of host computers in a first group at a first time according to an average value of resource usages of the virtual machines upon the condition that the command type is the first type, the first group of the virtual machines being obtained by searching for one or more subsets of the virtual machines such that a summation of the resource usages in the searched subset is greater than the average value, selecting a subset whose summation is minimum, and determining the selected subset as one subset of the first group of the virtual machines;</claim-text>
<claim-text>a relocating module that relocates the virtual machines in the host computers based on the first group of the virtual machines, and closes idle host computers that do not include any virtual machine;</claim-text>
<claim-text>the grouping module that further powers on closed host computers upon the condition that the command type is the second type, groups the virtual machines in a second group at a second time according to the resource usages of the virtual machines; and</claim-text>
<claim-text>the relocating module that relocates the virtual machines into each of the plurality of host computers based on the second group of the virtual machines.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The control computer according to <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the power management command is generated upon the condition that a specific time arrives or the resource usages of the virtual machines matches a specific criteria.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The control computer according to <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the first group of the virtual machines is obtained by:
<claim-text>(a1) obtaining the resource usages of the virtual machines from the host computers, and storing a name of each of the virtual machines and corresponding resource usage into a first data structure;</claim-text>
<claim-text>(a2) calculating a summation &#x201c;U<sub>total</sub>&#x201d; of the resource usages in the first data structure;</claim-text>
<claim-text>(a3) calculating a first average value &#x201c;Vavg<b>1</b>&#x201d; of the resource usage of each of the host computers used to allocate the virtual machines according to a formula of Vavg<b>1</b>=U<sub>total</sub>&#xf7;N<b>1</b>, wherein &#x201c;N<b>1</b>&#x201d; represents a number of the host computers used to allocate the virtual machines, an initial value of &#x201c;N<b>1</b>&#x201d; equal to a number &#x201c;N<b>0</b>&#x201d; of the host computers need to keep working;</claim-text>
<claim-text>(a4) searching for one or more subsets of the virtual machines in the first data structure such that a summation of the resource usages in the searched subset is greater than the first average value &#x201c;Vavg<b>1</b>,&#x201d; selecting a subset whose summation is minimum, and determining the selected subset as one subset of the first group of the virtual machines;</claim-text>
<claim-text>(a5) determining remaining virtual machines in the first data structure as one subset of the first group of the virtual machines upon the condition that a number of the remaining virtual machines in the first data structure is less than or equal to two;</claim-text>
<claim-text>(a6) removing the virtual machines in the selected subset from the first data structure upon the condition that the number of the remaining virtual machines in the first data structure is greater than two, executing an operation of N<b>1</b>=N<b>1</b>&#x2212;1, and returning to step (a2).</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The control computer according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the number &#x201c;N<b>0</b>&#x201d; of the host computers need to keep working is determined by a formula of N<b>0</b>=int(U<sub>total</sub>&#xf7;U<sub>threshold</sub>)+1, &#x201c;U<sub>threshold</sub>&#x201d; represents a threshold value of the CPU usage, &#x201c;int( )&#x201d; represents a function to obtain a round number of a division value of &#x201c;U<sub>total</sub>&#xf7;U<sub>threshold</sub>&#x201d;.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The control computer according to <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the number &#x201c;N<b>0</b>&#x201d; of the host computers need to keep working is a preset value.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The control computer according to <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the second group of the virtual machines is obtained by:
<claim-text>(b1) obtaining the resource usages of the virtual machines from the host computers, and storing a name of each of the virtual machines and corresponding resource usage into a second data structure;</claim-text>
<claim-text>(b2) calculating a summation &#x201c;U<sub>total</sub>&#x201d; of the resource usages in the second data structure;</claim-text>
<claim-text>(b3) calculating a second average value &#x201c;Vavg<b>2</b>&#x201d; of the resource usage in each of the host computers used to allocate the virtual machines according to a formula of Vavg<b>2</b>=U<sub>total</sub>&#xf7;N<b>2</b>, wherein &#x201c;N<b>2</b>&#x201d; represents a number of the host computers used to allocate the virtual machines, an initial value of &#x201c;N<b>2</b>&#x201d; equal to a total number of the host computers;</claim-text>
<claim-text>(b4) searching for one or more subsets of the virtual machines in the second data structure such that a summation of the resource usages in the searched subset is greater than the second average value &#x201c;Vavg<b>2</b>,&#x201d; selecting a subset whose summation is minimum, and determining the selected subset as one subset of the second group of the virtual machines;</claim-text>
<claim-text>(b5) determining remaining virtual machines in the second data structure as one subset of the second group of the virtual machines upon the condition that a number of the remaining virtual machines in the second data structure is less than or equal to two;</claim-text>
<claim-text>(b6) removing the virtual machines in the selected subset from the second data structure upon the condition that the number of the remaining virtual machines in the second data structure is greater than two, executing an operation of N<b>2</b>=N<b>2</b>&#x2212;1, and returning to step (b2).</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. A non-transitory storage medium having stored thereon instructions that, when executed by a processor of a control computer, causes the control computer to perform a method for managing power of a plurality of host computers, the method comprising:
<claim-text>generating a power management command for the plurality of host computers;</claim-text>
<claim-text>determining a command type of the power management command, the command type comprising a first type and a second type;</claim-text>
<claim-text>grouping virtual machines installed in the plurality of host computers in a first group at a first time according to an average value of resource usages of the virtual machines upon the condition that the command type is the first type, the first group of the virtual machines being obtained by searching for one or more subsets of the virtual machines such that a summation of the resource usages in the searched subset is greater than the average value, selecting a subset whose summation is minimum, and determining the selected subset as one subset of the first group of the virtual machines;</claim-text>
<claim-text>relocating the virtual machines in the host computers based on the first group of the virtual machines, and closing idle host computers that do not include any virtual machine;</claim-text>
<claim-text>powering on closed host computers upon the condition that the command type is the second type, grouping the virtual machines in a second group at a second time according to the resource usages of the virtual machines; and</claim-text>
<claim-text>relocating the virtual machines into each of the plurality of host computers based on the second group of the virtual machines.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The non-transitory storage medium according to <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the power management command is generated upon the condition that a specific time arrives or the resource usages of the virtual machines matches a specific criteria.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The non-transitory storage medium according to <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the first group of the virtual machines is obtained by:
<claim-text>(a1) obtaining the resource usages of the virtual machines from the host computers, and storing a name of each of the virtual machines and corresponding resource usage into a first data structure;</claim-text>
<claim-text>(a2) calculating a summation &#x201c;U<sub>total</sub>&#x201d; of the resource usages in the first data structure;</claim-text>
<claim-text>(a3) calculating a first average value &#x201c;Vavg<b>1</b>&#x201d; of the resource usage of each of the host computers used to allocate the virtual machines according to a formula of Vavg<b>1</b>=U<sub>total</sub>&#xf7;N<b>1</b>, wherein &#x201c;N<b>1</b>&#x201d; represents a number of the host computers used to allocate the virtual machines, an initial value of &#x201c;N<b>1</b>&#x201d; equal to a number &#x201c;N<b>0</b>&#x201d; of the host computers need to keep working;</claim-text>
<claim-text>(a4) searching for one or more subsets of the virtual machines in the first data structure such that a summation of the resource usages in the searched subset is greater than the first average value &#x201c;Vavg<b>1</b>,&#x201d; selecting a subset whose summation is minimum, and determining the selected subset as one subset of the first group of the virtual machines;</claim-text>
<claim-text>(a5) determining remaining virtual machines in the first data structure as one subset of the first group of the virtual machines upon the condition that a number of the remaining virtual machines in the first data structure is less than or equal to two;</claim-text>
<claim-text>(a6) removing the virtual machines in the selected subset from the first data structure upon the condition that the number of the remaining virtual machines in the first data structure is greater than two, executing an operation of N<b>1</b>=N<b>1</b>&#x2212;1, and returning to step (a2).</claim-text>
</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The non-transitory storage medium according to <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the number &#x201c;N<b>0</b>&#x201d; of the host computers need to keep working is determined by a formula of N<b>0</b>=int(U<sub>total</sub>&#xf7;U<sub>threshold</sub>)+1, &#x201c;U<sub>threshold</sub>&#x201d; represents a threshold value of the CPU usage, &#x201c;int( )&#x201d; represents a function to obtain a round number of a division value of &#x201c;U<sub>total</sub>&#xf7;U<sub>threshold</sub>&#x201d;.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The non-transitory storage medium according to <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the number &#x201c;N<b>0</b>&#x201d; of the host computers need to keep working is a preset value.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The non-transitory storage medium according to <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the second group of the virtual machines is obtained by:
<claim-text>(b1) obtaining the resource usages of the virtual machines from the host computers, and storing a name of each of the virtual machines and corresponding resource usage into a second data structure;</claim-text>
<claim-text>(b2) calculating a summation &#x201c;U<sub>total</sub>&#x201d; of the resource usages in the second data structure;</claim-text>
<claim-text>(b3) calculating a second average value &#x201c;Vavg<b>2</b>&#x201d; of the resource usage in each of the host computers used to allocate the virtual machines according to a formula of Vavg<b>2</b>=U<sub>total</sub>&#xf7;N<b>2</b>, wherein &#x201c;N<b>2</b>&#x201d; represents a number of the host computers used to allocate the virtual machines, an initial value of &#x201c;N<b>2</b>&#x201d; equal to a total number of the host computers;</claim-text>
<claim-text>(b4) searching for one or more subsets of the virtual machines in the second data structure such that a summation of the resource usages in the searched subset is greater than the second average value &#x201c;Vavg<b>2</b>,&#x201d; selecting a subset whose summation is minimum, and determining the selected subset as one subset of the second group of the virtual machines;</claim-text>
<claim-text>(b5) determining remaining virtual machines in the second data structure as one subset of the second group of the virtual machines upon the condition that a number of the remaining virtual machines in the second data structure is less than or equal to two;</claim-text>
<claim-text>(b6) removing the virtual machines in the selected subset from the second data structure upon the condition that the number of the remaining virtual machines in the second data structure is greater than two, executing an operation of N<b>2</b>=N<b>2</b>&#x2212;1, and returning to step (b2).</claim-text>
</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The non-transitory storage medium according to <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the medium is selected from the group consisting of a hard disk drive, a compact disc, a digital video disc, and a tape drive.</claim-text>
</claim>
</claims>
</us-patent-grant>
