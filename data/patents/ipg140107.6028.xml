<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08627151-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08627151</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13647114</doc-number>
<date>20121008</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>11</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>714 473</main-classification>
</classification-national>
<invention-title id="d2e43">Estimating data availability on managed storage devices</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5720025</doc-number>
<kind>A</kind>
<name>Wilkes et al.</name>
<date>19980200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>714  612</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>5987627</doc-number>
<kind>A</kind>
<name>Rawlings, III</name>
<date>19991100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>714 48</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>7565575</doc-number>
<kind>B2</kind>
<name>Vingralek</name>
<date>20090700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>7669076</doc-number>
<kind>B2</kind>
<name>Vingralek</name>
<date>20100200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>8291260</doc-number>
<kind>B2</kind>
<name>Vingralek</name>
<date>20121000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>714  62</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2002/0124139</doc-number>
<kind>A1</kind>
<name>Baek et al.</name>
<date>20020900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>711114</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2003/0097608</doc-number>
<kind>A1</kind>
<name>Rodeheffer et al.</name>
<date>20030500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>714  7</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2004/0193808</doc-number>
<kind>A1</kind>
<name>Spencer</name>
<date>20040900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>711142</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2006/0271547</doc-number>
<kind>A1</kind>
<name>Chen et al.</name>
<date>20061100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707 10</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>2008/0010499</doc-number>
<kind>A1</kind>
<name>Vingralek</name>
<date>20080100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>2008/0010507</doc-number>
<kind>A1</kind>
<name>Vingralek</name>
<date>20080100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>2010/0100765</doc-number>
<kind>A1</kind>
<name>Vingralek</name>
<date>20100400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00013">
<othercit>U.S. Appl. No. 60/810,075, filed May 30, 2006, Vingralek.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00014">
<othercit>U.S. Appl. No. 60/810,076, filed May 30, 2006, Vingralek.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>18</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>714  61</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>714  62</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>714 473</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>5</number-of-drawing-sheets>
<number-of-figures>8</number-of-figures>
</figures>
<us-related-documents>
<continuation>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>12651625</doc-number>
<date>20100104</date>
</document-id>
<parent-grant-document>
<document-id>
<country>US</country>
<doc-number>8291260</doc-number>
</document-id>
</parent-grant-document>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>13647114</doc-number>
</document-id>
</child-doc>
</relation>
</continuation>
<continuation>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>11516299</doc-number>
<date>20060905</date>
</document-id>
<parent-grant-document>
<document-id>
<country>US</country>
<doc-number>7669076</doc-number>
</document-id>
</parent-grant-document>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>12651625</doc-number>
</document-id>
</child-doc>
</relation>
</continuation>
<us-provisional-application>
<document-id>
<country>US</country>
<doc-number>60810076</doc-number>
<date>20060530</date>
</document-id>
</us-provisional-application>
<us-provisional-application>
<document-id>
<country>US</country>
<doc-number>60810075</doc-number>
<date>20060530</date>
</document-id>
</us-provisional-application>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20130031425</doc-number>
<kind>A1</kind>
<date>20130131</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<orgname>Oracle International Corporation</orgname>
<address>
<city>Redwood Shores</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Vingralek</last-name>
<first-name>Radek</first-name>
<address>
<city>Belmont</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Kilpatrick Townsend &#x26; Stockton LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Oracle International Corporation</orgname>
<role>02</role>
<address>
<city>Redwood Shores</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Badderman</last-name>
<first-name>Scott</first-name>
<department>2114</department>
</primary-examiner>
<assistant-examiner>
<last-name>Leibovich</last-name>
<first-name>Yair</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">This disclosure describes methods, systems and software that can be used to calculate the estimated mean time to data loss for a particular configuration of a disk group. For example, a system can be used to evaluate a plurality of configurations, and/or to select (and/or allow a user to select) an optimal configuration of the disk group, based, in some cases, on the relative estimated mean times to data loss of the various configurations. This can allow, if desired, the configuration of the disk group to minimize the likelihood of data loss in the disk group.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="192.87mm" wi="101.09mm" file="US08627151-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="242.40mm" wi="191.35mm" file="US08627151-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="240.11mm" wi="176.95mm" file="US08627151-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="212.68mm" wi="100.08mm" file="US08627151-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="177.80mm" wi="142.66mm" file="US08627151-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="225.47mm" wi="164.34mm" file="US08627151-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">The present disclosure may be related to the following commonly assigned applications/patents:</p>
<p id="p-0003" num="0002">This application is a continuation of U.S. patent application Ser. No. 12/651,625, filed Jan. 4, 2010, by Vingralek and entitled &#x201c;Estimating Data Availability on Managed Storage Devices&#x201d; which is a continuation of U.S. patent application Ser. No. 11/516,299, filed Sep. 5, 2006 by Vingralek and entitled &#x201c;Estimating Data Availability on Managed Storage Devices,&#x201d; which claims the benefit of provisional U.S. Patent Application No. 60/810,076, filed May 30, 2006 by Vingralek and entitled &#x201c;Estimating Data Availability on Managed Storage Devices,&#x201d; and which also claims the benefit of provisional U.S. Patent Application No. 60/810,075, filed May 30, 2006 by Vingralek and entitled &#x201c;Selecting Optimal Repair Strategy for Mirrored Files,&#x201d; the entire disclosures of which are hereby incorporated by reference, as if set forth in full in this document, for all purposes.</p>
<p id="p-0004" num="0003">This application is related to U.S. patent application Ser. No. 11/516,068, filed on Sep. 5, 2006 by Vingralek et al, and entitled &#x201c;Selecting Optimal Repair Strategy for Mirrored Files&#x201d; the entire disclosure of which is hereby incorporated by reference, as if set forth in full in this document, for all purposes.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">COPYRIGHT STATEMENT</heading>
<p id="p-0005" num="0004">A portion of the disclosure of this patent document contains material that is subject to copyright protection. The copyright owner has no objection to the facsimile reproduction by anyone of the patent document or the patent disclosure as it appears in the Patent and Trademark Office patent file or records, but otherwise reserves all copyright rights whatsoever.</p>
<heading id="h-0003" level="1">FIELD OF THE INVENTION</heading>
<p id="p-0006" num="0005">The present invention relates hard disk management in general and in particular to the configuration of disk groups to enhance data availability.</p>
<heading id="h-0004" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0007" num="0006">In modern computer systems, including in particular enterprise-level systems, redundant storage is often used to protect against data loss (e.g., in the case of drive failure). Many data redundancy strategies and systems are known in the art, such as data mirroring, data striping, and the like. Many such systems utilize a group of hard disks to provide redundancy in case a single disk fails.</p>
<p id="p-0008" num="0007">The configuration of a typical redundant storage system often is defined by several configurable options (such as, for example, the type of data mirroring, the number of partners assigned to each disk, the amount of bandwidth dedicated to rebalance operations, etc.), and cost and/or relative effectiveness of the system in ensuring data availability, performance, etc. is generally heavily dependent on the options selected.</p>
<p id="p-0009" num="0008">While reliability statistics about individual hard disks are available (often from the manufacturers of such disks), reliability statistics about redundant storage systems are generally unpublished (at least in part because they are heavily dependent on the configuration of the particular system of interest and/or the disks incorporated in the system). Moreover, because such systems, by design, are relatively reliable, it is difficult to experimentally determine their failure rates.</p>
<p id="p-0010" num="0009">Hence, it is often difficult to evaluate the relative effectiveness of various data redundancy strategies and/or to select an optimal configuration for a data storage system,</p>
<heading id="h-0005" level="1">BRIEF SUMMARY OF THE INVENTION</heading>
<p id="p-0011" num="0010">The invention provides methods, systems and software that can be used to calculate the estimated mean time to data loss for a particular configuration of a disk group. Advantageously, certain embodiments can be used to evaluate a plurality of configurations, and to select (and/or allow a user to select) an optimal configuration of the disk group, based, in some cases, on the relative estimated mean times to data loss of the various configurations. This can allow, if desired, the configuration of the disk group to minimize the likelihood of data loss in the disk group.</p>
<p id="p-0012" num="0011">Various embodiments of the invention provide, inter alia, methods, systems and software products. In some embodiments of the invention, a system (such as a computer system) might be configured to implement a method of the invention. Merely by way of example, the system might comprise, inter alia, one or more processors, along with instructions (which might be stored on a disk and/or other computer readable medium) executable by the processors to perform the method. In other embodiments, a software product might embody the method, for example as a set of instructions (which again, might be stored on a disk and/or other computer readable medium), which are executable by one or more computers to execute the method.</p>
<p id="p-0013" num="0012">Merely by way of example, in accordance with one set of embodiments, a method of estimating the availability of data might be performed in a system having a set of disks comprising a plurality of hard disks. The method might comprise identifying a set of operating characteristics for each of a plurality of hard disks. In some cases, the method further comprises calculating (perhaps based at least in part on some or all of the operating characteristics of the hard disks), a first estimated mean time to data loss the set of disks. The first estimated mean time to data loss might correspond to a first configuration of the set of disks. Similarly, the method might further comprise calculating a second estimated mean time to data loss, corresponding to a second configuration of the set of disks.</p>
<p id="p-0014" num="0013">In a set of embodiments, the method further comprises selecting, from among at least the first configuration and the second configuration, a configuration with the greatest estimated mean time to data loss. In a particular embodiment, the method further comprises configuring a disk group from the set of disks, according to the selected configuration.</p>
<p id="p-0015" num="0014">As noted above, methods of the invention might be implemented as software, and in particular as instructions executable by one or more computers. Merely by way of example, a system for estimating the availability of data might comprise a processor and a computer readable medium in communication with the processor. On some cases, the system might also comprise a set of disks). The computer readable medium might comprise a set of instructions executable by the processor to perform one or more methods of the invention.</p>
<p id="p-0016" num="0015">By way of example, in a certain embodiment, a software program (i.e., a set of instructions) comprises instructions to receive information about each of a plurality of hard disks and/or to identify a set of operating characteristics for each of the plurality of hard disks. The set of instructions might further comprise instructions to calculate (perhaps based at least in part on the operating characteristics of the hard disks), a plurality of values. Each value represents an estimated mean time to data loss for a different configuration of the plurality of hard disks. There might be further instructions to produce a recommended configuration of the plurality of hard disks, based at least in part on the plurality of values. In some cases, the set of instructions might further comprise instructions to configure a disk group from the plurality of disks (perhaps according to the recommended configuration).</p>
<p id="p-0017" num="0016">In some cases, a first value might represent an estimated mean time to data loss in a double-mirroring configuration, in which a data block on a first hard disk is mirrored on one other hard disk. In other cases, a second value might represent an estimated mean time to data loss in a triple-mirroring configuration, wherein a data block on a first hard disk is mirrored on each of two other hard disks.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0006" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0018" num="0017">A further understanding of the nature and advantages of the present invention may be realized by reference to the remaining portions of the specification and the drawings wherein like reference numerals are used throughout the several drawings to refer to similar components. In some instances, a sublabel is associated with a reference numeral to denote one of multiple similar components. When reference is made to a reference numeral without specification to an existing sublabel, it is intended to refer to all such multiple similar components.</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram illustrating a computer system having two disk groups, in accordance with various embodiments of the invention.</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIGS. 2A-2D</figref> are state diagrams illustrating Markov chains representing transition states for various modes of disk failures.</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 3</figref> is process flow diagram illustrating a method of estimating data availability in a disk group, in accordance with various embodiments of the invention.</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 4</figref> is a generalized schematic diagram illustrating a computer system that can be used in accordance with various embodiments of the invention.</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 5</figref> is a block diagram of a networked computer system that can be used in accordance with various embodiments of the invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0007" level="1">DETAILED DESCRIPTION OF THE INVENTION</heading>
<heading id="h-0008" level="1">1. Overview</heading>
<p id="p-0024" num="0023">One set of embodiments provides systems, methods and/or software products for estimating the availability of data in a disk group, and optionally for configuring a disk group (or recommending a configuration) that maximizes data availability, perhaps depending on various constraints or parameters (including cost, performance, etc.). Depending on various parameters, for example, data availability may be enhanced through specific data mirroring and/or disk partnering configurations, as described in more detail below. Advantageously, then, embodiments of the invention can help a user or administrator to understand the impact on data availability of various alternative configurations, and, in some cases, to configure a disk group according to an optimal configuration.</p>
<p id="p-0025" num="0024">As used herein, the term &#x201c;data availability&#x201d; indicates the likelihood that all data stored in a disk group will be available at a given time. One way of expressing data availability is through &#x201c;mean time to data loss,&#x201d; which estimates how frequently a data block will be lost in the disk group. One factor that significantly affects data availability is data redundancy, in which data blocks are mirrored on two or more disks, such that a single disk failure will not render the data on that disk unavailable instead, each of the mirrored copies must be simultaneously unavailable in order to render the data block unavailable.</p>
<p id="p-0026" num="0025">Consider, for the example, the system <b>100</b> of <figref idref="DRAWINGS">FIG. 1</figref>. The system <b>100</b> includes a computer <b>100</b> (which might be a server, such as, for example, those described with respect to <figref idref="DRAWINGS">FIG. 6</figref>, below, and/or might be any other appropriate computer) and a plurality of hard disks <b>110</b>. (While, for ease of description, this document uses the term &#x201c;hard disk&#x201d; to refer to non-volatile storage, the term should be construed broadly to mean any storage medium that provides read and write access, including, merely by way of example, flash RAM and/or ROM, removable storage devices, etc.).</p>
<p id="p-0027" num="0026">The disks <b>110</b> are arranged into disk groups <b>115</b>. As defined herein, a &#x201c;disk group&#x201d; is any logical arrangement of disks to provide collective storage of information. There are a wide variety of ways in which disk groups can be implemented and/or organized. Merely by way of example, a disk group might be a redundant array of independent disks (&#x201c;RAID&#x201d;), which often is implemented via a hardware controller and/or a specific software application on the controlling computer. One skilled in the art will appreciate that there are several structures into which RAIDS are commonly organized. Merely by way of example RAID level 0 provides a data striping arrangement, in which data is striped across multiple disks in order to improve performance of the array, but provides no fault tolerance. RAID level 1 provides disk mirroring, in which the contents of one drive are mirrored on another drive. Another common arrangement, RAID level 5, provides data striping across independent disks with distributed parity blocks, while RAID level 6 provides data striping with dual parity systems, for enhanced fault tolerance. Other RAID arrangements are common as well.</p>
<p id="p-0028" num="0027">As an alternative, or addition, to RAID, some software applications are configured to create and/or manage disk groups as well. Merely by way of example, Oracle Corporation's Automatic Storage Management&#x2122; (ASM) package, which is available with the Oracle 10g&#x2122; database management system, provides disk group management via a software application. In this context, each disk <b>110</b> can be considered to include either a single disk or a multi-disk array, such as a RAM system&#x2014;that is, the software package, such as ASM or the like, might be configured to treat a RAID system as a single disk when configuring a disk group, such that a single group <b>115</b> might comprise multiple RAID systems, each acting logically as a single disk. Other systems and methods of creating and/or managing disk groups are possible as well.</p>
<p id="p-0029" num="0028">As noted above, there are various possible arrangements of disks <b>110</b> (or RAID systems) in a group <b>115</b>. Merely by way of example, the disk group <b>115</b><i>a </i>comprises three disks <b>110</b><i>a</i>-<i>c </i>and provides data redundancy among those disks. For instance, one disk <b>110</b><i>a </i>stores data blocks (also referred to herein as &#x201c;extents&#x201d;) A-F, while another disk <b>110</b><i>b </i>stores data blocks D-I and a third disk <b>110</b><i>c </i>stores data blocks A-C and G-I. This is known as a &#x201c;double-mirroring&#x201d; configuration (and is also referred to herein as a &#x201c;normal redundancy&#x201d; or &#x201c;normally-redundant&#x201d; configuration), in which any given block on a particular disk will have a mirror copy on one other disk.</p>
<p id="p-0030" num="0029">It should be noted that a given data block with the same label (such as data block A) stored on two different disks comprises identical copies of the same information. Hence, if a disk <b>110</b><i>a </i>fails, the data blocks A-F stored on that disk <b>110</b><i>a </i>can be recreated from their copies on the other disks <b>110</b><i>b</i>-<i>c </i>in the group. (It should also be noted that <figref idref="DRAWINGS">FIG. 1</figref> is greatly simplified, for ease of description and illustration).</p>
<p id="p-0031" num="0030">The disk group <b>115</b><i>b </i>of <figref idref="DRAWINGS">FIG. 1</figref> provides an illustration of a triple-mirroring configuration (also referred to herein as a &#x201c;high redundancy&#x201d; or &#x201c;highly-redundant&#x201d; configuration), in which a data block on any particular disk has mirror copies on at least two other disks in the group (and, in an exemplary embodiment, on exactly two other disks in the group). Hence, in the disk group <b>115</b><i>b </i>of <figref idref="DRAWINGS">FIG. 1</figref>, since there are only three disks, each disk <b>110</b><i>e</i>-<i>f </i>stores the same data blocks (J-Q), so each data block on a particular disk <b>110</b><i>e </i>has identical copies on two other disks <b>110</b><i>f </i>and <b>110</b><i>g</i>. (It should be noted, however, in groups with more than three disks, each disk might not store the same information as all of the other disks.) As noted above, other arrangements (such as striping and/or striping with parity) are possible as well, although not illustrated on <figref idref="DRAWINGS">FIG. 1</figref>.</p>
<p id="p-0032" num="0031">in accordance with an embodiment of the invention, each disk <b>110</b> also stores a set of metadata about the data blocks. The metadata includes, without limitation, information about whether a given data block on a particular disk is current or stale. To illustrate this concept, consider what happens when a block needs to be written to a disk. If the disk is available, the block is written and the metadata for that block is marked as current. If the disk is unavailable or the data otherwise cannot be written, however (e.g., through a disk failure, write error, etc.), the data block is marked as stale in the metadata, indicating that the data block was not successfully written to the disk.</p>
<p id="p-0033" num="0032">In accordance with embodiments of the invention, the configuration of a disk group can significantly affect the data availability of that disk group. Merely by way of example, the number of partners that each disk has, the type of mirroring strategy (e.g., double mirroring, triple mirroring, etc.), the characteristics of individual disks in the group (such as mean time to failure (&#x201c;MTTF&#x201d;), data transfer rate, and the like) and the rebalance rate of the disk group (i.e., the proportion of the disk I/O that is used for rebalance operations) each can affect the data availability of the group.</p>
<heading id="h-0009" level="1">2. Analytical Models</heading>
<p id="p-0034" num="0033">Embodiments of the invention, then, can be used to estimate data availability given one or more proposed disk group configurations. In accordance with a specific set of embodiments, various analytical models can be used to evaluate data availability. Some models consider the effects of various disk failures and/or preventative techniques. Merely by way of example, in some cases, read errors may be considered or neglected, the effects of data redundancy (both normal redundancy and high redundancy, as described in detail below) may be considered, the benefits of disk scrubbing may be considered, and/or the like.</p>
<p id="p-0035" num="0034">As noted above, a disk group generally will comprise a plurality of hard disks. In accordance with the analytical models described herein, each disk is characterized by its failure rate &#x3bb;, which is a reciprocal of the disk's mean time to failure. For purposes of these models, it is assumed that a failure is a whole-disk failure, which renders all data blocks on the failed the disk unavailable. It is also assumed that the failure the rate is fixed (i.e., does not change with the disks' lifetime) and that disk failures are independent, which is valid, considering disks that are partners.</p>
<p id="p-0036" num="0035">In this document, two (or more) disks are referred to as &#x201c;disk partners&#x201d; or &#x201c;partners&#x201d; if the disk group is configured so that those disks can hold redundant copies of the same extent. A disk group can be configured to have multiple sets of disk partners, such that in a disk group having disks d<sub>1</sub>, d<sub>2</sub>, d<sub>3</sub>, and d<sub>4</sub>, Disks d<sub>1 </sub>and d<sub>s </sub>might be disk partners, while disks d<sub>3 </sub>and d<sub>4 </sub>might be disk partners. Alternatively, disks d<sub>1</sub>, d<sub>2</sub>, d<sub>3</sub>, and d<sub>4</sub>, might all be disk partners. (For purposes of the models discussed herein, it is assumed that disk partnership relationships are both transitive and symmetric.) In the models discussed herein, it is assumed that partner disks fail independently they should not share a common controller or other single point of failure).</p>
<p id="p-0037" num="0036">As noted above, the term &#x201c;extent&#x201d; is used herein to describe a data block; more specifically, the term &#x201c;virtual extent&#x201d; is used to describe a data block that is stored on two or more disks in a group, while the term &#x201c;physical extent&#x201d; refers to each individual copy of that data. Hence, if a virtual extent is stored on disks d<sub>1 </sub>and d<sub>2</sub>, there is a first physical extent on disk d<sub>1 </sub>holding that data and a second physical extent on disk d<sub>2 </sub>holding a copy of the same data. It should be noted that, while a partner disk may have a redundant copy of an extent on another partner disk, it need not necessarily have one. For example, if each disk in a particular group has two partners, and normal redundancy is implemented, a copy of each physical extent on the disk will reside on one (but not both) of the partners, it should also be noted that such copies can be distributed among partners, such that no single partner need have copies of all of the physical extents on a particular disk.</p>
<p id="p-0038" num="0037">These models consider a disk group (which might be configured using hardware and/or low-level software tools, such as RAID, and/or higher-level software tools, such as database storage managers, of which Oracle ASM is an example) with n disks, where each disk can have up to k partners. For simplicity, it is assumed that each disk has exactly k partners.</p>
<p id="p-0039" num="0038">In addition to whole-disk failures, individual blocks of a disk may exhibit unrecoverable read errors, (i.e., errors that cannot be recovered from using the disk controller's error correction code (&#x201c;ECC&#x201d;) mechanism. The unrecoverable errors occur with a probability P<sub>block</sub>.</p>
<p id="p-0040" num="0039">Following a failure of i &#x3b5; {1,2} disks that are partners of each other, the redundancy of all allocated files can be restored by a rebalance operation at a rate &#x3bc;<sub>i</sub>. (A rebalance operation is one in which data blocks which are also referred to herein as extents on a failed disk are copied, usually from mirrored blocks on a partner disk, to new disks, to restore the required redundancy to the data blocks.) For purposes of these models, it is assumed that the rebalance operation following a disk drop is initiated after a timeout t<sub>f </sub>and is constrained (by input-output (&#x201c;I/O&#x201d;) limitations) on reading the redundant copies of the extents allocated on the partners of the failed disks (this is likely to be true if n&#x3e;k). Therefore, the repair rate can be expressed as</p>
<p id="p-0041" num="0040">
<maths id="MATH-US-00001" num="00001">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <msub>
          <mi>&#x3bc;</mi>
          <mi>i</mi>
        </msub>
        <mo>=</mo>
        <msup>
          <mrow>
            <mo>(</mo>
            <mrow>
              <mfrac>
                <mi>f</mi>
                <mrow>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mi>k</mi>
                      <mo>-</mo>
                      <mi>i</mi>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                  <mo>&#x2062;</mo>
                  <mi>rb</mi>
                </mrow>
              </mfrac>
              <mo>+</mo>
              <msub>
                <mi>t</mi>
                <mi>f</mi>
              </msub>
            </mrow>
            <mo>)</mo>
          </mrow>
          <mrow>
            <mo>-</mo>
            <mn>1</mn>
          </mrow>
        </msup>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>1</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
where f is the expected size of all extents allocated on a disk, b is the maximum bandwidth of a disk and r is the fraction of the bandwidth used by the rebalance operation.
</p>
<p id="p-0042" num="0041">F<sub>i </sub>denotes a disk group failure state with i pair-wise partnering disks failed. Each disk group has exactly one absorbing state (i.e., a state that cannot be transitioned from). To illustrate this concept, <figref idref="DRAWINGS">FIG. 2A</figref> illustrates a Markov chain <b>200</b> for a disk group with normal redundancy (i.e., where there are two physical extents, on two different disks, corresponding to each virtual extent). State F<sub>0 </sub><b>205</b> indicates a normal state, in which all disks are operating available. State F<sub>1 </sub><b>210</b> indicates a failure state, in which a disk has failed, leaving a single copy of data on the failed disk available (from the failed disk's partner). Because the data can be restored from the partner, state F<sub>1 </sub>is considered non-absorbing (i.e., transition from state F<sub>1 </sub><b>210</b> to state F<sub>0 </sub><b>205</b> can be achieved by restoring the redundancy of data from the partner). In <figref idref="DRAWINGS">FIG. 2A</figref>, state F<sub>2 </sub><b>215</b> indicates a failure state in which a disk and its partner have both failed. State F<sub>2 </sub>can be considered absorbing, since there is no available copy of the data (since the disk and its partner collectively held all available copies of the data). As another example, <figref idref="DRAWINGS">FIG. 2B</figref> illustrates a Markov chain <b>220</b> for a disk group with high redundancy (i.e., where each disk has two partner disks). In this high redundancy configuration, state F<sub>3 </sub><b>225</b> is absorbing, since it represents a condition where a disk and both of its partners have failed, whereas state F<sub>2 </sub>is not absorbing, since even if a disk and one of its partners fails, the data is available from the second partner. A random variable t<sub>i </sub>denotes the time to transition, from state F<sub>i </sub>to the absorbing state. Therefore, E(t<sub>0</sub>) represents mean time to failure of a disk group.</p>
<p id="p-0043" num="0042">A. Normal Redundancy</p>
<p id="p-0044" num="0043">As noted above, <figref idref="DRAWINGS">FIG. 2A</figref> illustrates a Markov chain, for a disk group with normal redundancy. The transition from state F<sub>0 </sub>to F<sub>1 </sub>occurs when any disk d in the disk group fails. The transition from state F<sub>1 </sub>to the absorbing state F<sub>2 </sub>occurs when a partner of disk d fails.</p>
<p id="p-0045" num="0044">The Markov chain <b>200</b> of <figref idref="DRAWINGS">FIG. 2A</figref> constrains the expected values of t<sub>i </sub>by</p>
<p id="p-0046" num="0045">
<maths id="MATH-US-00002" num="00002">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mi>E</mi>
          <mo>&#x2061;</mo>
          <mrow>
            <mo>(</mo>
            <msub>
              <mi>t</mi>
              <mn>0</mn>
            </msub>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mfrac>
            <mn>1</mn>
            <mrow>
              <mi>n</mi>
              <mo>&#x2062;</mo>
              <mstyle>
                <mspace width="0.3em" height="0.3ex"/>
              </mstyle>
              <mo>&#x2062;</mo>
              <mi>&#x3bb;</mi>
            </mrow>
          </mfrac>
          <mo>+</mo>
          <mrow>
            <mi>E</mi>
            <mo>&#x2061;</mo>
            <mrow>
              <mo>(</mo>
              <msub>
                <mi>t</mi>
                <mn>1</mn>
              </msub>
              <mo>)</mo>
            </mrow>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>2</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mi>E</mi>
          <mo>&#x2061;</mo>
          <mrow>
            <mo>(</mo>
            <msub>
              <mi>t</mi>
              <mn>1</mn>
            </msub>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mfrac>
            <mn>1</mn>
            <mrow>
              <msub>
                <mi>&#x3bc;</mi>
                <mn>1</mn>
              </msub>
              <mo>+</mo>
              <mrow>
                <mi>k</mi>
                <mo>&#x2062;</mo>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
                <mo>&#x2062;</mo>
                <mi>&#x3bb;</mi>
              </mrow>
            </mrow>
          </mfrac>
          <mo>+</mo>
          <mrow>
            <mfrac>
              <msub>
                <mi>&#x3bc;</mi>
                <mn>1</mn>
              </msub>
              <mrow>
                <msub>
                  <mi>&#x3bc;</mi>
                  <mn>1</mn>
                </msub>
                <mo>+</mo>
                <mrow>
                  <mi>k</mi>
                  <mo>&#x2062;</mo>
                  <mstyle>
                    <mspace width="0.3em" height="0.3ex"/>
                  </mstyle>
                  <mo>&#x2062;</mo>
                  <mi>&#x3bb;</mi>
                </mrow>
              </mrow>
            </mfrac>
            <mo>&#x2062;</mo>
            <mrow>
              <mi>E</mi>
              <mo>&#x2061;</mo>
              <mrow>
                <mo>(</mo>
                <msub>
                  <mi>t</mi>
                  <mn>0</mn>
                </msub>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>3</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
which solves for E(t<sub>0</sub>) as
</p>
<p id="p-0047" num="0046">
<maths id="MATH-US-00003" num="00003">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mi>E</mi>
          <mo>&#x2061;</mo>
          <mrow>
            <mo>(</mo>
            <msub>
              <mi>t</mi>
              <mn>0</mn>
            </msub>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>=</mo>
        <mfrac>
          <mrow>
            <msub>
              <mi>&#x3bc;</mi>
              <mn>1</mn>
            </msub>
            <mo>+</mo>
            <mrow>
              <mi>n</mi>
              <mo>&#x2062;</mo>
              <mstyle>
                <mspace width="0.3em" height="0.3ex"/>
              </mstyle>
              <mo>&#x2062;</mo>
              <mi>&#x3bb;</mi>
            </mrow>
            <mo>+</mo>
            <mrow>
              <mi>k</mi>
              <mo>&#x2062;</mo>
              <mstyle>
                <mspace width="0.3em" height="0.3ex"/>
              </mstyle>
              <mo>&#x2062;</mo>
              <mi>&#x3bb;</mi>
            </mrow>
          </mrow>
          <mrow>
            <mi>nk</mi>
            <mo>&#x2062;</mo>
            <mstyle>
              <mspace width="0.3em" height="0.3ex"/>
            </mstyle>
            <mo>&#x2062;</mo>
            <msup>
              <mi>&#x3bb;</mi>
              <mn>2</mn>
            </msup>
          </mrow>
        </mfrac>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>4</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0048" num="0047">For typical disks and n&#x3c;10,000, this simplifies to</p>
<p id="p-0049" num="0048">
<maths id="MATH-US-00004" num="00004">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mi>E</mi>
          <mo>&#x2061;</mo>
          <mrow>
            <mo>(</mo>
            <msub>
              <mi>t</mi>
              <mn>0</mn>
            </msub>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>&#x2248;</mo>
        <mfrac>
          <msub>
            <mi>&#x3bc;</mi>
            <mn>1</mn>
          </msub>
          <mrow>
            <mi>nk</mi>
            <mo>&#x2062;</mo>
            <mstyle>
              <mspace width="0.3em" height="0.3ex"/>
            </mstyle>
            <mo>&#x2062;</mo>
            <msup>
              <mi>&#x3bb;</mi>
              <mn>2</mn>
            </msup>
          </mrow>
        </mfrac>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>5</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0050" num="0049">B. High Redundancy</p>
<p id="p-0051" num="0050">Also as noted above <figref idref="DRAWINGS">FIG. 29</figref> illustrates a Markov chain <b>200</b> for a high redundancy configuration, in which each virtual extent corresponds to three physical extents. In this configuration, transitions between states F<sub>0 </sub><b>205</b>, F<sub>1 </sub><b>210</b>, and F<sub>2 </sub><b>215</b> occur at the same rates as in a normal redundancy group. However, as noted above, state F<sub>2 </sub>is not absorbing. Assuming that in state F<sub>2 </sub>there are two failed partner disks d<sub>1 </sub>and d<sub>2</sub>, the transition to state F<sub>3 </sub>occurs whenever one of the remaining k&#x2212;1 partners of either d<sub>1 </sub>or d<sub>2 </sub></p>
<p id="p-0052" num="0051">in this model, the expected values of t<sub>i </sub>are constrained by</p>
<p id="p-0053" num="0052">
<maths id="MATH-US-00005" num="00005">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mi>E</mi>
          <mo>&#x2062;</mo>
          <mrow>
            <mo>(</mo>
            <msub>
              <mi>t</mi>
              <mn>0</mn>
            </msub>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mfrac>
            <mn>1</mn>
            <mrow>
              <mi>n</mi>
              <mo>&#x2062;</mo>
              <mstyle>
                <mspace width="0.3em" height="0.3ex"/>
              </mstyle>
              <mo>&#x2062;</mo>
              <mi>&#x3bb;</mi>
            </mrow>
          </mfrac>
          <mo>+</mo>
          <mrow>
            <mi>E</mi>
            <mo>&#x2061;</mo>
            <mrow>
              <mo>(</mo>
              <msub>
                <mi>t</mi>
                <mn>1</mn>
              </msub>
              <mo>)</mo>
            </mrow>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>6</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mi>E</mi>
          <mo>&#x2061;</mo>
          <mrow>
            <mo>(</mo>
            <msub>
              <mi>t</mi>
              <mn>1</mn>
            </msub>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mfrac>
            <mn>1</mn>
            <mrow>
              <msub>
                <mi>&#x3bc;</mi>
                <mn>1</mn>
              </msub>
              <mo>+</mo>
              <mrow>
                <mi>k</mi>
                <mo>&#x2062;</mo>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
                <mo>&#x2062;</mo>
                <mi>&#x3bb;</mi>
              </mrow>
            </mrow>
          </mfrac>
          <mo>+</mo>
          <mrow>
            <mfrac>
              <msub>
                <mi>&#x3bc;</mi>
                <mn>1</mn>
              </msub>
              <mrow>
                <msub>
                  <mi>&#x3bc;</mi>
                  <mn>1</mn>
                </msub>
                <mo>+</mo>
                <mrow>
                  <mi>k</mi>
                  <mo>&#x2062;</mo>
                  <mstyle>
                    <mspace width="0.3em" height="0.3ex"/>
                  </mstyle>
                  <mo>&#x2062;</mo>
                  <mi>&#x3bb;</mi>
                </mrow>
              </mrow>
            </mfrac>
            <mo>&#x2062;</mo>
            <mrow>
              <mi>E</mi>
              <mo>&#x2061;</mo>
              <mrow>
                <mo>(</mo>
                <msub>
                  <mi>t</mi>
                  <mn>0</mn>
                </msub>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
          <mo>+</mo>
          <mrow>
            <mfrac>
              <mrow>
                <mi>k</mi>
                <mo>&#x2062;</mo>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
                <mo>&#x2062;</mo>
                <mi>&#x3bb;</mi>
              </mrow>
              <mrow>
                <msub>
                  <mi>&#x3bc;</mi>
                  <mn>1</mn>
                </msub>
                <mo>+</mo>
                <mrow>
                  <mi>k</mi>
                  <mo>&#x2062;</mo>
                  <mstyle>
                    <mspace width="0.3em" height="0.3ex"/>
                  </mstyle>
                  <mo>&#x2062;</mo>
                  <mi>&#x3bb;</mi>
                </mrow>
              </mrow>
            </mfrac>
            <mo>&#x2062;</mo>
            <mrow>
              <mi>E</mi>
              <mo>&#x2061;</mo>
              <mrow>
                <mo>(</mo>
                <msub>
                  <mi>t</mi>
                  <mn>2</mn>
                </msub>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>7</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mi>E</mi>
          <mo>&#x2061;</mo>
          <mrow>
            <mo>(</mo>
            <msub>
              <mi>t</mi>
              <mn>2</mn>
            </msub>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>=</mo>
        <mrow>
          <mfrac>
            <mn>1</mn>
            <mrow>
              <msub>
                <mi>&#x3bc;</mi>
                <mn>2</mn>
              </msub>
              <mo>+</mo>
              <mrow>
                <mn>2</mn>
                <mo>&#x2062;</mo>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mi>k</mi>
                    <mo>-</mo>
                    <mn>1</mn>
                  </mrow>
                  <mo>)</mo>
                </mrow>
                <mo>&#x2062;</mo>
                <mi>&#x3bb;</mi>
              </mrow>
            </mrow>
          </mfrac>
          <mo>+</mo>
          <mrow>
            <mfrac>
              <msub>
                <mi>&#x3bc;</mi>
                <mn>2</mn>
              </msub>
              <mrow>
                <msub>
                  <mi>&#x3bc;</mi>
                  <mn>2</mn>
                </msub>
                <mo>+</mo>
                <mrow>
                  <mn>2</mn>
                  <mo>&#x2062;</mo>
                  <mrow>
                    <mo>(</mo>
                    <mrow>
                      <mi>k</mi>
                      <mo>-</mo>
                      <mn>1</mn>
                    </mrow>
                    <mo>)</mo>
                  </mrow>
                  <mo>&#x2062;</mo>
                  <mi>&#x3bb;</mi>
                </mrow>
              </mrow>
            </mfrac>
            <mo>&#x2062;</mo>
            <mrow>
              <mi>E</mi>
              <mo>&#x2061;</mo>
              <mrow>
                <mo>(</mo>
                <msub>
                  <mi>t</mi>
                  <mn>0</mn>
                </msub>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>8</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
which solves for E(t<sub>0</sub>) as
</p>
<p id="p-0054" num="0053">
<maths id="MATH-US-00006" num="00006">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mi>E</mi>
          <mo>&#x2061;</mo>
          <mrow>
            <mo>(</mo>
            <msub>
              <mi>t</mi>
              <mn>0</mn>
            </msub>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>=</mo>
        <mfrac>
          <mtable>
            <mtr>
              <mtd>
                <mrow>
                  <mrow>
                    <msub>
                      <mi>&#x3bc;</mi>
                      <mn>1</mn>
                    </msub>
                    <mo>&#x2062;</mo>
                    <msub>
                      <mi>&#x3bc;</mi>
                      <mn>2</mn>
                    </msub>
                  </mrow>
                  <mo>+</mo>
                  <mrow>
                    <mn>2</mn>
                    <mo>&#x2062;</mo>
                    <mstyle>
                      <mspace width="0.3em" height="0.3ex"/>
                    </mstyle>
                    <mo>&#x2062;</mo>
                    <mrow>
                      <mi>k</mi>
                      <mo>&#x2061;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mrow>
                          <mi>k</mi>
                          <mo>-</mo>
                          <mn>1</mn>
                        </mrow>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>&#x2062;</mo>
                    <msup>
                      <mi>&#x3bb;</mi>
                      <mn>2</mn>
                    </msup>
                  </mrow>
                  <mo>+</mo>
                  <mrow>
                    <mn>2</mn>
                    <mo>&#x2062;</mo>
                    <mstyle>
                      <mspace width="0.3em" height="0.3ex"/>
                    </mstyle>
                    <mo>&#x2062;</mo>
                    <mrow>
                      <mi>n</mi>
                      <mo>&#x2061;</mo>
                      <mrow>
                        <mo>(</mo>
                        <mrow>
                          <mi>k</mi>
                          <mo>-</mo>
                          <mn>1</mn>
                        </mrow>
                        <mo>)</mo>
                      </mrow>
                    </mrow>
                    <mo>&#x2062;</mo>
                    <msup>
                      <mi>&#x3bb;</mi>
                      <mn>2</mn>
                    </msup>
                  </mrow>
                  <mo>+</mo>
                </mrow>
              </mtd>
            </mtr>
            <mtr>
              <mtd>
                <mrow>
                  <mrow>
                    <mi>nk</mi>
                    <mo>&#x2062;</mo>
                    <mstyle>
                      <mspace width="0.3em" height="0.3ex"/>
                    </mstyle>
                    <mo>&#x2062;</mo>
                    <msup>
                      <mi>&#x3bb;</mi>
                      <mn>2</mn>
                    </msup>
                  </mrow>
                  <mo>+</mo>
                  <mrow>
                    <mi>k</mi>
                    <mo>&#x2062;</mo>
                    <mstyle>
                      <mspace width="0.3em" height="0.3ex"/>
                    </mstyle>
                    <mo>&#x2062;</mo>
                    <msub>
                      <mi>&#x3bb;&#x3bc;</mi>
                      <mn>2</mn>
                    </msub>
                  </mrow>
                  <mo>+</mo>
                  <mrow>
                    <mi>n</mi>
                    <mo>&#x2062;</mo>
                    <mstyle>
                      <mspace width="0.3em" height="0.3ex"/>
                    </mstyle>
                    <mo>&#x2062;</mo>
                    <msub>
                      <mi>&#x3bb;&#x3bc;</mi>
                      <mn>2</mn>
                    </msub>
                  </mrow>
                  <mo>+</mo>
                  <mrow>
                    <mn>2</mn>
                    <mo>&#x2062;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <mi>k</mi>
                        <mo>-</mo>
                        <mn>1</mn>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                    <mo>&#x2062;</mo>
                    <msub>
                      <mi>&#x3bc;</mi>
                      <mn>1</mn>
                    </msub>
                    <mo>&#x2062;</mo>
                    <mi>&#x3bb;</mi>
                  </mrow>
                </mrow>
              </mtd>
            </mtr>
          </mtable>
          <mrow>
            <mn>2</mn>
            <mo>&#x2062;</mo>
            <mstyle>
              <mspace width="0.3em" height="0.3ex"/>
            </mstyle>
            <mo>&#x2062;</mo>
            <mrow>
              <mi>nk</mi>
              <mo>&#x2061;</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>k</mi>
                  <mo>-</mo>
                  <mn>1</mn>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>&#x2062;</mo>
            <msup>
              <mi>&#x3bb;</mi>
              <mn>3</mn>
            </msup>
          </mrow>
        </mfrac>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>9</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0055" num="0054">For typical disks and n&#x3c;10,000, this can be simplified to:</p>
<p id="p-0056" num="0055">
<maths id="MATH-US-00007" num="00007">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mi>E</mi>
          <mo>&#x2061;</mo>
          <mrow>
            <mo>(</mo>
            <msub>
              <mi>t</mi>
              <mn>0</mn>
            </msub>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>&#x2248;</mo>
        <mfrac>
          <mrow>
            <msub>
              <mi>&#x3bc;</mi>
              <mn>1</mn>
            </msub>
            <mo>&#x2062;</mo>
            <msub>
              <mi>&#x3bc;</mi>
              <mn>2</mn>
            </msub>
          </mrow>
          <mrow>
            <mn>2</mn>
            <mo>&#x2062;</mo>
            <mstyle>
              <mspace width="0.3em" height="0.3ex"/>
            </mstyle>
            <mo>&#x2062;</mo>
            <mrow>
              <mi>nk</mi>
              <mo>&#x2061;</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mi>k</mi>
                  <mo>-</mo>
                  <mn>1</mn>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>&#x2062;</mo>
            <msup>
              <mi>&#x3bb;</mi>
              <mn>3</mn>
            </msup>
          </mrow>
        </mfrac>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>10</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0057" num="0056">C. Normal Redundancy with Read Errors</p>
<p id="p-0058" num="0057">In some cases, unrecoverable read errors can effect the estimate of data availability. Hence, <figref idref="DRAWINGS">FIG. 2C</figref> illustrates a Markov chain <b>240</b> representing a special case of the Markov chain <b>200</b> of <figref idref="DRAWINGS">FIG. 2A</figref>, described above, to account for unrecoverable read errors. For simplicity, this model does not attempt to account for double or triple read errors of the same block, as they are unlikely.</p>
<p id="p-0059" num="0058">In this model,
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>q</i><sub>i</sub>=1&#x2212;(1&#x2212;<i>p</i><sub>block</sub>)<sup>if&#x2032;</sup>&#x2003;&#x2003;(11)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
can be considered the probability that a read fails during a rebalance following a failure of i partner disks, where p<sub>block </sub>is the probability a block read fails and is the expected size of extents allocated to a disk expressed in the number of blocks.
</p>
<p id="p-0060" num="0059">The probability that block cannot be read (p<sub>block</sub>) can be expressed as
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>p</i><sub>block</sub>=1&#x2212;(1&#x2212;<i>p</i><sub>bit</sub>)<sup>B</sup>&#x2003;&#x2003;(12)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where p<sub>bit </sub>is the probability of an unrecoverable bit read error (as commonly provided by disk manufacturers) and B is the size of a disk block in bits.
</p>
<p id="p-0061" num="0060">The modified Markov chain <b>240</b> of <figref idref="DRAWINGS">FIG. 2C</figref> transitions from state F<sub>1 </sub><b>210</b> to state F<sub>0 </sub><b>205</b> at a rate (1&#x2212;q<sub>1</sub>)&#x3bc;<sub>1 </sub>when the rebalance succeeds. It transitions from state F<sub>1 </sub><b>210</b> to a new state F<sub>1</sub>&#x2032; at a rate q<sub>1</sub>&#x3bc;<sub>1 </sub>when the rebalance fails due to a read error. Since Markov chain transitions occur at exponentially distributed times, the two absorbing states F<sub>2 </sub>and F<sub>1</sub>&#x2032; can be merged into a single absorbing state F<sub>2</sub>&#x2032; with a transition rate from state F<sub>1 </sub>to state F<sub>2</sub>&#x2032; of with a transition rate of k&#x3bb;+q<sub>1</sub>&#x3bc;<sub>1</sub>, as illustrated in the Markov chain <b>240</b> of <figref idref="DRAWINGS">FIG. 2C</figref>, which solves for E(t<sub>0</sub>) as</p>
<p id="p-0062" num="0061">
<maths id="MATH-US-00008" num="00008">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mi>E</mi>
          <mo>&#x2061;</mo>
          <mrow>
            <mo>(</mo>
            <msub>
              <mi>t</mi>
              <mn>0</mn>
            </msub>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>=</mo>
        <mfrac>
          <mrow>
            <msub>
              <mi>&#x3bc;</mi>
              <mn>1</mn>
            </msub>
            <mo>+</mo>
            <mrow>
              <mi>n</mi>
              <mo>&#x2062;</mo>
              <mstyle>
                <mspace width="0.3em" height="0.3ex"/>
              </mstyle>
              <mo>&#x2062;</mo>
              <mi>&#x3bb;</mi>
            </mrow>
            <mo>+</mo>
            <mrow>
              <mi>k</mi>
              <mo>&#x2062;</mo>
              <mstyle>
                <mspace width="0.3em" height="0.3ex"/>
              </mstyle>
              <mo>&#x2062;</mo>
              <mi>&#x3bb;</mi>
            </mrow>
          </mrow>
          <mrow>
            <mi>n</mi>
            <mo>&#x2062;</mo>
            <mstyle>
              <mspace width="0.3em" height="0.3ex"/>
            </mstyle>
            <mo>&#x2062;</mo>
            <mrow>
              <mi>&#x3bb;</mi>
              <mo>&#x2061;</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mrow>
                    <mi>k</mi>
                    <mo>&#x2062;</mo>
                    <mstyle>
                      <mspace width="0.3em" height="0.3ex"/>
                    </mstyle>
                    <mo>&#x2062;</mo>
                    <mi>&#x3bb;</mi>
                  </mrow>
                  <mo>+</mo>
                  <mrow>
                    <msub>
                      <mi>q</mi>
                      <mn>1</mn>
                    </msub>
                    <mo>&#x2062;</mo>
                    <msub>
                      <mi>&#x3bc;</mi>
                      <mn>1</mn>
                    </msub>
                  </mrow>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
        </mfrac>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>13</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0063" num="0062">For typical disks and n&#x3c;10,000, this simplifies to</p>
<p id="p-0064" num="0063">
<maths id="MATH-US-00009" num="00009">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mi>E</mi>
          <mo>&#x2062;</mo>
          <mrow>
            <mo>(</mo>
            <msub>
              <mi>t</mi>
              <mn>0</mn>
            </msub>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>&#x2248;</mo>
        <mfrac>
          <msub>
            <mi>&#x3bc;</mi>
            <mn>1</mn>
          </msub>
          <mrow>
            <mi>n</mi>
            <mo>&#x2062;</mo>
            <mstyle>
              <mspace width="0.3em" height="0.3ex"/>
            </mstyle>
            <mo>&#x2062;</mo>
            <mrow>
              <mi>&#x3bb;</mi>
              <mo>&#x2061;</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mrow>
                    <mi>k</mi>
                    <mo>&#x2062;</mo>
                    <mstyle>
                      <mspace width="0.3em" height="0.3ex"/>
                    </mstyle>
                    <mo>&#x2062;</mo>
                    <mi>&#x3bb;</mi>
                  </mrow>
                  <mo>+</mo>
                  <mrow>
                    <msub>
                      <mi>q</mi>
                      <mn>1</mn>
                    </msub>
                    <mo>&#x2062;</mo>
                    <msub>
                      <mi>&#x3bc;</mi>
                      <mn>1</mn>
                    </msub>
                  </mrow>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
        </mfrac>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>14</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0065" num="0064">D. High Redundancy with Read Errors</p>
<p id="p-0066" num="0065">Similarly, <figref idref="DRAWINGS">FIG. 2D</figref> illustrates a Markov chain <b>260</b> that is a special case of the Markov Chain <b>220</b> of <figref idref="DRAWINGS">FIG. 2B</figref>. The Markov chain <b>260</b> solves for E(t<sub>0</sub>) as</p>
<p id="p-0067" num="0066">
<maths id="MATH-US-00010" num="00010">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mi>E</mi>
          <mo>&#x2062;</mo>
          <mrow>
            <mo>(</mo>
            <msub>
              <mi>t</mi>
              <mn>0</mn>
            </msub>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>=</mo>
        <mfrac>
          <mrow>
            <mrow>
              <msub>
                <mi>&#x3bc;</mi>
                <mn>1</mn>
              </msub>
              <mo>&#x2062;</mo>
              <msub>
                <mi>&#x3b8;</mi>
                <mn>2</mn>
              </msub>
            </mrow>
            <mo>+</mo>
            <mrow>
              <mi>k</mi>
              <mo>&#x2062;</mo>
              <mstyle>
                <mspace width="0.3em" height="0.3ex"/>
              </mstyle>
              <mo>&#x2062;</mo>
              <msub>
                <mi>&#x3bb;&#x3b8;</mi>
                <mn>1</mn>
              </msub>
            </mrow>
            <mo>+</mo>
            <mrow>
              <mi>n</mi>
              <mo>&#x2062;</mo>
              <mstyle>
                <mspace width="0.3em" height="0.3ex"/>
              </mstyle>
              <mo>&#x2062;</mo>
              <msub>
                <mi>&#x3bb;&#x3b8;</mi>
                <mn>1</mn>
              </msub>
            </mrow>
            <mo>+</mo>
            <mrow>
              <mi>n</mi>
              <mo>&#x2062;</mo>
              <mstyle>
                <mspace width="0.3em" height="0.3ex"/>
              </mstyle>
              <mo>&#x2062;</mo>
              <msup>
                <mi>&#x3bb;</mi>
                <mn>2</mn>
              </msup>
              <mo>&#x2062;</mo>
              <mi>k</mi>
            </mrow>
            <mo>+</mo>
            <mrow>
              <mi>k</mi>
              <mo>&#x2062;</mo>
              <mstyle>
                <mspace width="0.3em" height="0.3ex"/>
              </mstyle>
              <mo>&#x2062;</mo>
              <msub>
                <mi>&#x3bb;&#x3b8;</mi>
                <mn>2</mn>
              </msub>
            </mrow>
            <mo>+</mo>
            <mrow>
              <mi>n</mi>
              <mo>&#x2062;</mo>
              <mstyle>
                <mspace width="0.3em" height="0.3ex"/>
              </mstyle>
              <mo>&#x2062;</mo>
              <msub>
                <mi>&#x3bb;&#x3b8;</mi>
                <mn>2</mn>
              </msub>
            </mrow>
            <mo>+</mo>
            <mrow>
              <msub>
                <mi>&#x3bc;</mi>
                <mn>1</mn>
              </msub>
              <mo>&#x2062;</mo>
              <msub>
                <mi>&#x3b8;</mi>
                <mn>1</mn>
              </msub>
            </mrow>
          </mrow>
          <mrow>
            <mi>n</mi>
            <mo>&#x2062;</mo>
            <mstyle>
              <mspace width="0.3em" height="0.3ex"/>
            </mstyle>
            <mo>&#x2062;</mo>
            <msup>
              <mi>&#x3bb;</mi>
              <mn>2</mn>
            </msup>
            <mo>&#x2062;</mo>
            <mi>k</mi>
            <mo>&#x2062;</mo>
            <mstyle>
              <mspace width="0.3em" height="0.3ex"/>
            </mstyle>
            <mo>&#x2062;</mo>
            <msub>
              <mi>&#x3b8;</mi>
              <mn>1</mn>
            </msub>
          </mrow>
        </mfrac>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>15</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
where
</p>
<p id="p-0068" num="0067">
<maths id="MATH-US-00011" num="00011">
<math overflow="scroll">
<mrow>
  <msub>
    <mi>&#x3b8;</mi>
    <mn>1</mn>
  </msub>
  <mo>=</mo>
  <mrow>
    <mrow>
      <mn>2</mn>
      <mo>&#x2062;</mo>
      <mrow>
        <mo>(</mo>
        <mrow>
          <mi>k</mi>
          <mo>-</mo>
          <mn>1</mn>
        </mrow>
        <mo>)</mo>
      </mrow>
      <mo>&#x2062;</mo>
      <mi>&#x3bb;</mi>
    </mrow>
    <mo>+</mo>
    <mfrac>
      <msub>
        <mi>q</mi>
        <mn>2</mn>
      </msub>
      <msub>
        <mi>&#x3bc;</mi>
        <mn>2</mn>
      </msub>
    </mfrac>
  </mrow>
</mrow>
</math>
</maths>
<br/>
and &#x3b8;<sub>2</sub>=(1&#x2212;q<sub>2</sub>)&#x3bc;<sub>2</sub>.
</p>
<p id="p-0069" num="0068">For typical disks and n&#x3c;10,000, this simplifies to</p>
<p id="p-0070" num="0069">
<maths id="MATH-US-00012" num="00012">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mrow>
          <mi>E</mi>
          <mo>&#x2062;</mo>
          <mrow>
            <mo>(</mo>
            <msub>
              <mi>t</mi>
              <mn>0</mn>
            </msub>
            <mo>)</mo>
          </mrow>
        </mrow>
        <mo>&#x2248;</mo>
        <mfrac>
          <mrow>
            <mrow>
              <msub>
                <mi>&#x3bc;</mi>
                <mn>1</mn>
              </msub>
              <mo>&#x2061;</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mn>1</mn>
                  <mo>-</mo>
                  <msub>
                    <mi>q</mi>
                    <mn>2</mn>
                  </msub>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>&#x2062;</mo>
            <msub>
              <mi>&#x3bc;</mi>
              <mn>2</mn>
            </msub>
          </mrow>
          <mrow>
            <mi>nk</mi>
            <mo>&#x2062;</mo>
            <mstyle>
              <mspace width="0.3em" height="0.3ex"/>
            </mstyle>
            <mo>&#x2062;</mo>
            <mrow>
              <msup>
                <mi>&#x3bb;</mi>
                <mn>2</mn>
              </msup>
              <mo>&#x2061;</mo>
              <mrow>
                <mo>(</mo>
                <mrow>
                  <mrow>
                    <mn>2</mn>
                    <mo>&#x2062;</mo>
                    <mrow>
                      <mo>(</mo>
                      <mrow>
                        <mi>k</mi>
                        <mo>-</mo>
                        <mn>1</mn>
                      </mrow>
                      <mo>)</mo>
                    </mrow>
                    <mo>&#x2062;</mo>
                    <mi>&#x3bb;</mi>
                  </mrow>
                  <mo>+</mo>
                  <mrow>
                    <msub>
                      <mi>q</mi>
                      <mn>2</mn>
                    </msub>
                    <mo>&#x2062;</mo>
                    <msub>
                      <mi>&#x3bc;</mi>
                      <mn>2</mn>
                    </msub>
                  </mrow>
                </mrow>
                <mo>)</mo>
              </mrow>
            </mrow>
          </mrow>
        </mfrac>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>16</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0071" num="0070">E. Disk Scrubbing</p>
<p id="p-0072" num="0071">Disk scrubbing generally reduces the probability that a data will be lost due to an unrecoverable read error following a disk failure. In a typical disk scrubbing operation, when an unrecoverable read error is found during scrubbing, the offending block is rewritten with the content of one of its mirrored copies and/or relocated to another location on the same disk (for example, if the block is unreadable even after the re-write).</p>
<p id="p-0073" num="0072">This disclosure models disk scrubbing only in normal redundancy disk groups. While disk scrubbing can be modeled, in similar fashion, for high redundancy disk groups, those high redundancy disk groups often exhibit relatively high data availability even when accounting for unrecoverable read errors.</p>
<p id="p-0074" num="0073">In a typical case, an unrecoverable read error often results from either current and/or transient environmental conditions (e.g., unsuitable temperature, vibration, humidity, etc.) or by an improper recording on the media (e.g., the recording head was too high during the last write). The read errors caused by the environment are typically transient, so once the conditions improve the read succeeds. Disk scrubbing does not change the environmental conditions and therefore generally cannot be considered to reduce the probability of such errors. The read errors caused by media are typically persistent and thus often can be reduced by disk scrubbing. The probability of a block read failure p<sub>block </sub>can be expressed as
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>p</i><sub>block</sub><i>=p</i><sub>e</sub><i>+p</i><sub>m</sub>&#x2003;&#x2003;(17)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where p<sub>e </sub>is the probability of a read error caused by the environment and p<sub>m </sub>is the probability of a read error caused by the media.
</p>
<p id="p-0075" num="0074">Since the proportions of p<sub>e </sub>and p<sub>m </sub>are difficult to estimate in the general case, this model assumes that all read errors are caused by improper media recording (i.e., p<sub>e</sub>=0) and therefore all read errors can be reduced by disk scrubbing. Should p<sub>e</sub>&#x2260;0 disk scrubbing would be less effective than predicted by the model, since the scrubbing would not impact some of the causes of read errors.</p>
<p id="p-0076" num="0075">At any time a block can be either readable (state R) or unreadable (state U). This model assigns the variable &#x3b1; to the rate at which the block transitions to state U (from state R) and the variable &#x3b2; to the rate at which the block transitions from state U to state R. The rates &#x3b1; and &#x3b2; satisfy the following equation:</p>
<p id="p-0077" num="0076">
<maths id="MATH-US-00013" num="00013">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mfrac>
          <mi>&#x3b1;</mi>
          <mi>&#x3b2;</mi>
        </mfrac>
        <mo>=</mo>
        <mfrac>
          <msub>
            <mi>p</mi>
            <mi>block</mi>
          </msub>
          <mrow>
            <mn>1</mn>
            <mo>-</mo>
            <msub>
              <mi>p</mi>
              <mi>block</mi>
            </msub>
          </mrow>
        </mfrac>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>17</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
where p<sub>block </sub>can be calculated using equation (12) above.
</p>
<p id="p-0078" num="0077">In an absence of disk scrubbing, an unreadable block media generally can repaired only by being overwritten. Such repair must occur, otherwise the number of unreadable blocks on a disk would grow with time, eventually rendering the disk unusable. Therefore, this model assumes &#x3b2;=&#x3c9;, where &#x3c9; is the rate at which blocks of a disk are written. Consequently, Equation (18) can be solved for &#x3b1; thusly:</p>
<p id="p-0079" num="0078">
<maths id="MATH-US-00014" num="00014">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mi>&#x3b1;</mi>
        <mo>=</mo>
        <mrow>
          <mfrac>
            <msub>
              <mi>p</mi>
              <mi>block</mi>
            </msub>
            <mrow>
              <mn>1</mn>
              <mo>-</mo>
              <msub>
                <mi>p</mi>
                <mi>block</mi>
              </msub>
            </mrow>
          </mfrac>
          <mo>&#x2062;</mo>
          <mi>&#x3c9;</mi>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>19</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
In a typical case, p<sub>block</sub>&#x3c;&#x3c;1, so equation (19) can be approximated by
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>&#x3b1;&#x2248;<i>p</i><sub>block</sub><sup>&#x3c9;</sup>&#x2003;&#x2003;(20)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0080" num="0079">Disk scrubbing increases the rate each block is written by &#x3c3;. Therefore, &#x3b2;=&#x3c3;+&#x3c9;. This equality, together with equation (19) can be substituted into equation (18) to express the probability that a block is unreadable when the disk is scrubbed at a rate &#x3c3; as</p>
<p id="p-0081" num="0080">
<maths id="MATH-US-00015" num="00015">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <msubsup>
          <mi>p</mi>
          <mi>block</mi>
          <mi>&#x3c3;</mi>
        </msubsup>
        <mo>=</mo>
        <mrow>
          <mfrac>
            <mi>&#x3c9;</mi>
            <mrow>
              <mi>&#x3c9;</mi>
              <mo>+</mo>
              <mrow>
                <mrow>
                  <mo>(</mo>
                  <mrow>
                    <mn>1</mn>
                    <mo>-</mo>
                    <msub>
                      <mi>p</mi>
                      <mi>block</mi>
                    </msub>
                  </mrow>
                  <mo>)</mo>
                </mrow>
                <mo>&#x2062;</mo>
                <mi>&#x3c3;</mi>
              </mrow>
            </mrow>
          </mfrac>
          <mo>&#x2062;</mo>
          <msub>
            <mi>p</mi>
            <mi>block</mi>
          </msub>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>21</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
which, when p<sub>block</sub>&#x3c;&#x3c;1, simplifies to
</p>
<p id="p-0082" num="0081">
<maths id="MATH-US-00016" num="00016">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <msubsup>
          <mi>p</mi>
          <mi>block</mi>
          <mi>&#x3c3;</mi>
        </msubsup>
        <mo>&#x2248;</mo>
        <mrow>
          <mfrac>
            <mi>&#x3c9;</mi>
            <mrow>
              <mi>&#x3c9;</mi>
              <mo>+</mo>
              <mi>&#x3c3;</mi>
            </mrow>
          </mfrac>
          <mo>&#x2062;</mo>
          <msub>
            <mi>p</mi>
            <mi>block</mi>
          </msub>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>22</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0083" num="0082">The probability that a read fails during a rebalance following a disk failure q<sub>1 </sub>is expressed by using Equation (11) above, and substituting p<sub>block</sub><sup>&#x3c3;</sup>for p<sub>block</sub>. The remainder of the formulas remain the same as expressed above.</p>
<p id="p-0084" num="0083">The improvement resulting from scrubbing in the probability that a block cannot be read is expressed by</p>
<p id="p-0085" num="0084">
<maths id="MATH-US-00017" num="00017">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mfrac>
          <msub>
            <mi>p</mi>
            <mi>block</mi>
          </msub>
          <msubsup>
            <mi>p</mi>
            <mi>block</mi>
            <mi>&#x3c3;</mi>
          </msubsup>
        </mfrac>
        <mo>=</mo>
        <mrow>
          <mn>1</mn>
          <mo>+</mo>
          <mrow>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mn>1</mn>
                <mo>-</mo>
                <msub>
                  <mi>p</mi>
                  <mi>block</mi>
                </msub>
              </mrow>
              <mo>)</mo>
            </mrow>
            <mo>&#x2062;</mo>
            <mfrac>
              <mi>&#x3c3;</mi>
              <mi>&#x3c9;</mi>
            </mfrac>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>23</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0086" num="0085">Therefore, to reduce the probability that a block cannot be read by a factor of l, the scrubbing rate &#x3c3; must be set to</p>
<p id="p-0087" num="0086">
<maths id="MATH-US-00018" num="00018">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <msub>
          <mi>&#x3c3;</mi>
          <mi>l</mi>
        </msub>
        <mo>=</mo>
        <mrow>
          <mfrac>
            <mrow>
              <mi>l</mi>
              <mo>-</mo>
              <mn>1</mn>
            </mrow>
            <mrow>
              <mn>1</mn>
              <mo>-</mo>
              <msub>
                <mi>p</mi>
                <mi>block</mi>
              </msub>
            </mrow>
          </mfrac>
          <mo>&#x2062;</mo>
          <mi>&#x3c9;</mi>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>24</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
which, when p<sub>block</sub>&#x3c;&#x3c;1, simplifies to
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>&#x3c3;<sub>l</sub>&#x2248;(<i>l</i>&#x2212;1)&#x3c9;&#x2003;&#x2003;(25)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
Hence, this model indicates that, in most cases, the scrubbing rate must exceed the write rate to a disk in order to substantially improve the disk group's mean time to data loss.
</p>
<heading id="h-0010" level="1">3. Exemplary Embodiments</heading>
<p id="p-0088" num="0087"><figref idref="DRAWINGS">FIG. 3</figref> illustrates a method <b>300</b> of estimating the data availability of a disk group, in accordance with a set of embodiments. At block <b>305</b>, the method comprises identifying the operating characteristics of the disks in the disk group. As noted above, there are many characteristics of a hard disk that might affect the data availability of a disk group comprising that disk. A few examples of such characteristics include, without limitation, storage capacity, input/output bandwidth, a mean time to failure, and a probability of read error. In many cases, data about such characteristics are published by drive manufacturers and/or is otherwise available. Accordingly, identifying the disk characteristics might comprise searching a database (which might be provided by software that provides the data availability estimation and/or other software) for such information and/or searching other data sources (such as the Internet, for example) for such information. In other cases, a user might be allowed and/or prompted to provide such information.</p>
<p id="p-0089" num="0088">Hence, in some embodiments, the method <b>300</b> might include receiving information about the disks. (This procedure might be integrated with identifying the operating characteristics of the disks and/or might be considered a separate procedure.) Such information can be received from a user (e.g., through manual input), by hardware interrogation of the disks themselves, and/or any other appropriate procedure. In an embodiment, the information might comprise the operating characteristics. Merely by way of example, as mentioned above, receiving the information might comprise interrogating and/or testing the disks to obtain the operating characteristics, receiving the operating characteristics from a user and/or a data source, and/or the like. In another embodiment, the information might comprise identifying information (such as manufacturer, model number, and/or serial number, etc.) about the disk, which might facilitate searching for the operating characteristics.</p>
<p id="p-0090" num="0089">In certain situations, some disk characteristics can be determined through empirical testing, and in such situations, identifying disk characteristics might comprise determining the characteristics through empirical testing. In some cases, embodiments of the invention can perform such empirical testing. Merely by way of example, read and/or write test operations can be performed on a disk to determine I/O throughput, search times and/or the like.</p>
<p id="p-0091" num="0090">The method <b>300</b> further comprises calculating an estimated mean time to data loss for a proposed configuration of the disk group (block <b>310</b>). In some cases, the proposed configuration of the disk group is an actual configuration, and embodiments of the invention can be used to estimate the estimated mean time to data loss for the currently-configured disk group. In other cases, the disk group might not currently be configured, and embodiments of the invention might be configured to compare a plurality of proposed configurations, as described in more detail below, so as to select a best configuration.</p>
<p id="p-0092" num="0091">A configuration of a disk group can comprise one or more of a variety of factors. Merely by way of example, in some embodiments, the number of disks n in a disk group can affect the mean time to data loss. As another example, a particular redundancy strategy (e.g., double mirroring, triple mirroring, etc.) might be used in a proposed configuration. Similarly, disk scrubbing might (or might not) be used in a proposed configuration. The number of disk partners is another factor that might be included in a proposed configuration, as is the proportion of disk I/O to be dedicated to rebalance operations. Hence, in accordance with some embodiments, the estimated mean time to data loss might be calculated based, at least in pail, on one or more of the identified disk characteristics, as well as one or more of these configuration-specific factors and/or one or more of the factors described in detail in Section 2 above.</p>
<p id="p-0093" num="0092">Similarly, in accordance with some embodiments, one or more of the analytical models described above can be used to calculate the estimated mean time to data loss. Merely by way of example, if a proposed configuration includes normal redundancy (i.e., double-mirroring, the analytical model described in Section 2.A might be used to calculate the estimated mean time to data loss, while if a proposed configuration includes high redundancy (i.e., triple mirroring), the analytical model described in Section 2.B might be used. Similarly, if disk scrubbing is considered as an element of a proposed configuration, the principles of Section 2.C might be used in performing the calculation.</p>
<p id="p-0094" num="0093">In some cases, a plurality values for estimated mean times may be calculated for a plurality of configurations (i.e., an estimated mean time for each configuration). Merely by way of example, a first estimated mean time to data loss might be calculated for a first configuration, and a second estimated mean time to data loss might be calculated for a second configuration. Additional configurations might be considered in similar fashion.</p>
<p id="p-0095" num="0094">At block <b>315</b>, a best configuration is selected. In a set of embodiments, the best configuration is the configuration with the greatest mean time to data loss. In other embodiments, the best configuration might not necessarily be the configuration with the greatest mean time to data loss, but might instead account for other factors (such as I/O performance, cost per disk, etc.). In some cases, selecting a best configuration might include displaying and/or printing the configuration (and/or various factors incorporated in the configuration) for a user, providing the user with instructions on how to implement the best configuration, etc. Similarly, in a set of embodiments, the method comprises producing a recommended configuration (block <b>320</b>), which might be the selected configuration.</p>
<p id="p-0096" num="0095">In another set of embodiments, the method comprises configuring the disk group (block <b>325</b>), perhaps using a best and/or recommended configuration. Embodiments of the invention might be implemented in a disk group configuration utility (which might be part of an operating system and/or a larger application, such as a DBMS, and/or might be a standalone application, applet, control panel, etc). In some implementations, some or all of the procedures for configuring a disk group may be performed automatically by a disk group configuration tool in other implementations, configuring the disk group might comprise providing instructions (as a list, via a guided process such as a wizard, etc.) to allow a user to manually perform some or all of the procedures to configure the disk group. Based on the disclosure herein, one skilled in the art will appreciate that the procedures to configure a disk group are highly dependent on the implementation, and that several such procedures are known in the art; hence, a detailed description of those procedures need not be provided.</p>
<p id="p-0097" num="0096"><figref idref="DRAWINGS">FIG. 4</figref> provides a generalized schematic illustration of one embodiment of a computer system <b>400</b> that can perform the methods of the invention and/or the functions of computer, such as the computers described above. <figref idref="DRAWINGS">FIG. 4</figref> is meant only to provide a generalized illustration of various components, any of which may be utilized as appropriate. The computer system <b>400</b> can include hardware components that can be coupled electrically via a bus <b>405</b>, including one or more processors <b>410</b>. In addition, one or more storage devices <b>415</b> might be coupled to the bus.</p>
<p id="p-0098" num="0097">Such storage devices <b>415</b> can include without limitation a disk drive, an optical storage device, solid-state storage device such as a random access memory (&#x201c;RAM&#x201d;) and/or a read-only memory (&#x201c;ROM&#x201d;), which can be programmable, flash-updateable and/or the like (and which can function as a data store). As noted above, in some embodiments, the storage devices <b>415</b> might comprise a storage system, including one or more disk groups that can be managed in accordance with embodiments of the invention. (The hard disks in such a group need not be physically enclosed within the computer system <b>400</b>, but instead might be in communication with, and/or controlled by, the computer system). In some cases, also as noted above, a disk group might include one or more RAID systems, and the computer system <b>400</b> might include a RAID controller <b>420</b> that is operable to configure and/or manage such RAID systems, for instance, to implement methods of the invention.</p>
<p id="p-0099" num="0098">Also in communication with the bus <b>405</b> can be one or more input devices <b>425</b>, which can include without limitation a mouse, a keyboard and/or the like; one or more output devices <b>430</b>, which can include without limitation a display device, a printer and/or the like; and a communications subsystem <b>435</b>; which can include without limitation a modem, a network card (wireless or wired), an infra-red communication device, and/or the like).</p>
<p id="p-0100" num="0099">The computer system <b>400</b> also can comprise software elements, shown as being currently located within a working memory <b>440</b> (but which could also more permanently be stored on one or more of the storage devices <b>415</b> and/or other computer readable media). The software elements generally will include one or more sets of instructions that are executable by the computer system <b>405</b>. Specifically, the software elements can including, without limitation, an operating system <b>440</b> and/or other code <b>445</b>, such as an application program as described above and/or designed to implement methods of the invention. Those skilled in the art will appreciate that substantial variations may be made in accordance with specific embodiments and/or requirements. For example, customized hardware might also be used, and/or particular elements might be implemented in hardware, software (including portable software, such as applets), or both.</p>
<p id="p-0101" num="0100">As noted above, a set of embodiments comprises systems for repairing a disk group. Merely by way of example, <figref idref="DRAWINGS">FIG. 5</figref> illustrates a schematic diagram of a system <b>500</b> that can be used in accordance with one set of embodiments. The system <b>500</b> can include one or more user computers <b>505</b>. The user computers <b>505</b> can be general purpose personal computers (including, merely by way of example, personal computers and/or laptop computers running any appropriate flavor of Microsoft Corp.'s Windows&#x2122; and/or Apple Corp.'s Macintosh&#x2122; operating systems) and/or workstation computers running any of a variety of commercially-available UNIX&#x2122; or UNIX-like operating systems. These user computers <b>505</b> can also have any of a variety of applications, including one or more applications configured to perform methods of the invention, as well as one or more office applications, database client and/or server applications, and web browser applications. Alternatively, the user computers <b>505</b> can be any other electronic device, such as a thin-client computer, Internet-enabled mobile telephone, and/or personal digital assistant, capable of communicating via a network (e.g., the network <b>510</b> described below) and/or displaying and navigating web pages or other types of electronic documents. Although the exemplary system <b>500</b> is shown with three user computers, any number of user computers can be supported.</p>
<p id="p-0102" num="0101">Certain embodiments of the invention operate in a networked environment, which can include a network <b>510</b>. The network <b>510</b> can be any type of network familiar to those skilled in the art that can support data communications using any of a variety of commercially-available protocols, including without limitation TCP/IP, SNA, IPX, AppleTalk, and the like. Merely by way of example, the network <b>510</b> can be a local area network (&#x201c;LAN&#x201d;), including without limitation an Ethernet network, a Token-Ring network and/or the like; a wide-area network; a virtual network, including without limitation a virtual private network (&#x201c;VPN&#x201d;); the Internet; an intranet; extranet; a public switched telephone network (&#x201c;PSTN&#x201d;); an infra-red network; a wireless network, including without limitation a network operating under any of the IEEE 802.11 suite of protocols, the Bluetooth&#x2122; protocol known in the art, and/or any other wireless protocol; and/or any combination of these and/or other networks.</p>
<p id="p-0103" num="0102">Embodiments of the invention can include one or more server computers <b>515</b>. Each of the server computers <b>515</b> may be configured with an operating system including without limitation any of those discussed above, as well as any commercially-available server operating systems. Each of the servers <b>515</b> may also be running one or more applications, which can be configured to provide services to one or more clients <b>505</b> and/or other servers <b>515</b>.</p>
<p id="p-0104" num="0103">Merely by way of example, one of the servers <b>515</b> may be a web server, which can be used, merely by way of example, to process requests for web pages or other electronic documents from user computers <b>505</b>. The web server can also run a variety of server applications, including HTTP servers, FTP servers, CGI servers, database servers, Java servers, and the like. In some embodiments of the invention, the web server may be configured to serve web pages that can be operated within a web browser on one or more of the user computers <b>505</b> to perform methods of the invention.</p>
<p id="p-0105" num="0104">The server computers <b>515</b>, in some embodiments, might include one ore more file and or/application servers, which can include one or more applications accessible by a client running on one or more of the client computers <b>505</b> and/or other servers <b>515</b>. Merely by way of example, the server(s) <b>515</b> can be one or more general purpose computers capable of executing programs or scripts in response to the user computers <b>505</b> and/or other servers <b>515</b>, including without limitation web applications (which might, in some cases, be configured to perform methods of the invention). Merely by way of example, a web application can be implemented as one or more scripts or programs written in any programming language, such as Java&#x2122;, C, C#&#x2122; or C++, and/or any scripting language, such as Pert, Python, or TCL, as well as combinations of any programming/scripting languages. The application server(s) can also include database servers, including without limitation those commercially available from Oracle, Microsoft, Sybase&#x2122;, IBM&#x2122; and the like, which can process requests from database clients running on a user computer <b>505</b> and/or another server <b>515</b>. In some embodiments, an application server can create web pages dynamically for displaying information about disk groups and/or for initiating and/or performing disk group configuration and/or repair operations. Data provided by an application server may be formatted as web pages (comprising HTML, JavaScript, etc., for example) and/or may be forwarded to a user computer <b>505</b> via a web server (as described above, for example). Similarly, a web server might receive web page requests and/or input data from a user computer <b>505</b> and/or forward the web page requests and/or input data to an application server.</p>
<p id="p-0106" num="0105">In accordance with further embodiments, one or more servers <b>515</b> can function as a file server and/or can include one or more of the files necessary to implement methods of the invention incorporated by an application running on a user computer <b>505</b> and/or another server <b>515</b>. Alternatively, as those skilled in the art will appreciate, a file server can include all necessary files, allowing such an application to be invoked remotely by a user computer <b>505</b> and/or server <b>515</b>. It should be noted that the functions described with respect to various servers herein (e.g., application server, database server, web server, file server, etc.) can be performed by a single server and/or a plurality of specialized servers, depending on implementation-specific needs and parameters.</p>
<p id="p-0107" num="0106">certain embodiments, the system can include one or more databases <b>520</b>. The location of the database(s) <b>520</b> is discretionary: merely by way of example, a database <b>520</b><i>a </i>might reside on a storage medium local to (and/or resident in) a server <b>515</b><i>a </i>(and/or a user computer <b>505</b>). Alternatively, a database <b>520</b><i>b </i>can be remote from any or all of the computers <b>505</b>, <b>515</b>, so long as it can be in communication (e.g., via the network <b>510</b>) with one or more of these. In a particular set of embodiments, a database <b>520</b> can reside in a storage-area network (&#x201c;SAN&#x201d;) familiar to those skilled in the art. The SAN might be implemented as a disk group in accordance with embodiments of the invention. (Likewise, any necessary files for performing the functions attributed to the computers <b>505</b>, <b>515</b> can be stored locally on the respective computer and/or remotely, as appropriate.) In one set of embodiments, the database <b>535</b> can be a relational database, such as an Oracle database, that is adapted to store, update, and retrieve data in response to SQL-formatted commands. The database might be controlled and/or maintained by a database server, as described above, for example. In particular embodiments, the database server might be configured with DBMS software and/or Automated Storage Management&#x2122; software, which can be used to create, configure and/or repair disk groups, and/or test proposed disk group configurations, in accordance with embodiments of the invention.</p>
<p id="p-0108" num="0107">While the invention has been described with respect to exemplary embodiments, one skilled in the art will recognize that numerous modifications are possible. For example, the methods and processes described herein may be implemented using hardware components, software components, and/or any combination thereof. Further, while various methods and processes described herein may be described with respect to particular structural and/or functional components for ease of description, methods of the invention are not limited to any particular structural and/or functional architecture but instead can be implemented on any suitable hardware, firmware and/or software configuration. Similarly, while various functionality is ascribed to certain system components, unless the context dictates otherwise, this functionality can be distributed among various other system components in accordance with different embodiments of the invention.</p>
<p id="p-0109" num="0108">Moreover, while the procedures comprised in the methods and processes described herein are described in a particular order for ease of description, unless the context dictates otherwise, various procedures may be reordered, added, and/or omitted in accordance with various embodiments of the invention. Moreover, the procedures described with respect to one method or process may be incorporated within other described methods or processes; likewise, system components described according to a particular structural architecture and/or with respect to one system may be organized in alternative structural architectures and/or incorporated within other described systems. Hence, while various embodiments are described with or without certain features for ease of description and to illustrate exemplary features, the various components and/or features described herein with respect to a particular embodiment can be substituted, added and/or subtracted from among other described embodiments, unless the context dictates otherwise. Consequently, although the invention has been described with respect to exemplary embodiments, it will be appreciated that the invention is intended to cover all modifications and equivalents within the scope of the following claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-math idrefs="MATH-US-00001" nb-file="US08627151-20140107-M00001.NB">
<img id="EMI-M00001" he="7.03mm" wi="76.20mm" file="US08627151-20140107-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00002" nb-file="US08627151-20140107-M00002.NB">
<img id="EMI-M00002" he="14.82mm" wi="76.20mm" file="US08627151-20140107-M00002.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00003" nb-file="US08627151-20140107-M00003.NB">
<img id="EMI-M00003" he="6.35mm" wi="76.20mm" file="US08627151-20140107-M00003.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00004" nb-file="US08627151-20140107-M00004.NB">
<img id="EMI-M00004" he="5.67mm" wi="76.20mm" file="US08627151-20140107-M00004.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00005" nb-file="US08627151-20140107-M00005.NB">
<img id="EMI-M00005" he="23.28mm" wi="76.20mm" file="US08627151-20140107-M00005.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00006" nb-file="US08627151-20140107-M00006.NB">
<img id="EMI-M00006" he="12.02mm" wi="76.20mm" file="US08627151-20140107-M00006.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00007" nb-file="US08627151-20140107-M00007.NB">
<img id="EMI-M00007" he="6.35mm" wi="76.20mm" file="US08627151-20140107-M00007.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00008" nb-file="US08627151-20140107-M00008.NB">
<img id="EMI-M00008" he="7.03mm" wi="76.20mm" file="US08627151-20140107-M00008.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00009" nb-file="US08627151-20140107-M00009.NB">
<img id="EMI-M00009" he="6.35mm" wi="76.20mm" file="US08627151-20140107-M00009.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00010" nb-file="US08627151-20140107-M00010.NB">
<img id="EMI-M00010" he="7.45mm" wi="76.20mm" file="US08627151-20140107-M00010.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00011" nb-file="US08627151-20140107-M00011.NB">
<img id="EMI-M00011" he="6.35mm" wi="76.20mm" file="US08627151-20140107-M00011.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00012" nb-file="US08627151-20140107-M00012.NB">
<img id="EMI-M00012" he="7.03mm" wi="76.20mm" file="US08627151-20140107-M00012.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00013" nb-file="US08627151-20140107-M00013.NB">
<img id="EMI-M00013" he="6.35mm" wi="76.20mm" file="US08627151-20140107-M00013.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00014" nb-file="US08627151-20140107-M00014.NB">
<img id="EMI-M00014" he="6.35mm" wi="76.20mm" file="US08627151-20140107-M00014.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00015" nb-file="US08627151-20140107-M00015.NB">
<img id="EMI-M00015" he="6.35mm" wi="76.20mm" file="US08627151-20140107-M00015.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00016" nb-file="US08627151-20140107-M00016.NB">
<img id="EMI-M00016" he="5.67mm" wi="76.20mm" file="US08627151-20140107-M00016.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00017" nb-file="US08627151-20140107-M00017.NB">
<img id="EMI-M00017" he="6.35mm" wi="76.20mm" file="US08627151-20140107-M00017.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00018" nb-file="US08627151-20140107-M00018.NB">
<img id="EMI-M00018" he="7.03mm" wi="76.20mm" file="US08627151-20140107-M00018.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00019" nb-file="US08627151-20140107-M00019.NB">
<img id="EMI-M00019" he="6.01mm" wi="76.20mm" file="US08627151-20140107-M00019.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00020" nb-file="US08627151-20140107-M00020.NB">
<img id="EMI-M00020" he="5.67mm" wi="76.20mm" file="US08627151-20140107-M00020.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00021" nb-file="US08627151-20140107-M00021.NB">
<img id="EMI-M00021" he="6.69mm" wi="76.20mm" file="US08627151-20140107-M00021.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00022" nb-file="US08627151-20140107-M00022.NB">
<img id="EMI-M00022" he="6.69mm" wi="76.20mm" file="US08627151-20140107-M00022.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00023" nb-file="US08627151-20140107-M00023.NB">
<img id="EMI-M00023" he="6.69mm" wi="76.20mm" file="US08627151-20140107-M00023.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A system for maximizing availability of data, the system comprising:
<claim-text>a memory device; and</claim-text>
<claim-text>a computer processor in communication with the memory device, wherein the memory device has sets of instructions stored thereon, which, when executed by the computer processor, cause the computer processor to:
<claim-text>identify a set of operating characteristics for each of a plurality of hard disks, the set of operating characteristics affecting the availability of data of the plurality of hard disks, wherein at least one of the operating characteristics includes a mean time to failure of the plurality of hard disks;</claim-text>
<claim-text>calculate, based at least in part on the operating characteristics of the plurality of hard disks, a first estimated mean time to data loss for a set of disks, the first estimated mean time to data loss corresponding to a first configuration of the set of disks, the first configuration defined based at least in part on a first selection of configurable options;</claim-text>
<claim-text>calculate, based at least in part on the operating characteristics of the plurality of hard disks, a second estimated mean time to data loss for the set of disks, the second estimated mean time to data loss corresponding to a second configuration of the set of disks, the second configuration defined based at least in part on a second selection of configurable options, wherein a scrubbing rate of a configuration that exceeds a write rate to the set of disks improves the mean time to failure of that set of disks;</claim-text>
<claim-text>select, from among at least the first configuration and the second configuration, a configuration with the scrubbing rate which exceeds the write rate to the set of disks and a greatest estimated mean time to data loss; and</claim-text>
<claim-text>configure, according to the selected configuration, a disk group from the set of disks.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The system as recited by <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the set of disks comprises a redundant array of independent disks (&#x201c;RAID&#x201d;) system.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The system as recited by <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the system further comprises a database management system comprising a storage management interface configured to control the plurality of hard disks.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The system as recited by <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the instructions to configure a disk group comprise instructions to re-configure an existing disk group comprising one or more of the plurality of hard disks.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The system as recited by <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the selected configuration comprises a data stripping configuration.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The system as recited by <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the selected configuration comprises a data mirroring configuration, such that each data block on each hard disk is mirrored on at least one other hard disk.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The system as recited by <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein the selected configuration comprises a disk mirroring configuration, such that each data block on a particular hard disk is mirrored on one other hard disk.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The system as recited by <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein the selected configuration comprises a doubled-mirroring configuration, such that each data block on a particular hard disk is mirrored on two other hard disks.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. A system as recited by <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein a set of operating characteristics for a particular hard disk comprises a characteristic selected from the group consisting of an input/output bandwidth, a mean time to failure, and a probability of read error.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. A method for maximizing availability of data in a system having a set of disks comprising a plurality of hard disks, the method comprising:
<claim-text>identifying a set of operating characteristics for each of the plurality of hard disks, the set of operating characteristics affecting the availability of data of the plurality of hard disks, wherein at least one of the operating characteristics includes a mean time to failure of the plurality of hard disks;</claim-text>
<claim-text>calculating, based at least in part on the operating characteristics of the plurality of hard disks, a first estimated mean time to data loss for a set of disks, the first estimated mean time to data loss corresponding to a first configuration of the set of disks, the first configuration defined based at least in part on a first selection of configurable options;</claim-text>
<claim-text>calculating, based at least in part on the operating characteristics of the plurality of hard disks, a second estimated mean time to data loss for the set of disks, the second estimated mean time to data loss corresponding to a second configuration of the set of disks, the second configuration defined based at least in part on a second selection of configurable options, wherein a scrubbing rate of a configuration that exceeds a write rate to the set of disks improves the mean time to failure of that set of disks;</claim-text>
<claim-text>selecting, from among at least the first configuration and the second configuration, a configuration with scrubbing rate which exceeds the write rate to the set of disks and a greatest estimated mean time to data loss; and</claim-text>
<claim-text>configuring, according to the selected configuration, a disk group from the set of disks.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The method as recited by <claim-ref idref="CLM-00010">claim 10</claim-ref>, further comprising configuring, according to a recommended configuration, a disk group from the plurality of disks.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The method as recited by <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein a first value represents an estimated mean time to data loss in a double-mirroring configuration, in which a data block on a first hard disk is mirrored on one other hard disk.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The method as recited by <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein the first value is calculated using a formula of</claim-text>
<claim-text>
<maths id="MATH-US-00019" num="00019">
<math overflow="scroll">
<mrow>
  <mrow>
    <mi>E</mi>
    <mo>&#x2061;</mo>
    <mrow>
      <mo>(</mo>
      <msub>
        <mi>t</mi>
        <mn>0</mn>
      </msub>
      <mo>)</mo>
    </mrow>
  </mrow>
  <mo>=</mo>
  <mfrac>
    <mrow>
      <msub>
        <mi>&#x3bc;</mi>
        <mn>1</mn>
      </msub>
      <mo>+</mo>
      <mrow>
        <mi>n</mi>
        <mo>&#x2062;</mo>
        <mstyle>
          <mspace width="0.3em" height="0.3ex"/>
        </mstyle>
        <mo>&#x2062;</mo>
        <mi>&#x3bb;</mi>
      </mrow>
      <mo>+</mo>
      <mrow>
        <mi>k</mi>
        <mo>&#x2062;</mo>
        <mstyle>
          <mspace width="0.3em" height="0.3ex"/>
        </mstyle>
        <mo>&#x2062;</mo>
        <mi>&#x3bb;</mi>
      </mrow>
    </mrow>
    <mrow>
      <mi>nk</mi>
      <mo>&#x2062;</mo>
      <mstyle>
        <mspace width="0.3em" height="0.3ex"/>
      </mstyle>
      <mo>&#x2062;</mo>
      <msup>
        <mi>&#x3bb;</mi>
        <mn>2</mn>
      </msup>
    </mrow>
  </mfrac>
</mrow>
</math>
</maths>
<claim-text>wherein E(t<sub>0</sub>) is the first value, &#x3bc;<sub>1 </sub>is a rebalance rate signifying a rate at which data from a particular disk can be restored to another disk, n represents a total number of disks in the disk group, k represents a number of disk partners for the particular disk, and &#x3bb; is the failure rate of a disk, expressed as a reciprocal of a mean time to failure for a disk.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The method as recited by <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein the first value is calculated using a formula of</claim-text>
<claim-text>
<maths id="MATH-US-00020" num="00020">
<math overflow="scroll">
<mrow>
  <mrow>
    <mi>E</mi>
    <mo>&#x2061;</mo>
    <mrow>
      <mo>(</mo>
      <msub>
        <mi>t</mi>
        <mn>0</mn>
      </msub>
      <mo>)</mo>
    </mrow>
  </mrow>
  <mo>&#x2248;</mo>
  <mfrac>
    <msub>
      <mi>&#x3bc;</mi>
      <mn>1</mn>
    </msub>
    <mrow>
      <mi>nk</mi>
      <mo>&#x2062;</mo>
      <mstyle>
        <mspace width="0.3em" height="0.3ex"/>
      </mstyle>
      <mo>&#x2062;</mo>
      <msup>
        <mi>&#x3bb;</mi>
        <mn>2</mn>
      </msup>
    </mrow>
  </mfrac>
</mrow>
</math>
</maths>
<claim-text>wherein E(t<sub>0</sub>) is the first value, &#x3bc;<sub>1 </sub>is a rebalance rate signifying a rate at which data from a particular disk can be restored to another disk, n represents a total number of disks in the disk group, k represents a number of disk partners for the particular disk, and &#x3bb; is the failure rate of a disk, expressed as a reciprocal of a mean time to failure for a disk.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The method as recited by <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein the rebalance rate is calculated using a formula of</claim-text>
<claim-text>
<maths id="MATH-US-00021" num="00021">
<math overflow="scroll">
<mrow>
  <msub>
    <mi>&#x3bc;</mi>
    <mn>1</mn>
  </msub>
  <mo>=</mo>
  <msup>
    <mrow>
      <mo>(</mo>
      <mrow>
        <mfrac>
          <mi>f</mi>
          <mrow>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>k</mi>
                <mo>-</mo>
                <mn>1</mn>
              </mrow>
              <mo>)</mo>
            </mrow>
            <mo>&#x2062;</mo>
            <mi>rb</mi>
          </mrow>
        </mfrac>
        <mo>+</mo>
        <msub>
          <mi>t</mi>
          <mi>f</mi>
        </msub>
      </mrow>
      <mo>)</mo>
    </mrow>
    <mrow>
      <mo>-</mo>
      <mn>1</mn>
    </mrow>
  </msup>
</mrow>
</math>
</maths>
<claim-text>wherein &#x3bc;<sub>1 </sub>is the rebalance rate, f is the expected size of a set of all data blocks allocated on the particular disk, b is the maximum input/output bandwidth of the particular disk, r is a fraction of the maximum bandwidth used to perform a rebalance operation, and t<sub>f </sub>is a timeout before the rebalance operation is initiated.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The method as recited by <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein the first value is calculated using a formula of</claim-text>
<claim-text>
<maths id="MATH-US-00022" num="00022">
<math overflow="scroll">
<mrow>
  <mrow>
    <mi>E</mi>
    <mo>&#x2061;</mo>
    <mrow>
      <mo>(</mo>
      <msub>
        <mi>t</mi>
        <mn>0</mn>
      </msub>
      <mo>)</mo>
    </mrow>
  </mrow>
  <mo>=</mo>
  <mfrac>
    <mrow>
      <msub>
        <mi>&#x3bc;</mi>
        <mn>1</mn>
      </msub>
      <mo>+</mo>
      <mrow>
        <mi>n</mi>
        <mo>&#x2062;</mo>
        <mstyle>
          <mspace width="0.3em" height="0.3ex"/>
        </mstyle>
        <mo>&#x2062;</mo>
        <mi>&#x3bb;</mi>
      </mrow>
      <mo>+</mo>
      <mrow>
        <mi>k</mi>
        <mo>&#x2062;</mo>
        <mstyle>
          <mspace width="0.3em" height="0.3ex"/>
        </mstyle>
        <mo>&#x2062;</mo>
        <mi>&#x3bb;</mi>
      </mrow>
    </mrow>
    <mrow>
      <mi>n</mi>
      <mo>&#x2062;</mo>
      <mstyle>
        <mspace width="0.3em" height="0.3ex"/>
      </mstyle>
      <mo>&#x2062;</mo>
      <mrow>
        <mi>&#x3bb;</mi>
        <mo>&#x2061;</mo>
        <mrow>
          <mo>(</mo>
          <mrow>
            <mrow>
              <mi>k</mi>
              <mo>&#x2062;</mo>
              <mstyle>
                <mspace width="0.3em" height="0.3ex"/>
              </mstyle>
              <mo>&#x2062;</mo>
              <mi>&#x3bb;</mi>
            </mrow>
            <mo>+</mo>
            <mrow>
              <msub>
                <mi>q</mi>
                <mn>1</mn>
              </msub>
              <mo>&#x2062;</mo>
              <msub>
                <mi>&#x3bc;</mi>
                <mn>1</mn>
              </msub>
            </mrow>
          </mrow>
          <mo>)</mo>
        </mrow>
      </mrow>
    </mrow>
  </mfrac>
</mrow>
</math>
</maths>
<claim-text>wherein E(t<sub>0</sub>) is the first value, &#x3bc;<sub>1 </sub>is a rebalance rate signifying a rate at which data from a particular disk can be restored to another disk, n represents a total number of disks in the disk group, k represents a number of disk partners for the particular disk, q<sub>1 </sub>represents a probability that a read fails during a rebalance operation, and &#x3bb; is the failure rate of a disk, expressed as a reciprocal of a mean time to failure for a disk.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The method as recited by <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the second rebalance rate is calculated using a formula of</claim-text>
<claim-text>
<maths id="MATH-US-00023" num="00023">
<math overflow="scroll">
<mrow>
  <msub>
    <mi>&#x3bc;</mi>
    <mn>2</mn>
  </msub>
  <mo>=</mo>
  <msup>
    <mrow>
      <mo>(</mo>
      <mrow>
        <mfrac>
          <mi>f</mi>
          <mrow>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>k</mi>
                <mo>-</mo>
                <mn>2</mn>
              </mrow>
              <mo>)</mo>
            </mrow>
            <mo>&#x2062;</mo>
            <mi>rb</mi>
          </mrow>
        </mfrac>
        <mo>+</mo>
        <msub>
          <mi>t</mi>
          <mi>f</mi>
        </msub>
      </mrow>
      <mo>)</mo>
    </mrow>
    <mrow>
      <mo>-</mo>
      <mn>1</mn>
    </mrow>
  </msup>
</mrow>
</math>
</maths>
<claim-text>wherein &#x3bc;<sub>2 </sub>is the second rebalance rate, f is the expected size of a set of all data blocks allocated on the particular disk, b is the maximum input/output bandwidth of the particular disk, and r is a fraction of the maximum bandwidth used to perform a rebalance operation.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. A non-transitory computer-readable medium having sets of instructions stored thereon which, when executed by a computer, cause the computer to:
<claim-text>identify a set of operating characteristics for each of the plurality of hard disks, the set of operating characteristics affecting the availability of data of the plurality of hard disks, wherein at least one of the operating characteristics includes a mean time to failure of the plurality of hard disks;</claim-text>
<claim-text>calculate, based at least in part on the operating characteristics of the plurality of hard disks, a first estimated mean time to data loss for a set of disks, the first estimated mean time to data loss corresponding to a first configuration of the set of disks, the first configuration defined based at least in part on a first selection of configurable options;</claim-text>
<claim-text>calculate, based at least in part on the operating characteristics of the plurality of hard disks, a second estimated mean time to data loss for the set of disks, the second estimated mean time to data loss corresponding to a second configuration of the set of disks, the second configuration defined based at least in part on a second selection of configurable options, wherein a scrubbing rate of a configuration that exceeds a write rate to the set of disks improves the mean time to failure of that set of disks;</claim-text>
<claim-text>select, from among at least the first configuration and the second configuration, a configuration with the scrubbing rate which exceeds the write rate to the set of disks and a greatest estimated mean time to data loss; and</claim-text>
<claim-text>configure, according to the selected configuration, a disk group from the set of disks.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
