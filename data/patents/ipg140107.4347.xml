<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625418-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625418</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12096621</doc-number>
<date>20061124</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="regional">
<country>EP</country>
<doc-number>05028274</doc-number>
<date>20051223</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>852</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>01</class>
<subclass>R</subclass>
<main-group>31</main-group>
<subgroup>08</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>11</main-group>
<subgroup>00</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>370230</main-classification>
</classification-national>
<invention-title id="d2e71">System and method for improving service and device discovery in a UPnP-based wireless communication network</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>7627690</doc-number>
<kind>B2</kind>
<name>Kobayashi</name>
<date>20091200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709238</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>2005/0185658</doc-number>
<kind>A1</kind>
<name>Kamiwada et al.</name>
<date>20050800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370401</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2006/0002320</doc-number>
<kind>A1</kind>
<name>Costa-Requena et al.</name>
<date>20060100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370312</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2007/0004436</doc-number>
<kind>A1</kind>
<name>Stirbu</name>
<date>20070100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455503</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2007/0115973</doc-number>
<kind>A1</kind>
<name>Koga et al.</name>
<date>20070500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370389</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2007/0127394</doc-number>
<kind>A1</kind>
<name>Stirbu et al.</name>
<date>20070600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370254</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2008/0137682</doc-number>
<kind>A1</kind>
<name>Kish et al.</name>
<date>20080600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370432</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>EP</country>
<doc-number>1 594 278</doc-number>
<date>20051100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>JP</country>
<doc-number>2007049382</doc-number>
<kind>A</kind>
<date>20070200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>WO</country>
<doc-number>2005 076567</doc-number>
<date>20050800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00011">
<othercit>Goland, Yaron Y. et al., &#x201c;Simple Service Discovery Protocol / 1.0 operating without an Arbiter &#x3c;draft-cai-ssdp-v1-03.txt&#x3e;&#x201d;, Internet Engineering Task Force, Internet Draft, No. 3, pp. 1-18, XP015011315, (1999).</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>11</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>370230</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370432</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370254</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370389</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>10</number-of-drawing-sheets>
<number-of-figures>11</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20080304408</doc-number>
<kind>A1</kind>
<date>20081211</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Kraemer</last-name>
<first-name>Oliver</first-name>
<address>
<city>Ostfildern</city>
<country>DE</country>
</address>
</addressbook>
<residence>
<country>DE</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Saito</last-name>
<first-name>Shin</first-name>
<address>
<city>Stuttgart</city>
<country>DE</country>
</address>
</addressbook>
<residence>
<country>DE</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Kraemer</last-name>
<first-name>Oliver</first-name>
<address>
<city>Ostfildern</city>
<country>DE</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Saito</last-name>
<first-name>Shin</first-name>
<address>
<city>Stuttgart</city>
<country>DE</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Oblon, Spivak, McClelland, Maier &#x26; Neustadt, L.L.P.</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Sony Deutschland GmbH</orgname>
<role>03</role>
<address>
<city>Berlin</city>
<country>DE</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Rinehart</last-name>
<first-name>Mark</first-name>
<department>2463</department>
</primary-examiner>
<assistant-examiner>
<last-name>Khirodhar</last-name>
<first-name>Maharishi</first-name>
</assistant-examiner>
</examiners>
<pct-or-regional-filing-data>
<document-id>
<country>WO</country>
<doc-number>PCT/EP2006/011306</doc-number>
<kind>00</kind>
<date>20061124</date>
</document-id>
<us-371c124-date>
<date>20080609</date>
</us-371c124-date>
</pct-or-regional-filing-data>
<pct-or-regional-publishing-data>
<document-id>
<country>WO</country>
<doc-number>WO2007/073814</doc-number>
<kind>A </kind>
<date>20070705</date>
</document-id>
</pct-or-regional-publishing-data>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A system and method that improve service and device discovery in a UPnP-based wireless communication network and avoids unnecessary broadcast messages on a MAC sublayer of a DLC layer caused by UPnP multicast messages on an IP layer by intercepting UPnP multicast messages in a network protocol stack below the IP layer. A module intercepts multicast UDP packets destined to a UPnP IP multicast address and port, the multicast UDP packets containing UPnP packets as payload. The module executes DLC/MAC-based service discovery functions to perform wireless network-specific device discovery and to find UPnP-enabled devices in the wireless communication network. Once a wireless network device discovery has returned nodes that fulfill criteria given in the search, the module uses unicast DLC/MAC messages to send UPnP packets to only those nodes that are UPnP-enabled and whose device type matches the respective UPnP device type sought.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="252.73mm" wi="241.81mm" file="US08625418-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="149.52mm" wi="155.96mm" file="US08625418-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="203.37mm" wi="174.92mm" file="US08625418-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="247.06mm" wi="160.19mm" file="US08625418-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="244.69mm" wi="174.16mm" orientation="landscape" file="US08625418-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="240.71mm" wi="168.66mm" orientation="landscape" file="US08625418-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="244.77mm" wi="174.84mm" orientation="landscape" file="US08625418-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="231.90mm" wi="168.83mm" orientation="landscape" file="US08625418-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="271.53mm" wi="182.20mm" orientation="landscape" file="US08625418-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="141.14mm" wi="165.86mm" file="US08625418-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="196.00mm" wi="178.56mm" orientation="landscape" file="US08625418-20140107-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">FIELD AND BACKGROUND OF THE INVENTION</heading>
<p id="p-0002" num="0001">The present invention generally relates to the field of service and device discovery in a wireless communication network which does not provide multicast support on the medium access control (MAC) sublayer of the data link control (DLC) layer. It particularly refers to a new system and a corresponding method for improving service and device discovery in a wireless communication network using a protocol based on the Universal Plug and Play (UPnP) standard that runs on top of a TCP/IP-based networking layer.</p>
<p id="p-0003" num="0002">Universal Plug and Play (UPnP) is a distributed, open networking architecture that offers pervasive peer-to-peer network connectivity of personal computers, intelligent appliances and wireless devices. The UPnP networking architecture specification defines general interoperability mechanisms including, among others, mechanisms for automatic address configuration and mechanisms for service and device discovery which enable self-configuring devices to create an ad-hoc, self-discovering communication system of interoperable network devices. This architecture thus leverages TCP/IP-based communication networks to enable seamless proximity networking in addition to control and data transfer among networked devices, which is particularly advantageous in home and office network environments. UPnP achieves this by defining and publishing a set of UPnP device control protocols which allow networked TCP/IP devices to communicate with each other so as to announce their presence to all other devices on a UPnP-based communication network and to then interoperate in a flexible and predefined fashion. Said UPnP device control protocols are built on open, Internet-based communication standards such as TCP/IP, UDP, HTTP, SSDP, SOAP, GENA and XML, which provide the communication infrastructure for said UPnP networking architecture, and allow networked TCP/IP devices to communicate with each other so as to announce their presence to all other devices on the communication network and then to interoperate in a flexible and predefined fashion. Thereby, UPnP technology can run on any physical medium including e.g. phone lines, power lines (PLC), Ethernet, IR (IrDA), RF (Wi-Fi, Bluetooth) and FireWire. Due to the fact that common base protocols are used on a per-device basis, no extra device drivers are required.</p>
<p id="p-0004" num="0003">A UPnP networking architecture supports zero-configuration, invisible networking and automatic discovery for a breadth of device categories from a wide range of vendors, whereby a device can dynamically join a network, obtain an IP address, announce its name, convey its capabilities upon request and learn about the presence and the capabilities of other devices. DHCP (Dynamic Host Configuration Protocol) and DNS (Domain Name System) servers are optional and are only used if they are available on the network. However, each device must have a DHCP client and search for a DHCP server when the device is first connected to the network. If no DHCP server is available, the device has to assign an address by itself. In case the device obtains a domain name during the DHCP transaction, e.g. through a DNS server or via DNS forwarding, said device should use this name in subsequent network operations; otherwise, the device should use its IP address.</p>
<p id="p-0005" num="0004">Although a UPnP networking architecture typically consists of a peer-to-peer network, nodes on the network communicate with each other in a client/server-based manner. Thereby, client terminals that provide a user interface for end users are called &#x201c;Control Points&#x201d; (CP), and servers providing a well-defined set of services, each of which corresponding to a functional component of a particular server, are called &#x201c;Controlled Devices&#x201d; (CD). When a specific CD is added to the network, the UPnP discovery protocol allows that device to advertise its specific services to the CPs on said network. Similarly, when a CP is added to the network, the UPnP discovery protocol allows that CP to search for CDs of interest on the network. The fundamental message exchange in both cases is a discovery message broadcasted by means of the Simple Device Discovery Protocol (SDDP), that contains a few, essential specifics about said CD, a specific one of its services, e.g. its device type, identifier and a pointer to more detailed information, or functional capabilities a CP wants to control. Thereby, any CD which exposes these device capabilities responds to a specific CP's discovery request by identifying itself to the respective CP. This response contains the URL of an XML device description document which identifies specific services implemented by the CD as well as specific actions and state variables that are supported by each service. By parsing this information, the CP is able to determine the exact capabilities of each CD. This allows a CP to determine if it wants to interact with and control a particular CD. When a new CD is added to the network, it may broadcast an identification notification to the network which informs existing CPs about the fact that a new CD has been added to the network and is available to be controlled. The notification information thereby includes the URL of the new CD's description document.</p>
<p id="p-0006" num="0005">After a CD has been discovered by a CP, the CP still knows very little about this device. For the CP to learn more about the respective device and its device capabilities or to interact with the CD, said CP has to retrieve said CD's description from the URL provided by the CD in the discovery message. The UPnP description for a CD is usually expressed in XML and includes vendor-specific manufacturer information such as the model name and number, serial number, manufacturer name, URLs to vendor-specific web sites, etc. The description also includes a list of any embedded devices or services as well as URLs for control, eventing, and presentation. For each service, the description includes a list of the commands or actions to which the service responds and parameters or arguments for each action. The description for a service further includes a list of variables modeling the state of the service at run time which are described in terms of their data type, range and event characteristics.</p>
<p id="p-0007" num="0006">After having retrieved a description of the respective CD, the CP is able to send actions to a particular service of this CD. For this purpose, the CP sends a suitable control message to the control URL for the service (provided in the device description). This control message is also expressed in XML using the Simple Object Access Protocol (SOAP). Like function calls, the service returns any action-specific values in response to the control message. The effects of the action, if any, are modeled by changes in the variables that describe the run-time state of the service.</p>
<p id="p-0008" num="0007">A UPnP description for a service comprises a list of actions this service responds to and a list of variables modeling the state of said service at run time. When these variables change, updates are published by the service and a CP may subscribe to receive this information. The respective service then publishes updates by sending event messages containing the names of at least one state variable and the current value of said variable(s). These messages are also expressed in XML and formatted using the General Event Notification Architecture (GENA). A special initial event message is sent when a CP first subscribes. This event message contains the names and values for all &#x201c;evented&#x201d; variables and allows the subscriber to initialize its model of the state of the service. To support scenarios with multiple CPs, eventing is designed to keep all CPs equally informed about the effects of any action. Therefore, event messages are sent to all subscribers, subscribers receive event messages for all &#x201c;evented&#x201d; variables that have changed, and these event messages are sent no matter why a particular state variable has been changed (either in response to a requested action or owing to the fact that the state the service is modeling has been changed).</p>
<p id="p-0009" num="0008">In case a CD has a URL for presentation, the CP can retrieve a page from this URL, load the page into a web browser and, depending on the capabilities of the page, allow a user to control the device and/or view its device status. The degree to which each of these tasks can be accomplished depends on the specific capabilities of the presentation page and device.</p>
<p id="p-0010" num="0009">For further information on service and device discovery according to the UPnP standard, the interested reader is referred to the URL http://www.upnp.org.</p>
<heading id="h-0002" level="1">BRIEF DESCRIPTION OF THE PRIOR ART</heading>
<p id="p-0011" num="0010">WO 2005/076567 A1 describes a method for arranging communication in a local area networking system comprising a first device, a second device and an intermediate node which can be used for arranging data transmission between said first and said second device. The second device is thereby arranged to multicast and/or broadcast messages to other devices in the system. The transmission of multicast and/or broadcast messages to the first device is prevented by interworking means. An advantage of the herein described method is that less processing power is required in the first device due to the fact that fewer messages are received. Thereby, the power consumption of constrained devices, which means portable devices such as handheld PDAs, mobile stations or music players which are typically not able to support IEEE 802.x communication technology but often deploy energy-saving short-range communication media, such as e.g. Bluetooth, can be reduced. For bandwidth-limited links the reduced bandwidth usage is also an advantage, and thus a faster link is available for other data transmission. As the transfer of multicast and/or broadcast messages is reduced, the response time of the local area networking system and the average signal propagation time are shorter. Furthermore, devices not receiving multicast messages can still support all functions of the system, e.g. full UPnP stack, to be available in case they are connected to the local area networking system such that multicast messages can be received. This makes it easier to reach full compatibility with the second device, e.g. for enabling connectivity in configurations where there is direct connection between the first and the second device. One further advantage of invention described in WO 2005/076567 A1 is that it is relatively easy to implement for various technologies, thereby enabling a reduction in the costs of the end product.</p>
<heading id="h-0003" level="1">PROBLEMS TO BE SOLVED BY THE INVENTION</heading>
<p id="p-0012" num="0011">UPnP-based communication protocols were originally designed for service and device discovery in fixed (wired) communication networks. In such a network environment, IP multicast messages, which are used for service announcements and device discovery, are repeatedly sent up to three times as recommended by the UPnP standard in order to ensure that these IP multicast messages are correctly received at those devices for which they are destined. In a wireless network without any multicast support on the DLC layer (=layer <b>2</b>) and its MAC sublayer said multicast messages are mapped to DLC/MAC broadcast messages. Even if multicast data transmission was supported on layer <b>2</b>, on a conventional broadcast medium, such as e.g. a wired LAN, device discovery and service announcement messages incur a communication overhead. However, whereas in conventional high-speed wired communication networks a communication overhead caused by broadcast messages is negligible, in wireless communication networks this additional transmission of data may cause a network congestion due to a considerable communication overhead.</p>
<p id="p-0013" num="0012">An example of a fixed (wired) network communication is depicted in <figref idref="DRAWINGS">FIG. 1</figref>. It consists of three UPnP-enabled devices <b>102</b><i>a</i>-<i>c </i>being connected via an Ethernet LAN <b>104</b>. As Ethernet is a broadcast medium, these three nodes <b>102</b><i>a</i>-<i>c </i>are immediate one-hop neighbors of each other, thus being able to listen to the data transmission of all other nodes within said network.</p>
<p id="p-0014" num="0013">For a wireless network with features as will be described further below, the UPnP protocol does not use network resources efficiently, which is due to the fact that multicast device searches and service announcements are applied, some of which being sent several times to ensure that they actually reach all interested nodes. As already mentioned above, these multicast messages on the IP layer are mapped to broadcast messages on the MAC sublayer of the DLC layer when the underlying wireless network does not support multicasting. Without modifications to a UPnP protocol stack (for which the source code may not be available), a more efficient use of the underlying network resources is required. For the wireless communication network as mentioned above, the following features are assumed:
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0000">
    <ul id="ul0002" list-style="none">
        <li id="ul0002-0001" num="0014">The wireless communication network shall be able to provide routing functionality, packet forwarding as well as service and device discovery (among other services) in the MAC sublayer of the DLC layer (layer <b>2</b>). For any higher-layer protocols such as e.g. the IP protocol, neighboring nodes therefore appear to be directly connected (i.e. one wireless hop away), though in reality they may be two or even more wireless hops away due to the routing functionality.</li>
        <li id="ul0002-0002" num="0015">Furthermore, multicast routing is not supported by the DLC layer, which implies that IP multicast (and broadcast) messages need to be broadcasted throughout a wireless network in order to reach all possible destinations.</li>
        <li id="ul0002-0003" num="0016">It shall further be assumed that advanced power-saving methods are employed which allow a network card comprising an independent protocol processor to continue operating while a host PC system is in sleep mode. Thereby, DLC control messages may be exchanged, but higher-layer (IP- or UPnP-based) communication is not possible because these higher-layer protocols are implemented on the host PC which is in sleep mode. The host PC may e.g. be woken up by a special DLC/MAC control message from another device within the network.</li>
        <li id="ul0002-0004" num="0017">Finally, it shall be assumed that the MAC sublayer provides functions for efficient service and device discovery in the wireless network (independent of UPnP and less complex).</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0015" num="0018">An example of such a wireless network is shown in <figref idref="DRAWINGS">FIG. 2</figref>. Node <b>2</b>, in <figref idref="DRAWINGS">FIG. 2</figref> also referred to by reference number <b>202</b><i>b</i>, lies within the ranges of nodes <b>1</b> and <b>3</b>, in <figref idref="DRAWINGS">FIG. 2</figref> also referred to by reference numbers <b>202</b><i>a </i>and <b>202</b><i>c</i>, respectively, whereas nodes <b>1</b> and <b>3</b> are not in range of each other. However, due to the above-mentioned feature of DLC/MAC packet forwarding, for the IP layer of node <b>1</b>, node <b>3</b> is only one hop away and vice versa since node <b>2</b> forwards packets on layer <b>2</b>.</p>
<p id="p-0016" num="0019">These specific properties of conventional wireless communication networks lead to an inefficient use of network resources when the UPnP standard is employed for this network due to the above-mentioned broadcasts. In addition, since DLC layer broadcasts can not be used to wake up sleeping nodes, some nodes on the wireless network that support UPnP will not be found as they will not be woken up by device discovery broadcast messages.</p>
<heading id="h-0004" level="1">OBJECT OF THE PRESENT INVENTION</heading>
<p id="p-0017" num="0020">In view of the above-described prior art, it is the object of the present invention to provide a more efficient use of available network resources which are deployed for supporting service and device discovery in a UPnP-based wireless communication network by avoiding unnecessary broadcasts on the MAC sublayer of the DLC layer (layer <b>2</b>) that are caused by UPnP multicast messages on the IP layer (layer <b>3</b>).</p>
<p id="p-0018" num="0021">This object is achieved by the present invention as defined in the independent claims. Advantageous features of the invention are defined in the subordinate claims.</p>
<heading id="h-0005" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0019" num="0022">The present invention is basically dedicated to system and a corresponding method for improving service and device discovery in a UPnP-based wireless communication network that avoids unnecessary broadcast messages on the MAC sublayer of the DLC layer caused by UPnP multicast messages on the IP layer by intercepting UPnP multicast messages in the network protocol stack below the IP layer. Instead of using the standard protocol mechanisms of the protocol stack which would map IP multicast messages to broadcast messages, said proposed system and method according to the present invention provide an optimized solution for the above-described wireless network. Said system, in the following also referred to as &#x201c;UPnP optimizer module&#x201d;, is a component that intercepts multicast UDP packets destined to a UPnP IP multicast address and port, said multicast UDP packets containing UPnP packets as payload. After that, the UPnP optimizer module utilizes DLC/MAC-based service discovery functions so as to perform a wireless network-specific device discovery (on the MAC sublayer) and to find UPnP-enabled devices in the wireless communication network. <figref idref="DRAWINGS">FIG. 3</figref> gives an overview of the applied protocol stack, from which it becomes apparent that the proposed UPnP optimizer module according to the present invention is integrated within this protocol stack as a new sublayer <b>2</b><i>a. </i></p>
<p id="p-0020" num="0023">A profile mapping unit integrated within the UPnP optimizer module according to the present invention thereby allows a more fine-grained mapping. If for example UPnP media renderer devices are searched by a specific UPnP query, this UPnP device type is mapped to the respective wireless network device type of a wireless node comprising said UPnP optimizer module. This mapping is not required to be a one-to-one mapping since multiple UPnP device and service types can also be mapped to a closest-matching wireless network device type. Network devices that do not have UPnP functionality are ignored. This device discovery method has several benefits over conventional UPnP device discovery methods according to the prior art:
<ul id="ul0003" list-style="none">
    <li id="ul0003-0001" num="0000">
    <ul id="ul0004" list-style="none">
        <li id="ul0004-0001" num="0024">Since wireless network device discovery is performed on DLC/MAC layer, it is more efficient for wireless networks than conventional UPnP device discovery.</li>
        <li id="ul0004-0002" num="0025">Sleeping nodes are also found as only the host system is in sleep mode, but the processor on the wireless network card still responds to DLC/MAC device searches if it matches the search for a device profile.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0021" num="0026">Once the wireless network device discovery has returned nodes that fulfill the criteria given in the search, the UPnP optimizer module uses unicast DLC/MAC messages to send said UPnP packets to only those nodes which are UPnP-enabled and whose device type matches the respective UPnP device type which is sought.</p>
<p id="p-0022" num="0027">This reduces the total number of messages sent in a wireless network significantly, as only potential candidates which might match the UPnP query (according to the mapping from UPnP device types to wireless network device types) will receive the search messages.</p>
<p id="p-0023" num="0028">Aside from the above-described UPnP-based communication scenario, the present invention generally relates to a method for transmitting service and/or device discovery messages in a wireless communication network which provides routing, packet forwarding as well as service and/or device discovery functionality, wherein said method comprises a step of preventing broadcast routing and packet forwarding of data packets carrying service and/or device discovery messages as payloads within said wireless communication network. In this communication scenario, said service and/or device discovery messages may be transmitted by using a communication protocol of a protocol layer organized on top of a TCP/IP-based networking layer from a protocol stack hierarchy according to the ISO/OSI reference model, wherein said communication protocol is based on the UPnP standard. The routing, packet forwarding and service and/or device discovery functionality in said wireless communication network may preferably be provided on a medium access control (MAC) sublayer of the data link control (DLC) layer from said protocol stack hierarchy. In particular, said step of preventing broadcast routing and packet forwarding of data packets carrying service and/or device discovery messages as payloads within said wireless communication network may be realized as a step of preventing broadcast routing and packet forwarding of DLC/MAC data packets carrying IP data packets as payloads which, in turn, contain data packets of the UPnP service and/or device discovery messages as payloads within the above-mentioned wireless communication network.</p>
<p id="p-0024" num="0029">After having received a request for performing a UPnP service and/or device search within said wireless communication network from a first UPnP-enabled wireless node being connected to the wireless communication network, a service and/or device search procedure is carried out which searches for other UPnP-enabled nodes matching the request by sending data packets of a broadcast message on the MAC sublayer from the network protocol stack of said first UPnP-enabled wireless node's host operating system, the broadcast message carrying an IP payload that, in turn, comprises a UPnP service and/or device discovery message as a payload, to other wireless nodes within the wireless communication network. Said broadcast message is then forwarded through the wireless communication network, and responses from the other wireless nodes are received on said MAC sublayer. Thereafter, UPnP multicast messages to be sent from said first UPnP-enabled wireless node to other UPnP-enabled wireless nodes found by said service and/or device search procedure are intercepted in the network protocol stack below the IP layer of first UPnP-enabled wireless node's host operating system. Said UPnP multicast messages are mapped to DLC/MAC unicast messages, said DLC/MAC unicast messages carrying an IP payload which, in turn, contains a UPnP service and/or device discovery message as a payload, and, finally, these DLC/MAC unicast messages are sent to those other UPnP-enabled wireless nodes within said wireless communication network they are destined.</p>
<p id="p-0025" num="0030">According to a further aspect of this embodiment, DLC wake-up messages are sent to each other UPnP-enabled wireless node for ensuring that the host operating systems of these UPnP-enabled wireless nodes are capable of forwarding a received DLC/MAC unicast message to higher layers of their network protocol stack before executing said step of sending a DLC/MAC unicast message to each of these other UPnP-enabled wireless nodes.</p>
<p id="p-0026" num="0031">According to a still further aspect of this embodiment, each duplicate of a periodically repeated IP multicast service and/or device announcement message to be sent from UPnP-enabled wireless nodes to other wireless nodes within said wireless communication network is partly or completely intercepted and dropped.</p>
<p id="p-0027" num="0032">A further aspect of this embodiment refers to the steps of mapping at least one UPnP device and/or service type to the closest-matching device type of other UPnP-enabled wireless nodes within said wireless communication network and ignoring not UPnP-enabled devices.</p>
<p id="p-0028" num="0033">According to a still further aspect of this embodiment, said UPnP multicast messages are buffered until at least one other UPnP-enabled wireless node has been found by said service and/or device search procedure in the network protocol stack below the IP layer of said wireless node's host operating system. These buffered UPnP multicast messages are deleted when a confirmation message indicating that said at least one other UPnP-enabled wireless node matching said request has been found.</p>
<p id="p-0029" num="0034">A further aspect of the present invention generally refers to a wireless node for transmitting service and/or device discovery messages in a wireless communication network which provides routing, packet forwarding and service and/or device discovery functionality, wherein said wireless node comprises a module being specially configured for preventing broadcast routing and packet forwarding of data packets carrying service and/or device discovery messages as payloads within said wireless communication network. Said wireless node may be specially configured for transmitting these service and/or device discovery messages by using a communication protocol of a protocol layer organized on top of a TCP/IP-based networking layer from a protocol stack hierarchy according to the ISO/OSI reference model, wherein said communication protocol is based on the Universal Plug and Play (UPnP) standard. The routing, packet forwarding as well as service and/or device discovery functionality in said wireless communication network may preferably be provided on a medium access control (MAC) sublayer of the data link control (DLC) layer from said protocol stack hierarchy. In particular, said module may be specially configured for preventing broadcast routing and packet forwarding of DLC/MAC data packets carrying IP data packets as payloads which, in turn, contain data packets of the UPnP service and/or device discovery messages as payloads within said wireless communication network.</p>
<p id="p-0030" num="0035">According to a further aspect of this embodiment, the aforementioned module is specially configured for performing a method as described above.</p>
<p id="p-0031" num="0036">The module especially comprises a profile mapping unit being specially configured for mapping at least one UPnP device and/or service type to the closest-matching device type of other UPnP-enabled wireless nodes within said wireless communication network, thereby ignoring not UPnP-enabled devices.</p>
<p id="p-0032" num="0037">Finally, a third embodiment of this invention pertains to a computer program product being specially configured for performing a method as described above.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0006" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0033" num="0038">Advantageous features, aspects, and advantages of the invention will become evident from the following description, the appended claims, and the accompanying drawings. Thereby,</p>
<p id="p-0034" num="0039"><figref idref="DRAWINGS">FIG. 1</figref> shows a communication scenario between two CDs and a CP in a fixed line network realized as a wired LAN with bus topology and the network protocol stacks of these nodes, wherein said fixed line network is based on a UPnP-based communication protocol on top of a TCP/IP-based networking layer,</p>
<p id="p-0035" num="0040"><figref idref="DRAWINGS">FIG. 2</figref> shows a further communication scenario in a wireless network with three UPnP-enabled nodes,</p>
<p id="p-0036" num="0041"><figref idref="DRAWINGS">FIG. 3</figref> is a diagram showing a network protocol stack of a wireless node's host operating system, said network protocol stack being extended by an UPnP optimizer module according to the present invention which is integrated between the DLC layer and the IP layer of said network protocol stack,</p>
<p id="p-0037" num="0042"><figref idref="DRAWINGS">FIG. 4</figref> shows a wireless communication scenario with an optimized distribution of UPnP multicast messages according to the present invention,</p>
<p id="p-0038" num="0043"><figref idref="DRAWINGS">FIG. 5</figref> shows a timing diagram for illustrating message exchange between protocol layers of UPnP-enabled wireless nodes and not UPnP-enabled wireless nodes in a wireless communication system, wherein the UPnP optimizer module according to the present invention is not applied,</p>
<p id="p-0039" num="0044"><figref idref="DRAWINGS">FIG. 6</figref> shows a timing diagram for illustrating message exchange between protocol layers of UPnP-enabled wireless nodes and not UPnP-enabled wireless nodes in a wireless communication system, wherein the UPnP optimizer module according to the present invention is applied,</p>
<p id="p-0040" num="0045"><figref idref="DRAWINGS">FIG. 7</figref><i>a </i>shows a communication scenario in a client/server-based heterogeneous network environment, wherein a UPnP-enabled wireless client equipped with the proposed UPnP optimizer module according to the present invention is communicating with a UPnP-enabled application server which has been found by a service and device discovery procedure initiated by the wireless client,</p>
<p id="p-0041" num="0046"><figref idref="DRAWINGS">FIG. 7</figref><i>b </i>shows a communication scenario in a client/server-based heterogeneous home network environment consisting of a wireless LAN and a backbone network realized as a wired LAN, wherein a UPnP-enabled wireless client equipped with the UPnP optimizer module is communicating with a home server that has been found by a service and device discovery procedure initiated by the wireless client,</p>
<p id="p-0042" num="0047"><figref idref="DRAWINGS">FIG. 7</figref><i>c </i>shows a part of the protocol stack hierarchy used by this wireless node, and</p>
<p id="p-0043" num="0048"><figref idref="DRAWINGS">FIG. 7</figref><i>d </i>shows the details of identical protocol stacks <b>704</b><i>d</i>&#x2032;, <b>706</b><i>b</i>&#x2032;, <b>702</b><i>e</i>&#x2032; and <b>710</b><i>a</i>&#x2032; shown in <figref idref="DRAWINGS">FIG. 7</figref><i>a </i>and</p>
<p id="p-0044" num="0049"><figref idref="DRAWINGS">FIG. 8</figref> shows a flow chart which illustrates the proposed method for transmitting service and/or device discovery messages according to the present invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0007" level="1">DETAILED DESCRIPTION OF THE PRESENT INVENTION</heading>
<p id="p-0045" num="0050">In the following, the invention will be explained in more detail with respect to special embodiments and in relation to the accompanying drawings.</p>
<p id="p-0046" num="0051">An example for the proposed method according to the present invention is illustrated in the wireless network scenario depicted <figref idref="DRAWINGS">FIG. 4</figref>. Therein, nodes <b>1</b>, <b>3</b> and <b>5</b>, in <figref idref="DRAWINGS">FIG. 4</figref> also referred to by reference numbers <b>402</b><i>a</i>, <b>402</b><i>c </i>and <b>402</b><i>e</i>, respectively, are UPnP-enabled, while nodes <b>2</b> and <b>4</b>, in <figref idref="DRAWINGS">FIG. 4</figref> also referred to by reference numbers <b>402</b><i>b </i>and <b>402</b><i>d</i>, respectively, only support the wireless network specific device discovery functionality. If node <b>1</b> now wants to perform a UPnP device search by sending a multicast packet, the UPnP optimizer module <b>304</b> according to the present invention performs a service and/or device discovery for UPnP-enabled devices by using specific functions on the MAC sublayer of the DLC layer. This discovery process will find nodes <b>3</b> and <b>5</b>. (Thereby, node <b>5</b> is found since the DLC/MAC discovery message is forwarded by node <b>2</b>.) This message exchange is represented by lines <b>406</b><i>a</i>-<i>d</i>. Arrows <b>408</b><i>a </i>and <b>408</b><i>b </i>represent two subsequent DLC/MAC unicast messages carrying the IP payload (which, in turn, contains a UPnP service and/or device discovery message). Since the host PC of a wireless network card may be in sleep mode while the network card itself is still capable of performing DLC layer communication, the UPnP optimizer module <b>304</b> according to the present invention sends a special DLC wake-up message so as to ensure that the receiving PC is woken up and capable of forwarding the message to the higher layers (IP, UPnP) on the host PC before sending the unicast message. Said UPnP devices periodically send out notification messages (&#x201c;alive&#x201d; messages) to make themselves known to other nodes on the wireless network, which are repeated two or three times when following the standard recommendation. The UPnP optimizer module <b>304</b> according to the present invention can be configured to modify this behavior in order to intercept these device announcements and drop all of them before they are sent or to only drop said duplicate messages if the wireless network is considered to be reliable enough.</p>
<p id="p-0047" num="0052">In contrast to a standard UPnP implementation without any UPnP optimizer module, which is not optimized for use in a wireless network, the UPnP optimizer module according to the present invention component reduces the amount of communication overhead incurred through UPnP device searches and announcements
<ul id="ul0005" list-style="none">
    <li id="ul0005-0001" num="0000">
    <ul id="ul0006" list-style="none">
        <li id="ul0006-0001" num="0053">by intercepting device announcements partly or completely and</li>
        <li id="ul0006-0002" num="0054">by using unicast messages instead of layer <b>2</b> broadcast messages to send device enquiries only to those wireless network nodes which support UPnP and are possible candidates because of a matching wireless network device type.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0048" num="0055">The proposed UPnP optimizer module <b>304</b> according to the present invention can be used with any UPnP implementation, regardless whether the source code of that implementation is available or not, as said UPnP implementation does not need to be modified. Even though the UPnP standard behavior is slightly modified, the UPnP optimizer module <b>304</b> as described above does not break the overall UPnP semantics. If the modifications would cause problems, it can be configured easily to be more (or completely) adherent to the UPnP standard (which means losing efficiency). The timing diagram depicted in <figref idref="DRAWINGS">FIG. 5</figref> shows a (simplified) message exchange of a device announcement without the above-described optimization procedure.</p>
<p id="p-0049" num="0056">As opposed to <figref idref="DRAWINGS">FIG. 5</figref>, the timing diagram depicted in <figref idref="DRAWINGS">FIG. 6</figref> shows the interactions for a message exchange when the UPnP optimizer module <b>304</b> according to the present invention is used.</p>
<p id="p-0050" num="0057">As can be seen from the timing diagrams depicted in <figref idref="DRAWINGS">FIGS. 5 and 6</figref>, the proposed UPnP optimizer module <b>304</b> according to the present invention decreases the amount of broadcasted packets when a UPnP-enabled device announces its presence on the wireless network. Utilizing wireless MAC specific device discovery features that are more efficient than IP-based device discovery, the proposed UPnP optimizer module <b>304</b> according to the present invention only sends UPnP messages to UPnP-enabled devices. Moreover, as the UPnP standard recommends to repeat messages once or twice, these duplicate messages are intercepted and removed so as to avoid this overhead.</p>
<p id="p-0051" num="0058">In <figref idref="DRAWINGS">FIG. 7</figref><i>a </i>a typical communication scenario in a client/server-based heterogeneous network environment is shown, wherein a UPnP-enabled wireless client <b>704</b><i>d</i>, e.g. a Web-enabled organizer or a Personal Digital Assistent (PDA), equipped with the proposed UPnP optimizer module <b>304</b> according to the present invention is communicating with a UPnP-enabled application server <b>702</b><i>e </i>which has been found by a service and device discovery procedure initiated by said wireless client <b>704</b><i>d</i>. As can be taken from <figref idref="DRAWINGS">FIG. 7</figref><i>a</i>, data packets carrying a service and/or device discovery request message as a payload to be sent from UPnP-enabled wireless client <b>704</b><i>d </i>to the aforementioned UPnP-enabled application server <b>702</b><i>e </i>are wirelessly transmitted from the UPnP-enabled wireless client <b>704</b><i>d </i>to an access point <b>704</b><i>e </i>acting as a base station of a wireless LAN said wireless client <b>704</b><i>d </i>is a part of, before they are further transferred via gateway <b>705</b> from said access point <b>704</b><i>e </i>over a wired link to a packet-switched wired network <b>702</b> (e.g. the Internet), wherein they are forwarded and routed via hub <b>702</b><i>b </i>and at least one node <b>702</b><i>d </i>with routing functionality, respectively, to the aforementioned UPnP-enabled application server <b>702</b><i>e </i>so as to have access to a specific network service offered by this application server, such as e.g. Voice-over-IP (VoIP), fax and e-mail messaging, LAN/WAN access, video-on-demand, etc., or to have access to a data base system of a file server <b>702</b><i>f</i>, which is connected to the UPnP-enabled application server <b>702</b><i>e </i>via node <b>702</b><i>d</i>. In the communication scenario depicted in <figref idref="DRAWINGS">FIG. 7</figref><i>a</i>, further examples of UPnP-enabled and not UPnP-enabled clients sending requests for receiving service and/or device discovery information are shown. These examples include a UPnP-enabled personal computer <b>710</b><i>a </i>and a not UPnP-enabled laptop computer <b>710</b><i>b </i>being connected to the packet-switched wired network <b>702</b> via an ISDN link by switch <b>711</b><i>a</i>, node <b>711</b><i>b/c </i>with router and firewall capability and ISDN socket <b>711</b><i>d</i>, a not UPnP-enabled personal computer <b>708</b><i>a </i>and a further not UPnP-enabled laptop computer <b>708</b><i>b </i>being connected to the packet-switched wired network <b>702</b> via a modem link by switch <b>709</b><i>a</i>, node <b>709</b><i>b/c </i>with router and firewall capability and modem <b>709</b><i>d </i>as well as a wired Ethernet LAN <b>706</b> with bus topology being connected to the packet-switched wired network <b>702</b> by means of bridge router (brouter) <b>707</b>, wherein said Ethernet LAN <b>706</b> is used for connecting a number of wired clients comprising e.g. a workstation computer <b>706</b><i>a</i>, a personal computer <b>706</b><i>b </i>and a laptop computer <b>706</b><i>d </i>of a small company's corporate network. From <figref idref="DRAWINGS">FIG. 7</figref><i>a </i>it is apparent that both UPnP-enabled and not UPnP-enabled nodes within this client-server-based heterogeneous network environment communicate with each other via said network links by using identical protocol stacks <b>704</b><i>d</i>&#x2032;, <b>706</b><i>b</i>&#x2032;, <b>702</b><i>e</i>&#x2032; and <b>710</b><i>a</i>&#x2032; (the details of which are shown in <figref idref="DRAWINGS">FIG. 7</figref><i>d</i>) with a protocol stack hierarchy organized according to the ISO/OSI reference model. This means that identical communication protocols are used in the corresponding protocol layers of each node. In UPnP-enabled nodes <b>704</b><i>d </i>and <b>710</b><i>a</i>, however, service and/or device discovery messages are transmitted by using an additional communication protocol of a protocol layer organized on top of a TCP/IP-based networking layer from a protocol stack hierarchy according to the ISO/OSI reference model, wherein said communication protocol is based on the UPnP standard. According to the present invention, these nodes can advantageously be equipped with the proposed UPnP optimizer module <b>304</b> described above as depicted in <figref idref="DRAWINGS">FIG. 7</figref><i>a</i>.</p>
<p id="p-0052" num="0059">In <figref idref="DRAWINGS">FIG. 7</figref><i>b </i>a typical communication scenario in a client/server-based heterogeneous home network environment consisting of a wireless LAN <b>704</b> as described with reference to <figref idref="DRAWINGS">FIG. 7</figref><i>a </i>and a backbone network realized as a wired Ethernet LAN <b>706</b> with bus topology which is connected to the wireless LAN <b>704</b> by means of a gateway <b>705</b> is shown. Thereby, said Ethernet LAN <b>706</b> is used for connecting a number of wired clients comprising e.g. a workstation computer <b>706</b><i>a </i>and a laptop computer <b>706</b><i>d </i>(herein also referred to as &#x201c;media renderer devices&#x201d;) with a UPnP-enabled application server <b>706</b><i>c </i>(also referred to as &#x201c;media server&#x201d; or &#x201c;home server&#x201d;) in said home network environment. In this communication scenario, a UPnP-enabled wireless client <b>704</b><i>d </i>(e.g. a Web-enabled organizer or PDA) equipped with the proposed UPnP optimizer module <b>304</b> according to the present invention is communicating with said home server <b>706</b><i>c</i>, wherein the latter has been found by a service and device discovery procedure initiated by the wireless client <b>704</b><i>d</i>. From <figref idref="DRAWINGS">FIG. 7</figref><i>b </i>it can be taken that both UPnP-enabled and not UPnP-enabled nodes within this client-server-based heterogeneous home network environment communicate with each other by using identical protocol stacks <b>704</b><i>d</i>&#x2032; and <b>706</b><i>c</i>&#x2032; having a protocol stack hierarchy which is organized according to the ISO/OSI reference model. In UPnP-enabled wireless nodes <b>704</b><i>d </i>and <b>706</b><i>c</i>, service and/or device discovery messages are transmitted by using an additional communication protocol from a protocol layer organized on top of a TCP/IP-based networking layer from a protocol stack hierarchy according to the ISO/OSI reference model, wherein said communication protocol is based on the UPnP standard. According to the present invention, the UPnP optimizer module <b>304</b> can optionally be switched off in order to avoid unnecessary processing overhead. In case a node (not shown) within the above-described client/server-based heterogeneous home network environment is connected both to the wireless LAN <b>704</b> and to the wired Ethernet LAN <b>706</b>, said UPnP optimizer module <b>304</b> may be configured for being active only on the wireless interface.</p>
<p id="p-0053" num="0060"><figref idref="DRAWINGS">FIG. 7</figref><i>c </i>shows the data transfer between the IP layer and the MAC sublayer of the DLC layer from a protocol stack hierarchy used by a UPnP-enabled wireless client <b>704</b><i>d </i>which is advantageously equipped with the proposed UPnP optimizer module <b>304</b> according to the present invention. Said proposed UPnP optimizer module is thereby integrated within this protocol stack as a new sublayer <b>2</b><i>a </i>between the IP layer and the MAC sublayer of the DLC layer. An IP protocol data unit (IP PDU) which consists of a data packet comprising a header, referred to as IP protocol control information (IP PCI), followed by an IP service data unit (IP SDU) that is used for carrying UDP data packets as payloads is transferred via a new service access point (in the following referred to as &#x201c;UPnP Opt. SAP&#x201d;) on logical traffic channels such as the Common Traffic Channel (CTCH) and the Dedicated Traffic Channel (DTCH) and/or on logical control channels such as the Synchronization Control Channel (SCCH), the Broadcast Control Channel (BCCH), the Paging Control Channel (PCCH) and the Dedicated Control Channel (DCCH) as well as the Common Control Channel (CCCH) and the Shared Channel Control Channel (SHCCH) to an input/output (I/O) interface <b>304</b><i>c </i>of the proposed UPnP optimizer module <b>304</b> and forwarded to an integrated data flow control unit <b>304</b><i>b</i>. According to the invention, this data flow control unit <b>304</b><i>b </i>is responsible for preventing broadcast routing and packet forwarding of MAC PDUs carrying IP PDUs as payloads which, in turn, contain PDUs of a UPnP service and/or device discovery message from said UPnP-enabled wireless node <b>704</b><i>d </i>as payloads. Moreover, a profile mapping unit <b>304</b><i>a </i>connected to the data flow control unit <b>304</b><i>b</i>, said profile mapping unit <b>304</b><i>a </i>allowing a relative fine-grained mapping of UPnP-enabled network devices searched by a UPnP query to the respective wireless network device type of the UPnP-enabled wireless client (here: PDA <b>704</b><i>d</i>) being equipped with said UPnP optimizer module <b>304</b>, can be integrated within the UPnP optimizer module <b>304</b>. After having intercepted a UPnP multicast message to be sent from UPnP-enabled wireless client <b>704</b><i>d </i>to other UPnP-enabled nodes <b>702</b><i>e </i>and <b>710</b><i>a </i>within said client/server-based heterogeneous communication network which have been found by a service and/or device search procedure initiated by the UPnP-enabled wireless client <b>704</b><i>d</i>, data flow control unit <b>304</b><i>b </i>maps this UPnP multicast message to a DLC/MAC unicast message to be sent to the UPnP-enabled application server <b>702</b><i>e </i>it is destined. Thereby, said DLC/MAC unicast message carries an IP payload which, in turn, contains a UPnP service and/or device discovery message as a payload. <figref idref="DRAWINGS">FIG. 7</figref><i>c </i>further illustrates that a new IP PDU which contains the aforementioned DLC/MAC unicast message is transferred via a DLC service access point (DLC SAP) to a data flow control entity (not shown) in the MAC sublayer of the DLC layer. After that, a MAC protocol data unit (MAC PDU) that consists of a data packet comprising a header, which is also referred to as MAC protocol control information (MAC PCI), followed by a MAC service data unit (MAC SDU) which is used for carrying IP PDUs as payloads is transferred via a PHY service access point (PHY SAP) to the physical layer in order to be sent to said UPnP-enabled application server <b>702</b><i>e. </i></p>
<p id="p-0054" num="0061">A flow chart that illustrates the proposed method for transmitting service and/or device discovery messages according to the present invention is shown in <figref idref="DRAWINGS">FIG. 8</figref>. The procedure described by this flow chart begins with a step of waiting for the reception of a request (S<b>1</b>) for performing a UPnP service and/or device search within said wireless communication network from a first UPnP-enabled wireless node <b>402</b><i>a </i>being connected to the wireless communication network. In case such a request is not received, the procedure returns to its start, thus waiting until a request for performing a UPnP service and/or device search has been received. After having received such a request, a service and/or device search procedure (S<b>2</b>) is carried out that searches for other UPnP-enabled nodes <b>402</b><i>c </i>and <b>402</b><i>e </i>matching said request by sending PDUs of a multicast message on the MAC sublayer of the DLC layer from the protocol stack of the first UPnP-enabled wireless node's host operating system, said multicast message carrying an IP payload which, in turn, contains a UPnP service and/or device discovery message as a payload, to other nodes <b>402</b><i>b</i>, <b>402</b><i>c</i>, <b>402</b><i>d </i>and <b>402</b><i>e </i>in the wireless communication network, forwarding the multicast message through said wireless communication network and receiving responses from said other wireless nodes <b>402</b><i>b</i>-<i>e </i>on said MAC sublayer. In case of receiving a control signal (S<b>3</b>) which commands to send UPnP multicast messages from the first UPnP-enabled wireless node <b>402</b><i>a </i>to other UPnP-enabled wireless nodes <b>402</b><i>c+e </i>found by said service and/or device search procedure, the UPnP multicast messages are intercepted (S<b>4</b>) in the protocol stack below the IP layer of said first UPnP-enabled wireless node's host operating system and then mapped (S<b>5</b>) to a specific number of DLC/MAC unicast messages carrying an IP payload which, in turn, contains a UPnP service and/or device discovery message as a payload. The DLC/MAC unicast messages are finally sent (S<b>6</b>) to those other UPnP-enabled wireless nodes <b>402</b><i>c</i>+e within the wireless communication network they are destined. In case such a control signal is not received, the procedure is continued with step S<b>6</b>.</p>
<p id="p-0055" num="0062">In contrast to the above-described prior art, the proposed UPnP optimizer module <b>304</b> according to the present invention does not need any interworking unit to intercept UPnP data packets. Instead, each UPnP-enabled wireless node <b>402</b><i>a</i>, <b>402</b><i>c </i>and <b>402</b><i>e </i>is able to perform the above-described method for transmitting UPnP service and/or device discovery messages, such that it is more flexible. Furthermore, the proposed UPnP optimizer module <b>304</b> according to the present invention is not limited to the setup described in prior-art document WO 2005/076567 A1, which refers to a combination of a wired and wireless network, but works well in a pure wireless network environment.</p>
<p id="p-0056" num="0063">A further difference between prior-art document WO 2005/076567 A1 and the present invention consists in the fact that according to the present invention UPnP multicast packets are not just dropped to prevent overloading the wireless network. Instead, capabilities of the underlying wireless network are used to perform an optimized device search for UPnP-enabled devices within said wireless communication network. If UPnP-enabled devices are found, said UPnP optimizer module <b>304</b> sends UPnP unicast messages to all those UPnP-enabled wireless nodes they are destined.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method for transmitting service and/or device discovery messages by a first node to other nodes in a wireless communication network that provides routing, packet forwarding, and service and/or device discovery functionality in a MAC-sublayer of a DLC-layer not supporting multicast routing, by using a communication protocol of a protocol layer organized on top of a TCP/IP-based networking layer from a protocol stack hierarchy according to the ISO/OSI reference model, wherein the communication protocol is based on the Universal Plug and Play (UPnP) standard, the method comprising:
<claim-text>preventing the first node from broadcast routing and packet forwarding of data packets carrying service and/or device discovery messages as payloads within the wireless communication network by intercepting the first node from sending UPnP multicast messages to be sent from a first UPnP-enabled wireless node to other UPnP-enabled wireless nodes found by a service and/or device search procedure in a network protocol stack below an IP layer of said first UPnP-enabled wireless node's host operating system;</claim-text>
<claim-text>mapping the UPnP multicast messages by an optimizer module of the first node to DLC/MAC unicast messages, said DLC/MAC unicast messages carrying an IP payload which, in turn, contains a UPnP service and/or device discovery message as a payload;</claim-text>
<claim-text>sending the DLC/MAC unicast messages to said other UPnP-enabled wireless nodes within said wireless communication network to which the DLC/MAC unicast messages are destined;</claim-text>
<claim-text>buffering the UPnP multicast messages until at least one other UPnP-enabled wireless node has been found by the service and/or device search procedure in the network protocol stack below the IP layer of the first UPnP-enabled wireless node's host operating system; and</claim-text>
<claim-text>deleting buffered UPnP multicast messages when a confirmation message indicating that the at least one other UPnP-enabled wireless node matching the request has been found.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. A method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein
<claim-text>the preventing broadcast routing and packet forwarding of data packets carrying service and/or device discovery messages as payloads within the wireless communication network includes preventing broadcast routing and packet forwarding of DLC/MAC data packets carrying IP data packets as payloads which, in turn, contain data packets of the UPnP service and/or device discovery messages as payloads within the wireless communication network.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. A method according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, further comprising:
<claim-text>receiving a request for performing a UPnP service and/or device search within the wireless communication network from a first UPnP-enabled wireless node being connected to the wireless communication network; and</claim-text>
<claim-text>performing a service and/or device search procedure that searches for other UPnP-enabled nodes matching the request by sending data packets of a broadcast message on the medium access control (MAC) sublayer of the data link control (DLC) layer from the network protocol stack of the first UPnP-enabled wireless node's host operating system, the broadcast message carrying an IP payload which, in turn, includes a UPnP service and/or device discovery message as a payload, to other wireless nodes within the wireless communication network, forwarding the broadcast message through the wireless communication network and receiving responses from the other wireless nodes on the medium access control sublayer.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. A method according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, further comprising:
<claim-text>sending DLC wake-up messages to each other UPnP-enabled wireless node for ensuring that the host operating systems of the UPnP-enabled wireless nodes are capable of forwarding a received DLC/MAC unicast message to higher layers of their network protocol stack before sending a DLC/MAC unicast message to each of the other UPnP-enabled wireless nodes.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. A method according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, further comprising:
<claim-text>partly or completely intercepting and dropping each duplicate of a periodically repeated IP multicast service and/or device announcement message to be sent from UPnP-enabled wireless nodes to other wireless nodes within the wireless communication network.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. A method according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, further comprising:
<claim-text>mapping at least one UPnP device and/or service type to a closest-matching device type of other UPnP-enabled wireless nodes within the wireless communication network; and</claim-text>
<claim-text>ignoring not UPnP-enabled devices.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. A method according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, further comprising:
<claim-text>mapping at least one UPnP device and/or service type to the closest-matching device type of other UPnP-enabled wireless nodes within said wireless communication network; and</claim-text>
<claim-text>ignoring not UPnP-enabled devices.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. A wireless node for transmitting service and/or device discovery messages in a wireless communication network that provides routing, packet forwarding as well as service and/or device discovery functionality in a MAC-sublayer of a DLC-layer by using a communication protocol of a protocol layer organized on top of a TCP/IP-based networking layer from a protocol stack hierarchy according to the ISO/OSI reference model, wherein the communication protocol is based on the Universal Plug and Play (UPnP) standard, comprising:
<claim-text>a module configured to
<claim-text>prevent broadcast routing and packet forwarding of data packets carrying service and/or device discovery messages as payloads within the wireless communication network by intercepting UPnP multicast messages to be sent from a first UPnP-enabled wireless node to other UPnP-enabled wireless nodes found by a service an/or device search procedure in a network protocol stack below an IP layer of said first UPnP-enabled wireless node's host operating system;</claim-text>
<claim-text>map the UPnP multicast messages to DLC/MAC unicast messages, said DLC/MAC unicast messages carrying an IP payload which, in turn, contains a UPnP service and/or device discovery message as a payload;</claim-text>
<claim-text>send the DLC/MAC unicast messages to said other UPnP-enabled wireless nodes within said wireless communication network to which the DLC/MAC unicast messages are destined;</claim-text>
<claim-text>buffer said UPnP multicast messages until at least one of said other UPnP-enabled wireless nodes has been found by said service and/or device search procedure in the network protocol stack below the IP layer of said first UPnP-enabled wireless node's host operating system; and</claim-text>
<claim-text>delete buffered UPnP multicast messages when a confirmation message indicating that said at least one of said other UPnP-enabled wireless nodes matching said request has been found.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. A wireless node according to <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the module is further configured to prevent broadcast routing and packet forwarding of DLC/MAC data packets carrying IP data packets as payloads which, in turn, contain data packets of the UPnP service and/or device discovery messages as payloads within the wireless communication network.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. A wireless node according to <claim-ref idref="CLM-00008">claim 8</claim-ref>, further comprising a profile mapping unit configured to map the multicast messages.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. A wireless node according to <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein said module is configured for preventing broadcast routing and packet forwarding of DLC/MAC data packets carrying IP data packets as payloads which, in turn, contain data packets of said UPnP service and/or device discovery messages as payloads within said wireless communication network. </claim-text>
</claim>
</claims>
</us-patent-grant>
