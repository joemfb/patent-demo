<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625771-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625771</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13668497</doc-number>
<date>20121105</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<us-term-of-grant>
<disclaimer>
<text>This patent is subject to a terminal disclaimer.</text>
</disclaimer>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>M</subclass>
<main-group>7</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>379232</main-classification>
<further-classification>379240</further-classification>
</classification-national>
<invention-title id="d2e51">Local route groups and transformation patterns</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6847634</doc-number>
<kind>B1</kind>
<name>Pearce et al.</name>
<date>20050100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6975718</doc-number>
<kind>B1</kind>
<name>Pearce et al.</name>
<date>20051200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>8036368</doc-number>
<kind>B2</kind>
<name>Brunsgaard et al.</name>
<date>20111000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>8306210</doc-number>
<kind>B2</kind>
<name>Brunsgaard et al.</name>
<date>20121100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>379232</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2005/0147088</doc-number>
<kind>A1</kind>
<name>Bao et al.</name>
<date>20050700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2007/0083918</doc-number>
<kind>A1</kind>
<name>Pearce et al.</name>
<date>20070400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2009/0110180</doc-number>
<kind>A1</kind>
<name>Brunsgaard et al.</name>
<date>20090400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>379232</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2012/0020255</doc-number>
<kind>A1</kind>
<name>Brunsgaard et al.</name>
<date>20120100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370259</main-classification></classification-national>
</us-citation>
</us-references-cited>
<number-of-claims>20</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>379232</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>379240</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>6</number-of-drawing-sheets>
<number-of-figures>6</number-of-figures>
</figures>
<us-related-documents>
<continuation>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>13251855</doc-number>
<date>20111003</date>
</document-id>
<parent-grant-document>
<document-id>
<country>US</country>
<doc-number>8306210</doc-number>
</document-id>
</parent-grant-document>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>13668497</doc-number>
</document-id>
</child-doc>
</relation>
</continuation>
<continuation>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>11923107</doc-number>
<date>20071024</date>
</document-id>
<parent-grant-document>
<document-id>
<country>US</country>
<doc-number>8036368</doc-number>
<date>20111011</date>
</document-id>
</parent-grant-document>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>13251855</doc-number>
</document-id>
</child-doc>
</relation>
</continuation>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20130064361</doc-number>
<kind>A1</kind>
<date>20130314</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Brunsgaard</last-name>
<first-name>Niels</first-name>
<address>
<city>Boulder</city>
<state>CO</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Pearce</last-name>
<first-name>Christopher E.</first-name>
<address>
<city>Dallas</city>
<state>TX</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Brunsgaard</last-name>
<first-name>Niels</first-name>
<address>
<city>Boulder</city>
<state>CO</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Pearce</last-name>
<first-name>Christopher E.</first-name>
<address>
<city>Dallas</city>
<state>TX</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Fish &#x26; Richardson P.C.</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Cisco Technology, Inc.</orgname>
<role>02</role>
<address>
<city>San Jose</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Hong</last-name>
<first-name>Harry</first-name>
<department>2652</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">In one embodiment, method can include: receiving an address in a call agent, the address being associated with a call; triggering a trunk group selection algorithm in response to at least a portion of the received address, the trunk group selection algorithm providing a selection result from among a trunk group placeholder and a plurality of trunk groups; and forwarding the call to a trunk group determined by a caller-associated attribute when the selection result comprises the trunk group placeholder.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="204.55mm" wi="190.75mm" file="US08625771-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="193.55mm" wi="176.87mm" file="US08625771-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="207.01mm" wi="187.79mm" file="US08625771-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="219.20mm" wi="191.01mm" file="US08625771-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="243.50mm" wi="154.43mm" file="US08625771-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="214.04mm" wi="171.11mm" file="US08625771-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="232.58mm" wi="158.92mm" file="US08625771-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This application is a continuation application of and claims priority to U.S. application Ser. No. 13/251,855, filed on Oct. 3, 2011, the entire contents of which are incorporated herein by reference. Application Ser. No. 13/251,855 is itself a continuation of and claims priority to U.S. application Ser. No. 11/923,107, filed on Oct. 24, 2007, the entire contents of which are herein incorporated by reference.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">TECHNICAL FIELD</heading>
<p id="p-0003" num="0002">The present disclosure relates generally to management and configuration of trunk groups for call routing.</p>
<heading id="h-0003" level="1">BACKGROUND</heading>
<p id="p-0004" num="0003">Conventional early enterprise systems supported one public switched telephone network (PSTN) or &#x201c;trunk&#x201d; per phone. However, newer enterprise telephone systems typically support a far larger number of telephones and connections to the PSTN. As a result, end-users may no longer be guaranteed placement of their outbound calls because all available trunks may be in use by other callers.</p>
<p id="p-0005" num="0004">Traditional private branch exchanges (PBXs) provide for bundling groups of trunks together in order to support outbound callers. Most PBXs utilize an approach whereby a call agent, upon receiving a call request from an enterprise user, searches through all trunk resources to find an available trunk to place the outbound call. Voice over Internet protocol (VoIP) technologies also support such &#x201c;route group&#x201d; approaches.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0006" num="0005"><figref idref="DRAWINGS">FIG. 1</figref> illustrates an example static call routing configuration.</p>
<p id="p-0007" num="0006"><figref idref="DRAWINGS">FIG. 2</figref> illustrates an example configuration with a call agent supporting static call routing.</p>
<p id="p-0008" num="0007"><figref idref="DRAWINGS">FIG. 3</figref> illustrates an example configuration using trunk group placeholders.</p>
<p id="p-0009" num="0008"><figref idref="DRAWINGS">FIG. 4</figref> illustrates a flow diagram of an example method of transforming patterns in a local route group approach.</p>
<p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. 5</figref> illustrates an example local outdial configuration for local route groups using number transformation.</p>
<p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. 6</figref> illustrates a flow diagram of an example method of dynamically configuring a local route group.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DESCRIPTION OF EXAMPLE EMBODIMENTS</heading>
<heading id="h-0006" level="1">Overview</heading>
<p id="p-0012" num="0011">In one embodiment, a method can include: receiving an address in a call agent, the address being associated with a call; triggering a trunk group selection algorithm in response to at least a portion of the received address, the trunk group selection algorithm providing a selection result from among a trunk group placeholder and a plurality of trunk groups; and forwarding the call to a trunk group determined by a caller-associated attribute when the selection result comprises the trunk group placeholder.</p>
<heading id="h-0007" level="1">Example Embodiments</heading>
<p id="p-0013" num="0012">In particular embodiments, an administrator can organize trunks into groups having similar characteristics. For example, trunks that connect to a public switched telephone network (PSTN) at a same attachment point, and which have the same PSTN rate plans, can be placed in the same group. Further, an administrator may be aware of which trunks are equivalent for routing purposes, and can simply place like trunks in the same group to form a &#x201c;trunk group&#x201d; or &#x201c;route group.&#x201d; In particular embodiments, gateways coupled to the route groups may have a particular attribute (e.g., a geographic location attribute), and this attribute may be provided in a registration message sent from a phone to a call agent. Further, a call agent can automatically assign the gateways into groups containing gateways with similar or identical location attributes. Further, such attributes may be defined in a caller-associated configuration in the call agent.</p>
<p id="p-0014" num="0013">Once trunks have been placed into named trunk groups, when a call agent (e.g., in the act of processing a call) determines that the trunk group is a candidate to handle the call, the call agent can attempt to select an available trunk from among those in the group to process the call. Traditionally, call agents provide &#x201c;route pilots,&#x201d; &#x201c;pilot points,&#x201d; or &#x201c;route lists.&#x201d; In particular embodiments, a trunk group selection algorithm approach can include the administrator specifying a trunk group selection algorithm, which may include one or more predefined trunk groups. The administrator can specify or arrange trunk groups based on attributes, such as those trunks in a particular geographic location, those with a favorable route plan, or by considering any suitable attribute. However, the administrator may also specify that the trunk group selection algorithm contain not strictly a predefined trunk group, but rather a &#x201c;trunk group placeholder&#x201d; that can represent a specific trunk group, or a &#x201c;local route group&#x201d; that may be associated with the caller or a group of callers.</p>
<p id="p-0015" num="0014">In this fashion, a caller-associated trunk group placeholder can be utilized in particular embodiments to provide a dynamic search order based on caller-associated attributes. Accordingly, such a trunk group in the placeholder may not be a static group, but rather a command to the trunk group selection algorithm to offer the call to a personal trunk group specifically provisioned by the administrator for the caller. Further, such a caller-specific trunk group placeholder can coexist with other fixed trunk groups in a &#x201c;hunt&#x201d; algorithm. For example, a call routing pattern can include: (i) if the caller is dialing a particular area code for which the administrator has a predefined route group, then offer the call to that route group by name; (ii) otherwise, use the trunk group placeholder to offer the call to a trunk group that contains trunks that are, most likely, attached to the part of the PSTN that normally serves the caller; and (iii) otherwise, fail over to a specific centralized predefined trunk group, likely in a central campus location.</p>
<p id="p-0016" num="0015">In particular embodiments, once the trunk group selection algorithm is triggered, then the call agent can, when the placeholder is encountered, offer the call to a local trunk group assigned to the caller. To trigger the trunk group selection algorithm, the administrator can bind some sort of dialable address (e.g., a pattern or portion of a received address) to the algorithm. For example, such a pattern or address can be a standard numeric pattern, an Internet URL with a numeric component, or any suitable addressing mechanism/approach.</p>
<p id="p-0017" num="0016">For each trunk group selection algorithm, the administrator can define dialable addresses to permit callers to select these algorithms when they need to place calls to the PSTN. These addresses may represent, directly or indirectly, numbers in the PSTN that callers may wish to dial. When a caller provides digits, the call agent can select a matching address, and execute the associated trunk group selection algorithm.</p>
<p id="p-0018" num="0017">However, because the provided digits may not exactly match or be compatible with what the PSTN for the selected trunk expects, the administrator can provision (e.g., on a gateway-by-gateway basis) a set of transformation rules that can convert numbers, as dialed by all possible callers into a canonical format that the PSTN connected at the gateway expects. Further, the administrator, optionally for each caller defined in a system, can specify a trunk group that the trunk group selection algorithm should use when encountering the caller-specific trunk group placeholder.</p>
<p id="p-0019" num="0018">In particular embodiments, a call agent that is provided information about a calling device (e.g., its IP address or a location string) can use this information to dynamically provision a trunk group for that caller. This allows the routing behavior for a caller to dynamically change as the caller moves around a network served by a given call agent.</p>
<p id="p-0020" num="0019">Generally, particular embodiments relate to an abstract ordering, as opposed to a fixed matrix of trunk group searches. For example, such fixed matrices (e.g., those in static form) can include first call attempts (i.e., primary choices) to groups associated with a particular area code, then groups associated with the area code of the originating call, followed by gateways in a central location (i.e., secondary, tertiary, etc., choices) associated neither with the dialed area code nor the area code of the originating call. This type of call flow may generally be known as &#x201c;toll bypass.&#x201d;</p>
<p id="p-0021" num="0020">In particular embodiments, each route group may be assigned a specific branch (e.g., area code) that it serves, and each caller may be assigned a specific branch. Further, the administrator, in addition to being able to configure fixed associations in call routing search orders, can also specify a local &#x201c;placeholder&#x201d; with the trunk group selection algorithm search. Then, when a call agent encounters an element in the search that indicates the trunk group placeholder should be used, the call agent may look at a location or other suitable attribute associated with the caller, and then dynamically search through trunk groups configured for that location. In this fashion, a trunk group to which a call can be forwarded from a call agent may be determined using a caller-associated attribute.</p>
<p id="p-0022" num="0021">Accordingly, the amount of configuration needed to represent toll bypass relationships in particular embodiments may be drastically reduced. For example, Table 1 below shows an example matrix for toll bypass routes in particular embodiments.</p>
<p id="p-0023" num="0022">
<tables id="TABLE-US-00001" num="00001">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="217pt" align="center"/>
<thead>
<row>
<entry namest="1" nameend="1" rowsep="1">TABLE 1</entry>
</row>
<row>
<entry namest="1" nameend="1" align="center" rowsep="1"/>
</row>
<row>
<entry>Calls from anywhere to:</entry>
</row>
<row>
<entry namest="1" nameend="1" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry/>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="1" colwidth="56pt" align="left"/>
<colspec colname="2" colwidth="161pt" align="left"/>
<tbody valign="top">
<row>
<entry>408 area code</entry>
<entry>Try San Jose group, then trunk group placeholder</entry>
</row>
<row>
<entry>214 area code</entry>
<entry>Try Dallas group, then trunk group placeholder</entry>
</row>
<row>
<entry>919 area code</entry>
<entry>Try RTP group, then trunk group placeholder</entry>
</row>
<row>
<entry>978 area code</entry>
<entry>Try Boxborough group, then trunk group placeholder</entry>
</row>
<row>
<entry namest="1" nameend="2" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0024" num="0023">Further, as the number of sites grows, the configuration of the static method expands geometrically, while a trunk group placeholder or local route group approach as in particular embodiments may only expand linearly.</p>
<p id="p-0025" num="0024">In addition, a local outdial configuration may permit effective utilization of centralized gateways when no gateways local to the caller are available. In static configurations, local calls from a given location may first use a group associated with that location, and then a group associated with a centralized gateway if the local group has already been fully utilized. However, trunk group placeholders can allow for local calls from anywhere to first try a local group, followed by a group associated with a centralized gateway.</p>
<p id="p-0026" num="0025">In particular embodiments, local route groups may also provide for transformation patterns related to numbering plan variations from region to region. When trunks are attached to different areas of the PSTN, digits as dialed by an enterprise user may need to be modified before being offered to the PSTN. For example, if Dallas is in a 7-digit dialing area, a user from San Jose upon viewing a Dallas number, may actually dial this number as a 12-digit number (e.g., 9-1-214-XXX-XXXX) If the &#x201c;9&#x201d; were stripped from this digit string, and the call were offered to the trunk in San Jose, the call may route across the PSTN correctly. However, these same digits as offered to the Dallas trunk may cause the caller to receive an error message because the initial &#x201c;1&#x201d; and &#x201c;214&#x201d; area codes in this particular example need not be presented to the Dallas PSTN.</p>
<p id="p-0027" num="0026">Many voice over Internet protocol (VoIP) systems in static configurations can permit the types of transformations required to perform such number manipulation. However, some such transformations may be performed on the static association between the dial plan and the trunk groups. Thus, when the call is offered to the San Jose trunk group from the &#x201c;9-1-214-XXX-XXXX&#x201d; pattern, the &#x201c;9&#x201d; may be stripped, but when the call is offered to the Dallas trunk group from the &#x201c;9-1-214-XXX-XXXX&#x201d; pattern, the &#x201c;9-1-214&#x201d; portion may be stripped.</p>
<p id="p-0028" num="0027">In particular embodiments, trunk group placeholders may be &#x201c;free-floating&#x201d; such that there is no fixed association between any local tag route group and the dial pattern that selects that local group. Thus, one may not be able to define route-by-route transformations to perform this type of manipulation because there may be no static configuration on which to base the transformation rules. Also in particular embodiments, manipulation commands may be placed directly on the trunks such that, in the absence of any fixed route, the trunks can become the place from which numerical or alphanumerical transformations may be applied. Also in particular embodiments, such transformations may be context-sensitive in order to define a table of transformations, and to apply transformations corresponding to the dialed digits.</p>
<p id="p-0029" num="0028"><figref idref="DRAWINGS">FIGS. 1 and 2</figref> below represent typical reference configurations. Referring now to <figref idref="DRAWINGS">FIG. 1</figref>, an example static call routing configuration is shown and indicated by the general reference character <b>100</b>. Richardson (RCDN) phone <b>102</b> can place a call to a call agent having a static priority ordering. In this example, a primary choice for the call can be via gateway (GW) <b>104</b> to RCDN PSTN <b>106</b>, while a secondary choice can be via GW <b>114</b> to San Jose headquarters (SJ-HQ) <b>116</b>. For example, a &#x201c;gateway&#x201d; herein can be a router configured as a voice gateway. In this example, Research Triangle Park (RTP) phone <b>108</b> can similarly place a call to the call agent, and a primary choice for routing may be via GW <b>110</b> to RTP PSTN <b>112</b>, while a secondary choice for this call may be via GW <b>114</b> to SJ-HQ <b>116</b>. Thus, a call agent or other routing path specifier can include a static ordering of gateways for incoming calls.</p>
<p id="p-0030" num="0029">Referring now to <figref idref="DRAWINGS">FIG. 2</figref>, an example configuration with a call agent supporting static call routing is shown and indicated by the general reference character <b>200</b>. For example, a &#x201c;call agent&#x201d; can be a server, a single processor, or a distributed set of processors or servers, that can be provisioned with rules for call routing. In static provisioning, a designated priority order for gateways to which incoming calls can be routed is predetermined in the configuration of the call agent. Thus, an associated search algorithm contains an explicit list or ordering of route groups for call forwarding to gateways associated therewith. In this example, call agent <b>202</b> can include search algorithm <b>230</b> coupled to a plurality of route groups (RG), such as RCDN RG <b>206</b>, SJ-HQ RG <b>212</b>, and RTP RG <b>226</b>.</p>
<p id="p-0031" num="0030">Search algorithm <b>230</b> can receive incoming calls with the associated addresses or numbers. Further, search algorithm <b>230</b> may be distributed among different locations. For example, RCDN phone <b>102</b> can provide an address or number to RCDN SA <b>204</b>, which can include a static configuration of route groups for forwarding. The search algorithm RCDN SA <b>204</b> can thus designate the RCDN primary choice as RCDN RG <b>206</b> for forwarding the call via GW <b>104</b> to RCDN PSTN <b>106</b>, with a secondary choice of SJ-HQ RG <b>212</b> for forwarding via GW <b>114</b> to SJ-HQ <b>116</b>. Similarly, RTP phone <b>108</b> can provide an address or number to RTP SA <b>224</b>, with a primary routing choice being RTP RG <b>226</b> for forwarding via GW <b>110</b> to RTP PSTN <b>112</b>, and a secondary routing choice being SJ-HQ RG <b>212</b> for forwarding via router <b>114</b> to SJ-HQ <b>116</b>.</p>
<p id="p-0032" num="0031">In this fashion, search algorithms can be used to select a route group, where each route group is tied to a physical location. The selection algorithm and associated route groups may be provisioned in a call agent. Further, associated gateways for call forwarding may not necessarily be separated from the call agent, but can in some cases be integrated therewith. In this fashion, particular route groups for attempted call routing, and in what order, can be statically designated in a call agent.</p>
<p id="p-0033" num="0032">Generally in such a static approach, an administrator may explicitly configure each gateway or router in static algorithms, such that 500 sites may equal 500 gateways. For every site, the administrator may configure a route group containing the site gateways, such that, e.g., 500 sites equals 500 route groups. On a site-by-site basis, for every gateway search pattern (e.g., central-to-local or remote-to-local), the administrator may configure a route list, however this may not scale (e.g., 500 sites&#xd7;500 patterns=250,000 route lists). Further, on a site-by-site basis, for every dialable pattern for which route lists are used, the administrator may configure a translation pattern, however this may not scale (e.g., 500 sites&#xd7;500 patterns=250,000 route patterns). In particular embodiments, route lists can contain a dynamic route group selected based on a caller's location or other suitable attribute, such that a number of route patterns/entries would be far fewer.</p>
<p id="p-0034" num="0033">In particular embodiments, when calls are offered to different geographical regions, the address (e.g., phone number, or portion thereof) may be modified to accommodate a destination PSTN. Thus, a &#x201c;9&#x201d; digit dialed may be stripped in some cases (e.g., when an RTP originated call is passed through RTP RG <b>226</b>) as part of a primary routing choice, but an additional step of adding a &#x201c;1&#x201d; digit may occur in this example when routing via the secondary choice SJ-HQ RG <b>212</b>. In this fashion, the call may be routed properly by changing or localizing the called number for compatibility with a corresponding destination network.</p>
<p id="p-0035" num="0034">As another example, if there is a combination of a toll bypass configuration and a local outdial configuration, and a Dallas trunk group is in both the local outdial search order (for Dallas callers), as well as a San Jose toll bypass search order, RTP callers may dial &#x201c;9-1-214-XXX-XXXX&#x201d; to reach a Dallas destination. For a 7-digit Dallas dialing area, Dallas users may dial patterns like &#x201c;9-NXX-XXXX&#x201d; to reach Dallas destinations. In local route groups, there may be a single Dallas route group utilized by both search orders. Toward this end, transformation tables may be defined on the trunk group (e.g., in Dallas). Calls that are processed through the Dallas route group may be compared against a table of patterns. For example, Table 2 below shows such a comparison table.</p>
<p id="p-0036" num="0035">
<tables id="TABLE-US-00002" num="00002">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="1">
<colspec colname="1" colwidth="217pt" align="center"/>
<thead>
<row>
<entry namest="1" nameend="1" rowsep="1">TABLE 2</entry>
</row>
<row>
<entry namest="1" nameend="1" align="center" rowsep="1"/>
</row>
<row>
<entry>Pattern Table</entry>
</row>
<row>
<entry namest="1" nameend="1" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry/>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="offset" colwidth="35pt" align="left"/>
<colspec colname="1" colwidth="98pt" align="left"/>
<colspec colname="2" colwidth="84pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>9-NXX-XXXX</entry>
<entry>Strip &#x201c;9&#x201d;</entry>
</row>
<row>
<entry/>
<entry>9-1-214-XXX-XXXX</entry>
<entry>Strip &#x201c;9-1-214&#x201d;</entry>
</row>
<row>
<entry/>
<entry namest="offset" nameend="2" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0037" num="0036">The digits for local outdial calls can match the first pattern and cause the &#x201c;9&#x201d; to be stripped. The digits for toll bypass calls can match the second pattern and cause the &#x201c;9-1-214&#x201d; to be stripped. In both cases, the proper 7-digit pattern may be sent to the Dallas PSTN. Thus in one particular example using &#x201c;predots,&#x201d; for a called number of &#x201c;91.214 555 1212&#x201d; via bypass, the predot, as well as prefix &#x201c;1&#x201d; can be discarded in sending to SJ-HQ RG <b>506</b> for forwarding via gateway/router to SJ-HQ. Also, for a called number of &#x201c;9.408 555 1212&#x201d; via outdial, the predot may be discarded, but not the prefix en route to SJ-HQ RG for forwarding via router to SJ-HQ. Accordingly, route groups may be reused across route lists, and depending on which route list the call goes through, different numerical transformations may be applied.</p>
<p id="p-0038" num="0037">Referring now to <figref idref="DRAWINGS">FIG. 3</figref>, an example configuration using trunk group placeholders is shown and indicated by the general reference character <b>300</b>. Here, call agent <b>202</b> can include selection algorithm (SA) <b>324</b>, trunk group placeholder <b>304</b>, and a plurality of route groups (e.g., <b>206</b>, <b>212</b>, and <b>226</b>). In particular embodiments, selection algorithm <b>324</b> can be provisioned with a configuration related to a caller, and may be stored in a call agent (e.g., <b>202</b>) of a phone service provider. Such configurations related to a caller may be caller-specific or caller-associated attributes like location attributes or call routing plan attributes. The caller-associated attributes can be used to define a route group that should be used when a placeholder (e.g., <b>304</b>) is encountered. Thus, a directive to use such caller-associated attributes can provide enhanced flexibility and scalability relative to a statically designated list (e.g., of the type discussed above with reference to <figref idref="DRAWINGS">FIG. 2</figref>).</p>
<p id="p-0039" num="0038">In the example of <figref idref="DRAWINGS">FIG. 3</figref>, a call from RCDN phone <b>102</b> can be received at SA <b>324</b>, which based on the algorithm, may then encounter placeholder <b>304</b>. Placeholder <b>304</b> can consider caller-associated attributes (e.g., location=RCDN) related to RCDN phone <b>102</b>, and may accordingly forward the call to a primary choice of RCDN RG <b>206</b> to GW <b>104</b> and RCDN PSTN <b>106</b>, with a secondary choice of SJ-HQ RG <b>212</b> to GW <b>114</b> and SJ-HQ <b>116</b>. The primary route group choice for RCDN phone <b>102</b> may be designated in the phone configuration accessible in call agent <b>202</b>. Similarly, a call originating from RTP phone <b>108</b> can be received in SA <b>324</b>, and placeholder <b>304</b> can consider caller-associated attributes (e.g., location=RTP) related to RTP phone <b>108</b>, and may accordingly forward the call to a primary choice of RTP RG <b>226</b> (e.g., as designated in the phone configuration for RTP phone <b>108</b>) to GW <b>110</b> and RTP PSTN <b>112</b>, with a secondary choice of SJ-HQ RG <b>212</b> to GW <b>114</b> and SJ-HQ <b>116</b>.</p>
<p id="p-0040" num="0039">In particular embodiments, gatekeepers or centralized route plan analyzers can also be utilized to route calls on a network to other phones managed by different caller agents. Such gatekeepers can also include rejection logic to indicate to a search algorithm (e.g., via a route group) that a particular call is off-network. As will be discussed in more detail below with reference to <figref idref="DRAWINGS">FIG. 5</figref>, both local outdial and toll bypass can be supported using such gatekeepers. In particular, rejection logic can be utilized to convey to the search algorithm that another path for routing should be taken to service a particular call.</p>
<p id="p-0041" num="0040">Referring now to <figref idref="DRAWINGS">FIG. 4</figref>, a flow diagram of an example method of transforming patterns in a local route group approach is shown and indicated by the general reference character <b>400</b>. The flow can begin (<b>402</b>), and a voice gateway may be nominated to receive a call (<b>404</b>). Next, route transformation rules from a configuration of the voice gateway in a call agent can be examined (<b>406</b>). For example, for a called number of &#x201c;682000&#x201d; a first portion can include &#x201c;68&#x201d; where the transformation rules can be configured for &#x201c;68.XXXX&#x201d;. The address or called number can be compared against an applicable route transformation rule (<b>408</b>). If there is no match (<b>410</b>), no change to the address can be made, and the call can be offered with the received address to a physical voice gateway (<b>416</b>), completing the flow (<b>418</b>).</p>
<p id="p-0042" num="0041">If there is a match (<b>410</b>), such as &#x201c;68&#x201d; matching the predetermined number, the predot (e.g., part of the pattern before the &#x201c;.&#x201d;) can be discarded, and a prefix can be added to the called number (<b>412</b>), and the call can be offered with the modified address to a physical voice gateway (<b>414</b>), completing the call (<b>418</b>). For example, a called number of &#x201c;682000&#x201d; can have a portion &#x201c;68&#x201d; compared against a predetermined number for a match indication, where a match results in a discarding of any predot pattern, as well as the adding of a prefix (e.g., &#x201c;1408525&#x201d;), resulting in a modified called number &#x201c;14085252000&#x201d;. In another example, a called number of &#x201c;672000&#x201d; can have a portion &#x201c;67&#x201d; compared against a predetermined number for a match indication, where a match results in a discarding of any predot pattern, as well as the adding of a prefix (e.g., &#x201c;1919392&#x201d;), resulting in a modified called number &#x201c;19193922000&#x201d;.</p>
<p id="p-0043" num="0042">Referring now to <figref idref="DRAWINGS">FIG. 5</figref>, an example local outdial configuration for local route groups using number transformation is shown and indicated by the general reference character <b>500</b>. Calls from RCDN phone <b>102</b> can be received in call agent <b>202</b> via SA <b>324</b>. A first attempt for routing an on-network call can be via inter-cluster (IC) gatekeeper (GK) <b>506</b>. However, if the call is not suitable for the network protected by GK <b>506</b>, rejection logic can indicate to SA <b>324</b> (e.g., via IC RG <b>504</b>) that a particular call is off-network. In this case, the off-network call can be sent to trunk group placeholder <b>304</b>. In particular embodiments, encountering the trunk group placeholder <b>304</b> can result in consideration of caller-associated attributes attained via configurations for RCDN phone <b>102</b> in call agent <b>202</b>.</p>
<p id="p-0044" num="0043">In this example, a location attribute associated with RCDN phone <b>102</b> can indicate a local route group of RCDN RG <b>206</b>. Thus, the call can be forwarded to RCDN RG <b>206</b> for routing to RCDN PSTN <b>106</b> via GW <b>104</b>. In addition, if a particular address or called number is not compatible with RCDN PSTN <b>106</b>, number transformation <b>502</b> can be activated to provide a modified address. In this case, the call can be forwarded to GW <b>104</b> with a modified address that is suitable for RCDN PSTN <b>106</b>. In this fashion, a local placeholder (e.g., trunk group placeholder <b>304</b>) can essentially look at a caller having &#x201c;RCDN&#x201d; as a route group, and then appropriately forward the call to RCDN PSTN <b>106</b>.</p>
<p id="p-0045" num="0044">Referring now to <figref idref="DRAWINGS">FIG. 6</figref>, a flow diagram of an example method of dynamically configuring a local route group is shown and indicated by the general reference character <b>600</b>. The flow can begin (<b>602</b>), and a location and/or other suitable attribute can be received from a phone when a call is placed (<b>604</b>). Such a location attribute stored in a call agent configuration can be modified when the received location attribute is different from what is currently stored (<b>606</b>). When a trunk group placeholder is encountered (<b>608</b>), the modified location attribute can then be used to derive an appropriate local route group for the call via a trunk group selection algorithm (<b>610</b>), and the flow can complete (<b>612</b>).</p>
<p id="p-0046" num="0045">Also in particular embodiments, an administrator can compile a list of PSTN gateways that an associated call agent manages. Different PSTN gateways can connect to different parts of a given PSTN. For example, different parts of a PSTN can support slightly different dialing plans, such as 7-digit versus 10-digit local dialing, and the PSTN parts can offer different rates for calls to the same destination (e.g., 1-408-432-4321 is a toll call when placed through a Dallas gateway, but the same destination, dialed as 408-432-4321 is a free local call when placed through a San Jose gateway).</p>
<p id="p-0047" num="0046">Although the description has been described with respect to particular embodiments thereof, these particular embodiments are merely illustrative, and not restrictive. For example, while particular numerical transformations and system arrangements have been described, other types of transformations can also be supported in particular embodiments. Also, while certain types of networks, such as PSTN, have been described, other types of networks, such as PBX, or any suitable network, can also be accommodated in particular embodiments. Further, military defense networks (DSNs) and VoIP providers of wholesale network services can also be accommodated in particular embodiments.</p>
<p id="p-0048" num="0047">Any suitable programming language can be used to implement the routines of particular embodiments including C, C++, Java, assembly language, etc. Different programming techniques can be employed such as procedural or object oriented. The routines can execute on a single processing device or multiple processors. Although the steps, operations, or computations may be presented in a specific order, this order may be changed in different particular embodiments. In some particular embodiments, multiple steps shown as sequential in this specification can be performed at the same time.</p>
<p id="p-0049" num="0048">A &#x201c;computer-readable medium&#x201d; for purposes of particular embodiments may be any medium that can contain, store, communicate, propagate, or transport the program for use by or in connection with the instruction execution system, apparatus, system, or device. The computer readable medium can be, by way of example only but not by limitation, an electronic, magnetic, optical, electromagnetic, infrared, or semiconductor system, apparatus, system, device, propagation medium, or computer memory. Particular embodiments can be implemented in the form of control logic in software or hardware or a combination of both. The control logic, when executed by one or more processors, may be operable to perform that which is described in particular embodiments.</p>
<p id="p-0050" num="0049">Particular embodiments may be implemented by using a programmed general purpose digital computer, by using application specific integrated circuits, programmable logic devices, field programmable gate arrays, optical, chemical, biological, quantum or nanoengineered systems, components and mechanisms may be used. In general, the functions of particular embodiments can be achieved by any means as is known in the art. Distributed, networked systems, components, and/or circuits can be used. Communication, or transfer, of data may be wired, wireless, or by any other means.</p>
<p id="p-0051" num="0050">It will also be appreciated that one or more of the elements depicted in the drawings/figures can also be implemented in a more separated or integrated manner, or even removed or rendered as inoperable in certain cases, as is useful in accordance with a particular application. It is also within the spirit and scope to implement a program or code that can be stored in a machine-readable medium to permit a computer to perform any of the methods described above.</p>
<p id="p-0052" num="0051">As used in the description herein and throughout the claims that follow, &#x201c;a&#x201d;, &#x201c;an&#x201d;, and &#x201c;the&#x201d; includes plural references unless the context clearly dictates otherwise. Also, as used in the description herein and throughout the claims that follow, the meaning of &#x201c;in&#x201d; includes &#x201c;in&#x201d; and &#x201c;on&#x201d; unless the context clearly dictates otherwise.</p>
<p id="p-0053" num="0052">Thus, while particular embodiments have been described herein, a latitude of modification, various changes and substitutions are intended in the foregoing disclosures, and it will be appreciated that in some instances some features of particular embodiments will be employed without a corresponding use of other features without departing from the scope and spirit as set forth. Therefore, many modifications may be made to adapt a particular situation or material to the essential scope and spirit.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>We claim:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method, comprising:
<claim-text>receiving an attribute in a call agent, the attribute associated with a calling device initiating a call;</claim-text>
<claim-text>triggering a trunk group selection algorithm in response to at least a portion of the received attribute, the trunk group selection algorithm providing a first selection result from among a trunk group placeholder and a plurality of trunk groups, the first selection being a first trunk group;</claim-text>
<claim-text>receiving an indication that the call is not suitable for the first trunk group;</claim-text>
<claim-text>in response to the indication, forwarding the call to a trunk group placeholder;</claim-text>
<claim-text>in response to the call being forwarded to the trunk group placeholder, determining a forwarding trunk group from the attribute; and</claim-text>
<claim-text>in response to determining the forwarding trunk group, forwarding the call to the forwarding trunk group.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>receiving an address associated with the call; and</claim-text>
<claim-text>transforming a received address to a modified address associated with the call when the received address is incompatible with the forwarding trunk group.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the transforming the received address comprises: comparing a first portion of the received address against a predetermined value to provide a match result; and discarding the first portion and adding a prefix to the received address in response to the match result.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the indication is an indication that the call is an off-network call.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the first trunk group is an inter-cluster gatekeeper.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the first selection is based on an area code attributed to the call and the first trunk group is a trunk group associated with the area code.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the receiving the attribute comprises using voice over Internet protocol (VoIP).</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the attribute comprises a geographic location.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the attribute comprises a numerical pattern.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the forwarding the call comprises using at least one of a public switched telephone network (PSTN), and a private branch exchange (PBX).</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising assigning a plurality of gateways into the plurality of trunk groups.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. An apparatus, comprising:
<claim-text>one or more processors; and</claim-text>
<claim-text>logic encoded in one or more tangible media for execution on the one or more processors, and when executed operable to:</claim-text>
<claim-text>receive an attribute in a call agent, the attribute associated with a calling device initiating a call;</claim-text>
<claim-text>trigger a trunk group selection algorithm in response to at least a portion of the received attribute, the trunk group selection algorithm providing a first selection result from among a trunk group placeholder and a plurality of trunk groups, the first selection being a first trunk group;</claim-text>
<claim-text>receive an indication that the call is not suitable for the first trunk group;</claim-text>
<claim-text>in response to the indication, forward the call to a trunk group placeholder;</claim-text>
<claim-text>in response to the call being forwarded to the trunk group placeholder, determine a forwarding trunk group from the attribute; and</claim-text>
<claim-text>in response to determining the forwarding trunk group, forward the call to the forwarding trunk group.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The apparatus of <claim-ref idref="CLM-00012">claim 12</claim-ref>, the logic is further operable when executed to:
<claim-text>receive an address associated with the call; and</claim-text>
<claim-text>transform a received address to a modified address associated with the call when the received address is incompatible with the forwarding trunk group.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The apparatus of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the transform of the received address comprises logic when executed to: compare a first portion of the received address against a predetermined value to provide a match result; and discard the first portion and adding a prefix to the received address in response to the match result.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The apparatus of <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein the indication is an indication that the call is an off-network call.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The apparatus of <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein the first trunk group is an inter-cluster gatekeeper.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The apparatus of <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein the first selection is based on an area code attributed to the call and the first trunk group is a trunk group associated with the area code.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The apparatus of <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein the attribute is received using voice over Internet protocol (VoIP).</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The apparatus of <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein the attribute comprises a geographic location.</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. A non-transitory computer-readable medium comprising instructions to cause a processor to perform operations comprising:
<claim-text>receiving an attribute in a call agent, the attribute associated with a calling device initiating a call;</claim-text>
<claim-text>triggering a trunk group selection algorithm in response to at least a portion of the received attribute, the trunk group selection algorithm providing a first selection result from among a trunk group placeholder and a plurality of trunk groups, the first selection being a first trunk group;</claim-text>
<claim-text>receiving an indication that the call is not suitable for the first trunk group;</claim-text>
<claim-text>in response to the indication, forwarding the call to a trunk group placeholder;</claim-text>
<claim-text>in response to the call being forwarded to the trunk group placeholder, determining a forwarding trunk group from the attribute; and</claim-text>
<claim-text>in response to determining the forwarding trunk group, forwarding the call to the forwarding trunk group.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
