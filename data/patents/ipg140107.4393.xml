<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625465-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625465</doc-number>
<kind>B1</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13448085</doc-number>
<date>20120416</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<us-term-of-grant>
<disclaimer>
<text>This patent is subject to a terminal disclaimer.</text>
</disclaimer>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>12</main-group>
<subgroup>28</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>370255</main-classification>
<further-classification>370390</further-classification>
<further-classification>3703955</further-classification>
</classification-national>
<invention-title id="d2e51">Auto-discovery of virtual private networks</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5600642</doc-number>
<kind>A</kind>
<name>Pauwels et al.</name>
<date>19970200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6374303</doc-number>
<kind>B1</kind>
<name>Armitage et al.</name>
<date>20020400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>6466985</doc-number>
<kind>B1</kind>
<name>Goyal et al.</name>
<date>20021000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>6477166</doc-number>
<kind>B1</kind>
<name>Sanzi et al.</name>
<date>20021100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>6493349</doc-number>
<kind>B1</kind>
<name>Casey</name>
<date>20021200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>6501754</doc-number>
<kind>B1</kind>
<name>Ohba et al.</name>
<date>20021200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>6553028</doc-number>
<kind>B1</kind>
<name>Tang et al.</name>
<date>20030400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>6571218</doc-number>
<kind>B1</kind>
<name>Sadler</name>
<date>20030500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>6597703</doc-number>
<kind>B1</kind>
<name>Li et al.</name>
<date>20030700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>6611528</doc-number>
<kind>B1</kind>
<name>Farinacci et al.</name>
<date>20030800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>6625773</doc-number>
<kind>B1</kind>
<name>Boivie et al.</name>
<date>20030900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>6731652</doc-number>
<kind>B2</kind>
<name>Ramfelt et al.</name>
<date>20040500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>6751218</doc-number>
<kind>B1</kind>
<name>Hagirahim et al.</name>
<date>20040600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>6778531</doc-number>
<kind>B1</kind>
<name>Kodialam et al.</name>
<date>20040800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>6807182</doc-number>
<kind>B1</kind>
<name>Dolphin et al.</name>
<date>20041000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>6879594</doc-number>
<kind>B1</kind>
<name>Lee et al.</name>
<date>20050400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>6920503</doc-number>
<kind>B1</kind>
<name>Nanji et al.</name>
<date>20050700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00018">
<document-id>
<country>US</country>
<doc-number>6968389</doc-number>
<kind>B1</kind>
<name>Menditto et al.</name>
<date>20051100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00019">
<document-id>
<country>US</country>
<doc-number>7035226</doc-number>
<kind>B2</kind>
<name>Enoki et al.</name>
<date>20060400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00020">
<document-id>
<country>US</country>
<doc-number>7039687</doc-number>
<kind>B1</kind>
<name>Jamieson et al.</name>
<date>20060500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00021">
<document-id>
<country>US</country>
<doc-number>7082102</doc-number>
<kind>B1</kind>
<name>Wright</name>
<date>20060700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00022">
<document-id>
<country>US</country>
<doc-number>7133928</doc-number>
<kind>B2</kind>
<name>McCanne</name>
<date>20061100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00023">
<document-id>
<country>US</country>
<doc-number>7136374</doc-number>
<kind>B1</kind>
<name>Kompella</name>
<date>20061100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00024">
<document-id>
<country>US</country>
<doc-number>7251218</doc-number>
<kind>B2</kind>
<name>Jorgensen</name>
<date>20070700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00025">
<document-id>
<country>US</country>
<doc-number>7269135</doc-number>
<kind>B2</kind>
<name>Frick et al.</name>
<date>20070900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00026">
<document-id>
<country>US</country>
<doc-number>7281058</doc-number>
<kind>B1</kind>
<name>Shepherd et al.</name>
<date>20071000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00027">
<document-id>
<country>US</country>
<doc-number>7296090</doc-number>
<kind>B2</kind>
<name>Jamieson et al.</name>
<date>20071100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709242</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00028">
<document-id>
<country>US</country>
<doc-number>7330468</doc-number>
<kind>B1</kind>
<name>Tse-Au</name>
<date>20080200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00029">
<document-id>
<country>US</country>
<doc-number>7333491</doc-number>
<kind>B2</kind>
<name>Chen et al.</name>
<date>20080200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00030">
<document-id>
<country>US</country>
<doc-number>7359328</doc-number>
<kind>B1</kind>
<name>Allan</name>
<date>20080400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00031">
<document-id>
<country>US</country>
<doc-number>7359393</doc-number>
<kind>B1</kind>
<name>Nalawade et al.</name>
<date>20080400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370401</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00032">
<document-id>
<country>US</country>
<doc-number>7360084</doc-number>
<kind>B1</kind>
<name>Hardjono</name>
<date>20080400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00033">
<document-id>
<country>US</country>
<doc-number>7366894</doc-number>
<kind>B1</kind>
<name>Kalimuthu et al.</name>
<date>20080400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00034">
<document-id>
<country>US</country>
<doc-number>7418003</doc-number>
<kind>B1</kind>
<name>Alvarez et al.</name>
<date>20080800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00035">
<document-id>
<country>US</country>
<doc-number>7453886</doc-number>
<kind>B1</kind>
<name>Allan</name>
<date>20081100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>3703955</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00036">
<document-id>
<country>US</country>
<doc-number>7463591</doc-number>
<kind>B1</kind>
<name>Kompella et al.</name>
<date>20081200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00037">
<document-id>
<country>US</country>
<doc-number>7477642</doc-number>
<kind>B2</kind>
<name>Aggarwal et al.</name>
<date>20090100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370390</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00038">
<document-id>
<country>US</country>
<doc-number>7483439</doc-number>
<kind>B2</kind>
<name>Shepherd et al.</name>
<date>20090100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00039">
<document-id>
<country>US</country>
<doc-number>7489695</doc-number>
<kind>B1</kind>
<name>Ayyangar</name>
<date>20090200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00040">
<document-id>
<country>US</country>
<doc-number>7519010</doc-number>
<kind>B1</kind>
<name>Aggarwal et al.</name>
<date>20090400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00041">
<document-id>
<country>US</country>
<doc-number>7522599</doc-number>
<kind>B1</kind>
<name>Aggarwal et al.</name>
<date>20090400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370390</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00042">
<document-id>
<country>US</country>
<doc-number>7522600</doc-number>
<kind>B1</kind>
<name>Aggarwal et al.</name>
<date>20090400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00043">
<document-id>
<country>US</country>
<doc-number>7532624</doc-number>
<kind>B2</kind>
<name>Ikegami et al.</name>
<date>20090500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00044">
<document-id>
<country>US</country>
<doc-number>7545735</doc-number>
<kind>B1</kind>
<name>Shabtay et al.</name>
<date>20090600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00045">
<document-id>
<country>US</country>
<doc-number>7558219</doc-number>
<kind>B1</kind>
<name>Aggarwal et al.</name>
<date>20090700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370256</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00046">
<document-id>
<country>US</country>
<doc-number>7558263</doc-number>
<kind>B1</kind>
<name>Aggarwal et al.</name>
<date>20090700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370390</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00047">
<document-id>
<country>US</country>
<doc-number>7564803</doc-number>
<kind>B1</kind>
<name>Minei et al.</name>
<date>20090700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00048">
<document-id>
<country>US</country>
<doc-number>7564806</doc-number>
<kind>B1</kind>
<name>Aggarwal et al.</name>
<date>20090700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370256</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00049">
<document-id>
<country>US</country>
<doc-number>7570604</doc-number>
<kind>B1</kind>
<name>Aggarwal et al.</name>
<date>20090800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370256</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00050">
<document-id>
<country>US</country>
<doc-number>7570605</doc-number>
<kind>B1</kind>
<name>Aggarwal et al.</name>
<date>20090800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370256</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00051">
<document-id>
<country>US</country>
<doc-number>7570638</doc-number>
<kind>B2</kind>
<name>Shimizu et al.</name>
<date>20090800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00052">
<document-id>
<country>US</country>
<doc-number>7590115</doc-number>
<kind>B1</kind>
<name>Aggarwal et al.</name>
<date>20090900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00053">
<document-id>
<country>US</country>
<doc-number>7593405</doc-number>
<kind>B2</kind>
<name>Shirazipour et al.</name>
<date>20090900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00054">
<document-id>
<country>US</country>
<doc-number>7602702</doc-number>
<kind>B1</kind>
<name>Aggarwal</name>
<date>20091000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00055">
<document-id>
<country>US</country>
<doc-number>7633859</doc-number>
<kind>B2</kind>
<name>Filsfils et al.</name>
<date>20091200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00056">
<document-id>
<country>US</country>
<doc-number>7742482</doc-number>
<kind>B1</kind>
<name>Aggarwal</name>
<date>20100600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00057">
<document-id>
<country>US</country>
<doc-number>7756998</doc-number>
<kind>B2</kind>
<name>Pirbhai et al.</name>
<date>20100700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709242</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00058">
<document-id>
<country>US</country>
<doc-number>7768925</doc-number>
<kind>B2</kind>
<name>He et al.</name>
<date>20100800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00059">
<document-id>
<country>US</country>
<doc-number>7787380</doc-number>
<kind>B1</kind>
<name>Aggarwal et al.</name>
<date>20100800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00060">
<document-id>
<country>US</country>
<doc-number>7797382</doc-number>
<kind>B2</kind>
<name>Bou-Diab</name>
<date>20100900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00061">
<document-id>
<country>US</country>
<doc-number>7804790</doc-number>
<kind>B1</kind>
<name>Aggarwal et al.</name>
<date>20100900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00062">
<document-id>
<country>US</country>
<doc-number>7830787</doc-number>
<kind>B1</kind>
<name>Wijnands et al.</name>
<date>20101100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370218</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00063">
<document-id>
<country>US</country>
<doc-number>7839850</doc-number>
<kind>B2</kind>
<name>Kompella</name>
<date>20101100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00064">
<document-id>
<country>US</country>
<doc-number>7839862</doc-number>
<kind>B1</kind>
<name>Aggarwal</name>
<date>20101100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00065">
<document-id>
<country>US</country>
<doc-number>7848259</doc-number>
<kind>B2</kind>
<name>Gray et al.</name>
<date>20101200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370255</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00066">
<document-id>
<country>US</country>
<doc-number>7856509</doc-number>
<kind>B1</kind>
<name>Kodeboyina</name>
<date>20101200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00067">
<document-id>
<country>US</country>
<doc-number>7860104</doc-number>
<kind>B1</kind>
<name>Aggarwal</name>
<date>20101200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00068">
<document-id>
<country>US</country>
<doc-number>7925778</doc-number>
<kind>B1</kind>
<name>Wijnands et al.</name>
<date>20110400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709238</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00069">
<document-id>
<country>US</country>
<doc-number>7933267</doc-number>
<kind>B1</kind>
<name>Aggarwal et al.</name>
<date>20110400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00070">
<document-id>
<country>US</country>
<doc-number>7936780</doc-number>
<kind>B1</kind>
<name>Kompella</name>
<date>20110500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00071">
<document-id>
<country>US</country>
<doc-number>7940698</doc-number>
<kind>B1</kind>
<name>Minei et al.</name>
<date>20110500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00072">
<document-id>
<country>US</country>
<doc-number>7957386</doc-number>
<kind>B1</kind>
<name>Aggarwal et al.</name>
<date>20110600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00073">
<document-id>
<country>US</country>
<doc-number>7983261</doc-number>
<kind>B1</kind>
<name>Aggarwal et al.</name>
<date>20110700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370390</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00074">
<document-id>
<country>US</country>
<doc-number>7990963</doc-number>
<kind>B1</kind>
<name>Aggarwal et al.</name>
<date>20110800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00075">
<document-id>
<country>US</country>
<doc-number>7990965</doc-number>
<kind>B1</kind>
<name>Aggarwal et al.</name>
<date>20110800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00076">
<document-id>
<country>US</country>
<doc-number>8068492</doc-number>
<kind>B1</kind>
<name>Aggarwal et al.</name>
<date>20111100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00077">
<document-id>
<country>US</country>
<doc-number>8111633</doc-number>
<kind>B1</kind>
<name>Aggarwal et al.</name>
<date>20120200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00078">
<document-id>
<country>US</country>
<doc-number>8121056</doc-number>
<kind>B1</kind>
<name>Aggarwal et al.</name>
<date>20120200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00079">
<document-id>
<country>US</country>
<doc-number>8160076</doc-number>
<kind>B1</kind>
<name>Aggarwal et al.</name>
<date>20120400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>3703955</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00080">
<document-id>
<country>US</country>
<doc-number>2002/0071390</doc-number>
<kind>A1</kind>
<name>Reeves et al.</name>
<date>20020600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00081">
<document-id>
<country>US</country>
<doc-number>2002/0109879</doc-number>
<kind>A1</kind>
<name>Wing So</name>
<date>20020800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00082">
<document-id>
<country>US</country>
<doc-number>2002/0116669</doc-number>
<kind>A1</kind>
<name>Jain</name>
<date>20020800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>714 43</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00083">
<document-id>
<country>US</country>
<doc-number>2002/0118644</doc-number>
<kind>A1</kind>
<name>Moir</name>
<date>20020800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00084">
<document-id>
<country>US</country>
<doc-number>2002/0126672</doc-number>
<kind>A1</kind>
<name>Chow et al.</name>
<date>20020900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00085">
<document-id>
<country>US</country>
<doc-number>2002/0181477</doc-number>
<kind>A1</kind>
<name>Mo et al.</name>
<date>20021200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370401</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00086">
<document-id>
<country>US</country>
<doc-number>2002/0186664</doc-number>
<kind>A1</kind>
<name>Gibson et al.</name>
<date>20021200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00087">
<document-id>
<country>US</country>
<doc-number>2002/0191584</doc-number>
<kind>A1</kind>
<name>Korus et al.</name>
<date>20021200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00088">
<document-id>
<country>US</country>
<doc-number>2003/0012215</doc-number>
<kind>A1</kind>
<name>Novaes</name>
<date>20030100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00089">
<document-id>
<country>US</country>
<doc-number>2003/0016672</doc-number>
<kind>A1</kind>
<name>Rosen et al.</name>
<date>20030100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370392</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00090">
<document-id>
<country>US</country>
<doc-number>2003/0021282</doc-number>
<kind>A1</kind>
<name>Hospodor</name>
<date>20030100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00091">
<document-id>
<country>US</country>
<doc-number>2003/0031175</doc-number>
<kind>A1</kind>
<name>Hayashi et al.</name>
<date>20030200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00092">
<document-id>
<country>US</country>
<doc-number>2003/0043772</doc-number>
<kind>A1</kind>
<name>Mathis et al.</name>
<date>20030300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00093">
<document-id>
<country>US</country>
<doc-number>2003/0056007</doc-number>
<kind>A1</kind>
<name>Katsube et al.</name>
<date>20030300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00094">
<document-id>
<country>US</country>
<doc-number>2003/0063591</doc-number>
<kind>A1</kind>
<name>Leung et al.</name>
<date>20030400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00095">
<document-id>
<country>US</country>
<doc-number>2003/0087653</doc-number>
<kind>A1</kind>
<name>Leung et al.</name>
<date>20030500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00096">
<document-id>
<country>US</country>
<doc-number>2003/0088696</doc-number>
<kind>A1</kind>
<name>McCanne</name>
<date>20030500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709238</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00097">
<document-id>
<country>US</country>
<doc-number>2003/0099235</doc-number>
<kind>A1</kind>
<name>Shin et al.</name>
<date>20030500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370390</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00098">
<document-id>
<country>US</country>
<doc-number>2003/0108047</doc-number>
<kind>A1</kind>
<name>Mackiewich et al.</name>
<date>20030600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00099">
<document-id>
<country>US</country>
<doc-number>2003/0112748</doc-number>
<kind>A1</kind>
<name>Puppa et al.</name>
<date>20030600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00100">
<document-id>
<country>US</country>
<doc-number>2003/0123446</doc-number>
<kind>A1</kind>
<name>Muirhead et al.</name>
<date>20030700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00101">
<document-id>
<country>US</country>
<doc-number>2003/0172114</doc-number>
<kind>A1</kind>
<name>Leung</name>
<date>20030900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00102">
<document-id>
<country>US</country>
<doc-number>2003/0177221</doc-number>
<kind>A1</kind>
<name>Ould-Brahim et al.</name>
<date>20030900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709223</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00103">
<document-id>
<country>US</country>
<doc-number>2003/0191937</doc-number>
<kind>A1</kind>
<name>Balissat et al.</name>
<date>20031000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00104">
<document-id>
<country>US</country>
<doc-number>2003/0210705</doc-number>
<kind>A1</kind>
<name>Seddigh et al.</name>
<date>20031100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00105">
<document-id>
<country>US</country>
<doc-number>2004/0032856</doc-number>
<kind>A1</kind>
<name>Sandstrom</name>
<date>20040200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00106">
<document-id>
<country>US</country>
<doc-number>2004/0034702</doc-number>
<kind>A1</kind>
<name>He</name>
<date>20040200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709224</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00107">
<document-id>
<country>US</country>
<doc-number>2004/0037279</doc-number>
<kind>A1</kind>
<name>Zelig et al.</name>
<date>20040200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00108">
<document-id>
<country>US</country>
<doc-number>2004/0042406</doc-number>
<kind>A1</kind>
<name>Wu et al.</name>
<date>20040300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00109">
<document-id>
<country>US</country>
<doc-number>2004/0047342</doc-number>
<kind>A1</kind>
<name>Gavish et al.</name>
<date>20040300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00110">
<document-id>
<country>US</country>
<doc-number>2004/0081154</doc-number>
<kind>A1</kind>
<name>Kouvelas</name>
<date>20040400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00111">
<document-id>
<country>US</country>
<doc-number>2004/0100951</doc-number>
<kind>A1</kind>
<name>O'neill</name>
<date>20040500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00112">
<document-id>
<country>US</country>
<doc-number>2004/0133692</doc-number>
<kind>A1</kind>
<name>Blanchet et al.</name>
<date>20040700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00113">
<document-id>
<country>US</country>
<doc-number>2004/0151180</doc-number>
<kind>A1</kind>
<name>Hu et al.</name>
<date>20040800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00114">
<document-id>
<country>US</country>
<doc-number>2004/0151181</doc-number>
<kind>A1</kind>
<name>Chu et al.</name>
<date>20040800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00115">
<document-id>
<country>US</country>
<doc-number>2004/0165600</doc-number>
<kind>A1</kind>
<name>Lee</name>
<date>20040800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00116">
<document-id>
<country>US</country>
<doc-number>2004/0190517</doc-number>
<kind>A1</kind>
<name>Gupta et al.</name>
<date>20040900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00117">
<document-id>
<country>US</country>
<doc-number>2004/0213160</doc-number>
<kind>A1</kind>
<name>Regan et al.</name>
<date>20041000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00118">
<document-id>
<country>US</country>
<doc-number>2004/0218536</doc-number>
<kind>A1</kind>
<name>Yasukawa et al.</name>
<date>20041100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00119">
<document-id>
<country>US</country>
<doc-number>2004/0240445</doc-number>
<kind>A1</kind>
<name>Shin et al.</name>
<date>20041200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00120">
<document-id>
<country>US</country>
<doc-number>2004/0240446</doc-number>
<kind>A1</kind>
<name>Compton</name>
<date>20041200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00121">
<document-id>
<country>US</country>
<doc-number>2005/0001720</doc-number>
<kind>A1</kind>
<name>Mason et al.</name>
<date>20050100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00122">
<document-id>
<country>US</country>
<doc-number>2005/0013295</doc-number>
<kind>A1</kind>
<name>Regan et al.</name>
<date>20050100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00123">
<document-id>
<country>US</country>
<doc-number>2005/0018693</doc-number>
<kind>A1</kind>
<name>Dull</name>
<date>20050100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00124">
<document-id>
<country>US</country>
<doc-number>2005/0025156</doc-number>
<kind>A1</kind>
<name>Smathers</name>
<date>20050200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00125">
<document-id>
<country>US</country>
<doc-number>2005/0027782</doc-number>
<kind>A1</kind>
<name>Jalan et al.</name>
<date>20050200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709200</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00126">
<document-id>
<country>US</country>
<doc-number>2005/0097203</doc-number>
<kind>A1</kind>
<name>Unbehagen et al.</name>
<date>20050500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709223</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00127">
<document-id>
<country>US</country>
<doc-number>2005/0108419</doc-number>
<kind>A1</kind>
<name>Eubanks</name>
<date>20050500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00128">
<document-id>
<country>US</country>
<doc-number>2005/0111351</doc-number>
<kind>A1</kind>
<name>Shen</name>
<date>20050500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00129">
<document-id>
<country>US</country>
<doc-number>2005/0129001</doc-number>
<kind>A1</kind>
<name>Backman et al.</name>
<date>20050600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00130">
<document-id>
<country>US</country>
<doc-number>2005/0141435</doc-number>
<kind>A1</kind>
<name>Ould-Brahim</name>
<date>20050600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370252</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00131">
<document-id>
<country>US</country>
<doc-number>2005/0169266</doc-number>
<kind>A1</kind>
<name>Aggarwal et al.</name>
<date>20050800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370389</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00132">
<document-id>
<country>US</country>
<doc-number>2005/0169270</doc-number>
<kind>A1</kind>
<name>Mutou et al.</name>
<date>20050800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00133">
<document-id>
<country>US</country>
<doc-number>2005/0220132</doc-number>
<kind>A1</kind>
<name>Oman et al.</name>
<date>20051000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00134">
<document-id>
<country>US</country>
<doc-number>2005/0232193</doc-number>
<kind>A1</kind>
<name>Jorgensen</name>
<date>20051000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00135">
<document-id>
<country>US</country>
<doc-number>2005/0259674</doc-number>
<kind>A1</kind>
<name>Cuervo et al.</name>
<date>20051100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00136">
<document-id>
<country>US</country>
<doc-number>2005/0262232</doc-number>
<kind>A1</kind>
<name>Cuervo et al.</name>
<date>20051100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00137">
<document-id>
<country>US</country>
<doc-number>2005/0265308</doc-number>
<kind>A1</kind>
<name>Barbir et al.</name>
<date>20051200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00138">
<document-id>
<country>US</country>
<doc-number>2005/0271035</doc-number>
<kind>A1</kind>
<name>Cohen et al.</name>
<date>20051200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00139">
<document-id>
<country>US</country>
<doc-number>2005/0271036</doc-number>
<kind>A1</kind>
<name>Cohen et al.</name>
<date>20051200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00140">
<document-id>
<country>US</country>
<doc-number>2005/0281192</doc-number>
<kind>A1</kind>
<name>Nadeau et al.</name>
<date>20051200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00141">
<document-id>
<country>US</country>
<doc-number>2006/0013141</doc-number>
<kind>A1</kind>
<name>Mutoh et al.</name>
<date>20060100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00142">
<document-id>
<country>US</country>
<doc-number>2006/0039364</doc-number>
<kind>A1</kind>
<name>Wright</name>
<date>20060200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00143">
<document-id>
<country>US</country>
<doc-number>2006/0047851</doc-number>
<kind>A1</kind>
<name>Voit et al.</name>
<date>20060300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00144">
<document-id>
<country>US</country>
<doc-number>2006/0088031</doc-number>
<kind>A1</kind>
<name>Nalawade</name>
<date>20060400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370390</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00145">
<document-id>
<country>US</country>
<doc-number>2006/0126496</doc-number>
<kind>A1</kind>
<name>Filsfils et al.</name>
<date>20060600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00146">
<document-id>
<country>US</country>
<doc-number>2006/0126630</doc-number>
<kind>A1</kind>
<name>Shirazipour et al.</name>
<date>20060600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00147">
<document-id>
<country>US</country>
<doc-number>2006/0147204</doc-number>
<kind>A1</kind>
<name>Yasukawa et al.</name>
<date>20060700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00148">
<document-id>
<country>US</country>
<doc-number>2006/0153067</doc-number>
<kind>A1</kind>
<name>Vasseur et al.</name>
<date>20060700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00149">
<document-id>
<country>US</country>
<doc-number>2006/0164975</doc-number>
<kind>A1</kind>
<name>Filsfils et al.</name>
<date>20060700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00150">
<document-id>
<country>US</country>
<doc-number>2006/0182034</doc-number>
<kind>A1</kind>
<name>Klinker et al.</name>
<date>20060800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00151">
<document-id>
<country>US</country>
<doc-number>2006/0221958</doc-number>
<kind>A1</kind>
<name>Wijnands et al.</name>
<date>20061000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00152">
<document-id>
<country>US</country>
<doc-number>2006/0262735</doc-number>
<kind>A1</kind>
<name>Guichard et al.</name>
<date>20061100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00153">
<document-id>
<country>US</country>
<doc-number>2006/0262786</doc-number>
<kind>A1</kind>
<name>Shimizu et al.</name>
<date>20061100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00154">
<document-id>
<country>US</country>
<doc-number>2007/0025276</doc-number>
<kind>A1</kind>
<name>Zwiebel et al.</name>
<date>20070200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00155">
<document-id>
<country>US</country>
<doc-number>2007/0025277</doc-number>
<kind>A1</kind>
<name>Sajassi et al.</name>
<date>20070200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00156">
<document-id>
<country>US</country>
<doc-number>2007/0036162</doc-number>
<kind>A1</kind>
<name>Tingle et al.</name>
<date>20070200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00157">
<document-id>
<country>US</country>
<doc-number>2007/0076709</doc-number>
<kind>A1</kind>
<name>Mattson et al.</name>
<date>20070400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00158">
<document-id>
<country>US</country>
<doc-number>2007/0098003</doc-number>
<kind>A1</kind>
<name>Boers et al.</name>
<date>20070500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00159">
<document-id>
<country>US</country>
<doc-number>2007/0104119</doc-number>
<kind>A1</kind>
<name>Sarkar et al.</name>
<date>20070500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00160">
<document-id>
<country>US</country>
<doc-number>2007/0124454</doc-number>
<kind>A1</kind>
<name>Watkinson</name>
<date>20070500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00161">
<document-id>
<country>US</country>
<doc-number>2007/0140107</doc-number>
<kind>A1</kind>
<name>Eckert et al.</name>
<date>20070600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00162">
<document-id>
<country>US</country>
<doc-number>2007/0177593</doc-number>
<kind>A1</kind>
<name>Kompella</name>
<date>20070800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00163">
<document-id>
<country>US</country>
<doc-number>2007/0189177</doc-number>
<kind>A1</kind>
<name>Zhai</name>
<date>20070800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00164">
<document-id>
<country>US</country>
<doc-number>2007/0189291</doc-number>
<kind>A1</kind>
<name>Tian</name>
<date>20070800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370390</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00165">
<document-id>
<country>US</country>
<doc-number>2008/0056258</doc-number>
<kind>A1</kind>
<name>Sharma et al.</name>
<date>20080300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00166">
<document-id>
<country>US</country>
<doc-number>2008/0112330</doc-number>
<kind>A1</kind>
<name>He et al.</name>
<date>20080500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00167">
<document-id>
<country>US</country>
<doc-number>2008/0123524</doc-number>
<kind>A1</kind>
<name>Vasseur et al.</name>
<date>20080500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00168">
<document-id>
<country>US</country>
<doc-number>2008/0123650</doc-number>
<kind>A1</kind>
<name>Bhaskar</name>
<date>20080500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00169">
<document-id>
<country>US</country>
<doc-number>2008/0123654</doc-number>
<kind>A1</kind>
<name>Tse-Au</name>
<date>20080500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00170">
<document-id>
<country>US</country>
<doc-number>2008/0291921</doc-number>
<kind>A1</kind>
<name>Du et al.</name>
<date>20081100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00171">
<document-id>
<country>US</country>
<doc-number>2009/0028149</doc-number>
<kind>A1</kind>
<name>Yasukawa et al.</name>
<date>20090100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370390</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00172">
<document-id>
<country>US</country>
<doc-number>2009/0122732</doc-number>
<kind>A1</kind>
<name>Brockners et al.</name>
<date>20090500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370296</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00173">
<document-id>
<country>US</country>
<doc-number>2009/0161675</doc-number>
<kind>A1</kind>
<name>Aggarwal et al.</name>
<date>20090600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00174">
<document-id>
<country>US</country>
<doc-number>2009/0175274</doc-number>
<kind>A1</kind>
<name>Aggarwal et al.</name>
<date>20090700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00175">
<document-id>
<country>US</country>
<doc-number>2009/0225650</doc-number>
<kind>A1</kind>
<name>Vasseur et al.</name>
<date>20090900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00176">
<document-id>
<country>US</country>
<doc-number>2009/0268731</doc-number>
<kind>A1</kind>
<name>Narayanan et al.</name>
<date>20091000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00177">
<document-id>
<country>JP</country>
<doc-number>2005-086222</doc-number>
<date>20050300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00178">
<document-id>
<country>JP</country>
<doc-number>2005-130258</doc-number>
<date>20050500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00179">
<document-id>
<country>JP</country>
<doc-number>2005-167482</doc-number>
<date>20050600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00180">
<document-id>
<country>JP</country>
<doc-number>2005-252385</doc-number>
<date>20050900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00181">
<document-id>
<country>JP</country>
<doc-number>2005-323266</doc-number>
<date>20051100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00182">
<document-id>
<country>KR</country>
<doc-number>2004/001206</doc-number>
<kind>A</kind>
<date>20040100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00183">
<document-id>
<country>WO</country>
<doc-number>02/091670</doc-number>
<kind>A2</kind>
<date>20021100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00184">
<document-id>
<country>WO</country>
<doc-number>2004/071032</doc-number>
<kind>A1</kind>
<date>20040800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00185">
<othercit>Aggarwal et al. Establishing Point to Multipoint MPLS TE LSPs&#x2014;Jan. 2004.</othercit>
</nplcit>
<category>cited by examiner</category>
</us-citation>
<us-citation>
<nplcit num="00186">
<othercit>Satyanarayana et al., &#x201c;Extensions to GMPLS RSVP Graceful Restart&#x201d;, draft-aruns-ccamp-restart-ext-01.txt, Jul. 2004, Network Working Group Internet Draft, 23 pgs.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00187">
<othercit>Aggarwal et al., &#x201c;MPLS Upstream Label Assignment and Context Specific Label Space,&#x201d; Network Working Group Internet Draft, Jan. 2005, draft-raggarwa-mpls-upstream-label-00.txt, 9 pgs.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00188">
<othercit>Wijnands et al., &#x201c;Multicast Extensions for LDP,&#x201d; Network Working Group Internet Draft, Mar. 2005, draft-wijnands-mpls-ldp-mcast-ext-00.txt, 13 pgs.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00189">
<othercit>Aggarwal et al., &#x201c;MPLS Upstream Label Assignment for RSVP-TE and LDP,&#x201d; Aug. 24, 2005, http://www.tla-group.com/&#x2dc;mpls/ietf-63-mpls-upstream-rsvp-ldp.ppt, 8 pgs.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00190">
<othercit>Fujita, &#x201c;Dynamic Selective Replication Schemes for Content Delivery Networks,&#x201d; IPSJ SIG Notes, vol. 2001, No. 111, Information Processing Society of Japan, Nov. 21, 2001, 2 pgs.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00191">
<othercit>Awduche et al., &#x201c;RFC 3209&#x2014;RSVP-TE: Extensions to RSVP for LSP Tunnels,&#x201d; Network Working Group, Dec. 2001, 64 pgs. http://rfc.sunsite.dk/rfc/rfc3209html.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00192">
<othercit>RSVP-TE: Resource Reservation Protocol&#x2014;Traffic Extension, Javvin Company, 2 pgs, printed Apr. 18, 2005. http://www.javvin.com/protocolRSVPTE.html.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00193">
<othercit>Zhang et al., &#x201c;A Destination-initiated Multicast Routing Protocol for Shortest Path Tree Constructions,&#x201d; GLOBECOM 2003, IEEE Global Telecommunications Conference, XP010677629, pp. 2840-2844.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00194">
<othercit>Yasukawa et al., Requirements for point to multipoint extension to RSVP-TE, Oct. 2003, 20 pp.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00195">
<othercit>Wei et al., &#x201c;Establishing point to multipoint MPLS TE LSPs,&#x201d; Aug. 2004, 15 pp.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00196">
<othercit>Aggarwal et al., &#x201c;Establishing Point to Multipoint MPLS TE LSPs,&#x201d; submitted to Internet Engineering Task Force (IETF) Feb. 11, 2007, pp. 1-15.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00197">
<othercit>Rekhter et al., &#x201c;A Border Gateway Protocol 4 (BGP-4),&#x201d; Mar. 1995, 72 pp.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00198">
<othercit>Atlas et al., &#x201c;MPLS RSVP-TE Interoperability for Local Protection/Fast Reroute,&#x201d; IETF, Jul. 2001, pp. 1-14.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00199">
<othercit>Rosen et al., &#x201c;Multicast in MPLS/BGP IP VPNs,&#x201d; draft-rosen-vpn-mcast-07.txt, May 2004, 27 pgs.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00200">
<othercit>Deering et al., &#x201c;Protocol Independent Multicast-Sparse Mode (PIM-SM): Motivation and Architecture,&#x201d; draft-ietf-idmr-pim-arch-05.txt, Aug. 4, 1998, 30 pgs.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00201">
<othercit>Kompella et al., &#x201c;Virtual Private LAN Service,&#x201d; draft-ietf-12vpn-vpls-bgp-00.txt, May 2003, 22 pgs.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00202">
<othercit>Martini et al., &#x201c;Transport of Layer 2 Frames Over MPLS,&#x201d; Network Working Group Internet Draft, draft-martini-12circuit-trans-mpls-08.txt, Nov. 2001, 18 pgs.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00203">
<othercit>Martini et al., &#x201c;Encapsulation Methods for Transport of Layer 2 Frames Over IP and MPLS Networks,&#x201d; Network Working Group Internet Draft, draft-martini-12circuit-encap-mpls-04.txt, Nov. 2001, 17 pgs.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00204">
<othercit>Decraene et al., &#x201c;LDP Extension for Inter-Area Label Switched Paths (LSPs),&#x201d; Network Working Group RFC 5283, Jul. 2008, 13 pp.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00205">
<othercit>Decraene et al., &#x201c;LDP extension for Inter-Area LSP&#x201d;, Network Working Group, draft-ietf-mpls-ldp-interarea-03.txt, Feb. 2008, 12 pp.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00206">
<othercit>Decraene et al., &#x201c;LDP extensions for Inter-Area LSP&#x201d;, Network Working Group, draft-decraene-mpls-ldp-interarea-02.txt, Jun. 2006, 8 pp.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00207">
<othercit>Kompella, &#x201c;Layer 2 VPNs Over Tunnels,&#x201d; Network Working Group, Jan. 2006, 27 pp.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00208">
<othercit>Rekhter et al., &#x201c;Carrying Label Information in BGP-4&#x201d;, Network Working Group, RFC 3107, May 2001, 9 pp.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00209">
<othercit>Andersson et al., &#x201c;LDP Specification&#x201d;, Network Working Group, RFC 3036, Jan. 2001, (118 pages).</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00210">
<othercit>Swallow et al., &#x201c;Network Scaling with Aggregated IP LSPs&#x201d;, Network Working Group, draft-swallow-mpls-aggregated-fec-00.txt, Jul. 2007, 10 pp.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00211">
<othercit>Shah et al., &#x201c;Extensions to MPLS-based Layer 2 VPNs,&#x201d; Network Working Group, Sep. 2001, 14 pp.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00212">
<othercit>U.S. Appl. No. 12/574,428, by Rahul Aggarwal, filed Oct. 6, 2009.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00213">
<othercit>U.S. Appl. No. 12/972,197, by Rahul Aggarwal, filed Dec. 17, 2010.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00214">
<othercit>U.S. Appl. No. 12/951,885, by Rahul Aggarwal, filed Nov. 22, 2010.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>11</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>None</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>10</number-of-drawing-sheets>
<number-of-figures>12</number-of-figures>
</figures>
<us-related-documents>
<continuation>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>11213640</doc-number>
<date>20050826</date>
</document-id>
<parent-grant-document>
<document-id>
<country>US</country>
<doc-number>8160076</doc-number>
</document-id>
</parent-grant-document>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>13448085</doc-number>
</document-id>
</child-doc>
</relation>
</continuation>
<us-provisional-application>
<document-id>
<country>US</country>
<doc-number>60605629</doc-number>
<date>20040830</date>
</document-id>
</us-provisional-application>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Aggarwal</last-name>
<first-name>Rahul</first-name>
<address>
<city>Menlo Park</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Rekhter</last-name>
<first-name>Yakov</first-name>
<address>
<city>New Rochelle</city>
<state>NY</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Aggarwal</last-name>
<first-name>Rahul</first-name>
<address>
<city>Menlo Park</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Rekhter</last-name>
<first-name>Yakov</first-name>
<address>
<city>New Rochelle</city>
<state>NY</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Shumaker &#x26; Sieffert, P.A.</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Juniper Networks, Inc.</orgname>
<role>02</role>
<address>
<city>Sunnyvale</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Banks Harold</last-name>
<first-name>Marsha D</first-name>
<department>2465</department>
</primary-examiner>
<assistant-examiner>
<last-name>Wyllie</last-name>
<first-name>Christopher</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">Principles of the invention are described for providing multicast virtual private networks (MVPNs) across a public network that are capable of carrying high-bandwidth multicast traffic with increased scalability. In particular, the MVPNs may transport layer three (L3) multicast traffic, such as Internet Protocol (IP) packets, between remote sites via the public network. The principles described herein may reduce the overhead of protocol independent multicast (PIM) neighbor adjacencies and customer control information maintained for MVPNs. The principles may also reduce the state and the overhead of maintaining the state in the network by removing the need to maintain at least one dedicated multicast tree per each MVPN.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="180.68mm" wi="245.87mm" file="US08625465-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="255.02mm" wi="187.45mm" orientation="landscape" file="US08625465-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="253.41mm" wi="186.52mm" file="US08625465-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="238.25mm" wi="161.80mm" file="US08625465-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="194.14mm" wi="158.75mm" file="US08625465-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="174.41mm" wi="158.75mm" file="US08625465-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="149.01mm" wi="158.75mm" file="US08625465-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="170.01mm" wi="158.75mm" file="US08625465-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="234.95mm" wi="131.15mm" file="US08625465-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="201.59mm" wi="158.75mm" orientation="landscape" file="US08625465-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="254.00mm" wi="194.39mm" orientation="landscape" file="US08625465-20140107-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<p id="p-0002" num="0001">This application is a continuation of U.S. patent application Ser. No. 11/213,640, filed Aug. 26, 2005, and claims the benefit of U.S. Provisional Application No. 60/605,629, filed Aug. 30, 2004, the entire contents of both being incorporated herein by reference.</p>
<heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0003" num="0002">This application is related to the following applications:</p>
<p id="p-0004" num="0003">&#x201c;Aggregate Multicast Trees for Multicast Virtual Private Networks,&#x201d; by Rahul Aggarwal and Yakov Rekhter, U.S. application Ser. No. 11/212,509, filed the same day as the present application;</p>
<p id="p-0005" num="0004">&#x201c;Multicast Data Trees For Multicast Virtual Private Networks,&#x201d; by Rahul Aggarwal, Yakov Rekhter and Anil Lohiya, U.S. application Ser. No. 11/212,500, filed the same day as the present application;</p>
<p id="p-0006" num="0005">&#x201c;Reliable Exchange Of Control Information For Multicast Virtual Private Networks,&#x201d; by Rahul Aggarwal, Yakov Rekhter and Anil Lohiya U.S. application Ser. No. 11/212,507, filed the same day as the present application;</p>
<p id="p-0007" num="0006">&#x201c;Transport of Control And Data Traffic For Multicast Virtual Private Networks,&#x201d; by Rahul Aggarwal, Yakov Rekhter and Anil Lohiya, U.S. application Ser. No. 11/213,636, filed the same day as the present application;</p>
<p id="p-0008" num="0007">&#x201c;Shared Multicast Trees For Multicast Virtual Private Networks,&#x201d; by Rahul Aggarwal and Yakov Rekhter, U.S. application Ser. No. 11/213,638, filed the same day as the present application;</p>
<p id="p-0009" num="0008">&#x201c;Label Switching Multicast Trees For Multicast Virtual Private Networks,&#x201d; by Rahul Aggarwal, Yakov Rekhter and Anil Lohiya, U.S. application Ser. No. 11/212,475, filed the same day as the present application;</p>
<p id="p-0010" num="0009">&#x201c;Multicast Trees for Virtual Private Local Area Network (LAN) Service Multicast,&#x201d; by Rahul Aggarwal and Yakov Rekhter, U.S. application Ser. No. 11/212,932, filed the same day as the present application;</p>
<p id="p-0011" num="0010">&#x201c;Aggregate Multicast Trees For Virtual Private Local Area Network (LAN) Service Multicast,&#x201d; by Rahul Aggarwal and Yakov Rekhter, U.S. application Ser. No. 11/213,636, filed the same day as the present application;</p>
<p id="p-0012" num="0011">&#x201c;Multicast Data Trees For Virtual Private Local Area Network (LAN) Service Multicast,&#x201d; by Rahul Aggarwal and Yakov Rekhter, U.S. application Ser. No. 11/213,639, filed the same day as the present application;</p>
<p id="p-0013" num="0012">&#x201c;Exchange Of Control Information for Virtual Private Local Area Network (LAN) Service Multicast,&#x201d; by Rahul Aggarwal and Yakov Rekhter, U.S. application Ser. No. 11/213,639, filed the same day as the present application; and</p>
<p id="p-0014" num="0013">&#x201c;Inter-Autonomous System (AS) Multicast Virtual Private Networks,&#x201d; by Rahul Aggarwal and Yakov Rekhter, U.S. application Ser. No. 11/213,641, filed the same day as the present application, the entire content of each of which is incorporated herein by reference.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">TECHNICAL FIELD</heading>
<p id="p-0015" num="0014">The invention relates to computer networks and, more particularly, to virtual private networks (VPNs) established over computer networks.</p>
<heading id="h-0003" level="1">BACKGROUND</heading>
<p id="p-0016" num="0015">A computer network is a collection of interconnected computing devices that exchange data and share resources. In a packet-based network the computing devices communicate data by dividing the data into small blocks called packets. Certain devices within the network, such as routers, maintain routing information that describes routes through the network. In this way, the packets may be individually routed across the network from a source device to a destination device. The destination device extracts the data from the packets and assembles the data into its original form. Dividing the data into packets enables the source device to resend only those individual packets that may be lost during transmission.</p>
<p id="p-0017" num="0016">Virtual private networks (VPNs) are often used to securely share data over a public network, such as the Internet. For example, an enterprise that includes multiple geographically separated sites, each site including one or more computing devices, may establish a VPN to allow the computing devices to securely communicate through the Internet or another public network. In particular, VPNs transport layer three (L3) communications, such as Internet Protocol (IP) packets, between the remote sites via the public network.</p>
<p id="p-0018" num="0017">In some cases, a VPN may be configured to carry L3 multicast traffic, such as Internet Protocol Television (IPTV), desktop conferences, corporate broadcasts, music and video web casts, and other forms of multimedia content. Multicast VPNs (MVPNs) typically rely on ingress replication to transmit the multicast traffic from a multicast source to subscriber devices within the MVPN sites. Ingress replication causes an ingress router of a MVPN to replicate a multicast data packet of a particular multicast group and send it to each egress router of the MVPN on the path to a subscriber device of that multicast group. However, ingress replication may be a reasonable model only when the bandwidth of the multicast traffic is low and/or the number of replications performed by the ingress router for a particular multicast data packet is small.</p>
<p id="p-0019" num="0018">In order to handle high bandwidth multicast traffic, a MVPN may utilize protocol independent multicast (PIM) to tunnel multicast packets from a multicast source to subscriber devices within the MVPN sites. However, using PIM for MVPNs introduces fundamental scalability issues when a network includes a large number of MVPNs each with a large number of subscriber sites.</p>
<p id="p-0020" num="0019">For a particular MVPN, a router maintains PIM neighbor adjacencies with every other router that has a site in that MVPN. Thus for a given router-router pair, multiple PIM adjacencies may be required, one per MVPN that the routers have in common. For each such PIM neighbor adjacency, the router sends and receives PIM &#x201c;hello&#x201d; packets transmitted periodically. For example, on a router with 1000 MVPNs and 100 sites per MVPN the router would typically maintain 100,000 PIM neighbors. In this case, a default hello interval of 30 seconds would result in an average of 3,333 hello messages per second.</p>
<p id="p-0021" num="0020">Furthermore, PIM is a soft state protocol that requires periodic transmission of customer control information, such as PIM join/prune messages. A router propagates the customer join/prune messages received from a subscriber device to other routers in the network. Each router in the network participating in one or more MVPNs periodically refreshes these PIM customer join/prune messages. This can lead to a large overhead of periodic maintenance messages. Lastly, a router may use PIM to setup a multicast tree across the network for each MVPN to which the router belongs. In this way, PIM cause the network to maintain state for each MVPN established across the network.</p>
<heading id="h-0004" level="1">SUMMARY</heading>
<p id="p-0022" num="0021">In general, principles of the invention are described for providing multicast virtual private networks (MVPNs) across a public network that are capable of carrying high bandwidth multicast traffic with increased scalability. For example, the principles of the invention may be applied to MVPNs that transport layer three (L3) multicast traffic, such as Internet Protocol (IP) packets, between remote sites via the public network. The principles described herein may reduce the overhead of protocol independent multicast (PIM) neighbor adjacencies and customer control information maintained for MVPNs. The principles may also reduce the state and the overhead of maintaining the state in the network by removing the need to maintain at least one dedicated multicast tree per each MVPN.</p>
<p id="p-0023" num="0022">For example, a router within a public network, such as the Internet, may use the border gateway protocol (BGP) to discover MVPN memberships of other routers in the public network and maintain PIM neighbor adjacencies. In addition, a router may use reliable transport, such as BGP or PIM with reliability extensions, to transmit control messages, such as customer join/prune messages, between routers while substantially eliminating the need for periodic maintenance messages. Auto-discovering the MVPN memberships with BGP enables customer control and data traffic to be transmitted separately using different tunneling technologies.</p>
<p id="p-0024" num="0023">By separating the control messages and the data traffic, multicast trees may be setup across the public network by non-PIM protocols, such as multi-protocol label switching (MPLS) protocols. The MPLS protocols may include the label distribution protocol (LDP), and the resource reservation protocol (RSVP), which may be extended to include traffic engineering (TE) capabilities. The multicast trees may comprise aggregate multicast trees that support more than one MVPN to reduce the state maintained in the public network. In addition, data multicast trees may be setup to transmit traffic for specific high bandwidth multicast groups. The multicast trees may be source trees or shared trees. Furthermore, multicast trees setup across a public network, or autonomous system (AS), may be stitched to other multicast trees established in another AS to provide inter-AS MVPN service without relying on a single MVPN tunnel.</p>
<p id="p-0025" num="0024">In one embodiment, a method comprises discovering MVPN memberships of one or more destination devices within a network based on advertisements from the one or more destination devices. The method further comprises establishing a multicast tree within the network for at least one of the discovered MVPNs from a source device to the one or more destination devices.</p>
<p id="p-0026" num="0025">In another embodiment, a network device comprises a control unit and an auto-discovery module within the control unit that discovers MVPN memberships of one or more destination devices within a network based on MVPN advertisements from the one or more destination devices. The control unit establishes a multicast tree within the network for at least one of the discovered MVPNs from a source device to the one or more destination devices.</p>
<p id="p-0027" num="0026">In another embodiment, a computer-readable medium comprises instructions that cause a programmable processor to discover MVPN memberships of one or more destination devices within a network based on MVPN advertisements from the one or more destination devices. The instructions further cause the programmable processor to establish a multicast tree within the network for at least one of the discovered MVPNs from a source device to the one or more destination devices.</p>
<p id="p-0028" num="0027">In a further embodiment, a system comprises one or more destination devices within a network that advertise their MVPN memberships, a source device within the network that discovers the MVPN memberships of the one or more destination devices based on the MVPN advertisements, and a multicast tree established within the network for at least one of the discovered MVPNs from the source device to the one or more destination devices.</p>
<p id="p-0029" num="0028">The details of one or more embodiments of the invention are set forth in the accompanying drawings and the description below. Other features, objects, and advantages of the invention will be apparent from the description and drawings, and from the claims.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0005" level="1">BRIEF DESCRIPTION OF DRAWINGS</heading>
<p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram illustrating an example service provider (SP) network in which provider edge (PE) routers support at least one multicast virtual private network (MVPN).</p>
<p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. 2</figref> is a block diagram illustrating an exemplary PE router capable of supporting one or more MVPNs.</p>
<p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. 3</figref> illustrates an exemplary BGP encoding of network layer reachability information (NLRI).</p>
<p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. 4</figref> illustrates an example tree identifier (TI) attribute.</p>
<p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. 5</figref> is a flowchart illustrating an example procedure for setting up an aggregate default tree between a root of the aggregate default tree and an egress PE router.</p>
<p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. 6</figref> is a flowchart illustrating an example procedure for setting up an aggregate data tree between a root of the aggregate data tree and an egress PE router.</p>
<p id="p-0036" num="0035"><figref idref="DRAWINGS">FIGS. 7A and 7B</figref> are flowcharts illustrating two exemplary processes of switching from an aggregate default tree to an aggregate data tree.</p>
<p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. 8</figref> illustrates an example IP encapsulated packet for transmission on a PIM-based multicast tree.</p>
<p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. 9</figref> illustrates an example MPLS encapsulated packet for transmission on a RSVP- or LDP-based multicast tree.</p>
<p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. 10</figref> is a flowchart illustrating an example process of forwarding multicast data packets on an aggregate multicast tree across a public network.</p>
<p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. 11</figref> is a block diagram illustrating exemplary autonomous systems (ASs) in which autonomous system border routers (ASBRs) support at least one inter-AS MVPN.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0006" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram illustrating an example service provider (SP) network <b>10</b> in which provider edge (PE) routers <b>12</b>A-<b>12</b>C (&#x201c;PE routers <b>12</b>&#x201d;) support at least one multicast virtual private network (MVPN). In the illustrated embodiment, PE router <b>12</b>A sets up a multicast tree <b>15</b> across the SP network <b>10</b> to provide layer three (L3) multicast service between PE routers <b>12</b>. For example, multicast tree <b>15</b> may transport L3 multicast traffic from a multicast source <b>24</b> to subscriber devices within at least one of the MVPN A site and the MVPN B site coupled to PE routers <b>12</b>. In other embodiments, multicast tree <b>15</b> may be setup by any one of PE routers <b>12</b>.</p>
<p id="p-0042" num="0041">SP network <b>10</b> may comprise the Internet or another public network. In some cases, SP network <b>10</b> may comprise a multi-protocol label switching (MPLS) network. Each of the MVPN sites may include a local area network (LAN) or a wide area network (WAN) that comprises a plurality of subscriber devices, such as desktop computers, laptops, workstations, PDAs, wireless devices, network-ready appliances, file servers, print servers or other devices.</p>
<p id="p-0043" num="0042">Each of PE routers <b>12</b> couples to one or more of the MVPN sites via customer edge (CE) routers <b>16</b>A-<b>16</b>E (&#x201c;CE routers <b>16</b>&#x201d;). For example, PE router <b>12</b>A is coupled to MVPN A site <b>18</b>A and MVPN B site <b>18</b>B via CE router <b>16</b>A and CE router <b>16</b>B, respectively. PE router <b>12</b>A is also coupled to multicast source <b>24</b>. PE router <b>12</b>B is coupled to MVPN A site <b>20</b> via CE router <b>16</b>C. PE router <b>13</b>C is coupled to MVPN A site <b>22</b>A and MVPN B site <b>22</b>B via CE router <b>16</b>D and CE router <b>16</b>E, respectively. Multicast tree <b>15</b> couples PE routers <b>12</b> to each other via provider (P) routers <b>14</b>A-<b>14</b>D (&#x201c;P routers <b>14</b>&#x201d;) within SP network <b>10</b>.</p>
<p id="p-0044" num="0043">In the illustrated embodiment, MVPN A and MVPN B established across SP network <b>10</b> are capable of carrying high bandwidth multicast traffic with increased scalability. For example, MVPN A and MVPN B may carry L3 multicast traffic, such as Internet Protocol Television (IPTV), desktop conferences, corporate broadcasts, music and video web casts, and other forms of multimedia content, from multicast source <b>24</b> to subscriber devices within the MVPN A sites and the MVPN B sites. Moreover, principles of the invention described herein may reduce the overhead of PIM neighbor adjacencies maintained for MVPN A and MVPN B. The invention may also reduce the state and the overhead of maintaining the state within SP network <b>10</b> by removing the need to maintain at least one dedicated multicast tree per MVPN.</p>
<p id="p-0045" num="0044">In one embodiment, each of PE routers <b>12</b> includes virtual routing and forwarding (VRF) (not shown) for each MVPN to which it has membership. PE routers <b>12</b> advertise their MVPN membership, i.e., the VRFs configured for multicast, to the other PE routers <b>12</b> using the border gateway protocol (BGP). In this way, each of PE routers <b>12</b> in SP network <b>10</b> have a complete view of the MVPN memberships of the other PE routers.</p>
<p id="p-0046" num="0045">A PE router that belongs to a certain MVPN considers all the other PE routers that advertise membership for that MVPN to be PIM neighbors. For example, PE router <b>12</b>A belongs to MVPN A and MVPN B, PE router <b>12</b>B belongs to MVPN A, and PE router <b>12</b>C belongs to MVPN A and MVPN B. Therefore, PE router <b>12</b>A considers PE router <b>12</b>B and PE router <b>12</b>C to be PIM neighbors for MVPN A. PE router <b>12</b>A considers PE router <b>12</b>C to be a PIM neighbor for MVPN B.</p>
<p id="p-0047" num="0046">A PIM neighbor adjacency exists as long as the BGP advertisement is not withdrawn. By using BGP advertisements, PE routers <b>12</b> do not have to perform PIM neighbor adjacency management. This eliminates PIM hello processing typically required for maintaining the PIM neighbor adjacency. In some cases, the BGP advertisements may support optional capabilities conventionally exchanged between PIM neighbors by PIM hellos.</p>
<p id="p-0048" num="0047">In addition, a reliable transport protocol may be used to transmit customer control messages between PE routers <b>12</b>. A reliable transport protocol, such as BGP or PIM extended to include a refresh reduction mechanism, substantially eliminates the need to periodically refresh customer control messages. For example, PE router <b>12</b>A may use BGP or PIM with reliability extensions to transmit customer join/prune messages received from a subscriber device within one of MVPN sites <b>18</b>A and <b>18</b>B to the other PE routers <b>12</b> in SP network <b>10</b>.</p>
<p id="p-0049" num="0048">In conventional MVPNs that only use the PIM tunneling protocol, multicast domain (MD) tunnels are established across a public network for sending both customer control messages and customer data traffic. The single tunneling protocol creates an undesirable dependency between the exchange of customer multicast control information and the multicast transport technology.</p>
<p id="p-0050" num="0049">Utilizing BGP advertisements for MVPNs, as described above, makes the discovery and maintenance of PIM neighbors independent of the multicast data transport technology in SP network <b>10</b>. In other words, customer control and multicast data traffic may be transmitted separately using different tunneling protocols. PE routers <b>12</b> may use PE-to-PE tunnels to exchange customer multicast control information. For example, PE router <b>12</b>B may use a PE-to-PE tunnel to send customer multicast control information to the upstream PE router <b>12</b>A that is a PIM neighbor.</p>
<p id="p-0051" num="0050">PE router <b>12</b>A may setup multicast tree <b>15</b> across SP network <b>10</b> to transport customer multicast data with one of a variety of tunneling technologies, without impacting the procedures for exchange of MVPN routing information. For example, multicast tree <b>15</b> may be setup by PE router <b>12</b>A using PIM or non-PIM protocols, such as MPLS protocols. MPLS protocols include the label distribution protocol (LDP) and the resource reservation protocol (RSVP), which may be extended to include traffic engineering (TE). In the case of PE router <b>12</b>A using RSVP-TE, multicast tree <b>15</b> may comprise a point-to-multipoint (P2MP) label switched path (LSP).</p>
<p id="p-0052" num="0051">In the illustrated embodiment, multicast tree <b>15</b> comprises an &#x201c;aggregate&#x201d; multicast tree capable of transmitting traffic for both MVPN A and MVPN B across SP network <b>10</b>. In this way, SP network <b>10</b> does not need to separately maintain state per each MVPN as one multicast tree <b>15</b> can be used to support multiple MVPNs. In some cases, multicast tree <b>15</b> may comprise an aggregate &#x201c;default&#x201d; tree mapped to MVPN A and MVPN B. In other cases, since PE router <b>12</b>A is coupled to multicast source <b>24</b>, multicast tree <b>15</b> may comprise an aggregate &#x201c;data&#x201d; tree mapped to specific multicast groups. These embodiments are described in further detail below.</p>
<p id="p-0053" num="0052">In the case where multicast tree <b>15</b> comprises an aggregate default tree, multicast tree <b>15</b> carries traffic of all the multicast groups requested by subscriber devices within both MVPN A and MVPN B. PE router <b>12</b>A may setup multicast tree <b>15</b> as an aggregate default tree by using BGP to discover egress PE routers <b>12</b>B and <b>12</b>C, i.e., the leaves of multicast tree <b>15</b>. PIM neighbor discovery and maintenance using BGP allows PE router <b>12</b>A to learn the MVPN membership information of PE routers <b>12</b>B and <b>12</b>C. This in turn allows the creation of the aggregate default tree mapped to MVPN A and MVPN B. The leaves of the aggregate default tree are the PE routers within SP network <b>10</b> that belong to one or more of the MVPNs mapped to the aggregate default tree. In other embodiments, multicast tree <b>15</b> may be setup as an aggregate default tree by any of PE routers <b>12</b> or by a rendezvous point (RP), e.g., one of P routers <b>14</b>, within SP network <b>10</b>.</p>
<p id="p-0054" num="0053">By removing the need to separately maintain per MVPN state in SP network <b>10</b>, aggregate default trees may effectively reduce the number of trees in SP network <b>10</b> and the signaling overhead associated with maintaining these trees. However, since aggregate default tree <b>15</b> carries traffic for all the multicast groups requested in both MVPN A and MVPN B, aggregate default tree <b>15</b> may deliver a multicast data packet for a particular group to some of PE routers <b>12</b> that do not have subscriber devices for that multicast group.</p>
<p id="p-0055" num="0054">In the case where multicast tree <b>15</b> comprises an aggregate data tree, multicast tree <b>15</b> only carries traffic of specific multicast groups from multicast source <b>24</b> to the MVPN sites that include subscriber devices of the multicast traffic. Multicast tree <b>15</b> may be setup as an aggregate data tree by a router in SP network <b>10</b> that is coupled to multicast source <b>24</b>, i.e., PE router <b>12</b>A. PE router <b>12</b>A may setup multicast tree <b>15</b> as an aggregate data tree by using customer join messages to discover egress PE routers <b>12</b>B and <b>12</b>C, i.e., the leaves of multicast tree <b>15</b>. Reliable transport of customer control information allows PE router <b>12</b>A to learn the multicast group membership information of PE routers <b>12</b>B and <b>12</b>C. This in turn allows the aggregate data tree to be mapped to specific multicast groups of MVPN A and MVPN B. As an aggregate data tree, the leaves of multicast tree <b>15</b> are the PE routers within SP network <b>10</b> that include subscriber devices of the one or more specific multicast groups mapped to multicast tree <b>15</b>.</p>
<p id="p-0056" num="0055">In this way, PE router <b>12</b>A is able to create a separate multicast tree <b>15</b> as an aggregate data tree for specific, high-bandwidth multicast groups. More than one multicast group may be mapped onto the aggregate data tree. In addition, the multicast groups mapped to the aggregate data tree may also belong to different MVPNs.</p>
<p id="p-0057" num="0056">As an aggregate data tree, multicast tree <b>15</b> transmits the traffic for these multicast groups only to those PE routers <b>12</b> with subscriber devices of the specific multicast groups. This avoids flooding other PE routers in the MVPN that have not requested the specific multicast traffic. When router <b>12</b>A receives multicast traffic of one of the specific multicast groups mapped to multicast tree <b>15</b>, PE router <b>12</b>A may switch from an aggregate default tree to an aggregate data tree, e.g., multicast tree <b>15</b>, to transmit the multicast traffic.</p>
<p id="p-0058" num="0057">In addition, multicast tree <b>15</b> can be either a &#x201c;source&#x201d; tree or a &#x201c;shared&#x201d; tree. As used herein, a source tree is used to carry traffic only for the multicast VRFs that exist locally on the root of the tree. For example, in the case where PE router <b>12</b>B is the root of multicast tree <b>15</b>, as a source tree, multicast tree <b>15</b> may only carry traffic for MVPN A to which PE router <b>12</b>B belongs. In contrast, a shared tree can carry traffic belonging to VRFs that exist on other PEs as well. For example, in the case where PE router <b>12</b>B is the root of multicast tree <b>15</b>, as a shared tree, multicast tree <b>15</b> may carry traffic for MVPN A to which PE router <b>12</b>B belongs and for MVPN B to which PE router <b>12</b>B does not belong.</p>
<p id="p-0059" num="0058"><figref idref="DRAWINGS">FIG. 2</figref> is a block diagram illustrating an exemplary PE router <b>30</b> capable of supporting one or more MVPNs in accordance with the techniques described herein. As one example, PE router <b>30</b> may comprise an ingress router or root of a multicast tree established across a public network, such as the Internet. PE router <b>30</b> may also comprise an egress router or leaf of a multicast tree established across the public network by another PE router. PE router <b>30</b> may operate substantially similar to any of PE routers <b>12</b> from <figref idref="DRAWINGS">FIG. 1</figref>.</p>
<p id="p-0060" num="0059">In this example, PE router <b>30</b> includes interface cards <b>32</b>A-<b>32</b>N (&#x201c;IFCs <b>32</b>&#x201d;) that receive multicast packets via inbound links <b>33</b>A-<b>33</b>N (&#x201c;inbound links <b>33</b>&#x201d;) and send multicast packets via outbound links <b>34</b>A-<b>34</b>N (&#x201c;outbound links <b>34</b>&#x201d;). IFCs <b>32</b> are typically coupled to links <b>33</b>, <b>34</b> via a number of interface ports. Router <b>30</b> also includes a control unit <b>31</b> that determines routes of received packets and forwards the packets accordingly via IFCs <b>32</b>.</p>
<p id="p-0061" num="0060">A system administrator may specify configuration information for PE router <b>30</b> via a user interface <b>44</b> included within control unit <b>31</b>. The configuration information may then be stored in database (DB) <b>45</b> coupled to user interface <b>44</b>. User interface <b>44</b> may include a display, a keyboard, a mouse or another type of input device.</p>
<p id="p-0062" num="0061">Control unit <b>31</b> maintains routing information <b>46</b> that describes the topology of a network and, in particular, routes through the network. Routing information <b>46</b> may include, for example, route data that describes various routes within the network, and corresponding next hop data indicating appropriate neighboring devices within the network for each of the routes. Router <b>30</b> updates routing information <b>46</b> to accurately reflect the topology of the network.</p>
<p id="p-0063" num="0062">Control unit <b>31</b> also maintains forwarding information <b>47</b> that associates network destinations with specific next hops and corresponding interface ports. In general, when router <b>30</b> receives a multicast packet via one of inbound links <b>33</b>, control unit <b>31</b> determines a destination and associated next hop for the packet in accordance with routing information <b>46</b> and forwards the packet on one of outbound links <b>34</b> to the corresponding next hop in accordance with forwarding information <b>47</b> based on the destination of the packet.</p>
<p id="p-0064" num="0063">Control unit <b>31</b> provides an operating environment for protocols <b>36</b> to execute. In the illustrated embodiment, protocols <b>36</b> include RSVP <b>38</b>, BGP <b>39</b>, PIM <b>40</b>, and LDP <b>42</b>. Control unit <b>31</b> also includes auto-discovery module <b>48</b>, binding module <b>49</b>, aggregation module <b>50</b>, default tree setup module <b>51</b>, data tree setup module <b>52</b>, multicast tree interfaces <b>54</b>, PE-PE exchange module <b>56</b>, and PE-CE exchange module <b>58</b>. In other embodiments, binding module <b>49</b> and aggregation module <b>50</b> may comprise sub-modules within auto-discovery module <b>48</b>. In still other embodiments, binding module <b>49</b> and aggregation module <b>50</b> may comprise sub-modules in default tree setup module <b>51</b> and/or data tree setup module <b>52</b>.</p>
<p id="p-0065" num="0064">Auto-discovery module <b>48</b> advertises the MVPN memberships of PE router <b>30</b> to other PE routers in the network using BGP <b>39</b> and receives BGP advertisements from the other PE routers. Therefore, PE router <b>30</b> may have a complete view of the MVPN memberships of the other PE routers in the network. Auto-discovery module <b>48</b> then determines which PE routers in the network belong to the same MVPNs as PE router <b>30</b>. PE router <b>30</b> considers all the other PE routers that advertise membership for the same MVPNs to be PIM neighbors. Auto-discovery module <b>48</b> maintains PIM neighbor adjacencies with the PE routers of each of the MVPNs as long as the BGP advertisement is not withdrawn. In this way, PE router <b>30</b> does not have to perform PIM neighbor adjacency management. PE-CE exchange module <b>58</b> transmits multicast control messages between PE router <b>30</b> and CE routers of MVPN sites that include subscriber device of multicast traffic. For example, PE-CE exchange module <b>58</b> may receive customer join/prune messages for multicast groups from subscriber devices within the MVPN sites. PE-CE exchange module <b>58</b> may use PIM <b>40</b> to maintain PIM neighbor adjacencies with the CE routers. PIM <b>40</b> may be extended to include a refresh reduction mechanism to significantly reduce the overhead for customer control messages. In some cases, PE router <b>30</b> may communicate with a multicast source via PE-CE exchange module <b>58</b>.</p>
<p id="p-0066" num="0065">PE-PE exchange module <b>56</b> utilizes a reliable transport protocol to transmit PIM control messages between PE router <b>30</b> and neighboring PE routers in the network. PE-PE exchange module <b>56</b> may use either BGP <b>39</b> or PIM <b>40</b> with reliability extensions. In this way, PE-PE exchange module <b>56</b> substantially eliminates the need to periodically refresh customer control messages, such as customer join/prune messages.</p>
<p id="p-0067" num="0066">Utilizing BGP <b>39</b> in auto-discovery module <b>48</b> makes the discovery and maintenance of PIM neighbors independent of the multicast data transport technology used by PE router <b>30</b>. PE-PE exchange module <b>56</b> sets up PE-to-PE tunnels to exchange customer multicast control information received from subscriber devices via PE-CE exchange module <b>58</b>. PE-PE exchange module <b>56</b> may encapsulate the customer control packets in a MPLS label before encapsulating the packets in the PE-to-PE tunnel. The MPLS label specifies the context of the customer control packets, e.g., a customer join message intended for a given MVPN. PE router <b>30</b> may tunnel a customer multicast control packet to another PE router in the network that is the PIM neighbor for the packet.</p>
<p id="p-0068" num="0067">PE router <b>30</b> supports various multicast data packet tunneling technologies, without impacting the procedures for exchange of MVPN routing information. Default tree setup module <b>51</b> and data tree setup module <b>52</b> do not place any restrictions on the multicast technology used to setup multicast trees across the network. For example, tree setup modules <b>51</b>, <b>52</b> may use RSVP <b>38</b>, PIM <b>40</b>, or LDP <b>42</b> to establish multicast trees. In some cases, RSVP <b>38</b> may be extended to provide TE capabilities.</p>
<p id="p-0069" num="0068">For example, default tree setup module <b>51</b> may use RSVP <b>38</b> to instantiate a P2MP LSP as a multicast tree. As described above, auto-discovery module <b>48</b> discovers the MVPN memberships of other PE routers in the network. Once the leaves of the multicast default tree are discovered, default tree setup module <b>51</b> signals the LSP with conventional RSVP-TE P2MP procedures. Aggregation module <b>50</b> may then decide which of the MVPNs to aggregate into a single multicast default tree. Binding module <b>49</b> maps the chosen MVPNs to the aggregate default tree and uses BGP <b>39</b> to advertise the mapping to the egress PE routers, or leaves, of the aggregate default tree.</p>
<p id="p-0070" num="0069">As another example, default tree setup module <b>51</b> may use PIM <b>40</b> to setup a multicast tree in the core of the network. In this case, the aggregate default tree is termed an aggregate multicast distribution tree (MDT). Auto-discovery module <b>48</b> discovers the MVPN memberships of other PE routers in the network. Aggregation module <b>50</b> may then decide which of the MVPNs to aggregate into a single default multicast tree. Binding module <b>49</b> maps the chosen MVPNs to the aggregate MDT and uses BGP <b>39</b> to advertise the mapping to the egress PE routers, or leaves, of the aggregate MDT. The egress PE routers can then join the aggregate MDT. The egress PE routers also join the provider group address corresponding to the aggregate MDT.</p>
<p id="p-0071" num="0070">In either case, the aggregate default tree may comprise either a source tree or a shared tree. In the case of a shared tree, the aggregate default tree can carry traffic that belonging to locally located VRFs of PE router <b>30</b> and remotely located VRFs that exist on other PEs within the network. The other PEs in the network then tunnel the multicast data traffic to the root of the shared tree, e.g., PE router <b>30</b>, to be transmitted on the shared tree. In this way, the shared tree substantially eliminates the need for each of the PE routers in the network to establish an individual aggregate default tree.</p>
<p id="p-0072" num="0071">When PE router <b>30</b> is coupled to a multicast source, data tree setup module <b>52</b> may establish an aggregate data tree across the network. An aggregate default tree, by definition, maps to all the customer source-group (&#x3c;C-S, C-G&#x3e;) entries belonging to all the MVPNs associated with the aggregate default tree. An aggregate data tree maps to specific &#x3c;C-S, C-G&#x3e; entries associated with subscriber devices coupled to the aggregate data tree. As one example, aggregate data trees may be used to transport high bandwidth multicast traffic of one or more specific multicast groups across the network. The specific multicast groups may belong to multiple MVPNs. Aggregate data trees may substantially eliminate flooding of PE routers that do not have subscriber devices for the specific high bandwidth multicast traffic.</p>
<p id="p-0073" num="0072">Prior to setting up aggregate data trees with data tree setup module <b>52</b>, auto-discovery module <b>48</b> discovers PE routers in the network that have subscriber devices of specific multicast groups. Auto-discovery module <b>48</b> discovers the egress PE routers using customer join messages that PE router <b>30</b> receives. In this case, customer join suppression is disabled. Aggregation module <b>50</b> may then decide which of the multicast groups, i.e., &#x3c;C-S, C-G&#x3e; entries, to aggregate into a single multicast data tree. Binding module <b>49</b> maps the chosen &#x3c;C-S, C-G&#x3e; entries to the aggregate data tree and uses BGP <b>39</b> to advertise the mapping to the egress PE router, or leaves, of the aggregate data tree. In the case where data tree setup module <b>52</b> uses PIM <b>40</b> to setup an aggregate data tree in the network, the aggregate data tree is termed an aggregate data MDT.</p>
<p id="p-0074" num="0073">Aggregate data tree creation may be triggered on criteria other than bandwidth once customer join suppression is disabled. For example, there could be a &#x201c;pseudo wasted bandwidth&#x201d; criteria such that PE router <b>30</b> switches to an aggregate data tree when the bandwidth multiplied by the number of PE routers without subscriber devices for a specific multicast group is above a specified threshold. This criterion may reduce the amount of bandwidth wasted by sparsely subscribed low-bandwidth groups. In addition, it may substantially eliminate the use of aggregate data trees for a high bandwidth multicast stream for which all the PE routers in the network have subscriber devices.</p>
<p id="p-0075" num="0074">For either aggregate default trees or aggregate data trees, once auto-discovery module <b>48</b> has discovered the egress PE routers, i.e., leaves, of the multicast tree within the network, aggregation module <b>50</b> determines which MVPNs or &#x3c;C-S, C-G&#x3e; entries to aggregate into a single multicast tree. The heuristics used to decide which MVPNs or &#x3c;C-S, C-G&#x3e; entries to aggregate may be implementation dependent. In some cases, PE router <b>30</b> may use offline tools to aide in the aggregation decision.</p>
<p id="p-0076" num="0075">The &#x201c;congruency&#x201d; of aggregation is defined by the amount of overlap in the egress PE routers, or leaves, of the multicast trees that are aggregated. For example, the congruency of aggregate default trees depends on the amount of overlap in memberships of MVPNs that are mapped to the aggregate default tree. If there is complete overlap, aggregation is substantially perfectly congruent. As the overlap between the MVPNs that are mapped to the aggregate default tree reduces, the congruency reduces.</p>
<p id="p-0077" num="0076">If aggregation module <b>50</b> performs aggregation that it is not substantially perfectly congruent, a PE router in the network may receive multicast traffic for MVPNs to which it does not belong. As the amount of multicast traffic for these unwanted MVPNs increases, aggregation becomes less optimal with respect to delivered traffic. Hence there is a tradeoff between reducing state in the network and delivering unwanted traffic.</p>
<p id="p-0078" num="0077">Aggregation module <b>50</b> may provide control over the congruency of aggregation. For example, user interface <b>44</b> may receive aggregation configuration information from a system administrator. In this way, a service provider may deploy aggregation depending on the MVPN membership and traffic profiles in the network. The service provider may also engineer the maximum amount of unwanted MVPNs for which a particular PE router may receive traffic.</p>
<p id="p-0079" num="0078">Aggregate default trees and aggregate data trees require a mechanism for the egress PE routers to demultiplex the multicast traffic received over the multicast trees. Since multicast traffic belonging to multiple MVPNs can be carried over the same multicast tree, there is a need to identify the MVPN to which the multicast packet belongs. An ingress router of the multicast tree may assign an inner label that corresponds to the multicast VRF for which the packet is intended. The ingress router uses this inner label while encapsulating a customer multicast data packet. Each of the egress PE routers of the multicast tree is capable of associating this inner label with the same MVPN and using the inner label to demultiplex the multicast traffic received over the aggregate default tree or the aggregate data tree.</p>
<p id="p-0080" num="0079">For purposes of illustration, PE router <b>30</b> will be described as an egress PE router of the multicast tree. Using a downstream label assignment would require all of the egress PE routers of the MVPN, including PE router <b>30</b>, to agree on a common label for the MVPN. Therefore, the ingress PE router uses upstream label assignment to allocate the inner label. PE router <b>30</b> comprises a separate label space for every aggregate default tree and every aggregate data tree for which PE router <b>30</b> is a leaf node. Control unit <b>31</b> creates a forwarding entry within forwarding information <b>47</b> for the inner label allocated by the ingress PE.</p>
<p id="p-0081" num="0080">When PE router <b>30</b> receives a packet over an aggregate multicast tree, an aggregate tree identifier (TI) specifies the label space in which to perform the inner label lookup. In some cases, control unit <b>31</b> may create a logical interface within multicast tree interfaces <b>54</b> that corresponds to the aggregate multicast tree. The logical interface within multicast tree interface <b>54</b> then specifies the label space in which to perform the inner label lookup.</p>
<p id="p-0082" num="0081">The ingress PE router informs the egress PE routers of the aggregate multicast tree about the inner label as part of a discovery procedure. As described above, once a PE router sets up an aggregate default tree or an aggregate data tree, binding module <b>49</b> uses BGP <b>39</b> to announce the MVPNs or the &#x3c;C-S, C-G&#x3e; mapped to the multicast tree to the egress PE routers in the network. For an aggregate default tree, binding module <b>49</b> announces the mapping of all MVPNs mapped to the aggregate default tree. The announcement also includes the inner label allocated by the ingress PE for each MVPN and the aggregate default TI. For an aggregate data tree, binding module <b>49</b> announces the mapping of all specific &#x3c;C-S, C-G&#x3e; entries mapped to the aggregate data tree. The announcement also includes the inner label allocated by the ingress PE for each &#x3c;C-S, C-G&#x3e; entry and the aggregate data TI.</p>
<p id="p-0083" num="0082">Control unit <b>31</b> may use IP/GRE (internet protocol/generic routing encapsulation) or MPLS to encapsulate multicast data packets for transmission on aggregate default trees or aggregate data trees. If the aggregate default tree or the aggregate data tree uses MPLS encapsulation, the outer MPLS label and the incoming interface specifies the label space of the inner label. In this case, penultimate-hop-popping is disabled. If the aggregate default tree or the aggregate data tree uses IP/GRE encapsulation, the root PE router source address and the provider group address of the multicast tree specifies the label space of the inner label. A lookup in the label space of the inner label identifies the multicast VRF in which to perform the customer multicast lookup.</p>
<p id="p-0084" num="0083">The architecture of router <b>30</b> illustrated in <figref idref="DRAWINGS">FIG. 2</figref> is shown for exemplary purposes only. The invention is not limited to this architecture. In other embodiments, router <b>30</b> may be configured in a variety of ways. In one embodiment, for example, some of the functionally of control unit <b>31</b> may be distributed within IFCs <b>32</b>. In another embodiment, control unit <b>31</b> may include a routing engine that performs routing functions and maintains routing information base (RIB), e.g., routing information <b>46</b>, and a forwarding engine that performs packet forwarding based on a forwarding information base (FIB), e.g., forwarding information <b>47</b>, generated in accordance with the RIB.</p>
<p id="p-0085" num="0084">Control unit <b>31</b> may be implemented solely in software, or hardware, or may be implemented as a combination of software, hardware, or firmware. For example, control unit <b>31</b> may include one or more processors which execute software instructions. In that case, the various software modules of control unit <b>31</b> may comprise executable instructions stored on a computer-readable medium, such as computer memory or hard disk.</p>
<p id="p-0086" num="0085"><figref idref="DRAWINGS">FIG. 3</figref> illustrates an exemplary BGP encoding <b>60</b> of network layer reachability information (NLRI) that may be utilized as an extension to BGP to support embodiments of the invention. In this example, the NLRI is associated with a MVPN subsequent address family identifier (SAFI). BGP encoding <b>60</b> comprises at least a portion of a BGP advertisement. As described above, BGP advertisements are used for MVPN membership discovery, propagation of customer control information, aggregate default tree discovery, and aggregate data tree discovery.</p>
<p id="p-0087" num="0086">BGP encoding <b>60</b> encodes the NLRI into a length field <b>62</b>, a MPLS label field <b>63</b>, a route distinguisher (RD) field <b>64</b>, a multicast source length field <b>65</b>, a multicast source field <b>66</b>, and a multicast group field <b>67</b>. Length field <b>62</b> comprises two octets and RD field <b>64</b> comprises eight octets. The remaining fields within BGP encoding <b>60</b> comprise variable field lengths.</p>
<p id="p-0088" num="0087">For MVPN membership discovery, the information elements are included in BGP encoding <b>60</b> with RD field <b>64</b> and multicast group field <b>67</b> set to zero. For a particular MVPN, the BGP advertisement includes the address of the ingress PE router as the PIM neighbor address for use by other PE routers in the network. This address may be shared by all the MVPNs to which the ingress PE router belongs or it may be different for each of the MVPNs. The BGP advertisement also includes the inner label allocated by the ingress PE router to identify the MVPN. Other PE routers in the network use the inner label to send customer join/prune messages to the ingress PE. The inner label identifies the multicast VRF for which the customer join/prune message is intended. When ingress replication is used, the inner label must be present for transmitting customer multicast traffic.</p>
<p id="p-0089" num="0088">When the ingress PE router distributes this information, the BGP advertisement also includes a Route Target Extended Communities (RTEC) attribute. The RTEC attribute may be an &#x201c;import route target&#x201d; of each VRF in the multicast tree. BGP distribution procedures ensure that the advertised information gets associated with the right VRFs. The BGP advertisement described herein implies that a PE-CE exchange module within the ingress PE is fully functional. When the PE-CE exchange module becomes dysfunctional, the ingress PE withdraws the BGP advertisement and discontinues the PIM neighbor adjacency.</p>
<p id="p-0090" num="0089">For propagation of customer multicast control information, such as customer join/prune messages, the information elements are included in BGP encoding <b>60</b>. For a particular MVPN, the BGP advertisement includes the RD <b>64</b> configured for the MVPN. RD <b>64</b> uniquely identifies the &#x3c;C-S, C-G&#x3e; entry as the PE router addresses could overlap between different MVPNs. The BGP advertisement also includes the customer multicast source address <b>66</b> and the customer multicast group address <b>67</b>. Multicast addresses <b>66</b> and <b>67</b> can be prefixes.</p>
<p id="p-0091" num="0090">When the ingress PE router distributes this information, the BGP advertisement includes the RTEC attribute. BGP distribution procedures ensure that the advertised information gets associated with the right VRFs. The address of the PE router that originates the customer control information is carried in the BGP next-hop address of the MP_REACH_ATTRIBUTE.</p>
<p id="p-0092" num="0091">The root of an aggregate default tree maps one or more MVPNs to the aggregate default tree. For aggregate default tree discovery, the information elements for the MVPNs that are mapped to the aggregate default tree are included in BGP encoding <b>60</b> of the NLRI. RD field <b>64</b> and multicast group field <b>67</b> are set to zero. For a particular MVPN, the BGP advertisement includes the address of the root of the aggregate default tree and the inner label allocated by the root of the aggregate default tree for the MVPN. When the ingress PE router distributes this information, the BGP advertisement also includes an aggregate default tree identifier (TI) attribute and a RTEC attribute.</p>
<p id="p-0093" num="0092">To guarantee uniqueness for different NLRIs, the root of the aggregate default tree ensures that MPLS label <b>63</b> is different for MVPN membership discovery and aggregate default tree discovery. The address of the root is required in the above NLRIs to maintain uniqueness of the NLRI. Since the root address is carried in the NLRI, the BGP next-hop address in the NEXT_HOP attribute or the MP_REACH_ATTRIBUTE may be set to zero by the sender and ignored by the receiver.</p>
<p id="p-0094" num="0093">The root of an aggregate data tree maps one or more &#x3c;C-S, C-G&#x3e; entries to the aggregate data tree. For aggregate data tree discovery, the information elements for the &#x3c;C-S, C-G&#x3e; entries that are mapped to the aggregate data tree are included in BGP encoding <b>60</b> of the NLRI. For a particular &#x3c;C-S, C-G&#x3e; entry, the BGP advertisement includes the RD <b>64</b> corresponding to the multicast enabled VRF. RD <b>64</b> uniquely identifies the &#x3c;C-S, C-G&#x3e; entry as the aggregate data tree root address could overlap between different MVPNs. The BGP advertisement also includes the inner label allocated by the root of the aggregate data tree for the &#x3c;C-S, C-G&#x3e; entry. Furthermore, the BGP advertisement includes the customer multicast source address <b>66</b> and the customer multicast group address <b>67</b>. Multicast addresses <b>66</b> and <b>67</b> can be prefixes in order to allow a range of customer source and group addresses to be mapped to the aggregate data tree.</p>
<p id="p-0095" num="0094">When the ingress PE router distributes this information, the BGP advertisement includes an aggregate data TI attribute and a RTEC attribute. The address of the Aggregate Data Tree root is carried in the BGP next-hop address of the MP_REACH_ATTRIBUTE.</p>
<p id="p-0096" num="0095"><figref idref="DRAWINGS">FIG. 4</figref> illustrates an example tree identifier (TI) attribute <b>70</b> for use with embodiments of the invention. TI attribute <b>70</b> enables identification of a specific aggregate default tree or aggregate data tree. As described above, aggregate default tree and aggregate data tree advertisements carry TI attribute <b>70</b>. TI attribute <b>70</b> includes whether the aggregate multicast tree is a shared aggregate multicast tree and the type of tunneling protocol the root of the aggregate multicast tree used to establish the aggregate multicast tree. The TI attribute also includes the identifier of the aggregate multicast tree based on the tree type.</p>
<p id="p-0097" num="0096">TI attribute <b>70</b> includes an S bit field <b>72</b>, a reserved field <b>73</b>, a tree type field <b>74</b>, and a tree identifier list field <b>75</b>. S bit <b>72</b> is set when the aggregate multicast tree comprises a shared aggregate multicast tree. In other words, TI attribute <b>70</b> announces when the aggregate multicast tree is capable of carrying traffic that belongs to VRFs that do not exist on the root of the aggregate multicast tree. Tree type field <b>74</b> identifies the multicast tunneling technology used by the root of the aggregate multicast tree to establish the aggregate multicast tree. In this way, tree type field <b>74</b> determines the semantics of tree identifier list field <b>75</b>.</p>
<p id="p-0098" num="0097">Tree type field <b>74</b> may identify one of PIM-SSM (source specific mode) MDT, PIM-SM (sparse mode) MDT, or RSVP-TE P2MP LSP. When the type is set to PIM-SM MDT or PIM-SSM MDT, tree identifier list field <b>75</b> contains a PIM provider source-group (&#x3c;P-S, P-G&#x3e;) address. Hence MP_REACH identifies a set of MVPN customer multicast trees, the TI attribute identifies a particular aggregate multicast tree, and the BGP advertisement of MP_REACH and TI creates a binding between the aggregate multicast tree and the set of MVPN customer trees.</p>
<p id="p-0099" num="0098"><figref idref="DRAWINGS">FIG. 5</figref> is a flowchart illustrating an example procedure for setting up an aggregate default tree between a root of the aggregate default tree and an egress PE router. In the case of an aggregate default tree, the aggregate tree root may comprise a PE router or a RP within the network. The aggregate default tree may be a source tree or a shared tree. The aggregate tree root and the egress PE router may operate substantially similar to PE router <b>30</b> illustrated in <figref idref="DRAWINGS">FIG. 2</figref>.</p>
<p id="p-0100" num="0099">The aggregate tree root uses BGP to auto-discover the MVPN memberships of the PE routers in the network (<b>80</b>). In this way, the aggregate tree root has a complete view of the MVPN memberships of the other PE routers. From the complete MVPN listing, the aggregate tree root determines which of the MVPNs to aggregate into a single default multicast tree. The aggregate tree root then maps the aggregate default tree to these MVPNs (<b>81</b>). The aggregate tree root again uses BGP to advertise the mapping information to the egress PE routers of the aggregate default tree (<b>82</b>).</p>
<p id="p-0101" num="0100">At least one of the egress PE routers of the aggregate default tree receives the advertised mapping information (<b>84</b>). The egress PE router examines the mapping information and associates the aggregate default tree with one or more of the MVPNs to which the egress PE router belongs (<b>85</b>). The egress PE router then creates a logical interface to a label space corresponding to the aggregate default tree (<b>86</b>). As described herein, a multicast packet transmitted on the aggregate multicast tree includes an inner label that identifies the MVPN to which the packet belongs. The logical interface directs the egress PE router to the appropriate label space in which to perform an inner label lookup. The inner label lookup in turn determines the VRF in which the egress PE router performs a customer multicast packet lookup.</p>
<p id="p-0102" num="0101"><figref idref="DRAWINGS">FIG. 6</figref> is a flowchart illustrating an example procedure for setting up an aggregate data tree between a root of the aggregate data tree and an egress PE router. In the case of an aggregate data tree, the aggregate tree root comprises a PE router coupled to a multicast source. The aggregate data tree may be a source tree or a shared tree. The aggregate tree root and the egress PE router may operate substantially similar to PE router <b>30</b> illustrated in <figref idref="DRAWINGS">FIG. 2</figref>.</p>
<p id="p-0103" num="0102">The aggregate tree root uses customer join messages to auto-discover the multicast group memberships, i.e., &#x3c;C-S, C-G&#x3e; entries, of the PE routers in the network (<b>90</b>). In this way, the aggregate tree root has a complete view of the &#x3c;C-S, C-G&#x3e; entries of the other PE routers. From the complete multicast group listing, the aggregate tree root determines which of the &#x3c;C-S, C-G&#x3e; entries to aggregate into a single data multicast tree. The aggregate tree root then maps the aggregate data tree to these specific multicast groups (<b>91</b>). The aggregate tree root uses BGP to advertise the mapping information to the egress PE routers of the aggregate data tree (<b>92</b>).</p>
<p id="p-0104" num="0103">At least one of the egress PE routers of the aggregate data tree receives the advertised mapping information (<b>94</b>). The egress PE router examines the mapping information and associates the aggregate data tree with one or more of the specific &#x3c;C-S, C-G&#x3e; entries to which the egress PE router belongs (<b>95</b>). The egress PE router then creates a logical interface to a label space corresponding to the aggregate data tree (<b>96</b>). As described herein, a multicast packet transmitted on the aggregate multicast tree includes an inner label that identifies the multicast group to which the packet belongs. The logical interface directs the egress PE router to the appropriate label space in which to perform an inner label lookup. The inner label lookup in turn determines the VRF in which the egress PE router performs a customer multicast packet lookup.</p>
<p id="p-0105" num="0104"><figref idref="DRAWINGS">FIGS. 7A and 7B</figref> are flowcharts illustrating two exemplary processes of switching from an aggregate default tree to an aggregate data tree. Aggregate data trees provide a PE router with the ability to create separate multicast trees for specific &#x3c;C-S, C-G&#x3e; entries. In some cases, aggregate data trees may be setup when an amount of bandwidth on an aggregate default tree is greater than a specified threshold. In other cases, aggregate data trees may be setup when the bandwidth multiplied by the number of PE routers without subscriber devices for a specific multicast group is above a specified threshold. The ingress PE router that originates the aggregate data tree and the egress PE routers of the aggregate data tree switch to the aggregate data tree for the &#x3c;C-S, C-G&#x3e; entries that are mapped to the aggregate data tree.</p>
<p id="p-0106" num="0105"><figref idref="DRAWINGS">FIG. 7A</figref> illustrates a first switching process. An ingress PE router sets up an aggregate data tree mapped to one or more multicast groups, i.e., &#x3c;C-S, C-G&#x3e; entries (<b>100</b>). The ingress PE router then announces the mapping of the &#x3c;C-S, C-G&#x3e; entries to the aggregate data tree to the egress PE routers of the aggregate data tree. Depending on the multicast tunneling technology, the ingress PE router may make the announcement before or after setting up the aggregate data tree. After the egress PE routers of the aggregate data tree receive the announcement, the egress PE routers setup forwarding entries, as described above, to receive multicast traffic on the aggregate data tree.</p>
<p id="p-0107" num="0106">Once the ingress PE router sets up the aggregate data tree, the ingress PE router sends multicast packets of the specific &#x3c;C-S, C-G&#x3e; entries mapped to the aggregate data tree on both the aggregate data tree and the aggregate default tree (<b>101</b>). After a preconfigured amount of time (yes branch of <b>102</b>), the ingress PE router stops sending the multicast packets of the specific &#x3c;C-S, C-G&#x3e; entries on the aggregate default tree (<b>103</b>).</p>
<p id="p-0108" num="0107"><figref idref="DRAWINGS">FIG. 7B</figref> illustrates a second switching process. An ingress PE router sets up an aggregate data tree mapped to one or more multicast groups, i.e., &#x3c;C-S, C-G&#x3e; entries (<b>105</b>). The ingress PE router then announces the mapping of the &#x3c;C-S, C-G&#x3e; entries to the aggregate data tree to the egress PE routers of the aggregate data tree. Depending on the multicast tunneling technology, the ingress PE router may make the announcement before or after setting up the aggregate data tree. After the egress PE routers of the aggregate data tree receive the announcement, the egress PE routers setup forwarding entries, as described above, to receive multicast traffic on the aggregate data tree.</p>
<p id="p-0109" num="0108">Once the ingress PE router sets up the aggregate data tree, the ingress PE router sends multicast packets of the specific &#x3c;C-S, C-G&#x3e; entries mapped to the aggregate data tree on the aggregate default tree (<b>106</b>). After a preconfigured amount of time (yes branch of <b>107</b>), the ingress PE router stops sending the multicast packets of the specific &#x3c;C-S, C-G&#x3e; entries on the aggregate default tree (<b>108</b>). The ingress PE router then starts sending the multicast packets of the specific &#x3c;C-S, C-G&#x3e; entries mapped to the aggregate data tree on the aggregate data tree (<b>109</b>)</p>
<p id="p-0110" num="0109"><figref idref="DRAWINGS">FIG. 8</figref> illustrates an example IP encapsulated packet <b>110</b> for transmission on a PIM-based multicast tree. Techniques described above enable separate transport of customer control information using non-PIM protocols and establishment of aggregate multicast trees using PIM. In this way, the invention substantially eliminates the scalability issues introduced by conventional PIM techniques when a network includes a large number of MVPNs each with a large number of subscriber sites. The example encapsulation of <figref idref="DRAWINGS">FIG. 8</figref> this may be used for any of the types of multicast trees described herein, including aggregate default multicast trees, aggregate data multicast trees, source multicast trees or shared multicast trees.</p>
<p id="p-0111" num="0110">In this example, IP encapsulated packet <b>110</b> includes a provider IP (P-IP) header <b>112</b>, a GRE header <b>113</b>, an inner label <b>114</b>, and an encapsulated payload <b>115</b>. In the illustrated embodiments, encapsulated payload <b>115</b> includes a customer IP (C-IP) header <b>116</b> and a customer payload (C-payload) <b>117</b>. C-payload <b>117</b> may comprise a L3 multicast data packet, such as an IP packet, requested by a subscriber device within a MVPN site.</p>
<p id="p-0112" num="0111">P-IP header <b>112</b> contains the aggregate MDT or aggregate data MDT provider group address as the destination address and the root address of the MDT as the source address. The egress PE router of the MDT that receives IP encapsulated packet <b>110</b> performs a lookup on P-IP header <b>112</b> and determines the forwarding entry or interface created within the egress PE router corresponding to the aggregate MDT or aggregate data MDT. The forwarding entry or interface specifies the label space in which to perform a lookup of inner label <b>114</b>.</p>
<p id="p-0113" num="0112">Inner label <b>114</b> is unique within the context of the root of the MDT as it is assigned by the root of the MDT without coordination with other PE routers in the network. Therefore, inner label <b>114</b> is not unique across multiple PE routers. In order to unambiguously identify a particular MVPN or multicast group, the egress PE router has to know inner label <b>114</b> and the context within which inner label <b>114</b> is unique. The context is provided by P-IP header <b>112</b>.</p>
<p id="p-0114" num="0113">The egress PE router strips P-IP header <b>112</b> and GRE header <b>113</b>. The egress PE router than performs the lookup of inner label <b>114</b> to determine the VRF in which the egress PE router needs to perform the customer multicast data packet lookup. The egress PE router strips inner label <b>114</b> and sends the L3 multicast packet to the VRF for multicast data forwarding.</p>
<p id="p-0115" num="0114"><figref idref="DRAWINGS">FIG. 9</figref> illustrates an example MPLS encapsulated packet <b>120</b> for transmission on a RSVP- or LDP-based multicast tree. The example encapsulation of <figref idref="DRAWINGS">FIG. 9</figref> this may be used for any of the types of multicast trees described herein, including aggregate default multicast trees, aggregate data multicast trees, source multicast trees or shared multicast trees.</p>
<p id="p-0116" num="0115">In this example, MPLS encapsulated packet <b>120</b> includes an MPLS label <b>122</b>, an inner label <b>123</b>, and an encapsulated payload <b>124</b>. In the illustrated embodiments, encapsulated payload <b>124</b> includes a customer IP (C-IP) header <b>125</b> and a customer payload (C-payload) <b>126</b>. C-payload <b>126</b> may comprise a L3 multicast data packet, such as an IP packet, requested by a subscriber device within a MVPN site.</p>
<p id="p-0117" num="0116">The egress PE router of an aggregate default tree or an aggregate data tree that receives MPLS encapsulated packet <b>120</b> performs a lookup on MPLS label <b>122</b> and determines the forwarding entry or interface created within the egress PE router corresponding to the aggregate default tree or aggregate data tree. The forwarding entry or interface specifies the label space in which to perform a lookup of inner label <b>123</b>.</p>
<p id="p-0118" num="0117">Inner label <b>114</b> is unique within the context of the root of the aggregate tree as it is assigned by the root of the aggregate tree without coordination with other PE routers in the network. Therefore, inner label <b>114</b> is not unique across multiple PE routers. In order to unambiguously identify a particular MVPN or multicast group, the egress PE router has to know inner label <b>123</b> and the context within which inner label <b>123</b> is unique. The context is provided by MPLS label <b>122</b>.</p>
<p id="p-0119" num="0118">The egress PE router strips MPLS label <b>122</b> and performs the lookup of inner label <b>123</b> to determine the VRF in which the egress PE router needs to perform the customer multicast data packet lookup. The egress PE router then strips inner label <b>123</b> and sends the multicast packet to the VRF for multicast data forwarding.</p>
<p id="p-0120" num="0119"><figref idref="DRAWINGS">FIG. 10</figref> is a flowchart illustrating an example process of forwarding multicast data packets on an aggregate multicast tree across a public network. The process will be described herein in reference to SP network <b>10</b> of <figref idref="DRAWINGS">FIG. 1</figref>. For purposes of illustration, multicast tree <b>15</b> comprises an aggregate default tree. PE router <b>12</b>A establishes multicast tree <b>15</b> as a RSVP-TE P2MP LSP across SP network <b>10</b> between ingress PE router <b>12</b>A and egress PE routers <b>12</b>B and <b>12</b>C. PE router <b>12</b>A maps MVPN A and MVPN B to multicast tree <b>15</b>. Multicast tree <b>15</b> may be a source tree or a shared tree.</p>
<p id="p-0121" num="0120">PE router <b>12</b>A receives L3 multicast data packets, such as IP packets, for at least one of MVPN A and MVPN B from multicast source <b>24</b> (<b>130</b>). PE router <b>12</b>A encapsulates the multicast data packets for the one of MVPN A and MVPN B that includes subscriber devices of the multicast traffic (<b>131</b>). PE router <b>12</b>A then transmits the encapsulated packet on multicast tree <b>15</b>, which is mapped to the MVPN (<b>132</b>).</p>
<p id="p-0122" num="0121">Egress PE router <b>12</b>C, for example, receives the encapsulated packet on multicast tree <b>15</b> (<b>134</b>). Egress PE router <b>12</b>C performs a lookup on the outer label of the encapsulated packet to determine the forwarding entry within egress PE router <b>12</b>C that corresponds to multicast tree <b>15</b> (<b>135</b>). Egress PE router <b>12</b>C then strips the outer label (<b>136</b>).</p>
<p id="p-0123" num="0122">Egress PE router <b>12</b>C performs a lookup on the inner label of the encapsulated packet to determine the VRF that corresponds to the MVPN (<b>137</b>). Egress PE router <b>12</b>C then strips the inner label (<b>138</b>) and sends the multicast data packets to the corresponding VRF for forwarding to subscriber devices of the multicast traffic within the MVPN site.</p>
<p id="p-0124" num="0123"><figref idref="DRAWINGS">FIG. 11</figref> is a block diagram illustrating exemplary autonomous systems (ASs) <b>150</b>A-<b>150</b>C (&#x201c;ASs <b>150</b>) in which autonomous system border routers (ASBRs) <b>154</b>A-<b>154</b>C (&#x201c;ASBRs <b>154</b>&#x201d;) support at least one inter-AS MVPN. In the illustrated embodiment, ASBRs <b>154</b> support the inter-AS MVPN A and the inter-AS MVPN B without requiring a single multicast tree to span all of ASs <b>150</b>. Principles of the invention described herein allow each of ASs <b>150</b> to support an independent intra-AS multicast tree established by one or more tunneling technologies.</p>
<p id="p-0125" num="0124">Each of ASs <b>150</b> may comprise a public network that includes a plurality of network devices substantially similar to SP network <b>10</b> from <figref idref="DRAWINGS">FIG. 1</figref>. In some cases, each of ASs <b>150</b> may belong to different service providers. Each of the MVPN sites may include a LAN or a WAN that comprises a plurality of subscriber devices, such as desktop computers, laptops, workstations, PDAs, wireless devices, network-ready appliances, file servers, print servers or other devices.</p>
<p id="p-0126" num="0125">In the illustrated embodiment, AS <b>150</b>A comprises ASBR <b>154</b>A coupled to multicast source <b>166</b> and PE router <b>156</b>A coupled to MVPN B site <b>158</b>. ASBR <b>154</b>A may setup a multicast tree <b>155</b> across AS <b>150</b>A to PE router <b>156</b>A. ASBR <b>154</b>A may use PIM, RSVP, or LDP to establish multicast tree <b>155</b>. Multicast tree <b>155</b> may comprise an aggregate default tree or an aggregate data tree. In addition, multicast tree <b>155</b> may comprise a source tree or a shared tree.</p>
<p id="p-0127" num="0126">AS <b>150</b>B comprises ASBR <b>154</b>B, PE router <b>156</b>B coupled to MVPN A site <b>160</b>A and MVPN B site <b>160</b>B, and PE router <b>156</b>C coupled to MVPN A site <b>162</b>. ASBR <b>154</b>B may set up a multicast tree <b>157</b> across AS <b>150</b>B to PE router <b>156</b>B and PE router <b>156</b>C. ASBR <b>154</b>B may use PIM, RSVP, or LDP to establish multicast tree <b>157</b>. Multicast tree <b>157</b> may comprise any form of multicast tree, including the types described herein. For example, multicast tree <b>157</b> may comprise an aggregate default tree or an aggregate data tree. Alternatively, multicast tree <b>157</b> may comprise a source tree or a shared tree.</p>
<p id="p-0128" num="0127">AS <b>150</b>C comprises ASBR <b>154</b>C and PE router <b>156</b>D coupled to MVPN A site <b>164</b>A and MVPN B site <b>164</b>B. ASBR <b>154</b>C may set up a multicast tree <b>159</b> to PE router <b>156</b>D. ASBR <b>154</b>C may use PIM, RSVP, or LDP to establish multicast tree <b>159</b>. Multicast tree <b>159</b> may comprise an aggregate default tree or an aggregate data tree. In addition, multicast tree <b>159</b> may comprise a source tree or a shared tree.</p>
<p id="p-0129" num="0128">An inter-AS multicast tree <b>152</b> may be constructed by stitching together multicast tress <b>155</b>, <b>157</b>, and <b>159</b> within each of ASs <b>150</b> using MPLS label switching. For example, ASBR <b>154</b>A may create inter-AS multicast tree <b>152</b> by stitching together multicast tree <b>155</b> established within AS <b>150</b>A, multicast tree <b>157</b> established within AS <b>150</b>B, and multicast tree <b>159</b> established within AS <b>150</b>C. In this way, ASBR <b>154</b>A provides multicast traffic from multicast source <b>166</b> to the MVPN sites coupled to ASs <b>150</b> via PE routers <b>156</b> without relying on a single multicast tree. In other embodiments, any of ASBRs <b>154</b> may construct inter-AS multicast tree <b>152</b>.</p>
<p id="p-0130" num="0129">Each of ASs <b>150</b> announces AS MVPN memberships to the other ASs <b>150</b> using BGP advertisements. ASBRs <b>154</b> use the BGP advertisements to construct a spanning tree, i.e., inter-AS multicast tree <b>152</b>, on which to transmit multicast data packets for the MVPNs. MVPN membership information then propagates across ASs <b>150</b> along the spanning tree.</p>
<p id="p-0131" num="0130">For AS MVPN membership discovery, the information elements are included in a BGP encoding. The BGP advertisement includes a route distinguisher for the MVPN that each ASBR in an AS uses when advertising to the other ASBRs <b>154</b>. The advertisement also include an origin AS number that is encoded in an IP address, and an address of ASBR <b>154</b>A as the next-hop.</p>
<p id="p-0132" num="0131">For each inter-AS MVPN locally configured or discovered from a neighboring one of ASs <b>150</b>, ASBR <b>154</b>A instantiates multicast tree <b>155</b> constrained to AS <b>150</b>A. ASBR <b>154</b>A forwards multicast packets received from multicast source <b>166</b> onto intra-AS multicast tree <b>155</b> with an inner label allocated by ASBR <b>154</b>A for the MVPN. ASBR <b>154</b>A also forwards customer multicast data packets received from multicast source <b>166</b> for the MVPN to the other ASBRs <b>154</b> that belong to the MVPN. The multicast packet is sent over inter-AS multicast tree <b>152</b> to ASBR <b>150</b>B and ASBR <b>150</b>C with an inner label. In this case, the inner label for the multicast packet sent to ASBR <b>150</b>B is advertised by ASBR <b>150</b>B for the MVPN, and the inner label for the multicast packet sent to ASBR <b>150</b>C is advertised by ASBR <b>150</b>C for the MVPN.</p>
<p id="p-0133" num="0132">Various embodiments of the invention have been described. These and other embodiments are within the scope of the following claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method comprising:
<claim-text>automatically discovering virtual private network (VPN) memberships for a plurality of routers within a network, wherein each of the plurality of routers is coupled to one or more customer networks and belongs to at least one of a plurality of different VPNs, and wherein automatically discovering the VPN memberships of the routers includes exchanging Border Gateway Protocol (BGP) advertisements between the routers that encode virtual routing and forwarding (VRF) instances configured on the routers for the different VPNs to which the routers belong;</claim-text>
<claim-text>in response to discovering the VPN memberships, establishing one or more label switched paths (LSPs) through the network for the routers that are members of at least one of the discovered VPNs, each of the LSPs forming a tunnel for transporting data packets from a source router providing an ingress to the LSP to at least one destination router providing an egress from the LSP;</claim-text>
<claim-text>allocating, with the source router of each LSP, an multi-protocol label switching (MPLS) label to identify control information for the VPN and sending a BGP advertisement from the source router to the destination router to advertise the label to the destination router;</claim-text>
<claim-text>receiving BGP advertisements that encode control information for the VPN using the label allocated by the source router; and</claim-text>
<claim-text>transmitting data packets for the VPN from the source router through the LSP to the destination router in accordance with the control information.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the BGP advertisements for automatically discovering VPN memberships encode the label for the VPN and an import route target that identifies a corresponding one of the VRFs to be used when receiving the control information via the BGP advertisements.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein establishing one or more label switched paths (LSPs) comprises executing one of a resource reservation protocol (RSVP) or a label distribution protocol (LDP) on each of the source router and the destination router for the LSPs.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the LSPs comprises point-to-multipoint (P2MP) LSPs.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the virtual private network comprises a multicast virtual private network (MVPN).</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein the control information comprises multicast group join or prune messages.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising including in the BGP advertisements a route target attribute of each of the discovered VPNs.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. A network router comprising:
<claim-text>an auto-discovery module that discovers virtual private network (VPN) memberships of a plurality of destination routers within a network, wherein each of the plurality of destination routers is coupled to one or more respective customer networks and belongs to at least one of a plurality of different VPNs, wherein the auto-discovery module receives Border Gateway Protocol (BGP) advertisements from each of the destination routers that specify virtual routing and forwarding (VRF) instances configured on the destination routers for the different VPNs to which the respective destination router belongs; and</claim-text>
<claim-text>a control unit that executes a label switching protocol to establish a distribution tree within the network for at least a first one of the discovered VPNs, the distribution tree comprising a point-to-multipoint (P2MP) label switched path (LSP) forming a tunnel for transporting data packets from a source device providing an ingress to the multicast tree to the plurality of destination routers providing a plurality of different egresses from the distribution tree,</claim-text>
<claim-text>wherein control unit allocates an multi-protocol label switching (MPLS) label to identify control information for the first one of the discovered VPNs and sends a BGP advertisement to advertise the label to the routers providing the egresses for the distribution tree, and</claim-text>
<claim-text>wherein the control unit receives BGP advertisements that encode control information for the first one of the discovered VPNs using the label and transmits data packets for the first one of the discovered VPNs through the P2MP LSP to the destination routers in accordance with the control information.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The network router of <claim-ref idref="CLM-00008">claim 8</claim-ref>, where the multicast tree comprises one of a resource reservation protocol (RSVP) tree or a protocol independent multicast (PIM) tree.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. A non-transitory computer-readable medium comprising instructions that cause a programmable processor to:
<claim-text>discover multicast virtual private network (VPN) memberships of a plurality of routers within a network, wherein each of the plurality of routers is coupled to one or more respective customer networks and belongs to at least one of a plurality of different VPNs, and wherein discovering the VPN memberships of the routers includes receiving Border Gateway Protocol (BGP) advertisements from each of the routers that specify virtual routing and forwarding (VRF) instances configured on the routers for the different VPNs to which the respective router belongs;</claim-text>
<claim-text>establish a distribution tree within the network for at least one of the discovered VPNs, the multicast tree comprising a point-to-multipoint (P2MP) label switched path (LSP) forming a tunnel for transporting data packets from a source router providing an ingress to the P2MP LSP to the plurality of destination routers providing a plurality of different egresses from the P2MP LSP;</claim-text>
<claim-text>allocate, with the source router of each LSP, an multi-protocol label switching (MPLS) label to identify control information for the VPN and send a BGP advertisement from the source router to the destination router to advertise the label to the destination router;</claim-text>
<claim-text>receive BGP advertisements that encode control information for the VPN using the label allocated by the source router; and</claim-text>
<claim-text>transmit data packets for the VPN from the source router through the P2MP LSP to the destination router in accordance with the control information.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. A system comprising:
<claim-text>a plurality of routers within a network that advertise their virtual private network (VPN) memberships using Border Gateway Protocol (BGP) advertisements that specify virtual routing and forwarding (VRF) instances configured on the routers for different VPNs to which the respective router belong, wherein the routers allocate a multi-protocol label switching (MPLS) label for each of the VPNs and encode the MPLS labels within network layer reachability information of the BGP advertisements along with an import route target that identifies a corresponding one of the VRFs; and</claim-text>
<claim-text>a distribution tree automatically established within the network by the routers for at least a first one of the VPNs, wherein the distribution tree comprises a point-to-multipoint (P2MP) label switched path (LSP) forming a tunnel for transporting data packets from a source one of the routers as an ingress to the distribution tree to a plurality of the routers providing a different egresses from the distribution tree,</claim-text>
<claim-text>wherein a source router of the distribution tree allocates an multi-protocol label switching (MPLS) label to identify control information for the at least one VPN and sends a BGP advertisement to advertise the label to the routers providing the egresses for the distribution tree, and</claim-text>
<claim-text>wherein the source router receives BGP advertisements that encode control information for the first one of the discovered VPNs using the label allocated by the source router and transmit data packets for the first one of the discovered VPN from the source router through the P2MP LSP to the destination routers in accordance with the control information.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
