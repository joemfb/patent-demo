<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08626785-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08626785</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13109308</doc-number>
<date>20110517</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<us-term-of-grant>
<us-term-extension>150</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>7</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>707762</main-classification>
<further-classification>707768</further-classification>
</classification-national>
<invention-title id="d2e53">Contextual query revision</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6006225</doc-number>
<kind>A</kind>
<name>Bowman et al.</name>
<date>19991200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6098042</doc-number>
<kind>A</kind>
<name>Huynh</name>
<date>20000800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>6154213</doc-number>
<kind>A</kind>
<name>Rennison et al.</name>
<date>20001100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>6701309</doc-number>
<kind>B1</kind>
<name>Beeferman et al.</name>
<date>20040300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>  1  1</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>7254774</doc-number>
<kind>B2</kind>
<name>Cucerzan et al.</name>
<date>20070800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>7565345</doc-number>
<kind>B2</kind>
<name>Bailey et al.</name>
<date>20090700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>7610282</doc-number>
<kind>B1</kind>
<name>Datar et al.</name>
<date>20091000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>7636714</doc-number>
<kind>B1</kind>
<name>Lamping et al.</name>
<date>20091200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>7657521</doc-number>
<kind>B2</kind>
<name>Masarie et al.</name>
<date>20100200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>7676462</doc-number>
<kind>B2</kind>
<name>Kirkland et al.</name>
<date>20100300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>7685191</doc-number>
<kind>B1</kind>
<name>Zwicky et al.</name>
<date>20100300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>7747632</doc-number>
<kind>B2</kind>
<name>Korn et al.</name>
<date>20100600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707751</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>7756855</doc-number>
<kind>B2</kind>
<name>Ismalon</name>
<date>20100700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>7953746</doc-number>
<kind>B1</kind>
<name>Garg et al.</name>
<date>20110500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707762</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>2005/0027691</doc-number>
<kind>A1</kind>
<name>Brin et al.</name>
<date>20050200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>2005/0210383</doc-number>
<kind>A1</kind>
<name>Cucerzan et al.</name>
<date>20050900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>2005/0289140</doc-number>
<kind>A1</kind>
<name>Ford et al.</name>
<date>20051200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707  5</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00018">
<document-id>
<country>US</country>
<doc-number>2006/0224938</doc-number>
<kind>A1</kind>
<name>Fikes et al.</name>
<date>20061000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00019">
<document-id>
<country>US</country>
<doc-number>2006/0253427</doc-number>
<kind>A1</kind>
<name>Wu et al.</name>
<date>20061100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00020">
<document-id>
<country>US</country>
<doc-number>2007/0016578</doc-number>
<kind>A1</kind>
<name>Melman</name>
<date>20070100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00021">
<document-id>
<country>US</country>
<doc-number>2007/0016616</doc-number>
<kind>A1</kind>
<name>Brill et al.</name>
<date>20070100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>7071041</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00022">
<document-id>
<country>US</country>
<doc-number>2007/0038615</doc-number>
<kind>A1</kind>
<name>Vadon et al.</name>
<date>20070200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707  4</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00023">
<document-id>
<country>US</country>
<doc-number>2007/0214131</doc-number>
<kind>A1</kind>
<name>Cucerzan et al.</name>
<date>20070900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707  5</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00024">
<document-id>
<country>US</country>
<doc-number>2008/0114721</doc-number>
<kind>A1</kind>
<name>Jones et al.</name>
<date>20080500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00025">
<document-id>
<country>US</country>
<doc-number>2008/0114751</doc-number>
<kind>A1</kind>
<name>Cramer et al.</name>
<date>20080500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>20</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>707705</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>707706</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>707758</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>707759</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>707760</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>707765-769</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>707762</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>707999003-999005</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>6</number-of-drawing-sheets>
<number-of-figures>6</number-of-figures>
</figures>
<us-related-documents>
<continuation>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>11952770</doc-number>
<date>20071207</date>
</document-id>
<parent-grant-document>
<document-id>
<country>US</country>
<doc-number>7953746</doc-number>
</document-id>
</parent-grant-document>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>13109308</doc-number>
</document-id>
</child-doc>
</relation>
</continuation>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20110219441</doc-number>
<kind>A1</kind>
<date>20110908</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Garg</last-name>
<first-name>Ashutosh</first-name>
<address>
<city>Sunnyvale</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Dhamdhere</last-name>
<first-name>Kedar</first-name>
<address>
<city>Sunnyvale</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Garg</last-name>
<first-name>Ashutosh</first-name>
<address>
<city>Sunnyvale</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Dhamdhere</last-name>
<first-name>Kedar</first-name>
<address>
<city>Sunnyvale</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Fish &#x26; Richardson P.C.</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Google Inc.</orgname>
<role>02</role>
<address>
<city>Mountain View</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Vy</last-name>
<first-name>Hung T</first-name>
<department>2163</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">Apparatus, systems and methods for contextual query revision are disclosed. A current search query is received during a search session. The current search query includes one or more current search tokens. Potentially inaccurate search tokens are identified from the one or more current search tokens. A possible replacement token is identified based upon the potentially inaccurate search token. A group of related tokens is identified from query logs, and a modified search query is generated if the replacement token is not included in the related tokens.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="236.98mm" wi="188.55mm" file="US08626785-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="207.60mm" wi="147.57mm" orientation="landscape" file="US08626785-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="209.55mm" wi="178.56mm" file="US08626785-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="187.11mm" wi="189.82mm" file="US08626785-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="248.41mm" wi="185.50mm" orientation="landscape" file="US08626785-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="245.45mm" wi="186.77mm" file="US08626785-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="245.79mm" wi="188.81mm" file="US08626785-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This application is a continuation application of, and claims priority to, U.S. patent application Ser. No. 11/952,770, entitled &#x201c;CONTEXTUAL QUERY REVISION&#x201d;, to inventors Ashutosh Garg and Kedar Dhamdhere, which was filed on Dec. 7, 2007. The disclosure of the foregoing application is incorporated herein by reference in its entirety.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">BACKGROUND</heading>
<p id="p-0003" num="0002">This document relates to contextual query revision.</p>
<p id="p-0004" num="0003">The rise of the Internet has enabled access to a wide variety of content items, e.g., video and/or audio files, web pages for particular subjects, news articles, etc. Content items of particular interest to a user can be identified by a search engine in response to a user query. One example search engine is the Google search engine provided by Google Inc. of Mountain View, Calif., U.S.A. The query can include one or more search terms or phrases, and the search engine can identify and, optionally, rank the content items based on the search terms or phrases in the query and present the content items to the user (e.g., in order according to the rank).</p>
<p id="p-0005" num="0004">Search queries sometimes contain inaccurate or incorrectly typed terms that cause results to be returned that are not of interest to the user. Accordingly, users may have to modify their queries one or more times to replace inaccurate search terms until the search engine returns the results that are of interest to the user. Some search engines, however, can automatically correct or suggest corrections to inaccurate or incorrectly typed terms; however, these suggestions may not enhance the user experience, as the suggestions may include further inaccurate terms that are not pertinent to the user's current interests.</p>
<heading id="h-0003" level="1">SUMMARY</heading>
<p id="p-0006" num="0005">In general, one aspect of the subject matter disclosed in this specification can be embodied in a method for contextual query revision. The method includes receiving a current search query during a search session, the current search query comprising one or more current search tokens; identifying a potentially inaccurate search token from the one or more current search tokens; identifying a possible replacement token based upon the potentially inaccurate search token; identifying related tokens from a query log based upon previous search queries associated with the search session; determining whether the possible replacement token for the potentially inaccurate search token is included in the group of related tokens; and in response to determining that the possible replacement token is among the group of related tokens, generating a modified search query that includes the possible replacement token. Other embodiments of this aspect include corresponding systems, apparatus, and computer program products.</p>
<p id="p-0007" num="0006">In another aspect, another method for contextual query revision includes receiving a current search query associated with a search session; identifying a potentially inaccurate search token in the current search query; identifying related tokens from a query log based upon previous search queries associated with the search session; comparing the potentially inaccurate search token to the related tokens to determine whether the potentially inaccurate search token is included in the related tokens; if the potentially inaccurate search token is not included in the related tokens, identifying a replacement token from the related tokens; and substituting the potentially inaccurate search token in the current search query with the replacement token. Other embodiments of this aspect include corresponding systems, apparatus, and computer program products.</p>
<p id="p-0008" num="0007">Various optional advantages and features can include the identification of potentially incorrect search tokens based on a search session context. A replacement token can be substituted for the potentially inaccurate search token based on the search session context. Such contextual identification of potentially inaccurate search tokens and contextual revision of the search query can generate modified search queries that are directed to the user's current interest, thus improving the user experience.</p>
<p id="p-0009" num="0008">The details of one or more embodiments of the subject matter described in this specification are set forth in the accompanying drawings and the description below. Other features, aspects, and advantages of the subject matter will become apparent from the description, the drawings, and the claims.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram of an example online environment.</p>
<p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. 2</figref> is a block diagram of an example contextual query processing system.</p>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 3</figref> is a diagram identifying related tokens from previous search queries.</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 4</figref> depicts example screen shots of a search engine interface.</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 5</figref> is a flow diagram of a contextual query revision process.</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 6</figref> is a flow diagram of another contextual query revision process.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<p id="p-0016" num="0015">Like reference numbers and designations in the various drawings indicate like elements.</p>
<heading id="h-0005" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram of an example online environment <b>100</b>. The online environment <b>100</b> can facilitate the identification and serving of content items, e.g., web pages, advertisements, etc., to users. A computer network <b>110</b>, such as a local area network (LAN), wide area network (WAN), the Internet, or a combination thereof, connects advertisers <b>102</b><i>a </i>and <b>102</b><i>b</i>, a search engine <b>112</b>, publishers <b>106</b><i>a </i>and <b>106</b><i>b</i>, and user devices <b>108</b><i>a </i>and <b>108</b><i>b</i>. Example user devices <b>108</b> include personal computers, mobile communication devices, television set-top boxes, etc. Although only two advertisers (<b>102</b><i>a </i>and <b>102</b><i>b</i>), two publishers (<b>106</b><i>a </i>and <b>106</b><i>b</i>) and two user devices (<b>108</b><i>a </i>and <b>108</b><i>b</i>) are shown, the online environment <b>100</b> may include many thousands of advertisers, publishers and user devices.</p>
<p id="h-0006" num="0000">&#xa7;1.0 Content Search Processing</p>
<p id="p-0018" num="0017">The publishers <b>106</b><i>a </i>and <b>106</b><i>b </i>can include general content servers that receive requests for content (e.g., web pages or documents related to articles, discussion threads, music, video, graphics, other web page listings, information feeds, product reviews, etc.), and retrieve the requested content in response to the request. For example, content servers related to news content providers, retailers, independent blogs, social network sites, products for sale, or any other entity that provides content over the network <b>110</b> can be a publisher.</p>
<p id="p-0019" num="0018">A user device, such as user device <b>108</b><i>a</i>, can submit a query <b>109</b> to the search engine <b>112</b>, and search results <b>111</b> can be provided to the user device <b>108</b><i>a </i>in response to the query <b>109</b>. The search results <b>111</b> can include a link to web pages provided by the publishers <b>106</b><i>a </i>and <b>106</b><i>b. </i></p>
<p id="p-0020" num="0019">In some implementations, the query <b>109</b> can include one or more search tokens. A search token is a keyword or group of keywords submitted as part of a search query through a search engine that are used to retrieve responsive search results. For example, a user can search for a particular type of yellow flower with a long stem. The query submitted can be a search query for &#x201c;yellow gardenia.&#x201d; The search tokens for the search query are &#x201c;yellow&#x201d; and &#x201c;gardenia.&#x201d; Although the search tokens are illustrated as single words, a search token could include two or more words, depending on the query.</p>
<p id="p-0021" num="0020">To facilitate identification of the search results responsive to queries, the search engine <b>112</b> can index the content provided by the publishers <b>106</b> (e.g., an index of web pages) for later search and retrieval of search results that are relevant to the queries. An exemplary search engine <b>112</b> is described in S. Brin and L. Page, &#x201c;The Anatomy of a Large-Scale Hypertextual Search Engine,&#x201d; Seventh International World Wide Web Conference, Brisbane, Australia (1998) and in U.S. Pat. No. 6,285,999. Search results can include, for example, lists of web page titles, snippets of text extracted from those web pages, and hypertext links to those web pages, and may be grouped into a predetermined number (e.g., ten) of search results.</p>
<p id="p-0022" num="0021">Multiple search queries can be submitted to the search engine <b>112</b> in one search session. In some implementations, a search session can be defined by a period of time between queries. For example, if a particular user device <b>108</b><i>a </i>submits a query, a current search session can be initiated. The current search session can be terminated when the search engine <b>112</b> has not received further queries from the user for a preset period of time (e.g., 5-10 minutes). In other implementations, the search session can be defined by a user indicating the beginning and end of a search session (e.g., by logging into a search engine interface of the search engine <b>112</b> and logging out of a search engine interface). In still further implementations, the search session can be defined by a relationship between a newly received search query and previously received search queries from the same user. Other ways of identifying and tracking a search session can also be used.</p>
<p id="p-0023" num="0022">Users generally desire that the search queries result in the identification of search results that are most responsive to a user's interest. Often, an initial search query does not produce a search result that satisfies a user's interest, as indicated by the user submitting more queries targeting the same topic or subject. The initial query may contain inaccurate search tokens that may include misspelled words or misused words. Thus the initial query can be followed by subsequent queries during a search session that includes modified search tokens in the query, substituted search tokens, removed search tokens in the query, etc. These modified queries are submitted by the user as the user attempts to find search results that are more relevant to the user's interest.</p>
<p id="p-0024" num="0023">A search token input by the user can be inaccurate given the context of the search session. For example, where previous search queries during a search session include search tokens related to flowers and gardening, the search token &#x201c;flour,&#x201d; while spelled correctly, can nevertheless be inaccurate. A search token can also be inaccurate if the search token is misspelled, e.g., the term &#x201c;fluer&#x201d; may be entered instead of the term &#x201c;fleur.&#x201d;</p>
<p id="h-0007" num="0000">&#xa7;2.0 Contextual Query Revision</p>
<p id="p-0025" num="0024">In some implementations, the search engine <b>112</b> can include a contextual query processor <b>104</b> that can identify potentially inaccurate queries and suggest contextual modifications to the inaccurate queries. The contextual query processor <b>104</b> can identify a context of a search session from previous queries submitted by a user during the search session. The contextual query processor <b>104</b> can identify inaccurate search tokens in a current search query, and, based on the context of the search session in which the current search query is received, identify possible replacement tokens for the inaccurate search tokens. The processor <b>104</b> can determine which of the possible replacement tokens is the appropriate replacement token for the inaccurate search token based on the previous search queries submitted in the search session.</p>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. 2</figref> is a block diagram of an example contextual query processing system <b>200</b>. The system <b>200</b> can generate a modified query from a search query with an inaccurate search token. The modified search query is based on the context of the search session of the search query. The context of the search session can, for example, be identified from previous search queries submitted by a user during a search session. In some implementations, a current search query in addition to previous search queries received during a search session can also be used to identify a search session context. In some implementations, the contextual query processing system <b>200</b> can include a search interface <b>202</b>, a query analysis module <b>204</b>, and a replacement term analysis module <b>206</b>. The system <b>200</b> may be implemented as part of a search engine, or as a separate component, or as a system that communicates with a search engine.</p>
<p id="p-0027" num="0026">The system <b>200</b> receives a current search query during a search session and identifies potentially inaccurate search tokens from among the search tokens that comprise the current search query. The system <b>200</b> can then identify replacement tokens based upon the potentially inaccurate search tokens. The system <b>200</b> identifies from query logs a group of related tokens that are related to previous search queries in the search session by identifying terms related to the previous search tokens in the previous queries. If an identified replacement token is among the related tokens, a modified search query can be generated.</p>
<p id="p-0028" num="0027">In an implementation, the search interface <b>202</b> receives a current search query associated with a current search session. The current search query can include one or more current search tokens. For example, a user can submit queries searching for a particular type of yellow flower with a long stem. The first query submitted can be a search query for &#x201c;yellow gardenia,&#x201d; followed by a second search query for &#x201c;long stemmed fluer.&#x201d; Thus, the search tokens for the most current search query are &#x201c;long,&#x201d; &#x201c;stemmed,&#x201d; and &#x201c;fluer.&#x201d; The previous search tokens for the previous search query are &#x201c;yellow&#x201d; and &#x201c;gardenia.&#x201d;</p>
<p id="p-0029" num="0028">For the current search query, potentially inaccurate search tokens are identified. In some implementations, a potentially inaccurate search token is identified by identifying misspelled tokens. Additionally, in some implementations, a potentially inaccurate search token is identified by identifying potentially misused tokens. Replacement tokens can be identified for the potentially inaccurate tokens, and one of the replacement tokens can be selected based on a context defined by the search session for which the current query was received.</p>
<p id="h-0008" num="0000">&#xa7;2.1 Misspelled Tokens and Session Context Correction</p>
<p id="p-0030" num="0029">One method of identifying potentially inaccurate search tokens for a current query is to determine when a search token is misspelled. For example, in the current query for &#x201c;long stemmed fluer,&#x201d; the current search token &#x201c;fluer&#x201d; is a misspelled search token. Thus, the module <b>204</b> identifies the current search token &#x201c;fluer&#x201d; as a potentially inaccurate search token.</p>
<p id="p-0031" num="0030">The query analysis module <b>204</b> identifies replacement tokens based upon the potentially inaccurate search token. Although multiple methods may be available to identify a replacement token for a search token, in one implementation the module <b>204</b> accesses a set of possible replacement tokens directly from replacement token data <b>208</b>. The replacement tokens can be suggested replacements, e.g., spell corrections, for the inaccurate search token. For example, the tokens &#x201c;flier,&#x201d; &#x201c;flower,&#x201d; &#x201c;flour,&#x201d; and &#x201c;fleur&#x201d; may be identified as suggested replacements in the replacement token data <b>208</b> for the potentially inaccurate search token &#x201c;fluer.&#x201d;</p>
<p id="p-0032" num="0031">The replacement term analysis module <b>206</b> selects a replacement term for the potentially inaccurate search token. The selection can, for example, be based on context defined by the search session for which the current query was received. In some implementations, to determine the context for a search session, the module <b>206</b> identifies previous queries received during a search session and identifies previous search tokens from the previous queries. These previous search tokens can be used to identify related tokens that are related to the previous search queries submitted during the search session. For example, the previous search tokens for the search session can compared to a query log <b>210</b>. The query log <b>210</b> stores historical search queries from many other historical search sessions. The replacement term analysis module <b>206</b> can thus identify other search tokens used in similar search queries during similar search sessions as tokens that are related to the previous search tokens.</p>
<p id="p-0033" num="0032">For example, where the previous search tokens for a search session are &#x201c;yellow&#x201d; and &#x201c;gardenia,&#x201d; the module <b>206</b> may identify a group of related tokens for both previous search tokens from the query log <b>210</b>. Data in the query logs <b>210</b> that is gathered from many other sessions may indicate that tokens commonly associated with &#x201c;yellow&#x201d; include &#x201c;taxi,&#x201d; &#x201c;banana,&#x201d; and &#x201c;sun.&#x201d; Similarly, tokens commonly associated with &#x201c;gardenia&#x201d; may include &#x201c;plant,&#x201d; &#x201c;leaves,&#x201d; and &#x201c;flower.&#x201d; Thus, the tokens &#x201c;taxi,&#x201d; &#x201c;banana,&#x201d; and &#x201c;sun&#x201d; are identified as related tokens for the previous search token &#x201c;yellow.&#x201d; Likewise, the tokens &#x201c;plant,&#x201d; &#x201c;leaves,&#x201d; and &#x201c;flower&#x201d; are identified as related tokens for the previous search query &#x201c;gardenia.&#x201d; The module <b>206</b> accesses such data and generates groups of related tokens from the query logs <b>210</b>.</p>
<p id="p-0034" num="0033">Once the suggested replacement tokens from the replacement token data <b>208</b> and the related tokens are identified, the replacement term analysis module <b>206</b> can then determine which replacement tokens for the potentially incorrect search token is present in the group of related tokens, and which replacement tokens among those present is estimated to be the best replacement token. The module <b>206</b> compares the replacement tokens for the potentially inaccurate search token to the group of related tokens identified by the module <b>206</b>. If the group of related tokens includes any of the replacement tokens, the module <b>206</b> can generate a modified search query to include the replacement token in place of the potentially inaccurate search token.</p>
<p id="p-0035" num="0034">For example, the module <b>204</b> has identified &#x201c;fluer&#x201d; as a misspelled word, and thus it is the only potentially inaccurate search token from the current search query &#x201c;long stemmed fluer.&#x201d; The module <b>204</b> also identified the words &#x201c;flier,&#x201d; &#x201c;flower,&#x201d; &#x201c;flour,&#x201d; and &#x201c;fleur&#x201d; as possible replacement tokens, e.g., spelling corrections, for the potentially inaccurate token. The group of related tokens identified by the module <b>206</b> includes the terms &#x201c;taxi,&#x201d; &#x201c;banana,&#x201d; &#x201c;sun,&#x201d; &#x201c;plant,&#x201d; &#x201c;leaves,&#x201d; and &#x201c;flower.&#x201d; The module <b>206</b> may thus determine that the replacement token &#x201c;flower&#x201d; is among the group of related tokens. Accordingly, the module <b>206</b> generates a modified query for &#x201c;long stemmed flower&#x201d; that takes the place of the current search query for &#x201c;long stemmed fluer.&#x201d;</p>
<p id="p-0036" num="0035">If the group of related tokens identified by the module <b>206</b> includes more than one possible replacement token, e.g., the terms &#x201c;taxi,&#x201d; &#x201c;banana,&#x201d; &#x201c;sun,&#x201d; &#x201c;plant,&#x201d; &#x201c;leaves,&#x201d; &#x201c;flair,&#x201d; and &#x201c;flower,&#x201d; then the selection can, for example, be based on additional context information defined by the search session. For example, the tokens of the current query of &#x201c;long stemmed fluer&#x201d; and previous queries of &#x201c;yellow gardenia&#x201d; and &#x201c;long stemmed bulbs&#x201d; can be processed to determine a subject weight. For example, each token can have associated weights for various subjects, e.g., subjects such as history, gardening, sports, news, entertainment, etc. The weights of the search tokens can be summed for each subject, and the highest summed weight can indicate a subject context for the search session. As subject weights of the tokens &#x201c;gardenia,&#x201d; &#x201c;stemmed,&#x201d; and &#x201c;bulbs&#x201d; may primarily indicate a gardening subject matter, the context of the search session may be determined to be a gardening context. Accordingly, the token &#x201c;flower&#x201d; may be selected to replace the token &#x201c;fluer&#x201d; as the token &#x201c;flower&#x201d; may have the highest subject gardening subject weight among the replacement tokens.</p>
<p id="h-0009" num="0000">&#xa7;2.2 Misused Tokens and Session Context Correction</p>
<p id="p-0037" num="0036">In another implementation, the module <b>204</b> can identify a potentially inaccurate search token by comparing the current search tokens from the current search query to the previous search tokens from one or more previous search queries received during the search session. Through such a comparison, the module <b>204</b> may determine that the sequence of search queries in the search session is an attempt to refine the previous search query by substituting or adding one or more tokens in the search query. Accordingly, the substituted or added search token can be identified as the potentially inaccurate search token.</p>
<p id="p-0038" num="0037">For example, if the first search query includes the search tokens &#x201c;long stemmed bulbs,&#x201d; a second query includes the search tokens &#x201c;long stemmed roses&#x201d; and a current search query includes the search tokens &#x201c;long stemmed flour,&#x201d; the sequence of the search queries indicates that the term &#x201c;bulbs&#x201d; was replaced by &#x201c;flour&#x201d; in the current search query. Thus the module <b>204</b> may determine that the search token &#x201c;flour&#x201d; is a potentially inaccurate search token, even though &#x201c;flour&#x201d; is not a misspelled word.</p>
<p id="p-0039" num="0038">In a variation of this implementation, the tokens of the current query of &#x201c;long stemmed flour&#x201d; and previous queries of &#x201c;long stemmed bulbs&#x201d; and &#x201c;long stemmed roses&#x201d; can be processed to determine a subject weight. For example, each token can have associated weights for various subjects, e.g., subjects such as history, gardening, sports, news, entertainment, etc. The weights of the search tokens can be summed for each subject, and the highest summed weight can indicate a subject context for the search session. For example, the summed weights for the tokens &#x201c;stemmed,&#x201d; &#x201c;bulbs&#x201d; and &#x201c;roses&#x201d; may result in the highest weight being in the gardening subject. Accordingly, the token &#x201c;flour,&#x201d; which is the changed token from a previous query, can be determined to be potentially incorrect as the token has very low weight related to the subject of gardening. Conversely, if the current query is &#x201c;long stemmed tulips,&#x201d; the token &#x201c;tulips&#x201d; may be determined to be a correct token.</p>
<p id="p-0040" num="0039">The module <b>206</b> can then identify a group of related tokens based on the context of the search session, e.g., other tokens that are related to previous search tokens received during the search session. For example, the previous search tokens for the search session can compared to a query log <b>210</b>. The module <b>206</b> can then identify a group of related tokens based on the previous search tokens. Thus, if the previous search token &#x201c;bulb&#x201d; was replaced by the potentially inaccurate token &#x201c;flour,&#x201d; the module <b>206</b> can identify a group of terms related to the previous search token &#x201c;bulb.&#x201d; The related tokens could include terms commonly associated with &#x201c;bulb,&#x201d; e.g., &#x201c;rose,&#x201d; &#x201c;flower.&#x201d;</p>
<p id="p-0041" num="0040">The module <b>204</b> can then identify the replacement token for the potentially inaccurate search token from the related tokens identified by the module <b>206</b>. In some implementations, the module <b>206</b> can use a distance vector to identify the related token that is most similar to the potentially inaccurate term. For example, the module <b>204</b> can use a distance vector to determine that from a list of related tokens that includes &#x201c;rose&#x201d; and &#x201c;flower,&#x201d; the potentially inaccurate token &#x201c;flour&#x201d; is most similar to the related token &#x201c;flower.&#x201d; Other similarity techniques can also be used.</p>
<p id="p-0042" num="0041">The module <b>206</b> can generate a modified search query to include the replacement token in place of the potentially inaccurate search token. For example, if &#x201c;flower&#x201d; is identified as the related token most similar to the potentially inaccurate search token &#x201c;flour,&#x201d; then the search token &#x201c;flour&#x201d; is replaced in the current search query &#x201c;long stemmed flour&#x201d; with the search token &#x201c;flower.&#x201d; Thus, the modified search query is &#x201c;long stemmed flower.&#x201d;</p>
<p id="p-0043" num="0042">In another implementation, possible replacement tokens can be identified by identifying token pairs that are commonly confused tokens, e.g., &#x201c;principal&#x201d; and &#x201c;principle,&#x201d; &#x201c;fair&#x201d; and &#x201c;fare,&#x201d; &#x201c;fair&#x201d; and &#x201c;flair,&#x201d; etc. Such identification of commonly confused token pairs can be determined, for example, using clustering techniques to identify token revisions that occur at statistically significant rates, e.g., statistically confused tokens, or based on language models, such as homograph pairs, or other language rules of statistical data. A replacement token can then be selected from the possible replacement tokens in a manner similar to the misspelled token analysis process of Section 2.1 above, e.g., by comparing the possible replacement tokens to the related tokens.</p>
<p id="p-0044" num="0043">The modules <b>204</b> and <b>206</b> can be realized by instructions that upon execution cause one or more processing devices to carry out the processes and functions described above. Such instructions can, for example, comprise interpreted instructions, such as script instructions, e.g., JavaScript or ECMAScript instructions, or executable code, or other instructions stored in a computer readable medium. The modules <b>204</b> and <b>206</b> can be implemented separately, or can be implemented as a single software entity. The modules <b>204</b> and <b>206</b> can also be distributively implemented over a network, such as a server farm, or can be implemented in a single computer device, or can be implemented as part of the search engine <b>112</b>.</p>
<p id="h-0010" num="0000">&#xa7;3.0 Example Identification of Related Tokens</p>
<p id="p-0045" num="0044"><figref idref="DRAWINGS">FIG. 3</figref> is a diagram identifying related tokens from previous search queries <b>300</b>. The related tokens <b>320</b> identified in the diagram <b>300</b> can be retrieved from the query logs <b>210</b>. The related tokens <b>320</b> include search terms that are related to a previous query <b>324</b> in the context of a search session that includes the previous search query <b>324</b> and a current search query <b>325</b>. As will be explained below, the search tokens ST<b>1</b>-ST<b>6</b> are identified as related tokens <b>320</b> related to the previous search query <b>324</b>.</p>
<p id="p-0046" num="0045">In some implementations, the related tokens are the search tokens in a token cluster that includes the search tokens from the previous search query <b>324</b>. A token cluster can be a group of related tokens that are associated with each other. The search tokens included in a token cluster are identified from query logs as tokens that share a common trait&#x2014;e.g., are statistically related to each other, such as the token &#x201c;stemmed&#x201d; often being found to precede the term &#x201c;roses&#x201d; in queries; or the term &#x201c;green&#x201d; often being found to precede the term &#x201c;giant.&#x201d; Such clusters can be identified by, for example, k-means clustering techniques, c-means clustering, quality threshold clustering, etc. Although example clusters of only two terms have been described, the token clusters can include many more tokens than just two tokens.</p>
<p id="p-0047" num="0046">In another implementation, search tokens are included in a token cluster if the search token is included in excess of a threshold percentage of search queries containing other search tokens in the token cluster. For example, a 50% threshold requires that the search token must be included in at least half the search queries including at least one of the other search tokens in the cluster. The threshold can be set to some value that indicates a likelihood that the search tokens are related to each other.</p>
<p id="p-0048" num="0047">For example, the data from the historical search queries <b>310</b> stored in the query log <b>210</b> is represented in the diagram <b>300</b>, and includes six historical search queries, e.g. Query <b>301</b>-Query <b>306</b>, and the search tokens that are used in each query, e.g. ST<b>1</b>-ST<b>7</b>. The search token ST<b>1</b> is among the search tokens in four of the six of the historical search queries, e.g. Query <b>301</b>, <b>302</b>, <b>304</b>, and <b>305</b>. Similarly, the inclusion of the search tokens ST<b>2</b>-ST<b>7</b> in the historical search queries is:</p>
<p id="p-0049" num="0048">
<tables id="TABLE-US-00001" num="00001">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="3">
<colspec colname="1" colwidth="70pt" align="left"/>
<colspec colname="2" colwidth="91pt" align="left"/>
<colspec colname="3" colwidth="56pt" align="left"/>
<thead>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
<row>
<entry>Search Token</entry>
<entry>Historical Search Queries </entry>
<entry>% Inclusion</entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry>ST1:</entry>
<entry>301, 302, 304, 305</entry>
<entry>4/6 = 67%</entry>
</row>
<row>
<entry>ST2:</entry>
<entry>301, 302, 303</entry>
<entry>3/6 = 50%</entry>
</row>
<row>
<entry>ST3:</entry>
<entry>303, 304, 305, 306</entry>
<entry>4/6 = 67%</entry>
</row>
<row>
<entry>ST4:</entry>
<entry>302, 305, 306</entry>
<entry>3/6 = 50%</entry>
</row>
<row>
<entry>ST5:</entry>
<entry>301, 303, 306</entry>
<entry>3/6 = 50%</entry>
</row>
<row>
<entry>ST6:</entry>
<entry>303, 304, 305, 306</entry>
<entry>4/6 = 67%</entry>
</row>
<row>
<entry>ST7:</entry>
<entry>304</entry>
<entry>1/6 = 16%</entry>
</row>
<row>
<entry namest="1" nameend="3" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0050" num="0049">The search token ST<b>7</b> is included in less than the threshold percentage, e.g. 50%, of search queries involving other search tokens from the cluster. However, the tokens ST<b>1</b>-ST<b>6</b> are included in the token cluster because they all are included in at least 50% of the search queries involving other search tokens in the token cluster. Thus, the group of related tokens <b>320</b> includes all of the search tokens in the token cluster, e.g. search tokens ST<b>1</b>-ST<b>6</b>.</p>
<p id="p-0051" num="0050">Other token clustering or grouping processes can also be used to identify related search query tokens.</p>
<p id="p-0052" num="0051"><figref idref="DRAWINGS">FIG. 4</figref> depicts example screen shots <b>406</b> and <b>408</b> of a search engine interface. The original query <b>402</b> submitted to the search engine in the interface of screen shot <b>406</b> can be modified by the system <b>200</b> of <figref idref="DRAWINGS">FIG. 2</figref>. The search engine can process the modified query <b>404</b> in place of the original query <b>402</b>, and search results responsive to the modified query <b>404</b> are presented. In some implementations, a link <b>405</b> may be provided to search results responsive to the original query before it was modified.</p>
<p id="p-0053" num="0052">For example, the original query submitted may have been for &#x201c;long stemmed flour.&#x201d; After it is determined that the search token &#x201c;flour&#x201d; is inaccurate, replacement search tokens may be identified. The term &#x201c;flower&#x201d; is identified as a related token as well as a replacement search token, and thus the search token &#x201c;flour&#x201d; in the original query is replaced with &#x201c;flower&#x201d; in the modified search query. The screen shot <b>408</b> of the interface also includes the link <b>405</b>, which would process the original query for &#x201c;long stemmed flour&#x201d; rather than the modified query for &#x201c;long stemmed flower.&#x201d;</p>
<p id="h-0011" num="0000">&#xa7;4.0 Example Contextual Revision Processes</p>
<p id="p-0054" num="0053"><figref idref="DRAWINGS">FIG. 5</figref> is a flow diagram of a contextual query revision process <b>500</b>. The process <b>500</b> can, for example, be implemented by the system <b>200</b> of <figref idref="DRAWINGS">FIG. 2</figref>.</p>
<p id="p-0055" num="0054">Stage <b>502</b> receives a current search query during a search session. For example, the search interface <b>202</b> may receive a query including the search tokens &#x201c;long stemmed flour,&#x201d; and this query can be provided to the query analysis module <b>204</b>. Another example is a search query for &#x201c;long stemmed fluer.&#x201d;</p>
<p id="p-0056" num="0055">Stage <b>504</b> identifies a potentially inaccurate search token from among the one or more current search tokens. For example, the query analysis module <b>204</b> can identify &#x201c;fluer&#x201d; as the potentially inaccurate search token because the term is misspelled. In another example, the module <b>204</b> can identify &#x201c;flour&#x201d; as the potentially inaccurate search token because from the search query for &#x201c;long stemmed flour&#x201d; because the previous search queries included search tokens related to flowers and gardening, e.g. &#x201c;long stemmed bulb,&#x201d; &#x201c;long stemmed rose,&#x201d; where the search tokens &#x201c;long&#x201d; and &#x201c;stemmed&#x201d; remained the same and the last search token was substituted each time.</p>
<p id="p-0057" num="0056">Stage <b>506</b> identifies a replacement token based upon the potentially inaccurate search token. For example, the module <b>204</b> can identify different possible replacement tokens from the replacement token data <b>208</b> for the potentially inaccurate search token of &#x201c;fluer,&#x201d; including the replacement tokens &#x201c;flour,&#x201d; &#x201c;flower,&#x201d; &#x201c;flier,&#x201d; and &#x201c;flurry.&#x201d; The module <b>204</b> can also identify the replacement tokens &#x201c;flower,&#x201d; &#x201c;four,&#x201d; and &#x201c;fore&#x201d; as possible replacement tokens from the data <b>208</b> for the potentially inaccurate search token &#x201c;flour.&#x201d;</p>
<p id="p-0058" num="0057">Stage <b>508</b> identifies a group of related tokens from a query log. For example, the replacement term analysis module <b>206</b> can identify a group of related tokens from the query log <b>210</b> that are related to previous search queries during the same search session. If &#x201c;petal&#x201d; was a search token in a previous search query, the module <b>206</b> can identify from the query log <b>210</b> terms that are related to the token &#x201c;petal.&#x201d; The related tokens could include &#x201c;bulb,&#x201d; &#x201c;rose,&#x201d; &#x201c;flower,&#x201d; etc. If &#x201c;long stemmed bulb&#x201d; or &#x201c;long stemmed rose&#x201d; was the previous search query, the module <b>206</b> can identify from the log <b>210</b> terms related to the previous search tokens in the previous search queries. The search token &#x201c;flower&#x201d; can be identified as a term related to both the search token &#x201c;bulb&#x201d; and the search token &#x201c;rose.&#x201d;</p>
<p id="p-0059" num="0058">Stage <b>510</b> determines whether the replacement token for the potentially inaccurate search tokens is among the group of related tokens. For example, the module <b>206</b> determines that one of the replacement tokens, &#x201c;flower,&#x201d; is included in the group of related tokens related to the search query &#x201c;long stemmed fluer.&#x201d; Similarly, the module <b>206</b> determines that the replacement token &#x201c;flower&#x201d; is included among the group of related token related to the search query &#x201c;long stemmed flour.&#x201d;</p>
<p id="p-0060" num="0059">If stage <b>510</b> determines that the replacement token is among the group of related tokens, stage <b>512</b> modifies the current search query. For example, where stage <b>510</b> determines that the replacement token &#x201c;flower&#x201d; is also among the related tokens, the potentially inaccurate search token &#x201c;fluer&#x201d; is replaced with the replacement token &#x201c;flower.&#x201d; Thus, the current search query is modified to &#x201c;long stemmed flower&#x201d; instead of &#x201c;long stemmed fluer.&#x201d; Similarly, where stage <b>510</b> determines that the replacement token &#x201c;flower&#x201d; is among the related tokens related to the search query &#x201c;long stemmed flour,&#x201d; the potentially inaccurate search token &#x201c;flour&#x201d; is replaced with the replacement token &#x201c;flower.&#x201d; Thus, the current search query is modified to &#x201c;long stemmed flower&#x201d; instead of &#x201c;long stemmed flour.&#x201d;</p>
<p id="p-0061" num="0060">If the replacement token is not among the group of related tokens, or after the current search query has been modified, stage <b>514</b> serves results associated with the current search query. For example, if stage <b>510</b> determines that &#x201c;flower&#x201d; is among the group of related tokens, then search results responsive to a query for &#x201c;long stemmed flower&#x201d; are served. However, if stage <b>506</b> determines that &#x201c;flower&#x201d; is not a replacement token, or if stage <b>508</b> determines that &#x201c;flower&#x201d; was not a related token, then stage <b>510</b> would subsequently determine that a replacement token is not among the group of related tokens. Thus, search results responsive to a query for &#x201c;long stemmed flour&#x201d; would be served.</p>
<p id="p-0062" num="0061"><figref idref="DRAWINGS">FIG. 6</figref> is a flow diagram of a contextual query revision process <b>600</b>. The process <b>600</b> can, for example, be implemented by the system <b>200</b> of <figref idref="DRAWINGS">FIG. 2</figref>.</p>
<p id="p-0063" num="0062">Stage <b>602</b> receives a current search query. For example, the search interface <b>202</b> may receive a query including the search tokens &#x201c;long stemmed flour,&#x201d; and this query can be provided to the query analysis module <b>204</b>.</p>
<p id="p-0064" num="0063">Stage <b>604</b> identifies a group of related tokens. The identified group of related tokens can be search tokens related to previous search queries during the search session. For example, if &#x201c;long stem rose&#x201d; was the previous search query during the search session, the previous search tokens are &#x201c;long,&#x201d; &#x201c;stem,&#x201d; and &#x201c;rose.&#x201d; The module <b>206</b> can identify from the query log <b>210</b> the search tokens that are related to the previous search tokens in historical search queries, i.e., the different search tokens submitted with the previous search tokens &#x201c;long,&#x201d; &#x201c;stem&#x201d; and &#x201c;rose.&#x201d; The related tokens could include terms commonly associated with &#x201c;long&#x201d;, e.g., &#x201c;wide,&#x201d; &#x201c;heavy,&#x201d; terms commonly associated with &#x201c;stem,&#x201d; e.g. &#x201c;root,&#x201d; &#x201c;leaves,&#x201d; and terms commonly associated with &#x201c;rose,&#x201d; e.g. &#x201c;yellow,&#x201d; &#x201c;flower.&#x201d;</p>
<p id="p-0065" num="0064">Stage <b>606</b> identifies a current search token from the current search query. For example, the query analysis module <b>204</b> can parse the current search query &#x201c;long stemmed flour&#x201d; and identify the search tokens &#x201c;long,&#x201d; &#x201c;stemmed,&#x201d; and &#x201c;flour.&#x201d;</p>
<p id="p-0066" num="0065">Stage <b>608</b> determines whether the current search token exists in the group of related tokens. For example, where the current search token is &#x201c;flour,&#x201d; the current search token does not exist in the group of related tokens. Thus, where the current search token is &#x201c;flour,&#x201d; the replacement term analysis module <b>206</b> would determine that the current search token is not found in the related tokens.</p>
<p id="p-0067" num="0066">If stage <b>608</b> determines that the current search token exists in the group of related tokens, stage <b>610</b> serves results associated with the current search query. For example, if stage <b>608</b> determines that the token &#x201c;flour&#x201d; existed in the related tokens, then stage <b>610</b> serves results responsive to the search query &#x201c;long stemmed flour.&#x201d;</p>
<p id="p-0068" num="0067">If the current search token does not exist in the group of related tokens, stage <b>612</b> identifies a potential replacement token based upon the current search token. The replacement token is a member of the group of related tokens. For example, if stage <b>608</b> determines that &#x201c;flour&#x201d; does not exist in the related tokens, module <b>204</b> identifies from the replacement token data <b>208</b> potential replacement tokens based upon the current search token of &#x201c;flour.&#x201d; The tokens &#x201c;flower,&#x201d; &#x201c;flier,&#x201d; and &#x201c;four&#x201d; may be included in the replacement token data <b>208</b> as potential replacement tokens based for &#x201c;flour.&#x201d; Because &#x201c;flower&#x201d; is both a potential replacement token and a member of the related tokens, &#x201c;flower&#x201d; is identified by the module <b>206</b> as the replacement token.</p>
<p id="p-0069" num="0068">Stage <b>614</b> generates a modified search query comprising the replacement token. For example, module <b>206</b> generates the modified query &#x201c;long stemmed flower&#x201d; where &#x201c;flower&#x201d; is identified as the replacement token for &#x201c;flour.&#x201d;</p>
<p id="p-0070" num="0069">Embodiments of the subject matter and the functional operations described in this specification can be implemented in digital electronic circuitry, or in computer software, firmware, or hardware, including the structures disclosed in this specification and their structural equivalents, or in combinations of one or more of them. Embodiments of the subject matter described in this specification can be implemented as one or more computer program products, i.e., one or more modules of computer program instructions encoded on a tangible program carrier for execution by, or to control the operation of, data processing apparatus. The tangible program carrier can be a propagated signal or a computer readable medium. The propagated signal is an artificially generated signal, e.g., a machine generated electrical, optical, or electromagnetic signal, that is generated to encode information for transmission to suitable receiver apparatus for execution by a computer. The computer readable medium can be a machine readable storage device, a machine readable storage substrate, a memory device, a composition of matter effecting a machine readable propagated signal, or a combination of one or more of them.</p>
<p id="p-0071" num="0070">The term &#x201c;data processing apparatus&#x201d; encompasses all apparatus, devices, and machines for processing data, including by way of example a programmable processor, a computer, or multiple processors or computers. The apparatus can include, in addition to hardware, code that creates an execution environment for the computer program in question, e.g., code that constitutes processor firmware, a protocol stack, a database management system, an operating system, or a combination of one or more of them.</p>
<p id="p-0072" num="0071">A computer program (also known as a program, software, software application, script, or code) can be written in any form of programming language, including compiled or interpreted languages, or declarative or procedural languages, and it can be deployed in any form, including as a stand alone program or as a module, component, subroutine, or other unit suitable for use in a computing environment. A computer program does not necessarily correspond to a file in a file system. A program can be stored in a portion of a file that holds other programs or data (e.g., one or more scripts stored in a markup language document), in a single file dedicated to the program in question, or in multiple coordinated files (e.g., files that store one or more modules, sub programs, or portions of code). A computer program can be deployed to be executed on one computer or on multiple computers that are located at one site or distributed across multiple sites and interconnected by a communication network.</p>
<p id="p-0073" num="0072">Additionally, the logic flows and structure block diagrams described in this patent document, which describe particular methods and/or corresponding acts in support of steps and corresponding functions in support of disclosed structural means, may also be utilized to implement corresponding software structures and algorithms, and equivalents thereof. The processes and logic flows described in this specification can be performed by one or more programmable processors executing one or more computer programs to perform functions by operating on input data and generating output. The processes and logic flows can also be performed by, and apparatus can also be implemented as, special purpose logic circuitry, e.g., an FPGA (field programmable gate array) or an ASIC (application specific integrated circuit).</p>
<p id="p-0074" num="0073">Processors suitable for the execution of a computer program include, by way of example, both general and special purpose microprocessors, and any one or more processors of any kind of digital computer. Generally, a processor will receive instructions and data from a read only memory or a random access memory or both. The essential elements of a computer are a processor for performing instructions and one or more memory devices for storing instructions and data. Generally, a computer will also include, or be operatively coupled to receive data from or transfer data to, or both, one or more mass storage devices for storing data, e.g., magnetic, magneto optical disks, or optical disks. However, a computer need not have such devices. Moreover, a computer can be embedded in another device, e.g., a mobile telephone, a personal digital assistant (PDA), a mobile audio or video player, a game console, a Global Positioning System (GPS) receiver, to name just a few.</p>
<p id="p-0075" num="0074">Computer readable media suitable for storing computer program instructions and data include all forms of non volatile memory, media and memory devices, including by way of example semiconductor memory devices, e.g., EPROM, EEPROM, and flash memory devices; magnetic disks, e.g., internal hard disks or removable disks; magneto optical disks; and CD ROM and DVD ROM disks. The processor and the memory can be supplemented by, or incorporated in, special purpose logic circuitry.</p>
<p id="p-0076" num="0075">To provide for interaction with a user, embodiments of the subject matter described in this specification can be implemented on a computer having a display device, e.g., a CRT (cathode ray tube) or LCD (liquid crystal display) monitor, for displaying information to the user and a keyboard and a pointing device, e.g., a mouse or a trackball, by which the user can provide input to the computer. Other kinds of devices can be used to provide for interaction with a user as well; for example, feedback provided to the user can be any form of sensory feedback, e.g., visual feedback, auditory feedback, or tactile feedback; and input from the user can be received in any form, including acoustic, speech, or tactile input.</p>
<p id="p-0077" num="0076">Embodiments of the subject matter described in this specification can be implemented in a computing system that includes a back end component, e.g., as a data server, or that includes a middleware component, e.g., an application server, or that includes a front end component, e.g., a client computer having a graphical user interface or a Web browser through which a user can interact with an implementation of the subject matter described is this specification, or any combination of one or more such back end, middleware, or front end components. The components of the system can be interconnected by any form or medium of digital data communication, e.g., a communication network. Examples of communication networks include a local area network (&#x201c;LAN&#x201d;) and a wide area network (&#x201c;WAN&#x201d;), e.g., the Internet.</p>
<p id="p-0078" num="0077">The computing system can include clients and servers. A client and server are generally remote from each other and typically interact through a communication network. The relationship of client and server arises by virtue of computer programs running on the respective computers and having a client server relationship to each other.</p>
<p id="p-0079" num="0078">While this specification contains many specific implementation details, these should not be construed as limitations on the scope of any invention or of what may be claimed, but rather as descriptions of features that may be specific to particular embodiments of particular inventions. Certain features that are described in this specification in the context of separate embodiments can also be implemented in combination in a single embodiment. Conversely, various features that are described in the context of a single embodiment can also be implemented in multiple embodiments separately or in any suitable subcombination. Moreover, although features may be described above as acting in certain combinations and even initially claimed as such, one or more features from a claimed combination can in some cases be excised from the combination, and the claimed combination may be directed to a subcombination or variation of a subcombination.</p>
<p id="p-0080" num="0079">Similarly, while operations are depicted in the drawings in a particular order, this should not be understood as requiring that such operations be performed in the particular order shown or in sequential order, or that all illustrated operations be performed, to achieve desirable results. In certain circumstances, multitasking and parallel processing may be advantageous. Moreover, the separation of various system components in the embodiments described above should not be understood as requiring such separation in all embodiments, and it should be understood that the described program components and systems can generally be integrated together in a single software product or packaged into multiple software products.</p>
<p id="p-0081" num="0080">Particular embodiments of the subject matter described in this specification have been described. Other embodiments are within the scope of the following claims. For example, the actions recited in the claims can be performed in a different order and still achieve desirable results. As one example, the processes depicted in the accompanying figures do not necessarily require the particular order shown, or sequential order, to achieve desirable results. In certain implementations, multitasking and parallel processing may be advantageous.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method performed by one or more computers, the method comprising:
<claim-text>receiving, during a current search session and from a particular user of the current search session, a current search query that includes one or more search tokens, the current search query being received subsequent to receipt of one or more previous search queries that were received during the current search session and from the particular user;</claim-text>
<claim-text>determining, by the one or more computers and in response to receiving the current search query, that at least one of the one or more search tokens in the current search query is a potentially inaccurate token, the determination being based on the at least one of the one or more search tokens not being included in the previous search queries that were received during the current search session and from the particular user; and</claim-text>
<claim-text>generating, by the one or more computers, a modified search query in which the potentially inaccurate token is replaced with a replacement token, the replacement token being a token that is included in a set of related tokens for the previous search queries.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>clustering search tokens for the previous search queries into token clusters; and</claim-text>
<claim-text>selecting the set of related tokens for the previous search queries, the set of related tokens being search tokens that belong to a same token cluster.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00002">claim 2</claim-ref>, further comprising:
<claim-text>determining a previous search token from the previous search queries that was replaced by the potentially inaccurate token; and</claim-text>
<claim-text>selecting, as the set of related tokens, a set of search tokens that are included in a same token cluster as the previous search token.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00003">claim 3</claim-ref>, further comprising selecting, as the replacement token, a related token from the set of related tokens based on a distance vector between the potentially inaccurate token and the related token.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00003">claim 3</claim-ref>, further comprising selecting, as the replacement token, a related token from the set of related tokens based on a distance vector between the previous search token and the related token.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00003">claim 3</claim-ref>, further comprising:
<claim-text>determining a context for the current search session based on subject weights for the current search query and subject weights for the previous search queries; and</claim-text>
<claim-text>selecting, as the replacement token, the related token having a highest subject weight for the context.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein selecting, as the set of related tokens, a set of search tokens that are included in a same token cluster as the previous search token comprises selecting, as the set of related tokens, a set of search tokens that are included in at least a threshold portion of the previous search queries that include other search tokens from the same token cluster.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>determining a context for the current search session based on subject weights for the current search query and subject weights for the previous search queries; and</claim-text>
<claim-text>selecting, as the replacement token and from the set of related tokens, a search token having a highest subject weight for the context.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising selecting, as the replacement token and from the set of related tokens, a search token that has been previously selected as the replacement token for the potentially inaccurate token.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising retrieving search results responsive to the modified search query.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. A system comprising:
<claim-text>a data store storing a query log that includes previous search queries that were received during a current search session; and</claim-text>
<claim-text>data processing apparatus including one or more processors configured to interact with the data store and to perform actions including:
<claim-text>receiving, during the current search session and from a particular user of the current search session, a current search query that includes one or more search tokens, the current search query being received subsequent to receipt of one or more previous search queries that were received during the current search session and from the particular user;</claim-text>
<claim-text>determining, in response to receiving the current search query, that at least one of the one or more search tokens in the current search query is a potentially inaccurate token, the determination being based on the at least one of the one or more search tokens not being included in the previous search queries that were received during the current search session and from the particular user; and</claim-text>
<claim-text>generating a modified search query in which the potentially inaccurate token is replaced with a replacement token, the replacement token being a token that is included in a set of related tokens for the previous search queries.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The system of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the one or more processors are further configured to perform actions including:
<claim-text>clustering search tokens for the previous search queries into token clusters; and</claim-text>
<claim-text>selecting the set of related tokens for the previous search queries, the set of related tokens being search tokens that belong to a same token cluster.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The system of <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein the one or more processors are further configured to perform actions including:
<claim-text>determining a previous search token from the previous search queries that was replaced by the potentially inaccurate token; and</claim-text>
<claim-text>selecting, as the set of related tokens, a set of search tokens that are included in a same token cluster as the previous search token.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The system of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the one or more processors are further configured to perform actions including selecting, as the replacement token, a related token from the set of related tokens based on a distance vector between the potentially inaccurate token and the related token.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The system of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the one or more processors are further configured to perform actions including selecting, as the replacement token, a related token from the set of related tokens based on a distance vector between the previous search token and the related token.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The system of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the one or more processors are further configured to perform actions including:
<claim-text>determining a context for the current search session based on subject weights for the current search query and subject weights for the previous search queries; and</claim-text>
<claim-text>selecting, as the replacement token, the related token having a highest subject weight for the context.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The system of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the one or more processors are further configured to perform actions including selecting, as the set of related tokens, a set of search tokens that are included in at least a threshold portion of the previous search queries that include other search tokens from the same token cluster.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The system of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the one or more processors are further configured to perform actions including:
<claim-text>determining a context for the current search session based on subject weights for the current search query and subject weights for the previous search queries; and</claim-text>
<claim-text>selecting, as the replacement token and from the set of related tokens, a search token having a highest subject weight for the context.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The system of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the one or more processors are further configured to perform actions including selecting, as the replacement token and from the set of related tokens, a search token that has been previously selected as the replacement token for the potentially inaccurate token.</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The system of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the one or more processors are further configured to perform actions including retrieving search results responsive to the modified search query. </claim-text>
</claim>
</claims>
</us-patent-grant>
