<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08627190-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08627190</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12750859</doc-number>
<date>20100331</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2009-088593</doc-number>
<date>20090401</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>509</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>11</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>714805</main-classification>
<further-classification>714  611</further-classification>
</classification-national>
<invention-title id="d2e71">Memory device, circuit board, liquid receptacle, method of controlling a nonvolatile data memory section, and system including a memory device detachably connectable to a host circuit</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>4967415</doc-number>
<kind>A</kind>
<name>Tanagawa</name>
<date>19901000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>5052002</doc-number>
<kind>A</kind>
<name>Tanagawa</name>
<date>19910900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>5784548</doc-number>
<kind>A</kind>
<name>Liong et al.</name>
<date>19980700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>714  624</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>5929885</doc-number>
<kind>A</kind>
<name>Nakajima et al.</name>
<date>19990700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>6408417</doc-number>
<kind>B1</kind>
<name>Moudgal et al.</name>
<date>20020600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>6749281</doc-number>
<kind>B2</kind>
<name>Asauchi</name>
<date>20040600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>6984012</doc-number>
<kind>B2</kind>
<name>Asauchi et al.</name>
<date>20060100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>7708395</doc-number>
<kind>B2</kind>
<name>Takimoto</name>
<date>20100500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>7747896</doc-number>
<kind>B1</kind>
<name>Rozas et al.</name>
<date>20100600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>714  612</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>7987384</doc-number>
<kind>B2</kind>
<name>Jacobi et al.</name>
<date>20110700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>714  624</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>2002/0170017</doc-number>
<kind>A1</kind>
<name>Busser</name>
<date>20021100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>714800</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>2007/0188539</doc-number>
<kind>A1</kind>
<name>Saruta</name>
<date>20070800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>2008/0235557</doc-number>
<kind>A1</kind>
<name>Kim</name>
<date>20080900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>2009/0132760</doc-number>
<kind>A1</kind>
<name>Flynn et al.</name>
<date>20090500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>711113</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>2009/0138772</doc-number>
<kind>A1</kind>
<name>Bertacco et al.</name>
<date>20090500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>714733</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>2009/0150721</doc-number>
<kind>A1</kind>
<name>Kochar et al.</name>
<date>20090600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>714  6</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>2009/0265602</doc-number>
<kind>A1</kind>
<name>Nakano</name>
<date>20091000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00018">
<document-id>
<country>US</country>
<doc-number>2010/0138691</doc-number>
<kind>A1</kind>
<name>Kumar et al.</name>
<date>20100600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>714  6</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00019">
<document-id>
<country>CN</country>
<doc-number>101100136</doc-number>
<kind>A</kind>
<date>20080100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00020">
<document-id>
<country>CN</country>
<doc-number>101271733</doc-number>
<kind>A</kind>
<date>20080900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00021">
<document-id>
<country>JP</country>
<doc-number>57-137948</doc-number>
<kind>A</kind>
<date>19820800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00022">
<document-id>
<country>JP</country>
<doc-number>59-104800</doc-number>
<kind>A</kind>
<date>19840600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00023">
<document-id>
<country>JP</country>
<doc-number>64-076596</doc-number>
<kind>A</kind>
<date>19890300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00024">
<document-id>
<country>JP</country>
<doc-number>02-068642</doc-number>
<date>19900300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00025">
<document-id>
<country>JP</country>
<doc-number>06-226989</doc-number>
<date>19940800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00026">
<document-id>
<country>JP</country>
<doc-number>06-303222</doc-number>
<date>19941000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00027">
<document-id>
<country>JP</country>
<doc-number>07-302231</doc-number>
<kind>A</kind>
<date>19951100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00028">
<document-id>
<country>JP</country>
<doc-number>2001-146030</doc-number>
<date>20010500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00029">
<document-id>
<country>JP</country>
<doc-number>2001-306411</doc-number>
<kind>A</kind>
<date>20011100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00030">
<document-id>
<country>JP</country>
<doc-number>2002-370383</doc-number>
<date>20021200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00031">
<document-id>
<country>JP</country>
<doc-number>2003-112431</doc-number>
<date>20030400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00032">
<document-id>
<country>JP</country>
<doc-number>2004-074464</doc-number>
<date>20040300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00033">
<document-id>
<country>JP</country>
<doc-number>2004-514184</doc-number>
<kind>A</kind>
<date>20040500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00034">
<document-id>
<country>JP</country>
<doc-number>2004-299405</doc-number>
<date>20041000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00035">
<document-id>
<country>JP</country>
<doc-number>2009-259225</doc-number>
<date>20091100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00036">
<document-id>
<country>WO</country>
<doc-number>WO01/13234</doc-number>
<kind>A1</kind>
<date>20010200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>9</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>714  61</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>714  611</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>714  623</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>714  624</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>714800</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>714805</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>17</number-of-drawing-sheets>
<number-of-figures>19</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20100257436</doc-number>
<kind>A1</kind>
<date>20101007</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Asauchi</last-name>
<first-name>Noboru</first-name>
<address>
<city>Nagano</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Asauchi</last-name>
<first-name>Noboru</first-name>
<address>
<city>Nagano</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Stroock &#x26; Stroock &#x26; Lavan LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Seiko Epson Corporation</orgname>
<role>03</role>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Duncan</last-name>
<first-name>Marc</first-name>
<department>2113</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A memory device electrically connectable to a host circuit receives, from the host circuit, data including a first actual data to be written into the first memory area; acquires first parity data associated with the first actual data; generates second actual data that is a copy of the first actual data, and second parity that is a copy of the first parity data; writes the first actual data and the first parity data into the first memory area, and writes the second actual data and the second parity data into the second memory area; and reads the first actual data, the first parity data, the second actual data, and the second parity data from the data memory section for transmission to the host circuit.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="226.48mm" wi="141.48mm" file="US08627190-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="165.69mm" wi="131.49mm" file="US08627190-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="245.11mm" wi="149.94mm" file="US08627190-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="103.46mm" wi="147.57mm" file="US08627190-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="226.06mm" wi="145.29mm" file="US08627190-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="225.21mm" wi="158.50mm" file="US08627190-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="244.52mm" wi="123.87mm" orientation="landscape" file="US08627190-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="216.83mm" wi="158.16mm" orientation="landscape" file="US08627190-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="235.12mm" wi="156.55mm" file="US08627190-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="229.45mm" wi="135.30mm" orientation="landscape" file="US08627190-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="236.81mm" wi="153.84mm" file="US08627190-20140107-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="226.99mm" wi="116.67mm" file="US08627190-20140107-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="235.71mm" wi="143.43mm" file="US08627190-20140107-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00013" num="00013">
<img id="EMI-D00013" he="172.97mm" wi="128.86mm" file="US08627190-20140107-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00014" num="00014">
<img id="EMI-D00014" he="219.88mm" wi="147.83mm" orientation="landscape" file="US08627190-20140107-D00014.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00015" num="00015">
<img id="EMI-D00015" he="233.93mm" wi="148.93mm" file="US08627190-20140107-D00015.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00016" num="00016">
<img id="EMI-D00016" he="230.63mm" wi="83.06mm" orientation="landscape" file="US08627190-20140107-D00016.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00017" num="00017">
<img id="EMI-D00017" he="244.18mm" wi="151.89mm" file="US08627190-20140107-D00017.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">The present application claims the priority based on Japanese Patent Application No. 2009-088593 filed on Apr. 1, 2009, the disclosure of which is hereby incorporated by reference in their entirety.</p>
<heading id="h-0002" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0003" num="0002">1. Field of the Invention</p>
<p id="p-0004" num="0003">The present invention relates to a memory device, to a circuit board, to a liquid receptacle, to a method of controlling a nonvolatile data memory section, and to a system including a memory device detachably connectable to a host circuit.</p>
<p id="p-0005" num="0004">2. Description of the Related Art</p>
<p id="p-0006" num="0005">An inkjet printer, which is one example of a liquid ejecting device, typically has one or more installed ink receptacles or ink containers which are detachable liquid receptacles. Some ink receptacles are provided with memory devices. The memory device stores information of various kinds, for example, the remaining ink level or the color of the ink in the ink receptacle. A control unit provided to the printer communicates with the memory device of the ink receptacle.</p>
<p id="p-0007" num="0006">JP-A 2002-370383</p>
<p id="p-0008" num="0007">JP-A 2004-299405</p>
<p id="p-0009" num="0008">JP-A 2001-146030</p>
<p id="p-0010" num="0009">JP-A 6-226989</p>
<p id="p-0011" num="0010">JP-A 2003-112431</p>
<p id="p-0012" num="0011">However, in conventional techniques, insufficient consideration is given to the issue of reduction of defects in a data memory section of a memory device. For example, when one of the memory cells in the data memory section, there is a possibility that the system including the printer and the ink receptacles does not operate properly. As a result, the yield rate of the memory device production is deteriorated. This issue is not limited to memory devices provided to ink receptacles, but is rather an issue common to all manner of memory devices that electrically connect to a host circuit.</p>
<heading id="h-0003" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0013" num="0012">An object of the present invention is to provide a technology for reducing failures with respect to memory devices that are electrically connected to a host circuit.</p>
<p id="p-0014" num="0013">The present invention is addressed to attaining the above objects at least in part according to the following aspects or modes of the present invention.</p>
<p id="p-0015" num="0014">A first aspect of the present invention is directed to memory device electrically connectable to a host circuit. The memory device includes a nonvolatile data memory section including a first memory area and a second memory area related to the first memory area; a data reception section that receives, from the host circuit, data including a first actual data to be written into the first memory area; a parity acquisition section that acquires first parity data associated with the first actual data; a data copy section that generates second actual data that is a copy of the first actual data, and second parity that is a copy of the first parity data; a read/write control section that writes the first actual data and the first parity data into the first memory area, and writes the second actual data and the second parity data into the second memory area; and a data transmission section that reads the first actual data, the first parity data, the second actual data, and the second parity data from the data memory section for transmission to the host circuit.</p>
<p id="p-0016" num="0015">With this arrangement, even if the first actual data includes faulty data changes due to errors in the data memory section, the host circuit is able to detect the faulty data changes using the first parity data, and to continue normal operation using the second actual data. Accordingly, even if the data memory device includes some errors, the memory device may be deemed sufficiently good, thereby reducing failures with respect to memory devices. In a second aspect of the present invention, the read/write control section writes the first actual data and the first parity data into the first memory area if no defect is detected at least in the first memory area, and the read/write control section writes the second actual data and the second parity data into the second memory area if no defect is detected at least in the second memory area.</p>
<p id="p-0017" num="0016">In a third aspect of the present invention, the first memory area has a first actual data area for writing of the first actual data, and a first parity area for writing of the first parity data, the read/write control section includes a first detection section that detects defects in the first memory area by determining consistency between actual data previously stored in the first actual data area and parity data previously stored in the first parity area, and the read/write control section writes the first actual data area and the first parity data into the first memory area only when no defect is detected in the first memory area. With this arrangement, it is possible to reducing possibility of writing to a memory area having faults.</p>
<p id="p-0018" num="0017">In a fourth aspect of the present invention, if a defect is detected in the first memory area, the read/write control section writes again to the first memory area the data that is previously stored in the first memory area, in place of the first actual data and the first parity data. With this arrangement, it is possible to maintain the data contents in the defective memory area and prevent further data changes.</p>
<p id="p-0019" num="0018">In a fifth aspect of the present invention, the second memory area has a second actual data area for writing of the second actual data, and a second parity area for writing of the second parity data, the read/write control section includes a second detection section that detects defects in the second memory area by determining consistency between actual data previously stored in the second actual data area and parity data previously stored in the second parity area, and the read/write control section writes the second actual data area and the second parity data into the second memory area only when no defect is detected in the second memory area. This arrangement further reduces the possibility of writing data into a defective memory area.</p>
<p id="p-0020" num="0019">In a sixth aspect of the present invention, if a defect is detected in the second memory area, the read/write control section writes again to the second memory area the data that is previously stored in the second memory area, in place of the second actual data and the second parity data. With this arrangement, it is possible to maintain the data contents in the defective memory area and prevent further data changes.</p>
<p id="p-0021" num="0020">In a seventh aspect of the present invention, the parity acquisition section acquires the first parity data by receiving the first parity data from the host circuit. With this arrangement, the configuration of the memory device is simplified because the parity data is generated by the host circuit.</p>
<p id="p-0022" num="0021">In an eighth aspect of the present invention, the parity acquisition section acquires the first parity data by generating the first parity data from the first actual data. With this arrangement, the configuration of the host circuit is simplified because the parity data is generated by the host memory device.</p>
<p id="p-0023" num="0022">It is possible for the present invention to be embodied in various modes, for example, a circuit board detachably and electrically connectable to a liquid ejecting device; a liquid receptacle detachably installable in a liquid ejecting device; a method of controlling a nonvolatile data memory section; a system that includes a host circuit and a memory device detachably installable in the host circuit; a computer program for accomplishing the functions of such methods or devices; or a recording medium having such a computer program recorded thereon.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 1</figref> illustrates a simplified configuration of a printing system;</p>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIGS. 2A and 2B</figref> are perspective views depicting a configuration of an ink cartridge according to the embodiment;</p>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIGS. 3A and 3B</figref> depict a configuration of a board according to the embodiment;</p>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 4</figref> illustrates a configuration of a print head unit;</p>
<p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. 5</figref> is a first illustration depicting an electrical configuration of a printer;</p>
<p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. 6</figref> is a second illustration depicting an electrical configuration of a printer;</p>
<p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. 7</figref> schematically depicts a memory map of memory areas provided by a ferroelectric memory array of a memory device;</p>
<p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. 8</figref> is a flowchart depicting a processing routine of a read operation from a memory device on the printer;</p>
<p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. 9</figref> is a timing chart schematically depicting signals exchanged between a communication process module and a memory control circuit during a read operation from a memory device;</p>
<p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. 10</figref> is a flowchart schematically depicting a processing routine of a read operation from a memory device on the memory;</p>
<p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. 11</figref> is a flowchart depicting the processing routine of a read operation taking place on the memory device;</p>
<p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. 12</figref> is a flowchart depicting the processing routine of a write operation to a memory device taking place on the printer;</p>
<p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. 13</figref> schematically depicts a memory map recognized on the printer during a write operation to a memory device;</p>
<p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. 14</figref> is a timing chart schematically depicting signals exchanged between a communication process module and a memory control circuit during a write operation to a memory device;</p>
<p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. 15</figref> is a flowchart depicting the processing routine of a write operation in a memory device;</p>
<p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. 16</figref> is a timing chart schematically depicting signals exchanged between a communication process module and a memory control circuit during a write lock operation of a memory device; and</p>
<p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. 17</figref> is a flowchart depicting the process steps in a printing operation.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DESCRIPTION OF THE PREFERRED EMBODIMENT</heading>
<p id="h-0006" num="0000">A. Embodiment</p>
<p id="h-0007" num="0000">Configuration of Printing System</p>
<p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. 1</figref> is an illustration depicting a simplified configuration of a printing system. The printing system includes a printer <b>20</b> provided as the printing device, and a computer <b>90</b>. The printer <b>20</b> is connected to the computer <b>90</b> via a connector <b>80</b>.</p>
<p id="p-0042" num="0041">The printer <b>20</b> is furnished with a sub-scanning feed mechanism, a main scanning feed mechanism, a head driving mechanism, and a main controller <b>40</b>. The sub-scanning feed mechanism has a paper feed motor <b>22</b> and a platen <b>26</b>, and conveys paper PA in the sub-scanning direction by transmitting rotation of the paper feed motor to the platen. The main scanning feed mechanism includes a carriage motor <b>32</b>, a pulley <b>38</b>, a drive belt <b>36</b> stretched between the carriage motor and the pulley, and a slide rail <b>34</b> disposed parallel to the axis of the platen <b>26</b>. The slide rail <b>34</b> slidably retains a carriage <b>30</b> that is affixed to the drive belt <b>36</b>. Rotation of the carriage motor <b>32</b> is transmitted to the carriage <b>30</b> via the drive belt <b>36</b>, whereupon the carriage <b>30</b> undergoes reciprocating movement in the axial direction of the platen <b>26</b> (the main scanning direction) along the slide rail <b>34</b>. The head driving mechanism includes a print head unit <b>60</b> installed on the carriage <b>30</b>, and is designed to drive a print head and eject ink onto the paper PA. The main controller <b>40</b> controls the above mechanisms and carries out printing operations. The main controller <b>40</b> for example receives a print job from a user via the computer <b>90</b>, and control the above mechanisms to carry out printing based on the content of the received print job. As will be discussed later, a plurality of ink cartridges are detachably installable in the print head unit <b>60</b>. Specifically, ink cartridges for supplying ink to the print head are disposed in the print head unit <b>60</b> in such a way as to be attachable and detachable through user operation. The printer <b>20</b> also has a console portion <b>70</b> allowing the use to perform various printer settings, check printer status, and so on.</p>
<p id="p-0043" num="0042">The configuration of the printer, together with the configuration of an ink cartridge (liquid receptacle), will be discussed further with reference to <figref idref="DRAWINGS">FIGS. 2A</figref>, <b>2</b>B, <b>3</b>A, <b>3</b>B, and <b>4</b>. <figref idref="DRAWINGS">FIGS. 2A and 2B</figref> are perspective views depicting a configuration of an ink cartridge according to the embodiment. <figref idref="DRAWINGS">FIGS. 3A and 3B</figref> are drawings depicting a configuration of a printed circuit board (hereinafter termed simply a circuit board) according to the embodiment. <figref idref="DRAWINGS">FIG. 4</figref> is a drawing illustrating a configuration of the print head unit <b>60</b>.</p>
<p id="p-0044" num="0043">The ink cartridge <b>100</b> has a main body <b>101</b> for containing the ink, a circuit board <b>120</b>, and a sensor <b>110</b>. On the base face of the main body <b>101</b> there is provided an ink delivery port <b>104</b> that, with the cartridge installed in the print head unit <b>60</b>, delivers ink to the print head unit <b>60</b>. An ink chamber <b>150</b> for containing the ink is formed in the main body <b>101</b>. The ink delivery port <b>104</b> communicates with the ink chamber <b>150</b>. The opening <b>104</b><i>op </i>of the ink delivery port <b>104</b> is sealed by a film <b>104</b><i>f</i>. By installing the ink cartridge <b>100</b> on the print head unit <b>60</b> (<figref idref="DRAWINGS">FIG. 4</figref>), the film <b>104</b><i>f </i>punctures and an ink delivery needle <b>6</b> inserts through the ink delivery port <b>104</b> (<figref idref="DRAWINGS">FIG. 4</figref>). The ink contained in the ink chamber <b>150</b> is delivered to the printer <b>20</b> through the ink delivery needle <b>6</b>.</p>
<p id="p-0045" num="0044">The sensor <b>110</b> is secured to the inside of the main body <b>101</b>. As will be discussed later, the sensor <b>110</b> includes a piezoelectric element composed of a piezoelectric body sandwiched between two opposed electrodes, and is used for detecting the remaining ink level. The main body <b>101</b> includes a front wall <b>101</b><i>wf </i>(wall lying in the &#x2212;Y direction) and a base wall <b>101</b><i>wb </i>(wall lying in the +Z direction). The front wall <b>101</b><i>wf </i>intersects (in the present embodiment, at a substantially right angle) the base wall <b>101</b><i>wb</i>. The circuit board <b>120</b> is secured to the front wall <b>101</b><i>wf</i>. The outside surface of the circuit board <b>120</b> is provided with terminals <b>210</b> to <b>270</b>.</p>
<p id="p-0046" num="0045">Two projections P<b>1</b>, P<b>2</b> are formed on the front wall <b>101</b><i>wf</i>. These projections P<b>1</b>, P<b>2</b> project out in the &#x2212;Y direction. A hole <b>122</b> and a notch <b>121</b> adapted to respectively receive these projections P<b>1</b>, P<b>2</b> are formed in the circuit board <b>120</b> (<figref idref="DRAWINGS">FIG. 3A</figref>). The hole <b>122</b> is formed in the center of the edge of the circuit board <b>120</b> on the ink delivery port <b>104</b> side (the +Z direction edge) thereof, while the notch <b>121</b> is formed in the center of the edge of the circuit board <b>120</b> on the opposite side from the ink delivery port <b>104</b> (the &#x2212;Z direction edge). With the circuit board <b>120</b> mounted onto the front wall <b>101</b><i>wf</i>, the projections P<b>1</b>, P<b>2</b> pass respectively through the hole <b>122</b> and the notch <b>121</b>. During production of the ink cartridge <b>100</b>, after the circuit board <b>120</b> is mounted on the front wall <b>101</b><i>wf</i>, the tips of these projections P<b>1</b>, P<b>2</b> is collapsed. The circuit board <b>120</b> is secured thereby to the front wall <b>101</b><i>wf. </i></p>
<p id="p-0047" num="0046">Additionally, a mating projection <b>101</b><i>e </i>is provided in the front wall <b>101</b><i>wf</i>. The ink cartridge <b>100</b> is prevented from inadvertently detaching from the holder <b>4</b> through mating of the mating projection <b>101</b><i>e </i>and a mating aperture <b>4</b><i>e </i>of a holder <b>4</b> (<figref idref="DRAWINGS">FIG. 4</figref>).</p>
<p id="p-0048" num="0047">The configuration of the print head unit <b>60</b>, as well as installation of the ink cartridge <b>100</b> in the print head unit <b>60</b>, is discussed with reference to <figref idref="DRAWINGS">FIG. 4</figref>. As depicted in <figref idref="DRAWINGS">FIG. 4</figref>, the print head unit <b>60</b> includes a holder <b>4</b>, a connection mechanism <b>400</b>, a print head <b>5</b>, and a sub-control board <b>500</b>. On the sub-control board <b>500</b> there are mounted a carriage circuit <b>50</b> and a group of terminals for respective connection via the connection mechanism <b>400</b> to the individual terminals <b>210</b> to <b>270</b> of the circuit board <b>120</b> of the ink cartridge <b>100</b>. The holder <b>4</b> is designed to receive installation of several ink cartridges <b>100</b>, and is situated on top of the print head <b>5</b>. The connection mechanism <b>400</b> has electrically conductive connection terminals <b>410</b> to <b>470</b> provided for each of the terminals of the circuit board <b>120</b> and adapted to provide electrical connections between the terminals of the circuit board <b>120</b> of the ink cartridge <b>100</b>, discussed later, and the terminals disposed on the sub-control board <b>500</b>. The aforementioned ink delivery needles <b>6</b> for delivering ink from the ink cartridges <b>100</b> to the print head <b>5</b> are situated on the print head <b>5</b>. The print head <b>5</b> includes several nozzles and several piezoelectric elements, and is adapted to eject droplets of ink from the nozzles in response to voltage applied to the piezoelectric elements, thereby producing dots on the paper PA. The carriage circuit <b>50</b> is a circuit designed to carry out control in relation to the ink cartridges <b>100</b> in concert with the main controller <b>40</b>, and herein is also referred to as the sub-controller.</p>
<p id="p-0049" num="0048">The ink cartridge <b>100</b> is installed in the holder <b>4</b> by inserting it in the Z-axis forward direction (the insertion direction R) in <figref idref="DRAWINGS">FIG. 4</figref>. The ink cartridge <b>100</b> is thereby detachably installed in the printer <b>20</b>. The circuit board <b>120</b> which is mounted onto the ink cartridge <b>100</b> is installed in or uninstalled from the printer <b>20</b> in association with installation or uninstallation of the ink cartridge <b>100</b> by the user. When the ink cartridge <b>100</b> is installed in the printer <b>20</b>, the circuit board <b>120</b> is electrically coupled with the printer <b>20</b>.</p>
<p id="p-0050" num="0049">The description of the circuit board <b>120</b> continues, returning to <figref idref="DRAWINGS">FIGS. 3A and 3B</figref>. The arrow R in <figref idref="DRAWINGS">FIG. 3A</figref> indicates the ink cartridge <b>100</b> insertion direction mentioned above. As shown in <figref idref="DRAWINGS">FIG. 3B</figref>, the circuit board <b>120</b> is provided with a memory device <b>130</b> on its back face, i.e. the face to the back side of the face that connects with the printer <b>20</b>; and is provided with a terminal group composed of seven terminals on its front face, i.e. the face that connects with the printer <b>20</b>. In the present embodiment, the memory device <b>130</b> is a semiconductor memory device that includes a ferroelectric memory cell array. This memory cell array, which corresponds to the data memory section of the present invention, stores data of various kinds relating to the ink cartridge <b>100</b> or to the ink, such as ink consumption, ink color, and so on. The ink consumption data indicates, for the ink contained in the ink cartridge in question, the cumulative total amount of ink consumed in the course of printing and in cleaning of the head. The data may represent the amount of ink per se, or represent the consumed ink as a percentage of a reference amount which is equivalent to the amount of ink initially contained in the ink cartridge.</p>
<p id="p-0051" num="0050">The terminals on the front side of the circuit board <b>120</b> are formed with generally rectangular shape and placed so as to form two rows approximately orthogonal to the insertion direction R. Of these two rows, the row situated towards the insertion direction R (the distal edge side in the insertion direction when inserted), i.e. to the lower side in <figref idref="DRAWINGS">FIG. 3A</figref>, is termed the lower row; and the row situated to the opposite side from the insertion direction R, i.e. to the upper side in <figref idref="DRAWINGS">FIG. 3A</figref>, is termed the upper row. Here, the term &#x201c;lower&#x201d; is used for convenience for the purpose of description in terms of <figref idref="DRAWINGS">FIGS. 3A and 3B</figref>. The terminals which form the upper row and the terminals which form the lower row are configured in a so-called staggered arrangement through mutually different placement, so that the terminal centers are not lined up in the insertion direction R.</p>
<p id="p-0052" num="0051">The terminals which are arrayed to form the upper row are, in order from the left in <figref idref="DRAWINGS">FIG. 3A</figref>, a ground terminal <b>210</b> and a power terminal <b>220</b>. The terminals which are arrayed to form the lower row are, in order from the left in <figref idref="DRAWINGS">FIG. 3A</figref>, a first sensor drive terminal <b>230</b>, a reset terminal <b>240</b>, a clock terminal <b>250</b>, a data terminal <b>260</b>, and a second sensor drive terminal <b>270</b>. The five terminals situated close to the center in the sideways direction, i.e. the ground terminal <b>210</b>, the power terminal <b>220</b>, the reset terminal <b>240</b>, the clock terminal <b>250</b>, and the data terminal <b>260</b>, are respectively connected to the memory device <b>130</b> via circuit pattern layers (not shown) provided on the front and back faces of the circuit board <b>120</b>, and through-holes situated in the circuit board <b>120</b>. The two terminals situated at the ends of the lower row, i.e. the first sensor drive terminal <b>230</b> and the second sensor drive terminal <b>270</b>, are respectively connected to one and the other of the electrodes of the piezoelectric element included in the sensor <b>110</b>.</p>
<p id="p-0053" num="0052">With this circuit board <b>120</b>, the five terminals that are connected to the memory device <b>130</b> and the two terminals that are connected to the sensor <b>110</b> are situated in proximity to one another. Thus, in the connection mechanism <b>400</b> on the printer <b>20</b> side as well, the connection terminals <b>410</b>, <b>420</b> and <b>440</b> to <b>460</b> that correspond to the five terminals connected to the memory device <b>130</b> and the connection terminals <b>430</b>, <b>470</b> that correspond to the two terminals connected to the sensor <b>110</b> are likewise situated in proximity to one another.</p>
<p id="p-0054" num="0053">With the ink cartridge <b>100</b> secured in the holder <b>4</b>, the terminals of the circuit board <b>120</b> are electrically connected through contact with the connection terminals <b>410</b> to <b>470</b> of the connection mechanism <b>400</b>. Additionally, the connection terminals <b>410</b> to <b>470</b> of the connection mechanism <b>400</b> are electrically connected through contact with the terminal group on the sub-control board <b>500</b>; and the terminal group on the sub-control board <b>500</b> are in electrical connection with sub-controller (carriage circuit <b>50</b>). Thus, when the ink cartridge <b>100</b> is secured in the holder <b>4</b>, the terminals <b>210</b> to <b>270</b> of the circuit board <b>120</b> are in electrical connection with the sub-controller <b>50</b>.</p>
<p id="h-0008" num="0000">Electrical Configuration of Printer:</p>
<p id="p-0055" num="0054"><figref idref="DRAWINGS">FIGS. 5 and 6</figref> are illustrations depicting the electrical configuration of the printer. The illustration in <figref idref="DRAWINGS">FIG. 5</figref> is focused on the totality of the main control circuit <b>40</b>, the sub-controller <b>50</b>, and all of the ink cartridges <b>100</b> installable in the printer. <figref idref="DRAWINGS">FIG. 6</figref> depicts the functional features of the main control circuit <b>40</b> and the functional features of the sub-controller <b>50</b>, shown together with a single ink cartridge <b>100</b>. The sub-controller <b>50</b> in the present embodiment corresponds to the host circuit of the present invention. In the present embodiment, the sub-controller <b>50</b> provided as the host circuit supplies power to the memory device <b>130</b> provided as the data memory section, and transmits commands indicating various types of access to the memory device <b>130</b> in order to write data to the memory device <b>130</b> or read data from the memory device <b>130</b> (discussed later).</p>
<p id="p-0056" num="0055">The memory device <b>130</b> of each ink cartridge <b>100</b> is assigned an 8-bit ID number (identification information) different from all the others. Because as shown in <figref idref="DRAWINGS">FIG. 5</figref> the memory devices <b>130</b> of the ink cartridges are parallel-connected to lines from the sub-controller <b>50</b> (i.e. they are bus-connected to the sub-controller <b>50</b>), if an operation such as a read/write operation is to be carried out by the sub-controller <b>50</b> on the memory device <b>130</b> of a particular ink cartridge <b>100</b>, it is necessary for the particular ink cartridge to be identified from the main controller <b>40</b> and the sub-controller <b>50</b>. The ID number is used for this purpose. This ID number is used by the sub-controller <b>50</b> to specify a memory device <b>130</b> (ink cartridge <b>100</b>) that is to be accessed.</p>
<p id="p-0057" num="0056">The lines that electrically connect the sub-controller <b>50</b> with each ink cartridge <b>100</b> include the lines connecting the sub-controller <b>50</b> with the terminal group of the sub-control board <b>500</b>; the connection terminals <b>410</b> to <b>470</b> of the connection mechanism <b>400</b>; the terminal group on the front side of the circuit board <b>120</b>; and the lines leading from the terminal group of the circuit board <b>120</b> to the memory device <b>130</b> and to the sensor <b>110</b>. The lines that electrically connect the sub-controller <b>50</b> with each ink cartridge <b>100</b> include a reset signal line LR<b>1</b>, a clock signal line LC<b>1</b>, a data signal line LD<b>1</b>, a first ground line LCS, a first power line LCV, a first sensor drive signal line LDSN, and a second sensor drive signal line LDSP.</p>
<p id="p-0058" num="0057">The reset signal line LR<b>1</b> between the sub-controller <b>50</b> and the memory device <b>130</b> is a conductive line for sending a reset signal CRST from the sub-controller <b>50</b> to the memory device <b>130</b>. The reset signal is a signal by which the sub-controller <b>50</b> may place the memory control circuit <b>136</b> (discussed later) of a memory device <b>130</b> in the initialized state, or in a standby state in which it can accept access. When a low level reset signal is presented to a memory control circuit <b>136</b> by the sub-controller <b>50</b>, the memory control circuit <b>136</b> goes into the initialized state. The clock signal line LC<b>1</b> between the sub-controller <b>50</b> and the memory device <b>130</b> is a conductive line for sending a clock signal CSCK from the sub-controller <b>50</b> to the memory device <b>130</b>. The data signal line LD<b>1</b> between the sub-controller <b>50</b> and the memory device <b>130</b> is a conductive line for sending data signals CSDA that are exchanged between the sub-controller <b>50</b> to the memory device <b>130</b>. As shown in <figref idref="DRAWINGS">FIG. 6</figref>, in the sub-controller <b>50</b>, the data signal line LD<b>1</b> is connected to ground potential CVSS (0 V) via a pull-down resistor R<b>1</b>. As a result, potential on the data signal line LD<b>1</b> is held at low level, particularly when data signals are not being exchanged between the sub-controller <b>50</b> and the memory device <b>130</b>. In order to achieve synchronization between the sub-controller <b>50</b> and the memory device <b>130</b>, data signals are transmitted and received in sync with the clock signal mentioned above. For example, the exchange may take place such that signals are transmitted or received while a rise or fall of the clock signal is used as a valid data timing. Each of these three lines LR<b>1</b>, LC<b>1</b>, LD<b>1</b> is a line having a single terminus at the sub-controller <b>50</b>, and branched termini, corresponding in number to the number of ink cartridges <b>100</b>, at the ink cartridge <b>100</b>. That is, with respect to the three lines LR<b>1</b>, LC<b>1</b>, LD<b>1</b>, the plurality of memory devices <b>130</b> are bus-connected to the sub-controller <b>50</b>. The reset signal CRST, the data signal CSDA, and the clock signal CSCK are all binary signals that have either high level (in the present embodiment, CVDD potential of 3.3 V) or low level (in the present embodiment, CVSS potential of 0 V). Herein, a high level signal is also represented by the value &#x201c;1&#x201d;, and a low level signal is also represented by the value &#x201c;0&#x201d;.</p>
<p id="p-0059" num="0058">The first ground line LCS is a conductive line for providing ground potential CVSS to the memory device <b>130</b>, and is electrically connected to the memory device <b>130</b> via the ground terminal <b>210</b> of the circuit board <b>120</b>. The first ground line LCS is a line having a single terminus at the sub-controller <b>50</b>, and branched termini, corresponding in number to the number of ink cartridges <b>100</b>, at the ink cartridge <b>100</b>. The ground potential CVSS is connected to ground potential VSS (=CVSS potential) supplied to the sub-controller <b>50</b> by the main controller <b>40</b> via a second ground line LS, and is set to low level (0 V).</p>
<p id="p-0060" num="0059">The first sensor drive signal line LDSN and the second sensor drive signal line LDSP are conductive lines adapted to apply a driving voltage to the piezoelectric element of the sensor <b>110</b>, and after ceasing to apply the driving voltage, transmitting to the sub-controller <b>50</b> a voltage produced by the piezoelectric effect of the piezoelectric element. The first sensor drive signal line LDSN and the second sensor drive signal line LDSP are a plurality of lines that respectively are provided independently for each ink cartridge <b>100</b>, and each of which is electrically connected at a first end to the sub-controller <b>50</b> as well as electrically connected at the other end to the first sensor drive terminal <b>230</b> and the second sensor drive terminal <b>270</b> of the circuit board <b>120</b>, respectively. The first sensor drive signal line LDSN is electrically connected via the first sensor drive terminal <b>230</b> to one of the electrodes of the piezoelectric element of the sensor <b>110</b>, while the second sensor drive signal line LDSP is electrically connected via the second sensor drive terminal <b>270</b> to the other electrode of the piezoelectric element of the sensor <b>110</b>.</p>
<p id="p-0061" num="0060">The first power line LCV is a conductive line for providing the power supply voltage CVDD, which represents the operating voltage of the memory device <b>130</b>, to the memory device <b>130</b>; and is connected to the memory device <b>130</b> via the power supply terminal <b>220</b> of the circuit board <b>120</b>. The first power line LCV is a line having a single terminus at the sub-controller <b>50</b>, and branched termini, corresponding in number to the number of ink cartridges <b>100</b>, at the ink cartridge <b>100</b>. The high level power supply voltage CVDD used to drive the memory device <b>130</b> uses potential of about 3.3 V versus the low level ground potential CVSS (0 V). Of course, depending on factors such as the generation of processor of the memory device <b>130</b>, the potential level of the power supply voltage CVDD may be a different potential, such as 1.5 or 2.0 V for example.</p>
<p id="p-0062" num="0061">The main controller <b>40</b> and the sub-controller <b>50</b> are electrically connected by several lines. These several lines include a bus BS, a second power supply line LV, a second ground line LS, and a third sensor drive signal line LDS. The bus BS is used for data communications between the main controller <b>40</b> and the sub-controller <b>50</b>. The second power supply line LV and the second ground line LS are conductive lines for providing the main controller <b>40</b> and the sub-controller <b>50</b> with power supply voltage VDD and ground potential VSS respectively. The power supply voltage VDD uses potential of the same level as the power supply voltage CVDD provided to the memory device <b>130</b> mentioned previously, for example, of about 3.3 V versus the ground potential VSS and CVSS (0 V). Of course, depending on factors such as the generation of processor of the logic IC section of the sub-controller <b>50</b>, the potential level of the power supply voltage VDD may be a different potential, such as 1.5 or 2.0 V for example. The third sensor drive signal line LDS is a conductive line for providing a sensor drive signal DS (described later) which is ultimately applied to each sensor <b>110</b>, from the main controller <b>40</b> to the sub-controller <b>50</b>.</p>
<p id="p-0063" num="0062">The main controller <b>40</b> is provided with a control circuit <b>48</b>, a drive signal generating circuit <b>42</b>, and ROM, RAM, EEPROM or the like (not shown). Various programs for controlling the printer <b>20</b> are stored in the ROM.</p>
<p id="p-0064" num="0063">The control circuit <b>48</b> is a CPU (central processing unit), and performs control of the printer <b>20</b> as a whole in concert with the ROM, RAM, EEPROM or other memory. The control circuit <b>48</b> is provided with the function blocks of a remaining ink level detection module M<b>1</b>, a memory access module M<b>2</b>, and a ink consumption estimation module M<b>3</b>.</p>
<p id="p-0065" num="0064">The remaining ink level detection module M<b>1</b> controls the sub-controller <b>50</b> and the drive signal generating circuit <b>42</b>, drives the sensor <b>110</b> of the ink cartridge <b>100</b>, and decides whether the ink in the ink cartridge <b>100</b> equals a prescribed value or greater. Through the sub-controller <b>50</b>, the memory access module M<b>2</b> accesses the memory device <b>130</b> of the ink cartridge <b>100</b> and either reads out the information stored in the memory device <b>130</b>, or updates the information stored in the memory device <b>130</b>. The ink consumption estimation module M<b>3</b> is designed to count the dots that are jetted onto the printer paper in association with conditions of printing operations of the printer <b>20</b>; and from this count value and the amount of ink consumed by each dot, estimates the amount of ink consumed by printing operations. The amount of ink consumed in head cleaning operations is estimated as well. On the basis of these estimates, a count is kept of the cumulative estimated value for ink consumption consumed from the ink cartridge since the ink cartridge <b>100</b> was first installed in the printer <b>20</b>.</p>
<p id="p-0066" num="0065">The EEPROM of the main controller <b>40</b> stores data representing a sensor drive signal DS for driving the sensor. In accordance with an instruction from the remaining ink level detection module M<b>1</b> of the control circuit <b>48</b>, the drive signal generating circuit <b>42</b> reads out from the EEPROM data that represents a waveform for the sensor drive signal DS, and generates a sensor drive signal DS having the desired waveform. The sensor drive signal DS includes a potential that is greater than the power supply voltage CVDD (in the present embodiment, 3.3 V); in the present embodiment for example, it includes a maximum potential of about 36 V. Specifically, the sensor drive signal DS is a trapezoidal pulse signal having maximum voltage of 36 V.</p>
<p id="p-0067" num="0066">In the present embodiment, the drive signal generating circuit <b>42</b> can additionally generate a head drive signal for presentation to the print head <b>5</b>. Specifically, in the present embodiment, during determination of the remaining ink amount, the control circuit <b>48</b> prompts the drive signal generating circuit <b>42</b> to generate a sensor drive signal, and during printing operations it prompts the drive signal generating circuit <b>42</b> to generate a head drive signal.</p>
<p id="p-0068" num="0067">In terms of hardware configuration, the sub-controller <b>50</b> is provided with an ASIC (Application Specific IC). The ASIC has a communication process module <b>55</b> and a sensor process module <b>52</b> by way of functional features.</p>
<p id="p-0069" num="0068">The communication process module <b>55</b> carries out communication processes with the memory device <b>130</b> of each of the ink cartridges <b>100</b> via the reset signal line LR<b>1</b>, the data signal line LD<b>1</b>, and the clock signal line LC<b>1</b>. The communication process module <b>55</b> also carries out communication processes with main controller <b>40</b> through the agency of the bus BS. By detecting the potentials on prescribed terminals of the terminal group of the circuit board <b>120</b>, the communication process module <b>55</b> is able to detect whether the circuit board <b>120</b> of an ink cartridge <b>100</b> is electrically connected to the printer <b>20</b>, that is, whether the ink cartridge <b>100</b> is installed in the printer <b>20</b>. The communication process module <b>55</b> then notifies the main controller <b>40</b> that it has detected the installed ink cartridges <b>100</b>. Through this process the main controller <b>40</b> is able to determine whether the ink cartridges <b>100</b> are mounted in the cartridge mounting section.</p>
<p id="p-0070" num="0069">If the main controller <b>40</b> determines that the circuit boards <b>120</b> are electrically connected and that the ink cartridges <b>100</b> are installed in the printer <b>20</b>, it then accesses the memory devices <b>130</b> of the installed ink cartridges <b>100</b> at prescribed timing, via the communication process module <b>55</b>.</p>
<p id="p-0071" num="0070">The communication process module <b>55</b> is a circuit that includes a logic circuit composed of an ASIC or the like, and that is driven by the power supply voltage VDD (in the present embodiment, 3.3 V). In the present embodiment the ASIC is composed of a memory cell area block (SRAM <b>551</b>) and a logic area, with the logic area being provided with a sensor register <b>552</b> and an error code register <b>553</b>. The SRAM <b>551</b> is a memory used to temporarily save data during operations of the communication process module <b>55</b>, i.e. to temporarily save data received from the main controller <b>40</b>, or data received from the sensors <b>110</b> or the memory devices <b>130</b>, for example. After the printer <b>20</b> is powered on, in the SRAM <b>551</b> there is allocated memory space sufficient to store data corresponding to the original data and corresponding to inverted mirror data of the original data in the memory device <b>130</b> of each ink cartridge <b>100</b> (discussed later); and the data that is read out from the memory devices is then stored in this allocated memory space. Specifically, in the memory space in the SRAM <b>551</b> there is allocated a memory area sufficient to store the 16-bit original data and the inverted mirror data of the 16-bit original data, in the same number of rows as the memory cell array of each memory device <b>130</b>. Then, the original data which is read out from the memory array of each memory device, together with the inverted mirror data thereof, is stored in the allocated memory area. The values which are read out to the memory area are subsequently updated in association with printing operations (in association with transmission of write data from the main controller <b>40</b> and reading of data from the memory devices). Communication errors and memory cell errors, discussed later, occurring in relation to rows in the rewritable memory area of each memory device <b>130</b> are written into the error code register <b>553</b>.</p>
<p id="p-0072" num="0071">The sensor register <b>552</b> is a register used by the sensor process module <b>52</b> to write process outcomes of sensor processes. A sensor process module <b>552</b> is provided for each ink cartridge, and is used to record results of determination of remaining ink level, discussed later.</p>
<p id="p-0073" num="0072">The sensor process module <b>52</b> executes a remaining ink level determination process using the sensor (sensor process), discussed later. The sensor process module <b>52</b> includes a changeover switch. The changeover switch is used to present a sensor drive signal DS supplied by the drive signal generating circuit <b>42</b>, to the sensor <b>110</b> of a single ink cartridge <b>100</b> that is targeted for the sensor process, doing so via either the first sensor drive signal line LDSN or the second sensor drive signal line LDSP.</p>
<p id="p-0074" num="0073">Next, the electrical configuration of the ink cartridges <b>100</b> is described. Each ink cartridge <b>100</b> has as its electrical elements a memory device <b>130</b> and a sensor <b>110</b>.</p>
<p id="p-0075" num="0074">The memory device <b>130</b> is not designed to accept external input of address data that specifies the address of an access location. The memory device <b>130</b> does not accept direct input of address data; however, it is controllable in order to specify memory cells to be accessed, in response to an externally supplied clock signal and command data. The memory device <b>130</b> includes a ferroelectric memory cell array <b>132</b> provided as the data memory section; and a memory control circuit <b>136</b>. As indicated by white circles on the broken lines that represent the memory device <b>130</b> in <figref idref="DRAWINGS">FIG. 6</figref>, the memory device <b>130</b> is provided with a ground terminal for electrical connection to the ground terminal <b>210</b> of the circuit board <b>120</b>, a power terminal for electrical connection to the power terminal <b>220</b>, a reset terminal for electrical connection to the reset terminal <b>240</b>, and a clock terminal for electrical connection to the clock terminal <b>250</b>.</p>
<p id="p-0076" num="0075">The ferroelectric memory cell array <b>132</b> is a nonvolatile semiconductor memory cell array that uses ferroelectric memory elements, and provides a memory area having a data-rewritable feature.</p>
<p id="p-0077" num="0076">The memory control circuit <b>136</b> is designed to control read and write operations to the ferroelectric memory cell array <b>132</b> in response to the command data from the sub-controller <b>50</b>. The memory control circuit <b>136</b> analyses identification data and command data sent from the sub-controller <b>50</b>. Also, during a write operation, on the basis of write content data received from the sub-controller <b>50</b> the memory control circuit <b>136</b> generates write data and write it to the ferroelectric memory cell array <b>132</b>. Or, during a read operation, on the basis of read data from the ferroelectric memory cell array <b>132</b> the memory control circuit <b>136</b> generates data for transmission to the sub-controller <b>50</b>. This will be discussed in detail later.</p>
<p id="p-0078" num="0077">The memory control circuit <b>136</b> is furnished with an ID comparator module M<b>11</b>, a command parse module M<b>12</b>, an address counter M<b>13</b>, a read/write control module M<b>14</b>, a data send/receive module M<b>15</b>, a counter control module M<b>16</b>, a copy data generation module M<b>17</b>, an inverted data generation module M<b>18</b>, and a data determination module M<b>19</b>. The ID comparator module M<b>11</b> is designed to compare ID data that is supplied from the sub-controller <b>50</b>, and the ID number that is assigned to its own memory device; and to then decide whether the target of access is the memory device itself. The ID number of the memory device is stored in the memory cells that are connected to the word line which is selected on the basis of the output of the address counter M<b>13</b> when access from the sub-controller <b>50</b> is initiated subsequent to initialization of the memory device <b>130</b>. This ID number is used to distinguish a memory device <b>130</b> targeted for access by the sub-controller <b>50</b>, from among the several memory devices <b>130</b> which are bus-connected to the sub-controller <b>50</b>. This ID number may be chosen according to the color of the ink contained in the ink cartridge <b>100</b>, for example. The command parse module M<b>12</b> is designed to parse Start of Frame data (SOF), End of Frame (EOF) data, and command data sent from the sub-controller <b>50</b>, and to decide the start of access and end of access from the sub-controller <b>50</b>, as well as the type of access (read, write, etc.). When a low level reset signal CRST is input to the memory device <b>130</b> so that the memory device <b>130</b> is initialized, the address counter M<b>13</b> resets the counter value. During reset the counter value is set to a value that selects the word line including the memory cells in which the ID number is stored. Subsequently, on the basis of control from the counter control module M<b>16</b>, a prescribed number of clock pulses are sequentially counted from among the clock pulses input to the memory device <b>130</b>. When a memory cell is accessed through control by the read/write control module M<b>14</b>, the counter value of the address counter M<b>13</b> is output from the address counter M<b>13</b> to an address decoder of the memory cell array, not shown. Consequently, a prescribed row (word line) of the memory cell array <b>132</b> is selected in correspondence with the counter value. In the present embodiment, a &#x201c;row&#x201d; is selected by the address decoder on the basis of the counter value output by address counter M<b>13</b>. According to the content of the command data (indicative of the type of access) that was parsed by the command parse module M<b>12</b>, the read/write control module M<b>14</b> performs a batch write operation into a single row and a batch read operation from a single row of the ferroelectric memory array <b>132</b> that is connected to the word line selected by the address counter M<b>13</b>. The read/write control module M<b>14</b> is provided with a register, not shown, and is able to temporarily store original data, inverted data, and mirror data, discussed later in detail. The data send/receive module M<b>15</b> synchronously with the clock signal CSCK receives a data signal CSDA sent from the sub-controller <b>50</b> via the data signal line LD<b>1</b>, or synchronously with the clock signal CSCK sends a data signal CSDA via the data signal line LD<b>1</b>. Specifically, the data send/receive module M<b>15</b> sets the send/receive direction of data signals CSDA exchanged between the memory device <b>130</b> and the sub-controller <b>50</b>. After initialization, when access to the memory device <b>130</b> by the sub-controller <b>50</b> is initiated, the send/receive direction of the data send/receive module M<b>15</b> is set to the direction in which the memory device <b>130</b> receives data signals CSDA sent from the sub-controller <b>50</b>, so that data read out from the memory cell array <b>132</b> is not sent from the memory device <b>130</b> to the sub-controller <b>50</b>. The copy data generation module M<b>17</b> is adapted to copy original data (discussed later) to generate mirror data (discussed later) equal in size to the original data. The inverted data generation module M<b>18</b> is adapted to invert the value of each bit of the original data to generate inverted data (discussed later) equal in size to the original data. The data determination module M<b>19</b> is designed to perform a parity check and exclusive OR operation of the original data and the mirror data, discussed later, to determine the consistency of the data. The counter control module M<b>16</b> is furnished with a clock counter. After access to the memory device <b>130</b> by the sub-controller <b>50</b> is initiated after the memory device <b>130</b> is initialized, the counter control module M<b>16</b> counts the number of clock pulses of the clock signal CSCK input to the memory device <b>130</b>. After a prescribed counter value is reached, based on the outcome of command parsing by the command parse module M<b>12</b>, the counter control module M<b>16</b> issues a control signal to the address counter M<b>13</b> to cause the address counter M<b>13</b> to either count up or count down the counter value. The data send/receive module M<b>15</b> in the present embodiment corresponds to the data reception section and the data transmission section in the present invention.</p>
<p id="p-0079" num="0078"><figref idref="DRAWINGS">FIG. 7</figref> is a drawing schematically depicting a memory map of the ferroelectric memory array <b>132</b> of the memory device <b>130</b>. In <figref idref="DRAWINGS">FIG. 7</figref>, the memory map of the ferroelectric memory array <b>132</b> is composed of multiple rows, each row having 32 cells. The memory cell array <b>132</b> is accessed sequentially, in order of row selected by the value indicated by the address counter. In the memory map depicted in <figref idref="DRAWINGS">FIG. 7</figref>, the order of sequential access is from the top to the bottom side, in row units. Here, for convenience, in any given row, memory cells further towards the left side (the D<b>31</b> side) are termed higher order cells. For different rows, a higher order row than a particular row means a row to the upper side (a row having a smaller row number) than the particular row in <figref idref="DRAWINGS">FIG. 7</figref>; and a lower order row than a particular row means a row to the lower side (a row having a larger row number) than the particular row in <figref idref="DRAWINGS">FIG. 7</figref>. As shown in the memory map, the memory cell array <b>132</b> has an identification information area, a rewriteable area, a read-only area, and a control area. The identification information area has the 32-bit memory area of Row A<b>0</b>, and is used to store the ID number mentioned earlier. The rewriteable area has a memory area of (m&#x2212;1) rows, where m is a natural number, from Row A<b>1</b> to Row Am&#x2212;1 in <figref idref="DRAWINGS">FIG. 7</figref>. The rewriteable area is an area accessed for the purpose of rewriting data by the sub-controller <b>50</b> of the printer <b>20</b>. The read-only area has a memory area of (n&#x2212;m) rows from Rows Am to An&#x2212;1. The read-only area is accessed for the exclusive purpose of reading data by the sub-controller <b>50</b> of the printer <b>20</b>. The control area is provided as a lower order area from the read-only area. The control area is a memory area for storing increment flag information and write lock flag information, discussed later. Each single row of the storage areas of the memory map of the memory cell array <b>132</b> has 32 bit storage capacity. A single row corresponds to a row selected by the address counter M<b>13</b> (i.e. a word line). Within a single row, the upper 16 bits represent a data area for storing original data. Here, original data refers to data that is the source for inverted data and mirror data, discussed later. Herein, the data area for storing the original data is termed the original data area. Within a single row, the lower 16 bits represent a data area for storing mirror data which is a copy of the original data that is stored on the upper 16 bits. Herein, the data area for storing the mirror data is termed the mirror data area. In <figref idref="DRAWINGS">FIG. 7</figref>, the left half represents the original data area, and the right half represents the mirror data area. Stated the opposite way, in <figref idref="DRAWINGS">FIG. 7</figref>, the data that is stored in the original data area in the left half is original data, and the data that is stored in the mirror data area in the right half is mirror data. Under normal circumstances, i.e. in the absence of any write errors or faulty cells in a given row, the original data and the mirror data in each row have identical content.</p>
<p id="p-0080" num="0079">In the identification information area and the rewriteable area, the upper 15 bits of the original data area of each row are used for storing actual data; while the last bit (the 16th bit) is used for storing parity data P that is associated with the actual data. In the present embodiment, actual data is data that is used by the main controller <b>40</b> of the printer <b>20</b> for controlling various aspects of printer <b>20</b> operation (e.g. printing operations, control of the user interface). In the present embodiment, the actual data includes, for example, data representing remaining ink level, the date and time that the ink cartridge was first placed in service, and so on. The upper 15 bits of the mirror data area are used for storing mirror data of the actual data of the original data, while the last bit (the 16th bit) is used for storing mirror data of the parity data P that is associated with the actual data of the original data. The parity data P is a redundant bit that is set to a value of either &#x201c;1&#x201d; or &#x201c;0&#x201d; in such a way that the number of bits of &#x201c;1&#x201d; value in 16-bit data consisting of the upper 15 bits and the parity data P is always an odd number. The parity data P may instead be set to either &#x201c;1&#x201d; or &#x201c;0&#x201d; in such a way that the number of bits of &#x201c;1&#x201d; value in 16-bit data consisting of the upper 15 bits and the parity data P is always an even number. The parity data P should not be construed as limiting, and any of various of types of redundancy data that provide redundancy of actual data may be used instead.</p>
<p id="p-0081" num="0080">Of the (n&#x2212;m) rows in the read-only area, rows except for the last row An&#x2212;1 are used for actual data storage, while the last row is used for parity data storage. Specifically, for each of prescribed units of actual data (e.g. 8-bit or 16-bit units) of rows except for the last row, 1-bit parity data is assigned to a bit in the last row. In <figref idref="DRAWINGS">FIG. 7</figref>, the cells denoted by &#x201c;P&#x201d; represent 1-bit memory areas for storing parity data P.</p>
<p id="p-0082" num="0081">As will be appreciated from the preceding discussion, in the identification information area and the rewriteable area, the original data consists of actual data and parity data. In the read-only area, in areas apart from the last row, the original data is actual data per se. In the read-only area, in the last row, the original data is parity data.</p>
<p id="p-0083" num="0082">The rewriteable area stores various kinds of information, for example, remaining ink level information or usage history information for the ink cartridge <b>100</b>. The ID number (identification information, which is chosen for each type (color) of ink cartridge <b>100</b>, is stored on the 8 bits starting from the lead cell in the leading first row (the identification information area of Row A<b>0</b>) which is selected by the initial value of the address counter M<b>13</b> immediately after access to the memory device <b>130</b> is initiated. In <figref idref="DRAWINGS">FIG. 7</figref>, the area storing the ID number is indicated by fine hatching. The remaining cells of Row A<b>0</b>, i.e. excepting the original data parity bit cells and the cells storing the ID number, constitute empty areas and store fixed data of 0 or 1. For example, where the number of ink cartridges <b>100</b> installed in the printer <b>20</b> is n, the ID number may assume n types of values that differ according to the type of ink cartridge <b>100</b>. The first row of the rewriteable area (Row A<b>1</b>) stores a first ink consumption count value X (e.g. on 10 bits), and the second row (Row A<b>2</b>) stores a second ink consumption count value Y (e.g. on 10 bits). The first ink consumption count value X represents 10-bit information for example, and is stored in the cells of the lower 10 bits among 15 bits excepting the parity information cell of Row A<b>1</b>. The remaining 5 bits of Row A<b>1</b> constitute an empty area storing fixed data, and data is sent from the printer <b>20</b> so that &#x201c;1&#x201d;s are always stored therein. In <figref idref="DRAWINGS">FIG. 7</figref>, the area storing the first ink consumption count value X is indicated by coarse hatching. The second ink consumption count value Y represents 10-bit information for example, and is stored in the cells of the lower 10 bits among 15 bits excepting the parity information cell of Row A<b>2</b>. The remaining 5 bits of Row A<b>2</b> constitute an empty area, and data is sent from the printer <b>20</b> so that &#x201c;1&#x201d;s are always stored therein. In <figref idref="DRAWINGS">FIG. 7</figref>, the area storing the second ink consumption count value Y is indicated by crosshatching. The first ink consumption count value X and the second ink consumption count value Y are values that represent cumulative total ink consumption for each ink cartridge <b>100</b>, derived on the basis of the ink consumption that was estimated by the ink consumption estimation module M<b>3</b> in the printer <b>20</b>. Ink end information M is also stored in a prescribed row of the rewritable area. The ink end information M may be 2-bit data that assumes one of three states &#x201c;01&#x201d;, &#x201c;11&#x201d; or &#x201c;01&#x201d; for example. &#x201c;01&#x201d; represents a state in which the sensor <b>110</b> of the ink cartridge <b>100</b> has not detected that the remaining ink level is equal to or less than a first threshold value Vref<b>1</b> (hereinafter also referred to as the full state), that is, that the remaining ink level is greater than the first threshold value Vref<b>1</b>. &#x201c;10&#x201d; represents a remaining ink level equal to or less than the first threshold value Vref<b>1</b> and greater than the ink end level (hereinafter also referred to as the low state; that is, first threshold value Vref<b>1</b>&#x3e;ink end level. The fact that the remaining ink level is equal to or less than the first threshold value Vref<b>1</b> is detected by the sensor <b>110</b> of the ink cartridge <b>100</b> in question. &#x201c;11&#x201d; represents a remaining ink level at or below the ink end level (hereinafter also referred to as the end state). The ink end level is a level of remaining ink at which, if the printer <b>20</b> continues to print uninterrupted, poses a risk of air becoming incorporated into the print head unit <b>60</b> due to ink depletion, thus making it imperative to replace the ink cartridge <b>100</b>. For example, the first threshold value Vref<b>1</b> may be set to about 1.5 grams, and the ink end level may be set to a remaining ink level of about 0.8 grams. Processes relating to the first ink consumption count value X, the second ink consumption count value Y, and the ink end information M will be discussed later.</p>
<p id="p-0084" num="0083">The read-only area stores, for example, manufacturer information indicating the manufacturer of the ink cartridge <b>100</b>, the date of manufacture of the ink cartridge, the ink cartridge <b>100</b> capacity, the type of ink cartridge, and so on. The control area stores increment flag information and write lock information.</p>
<p id="p-0085" num="0084">One bit of increment flag information is provided for each row on the memory map. A row whose associated increment flag information is set to &#x201c;1&#x201d; represents an area in which the row is allowed to be overwritten with only a larger numerical value than the numerical value already stored in the row (incremental overwrite), but the row is not allowed to be overwritten with a smaller numerical value than the numerical value already stored in the row (decremental overwrite). A row whose associated increment flag information is set to &#x201c;0&#x201d; is allowed to be overwritten freely. The decision as to whether to allow only incremental overwrites or to allow free overwriting is made by the read/write control module M<b>14</b> of the memory control circuit <b>136</b>, with reference to the increment flag information. Specifically, for Row A<b>1</b> and Row A<b>2</b> which record the aforementioned first ink consumption count value X and second ink consumption count value Y, the corresponding increment flag information is set to &#x201c;1&#x201d;. The reason is that it is difficult to imagine that updating of first ink consumption count value X and the second ink consumption count value Y by the printer <b>20</b> would take place in anything other than the increasing direction. This can reduce the likelihood of write errors to Row A<b>1</b> and Row A<b>2</b>. Hereinbelow, memory areas for which, like Row A<b>1</b> and Row A<b>2</b>, the corresponding increment flag information is set to &#x201c;1&#x201d; is also referred to as increment areas. Overwriting to a row may be allowed in instances where the data overwrite is an incremental overwrite made in 16-bit original data units rather than in row units. Where remaining ink level, rather than ink consumption, is saved in a row of the memory, this row may be controlled by a flag value that indicates whether to allow only decremental overwriting or to allow free overwriting.</p>
<p id="p-0086" num="0085">One bit of write lock flag information is provided for each row in the identification information area, the rewriteable area, and the read-only area. A row whose associated write lock flag information is set to &#x201c;1&#x201d; represents an area that is not allowed to be overwritten through external access. A row whose associated write lock flag information is set to &#x201c;0&#x201d; represents an area that is allowed to be overwritten through external access. The decision as to whether to allow overwriting is made by the read/write control module M<b>14</b> of the memory control circuit <b>136</b>, with reference to the write lock flag information. For the rewriteable area, i.e. Rows A<b>1</b> to Am&#x2212;1, the corresponding write lock flag information is set to &#x201c;0&#x201d; at the factory prior to shipping, so as to permit erasing and/or rewriting of data by the communication process module <b>55</b> of the printer <b>20</b>. On the other hand, for the identification information area, i.e. Row A<b>0</b>, and for the read-only area, i.e. Rows Am to An&#x2212;1, the corresponding write lock flag information is set to &#x201c;1&#x201d; at the factory prior to shipping, so as to prohibit erasing and/or rewriting of data by the communication process module <b>55</b> of the printer <b>20</b>. Such memory areas for which the write lock flag information is set to &#x201c;1&#x201d; is also referred to as write-locked areas.</p>
<p id="p-0087" num="0086">The sensor <b>110</b>, which is not depicted in detail in the drawings, is furnished with a cavity (resonance portion) that defines part of the ink flow channel in proximity to the ink delivery section; an oscillator plate forming part of the wall of the cavity; and a piezoelectric element arranged on the oscillator plate. The sensor process module <b>52</b> of the printer <b>20</b> can apply a sensor drive signal DS to the piezoelectric element via the sensor drive terminals <b>230</b>, <b>270</b>, and thereby induce oscillation of the oscillator plate through the agency of the piezoelectric element. Then, by receiving from the piezoelectric element a response signal RS having the frequency of the residual vibration of the oscillator plate, the sensor process module <b>52</b> can detect if ink is present or absent in the cavity. Specifically, if the ink contained in the main body <b>101</b> is consumed so that the condition of the cavity interior changes from a condition filled with ink to a condition filled with air, the frequency of the residual vibration of the oscillator plate changes. This change in frequency is reflected in a change in frequency of the response signal RS. By measuring the frequency of the response signal RS, the sensor process module <b>52</b> can detect if ink is present or absent in the cavity. Detecting that ink is &#x201c;absent&#x201d; in the cavity means that the remaining ink level contained in the main body <b>101</b> is equal to or less than the first threshold value Vref<b>1</b> (this corresponds to the amount of ink remaining downstream from the cavity). Detecting that ink is &#x201c;present&#x201d; in the cavity means that the remaining ink level contained in the main body <b>101</b> is greater than the first threshold value Vref<b>1</b>.</p>
<p id="h-0009" num="0000">Read Operation from Memory Device:</p>
<p id="p-0088" num="0087"><figref idref="DRAWINGS">FIG. 8</figref> is a flowchart depicting the processing routine of a read operation from the memory device <b>130</b>, executed by the sub-controller <b>50</b> of the printer <b>20</b>. <figref idref="DRAWINGS">FIG. 9</figref> is a timing chart schematically depicting signals exchanged between the communication process module <b>55</b> of the printer <b>20</b> and the memory control circuit <b>136</b> of the memory device <b>130</b> during a read operation from the memory device <b>130</b>. In <figref idref="DRAWINGS">FIG. 9</figref>, an example of a power supply voltage CVDD, a reset signal CRST, a clock signal CSCK, and a data signal CSDA is depicted. The power supply voltage CVDD is a signal that appears on the first power supply line LCV connecting the sub-controller <b>50</b> and the memory device <b>130</b>, and is supplied to the memory device <b>130</b> by the sub-controller <b>50</b>. The reset signal CRST is a signal that appears on the reset signal line LR<b>1</b> connecting the sub-controller <b>50</b> and the memory device <b>130</b>, and is supplied to the memory device <b>130</b> by the sub-controller <b>50</b>. The clock signal CSCK is a signal that appears on the clock signal line LC<b>1</b> connecting the sub-controller <b>50</b> and the memory device <b>130</b>, and is supplied to the memory device <b>130</b> by the sub-controller <b>50</b>. The data signal CSDA is a signal that appears on the data signal line LD<b>1</b> connecting the sub-controller <b>50</b> and the memory device <b>130</b>. In <figref idref="DRAWINGS">FIG. 9</figref>, the data direction of the data signal CSDA is indicated as well. The rightward pointing arrows represent the direction in which the sub-controller <b>50</b> is at the sending side and the memory device <b>130</b> is at the receiving side. The leftward pointing arrows represent the direction in which the sub-controller <b>50</b> is at the receiving side and the memory device <b>130</b> is at the sending side. In the present embodiment, the memory device <b>130</b> sends and receives data synchronously with the rise of the clock signal CSCK presented to it by the sub-controller <b>50</b>. Sending and receiving of data takes place when the clock signal CSCK rises and the level of the data signal on the data terminal of the memory device <b>130</b> has a valid value for sending or receiving of data. <figref idref="DRAWINGS">FIG. 10</figref> is a flowchart schematically depicting the processing routine an operation executed by the memory control circuit <b>136</b> on the memory side.</p>
<p id="p-0089" num="0088">The main controller <b>40</b> of the printer <b>20</b>, via the bus BS, sends the sub-controller <b>50</b> a Read command instructing that a read operation from the memory device <b>130</b> of the ink cartridge <b>100</b> be carried out. The communication process module <b>55</b> supplies the power supply voltage CVDD to each of the ink cartridges <b>100</b> via the first power supply line LCV. Specifically, the memory device <b>130</b> of each of the ink cartridges <b>100</b> is supplied with operating voltage, thereby placing the memory device <b>130</b> in the operational state. After supplying the power supply voltage CVDD, a low level reset signal is supplied to initialize the memory devices <b>130</b>. Because the reset signal remains at low level since the time that the previous access ended, it is at low level even before the power supply voltage CVDD is supplied to the memory device <b>130</b>. When the communication process module <b>55</b> of the sub-controller <b>50</b> receives the Read command, the read operation depicted in the flowchart of <figref idref="DRAWINGS">FIG. 8</figref> starts.</p>
<p id="p-0090" num="0089">When the read operation starts, the communication process module <b>55</b> transitions the reset signal CRST from low level to high level, and transmits a clock signal CSCK of prescribed frequency (<figref idref="DRAWINGS">FIG. 9</figref>). When the reset signal CRST rises from low level to high level, the memory device <b>130</b> goes into a standby state to accept a data signal CSDA from the communication process module <b>55</b>.</p>
<p id="p-0091" num="0090">The communication process module <b>55</b> first transmits SOF (Start Of Frame) data as a data signal CSDA (<figref idref="DRAWINGS">FIG. 8</figref>: Step S<b>102</b>, <figref idref="DRAWINGS">FIG. 9</figref>). The SOF data is an 8-bit data signal having a prescribed waveform, and transmitted in sync with the clock signal CSCK. The purpose of transmitting the SOF is to notify the memory device <b>130</b> of the start of communication.</p>
<p id="p-0092" num="0091">Following the SOF data, the communication process module <b>55</b> sends an operation code. An operation code is a sequence of identification data and command data. Command data is data for indicating a particular type of access (e.g. a read or write operation) to the memory device <b>130</b>. The communication process module <b>55</b> sends identification data as a data signal CSDA (<figref idref="DRAWINGS">FIG. 8</figref>: Step S<b>104</b>). The identification data is identification information that specifies the memory device <b>130</b> of an ink cartridge <b>100</b> that is targeted for a read operation, and includes identification data of 8 bits and inverted identification data of 8 bits (<figref idref="DRAWINGS">FIG. 9</figref>). Here, the inverted data is data of the same size (same number of bits) as the original data, but in the data the value of each bit of the original data is inverted. For example, if an m-th value (m is a natural number) of the original data is a &#x201c;1&#x201d;, in the inverted data, the m-th value becomes a &#x201c;0&#x201d;; and if an m-th value of the original data is a &#x201c;0&#x201d;, in the inverted data, the m-th value becomes a &#x201c;1&#x201d;. Hereinbelow where original data is denoted by the symbol A, the inverted data thereof is denoted by a preceding/(slash symbol), i.e. /A. For example, for original data A=(01001001), the inverted data /A=(10110110). The inverted identification data is generated by the main controller <b>40</b> or the communication process module <b>55</b> on the basis of the identification data. By duplicating the identification data in this way, unintended operation of the memory device <b>130</b> of an ink cartridge <b>100</b> not targeted for operation may be avoided.</p>
<p id="p-0093" num="0092">Following the identification data, the communication process module <b>55</b> sends command data as a data signal CSDA (<figref idref="DRAWINGS">FIG. 8</figref>: Step S<b>106</b>). Command data includes original command data of 8 bits and inverted command data of 8 bits (<figref idref="DRAWINGS">FIG. 9</figref>). Here, because the operation is a read operation from the memory device <b>130</b> to the sub-controller <b>50</b>, the command data sent in the operation is a command indicating a read operation (Read command). In the original command data CM, of the 8 bits, the upper 4 bits and the lower 4 bits have an inverted relationship to each other. For example, if the upper 4 bits of the original command data CM are &#x201c;0110&#x201d; the lower 4 bits of the original command data CM are &#x201c;1001&#x201d;, and the inverted command data /CM are &#x201c;10010110&#x201d;. The inverted command data are generated by the main controller <b>40</b> or the communication process module <b>55</b> on the basis of the original command data. By providing such redundancy of command data, erroneous operation of the memory device <b>130</b> can be avoided.</p>
<p id="p-0094" num="0093">In synchronization with the next rise of the clock signal CSCK following the end of transmission of the command data, reception of the read data sent from the memory device <b>130</b> starts. The communication process module <b>55</b> receives read data including data that is read out from a row of the memory device <b>130</b>. To discuss in more detail, the communication process module <b>55</b> receives a unit of read data equivalent to 8 bits&#xd7;8=64 bits, doing so sequentially one bit at a time in sync with rise of the clock signal CSCK (<figref idref="DRAWINGS">FIG. 8</figref>: Step S<b>108</b>, <figref idref="DRAWINGS">FIG. 9</figref>). The 64-bit unit of read data consist of original data upper 8 bits UDn (n is a natural number); inverted original data upper 8 bits /UDn representing inverted data of the original data upper 8 bits UDn; original data lower 8 bits LDn; inverted original data lower 8 bits /LDn representing inverted data of the original data lower 8 bits LDn; mirror data upper 8 bits Udn representing mirror data of the original data upper 8 bits UDn; inverted mirror data upper 8 bits /Udn representing inverted original data upper 8 bits Udn; mirror data lower 8 bits Ldn representing mirror data of the original data lower 8 bits LDn; and inverted mirror data lower 8 bits /Ldn representing inverted original data lower 8 bits Ldn (<figref idref="DRAWINGS">FIG. 9</figref>).</p>
<p id="p-0095" num="0094">The 16-bit data having the original data upper 8 bits UDn as its upper bits and the original data lower 8 bits LDn as its lower bits are also referred to as original data Dn. The 16-bit data having the inverted original data upper 8 bits /UDn as its upper bits and the inverted original data lower 8 bits /LDn as its lower bits are also referred to as inverted data /Dn. The 16-bit data having the mirror data upper 8 bits Udn as its upper bits and the mirror data lower 8 bits Ldn as its lower bits are also referred to as mirror data dn. The 16-bit data having the inverted mirror data upper 8 bits /Udn as its upper bits and the inverted mirror data lower 8 bits /Ldn as its lower bits are also referred to as inverted mirror data /dn. That is, the unit of read data can be said to represent data made up of original data Dn, inverted data /Dn, mirror data dn, and inverted mirror data /dn. Ultimately, by repeating reception of units of read data n times, the communication process module <b>55</b> of the sub-controller <b>50</b> receives all of the data that is to be read (discussed later). It should be noted that the original data Dn and mirror data dn are read out from the memory cell array <b>132</b> while the inverted data /Dn and inverted mirror data /dn are generated from the original data Dn and mirror data dn by the inverted data generation module M<b>18</b>.</p>
<p id="p-0096" num="0095">When a unit of read data is received, the communication process module <b>55</b> temporarily stores the unit of read data in a register (not shown) and executes the process described below. First, from the unit of read data, the communication process module <b>55</b> decides whether or not the exclusive OR of an m-th value of the original data Dn and an m-th value of the inverted mirror data /dn is true &#x201c;1&#x201d; for all values of m (1&#x2266;m&#x2266;16) (<figref idref="DRAWINGS">FIG. 8</figref>: Step S<b>110</b>). In general, the output of an exclusive OR circuit is true &#x201c;1&#x201d; if the two inputs have different values, and is false &#x201c;0&#x201d; if the two inputs have an identical value. If the output of the exclusive OR operation is true for all 16 bits, i.e. if 1111111111111111=FFFF in hexadecimal notation (<figref idref="DRAWINGS">FIG. 8</figref>: Step S<b>110</b>: YES), the communication process module <b>55</b> decides that the communication status and the memory cells that have been read are normal, and stores the original data Dn and the inverted mirror data /dn in an allocated memory area (discussed above) of the SRAM <b>551</b> (<figref idref="DRAWINGS">FIG. 8</figref>: Step S<b>120</b>).</p>
<p id="p-0097" num="0096">If on the other hand the output of the exclusive OR operation is false &#x201c;0&#x201d; for any of the 16 bits, i.e. if not FFFF (<figref idref="DRAWINGS">FIG. 8</figref>: Step S<b>110</b>: NO), the communication process module <b>55</b> decides whether or not the exclusive OR of an m-th value of the original data Dn and an m-th value of the inverted data /Dn is true &#x201c;1&#x201d; for all values of m (1&#x2266;m&#x2266;16) (<figref idref="DRAWINGS">FIG. 8</figref>: Step S<b>112</b>). If the output of the exclusive OR operation is FFFF (<figref idref="DRAWINGS">FIG. 8</figref>: Step S<b>112</b>: YES), the communication process module <b>55</b> decides whether or not the exclusive OR of an m-th value of the mirror data dn and an m-th value of the inverted mirror data /dn is true &#x201c;1&#x201d;, for all values of m (1&#x2266;m&#x2266;16) (Step S<b>114</b>). If the exclusive OR operation outcomes for all the m-th values of the original data Dn and all the m-th values of the inverted data /Dn are not FFFF (<figref idref="DRAWINGS">FIG. 8</figref>: Step S<b>112</b>: NO), or if the exclusive OR outcomes for all the m-th values of the mirror data dn and all the m-th values of the inverted mirror data /dn are not FFFF (<figref idref="DRAWINGS">FIG. 8</figref>: Step S<b>114</b>: NO), the communication process module <b>55</b> decides that there is a communication error, and stores the original data Dn and the inverted mirror data /dn to a memory area allocated in the SRAM <b>551</b>, as well as saving a prescribed communication error code indicating the communication error to the error code register <b>553</b> in the communication process module <b>55</b> (<figref idref="DRAWINGS">FIG. 8</figref>: Step S<b>118</b>), then carry out a prescribed error process (Step S<b>124</b>) and terminate the read operation. The error code register <b>553</b> may also store included information indicating whether the communication error occurred in communication of the original data from the memory device (corresponds to NO in S<b>112</b>) or whether the communication error occurred in communication of the mirror data from the memory device (corresponds to NO in S<b>114</b>). The prescribed error process may involve notifying the main controller <b>40</b> of the communication error, or that the read operation is ceased, for example. The prescribed error process may also be omitted. By referring to the communication error code stored in the SRAM <b>551</b>, the main controller <b>40</b> acknowledges the occurrence of a communication error. If the main controller <b>40</b> further acknowledges whether the communication error is occurred in the original data or the mirror data, the data in which no communication error is occurred may be utilized for processes executed by the main controller <b>40</b>.</p>
<p id="p-0098" num="0097">If the exclusive OR operation outcomes for all the m-th values of the original data Dn and all the m-th values of the inverted data /Dn are FFFF (<figref idref="DRAWINGS">FIG. 8</figref>: Step S<b>112</b>: YES), and if the exclusive OR outcomes for all the m-th values of the mirror data do and all the m-th values of the inverted mirror data /dn are FFFF (<figref idref="DRAWINGS">FIG. 8</figref>: Step S<b>114</b>: YES), there is a high probability that the data that was stored in the original data area of the memory device <b>130</b> and that the data that was stored in the mirror data area do not have consistency; therefore, the communication process module <b>55</b> decides that a memory cell error is occurred in the memory device <b>130</b>, and then stores the original data Dn and the inverted mirror data /dn to an allocated memory area in the SRAM <b>551</b>, as well as saving a prescribed communication error code indicating the cell error to the error code register <b>553</b> in the communication process module <b>55</b> (<figref idref="DRAWINGS">FIG. 8</figref>: Step S<b>116</b>). A cell error is a problem whereby, in either a memory cell storing original data targeted for the operation or a memory cell storing mirror data targeted for the operation, the memory cell per se becomes damaged so that the saved information can no longer be saved correctly.</p>
<p id="p-0099" num="0098">Once Step S<b>120</b> or Step S<b>116</b> is executed, the communication process module <b>55</b> decides whether all data targeted for the read operation are read out (<figref idref="DRAWINGS">FIG. 8</figref>: Step S<b>122</b>). If all of the data to be read are read (<figref idref="DRAWINGS">FIG. 8</figref>: Step S<b>122</b>: YES), the communication process module <b>55</b> terminates the read operation. Once the communication process module <b>55</b> terminates the read operation as depicted in <figref idref="DRAWINGS">FIG. 9</figref>, it transits the reset signal CRST from high level to low level, and ceases to supply the clock signal CSCK. Once the communication process module <b>55</b> ceases to supply the clock signal CSCK, it then ceases to supply the power supply voltage CVDD. If not all of the data to be read are read yet (<figref idref="DRAWINGS">FIG. 8</figref>: Step S<b>122</b>: NO), the communication process module <b>55</b> returns to Step S<b>108</b> and repeats the process discussed above for the next unit of read data. For example, once the above process is carried out for the first unit of read data D<b>1</b>, /D<b>1</b>, d<b>1</b>, /d<b>1</b>, the above process is then carried out for the second unit of read data D<b>2</b>, /D<b>2</b>, d<b>2</b>, /d<b>2</b>. In the present embodiment, once reading of Row A<b>1</b> is complete, reading of Row A<b>2</b> takes place. Read operations are repeated until the information in the rows storing the information that the main controller <b>40</b> intends to read is read out.</p>
<p id="p-0100" num="0099">The discussion now turns to processing that takes place on the memory device <b>130</b> (memory device processing) in response to a read operation from the memory device <b>130</b> at the communication process module <b>55</b> discussed above. Because processing executed in the memory device <b>130</b> is the same up to step of receiving the operation code and step of parsing the command data (type of access), the discussion is not limited to read operations and includes other processes (e.g. write operations) as well. The memory device <b>130</b> receives input of power supply voltage CVDD from the sub-controller <b>50</b> and is activated. The memory device <b>130</b> then initializes itself in response to input of a low level reset signal CRST. After receiving supply of power supply voltage CVDD, because the reset signal CRST is low (<figref idref="DRAWINGS">FIG. 9</figref>), the memory device <b>130</b> goes into the initialized state and initiates memory device side processing.</p>
<p id="p-0101" num="0100">After initialization of the memory device <b>130</b> is carried out, the address counter M<b>13</b> is set to its initial value at the time of initialization, and the various registers are reset to their initial values as well. Additionally, the data send/receive module M<b>15</b> of the memory device <b>130</b> sets the send/receive direction for data exchanged via the data terminal to the direction in which the memory device <b>130</b> receives data from the sub-controller <b>50</b>. The read/write control module M<b>14</b> sets the data transfer direction vis-&#xe0;-vis the ferroelectric memory array <b>132</b> to the data read direction.</p>
<p id="p-0102" num="0101">As depicted in <figref idref="DRAWINGS">FIG. 10</figref>, once processing is initiated on the memory device, the memory control circuit <b>136</b> of the memory device <b>130</b> receives SOF data as a data signal CSDA (<figref idref="DRAWINGS">FIG. 10</figref>: Step S<b>210</b>). Following the SOF data, the memory control circuit <b>136</b> receives identification data (<figref idref="DRAWINGS">FIG. 10</figref>: Step S<b>210</b>). Once the identification data is received, the ID comparator module M<b>11</b> determines whether the received identification data is correct (Step S<b>225</b>). Specifically, for the identification data and the inverted identification data included in the received identification data, the ID comparator module M<b>11</b> takes the exclusive OR one bit at a time, and determine whether all output values of the exclusive OR are 1's. That is, it determines whether there are any communication errors in the received identification data. If there are no communication errors, the received identification data is deemed to be correct, whereas if communication errors are found, the received identification data is deemed to be not correct. In the event that the ID comparator module M<b>11</b> decides that the received identification data is not correct (<figref idref="DRAWINGS">FIG. 10</figref>: Step S<b>225</b>: NO), it terminates with no further processing.</p>
<p id="p-0103" num="0102">If on the other hand the ID comparator module M<b>11</b> decides that the received identification data is correct (Step S<b>225</b>: YES), it then decides whether the ID number (identification information) that is assigned to the memory device <b>130</b> itself matches the received identification data (<figref idref="DRAWINGS">FIG. 10</figref>: Step S<b>230</b>). At this time, because the address counter M<b>13</b> is currently selecting Row A<b>0</b> by the initialization, the read/write control module M<b>14</b> reads out the ID number (identification information) that is stored in Row A<b>0</b>. The ID comparator module M<b>11</b> then accepts the ID number (identification information) that is assigned to the memory device in the first row (<figref idref="DRAWINGS">FIG. 7</figref>: Row A<b>0</b>) of the memory area read out by the read/write control module M<b>14</b>, and compares bit for bit the ID number (identification information) assigned to the memory device with the identification data contained in the identification data that has been sent from the communication process module <b>55</b>. If the ID number (identification information) assigned to the memory device and the received identification data do not match, the ID comparator module M<b>11</b> decides that the ID number (identification information) assigned to the memory device and the received identification data do not match.</p>
<p id="p-0104" num="0103">If the ID comparator module M<b>11</b> decides that the ID number (identification information) assigned to the memory device does not match the received identification data (<figref idref="DRAWINGS">FIG. 10</figref>: Step S<b>230</b>: NO), the memory control circuit <b>136</b> terminates with no further processing. If the ID comparator module M<b>11</b> decides that the ID number (identification information) assigned to the memory device matches the received identification data (<figref idref="DRAWINGS">FIG. 10</figref>: Step S<b>230</b>: YES), the memory control circuit <b>136</b> receives the command data that is transmitted as a data signal CSDA subsequent to the identification data (<figref idref="DRAWINGS">FIG. 10</figref>: Step S<b>240</b>). Once the command data is received, the command parse module M<b>12</b> of the memory control circuit <b>136</b> first determines whether the received command data is correct (Step S<b>245</b>). Specifically, the command parse module M<b>12</b> decides whether the upper 4 bits and the lower 4 bits of the original command data contained in the received command data are inverted data of one another. The command parse module M<b>12</b> additionally decides whether the upper 4 bits and the lower 4 bits of the inverted command data contained in the received command data are inverted data of one another. The command parse module M<b>12</b> also takes the exclusive OR one bit at a time for the original command data and the inverted command data, and decide whether or not all output values of the exclusive OR are l&#x2032;s. If the upper 4 bits and the lower 4 bits of the original command data contained in the received command data are found to be inverted data of one another, the upper 4 bits and the lower 4 bits of the inverted command data contained in the received command data are found to be inverted data of one another, and an exclusive OR result of 1 is obtained for all bits of the original command data and the inverted command data, the command parse module M<b>12</b> decides that the received command data is correct (devoid of communication errors). If on the other hand the upper 4 bits and the lower 4 bits of the original command data contained in the received command data are not found to be inverted data of one another, or the upper 4 bits and the lower 4 bits of the inverted command data contained in the received command data are not found to be inverted data of one another, or the exclusive OR result is not 1 for any bit of the original command data and the inverted command data, the command parse module M<b>12</b> decides that the received command data is not correct (contains communication errors).</p>
<p id="p-0105" num="0104">In the event of a decision that the command data is not correct (Step S<b>245</b>: NO), the memory control circuit <b>136</b> terminates processing. If on the other hand it is decided that command data is correct (Step S<b>245</b>: YES), the command parse module M<b>12</b> of the memory control circuit <b>136</b> parses the received command and determine the type of access (<figref idref="DRAWINGS">FIG. 10</figref>: Step S<b>250</b>). Here, possible types of command data includes at least a Write command, a Read command, and a Write Lock command. A Write command is a command instructing that data be written into the ferroelectric memory array <b>132</b>. A Read command is a command instructing that data be read from the ferroelectric memory array <b>132</b>. A Write Lock command is a command instructing that of a write lock operation, discussed later, be executed on the memory device; the command instructs that a Write Lock flag, indicating that a specified row of the ferroelectric memory cell array <b>132</b> is a write-prohibited row, be written into the control area, in order to prohibit write operations to the row from the communication process module <b>55</b>.</p>
<p id="p-0106" num="0105">If the command directed to the memory device <b>130</b> does not correspond to any of the above types of command, the command parse module M<b>12</b> decides that the command data is not parsable. If the command parse module M<b>12</b> decides that the command data is not parsable, the memory control circuit <b>136</b> proceeds to terminate, and do nothing (not shown).</p>
<p id="p-0107" num="0106">If the command parse module M<b>12</b> decides that the command indicated by the command data is a Read command, the memory control circuit <b>136</b> executes a read operation on the memory device (<figref idref="DRAWINGS">FIG. 10</figref>: Step S<b>260</b>). If the command parse module M<b>12</b> decides that the command indicated by the command data is a Write command, the memory control circuit <b>136</b> executes a write operation on the memory device (<figref idref="DRAWINGS">FIG. 10</figref>: Step S<b>280</b>). If the command parse module M<b>12</b> decides that the command indicated by the command data is a Write Lock command, the memory control circuit <b>136</b> executes a write lock operation on the memory device (<figref idref="DRAWINGS">FIG. 10</figref>: Step S<b>270</b>). If a read operation on the printer <b>20</b> depicted in <figref idref="DRAWINGS">FIG. 8</figref> is being carried out by the communication process module <b>55</b>, the memory control circuit <b>136</b> receives a Read command as command data; and as long as no communication error is occurred, the command parse module M<b>12</b> decides that the command indicated by the command data is a Read command, and the memory control circuit <b>136</b> executes the read operation on the memory device. The steps of the flowchart depicted in <figref idref="DRAWINGS">FIG. 10</figref> may be executed in a different order or in parallel, as long as no conflicts occurs in the process. For example, the memory control circuit <b>136</b> may decide if the identification data is correct after confirming a match between the identification data stored in the memory device and the identification data supplied from the communication process module <b>55</b>; or it may decide if the identification data is correct while receiving the command data in a parallel process.</p>
<p id="p-0108" num="0107"><figref idref="DRAWINGS">FIG. 11</figref> is a flowchart depicting the processing routine of a read operation (<figref idref="DRAWINGS">FIG. 10</figref>: Step S<b>260</b>) on the memory device. The read/write control module M<b>14</b> of the memory control circuit <b>136</b> reads data from the ferroelectric memory cell array <b>132</b> according to the address that is selected by the output of the address counter M<b>13</b>, and send it as a data signal CSDA to the communication process module <b>55</b>. After the operation code is received, if the command indicated by the command data is a Read command, the data send/receive module M<b>15</b> sets the send/receive direction of data to be exchanged via the data terminal to the direction of sending data from the memory device <b>130</b> to the sub-controller <b>50</b>. Moreover, if the command indicated by the command data is a read command, the counter control module M<b>16</b> supplies a control signal to the address counter M<b>13</b> specifying Row A<b>1</b> as the initial row targeted for reading. Then, based on the address specified by the count value of the address counter M<b>13</b>, the read/write control module M<b>14</b> reads out data into a register, not shown, from the ferroelectric memory array <b>132</b> in 1-row (32-bit) increments (<figref idref="DRAWINGS">FIG. 11</figref>: Step S<b>2602</b>). The first row to be read out is Row A<b>1</b> shown in <figref idref="DRAWINGS">FIG. 7</figref>.</p>
<p id="p-0109" num="0108">From the 32 bits that were read into the register, the data send/receive module M<b>15</b> first selects the upper 8 bits as the original data upper 8 bits UDn mentioned previously, and sends these to the sub-controller <b>50</b> (<figref idref="DRAWINGS">FIG. 11</figref>: Step S<b>2604</b>). Next, the inverted data generation module M<b>18</b> inverts each bit of the original data upper 8 bits UDn to generate inverted original data upper 8 bits /UDn. The data send/receive module M<b>15</b> then sends the generated inverted original data upper 8 bits /UDn to the sub-controller <b>50</b> (<figref idref="DRAWINGS">FIG. 11</figref>: Step S<b>2606</b>). Next, from the 32 bits that were read into the register, the data send/receive module M<b>15</b> selects the 8 bits from the 9th to 16th bits as the original data lower 8 bits LDn mentioned previously, and sends these to the sub-controller <b>50</b> (<figref idref="DRAWINGS">FIG. 11</figref>: Step S<b>2608</b>). Then, the inverted data generation module M<b>18</b> inverts each bit of the original data lower 8 bits LDn to generate inverted original data lower 8 bits /LDn. The data send/receive module M<b>15</b> then sends the generated inverted original data lower 8 bits /LDn to the sub-controller <b>50</b> (<figref idref="DRAWINGS">FIG. 11</figref>: Step S<b>2610</b>). Next, from the 32 bits that were read into the register, the data send/receive module M<b>15</b> selects the 8 bits from the 17th to 24th bits as the mirror data upper 8 bits Udn mentioned previously, and sends these to the sub-controller <b>50</b> (<figref idref="DRAWINGS">FIG. 11</figref>: Step S<b>2612</b>). Then, the inverted data generation module M<b>18</b> inverts each bit of the mirror data upper 8 bits Udn to generate inverted mirror data upper 8 bits /Udn. The data send/receive module M<b>15</b> then sends the generated inverted mirror data upper 8 bits /Udn to the sub-controller <b>50</b> (<figref idref="DRAWINGS">FIG. 11</figref>: Step S<b>2614</b>). Next, from the 32 bits that were read into the register, the data send/receive module M<b>15</b> selects the 8 bits from the 25th to 32nd bits as the mirror data lower 8 bits Ldn mentioned previously, and sends these to the sub-controller <b>50</b> (<figref idref="DRAWINGS">FIG. 11</figref>: Step S<b>2616</b>). Then, the inverted data generation module M<b>18</b> inverts each bit of the mirror data lower 8 bits Ldn to generate inverted mirror data lower 8 bits /Ldn. The data send/receive module M<b>15</b> then sends the generated inverted mirror data lower 8 bits /Ldn to the sub-controller <b>50</b> (<figref idref="DRAWINGS">FIG. 11</figref>: Step S<b>2618</b>).</p>
<p id="p-0110" num="0109">After sending of the 32 bits that are read into the register is finished, if transmission of all of the data that is requested to be read by the sub-controller <b>50</b> is not completed (<figref idref="DRAWINGS">FIG. 11</figref>: Step S<b>2620</b>: NO), the memory control circuit <b>136</b> returns to Step S<b>2602</b>, and repeats the process of Steps S<b>2602</b> to S<b>2618</b> for the data of the next row (32 bits) of the ferroelectric memory array <b>132</b>. Once transmission of all of the data is completed, the memory control circuit <b>136</b> terminates the process.</p>
<p id="p-0111" num="0110">In the event that the ID comparator module M<b>11</b> or the command parse module M<b>12</b> determines that the ID data or the command data CM includes a communication error, and the memory control circuit <b>136</b> terminates processing without any meaningful process accordingly, the memory device <b>130</b> does not transmit any data during the read data transmission period. As described previously, the data signal line LD<b>1</b> is maintained at a low level by the resistor R<b>1</b> of the sub-controller <b>50</b> when there is no data transmission between the sub-controller <b>50</b> and the memory device <b>130</b>. Then the communication process module <b>55</b> receives low level data during the entire period for receiving the original data Dn and the inverted data /Dn, whereby the decision of Step S<b>112</b> in <figref idref="DRAWINGS">FIG. 8</figref> is NO, and the communication process module <b>55</b> decides that a communication error is occurred. Through the read operation described above, original data Dn and inverted mirror data /dn are stored in the SRAM <b>551</b>. If an error is occurred, a communication or cell error code is stored in the error code register <b>553</b> of the communication process module <b>55</b>. The original data Dn and inverted mirror data /dn, as well as any communication or cell error code, stored in the communication process module <b>55</b> are retrieved by the main controller <b>40</b>. For original data Dn and inverted mirror data /dn with no associated error code, the main controller <b>40</b> uses the original data Dn to carry out a prescribed control process (e.g. checking the remaining ink level or notifying the user of the remaining ink level). In the case of original data Dn and inverted mirror data /dn with an associated communication error code, the main controller <b>40</b> performs a communication error response process, for example, displaying on the display panel of the console portion <b>70</b> a message prompting the user to recheck installation of the ink cartridge <b>100</b>. Or, in the case of original data Dn and inverted mirror data /dn having an associated cell error code, the main controller <b>40</b> performs a parity check of the original data Dn and the inverted mirror data /dn, respectively, for which the cell error is diagnosed. As noted above, the original data Dn and the inverted mirror data /dn include actual data and parity data (<figref idref="DRAWINGS">FIG. 7</figref>). The main controller <b>40</b> selects the data, from the original data Dn and the inverted data /dn with the associated cell error, in which the 15 bits of actual data and the 1 bit of parity data have consistency, and uses it to carry out a prescribed control process. If as a result of the parity check of the original data Dn and inverted mirror data /dn with the associated cell error, both the original data Dn and inverted mirror data /dn are found to have a parity error, or if both have parity consistency, a message alerting the user of an ink cartridge <b>100</b> memory error is displayed on the display panel of the console portion <b>70</b>. Also, where readout from the memory device <b>130</b> is carried out for the purpose of verifying the write result of data written into the memory device <b>130</b>, the write data which is kept by the main controller <b>40</b> may be compared with the original data Dn and inverted mirror data /dn having the associated cell error, to determine whether the data is correct. In the present embodiment, in Step S<b>2602</b>, data stored in one row is read out from the memory cell array <b>132</b>, but readout of data from the memory cell array <b>132</b> need not take place in 1-row units, provided that subsequent to reception of the command data, data can be sent in sync with the clock signal provided to the memory device <b>130</b>, in order from Step S<b>2604</b> to Step S<b>2618</b>.</p>
<p id="h-0010" num="0000">Write Operation to Memory Device:</p>
<p id="p-0112" num="0111"><figref idref="DRAWINGS">FIG. 12</figref> is a flowchart depicting the processing routine of a write operation to the memory device <b>130</b>, executed by the sub-controller <b>50</b> on the printer <b>20</b>. <figref idref="DRAWINGS">FIG. 13</figref> is a drawing schematically depicting a memory map of the memory device <b>130</b> recognized by the main controller <b>40</b> on the printer <b>20</b> during a write operation to the memory device <b>130</b>. <figref idref="DRAWINGS">FIG. 14</figref> is a timing chart schematically depicting signals exchanged between the communication process module <b>55</b> of the printer <b>20</b> and the memory control circuit <b>136</b> of the memory device <b>130</b> during a write operation to the memory device <b>130</b>. In <figref idref="DRAWINGS">FIG. 14</figref>, as in <figref idref="DRAWINGS">FIG. 9</figref>, the power supply voltage CVDD, the reset signal CRST, the clock signal CSCK, the data signal CSDA, and the data direction are shown. FIG. <b>15</b> is a flowchart depicting the processing routine of a write operation executed by the memory control circuit <b>136</b> of the memory device <b>130</b>.</p>
<p id="p-0113" num="0112">Via the bus BS, the main controller <b>40</b> of the printer <b>20</b> writes to the SRAM <b>551</b> in the sub-controller <b>50</b>, the data that is to be written into the memory device <b>130</b> of a particular ink cartridge <b>100</b>. Specifically, this data is written into write target rows which are allocated in the SRAM <b>551</b> for writing of original data corresponding to the ferroelectric memory cell array <b>132</b> of the memory device <b>130</b>. During a write operation, the main controller <b>40</b> recognizes that the memory device <b>130</b> is a memory in which one row equals 16 bits. Thus, the data that is to be written into the memory device <b>130</b> is divided into 16-bit units, in which 16-bit unit the upper 15 bits are actual data and the lower 1 bit is parity data. The parity data may also be generated by the main controller <b>40</b>, appended to the upper 15 bit actual data, and written into the SRAM <b>551</b> as data of 16 bits in total. Alternatively, the parity data may also be generated by the sub-controller <b>50</b>, and appended each time that 15-bit data is written into the SRAM <b>551</b> by the main controller <b>40</b>. The main controller <b>40</b> then transmits to the sub-controller <b>50</b> via the bus a Write command instructing that the write-targeted memory device <b>130</b> be notified, and that the data that is written into the SRAM <b>551</b> be written into the memory device <b>130</b> that is targeted for the write operation. Upon receiving the Write command, the sub-controller <b>50</b> supplies each ink cartridge <b>100</b> with the power supply voltage CVDD via the first power supply line LCV, placing the memory device <b>130</b> of each ink cartridge <b>100</b> in the operable state. After the power supply voltage CVDD is supplied by the sub-controller <b>50</b>, a low level reset signal CRST is supplied by the sub-controller <b>50</b> and the memory devices <b>130</b> is initialized. Because the reset signal remains at low level since the time that the previous access ended, it is at low level even before the power supply voltage CVDD is supplied to the memory devices <b>130</b>. The communication process module <b>55</b> of the sub-controller <b>50</b> then initiates the write operation shown in the flowchart of <figref idref="DRAWINGS">FIG. 12</figref>.</p>
<p id="p-0114" num="0113">During write operations, the communication process module <b>55</b> recognizes the memory map depicted in <figref idref="DRAWINGS">FIG. 13</figref> as the memory map of the memory device <b>130</b>. That is, during write operations, in the actual memory map corresponding to the actual ferroelectric memory array (<figref idref="DRAWINGS">FIG. 7</figref>), the communication process module <b>55</b> recognizes only the presence of the block storing the original data (the left hand block in <figref idref="DRAWINGS">FIG. 7</figref>), and does not recognize the presence of the block storing mirror data. The communication process module <b>55</b> recognizes that multiple rows each consisting of a memory area containing 16 bits per row are arrayed in the block storing the original data.</p>
<p id="p-0115" num="0114">When the write operation starts, the communication process module <b>55</b> transitions the reset signal CRST from low level to high level, and transmits a clock signal CSCK of a prescribed frequency (<figref idref="DRAWINGS">FIG. 14</figref>). When the reset signal CRST rises from low level to high level, the memory control circuit <b>136</b> of the memory device <b>130</b> goes into a standby state to accept a data signal CSDA from the communication process module <b>55</b>.</p>
<p id="p-0116" num="0115">As in the read operation described earlier, the communication process module <b>55</b> first transmits SOF data as a data signal CSDA (<figref idref="DRAWINGS">FIG. 12</figref>: Step S<b>302</b>, <figref idref="DRAWINGS">FIG. 14</figref>). As in the read operation described earlier, following the SOF data, the communication process module <b>55</b> sends identification data as a data signal CSDA (<figref idref="DRAWINGS">FIG. 12</figref>: Step S<b>304</b>, <figref idref="DRAWINGS">FIG. 14</figref>). Following the identification data, the communication process module <b>55</b> sends command data as a data signal CSDA (<figref idref="DRAWINGS">FIG. 14</figref>: Step S<b>306</b>, <figref idref="DRAWINGS">FIG. 14</figref>). The command data sent in the present operation is a Write command indicating a write operation.</p>
<p id="p-0117" num="0116">In sync with the next rise of the clock signal CSCK following the end of transmission of the command data, the communication process module <b>55</b> sends the write data so that the memory control circuit <b>136</b> of the memory device <b>130</b> receives the data one bit at a time. The write data is sent in row order starting from the data to be written into Row A<b>1</b>. Specifically, the communication process module <b>55</b> sequentially sends unit write data equivalent to 8 bits&#xd7;4=32 bits (<figref idref="DRAWINGS">FIG. 14</figref>). A 32-bit unit of write data includes original data upper 8 bits UDn; inverted original data upper 8 bits /UDn representing inverted data of the original data upper 8 bits UDn; original data lower 8 bits LDn; and inverted original data lower 8 bits /LDn representing inverted data of the original data lower 8 bits LDn (<figref idref="DRAWINGS">FIG. 14</figref>). The communication process module <b>55</b> sends the total of 32 bits in the order of: original data upper 8 bits UDn, inverted original data upper 8 bits /UDn, original data lower 8 bits LDn, and inverted original data lower 8 bits /LDn (Steps S<b>308</b> to S<b>314</b>).</p>
<p id="p-0118" num="0117">In sync with the next rise of the clock signal CSCK following the end of transmission of a unit of write data, the communication process module <b>55</b> receives a 1-bit (either a &#x201c;1&#x201d; or a &#x201c;0&#x201d;) response signal from the memory control circuit <b>136</b> (<figref idref="DRAWINGS">FIG. 12</figref>: Step S<b>316</b>, <figref idref="DRAWINGS">FIG. 14</figref>). A &#x201c;1&#x201d; (high level) response signal (hereinafter also called an OK response signal) is a signal indicating that a unit of write data was received correctly at the memory device <b>130</b>, while a &#x201c;0&#x201d; (low level) response signal (hereinafter also called an NG response signal) is a signal indicating that a unit of write data may not be received correctly at the memory device <b>130</b>. The reason for adopting a high level OK response signal in the response signal is that, as noted earlier, the data signal line LD<b>1</b> is connected to low level potential via the pull-down resistor R<b>1</b>. This prevents that an high level OK response signal is erroneously input to the communication process module <b>55</b> due to an communication error caused, for example, by faulty contact between the data terminal <b>260</b> and the terminal <b>460</b> of the connection mechanism <b>400</b>.</p>
<p id="p-0119" num="0118">If the received response signal is not affirmative (<figref idref="DRAWINGS">FIG. 12</figref>: Step S<b>318</b>: NO), i.e. if the received response signal is NG response signal, the communication process module <b>55</b> carries out a prescribed error process (<figref idref="DRAWINGS">FIG. 12</figref>: Step S<b>320</b>) and terminate the write operation. The error process may involve, for example, trying to resend the same unit of write data, and if as a result of a certain number of retries only a NG response signal is obtained, notifying the main controller <b>40</b> of the error. The main controller <b>40</b> would then display on the display panel of the console portion <b>70</b> a message prompting the user to recheck installation of the ink cartridge <b>100</b> for example.</p>
<p id="p-0120" num="0119">If on the other hand the received response signal is affirmative (<figref idref="DRAWINGS">FIG. 12</figref>: Step S<b>318</b>: YES), i.e. if an OK response signal is received, the communication process module <b>55</b> decides whether all of the data to be written to the memory device <b>130</b> has been sent (<figref idref="DRAWINGS">FIG. 12</figref>: Step S<b>322</b>). If all of the data to be written has been sent (<figref idref="DRAWINGS">FIG. 12</figref>: Step S<b>322</b>: YES), the communication process module <b>55</b> sends EOF (End of Frame) data to the memory device <b>130</b> (<figref idref="DRAWINGS">FIG. 12</figref>: Step S<b>324</b>), and terminate the write operation. Once the communication process module <b>55</b> terminates the write process as depicted in <figref idref="DRAWINGS">FIG. 14</figref>, it transits the reset signal CRST from high level to low level, and ceases to supply the clock signal CSCK. The EOF data may be 8-bit data for example, and may be either significant data or simple dummy data. If not all of the data to be written has been sent (<figref idref="DRAWINGS">FIG. 12</figref>: Step S<b>322</b>: NO), the communication process module <b>55</b> returns to Step S<b>308</b> and repeats the process discussed above for the next unit of write data. For example, once the above process is carried out for the first unit of write data UD<b>1</b>, /UD<b>1</b>, LD<b>1</b>, /LD<b>1</b>, the communication process module <b>55</b> carries out the above process for the second unit of write data UD<b>2</b>, /UD<b>2</b>, LD<b>2</b>, /LD<b>2</b> for example.</p>
<p id="p-0121" num="0120">The discussion now turns to processing that takes place on the memory device <b>130</b> (memory device processing) in response to a write operation to the memory device <b>130</b> on the printer <b>20</b> side discussed above. The memory device processing in response to the write operation is the same as that during a read operation from S<b>210</b> to S<b>250</b> in <figref idref="DRAWINGS">FIG. 10</figref>. In the case of a write operation, in Step S<b>240</b> of <figref idref="DRAWINGS">FIG. 10</figref> the memory control circuit <b>136</b> of the memory device <b>130</b> receives a Write command. Consequently, the memory control circuit <b>136</b> having received the Write command executes the memory device write operation of Step S<b>280</b> (<figref idref="DRAWINGS">FIG. 10</figref>).</p>
<p id="p-0122" num="0121"><figref idref="DRAWINGS">FIG. 15</figref> is a flowchart depicting the process steps of a write operation on the memory device. After an operation code is received, if the command data is a Write command, then in the same manner as in the read operation, the counter control module M<b>16</b> controls the clock count value of the address counter M<b>13</b> so as to specify Row A<b>1</b> as the initial row targeted for writing. Then, based on the address specified by the count value of the address counter M<b>13</b>, the read/write control module M<b>14</b> executes the write operation. Specifically, when the write operation is initiated, the data send/receive module M<b>15</b> of the memory control circuit <b>136</b>, in sync with rise of the clock signal CSCK, sequentially receives signals (1's or 0's) that appear on the data signal line LD<b>1</b> following the command data, and sequentially stores these in the register. As a result, the data send/receive module M<b>15</b> sequentially receives the 32-bit write data, i.e. the original data upper 8 bits UDn, inverted original data upper 8 bits /UDn, original data lower 8 bits LDn, and inverted original data lower 8 bits /LDn (<figref idref="DRAWINGS">FIG. 15</figref>: Steps S<b>2802</b> to S<b>2808</b>). After completing Step S<b>2808</b>, the data send/receive module M<b>15</b> changes the send/receive direction to the direction of sending from the memory device <b>130</b> to the sub-controller <b>50</b>, and sends the sub-controller <b>50</b> a response signal (either an NG response signal or OK response signal, discussed later) from the memory device <b>130</b>.</p>
<p id="p-0123" num="0122">When one unit of the 32-bit write data is received, the data determination module M<b>19</b> decides whether or not the exclusive OR of an m-th value of the original data Dn and an m-th value of the inverted mirror data /dn is true &#x201c;1&#x201d; for all values of m (1&#x2266;m&#x2266;16), i.e. whether or not it is FFFF (<figref idref="DRAWINGS">FIG. 15</figref>: Step S<b>2810</b>). The original data Dn referred to here is 16-bit data in which the original data upper 8 bits UDn received in the aforementioned Step S<b>2802</b> constitute the upper bits, and the original data lower 8 bits LDn received in the aforementioned Step S<b>2806</b> constitute the lower bits. The inverted data /Dn referred to here is 16-bit data in which the inverted original data upper 8 bits /UDn received in the aforementioned Step S<b>2804</b> constitute the upper bits, and the inverted original data lower 8 bits /LDn received in the aforementioned Step S<b>2808</b> constitute the lower bits.</p>
<p id="p-0124" num="0123">If the output of the exclusive OR operation (determination outcome by the data determination module M<b>19</b>) is false &#x201c;0&#x201d; for any of the 16 bits, i.e. if it is not FFFF (<figref idref="DRAWINGS">FIG. 15</figref>: Step S<b>2810</b>: NO), the data send/receive module M<b>15</b> sends an NG response signal (low level) to the communication process module <b>55</b> of the sub-controller <b>50</b> (<figref idref="DRAWINGS">FIG. 15</figref>: Step S<b>2812</b>). Since the data signal line LD<b>1</b> is maintained at a low level by the pull-down resistor R<b>1</b> of the sub-controller <b>50</b> when there is no data transmission on the line, it is permissible that the data send/receive module M<b>15</b> does not send any signal to the communication process module <b>55</b> of the sub-controller <b>50</b>, in place of sending an NG response signal. In this case, the communication process module <b>55</b> also recognizes the low level state of the data signal line LD<b>1</b> as an NG response signal. Accordingly, this is substantially equivalent to the case where an NG response signal is actually returned. Once the NG response signal has been sent, the write operation on the memory device terminates (abnormal termination).</p>
<p id="p-0125" num="0124">If on the other hand the output of the exclusive OR operation (determination outcome by the data determination module M<b>19</b>) is affirmative (true &#x201c;1&#x2019;) for all 16 bits, i.e. if it is FFFF (<figref idref="DRAWINGS">FIG. 15</figref>: Step S<b>2810</b>: YES), the data determination module M<b>19</b> performs a parity check of the received 16-bit original data Dn and determine the consistency of the data (<figref idref="DRAWINGS">FIG. 15</figref>: Step S<b>2813</b>). If the result of the parity check is that the data lacks consistency (<figref idref="DRAWINGS">FIG. 15</figref>: Step S<b>2813</b>: NO), the data send/receive module M<b>15</b> sends an NG response signal (low level) to the communication process module <b>55</b> of the sub-controller <b>50</b> (<figref idref="DRAWINGS">FIG. 15</figref>: Step S<b>2812</b>). Since the data signal line LD<b>1</b> is maintained at a low level by the pull-down resistor R<b>1</b> of the sub-controller <b>50</b> when there is no data transmission on the line, it is permissible that the data send/receive module M<b>15</b> does not send any signal to the communication process module <b>55</b> of the sub-controller <b>50</b>, thereby substantially sending an NG response signal. Once the NG response signal is sent, the write operation on the memory device terminates (abnormal termination). If on the other hand the result of the parity check is that the data has consistency (<figref idref="DRAWINGS">FIG. 15</figref>: Step S<b>2813</b>: YES), the data send/receive module M<b>15</b> sends an OK response signal (high level) via the data terminal to the communication process module <b>55</b> of the sub-controller <b>50</b> (<figref idref="DRAWINGS">FIG. 15</figref>: Step S<b>2814</b>).</p>
<p id="p-0126" num="0125">The response signal (either an NG response signal or an OK response signal) is transmitted in sync with the next rise of the clock signal CSCK following reception of a unit of the 32-bit write data (<figref idref="DRAWINGS">FIG. 14</figref>). Specifically, after the memory device <b>130</b> has received a unit of the 32-bit write data in sync with a clock signal sent from the sub-controller <b>50</b>, the memory device <b>130</b> sends a response signal to the sub-controller <b>50</b> in sync with the next clock signal sent from the sub-controller <b>50</b>. In the event that the ID comparator module M<b>11</b> or the command parse module M<b>12</b> determines that the ID data or the command data CM includes a communication error, and the memory control circuit <b>136</b> terminates operation without any meaningful process accordingly, the memory device <b>130</b> does not transmit any data during the response signal transmission period. As described previously, the data signal line LD<b>1</b> is maintained at a low level by the resistor R<b>1</b> of the sub-controller <b>50</b> when there is no data transmission between the sub-controller <b>50</b> and the memory device <b>130</b>. When the communication process module <b>55</b> detects a low level on the data signal line LD<b>1</b> during the response signal transmission period, the communication process module <b>55</b> decides that an NG signal is transmitted and a communication error is occurred. In other words, the transmission of NG signal in Step S<b>2812</b> is performed when some inconsistency is detected in the identification data or in the command data</p>
<p id="p-0127" num="0126">If an OK response signal is sent, the copy data generation module M<b>17</b> of the memory control circuit <b>136</b> generates mirror data dn which is a copy of the received 16-bit original data (<figref idref="DRAWINGS">FIG. 15</figref>: Step S<b>2816</b>). Specifically, in addition to the register for receiving original data Dn, the memory control circuit <b>136</b> is provided with a 16-bit register for storing mirror data dn, and the copy data generation module M<b>17</b> copies the original data Dn to generate the mirror data dn.</p>
<p id="p-0128" num="0127">Next, the read/write control module M<b>14</b> reads the previously stored data from the memory area targeted for writing (write-targeted memory area) of the original data Dn and the mirror data dn, whereupon the data determination module M<b>19</b> performs a parity check of the read out previously stored data (<figref idref="DRAWINGS">FIG. 15</figref>: Step S<b>2818</b>). The write-targeted memory area for a single batch write operation is equal to a single row on the memory map in <figref idref="DRAWINGS">FIG. 7</figref>. As shown in <figref idref="DRAWINGS">FIG. 7</figref>, the upper 16 bits of the write-targeted memory area (an area equivalent to one row) constitute an original data area for writing original data Dn, while parity data P is stored on the last bit of the original data area. The lower 16 bits of the write-targeted memory area (an area equivalent to one row) constitute a mirror data area for writing mirror data dn, while as in the original data area, parity data P is stored on the last bit of the mirror data area. In Step S<b>2818</b>, a parity check is performed respectively for the previously stored data that has been stored in the original data area of the write-targeted memory area, together with the previously stored data that has been stored in the mirror data area.</p>
<p id="p-0129" num="0128">Once the parity check is finished, the read/write control module M<b>14</b> carries out writing of data to the write-targeted memory area (<figref idref="DRAWINGS">FIG. 15</figref>: Step S<b>2820</b>). Here, if no parity error is detected in either the previously stored data of the original data area or the previously stored data of the mirror data area of the write-targeted memory area, the read/write control module M<b>14</b> writes the original data that was received in Steps S<b>2802</b>, S<b>2806</b> to the original data area, and write the mirror data that was generated in Step S<b>2816</b> to the mirror data area, respectively. If on the other hand a parity error is detected in the previously stored data of the original data area of the write-targeted memory area, but no parity error is detected in the previously stored data of the mirror data area of the write-targeted memory area, the read/write control module M<b>14</b> writes the previously stored data, rather than the received original data Dn, to the original data area, and writes the mirror data that is generated in Step S<b>2816</b> to the mirror data area, respectively. If no parity error is detected in the previously stored data of the original data area of the write-targeted memory area, but a parity error is detected in the previously stored data of the mirror data area of the write-targeted memory area, the read/write control module M<b>14</b> writes the original data that was received in Steps S<b>2802</b>, S<b>2806</b> to the original data area, and writes the previously stored data to the mirror data area, respectively. If a parity error is detected in both the previously stored data of the original data area and the previously stored data of the mirror data area of the write-targeted memory area, the read/write control module M<b>14</b> rewrites the previously stored data to both the original data area and the mirror data area. That is, for a memory area in which a parity error is encountered, the read/write control module M<b>14</b> performs a rewrite of the previously stored data, and for a memory area in which no parity error is encountered, it will perform an update of the data.</p>
<p id="p-0130" num="0129">When performing writing of data to a write-targeted memory area, the command parse module M<b>12</b> of the memory control circuit <b>136</b> decides whether all of the data for writing has been received (<figref idref="DRAWINGS">FIG. 15</figref>: Step S<b>2822</b>). The command parse module M<b>12</b> may decide that all of the data for writing has been received when it receives EOF data. Alternatively, it may decide that all of the data for writing has been received when it detects that the reset signal CRST has transitioned from high level to low level. If all of the data for writing has been received (<figref idref="DRAWINGS">FIG. 15</figref>: Step S<b>2822</b>: YES), the memory control circuit <b>136</b> terminates the write operation. If not all of the data for writing has been received, the memory control circuit <b>136</b> returns to Step S<b>2802</b> and repeat the process described above for the next unit of write data. For example, once the first unit of write data D<b>1</b> and /D<b>1</b> is received and the above process is carried out, next, the second unit of write data D<b>2</b> and /D<b>2</b> is received and the above process is carried out. In the present embodiment, because the address counter M<b>13</b> specifies word addresses sequentially, following Row A<b>1</b> write operations takes place in order of Row A<b>2</b>, Row A<b>3</b> . . . . Also, after transmission of an OK response signal (Step S<b>2814</b>), in order to receive the next unit of write data, the data send/receive module M<b>15</b> sets the send/receive direction for data exchanged via the data terminal to the direction in which the memory device <b>130</b> receives data from the sub-controller <b>50</b>. The steps of the flowchart depicted in <figref idref="DRAWINGS">FIG. 15</figref> may be executed in a different order or in parallel, provided that no conflicts are created. For example, the memory control circuit <b>136</b> may generate mirror data prior to sending an OK signal; or it may generate the mirror data while carrying out the parity check of previously stored data in a parallel operation.</p>
<p id="p-0131" num="0130">As described above, during a write operation (<figref idref="DRAWINGS">FIG. 14</figref>), identification data ID, inverted identification data /ID, write command data CM, inverted write command data /CM, and a set of write data D<b>1</b> and inverted write data /D<b>1</b> of a prescribed size are transmitted in this order from the communication process module <b>55</b> to the memory device <b>130</b>; after which the second and subsequent sets of write data Dn and inverted write data /Dn are transmitted repeatedly, one set at a time. In the example of <figref idref="DRAWINGS">FIG. 14</figref>, the data size of one set of write data Dn and inverted write data /Dn is 32 bits; however, some other data size may be established instead. From the time that reception of identification data ID starts until reception of the first set of write data D<b>1</b> and inverted write data /D<b>1</b> is finished, the memory control circuit <b>136</b> of the memory device <b>130</b> does not send any OK or NG response signals indicative of a consistency determination result for the received data to the communication process module <b>55</b>, but rather sends an OK or NG response signal indicative of the consistency determination result to the communication process module <b>55</b> only after reception of the first set of write data D<b>1</b> and inverted write data /D<b>1</b> is finished. Likewise, with regard to the second and subsequent sets of write data Dn and inverted write data /Dn, an OK or NG response signal indicative of the determination result for each set is sent from the memory control circuit <b>136</b> to the communication process module <b>55</b> each time that reception of the set is completed. In this way, each time that one set of write data Dn and inverted write data /Dn of prescribed size is received, an OK or NG response signal indicative of the consistency determination result for the set is sent to the communication process module <b>55</b>, so the reliability of communications between the communication process module <b>55</b> and the memory device <b>130</b> is enhanced.</p>
<p id="p-0132" num="0131">In the initial phase of a write operation, from the time that reception of identification data ID starts until reception of the first set of write data D<b>1</b> and inverted write data /D<b>1</b> is finished, no data consistency determination results are sent to the communication process module <b>55</b>, and thus the number of times that determination results are sent from the memory device <b>130</b> to the communication process module <b>55</b> is reduced, and the write operation as a whole is carried out efficiently. Moreover, in write operations, consistency of the identification data ID and inverted identification data /ID, and consistency of the write command data CM and the inverted write command data /CM, are determined as in read operations (see Steps S<b>220</b> to S<b>245</b> of <figref idref="DRAWINGS">FIG. 10</figref>). If the identification data ID and/or write command data CM lack consistency, the memory control circuit <b>136</b> terminates the process without carrying out writing of the received data to the memory cell array <b>132</b>. In this case, during the initial response signal transmission period (the period following transmission of the data UD<b>1</b>, /UD<b>1</b>, LD<b>1</b>, /LD<b>1</b>), no OK response signal is sent from the memory device <b>130</b> to the communication process module <b>55</b> and an NG response signal is sent to the communication process module <b>55</b>, so the communication process module <b>55</b> recognizes that some sort of error is occurred. While the data transmission direction does change around the time that the response signal (OK/NG response signal) is sent, in preferred practice changes in data transmission direction should be as infrequent as possible because of the possibility that a bus collision occurs. In the present embodiment, through an arrangement whereby in the initial phase of a write operation, no data consistency determination results are sent to the communication process module <b>55</b> from the time that reception of identification data ID starts until reception of the first set of write data D<b>1</b> and inverted write data /D<b>1</b> is finished, the frequency of change in data transmission direction is minimized, and the reliability and speed of communication is enhanced.</p>
<p id="p-0133" num="0132">Additionally, as depicted in <figref idref="DRAWINGS">FIG. 15</figref> affirmative consistency determination results are generated only when the write data Dn and the inverted write data /Dn have a mutually inverted relationship and no parity errors are detected in the respective sets of data. By carrying out consistency determination in this way it is possible to further enhance the reliability of communications. That is, assume that one bit of the write data Dn and one bit of the inverted write data /Dn each contain an error at the same bit location, so that the determination result indicates that write data Dn and the inverted write data /Dn have consistency. Nevertheless, in such an instance, because the errors are identified in the respective parity checks, it is possible to prevent the erroneous data from being written.</p>
<p id="p-0134" num="0133">The actual data of the original data in the present embodiment corresponds to the first actual data in the present invention, and the parity data for the actual data in the present embodiment corresponds to the first parity data in the present invention. The mirror data of the actual data of the original data in the present embodiment corresponds to the second actual data in the present invention, and the mirror data of the parity data for the actual data in the present embodiment corresponds to the second parity data in the present invention. The actual data area in the present embodiment corresponds to the first memory area in the present invention, and the mirror data area in the present embodiment corresponds to the second memory area in the present invention.</p>
<p id="h-0011" num="0000">Memory Device Write Lock Operation:</p>
<p id="p-0135" num="0134"><figref idref="DRAWINGS">FIG. 16</figref> is a timing chart schematically depicting signals exchanged between the communication process module <b>55</b> of the printer <b>20</b> and the memory control circuit <b>136</b> of the memory device <b>130</b> during a write lock operation of the memory device. The write lock operation is a process whereby some portion of the rewriteable memory area in the memory map (<figref idref="DRAWINGS">FIG. 7</figref>) of the ferroelectric memory array <b>132</b> is changed to a write lock area, in row units. A row changed to a write lock area can no longer be overwritten through access from an external device (e.g. the communication process module <b>55</b> of the sub-controller <b>50</b>).</p>
<p id="p-0136" num="0135">As in the read operation and write operation discussed above, the communication process module <b>55</b> first sends SOF data as a data signal CSDA (<figref idref="DRAWINGS">FIG. 16</figref>). As in the read operation and write operation discussed above, following the SOF data, the communication process module <b>55</b> sends identification data in as a data signal CSDA (<figref idref="DRAWINGS">FIG. 16</figref>). Following the identification data, the communication process module <b>55</b> sends command data as a data signal CSDA (<figref idref="DRAWINGS">FIG. 16</figref>). The command data sent in this process is a Write Lock command representing a write lock operation. In sync with the next rise of the clock signal CSCK following completion of transmission of the command data, the communication process module <b>55</b> sends write lock-targeted address data AD and inverted write lock-targeted address data /AD in such a way that the memory control circuit <b>136</b> of the memory device <b>130</b> receives the data one bit at a time in synchronization with the clock signal (<figref idref="DRAWINGS">FIG. 16</figref>). The write lock-targeted address data AD is composed of 8-bit data for example, and identifies a row to be changed from a write-enable area to a write lock area. The inverted write lock-targeted address data /AD is 8-bit data obtained by inverting the value of each bit of the write lock-targeted address data AD.</p>
<p id="p-0137" num="0136">In sync with the next rise of the clock signal CSCK following completion of transmission of the write lock-targeted address data AD and inverted write lock-targeted address data /AD, the communication process module <b>55</b> receives a 1-bit response signal (either a &#x201c;1&#x201d; or a &#x201c;0&#x201d;) from the memory device <b>130</b> (<figref idref="DRAWINGS">FIG. 16</figref>). As in write operations, a high level response signal (OK response signal) is a signal indicating that the write lock-targeted address data AD and inverted write lock-targeted address data /AD are received correctly at the memory device <b>130</b>, while a low level response signal (NG response signal) is a signal indicating that the write lock-targeted address data AD and inverted write lock-targeted address data /AD are not received correctly at the memory device <b>130</b>.</p>
<p id="p-0138" num="0137">If the received response signal is an NG response signal, the communication process module <b>55</b> carries out a prescribed error process and terminate the write lock operation. The error process is a process identical to the error process that takes place when an NG response signal is received in the write operation described above, for example. On the other hand, if the received response signal is an OK response signal, the communication process module <b>55</b> sends EOF (End of Frame) data to the memory device <b>130</b> and terminate the process (<figref idref="DRAWINGS">FIG. 16</figref>).</p>
<p id="p-0139" num="0138">The discussion now turns to processing that takes place on the memory device <b>130</b> (memory device processing) in response to the write lock operation to the memory device <b>130</b> at the printer <b>20</b> discussed above. The memory device processing in response to the write lock operation is described in <figref idref="DRAWINGS">FIG. 10</figref>. In the case of the write lock operation, in Step S<b>240</b> of <figref idref="DRAWINGS">FIG. 10</figref> the memory control circuit <b>136</b> of the memory device <b>130</b> receives a Write Lock command. Consequently, the memory control circuit <b>136</b> having received the Write Lock command executes a write lock operation of Step S<b>270</b> (<figref idref="DRAWINGS">FIG. 10</figref>).</p>
<p id="p-0140" num="0139">When the write lock operation starts, the read/write control module M<b>14</b> of the memory control circuit <b>136</b>, in sync with rise of the clock signal CSCK, sequentially receives signals (1's or 0's) that appear on the data signal line LD<b>1</b> following the command data, and sequentially stores these in the register. As a result, the memory control circuit <b>136</b> sequentially receives the write lock-targeted address data AD and inverted write lock-targeted address data /AD.</p>
<p id="p-0141" num="0140">The data determination module M<b>19</b> decides whether or not the output of an exclusive OR operation for the received write lock-targeted address data AD and inverted write lock-targeted address data /AD is true for all 8 bits of these data, i.e. whether or not it is 11111111 (FF). If it is found that the output of the exclusive OR operation is not FF, the data send/receive module M<b>15</b> sends an NG response signal (low level) to the communication process module <b>55</b> of the sub-controller <b>50</b>. Once the NG response signal is sent, the write lock operation on the memory device terminates (abnormal termination).</p>
<p id="p-0142" num="0141">If on the other hand the output of the exclusive OR operation is true &#x201c;1&#x201d; for all 8 bits, i.e. if it is FF, the read/write control module M<b>14</b> changes the row of the rewriteable area identified by the write lock-targeted address data AD of the control area to a write lock area. Specifically, after receiving the operation code, if the type of access is write lock, the counter control module M<b>16</b> sets the counter value of the address counter M<b>13</b> so as to select the lead row of the control area. The count then advances to select a row that includes a cell storing a flag for the write lock-targeted address data AD in the control area. After the row that includes a cell storing a flag for the write lock-targeted address data AD is selected by the address counter M<b>13</b> as the row targeted for the write operation, the read/write control module M<b>14</b> updates the row so that the flag information of the cell corresponding to the write lock-targeted address data AD changes from &#x201c;0&#x201d; to &#x201c;1&#x201d;. The read/write control module M<b>14</b> updates the cell of the control area storing the flag for the row of the rewriteable area identified by the write lock-targeted address data AD, thereby changing the row of the rewriteable area identified by the write lock-targeted address data AD to a write lock area, and terminate the write lock operation. Specifically, the read/write control module M<b>14</b> changes the write lock flag information corresponding to the row identified by the write lock-targeted address data AD from &#x201c;0&#x201d; to &#x201c;1&#x201d;.</p>
<p id="h-0012" num="0000">Printer Printing Operation:</p>
<p id="p-0143" num="0142">In light of the processes relating to the memory devices <b>130</b> discussed above, the discussion now turns to the printing operation in the printer <b>20</b>. <figref idref="DRAWINGS">FIG. 17</figref> is a flowchart depicting the process steps in a printing operation that is executed primarily by the main controller <b>40</b>. For convenience in description, the following discussion of the printing operation focuses upon a single ink cartridge <b>100</b>, but in actual practice the same processes are carried out for each ink cartridge <b>100</b> installed in the printer <b>20</b>.</p>
<p id="p-0144" num="0143">The printing operation is initiated when the main controller <b>40</b> receives a print request from the user via the computer <b>90</b> or the console portion <b>70</b> (<figref idref="DRAWINGS">FIG. 17</figref>: Step S<b>502</b>). When a print request is received, the main controller <b>40</b> executes the read operation from the memory device <b>130</b> discussed earlier, and read out ink information from the memory device <b>130</b> of the ink cartridge <b>100</b> (<figref idref="DRAWINGS">FIG. 17</figref>: Step S<b>504</b>). The read out ink information includes at least the first ink consumption count value X, the second ink consumption count value Y, and ink end information M.</p>
<p id="p-0145" num="0144">When the main controller <b>40</b> reads out the ink information, it decides whether the value of the ink end information M indicates either the full state, the low state, or the end state mentioned previously (<figref idref="DRAWINGS">FIG. 17</figref>: Step S<b>506</b>). If the main controller <b>40</b> decides that the ink end information M indicates the end state (<figref idref="DRAWINGS">FIG. 17</figref>: Step S<b>506</b>: E), it carries out an ink end alert directed to the user (<figref idref="DRAWINGS">FIG. 17</figref>: Step S<b>508</b>). The ink end alert may involve, for example, displaying on the display panel of the console portion <b>70</b> a message prompting the user to replace the ink cartridge <b>100</b>.</p>
<p id="p-0146" num="0145">If the main controller <b>40</b> decides that the ink end information M indicates the low state (<figref idref="DRAWINGS">FIG. 17</figref>: Step S<b>506</b>: L), it decides whether the value of the difference (X-Y) between the first ink consumption count value X and the second ink consumption count value Y is equal to or greater than a second threshold value Vref<b>2</b> (<figref idref="DRAWINGS">FIG. 17</figref>: Step S<b>510</b>). As will be discussed later, the row storing the second ink consumption count value Y in the memory device <b>130</b> is write locked at the point that ink end was detected, so the second ink consumption count value Y will not be updated. If the value of (X-Y) is equal to or greater than the second threshold value Vref<b>2</b> (<figref idref="DRAWINGS">FIG. 17</figref>: Step S<b>510</b>: YES), the main controller <b>40</b> updates the value of the ink end information M of the memory device <b>130</b> to the end state (<figref idref="DRAWINGS">FIG. 17</figref>: Step S<b>512</b>). Specifically, the main controller <b>40</b> executes the write operation to the memory device <b>130</b> discussed previously, and update the value of the ink end information M to &#x201c;11&#x201d;. After updating the value of the ink end information M, the main controller <b>40</b> carries out the ink end notification described above (<figref idref="DRAWINGS">FIG. 17</figref>: Step S<b>508</b>).</p>
<p id="p-0147" num="0146">On the other hand, if the main controller <b>40</b> decides that the ink end information M indicates the full state (<figref idref="DRAWINGS">FIG. 17</figref>: Step S<b>506</b>: F) or that the value of (X-Y) is less than the second threshold value Vref<b>2</b> (<figref idref="DRAWINGS">FIG. 17</figref>: Step S<b>510</b>: NO), it carries out a predetermined amount of printing of the print job requested by the print request (<figref idref="DRAWINGS">FIG. 17</figref>: Step S<b>514</b>).</p>
<p id="p-0148" num="0147">Once the predetermined amount of printing is carried out, the main controller <b>40</b> calculates a new ink consumption count value (<figref idref="DRAWINGS">FIG. 17</figref>: Step S<b>516</b>). Specifically, on the basis of the particulars of execution of the predetermined amount of printing, the main controller <b>40</b> estimates the amount of ink consumed in the course of the predetermined amount of printing. The main controller <b>40</b> then adds a count value, equivalent to the estimated amount of ink consumed, to the first ink consumption count value X that was read out from the memory device <b>130</b> in Step S<b>504</b>, to arrive at a new ink consumption count value.</p>
<p id="p-0149" num="0148">Once the new ink consumption count value is calculated, the main controller <b>40</b> drives the sensor <b>110</b> (<figref idref="DRAWINGS">FIG. 17</figref>: Step S<b>518</b>). On the basis of the result of driving the sensor <b>110</b>, the main controller <b>40</b> decides whether the remaining ink level in the ink cartridge <b>100</b> is equal to or greater than the first threshold value Vref<b>1</b> (i.e. full) or less than the first threshold value Vref<b>1</b> (i.e. low) (<figref idref="DRAWINGS">FIG. 17</figref>: Step S<b>520</b>).</p>
<p id="p-0150" num="0149">If the remaining ink level in the ink cartridge <b>100</b> is determined to be equal to or greater than the first threshold value Vref<b>1</b> (<figref idref="DRAWINGS">FIG. 17</figref>: Step S<b>520</b>: F), the main controller <b>40</b> will update the first ink consumption count value X and the second ink consumption count value Y that are saved to the memory device <b>130</b>, to the new ink consumption count value that was calculated in Step S<b>516</b> (<figref idref="DRAWINGS">FIG. 17</figref>: Step S<b>522</b>). Specifically, the main controller <b>40</b> executes the write operation discussed earlier, accessing the memory device <b>130</b> and overwriting the first ink consumption count value X and the second ink consumption count value Y with the new ink consumption count value. As a result, the first ink consumption count value X and the second ink consumption count value Y will be the same.</p>
<p id="p-0151" num="0150">On the other hand, if the remaining ink level in the ink cartridge <b>100</b> is determined to be less than the first threshold value Vref<b>1</b> (<figref idref="DRAWINGS">FIG. 17</figref>: Step S<b>520</b>: L), the main controller <b>40</b> verifies whether the memory area storing the second ink consumption count value Y (<figref idref="DRAWINGS">FIG. 7</figref>: Row A<b>2</b> of the memory map) is a write lock area (i.e. with reference to the write lock flag stored in a memory area of the SRAM <b>551</b> which corresponds to the control area of the memory device <b>130</b>); and in the event it is found not to be a write lock area, carries out a second ink consumption count value lock operation to place a write lock on the row storing the second ink consumption count value Y (<figref idref="DRAWINGS">FIG. 17</figref>: Step S<b>524</b>). The second ink consumption count value lock operation is carried out using the write lock operation for the memory device <b>130</b> discussed earlier. Once the second ink consumption count value lock operation is carried out, the value of the second ink consumption count value Y in the memory device <b>130</b> is no longer modifiable. Consequently, the value of the second ink consumption count value Y in the memory device <b>130</b> will be held at the ink consumption count value that obtained just prior to the time that the remaining ink level was first detected to be lower than the first threshold value Vref<b>1</b>, through driving of the sensor <b>110</b>.</p>
<p id="p-0152" num="0151">When the second ink consumption count value lock operation is completed, the main controller <b>40</b> executes the write operation discussed earlier on the first ink consumption count value X in the memory device <b>130</b>, thereby updating it to the new ink consumption count value that was calculated in Step S<b>516</b> (<figref idref="DRAWINGS">FIG. 17</figref>: Step S<b>526</b>). At this time, due to the write lock, the second ink consumption count value is not updated.</p>
<p id="p-0153" num="0152">When the first ink consumption count value X is updated, the main controller <b>40</b> decides whether the value of the difference (X-Y) between the first ink consumption count value X and the second ink consumption count value Y is equal to or greater than a second threshold value Vref<b>2</b> (<figref idref="DRAWINGS">FIG. 17</figref>: Step S<b>528</b>). Here, the first ink consumption count value X is the value that was updated in Step S<b>526</b>. Meanwhile, the second ink consumption count value Y is the newer of the value that was read out in Step S<b>504</b> or the values that were updated in Step S<b>522</b>. If the difference (X-Y) is equal to or greater than the second threshold value Vref<b>2</b> (<figref idref="DRAWINGS">FIG. 17</figref>: Step S<b>528</b>: YES), the main controller <b>40</b> updates the value of the ink end information M of the memory device <b>130</b> to the end state (Step S<b>512</b>), and carries out the ink end alert discussed above (<figref idref="DRAWINGS">FIG. 17</figref>: Step S<b>508</b>).</p>
<p id="p-0154" num="0153">After the first ink consumption count value X and the second ink consumption count value Y are updated in Step S<b>522</b>, or if in Step S<b>528</b> the value of (X-Y) is found to be less than the second threshold value Vref<b>2</b> (<figref idref="DRAWINGS">FIG. 17</figref>: Step S<b>528</b>: NO), the main controller <b>40</b> decides whether the print job based on the print request is completed (<figref idref="DRAWINGS">FIG. 17</figref>: Step S<b>530</b>). If the print job is completed (<figref idref="DRAWINGS">FIG. 17</figref>: Step S<b>530</b>: YES), the printing operation terminates. If the print job is not completed, the system returns to Step S<b>514</b>, and a predetermined amount of printing is carried out again.</p>
<p id="p-0155" num="0154">According to the present embodiment discussed above, during a write operation to the memory device <b>130</b>, the memory device <b>130</b> verifies the consistency of the original data Dn that is to be written to the memory cell array <b>132</b> and the inverted data /Dn, and for each 16 bits of original data Dn transmits a response signal indicating if there is consistency. As a result, reliability of communication between the sub-controller <b>50</b> and the memory device <b>130</b> is enhanced. If the original data Dn and the inverted data /Dn lack consistency, the memory device <b>130</b> does not write the original data Dn to the ferroelectric memory array <b>132</b>, so erroneous updating of the ferroelectric memory array <b>132</b> is avoided. Moreover, during write operations to the memory device <b>130</b>, because the original data Dn and the inverted data /Dn have an inverted bit relationship to one another, if for example there is encountered a communication error such that only low level or high level appears on the data signal line LD<b>1</b> owing to a contact fault between the data terminal <b>260</b> of the ink cartridge <b>100</b> and the corresponding terminal on the printer <b>20</b>, the communication error is detected in a reliable manner. Moreover, because consistency (presence or lack of communication errors) of the original data Dn and the inverted data /Dn is determined through an exclusive OR operation carried out on each bit of the original data Dn and the inverted data /Dn, highly reliable detection of communication errors is accomplished easily.</p>
<p id="p-0156" num="0155">Furthermore, according to the present embodiment, during a read operation from the memory device <b>130</b> original data Dn, together with inverted data /Dn which is equal in size to the original data Dn but with each bit inverted, are sent from the memory device <b>130</b> to the sub-controller <b>50</b>. At the sub-controller <b>50</b>, the presence or lack of communication errors is then determined by checking the consistency of the original data Dn and the inverted data /Dn. As a result, reliability of communication between the sub-controller <b>50</b> and the memory device <b>130</b> is enhanced. Consequently, problems such as erroneous operation of the printer <b>20</b> are kept to a minimum. Moreover, during read operations from the memory device <b>130</b>, because the original data Dn and the inverted data /Dn have an inverted bit relationship to one another, if for example there is encountered a communication error such that only low level or high level appears on the data signal line LD<b>1</b> owing to a contact fault between the data terminal <b>260</b> of the ink cartridge <b>100</b> and the corresponding terminal on the printer <b>20</b>, the communication error is detected in a reliable manner. Further, during read operations from the memory device <b>130</b>, because the memory device <b>130</b> sends the sub-controller <b>50</b> mirror data dn which is substantially identical to the original data Dn, and inverted mirror data /dn which is substantially identical to the inverted data /Dn, even if the original data Dn and the inverted data /Dn lack consistency owing to a communication error for example, as long as the mirror data dn and the inverted mirror data /dn have consistency, processing can continue on the printer <b>20</b> using either the mirror data dn or the inverted mirror data /dn, thus enhancing the robustness of the system with respect to communication errors. Further, in the memory device <b>130</b>, mirror data dn is stored together with original data Dn in the ferroelectric memory array <b>132</b>, and both are sent to the printer <b>20</b>. As a result, even if a cell error is occurred in either the original data area or the mirror data area of the ferroelectric memory array <b>132</b>, normal operation may continue on the printer <b>20</b>, using the data stored in the area in which the cell error did not occur. Robustness of the system with respect to cell errors is enhanced thereby, thus dramatically reducing memory device <b>130</b> failure rates.</p>
<p id="p-0157" num="0156">Further, when the printer <b>20</b> in the present embodiment receives original data Dn, inverted data /Dn, mirror data dn, and inverted mirror data /dn, it first performs a consistency check of the original data Dn and the inverted mirror data /dn; and if consistency is lacking, checks the consistency of the original data Dn and the inverted data /Dn, and the consistency of the mirror data dn and the inverted mirror data /dn. Then, if the original data Dn and the inverted mirror data /dn lack consistency, but the original data Dn and the inverted data /Dn have consistency and the mirror data dn and the inverted mirror data /dn have consistency, it determines that a cell error is occurred. If the original data Dn and the inverted mirror data /dn lack consistency, and moreover the original data Dn and the inverted data /Dn lack consistency or the mirror data dn and the inverted mirror data /dn lack consistency, it determines that a communication error is occurred. By so doing the printer <b>20</b> can correctly ascertain the type of the error, and perform appropriate processing according to the error type.</p>
<p id="p-0158" num="0157">Further, in the present embodiment, in the memory map of the ferroelectric memory array <b>132</b> (<figref idref="DRAWINGS">FIG. 7</figref>), actual data and parity data are stored in the original data area, and actual data and parity data are stored in the mirror data area as well. During a read operation from the rewriteable area, the actual data (upper 15 bits) and the parity data (lower 1 bit) stored in the original data area are sent from the memory device <b>130</b> to the sub-controller <b>50</b>, and the actual data (upper 15 bits) and the parity data (lower 1 bit) stored in the mirror data area are sent from the memory device <b>130</b> to the sub-controller <b>50</b>. Consequently the printer <b>20</b> having received this data then performs a parity check of the actual data that was stored in the original data area, and perform a parity check of the actual data that was stored in the mirror data area. Even if a parity error is occurred either in the actual data that was stored in the original data area or in the actual data that was stored in the mirror data area, the main controller <b>40</b> is able to continue normal operation using the set of actual data in which no parity error is occurred. As a result, robustness of the system against communication errors and cell errors may be enhanced.</p>
<p id="p-0159" num="0158">In write operations in the present embodiment, for previously stored data in a write-targeted area, the memory device <b>130</b> carries out a parity check of the 16 bits stored in the original data area and the 16 bits stored in the mirror data area, respectively. As a result, in an area in which a parity error is detected, the previously stored data is rewritten; whereas in an area in which no parity error is detected, new data is written. Because an area in which a parity error is detected can be assumed to have a problem with a memory cell, the parity check may also be recognized as a means for detecting memory area problem. As a result, data updating is not performed in an area in which a problem is occurred, so unanticipated difficulties that may result from updating data in an area that includes a problem may be avoided. Moreover, in a cell that is experiencing a cell error, by rewriting previously stored data to an area in which a parity error is detected, change in data due to a data retention fault may be avoided. A data retention fault refers to a fault whereby the saved data value in a memory cell changes due to gradual dissipation of charge. If owing to a data retention fault, data changes in an area in which a cell error is assumed to have occurred, parity consistency may happen by chance, posing a risk that the cell error is not correctly detected.</p>
<p id="p-0160" num="0159">Further, in the printer <b>20</b> according to the present embodiment, if through driving of the sensor <b>110</b> it is determined that the remaining ink level of the ink cartridge <b>100</b> is less than the first threshold value Vref<b>1</b>, a prohibit request (write lock operation) is carried out for the memory area of the memory device <b>130</b> storing the second ink consumption count value Y, so that the second ink consumption count value Y will not be updated. As a result, after the prohibit request is issued, the memory device <b>130</b> no longer accepts requests to update the second ink consumption count value Y. As a result, the second ink consumption count value Y is maintained at the ink consumption count value that obtained just prior to the time that the sensor detected that the remaining ink level was lower than the first threshold value Vref<b>1</b>. The second ink consumption count value Y is thus prevented from being updated in error. Further, because the first ink consumption count value X continues to be updated even after updating of the second ink consumption count value Y is suspended, the ink consumption level is accurately recognized from the value of (X-Y) even after the sensor <b>110</b> detects that the remaining ink level is lower than the first threshold value Vref<b>1</b>. As a result, an ink end point is determined with good accuracy, making it possible for the ink contained in the ink cartridge <b>100</b> to be used to the end without any waste. The copy data generation module M<b>17</b> in the present embodiment corresponds to the data copy section in the present invention, and the data determination module M<b>19</b> in the present embodiment corresponds to the first and second detection section in the present invention.</p>
<p id="h-0013" num="0000">B. Modified Embodiments:</p>
<p id="h-0014" num="0000">Modified Embodiment 1:</p>
<p id="p-0161" num="0160">In the preceding embodiment, inverted data /Dn is used as an example of &#x201c;the data generated on the basis of the original data Dn&#x201d;, but no limitation thereto is implied. For example, a value obtained through addition of a given value to the original data Dn, a value obtained through subtraction of a given value, a value obtained through multiplication by a given value, or the like may also be used as data for checking consistency with the original data Dn. Generally, it suffices for the original data Dn and the data generated from the original data Dn to have a prescribed correlation such that the presence or lack of this prescribed correlation between the original data Dn and the data generated from the original data Dn can be determined. In preferred practice, the original data Dn and the data generated from the original data Dn have identical data size.</p>
<p id="h-0015" num="0000">Modified Embodiment 2:</p>
<p id="p-0162" num="0161">In the write operation of the preceding embodiment, 32 bit data composed of original data upper 8 bits UDn, inverted mirror data upper 8 bits /Udn, original data lower 8 bits LDn, and inverted mirror data lower 8 bits /Ldn are transmitted in that order from the sub-controller <b>50</b> to the memory device <b>130</b>; however, the order of transmission may be modified as desired, and it is acceptable to first transmit 16 bits of original data Dn<b>1</b>, followed by transmission of 16 bits of inverted data /Dn. Also, the inverted data may be sent first, and the original data sent afterwards.</p>
<p id="h-0016" num="0000">Modified Embodiment 3:</p>
<p id="p-0163" num="0162">In the write operation of the preceding embodiment, 32 bits of original data and inverted data are employed as a single unit of data, and each time that transmission of one unit of data from the sub-controller <b>50</b> to the memory device is finished, a response signal is returned from the memory device to the sub-controller <b>50</b>; however, the data length of the unit of data is may be modified as desired, and a single data unit may include 64 bits of original data and inverted data, or a single data unit may include 16 bits of original data and inverted data.</p>
<p id="h-0017" num="0000">Modified Embodiment 4:</p>
<p id="p-0164" num="0163">In the preceding embodiment, the sub-controller <b>50</b> of the printer <b>20</b> is used as the host circuit; however, any circuit, such as a computor, may be used as the host circuit. In the preceding embodiment, the memory device <b>130</b> of an ink cartridge <b>100</b> is used as the memory device, but any nonvolatile memory device may be used. In this case, the invention may be implemented effectively in an arrangement whereby the host circuit and the memory device are electrically connected via circuit terminals that are electrically connected to the host circuit, and memory device terminals that are electrically connected to the memory device and that are detachably attachable to the circuit terminals. By so doing, communication errors arising from faulty contact between memory device terminals and circuit terminals may be detected, and the reliability of communication between the host circuit and the memory device may be enhanced.</p>
<p id="h-0018" num="0000">Modified Embodiment 5:</p>
<p id="p-0165" num="0164">In the preceding embodiment, the ferroelectric memory array <b>132</b> is provided with both an original data area and a mirror data area; however, only an original data would suffice. In this case, the memory control circuit <b>136</b> may be provided with a read copy data generation section adapted to copy data stored in the original data area to generate mirror data dn (copy data), and with an inverted data generation section adapted to invert each bit of the data stored in the original data area to generate inverted data /Dn and inverted mirror data /dn. Then, during the read operation at the memory device <b>130</b>, the data send/receive module M<b>15</b> of the memory control circuit <b>136</b> sends the data that is stored in the original data area as original data Dn to the sub-controller <b>50</b>; and sends the sub-controller <b>50</b> the mirror data dn, the inverted data /Dn, and the inverted mirror data /dn which are generated from the original data Dn. The data send/receive module M<b>15</b>, after storing the data read out from the original data area in a register, may send it as original data, and then send other data stored in the register as mirror data.</p>
<p id="h-0019" num="0000">Modified Embodiment 6:</p>
<p id="p-0166" num="0165">In the preceding embodiment, the ferroelectric memory array <b>132</b> has an original data area and a mirror data area; however, the ferroelectric memory array <b>132</b> may instead have an original data area and an inverted data area. In this case, the read/write control module M<b>14</b> writes the original data Dn in the original data area, and writes the inverted data /Dn in the inverted data area. During read operations, the data send/receive module M<b>15</b> of the memory control circuit <b>136</b> sends to the sub-controller <b>50</b> as original data Dn the data stored in the original data area, and as inverted data /Dn the data stored in the inverted data area; and sends to the sub-controller <b>50</b> as mirror data dn the data which is read from this same original data area, and as inverted mirror data /dn the data which is read from this same inverted data area. In this case as well, the host circuit is able to detect communication errors through exclusive OR operations. It is possible to detect the occurrence of memory cell errors by carrying out a parity check.</p>
<p id="h-0020" num="0000">Modified Embodiment 7:</p>
<p id="p-0167" num="0166">In the preceding embodiment, the ferroelectric memory array <b>132</b> has an original data area and a mirror data area; however, the ferroelectric memory array <b>132</b> may instead have an original data area for storing original data Dn, and inverted data area for storing inverted data /Dn of the original data Dn, a mirror data area for storing mirror data dn of the original data Dn, and an inverted mirror data area for storing inverted mirror data /dn which is inverted data of the mirror data dn. In this case, the read/write control module M<b>14</b> and the data send/receive module M<b>15</b> of the memory control circuit <b>136</b> read out the stored data as-is and transmit it.</p>
<p id="h-0021" num="0000">Modified Embodiment 8:</p>
<p id="p-0168" num="0167">In the read operation in the preceding embodiment, original data Dn, inverted data /Dn, mirror data dn, and inverted mirror data /dn are transmitted from the memory device <b>130</b> to the sub-controller <b>50</b>; however, it would suffice to transmit original data Dn and inverted data /Dn only, omitting transmission of mirror data dn and inverted mirror data /dn. Alternatively, it would suffice to transmit original data Dn and mirror data dn only, omitting transmission of inverted data /Dn and inverted mirror data /dn.</p>
<p id="h-0022" num="0000">Modified Embodiment 9:</p>
<p id="p-0169" num="0168">In the write operation in the preceding embodiment, both actual data and parity data for storage in the memory map of the ferroelectric memory array <b>132</b> are generated on the printer <b>20</b> and transmitted to the memory device <b>130</b>. As an alternative, it is permissible that the printer <b>20</b> generates only the actual data and transmits it to the memory device <b>130</b>, while the parity data is generated on the memory device <b>130</b>. In this case, the memory control circuit <b>136</b> may be provided with a parity acquisition module for generating 1-bit parity data matching the 15 bits of actual data sent from the printer <b>20</b>.</p>
<p id="h-0023" num="0000">Modified Embodiment 10:</p>
<p id="p-0170" num="0169">In the write operation in the preceding embodiment, the memory device <b>130</b> performs rewriting of the previously stored data to areas in which parity errors are detected, but a possible alternative would be to not write data to areas in which parity errors are detected.</p>
<p id="h-0024" num="0000">Modified Embodiment 11:</p>
<p id="p-0171" num="0170">In the preceding embodiment, the ferroelectric memory array <b>132</b> of the memory device <b>130</b> stores a first ink consumption count value X and a second ink consumption count value Y that represent the amount of ink consumption; however, remaining level information representing the remaining ink level may also be stored. In this case, the initial value of the remaining level information represents the amount of ink filling the ink cartridge <b>100</b>. During printing operations, the printer <b>20</b> overwrites the remaining level information stored in the ferroelectric memory array <b>132</b> with remaining level information in the direction of decreasing the remaining level, according to the amount of ink consumed in printing. In this case, it is preferable for the memory area storing the remaining level information to be established in a decrement area. A decrement area refers to an area that only allows numerical values to be overwritten in the decreasing direction, and does not allow numerical values to be overwritten in the increasing direction. Like the increment area in the embodiment, such a decrement area is preferably established by writing decrement flag information to the read-only area.</p>
<p id="h-0025" num="0000">Modified Embodiment 12:</p>
<p id="p-0172" num="0171">In the preceding embodiment, the second ink consumption count value Y and the first ink consumption count value X are respectively stored in the ferroelectric memory array <b>132</b>, and ink end is determined on the basis of the difference between the first ink consumption count value X and the second ink consumption count value Y. Alternatively, only the second ink consumption count value Y may be stored in the ferroelectric memory array <b>132</b>. In this case, processes would take place in the same manner as the embodiment, but with the first ink consumption count value X stored in nonvolatile memory provided on the printer <b>20</b>.</p>
<p id="h-0026" num="0000">Modified Embodiment 13:</p>
<p id="p-0173" num="0172">While the preceding embodiment employs a printer and ink cartridges of ink-jet format, it would also be acceptable to employ a liquid jetting apparatus adapted to jet or eject a liquid other than ink, and liquid receptacles for supplying the liquid to the liquid jetting apparatus. Herein, the term liquid is used to include a liquid state body containing particles of a functional material dispersed in a medium; or a gel or similar fluid state body. For example, there may be employed a liquid jetting apparatus adapted to jet a liquid containing an electrode material, coloring matter, or other matter in dispersed or dissolved form, that is used in the manufacture of liquid crystal displays, EL (electroluminescence) displays, field emission displays, or color filters; a liquid jetting apparatus adapted to jet bioorganic substances used in biochip manufacture; or a liquid jetting apparatus adapted to jet a liquid as a specimen used as a precision pipette. Additional examples are a liquid jetting apparatus for pinpoint jetting of a lubricant into a precision instrument such as a clock or camera; a liquid jetting apparatus adapted to jet a solution of an ultraviolet-curing resin or other transparent resin onto a substrate for the purpose of forming a micro semi-spherical lens (optical lens) for use in an optical communication component etc.; or a liquid jetting apparatus adapted to jet an acid or alkali etchant solution for etching a circuit board, etc.; as well as liquid receptacles adapted to supply liquid to these kinds of liquid jetting apparatus. The present invention may be implemented in any one of the above types of jetting devices and liquid receptacles. No limitation to printers of ink-jet format is imposed, and a laser printer and toner cartridge for printing with printing material such as toner may also be employed.</p>
<p id="h-0027" num="0000">Modified Embodiment 14:</p>
<p id="p-0174" num="0173">Some of the arrangements that are implemented through hardware in the preceding embodiment may instead be implemented through software, and conversely some of the arrangements that are implemented through software may instead be implemented through hardware.</p>
<p id="h-0028" num="0000">Modified Embodiment 15:</p>
<p id="p-0175" num="0174">In the preceding embodiment, a sensor <b>110</b> that uses a piezoelectric element is employed, but it would be possible for example to instead employ an oscillator device such as an oscillator circuit designed to constantly return a response signal whose frequency indicates that ink is present; or to employ a processor such as a CPU or ASIC, or a simpler IC, to carry out exchanges with the sub-controller <b>50</b>. The present invention may also be implemented in an ink cartridge <b>100</b> of a type lacking a sensor, and having only a memory device.</p>
<p id="h-0029" num="0000">Modified Embodiment 16:</p>
<p id="p-0176" num="0175">In the preceding embodiment, a single ink tank constitutes a single ink cartridge, but instead a plurality of ink tanks may constitute a single ink cartridge.</p>
<p id="h-0030" num="0000">Modified Embodiment 17:</p>
<p id="p-0177" num="0176">In the preceding embodiment, the liquid supply unit is an ink cartridge to whose receptacle body the board is secured, and the board thusly unified with the receptacle body is installed in the holder provided to the print head unit; however, the liquid supply unit embodying the present invention may instead be an ink cartridge of a design in which a cover to which the board is secured, and a receptacle body containing the liquid, are installed separately in the holder. In one exemplary arrangement, after the cover having the board secured thereto is inserted and installed in the holder in a prescribed insertion direction, the receptacle body is then installed in the holder. In this case, there may be employed in arrangement whereby only the ink receptacle body is replaced when the ink inside the receptacle body is depleted, and the ink consumption information (the first second ink consumption count value X and the second ink consumption count value Y) saved in the memory device <b>130</b> is reset in association with replacement.</p>
<p id="h-0031" num="0000">Modified Embodiment 18:</p>
<p id="p-0178" num="0177">In the preceding embodiment, the liquid supply unit is installed in the holder of the print head unit and supplies ink directly to the print head from the ink supply portion; however in another possible arrangement, the liquid supply unit may be installed at a location inside the liquid jetting apparatus situated away from the head, and ink may be supplied to the head through a tube connecting the liquid supply unit to the ink supply portion.</p>
<p id="h-0032" num="0000">Modified Embodiment 19:</p>
<p id="p-0179" num="0178">In the preceding embodiment, the memory device <b>130</b> is described as being a semiconductor memory device furnished with a ferroelectric memory cell array <b>132</b>, but is not limited thereto and may instead be a semiconductor memory device that does not use ferroelectric memory cells (e.g. EEPROM or flash memory). Memory devices other than semiconductor memory devices may also be used.</p>
<p id="h-0033" num="0000">Modified Embodiment 20:</p>
<p id="p-0180" num="0179">In the preceding embodiment, the main controller <b>40</b> and the communication process module <b>55</b> are separate arrangements, but they may instead be implemented as an integrated controller.</p>
<p id="h-0034" num="0000">Modified Embodiment 21:</p>
<p id="p-0181" num="0180">In the preceding embodiment, in the course of communications between the memory device <b>130</b> and sub-controller <b>50</b>, the memory device <b>130</b> is presented with a reset signal CRST from the sub-controller <b>50</b>; however, the element of supplying a reset signal CRST may be omitted. In this case, the reset terminal <b>240</b> of the memory device <b>130</b>, the terminal <b>440</b> on the printer <b>20</b> corresponding to the reset terminal <b>240</b>, and the reset signal line LR<b>1</b> would be dispensed with. In this case, initialization of the memory device <b>130</b> may take place autonomously when the memory device <b>130</b> is supplied with power supply voltage CVDD and starts up for example. Having initialized at startup, the memory device <b>130</b> may subsequently operate in response to the clock signal CSCK and data signals CSDA received from the sub-controller <b>50</b>, in the same way as in the embodiment.</p>
<p id="h-0035" num="0000">Modified Embodiment 22:</p>
<p id="p-0182" num="0181">In the preceding embodiment, the memory control circuit <b>136</b> of the memory device <b>130</b> includes the ID comparator module M<b>11</b>, the command parse module M<b>12</b>, and the data determination module M<b>19</b>. However, the ID comparator module M<b>11</b>, the command parse module M<b>12</b>, and the data determination module M<b>19</b> may be implemented as respective separate hardware circuits. Alternatively, a part of or the entirety of these modules may be implemented as common hardware circuitry.</p>
<p id="p-0183" num="0182">While the present invention is shown herein in terms of a preferred embodiment and modified embodiments thereof, the present invention is not limited to the embodiment and modified embodiments herein, and may be embodied in various other forms without departing from the spirit thereof.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A memory device electrically connectable to a host circuit, comprising:
<claim-text>a nonvolatile data memory section including a first memory area and a second memory area related to the first memory area;</claim-text>
<claim-text>a data reception section that receives, from the host circuit, data including a first actual data to be written into the first memory area;</claim-text>
<claim-text>a parity acquisition section that acquires first parity data associated with the first actual data;</claim-text>
<claim-text>a data copy section that generates second actual data that is a copy of the first actual data, and second parity that is a copy of the first parity data;</claim-text>
<claim-text>a read/write control section that writes the first actual data and the first parity data into the first memory area, and writes the second actual data and the second parity data into the second memory area; and</claim-text>
<claim-text>a data transmission section that reads the first actual data, the first parity data, the second actual data, and the second parity data from the data memory section for transmission to the host circuit;</claim-text>
<claim-text>wherein the first memory area has a first actual data area for writing of the first actual data, and a first parity area for writing of the first parity data,</claim-text>
<claim-text>the read/write control section includes a first detection section that detects defects in the first memory area by determining consistency between actual data previously stored in the first actual data area and parity data previously stored in the first parity area, and</claim-text>
<claim-text>the read/write control section writes the first actual data area and the first parity data into the first memory area when no defect is detected in the first memory area,</claim-text>
<claim-text>wherein if a defect is detected in the first memory area, the read/write control section writes again to the first memory area the actual data and the parity data which were previously stored in the first memory area and which were read out from the first memory area; and</claim-text>
<claim-text>wherein the memory device is electrically connected to the host circuit with a single data line and transmits and receives a data signal to and from the host circuit via the single data line.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The memory device according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein
<claim-text>the second memory area has a second actual data area for writing of the second actual data, and a second parity area for writing of the second parity data,</claim-text>
<claim-text>the read/write control section includes a second detection section that detects defects in the second memory area by determining consistency between actual data previously stored in the second actual data area and parity data previously stored in the second parity area, and</claim-text>
<claim-text>the read/write control section writes the second actual data area and the second parity data into the second memory area when no defect is detected in the second memory area.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The memory device according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein
<claim-text>if a defect is detected in the second memory area, the read/write control section writes again to the second memory area the actual data and the parity data that is previously stored in the second memory area, in place of the second actual data and the second parity data.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The memory device according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the parity acquisition section acquires the first parity data by receiving the first parity data from the host circuit.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The memory device according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the parity acquisition section acquires the first parity data by generating the first parity data from the first actual data.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. A circuit board detachably and electrically connectable to a liquid jetting apparatus, comprising
<claim-text>a nonvolatile data memory section including a first memory area and a second memory area related to the first memory area;</claim-text>
<claim-text>a data reception section that receives, from the liquid jetting apparatus, data including a first actual data to be written into the first memory area;</claim-text>
<claim-text>a parity acquisition section that acquires first parity data associated with the first actual data;</claim-text>
<claim-text>a data copy section that generates second actual data that is a copy of the first actual data, and second parity that is a copy of the first parity data;</claim-text>
<claim-text>a read/write control section that writes the first actual data and the first parity data into the first memory area, and writes the second actual data and the second parity data into the second memory area; and</claim-text>
<claim-text>a data transmission section that reads the first actual data, the first parity data, the second actual data, and the second parity data from the data memory section for transmission to the liquid jetting apparatus;</claim-text>
<claim-text>wherein the first memory area has a first actual data area for writing of the first actual data, and a first parity area for writing of the first parity data,</claim-text>
<claim-text>the read/write control section includes a first detection section that detects defects in the first memory area by determining consistency between actual data previously stored in the first actual data area and parity data previously stored in the first parity area, and</claim-text>
<claim-text>the read/write control section writes the first actual data area and the first parity data into the first memory area when no defect is detected in the first memory area,</claim-text>
<claim-text>wherein if a defect is detected in the first memory area, the read/write control section writes again to the first memory area the actual data and the parity data which were previously stored in the first memory area and which were read out from the first memory area; and</claim-text>
<claim-text>wherein the memory device is electrically connected to the host circuit with a single data line and transmits and receives a data signal to and from the host circuit via the single data line.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. A liquid receptacle detachably installable into a liquid jetting apparatus, comprising
<claim-text>a nonvolatile data memory section including a first memory area and a second memory area related to the first memory area;</claim-text>
<claim-text>a data reception section that receives, from the liquid jetting apparatus, data including a first actual data to be written into the first memory area;</claim-text>
<claim-text>a parity acquisition section that acquires first parity data associated with the first actual data;</claim-text>
<claim-text>a data copy section that generates second actual data that is a copy of the first actual data, and second parity that is a copy of the first parity data;</claim-text>
<claim-text>a read/write control section that writes the first actual data and the first parity data into the first memory area, and writes the second actual data and the second parity data into the second memory area; and</claim-text>
<claim-text>a data transmission section that reads the first actual data, the first parity data, the second actual data, and the second parity data from the data memory section for transmission to the liquid jetting apparatus;</claim-text>
<claim-text>wherein the first memory area has a first actual data area for writing of the first actual data, and a first parity area for writing of the first parity data,</claim-text>
<claim-text>the read/write control section includes a first detection section that detects defects in the first memory area by determining consistency between actual data previously stored in the first actual data area and parity data previously stored in the first parity area, and</claim-text>
<claim-text>the read/write control section writes the first actual data area and the first parity data into the first memory area when no defect is detected in the first memory area,</claim-text>
<claim-text>wherein if a defect is detected in the first memory area, the read/write control section writes again to the first memory area the actual data and the parity data which were previously stored in the first memory area and which were read out from the first memory area; and</claim-text>
<claim-text>wherein the memory device is electrically connected to the host circuit with a single data line and transmits and receives a data signal to and from the host circuit via the single data line.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. A method of controlling a nonvolatile data memory section including a first memory area and a second memory area related to the first memory area, comprising the steps of:
<claim-text>receiving, from a host circuit, data including a first actual data to be written into the first memory area;</claim-text>
<claim-text>acquiring first parity data associated with the first actual data;</claim-text>
<claim-text>generating second actual data that is a copy of the first actual data, and second parity that is a copy of the first parity data;</claim-text>
<claim-text>writing the first actual data and the first parity data into the first memory area if no defect is detected at least in the first memory area;</claim-text>
<claim-text>writing the second actual data and the second parity data into the second memory area if no defect is detected at least in the second memory area; and</claim-text>
<claim-text>reading the first actual data, the first parity data, the second actual data, and the second parity data from the data memory section for transmission to the host circuit;</claim-text>
<claim-text>wherein the first memory area has a first actual data area for writing of the first actual data, and a first parity area for writing of the first parity data,</claim-text>
<claim-text>the read/write control section includes a first detection section that detects defects in the first memory area by determining consistency between actual data previously stored in the first actual data area and parity data previously stored in the first parity area, and</claim-text>
<claim-text>the read/write control section writes the first actual data area and the first parity data into the first memory area when no defect is detected in the first memory area,</claim-text>
<claim-text>wherein if a defect is detected in the first memory area, the read/write control section writes again to the first memory area the actual data and the parity data which were previously stored in the first memory area and which were read out from the first memory area; and</claim-text>
<claim-text>wherein the memory device is electrically connected to the host circuit with a single data line and transmits and receives a data signal to and from the host circuit via the single data line.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. A system comprising a host circuit and a memory device electrically connectable to the host circuit, wherein the memory device includes:
<claim-text>a nonvolatile data memory section including a first memory area and a second memory area related to the first memory area;</claim-text>
<claim-text>a data reception section that receives, from the host circuit, data including a first actual data to be written into the first memory area;</claim-text>
<claim-text>a parity acquisition section that acquires first parity data associated with the first actual data;</claim-text>
<claim-text>a data copy section that generates second actual data that is a copy of the first actual data, and second parity that is a copy of the first parity data;</claim-text>
<claim-text>a read/write control section that writes the first actual data and the first parity data into the first memory area, and writes the second actual data and the second parity data into the second memory area; and</claim-text>
<claim-text>a data transmission section that reads the first actual data, the first parity data, the second actual data, and the second parity data from the data memory section for transmission to the host circuit, and the host circuit includes:</claim-text>
<claim-text>a data reception section that receives the first actual data, the first parity data, the second actual data, and the second parity data from the memory device;</claim-text>
<claim-text>a determination section that determines consistency between the first actual data and the first parity data, and consistency between the second actual data and the second parity data; and</claim-text>
<claim-text>a processing section that executes a prescribed process using either of the first actual data or the second data that has consistency with its parity data;</claim-text>
<claim-text>wherein the first memory area has a first actual data area for writing of the first actual data, and a first parity area for writing of the first parity data,</claim-text>
<claim-text>the read/write control section includes a first detection section that detects defects in the first memory area by determining consistency between actual data previously stored in the first actual data area and parity data previously stored in the first parity area, and</claim-text>
<claim-text>the read/write control section writes the first actual data area and the first parity data into the first memory area when no defect is detected in the first memory area,</claim-text>
<claim-text>wherein if a defect is detected in the first memory area, the read/write control section writes again to the first memory area the actual data and the parity data which were previously stored in the first memory area and which were read out from the first memory area; and</claim-text>
<claim-text>wherein the memory device is electrically connected to the host circuit with a single data line and transmits and receives a data signal to and from the host circuit via the single data line.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
