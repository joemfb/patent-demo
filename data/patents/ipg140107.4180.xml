<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625249-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625249</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13595375</doc-number>
<date>20120827</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2010-051297</doc-number>
<date>20100309</date>
</priority-claim>
</priority-claims>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>01</class>
<subclass>H</subclass>
<main-group>47</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>361160</main-classification>
<further-classification>361139</further-classification>
</classification-national>
<invention-title id="d2e61">Control apparatus for electromagnetic inductive load</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5402045</doc-number>
<kind>A</kind>
<name>Mori</name>
<date>19950300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>2004/0120094</doc-number>
<kind>A1</kind>
<name>Satoh</name>
<date>20040600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>361160</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2005/0105239</doc-number>
<kind>A1</kind>
<name>Satoh et al.</name>
<date>20050500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>361139</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2011/0109168</doc-number>
<kind>A1</kind>
<name>Morimoto et al.</name>
<date>20110500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>JP</country>
<doc-number>5252769</doc-number>
<kind>A</kind>
<date>19930900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>JP</country>
<doc-number>2001263531</doc-number>
<kind>A</kind>
<date>20010900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>JP</country>
<doc-number>2006198850</doc-number>
<kind>A</kind>
<date>20080800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>JP</country>
<doc-number>2008306791</doc-number>
<kind>A</kind>
<date>20081200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>JP</country>
<doc-number>2009289689</doc-number>
<kind>A</kind>
<date>20091200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00010">
<othercit>International Search Report for PCT/JP2011/055424 dated May 24, 2011 [PCT/ISA/210].</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00011">
<othercit>Written Opinion for PCT/JP2011/055424 dated May 24, 2011 [PCT/ISA/237].</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>7</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>361139</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>361160</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>26</number-of-drawing-sheets>
<number-of-figures>26</number-of-figures>
</figures>
<us-related-documents>
<continuation>
<relation>
<parent-doc>
<document-id>
<country>US</country>
<doc-number>PCT/JP2011/055424</doc-number>
<date>20110308</date>
</document-id>
<parent-status>PENDING</parent-status>
</parent-doc>
<child-doc>
<document-id>
<country>US</country>
<doc-number>13595375</doc-number>
</document-id>
</child-doc>
</relation>
</continuation>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20120319499</doc-number>
<kind>A1</kind>
<date>20121220</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Ooishi</last-name>
<first-name>Eiichirou</first-name>
<address>
<city>Susono</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Morimoto</last-name>
<first-name>Mitsuaki</first-name>
<address>
<city>Susono</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Ooishi</last-name>
<first-name>Eiichirou</first-name>
<address>
<city>Susono</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Morimoto</last-name>
<first-name>Mitsuaki</first-name>
<address>
<city>Susono</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Sughrue Mion, PLLC</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Yazaki Corporation</orgname>
<role>03</role>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Nguyen</last-name>
<first-name>Danny</first-name>
<department>2836</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A control apparatus for an electromagnetic inductive load is a circuit in which a switching element that is PWM-controlled and the electromagnetic inductive load are connected together in series between a DC power supply and a ground. The control apparatus includes a current sensing unit which senses a regenerative current in an OFF time in a PWM driving operation, a current detecting unit which outputs a current detection signal when a sense current becomes smaller than a target current amount, a PWM signal generating unit which receives a clock signal and the current detection signal, and generates a PWM signal that is at a high or low level during a period from the current detection signal being smaller than the target current amount, to rising or falling of the clock signal, and a driving unit which controls to drive the switching element.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="154.18mm" wi="201.08mm" file="US08625249-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="203.62mm" wi="159.43mm" orientation="landscape" file="US08625249-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="150.88mm" wi="144.95mm" file="US08625249-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="113.71mm" wi="156.21mm" file="US08625249-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="133.77mm" wi="140.38mm" file="US08625249-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="214.46mm" wi="163.75mm" orientation="landscape" file="US08625249-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="219.46mm" wi="124.54mm" orientation="landscape" file="US08625249-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="115.99mm" wi="161.80mm" file="US08625249-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="205.91mm" wi="167.39mm" orientation="landscape" file="US08625249-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="210.57mm" wi="122.60mm" orientation="landscape" file="US08625249-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="177.63mm" wi="165.44mm" file="US08625249-20140107-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="187.45mm" wi="161.80mm" orientation="landscape" file="US08625249-20140107-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="146.98mm" wi="168.66mm" file="US08625249-20140107-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00013" num="00013">
<img id="EMI-D00013" he="193.72mm" wi="164.42mm" orientation="landscape" file="US08625249-20140107-D00013.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00014" num="00014">
<img id="EMI-D00014" he="175.60mm" wi="130.81mm" orientation="landscape" file="US08625249-20140107-D00014.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00015" num="00015">
<img id="EMI-D00015" he="203.28mm" wi="145.29mm" orientation="landscape" file="US08625249-20140107-D00015.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00016" num="00016">
<img id="EMI-D00016" he="124.54mm" wi="164.76mm" file="US08625249-20140107-D00016.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00017" num="00017">
<img id="EMI-D00017" he="181.19mm" wi="164.76mm" orientation="landscape" file="US08625249-20140107-D00017.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00018" num="00018">
<img id="EMI-D00018" he="219.46mm" wi="150.28mm" file="US08625249-20140107-D00018.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00019" num="00019">
<img id="EMI-D00019" he="157.48mm" wi="166.03mm" file="US08625249-20140107-D00019.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00020" num="00020">
<img id="EMI-D00020" he="213.19mm" wi="120.57mm" orientation="landscape" file="US08625249-20140107-D00020.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00021" num="00021">
<img id="EMI-D00021" he="118.96mm" wi="156.80mm" file="US08625249-20140107-D00021.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00022" num="00022">
<img id="EMI-D00022" he="111.34mm" wi="146.64mm" file="US08625249-20140107-D00022.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00023" num="00023">
<img id="EMI-D00023" he="157.14mm" wi="167.72mm" file="US08625249-20140107-D00023.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00024" num="00024">
<img id="EMI-D00024" he="127.17mm" wi="166.37mm" file="US08625249-20140107-D00024.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00025" num="00025">
<img id="EMI-D00025" he="148.25mm" wi="150.54mm" file="US08625249-20140107-D00025.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00026" num="00026">
<img id="EMI-D00026" he="224.71mm" wi="124.21mm" orientation="landscape" file="US08625249-20140107-D00026.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">CROSS REFERENCE TO RELATED APPLICATION</heading>
<p id="p-0002" num="0001">This application is a continuation of PCT application No. PCT/JP2011/055424, which was filed on Mar. 8, 2011 based on Japanese Patent Application (No. 2010-051297) filed on Mar. 9, 2010, the contents of which are incorporated herein by reference. Also, all the references cited herein are incorporated as a whole.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0003" num="0002">1. Technical Field</p>
<p id="p-0004" num="0003">The present invention relates to a control apparatus which PWM (Pulse Width Modulation) controls an electromagnetic inductive load such as an electromagnetic clutch or a relay coil.</p>
<p id="p-0005" num="0004">2. Background Art</p>
<p id="p-0006" num="0005">Usually, an electromagnetic inductive load such as an electromagnetic clutch or a relay coil is subjected to the PWM control in order to reduce the power consumption. JP-A-2008-198850 shows one example of the above, and a current control apparatus disclosed therein is configured as shown in <figref idref="DRAWINGS">FIG. 24</figref>.</p>
<p id="p-0007" num="0006">Referring to <figref idref="DRAWINGS">FIG. 24</figref>, a current which flows from a battery <b>1</b> to a clutch solenoid <b>3</b> that is a load, and a current sense resistor <b>4</b> through a transistor <b>2</b> is sensed via an amplification circuit <b>5</b>, and, based on the sense value, a computing unit (microcomputer) <b>6</b> calculates a duty cycle so as to obtain a given average current amount as shown in <figref idref="DRAWINGS">FIG. 25</figref>, thereby PWM-driving the transistor <b>2</b>.</p>
<p id="p-0008" num="0007">In <figref idref="DRAWINGS">FIG. 24</figref>, reference numeral <b>7</b> denotes a freewheel diode, and reference numeral <b>8</b> denotes a clutch solenoid drive circuit. <figref idref="DRAWINGS">FIG. 25</figref> shows graphs for illustrating a method of determining the duty cycle.</p>
<heading id="h-0003" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0009" num="0008">In the conventional art, however, the computing unit and A/D converter which are used for converting the sensed current amount to the duty cycle are necessary, thereby producing a problem in that the circuit is expensive.</p>
<p id="p-0010" num="0009">In a control method in which an average current amount is managed, the ripple of a coil current is increased by an increase of the load inductance or the power supply voltage, and there is a possibility that the current may fall below the minimum operating current.</p>
<p id="p-0011" num="0010">In this case, it is contemplated that an operation failure such as clutch slipping or separation of relay contacts may occur. Therefore, a countermeasure that a sufficient margin is set must be taken, thereby causing wasteful power consumption.</p>
<p id="p-0012" num="0011">In order to solve this, also a method has been proposed in which, as shown in <figref idref="DRAWINGS">FIG. 26</figref>, the PWM is turned ON/OFF at the lower and upper limit values of the current flowing through the load. In this case, the PWM frequency is determined by the inductance of the load (when the inductance is low, the frequency is high as shown in <figref idref="DRAWINGS">FIG. 26(</figref><i>a</i>), and, when the inductance is high, the frequency is low as shown in <figref idref="DRAWINGS">FIG. 26(</figref><i>b</i>)). Therefore, there is a possibility that, when the frequency corresponds to an audible frequency, abnormal noises may be generated.</p>
<p id="p-0013" num="0012">In a circuit design, moreover, validations of the switching loss and noises according to the frequencies of loads must be performed.</p>
<p id="p-0014" num="0013">The present invention has been conducted in order to solve the problems that a computing unit and A/D converter which are used for converting a sensed current amount to a duty cycle are necessary, and that the circuit is expensive.</p>
<p id="p-0015" num="0014">A control apparatus for an electromagnetic inductive load according to a first aspect of the invention so as to solve the problems is configured so that the control apparatus is a circuit in which a switching element that is PWM-controlled and the electromagnetic inductive load are connected together in series between a DC power supply and a ground, and includes: a current sensing unit which senses a regenerative current in an OFF time in a PWM driving operation of the switching element; a current detecting unit which outputs a current detection signal when a sense current sensed by the current sensing unit becomes smaller than a target current amount; a PWM signal generating unit which receives a clock signal of a given frequency and the current detection signal output from the current detecting unit, and which generates a PWM signal that is at a high level or a low level during a period from an output of a signal indicating a sense that the current detection signal becomes smaller than the target current amount, to rising or falling of the clock signal; and a driving unit which is disposed between the PWM signal generating unit and the switching element, and which controls to drive the switching element.</p>
<p id="p-0016" num="0015">In the above configuration, the current sensing unit senses that the sense current (the regenerative current in the OFF time in the PWM driving of the switching element) detected by the current detecting unit becomes smaller than the target current amount, and the PWM signal is generated based on the current detection signal and the clock signal. When the switching element is controlled by the PWM signal, therefore, the duty cycle corresponding to the target current amount can be automatically adjusted without calculating the duty cycle by means of a computing unit or the like.</p>
<p id="p-0017" num="0016">Moreover, the target current amount is adjusted so as to have a value which is equal to or larger than a minimum operating current of the load. Therefore, the load current is not reduced below this value, and an operation failure of the load such as clutch slipping or separation of relay contacts can be prevented from occurring.</p>
<p id="p-0018" num="0017">Furthermore, the PWM frequency is equal to the frequency of the clock, and hence the PWM control can be performed at a constant frequency irrespective of the inductance of the load.</p>
<p id="p-0019" num="0018">The control apparatus for the electromagnetic inductive load according to a second aspect of the invention is configured to include: a power supply voltage monitoring unit which monitors a voltage of the DC power supply, and which outputs a voltage reduction signal during a period when the power supply voltage is reduced to or below a set voltage; and a DC drive signal generating unit which receives the voltage reduction signal output from the power supply voltage monitoring unit, and which outputs a DC drive signal that is always at the high level during the power supply voltage reduction period and a given time period after the voltage reduction is returned, wherein the driving unit receives the DC drive signal output from the DC drive signal generation and the PWM signal output from the PWM signal generating unit.</p>
<p id="p-0020" num="0019">The control apparatus for the electromagnetic inductive load according to a third aspect of the invention is configured to include: a logical sum unit which logically sums the clock signal and the PWM signal generated by the PWM signal generating unit, wherein the driving unit receives an output of the logical sum unit.</p>
<p id="p-0021" num="0020">The control apparatus for the electromagnetic inductive load according to a fourth aspect of the invention is configured so that the current sensing unit is disposed in a regenerative current flow path through which a regenerative current in the OFF time during the PWM driving operation of the switching element flows.</p>
<p id="p-0022" num="0021">The control apparatus for the electromagnetic inductive load according to a fifth aspect of the invention is configured so that the switching element is placed on a side of the DC power supply to be subjected to high-side driving, the current sensing unit includes a sense resistor which is interposed in the regenerative current flow path, and the current detecting unit includes an inversion circuit which inverts a terminal voltage of the sense resistor and a comparator which compares an output voltage of the inversion circuit with a set voltage.</p>
<p id="p-0023" num="0022">The control apparatus for the electromagnetic inductive load according to a sixth aspect of the invention is configured so that the switching element is placed on a side of the ground to be subjected to low-side driving, the current sensing unit includes a sense resistor which is interposed in the regenerative current flow path, and the current detecting unit includes a first voltage drop circuit which drops a terminal voltage of the sense resistor on a side of the DC-power supply, a second voltage drop circuit which drops a terminal voltage of the sense resistor on a side of the switching element, and a comparator which compares an output voltage of the first voltage drop circuit with an output voltage of the second voltage drop circuit.</p>
<p id="p-0024" num="0023">The control apparatus for the electromagnetic inductive load according to a seventh aspect of the invention is configured so that the switching element is placed on a side of the ground to be subjected to low-side driving, the current sensing unit includes a sense resistor which is interposed in the regenerative current flow path, and the current detecting unit includes a differential amplification circuit which obtains a deviation of a terminal voltage of the sense resistor on a side of the DC-power supply and a terminal voltage of the sense resistor on a side of the switching element, and a comparator which compares a differential output of the differential amplification circuit with a set voltage.</p>
<p id="p-0025" num="0024">(1) According to the first to seventh aspects of the invention, it is possible to provide, in the control apparatus for an electromagnetic inductive load, a PWM control circuit which can perform the driving while automatically adjusting the duty cycle so as to attain the target current amount, without converting the sense value of the current to the duty cycle by means of a computing unit or the like.</p>
<p id="p-0026" num="0025">Therefore, neither a computing unit (microcomputer or the like) nor A/D converter used for conversion to the duty cycle is not necessary, and the PWM control can be realized by a small size and economical configuration.</p>
<p id="p-0027" num="0026">(2) According to the second aspect of the invention, the driving operation can be automatically switched to the DC driving during the voltage reduction period. Therefore, the electromagnetic inductive load is allowed to surely operate even at a low voltage, while avoiding an unstable situation in the boundary between the DC driving (=Duty 100%) and the PWM operation.</p>
<p id="p-0028" num="0027">Moreover, the DC driving operation can be performed during the given time period after returning from voltage reduction. Therefore, it is possible to cope with also a load which requires a large current in the initial suction operation, such as an electromagnetic clutch or a relay with no problem.</p>
<p id="p-0029" num="0028">(3) According to the third aspect of the invention, in the case where the power supply voltage is raised or the load inductance is low, the duty cycle during the PWM driving is small, but fixed at least to the duty cycle of the clock because of the logical sum with the clock signal. When the duty cycle of the clock is set to a value that is larger than a duty cycle in which the frequency changes, the current amount during the PWM driving does not become smaller than the minimum operating current of the load, and the load is always allowed to surely operate at a constant frequency.</p>
<p id="p-0030" num="0029">When returning from a state where the power supply voltage is raised, the duty cycle of the PWM is larger than that of the clock signal, and returning to the PWM driving can be automatically performed by the logical sum unit. Therefore, a sensor unit which reads the duty cycle of the PWM is not required. Consequently, the PWM control of a constant frequency can be realized by an economical configuration.</p>
<p id="p-0031" num="0030">(4) According to the fourth to seventh aspects of the invention, at the ON time in the PWM driving operation, no current flows through the current sensing unit, and therefore the period of energization to the current sensing unit is shorter than the total PWM driving period. Therefore, the power loss due to the current sensing unit (for example, the sense resistor) can be reduced.</p>
<p id="p-0032" num="0031">Moreover, the sense resistor serving as the current sensing unit is not inserted in an ON-current path during the PWM driving of the switching element. During the ON-time of the switching element, therefore, a voltage drop is not generated by the sense resistor, and hence a failure due to such reduction of the power supply voltage does not occur.</p>
<p id="p-0033" num="0032">(5) According to the sixth aspect of the invention, even in the circuit configuration where the terminal voltage of the sense resistor on the side of the switching element is always higher than that on the side of the DC power supply, because of the low-side driving, the voltage can be dropped by the first and second voltage drop circuits, and the comparator serving as the current detecting unit is enabled to normally operate.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. 1</figref> shows the basic configuration of Embodiment 1 of the invention, in which <figref idref="DRAWINGS">FIG. 1(</figref><i>a</i>) is a diagram of the total configuration, and <figref idref="DRAWINGS">FIG. 1(</figref><i>b</i>) is a timing chart illustrating the operation of <figref idref="DRAWINGS">FIG. 1(</figref><i>a</i>).</p>
<p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. 2</figref> is a flowchart of a PWM control in <figref idref="DRAWINGS">FIG. 1(</figref><i>a</i>).</p>
<p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. 3</figref> is a graph illustrating a relationship between a sense current amount and a duty cycle in Embodiment 1 of the invention.</p>
<p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. 4</figref> is a diagram of main portions showing another example of a path through which a regenerative current in <figref idref="DRAWINGS">FIG. 1(</figref><i>a</i>) flows.</p>
<p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. 5</figref> shows a specific example of Embodiment 1 of the invention, in which <figref idref="DRAWINGS">FIG. 5(</figref><i>a</i>) is a circuit diagram of main portions, and <figref idref="DRAWINGS">FIG. 5(</figref><i>b</i>) is a timing chart illustrating the operation.</p>
<p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. 6</figref> is a diagram of the basic configuration of Embodiment 2 of the invention.</p>
<p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. 7</figref> is a diagram of main portions showing a specific example of Embodiment 2 of the invention.</p>
<p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. 8</figref> is a timing chart illustrating the operation of <figref idref="DRAWINGS">FIG. 7</figref>.</p>
<p id="p-0042" num="0041"><figref idref="DRAWINGS">FIG. 9</figref> is a diagram of the basic configuration of Embodiment 3 of the invention.</p>
<p id="p-0043" num="0042"><figref idref="DRAWINGS">FIG. 10</figref> is a diagram of main portions showing Specific example 1 of Embodiment 3 of the invention.</p>
<p id="p-0044" num="0043"><figref idref="DRAWINGS">FIG. 11</figref> is a timing chart illustrating the operation of <figref idref="DRAWINGS">FIG. 10</figref>.</p>
<p id="p-0045" num="0044"><figref idref="DRAWINGS">FIG. 12</figref> is a diagram of main portions showing Specific example 2 of Embodiment 3 of the invention.</p>
<p id="p-0046" num="0045"><figref idref="DRAWINGS">FIG. 13</figref> is a timing chart illustrating the operation of <figref idref="DRAWINGS">FIG. 12</figref>.</p>
<p id="p-0047" num="0046"><figref idref="DRAWINGS">FIG. 14</figref> is an operation waveform chart in the vicinity of a duty cycle of 100% illustrating a problem which may be caused in minute variation of the power supply voltage in the apparatus of <figref idref="DRAWINGS">FIG. 1(</figref><i>a</i>).</p>
<p id="p-0048" num="0047"><figref idref="DRAWINGS">FIG. 15</figref> is a diagram showing Embodiment 4 of the invention.</p>
<p id="p-0049" num="0048"><figref idref="DRAWINGS">FIG. 16</figref> is a voltage waveform chart showing hysteresis characteristics of a power supply voltage monitor circuit <b>16</b> in <figref idref="DRAWINGS">FIG. 15</figref>.</p>
<p id="p-0050" num="0049"><figref idref="DRAWINGS">FIG. 17</figref> is a timing chart illustrating the operation of <figref idref="DRAWINGS">FIG. 15</figref>.</p>
<p id="p-0051" num="0050"><figref idref="DRAWINGS">FIG. 18</figref> is a flowchart of the control shown in <figref idref="DRAWINGS">FIG. 15</figref>.</p>
<p id="p-0052" num="0051"><figref idref="DRAWINGS">FIG. 19</figref> shows timing charts illustrating a problem in an increase of the power supply voltage, in which <figref idref="DRAWINGS">FIG. 19(</figref><i>a</i>) is a timing chart in the normal voltage, and <figref idref="DRAWINGS">FIG. 19(</figref><i>b</i>) is a timing chart in the increase of the power supply voltage (without the compulsive clock PWM).</p>
<p id="p-0053" num="0052"><figref idref="DRAWINGS">FIG. 20</figref> is a diagram showing Embodiment 5 of the invention.</p>
<p id="p-0054" num="0053"><figref idref="DRAWINGS">FIG. 21</figref> is a timing chart illustrating the operation of <figref idref="DRAWINGS">FIG. 20</figref>.</p>
<p id="p-0055" num="0054"><figref idref="DRAWINGS">FIG. 22</figref> is a characteristics diagram illustrating relationships between the power supply voltage and the duty cycle in Embodiment 5.</p>
<p id="p-0056" num="0055"><figref idref="DRAWINGS">FIG. 23</figref> shows timing charts of the PWM control in the apparatus of <figref idref="DRAWINGS">FIG. 20</figref>, in which <figref idref="DRAWINGS">FIG. 23(</figref><i>a</i>) is a timing chart in the normal voltage, and <figref idref="DRAWINGS">FIG. 23(</figref><i>b</i>) is a timing chart in the increase of the power supply voltage (with the compulsive clock PWM).</p>
<p id="p-0057" num="0056"><figref idref="DRAWINGS">FIG. 24</figref> is a diagram showing an example of a conventional apparatus which PWM-controls an electromagnetic inductive load.</p>
<p id="p-0058" num="0057"><figref idref="DRAWINGS">FIG. 25</figref> shows views illustrating a method of determining the duty cycle in a conventional PWM control, in which <figref idref="DRAWINGS">FIG. 25(</figref><i>a</i>) is a view showing time variations of an average current amount, and <figref idref="DRAWINGS">FIG. 25(</figref><i>b</i>) is a view showing relationships between the average current amount and the duty cycle.</p>
<p id="p-0059" num="0058"><figref idref="DRAWINGS">FIG. 26</figref> is a view illustrating a problem of a conventional method in which the PWM is turned ON/OFF at the lower and upper limit values of the load current, respectively, in which <figref idref="DRAWINGS">FIG. 26(</figref><i>a</i>) and <figref idref="DRAWINGS">FIG. 26(</figref><i>b</i>) are charts showing relationships between the PWM frequency and the inductance of the load.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DETAILED DESCRIPTION OF THE EXEMPLARY EMBODIMENTS</heading>
<p id="p-0060" num="0059">Hereinafter, embodiments of the invention will be described with reference to the drawings. However, it should be understood that the invention is not limited the following embodiment examples.</p>
<heading id="h-0006" level="1">Embodiment 1</heading>
<p id="p-0061" num="0060"><figref idref="DRAWINGS">FIG. 1</figref> shows the basic configuration of Embodiment 1 of the invention, in which <figref idref="DRAWINGS">FIG. 1(</figref><i>a</i>) is a diagram of total configuration, and <figref idref="DRAWINGS">FIG. 1(</figref><i>b</i>) is a timing chart of a PWM control in <figref idref="DRAWINGS">FIG. 1(</figref><i>a</i>).</p>
<p id="p-0062" num="0061">In <figref idref="DRAWINGS">FIG. 1(</figref><i>a</i>) and <figref idref="DRAWINGS">FIG. 1(</figref><i>b</i>), between a DC power supply VB and the ground, a switching device Q, an electromagnetic inductive load <b>100</b> such as an electromagnetic clutch or a relay coil, and a current sensor (current sensing unit) <b>11</b> are sequentially connected together in series, and a freewheel diode D in which the polarity is as illustrated is connected in parallel to the electromagnetic inductive load <b>100</b> and the current sensor (current sensing unit) <b>11</b>.</p>
<p id="p-0063" num="0062">The reference numeral <b>10</b> denotes an electromagnetic inductive load control circuit serving as the control apparatus for an electromagnetic inductive load of the invention, and the circuit includes: the current sensor (current sensing unit) <b>11</b> which senses a current flowing through the electromagnetic inductive load <b>100</b>; a current detection circuit (current detecting unit) <b>12</b>; a PWM signal generation circuit (PWM signal generating unit) <b>13</b>; and a drive circuit (driving unit) <b>14</b> which drives and controls the switching device Q.</p>
<p id="p-0064" num="0063">The switching device Q is a device which switches the current flowing through the electromagnetic inductive load <b>100</b>, and configured, for example, by a semiconductor device such as an FET or a transistor. Although <figref idref="DRAWINGS">FIG. 1(</figref><i>a</i>) and <figref idref="DRAWINGS">FIG. 1(</figref><i>b</i>) show by way of example the high-side driving using an FET, it may be configured by a semiconductor device such as a transistor, and by the low-side driving.</p>
<p id="p-0065" num="0064">The freewheel diode D constitutes a path through which a regenerative current flows during the OFF period in the PWM driving of the switching device Q.</p>
<p id="p-0066" num="0065">The current sensor <b>11</b> is configured by a resistor and a shunt resistor, and monitors the current flowing through the electromagnetic inductive load <b>100</b>. In the configuration of <figref idref="DRAWINGS">FIGS. 1(</figref><i>a</i>) and <b>1</b>(<i>b</i>), it is possible to monitor the current flowing through the electromagnetic inductive load <b>100</b>, in both the ON/OFF periods of the PWM. Alternatively, a configuration in which only the regenerative current in the OFF period can be monitored as in Embodiments 2 and 3 that will be described later may be employed.</p>
<p id="p-0067" num="0066">The current detection circuit <b>12</b> senses a target sense current amount Ith, from a sense signal Isense (sometimes referred to as a sense current) obtained by the current sensor <b>11</b> and a reference current Iref. At this time, Iref is set so that the sense current amount Ith is larger than the minimum operating current of the load.</p>
<p id="p-0068" num="0067">The PWM signal generation circuit <b>13</b> generates a PWM signal Vpwm (sometimes referred to merely as an output voltage Vpwm) from the output signal Idetect (current detection signal) of the current detection circuit <b>12</b> and a clock signal.</p>
<p id="p-0069" num="0068">The drive circuit <b>14</b> drives the switching device Q based on the PWM signal supplied from the PWM signal generation circuit <b>13</b>.</p>
<p id="p-0070" num="0069">Next, the operation of the thus configured apparatus will be described with reference to a PWM control flowchart of <figref idref="DRAWINGS">FIG. 2</figref>, and a PWM control timing chart of <figref idref="DRAWINGS">FIG. 1(</figref><i>b</i>).</p>
<p id="p-0071" num="0070">First, it is determined in step S<b>1</b> whether or not a control command (Input) is input to the drive circuit <b>14</b>. If not input, the switching device Q is turned OFF (step S<b>2</b>).</p>
<p id="p-0072" num="0071">If the control command is input, the switching device Q is in a state where it is PWM-controlled. During the ON period of the PWM operation, therefore, the current flows in the ordered route of the DC power supply VS, the switching device Q, the electromagnetic inductive load <b>100</b>, the current sensor <b>11</b> and GND. Further, during the OFF period, the switching device Q is turned OFF, and the regenerative current flows through the electromagnetic inductive load <b>100</b> in the ordered route of the electromagnetic inductive load <b>100</b>, the current sensor <b>11</b>, GND, the freewheel diode D, and the electromagnetic inductive load <b>100</b>.</p>
<p id="p-0073" num="0072">Next, it is determined in step S<b>3</b> whether or not the load current Iload is smaller than the target sense current amount Ith. If Iload&#x3c;Ith is not satisfied, it is determined in step S<b>4</b> whether or not the clock signal falls.</p>
<p id="p-0074" num="0073">In the case where the clock signal falls, for example, as shown at time t<b>1</b> in <figref idref="DRAWINGS">FIG. 1(</figref><i>b</i>), the output voltage Vpwm of the PWM signal generation circuit <b>13</b> is set in step S<b>5</b> to Low level, thereby turning OFF the load.</p>
<p id="p-0075" num="0074">During the OFF period of the PWM, the regenerative current is generated by the energy accumulated in the electromagnetic inductive load <b>100</b>, and the load current Iload is gradually reduced.</p>
<p id="p-0076" num="0075">When, at time t<b>2</b>, the load current Iload becomes equal to or smaller than the target sense current amount Ith, the sense current Isense of the current sensor <b>11</b> is reduced to be smaller than the reference current Iref, and the current detection signal Idetect is output from the current detection circuit <b>12</b>. In step S<b>6</b>, the PWM signal generation circuit <b>13</b> sets its output voltage Vpwm to High level, thereby turning ON the load. During the ON period of the PWM, the current is gradually increased by the current supply from the DC power supply VB.</p>
<p id="p-0077" num="0076">Next, when the clock signal falls at time t<b>3</b>, the output voltage Vpwm of the PWM signal generation circuit <b>13</b> is set in step S<b>5</b> to Low level in a similar manner as the case of time t<b>1</b>, thereby turning OFF the load.</p>
<p id="p-0078" num="0077">When the above-described operations at times t<b>1</b> to t<b>3</b> are repeated, the duty cycle corresponding to the target sense current amount Ith can be automatically adjusted as shown in <figref idref="DRAWINGS">FIG. 3</figref> without calculating the duty cycle by means of a computing unit or the like.</p>
<p id="p-0079" num="0078"><figref idref="DRAWINGS">FIG. 3</figref> shows relationships between the sense current amount Ith and the duty cycle. The region where the duty cycle is smaller than 100% is the current control region due to the PWM. The figure shows that, when reaching 100%, switching to the DC driving is performed.</p>
<p id="p-0080" num="0079">When the sense current amount Ith is adjusted so as to have a value which is equal to or larger than the minimum current of the electromagnetic inductive load <b>100</b>, the load current is not reduced below this value, and an operation failure of the load such as clutch slipping or separation of relay contacts can be prevented from occurring.</p>
<p id="p-0081" num="0080">Therefore, the current setting in which an excess margin is considered is not necessary, and hence a PWM control in which the power consumption is further reduced can be realized.</p>
<p id="p-0082" num="0081">Moreover, the PWM frequency is equal to the frequency of the clock. Therefore, the PWM control can be performed at a constant frequency irrespective of the inductance of the electromagnetic inductive load <b>100</b>. Consequently, it is possible to prevent abnormal noises from being generated. In a design, moreover, validations of the switching loss and noises with respect to frequency variations are not necessary.</p>
<p id="p-0083" num="0082">The above-described operation may be performed while the relationships between High and Low of the output voltage Vpwm of the PWM signal generation circuit <b>13</b>, and between rising and falling of the clock signal are reversed to each other.</p>
<p id="p-0084" num="0083">The path through which the regenerative current flows may be configured so that a switching device Q&#x2032; such as an FET is used as shown in <figref idref="DRAWINGS">FIG. 4</figref> in place of the freewheel diode D in <figref idref="DRAWINGS">FIG. 1(</figref><i>a</i>), and, only during the OFF period of the PWM, conduction is performed by the drive circuit <b>14</b> and a regeneration path control circuit <b>15</b>.</p>
<p id="p-0085" num="0084">In <figref idref="DRAWINGS">FIG. 4</figref>, the current sensor <b>11</b>, the current detection circuit <b>12</b>, and the PWM signal generation circuit <b>13</b> are not shown, but are configured in a similar manner as in <figref idref="DRAWINGS">FIG. 1(</figref><i>a</i>).</p>
<p id="p-0086" num="0085">Specifically, the current sensor <b>11</b> and the current detection circuit <b>12</b> are configured as shown in <figref idref="DRAWINGS">FIG. 5(</figref><i>a</i>).</p>
<p id="p-0087" num="0086">Namely, a sense resistor Rs is connected between the electromagnetic inductive load <b>100</b> and the ground, a comparator <b>21</b> in which a reference voltage Vref is used as the non-inverting input is disposed in the current detection circuit <b>12</b>, and the voltage Vsense (sometimes referred to as the sense voltage) of the common connection point of the sense resistor Rs and the electromagnetic inductive load <b>100</b> is used as the inverting input of the comparator <b>21</b>.</p>
<p id="p-0088" num="0087">In <figref idref="DRAWINGS">FIG. 5(</figref><i>a</i>), the PWM signal generation circuit <b>13</b> is not shown, but is configured in a similar manner as in <figref idref="DRAWINGS">FIG. 1(</figref><i>a</i>).</p>
<p id="p-0089" num="0088">The operation of the apparatus of <figref idref="DRAWINGS">FIG. 5(</figref><i>a</i>) is basically similar to that of <figref idref="DRAWINGS">FIG. 1(</figref><i>a</i>). During the ON period of the PWM operation, namely, the current flows in the route of the DC power supply VB&#x2192;the switching device Q&#x2192;the electromagnetic inductive load <b>100</b>&#x2192;the sense resistor Rs&#x2192;GND, and, during the OFF period, the switching device Q is turned OFF, and the regenerative current flows through the electromagnetic inductive load <b>100</b> in the route of the electromagnetic inductive load <b>100</b>&#x2192;the sense resistor Rs&#x2192;GND&#x2192;the freewheel diode D the electromagnetic inductive load <b>100</b>.</p>
<p id="p-0090" num="0089">In the case where the clock signal (not shown) supplied to the PWM signal generation circuit <b>13</b> falls, for example, at time t<b>1</b> during the above-described PWM operation, the output voltage Vpwm of the PWM signal generation circuit <b>13</b> is set to Low level, thereby turning OFF the PWM.</p>
<p id="p-0091" num="0090">During the OFF period of the PWM, the regenerative current is generated by the energy accumulated in the electromagnetic inductive load <b>100</b>, and the current flowing through the sense resistor Rs, i.e., the load current Iload is gradually reduced.</p>
<p id="p-0092" num="0091">When, at time t<b>2</b>, the current (=Iload) flowing through the sense resistor Rs becomes equal to or smaller than the target sense current amount Ith (=Vref/Rs), the sense voltage Vsense becomes lower than the reference voltage Vref, the current detection signal Idetect is output from the comparator <b>21</b>, and the PWM signal generation circuit <b>13</b> sets its output voltage Vpwm to High level, thereby turning ON the PWM.</p>
<p id="p-0093" num="0092">During the ON period of the PWM, the current is gradually increased by the current supply from the DC power supply VB. When the clock signal falls at time t<b>3</b>, the output voltage Vpwm of the PWM signal generation circuit <b>13</b> is set to Low level in a similar manner as the case of time t<b>1</b>, thereby turning OFF the load.</p>
<p id="p-0094" num="0093">When the above-described operations at times t<b>1</b> to t<b>3</b> are repeated, the duty cycle corresponding to the target sense current amount Ith can be automatically adjusted without calculating the duty cycle by means of a computing unit or the like. Also in the apparatus of <figref idref="DRAWINGS">FIG. 5(</figref><i>a</i>), it is possible to attain functions and effects which are similar to those attained in the apparatus of <figref idref="DRAWINGS">FIG. 1(</figref><i>a</i>).</p>
<heading id="h-0007" level="1">Embodiment 2</heading>
<p id="p-0095" num="0094">In the circuit of <figref idref="DRAWINGS">FIG. 5(</figref><i>a</i>) in Embodiment 1, the current which is identical with the load current flows through the sense resistor Rs in both the ON/OFF periods of the PWM operation, and therefore electric power is always lost. This loss causes the sense resistor Rs to generate heat, thereby producing a problem in that the other circuits are adversely affected.</p>
<p id="p-0096" num="0095">Since the sense resistor Rs is in the current path of the load, a voltage drop is generated by the sense resistor Rs at the ON time of the PWM, and there is a possibility that an operation failure of the load may occur when the power supply voltage is reduced and the duty cycle is raised to 100%.</p>
<p id="p-0097" num="0096">One countermeasure is that the resistance of the sense resistor Rs is made small in order to reduce the loss and the voltage drop. In the countermeasure, however, there arises an adverse effect that the accuracy of sensing a current is impaired.</p>
<p id="p-0098" num="0097">In Embodiment 2, as shown in <figref idref="DRAWINGS">FIG. 6</figref>, therefore, the current sensor <b>11</b> serving as a current sensing unit is disposed in the regenerative current flow path through which the regenerative current in the OFF time during the PWM driving of the switching device Q flows.</p>
<p id="p-0099" num="0098">In <figref idref="DRAWINGS">FIG. 6</figref>, the components which are identical with those of <figref idref="DRAWINGS">FIG. 1(</figref><i>a</i>) are denoted by the same reference numerals, and their description is omitted. <figref idref="DRAWINGS">FIG. 6</figref> is different from <figref idref="DRAWINGS">FIG. 1(</figref><i>a</i>) in that an end portion of the electromagnetic inductive load <b>100</b> is directly grounded, and the current sensor <b>11</b> is disposed between the freewheel diode D and the ground, and the other portions are configured in a similar manner as in <figref idref="DRAWINGS">FIG. 1(</figref><i>a</i>).</p>
<p id="p-0100" num="0099">Specifically, the current sensor <b>11</b> and the current detection circuit <b>12</b> in <figref idref="DRAWINGS">FIG. 6</figref> are configured, for example, as shown in <figref idref="DRAWINGS">FIG. 7</figref>. Namely, the current sensor <b>11</b> is configured by the sense resistor Rs which is connected between the freewheel diode D and the ground.</p>
<p id="p-0101" num="0100">The current detection circuit <b>12</b> is configured by: an inversion circuit formed by a resistor <b>31</b> in which one end is connected to the common connection point of the sense resistor Rs and the freewheel diode D, and the other end is connected to the inverting input end of an operational amplifier <b>22</b>, the operational amplifier <b>22</b> in which the non-inverting input end is grounded, and a resistor <b>32</b> which is connected between the non-inverting input end and output end of the operational amplifier <b>22</b>; and a comparator <b>23</b> in which the output voltage Vrev (the voltage that is obtained by inverting the sense voltage Vsense of the common connection point, sometimes referred to as the voltage inversion signal) of the operational amplifier <b>22</b> is used as the inverting input, and the reference voltage Vref is used as the non-inverting input.</p>
<p id="p-0102" num="0101">In <figref idref="DRAWINGS">FIG. 7</figref>, the PWM signal generation circuit <b>13</b> is not shown, but is configured in a similar manner as in <figref idref="DRAWINGS">FIG. 6</figref>.</p>
<p id="p-0103" num="0102">Next, the operation of the thus configured apparatus will be described with reference to <figref idref="DRAWINGS">FIG. 8</figref> showing operation waveforms in the current detection circuit <b>12</b>.</p>
<p id="p-0104" num="0103">During the ON period of the PWM operation, first, the current flows in the route of the DC power supply VB&#x2192;the switching device Q&#x2192;the electromagnetic inductive load <b>100</b>&#x2192;GND, and, during the OFF period, the switching device Q is turned OFF, and the regenerative current flows through the electromagnetic inductive load <b>100</b> in the route of the electromagnetic inductive load <b>100</b>&#x2192;GND&#x2192;the sense resistor Rs&#x2192;the freewheel diode D&#x2192;the electromagnetic inductive load <b>100</b>.</p>
<p id="p-0105" num="0104">In the case where the clock signal (not shown) supplied to the PWM signal generation circuit <b>13</b> falls, for example, at time t<b>1</b> during the above-described PWM operation, the output voltage Vpwm of the PWM signal generation circuit <b>13</b> is set to Low level, thereby turning OFF the PWM.</p>
<p id="p-0106" num="0105">During the OFF period of the PWM, the regenerative current is generated by the energy accumulated in the electromagnetic inductive load <b>100</b>, a negative voltage appears as the sense voltage Vsense across the sense resistor Rs, and is inverted by the operational amplifier <b>22</b>, and the current flowing through the sense resistor Rs, i.e., the load current Iload is gradually reduced.</p>
<p id="p-0107" num="0106">During the OFF period of the PWM, furthermore, the voltage inversion signal Vrev is larger than the reference voltage Vref, and therefore the current detection signal output from the comparator <b>23</b> is at Low level.</p>
<p id="p-0108" num="0107">When, at time t<b>2</b>, the current flowing through the sense resistor Rs becomes equal to or smaller than the target sense current amount Ith, the voltage inversion signal Vrev becomes smaller than the reference voltage Vref, the current detection signal Idetect output from the comparator <b>23</b> is at High level, and the PWM signal generation circuit <b>13</b> sets its output voltage Vpwm to High level, thereby turning ON the PWM.</p>
<p id="p-0109" num="0108">During the ON period of the PWM, the current is gradually increased by the current supply from the DC power supply VB. When the clock signal falls at time t<b>3</b>, the output voltage Vpwm of the PWM signal generation circuit <b>13</b> is set to Low level in a similar manner as the case of time t<b>1</b>, thereby turning OFF the PWM.</p>
<p id="p-0110" num="0109">When the above-described operations at times t<b>1</b> to t<b>3</b> are repeated, the duty cycle corresponding to the target sense current amount Ith can be automatically adjusted without calculating the duty cycle by means of a computing unit or the like. Also in the apparatus of <figref idref="DRAWINGS">FIG. 7</figref>, it is possible to attain functions and effects which are similar to those attained in the apparatus of <figref idref="DRAWINGS">FIG. 1(</figref><i>a</i>).</p>
<p id="p-0111" num="0110">During the ON period in the PWM, moreover, no current flows through the sense resistor Rs. Therefore, the loss in the sense resistor Rs can be reduced while realizing the PWM control method in Embodiment 1 in which the sense current amount Ith is detected. At the ON time of the switching device Q, the power supply is applied only to the electromagnetic inductive load <b>100</b>, and hence it is possible to prevent an operation failure of the load which may be caused when the power supply voltage is reduced, from occurring.</p>
<heading id="h-0008" level="1">Embodiment 3</heading>
<p id="p-0112" num="0111">In Embodiment 3, the invention is applied to an apparatus configured by the low-side driving. <figref idref="DRAWINGS">FIG. 9</figref> shows the basic configuration of Embodiment 3, and is different from <figref idref="DRAWINGS">FIG. 6</figref> in that, between the DC power supply VB and the ground, the electromagnetic inductive load <b>100</b> and the switching device Q are sequentially connected together in series, and the freewheel diode D and the current sensor <b>11</b> are interposed in series in the regenerative current flow path of the electromagnetic inductive load <b>100</b>, and the other portions are configured in the same manner as in <figref idref="DRAWINGS">FIG. 6</figref>.</p>
<p id="p-0113" num="0112">Specifically, the current sensor <b>11</b> and the current detection circuit <b>12</b> in <figref idref="DRAWINGS">FIG. 9</figref> are configured, for example, as shown in <figref idref="DRAWINGS">FIG. 10</figref>. Namely, the current sensor <b>11</b> is configured by the sense resistor Rs which is connected between the freewheel diode D and the DC power supply.</p>
<p id="p-0114" num="0113">The current detection circuit <b>12</b> is configured by: a drop circuit A (first voltage drop circuit) which drops the power supply voltage VB (the voltage of the DC power supply VB is sometimes referred to as the power supply voltage VB) of the common connection point <b>51</b> of the DC power supply and the sense resistor Rs; a drop circuit B (second voltage drop circuit) which drops the sense voltage Vsense of the common connection point <b>52</b> of the sense resistor Rs and the freewheel diode D; and a comparator <b>24</b> in which the output voltage VB-drop of the drop circuit A is used as the non-inverting input, and the output voltage Vsense-drop of the drop circuit B is used as the inverting input.</p>
<p id="p-0115" num="0114">The drop circuit A includes: a transistor <b>41</b> in which the collector is connected to the common connection point <b>51</b> via a resistor <b>33</b>, and also to the non-inverting input end of the comparator <b>24</b>, and the emitter is grounded via a resistor <b>34</b>; and a comparator <b>25</b> in which the reference voltage Vref is used as the non-inverting input, the inverting input end is connected to the emitter of the transistor <b>41</b>, and the output end is connected to the base of the transistor <b>41</b>.</p>
<p id="p-0116" num="0115">The drop circuit B includes: a transistor <b>42</b> in which the collector is connected to the common connection point <b>52</b> via a resistor <b>35</b>, and also to the non-inverting input end of the comparator <b>24</b>, and the emitter is grounded via a resistor <b>36</b>; and a comparator <b>26</b> in which the reference voltage Vref is used as the non-inverting input, the inverting input end is connected to the emitter of the transistor <b>42</b>, and the output end is connected to the base of the transistor <b>42</b>.</p>
<p id="p-0117" num="0116">The parameters of the devices of the drop circuit A and the drop circuit B are set so that, as shown in a drop voltage in <figref idref="DRAWINGS">FIG. 11</figref> which will be described later, a potential difference of Vdif is generated between the output voltage VB-drop and output voltage Vsense-drop which are input to the comparator <b>24</b>. As described later, therefore, the PWM control based on the target sense current amount Ith is enabled.</p>
<p id="p-0118" num="0117">In <figref idref="DRAWINGS">FIG. 10</figref>, the PWM signal generation circuit <b>13</b> is not shown, but is configured in a similar manner as in <figref idref="DRAWINGS">FIG. 9</figref>.</p>
<p id="p-0119" num="0118">Next, the operation of the thus configured apparatus will be described with reference to <figref idref="DRAWINGS">FIG. 11</figref> showing operation waveforms in the current detection circuit <b>12</b>.</p>
<p id="p-0120" num="0119">In the case where the control command (Input in <figref idref="DRAWINGS">FIG. 9</figref>) is input to the drive circuit <b>14</b>, first, the switching device Q is in a state where it is PWM-controlled. During the ON period of the PWM operation, therefore, the current flows in the route of the DC power supply VB&#x2192;the electromagnetic inductive load <b>100</b>&#x2192;the switching device Q&#x2192;GND, and, during the OFF period, the switching device Q is turned OFF, and the regenerative current flows through the electromagnetic inductive load <b>100</b> in the route of the electromagnetic inductive load <b>100</b> the freewheel diode D&#x2192;the sense resistor Rs&#x2192;the electromagnetic inductive load <b>100</b>.</p>
<p id="p-0121" num="0120">In the case where the clock signal (not shown) supplied to the PWM signal generation circuit <b>13</b> falls, for example, at time t<b>1</b> during the above-described PWM operation, the output voltage Vpwm of the PWM signal generation circuit <b>13</b> is set to Low level, thereby turning OFF the PWM.</p>
<p id="p-0122" num="0121">During the OFF period of the PWM, the regenerative current is generated by the energy accumulated in the electromagnetic inductive load <b>100</b>, the output voltage Vsense-drop in which the terminal voltage of the sense resistor Rs is dropped by the regenerative current becomes higher than the output voltage VB-drop in which the power supply voltage VB is dropped, and the current flowing through the sense resistor Rs, i.e., the load current Iload is gradually reduced. During the OFF period of the PWM, furthermore, the output voltage Vsense-drop is higher than VB-drop, and therefore the current detection signal Idetect output from the comparator <b>23</b> is at Low level.</p>
<p id="p-0123" num="0122">When, at time t<b>2</b>, the current flowing through the sense resistor Rs becomes equal to or smaller than the target sense current amount Ith (=Vdif/Rs), the output voltage Vsense-drop in which the sense voltage is dropped becomes lower than the output voltage VB-drop in which the power supply voltage is dropped, the current detection signal Idetect which is output from the comparator <b>24</b> becomes High level, and the PWM signal generation circuit <b>13</b> sets its output voltage Vpwm to High level, thereby turning ON the PWM.</p>
<p id="p-0124" num="0123">During the ON period of the PWM, the current is gradually increased by the current supply from the DC power supply VB. When the clock signal falls at time t<b>3</b>, the output voltage Vpwm of the PWM signal generation circuit <b>13</b> is set to Low level in a similar manner as the case of time t<b>1</b>, thereby turning OFF the load.</p>
<p id="p-0125" num="0124">When the above-described operations at times t<b>1</b> to t<b>3</b> are repeated, the duty cycle corresponding to the target sense current amount Ith can be automatically adjusted without calculating the duty cycle by means of a computing unit or the like. Also in the apparatus of <figref idref="DRAWINGS">FIG. 10</figref>, it is possible to attain functions and effects which are similar to those attained in the apparatuses of <figref idref="DRAWINGS">FIGS. 1(</figref><i>a</i>) and <b>7</b>.</p>
<p id="p-0126" num="0125">In the low-side drive circuit of <figref idref="DRAWINGS">FIG. 10</figref>, the sense voltage Vsense of the common connection point <b>52</b> which is on the upstream side of the regenerative current that is caused to flow by the energy accumulated in the electromagnetic inductive load <b>100</b> is always higher than the power supply voltage VB of the common connection point <b>51</b> on the power supply side. In the case where these voltages are directly introduced into the current detection circuit <b>12</b>, therefore, there is a problem in that the elements constituting the circuit are adversely affected or broken. In <figref idref="DRAWINGS">FIG. 10</figref>, however, the drop circuits A, B are disposed, and therefore the problem does not occur.</p>
<p id="p-0127" num="0126"><figref idref="DRAWINGS">FIG. 12</figref> shows another specific example of Embodiment 3. <figref idref="DRAWINGS">FIG. 12</figref> is different from <figref idref="DRAWINGS">FIG. 10</figref> in that the current detection circuit <b>12</b> is configured, in place of the drop circuits A, B and the comparator <b>24</b>, by: resistors <b>37</b>, <b>38</b> which divide the power supply voltage VB of the common connection point <b>51</b>, and which guide the divided voltage to the inverting input end of an operational amplifier <b>27</b>; resistors <b>39</b>, <b>40</b> which divide the sense voltage Vsense of the common connection point <b>52</b>, and which guide the divided voltage to the non-inverting input end of the operational amplifier <b>27</b>; the operational amplifier <b>27</b>; and a comparator <b>28</b> in which the reference voltage Vref is used as the non-inverting input, and the output voltage Vsense-sig of the operational amplifier <b>27</b> is used as the inverting input. The other portions are configured in a similar manner as in <figref idref="DRAWINGS">FIG. 10</figref>.</p>
<p id="p-0128" num="0127">In <figref idref="DRAWINGS">FIG. 12</figref>, the PWM signal generation circuit <b>13</b> is not shown, but is configured in a similar manner as in <figref idref="DRAWINGS">FIG. 9</figref>.</p>
<p id="p-0129" num="0128">Next, the operation of the thus configured apparatus will be described with reference to <figref idref="DRAWINGS">FIG. 13</figref> showing operation waveforms in the current detection circuit <b>12</b>.</p>
<p id="p-0130" num="0129">In the case where the control command (Input in <figref idref="DRAWINGS">FIG. 9</figref>) is input to the drive circuit <b>14</b>, first, the switching device Q is in a state where it is PWM-controlled. During the ON period of the PWM operation, therefore, the current flows in the route of the DC power supply VB&#x2192;the electromagnetic inductive load <b>100</b>&#x2192;the switching device Q&#x2192;GND, and, during the OFF period, the switching device Q is turned OFF, and the regenerative current flows through the electromagnetic inductive load <b>100</b> in the route of the electromagnetic inductive load <b>100</b>&#x2192;the freewheel diode D&#x2192;the sense resistor Rs&#x2192;the electromagnetic inductive load <b>100</b>.</p>
<p id="p-0131" num="0130">In the case where the clock signal (not shown) supplied to the PWM signal generation circuit <b>13</b> falls, for example, at time t<b>1</b> during the above-described PWM operation, the output voltage Vpwm of the PWM signal generation circuit <b>13</b> is set to Low level, thereby turning OFF the PWM.</p>
<p id="p-0132" num="0131">During the OFF period of the PWM, the regenerative current is generated by the energy accumulated in the electromagnetic inductive load <b>100</b>, the sense voltage Vsense which is generated by the regenerative current becomes higher than the power supply voltage VB of the common connection point <b>51</b>, and the current flowing through the sense resistor Rs, i.e., the load current Iload is gradually reduced.</p>
<p id="p-0133" num="0132">During the OFF period of the PWM, furthermore, the output voltage Vsense-drop of the operational amplifier <b>27</b> is higher than the reference voltage Vref, and therefore the current detection signal Idetect output from the comparator <b>28</b> is at Low level.</p>
<p id="p-0134" num="0133">When, at time t<b>2</b>, the current flowing through the sense resistor Rs becomes equal to or smaller than the target sense current amount Ith (=Vref/Rs), the output voltage Vsense-sig becomes lower than the reference voltage Vref, the current detection signal Idetect which is output from the comparator <b>28</b> becomes High level, and the PWM signal generation circuit <b>13</b> sets its output voltage Vpwm to High level, thereby turning ON the PWM.</p>
<p id="p-0135" num="0134">During the ON period of the PWM, the current is gradually increased by the current supply from the DC power supply VB. When the clock signal falls at time t<b>3</b>, the output voltage Vpwm of the PWM signal generation circuit <b>13</b> is set to Low level in a similar manner as the case of time t<b>1</b>, thereby turning OFF the load.</p>
<p id="p-0136" num="0135">When the above-described operations at times t<b>1</b> to t<b>3</b> are repeated, the duty cycle corresponding to the target sense current amount Ith can be automatically adjusted without calculating the duty cycle by means of a computing unit or the like. Also in the apparatus of <figref idref="DRAWINGS">FIG. 12</figref>, it is possible to attain functions and effects which are similar to those attained in the apparatuses of <figref idref="DRAWINGS">FIGS. 1(</figref><i>a</i>) and <b>7</b>.</p>
<p id="p-0137" num="0136">Moreover, the apparatus of <figref idref="DRAWINGS">FIG. 12</figref> requires a reduced number of components of the current detection circuit <b>12</b>, and therefore can be economically configured.</p>
<heading id="h-0009" level="1">Embodiment 4</heading>
<p id="p-0138" num="0137">In the apparatus of <figref idref="DRAWINGS">FIG. 1(</figref><i>a</i>), in the case where the power supply voltage VB is once reduced during the PWM driving and an operation failure of the electromagnetic inductive load <b>100</b> such as disengagement of a clutch or separation of contacts of a relay occurs, for example, a current amount which is necessary for sucking the clutch or the contacts cannot be ensured, and the apparatus does not have means for returning the load to the normal state. When the duty cycle is in the vicinity of 100% as shown in <figref idref="DRAWINGS">FIG. 14</figref>, the operation becomes unstable. For example, the DC driving and the PWM driving are frequently switched over by a small change of the power supply voltage VB, and problems may be caused such as that an audible sound is generated from the load.</p>
<p id="p-0139" num="0138">As shown in <figref idref="DRAWINGS">FIG. 15</figref>, therefore, Embodiment 4 is configured so that, in place of the PWM control, the DC drive control is performed during a power supply voltage reduction period, and a given time period after the returning of the power supply voltage reduction.</p>
<p id="p-0140" num="0139"><figref idref="DRAWINGS">FIG. 15</figref> is different from <figref idref="DRAWINGS">FIG. 1(</figref><i>a</i>) in that a power supply voltage monitor circuit <b>16</b> which monitors the power supply voltage VB, and which outputs a voltage monitor signal Vmoni (voltage reduction signal) that, during a period when the power supply voltage VB is reduced to or below a power supply voltage threshold Vth, is, for example, at Low level, and a DC drive signal generation circuit <b>17</b> which receives the voltage monitor signal Vmoni output from the power supply voltage monitor circuit <b>16</b>, and which, during the power supply voltage reduction period, and a given time period after the power supply voltage reduction is returned, outputs a DC drive signal Vdc that is always at High level, to the drive circuit <b>14</b> are further disposed. The other portions are configured in a similar manner as in <figref idref="DRAWINGS">FIG. 1(</figref><i>a</i>).</p>
<p id="p-0141" num="0140">The power supply voltage monitor circuit <b>16</b> is a circuit which monitors the power supply voltage VB while comparing it with the power supply voltage threshold Vth, and which outputs the signal (Vmoni) for switching the method of controlling the load. The power supply voltage threshold Vth is provided with hysteresis as shown in <figref idref="DRAWINGS">FIG. 16</figref>.</p>
<p id="p-0142" num="0141">As the power supply voltage threshold Vth of the power supply voltage monitor circuit <b>16</b>, namely, two values or a threshold Vth-Hi and a threshold Vth-Lo which is lower than it are set. It is configure so that, in the case where the power supply voltage is reduced, when the power supply voltage VB is reduced to the threshold Vth-Lo, the voltage monitor signal Vmoni is set to Low level, and, when the power supply voltage reduction is returned and the power supply voltage VB reaches the threshold Vth-Hi, the voltage monitor signal Vmoni is set to High level.</p>
<p id="p-0143" num="0142">The DC drive signal generation circuit <b>17</b> outputs the signal (Vdc) for causing the load to be DC driven for a given time period, and, as its driving time period, a time period which is sufficiently long for sucking the clutch, the contacts, or the like of the electromagnetic inductive load <b>100</b> is set.</p>
<p id="p-0144" num="0143">Next, the operation of the thus configured apparatus will be described with reference to a timing chart of <figref idref="DRAWINGS">FIG. 17</figref>, and a PWM control flowchart of <figref idref="DRAWINGS">FIG. 18</figref>.</p>
<p id="p-0145" num="0144">The process (steps S<b>1</b>, S<b>2</b> in <figref idref="DRAWINGS">FIG. 2</figref>) according to the existence of the control command (Input) is similar to the case of Embodiment 1. Hereinafter, description will be made starting from the state where the PWM control is performed.</p>
<p id="p-0146" num="0145">First, it is determined in step S<b>11</b> whether the power supply voltage threshold Vth is lower than the power supply voltage VB which is monitored by the power supply voltage monitor circuit <b>16</b>. In the case where there is no reduction of the power supply voltage (i.e., VB&#x3e;Vth) as at time t<b>1</b> in <figref idref="DRAWINGS">FIG. 17</figref>, for example, the PWM control process of steps S<b>12</b> to S<b>15</b> is performed.</p>
<p id="p-0147" num="0146">The processes of steps S<b>12</b> to S<b>15</b> are identical with those of steps S<b>3</b> to S<b>6</b>, respectively, and therefore their description is omitted. As described with reference to <figref idref="DRAWINGS">FIGS. 1(</figref><i>a</i>) to <b>3</b>, the process in which, when the load current Iload is smaller than the target sense current amount Ith, the PWM is turned ON, and that in which the PWM is turned OFF at falling of the clock signal are repeated, so that the duty cycle corresponding to the target sense current amount Ith can be automatically adjusted.</p>
<p id="p-0148" num="0147">At time t<b>2</b>, when the power supply voltage VB is reduced to the power supply voltage threshold Vth, the voltage monitor signal Vmoni output from the power supply voltage monitor circuit <b>16</b> is set to Low level, and the DC drive signal Vdc output from the DC drive signal generation circuit <b>17</b> is set to High level, so that the PWM driving is compulsively switched to the DC driving (step S<b>16</b>).</p>
<p id="p-0149" num="0148">Namely, a gate signal Vg output from the drive circuit <b>14</b> is maintained to High level, the load current Iload to the electromagnetic inductive load <b>100</b> can be ensured, and the load is allowed to surely operate even in a state where the power supply voltage is reduced.</p>
<p id="p-0150" num="0149">Also during a given time period (until time t<b>4</b>) which is after returning (the result of the determination of VB&#x3c;Vth in step S<b>17</b> is NO) of the power supply voltage reduction at time t<b>3</b>, the DC drive signal Vdc maintains High level, and therefore the DC driving is continued until time t<b>4</b> which is after the returning of the power supply voltage (step S<b>18</b>).</p>
<p id="p-0151" num="0150">Therefore, it is possible to sufficiently cope with also a case where a large current is required in the initial suction operation, such as in an electromagnetic clutch or a relay.</p>
<p id="p-0152" num="0151">When an instantaneous voltage drop occurs at time t<b>5</b> in the DC power supply VB, the load current Iload disappears, and the electromagnetic inductive load <b>100</b> is turned OFF. When the power supply is returned at time t<b>6</b> to the power supply voltage threshold Vth or higher, however, the DC drive signal Vdc and the gate signal Vg are at High level during a time period from the time or time t<b>6</b> to time t<b>7</b>, and the DC driving is performed. Therefore, the load can be returned to the normal state.</p>
<p id="p-0153" num="0152">Embodiment 4 is not limited to be configured as shown in <figref idref="DRAWINGS">FIG. 15</figref>, and can be applied to the apparatuses of <figref idref="DRAWINGS">FIGS. 5(</figref><i>a</i>) to <b>7</b>, <b>9</b>, <b>10</b>, and <b>12</b>. Also in this case, functions and effects which are similar to those described above are attained.</p>
<heading id="h-0010" level="1">Embodiment 5</heading>
<p id="p-0154" num="0153">The duty cycle during the PWM driving is determined mainly on the power supply voltage and the inductance of the load. When the power supply voltage is reduced, for example, it is controlled so that the duty cycle is increased and the final amount of the load current is maintained.</p>
<p id="p-0155" num="0154">On the other hand, in the apparatus of <figref idref="DRAWINGS">FIG. 1(</figref><i>a</i>), when the duty cycle is large, for example, the PWM control can be performed at a constant frequency as shown in <figref idref="DRAWINGS">FIG. 19(</figref><i>a</i>), but, when the power supply voltage is raised, or when the inductance of the load is small, the duty cycle is reduced, with the result that there arises a problem in that, as shown in <figref idref="DRAWINGS">FIG. 19(</figref><i>b</i>), stabilization is attained at a frequency which is lower than the set frequency. In this case, when the PWM frequency is in the audible frequency range, there is a possibility that an audible sound is generated from the load (a coil or the like).</p>
<p id="p-0156" num="0155"><figref idref="DRAWINGS">FIGS. 19(</figref><i>a</i>) and <b>19</b>(<i>b</i>) are timing charts of the PWM control in which the current detection signal Idetect and PWM signal Vpwm in the PWM control timing chart of <figref idref="DRAWINGS">FIG. 1(</figref><i>b</i>) are not shown.</p>
<p id="p-0157" num="0156">Therefore, Embodiment 5 is configured so that the PWM (the PWM in which the duty cycle is changed) due to the current sense and the PWM (the PWM in which the duty cycle is fixed) due to the clock signal are ORed (logically summed).</p>
<p id="p-0158" num="0157"><figref idref="DRAWINGS">FIG. 20</figref> shows the apparatus of Embodiment 5, and is different from <figref idref="DRAWINGS">FIG. 1(</figref><i>a</i>) in that an OR gate <b>18</b> which logically sums the output of the PWM signal generation circuit <b>13</b> and the clock signal, and which supplies the output as the PWM signal Vpwm to the drive circuit <b>14</b> is disposed. The other portions are configured in the same manner as in <figref idref="DRAWINGS">FIG. 1(</figref><i>a</i>). The duty cycle of the clock signal is previously set to a value which is larger than a duty cycle in which the frequency changes.</p>
<p id="p-0159" num="0158">Next, the operation of the thus configured apparatus will be described with reference to a timing chart of <figref idref="DRAWINGS">FIG. 21</figref>.</p>
<p id="p-0160" num="0159">The process (steps S<b>1</b>, S<b>2</b> in <figref idref="DRAWINGS">FIG. 2</figref>) according to the existence of the control command (Input) is similar to the case of Embodiment 1. Hereinafter, description will be made starting from the state where the PWM control is performed.</p>
<p id="p-0161" num="0160">In the case where the power supply voltage VB is normal (VB-normal) as shown, for example, at time t<b>1</b>, first, the PWM due to the current sense is performed. Namely, the processes in which, when the load current Iload is smaller than the target sense current amount Ith, the PWM is turned ON, and that in which the PWM is turned OFF at falling of the clock signal are repeated, whereby the duty cycle corresponding to the target sense current amount Ith can be automatically adjusted.</p>
<p id="p-0162" num="0161">When the power supply voltage is raised (VB-high) during the time period from time t<b>2</b> to time t<b>3</b>, the duty cycle is gradually reduced, the load current Iload is not reduced to the target sense current amount Ith, and the current detection signal Idetect is not output from the current detection circuit <b>12</b>.</p>
<p id="p-0163" num="0162">At this time, in the circuit of <figref idref="DRAWINGS">FIG. 1(</figref><i>a</i>) in which the OR gate <b>18</b> is not disposed, the PWM signal Vpwm cannot be set to High level during a time period when the power supply voltage is raised, and therefore the PWM control is stabilized at a frequency which is lower than the set frequency.</p>
<p id="p-0164" num="0163">By contrast, in the circuit of <figref idref="DRAWINGS">FIG. 20</figref>, the clock signal is the output of the OR gate <b>18</b> even when the output of the PWM signal generation circuit <b>13</b> remains at Low level. Therefore, the PWM signal Vpwm which is synchronized with the clock signal is output to the drive circuit <b>14</b>, and the electromagnetic inductive load <b>100</b> is enabled to always operate at a constant frequency (compulsive clock PWM).</p>
<p id="p-0165" num="0164">The current amount during the PWM driving does not become lower than the minimum operating current of the load, and hence a sure load operation can be ensured.</p>
<p id="p-0166" num="0165">Next, when the raising of the power supply voltage is returned at time t<b>3</b> and the power supply voltage is returned to the normal voltage, the duty cycle of the PWM is larger than that of the clock signal, and the operation is automatically returned to the PWM driving due to the current sense.</p>
<p id="p-0167" num="0166"><figref idref="DRAWINGS">FIG. 22</figref> is a view showing a region where the PWM due to the current sense and the compulsive clock PWM are switched over, together with relationships between the power supply voltage and the duty cycle.</p>
<p id="p-0168" num="0167"><figref idref="DRAWINGS">FIGS. 23(</figref><i>a</i>) and <b>23</b>(<i>b</i>) are timing charts in the normal voltage and the increase of the power supply voltage in the apparatus of <figref idref="DRAWINGS">FIG. 20</figref>, respectively in which the current detection signal Idetect and PWM signal Vpwm in the PWM control timing chart are not shown.</p>
<p id="p-0169" num="0168">According to the embodiment, a sensor unit which reads the duty cycle of the PWM is not required, and hence the PWM control of a constant frequency can be realized by an economical configuration.</p>
<p id="p-0170" num="0169">Although the invention has been described in detail and with reference to the specific embodiments, it is obvious to those skilled in the art that various changes and modifications can be made without departing from the spirit and scope of the invention.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A control apparatus for an electromagnetic inductive load, the control apparatus being a circuit in which a switching element that is PWM-controlled and the electromagnetic inductive load are connected together in series between a DC power supply and a ground, and comprising:
<claim-text>a current sensing unit which senses a regenerative current in an OFF time in a PWM driving operation of the switching element;</claim-text>
<claim-text>a current detecting unit which outputs a current detection signal when a sense current sensed by the current sensing unit becomes smaller than a target current amount;</claim-text>
<claim-text>a PWM signal generating unit which receives a clock signal of a given frequency and the current detection signal output from the current detecting unit, and which generates a PWM signal that is at a high level or a low level during a period from an output of a signal indicating a sense that the current detection signal becomes smaller than the target current amount, to rising or falling of the clock signal; and</claim-text>
<claim-text>a driving unit which is disposed between the PWM signal generating unit and the switching element, and which controls to drive the switching element.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The control apparatus for the electromagnetic inductive load according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, comprising:
<claim-text>a power supply voltage monitoring unit which monitors a voltage of the DC power supply, and which outputs a voltage reduction signal during a period when the power supply voltage is reduced to or below a set voltage; and</claim-text>
<claim-text>a DC drive signal generating unit which receives the voltage reduction signal output from the power supply voltage monitoring unit, and which outputs a DC drive signal that is always at the high level during the power supply voltage reduction period and a given time period after the voltage reduction is returned, wherein</claim-text>
<claim-text>the driving unit receives the DC drive signal output from the DC drive signal generating unit and the PWM signal output from the PWM signal generating unit.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The control apparatus for the electromagnetic inductive load according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, comprising:
<claim-text>a logical sum unit which logically sums the clock signal and the PWM signal generated by the PWM signal generating unit, wherein</claim-text>
<claim-text>the driving unit receives an output of the logical sum unit.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The control apparatus for the electromagnetic inductive load according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein
<claim-text>the current sensing unit is disposed in a regenerative current flow path through which a regenerative current in the OFF time during the PWM driving operation of the switching element flows.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The control apparatus for the electromagnetic inductive load according to <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein
<claim-text>the switching element is placed on a side of the DC power supply to be subjected to high-side driving,</claim-text>
<claim-text>the current sensing unit includes a sense resistor which is interposed in the regenerative current flow path, and</claim-text>
<claim-text>the current detecting unit includes an inversion circuit which inverts a terminal voltage of the sense resistor and a comparator which compares an output voltage of the inversion circuit with a set voltage.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The control apparatus for the electromagnetic inductive load according to <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein
<claim-text>the switching element is placed on a side of the ground to be subjected to low-side driving,</claim-text>
<claim-text>the current sensing unit includes a sense resistor which is interposed in the regenerative current flow path, and</claim-text>
<claim-text>the current detecting unit includes a first voltage drop circuit which drops a terminal voltage of the sense resistor on a side of the DC-power supply, a second voltage drop circuit which drops a terminal voltage of the sense resistor on a side of the switching element, and a comparator which compares an output voltage of the first voltage drop circuit with an output voltage of the second voltage drop circuit.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The control apparatus for the electromagnetic inductive load according to <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein
<claim-text>the switching element is placed on a side of the ground to be subjected to low-side driving,</claim-text>
<claim-text>the current sensing unit includes a sense resistor which is interposed in the regenerative current flow path, and</claim-text>
<claim-text>the current detecting unit includes a differential amplification circuit which obtains a deviation of a terminal voltage of the sense resistor on a side of the DC-power supply and a terminal voltage of the sense resistor on a side of the switching element, and a comparator which compares a differential output of the differential amplification circuit with a set voltage. </claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
