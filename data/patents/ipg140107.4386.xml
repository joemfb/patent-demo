<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625458-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625458</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12787981</doc-number>
<date>20100526</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<us-term-of-grant>
<us-term-extension>437</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>12</main-group>
<subgroup>28</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>15</main-group>
<subgroup>177</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>370254</main-classification>
<further-classification>370229</further-classification>
<further-classification>370235</further-classification>
<further-classification>370255</further-classification>
<further-classification>370396</further-classification>
<further-classification>370497</further-classification>
<further-classification>709220</further-classification>
</classification-national>
<invention-title id="d2e53">Dynamic route cost adjustment of VRRP enabled subnets for routing protocols</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6397260</doc-number>
<kind>B1</kind>
<name>Wils et al.</name>
<date>20020500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709238</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6556547</doc-number>
<kind>B1</kind>
<name>Srikanth et al.</name>
<date>20030400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370317</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>7561571</doc-number>
<kind>B1</kind>
<name>Lovett et al.</name>
<date>20090700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370392</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>7664110</doc-number>
<kind>B1</kind>
<name>Lovett et al.</name>
<date>20100200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370392</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>7948993</doc-number>
<kind>B2</kind>
<name>Kini et al.</name>
<date>20110500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>37039554</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>8213439</doc-number>
<kind>B2</kind>
<name>Natarajan</name>
<date>20120700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370401</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2002/0097721</doc-number>
<kind>A1</kind>
<name>McKenzie et al.</name>
<date>20020700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370392</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2006/0126502</doc-number>
<kind>A1</kind>
<name>Vasseur et al.</name>
<date>20060600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370221</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2006/0146835</doc-number>
<kind>A1</kind>
<name>Homchaudhuri et al.</name>
<date>20060700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>37039553</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>2008/0151882</doc-number>
<kind>A1</kind>
<name>Sanjay et al.</name>
<date>20080600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370389</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>2009/0016215</doc-number>
<kind>A1</kind>
<name>Nadas et al.</name>
<date>20090100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370230</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>2010/0142410</doc-number>
<kind>A1</kind>
<name>Huynh Van et al.</name>
<date>20100600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370255</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>2010/0149980</doc-number>
<kind>A1</kind>
<name>Cheung et al.</name>
<date>20100600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370235</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>2010/0189117</doc-number>
<kind>A1</kind>
<name>Gowda et al.</name>
<date>20100700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370401</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>2010/0228837</doc-number>
<kind>A1</kind>
<name>Squire et al.</name>
<date>20100900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709220</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>2011/0292933</doc-number>
<kind>A1</kind>
<name>Rodriguez Perez et al.</name>
<date>20111200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370389</main-classification></classification-national>
</us-citation>
<us-citation>
<nplcit num="00017">
<othercit>Jewell et al. RFC 2787 Mar. 2000.</othercit>
</nplcit>
<category>cited by examiner</category>
</us-citation>
<us-citation>
<nplcit num="00018">
<othercit>H3C Document Jun. 2009.</othercit>
</nplcit>
<category>cited by examiner</category>
</us-citation>
<us-citation>
<nplcit num="00019">
<othercit>Jewell et al.&#x2014;Definitions of Managed Objects for the Virtual Router Redundancy Protocol&#x2014;Mar. 2000.</othercit>
</nplcit>
<category>cited by examiner</category>
</us-citation>
<us-citation>
<nplcit num="00020">
<othercit>McCloghrie et al.&#x2014;Management Information Base for Network Management of TCP/IP-based internets: MIB-II&#x2014;Mar. 1991.</othercit>
</nplcit>
<category>cited by examiner</category>
</us-citation>
<us-citation>
<nplcit num="00021">
<othercit>Nadas&#x2014;Virtual Router Redundancy Protocol Version 3 for IPv4 and IPv6 draft-ietf-vrrp-unified-spec-05&#x2014;Dec. 2009.</othercit>
</nplcit>
<category>cited by examiner</category>
</us-citation>
<us-citation>
<nplcit num="00022">
<othercit>Hinden&#x2014;Virtual Router Redundancy Protocol (VRRP)&#x2014;Apr. 2004.</othercit>
</nplcit>
<category>cited by examiner</category>
</us-citation>
<us-citation>
<nplcit num="00023">
<othercit>Rekhter et al, &#x201c;A Border Gateway Protocol 4 (BGP-4)&#x201d;, Request for Comments 4271, 2006, pp. 1-104.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00024">
<othercit>Nadas, &#x201c;Virtual Router Redundancy Protocol Version 3 for IPv4 and IPv6 draft-ietf-vrrp-unified-spec-05&#x201d;, Internet Draft, VRRPv3 for IPv4 and IPv6, 2009, pp. 1-41.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00025">
<othercit>McCloghrie et al, &#x201c;Management Information Base for Network Management of TCP/IP-Based Internets: MIB-II&#x201d;, Request for Comments 1213, 1991, pp. 1-70.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00026">
<othercit>Thaler et al, Multipath Issues in Unicast and Multicast Next-Hop Selection, Request for Comments 2991, 2000, pp. 1-9.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00027">
<othercit>Hopps, &#x201c;Analysis of an Equal-Cost Multi-Path Algorithm&#x201d;, Request for Comments 2992, 2000, pp. 1-8.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00028">
<othercit>Hinden, Virtual Router Redundancy Protocol (VRRP), Request for Comments 3768, 2004, pp. 1-27.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>18</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>None</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>4</number-of-drawing-sheets>
<number-of-figures>4</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20110292933</doc-number>
<kind>A1</kind>
<date>20111201</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Rodriguez Perez</last-name>
<first-name>David</first-name>
<address>
<city>Moorpark</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Vargas</last-name>
<first-name>Edgard</first-name>
<address>
<city>Moorpark</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Rodriguez Perez</last-name>
<first-name>David</first-name>
<address>
<city>Moorpark</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Vargas</last-name>
<first-name>Edgard</first-name>
<address>
<city>Moorpark</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Kramer &#x26; Amado P.C</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Alcatel Lucent</orgname>
<role>03</role>
<address>
<city>Paris</city>
<country>FR</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Banks Harold</last-name>
<first-name>Marsha D</first-name>
<department>2465</department>
</primary-examiner>
<assistant-examiner>
<last-name>Wyllie</last-name>
<first-name>Christopher</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">The invention is directed to routing data packets in networks having routers configured as a virtual router using virtual router redundancy protocol (VRRP). Embodiments of the invention adjust route metrics to aid in providing predictable selection of routes into VRRP subnets. Advantageously, providing predictable selection of routes into VRRP subnets enhances a network operator's ability to meet service level agreements for critical or delay sensitive applications.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="177.46mm" wi="245.03mm" file="US08625458-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="194.31mm" wi="173.40mm" orientation="landscape" file="US08625458-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="129.54mm" wi="174.33mm" orientation="landscape" file="US08625458-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="247.31mm" wi="179.75mm" orientation="landscape" file="US08625458-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="230.97mm" wi="180.68mm" orientation="landscape" file="US08625458-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">FIELD OF THE INVENTION</heading>
<p id="p-0002" num="0001">The invention is directed to packet data networks, particularly to routing data packets in networks having routers configured as a virtual router using virtual router redundancy protocol (VRRP).</p>
<heading id="h-0002" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0003" num="0002">VRRP is a protocol described in Internet Engineering Task Force (IETF) document RFC 3768. The purpose of VRRP is to increase the availability of a default gateway servicing hosts on the same subnet. VRRP allows two or more physical routers to act as a single virtual router comprising a primary router actively routing data packet traffic and one or more backup routers, one of which will replace the role of the primary router should it fail. Currently, there is a need to update VRRP for use with Internet Protocol version 6 (IPv6). For example, IETF draft-ietf-vrrp-unified-spec proposes such an updated version of VRRP.</p>
<p id="p-0004" num="0003">VRRP is typically used by Enterprises to provide redundancy at some major strategic data center that requires continuous operation to serve its clients. In many cases, Enterprises build their data centers with two different backbone connections, each connection via a separate physical router. When implementing VRRP, the Enterprise will configure the two physical routers as a virtual router. Each of the physical routers will therefore have a respective connection to the backbone network and each will be connected to the data center's local area network (LAN), also referred to as a VRRP subnet subsequent to VRRP implementation. The VRRP subnet provides a connection between the two physical routers, hereinafter referred to as VRRP routers.</p>
<p id="p-0005" num="0004">According to routing protocols such as border gateway protocol (BGP) described in IETF document RFC4271, a route metric/cost is associated with the output side of each router interface. This cost is configurable by the system administrator and it always has a default value. The lower the cost, the more likely the interface is to be used to forward data traffic.</p>
<p id="p-0006" num="0005">By design, VRRP and routing protocols do not interact with each other. This means that a routing protocol will be unaware of the state of a VRRP router interface, also referred to herein as a VRRP interface. That is, the routing protocol will be unaware whether the VRRP router is a primary or a backup VRRP router. When advertising a Local Interface route of the VRRP subnet, from both the primary and backup routers, the same default cost is used.</p>
<p id="p-0007" num="0006">The problem is that the static route metric/cost can result in routes to the VRRP subnet having equal cost, or in many configurations the backup VRRP router ends up being the best next hop to the VRRP subnet. While neither case is desirable, the former can be particularly problematic for applications sensitive to unequal multipath delays if equal cost multipath (ECMP) routing is enabled, since traffic from a remote host to any host in the VRRP subnet can take different paths. IETF documents RFC2991 and RFC2992 address issues and techniques of ECMP routing.</p>
<heading id="h-0003" level="1">SUMMARY</heading>
<p id="p-0008" num="0007">Embodiments of the invention are directed to adjusting route metrics to aid in providing predictable selection of routes into VRRP subnets.</p>
<p id="p-0009" num="0008">According to an embodiment of the invention, a simple mechanism is provided to influence routing protocols depending on the state of a VRRP interface without having to modify the routing protocols or VRRP standards.</p>
<p id="p-0010" num="0009">Some embodiments of the invention enable a user to activate VRRP routing on a router, after which a routing table metric of the router will be updated depending on whether the router is a primary or a backup VRRP router.</p>
<p id="p-0011" num="0010">Advantageously, providing predictable selection of routes into VRRP subnets enhances a network operator's ability to meet service level agreements (SLA) for critical or delay sensitive applications.</p>
<p id="p-0012" num="0011">According to an aspect of the invention a method is provided of adjusting route metrics in a data packet router. The method comprises the steps of: determining if virtual routing redundancy protocol VRRP routing is enabled on the router; determining, responsive to VRRP being enabled on the router, if the router is a backup VRRP router; and setting on the router, responsive to VRRP being enabled on the router and the router being a VRRP backup router, a pointer in a routing information base RIB entry for an interface of the router to point to a first metric entry of a management information base MIB object corresponding to the interface.</p>
<p id="p-0013" num="0012">Advantageously, the method may further include the step of setting on the router, responsive to VRRP being enabled on the router and the router not being a VRRP backup router, the pointer to point to a second metric entry of the MIB object, wherein the second metric entry has a value that is different than a value of the first metric entry.</p>
<p id="p-0014" num="0013">Advantageously, the method may further include the step of setting on the router, responsive to VRRP not being enabled on the router, the pointer to point to the second metric entry of the MIB object.</p>
<p id="p-0015" num="0014">According to an aspect of the invention data packet router capable of executing virtual routing redundancy protocol VRRP is provided. The router comprises a routing information base RIB having an entry including a pointer; a management information base MIB having an object corresponding to an interface of the router; a VRRP flag for providing an indication whether or not VRRP routing is enabled on the router; a virtual router identifier VRID for indicating whether or not the router is a backup VRRP router when VRRP routing is enabled on the router; and a function for causing the pointer to point to a first metric of the object when VRRP routing is enabled on the router and the router is a backup VRRP router and for causing the pointer to otherwise point to a second metric of the object.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0016" num="0015">The foregoing and other objects, features and advantages of the invention will be apparent from the following more particular description of the preferred embodiments, as illustrated in the appended drawings, where:</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 1</figref> illustrates a VRRP configuration resulting in ECMP route selection;</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 2</figref> illustrates paths taken by data packet traffic in <figref idref="DRAWINGS">FIG. 1</figref>;</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 3</figref> illustrates a VRRP configuration according to an embodiment of the invention; and</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 4</figref> illustrates a method of adjusting route metrics in the VRRP configuration of <figref idref="DRAWINGS">FIG. 3</figref>.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<p id="p-0021" num="0020">In the figures like features are denoted by like reference characters.</p>
<heading id="h-0005" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0022" num="0021">In reference to <figref idref="DRAWINGS">FIG. 1</figref>, a VRRP configuration <b>100</b> includes a first host <b>102</b> connected to a VRRP subnet <b>104</b>, also referred to as subnet <b>1</b>. A second host <b>106</b> can communicate data packets with the first host <b>102</b> via a virtual router <b>107</b>, comprising a first router <b>108</b> and a second router <b>110</b>, and a third router <b>112</b>. The first router <b>108</b> is the primary router of the virtual router <b>107</b>, so denoted by having a VRID set to &#x201c;primary&#x201d; in the figure, whereas the second router <b>110</b> is the backup router of the virtual router <b>107</b>, so denoted by its VRID set to &#x201c;secondary&#x201d; in the figure. The virtual router <b>107</b> has two connections to the third router <b>112</b>, these connections representing the aforementioned connections to a backbone network. A first backbone connection <b>114</b> of the two connections enables the first router <b>108</b> to communicate data packets with the third router <b>112</b>, and a second backbone connection <b>115</b> likewise enables the second router <b>110</b> to communicate data packets to the third router <b>112</b>. Each of the first and second routers <b>108</b>, <b>110</b> also has a respective connection to the VRRP subnet <b>104</b>. Respectively these connections are a first LAN connection <b>116</b> and a second LAN connection <b>117</b>.</p>
<p id="p-0023" num="0022">The third router <b>112</b> includes a routing table <b>118</b> that among other entries includes routing information to route data packets to the VRRP subnet <b>104</b>. A first entry <b>120</b> of the table <b>118</b> for a first route includes a network parameter equal to the address of the VRRP subnet, shown as &#x201c;Subnet <b>1</b>&#x201d; in the figure, a next hop parameter equal to the address of the first router <b>108</b>, shown as &#x201c;Router <b>1</b>&#x201d; in the figure, and a metric parameter for the first route, shown as &#x201c;1&#x201d; in the figure. Likewise, a second entry <b>122</b> of the table <b>118</b> for a second route includes a network parameter equal to the address of the VRRP subnet, shown as &#x201c;Subnet <b>1</b>&#x201d; in the figure, a next hop parameter equal to the address of the second router <b>110</b>, shown as &#x201c;Router <b>2</b>&#x201d; in the figure, and a metric parameter for the second route, shown as &#x201c;1&#x201d; in the figure. In the case where ECMP route selection is employed by the third router <b>112</b>, the first and second routes would be equally likely to be selected by the router <b>112</b> since the values of their respective metric parameters are equal in the routing table <b>118</b>. In other words, the third router <b>112</b> has two equal cost multipath routes to the VRRP subnet <b>104</b>.</p>
<p id="p-0024" num="0023">In reference to <figref idref="DRAWINGS">FIG. 2</figref>, a flow of data packets between the first host <b>102</b> and the second host <b>106</b> follows a first path <b>202</b> through the VRRP subnet <b>104</b>, the first router <b>108</b>, and the third router <b>112</b>. The first path <b>202</b> is not problematic because the first router <b>108</b> in this case is the primary router of the virtual router <b>107</b>. However, when ECMP is employed by the third router <b>112</b>, data packets flowing from the second host <b>106</b> to the first host <b>102</b> can take one of two paths; either through the first router <b>108</b> via a second path <b>204</b> or through the second router <b>110</b> via a third path <b>206</b>. This situation can be problematic for delay sensitive traffic if the second and third paths <b>204</b>, <b>206</b> have unequal transit delays.</p>
<p id="p-0025" num="0024">In some cases where ECMP path selection uses a hashing algorithm based on the destination IP address of the subject data packet, the same path could be selected for all data packets destined to that IP address. In such cases it is possible that the selected path could transit the backup router of the virtual router, which would be undesirable since the traffic should be routed through the primary router of that virtual router. Some ECMP hashing algorithms could even be more dynamic as they might consider other variables such as source and/or destination TCP/UDP ports or even random generated keys, which would make predicting the selected path even more difficult, such as could be required to ensure SLAs are met on applications that are sensitive to traffic delays.</p>
<p id="p-0026" num="0025">With reference to <figref idref="DRAWINGS">FIG. 3</figref>, a VRRP configuration <b>300</b> according to an embodiment of the invention enables path selection at the third router <b>112</b> to be influenced depending on which of the first or second routers <b>108</b>, <b>110</b> of the virtual router <b>107</b> is the primary router and without having to modify VRRP or other routing protocols running on the routers.</p>
<p id="p-0027" num="0026">To that end, modifications <b>301</b> have been made to the second router <b>110</b>. The modifications affect a routing information base (RIB) <b>302</b>, which includes an entry <b>304</b> of a metric for an interface to the subnet <b>1</b> (the VRRP subnet <b>104</b>). The entry <b>304</b> sets the value of the metric as determined by a pointer, shown as &#x201c;PTR&#x201d; in the figure. The modifications <b>301</b> also affect a management information base (MIB) <b>306</b> having a first metric entry <b>310</b> and a second metric entry <b>312</b> for an IP route entry object <b>308</b> associated with the subnet <b>1</b>. The first metric entry <b>310</b>, shown as &#x201c;IProuteMetric<b>1</b>&#x201d; in the figure has a default value and the second metric entry <b>312</b>, shown as &#x201c;IProuteMetric<b>2</b>&#x201d; in the figure, has a value equal to the sum of the default value plus an offset shown as &#x201c;D&#x201d; in the figure. The value of the offset D can be entered by an operator using a network management system <b>314</b> connected to the VRRP subnet <b>104</b>, for example. The modifications <b>301</b> include addition of a pointer reference circuit <b>318</b> that uses a VRRP flag <b>316</b> included in the pointer reference circuit and the state of the router's VRID, i.e. either set to &#x201c;primary&#x201d; or &#x201c;backup&#x201d;, to determine which one of the first or second metric entries <b>310</b>, <b>312</b> is referenced by the pointer (PTR) of the RIB <b>302</b>. The value of the VRRP flag <b>316</b> is set to reflect whether VRRP is enabled on the router <b>110</b> or not. For example, the VRRP flag <b>316</b> could be set by an operator using the NMS <b>314</b>.</p>
<p id="p-0028" num="0027">The first router <b>108</b> has been modified in the same manner as the second router <b>110</b> was modified by the modifications <b>301</b>. Consequently, both the first and second routers <b>108</b>, <b>110</b> will have respective metrics for an interface to subnet <b>1</b>, wherein the value of each metric will be dependent on whether the given router <b>108</b>, <b>110</b> has VRRP enabled and, if so, whether that router is the primary router or a backup router of the virtual router <b>107</b>. Additionally, the first and second routers <b>108</b>, <b>110</b> will include the value of their respective metric in route advertisements to other routers such as the third router <b>112</b>, in accordance with routing protocols running on those routers. The result of receiving such route advertisements is shown in the routing table <b>118</b> of the third router <b>112</b>, wherein the first entry <b>120</b> has a metric with a value of one and the second entry <b>122</b> has a metric with a different value, that value being &#x201c;1+D&#x201d;.</p>
<p id="p-0029" num="0028">Since the first entry <b>120</b> has a metric with a lower value than that of the second entry, the third router <b>112</b> will now exclusively select the path (second path <b>204</b> of <figref idref="DRAWINGS">FIG. 2</figref>) associated with the first entry <b>120</b> for data packet traffic destined to the VRRP subnet <b>1</b> <b>104</b>, e.g. the first host <b>102</b>. This is desirable because that path is via the first router <b>108</b>, which is the primary router of the virtual router <b>107</b>. However, if the second router <b>110</b> were to become the primary router, the first and second entries <b>120</b>, <b>122</b> would change due to new route advertisements from the first and second routers <b>108</b>, <b>110</b> such that the offset D would be included in the metric of the first entry <b>120</b> and not in that of the second entry <b>122</b>. In that case, the third router <b>112</b> would exclusively select the path (third path <b>206</b> of <figref idref="DRAWINGS">FIG. 2</figref>) associated with the second entry <b>122</b> for data packet traffic destined to the VRRP subnet <b>1</b> <b>104</b>, e.g. the first host <b>102</b>.</p>
<p id="p-0030" num="0029">To sum up, embodiments of the invention enable a user to activate VRRP routing on a router, via a network management system (NMS) console running command language interface (CLI) and simple network management protocol (SNMP). Accordingly, after VRRP routing has been activated, a routing table metric of the router will be updated depending on whether the router is a primary or a backup VRRP router. In the case the router has the VRRP virtual router interface as backup (i.e. VRID=backup), the router should take the regular metric of that interface and add a value &#x201c;D&#x201d;, which has the affect of decreasing the &#x201c;priority&#x201d; of routes involving that interface when they are advertized by any routing protocol running on the router. When the router becomes the primary VRRP router, it should re-establish the default metric on that interface. The value D is configurable, for example from a user interface of the router or via a NMS or other type of management system.</p>
<p id="p-0031" num="0030">Advantageously, this technique can be applied on subnets where critical or delay sensitive applications reside, at the discretion of a network administrator, and on a per virtual router basis.</p>
<p id="p-0032" num="0031">Embodiments of the invention provide a VRRP backup router with functionality to modify respective cost values of directly connected routes (local routes) and store each such value in one of the unused metrics of the IpRouteEntry object of the corresponding route. This object is part of MIB-II, which is the second version of the Management Information Base for use with network management protocols in TCP/IP-based internets and is defined in IETF document RFC1213. A configuration command is used to set the offset value D (desired degraded metric value), which is added to the default metric value for a given route to obtain a backup local metric. The backup local metric is stored in one of the unused metrics of the IpRouteEntry object of that route. The aforementioned pointer function <b>318</b> controls which metric value, i.e. the backup local metric or default metric, will be used in the RIB of the router. This value has local significance and it will not be managed or propagated by VRRP. Consequently, changes to any of the standard MIBs or objects of the VRRP protocols are not required.</p>
<p id="p-0033" num="0032">The metrics of the IpRouteEntry object of MIB-II are shown in bold typeface:</p>
<p id="p-0034" num="0033">
<tables id="TABLE-US-00001" num="00001">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="49pt" align="left"/>
<colspec colname="1" colwidth="168pt" align="left"/>
<thead>
<row>
<entry/>
<entry namest="offset" nameend="1" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry/>
<entry>IpRouteEntry ::=</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="63pt" align="left"/>
<colspec colname="1" colwidth="154pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>SEQUENCE {</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="77pt" align="left"/>
<colspec colname="1" colwidth="140pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>ipRouteDest</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="91pt" align="left"/>
<colspec colname="1" colwidth="126pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>IpAddress,</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="77pt" align="left"/>
<colspec colname="1" colwidth="140pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>ipRouteIfIndex</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="91pt" align="left"/>
<colspec colname="1" colwidth="126pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>INTEGER,</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="77pt" align="left"/>
<colspec colname="1" colwidth="140pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>ipRouteMetric1</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="91pt" align="left"/>
<colspec colname="1" colwidth="126pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>INTEGER,</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="77pt" align="left"/>
<colspec colname="1" colwidth="140pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>ipRouteMetric2</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="91pt" align="left"/>
<colspec colname="1" colwidth="126pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>INTEGER,</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="77pt" align="left"/>
<colspec colname="1" colwidth="140pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>ipRouteMetric3</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="91pt" align="left"/>
<colspec colname="1" colwidth="126pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>INTEGER,</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="77pt" align="left"/>
<colspec colname="1" colwidth="140pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>ipRouteMetric4</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="91pt" align="left"/>
<colspec colname="1" colwidth="126pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>INTEGER,</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="77pt" align="left"/>
<colspec colname="1" colwidth="140pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>ipRouteNextHop</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="91pt" align="left"/>
<colspec colname="1" colwidth="126pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>IpAddress,</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="77pt" align="left"/>
<colspec colname="1" colwidth="140pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>ipRouteType</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="91pt" align="left"/>
<colspec colname="1" colwidth="126pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>INTEGER,</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="77pt" align="left"/>
<colspec colname="1" colwidth="140pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>ipRouteProto</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="91pt" align="left"/>
<colspec colname="1" colwidth="126pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>INTEGER,</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="77pt" align="left"/>
<colspec colname="1" colwidth="140pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>ipRouteAge</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="91pt" align="left"/>
<colspec colname="1" colwidth="126pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>INTEGER,</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="77pt" align="left"/>
<colspec colname="1" colwidth="140pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>ipRouteMask</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="91pt" align="left"/>
<colspec colname="1" colwidth="126pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>IpAddress,</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="77pt" align="left"/>
<colspec colname="1" colwidth="140pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>ipRouteMetric5</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="91pt" align="left"/>
<colspec colname="1" colwidth="126pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>INTEGER,</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="77pt" align="left"/>
<colspec colname="1" colwidth="140pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>ipRouteInfo</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="91pt" align="left"/>
<colspec colname="1" colwidth="126pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>OBJECT IDENTIFIER</entry>
</row>
</tbody>
</tgroup>
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="offset" colwidth="63pt" align="left"/>
<colspec colname="1" colwidth="154pt" align="left"/>
<tbody valign="top">
<row>
<entry/>
<entry>}.</entry>
</row>
<row>
<entry/>
<entry namest="offset" nameend="1" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0035" num="0034">Usually router vendors store the interface cost on ipRouteMetric<b>1</b>. A first embodiment of the invention stores the new backup local metric on the object ipRouteMetric<b>2</b> such that the pointer (PTR in <figref idref="DRAWINGS">FIG. 3</figref>) moves between ipRouteMetric<b>1</b> and ipRouteMetric<b>2</b> depending on the role of the VRRP router interface. The primary router <b>108</b> will point to ipRouterMetric<b>1</b> and backup router <b>110</b> will point to ipRouterMetric<b>2</b>. Other embodiments could use any other unused metric or mechanism to achieve the functionality described above.</p>
<p id="p-0036" num="0035">In operation, embodiments of the invention achieve a &#x201c;dynamic&#x201d; metric. This results from adding the cost of the &#x201c;default metric or configured metric&#x201d; to a &#x201c;desired degraded&#x201d; metric value (the offset D) configurable by the network administrator. The resulting metric is used when the corresponding VRRP interface runs in backup state. When the VRRP interface runs in the primary state, i.e. the router becomes the primary router, then the value of the metric is reset back to the &#x201c;default or configured metric&#x201d;. In this manner the metric is dynamic. When network routing protocols import or redistribute the local routes, they will inherit the latest value of the &#x201c;dynamic&#x201d; metric. An example of such inheritance is shown in the routing table <b>118</b> of <figref idref="DRAWINGS">FIG. 3</figref>.</p>
<p id="p-0037" num="0036">Accordingly, network routing tables will include metrics that are effectively modified by the state of the VRRP routers, particularly the MIB object IpRouteEntry metrics of corresponding routes to those routers. The metrics of the routes will be dynamically modified by an amount, the offset D configured by the network administrator, when the VRRP interface of that route changes from a primary to a backup state and visa versa. Therefore, with the value of the offset D chosen with sufficient consideration to design of the network, all data packet traffic between local hosts, e.g. the first host <b>102</b>, and remotes hosts, e.g. the second host <b>104</b>, will be routed through the primary VRRP router <b>108</b>. Therefore packets transmitted or received from either of the local or remote hosts will take the same path, which solves the aforementioned problems for delay sensitive traffic.</p>
<p id="p-0038" num="0037"><figref idref="DRAWINGS">FIG. 4</figref> shows a method <b>400</b> of adjusting route metrics according to an embodiment of the invention. This method <b>400</b> is implemented in the pointer function <b>318</b> of <figref idref="DRAWINGS">FIG. 3</figref> in both of the routers <b>108</b>, <b>110</b>.</p>
<p id="p-0039" num="0038">Referring to <figref idref="DRAWINGS">FIG. 3</figref> and <figref idref="DRAWINGS">FIG. 4</figref>, immediately upon starting <b>402</b> the method <b>400</b> determines <b>404</b> if the VRRP routing is enabled on the router wherein the method <b>400</b> is implemented. This determination is made by checking the VRRP flag <b>316</b>. If the VRRP flag <b>316</b> is set, which means that VRRP routing is enabled, the method <b>400</b> then proceeds to determine <b>406</b> whether or not the router is currently acting as the backup VRRP router. This determination is made by checking the VRID of the router, which if set to &#x201c;backup&#x201d; (or some similar indication) means that the router is currently the backup VRRP router. If the router is currently the backup VRRP router, then the method <b>400</b> sets <b>408</b> the MIB pointer (PTR) of the RIB entry <b>304</b> for the interface of the VRRP subnet <b>104</b> to point to the second metric entry <b>312</b> of the corresponding MIB object <b>308</b>, which second metric entry <b>312</b> includes the offset D plus a default value. The method <b>400</b> then ends <b>412</b>.</p>
<p id="p-0040" num="0039">However, if the method <b>400</b> determines <b>406</b> that the router is not currently the backup router, hence the router is currently the primary router, then the method <b>400</b> sets <b>410</b> the MIB pointer (FIR) of the RIB entry <b>304</b> for the interface of the VRRP subnet <b>104</b> to point to the first metric entry <b>310</b> of the corresponding MIB object <b>308</b>, which first metric entry <b>310</b> does not include the offset D but only includes the default value. The method <b>400</b> then ends <b>412</b>.</p>
<p id="p-0041" num="0040">Likewise, if the method <b>400</b> determines <b>404</b> that VRRP routing is not enabled on the router, i.e. the VRRP flag <b>316</b> is not set, the method <b>400</b> sets <b>410</b> MIB pointer (PTR) of the RIB entry <b>304</b> for the interface of the VRRP subnet <b>104</b> to point to the first metric entry <b>310</b>. The method <b>400</b> then ends <b>412</b>.</p>
<p id="p-0042" num="0041">The method <b>400</b> can be implemented to run in an endless loop so that any changes to enablement of VRRP routing on the router, e.g. the VRRP flag <b>316</b>, or the VRRP interface status, e.g. as indicated by the VRID either primary or backup, can be effected in the router's RIB with minimal delay. Alternatively, the start <b>402</b> of the method <b>400</b> could be initiated subsequent to detecting a change in the enablement of VRRP routing on the router or the status of the router's VRRP interface.</p>
<p id="p-0043" num="0042">Advantageously, embodiments of the invention enable a network administrator to engineer traffic to follow the VRRP primary router location to obtain predictable routing paths that guarantee desirable SLAs for critical or time sensitive applications such as Voice over IP (VoIP). In VRRP enabled networks, embodiments of the invention provide a solution to dictate predictable paths in and out the VRRP network in presence of equal cost routing.</p>
<p id="p-0044" num="0043">Numerous modifications, variations and adaptations may be made to the embodiments of the invention described above without departing from the scope of the invention, which is defined in the claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method of adjusting route metrics in a data packet router, comprising the steps of:
<claim-text>determining if virtual routing redundancy protocol (VRRP) routing is enabled on the router;</claim-text>
<claim-text>determining, responsive to VRRP being enabled on the router, if the router is a backup VRRP router;</claim-text>
<claim-text>setting on the router, responsive to VRRP being enabled on the router and the router being a VRRP backup router, a pointer in a routing information base (RIB) entry for an interface of the router to point to a first metric entry of a management information base (MIB) object corresponding to the interface; and</claim-text>
<claim-text>setting on the router, responsive to VRRP being enabled on the router and the router not being a VRRP backup router, the pointer to point to a second metric entry of the MIB object, wherein the second metric entry has a value that is different than a value of the first metric entry.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the value of the second metric entry is lower than the value of the first metric entry.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the value of the first metric entry equals a configurable offset value plus a default value.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein the value of the second metric entry equals the default value.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising the step of:
<claim-text>setting on the router, responsive to VRRP not being enabled on the router, the pointer to point to the second metric entry of the MIB object.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00004">claim 4</claim-ref>, further comprising the step of:
<claim-text>setting on the router, responsive to VRRP not being enabled on the router, the pointer to point to the second metric entry of the MIB object.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the step of determining if VRRP routing is enabled on the router comprises checking a VRRP flag on the router.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the step of determining if the router is a backup VRRP router comprises checking a state of a virtual router identifier VRID of the router.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein if VRRP routing is enabled on the router, the interface is connected to a VRRP subnet, the subnet connected to another VRRP enabled router such that both said routers form a VRRP virtual router configuration.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. A data packet router capable of executing virtual routing redundancy protocol (VRRB), comprising:
<claim-text>a routing information base (RIB) having an entry including a pointer;</claim-text>
<claim-text>a management information base (MIB) having an object corresponding to an interface of the router;</claim-text>
<claim-text>a VRRP flag for providing an indication whether or not VRRP routing is enabled on the router;</claim-text>
<claim-text>a virtual router identifier VRID for indicating whether or not the router is a backup VRRP router when VRRP routing is enabled on the router; and</claim-text>
<claim-text>a pointer reference circuit for causing the pointer to point to a first metric of the object when VRRP routing is enabled on the router and the router is a backup VRRP router and for causing the pointer to otherwise point to a second metric of the object, wherein the pointer referencing circuit comprises the VRRP flag.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The router of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the second metric has a value that is different than a value of the first metric.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The router of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the value of the second first metric entry is lower than the value of the first metric entry.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The router of <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein the value of the first metric entry equals a configurable offset value plus a default value.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The router of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the value of the second metric entry equals the default value.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the pointer in the RIB entry corresponds to a cost metric for the interface.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the MIB object is an IpRouteEntry object.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The method of <claim-ref idref="CLM-00009">claim 9</claim-ref>, further comprising providing the entry in the RIB via a route advertisement to a router outside of the VRRP virtual router configuration.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. A method of adjusting route metrics in a data packet router, comprising the steps of:
<claim-text>determining if virtual routing redundancy protocol (VRRP) routing is enabled on the router;</claim-text>
<claim-text>determining, responsive to VRRP being enabled on the router, if the router is a backup VRRP router;</claim-text>
<claim-text>setting on the router, responsive to VRRP being enabled on the router and the router being a VRRP backup router, a pointer in a routing information base (RIB) entry for an interface of the router to point to a first metric entry of a management information base (MIB) object corresponding to the interface; and</claim-text>
<claim-text>setting on the router, responsive to VRRP being enabled on the router and the router not being a VRRP backup router, the pointer to point to a second metric entry of the MIB object, wherein the second metric entry has a value that is different than a value of the first metric entry, wherein the RIB entry is used for a protocol other than VRRP.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
