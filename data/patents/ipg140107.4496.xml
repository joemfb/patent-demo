<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625579-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625579</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12611876</doc-number>
<date>20091103</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<us-term-of-grant>
<us-term-extension>709</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>12</main-group>
<subgroup>66</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>370352</main-classification>
</classification-national>
<invention-title id="d2e53">Method and apparatus for enabling customer premise public branch exchange service feature processing</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>7843901</doc-number>
<kind>B2</kind>
<name>Silver et al.</name>
<date>20101100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>7873001</doc-number>
<kind>B2</kind>
<name>Silver</name>
<date>20110100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>7873032</doc-number>
<kind>B2</kind>
<name>Silver et al.</name>
<date>20110100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2006/0025140</doc-number>
<kind>A1</kind>
<name>Bales et al.</name>
<date>20060200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455445</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2008/0056151</doc-number>
<kind>A1</kind>
<name>Gazier et al.</name>
<date>20080300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2008/0155659</doc-number>
<kind>A1</kind>
<name>Gazier et al.</name>
<date>20080600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2009/0036128</doc-number>
<kind>A1</kind>
<name>Raguparan et al.</name>
<date>20090200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455436</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2009/0089399</doc-number>
<kind>A1</kind>
<name>Beck et al.</name>
<date>20090400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709218</main-classification></classification-national>
</us-citation>
</us-references-cited>
<number-of-claims>18</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>None</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>4</number-of-drawing-sheets>
<number-of-figures>4</number-of-figures>
</figures>
<us-related-documents>
<us-provisional-application>
<document-id>
<country>US</country>
<doc-number>61110796</doc-number>
<date>20081103</date>
</document-id>
</us-provisional-application>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20100111078</doc-number>
<kind>A1</kind>
<date>20100506</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Duffy</last-name>
<first-name>Dennis</first-name>
<address>
<city>Decatur</city>
<state>GA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Johnson</last-name>
<first-name>Leticia D.</first-name>
<address>
<city>Helotes</city>
<state>TX</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Johnson</last-name>
<first-name>Myranda</first-name>
<address>
<city>Smyrna</city>
<state>GA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="004" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Parlamas</last-name>
<first-name>Stephanie P.</first-name>
<address>
<city>Colts Neck</city>
<state>NJ</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="005" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Siegel</last-name>
<first-name>Steven A.</first-name>
<address>
<city>Mendham</city>
<state>NJ</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Duffy</last-name>
<first-name>Dennis</first-name>
<address>
<city>Decatur</city>
<state>GA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Johnson</last-name>
<first-name>Leticia D.</first-name>
<address>
<city>Helotes</city>
<state>TX</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Johnson</last-name>
<first-name>Myranda</first-name>
<address>
<city>Smyrna</city>
<state>GA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="004" designation="us-only">
<addressbook>
<last-name>Parlamas</last-name>
<first-name>Stephanie P.</first-name>
<address>
<city>Colts Neck</city>
<state>NJ</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="005" designation="us-only">
<addressbook>
<last-name>Siegel</last-name>
<first-name>Steven A.</first-name>
<address>
<city>Mendham</city>
<state>NJ</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>AT&#x26;T Intellectual Property I, L.P.</orgname>
<role>02</role>
<address>
<city>Atlanta</city>
<state>GA</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Nguyen</last-name>
<first-name>Minh-Trang</first-name>
<department>2477</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A method and apparatus for enabling customer premise Public Branch eXchange (PBX) service feature processing to be performed in a service provider network are disclosed. For example, the method receives a signaling message associated with a user by an application server deployed in a communication network, and accesses a customer premise Internet Protocol (IP) Public Branch eXchange (PBX) to retrieve customer premise IP PBX based service logic and data associated with the user by the application server. The method forwards an updated signaling message by the application server to a Serving Call Session Control Function (S-CSCF) network element for completing a service feature associated with the service logic and data in the communication network.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="219.03mm" wi="158.75mm" file="US08625579-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="230.63mm" wi="158.75mm" orientation="landscape" file="US08625579-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="217.00mm" wi="158.75mm" orientation="landscape" file="US08625579-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="148.34mm" wi="158.75mm" orientation="landscape" file="US08625579-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="234.95mm" wi="154.52mm" orientation="landscape" file="US08625579-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<p id="p-0002" num="0001">This application claims the benefit of U.S. Provisional Application No. 61/110,796 filed on Nov. 3, 2008, which is herein incorporated by reference.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<p id="p-0003" num="0002">The present invention relates generally to communication network and, more particularly, to a method and apparatus for enabling customer premise Public Branch eXchange (PBX) service feature processing to be performed in a service provider network.</p>
<heading id="h-0001" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0004" num="0003">Existing customer premise Public Branch Exchanges (PBXs) do not support an interface that can communicate local service logic and data to a service provider network. As such, customer premise PBXs do not enable the integration of network based service features provided by a service provider with customer premises based PBX service features supported by a customer premise PBX.</p>
<heading id="h-0002" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0005" num="0004">In one embodiment, the present invention discloses a method and apparatus for enabling customer premise Public Branch eXchange (PBX) service feature processing to be performed in a service provider network. For example, the method receives a signaling message associated with a user by an application server deployed in a communication network, and accesses a customer premise Internet Protocol (IP) Public Branch eXchange (PBX) to retrieve customer premise IP PBX based service logic and data associated with the user by the application server. The method forwards an updated signaling message by the application server to a Serving Call Session Control Function (S-CSCF) network element for completing a service feature associated with the service logic and data in the communication network.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0006" num="0005">The teaching of the present invention can be readily understood by considering the following detailed description in conjunction with the accompanying drawings, in which:</p>
<p id="p-0007" num="0006"><figref idref="DRAWINGS">FIG. 1</figref> illustrates an exemplary network for enabling customer premise PBX service feature processing in a service provider network in accordance with one embodiment of the present invention;</p>
<p id="p-0008" num="0007"><figref idref="DRAWINGS">FIG. 2</figref> illustrates an exemplary network for enabling customer premise PBX service feature processing in a service provider network in accordance with one embodiment of the present invention;</p>
<p id="p-0009" num="0008"><figref idref="DRAWINGS">FIG. 3</figref> illustrates a flowchart of a method of enabling customer premise PBX service feature processing to be implemented in a service provider network in accordance with one embodiment of the present invention; and</p>
<p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. 4</figref> illustrates a high level block diagram of a general purpose computer suitable for use in performing the functions described herein.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<p id="p-0011" num="0010">To facilitate understanding, identical reference numerals have been used, where possible, to designate identical elements that are common to the figures.</p>
<heading id="h-0004" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0012" num="0011">There is no current method for using information resident in a customer premise-based PBX by the network service provider to provide IMS services. For example, current Fixed Mobile Convergence (FMC) solutions may not result in the efficient use of an enterprise customer's access interface. They do not allow the Service Provider network the ability to access complementary and value-added features available from a customer premise PBX. Moreover, existing customer premise PBXs do not support an interface that can communicate local service logic and data to a service provider network. Thus, existing customer premise PBXs do not enable the integration of network based FMC service features provided by a service provider and customer premises based PBX service features supported by a customer premise PBX.</p>
<p id="p-0013" num="0012">To address this criticality, the present invention enables a service provider network to access customer premise PBX based service features during call processing to provide an integrated service experience of customer premise based and network based service features across wireless and wireline devices while making efficient use of the enterprise customer's access interface.</p>
<p id="p-0014" num="0013">In one embodiment, the present invention enables an Application Server (AS) interface between a service provider network and a customer premise PBX to allow access to customer premise PBX based service logic and data without relinquishing control of the bearer path of a call. For example, the present invention enables communications with a customer premise PBX in a manner similar to an Application Server (AS) to achieve integrated premise based and network based service features, thereby effecting more efficient use of the enterprise customer access interface.</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 1</figref> illustrates an exemplary network <b>100</b> for enabling customer premise PBX service feature processing to be implemented in a service provider network related to the present invention. In <figref idref="DRAWINGS">FIG. 1</figref>, a Mobile Core Network <b>101</b> is connected to an IMS Core Network <b>103</b> via a Circuit Switched Gateway (CSG) <b>122</b>.</p>
<p id="p-0016" num="0015">Broadly defined, IMS is an architectural framework for delivering Internet Protocol (IP) multimedia services to mobile users defined by the standard body, 3rd Generation Partnership Project (3GPP). In one embodiment, a session border controller (SBC) is a network element that provides the security boundary for the IMS network infrastructure. The SBC provides traffic controls, protocol verification, protocol conversion, hosted NAT, session managed media anchor or release, and records CDR events. The SBC exposes its well known address(es) within the IMS network and is the first trusted element of the Service Provider network infrastructure. It includes the Proxy Call Session Control Function (P-CSCF) and Access Border Gateway (A-BGF) IMS functions as defined by 3GPP and other standards bodies.</p>
<p id="p-0017" num="0016">In one embodiment, a Circuit Switched Gateway (CSG) is a network element that interconnects a circuit switched network, e.g., a Public Switched Telephone Network (PSTN) and a packet switched network, e.g., an IMS network. For example, the CSG network element performs the necessary conversion functions including, but not limited to, media and signaling protocol interworking, between a circuit switched network and an IMS core network.</p>
<p id="p-0018" num="0017">Customer premise Internet Protocol (IP) PBX <b>124</b> residing in an enterprise network <b>104</b> is connected to the IMS core network <b>103</b> via a SBC <b>123</b>. In one embodiment, the Public Switched Telephone Network (PSTN) <b>102</b> is connected to the IMS core network <b>103</b> via a CSG <b>127</b>.</p>
<p id="p-0019" num="0018">In one embodiment, the enterprise customer of the enterprise network <b>104</b> has subscribed on behalf of the FMC users of the network devices <b>111</b> behind the IP PBX to the NB-FMC service provided by the IMS core network <b>103</b>. In one embodiment, the IP PBX <b>124</b> acts as a SIP Application Server (AS) interfacing with a SIP application server (AS) <b>126</b> in the IMS core network <b>103</b> to support the NB-FMC service features. Furthermore, it also facilitates the access of customer premise IP PBX service logic and data by the service provider network.</p>
<p id="p-0020" num="0019">In one embodiment, mobile device <b>110</b>, e.g., an NB-FMC device, is registered with the Internet Protocol Multimedia Subsystem (IMS) core network <b>103</b> and the user related information is stored in both the IMS core network <b>103</b> and on the customer premise IP PBX <b>124</b> to provide integrated NB-FMC service features to mobile device <b>110</b>.</p>
<p id="p-0021" num="0020">To illustrate, the user of the mobile device <b>110</b>, who is associated with the enterprise network <b>104</b> (e.g., an employee associated with the enterprise that operates the enterprise network), may want the same service features that are currently available from the customer premise IP PBX <b>124</b> to be made available to the mobile device <b>110</b>. Furthermore, the user may also want access to the network-based service features currently provided by the IMS core network <b>103</b> to the customer premise-based IP PBX. In other words, mobile user wants access to both the same customer premise-based IP PBX and network-based service features that are available when using their wireline device.</p>
<p id="p-0022" num="0021">In one example, the user of mobile device <b>110</b> may originate a call by dialing an extension (e.g., a phone number with a configurable number of digits, typically 4 to 5 digits) of another employee in the same enterprise. Mobile core network <b>101</b> recognizes this call as an originating NB-FMC call and performs the processing required to assign a temporary routing number to this request to route it to the IMS Core <b>103</b> for originating service feature processing using flow <b>151</b>. When the call request reaches the CSG <b>122</b>, a Session Initiation Protocol (SIP) INVITE message is created and sent to the Interrogating Call Session Control Function <b>130</b>.</p>
<p id="p-0023" num="0022">Broadly defined, a Call Session Control Function (CSCF) network element is an IP Multimedia Services (IMS) based session control layer network element that is responsible for call session setup, mid-session control, and teardown. In particular, an Interrogating CSCF (I-CSCF) is a network element that provides topology hiding and helps to forward requests between a CSG and a Serving CSCF (S-CSCF) network element as well as Application Servers (AS). A Serving CSCF (S-CSCF) is a network element that provides session control, call signaling routing to applications, and SIP registrar functions. An Application server (AS) is a network element that hosts and executes service specific applications on behalf of an IMS core network, and interfaces with the S-CSCF using a communication protocol, e.g., a Session Initiation Protocol (SIP).</p>
<p id="p-0024" num="0023">Continuing with the above example, in accordance with standard IMS core processing, the I-CSCF <b>130</b> sends the INVITE message to the AS <b>125</b> using flow <b>152</b> to replace the temporary routing number with the original extension number dialed by the user of mobile device <b>110</b>, and returns a Public User Identifier (PUID) in the PAI field of the INVITE message that can be used to access the service profile for the originating FMC user. Then the AS <b>125</b> returns the modified INVITE message to the I-CSCF <b>130</b> using flow <b>152</b>. The I-CSCF <b>130</b> continues standard IMS processing, and once it determines the S-CSCF CSCF <b>131</b> that should be accessed for originating processing, the I-CSCF <b>130</b> sends the INVITE message to the S-CSCF <b>131</b> via flow <b>156</b>.</p>
<p id="p-0025" num="0024">In accordance with standard IMS Core processing, the S-CSCF <b>131</b> determines, based on the service profile asserted by the mobile device <b>110</b>, that SIP AS <b>126</b> needs to be accessed next. Thus, the S-CSCF <b>131</b> sends the INVITE message to the SIP AS <b>126</b> using flow <b>153</b> for call originating processing. Call originating processing at SIP AS <b>126</b> includes, but is not limited to, functions such as digit translation, call screening, time of day routing (based on information stored in IMS core network <b>103</b> for the identity asserted by mobile device <b>110</b>).</p>
<p id="p-0026" num="0025">In order to provide service to a user who has service logic and data residing in the PBX, this method provides a solution that enables the network to access the PBX service logic and data during network processing. In one embodiment, after completing call originating processing, SIP AS <b>126</b> determines that IP PBX <b>124</b>, which is acting as a SIP AS associated with the IMS core network <b>103</b>, should be accessed by processing an Initial Filter Criteria (iFC) in a standard manner. In one embodiment, the SIP AS <b>126</b> has been provisioned by the service provider to identify that a customer premise AS, e.g., the IP PBX <b>124</b>, associated with the user is to be accessed next. For example, the SIP AS <b>126</b> sends the INVITE message directly to the IP PBX <b>124</b> via the SBC <b>123</b> via an AS to AS interface using flow <b>154</b>.</p>
<p id="p-0027" num="0026">In turn, the IP PBX <b>124</b> retrieves the service logic and data associated with the user. In this example, the FMC user dialed an abbreviated number which could not be translated in the network, but can be translated by information in the IP PBX <b>124</b>. The IP PBX <b>124</b> translates the abbreviated number and uses the information received to update/change the R-URI in the message that is being processed. The IP PBX <b>124</b> then sends the updated INVITE message to the SIP AS <b>126</b> using flow <b>154</b>. In turn, SIP AS <b>126</b> forwards the modified INVITE message to the S-CSCF <b>131</b> using flow <b>157</b> for processing.</p>
<p id="p-0028" num="0027">Eventually, the S-CSCF <b>131</b> determines that call originating processing is complete. Standard IMS Core processing follows and the call is set up to a user served by PSTN <b>102</b> via CSG <b>127</b> (using flow <b>155</b>).</p>
<p id="p-0029" num="0028">When the call is eventually answered, bearer path <b>160</b> will be established from the mobile access network <b>105</b> to the mobile core network <b>101</b> to the IMS core network <b>103</b> (via CSG <b>122</b>) to the PSTN <b>102</b> (via CSG <b>127</b>) without having to hairpin the bearer path through IP PBX <b>124</b>. In other words, although the IP PBX <b>124</b> is capable of and was originally tasked with performing the digit translation function, it has been relieved of having to hairpin the bearer path <b>160</b> through the IP PBX <b>124</b>. Namely, the digit translation logic and data was accessed from the IP PBX <b>124</b> without terminating bearer to it and in turn, acted upon by the IMS core network <b>103</b>. This approach provides a significant amount of savings in terms of bandwidth since the bearer path does not need to traverse from the SBC <b>123</b> to the IP PBX <b>124</b> and then back from the IP PBX <b>124</b> to the SBC <b>123</b> (broadly defined as the hairpin).</p>
<p id="p-0030" num="0029">It should be noted that the present invention also works with subsequent signaling messages after the INVITE message. For example, signaling could be routed through the IP PBX <b>124</b> acting as a SIP AS. Based on any subsequent signaling, the IP PBX <b>124</b> could determine that data or service logic in the IP PBX <b>124</b> needs to be accessed. This could be based on subsequent session setup signaling, mid-call signaling or session teardown signaling.</p>
<p id="p-0031" num="0030">The benefits of the present invention shown in <figref idref="DRAWINGS">FIG. 1</figref> can be extended to calls originating from the existing wireline devices that are accessed via a customer premise PBX.</p>
<p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. 2</figref> illustrates an exemplary network <b>200</b> for enabling customer premise PBX service feature processing to be implemented in a service provider network in accordance with one embodiment of the present invention. In <figref idref="DRAWINGS">FIG. 2</figref>, the PSTN <b>204</b> is connected to the IMS core network <b>203</b> via a CSG <b>222</b>. The IP PBX <b>224</b> residing in an enterprise network <b>205</b> is connected to the IMS core network <b>203</b> via a SBC <b>223</b>. The mobile core network <b>202</b> is connected to IMS core network <b>203</b> via CSG <b>221</b>.</p>
<p id="p-0033" num="0032">In one embodiment, the enterprise customer of the enterprise network <b>205</b> has subscribed on behalf of the FMC users behind the IP PBX <b>224</b> to the NB-FMC service with the IMS core network <b>203</b>. For example, the IP PBX <b>224</b> acts as an Application Server (AS) interfacing with the IMS core network <b>203</b> to support the NB-FMC service features.</p>
<p id="p-0034" num="0033">In one example, the identity asserted by the mobile device <b>210</b>, an NB-FMC device, is registered with the Internet Protocol Multimedia Subsystem (IMS) core network <b>203</b> and the user related information is stored in both the IMS core network <b>203</b> and on the customer premise IP PBX <b>224</b> to provide integrated NB-FMC service features to the mobile device <b>210</b>.</p>
<p id="p-0035" num="0034">To illustrate, the user of mobile device <b>210</b>, who is associated with the enterprise network <b>205</b> (e.g., an employee associated with the enterprise that operates the enterprise network), may want the service features available from the customer premise IP PBX <b>224</b> to be made available on the mobile device <b>210</b>. Furthermore, the user may also want the PBX service features to be integrated with the NB-FMC service features provided by IMS core network <b>203</b>. In other words, the network-based service features are not provided by the IP PBX <b>224</b>.</p>
<p id="p-0036" num="0035">In one example, an incoming call request is sent via the PSTN <b>204</b> to the CSG <b>222</b> using flow <b>251</b> and the call terminating processing is to be provided by the IMS core network <b>203</b>. The called party number is a registered phone number associated with the IP PBX <b>224</b> by the S-CSCF.</p>
<p id="p-0037" num="0036">In accordance with standard IMS processing, upon receiving the call request, the CSG <b>222</b> formulates a SIP INVITE message and sends it to the I-CSCF <b>230</b>. If it comes in as a telephone number, the I-CSCF will do an ENUM dip to get a SIP-URI corresponding to that number. Then, I-CSCF <b>230</b> queries Home Subscriber Server (HSS) <b>232</b> to identify that S-CSCF <b>231</b> is associated with the SIP URI it received from ENUM and corresponding to the called party number. I-CSCF <b>230</b> sends the INVITE message to S-CSCF <b>231</b> for further processing. The series of processing flows is captured in flow <b>252</b>.</p>
<p id="p-0038" num="0037">Based on an initial Filtering Criteria (iFC), S-CSCF <b>231</b> sends the INVITE message to SIP AS <b>226</b> using flow <b>253</b> for call terminating processing, e.g., an incoming call screening feature that would not allow incoming calls of a particular type, or a feature that modifies a signaling parameter in accordance with customer requirements so that it is in a form that can be acted upon by the PBX. It should be noted that these are only illustrative call processing features.</p>
<p id="p-0039" num="0038">After the processing is completed, the SIP AS <b>226</b> then sends the INVITE message to the IP PBX <b>224</b>, which is acting as a SIP AS associated with the IMS core network <b>203</b>, via an AS to AS interface using flow <b>254</b> for local feature processing including, but not limited to, retrieving the local service logic and data residing in IP PBX <b>224</b> applicable to the user. For example, IP PBX <b>224</b> may retrieve the service logic and data (e.g., a temporary call forwarding setting for the user) that is stored locally at the IP PBX <b>224</b> to appropriately update the previously received INVITE message and then sends the updated INVITE message to SIP AS <b>226</b> using flow <b>254</b>. SIP AS <b>226</b> then sends the processed INVITE message back to S-CSCF <b>231</b> using flow <b>255</b>.</p>
<p id="p-0040" num="0039">The S-CSCF <b>231</b> then sends the INVITE message (including the call forwarding information received from SIP AS <b>226</b>) to AS <b>225</b> using flow <b>256</b> for terminating NB-FMC processing and anchoring. AS <b>225</b> then sends the INVITE message containing the Request Uniform Resource Identifier (R-URI)=the called party number (including call forwarding information received from IP PBX <b>224</b>) to S-CSCF <b>231</b> using flow <b>256</b>.</p>
<p id="p-0041" num="0040">The S-CSCF <b>231</b> determines that the terminating processing is complete. Based on the registration information obtained by the S-CSCF <b>231</b>, the S-CSCF <b>231</b> determines that normally the simultaneous ringing feature associated with the called party number should be provided to the mobile device <b>210</b> (e.g., a first endpoint device of the called party) using flows <b>258</b> and <b>259</b> as well as to the wireline phone <b>211</b> (e.g., a second endpoint device of the called party) using flow <b>257</b>. However, based on the presence of the call forwarding information received from IP PBX <b>224</b>, the S-CSCF <b>231</b> determines that the simultaneous ringing feature associated with the called party number should be provided to the mobile device <b>210</b> (e.g., a first endpoint device of the called party) using flows <b>258</b> and <b>259</b> as well as to the Call Forwarding Number associated with wireline phone <b>212</b> served by PSTN Network <b>204</b><i>a </i>using flow <b>262</b> (e.g., the endpoint device to which the user's second wireline device is currently being forwarded).</p>
<p id="p-0042" num="0041">Finally, the mobile device <b>210</b> answers the call and the bearer path <b>260</b> is established to complete the call request, or alternatively the user answers the call using the wireline phone <b>212</b> and the bearer path <b>261</b> is established to complete the call request. It should be noted that the bearer path <b>260</b> does not traverse through the IP PBX <b>224</b> at all when the call is answered by the mobile device <b>210</b>. In addition, if the Call Forward device <b>212</b> answers the call and the bearer path <b>261</b> is established to the PSTN <b>204</b><i>a </i>via the CSG <b>227</b>, the bearer path <b>261</b> does not traverse through the IP PBX <b>224</b>. In other words, although the IP PBX <b>224</b> is capable of and was originally tasked with performing the Call Forwarding function on behalf of the user for their wireline device, it has been relieved of having to perform this function, thereby avoiding the need to hairpin the bearer path <b>261</b> through the IP PBX <b>224</b>. Namely, the call forwarding information was accessed from the IP PBX <b>224</b> and in turn, implemented by the IMS core network <b>203</b>. This approach provides a significant amount of savings in terms of bandwidth since the bearer path does not need to traverse from the SBC <b>223</b> to the IP PBX <b>224</b> and then back from the IP PBX <b>224</b> to the SBC <b>223</b> (broadly defined as the hairpin).</p>
<p id="p-0043" num="0042"><figref idref="DRAWINGS">FIG. 3</figref> illustrates a flowchart of an illustrative method <b>300</b> of enabling customer premise PBX service feature processing to be implemented in a service provider network of the present invention. For example, one or more steps of method <b>300</b> can be implemented by a S-CSCF and/or a SIP AS. Method <b>300</b> starts in step <b>305</b> and proceeds to step <b>310</b>.</p>
<p id="p-0044" num="0043">In step <b>310</b>, the method receives a SIP message, e.g., a SIP INVITE call request message, to be processed. The SIP message can be a call originating portion of SIP signaling or a call terminating portion of SIP signaling. In one embodiment, the SIP message is first received by a S-CSCF and then forwarded by the S-CSCF to a SIP AS, e.g., the SIP AS <b>226</b>, for further processing. Thus, in one embodiment, step <b>310</b> is performed by the SIP AS in receiving the SIP message from the S-CSCF.</p>
<p id="p-0045" num="0044">In step <b>320</b>, the method determines that a customer premise IP PBX needs to be accessed, e.g., the service logic and data for a service feature associated with the user is local to the customer premise IP PBX. The access to the customer premise IP PBX is determined and performed by the SIP AS. In one embodiment, the customer premise IP PBX is acting as a SIP AS and interfaces with the SIP AS <b>226</b> using an AS to AS interface in the corresponding IMS core network. Note that the SIP AS <b>226</b> has been provisioned by the service provider to identify that the customer premise IP PBX is to be accessed next in the call processing flow.</p>
<p id="p-0046" num="0045">In step <b>330</b>, the method sends the signaling message to the corresponding customer premise IP PBX that is tasked with processing the request (broadly accessing the customer premise IP PBX). The INVITE message is sent by the SIP AS. In turn, the service logic and data is retrieved by the customer premise IP PBX. After retrieving the local service logic and data, the customer premise IP PBX may modify or update the INVITE message accordingly depending on the local service logic and data processing. For example, if the retrieved service logic and data is used for call forwarding a request to a specific destination phone number, then the call forwarding service logic and phone number will be inserted into the INVITE message to be sent to the SIP AS. However, it should be noted that other actions may be taken by the customer premise IP PBX at this stage, e.g., sending a response to the SIP AS with respect to the signaling message that it received, or establishing other sessions. In one embodiment, accessing the customer premise IP PBX broadly includes receiving an updated or modified signaling message from the customer premise IP PBX.</p>
<p id="p-0047" num="0046">In step <b>335</b>, the method forwards the updated or modified signaling message back to the S-CSCF. For example, the SIP AS forwards the updated or modified INVITE message to the S-CSCF for processing.</p>
<p id="p-0048" num="0047">In one embodiment, the AS to AS interface between the SIP AS and the customer premise IP PBX uses the SIP protocol to access the IP PBX service logic and data. In one embodiment, the customer premise IP PBX stays in the signaling path for the duration of the call. Once the customer premise IP PBX processing is completed, the customer premise IP PBX would return a modified or an unmodified SIP INVITE message to the SIP AS. Then, the SIP AS forwards the SIP INVITE message to the S-CSCF for processing. This would enable the S-CSCF to access a subsequent AS from the network that will perform further service processing that may be needed. It should be noted that in one embodiment, a service feature associated with the retrieved service logic and data will be completed in the service provider network (broadly a communication network).</p>
<p id="p-0049" num="0048">In step <b>340</b>, the method completes the network based service feature processing of the call request. For example, in one embodiment step <b>340</b> is performed by the S-CSCF. It should be noted that network based service features are service features that are supported by an IMS core network that cannot be supported by the customer premise IP PBX. These network based service features include, but are not limited to, digit translation, call screening, time of day routing, simultaneous ringing to multiple phone numbers without routing bearer to the customer premise IP PBX until the INVITE is accepted, or providing a single voice mail box in the IMS core network without the need to access the customer premise IP PBX, etc.</p>
<p id="p-0050" num="0049">In step <b>350</b>, the method sets up an appropriate bearer path for the call. Once all network based processing is completed by the IMS core network, the S-CSCF determines a bearer path to be set up to a different endpoint or network without causing hair pinning through the customer premise IP PBX. The bearer path is set up by the S-CSCF. The method ends in step <b>360</b>.</p>
<p id="p-0051" num="0050">It should be noted that although not specifically specified, one or more steps of methods <b>300</b> may include a storing, displaying and/or outputting step as required for a particular application. In other words, any data, records, fields, and/or intermediate results discussed in the methods <b>300</b> can be stored, displayed and/or outputted to another device as required for a particular application.</p>
<p id="p-0052" num="0051"><figref idref="DRAWINGS">FIG. 4</figref> depicts a high level block diagram of a general purpose computer suitable for use in performing the functions described herein. As depicted in <figref idref="DRAWINGS">FIG. 4</figref>, the system <b>400</b> comprises a processor element <b>402</b> (e.g., a CPU), a memory <b>404</b>, e.g., random access memory (RAM) and/or read only memory (ROM), a module <b>405</b> for enabling customer premise PBX service feature processing to be implemented in a service provider network, and various input/output devices <b>406</b> (e.g., storage devices, including but not limited to, a tape drive, a floppy drive, a hard disk drive or a compact disk drive, a receiver, a transmitter, a speaker, a display, a speech synthesizer, an output port, and a user input device (such as a keyboard, a keypad, a mouse, and the like)).</p>
<p id="p-0053" num="0052">It should be noted that the present invention can be implemented in software and/or in a combination of software and hardware, e.g., using application specific integrated circuits (ASIC), a general purpose computer or any other hardware equivalents. In one embodiment, the present module or process <b>405</b> for enabling customer premise PBX service feature processing to be implemented in a service provider network can be loaded into memory <b>404</b> and executed by processor <b>402</b> to implement the functions as discussed above. As such, the present process <b>405</b> for enabling customer premise PBX service feature processing to be implemented in a service provider network (including associated data structures) of the present invention can be stored on a computer readable storage medium, e.g., RAM memory, magnetic or optical drive or diskette and the like.</p>
<p id="p-0054" num="0053">While various embodiments have been described above, it should be understood that they have been presented by way of example only, and not limitation. Thus, the breadth and scope of a preferred embodiment should not be limited by any of the above-described exemplary embodiments, but should be defined only in accordance with the following claims and their equivalents.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method for processing a signaling message in a communication network, comprising:
<claim-text>receiving a signaling message associated with a user by a processor of an application server deployed in the communication network, wherein the signaling message comprises a call request message;</claim-text>
<claim-text>accessing, by the processor, a customer premises Internet protocol public branch exchange to retrieve customer premises internet protocol public branch exchange based service logic and data associated with the user, wherein the accessing is in response to the receiving the signaling message; and</claim-text>
<claim-text>forwarding, by the processor, an updated signaling message to a serving call session control function network element for completing a service feature associated with the service logic and data in the communication network, wherein the service feature is completed without a bearer path being established to the customer premises internet protocol public branch exchange.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the signaling message comprises a call originating portion of a session initiation protocol signaling.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the accessing the customer premises internet protocol public branch exchange employs an application server interface.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the communication network comprises an internet protocol multimedia subsystem network.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the accessing comprises:
<claim-text>sending a session initiation protocol message to the customer premises internet protocol public branch exchange; and</claim-text>
<claim-text>receiving a modified session initiation protocol message comprising the service logic and data from the customer premises internet protocol public branch exchange.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>setting up a bearer path by the serving call session control function via the communication network without hair-pinning through the customer premises internet protocol public branch exchange.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>providing a network based service feature by the serving call session control function.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the signaling message comprises a call terminating portion of a session initiation protocol signaling.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. A non-transitory computer-readable medium storing instructions which, when executed by a processor of an application server, cause the processor to perform operations for processing a signaling message in a communication network, the operations comprising:
<claim-text>receiving a signaling message associated with a user by the application server deployed in the communication network, wherein the signaling message comprises a call request message;</claim-text>
<claim-text>accessing a customer premises internet protocol public branch exchange to retrieve customer premises internet protocol public branch exchange based service logic and data associated with the user, wherein the accessing is in response to the receiving the signaling message; and</claim-text>
<claim-text>forwarding an updated signaling message serving call session control function network element for completing a service feature associated with the service logic and data in the communication network, wherein the service feature is completed without a bearer path being established to the customer premises internet protocol public branch exchange.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The non-transitory computer-readable medium of <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the signaling message comprises a call originating portion of a session initiation protocol signaling.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The non-transitory computer-readable medium of <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the accessing the customer premises internet protocol public branch exchange employs an application server interface.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The non-transitory computer-readable medium of <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the communication network comprises an internet protocol multimedia subsystem network.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The non-transitory computer-readable medium of <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the accessing comprises:
<claim-text>sending a session initiation protocol message to the customer premises internet protocol public branch exchange; and</claim-text>
<claim-text>receiving a modified session initiation protocol message comprising the service logic and data from the customer premises internet protocol public branch exchange.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The non-transitory computer-readable medium of <claim-ref idref="CLM-00007">claim 7</claim-ref>, further comprising:
<claim-text>setting up a bearer path by the serving call session control function via the communication network without hair-pinning through the customer premises internet protocol public branch exchange.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The non-transitory computer-readable medium of <claim-ref idref="CLM-00007">claim 7</claim-ref>, further comprising:
<claim-text>providing a network based service feature by the serving call session control function.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The non-transitory computer-readable medium of <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the signaling message comprises a call terminating portion of a session initiation protocol signaling.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. A method for processing a signaling message in a communication network, comprising:
<claim-text>receiving a signaling message by a processor of a customer premises internet protocol public branch exchange, wherein the signaling message is sent by an application server of the communication network requesting service logic and data associated with a user, wherein the signaling message comprises a call request message, wherein the signaling message is sent by the application server when the application server has received the signaling message;</claim-text>
<claim-text>retrieving, by the processor, the service logic and data associated with the user; and</claim-text>
<claim-text>sending, by the processor, the service logic and data to the application server for completing a service feature associated with the service logic and data in the communication network, wherein the service feature is completed without a bearer path being established to the customer premises internet protocol public branch exchange.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The method of <claim-ref idref="CLM-00017">claim 17</claim-ref>, wherein the service logic and data is sent to the application server via an updated signaling message.</claim-text>
</claim>
</claims>
</us-patent-grant>
