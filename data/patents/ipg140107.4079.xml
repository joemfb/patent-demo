<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625148-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625148</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12836086</doc-number>
<date>20100714</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2009-167960</doc-number>
<date>20090716</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>660</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>K</subclass>
<main-group>15</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>358  118</main-classification>
</classification-national>
<invention-title id="d2e71">Image processing apparatus, method of managing image output, and storage medium</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>2004/0047002</doc-number>
<kind>A1</kind>
<name>Nishi</name>
<date>20040300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358  118</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>JP</country>
<doc-number>2002-366542</doc-number>
<date>20021200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>JP</country>
<doc-number>2003-177879</doc-number>
<date>20030600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>JP</country>
<doc-number>2005-267021</doc-number>
<date>20050900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>JP</country>
<doc-number>2006-139611</doc-number>
<date>20060600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>19</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>358  115</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>358  303</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>358  118</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>11</number-of-drawing-sheets>
<number-of-figures>13</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20110013214</doc-number>
<kind>A1</kind>
<date>20110120</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Kaida</last-name>
<first-name>Yukiko</first-name>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Miyazaki</last-name>
<first-name>Ryonosuke</first-name>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Ikkanzaka</last-name>
<first-name>Hiroaki</first-name>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
<us-applicant sequence="004" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Negoro</last-name>
<first-name>Shigeo</first-name>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Kaida</last-name>
<first-name>Yukiko</first-name>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Miyazaki</last-name>
<first-name>Ryonosuke</first-name>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Ikkanzaka</last-name>
<first-name>Hiroaki</first-name>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
<inventor sequence="004" designation="us-only">
<addressbook>
<last-name>Negoro</last-name>
<first-name>Shigeo</first-name>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Oblon, Spivak, McClelland, Maier &#x26; Neustadt, L.L.P.</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Ricoh Company Limited</orgname>
<role>03</role>
<address>
<city>Tokyo</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Cordero</last-name>
<first-name>Marivelisse Santiago</first-name>
<department>2676</department>
</primary-examiner>
<assistant-examiner>
<last-name>Getaneh</last-name>
<first-name>Mesfin</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">An image processing apparatus includes a file management unit that manages files for image output, a file registration unit that registers the files, an output-configuration-information management unit that manages output configuration information, an output-configuration-information registration unit that registers the output configuration information, a data creation unit that creates the data in accordance with the output configuration information, and an output determination unit. When the file registration unit registers each of the files to the file management unit, the output determination unit determines whether the combined image can be outputted in accordance with certain output conditions. The output-configuration-information management unit registers predetermined output configuration information for the combined image and adds an output condition of the file that can be outputted to the output configuration information of the combined image.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="172.89mm" wi="168.32mm" file="US08625148-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="170.01mm" wi="172.64mm" file="US08625148-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="229.02mm" wi="141.05mm" orientation="landscape" file="US08625148-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="211.16mm" wi="177.63mm" file="US08625148-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="200.83mm" wi="154.26mm" file="US08625148-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="219.79mm" wi="181.19mm" file="US08625148-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="104.14mm" wi="168.40mm" file="US08625148-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="260.94mm" wi="174.92mm" orientation="landscape" file="US08625148-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="240.11mm" wi="177.88mm" orientation="landscape" file="US08625148-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="156.21mm" wi="175.68mm" file="US08625148-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="250.11mm" wi="176.28mm" file="US08625148-20140107-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="253.66mm" wi="184.83mm" file="US08625148-20140107-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">The present patent application claims priority pursuant to 35 U.S.C. &#xa7;119 from Japanese Patent Application No. 2009-167960, filed on Jul. 16, 2009 in the Japan Patent Office, which is incorporated herein by reference in its entirety.</p>
<heading id="h-0002" level="1">BACKGROUND OF THE DISCLOSURE</heading>
<p id="p-0003" num="0002">1. Field of the Disclosure</p>
<p id="p-0004" num="0003">Exemplary embodiments of the present disclosure relate to an image processing apparatus, such as a printer and a multifunctional periphery, that outputs document information as a visible image on a sheet of paper or other recording medium, and more specifically, an image processing apparatus that manages image output in which a plurality of files is combined to output an image, a method of managing the image output, and a storage medium that stores program codes causing an image processing apparatus to execute the method of managing the image output.</p>
<p id="p-0005" num="0004">2. Description of the Background</p>
<p id="p-0006" num="0005">As image processing apparatuses that perform processing for representing document information as a visible image on a sheet of paper or other recording medium, for example, printers and multi-functional peripherals (MFPs) are widely used.</p>
<p id="p-0007" num="0006">Such an image processing apparatus may be connected to a network and utilized by external devices via the network. Such external devices include, for example, personal computers (PC) or servers that create and use document information, and exchange data with the image processing apparatus to constitute an image processing system.</p>
<p id="p-0008" num="0007">In such an image processing system, the image processing apparatus is used in various ways. For example, a plurality of users may create documents using different means and request the image processing apparatus to output (print) the documents as images in accordance with different output conditions. Hence, the image processing apparatus may have capabilities of processing such a request. In such a case, generally, the image processing system handles target documents in the form of files. Such target document files may contain not only text but also images and graphics, and the term &#x201c;document&#x201d; used herein refers to the above-described document file to be processed by the image processing system.</p>
<p id="p-0009" num="0008">Receiving the image-output request, the image processing apparatus temporarily stores a plurality of documents received, combines (merges) the plurality of documents into a single merged document, and outputs (prints) the merged document as an image. For such processing, a conventional management technique is proposed that determines whether target documents can be merged and, if it is determined that the target documents cannot be merged, stops printing the documents.</p>
<p id="p-0010" num="0009">Such merging is proposed in, for example, JP-2006-139611-A. In JP-2006-139611-A, to reduce the burden on an operator who instructs merging, a document management method is proposed that virtually combines a plurality of document files into a single combined document to print the document files as virtually combined. In the management of the virtually-combined documents, if a document to be combined or a sub-group of documents is set so as not to be printed, the document or sub-group is not printed.</p>
<p id="p-0011" num="0010">For such a conventional technique of managing merging, however, only in printing or registering an entire (merged) document is it confirmed whether there is an unprintable document among target documents to be merged and determined whether the respective target documents can be printed. Thus, the output of the merged document depends on the determination results. Further, if there is a conflict in the setting of output conditions between the merged document created by the merging and each of the target documents, stopping the printing is performed by the above-described management function.</p>
<p id="p-0012" num="0011">Even when printing is stopped by the conflict in the setting of output conditions, however, in certain cases modifying the setting to solve the conflict allows the merged document to be printed. However, the creators of the respective documents have no way of knowing which documents should be modified or how the documents should be modified, and thus cannot easily modify the settings so as to enable the merged document to be outputted.</p>
<heading id="h-0003" level="1">SUMMARY</heading>
<p id="p-0013" num="0012">In at least one exemplary embodiment, there is provided an improved image processing apparatus including a file management unit, a file registration unit, an output-configuration-information management unit, an output-configuration-information registration unit, a data creation unit, and an output determination unit. The file management unit manages a plurality of files for image output. The file registration unit registers the files managed by the file management unit. The output-configuration-information management unit manages output configuration information in accordance with which the files managed by the file management unit are combined to create data for outputting a combined image. The output-configuration-information registration unit registers the output configuration information managed by the output-configuration-information management unit. The data creation unit creates the data for outputting the combined image in accordance with the output configuration information managed by the output-configuration-information management unit. When the file registration unit registers each of the files to the file management unit, the output determination unit determines whether the combined image can be outputted in accordance with an output condition of the output configuration information previously defined for outputting the combined image, an output condition designated for a file to be registered, and an output condition added to the output configuration information in connection with a file already registered. Before registering the files for outputting the combined image to the file management unit, the output-configuration-information management unit registers the predetermined output configuration information for the combined image and, when the output determination unit determines that each of the files for outputting the combined image can be outputted, adds an output condition of the file that can be outputted to the output configuration information of the combined image.</p>
<p id="p-0014" num="0013">In at least one exemplary embodiment, there is provided an improved method of managing image output for combining files to output a combined image. The method includes including registering, determining, adding, cancelling, and creating. The registering registers predetermined output configuration information for the combined image before registering the files to a file management unit. The determining determines whether the combined image can be outputted in accordance with an output condition set for each of the files in registering each of the files to the file management unit, an output condition added to the output configuration information in the registering of the predetermined output configuration information, and an output condition added to the output configuration information in connection with registration of a file already registered. If it is determined by the determining that the combined image can be outputted in registering a file of the files, the adding adds an output condition of the file that can be outputted to the output configuration information for the combined image. If it is determined by the determining that the combined image cannot be outputted in registering a file of the files, the cancelling cancels registration of the file that cannot be outputted. The creating creates data for outputting the combined image in accordance with the output configuration information managed by the determining.</p>
<p id="p-0015" num="0014">In at least one exemplary embodiment, there is provided an improved computer-readable recording medium containing instruction codes that cause an image processing apparatus to execute a method including registering, determining, adding, cancelling, and creating.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0016" num="0015">Additional aspects, features, and advantages will be readily ascertained as the same becomes better understood by reference to the following detailed description when considered in connection with the accompanying drawings, wherein:</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram illustrating a schematic hardware configuration of a MFP according to an exemplary embodiment of this disclosure;</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 2</figref> is a block diagram illustrating a schematic configuration of a control system of the MFP illustrated in <figref idref="DRAWINGS">FIG. 1</figref> that manages output of a combined image created from a plurality of files;</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 3</figref> is a diagram illustrating a concept of mode of management of document files for combined-image output;</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 4</figref> is a diagram illustrating input screens A, B, and C sequentially displayed in creating output configuration information of a combined image;</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 5</figref> is a sequence diagram illustrating a control sequence of creation of the output configuration information performed by the control system illustrated in <figref idref="DRAWINGS">FIG. 2</figref>;</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 6</figref> is a table showing an example of output configuration information managed by an output-configuration-information management unit of the control system;</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIG. 7</figref> is a sequence diagram illustrating a control sequence of document registration performed by the control system;</p>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 8</figref> is a table showing an example of document management information managed by a document management unit of the control system;</p>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. 9</figref> is a flow chart illustrating steps performed by the output-configuration-information management unit of the control system;</p>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. 10</figref> is a table showing an example of user information managed by a user management unit of the control system;</p>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 11</figref> is a flow chart illustrating steps performed by an output determination unit of the control system; and</p>
<p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. 12</figref> is a table illustrating another example of output configuration information managed by the output-configuration-information management unit.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<p id="p-0029" num="0028">The accompanying drawings are intended to depict exemplary embodiments of the present disclosure and should not be interpreted to limit the scope thereof. The accompanying drawings are not to be considered as drawn to scale unless explicitly noted.</p>
<heading id="h-0005" level="1">DETAILED DESCRIPTION OF EXEMPLARY EMBODIMENTS</heading>
<p id="p-0030" num="0029">In describing embodiments illustrated in the drawings, specific terminology is employed for the sake of clarity. However, the disclosure of this patent specification is not intended to be limited to the specific terminology so selected and it is to be understood that each specific element includes all technical equivalents that operate in a similar manner and achieve similar results.</p>
<p id="p-0031" num="0030">Although the exemplary embodiments are described with technical limitations with reference to the attached drawings, such description is not intended to limit the scope of the invention and all of the components or elements described in the exemplary embodiments of this disclosure are not necessarily indispensable to the present invention.</p>
<p id="p-0032" num="0031">Below, exemplary embodiments according to the present disclosure are described with reference to the attached drawings.</p>
<p id="p-0033" num="0032">First, an image processing apparatus and an image-output management method according to an exemplary embodiment according to the present disclosure are described taking an example of a multi-functional peripheral (MFP).</p>
<p id="p-0034" num="0033">The MFP according to this exemplary embodiment has capabilities of a copier, a printer, a facsimile machine (hereinafter, referred to as FAX), and a scanner. In processing an image using such capabilities, if a processing target is a document, image data is inputted by reading an image of the document with a scanner. Alternatively, if the processing target is inputted from an external device via a communication unit, computerized image (print) data is inputted. In both cases, the inputted image data is processed to be general-purpose image data available for output, and managed as a file for image output (hereinafter &#x201c;documents file&#x201d; or simply &#x201c;document&#x201d;) by, e.g., an image storage apparatus as is usually performed. When the data managed as the image output file is inputted, output conditions for the data are designated by a user. Accordingly, the image output file is stored together with data indicating the output conditions designated for the image data.</p>
<p id="p-0035" num="0034">The output conditions for the image output file are related to controllable operations of a print engine (plotter), a sheet feed section, and other output sections of the MFP, and include the sheet size, sheet type, number of copies to be outputted, modes of outputting an image on a sheet (e.g., magnification, double-side printing, aggregated printing, and edit), and image processing conditions (e.g., color/monochrome selection, density), post processing (e.g., sorting, stapling) and other conditions. A control unit transmits control instructions with control parameters to a relevant process(es) and an operation unit(s) in accordance with such output conditions designated by a user.</p>
<p id="p-0036" num="0035">However, since the mechanical conditions of the MFP vary over time, even if outputting an image is requested based on an image output file previously stored, the image might not be outputted as intended. Further, if the image output file stored is inputted from an external device (e.g., a PC and/or a server) by data exchange via, e.g., a local area network (LAN), the MFP might not be able to process output conditions attached to the image output file.</p>
<p id="p-0037" num="0036">The MFP according to this exemplary embodiment combines image output files separately managed in an image storage device to perform combined-image output. The MFP also has a capability (combined-image processing capability) of creating image output data for the combined-image output.</p>
<p id="p-0038" num="0037">The image output files subjected to such combined-image processing may be files stored through different processes. Accordingly, the output conditions attached might include output conditions which the MFP does not support, or combining image output files may prevent normal output.</p>
<p id="p-0039" num="0038">Hence, in this exemplary embodiment, the MFP has a capability of managing the combined-image output. In the management of combined-image output, as described below, when an image output file is registered as a file for combined-image output, it is determined whether a combined image can be outputted. If the combined image cannot be outputted, the cause is reported to a registrant (creator) of the file so as to easily deal with the cause to output the image.</p>
<p id="p-0040" num="0039">Next, a configuration of the MFP is described below.</p>
<p id="p-0041" num="0040">[Schematic Configuration of Hardware of MFP]</p>
<p id="p-0042" num="0041"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram illustrating a schematic configuration of hardware of the MFP according to this exemplary embodiment. In <figref idref="DRAWINGS">FIG. 1</figref>, a central processing unit (CPU) <b>11</b> is a processer for executing software (programs), a read only memory (ROM) <b>12</b> is a memory device that stores programs, and a random access memory (RAM) <b>13</b> is a memory device that temporarily stores data during execution of programs. The CPU <b>11</b>, the ROM <b>12</b>, and the RAM <b>13</b> form a main control unit.</p>
<p id="p-0043" num="0042">When the main control unit implements a system of managing (controlling) combined-image output (illustrated in <figref idref="DRAWINGS">FIG. 2</figref>) using software, programs described below (see control sequences illustrated in <figref idref="DRAWINGS">FIGS. 5 and 7</figref> and control flows illustrated in <figref idref="DRAWINGS">FIGS. 9 and 11</figref>) cause a computer including the CPU <b>11</b>, the ROM <b>12</b>, and the RAM <b>13</b> to execute such processing. In executing processing, the CPU <b>11</b> loads a control or processing program, which is stored in the ROM <b>12</b>, on the RAM <b>13</b> that serves as a working memory. The recording (storage) medium to record (store) programs is not limited to the ROM <b>12</b> and may be any other computer-readable recording medium such as a hard disk drive (HDD), a compact disk read only memory (CD-ROM), and a digital versatile disk (DVD). Such programs may be downloaded to such a recording medium via a network, e.g., the Internet.</p>
<p id="p-0044" num="0043">An image storage device <b>14</b> is a storage device that stores image data on a large-volume recording medium, e.g., an HDD. Such image data is received from, e.g., a scanner <b>18</b> that inputs image data, an external device <b>25</b> (e.g., a PC or a server), via a LAN controller <b>16</b>, and an external facsimile (FAX) machine via a FAX controller <b>21</b>. In this exemplary embodiment, image data inputted as a processing target is stored in the image storage device <b>14</b> and managed as an image output file by a processing request. When reused for print output or data transmission, the image output file is read from the image storage device <b>14</b>. Image output files used for combined-image output are stored in the image storage device <b>14</b> (see a storage unit <b>114</b> illustrated in <figref idref="DRAWINGS">FIG. 2</figref>).</p>
<p id="p-0045" num="0044">A non-volatile memory <b>15</b> is a non-volatile storage device that stores setting information such as default setting values to be retained even when the power is off.</p>
<p id="p-0046" num="0045">The LAN controller <b>16</b> is a controller that controls connection to a network, such as Ethernet (registered trademark) or wireless LAN. In this exemplary embodiment, image output files used for combined-image output are received from the external device <b>25</b>, such as a PC or a server, via the LAN controller <b>16</b>.</p>
<p id="p-0047" num="0046">The FAX controller <b>21</b> is a controller that transmits and receives FAX data via a public line.</p>
<p id="p-0048" num="0047">A DCR <b>17</b> is a converter that converts image data (e.g., bitmap data), which is inputted through capabilities of a printer, a facsimile machine, and a scanner, to an image file to be stored in the image storage device <b>14</b>.</p>
<p id="p-0049" num="0048">The scanner <b>18</b> is a reader that converts an original of paper document to image data (e.g., bitmap data).</p>
<p id="p-0050" num="0049">A plotter <b>19</b> is a device that prints (outputs) image data on, e.g., a sheet of paper.</p>
<p id="p-0051" num="0050">A card interface (I/F) <b>22</b> is an interface connected to a card-type removable recording medium, such as a secure digital (SD) card, to transmit and receive data to/from the recording medium. The recording medium connected to the card I/F <b>22</b> may be used in a similar manner, for example, to store image files.</p>
<p id="p-0052" num="0051">An operation display panel <b>20</b> is a user interface under control of the main control section and includes a liquid-crystal-display (LCD) touch panel as an operation screen. The operation display panel <b>20</b> is a graphical user interface (GUI) device that receives a processing request or execution instruction of a job from a user and notifies the user of a status of executing the job through the operation screen. In this exemplary embodiment, output configuration information of a combined image is created using input screens of a display unit <b>121</b> (illustrated in <figref idref="DRAWINGS">FIGS. 2 and 5</figref>) of the operation display panel <b>20</b>.</p>
<p id="p-0053" num="0052">An internal bus <b>10</b> is a bus through which data is transmitted between the above-described devices.</p>
<p id="p-0054" num="0053">[Management System of Combined-Image Output]</p>
<p id="p-0055" num="0054">In the management of combined-image output according to this exemplary embodiment, when an image output file (document) for combined-image output is registered, it is determined whether a combined image can be outputted. If the combined image cannot be outputted, the following processing steps 1 to 3 are performed to enable a registrant (creator) to take measures to output the combined image.</p>
<p id="p-0056" num="0055">Processing 1: Register output configuration information of combined-image output data in advance. The output configuration information registered in this processing is still incomplete since image output files (documents) are not registered.</p>
<p id="p-0057" num="0056">Processing 2: Determine whether a combined image can be outputted when image output files (documents) for combined-image output are stored. In other words, it is determined whether output configuration information of combined-image output data in which an additional image output file is combined can be registered.</p>
<p id="p-0058" num="0057">Processing 3: Identify an image output file (document) preventing the combined image from being outputted and report the file to the registrant.</p>
<p id="p-0059" num="0058">A configuration of a control system of managing combined-image output according to this exemplary embodiment is described with reference to <figref idref="DRAWINGS">FIG. 2</figref>.</p>
<p id="p-0060" num="0059">In <figref idref="DRAWINGS">FIG. 2</figref>, a document management unit <b>101</b> manages document management information <b>101</b><i>d </i>(illustrated in <figref idref="DRAWINGS">FIG. 8</figref>) stored (registered) in the storage unit <b>114</b> and works in the above-described processing 2 and 3.</p>
<p id="p-0061" num="0060">The output-configuration-information management unit <b>105</b> manages output configuration information <b>105</b><i>d </i>of the combined image (illustrated in <figref idref="DRAWINGS">FIGS. 6 and 12</figref>) and works through the processing steps 1 through 3.</p>
<p id="p-0062" num="0061">When the registration of the output configuration information of the combined image is received, the output-configuration-information management unit <b>105</b> exchanges data with the display unit <b>121</b> serving as an operation input unit of an administrator of the combined-image output and with the document management unit <b>101</b> and a document-information registration unit <b>103</b> to input information on image output files (documents) to be combined.</p>
<p id="p-0063" num="0062">The output-configuration-information management unit <b>105</b> also exchanges data with an output determination unit <b>112</b> of a print unit <b>111</b> that determines whether the output configuration information of the combined-image output data received can be registered and with a user management unit <b>107</b> that reports to a registrant about an image output file preventing the combined image from being outputted.</p>
<p id="p-0064" num="0063">The user management unit <b>107</b> manages user information <b>107</b><i>d </i>(illustrated in <figref idref="DRAWINGS">FIG. 10</figref>) and works in the above-described processing 3. To report to a registrant an image output file preventing the combined image from being outputted, the user management unit <b>107</b> exchanges data with the output determination unit <b>112</b> and a mail transmission unit <b>109</b> that reports to the registrant via e-mail.</p>
<p id="p-0065" num="0064">The mail transmission unit <b>109</b> sends an e-mail to report the disapproval of the output (registration) to a registrant having an address in the external device <b>25</b> via the LAN controller <b>16</b>.</p>
<p id="p-0066" num="0065">[Modes of Managing Documents Constituting Combined Image]</p>
<p id="p-0067" num="0066">Next, modes of managing image output files for combined-image output are described taking several examples. It is to be noted that image output file is referred to as &#x201c;document&#x201d; hereinafter.</p>
<p id="p-0068" num="0067"><figref idref="DRAWINGS">FIG. 3</figref> is an illustration showing a concept of mode of managing documents for combined-image output.</p>
<p id="p-0069" num="0068">As illustrated in <figref idref="DRAWINGS">FIG. 3</figref>, documents created by users A, B, and C are registered as documents for combined-image output, stored on the storage unit <b>114</b> of the control system of the MFP in association with file IDs (e.g., file IDs 1, 2, and 3 for stored documents in <figref idref="DRAWINGS">FIG. 3</figref>), and managed by the document management unit <b>101</b>. In addition to the contents of documents, such documents are stored in association with data representing output conditions, such as image size and the number of pages, designated by the registrant.</p>
<p id="p-0070" num="0069">The registration of documents by the registrant is performed in a manner in which the registrant and the MFP can recognize the documents to be registered as documents constituting a combined image. That is, the registrant recognizes the document to be registered as one of the documents constituting combined-image output to perform the registration. Receiving the registration, the MFP assigns both an output document ID of the single combined (integrated) image and a user ID to each document. To perform the registration process, output configuration information of combined-image output data needs to be created in advance.</p>
<p id="p-0071" num="0070">Such output configuration information of combined-image output data is created by a creator of a combined image (e.g., user D in <figref idref="DRAWINGS">FIG. 3</figref>) in advance as information that defines a configuration of the combined-image output, and managed by the output-configuration-information management unit <b>105</b>. Accordingly, when a registrant registers a previously-created document, the output configuration information created by the creator of the combined image is already prepared at non-registration state together with other unregistered documents. In <figref idref="DRAWINGS">FIG. 3</figref>, the creators of the registered documents (users A, B, and C), completion status of output configuration information (e.g., incomplete), print mode defining output conditions (print copies: 2 copies, post-processing: stapling), and registered information (file ID: 1) are managed as output configuration information and used in the registration process by the registrant.</p>
<p id="p-0072" num="0071">If the creators (registrant) shown in the output configuration information managed finishes the registration process and the output configuration information turns to be completed, that is, it is determined that the output configuration information can be registered, the combined-image output data is created and image output (e.g., printing in <figref idref="DRAWINGS">FIG. 3</figref>) is performed.</p>
<p id="p-0073" num="0072">[Creation of Output Configuration Information (Before Document Registration)]</p>
<p id="p-0074" num="0073">Next, a procedure of creating output configuration information that defines a configuration of combined-image output is described below.</p>
<p id="p-0075" num="0074">As described in the processing 1, in the control system <b>100</b> illustrated in <figref idref="DRAWINGS">FIG. 2</figref> that manages combined-image output, output configuration information of combined-image output data is created and the output configuration information created is registered before the registrant registers documents. In the control system <b>100</b> according to this exemplary embodiment, output configuration information is created according to an instruction of the creator of the combined image (i.e., the supervisor of the output document) issued using the operation display panel <b>20</b> (the display unit <b>121</b>).</p>
<p id="p-0076" num="0075">The creation process of output configuration information is described with reference to <figref idref="DRAWINGS">FIGS. 4 and 5</figref>.</p>
<p id="p-0077" num="0076"><figref idref="DRAWINGS">FIG. 4</figref> is a diagram illustrating input screens A, B, and C of the display unit <b>121</b> sequentially displayed in creating output configuration information of a combined image.</p>
<p id="p-0078" num="0077"><figref idref="DRAWINGS">FIG. 5</figref> is a sequence diagram illustrating a procedure of controlling the creation of output configuration information performed by the control system <b>100</b> that manages combined-image output.</p>
<p id="p-0079" num="0078">In the control sequence illustrated in <figref idref="DRAWINGS">FIG. 5</figref>, at S<b>101</b> the administrator of an output document (hereinafter simply &#x201c;administrator&#x201d;) selects and presses an application (function) button relating to output configuration information from among application (function) selection buttons displayed on the input screens of the display unit <b>121</b>. On the initial screen &#x201c;A&#x201d; illustrated in <figref idref="DRAWINGS">FIG. 4</figref>, for example, a collection button <b>212</b> is displayed as the button for selecting an application (function) relating to output configuration information. The term &#x201c;collection&#x201d; used herein means that the application collects a plurality of created documents and combines the documents into a single combined image. When the collection button <b>212</b> is selected to create output configuration information, the administrator (e.g., user D) may be requested to input the name used as management data.</p>
<p id="p-0080" num="0079">When the display unit <b>121</b> detects that the collection button <b>212</b> is pressed, the display unit <b>121</b> transmits to the output-configuration-information management unit <b>105</b> a request for acquiring listed data of output configuration information (of collected documents) managed in output configuration information <b>105</b><i>d. </i></p>
<p id="p-0081" num="0080">The display unit <b>121</b> receives the listed data of the output configuration information <b>105</b><i>d </i>returned from the output-configuration-information management unit <b>105</b> in response to the acquisition request sent at S<b>102</b>, and in accordance with the listed data, at S<b>103</b> switches the input screen A illustrated in <figref idref="DRAWINGS">FIG. 4</figref> to the input screen B that displays an output-configuration-information (output-document) list <b>213</b>.</p>
<p id="p-0082" num="0081">In <figref idref="DRAWINGS">FIG. 4</figref>, the input screen B displays the list <b>213</b> at which output configuration information is not registered yet. After the registration, the plurality of output documents is displayed to be distinguishable by IDs (see output configuration information illustrated in <figref idref="DRAWINGS">FIG. 6</figref>).</p>
<p id="p-0083" num="0082">As illustrated in the input screen B of <figref idref="DRAWINGS">FIG. 4</figref>, a new registration button <b>214</b> is provided on the screen that displays the list <b>213</b>. When the display unit <b>121</b> detects that the button <b>214</b> is pressed by the administrator, at S<b>104</b> the display unit <b>121</b> switches the input screen B to the input screen C for registering the output configuration information of the combined image.</p>
<p id="p-0084" num="0083">The input screen C includes, e.g., a user registration button <b>215</b> and a print-mode setting button <b>216</b> as buttons for creating output configuration information of a combined image, and is used when the administrator of the combined image inputs such information. In this exemplary embodiment, output document IDs for distinguishing a plurality of output documents are automatically numbered in order of, e.g., 1, 2, 3, and so on by the MFP. Accordingly, buttons for allocating such output document IDs are not provided on the input screens. However, it is to be noted that such buttons may be added so that the user (administrator) can input given codes as the output document IDs.</p>
<p id="p-0085" num="0084">When at S<b>105</b> the display unit <b>121</b> detects that the user registration button <b>215</b> of the input screen C is pressed, at S<b>106</b> the display unit <b>121</b> reports to the output-configuration-information management unit <b>105</b> that the user registration button <b>215</b> is pressed as the new registration.</p>
<p id="p-0086" num="0085">When the output-configuration-information management unit <b>105</b> receives the report, the output-configuration-information management unit <b>105</b> recognizes the report as a request for acquiring user information <b>107</b><i>d </i>at the new registration, i.e., an acquisition request for all user information. However, since the user information <b>107</b> is not managed under the output-configuration-information management unit <b>105</b>, the output-configuration-information management unit <b>105</b> sends to the user management unit <b>107</b> a request to acquire the list data of all user information from the user information <b>107</b><i>d </i>managed by the user management unit <b>107</b>.</p>
<p id="p-0087" num="0086">The display unit <b>121</b> receives the list data of all user information of the output configuration information acquired via the output-configuration-information management unit <b>105</b> in response to the acquisition request at S<b>106</b>, and at S<b>108</b> displays on the screen a list of users in accordance with the list data.</p>
<p id="p-0088" num="0087">Next, from the list of users displayed on the screen of the display unit <b>121</b>, at S<b>109</b> the administrator selects a user as a creator of each document constituting a combined image of which output configuration information is to be created.</p>
<p id="p-0089" num="0088">When the display unit <b>121</b> detects the user selection by the administrator, at S<b>110</b> the display unit <b>121</b> sends to the output-configuration-information management unit <b>105</b> a request to write information of the selected user into the output configuration information of the combined image in process of creation.</p>
<p id="p-0090" num="0089">In parallel with the user selection at S<b>109</b>, the administrator sets a print mode as an output condition of the combined image subjected to the new registration.</p>
<p id="p-0091" num="0090">In the setting procedure, when at S<b>111</b> a print-mode setting button <b>126</b> of the input screen C is pressed by the administrator, the display unit <b>121</b> detects that the print-mode setting button <b>126</b> has been pressed, and at S<b>112</b> sends to the print unit <b>111</b> a request to acquire information on a print mode available for the output.</p>
<p id="p-0092" num="0091">When the print unit <b>111</b> receives the request and reports to the display unit <b>121</b> the information on the print mode available, at S<b>113</b> the display unit <b>121</b> displays a setting input screen so that the administrator cannot set a print mode unavailable as the output condition in accordance with the reported information.</p>
<p id="p-0093" num="0092">At S<b>114</b>, the administrator inputs setting of a print mode through the setting input screen displayed on the display unit <b>121</b>.</p>
<p id="p-0094" num="0093">When the display unit <b>121</b> detects the input of the print mode, the display unit <b>121</b> reports to the output-configuration-information management unit <b>105</b> the information on the print mode inputted at S<b>114</b>.</p>
<p id="p-0095" num="0094">When the output-configuration-information management unit <b>105</b> receives the information reported, the output-configuration-information management unit <b>105</b> writes the print mode inputted at S<b>114</b> as a print mode of the output configuration information of the combined image under preparation. In case the setting may be changed, at S<b>116</b> the output-configuration-information management unit <b>105</b> also sets the print mode inputted at S<b>114</b> to the print unit <b>111</b>.</p>
<p id="p-0096" num="0095">The above-described sequence is the procedure of creating output configuration information.</p>
<p id="p-0097" num="0096">&#x201c;Output Configuration Information (1)&#x201d;</p>
<p id="p-0098" num="0097"><figref idref="DRAWINGS">FIG. 6</figref> is a table showing an example of output configuration information <b>105</b><i>d </i>managed under the output-configuration-information management unit <b>105</b>.</p>
<p id="p-0099" num="0098">The output configuration information <b>105</b><i>d </i>illustrated in <figref idref="DRAWINGS">FIG. 6</figref> includes data on a plurality of items, such as output-document administrator and registered user list as management information of document and registered document information and print mode as document information, for each combined image in association with each other.</p>
<p id="p-0100" num="0099">In the output configuration information <b>105</b><i>d</i>, the combined image is distinguished by a specific output-document ID. In this exemplary embodiment, when an administrator of an output document registers new output configuration information (see <figref idref="DRAWINGS">FIGS. 4 and 5</figref>), a new number is automatically allocated to an output document as the output document ID.</p>
<p id="p-0101" num="0100">Regarding the administrator name of the output document, when the administrator registers new output configuration information (see <figref idref="DRAWINGS">FIGS. 4 and 5</figref>), for example, a password previously set at the registration of the administrator may be inputted to obtain the name (user ID) of the administrator written in the output configuration information <b>105</b><i>d. </i></p>
<p id="p-0102" num="0101">Regarding the registered user list, a user ID attached to the request (at S<b>110</b>) for registering a user selected by the administrator at S<b>109</b> is obtained, and the output-configuration-information management unit <b>105</b> writes the user ID obtained to the registered user list of the output configuration information <b>105</b><i>d. </i></p>
<p id="p-0103" num="0102">Regarding the registered document information, file IDs attached when the creator (registrant) registers created documents constituting a combined image are obtained.</p>
<p id="p-0104" num="0103">Regarding the print mode, a print mode set at S<b>114</b> by the administrator as the output condition of the combined image newly registered is obtained, and the output-configuration-information management unit <b>105</b> writes the print mode obtained to the output configuration information <b>105</b><i>d. </i></p>
<p id="p-0105" num="0104">[Management of Combined-Image Output in Document Registration]</p>
<p id="p-0106" num="0105">Next, a description is given of management of combined-image output in storing (registering) separately-created documents used for the combined-image output.</p>
<p id="p-0107" num="0106">As described in the processing 2 and 3, when storing (registering) separately-created documents, the control system <b>100</b> illustrated in <figref idref="DRAWINGS">FIG. 2</figref> that manages combined-image output determines whether the combined image can be outputted (printed), i.e., whether output configuration information of the combined image in which the documents are to be combined can be registered, identifies a causal document(s) that prevents the combined image from being outputted, and reports to the registrant (creator) of the causal document(s) that the causal document(s) prevents the combined image from being outputted. In this exemplary embodiment, the control system <b>100</b> performs processing involving the management of the combined-image output in response to a registration procedure in which creator(s) of separate documents for the combined image perform from an external device <b>25</b>, such as a PC or a server, via the LAN controller <b>16</b>.</p>
<p id="p-0108" num="0107"><figref idref="DRAWINGS">FIG. 7</figref> is a sequence diagram illustrating a control processing sequence performed at the registration of documents by the control system <b>100</b> that manages combined-image output.</p>
<p id="p-0109" num="0108">Below, a processing procedure of managing combined-image output at the registration of documents is described with reference to <figref idref="DRAWINGS">FIG. 7</figref>.</p>
<p id="p-0110" num="0109">In the control sequence of <figref idref="DRAWINGS">FIG. 7</figref>, when a document for combined-image output is stored in a server, at S<b>201</b> the creator of the document (hereinafter referred to as simply &#x201c;creator&#x201d;) instructs the server to start the registration procedure of the document for the combined-image output. At this time, as information required for the registration procedure, an output document ID that identifies the combined image and a user ID of the creator contained in output configuration information (see <figref idref="DRAWINGS">FIG. 6</figref>) previously created by the administrator of the output document are reported to the server.</p>
<p id="p-0111" num="0110">In accordance with the instruction of the creator, at S<b>202</b> the server sends to the storage unit <b>114</b> of the MFP a request for registering a document file along with the output document ID of the combined image and the user ID of the creator to start the registration process.</p>
<p id="p-0112" num="0111">When the storage unit <b>114</b> receives the registration request from the server, at S<b>203</b> the storage unit <b>114</b> sends to the document management unit <b>101</b> a request for starting the registration procedure of the document file. At this time, the storage unit <b>114</b> sends to the document management unit <b>101</b> the user ID of the creator attached to the document file to be registered.</p>
<p id="p-0113" num="0112">After the registration process is started, at S<b>204</b> the storage unit <b>114</b> receives image data of the document file to be registered from the server and at S<b>205</b> sends to the document management unit <b>101</b> a request for managing the image data. The document management unit <b>101</b> associates the user ID of the creator with the image data, allocates a file-ID number to the image date, and creates document management information (i.e., registers the document).</p>
<p id="p-0114" num="0113">&#x201c;Document Management Information&#x201d;</p>
<p id="p-0115" num="0114"><figref idref="DRAWINGS">FIG. 8</figref> is a table showing an example of document management information <b>101</b><i>d </i>managed under the document management unit <b>101</b>.</p>
<p id="p-0116" num="0115">In the document management information <b>101</b><i>d </i>illustrated in <figref idref="DRAWINGS">FIG. 8</figref>, the user ID of the creator of the document is associated with the image data constituting the file for each of the registered images that are distinguished by the file IDs. Image data illustrated in <figref idref="DRAWINGS">FIG. 8</figref> is data managed in unit of page, and when a file contains a plurality of pages, the file contains a plurality of pieces of image data. For example, a file ID 3 contains two image pieces: Img7 and Img8.</p>
<p id="p-0117" num="0116">Regarding the relationship between the document management information <b>101</b><i>d </i>and the output configuration information <b>105</b><i>d </i>of the combined image illustrated in <figref idref="DRAWINGS">FIG. 6</figref>, in the registration document information of the output configuration information <b>105</b><i>d</i>, all the documents to be combined are shown by the file IDs of the document management information <b>101</b><i>d. </i></p>
<p id="p-0118" num="0117">In the control sequence illustrated in <figref idref="DRAWINGS">FIG. 7</figref>, when the registration of the document file requested from the server is finished at S<b>206</b>, at S<b>207</b> the storage unit <b>114</b> sends to the document information registration unit <b>103</b> the output document ID of the combined image (e.g., the output document ID: 1 in <figref idref="DRAWINGS">FIG. 6</figref>) and the user ID (e.g., the user ID: 001 in the registered user list illustrated in <figref idref="DRAWINGS">FIG. 6</figref>) and requests the output-configuration-information management unit <b>105</b> to register the document.</p>
<p id="p-0119" num="0118">When the document information registration unit <b>103</b> receives the registration request, the document information registration unit <b>103</b> sends to the document management unit <b>101</b> a request for searching for the document using the user ID (001).</p>
<p id="p-0120" num="0119">When the document management unit <b>101</b> receives the search request, the document management unit <b>101</b> searches the document management information <b>101</b><i>d </i>(see <figref idref="DRAWINGS">FIG. 8</figref>) for the user ID (001), obtains the file ID (1) associated with the user ID (001) as a search result, and at S<b>209</b> sends the file ID (1) to the document information registration unit <b>103</b>.</p>
<p id="p-0121" num="0120">At S<b>210</b>, the document information registration unit <b>103</b> identifies a document file to be registered in accordance with the received file ID (1), sends the file ID (1) along with the output file ID (1) and the user ID (001) to the output-configuration-information management unit <b>105</b>, and requests the output-configuration-information management unit <b>105</b> to register the document file to the output configuration information <b>105</b><i>d. </i></p>
<p id="p-0122" num="0121">[Determination Whether a Combined Image Can Be Outputted]</p>
<p id="p-0123" num="0122">When the output-configuration-information management unit <b>105</b> receives the request for registering the document file (file ID: 1), at S<b>211</b> the output-configuration-information management unit <b>105</b> determines whether the output condition of the output configuration information is satisfied. If the output condition is satisfied, the output-configuration-information management unit <b>105</b> registers the document file to the output configuration information <b>105</b><i>d</i>. By contrast, if the output condition is not satisfied, the output-configuration-information management unit <b>105</b> does not register the document file to the output configuration information <b>105</b><i>d. </i></p>
<p id="p-0124" num="0123">In this exemplary embodiment, the output-configuration-information management unit <b>105</b> and the output determination unit <b>112</b> of the print unit <b>111</b> determine at two steps whether combined-image output can be performed. At S<b>211</b> (described below with reference to steps performed by illustrated in <figref idref="DRAWINGS">FIG. 9</figref>), the output-configuration-information management unit <b>105</b> determines whether a document file to be registered meets formal output conditions (e.g., the number of combined documents and the user ID of the document) of the output configuration information that defines a configuration of the combined image, i.e., whether the output document is established. Meanwhile, at S<b>222</b> (described below with reference to steps performed by illustrated in <figref idref="DRAWINGS">FIG. 11</figref>), the output determination unit <b>112</b> determines whether a document file to be registered meets output conditions relating to the contents of image output (e.g., the number of copies and print mode including post processing).</p>
<p id="p-0125" num="0124">[Establishment of Output Document]</p>
<p id="p-0126" num="0125">Here, a determination process performed at S<b>211</b> by the output-configuration-information management unit <b>105</b> is further described with reference to <figref idref="DRAWINGS">FIG. 9</figref>.</p>
<p id="p-0127" num="0126">When the output-configuration-information management unit <b>105</b> receives the request for registering the document file (e.g., file ID: 1) subjected to registration to the output configuration information <b>105</b><i>d</i>, at S<b>301</b> the output-configuration-information management unit <b>105</b> determines whether the output document ID (:1) received from the document information registration unit <b>103</b> is found in the output configuration information (illustrated in <figref idref="DRAWINGS">FIG. 6</figref>). Since the output document ID indicates that the corresponding document file (file ID: 1) is a component of the combined image of the output document ID (:1), the presence of the output document ID is a requirement for establishment of the output document.</p>
<p id="p-0128" num="0127">If the output document ID (:1) is found in the output configuration information <b>105</b><i>d </i>(YES at S<b>301</b>), at S<b>302</b> the output-configuration-information management unit <b>105</b> confirms the consistency of user ID which is a subsequent requirement for establishment of the output document, in other words, determines whether the user ID (:001) received from the document information registration unit <b>103</b> is found in the output configuration information <b>105</b><i>d</i>. The presence/absence of the user ID is determined based on whether the user ID is found in the registered used list of the target output document (ID: 1). For example, in <figref idref="DRAWINGS">FIG. 6</figref>, user IDs 001, 002, and 003 are found in the registered user list.</p>
<p id="p-0129" num="0128">Here, if the user ID (:001) is found in the output configuration information <b>105</b><i>d </i>(YES at S<b>302</b>), the requirements for establishment of the output document at S<b>301</b> and S<b>302</b> are met and at S<b>303</b> the output-configuration-information management unit <b>105</b> registers the target output document (ID: 1) to the output configuration information <b>105</b><i>d. </i></p>
<p id="p-0130" num="0129">By contrast, if the output document ID (:1) is not found in the output configuration information <b>105</b><i>d </i>(NO at S<b>301</b>) or the user ID (:001) is not found in the registered user list of the output document (ID: 1) of the output configuration information <b>105</b><i>d </i>(NO at S<b>302</b>), at S<b>307</b> the output-configuration-information management unit <b>105</b> stops the registration of the target output document (ID: 1), proceeds to a sequence (of S<b>241</b> to S<b>245</b> of <figref idref="DRAWINGS">FIG. 7</figref> described below) for reporting to the creator of the target output document (ID: 1) that the target output document is not registered, and exits from the process flow.</p>
<p id="p-0131" num="0130">After the target output document is registered at S<b>303</b>, in order to decide whether a print request is to be issued in accordance with the output configuration registered, at S<b>304</b> the output-configuration-information management unit <b>105</b> compares the number of documents listed in the registered document information of the output configuration information <b>105</b><i>d </i>and the number of users in the registered user list and determines whether the number of documents is equal to the number of users.</p>
<p id="p-0132" num="0131">If the number of documents is equal to the number of users (YES at S<b>304</b>), the process proceeds to a sequence (of S<b>221</b> to S<b>225</b> in <figref idref="DRAWINGS">FIG. 7</figref> described below) in which the target output document can be printed and exits from the process flow. For example, assuming that, after user A (001) and user B (002) register documents, user C resisters a document, both the number of users in the registered user list and the number of documents in the registered document information are three, and the process proceeds to the sequence in which printing is executable.</p>
<p id="p-0133" num="0132">By contrast, if the number of documents is not equal to the number of users (NO at S<b>304</b>), the output-configuration-information management unit <b>105</b> determines that there is still a file to be registered and exits from the processing flow without doing nothing. In such a case, an unregistered document is registered according to the sequence illustrated in <figref idref="DRAWINGS">FIG. 7</figref>. Meanwhile, the output document cannot be executed until the output document is established.</p>
<p id="p-0134" num="0133">[Establishment of Output Condition]</p>
<p id="p-0135" num="0134">If after the process flow illustrated in <figref idref="DRAWINGS">FIG. 9</figref> it is determined that the output document is established and the process proceeds to the sequence in which printing the output document is executable, further processing is performed according to a control sequence of S<b>221</b> to S<b>232</b> (in an upper shaded area) illustrated in <figref idref="DRAWINGS">FIG. 7</figref>.</p>
<p id="p-0136" num="0135">For the control sequence of <figref idref="DRAWINGS">FIG. 7</figref>, at S<b>221</b> the output-configuration-information management unit <b>105</b> sends to the print unit <b>111</b> the output document ID (:1) registered in the output configuration information <b>105</b><i>d </i>and the print mode containing print conditions (e.g., post-processing: stapling, the number of prints: 2 copies in a setting example of <figref idref="DRAWINGS">FIG. 6</figref>) and requests printing (image output).</p>
<p id="p-0137" num="0136">When the print unit <b>111</b> receives the print request, at S<b>222</b> the print unit <b>111</b> instructs the output determination unit <b>112</b> of the print unit <b>111</b> to determine whether the combined image is to be outputted.</p>
<p id="p-0138" num="0137">In the determination whether the combined image can be outputted, registered documents constituting a combined image (e.g., three registered documents of file IDs 1, 2, and 3 associated with registered user IDs 001, 002, and 003 in the setting example illustrated in <figref idref="DRAWINGS">FIG. 6</figref>) are determined in turn on whether the combined image can be outputted based on the following output conditions 1 to 3.</p>
<p id="p-0139" num="0138">1) Output conditions designated in output configuration information previously defined for the combined-image output (e.g., &#x201c;stapling, 2 copies&#x201d; in the print mode illustrated in <figref idref="DRAWINGS">FIG. 6</figref>).</p>
<p id="p-0140" num="0139">2) Output conditions of one document of the registered documents subjected to the current determination.</p>
<p id="p-0141" num="0140">3) Output conditions of the output configuration information added relating to registered documents, i.e., documents already determined that outputting (printing) is executable and registered to the output configuration information <b>105</b><i>d. </i></p>
<p id="p-0142" num="0141">In other words, it is determined whether, when the output conditions are incorporated to the output configuration information, there is no conflict between the above-described print modes (output conditions) and a print engine (plotter) of the MFP and an output section, such as a sheet feed unit, are normally operated.</p>
<p id="p-0143" num="0142">To perform the above-described determination, at S<b>223</b> the output determination unit <b>112</b> requests the document management unit <b>101</b> to search for, e.g., image parameters added to the registered documents as output condition using the file IDs 1, 2, and 3 of the registered documents.</p>
<p id="p-0144" num="0143">When the document management unit <b>101</b> receives the search request, at S<b>224</b> the document management unit <b>101</b> searches the document management information <b>101</b><i>d </i>(see <figref idref="DRAWINGS">FIG. 8</figref>) and obtains, as a search result, image parameters or other data added to the respective registered documents of the file IDs 1, 2, and 3 and sends such data to the output determination unit <b>112</b>.</p>
<p id="p-0145" num="0144">Next, a determination process of the output determination unit <b>112</b> for determining whether a combined image can be outputted is described with reference to steps performed by illustrated in <figref idref="DRAWINGS">FIG. 11</figref>.</p>
<p id="p-0146" num="0145">The output determination unit <b>112</b> deals one by one with the file IDs (1, 2, and 3) of the documents subjected to the determination. At S<b>401</b>, the output determination unit <b>112</b> acquires image parameters or other data of one target document subjected to the determination from data indicating a print mode of each registered document obtained as the search result at S<b>224</b>.</p>
<p id="p-0147" num="0146">Next, at S<b>402</b> the output determination unit <b>112</b> determines whether outputting with the print mode (e.g., image parameters) set to the target document is executable.</p>
<p id="p-0148" num="0147">When a first document of the target documents is determined, the output determination unit <b>112</b> determines whether there is a conflict between image parameters (e.g., image size and the number of pages) for the target document acquired from the document management unit <b>101</b> and the print mode of output configuration information previously designated by the administrator. If there is no conflict, the output determination unit <b>112</b> determines that the document can be outputted.</p>
<p id="p-0149" num="0148">If a second or later document is determined after one or more documents have already determined as executable, the output determination unit <b>112</b> determines whether there is a conflict between image parameters (e.g., image size and the number of pages) for the target document acquired from the document management unit <b>101</b> and the print modes added to the output configuration information in connection with the registered documents (which have already determined as outputtable and registered in the output configuration information <b>105</b><i>d</i>) or whether the print engine (plotter), the sheet feed unit, and/or another output unit of the MFP normally operate. Based on the result of determination, the output determination unit <b>112</b> determines whether the target document can be outputted.</p>
<p id="p-0150" num="0149">For example, when determination process is performed in order of users A, B, and C, first, it is determined whether a document file of user A can be printed with print conditions (stapling and two copies) previously designated in the output configuration information. Here, if the file of user A can be printed with the print conditions (stapling and two copies), the output determination unit <b>112</b> proceeds to the next step and determines a file of user B. In determining whether the file of user B can be outputted, since the print condition of the file of user A has been added to the output configuration information <b>105</b><i>d</i>, it is necessary to determine the print condition of the file of user B along with the print condition of the file of user A. For example, if the file of user A contains an A4-size image and the file of user B contains an A3-size image, both the files can be printed with the print condition of stapling and two copies. Accordingly, the output determination unit <b>112</b> determines that the files of users A and B can be outputted and proceeds to the following determination of a file of user C. However, if the file of user C is set to A5 size, the A4-size file of user A, the A3-size file of user B, and the A5-size file of user C cannot be printed with the condition of stapling, and the output determination unit <b>112</b> determines that these three files cannot be outputted.</p>
<p id="p-0151" num="0150">In the process flow illustrated in <figref idref="DRAWINGS">FIG. 11</figref>, if it is determined that one file of the target documents can be outputted (YES at S<b>402</b>), at S<b>403</b> the output determination unit <b>112</b> confirms whether the file is the last document of the target documents.</p>
<p id="p-0152" num="0151">Here, if the file is not the last document of the target documents (NO at S<b>403</b>), the output determination unit <b>112</b> proceeds to the determination of the next file of the target documents and repeats the output determination process from S<b>401</b>.</p>
<p id="p-0153" num="0152">The determination process loop is repeated on all files (ID: 1, 2, and 3) of the target documents. If it is determined that all files can be outputted (YES at S<b>403</b>), at S<b>405</b> the process exits from the processing flow and proceeds to a sequence for printing.</p>
<p id="p-0154" num="0153">The printing sequence is performed at S<b>225</b> (i.e., an unshaded section titled &#x201c;if outputting is executable&#x201d; in the upper shaded area) illustrated in <figref idref="DRAWINGS">FIG. 7</figref>. At S<b>225</b>, printing is performed according to the output configuration information <b>105</b><i>d </i>in which the print conditions of all files (ID: 1, 2, and 3) to be combined have been added, and the process ends.</p>
<p id="p-0155" num="0154">At S<b>402</b> of determining whether outputting with a print mode (e.g., image parameters) designated for the target document is executable, if it is determined that outputting with the print mode is unexecutable (NO at S<b>402</b>), at S<b>407</b> the output determination unit <b>112</b> indentifies a document preventing the outputting, cancels the registration of the target document, proceeds to a cancellation report sequence for reporting to the registrant (creator) that the target document has been cancelled, and exits from the process flow.</p>
<p id="p-0156" num="0155">The sequence of cancelling a document registration and reporting cancellation of the registration is performed at S<b>226</b> to S<b>232</b> (i.e., an unshaded section titled &#x201c;if outputting is unexecutable&#x201d; in the upper shaded area) illustrated in <figref idref="DRAWINGS">FIG. 7</figref>.</p>
<p id="p-0157" num="0156">In the sequence of &#x201c;if the combined image cannot be outputted&#x201d;, the output determination unit <b>112</b> identifies a causal document that prevents the combined image from being outputted. The causal document is not limited to the target document subjected to the determination process (see a section of &#x201c;Identification of cause that prevents combined-image output&#x201d; described below).</p>
<p id="p-0158" num="0157">The output determination unit <b>112</b> cancels the registration of the document identified as the cause that prevents combined-image output, and reports the cancellation to the registrant of the document. In such a case, as the causal document is not limited to the target document subjected to the current processing, a plurality of registered documents having been already determined needs to be cancelled.</p>
<p id="p-0159" num="0158">Accordingly, at S<b>226</b> the output determination unit <b>112</b> requests the document management unit <b>101</b> to search for a registrant of the registered document using a file ID of the registered document.</p>
<p id="p-0160" num="0159">When the document management unit <b>101</b> receives the search request, at S<b>227</b> the document management unit <b>101</b> searches the document management information <b>101</b><i>d </i>(see <figref idref="DRAWINGS">FIG. 8</figref>), obtains a user ID associated with the registered document of the file ID, and sends the user ID to the output determination unit <b>112</b>.</p>
<p id="p-0161" num="0160">To cancel the registration of the document identified as the causal document, at S<b>228</b> the output determination unit <b>112</b> sends to the document management unit <b>101</b> a request for cancelling the registration attached with the file ID of the causal document.</p>
<p id="p-0162" num="0161">When the document management unit <b>101</b> receives the cancellation request, the document management unit <b>101</b> cancels the registration of the document having the file ID designated in the cancellation request.</p>
<p id="p-0163" num="0162">Next, the output determination unit <b>112</b> reports the cancellation of the registration to the registrant of the document. In this processing, the cancellation of the registration and a reason why combined-image output is unexecutable (see &#x201c;Identification of cause that prevents combined-image output&#x201d; described below) are reported to the creator of the causal document via a communication unit.</p>
<p id="p-0164" num="0163">At S<b>230</b>, the output determination unit <b>112</b> requests the user management unit <b>107</b> to search a mail address of the registrant.</p>
<p id="p-0165" num="0164">&#x201c;User Information&#x201d;</p>
<p id="p-0166" num="0165"><figref idref="DRAWINGS">FIG. 10</figref> is a table showing an example of user information <b>107</b><i>d </i>managed by the user management unit <b>107</b>.</p>
<p id="p-0167" num="0166">In the user information <b>107</b><i>d </i>illustrated in <figref idref="DRAWINGS">FIG. 10</figref>, user IDs (001, 002, 003, and 004) for identifying users are associated with user names and mail addresses.</p>
<p id="p-0168" num="0167">User information <b>107</b><i>d</i>, document management information (illustrated in <figref idref="DRAWINGS">FIG. 8</figref>), and output configuration information (illustrated in <figref idref="DRAWINGS">FIG. 6</figref>) are associated with one another via user IDs (i.e., data in the registered user list of the output configuration information).</p>
<p id="p-0169" num="0168">When the user management unit <b>107</b> receives the request of S<b>230</b>, at S<b>231</b> the user management unit <b>107</b> searches the user information <b>107</b><i>d </i>(illustrated in <figref idref="DRAWINGS">FIG. 10</figref>), obtains as a search result a mail address associated with a user ID searched, and sends the mail address to the output determination unit <b>112</b>.</p>
<p id="p-0170" num="0169">At S<b>232</b>, the output determination unit <b>112</b> requests the mail transmission unit <b>109</b> to send an email to the received mail address to report a reason of cancelling a registered document.</p>
<p id="p-0171" num="0170">Thus, it is determined that the output document has been established and the processing sequence for printing the output document is finished.</p>
<p id="p-0172" num="0171">In the process flow illustrated in <figref idref="DRAWINGS">FIG. 9</figref>, if the output document has not been established, in other words, the output document ID is not found in the output configuration information <b>105</b><i>d </i>(NO at S<b>301</b>) or the user ID is not found in the registered user list of the output configuration information <b>105</b><i>d </i>(NO at S<b>302</b>), the process proceeds to the following processing sequence described below.</p>
<p id="p-0173" num="0172">In such a case, a sequence of stopping the registration of an output document and reporting to a creator of the output document that the output document has not been registered is executed.</p>
<p id="p-0174" num="0173">In the sequence, at S<b>241</b> the output-configuration-information management unit <b>105</b> requests the document management unit <b>101</b> to search for a registrant of a registered document to be using a file ID of the registered document.</p>
<p id="p-0175" num="0174">When the document management unit <b>101</b> receives the search request, at S<b>242</b> the document management unit <b>101</b> searches the document management information <b>101</b><i>d </i>(see <figref idref="DRAWINGS">FIG. 8</figref>), obtains as a search result a user ID associated with the file ID of the registered document, and sends the user ID to the output-configuration-information management unit <b>105</b>.</p>
<p id="p-0176" num="0175">Next, the output-configuration-information management unit <b>105</b> reports to the registrant of the registered document that registration of the document has failed.</p>
<p id="p-0177" num="0176">Next, the output-configuration-information management unit <b>105</b> reports to the registrant of the registered document that registration of the document has failed. In this exemplary embodiment, such a report that a combined output document has not been established is sent to the registrant of the document by email.</p>
<p id="p-0178" num="0177">At S<b>243</b>, the output-configuration-information management unit <b>105</b> requests the user management unit <b>107</b> to search for a mail address of the registrant using the user ID of the registrant that is attached to the unregistered document and obtained at S<b>242</b>.</p>
<p id="p-0179" num="0178">When the user management unit <b>107</b> receives the search request, at S<b>244</b> the user management unit <b>107</b> searches the user information <b>107</b><i>d</i>, obtains as a search result a mail address associated with the user ID, and sends the mail address to the output-configuration-information management unit <b>105</b>.</p>
<p id="p-0180" num="0179">At S<b>245</b>, the output-configuration-information management unit <b>105</b> requests the mail transmission unit <b>109</b> to send an email to the received mail address to report that the document has not been registered. The mail transmission unit <b>109</b> sends the email to the registrant of the unregistered document.</p>
<p id="p-0181" num="0180">Thus, the processing sequence performed when document registration is stopped as an output document is not established is finished.</p>
<p id="p-0182" num="0181">In the above-described exemplary embodiment, when documents for combined-image output are registered, the registrant (creator) or administrator can confirm that the document registration does not meet a predetermined output condition of an output document for a combined image, i.e., the output document is not established, that there is a conflict between an output condition attached to each target document subjected to registration and an output condition set to the output document for the combined image (including conditions additionally registered to the output configuration information in association with a document(s) having already been registered, or that the print engine (plotter), the sheet feed unit, and another output unit do not normally operate with the output condition designated. The registrant (creator) or administrator can also take a measure to output the output document. Such a configuration makes the outputting process to the combined image easier, allowing a user to take full advantages of the combined-image output capability.</p>
<p id="p-0183" num="0182">Further, as described above, when a document already-registered is cancelled, cancellation of the registration of the document and a reason why it is determined that the document cannot be outputted are reported to a user (registrant) of the document, thus allowing the user to promptly modify the document.</p>
<p id="p-0184" num="0183">[Identification of Cause that Prevents Combined-Image Output]</p>
<p id="p-0185" num="0184">As described above, the output determination unit <b>112</b> determines whether documents to be registered for a combined image can be outputted, and identifies a causal document that prevents the combined image from being outputted.</p>
<p id="p-0186" num="0185">In the output determination, as illustrated in the processing flow of <figref idref="DRAWINGS">FIG. 11</figref>, if a conflict occurs between a print condition set to a target document subjected to the determination and a print condition (print mode) added to output configuration information in association with a document already registered, it is determined that the combined image cannot be outputted.</p>
<p id="p-0187" num="0186">In identifying a document that prevents combined-image output, if one of conflicting documents is cancelled, the unexecutable state is resolved. Therefore, if one of conflicting documents is identified as a causal document and the identified document is an unregistered document, the registration of the identified document is cancelled. Alternatively, if the identified document is an already-registered document, the registration of the identified document is deleted. Thus, the executable state of the output of registered documents is maintained.</p>
<p id="p-0188" num="0187">As one method of identifying such a document that prevents combined-image output, it is conceivable to identify a newly registered document, that is, a document currently subjected to the determination as a causal document that the combined image cannot be outputted.</p>
<p id="p-0189" num="0188">For example, as described above, in <figref idref="DRAWINGS">FIG. 3</figref>, users A, B, and C are the creators of documents and stapling is designated in the print mode. Here, it is assumed that a user E is another creator of a document of an A3-size image and the documents of the users A, B, and E are already registered before the user C registers a document of an A5-size image. In such a case, when the user C registers the document of the A5-size image, it is determined whether a combined image cannot be outputted since there is a conflict between the document of the user C and each of the documents of the users B and E (of A3-size images). In this case, when the first method of identifying a causal document is employed, the document of the user C the causal document is identified as the causal document.</p>
<p id="p-0190" num="0189">Thus, with the first method, a document currently subjected to new registration is identified as a causal document that prevents combined-image output and subjected to cancellation of the registration or other processing. Accordingly, processing is more simplified than when another conflicting document(s) is identified as the causal document. In other words, if another conflicting document(s) is identified as the causal document(s), the causal document(s) is reported to the creator(s) of the causal document(s) and it is necessary to wait for the creators' modification. By contrast, when the document currently registered is identified as the causal document, it is enough to respond to only an user currently accessing to the MFP, reducing the time required to finish registering information of all documents to output configuration information.</p>
<p id="p-0191" num="0190">As another method of identifying a causal document that prevents combined-image output, it is conceivable to identify, as the causal document, one of less pages of a already-registered document (or a set of already-registered documents) and a new entry document. For example, if the total number of pages of an already-registered document(s) to constitute a combined image is less than the number of pages of a new-entry document, the already-registered document(s) is identified as the causal document. By contrast, if the total number of pages of an already-registered document(s) is greater than the number of pages of a new-entry document, the new-entry document is identified as the causal document.</p>
<p id="p-0192" num="0191">For example, as described above, in <figref idref="DRAWINGS">FIG. 3</figref>, the users A, B, and C are the creators of documents and stapling is designated in the print mode. Here, it is assumed that the documents of the users A and B are already registered before the user C registers a document of an A5-size image of 2 pages. In such a case, when the user C registers the document, it is determined whether the combined image cannot be outputted since there is a conflict between the document of the user C and the document of the user B (of A3-size image and 5 pages). In such a case, when the second method of identifying a causal document is employed, the document of the user C (of 2 pages) less in the number of pages than the document of the user B (of 5 pages) is identified as the causal document.</p>
<p id="p-0193" num="0192">When all documents listed in output configuration information cannot be printed as a combined image, the above-described methods can reduce the number of responses to modify print condition to resolve the unprintable state, thus reducing the processing load.</p>
<p id="p-0194" num="0193">[Report to Administrator]</p>
<p id="p-0195" num="0194">As described in the preparation of output configuration information, an administrator defines an output configuration of a combined image before entering documents and creates output configuration information <b>105</b><i>d </i>to manage the output of the combined image. The administrator also confirms with the output configuration information <b>105</b><i>d </i>whether the combined image can be outputted in entering each of the documents.</p>
<p id="p-0196" num="0195">Accordingly, it is preferable for the administrator to learn not only a determination result of whether the combined image can be outputted but also a reason of the determination result, in particular, if it is determined that the combined image cannot be outputted.</p>
<p id="p-0197" num="0196">In this exemplary embodiment, as described in &#x201c;Identification of cause that prevents combined-image output&#x201d;, when an already-registered document(s) is identified as the causal document(s), the output determination unit <b>112</b> reports to the administrator of the combined image that the causal document is deleted from the documents to be registered.</p>
<p id="p-0198" num="0197">For example, as described above, in <figref idref="DRAWINGS">FIG. 3</figref>, the users A, B, and C are the creators of documents and stapling is designated in the print mode. Here, it is assumed that the documents of the users A and B are already registered before the user C registers a document of an A5-size image of 2 pages. In such a case, when the user C registers the document, it is determined whether the combined image cannot be outputted since there is a conflict between the document of the user C and the document of the user B (of A3-size image and 5 pages). Here, when the document of the user B is identified as the causal document, the output determination unit <b>112</b> reports to the user D, an administrator of the output document, that the combined image cannot be outputted because of the condition of stapling set on the document of the user B. The name (user ID) of the administrator of the output document is obtained in association with an output document ID in the output configuration information (see <figref idref="DRAWINGS">FIG. 6</figref>), and a mail address of the output-document administrator is obtained in association with the user ID in the user information (see <figref idref="DRAWINGS">FIG. 10</figref>).</p>
<p id="p-0199" num="0198">The procedure of reporting a causal document(s) subjected to deletion to the administrator of the output document is performed in a manner similar to the procedure of S<b>230</b> to S<b>203</b> in the sequence of <figref idref="DRAWINGS">FIG. 7</figref>.</p>
<p id="p-0200" num="0199">Thus, by reporting to the administrator of the output document a reason why the combined image cannot be outputted, the administrator can determine whether the format of each document is to be modified or whether the print mode of the output configuration information is to be modified.</p>
<p id="p-0201" num="0200">[Selection of Processing in Output Determination]</p>
<p id="p-0202" num="0201">As described in &#x201c;Identification of cause that prevents combined-image output&#x201d;, there is a plurality of different methods of identifying a cause that prevents combined-image output. If only one method is employed, an optimal performance may be not obtained.</p>
<p id="p-0203" num="0202">Hence, a plurality of methods of identifying a causal document that prevents combined-image output and a plurality of processing types relating to the respective methods are provided in a selectable manner to obtain an optimal performance.</p>
<p id="p-0204" num="0203">In this exemplary embodiment, a user operates the display unit <b>121</b> of the operation display panel <b>20</b> to select a desired processing type performed when the output determination unit <b>112</b> determines whether the combined image can be outputted.</p>
<p id="p-0205" num="0204">As the method of identifying a causal document, one of the following processing types is selected and executed in accordance with an instruction of the user.</p>
<p id="p-0206" num="0205">1) Identify an already-registered file for image output</p>
<p id="p-0207" num="0206">2) Identify a newly-entered file for image output</p>
<p id="p-0208" num="0207">3) Identify an already-registered file(s) for image output if the total number of pages of the already-registered file(s) for image output is less than the total number of pages of a newly-entered document, the already-registered document(s) is identified as the causal document. By contrast, if the total number of pages of an already-registered document(s) is greater than the total number of pages of a new-entry document, the new-entry document is identified as the causal document.</p>
<p id="p-0209" num="0208">When the output determination unit <b>112</b> performs one of the processing types 1 to 3, as with the reporting procedure of S<b>203</b> to S<b>232</b> in the sequence of <figref idref="DRAWINGS">FIG. 7</figref>, the deletion of the document subjected to registration and the reason why it is determined that the combined image cannot be outputted are reported to related users.</p>
<p id="p-0210" num="0209">In this regard, the administrator of the output document may be designated as a user who selects the processing type for output determination. Such a configuration allows the combined-image output to be managed in accordance with the intent of the administrator.</p>
<p id="p-0211" num="0210">As described above, in this exemplary embodiment, the processing type for output determination is selectable and the method of identifying a causal document that prevents combined-image output can be changed depending on the state in which documents are registered in output configuration information.</p>
<p id="p-0212" num="0211">[Handling of Unregistered Document]</p>
<p id="p-0213" num="0212">The output determination unit <b>112</b> also determines whether combined-image output is executable based on the presence/absence of a conflict between the print condition of an unregistered document and the print condition of an already-registered document(s). Accordingly, registration of the unregistered document is constrained by the print condition of the already-registered document(s). Predicting such a constraint reduces the load of processing, such as deletion of a causal document and report of the deletion to users, in the output determination performed by the output determination unit <b>112</b>.</p>
<p id="p-0214" num="0213">Hence, in this exemplary embodiment, the output-configuration-information management unit <b>105</b> manages a registration standard in consideration of the constraint imposed by a print condition set on a already-registered document.</p>
<p id="p-0215" num="0214">&#x201c;Output Configuration Information&#x201d;</p>
<p id="p-0216" num="0215"><figref idref="DRAWINGS">FIG. 12</figref> is a table showing an example of the output configuration information <b>105</b><i>d </i>managed by the output-configuration-information management unit <b>105</b>.</p>
<p id="p-0217" num="0216">The output configuration information <b>105</b><i>d </i>illustrated in <figref idref="DRAWINGS">FIG. 12</figref> is the same as the output configuration information illustrated in <figref idref="DRAWINGS">FIG. 6</figref> in document management information is listed for each combined image and different from the output configuration information illustrated in <figref idref="DRAWINGS">FIG. 6</figref> in that registration standard is listed. In <figref idref="DRAWINGS">FIG. 12</figref>, a print condition that can be set as a result of the constraint of the registered document is shown as information listed for the registration standard.</p>
<p id="p-0218" num="0217">For example, as described above, in <figref idref="DRAWINGS">FIG. 3</figref>, the users A, B, and C are the creators of documents to be registered and stapling is set in the print mode. If a document of A4-size image is first registered by the user A, the constraint that the image size is A3 or A4 is imposed on the following document to print under the condition of stapling set in the print mode. Accordingly, in addition to the image size A4, the image size A3 is added as a constraint on outputtable image size to the registration standard.</p>
<p id="p-0219" num="0218">Such a constrained condition is reported to a user creating an unregistered document in accordance with the output configuration information <b>105</b><i>d </i>managed by the output-configuration-information management unit <b>105</b>.</p>
<p id="p-0220" num="0219">For example, in the above-described example of <figref idref="DRAWINGS">FIG. 3</figref>, the image size of the document of the user A is A4 and the image size of the registration standard is A3. Accordingly, a message that the outputtable image size is A3 or A4 is reported to the users B and C who create unregistered documents.</p>
<p id="p-0221" num="0220">Such handling of unregistered documents allows a user who creates an unregistered document to modify the document in advance. Such a configuration allows the MFP to receive the document in an outputtable state, resulting in an increased processing speed and a reduced load of processing, such as cancelling a causal document that prevents combined-image output and reporting the cancellation to a user.</p>
<p id="p-0222" num="0221">Numerous additional modifications and variations are possible in light of the above teachings. It is therefore to be understood that within the scope of the appended claims, the disclosure of the present invention may be practiced otherwise than as specifically described herein.</p>
<p id="p-0223" num="0222">With some embodiments of the present invention having thus been described, it will be obvious that the same may be varied in many ways. Such variations are not to be regarded as a departure from the scope of the present invention, and all such modifications are intended to be included within the scope of the present invention.</p>
<p id="p-0224" num="0223">For example, elements and/or features of different exemplary embodiments may be combined with each other and/or substituted for each other within the scope of this disclosure and appended claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. An image processing apparatus comprising:
<claim-text>a file management unit that manages a plurality of files for image output;</claim-text>
<claim-text>a file registration unit that registers the files managed by the file management unit;</claim-text>
<claim-text>an output-configuration-information management unit that manages output configuration information in accordance with which the files managed by the file management unit are combined to create data for outputting a combined image;</claim-text>
<claim-text>an output-configuration-information registration unit that registers the output configuration information managed by the output-configuration-information management unit;</claim-text>
<claim-text>a data creation unit that creates the data for outputting the combined image in accordance with the output configuration information managed by the output-configuration-information management unit; and</claim-text>
<claim-text>an output determination unit that, when the file registration unit registers each of the files to the file management unit, determines whether the combined image can be outputted in accordance with an output condition of the output configuration information previously defined for outputting the combined image, an output condition designated for a file to be registered, and an output condition added to the output configuration information in connection with a file already registered,</claim-text>
<claim-text>wherein, before registering the files for outputting the combined image to the file management unit, the output-configuration-information management unit registers the predetermined output configuration information for the combined image and, when the output determination unit determines that each of the files for outputting the combined image can be outputted, adds an output condition of the file that can be outputted to the output configuration information of the combined image.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The image processing apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising a communication unit that communicates with a user registering the files,
<claim-text>wherein, when the output determination unit determines that the combined image cannot be outputted, the output determination unit identifies a causal one of the files that prevents the combined image from being outputted and the communication unit reports on the causal file to a user.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The image processing apparatus according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the file management unit manages information in which the files are associated with users registering the files, cancels registration of the causal file identified by the output determination unit, and obtains information on a user registering the causal file cancelled and, in accordance with the information obtained on the user, the communication unit reports to the user the cancellation of the causal file and a reason for the determination that the combined image cannot be outputted.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The image processing apparatus according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the output determination unit identifies a file being newly registered of the files as the causal file.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The image processing apparatus according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the output determination unit identifies the causal file based on a total number of pages therein.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The image processing apparatus according to <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein, if a total number of pages of a set of files already registered of the files for outputting the combined image is smaller than a total number of pages of a file being newly registered, the output determination unit identifies the set of files already registered as the causal file, and if a total number of pages of a set of files already registered of the files for outputting the combined image is greater than a total number of pages of a file being newly registered, the output determination unit identifies the file being newly registered as the causal file.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The image processing apparatus according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein, when it is determined that a file already registered cannot be outputted in combination with a file being newly registered, the output determination unit identifies the file already registered as the causal file,
<claim-text>wherein the output-configuration-information management unit manages information in which output configuration information is associated with a corresponding administrator who administrates the output configuration information and obtains information on an administrator of the output configuration information associated with the causal file identified by the output determination unit and,</claim-text>
<claim-text>wherein, in accordance with the information on the administrator obtained by the output-configuration-information management unit, the communication unit reports to the administrator of the causal file on a reason for the determination that the combined image cannot be outputted.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The image processing apparatus according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, further comprising an instruction input unit that receives an instruction of a processing condition with which the combined image is outputted,
<claim-text>wherein the output determination unit selectively performs a first determination process in which the output determination unit identifies a file already registered as the causal file, a second determination process in which the output determination unit identifies a file being newly registered as the causal file, and a third determination process based on the total number of pages in which, if a total number of pages of a set of files already registered of the files for outputting the combined image is smaller than a total number of pages of a file being newly registered, the output determination unit identifies the set of files already registered as the causal file, and if a total number of pages of a set of files already registered of the files for outputting the combined image is greater than a total number of pages of a file being newly registered, the output determination unit identifies the file being newly registered as the causal file, and</claim-text>
<claim-text>wherein, when the output determination unit performs one of the first determination process and the third determination process, the file management unit manages information in which the files are associated with users registering the files and obtains information on a user registering the file already registered identified as the causal file by the output determination unit and, in accordance with the information on the user obtained, the communication unit reports to the user on a reason of the determination that the combined image cannot be outputted.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The image processing apparatus according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising a communication unit that communicates with users registering files for image output,
<claim-text>wherein the file management unit manages first information in which files for outputting a combined image are associated with users registering the files and second information on a file already registered of the files and, in accordance with the first and second information, obtains third information on a user of an unregistered file, and</claim-text>
<claim-text>wherein, in accordance with the information on the user of the unregistered file obtained by the file management unit, the communication unit reports to the user an output condition of the output configuration information including an output condition added in connection with the file already registered managed by the output-configuration-information management unit.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. A method of managing image output for combining files to output a combined image, the method comprising:
<claim-text>registering, by a processor, predetermined output configuration information for the combined image before registering the files to a file management unit;</claim-text>
<claim-text>determining, by the processor, whether the combined image can be outputted in accordance with an output condition set for each of the files in registering each of the files to the file management unit, an output condition added to the output configuration information in the registering of the predetermined output configuration information, and an output condition added to the output configuration information in connection with registration of a file already registered;</claim-text>
<claim-text>if it is determined by the determining that the combined image can be outputted in registering a file of the files, adding an output condition of the file that can be outputted to the output configuration information for the combined image;</claim-text>
<claim-text>if it is determined by the determining that the combined image cannot be outputted in registering a file of the files, cancelling registration of the file that cannot be outputted; and</claim-text>
<claim-text>creating, by the processor, data for outputting the combined image in accordance with the output configuration information managed by the determining.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The method according to <claim-ref idref="CLM-00010">claim 10</claim-ref>, further comprising:
<claim-text>if it is determined by the determining that the combined image cannot be outputted in registering a file of the files, identifying the file as a causal file that prevents the combined image from being outputted; and</claim-text>
<claim-text>reporting on the causal file to a user registering the causal file.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The method according to <claim-ref idref="CLM-00011">claim 11</claim-ref>, further comprising:
<claim-text>managing information in which the files are associated with users registering the files;</claim-text>
<claim-text>canceling registration of the causal file identified by the identifying;</claim-text>
<claim-text>obtaining information on a user registering the causal file canceled; and</claim-text>
<claim-text>reporting, in accordance with the information obtained on the user, to the user on the cancellation of the causal file and a reason for the determination that the combined image cannot be outputted.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The method according to <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the identifying identifies a file being newly registered of the files as the causal file.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The method according to <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the identifying identifies the causal file based on a total number of pages therein.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The method according to <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein, if a total number of pages of a set of files already registered of the files for outputting the combined image is smaller than a total number of pages of a file being newly registered, the identifying identifies the set of files already registered as the causal file, and if a total number of pages of a set of files already registered of the files for outputting the combined image is greater than a total number of pages of a file being newly registered, the identifying identifies the file being newly registered as the causal file.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The image processing method according to <claim-ref idref="CLM-00011">claim 11</claim-ref>, further comprising:
<claim-text>if it is determined by the determining that a file already registered cannot be outputted in combination with a file being newly registered, identifying the file already registered as the causal file;</claim-text>
<claim-text>managing information in which output configuration information is associated with a corresponding administrator who administrates the output configuration information;</claim-text>
<claim-text>obtaining information on an administrator of the output configuration information associated with the causal file identified by the identifying; and</claim-text>
<claim-text>reporting in accordance with the information on the administrator obtained by the obtaining to the administrator of the causal file on a reason for the determination that the combined image cannot be outputted.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The image processing method according to <claim-ref idref="CLM-00011">claim 11</claim-ref>, further comprising:
<claim-text>receiving an instruction of a processing condition with which the combined image is outputted,</claim-text>
<claim-text>selectively performing a first determination process to identify a file already registered as the causal file, a second determination process to identify a file being newly registered as the causal file, and a third determination process based on the total number of pages in which, if a total number of pages of a set of files already registered of the files for outputting the combined image is smaller than a total number of pages of a file being newly registered, the set of files already registered is identified as the causal file, and if a total number of pages of a set of files already registered of the files for outputting the combined image is greater than a total number of pages of a file being newly registered, the file being newly registered is identified as the causal file;</claim-text>
<claim-text>managing information in which the files are associated with users registering the files;</claim-text>
<claim-text>obtaining information on a user registering the file already registered identified as the causal file by determining when one of the first determination process and the third determination process is performed; and</claim-text>
<claim-text>reporting, in accordance with the information on the user obtained, to the user on a reason of the determination that the combined image cannot be outputted.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The image processing method according to <claim-ref idref="CLM-00010">claim 10</claim-ref>,
<claim-text>managing first information in which files for outputting a combined image are associated with users registering the files and second information on a file already registered of the files;</claim-text>
<claim-text>obtaining third information on a user of an unregistered file in accordance with the first and second information, and</claim-text>
<claim-text>reporting, in accordance with the information on the user of the unregistered file obtained by the obtaining, to the user an output condition of the output configuration information including an output condition added in connection with the file already registered.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. A non-transitory computer-readable recording medium containing instruction codes that cause an image processing apparatus to execute a method comprising:
<claim-text>registering predetermined output configuration information for the combined image before registering the files to a file management unit;</claim-text>
<claim-text>determining whether the combined image can be outputted in accordance with an output condition set for each of the files in registering each of the files to the file management unit, an output condition added to the output configuration information in the registering of the predetermined output configuration information, and an output condition added to the output configuration information in connection with registration of a file already registered;</claim-text>
<claim-text>if it is determined by the determining that the combined image can be outputted in registering a file of the files, adding an output condition of the file that can be outputted to the output configuration information for the combined image;</claim-text>
<claim-text>if it is determined by the determining that the combined image cannot be outputted in registering a file of the files, cancelling registration of the file that cannot be outputted; and</claim-text>
<claim-text>creating data for outputting the combined image in accordance with the output configuration information managed by the determining.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
