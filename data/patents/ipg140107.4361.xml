<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625433-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625433</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12809456</doc-number>
<date>20071219</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<us-term-of-grant>
<us-term-extension>704</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>01</class>
<subclass>R</subclass>
<main-group>31</main-group>
<subgroup>08</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>11</main-group>
<subgroup>00</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>08</class>
<subclass>C</subclass>
<main-group>15</main-group>
<subgroup>00</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>J</subclass>
<main-group>1</main-group>
<subgroup>16</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>J</subclass>
<main-group>3</main-group>
<subgroup>14</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>1</main-group>
<subgroup>00</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>12</main-group>
<subgroup>26</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>370237</main-classification>
</classification-national>
<invention-title id="d2e53">Method and apparatus for use in a communications network</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>2006/0067338</doc-number>
<kind>A1</kind>
<name>Hua et al.</name>
<date>20060300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370400</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>2009/0080440</doc-number>
<kind>A1</kind>
<name>Balyan et al.</name>
<date>20090300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370400</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2010/0299451</doc-number>
<kind>A1</kind>
<name>Yigang et al.</name>
<date>20101100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709241</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>WO</country>
<doc-number>WO 2005/107213</doc-number>
<kind>A1</kind>
<date>20051100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00005">
<othercit>Author Unknown, User Identity to HSS Resolution, Ericsson submission to 3GPP TSG CN Work Group 4, Feb. 1, 2002, pp. 1-4.</othercit>
</nplcit>
<category>cited by examiner</category>
</us-citation>
<us-citation>
<nplcit num="00006">
<othercit>P. Calhoun, J. Loughney,E. Guttman, G. Zorn and J. Arkko, RFC 3588: Diameter Base Protocol, Sep. 2003, pp. 1-131.</othercit>
</nplcit>
<category>cited by examiner</category>
</us-citation>
<us-citation>
<nplcit num="00007">
<othercit>Ericsson: &#x201c;User identity to HSS resolution&#x201d; 3GPP Draft; N4-020160, 3rd Generation Partnership Project (3GPP), Mobile Competence Centre , 650, Route Des Lucioles, F-06921 Sophia-Antipolis Cedex, France, no. Sophia; 20020128, Jan. 24, 2002, XP050080118.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00008">
<othercit>Calhoun Airespace P et al: &#x201c;Diameter Base 1-23 Protocol; rfc3588.txt&#x201d; IETF Standard, Internet Engineering Task Force, IETF, CH,1 Sep. 2003, XP015009370.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>18</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>None</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>5</number-of-drawing-sheets>
<number-of-figures>5</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20110026460</doc-number>
<kind>A1</kind>
<date>20110203</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Lafuente Alvarez</last-name>
<first-name>Luis Maria</first-name>
<address>
<city>Madrid</city>
<country>ES</country>
</address>
</addressbook>
<residence>
<country>ES</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Celaya Prieto</last-name>
<first-name>Alfonso</first-name>
<address>
<city>Madrid</city>
<country>ES</country>
</address>
</addressbook>
<residence>
<country>ES</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Perez Fernandez</last-name>
<first-name>Javier</first-name>
<address>
<city>Rivas Vaciamadrid</city>
<country>ES</country>
</address>
</addressbook>
<residence>
<country>ES</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Lafuente Alvarez</last-name>
<first-name>Luis Maria</first-name>
<address>
<city>Madrid</city>
<country>ES</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Celaya Prieto</last-name>
<first-name>Alfonso</first-name>
<address>
<city>Madrid</city>
<country>ES</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Perez Fernandez</last-name>
<first-name>Javier</first-name>
<address>
<city>Rivas Vaciamadrid</city>
<country>ES</country>
</address>
</addressbook>
</inventor>
</inventors>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Telefonaktiebolaget L M Ericsson (publ)</orgname>
<role>03</role>
<address>
<city>Stockholm</city>
<country>SE</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Blanton</last-name>
<first-name>John</first-name>
<department>2466</department>
</primary-examiner>
<assistant-examiner>
<last-name>Crutchfield</last-name>
<first-name>Christopher</first-name>
</assistant-examiner>
</examiners>
<pct-or-regional-filing-data>
<document-id>
<country>WO</country>
<doc-number>PCT/EP2007/064189</doc-number>
<kind>00</kind>
<date>20071219</date>
</document-id>
<us-371c124-date>
<date>20100618</date>
</us-371c124-date>
</pct-or-regional-filing-data>
<pct-or-regional-publishing-data>
<document-id>
<country>WO</country>
<doc-number>WO2009/080095</doc-number>
<kind>A </kind>
<date>20090702</date>
</document-id>
</pct-or-regional-publishing-data>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A method of enabling redundancy for a Home Subscriber Service (HSS) of an IP Multimedia Subsystem (IMS) is provided. Redundancy is provided by a plurality of HSS instances. Where a client node of the IMS requires details of an HSS, the client node is provided with details of a proxy HSS representing the HSS instances. The client node uses the details to send a subsequent request directed to the proxy HSS. The proxy HSS selects an appropriate one of the HSS instances to handle the request received at the proxy HSS from the client node. The proxy HSS forwards the request to the selected HSS instance for handling.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="154.18mm" wi="214.63mm" file="US08625433-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="171.96mm" wi="186.35mm" file="US08625433-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="215.90mm" wi="161.54mm" orientation="landscape" file="US08625433-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="234.70mm" wi="176.19mm" orientation="landscape" file="US08625433-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="244.43mm" wi="156.55mm" orientation="landscape" file="US08625433-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="252.90mm" wi="172.64mm" orientation="landscape" file="US08625433-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">TECHNICAL FIELD</heading>
<p id="p-0002" num="0001">The present invention relates to a method and apparatus for use in a communications network, for example a Universal Mobile Telecommunications System having an IP Multimedia Subsystem.</p>
<heading id="h-0002" level="1">BACKGROUND</heading>
<p id="p-0003" num="0002">IP Multimedia services provide a dynamic combination of voice, video, messaging, data, etc. within the same session. By growing the number of basic applications and the media which it is possible to combine, the number of services offered to the end users will grow, and the inter-personal communication experience will be enriched. This will lead to a new generation of personalised, rich multimedia communication services, including so-called &#x201c;combinational IP Multimedia&#x201d; services.</p>
<p id="p-0004" num="0003">The UMTS (Universal Mobile Telecommunications System) is a third generation wireless system designed to provide higher data rates and enhanced services to subscribers. UMTS is a successor to the Global System for Mobile Communications (GSM), with an important evolutionary step between GSM and UMTS being the General Packet Radio Service (GPRS). GPRS introduces packet switching into the GSM core network and allows direct access to packet data networks (PDNs). This enables high-data rate packets switch transmissions well beyond the 64 kbps limit of ISDN through the GSM call network, which is a necessity for UMTS data transmission rates of up to 2 Mbps. UMTS is standardised by the 3rd Generation Partnership Project (3GPP) which is a conglomeration of regional standards bodies such as the European Telecommunication Standards Institute (ETSI), the Association of Radio Industry Businesses (ARIB) and others. See 3GPP TS 23.002 for more details.</p>
<p id="p-0005" num="0004">The UMTS architecture includes a subsystem known as the IP Multimedia Subsystem (IMS) for supporting traditional telephony as well as new IP multimedia services (3GPP TS 22.228, TS 23.228, TS 24.229, TS 29.228, TS 29.229, TS 29.328 and TS 29.329 Releases 5 to 7). IMS provides key features to enrich the end-user person-to-person communication experience through the use of standardised IMS Service Enablers, which facilitate new rich person-to-person (client-to-client) communication services as well as person-to-content (client-to-server) services over IP-based networks. The IMS is able to connect to both PSTN/ISDN (Public Switched Telephone Network/Integrated Services Digital Network) as well as the Internet.</p>
<p id="p-0006" num="0005">The IMS makes use of the Session Initiation Protocol (SIP) to set up and control calls or sessions between user terminals (or user terminals and application servers). The Session Description Protocol (SDP), carried by SIP signalling, is used to describe and negotiate the media components of the session. Whilst SIP was created as a user-to-user protocol, IMS allows operators and service providers to control user access to services and to charge users accordingly. The 3GPP has chosen SIP for signalling between a User Equipment (UE) and the IMS as well as between the components within the IMS.</p>
<p id="p-0007" num="0006">Specific details of the operation of the UMTS communications network and of the various components within such a network can be found from the Technical Specifications for UMTS that are available from http://www.3gpp.org. Further details of the use of SIP within UMTS can be found from the 3GPP Technical Specification TS 24.228 V5.8.0 (2004-03).</p>
<p id="p-0008" num="0007"><figref idref="DRAWINGS">FIG. 1</figref> of the accompanying drawings illustrates schematically how the IMS fits into the mobile network architecture in the case of a GPRS/PS access network (IMS can of course operate over other access networks). Call/Session Control Functions (CSCFs) operate as SIP proxies within the IMS. The 3GPP architecture defines three types of CSCFs: the Proxy CSCF (P-CSCF) which is the first point of contact within the IMS for a SIP terminal; the Serving CSCF (S-CSCF) which provides services to the user that the user is subscribed to; and the Interrogating CSCF (I-CSCF) whose role is to identify the correct S-CSCF and to forward to that S-CSCF a request received from a SIP terminal via a P-CSCF.</p>
<p id="p-0009" num="0008">A user registers with the IMS using the specified SIP REGISTER method. This is a mechanism for attaching to the IMS and announcing to the IMS the address at which a SIP user identity can be reached. In 3GPP, when a SIP terminal performs a registration, the IMS authenticates the user, and allocates a S-CSCF to that user from the set of available S-CSCFs. Whilst the criterion for allocating S-CSCFs is not specified by 3GPP, these may include load sharing and service requirements. It is noted that the allocation of an S-CSCF is key to controlling (and charging for) user access to IMS-based services. Operators may provide a mechanism for preventing direct user-to-user SIP sessions which would otherwise bypass the S-CSCF.</p>
<p id="p-0010" num="0009">During the registration process, it is the responsibility of the I-CSCF to select a S-CSCF if a S-CSCF is not already selected. The I-CSCF receives the required S-CSCF capabilities from the home network's Home Subscriber Server (HSS), and selects an appropriate S-CSCF based on the received capabilities. (It is noted that S-CSCF allocation is also carried out for a user by the I-CSCF in the case where the user is called by another party, and the user is not currently allocated an S-CSCF.) When a registered user subsequently sends a session request to the IMS, the P-CSCF is able to forward the request to the selected S-CSCF based on information received from the S-CSCF during the registration process.</p>
<p id="p-0011" num="0010">Within the IMS service network, Application Servers (ASs) are provided for implementing IMS service functionality. Application Servers provide services to end-users in an IMS system, and may be connected either as end-points over the 3GPP defined Mr interface, or &#x201c;linked in&#x201d; by an S-CSCF over the 3GPP defined ISC interface. In the latter case, Initial Filter Criteria (IFC) are used by an S-CSCF to determine which Applications Servers should be &#x201c;linked in&#x201d; during a SIP Session establishment. Different IFCs may be applied to different call cases. The IFCs are received by the S-CSCF from an HSS during the IMS registration procedure as part of a user's User Profile. Certain Application Servers will perform actions dependent upon subscriber identities (either the called or calling subscriber, whichever is &#x201c;owned&#x201d; by the network controlling the Application Server). For example, in the case of call forwarding, the appropriate (terminating) application server will determine the new terminating party to which a call to a given subscriber will be forwarded. In the case that an IFC indicates that a SIP message received at the S-CSCF should be forwarded to a particular SIP AS, that AS is added into the message path. Once the SIP message is returned by the AS to the S-CSCF, it is forwarded on towards its final destination, or forwarded to another AS if this is indicated in the IFCs.</p>
<p id="p-0012" num="0011">As mentioned above, in an IMS network, the HSS is mainly in charge of storing the subscriber data. The HSS inter-works with other nodes (referred to herein generally as &#x201c;HSS clients&#x201d;) by means of the Diameter protocol (RFC 3588). Examples of such HSS client are the I-CSCF, S-CSCF, AP (Aggregation Proxy) and AS (Application Server).</p>
<p id="p-0013" num="0012">The general intention is that the HSS is a central database for a domain. However, some networks have more users than can be handled by a single HSS, and these networks are therefore provided with more than one HSS. Networks with more than one HSS also contain a Subscription Location Function (SLF). Nodes that need to query an HSS about a particular user first query the SLF, which returns the address of the HSS handling the user. The SLF essentially acts as a Diameter redirect agent.</p>
<p id="p-0014" num="0013">However, the standalone scenario, with only one HSS and no SLF deployed in the network, is very common in current deployments and must also be considered.</p>
<p id="p-0015" num="0014">Diameter routing logic involving the HSS can be found in 3GPP TS 29.228. Although the following extracts are focused on CSCF nodes, they apply equally to any other type of HSS client.</p>
<p id="p-0016" num="0015">&#x201c;If an I-CSCF or S-CSCF knows the address/name of the HSS for a certain user, both the Destination-Realm and Destination-Host AVPs (Attribute Value Pairs) shall be present in the request. Otherwise, only the Destination-Realm AVP shall be present and the command shall be routed to the next Diameter node, e.g. the SLF, based on the Diameter routing table in the client.</p>
<p id="p-0017" num="0016">Once the redirector function (SLF) has returned the address or the destination HSS (using Redirect-Host AVP), the redirected request to the HSS shall include both Destination-Realm and Destination-Host AVPs.</p>
<p id="p-0018" num="0017">The S-CSCF stores the address of the HSS for each user, after a first request sent to the redirector function.</p>
<p id="p-0019" num="0018">Requests initiated by the HSS towards an S-CSCF shall include both Destination-Host and Destination-Realm AVPs. The HSS obtains the Destination-Host AVP to use in requests towards an S-CSCF, from the Origin-Host AVP received in previous requests from the S-CSCF. Consequently, the Destination-Host AVP is declared as mandatory in the ABNF for all requests initiated by the HSS.</p>
<p id="p-0020" num="0019">Destination-Realm AVP is declared as mandatory in the ABNF for all requests.&#x201d;</p>
<p id="p-0021" num="0020">As appreciated by the applicant, one issue that is not specifically addressed in the 3GPP standard is that of a redundancy solution for the HSS: in a real deployment the user data might be stored in more than one HSS (for instance in a hot/standby configuration, which is the one currently available in TSP, load sharing, and so on). A mechanism that would allow an HSS client to learn the right HSS address is not specified in the 3GPP standard. The IETF Diameter document (RFC3588) provides a redundancy solution for &#x201c;Diameter agents&#x201d; but not for destination hosts. For example, in 3GPP IMS a Subscription Location Function (SLF) is a &#x201c;Diameter redirect agent&#x201d;, and a Home Subscriber Server HSS is a destination host.</p>
<p id="p-0022" num="0021">It is desirable to address this issue.</p>
<heading id="h-0003" level="1">SUMMARY</heading>
<p id="p-0023" num="0022">According to a first aspect of the present invention there is provided a method of enabling redundancy for a Home Subscriber Service, HSS, of an IP Multimedia Subsystem, IMS, with redundancy being provided by a plurality of HSS instances, and the method comprising: where a client node of the IMS requires details of an HSS, arranging for the client node to be provided with details of a proxy HSS representing the HSS instances; arranging for the proxy HSS to select an appropriate one of the HSS instances to handle a request received at the proxy HSS from the client node; and arranging for the proxy HSS to forward the request to the selected HSS instance for handling.</p>
<p id="p-0024" num="0023">The method may comprise, where a Subscription Location Function, SLF, is provided in the IMS, arranging for the SLF to provide the client node with details of the proxy HSS.</p>
<p id="p-0025" num="0024">The method may comprise, where a Subscription Location Function, SLF, is not provided in the IMS, arranging for the proxy HSS itself to provide the client node with details of the proxy HSS.</p>
<p id="p-0026" num="0025">The Diameter protocol may be used for communication between the client node and the proxy HSS.</p>
<p id="p-0027" num="0026">The method may comprise changing a destination host Attribute Value Pair in the received request based on the selection.</p>
<p id="p-0028" num="0027">Redundancy of the proxy HSS may also be provided, by having a plurality of proxy HSS instances, with redundancy towards the proxy HSS instances being handled by standard Diameter protocol mechanisms.</p>
<p id="p-0029" num="0028">At least some of the HSS instances may be different respective front ends to a database.</p>
<p id="p-0030" num="0029">The method may comprise maintaining information at the proxy HSS for use in performing the selection.</p>
<p id="p-0031" num="0030">The information may comprise at least one of: information relating to respective loads being experienced by the HSS instances; respective availabilities of the HSS instances; and respective statuses of the HSS instances.</p>
<p id="p-0032" num="0031">Where the database is distributed across a plurality of sites, the information may comprise geographic information relating to the sites.</p>
<p id="p-0033" num="0032">The method may comprise monitoring the state of each HSS instance for use in performing the selection.</p>
<p id="p-0034" num="0033">The method may comprise monitoring the state by using Diameter messages.</p>
<p id="p-0035" num="0034">The method may comprise monitoring the state by using DWR/DWA messages.</p>
<p id="p-0036" num="0035">The method may comprise performing the selection based on at least one of geographical location, availability, load, and response time.</p>
<p id="p-0037" num="0036">The proxy HSS may be a node of the IMS.</p>
<p id="p-0038" num="0037">The proxy HSS may be a Diameter proxy agent.</p>
<p id="p-0039" num="0038">The client node may be a Diameter client.</p>
<p id="p-0040" num="0039">The client node may comprise at least one of: an Interrogating Call Session Control Function of the IMS; a Serving Call Session Control Function of the IMS; an Aggregation Proxy of the IMS; and an Application Server of the IMS.</p>
<p id="p-0041" num="0040">The method may be performed at the proxy HSS.</p>
<p id="p-0042" num="0041">The HSS may be replaced by a destination host of the IMS other than a HSS.</p>
<p id="p-0043" num="0042">According to a second aspect of the present invention there is provided an apparatus for enabling redundancy for a Home Subscriber Service, HSS, of an IP Multimedia Subsystem, IMS, with redundancy being provided by a plurality of HSS instances, and the apparatus comprising: means for arranging, where a client node of the IMS requires details of an HSS, for the client node to be provided with details of a proxy HSS representing the HSS instances; means for arranging for the proxy HSS to select an appropriate one of the HSS instances to handle a request received at the proxy HSS from the client node; and means for arranging for the proxy HSS to forward the request to the selected HSS instance for handling.</p>
<p id="p-0044" num="0043">The apparatus may comprise the proxy HSS.</p>
<p id="p-0045" num="0044">According to another aspect of the present invention there is provided a method of enabling redundancy for a destination host of an IP Multimedia Subsystem, IMS, with redundancy being provided by a plurality of destination host instances, and the method comprising: where a client node of the IMS requires details of a destination host, arranging for the client node to be provided with details of a proxy destination host representing the destination host instances; arranging for the proxy destination host to select an appropriate one of the destination host instances to handle a request received at the proxy destination host from the client node; and arranging for the proxy destination host to forward the request to the selected destination host instance for handling. The proxy destination host may be a Diameter proxy agent. Apparatus comprising means for performing these method steps is also provided.</p>
<p id="p-0046" num="0045">According to another aspect of the present invention there is provided a method of enabling redundancy for a protocol server of a communications network, with redundancy being provided by a plurality of protocol server instances, and the method comprising: where a protocol client requires details of a protocol server, arranging for the protocol client to be provided with details of a proxy protocol server representing the protocol server instances; arranging for the proxy protocol server to select an appropriate one of the protocol server instances to handle a request received at the proxy protocol server from the protocol client; and arranging for the proxy protocol server to forward the request to the selected protocol server instance for handling. The protocol may be the Diameter protocol. The proxy protocol server may be a Diameter proxy agent. Apparatus comprising means for performing these method steps is also provided.</p>
<p id="p-0047" num="0046">According to a third aspect of the present invention there is provided a program for controlling an apparatus to perform a method according to the first aspect of the present invention or which, when loaded into an apparatus, causes the apparatus to become an apparatus according to the second aspect of the present invention. The program may be carried on a carrier medium. The carrier medium may be a storage medium. The carrier medium may be a transmission medium.</p>
<p id="p-0048" num="0047">According to a fourth aspect of the present invention there is provided an apparatus programmed by a program according to the third aspect of the present invention.</p>
<p id="p-0049" num="0048">According to a fifth aspect of the present invention there is provided a storage medium containing a program according to the third aspect of the present invention.</p>
<p id="p-0050" num="0049">An embodiment of the present invention has at least one of the following advantages:</p>
<p id="p-0051" num="0050">As there is one logical HSS deployed in the network, it is possible for any third party vendor product to take advantage of the HSS redundancy solution (which is not standardized). The interface between the HSS client and the Diameter proxy application is based on pure Diameter standard mechanisms.</p>
<p id="p-0052" num="0051">No changes in the IP routing tables are needed, and, advantageously, client nodes only need to be configured with the destination address of the Proxy apparatus in an embodiment of the present invention, which is arranged for replacing the destination address received from a client node, which addresses the Proxy apparatus, into a destination address of the server selected therein.</p>
<p id="p-0053" num="0052">The distribution logic to the destination peer can be configured depending on the scenario: it can be based on load sharing, user location . . . .</p>
<p id="p-0054" num="0053">A method and apparatus embodying the present invention are valid for both, current &#x201c;monolithic&#x201d; HSS and the tiered (layered) HSS architectures. It does not matter whether the final destination is a monolithic HSS or a Front End.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0055" num="0054"><figref idref="DRAWINGS">FIG. 1</figref>, discussed hereinbefore, illustrates schematically the integration of an IP Multimedia Subsystem into a 3G mobile communications system;</p>
<p id="p-0056" num="0055"><figref idref="DRAWINGS">FIG. 2</figref> is a schematic flowchart illustrating steps performed in an embodiment of the present invention;</p>
<p id="p-0057" num="0056"><figref idref="DRAWINGS">FIG. 3</figref> is a schematic block diagram showing parts of apparatus embodying the present invention for performing the method of <figref idref="DRAWINGS">FIG. 2</figref>;</p>
<p id="p-0058" num="0057"><figref idref="DRAWINGS">FIG. 4</figref> is a schematic block diagram showing the use of multiple proxy HSSs (Diameter Proxies) in a system embodying the present invention; and</p>
<p id="p-0059" num="0058"><figref idref="DRAWINGS">FIG. 5</figref> is a schematic block diagram showing parts of an example proxy HSS with information being monitored for use in selecting an HSS instance (HSS front end).</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0060" num="0059">It has been mentioned above that the problem of a redundancy solution for the HSS is not specifically addressed in the 3GPP standard. Before a detailed description of an embodiment of the present invention, the following three possible solutions that would address this redundancy problem will now be described in turn, each having some limitations as set out below: (a) route all the traffic through the SLF; (b) rely on Diameter protocol standard procedures; and (c) IP layer based solutions. This will be followed by a description of: (d) other mechanisms for obtaining the redundant node; and then (e) a solution according to an embodiment of the present invention.</p>
<heading id="h-0006" level="1">(a) Route all the Traffic Through SLF</heading>
<p id="p-0061" num="0060">The SLF could monitor the HSS's state (this is currently done in Ericsson's IPWorks product, for the AS DNS functionality, where SNMP and ICMP are used for this purpose) and only the &#x201c;active&#x201d;/&#x201c;preferred&#x201d; one would be included in the responses. All the traffic towards the HSS should be routed through the SLF.</p>
<p id="p-0062" num="0061">However, according to the standard it is not mandatory for an HSS client to poll the SLF whenever a message has to be sent to HSS. Some examples that can be found in current implementations are:
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0000">
    <ul id="ul0002" list-style="none">
        <li id="ul0002-0001" num="0062">The S-CSCF stores the HSS &#x201c;destination host&#x201d; when it is received from SLF the first time it is contacted. From that moment on, and for the same user, that address could be kept. No extra polls are needed.</li>
        <li id="ul0002-0002" num="0063">The HSS destination host can also be sent from the I-CSCF to the S-CSCF by means of a proprietary mechanism (embedded in the SIP REGISTER message). In this way the S-CSCF does not need to retrieve any information from the SLF, since the I-CSCF has received it from the SLF and passed on to the S-CSCF. This implementation is used in Ericsson's CSCF.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0063" num="0064">Moreover, current deployments do not include an SLF when the number of subscribers is relatively small; this means that the &#x201c;single HSS scenario&#x201d; must also be considered.</p>
<heading id="h-0007" level="1">(b) Rely on Diameter Protocol Standard Procedures</heading>
<p id="p-0064" num="0065">It is not possible to rely on pure standard Diameter mechanisms (see chapter 5.5.4 of RFC 3588) since routing and failover mechanisms are applicable only for scenarios with Diameter Agents in charge of routing the corresponding Diameter application-based messages. In this sense, the failover mechanism provides an alternate way of reaching a given Destination-Host, by using an alternate Diameter agent. If the destination host as such is down, there is no mechanism specified in the RFC. That would be another case.</p>
<p id="p-0065" num="0066">A Diameter Agent is a Diameter node that provides relay, proxy, redirect or translation services (performs protocol translation between Diameter and another AAA protocol). In other words, they are used for routing Diameter messages to the final destination (specified by the destination host).</p>
<heading id="h-0008" level="1">(c) IP Layer Based Solutions</heading>
<p id="p-0066" num="0067">Another approach would be to rely on the IP layer: if the redundant nodes shared the same IP address (this would work for hot/standby redundancy solutions; only the &#x201c;active&#x201d; node would own the shared IP address) it would be possible to execute the failover with no impact in the applications. This alternative is currently offered by TSP, and it can also be found in other commercial platforms (such as for instance Motorola's AdvancedTCA Communication Server; Sun clusters also include this feature in many products), but it has several drawbacks:
<ul id="ul0003" list-style="none">
    <li id="ul0003-0001" num="0000">
    <ul id="ul0004" list-style="none">
        <li id="ul0004-0001" num="0068">Having an IP that moves from one site to another implies that the host IP part of the routing tables will require some updates in case of node failure (OSPF could be used for this purpose). If the backbone is composed of many routers the traffic routing to the proper destination will not be secured until the complete backbone convergence is achieved. Some backbone tuning might be required in each installation.</li>
        <li id="ul0004-0002" num="0069">As the backbone is usually shared among different solutions changes in it might affect other solutions. Thus some operators may not agree on having such tuning done. Besides the deployment cost will increase exponentially. This is perceived as non secure.</li>
    </ul>
    </li>
</ul>
</p>
<heading id="h-0009" level="1">(d) Other Mechanisms for Obtaining the Redundant Node</heading>
<p id="p-0067" num="0070">The redundant node could be statically configured in a table. For every possible HSS Destination-Host in the network it is stated its corresponding secondary (redundant) one. The HSS client could then monitor the HSS's state, and when the primary HSS fails, then it would send the Diameter queries to the configured secondary HSS. A drawback of this alternative is that HSS redundancy will only work in a scenario where all HSS clients in the network (CSCF, Application Servers, AAA server, BSF, etc.) implement this mechanism.</p>
<p id="p-0068" num="0071">Alternatively, a new AVP conveying information about the redundant nodes could be added in the SLF responses. This is now under investigation in IETF DIME working group. A drawback of this solution is that these AVP are optional (in order to provide backwards compatibility) and therefore it is not possible to ensure that the client will make use of it. Moreover, SLF is needed in order to provide this information and it is not possible to route the message based on other considerations (user location, load balancing, and so on).</p>
<heading id="h-0010" level="1">(e) An Embodiment of the Present Invention</heading>
<p id="p-0069" num="0072">In an embodiment of the present invention an enhanced Diameter proxy is introduced in order to provide a single logical HSS in the network. Further details will be provided below, but in brief:
<ul id="ul0005" list-style="none">
    <li id="ul0005-0001" num="0000">
    <ul id="ul0006" list-style="none">
        <li id="ul0006-0001" num="0073">Each HSS client can be configured with a single HSS Destination host, and no SLF would then needed (although an embodiment of the present invention can also be used where an SLF is in operation).</li>
        <li id="ul0006-0002" num="0074">The access point to the single logical HSS could comprise one or several enhanced Diameter proxies, with each Diameter message sent from the HSS client being received in one of these proxies. From the HSS client side, the Diameter proxies can be configured like in the standard Diameter interface.</li>
        <li id="ul0006-0003" num="0075">To provide redundancy and to scale the traffic processing capacity, there could be several proxies. Redundancy towards the proxies can be achieved with Diameter standard procedures (see RFC 3588, chapter 5.5.4).</li>
        <li id="ul0006-0004" num="0076">The enhanced Diameter proxy would provide mechanisms to find out what is the most appropriate Diameter peer to process the Diameter message. These peers can be HSS Front Ends (FEs) accessing a database that contains the user data, or monolithic HSSs keeping both the HSS application logic and the user data. These mechanisms consider the HSS monolithic of FE availability, the geographical location of the user data as well as manage the load distribution towards the Diameter peers.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0070" num="0077">An embodiment of the present invention will now be described in more detail with reference to <figref idref="DRAWINGS">FIGS. 2 and 3</figref>. <figref idref="DRAWINGS">FIG. 2</figref> is a schematic flowchart illustrating steps performed in an embodiment of the present invention, while <figref idref="DRAWINGS">FIG. 3</figref> is a schematic block diagram showing parts of apparatus embodying the present invention.</p>
<p id="p-0071" num="0078"><figref idref="DRAWINGS">FIG. 2</figref> shows an HSS client <b>10</b> and an SLF <b>30</b>, which have been described previously. An HSS in this example is provided a degree of redundancy by comprising first and second HSS instances <b>40</b>. Finally, a proxy HSS <b>20</b> is also provided, whose function will become apparent from the description below.</p>
<p id="p-0072" num="0079">In response to a request by the HSS Client <b>10</b> for details (e.g. a &#x201c;Destination Host AVP&#x201d;) of an HSS relating to a particular user, in step S<b>1</b> details of the proxy HSS <b>20</b> are provided to the HSS client <b>10</b>, either from the SLF <b>30</b> (if there is one) or (e.g, if there is not a SLF) are configured beforehand at the HSS client <b>10</b>, or are provided from the proxy HSS <b>20</b> itself. Advantageously, every HSS client <b>10</b> is configured with a single HSS Destination Host addressing the proxy HSS <b>20</b>, which provides a simplified configuration of clients and, at the same time, allows to dispense with the need of a SLF. The details of the proxy HSS <b>20</b> are received by the HSS client <b>10</b> in step S<b>2</b>.</p>
<p id="p-0073" num="0080">In step S<b>3</b> the HSS client <b>10</b> sends a Request to the proxy HSS <b>20</b>, using the details received in step S<b>2</b>, which is received in step S<b>4</b> by the proxy HSS <b>20</b>.</p>
<p id="p-0074" num="0081">In step S<b>5</b> the proxy HSS <b>20</b> performs a selection process to determine which of the first and second HSS instances <b>40</b> should be chosen to handle the Request; examples of possible criteria to be used in the selection process are set out further below.</p>
<p id="p-0075" num="0082">Having made the selection of an appropriate HSS instance <b>40</b> in step S<b>5</b>, the Destination Host AVP received from the HSS client <b>10</b> is replaced in step S<b>5</b><i>a </i>with the Destination Host AVP of the selected HSS instance <b>40</b>. The Request is then forwarded in step S<b>6</b> by the proxy HSS <b>20</b> to the selected HSS instance <b>40</b>, which is received and processed in step S<b>7</b> by the selected HSS instance <b>40</b>.</p>
<p id="p-0076" num="0083">When the Request has been processed, a Response is sent from the selected HSS instance <b>40</b> to the proxy HSS <b>20</b> and received by the proxy HSS <b>20</b> in step S<b>9</b>. In step S<b>10</b> the Response is forwarded by the proxy HSS <b>20</b> to the HSS client <b>10</b>, and received by the HSS client <b>10</b> in step S<b>11</b>.</p>
<p id="p-0077" num="0084">Parts of the proxy HSS <b>20</b>, SLF <b>30</b> and HSS instances <b>40</b> for performing the steps of <figref idref="DRAWINGS">FIG. 2</figref> are illustrated schematically in <figref idref="DRAWINGS">FIG. 3</figref>, with parts P<b>1</b> and P<b>4</b> to P<b>10</b> of <figref idref="DRAWINGS">FIG. 3</figref> being adapted to perform the steps S<b>1</b> and S<b>4</b> to S<b>10</b> respectively of <figref idref="DRAWINGS">FIG. 2</figref>.</p>
<p id="p-0078" num="0085">It is possible to use a Diameter proxy agent (e.g. proxy HSS), inter-connecting all the nodes, at Diameter level. With this option no changes are needed in current client nodes, since all the logic can be centralized in the proxy, which replaces the &#x201c;Destination Host AVP&#x201d; received from clients (e.g. <b>10</b>) that addresses the proxy <b>20</b> with the &#x201c;Destination Host AVP&#x201d; of the HSS instance selected therein, and that is usable to address to it a message received from a client.</p>
<p id="p-0079" num="0086">Although extra processing and latency is introduced by the proxy, on the other hand queries from the HSS clients to the SLF can be removed, and the processing power and delays that that implies. Further, the HSS clients only need to be configured with an address of the Proxy HSS <b>20</b>, and not of individual HSS instances. The clients then use said address (e.g. as &#x201c;Destination Host AVP&#x201d; if DIAMETER protocol is used) for sending messages and requests that need to be processed by a HSS instance, that will make these messages and requests to be automatically routed towards the Proxy HSS.</p>
<p id="p-0080" num="0087">It is possible to duplicate the proxy. Standard procedures for failover and link monitoring (see RFC 3588) can be used for this. <figref idref="DRAWINGS">FIG. 4</figref> illustrates an architecture with multiple Diameter proxies <b>20</b>.</p>
<p id="p-0081" num="0088">Diameter messages originating in the HSS clients have the same destination host, as if there was a single HSS (no SLF) deployed in the network, which is the address of the Proxy HSS <b>20</b>.</p>
<p id="p-0082" num="0089">The method and Proxy of the invention are usable, both: in monolithic and tiered architectures. In short, a HSS instance according to a monolithic architecture comprises the processing means and application logic, so as to process signaling to be exchanged with HSS clients, as well as storage means comprising the necessary data (e.g. subscriber dynamic and static information) for accomplishing with said processing. In turn, a HSS &#x201c;tiered&#x201d; architecture comprises a plurality of HSS front-ends (FE), comprising the processing means and application logic, and a (physical or logical) centralized database DB that stores all the necessary data that can need any HSS FE for accomplishing their processing.</p>
<p id="p-0083" num="0090">In the case of HSS Front Ends that access a Subscriber Data Base (DB), when this DB is distributed in two or more sites, the proxy can keep information about what is the most appropriate Front End (FE) or group of Front Ends, based on geographical data distribution, to serve each user.</p>
<p id="p-0084" num="0091">The enhanced Diameter proxy application can monitor the state of the Diameter peers that can handle the message for a given user (these peers could be either monolithic HSS or Front Ends with access to a database that contains the user data). In case of redundancy, at least two Diameter peers (e.g. HSS instances) should be able to manage each user. The mechanism used in the Diameter proxies for monitoring the terminating peers could be either the same one included in the Diameter standard (DWR/DWA messages) or a different one.</p>
<p id="p-0085" num="0092">The proxy could distribute the traffic between the different Diameter peers that are able to handle the operation, for example based on geographical location and availability. This distribution can be based on existing balancing mechanism such as server load, response time, round robin, etc.</p>
<p id="p-0086" num="0093">These concepts are illustrated in <figref idref="DRAWINGS">FIG. 5</figref>.</p>
<p id="p-0087" num="0094">Once a suitable terminating node has been selected, the destination host AVP received from the HSS client (i.e. the HSS Diameter URI that identifies the single logical HSS) is replaced according to the selected Diameter peer, and the Diameter message sent to it.</p>
<p id="p-0088" num="0095">When an answer is received from the terminating node, it is desirable to keep the Diameter host ID consistent (that is, the answer should come from the Destination-Host used in the request). The internal architecture of this single logical HSS is transparent to the HSS clients, i.e. the proxy is not required to provide to the HSS client the real Diameter URI of the selected destination host.</p>
<p id="p-0089" num="0096">Requests from the HSS can also be proxied. The HSS-Diameter proxy interface allows redundancy in both directions (the HSS client DiameterURI can be stored in the HSS/FE according to 3GPP standard procedures).</p>
<p id="p-0090" num="0097">Although the present invention has thus far been described mainly in relation to an HSS client and an HSS, an embodiment of the present invention is applicable more generally. In a general sense, an embodiment of the present invention introduces a &#x201c;Diameter proxy agent&#x201d; (DPA) (usable in, but not limited to, an IMS architecture) between any &#x201c;Diameter client&#x201d; (e.g. Call Session Control function CSCF or Application Server AS) and any &#x201c;destination host&#x201d; (e.g. HSS).</p>
<p id="p-0091" num="0098">The DPA acts as a standard proxy agent from the client's side, and is enhanced with regard to the destination host's side. The DPA may receive a request from a client containing a &#x201c;DestinationHost&#x201d; AVP. The DPA translates the (fictitious) &#x201c;DestinationHost&#x201d; AVP received from a client into an identifier usable to route the request towards the final HSS, which is selected by it according to &#x201c;availability information&#x201d;. The DPA thus stores a table comprising (fictitious) &#x201c;DestinationHost&#x201d; AVPs that can be received from clients, which routes to the DPA, and the corresponding lists of real &#x201c;DestinationHost&#x201d; AVPs identifiers of the real HSSs that can be selected. Availability information per real HSS, which can be dynamically updated, as well as information about geographic location of HSSs vs. location of the clients, can also be kept by the DPA and used for the translation above.</p>
<p id="p-0092" num="0099">An embodiment of the present invention allows HSS and/or HLR redundancy both in scenarios comprising SLF and in scenarios not comprising SLF, and is usable for monolithic or tiered HSS architectures.</p>
<p id="p-0093" num="0100">The DPA of the invention can be provided with standardized Diameter redundancy procedures towards the clients, thereby allowing deployment of a plurality of DPAs, which provide a high availability of communication between clients and destination hosts. Further, no modification is necessary in Diameter clients (e.g. CSCFs) or Diameter servers (e.g. HSSs), as the novel processing carried out by the DPA acts only at the &#x201c;Diameter&#x201d; level, and not at application level (e.g. CX-intf related processing).</p>
<p id="p-0094" num="0101">It will be appreciated that operation of one or more of the above-described components can be controlled by a program operating on the device or apparatus. Such an operating program can be stored on a computer-readable medium, or could, for example, be embodied in a signal such as a downloadable data signal provided from an Internet website. The appended claims are to be interpreted as covering an operating program by itself, or as a record on a carrier, or as a signal, or in any other form.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method of enabling redundancy for a Home Subscriber Server (HSS) of an Internet Protocol (IP) Multimedia Subsystem (IMS) with redundancy being provided by a plurality of HSS instances, where the data for each of a plurality of users is stored by more than one of the HSS instances, the method comprising:
<claim-text>arranging for a client node of the IMS to be provided with details of a proxy HSS representing the HSS instances in response to an inquiry from the client node, the details including a destination host Attribute Value Pair of the proxy HSS; and</claim-text>
<claim-text>the proxy HSS:
<claim-text>selecting an appropriate one of the HSS instances to handle a request received at the proxy HSS from the client node to obtain a selected HSS instance, the request including the destination host Attribute Value Pair of the proxy HSS provided to the client node;</claim-text>
<claim-text>changing the destination host Attribute Value Pair received in the request based on the selected HSS instance; and</claim-text>
<claim-text>forwarding the request to the selected HSS instance for handling.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method in <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising, a Subscription Location Function (SLF) being provided in the IMS, arranging for the SLF to provide the client node with the details of the proxy HSS.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method in <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising, a Subscription Location Function (SLF) not being provided in the IMS, arranging for the proxy HSS itself to provide the client node with the details of the proxy HSS.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method in in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein a Diameter protocol is used for communication between the client node and the proxy HSS.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein redundancy of the proxy HSS is provided, by having a plurality of proxy HSS instances, with redundancy towards the proxy HSS instances being handled by standard Diameter protocol mechanisms.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein at least some of the HSS instances are different respective front ends to a database.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method in <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising maintaining information at the proxy HSS for use in selecting the selected HSS instance.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method in <claim-ref idref="CLM-00007">claim 7</claim-ref> wherein the information comprises at least one of:
<claim-text>information relating to respective loads being experienced by the HSS instances;</claim-text>
<claim-text>respective availabilities of the HSS instances; and</claim-text>
<claim-text>respective status of the HSS instances.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The method in <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein the information comprises geographic information relating to a plurality of sites.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The method in <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising monitoring a state of each of the HSS instances for use in selecting the selected HSS instance.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The method in <claim-ref idref="CLM-00010">claim 10</claim-ref>, further comprising monitoring the state by using Diameter messages.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The method in <claim-ref idref="CLM-00011">claim 11</claim-ref>, further comprising monitoring the state by using Device-Watchdog-Request/Device-Watchdog-Answer (DWR/DWA) messages.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The method in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein selecting the selected HSS instance is based on at least one of geographical location, availability, load, and response time.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The method in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the proxy HSS is a node of the IMS.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The method in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the proxy HSS is a Diameter proxy agent.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The method in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the client node is a Diameter client.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The method in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the client node comprises at least one of:
<claim-text>an Interrogating Call Session Control Function of the IMS;</claim-text>
<claim-text>a Serving Call Session Control Function of the IMS;</claim-text>
<claim-text>an Aggregation Proxy of the IMS; and</claim-text>
<claim-text>an Application Server of the IMS.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. An apparatus for enabling redundancy for a Home Subscriber Server (HSS) of an Internet Protocol (IP) Multimedia Subsystem (IMS) with redundancy being provided by a plurality of HSS instances, where the data for each of a plurality of users is stored by more than one of the HSS instances, the apparatus comprising:
<claim-text>means for arranging a client node of the IMS to be provided with details of a proxy HSS representing the HSS instances in response to an in from the client node, the details including a destination host Attribute Value Pair of the proxy HSS; and</claim-text>
<claim-text>means for arranging for the proxy HSS to:
<claim-text>select an appropriate one of the HSS instances to handle a request received at the proxy HSS from the client node to obtain a selected HSS instance, the request including the destination host Attribute Value Pair of the proxy HSS provided to the client node;</claim-text>
<claim-text>change the destination host Attribute Value Pair received in the request based on the selected HSS instance; and</claim-text>
<claim-text>forward the request to the selected HSS instance for handling.</claim-text>
</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
