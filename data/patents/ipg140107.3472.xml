<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08624536-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08624536</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12892500</doc-number>
<date>20100928</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>CN</country>
<doc-number>2009 1 0175701</doc-number>
<date>20090929</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>421</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>02</class>
<subclass>H</subclass>
<main-group>7</main-group>
<subgroup>085</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>02</class>
<subclass>K</subclass>
<main-group>11</main-group>
<subgroup>00</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classifications-cpc>
<main-cpc>
<classification-cpc>
<cpc-version-indicator><date>20130101</date></cpc-version-indicator>
<section>H</section>
<class>02</class>
<subclass>K</subclass>
<main-group>11</main-group>
<subgroup>001</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
<scheme-origination-code>C</scheme-origination-code>
</classification-cpc>
</main-cpc>
</classifications-cpc>
<classification-national>
<country>US</country>
<main-classification>318490</main-classification>
<further-classification>318499</further-classification>
<further-classification>318280</further-classification>
</classification-national>
<invention-title id="d2e71">System and method for detecting a high current condition in a motor</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>4057743</doc-number>
<kind>A</kind>
<name>Limberg</name>
<date>19771100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>327595</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>4276504</doc-number>
<kind>A</kind>
<name>Nagase et al.</name>
<date>19810600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>318721</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>4851743</doc-number>
<kind>A</kind>
<name>Schmerda et al.</name>
<date>19890700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>388811</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>5373436</doc-number>
<kind>A</kind>
<name>Yamaguchi et al.</name>
<date>19941200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>363 98</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>5874818</doc-number>
<kind>A</kind>
<name>Schuurman</name>
<date>19990200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>31840004</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>6046556</doc-number>
<kind>A</kind>
<name>Cargille</name>
<date>20000400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>31840004</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>6066834</doc-number>
<kind>A</kind>
<name>Rebold</name>
<date>20000500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>21913771</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>6710564</doc-number>
<kind>B2</kind>
<name>Shibuya et al.</name>
<date>20040300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>31840022</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>7852038</doc-number>
<kind>B2</kind>
<name>Ramu</name>
<date>20101200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>318701</main-classification></classification-national>
</us-citation>
</us-references-cited>
<number-of-claims>18</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>318490</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>318499</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>318439</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>318280</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>318138</main-classification>
</classification-national>
<classification-cpc-text>H02K 11/001</classification-cpc-text>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>3</number-of-drawing-sheets>
<number-of-figures>4</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20110074328</doc-number>
<kind>A1</kind>
<date>20110331</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Zhao</last-name>
<first-name>Zhongrui &#x201c;Kevin&#x201d;</first-name>
<address>
<city>Shanghai</city>
<country>CN</country>
</address>
</addressbook>
<residence>
<country>CN</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Zhao</last-name>
<first-name>Zhongrui &#x201c;Kevin&#x201d;</first-name>
<address>
<city>Shanghai</city>
<country>CN</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Slater &#x26; Matsil, L.L.P.</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>STMicroelectronics R&#x26;D (Shanghai) Co., Ltd.</orgname>
<role>03</role>
<address>
<city>Shanghai</city>
<country>CN</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Ro</last-name>
<first-name>Bentsu</first-name>
<department>2837</department>
</primary-examiner>
<assistant-examiner>
<last-name>Luo</last-name>
<first-name>David</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">In one embodiment, a system for controlling a motor is disclosed. The system has a driver circuit configured to drive a motor, a current sensing impedance coupled to the driver circuit, and an overload detection circuit coupled to the current sending impedance that has a transistor and a detection output node.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="157.99mm" wi="151.64mm" file="US08624536-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="183.30mm" wi="158.75mm" file="US08624536-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="219.46mm" wi="120.82mm" file="US08624536-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="138.77mm" wi="120.31mm" file="US08624536-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This application claims the priority benefit of People's Republic of China Patent Application No. 200910175701.8, filed on Sep. 29, 2009, and entitled &#x201c;System and Method for Detecting a High Current Condition in a Motor,&#x201d; which is hereby incorporated by reference to the maximum extent allowable by law.</p>
<heading id="h-0002" level="1">TECHNICAL FIELD</heading>
<p id="p-0003" num="0002">This invention relates generally to electronic circuits, and more particularly to a system and method for sensing a high current condition in a motor.</p>
<heading id="h-0003" level="1">BACKGROUND</heading>
<p id="p-0004" num="0003">Motors have been used for a wide variety of consumer and industrial applications such as transportation, manufacturing and home appliances. While motors have been in existence for many years, more sophisticated methods of motor control have been employed as motor technology has advanced. In particular, variable speed induction motors and permanent magnet brushless DC motors have become more prevalent. Such systems typically require solid-state driver devices, motor position sensors and microprocessor based motor controllers.</p>
<p id="p-0005" num="0004">In a typical three-phase variable speed induction motor, time varying currents are supplied to three stator windings to create a rotating magnetic field. This time varying magnetic field induces the rotor containing a permanent magnet to turn. The speed of the motor is determined, in part, by the frequency of the time varying current controlled by a motor control unit.</p>
<p id="p-0006" num="0005">In applications where a motor is exposed to a variable load, for example in an electric bicycle or a kitchen appliance, the current required by the stator windings are proportional to the physical load being driven. In cases where a motor is prevented from turning, for example, in an accident or under an extremely heavy load, or in cases where the motor experiences a short circuit, current drivers within the motor controller may experience a high degree of electrical stress and sink high currents. If the currents provided by the motor controller are too high, the motor controller can rapidly become damaged. High motor currents also lead to high power consumption, poor motor efficiency, frequent motor breakdowns.</p>
<p id="p-0007" num="0006">Some prior art systems that have addressed the problem of motor high currents under high loads by limiting the current to the motor via a closed current control loop. A problem with relying on closed-loop control to limit motor current is that the closed-loop response time may be too slow to avoid damage to the motor and motor controller. Other prior art systems employ complicated current sensors that add cost and complexity to the motor control system.</p>
<p id="p-0008" num="0007">In the field of motors, what is needed are fast and cost efficient systems and methods of detecting high current conditions within a motor.</p>
<heading id="h-0004" level="1">SUMMARY</heading>
<p id="p-0009" num="0008">In one embodiment, a system for controlling a motor is disclosed. The system has a driver circuit configured to drive a motor, a current sensing impedance coupled to the driver circuit, and an overload detection circuit coupled to the current sending impedance that has a transistor and a detection output node.</p>
<p id="p-0010" num="0009">In another embodiment, a circuit for sensing an overload condition in a driver is disclosed. The circuit has a sensing impedance configured to be coupled to a driver and an overload detector. The overload detector includes a transistor that has a control node coupled to the sensing impedance, an output node coupled to an overload signal, and a reference node coupled to a reference voltage.</p>
<p id="p-0011" num="0010">In a further embodiment, a method for sending an overload condition in a motor is disclosed. The method includes monitoring a voltage across a shunt resistor coupled to a return path of a driver coupled to the motor. Monitoring includes sensing a node of the shunt resistor with a control node of a transistor, turning on the transistor if a voltage at the node of the shunt resistor exceeds a threshold, and activating an overload signal if the transistor is turned on.</p>
<p id="p-0012" num="0011">The foregoing has outlined, rather broadly, features of the present disclosure. Additional features of the disclosure will be described, hereinafter, which form the subject of the claims of the invention. It should be appreciated by those skilled in the art that the conception and specific embodiment disclosed may be readily utilized as a basis for modifying or designing other structures or processes for carrying out the same purposes of the present invention. It should also be realized by those skilled in the art that such equivalent constructions do not depart from the spirit and scope of the invention as set forth in the appended claims.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0013" num="0012">For a more complete understanding of the present disclosure, and the advantages thereof, reference is now made to the following descriptions taken in conjunction with the accompanying drawings, in which:</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 1</figref> illustrates a schematic of an embodiment motor system;</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 2</figref> illustrates an embodiment current detection circuit;</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 3</figref> illustrates another embodiment current detection circuit; and</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 4</figref> illustrates a waveform diagram showing the current detection performance of an embodiment motor system.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<p id="p-0018" num="0017">Corresponding numerals and symbols in different figures generally refer to corresponding parts unless otherwise indicated. The figures are drawn to clearly illustrate the relevant aspects of embodiments of the present disclosure and are not necessarily drawn to scale. To more clearly illustrate certain embodiments, a letter indicating variations of the same structure, material, or process step may follow a figure number.</p>
<heading id="h-0006" level="1">DETAILED DESCRIPTION OF ILLUSTRATIVE EMBODIMENTS</heading>
<p id="p-0019" num="0018">The making and using of embodiments are discussed in detail below. It should be appreciated, however, that the present invention provides many applicable inventive concepts that may be embodied in a wide variety of specific contexts. The specific embodiments discussed are merely illustrative of specific ways to make and use the invention, and do not limit the scope of the invention.</p>
<p id="p-0020" num="0019">The present invention will be described with respect to embodiments in a specific context, namely a system and method for detecting a high current condition in a motor. Embodiments of this invention may also be applied to other circuits and systems that require detection of high currents resulting from short circuits and other high current conditions.</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIG. 1</figref> illustrates drive system <b>100</b> for electric bicycle <b>136</b> according to an embodiment of the present invention. Drive system <b>100</b> has motor control system <b>102</b> coupled to motor <b>132</b> and motor position sensor <b>134</b>. In an embodiment, motor <b>132</b> is a three phase permanent magnet brushless DC motor. In alternative embodiments, motor <b>132</b> can be of a different architecture from a three phase induction motor, for example, a single phase DC motor or stepper motor. Motor position sensor <b>134</b> is coupled to motor <b>132</b> and utilizes motor sensing techniques known in the art such as a Hall effect sensor or a back EMF (BEMF) signal to sense the motor position and/or velocity. The output of motor position sensor <b>134</b> is coupled to Motor Control Unit (MCU) <b>130</b>, and is used as feedback signals for closed-loop control of the motor. In an embodiment, motor control system <b>102</b> is implemented with components on a printed circuit board (PCB). In alternative embodiments, some, or all of the components in MCU <b>130</b> are implemented on an integrated circuit.</p>
<p id="p-0022" num="0021">MCU <b>130</b> provides driver control signals p<b>1</b>, p<b>2</b> and p<b>3</b> according to conventional techniques such as using pulse width modulated (PWM) drive signals. Drivers <b>108</b>, <b>110</b> and <b>112</b> buffer driver control signals p<b>1</b>, p<b>2</b> and p<b>3</b> to provide drive signals to three phase MOSFET drivers <b>104</b>. Drivers <b>108</b>, <b>110</b> and <b>112</b> are referenced to a 15V supply voltage, however, other driver supply voltages can be used in alternative embodiments. Three-phase MOSFET drivers <b>104</b> have NMOS devices <b>116</b>, <b>120</b>, <b>124</b>, <b>114</b>, <b>118</b> and <b>122</b>, which are configured as three inverters. Each NMOS device preferably integrates a source-drain diode. In alternative embodiments, the diode can be omitted and/or other transistor types can be used for some or all of the driver transistors, for example PMOS, JFET or BJT devices. The drain nodes of half side MOSFET drivers <b>104</b> are coupled to the stator input of motor <b>132</b>. In alternative embodiments of the present invention, other driver device types can be used, for example, a driver for permanent magnet synchronous motor (PMSM), an induction motor, etc.</p>
<p id="p-0023" num="0022">Three-phase MOSFET drivers <b>104</b> are further coupled to power supply <b>142</b>. In an embodiment, power supply is a 36 or 48 VDC battery. In alternative embodiments, other power supplies, such as switched mode power supplies, or wall power converters can be used. Other power supply voltage levels besides 36 or 48 VDC can be used as well depending on the particular application and its requirements.</p>
<p id="p-0024" num="0023">Return current though MOSFET drivers <b>104</b> is measured across shunt resistor R<sub>SHUNT </sub>coupled to the ground terminal of MOSFET drivers <b>104</b>. Resistor R<sub>SHUNT </sub>is preferably about 2 m&#x3a9;, although other values can be used in alternative embodiments. Voltage V<sub>SHUNT </sub>across R<sub>SHUNT </sub>is monitored by current detection circuit <b>106</b>, which provides integrated current signal V<sub>IC </sub>and overload detect signal OVL. Current signal V<sub>IC </sub>is preferably proportional to the integral of V<sub>SHUNT </sub>in order to reduce steady state error in the motor control loop. In alternative embodiments, current signal V<sub>IC </sub>can be a proportional to V<sub>SHUNT</sub>, or be omitted. Signal V<sub>IC </sub>is monitored by an analog-to-digital (A/D) converter in MCU <b>130</b> in embodiments where MCU <b>130</b> is implemented digitally. Alternatively, the A/D converter can be external to MCU <b>130</b>. In embodiments where MCU <b>130</b> is implemented as an analog motor controller, an A/D converter may not be necessary.</p>
<p id="p-0025" num="0024">Overload detect signal OVL becomes active when Current Detection Circuit <b>106</b> detects a high current condition. Signal OVL is preferably an active low digital TTL or CMOS signal referenced to a 5V, however, in alternative embodiments, OVL can be active high and operate according to other digital signaling standards with reference to other supply voltages. When current detection signal OVL becomes activated, MCU <b>130</b> deactivates motor <b>132</b> by turning off NMOS devices <b>114</b>, <b>116</b>, <b>118</b>, <b>120</b>, <b>122</b> and <b>124</b> within MOSFET drivers <b>104</b> to prevent damage to MOSFET drivers <b>104</b> and motor <b>132</b>.</p>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. 2</figref> illustrates a schematic of embodiment current detection circuit <b>200</b>. Current detection circuit <b>200</b> has transistor Q<b>1</b> coupled to V<sub>SHUNT</sub>, which is the voltage across current detection resistor R<sub>SHUNT </sub>(<figref idref="DRAWINGS">FIG. 1</figref>). Q<b>1</b> is coupled to V<sub>SHUNT </sub>via series resistor R<sub>S </sub>in parallel with capacitor C<sub>P</sub>. Resistor R<sub>L </sub>is a pulldown resistor coupled to the collector of transistor Q<b>1</b>. In an embodiment, Resistor R<sub>S </sub>is preferably about 2K&#x3a9;, capacitor C<sub>P </sub>is preferably about 1000 pF, and R<sub>L </sub>is preferably about 20 K&#x3a9;. Q<b>1</b> is preferably a 2N5551 bipolar junction transistor (BJT), however, other transistor types and technologies can be used in alternative embodiments, for example MOSFETs, JFETs, etc. Alternatively, other values for R<sub>S</sub>, R<sub>L </sub>and C<sub>P </sub>can be used. Furthermore, R<sub>S </sub>and C<sub>P </sub>can be omitted and R<sub>L </sub>can be replaced with an alternative load, such as a current source, depending on the application and its requirements. Resistor R<sub>S </sub>buffers the base of transistor Q<b>1</b> from current detection resistor R<sub>SHUNT</sub>. C<sub>P </sub>provides a feedforward AC path to the base of transistor Q<b>1</b> to provide a faster response time.</p>
<p id="p-0027" num="0026">During operation of the current detection circuit <b>200</b> when input V<sub>SHUNT </sub>is less than about 0.7V, Q<b>1</b> conducts very little or no collector-emitter current, therefore the voltage of output OVL is at the 5V power supply voltage. In alternative embodiments of the present invention, OVL can be referenced to other supply voltages. When the base-emitter voltage of Q<b>1</b> is sufficient to turn-on Q<b>1</b>, for example, about 0.7V, current at the collector of Q<b>1</b> draws current though resistor R<sub>L </sub>and signal OVL is pulled low, thereby signifying a high current condition in three phase inverter <b>104</b> (<figref idref="DRAWINGS">FIG. 1</figref>).</p>
<p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. 3</figref> illustrates another embodiment of current detection circuit <b>300</b> that includes current detection circuit <b>200</b> of <figref idref="DRAWINGS">FIG. 2</figref>, as well as integration circuit <b>302</b>. Integration circuit <b>302</b> has OPAMP <b>304</b>, integration capacitor C<sub>I </sub>coupled between the output of OPAMP <b>304</b> and the negative input of OPAMP <b>304</b>, and resistor R<sub>I </sub>coupled between input voltage V<sub>SHUNT </sub>and the negative input of OPAMP <b>304</b>. The positive input of OPAMP <b>304</b> is biased with a voltage divider made of resistors R<sub>1 </sub>and R<sub>2</sub>. The output of OPAMP <b>304</b> forms integrated current output V<sub>IC</sub>, which is coupled to the base of Q<b>1</b> via series resistor R<sub>S2</sub>. In an embodiment of the present invention, R<sub>I </sub>is about 500&#x3a9;, R<b>1</b> is about 10 K&#x3a9;, R<b>2</b> is about 60 K&#x3a9;, R<sub>S2 </sub>is about 50 K&#x3a9;, and C<sub>I </sub>is about 10,000 pF. C<sub>F</sub>, which is used to filter the input of the current detect circuit, is about 0.1 &#x3bc;F. The OPAMP is preferably an LM358 amplifier, however, in alternative embodiments of the present invention, other component values and amplifier types can be used. By coupling integrated current output V<sub>IC </sub>to the base of Q<b>1</b>, noise is filtered in order to avoid extraneous triggering of the OVL signal.</p>
<p id="p-0029" num="0028">In the embodiments illustrated <figref idref="DRAWINGS">FIG. 3</figref>, current detection circuit <b>300</b> operates at a power supply voltage of about 5V. In alternative embodiments, other power supply voltages can be used.</p>
<p id="p-0030" num="0029">During closed-loop operation of the motor controller, integration circuit <b>302</b> is used to detect the return current of MOSFET drivers <b>104</b> (<figref idref="DRAWINGS">FIG. 1</figref>). Assuming no OPAMP input current, the voltage at the positive input U<sub>+</sub> and negative input U<sub>&#x2212;</sub> of OPAMP <b>304</b> is:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>U</i><sub>+</sub><i>=U</i><sub>&#x2212;</sub>=5<i>v*</i>60<i>k</i>/(60<i>k+</i>10<i>k</i>)=4.2<i>v. </i><?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
Output voltage V<sub>IC </sub>of integrator circuit <b>302</b> is, therefore:
</p>
<p id="p-0031" num="0030">
<maths id="MATH-US-00001" num="00001">
<math overflow="scroll">
<mrow>
  <msub>
    <mi>V</mi>
    <mi>IC</mi>
  </msub>
  <mo>=</mo>
  <mrow>
    <mn>4.2</mn>
    <mo>-</mo>
    <mrow>
      <mfrac>
        <mn>1</mn>
        <msub>
          <mi>C</mi>
          <mi>I</mi>
        </msub>
      </mfrac>
      <mo>&#x2062;</mo>
      <mrow>
        <msubsup>
          <mo>&#x222b;</mo>
          <mn>0</mn>
          <mi>t</mi>
        </msubsup>
        <mo>&#x2062;</mo>
        <mrow>
          <mfrac>
            <mrow>
              <mn>4.2</mn>
              <mo>-</mo>
              <msub>
                <mi>V</mi>
                <mi>SHUNT</mi>
              </msub>
            </mrow>
            <msub>
              <mi>R</mi>
              <mi>I</mi>
            </msub>
          </mfrac>
          <mo>&#x2062;</mo>
          <mstyle>
            <mspace width="0.2em" height="0.2ex"/>
          </mstyle>
          <mo>&#x2062;</mo>
          <mrow>
            <mrow>
              <mo>&#x2146;</mo>
              <mi>t</mi>
            </mrow>
            <mo>.</mo>
          </mrow>
        </mrow>
      </mrow>
    </mrow>
  </mrow>
</mrow>
</math>
</maths>
<br/>
When current to the motor is increasing, in some cases due to an increased load on the motor, the current across shunt resistor R<sub>SHUNT </sub>will increase, thereby causing a corresponding increase in V<sub>SHUNT</sub>. Because the output voltage and inverting input of OPAMP <b>304</b> have a reverse relationship, voltage V<sub>IC </sub>will decrease with a corresponding increase of V<sub>SHUNT </sub>(if V<sub>SHUNT </sub>is greater than 4.2 V). Output V<sub>IC</sub>, therefore, can be used to indicate a current value. In embodiments where the motor is under closed loop control, voltage V<sub>IC </sub>will provide a direct indication of the motor load current.
</p>
<p id="p-0032" num="0031">In an embodiment, signal V<sub>IC </sub>is monitored by an A/D converter in MCU <b>130</b> (<figref idref="DRAWINGS">FIG. 1</figref>), which determines a voltage change ratio in a period of time and derives a current slope value. Under heavy load conditions or when the output of MOSFET drivers <b>104</b> are shorted, voltage V<sub>SHUNT </sub>will increase dramatically and will, in turn, turn on transistor Q<b>1</b>, which will induce a low voltage level at overload detect signal OVL. In an embodiment, the OVL is coupled to an emergency stop port of MCU <b>130</b> (<figref idref="DRAWINGS">FIG. 1</figref>). When overload detect signal OVL is detected to be low by MCU <b>130</b>, MCU <b>130</b> immediately shuts off all PWM signals to drivers <b>108</b>, <b>110</b> and <b>112</b> (<figref idref="DRAWINGS">FIG. 1</figref>).</p>
<p id="p-0033" num="0032">Turning to <figref idref="DRAWINGS">FIG. 4</figref>, waveform diagram <b>400</b> illustrates the operation of current detection circuit <b>300</b>. Trace <b>404</b> represents the load current being supplied to the motor and trace <b>402</b> represents output V<sub>IC </sub>of OPAMP <b>304</b>. It can be seen that trace <b>402</b> decreases in response to the increasing current represented by trace <b>402</b>. The decrease in output voltage V<sub>IC </sub>of OPAMP <b>304</b> occurs, as shown at section <b>406</b> of trace <b>404</b>.</p>
<p id="p-0034" num="0033">It should be further appreciated that in further embodiments, the motor controller, drivers, current detection circuit, and/or other blocks can be implemented in other ways besides using a PCB. For example an integrated circuit can be used. Furthermore, in alternative embodiments, other applications besides electric bicycles can be used, for example, household appliances and industrial motor applications.</p>
<p id="p-0035" num="0034">It will also be readily understood by those skilled in the art that materials and methods may be varied while remaining within the scope of the present invention. It is also appreciated that the present invention provides many applicable inventive concepts other than the specific contexts used to illustrate embodiments. Accordingly, the appended claims are intended to include within their scope such processes, machines, manufacture, compositions of matter, means, methods, or steps.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-math idrefs="MATH-US-00001" nb-file="US08624536-20140107-M00001.NB">
<img id="EMI-M00001" he="7.03mm" wi="76.20mm" file="US08624536-20140107-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A system for controlling a motor, the system comprising:
<claim-text>a driver circuit configured to drive the motor;</claim-text>
<claim-text>a current sensing impedance coupled to the driver circuit;</claim-text>
<claim-text>an overload detection circuit coupled to the current sensing impedance, the overload detection circuit comprising a transistor and a detection output node, wherein the transistor comprises:
<claim-text>a control terminal coupled to the current sensing impedance,</claim-text>
<claim-text>an output terminal coupled to the detection output node; and</claim-text>
<claim-text>a reference terminal coupled to a reference node, wherein the control terminal, output terminal and reference terminal are separate terminals, and wherein the control terminal controls a current between the output terminal and the reference terminal; and</claim-text>
</claim-text>
<claim-text>an integration circuit coupled between the current sensing impedance and the overload detection circuit.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the transistor comprises a single bipolar junction transistor (BJT), wherein the control terminal comprises a base of the BJT, the output terminal comprises a collector of the BJT and the reference terminal comprises an emitter of the BJT.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The system of <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the overload detection circuit further comprises a first resistor coupled between the current sensing impedance and the base of the BJT.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>a first resistor coupled between the current sensing impedance and the control terminal of the transistor; and</claim-text>
<claim-text>a second resistor coupled between the integration circuit and the control terminal of the transistor.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising a controller unit coupled to the driver circuit and the detection output node, the controller unit comprising a motor position input for sensing a position of a motor.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The system of <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein the motor further comprises a current sensing input coupled to an output of the integration circuit.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The system of <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein the driver circuit comprises three drivers for driving a three phase motor.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The system of <claim-ref idref="CLM-00006">claim 6</claim-ref>, further comprising the motor.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the sensing impedance comprises a resistor.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. A circuit for sensing an overload condition in a driver, the circuit comprising:
<claim-text>a sensing impedance configured to be coupled to a driver;</claim-text>
<claim-text>an integration circuit coupled to the sensing impedance; and</claim-text>
<claim-text>an overload detector comprising a transistor, the transistor comprising
<claim-text>a control terminal coupled to the sensing impedance,</claim-text>
<claim-text>an output terminal coupled to an overload signal, and</claim-text>
<claim-text>a reference terminal coupled to a reference voltage, wherein the control terminal controls a current between the output terminal and the reference terminal.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The circuit of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein:
<claim-text>the transistor comprises a bipolar junction transistor (BJT);</claim-text>
<claim-text>the control terminal comprises a base of the BJT;</claim-text>
<claim-text>the output terminal comprises a collector of the BJT; and</claim-text>
<claim-text>the reference terminal comprises an emitter of the BJT.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The circuit of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the BJT comprises an NPN transistor.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The circuit of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the integration circuit comprises:
<claim-text>an opamp; and</claim-text>
<claim-text>a capacitor coupled between an output of the opamp and an inverting input of the opamp.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The circuit of <claim-ref idref="CLM-00010">claim 10</claim-ref>, further comprising:
<claim-text>a first resistor coupled between the sensing impedance and the control terminal of the transistor; and</claim-text>
<claim-text>a second resistor coupled between an output of the integration circuit and the control terminal of the transistor.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. A method for sensing an overload condition in a motor, the method comprising:
<claim-text>monitoring a voltage across a shunt resistor coupled to a return path of a driver coupled to the motor, monitoring comprising
<claim-text>sensing a node of the shunt resistor with a control terminal of a transistor, wherein the control terminal controls a current between an output terminal of the transistor and a reference terminal of the transistor,</claim-text>
<claim-text>turning on the transistor if a voltage at the node of the shunt resistor exceeds a threshold, and</claim-text>
<claim-text>activating an overload signal coupled to the output terminal of the transistor if the transistor is turned on.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The method of <claim-ref idref="CLM-00015">claim 15</claim-ref>, further comprising:
<claim-text>detecting the overload signal; and</claim-text>
<claim-text>turning off the driver based on the detecting.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The method of <claim-ref idref="CLM-00016">claim 16</claim-ref>, wherein:
<claim-text>detecting the overload signal is performed with a microcontroller configured to control the motor.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The method of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein:
<claim-text>the transistor comprises a bipolar junction transistor (BJT);</claim-text>
<claim-text>the control terminal comprises a base of the BJT; and</claim-text>
<claim-text>the output terminal comprises a collector of the BJT.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
