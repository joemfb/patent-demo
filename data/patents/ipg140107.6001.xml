<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08627124-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08627124</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13024605</doc-number>
<date>20110210</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<us-term-of-grant>
<us-term-extension>405</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>1</main-group>
<subgroup>32</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>713320</main-classification>
</classification-national>
<invention-title id="d2e53">Techniques for performing storage power management</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>4984103</doc-number>
<kind>A</kind>
<name>Nigam</name>
<date>19910100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>360 741</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>5404487</doc-number>
<kind>A</kind>
<name>Murata et al.</name>
<date>19950400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>711113</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>5493670</doc-number>
<kind>A</kind>
<name>Douglis et al.</name>
<date>19960200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>713324</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>5574920</doc-number>
<kind>A</kind>
<name>Parry</name>
<date>19961100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>713340</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>5898880</doc-number>
<kind>A</kind>
<name>Ryu</name>
<date>19990400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>713323</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>6415388</doc-number>
<kind>B1</kind>
<name>Browning et al.</name>
<date>20020700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>713322</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>6859886</doc-number>
<kind>B1</kind>
<name>Johnson</name>
<date>20050200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>713600</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>7062675</doc-number>
<kind>B1</kind>
<name>Kemeny et al.</name>
<date>20060600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>714 15</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>7337339</doc-number>
<kind>B1</kind>
<name>Choquette et al.</name>
<date>20080200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>713320</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>7426647</doc-number>
<kind>B2</kind>
<name>Fleck et al.</name>
<date>20080900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>713320</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>7539881</doc-number>
<kind>B2</kind>
<name>Shaw et al.</name>
<date>20090500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>7596638</doc-number>
<kind>B2</kind>
<name>Lee et al.</name>
<date>20090900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>710 18</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>7634585</doc-number>
<kind>B2</kind>
<name>Conley et al.</name>
<date>20091200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>710  1</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>7640231</doc-number>
<kind>B2</kind>
<name>Alvarez et al.</name>
<date>20091200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>  1  1</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>8072704</doc-number>
<kind>B1</kind>
<name>Goldberg et al.</name>
<date>20111200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>360 7806</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>2005/0102544</doc-number>
<kind>A1</kind>
<name>Brewer et al.</name>
<date>20050500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>2008/0301473</doc-number>
<kind>A1</kind>
<name>Perez et al.</name>
<date>20081200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>713300</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00018">
<document-id>
<country>US</country>
<doc-number>2008/0320323</doc-number>
<kind>A1</kind>
<name>Brittain et al.</name>
<date>20081200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00019">
<document-id>
<country>US</country>
<doc-number>2010/0332871</doc-number>
<kind>A1</kind>
<name>Allalouf et al.</name>
<date>20101200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>713320</main-classification></classification-national>
</us-citation>
<us-citation>
<nplcit num="00020">
<othercit>Chen et al., &#x2018;Leveraging Disk Drive Acoustic Modes for Power Management&#x2019;; IBM Research&#x2014;Haifa, Israel; 26th IEEE (MSST2010) Symposium on Massive Storage Systems and Technologies; http://storageconference.org/2010/Papers/MSST/Chen.pdf.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>18</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>713300-340</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>6</number-of-drawing-sheets>
<number-of-figures>7</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20120210149</doc-number>
<kind>A1</kind>
<date>20120816</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Carter</last-name>
<first-name>John B.</first-name>
<address>
<city>Austin</city>
<state>TX</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Felter</last-name>
<first-name>Wesley M.</first-name>
<address>
<city>Austin</city>
<state>TX</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Hylick</last-name>
<first-name>Anthony N.</first-name>
<address>
<city>Austin</city>
<state>TX</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="004" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Ware</last-name>
<first-name>Malcolm S.</first-name>
<address>
<city>Austin</city>
<state>TX</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Carter</last-name>
<first-name>John B.</first-name>
<address>
<city>Austin</city>
<state>TX</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Felter</last-name>
<first-name>Wesley M.</first-name>
<address>
<city>Austin</city>
<state>TX</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Hylick</last-name>
<first-name>Anthony N.</first-name>
<address>
<city>Austin</city>
<state>TX</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="004" designation="us-only">
<addressbook>
<last-name>Ware</last-name>
<first-name>Malcolm S.</first-name>
<address>
<city>Austin</city>
<state>TX</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Yudell Isidore Ng Russell PLLC</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>International Business Machines Corporation</orgname>
<role>02</role>
<address>
<city>Armonk</city>
<state>NY</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Myers</last-name>
<first-name>Paul R</first-name>
<department>2111</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A technique for performing storage power management on storage subsystems includes measuring, using a power measurement device, power consumption of a storage subsystem. A first average power and a second average power for the storage subsystem are calculated based on the measured power consumption. In this case, the first average power is calculated over a shorter time period than the second average power. One or more first actuators are incremented in response to the first average power of the storage subsystem being greater than a first power level to reduce the first average power of the storage subsystem below the first power level within a first time period. One or more second actuators are incremented in response to the second average power of the storage subsystem being greater than a second power level and less than the first power level to reduce the second average power of the storage subsystem below the second power level within a second time period that is greater than the first time period. Finally, one or more of the first actuators and the second actuators are decremented in response to the second average power of the storage subsystem being more than an offset below the second power level to increase the power consumption of the storage subsystem.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="201.00mm" wi="182.54mm" file="US08627124-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="197.02mm" wi="186.35mm" file="US08627124-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="198.12mm" wi="162.73mm" file="US08627124-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="213.44mm" wi="175.26mm" file="US08627124-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="223.77mm" wi="181.95mm" file="US08627124-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="222.67mm" wi="180.34mm" file="US08627124-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="200.58mm" wi="150.45mm" file="US08627124-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND</heading>
<p id="p-0002" num="0001">1. Technical Field</p>
<p id="p-0003" num="0002">The present invention generally relates to power management and in particular to techniques for performing storage power management.</p>
<p id="p-0004" num="0003">2. Description of the Related Art</p>
<p id="p-0005" num="0004">Power management has been implemented as a feature of some electrical appliances (e.g., copiers, computer systems, and computer system peripherals, such as monitors and printers) to turn off appliance power or switch the appliance to a low-power state when the appliance is inactive. In computing, personal computer (PC) power management has been built around the advanced configuration and power interface (ACPI) standard. The ACPI standard provides for unified operating system (OS) device configuration and power management and defines platform independent interfaces for hardware discovery, configuration, power management, and monitoring.</p>
<p id="p-0006" num="0005">In general, computer system power management is desirable to: reduce overall energy consumption; prolong battery life for portable and embedded systems; reduce cooling requirements; reduce noise; and reduce operating costs associated with energy and cooling. Reduced power consumption leads to reduced heat dissipation (which increases system stability) and less energy use (which saves money and reduces environmental impact). Power management for processors can be implemented over an entire processor or in specific processor areas. For example, dynamic voltage scaling and dynamic frequency scaling may be employed to reduce a processor core voltage and clock rate, respectively, to lower processor power consumption, albeit at lower processor performance.</p>
<p id="p-0007" num="0006">As the cost of power increases, data center operators are increasingly challenged to lower data center power requirements. Along with lowering data center power requirements, data center operators also need to ensure an adequate number of servers are deployed to support existing and new business. To address these conflicting goals, data center operators have implemented power management approaches that monitor and coordinate power distribution to servers of a data center. In general, conventional power management approaches have employed server power capping to protect a power distribution system from overdraw and to facilitate effective use of available power such that the number of servers (e.g., in a server rack) can be increased without exceeding branch circuit capacity.</p>
<p id="p-0008" num="0007">Recently, storage infrastructure has been growing at a rate of nearly sixty percent per year to meet increasing demand for storage. In general, storage is consuming a larger portion (around forty percent at present) of total information technology (IT) power, placing additional stress on already strained power delivery systems. Typically, additional storage capacity has been realized via additional (and/or higher capacity) storage devices that consume additional power. At least one conventional storage subsystem has attempted to reduce power consumption by spinning-down hard disk drives (HDDs) when access to the HDDs is sparse, irrespective of a current power consumption of the storage subsystem.</p>
<heading id="h-0002" level="1">BRIEF SUMMARY</heading>
<p id="p-0009" num="0008">Disclosed are a method, a storage subsystem, and a computer program product (embodied on a computer-readable storage medium) for performing storage power management.</p>
<p id="p-0010" num="0009">A technique for performing storage power management on storage subsystems includes measuring, using a power measurement device, power consumption of a storage subsystem. A first average power (shorter time average power) and a second average power (longer time average power) for the storage subsystem are calculated based on the measured power consumption. In this case, the first average power is calculated over a shorter time period than the second average power. One or more first (e.g., fast) actuators are incremented in response to the first average power of the storage subsystem being greater than a first power level to reduce the first average power of the storage subsystem below the first power level within a first time period (e.g., less than about one-hundred milliseconds). One or more second (e.g., slow) actuators are incremented in response to the second average power of the storage subsystem being greater than a second power level and less than the first power level to reduce the second average power of the storage subsystem below the second power level within a second time period (e.g., less than about ten seconds). Finally, one or more of the first actuators and the second actuators are decremented in response to the second average power of the storage subsystem being more than an offset below the second power level to increase the power consumption of the storage subsystem.</p>
<p id="p-0011" num="0010">The above summary contains simplifications, generalizations and omissions of detail and is not intended as a comprehensive description of the claimed subject matter but, rather, is intended to provide a brief overview of some of the functionality associated therewith. Other systems, methods, functionality, features and advantages of the claimed subject matter will be or will become apparent to one with skill in the art upon examination of the following figures and detailed written description.</p>
<p id="p-0012" num="0011">The above as well as additional objectives, features, and advantages of the present invention will become apparent in the following detailed written description.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0013" num="0012">The description of the illustrative embodiments is to be read in conjunction with the accompanying drawings, wherein:</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 1</figref> is a diagram of a relevant portion of an exemplary storage subsystem environment that includes a storage subsystem that implements storage power management in accordance with various embodiments of the present disclosure;</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 2</figref> is a diagram for implementing storage power management in accordance with an embodiment of the present disclosure;</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 3</figref> is a diagram for implementing storage power management in accordance with another embodiment of the present disclosure;</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 4</figref> is a flow chart of an exemplary process for implementing storage power management according to one embodiment of the present disclosure;</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 5</figref> is a flow chart of an exemplary process for implementing storage power management according to another embodiment of the present disclosure;</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 6</figref> is a flow chart of an exemplary process for implementing storage power management according to one aspect of the present disclosure; and</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 7</figref> is a flow chart of another exemplary process for implementing storage power management according to another embodiment of the present disclosure.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0021" num="0020">The illustrative embodiments provide a method, a storage subsystem, and a computer program product (embodied on a computer-readable storage medium) for performing storage power management.</p>
<p id="p-0022" num="0021">In the following detailed description of exemplary embodiments of the invention, specific exemplary embodiments in which the invention may be practiced are described in sufficient detail to enable those skilled in the art to practice the invention, and it is to be understood that other embodiments may be utilized and that logical, architectural, programmatic, mechanical, electrical and other changes may be made without departing from the spirit or scope of the present invention. The following detailed description is, therefore, not to be taken in a limiting sense, and the scope of the present invention is defined by the appended claims and equivalents thereof.</p>
<p id="p-0023" num="0022">It is understood that the use of specific component, device and/or parameter names are for example only and not meant to imply any limitations on the invention. The invention may thus be implemented with different nomenclature/terminology utilized to describe the components/devices/parameters herein, without limitation. Each term utilized herein is to be given its broadest interpretation given the context in which that term is utilized.</p>
<p id="p-0024" num="0023">The present disclosure is generally directed to techniques for power measurement driven storage subsystem power capping. According to the present disclosure, power and performance of a storage subsystem are adjusted to achieve a desired externally set power cap. In general, conventional storage subsystems have been incapable of utilizing an externally set power cap to achieve power proportionality. According to the present disclosure, power consumption of a storage subsystem is periodically measured to ensure that both electrical and thermal power caps are not being violated and that power consumption is not significantly lower than a set thermal power cap. In various embodiments, appropriate actuators are activated (incremented or decremented) to maintain the integrity of the power delivery system and to achieve a power proportional storage subsystem. An electrical power cap (which sets a power level for a power &#x2018;emergency&#x2019; violation) may be measured, for example, against a one-hundred millisecond power average and a thermal power cap (which sets a power level for a power &#x2018;budget&#x2019; violation) may be is measured, for example, against a thirty second power average. In general, any adverse effects of implementing a thermal power cap, which governs performance of a storage subsystem via long-term average power consumption, can be mitigated by ensuring fast actuators maintain power supply integrity.</p>
<p id="p-0025" num="0024">According to the present disclosure, techniques are employed to: reduce power consumption of storage subsystems; facilitate better power management of storage subsystems; and reduce branch circuit damage of branch circuits that provide power to storage subsystems. The disclosed techniques facilitate power-proportional storage subsystems where power consumption can be balanced with performance to better manage storage subsystem power consumption and to achieve externally set power caps. The disclosed techniques periodically monitor power consumption of a storage subsystem to ensure power branch circuit integrity is maintained.</p>
<p id="p-0026" num="0025">In various embodiments, two sets of actuators with different responsiveness are implemented via a power management application. For example, fast actuators (e.g., that act within less than about one-hundred milliseconds) and slow actuators (e.g., that act within less than about ten seconds) may be employed alone or in conjunction with each other. When power consumption of a storage subsystem is too great (i.e., a power emergency), fast actuators are activated to ensure a power delivery infrastructure (e.g., a branch circuit) is not damaged by restricting the length of time power violations are allowed. By definition, when all implemented fast actuators are fully activated power consumption of a storage subsystem is below a power emergency level.</p>
<p id="p-0027" num="0026">As one example of a fast actuator, an acoustic mode (or modes) of hard disk drives (HDDs) can facilitate implementation of a fast actuator to reduce power requirements of a storage subsystem when a power emergency occurs. As another example, throttling input/output (I/O) requests to a storage subsystem can facilitate implementation of a fast actuator (with or without invoking one or more acoustic modes of one or more HDDs of the storage subsystem) to reduce power requirements of the storage subsystem when a power emergency occurs. In various power emergencies, multiple fast actuators may be implemented in series or in parallel. When I/O requests to a storage subsystem are throttled, a lower bound on the throttling of I/O requests may be set to ensure that useful work can still be performed (i.e., I/O requests cannot be throttled to zero if the performance of useful work is desired).</p>
<p id="p-0028" num="0027">Various slow actuators may also be employed (alone or in combination with fast actuators) to facilitate better power budget management depending on the application. For example, slow actuators may be implemented by: storing frequently accessed data in one or more solid state devices (SSDs) such that fewer HDD accesses are incurred; and reducing active (and seek) power consumption by spinning down HDDs. Data may also be consolidated onto a smaller number of HDDs to attain maximum HDD spin-down savings. However, it should be appreciated that spinning down HDDs is not desirable when all HDDs of a storage subsystem are being accessed. Moreover, when all HDDs are already spun-down for energy saving purposes, other actuators may need to be employed to achieve a power cap.</p>
<p id="p-0029" num="0028">Fast and slow actuators may be triggered in series or in parallel to achieve a desired power cap. In a typical embodiment, an assumption is made that an HDD acoustic mode has a one to ten millisecond response time and I/O duty cycle never goes to zero (in order to continue servicing incoming I/O requests). In general, drive spin-down requests should not be issued so frequently as to adversely effect the integrity of the HDDs of a storage subsystem.</p>
<p id="p-0030" num="0029">With reference to <figref idref="DRAWINGS">FIG. 1</figref>, an exemplary data storage environment <b>100</b> is illustrated that includes a storage subsystem <b>110</b> that is configured to implement power management according to one or more embodiments of the present disclosure. Storage subsystem <b>110</b> may take various forms, such as a storage area network (SAN), network-attached storage (NAS), or a combination thereof. Storage subsystem <b>110</b> includes a processor <b>102</b> (which may include one or more processor cores for executing program code) coupled to a memory subsystem <b>104</b>, a display <b>106</b>, one or more input devices <b>108</b>, a hard disk drive (HDD) array <b>140</b> including HDDs <b>142</b> (which may be magnetic and/or optical drives), a power measurement device (PMD) <b>152</b> such as a power meter, a solid state device (SSD) <b>130</b>, and a network adapter <b>109</b>.</p>
<p id="p-0031" num="0030">Memory subsystem <b>104</b> may include, for example, application appropriate amounts of various memories (e.g., dynamic random access memory (DRAM), static RAM (SRAM), and read-only memory (ROM)), and/or one or more mass storage devices, such as magnetic or optical disk drives. Memory subsystem <b>104</b> includes an operating system (OS) <b>114</b> for storage subsystem <b>110</b>, a power management application <b>116</b>, and also includes application programs, such as a browser <b>112</b> (which may optionally include customized plug-ins to support various client applications), and other applications (e.g., a word processing application, a presentation application, and an email application) <b>118</b>. As is further described herein, power management application <b>116</b> employs one or more fast/slow actuators to manage power consumption of storage subsystem <b>110</b>.</p>
<p id="p-0032" num="0031">Display <b>106</b> may be, for example, a cathode ray tube (CRT) or a liquid crystal display (LCD). Input device(s) <b>108</b> of storage subsystem <b>110</b> may include, for example, a mouse, a keyboard, haptic devices, and/or a touch screen. Network adapter <b>109</b> supports communication of storage subsystem <b>110</b> with one or more wired and/or wireless networks utilizing one or more communication protocols, such as 802.x, HTTP, simple mail transfer protocol (SMTP), etc. Storage subsystem <b>110</b> is shown coupled via one or more wired or wireless networks, such as the Internet <b>122</b>, to various clients <b>124</b> and <b>126</b> that access information of interest (to users of clients <b>124</b> and <b>126</b>) that is stored in storage subsystem <b>110</b>. In addition, clients <b>124</b> and <b>126</b> (or another device) may be employed to provide external power caps to storage subsystem <b>110</b>. As is described in further detail herein, SSD <b>130</b> may be advantageously utilized to reduce accesses to HDDs <b>142</b> in certain applications. For example, frequently accessed data may be off-loaded from HDDs <b>142</b> to SSD <b>130</b> to allow one or more HDDs <b>142</b> of HDD array <b>140</b> to be spun-down.</p>
<p id="p-0033" num="0032">Those of ordinary skill in the art will appreciate that the hardware components and basic configuration depicted in <figref idref="DRAWINGS">FIG. 1</figref> may vary. The illustrative components within storage subsystem <b>110</b> are not intended to be exhaustive, but rather are representative to highlight components that may be utilized to implement the present invention. For example, other devices/components may be used in addition to or in place of the hardware depicted. The depicted example is not meant to imply architectural or other limitations with respect to the presently described embodiments.</p>
<p id="p-0034" num="0033">With reference to <figref idref="DRAWINGS">FIG. 2</figref>, table <b>200</b> illustrates a number of storage power capping states (c-states) for exemplary fast actuators implemented according to an embodiment of the present disclosure to facilitate storage power management. Specifically, table <b>200</b> depicts seven c-states CS<b>0</b>-CS<b>6</b> for fast actuators that correspond to HDD acoustic modes and throttling of I/O requests to storage subsystem <b>110</b>. In c-state CS<b>0</b>, I/O requests are not throttled (i.e., 100% of I/O requests are issued) and an HDD acoustic mode is off. In the example illustrated in <figref idref="DRAWINGS">FIG. 2</figref>, HDDs of the storage subsystem have three acoustic modes (i.e., modes &#x2018;1&#x2019;, &#x2018;2&#x2019;, and &#x2018;3&#x2019;). In this example, an HDD in a first acoustic mode (i.e., mode &#x2018;1&#x2019;) consumes more power than an HDD in a second acoustic mode (i.e., mode &#x2018;2&#x2019;). Similarly, an HDD in the second acoustic mode consumes more power than an HDD in a third acoustic mode (i.e., mode &#x2018;3&#x2019;). According to the present disclosure, an HDD may include more or less than three acoustic modes. Moreover, while the term &#x2018;acoustic mode&#x2019; is utilized herein, the techniques disclosed herein are applicable to other HDD modes (e.g., idle modes) that may be employed to reduce power consumption of an HDD.</p>
<p id="p-0035" num="0034">HDDs are placed in the first acoustic mode in c-state CS<b>1</b>, when a shorter time average power of storage subsystem <b>110</b> exceeds a level that indicates a power emergency. When the shorter time average power of storage subsystem <b>110</b> continues to indicate a power emergency, the second acoustic mode is entered in c-state CS<b>2</b>. Similarly, when the shorter time average power of storage subsystem <b>110</b> continues to indicate a power emergency, the third acoustic mode is entered in c-state CS<b>3</b>. Following c-state CS<b>3</b>, I/O throttling is employed in c-states CS<b>4</b>-CS<b>6</b>, as needed. More specifically, in c-state CS<b>4</b>, throttling of I/O requests to storage subsystem <b>110</b> is implemented and only 75% of I/O requests are actually issued to storage subsystem <b>110</b>. In c-state CS<b>5</b>, throttling of I/O requests to storage subsystem <b>110</b> is increased to 50%. In c-state CS<b>6</b>, throttling of I/O requests to storage subsystem <b>110</b> is increased to 75% (i.e., only 25% of I/O requests are actually issued to storage subsystem <b>110</b>).</p>
<p id="p-0036" num="0035">It is contemplated that changes in HDD acoustic modes of a storage subsystem and throttling of I/O requests to a storage subsystem may be employed in larger or smaller steps. It is also contemplated that a greater or lesser number of c-states may employed for the fast actuators and that additional fast actuators may be utilized. It is further contemplated that the fast actuators may be implemented in a different order (i.e., I/O throttling may be implemented before acoustic modes are implemented) and that multiple fast actuators may be incremented or decremented in a same c-state. It should appreciated that the fast actuators in table <b>200</b> of <figref idref="DRAWINGS">FIG. 2</figref> are fully activated in c-state CS<b>6</b>.</p>
<p id="p-0037" num="0036">With reference to <figref idref="DRAWINGS">FIG. 3</figref>, table <b>300</b> illustrates a number of c-states for exemplary slow actuators implemented according to an embodiment of the present disclosure to facilitate storage power management. Specifically, table <b>300</b> depicts seven c-states CS<b>6</b>-CS<b>12</b> for slow actuators that correspond to implementing SSD <b>130</b> and spinning down HDDs <b>142</b> of storage subsystem <b>110</b>. It should be appreciated that the c-state CS<b>6</b> of table <b>300</b> corresponds to the c-state CS<b>6</b> of table <b>200</b> of <figref idref="DRAWINGS">FIG. 2</figref>. That is, in this example, utilization of the slow actuators begins in c-state CS<b>7</b>, following full activation of the fast actuators. It is contemplated that one or more slow actuators may be adjusted during a same c-state as one or more fast actuators.</p>
<p id="p-0038" num="0037">In c-state CS<b>7</b>, SDD <b>130</b> is utilized to offload frequently accessed data from HDDs <b>142</b> using an interval of thirty minutes (in which frequently accessed data is replaced in SDD <b>130</b>) to reduce power requirements for storage subsystem <b>110</b>. In c-state CS<b>8</b>, when power consumption of storage subsystem <b>110</b> has not fallen below a desired level, an interval of forty-five minutes (in which frequently accessed data is replaced in SDD <b>130</b>) is utilized to further reduce power requirements for storage subsystem <b>110</b>. In c-state CS<b>9</b>, when power consumption of storage subsystem <b>110</b> has not fallen below a desired level, an interval of sixty minutes (in which frequently accessed data is replaced in SDD <b>130</b>) is utilized to further reduce power requirements for storage subsystem <b>110</b>. It is contemplated that the replacement interval for data stored in SSD <b>130</b> may vary above or below the example values. In any case, an interval in which data is moved from HDDs <b>142</b> to SSD <b>130</b> (assuming capacity is available) is extended in an attempt to further reduce power consumption for storage subsystem <b>110</b> when a longer time average power for storage subsystem <b>110</b> is not reduced below a desired level in a given c-state.</p>
<p id="p-0039" num="0038">In c-state CS<b>10</b>, when the longer time average power of storage subsystem <b>110</b> has not fallen below a desired level, spin-down of HDDs <b>142</b> of storage subsystem <b>110</b> is commenced and 25% of HDDs <b>142</b> are spun-down (i.e., 75% of the HDDs remain spun-up). In c-state CS<b>11</b>, when the longer time average power of storage subsystem <b>110</b> has not fallen below the desired level, spin-down of HDDs <b>142</b> of storage subsystem <b>110</b> is increased to 50% (i.e., 50% of HDDs <b>142</b> remain spun-up). In c-state CS<b>12</b>, when the longer time average power of storage subsystem <b>110</b> has not fallen below the desired level, spin-down of HDDs <b>142</b> of storage subsystem <b>110</b> is increased to 75% (i.e., 25% of HDDs <b>142</b> remain spun-up). It is contemplated that interval changes for the replacement of data in SSD <b>130</b> and changes in the percentage of HDDs <b>142</b> that are spun-down may be employed in larger or smaller increments. It is also contemplated that a greater or lesser number of c-states may employed for the slow actuators and that additional slow actuators may be utilized. It is further contemplated that the slow actuators may be implemented in a different order and that multiple slow actuators may be adjusted in a same c-state. It should appreciated that the slow actuators in table <b>300</b> of <figref idref="DRAWINGS">FIG. 3</figref> are fully activated in c-state CS<b>12</b>.</p>
<p id="p-0040" num="0039">With reference to <figref idref="DRAWINGS">FIG. 4</figref>, a flow chart for an exemplary process <b>400</b> that implements storage power management, according to various embodiments of the present disclosure, is illustrated. For ease of understanding, process <b>400</b> is explained in conjunction with <figref idref="DRAWINGS">FIGS. 1-3</figref>. Process <b>400</b> (which is periodically executed while storage subsystem <b>110</b> is powered) is initiated at block <b>402</b>. Next, in block <b>404</b> power consumption of storage subsystem <b>110</b> is measured. For example, processor <b>102</b> (executing power management application <b>116</b>) may initiate periodic power measurements for storage subsystem <b>110</b> using power measurement device (PMD) <b>152</b>. Then, in block <b>406</b> processor <b>102</b> calculates a shorter time average power (e.g., a one-hundred millisecond power average) for storage subsystem <b>110</b>. Next, in decision block <b>408</b>, processor <b>102</b> determines whether the shorter time average power of storage subsystem <b>110</b> is greater than a first power level (i.e., an electrical power cap).</p>
<p id="p-0041" num="0040">In one or more embodiments, the first power level corresponds to an externally set power cap. In response to the shorter time average power of storage subsystem <b>110</b> being greater than the first power level in block <b>408</b>, a power emergency is indicated and control transfers to block <b>410</b>. In block <b>410</b>, process <b>500</b> (which is described in further detail below in conjunction with <figref idref="DRAWINGS">FIG. 5</figref>) is called. In response to the shorter time average power of storage subsystem <b>110</b> not being greater than the first power level in block <b>408</b>, control transfers to decision block <b>412</b>. In block <b>412</b>, processor <b>102</b> determines whether enough time has passed to calculate a longer time average power (e.g., a thirty second power average) for storage subsystem <b>110</b>. In response to enough time not passing to calculate the longer time average power in block <b>412</b>, control transfers to block <b>404</b>.</p>
<p id="p-0042" num="0041">In response to enough time passing to calculate the longer time average power in block <b>412</b>, control transfers to block <b>414</b> where processor <b>102</b> calculates the longer time power average. Next, in decision block <b>416</b> processor <b>102</b> determine whether the longer time average power of storage subsystem <b>110</b> is greater than a second power level (i.e., a thermal power cap). In response to the longer time average power of storage subsystem <b>110</b> being greater than the second power level in block <b>416</b>, control transfers to block <b>410</b> where process <b>500</b> (see <figref idref="DRAWINGS">FIG. 5</figref>) is called. In block <b>416</b>, in response to the longer time average power of storage subsystem <b>110</b> being below the second power level, control transfers to block <b>418</b> where process <b>700</b> (which is described in further detail below in conjunction with <figref idref="DRAWINGS">FIG. 7</figref>) is called to ensure that the power consumption of storage subsystem <b>110</b> is not significantly lower than the second power level.</p>
<p id="p-0043" num="0042">With reference to <figref idref="DRAWINGS">FIG. 5</figref>, a flow chart for an exemplary process <b>500</b> that implements storage power management, according to various embodiments of the present disclosure, is illustrated. For ease of understanding, process <b>500</b> is explained in conjunction with <figref idref="DRAWINGS">FIGS. 1-3</figref>. Process <b>500</b> is initiated at block <b>502</b> in response to a call from process <b>400</b> of <figref idref="DRAWINGS">FIG. 4</figref>. Next, in block <b>504</b> the power consumption of storage subsystem <b>110</b> is measured by processor <b>102</b> using PMD <b>152</b>. Initial execution of block <b>504</b> may be omitted if desired, as process <b>400</b> measures the power consumption of storage subsystem <b>110</b> prior to calling process <b>500</b>. Then, in block <b>506</b> processor <b>102</b> calculates the shorter time average power.</p>
<p id="p-0044" num="0043">Next, in decision block <b>508</b>, processor <b>102</b> determines whether the shorter time average power of storage subsystem <b>110</b> is greater than a first power level (i.e., an electrical power cap indicative of a power emergency violation). In various embodiments, the first power level corresponds to an externally set power cap. In response to a power emergency being indicated in block <b>508</b>, control transfers to block <b>510</b>, where a c-state is incremented (e.g., one or more fast actuators are incremented (see table <b>200</b> of <figref idref="DRAWINGS">FIG. 2</figref>)). For example, a c-state may be incremented from c-state CS<b>0</b> to c-state CS<b>1</b>. As another example, a c-state may be incremented from c-state CS<b>0</b> to c-state CS<b>6</b>.</p>
<p id="p-0045" num="0044">As mentioned above, one or more fast actuators may be implemented by activating one or more acoustic modes of one or more of HDDs <b>142</b> of HDD array <b>140</b> and/or throttling I/O requests to HDDs <b>142</b>. Next, in decision block <b>512</b>, processor <b>102</b> determines whether all implemented fast actuators are fully activated (e.g., whether c-state CS<b>6</b> of <figref idref="DRAWINGS">FIG. 2</figref> has been reached). In one or more embodiments, by definition, when all implemented fast actuators are fully activated, the shorter time average power of storage subsystem <b>110</b> is below the first power level. In response to all of the fast actuators not being fully activated in block <b>510</b>, control returns to block <b>504</b> where the power consumption of storage subsystem <b>110</b> is again measured.</p>
<p id="p-0046" num="0045">In response to all of the fast actuators being fully activated in block <b>512</b>, control transfers to block <b>514</b> where the power consumption of storage subsystem <b>110</b> is again measured (in preparation for determining whether slow actuators require activation in order to further reduce power consumption of storage subsystem <b>110</b> below a second power level). Following block <b>514</b> control transfers to decision block <b>516</b>. In block <b>516</b> processor <b>102</b> determines whether enough time has passed to calculate a longer time average power for storage subsystem <b>110</b>. In response to enough time not passing to calculate the longer time average power in block <b>516</b>, control transfers to block <b>504</b>. In response to enough time passing to calculate the longer time average power in block <b>516</b>, control transfers to block <b>518</b>. In response to a power emergency violation not being indicated in block <b>508</b>, control transfers directly to block <b>516</b>.</p>
<p id="p-0047" num="0046">In block <b>518</b> processor <b>102</b> calculates the longer time average power for storage subsystem <b>110</b>. Next, in decision block <b>520</b>, processor <b>102</b> determines whether the longer time average power of storage subsystem <b>110</b> is greater than a second power level (i.e., a thermal power cap indicative of a power budget violation). In response to the longer time average power of storage subsystem <b>110</b> being greater than the second power level in block <b>520</b>, control transfers to block <b>522</b> where the c-state is incremented (e.g., slow actuators are incremented) in an attempt to further reduce power consumption of storage subsystem <b>110</b> (see table <b>300</b> of <figref idref="DRAWINGS">FIG. 3</figref>)) below the second power level. For example, with reference to <figref idref="DRAWINGS">FIG. 3</figref>, a c-state may be changed from c-state CS<b>6</b> to c-state CS<b>7</b>. As another example, with reference to <figref idref="DRAWINGS">FIG. 3</figref>, a c-state may be changed from c-state CS<b>6</b> to c-state CS<b>9</b>.</p>
<p id="p-0048" num="0047">Next, in decision block <b>524</b>, processor <b>102</b> determines whether all slow actuators are fully activated. By definition, when all implemented slow actuators are fully activated, the longer time average power of storage subsystem <b>110</b> is below the second power level. If all slow actuators are fully activated in block <b>524</b>, control transfers to block <b>526</b>, where process <b>700</b> is called. If all implemented slow actuators are not fully activated in block <b>524</b>, control transfers to block <b>514</b> and then to block <b>516</b>.</p>
<p id="p-0049" num="0048">With reference to <figref idref="DRAWINGS">FIG. 6</figref>, a flow chart for another exemplary process <b>600</b> that implements storage power management, according to various other embodiments of the present disclosure, is illustrated. Process <b>600</b> may be utilized as an alternative to process <b>500</b>. For ease of understanding, process <b>600</b> is also explained in conjunction with <figref idref="DRAWINGS">FIGS. 1-3</figref>. Process <b>600</b> is initiated at block <b>602</b>. Next, in block <b>604</b> the power consumption of storage subsystem <b>110</b> is measured by processor <b>102</b> using PMD <b>152</b>. Initial execution of block <b>604</b> may be omitted if desired, as process <b>400</b> measures the power consumption of storage subsystem <b>110</b> prior to calling process <b>600</b>. Then, in block <b>606</b> processor <b>102</b> calculates the shorter time average power. Next, in decision block <b>608</b>, processor <b>102</b> determines whether the shorter time average power of storage subsystem <b>110</b> is greater than a first power level (i.e., an electrical power cap indicative of a power emergency violation). In various embodiments, the first power level corresponds to an externally set power cap. In response to a power emergency being indicated in block <b>608</b>, control transfers to block <b>610</b>, where a c-state is incremented (e.g., one or more fast actuators are incremented (see table <b>200</b> of <figref idref="DRAWINGS">FIG. 2</figref>)). For example, a c-state may be incremented from c-state CS<b>1</b> to c-state CS<b>3</b>. As another example, a c-state may be incremented from c-state CS<b>3</b> to c-state CS<b>6</b>.</p>
<p id="p-0050" num="0049">As mentioned above, one or more fast actuators may be implemented by activating one or more acoustic modes of one or more of HDDs <b>142</b> of HDD array <b>140</b> and/or throttling I/O requests to HDDs <b>142</b>. Next, in decision block <b>612</b>, processor <b>102</b> determines whether all implemented fast actuators are fully activated (e.g., whether c-state CS<b>6</b> of <figref idref="DRAWINGS">FIG. 2</figref> has been reached). In one or more embodiments, by definition, when all implemented fast actuators are fully activated, the shorter time average power of storage subsystem <b>110</b> is below the first power level. In response to all of the fast actuators not being fully activated in block <b>610</b>, control returns to block <b>604</b> where the power consumption of storage subsystem <b>110</b> is again measured. In response to all of the fast actuators being fully activated in block <b>612</b>, control transfers to block <b>614</b> where the power consumption of storage subsystem <b>110</b> is again measured (in preparation for determining whether slow actuators require activation in order to further reduce power consumption of storage subsystem <b>110</b> below a second power level). Following block <b>614</b> control transfers to decision block <b>616</b>. In block <b>616</b> processor <b>102</b> determines whether enough time has passed to calculate a longer time average power for storage subsystem <b>110</b>. In response to enough time not passing to calculate the longer time average power in block <b>616</b>, control transfers to block <b>604</b>. In response to enough time passing to calculate the longer time average power in block <b>616</b>, control transfers to block <b>618</b>. In response to a power emergency violation not being indicated in block <b>608</b>, control transfers directly to block <b>616</b>.</p>
<p id="p-0051" num="0050">In block <b>618</b> processor <b>102</b> calculates the longer time average power for storage subsystem <b>110</b>. Next, in decision block <b>620</b>, processor <b>102</b> determines whether the longer time average power of storage subsystem <b>110</b> is greater than a second power level (i.e., a thermal power cap indicative of a power budget violation). In response to the longer time average power of storage subsystem <b>110</b> being greater than the second power level in block <b>620</b>, control transfers to block <b>622</b> where the c-state is incremented (e.g., fast and/or slow actuators are incremented) in an attempt to further reduce the longer time average power of storage subsystem <b>110</b> (see table <b>300</b> of <figref idref="DRAWINGS">FIG. 3</figref>)) below the second power level. For example, with reference to <figref idref="DRAWINGS">FIG. 3</figref>, a c-state may be changed from c-state CS<b>6</b> to c-state CS<b>7</b>. As another example, with reference to <figref idref="DRAWINGS">FIG. 3</figref>, a c-state may be changed from c-state CS<b>5</b> to c-state CS<b>9</b>.</p>
<p id="p-0052" num="0051">Following block <b>622</b>, control transfers to block <b>614</b>. In block <b>620</b>, in response to the longer time average power of storage subsystem <b>110</b> being less than the second power level control transfers to block <b>624</b>, where process <b>700</b> is called to determine whether performance of power system <b>110</b> may be improved. It should be appreciated that process <b>600</b> may continue to utilize fast actuators (when available) to reduce the longer time average power of storage subsystem <b>110</b> below the second power level. In contrast, process <b>500</b> only utilizes slow actuators (even if fast actuators are available) when the longer time average power of storage subsystem <b>110</b> is below the first power level.</p>
<p id="p-0053" num="0052">With reference to <figref idref="DRAWINGS">FIG. 7</figref>, a flow chart for another exemplary process <b>700</b> that implements storage power management, according to various other embodiments of the present disclosure, is illustrated. For ease of understanding, process <b>700</b> is also explained in conjunction with <figref idref="DRAWINGS">FIGS. 1-3</figref>. Process <b>700</b> is initiated at block <b>702</b> in response to a call from process <b>400</b> (see <figref idref="DRAWINGS">FIG. 4</figref>), a call from process <b>500</b> (see <figref idref="DRAWINGS">FIG. 5</figref>), or a call from process <b>600</b> (see <figref idref="DRAWINGS">FIG. 6</figref>) that is, for example, initiated in response to a longer time average power of storage subsystem <b>110</b> being less than a second power level.</p>
<p id="p-0054" num="0053">Next, in decision block <b>704</b>, processor <b>102</b> determines if the longer time average power of storage subsystem <b>110</b> is less than the second power level minus an offset. The offset is selected to prevent frequent readjustment of c-states that leads to the longer time average power for storage subsystem <b>110</b> alternating between exceeding the second power level immediately followed by the longer time average power for storage subsystem <b>110</b> dropping below the second power level during successive power consumption measurements. In general, the offset used in block <b>704</b> is storage subsystem dependent. In response to the longer time average power for storage subsystem <b>110</b> not being less than the second power level minus the offset, control transfers from block <b>704</b> to block <b>716</b> where control returns to process <b>400</b> (see <figref idref="DRAWINGS">FIG. 4</figref>). In response to the second average power of storage subsystem <b>110</b> being less than the second power level minus the offset, control transfers from block <b>704</b> to block <b>706</b>.</p>
<p id="p-0055" num="0054">In block <b>706</b> processor <b>102</b> decreases a c-state of active actuators to increase the power consumption of storage subsystem <b>110</b>. For example, with reference to <figref idref="DRAWINGS">FIG. 3</figref>, a c-state may be changed from c-state P<b>11</b> to c-state P<b>10</b>. As another example, with reference to <figref idref="DRAWINGS">FIG. 3</figref>, a c-state may be changed from c-state P<b>11</b> to c-state P<b>8</b>. Next, in block <b>708</b>, processor <b>102</b> measures the power consumption of storage subsystem <b>110</b>. For example, processor <b>102</b> (executing power management application <b>116</b>) may utilize PMD <b>152</b> to measure the power consumption of storage subsystem <b>110</b>. Then, in block <b>710</b>, processor <b>102</b> calculates a shorter time average power for storage subsystem <b>110</b> (i.e., to ensure that the shorter timer average power is not exceeding an emergency power level).</p>
<p id="p-0056" num="0055">From block <b>710</b>, control transfers to decision block <b>712</b>, where processor <b>102</b> determines whether the shorter time average power of storage subsystem <b>110</b> is less than the emergency power level minus another offset. In general, the offset used in block <b>712</b> is also storage subsystem dependent. In response to the shorter time average power not being less that the first level minus the offset in block <b>712</b>, control transfers to block <b>716</b>. In response to the shorter time average power being less that the first level minus the offset in block <b>712</b>, control transfers to block <b>714</b>. In block <b>714</b>, processor <b>102</b> recalculates the longer time average power for storage subsystem <b>110</b>. Following block <b>714</b> control transfers to block <b>704</b>, which is discussed in detail above.</p>
<p id="p-0057" num="0056">In the flow chart above, the methods depicted in <figref idref="DRAWINGS">FIGS. 4-7</figref> may be embodied in a computer-readable medium containing computer-readable code such that a series of steps are performed when the computer-readable code is executed on a computing device. In some implementations, certain steps of the methods may be combined, performed simultaneously or in a different order, or perhaps omitted, without deviating from the spirit and scope of the invention. Thus, while the method steps are described and illustrated in a particular sequence, use of a specific sequence of steps is not meant to imply any limitations on the invention. Changes may be made with regards to the sequence of steps without departing from the spirit or scope of the present invention. Use of a particular sequence is therefore, not to be taken in a limiting sense, and the scope of the present invention is defined only by the appended claims.</p>
<p id="p-0058" num="0057">As will be appreciated by one skilled in the art, aspects of the present invention may be embodied as a system, method or computer program product. Accordingly, aspects of the present invention may take the form of an entirely hardware embodiment, an entirely software embodiment (including firmware, resident software, micro-code, etc.) or an embodiment combining software and hardware aspects that may all generally be referred to herein as a &#x201c;circuit,&#x201d; &#x201c;module&#x201d; or &#x201c;system.&#x201d; Furthermore, aspects of the present invention may take the form of a computer program product embodied in one or more computer-readable medium(s) having computer-readable program code embodied thereon.</p>
<p id="p-0059" num="0058">Any combination of one or more computer-readable medium(s) may be utilized. The computer-readable medium may be a computer-readable signal medium or a computer-readable storage medium. A computer-readable storage medium may be, for example, but not limited to, an electronic, magnetic, optical, electromagnetic, infrared, or semiconductor system, apparatus, or device, or any suitable combination of the foregoing. More specific examples (a non-exhaustive list) of the computer-readable storage medium would include the following: a portable computer diskette, a hard disk, a random access memory (RAM), a read-only memory (ROM), an erasable programmable read-only memory (EPROM or Flash memory), a portable compact disc read-only memory (CD-ROM), an optical storage device, a magnetic storage device, or any suitable combination of the foregoing. In the context of this document, a computer-readable storage medium may be any tangible storage medium that can contain, or store a program for use by or in connection with an instruction execution system, apparatus, or device.</p>
<p id="p-0060" num="0059">A computer-readable signal medium may include a propagated data signal with computer-readable program code embodied therein, for example, in baseband or as part of a carrier wave. Such a propagated signal may take any of a variety of forms, including, but not limited to, electro-magnetic, optical, or any suitable combination thereof. A computer-readable signal medium may be any computer-readable medium that is not a computer-readable storage medium and that can communicate, propagate, or transport a program for use by or in connection with an instruction execution system, apparatus, or device. Program code embodied on a computer-readable signal medium may be transmitted using any appropriate medium, including but not limited to wireless, wireline, optical fiber cable, RF, etc., or any suitable combination of the foregoing.</p>
<p id="p-0061" num="0060">Computer program code for carrying out operations for aspects of the present invention may be written in any combination of one or more programming languages, including an object oriented programming language such as Java, Smalltalk, C++ or the like and conventional procedural programming languages, such as the &#x201c;C&#x201d; programming language or similar programming languages. The program code may execute entirely on the user's computer, partly on the user's computer, as a stand-alone software package, partly on the user's computer and partly on a remote computer or entirely on the remote computer or server. In the latter scenario, the remote computer may be connected to the user's computer through any type of network, including a local area network (LAN) or a wide area network (WAN), or the connection may be made to an external computer (for example, through the Internet using an Internet Service Provider).</p>
<p id="p-0062" num="0061">Aspects of the present invention are described herein with reference to flowchart illustrations and/or block diagrams of methods, apparatus (systems) and computer program products according to embodiments of the invention. It will be understood that each block of the flowchart illustrations and/or block diagrams, and combinations of blocks in the flowchart illustrations and/or block diagrams, can be implemented by computer program instructions. These computer program instructions may be provided to a processor of a general purpose computer, special purpose computer, or other programmable data processing apparatus to produce a machine, such that the instructions, which execute via the processor of the computer or other programmable data processing apparatus, create means for implementing the functions/acts specified in the flowchart and/or block diagram block or blocks.</p>
<p id="p-0063" num="0062">The computer program instructions may also be stored in a computer-readable storage medium that can direct a computer, other programmable data processing apparatus, or other devices to function in a particular manner, such that the instructions stored in the computer-readable medium produce an article of manufacture including instructions which implement the function/act specified in the flowchart and/or block diagram block or blocks. The computer program instructions may also be loaded onto a computer, other programmable data processing apparatus, or other devices to cause a series of operational steps to be performed on the computer, other programmable apparatus or other devices to produce a computer implemented process such that the instructions which execute on the computer or other programmable apparatus provide processes for implementing the functions/acts specified in the flowchart and/or block diagram block or blocks.</p>
<p id="p-0064" num="0063">As will be further appreciated, the processes in embodiments of the present invention may be implemented using any combination of software, firmware or hardware. As a preparatory step to practicing the invention in software, the programming code (whether software or firmware) will typically be stored in one or more machine readable storage mediums such as fixed (hard) drives, diskettes, optical disks, magnetic tape, semiconductor memories such as ROMs, PROMs, etc., thereby making an article of manufacture in accordance with the invention. The article of manufacture containing the programming code is used by either executing the code directly from the storage device, by copying the code from the storage device into another storage device such as a hard disk, RAM, etc., or by transmitting the code for remote execution using transmission type media such as digital and analog communication links The methods of the invention may be practiced by combining one or more machine-readable storage devices containing the code according to the present invention with appropriate processing hardware to execute the code contained therein. An apparatus for practicing the invention could be one or more processing devices and storage subsystems containing or having network access to program(s) coded in accordance with the invention.</p>
<p id="p-0065" num="0064">Thus, it is important that while an illustrative embodiment of the present invention is described in the context of a fully functional computer (server) system with installed (or executed) software, those skilled in the art will appreciate that the software aspects of an illustrative embodiment of the present invention are capable of being distributed as a program product in a variety of forms, and that an illustrative embodiment of the present invention applies equally regardless of the particular type of media used to actually carry out the distribution.</p>
<p id="p-0066" num="0065">While the invention has been described with reference to exemplary embodiments, it will be understood by those skilled in the art that various changes may be made and equivalents may be substituted for elements thereof without departing from the scope of the invention. In addition, many modifications may be made to adapt a particular system, device or component thereof to the teachings of the invention without departing from the essential scope thereof. Therefore, it is intended that the invention not be limited to the particular embodiments disclosed for carrying out this invention, but that the invention will include all embodiments falling within the scope of the appended claims. Moreover, the use of the terms first, second, etc. do not denote any order or importance, but rather the terms first, second, etc. are used to distinguish one element from another.</p>
<p id="p-0067" num="0066">The terminology used herein is for the purpose of describing particular embodiments only and is not intended to be limiting of the invention. As used herein, the singular forms &#x201c;a&#x201d;, &#x201c;an&#x201d; and &#x201c;the&#x201d; are intended to include the plural forms as well, unless the context clearly indicates otherwise. It will be further understood that the terms &#x201c;comprises&#x201d; and/or &#x201c;comprising,&#x201d; when used in this specification, specify the presence of stated features, integers, steps, operations, elements, and/or components, but do not preclude the presence or addition of one or more other features, integers, steps, operations, elements, components, and/or groups thereof.</p>
<p id="p-0068" num="0067">The corresponding structures, materials, acts, and equivalents of all means or step plus function elements in the claims below, if any, are intended to include any structure, material, or act for performing the function in combination with other claimed elements as specifically claimed. The description of the present invention has been presented for purposes of illustration and description, but is not intended to be exhaustive or limited to the invention in the form disclosed. Many modifications and variations will be apparent to those of ordinary skill in the art without departing from the scope and spirit of the invention. The embodiments were chosen and described in order to best explain the principles of the invention and the practical application, and to enable others of ordinary skill in the art to understand the invention for various embodiments with various modifications as are suited to the particular use contemplated.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method for performing storage power management on storage subsystems, comprising:
<claim-text>measuring, using a processor and a power measurement device, power consumption of a storage subsystem;</claim-text>
<claim-text>calculating a first average power and a second average power for the storage subsystem based on the measured power consumption, wherein the first average power is calculated over a shorter time period than the second average power;</claim-text>
<claim-text>incrementing, using the processor, one or more first actuators in response to the first average power of the storage subsystem being greater than a first power level to reduce the first average power of the storage subsystem below the first power level within a first time period;</claim-text>
<claim-text>incrementing, using the processor, one or more second actuators in response to the second average power of the storage subsystem being greater than a second power level and less than the first power level to reduce the second average power of the storage subsystem below the second power level within a second time period that is greater than the first time period;</claim-text>
<claim-text>decrementing, using the processor, one or more of the first actuators and the second actuators in response to the second average power of the storage subsystem being more than an offset below the second power level to increase the power consumption of the storage subsystem, wherein a responsiveness of the first actuators is faster than a responsiveness of the second actuators; and</claim-text>
<claim-text>incrementing one or more of the first actuators prior to incrementing one or more of the second actuators in response to the first average power of the storage subsystem being less than the first power level and the second average power of the storage subsystem being greater than the second power level.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the incrementing, using the processor, one or more first actuators further comprises:
<claim-text>placing hard disk drives of the storage subsystem into one or more acoustic modes.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein the incrementing, using the processor, one or more first actuators further comprises:
<claim-text>throttling input/output (I/O) requests to the storage subsystem.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the incrementing, using the processor, one or more second actuators further comprises:
<claim-text>writing frequently accessed data of the storage subsystem to a solid state device (SSD).</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein the incrementing, using the processor, one or more second actuators further comprises:
<claim-text>spinning-down unused hard disk drives of the storage subsystem.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the decrementing is only performed in response to the first average power being more than another offset below the first power level.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the storage subsystem includes one or more optical drives or one or more magnetic drives.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the storage subsystem includes one or more solid state devices and the incrementing, using the processor, one or more first actuators further comprises:
<claim-text>throttling input/output (I/O) requests to the solid state devices.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. A computer program product for performing storage power management on a storage subsystem, the computer program product comprising:
<claim-text>a computer-readable storage medium having computer-readable program code embodied thereon, wherein the computer-readable program code, when executed by a processor, causes the processor to:
<claim-text>measure, using a power measurement device, power consumption of the storage subsystem;</claim-text>
<claim-text>calculate a first average power and a second average power for the storage subsystem based on the measured power consumption, wherein the first average power is calculated over a shorter time period than the second average power;</claim-text>
<claim-text>increment one or more first actuators in response to the first average power of the storage subsystem being greater than a first power level to reduce the first average power of the storage subsystem below the first power level within a first time period;</claim-text>
<claim-text>increment one or more second actuators in response to the second average power of the storage subsystem being greater than a second power level and less than the first power level to reduce the second average power of the storage subsystem below the second power level within a second time period that is greater than the first time period;</claim-text>
<claim-text>decrement one or more of the first actuators and the second actuators in response to the second average power of the storage subsystem being more than an offset below the second power level to increase the power consumption of the storage subsystem, wherein a responsiveness of the first actuators is faster than a responsiveness of the second actuators; and</claim-text>
<claim-text>increment the first actuators prior to incrementing the second actuators in response to the first average power of the storage subsystem being less than the first power level and the second average power of the storage subsystem being greater than the second power level.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The computer program product of <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the computer-readable program code, when executed by the processor, further causes the processor to increment the first actuators by:
<claim-text>placing hard disk drives of the storage subsystem into an acoustic mode; and</claim-text>
<claim-text>throttling input/output (I/O) requests to the storage subsystem.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The computer program product of <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the computer-readable program code, when executed by the processor, further causes the processor to increment the second actuators by:
<claim-text>writing frequently accessed data of the storage subsystem to a solid state device (SSD); and</claim-text>
<claim-text>spinning-down unused hard disk drives of the storage subsystem.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The computer program product of <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the decrementing is only performed in response to the first average power being more than another offset below the first power level.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The computer program product of <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the storage subsystem includes one or more solid state devices and the computer-readable program code, when executed by the processor, further causes the processor to:
<claim-text>throttle input/output (I/O) requests to the solid state devices.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. A storage subsystem, comprising:
<claim-text>a memory for storing code; and</claim-text>
<claim-text>a processor coupled to the memory, wherein the processor is configured to:
<claim-text>measure, using a power measurement device, power consumption of the storage subsystem;</claim-text>
<claim-text>calculate a first average power and a second average power for the storage subsystem based on the measured power consumption, wherein the first average power is calculated over a shorter time period than the second average power;</claim-text>
<claim-text>increment one or more first actuators in response to the first average power of the storage subsystem being greater than a first power level to reduce the first average power of the storage subsystem below the first power level within a first time period;</claim-text>
<claim-text>increment one or more second actuators in response to the second average power of the storage subsystem being greater than a second power level and less than the first power level to reduce the second average power of the storage subsystem below the second power level within a second time period that is greater than the first time period;</claim-text>
<claim-text>decrement one or more of the first actuators and the second actuators in response to the second average power of the storage subsystem being more than an offset below the second power level to increase the power consumption of the storage subsystem, wherein a responsiveness of the first actuators is faster than a responsiveness of the second actuators; and</claim-text>
<claim-text>increment the first actuators prior to incrementing the second actuators in response to the first average power of the storage subsystem being less than the first power level and the second average power of the storage subsystem being greater than the second power level.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The storage subsystem of <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein the processor is further configured to increment the one or more first actuators by:
<claim-text>placing hard disk drives of the storage subsystem into an acoustic mode; and</claim-text>
<claim-text>throttling input/output (I/O) requests to the storage subsystem.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The storage subsystem of <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein the processor is further configured to increment the one or more second actuators by:
<claim-text>writing frequently accessed data of the storage subsystem to a solid state device (SSD); and</claim-text>
<claim-text>spinning-down unused hard disk drives of the storage subsystem.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The storage subsystem of <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein the decrementing is only performed in response to the first average power being more than another offset below the first power level.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The storage subsystem of <claim-ref idref="CLM-00014">claim 14</claim-ref>, wherein the storage subsystem includes one or more solid state devices and the processor is further configured to:
<claim-text>throttle input/output (I/O) requests to the solid state devices. </claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
