<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08626980-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08626980</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13320334</doc-number>
<date>20100520</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<us-term-of-grant>
<us-term-extension>68</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>13</main-group>
<subgroup>14</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>13</main-group>
<subgroup>42</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>13</main-group>
<subgroup>40</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classifications-cpc>
<main-cpc>
<classification-cpc>
<cpc-version-indicator><date>20130101</date></cpc-version-indicator>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>13</main-group>
<subgroup>4027</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
<scheme-origination-code>C</scheme-origination-code>
</classification-cpc>
</main-cpc>
<further-cpc>
<classification-cpc>
<cpc-version-indicator><date>20130101</date></cpc-version-indicator>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>13</main-group>
<subgroup>405</subgroup>
<symbol-position>L</symbol-position>
<classification-value>A</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
<scheme-origination-code>C</scheme-origination-code>
</classification-cpc>
</further-cpc>
</classifications-cpc>
<classification-national>
<country>US</country>
<main-classification>710315</main-classification>
<further-classification>710313</further-classification>
<further-classification>713400</further-classification>
</classification-national>
<invention-title id="d2e53">High density, low jitter, synchronous USB expansion</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5566180</doc-number>
<kind>A</kind>
<name>Eidson et al.</name>
<date>19961000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6219628</doc-number>
<kind>B1</kind>
<name>Kodosky et al.</name>
<date>20010400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>703  2</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>6278710</doc-number>
<kind>B1</kind>
<name>Eidson</name>
<date>20010800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>6343364</doc-number>
<kind>B1</kind>
<name>Leydier et al.</name>
<date>20020100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>6665316</doc-number>
<kind>B1</kind>
<name>Eidson</name>
<date>20031200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>6741952</doc-number>
<kind>B2</kind>
<name>Eidson</name>
<date>20040500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>6823283</doc-number>
<kind>B2</kind>
<name>Steger et al.</name>
<date>20041100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>702127</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>6978332</doc-number>
<kind>B1</kind>
<name>Harris et al.</name>
<date>20051200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>710300</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>7165005</doc-number>
<kind>B2</kind>
<name>Steger et al.</name>
<date>20070100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>702120</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>7242590</doc-number>
<kind>B1</kind>
<name>Yeap et al.</name>
<date>20070700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>361752</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>7251199</doc-number>
<kind>B2</kind>
<name>Eidson</name>
<date>20070700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>7254512</doc-number>
<kind>B2</kind>
<name>Odom</name>
<date>20070800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>702127</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>7366631</doc-number>
<kind>B2</kind>
<name>Steger et al.</name>
<date>20080400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>702127</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>7478006</doc-number>
<kind>B2</kind>
<name>Odom</name>
<date>20090100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>702127</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>7509445</doc-number>
<kind>B2</kind>
<name>Odom et al.</name>
<date>20090300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>710 58</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>7512512</doc-number>
<kind>B2</kind>
<name>Foote et al.</name>
<date>20090300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>702127</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>7539793</doc-number>
<kind>B2</kind>
<name>Foster et al.</name>
<date>20090500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00018">
<document-id>
<country>US</country>
<doc-number>7542867</doc-number>
<kind>B2</kind>
<name>Steger et al.</name>
<date>20090600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>702127</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00019">
<document-id>
<country>US</country>
<doc-number>7881899</doc-number>
<kind>B2</kind>
<name>Steger et al.</name>
<date>20110200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>702127</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00020">
<document-id>
<country>US</country>
<doc-number>2003/0040881</doc-number>
<kind>A1</kind>
<name>Steger et al.</name>
<date>20030200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>702123</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00021">
<document-id>
<country>US</country>
<doc-number>2003/0074489</doc-number>
<kind>A1</kind>
<name>Steger et al.</name>
<date>20030400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>710  1</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00022">
<document-id>
<country>US</country>
<doc-number>2005/0268009</doc-number>
<kind>A1</kind>
<name>Tufford et al.</name>
<date>20051200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>710100</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00023">
<document-id>
<country>US</country>
<doc-number>2006/0184335</doc-number>
<kind>A1</kind>
<name>Odom</name>
<date>20060800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>702127</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00024">
<document-id>
<country>US</country>
<doc-number>2006/0190209</doc-number>
<kind>A1</kind>
<name>Odom</name>
<date>20060800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>702127</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00025">
<document-id>
<country>US</country>
<doc-number>2006/0245133</doc-number>
<kind>A1</kind>
<name>Cetrulo et al.</name>
<date>20061100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>361 911</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00026">
<document-id>
<country>US</country>
<doc-number>2007/0217169</doc-number>
<kind>A1</kind>
<name>Yeap et al.</name>
<date>20070900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>361752</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00027">
<document-id>
<country>US</country>
<doc-number>2007/0217170</doc-number>
<kind>A1</kind>
<name>Yeap et al.</name>
<date>20070900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>361752</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00028">
<document-id>
<country>US</country>
<doc-number>2007/0233417</doc-number>
<kind>A1</kind>
<name>Steger et al.</name>
<date>20071000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>702127</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00029">
<document-id>
<country>US</country>
<doc-number>2007/0233418</doc-number>
<kind>A1</kind>
<name>Steger et al.</name>
<date>20071000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>702127</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00030">
<document-id>
<country>US</country>
<doc-number>2007/0233431</doc-number>
<kind>A1</kind>
<name>Steger et al.</name>
<date>20071000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>702189</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00031">
<document-id>
<country>US</country>
<doc-number>2007/0245086</doc-number>
<kind>A1</kind>
<name>Odom et al.</name>
<date>20071000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>711115</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00032">
<document-id>
<country>US</country>
<doc-number>2009/0105985</doc-number>
<kind>A1</kind>
<name>Steger et al.</name>
<date>20090400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>702127</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00033">
<document-id>
<country>US</country>
<doc-number>2009/0222685</doc-number>
<kind>A1</kind>
<name>Foster et al.</name>
<date>20090900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00034">
<document-id>
<country>US</country>
<doc-number>2010/0030509</doc-number>
<kind>A1</kind>
<name>Crain, II et al.</name>
<date>20100200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>702123</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00035">
<document-id>
<country>WO</country>
<doc-number>WO 2006/102184</doc-number>
<kind>A1</kind>
<date>20060900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00036">
<document-id>
<country>WO</country>
<doc-number>WO 2007/092997</doc-number>
<kind>A1</kind>
<date>20070800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00037">
<document-id>
<country>WO</country>
<doc-number>WO 2008/138052</doc-number>
<kind>A1</kind>
<date>20081100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00038">
<othercit>&#x201c;Universal Serial Bus Specification,&#x201d; Apr. 27, 2000; pp. 1-622; Revision 2.0.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00039">
<othercit>&#x201c;Universal Serial Bus 3.0 Specification,&#x201d; Nov. 12, 2008; Revision 1.0.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00040">
<othercit>International Search Report in International Application No. PCT/AU2010/000601; dated Aug. 24, 2010.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00041">
<othercit>International Preliminary Report on Patentability in International Application No. PCT/AU2010/000601; dated Nov. 22, 2011.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>17</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>710300</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>3</number-of-drawing-sheets>
<number-of-figures>4</number-of-figures>
</figures>
<us-related-documents>
<us-provisional-application>
<document-id>
<country>US</country>
<doc-number>61179904</doc-number>
<date>20090520</date>
</document-id>
</us-provisional-application>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20120059964</doc-number>
<kind>A1</kind>
<date>20120308</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Foster</last-name>
<first-name>Peter Graham</first-name>
<address>
<city>Parkside</city>
<country>AU</country>
</address>
</addressbook>
<residence>
<country>AU</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Foster</last-name>
<first-name>Peter Graham</first-name>
<address>
<city>Parkside</city>
<country>AU</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Oliff &#x26; Berridge, PLC</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Chronologic Pty. Ltd.</orgname>
<role>03</role>
<address>
<city>Adelaide</city>
<country>AU</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Stiglic</last-name>
<first-name>Ryan</first-name>
<department>2111</department>
</primary-examiner>
</examiners>
<pct-or-regional-filing-data>
<document-id>
<country>WO</country>
<doc-number>PCT/AU2010/000601</doc-number>
<kind>00</kind>
<date>20100520</date>
</document-id>
<us-371c124-date>
<date>20111114</date>
</us-371c124-date>
</pct-or-regional-filing-data>
<pct-or-regional-publishing-data>
<document-id>
<country>WO</country>
<doc-number>WO2010/132940</doc-number>
<kind>A </kind>
<date>20101125</date>
</document-id>
</pct-or-regional-publishing-data>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A method of providing high density expansion of a USB network, the method comprising: attaching a plurality of USB hubs to adjacent slots in a PXI instrumentation chassis; configuring one of the USB hubs as a primary USB Hub; connecting an upstream port of the primary USB Hub to a USB network; configuring a first downstream port of the primary USB Hub to communicate across a first PXI Local Bus to a first adjacent USB Hub of the USB Hubs other than the primary USB Hub, the first adjacent USB Hub being adjacent to the primary USB Hub; configuring a plurality of other downstream ports of the primary USB Hub to provide expansion of the primary USB Hub; connecting an upstream port of the first adjacent USB Hub to the first PXI Local Bus, wherein the first PXI Local Bus is in the direction of the primary USB Hub; configuring a first downstream port of the first adjacent USB Hub to communicate across a second PXI Local Bus to a second adjacent USB Hub of the USB Hubs other than the primary USB Hub, the second adjacent USB Hub being adjacent to the first adjacent USB Hub; configuring a plurality of other downstream ports of the first adjacent USB Hub to provide expansion of the first adjacent USB Hub; and configuring any other of the USB hubs and the first adjacent USB Hub in like manner.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="98.72mm" wi="130.73mm" file="US08626980-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="187.62mm" wi="132.25mm" file="US08626980-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="220.73mm" wi="166.54mm" file="US08626980-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="110.41mm" wi="130.39mm" file="US08626980-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">RELATED APPLICATION</heading>
<p id="p-0002" num="0001">This application is based on and claims the benefit of the filing date of U.S. application Ser. No. 61/179,904 filed 20 May 2009, the content of which as filed is incorporated herein by reference in its entirety.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">FIELD OF THE INVENTION</heading>
<p id="p-0003" num="0002">The present invention relates to a method and apparatus for providing a synchronization and timing system, with connectivity based on revision three of the Universal Serial Bus (USB) architecture (or USB 3.0), of particular but by no means exclusive use in providing clocks, data acquisition and automation and control of test and measurement equipment, instrumentation interfaces and process control equipment, synchronized to an essentially arbitrary degree in either a local environment or in a distributed scheme.</p>
<heading id="h-0003" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0004" num="0003">The USB specification up to and including revision 2.0 was intended to facilitate the interoperation of devices from different vendors in an open architecture. USB 2.0 data is encoded using differential signalling (viz. in which two wires transfer the information) in the form of the difference between the signal levels of those two wires. The USB 2.0 specification is intended as an enhancement to the PC architecture, spanning portable, desktop and home environments.</p>
<p id="p-0005" num="0004">However, USB was user focussed so the USB 2.0 specification lacked a mechanism for synchronising devices to any great precision. Several proposals attempted to address this and other deficiencies. For example, U.S. Pat. No. 6,343,364 (Leydier et al.) discloses an example of frequency locking to USB traffic, which is directed toward a smart card reader. This document teaches a local, free-running clock that is compared to USB SYNC and packet ID streams; its period is updated to match this frequency, resulting in a local clock with a nominal frequency of 1.5 MHz. This provides a degree of synchronization sufficient to read smart card information into a host PC but, as this approach is directed to a smart card reader, inter-device synchronization is not addressed.</p>
<p id="p-0006" num="0005">WO 2007/092997 (Foster et al.) discloses a synchronized USB device that allows the generation of accurate clock frequencies on board the USB device regardless of the accuracy of the clock in the Host PC. The USB SOF packet is decoded by the USB device, and treated as a clock carrier signal instead of acting as a clock reference.</p>
<p id="p-0007" num="0006">The carrier signal, once decoded from the USB traffic, is combined with a scaling factor to generate synchronization information and hence to synthesize a local clock signal with precise control of the clock frequency. In this way, the frequency of the local clock signal can be more accurate than the somewhat ambiguous frequency of the carrier signal.</p>
<p id="p-0008" num="0007">This arrangement is said to be able to produce a local clock signal to arbitrarily high frequencies, such as a clock frequency of tens of megahertz, and thus to ensure that the local clock of each device connected to a given USB is synchronized in frequency. U.S. application Ser. No. 10/620,769 also teaches a method and apparatus to further synchronize multiple local clocks in phase by measurement of signal propagation time from the host to each device and provision of clock phase compensation on each of the USB devices.</p>
<p id="p-0009" num="0008">U.S. patent application Ser. No. 12/279,328 (Foster et. al.) teaches synchronisation of the local clocks of a plurality of USB devices to a timebase received from another interface. In one embodiment, a USB device contains a local clock that is synchronised to an externally provided time signature across Ethernet using the IEEE-1588 protocol. In yet another embodiment the USB device's clock is synchronised to a timebase derived from a Global Positioning System (GPS) synchronised clock.</p>
<p id="p-0010" num="0009">All of the above systems work within the bounds of conventional USB 2.0 and as such are limited in several areas. USB 2.0 is limited in range by the device response timeout. This is the window of time that the USB Host Controller allocates for receipt of a signal from a given USB device in response to a request from said USB Host Controller. The physical reach of USB 2.0 is therefore approximately 25 m.</p>
<p id="p-0011" num="0010">The USB 3.0 specification was released in November 2008 and is also focussed on consumer applications. The USB 3.0 specification makes significant changes to the architecture of USB. In particular, the background art synchronisation schemes discussed above will not work with the new 5 Gb/s protocol (termed &#x2018;SuperSpeed USB&#x2019;) because it does away with the broadcast mechanism for SOF packets.</p>
<p id="p-0012" num="0011">USB 3.0 defines two parallel and independent USB busses on the same connection cable. Firstly, the USB 2.0 bus remains unchanged (for backward compatibility) and offers Low Speed (1.5 Mb/s), Full Speed (12 Mb/s) and High Speed (480 Mb/s) protocols. The second bus&#x2014;for 5 Gb/s traffic&#x2014;provides the SuperSpeed USB. These busses operate independently, except that operation of the busses to a given USB device is mutually exclusive. That is, if a SuperSpeed connection is possible, then the USB 2.0 bus in disconnected to that device.</p>
<p id="p-0013" num="0012">The dual-bus architecture of USB 3.0 is depicted schematically at <b>10</b> in <figref idref="DRAWINGS">FIG. 1</figref>. Personal Computer <b>12</b>, containing USB Host Controller <b>14</b>, is connected to USB 3.0 Hub <b>16</b> by first USB 3.0-compliant cable <b>18</b>; USB 3.0 device <b>20</b> is connected to a downstream port <b>22</b> of USB 3.0 Hub <b>16</b> by second USB 3.0-compliant cable <b>24</b>.</p>
<p id="p-0014" num="0013">USB Host Controller <b>14</b> contains both a USB 2.0 Host <b>26</b> and a SuperSpeed Host <b>28</b>. These two hosts <b>26</b>, <b>28</b> are independent of one another, and each host <b>26</b>, <b>28</b> is capable of connecting up to 127 devices (including hubs). USB 3.0-compliant cables are compound cables, containing a USB 2.0-compliant cable and a series of shielded conductors capable of transmitting SuperSpeed signals. Hence, USB 3.0-compliant cable <b>18</b> comprises USB 2.0-compliant cable <b>30</b> and shielded conductors <b>32</b>.</p>
<p id="p-0015" num="0014">USB 3.0 Hub <b>16</b> contains both a USB 2.0 Hub function <b>34</b> and a SuperSpeed Hub function <b>36</b>, each connected directly to its respective Host <b>26</b>, <b>28</b> by compound cable <b>18</b>. USB 3.0 device <b>20</b> contains both a USB 2.0 device function <b>38</b> and a SuperSpeed device function <b>40</b>, each connected back to its respective hub function <b>34</b>, <b>36</b> of USB 3.0 Hub <b>16</b> by compound cable <b>24</b>.</p>
<p id="p-0016" num="0015">At enumeration of USB 3.0 device <b>20</b>, SuperSpeed Host <b>28</b> checks for the presence of a SuperSpeed device function (<b>40</b>). If a SuperSpeed device is found, then a connection is established. If a SuperSpeed device is not found (as in the case where only a USB 2.0 device is connected to port <b>22</b>), then the USB 2.0 Host <b>26</b> checks for the presence of a USB 2.0 device function (<b>38</b>) at device <b>20</b>. Once the Host Controller <b>14</b> determines which device function is connected, it tells the USB 3.0 Hub <b>16</b> to only enable communication for downstream port <b>22</b> corresponding to whether the USB 2.0 device function <b>38</b> or SuperSpeed device function <b>40</b> is attached. This means that only one of the two parallel busses is in operation at any one time to an end device such as USB 3.0 device <b>20</b>.</p>
<p id="p-0017" num="0016">Furthermore, SuperSpeed USB has a different architecture from that of the USB 2.0 bus. Very high speed communication systems consume large amounts of power owing to high bit rates. A design requirement of SuperSpeed USB was lower power consumption, to extend the battery life of user devices. This has resulted in a change from the previous broadcast design of the USB 2.0: SuperSpeed is not a broadcast bus, but rather directs communication packets to a specific node in the system and shuts down communication on idle links.</p>
<p id="p-0018" num="0017">This significantly affects any extension of the synchronisation schemes of, for example, U.S. patent application Ser. No. 12/279,328, whose method and apparatus for synchronising devices is based on a broadcast clock carrier signal that is delivered to each device on the bus, which is unsuitable in SuperSpeed USB.</p>
<p id="p-0019" num="0018">A SuperSpeed Hub function acts as a device to the host (or upstream port) and as a host to the device (or downstream port). This means that the SuperSpeed Hub function acts to buffer and schedule transactions on its downstream ports rather than merely acting as a repeater. Similarly, the SuperSpeed Hub function does so with scheduling transmissions on the upstream port. A heavily burdened Hub function can therefore add significant non-deterministic delays in packet transmission through the system. This also precludes the use of USB 2.0 synchronisation schemes such as that of U.S. patent application Ser. No. 12/279,328 from operating on SuperSpeed USB.</p>
<p id="p-0020" num="0019">The crude Isochronous synchronisation of USB 2.0 has been significantly improved in the USB 3.0 specification. Opening an Isochronous communication pipe between a Host Controller and a USB device guarantees a fixed bandwidth allocation in each Service Interval for the communication pipe. The Isochronous Protocol of USB 3.0 contains a so-called Isochronous Timestamp Packet (ITP), which is sent at somewhat regular intervals to each Isochronous Endpoint and which contains a timestamp of the beginning of ITP transmission by the USB Host Physical Layer (Phy) in the time domain of the Host Controller. The Isochronous Timestamp Packet is accurate to about 25 ns. SuperSpeed USB shuts down idle links to conserve power, but links must be active in order to receive an Isochronous Timestamp Packet. The Host Controller must therefore guarantee that all links to a device are in full active mode (termed power state U<b>0</b>) before transmission of the Isochronous Timestamp Packet.</p>
<p id="p-0021" num="0020">Unfortunately the Isochronous Timestamp packet can be delayed in propagation down the USB network. USB 3.0 also does not provide a way of determining the propagation time of packets in SuperSpeed USB and hence no way of accurately knowing the phase relationship between time domains on different USB devices. Phase differences of several hundred nanoseconds are expected to be a best case scenario with SuperSpeed USB making it impractical for instrumentation or other precision timing requirements.</p>
<p id="p-0022" num="0021">U.S. Pat. No. 5,566,180 (Eidson et al.) discloses a method of synchronising clocks in which a series of devices on a communication network transmit their local time to each other and network propagation time is determined by the ensemble of messages. Further disclosures by Eidson (U.S. Pat. Nos. 6,278,710, 6,665,316, 6,741,952 and 7,251,199) extend this concept but merely work toward a synchronisation scheme in which a constant stream of synchronising messages are transferred between each of the nodes of a distributed instrument network via Ethernet. This continual messaging consumes bandwidth and limits the accuracy of the possible synchronisation to several hundred nano-seconds in a point-to-point arrangement and substantially lower accuracy (typically micro-seconds) in a conventional switched subnet.</p>
<p id="p-0023" num="0022">It should be understood that the terms &#x2018;clock signals&#x2019; and &#x2018;synchronisation&#x2019; in this disclosure are used to refer to clock signals, trigger signals, delay compensation information and propagation time measurement messages. It should also be understood that a &#x2018;notion of time&#x2019; in this disclosure is used to denote an epoch or &#x2018;real time&#x2019; and can also be used to refer to the combination of a clock signal and an associated epoch.</p>
<heading id="h-0004" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0024" num="0023">It is a general object of the present invention to enable precision synchronisation of a plurality USB devices, up to a predefined maximum, according to the USB3 Specification.</p>
<p id="p-0025" num="0024">In a first broad aspect, the present invention provides a method of providing high density expansion of a USB network, the method comprising:
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0000">
    <ul id="ul0002" list-style="none">
        <li id="ul0002-0001" num="0025">attaching a plurality of USB hubs to adjacent slots in a PXI (including a PXI-express) instrumentation chassis;</li>
        <li id="ul0002-0002" num="0026">configuring one of the USB hubs as a primary USB Hub;</li>
        <li id="ul0002-0003" num="0027">connecting an upstream port of the primary USB Hub to a USB network;</li>
        <li id="ul0002-0004" num="0028">configuring a first downstream port of the primary USB Hub to communicate across a first PXI Local Bus to a first adjacent USB Hub of the plurality of USB Hubs other than the primary USB Hub, the first adjacent USB Hub being adjacent to the primary USB Hub;</li>
        <li id="ul0002-0005" num="0029">configuring a plurality of other downstream ports of the primary USB Hub to provide expansion (such as via a front panel) of the primary USB Hub;</li>
        <li id="ul0002-0006" num="0030">connecting an upstream port of the first adjacent USB Hub to the first PXI Local Bus, wherein the first PXI Local Bus is in the direction of the primary USB Hub;</li>
        <li id="ul0002-0007" num="0031">configuring a first downstream port of the first adjacent USB Hub to communicate across a second PXI Local Bus to a second adjacent USB Hub of the plurality of USB Hubs other than the primary USB Hub, the second adjacent USB Hub being adjacent to the first adjacent USB Hub;</li>
        <li id="ul0002-0008" num="0032">configuring a plurality of other downstream ports of the first adjacent USB Hub to provide expansion (such as via a front panel) of the first adjacent USB Hub; and</li>
        <li id="ul0002-0009" num="0033">configuring any other of the USB hubs and the first adjacent USB Hub in like manner.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0026" num="0034">Thus, USB expansion using a PXI local bus is facilitated in a PXI (including PXI-express) instrumentation architecture, wherein a high density of USB expansion ports can be made available from the PXI instrumentation chassis.</p>
<p id="p-0027" num="0035">Furthermore, this involves utilising the features of the PXI instrumentation chassis to synchronise the operation of said USB network devices to improve their operation. It will be apparent to those skilled in the art that these methods of expansion may be applied to any rack format instrumentation chassis such as, but not limit to VXI, cPCI, VME using an appropriate backplane bus mechanism.</p>
<p id="p-0028" num="0036">The method may comprise configuring one or more other USB Hubs in the same manner as is configured the first adjacent USB Hub.</p>
<p id="p-0029" num="0037">In one embodiment, a Host Controller of a USB network (of which the USB Hubs form a part) is contained within the PXI instrumentation chassis. In this embodiment, the USB Host Controller and the USB Hubs are clocked from a common source (to minimise the effect of reclocking jitter in USB signals), preferably in the form of a trigger bus. Preferably also the USB Host Controller is connected to the primary USB Hub across a backplane of the PXI instrumentation chassis backplane (preferably across the PXI Local Bus).</p>
<p id="p-0030" num="0038">The USB Host Controller may be connected to the primary USB Hub via an external USB3 cable. Also, the USB Host Controller may be external to the PXI instrumentation chassis.</p>
<p id="p-0031" num="0039">The method may comprise providing a USB Host Controller of the USB network in or on the PXI instrumentation chassis. The primary USB hub may include the USB Host Controller.</p>
<p id="p-0032" num="0040">In one embodiment, the downstream ports of the USB Hubs utilise differential signalling across the plurality of PXI Local Buses spanning adjacent USB Hubs. Communication across the PXI Local Bus may be in a single channel at maximum USB communication bandwidth. Alternatively, the communication across PXI Local Bus may be deserialized into a plurality of lower speed parallel channels by an upstream USB Hub (of the USB Hubs) for transmission across links of the PXI Local Bus, followed by re-serializing of the downstream ports of each of the plurality of USB Hubs at the upstream port of another of the plurality of USB Hubs adjacent to the respective USB Hub.</p>
<p id="p-0033" num="0041">According to this aspect, there is also provided an apparatus for providing high density expansion of a USB network, comprising:
<ul id="ul0003" list-style="none">
    <li id="ul0003-0001" num="0000">
    <ul id="ul0004" list-style="none">
        <li id="ul0004-0001" num="0042">a PXI or PXI-express form factor card;</li>
        <li id="ul0004-0002" num="0043">an upstream port for receiving USB signals from a first PXI local bus;</li>
        <li id="ul0004-0003" num="0044">USB hub circuitry;</li>
        <li id="ul0004-0004" num="0045">a downstream USB port for expanding a USB network across a second PXI local bus; and</li>
        <li id="ul0004-0005" num="0046">one or more additional downstream USB ports for expanding the USB network.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0034" num="0047">The apparatus may further comprise a USB Host Controller connected to an upstream port of the USB hub circuitry.</p>
<p id="p-0035" num="0048">The USB hub circuitry may be clocked by a local clock that has been syntonised to the timebase of the USB Host Controller.</p>
<p id="p-0036" num="0049">According to this broad approach, a system is also provided for utilising the PXI Local Bus for expansion of a USB network by passing USB data streams to adjacent devices.</p>
<p id="p-0037" num="0050">Thus, according to this aspect there is also provided an apparatus for expanding a USB network, comprising:
<ul id="ul0005" list-style="none">
    <li id="ul0005-0001" num="0000">
    <ul id="ul0006" list-style="none">
        <li id="ul0006-0001" num="0051">USB Hub circuitry for communicating toward a Host Controller through an upstream port of a USB Hub and communicating toward USB devices through a plurality of downstream ports of the USB Hub;</li>
        <li id="ul0006-0002" num="0052">circuitry adapted to connect one of the downstream ports to a first PXI Local Bus port available to a PXI card, the PXI card being attached to a PXI backplane; and</li>
        <li id="ul0006-0003" num="0053">circuitry adapted to connect the upstream port to either a front panel connection of the USB Hub or a second PXI Local Bus port;</li>
        <li id="ul0006-0004" num="0054">whereby USB expansion is provided via a PXI Local Bus on the PXI backplane between adjacent PXI-card-based USB Hubs.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0038" num="0055">The apparatus may further comprise a PXI or PXI-express form factor card.</p>
<p id="p-0039" num="0056">In particular embodiment, the apparatus is provided as circuitry on a PXI-card-based USB Hub.</p>
<p id="p-0040" num="0057">The USB Hub circuitry may be clocked by a local clock that has been syntonised to the timebase of the USB Host Controller.</p>
<p id="p-0041" num="0058">In one embodiment, there is substantially no integer relationship between a clock rate of the USB Hub circuitry and a clock rate of the USB Host Controller</p>
<p id="p-0042" num="0059">According to one embodiment of this aspect, there is provided a USB Hub provided with the apparatus described above.</p>
<p id="p-0043" num="0060">In a second broad aspect, the present invention provides a method of synchronising a USB Host Controller and a plurality of USB hubs by utilising the architecture of the PXI (or PXI-express) chassis. The PXI chassis form factor provides multiple plug-in-slots in a card cage arrangement. The backplane of the PXI chassis provides a PCI bus, a dedicated clock and trigger bus (the PXI Star Trigger Bus) and a PXI Local Bus for connecting and providing a side band communication channel between adjacent cards.</p>
<p id="p-0044" num="0061">According to this aspect, therefore, the present invention provides a method for synchronising a plurality of USB Hubs within a PXI (including PXI-express) instrumentation architecture, the method comprising:
<ul id="ul0007" list-style="none">
    <li id="ul0007-0001" num="0000">
    <ul id="ul0008" list-style="none">
        <li id="ul0008-0001" num="0062">attaching a plurality of USB hubs to slots in a PXI instrumentation chassis, the PXI instrumentation chassis including a PXI Star Trigger Bus;</li>
        <li id="ul0008-0002" num="0063">configuring the USB Hubs to receive clocking signals from the PXI Star Trigger Bus via backplane connectors of the PXI instrumentation chassis; and</li>
        <li id="ul0008-0003" num="0064">synchronising respective local clocks of the USB Hubs to the clocking signals provided by the PXI Star Trigger Bus.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0045" num="0065">Synchronisation of a plurality of USB devices can be compromised by the way that standard USB hubs process and retransmit data from an upstream port to a downstream port. Thus, the present invention provides a method of reducing the jitter in the local clock of a synchronised USB device.</p>
<p id="p-0046" num="0066">In an embodiment, a USB Host Controller that conforms to the PXI (including PXI-express) form factor is attached to the PXI instrumentation chassis, and the method includes synchronising a local clock of the USB Host Controller to the clocking signals provided by the PXI Star Trigger Bus. In this way, both the USB data stream bit rate, derived from the USB Host Controller's local clock, and USB Hub re-clocking rate share a common source of time.</p>
<p id="p-0047" num="0067">Thus, this method allows synchronising of a USB Host Controller and a plurality of USB hubs by utilising the architecture of the PXI (or PXI-express) chassis. The PXI chassis form factor provides multiple plug-in-slots in a card cage arrangement, and the backplane of the PXI chassis provides a PCI bus, a dedicated clock and trigger bus, the PXI Star Trigger Bus, and a PXI Local Bus for connecting and providing a side band communication channel between adjacent cards.</p>
<p id="p-0048" num="0068">In one embodiment, the local clocks are frequency-locked (or syntonised) to a reference clock signal provided by the PXI Star Trigger Bus. The local clocks may be locked to a desired frequency other than the reference clock signal provided by the PXI Star Trigger Bus. Preferably the plurality of local clocks are phase-aligned, or synchronised, to a reference trigger signal provided by the PXI Star Trigger Bus.</p>
<p id="p-0049" num="0069">The USB Hub re-clocking rate is preferably synchronised to be substantially an integer multiple of the bit rate of the USB data stream (in order to over-clock the sampling and retransmission of the USB data stream). In this way there is a constant phase relationship between the bit rate of the USB data stream and the plurality of clocks used to retransmit the USB data stream, to minimise jitter in retransmission of the USB data stream by the plurality of USB Hubs.</p>
<p id="p-0050" num="0070">In a third broad aspect, the present invention provides a method of reducing clocking induced jitter in the local clocks of a plurality of USB devices attached at various points within a USB network, the method comprising:
<ul id="ul0009" list-style="none">
    <li id="ul0009-0001" num="0000">
    <ul id="ul0010" list-style="none">
        <li id="ul0010-0001" num="0071">attaching a plurality of USB hubs to slots in a PXI instrumentation chassis, the PXI instrumentation chassis provided with a PXI Star Trigger Bus;</li>
        <li id="ul0010-0002" num="0072">configuring the USB Hubs to receive clocking signals from the PXI Star Trigger Bus via backplane connectors of the PXI instrumentation chassis; and</li>
        <li id="ul0010-0003" num="0073">synchronising respective local clocks of the USB Hubs to the clocking signals provided by the PXI Star Trigger Bus;</li>
        <li id="ul0010-0004" num="0074">attaching a plurality of USB devices at a plurality of points within the USB network;</li>
        <li id="ul0010-0005" num="0075">clocking USB Hub Functions within each of the USB Hubs with the local clocks;</li>
        <li id="ul0010-0006" num="0076">wherein a constant phase relationship is maintained between USB data signals and the USB Hub clocking at each level of the network.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0051" num="0077">In one embodiment, there is substantially no integer relationship between respective clock rates of the USB Hubs and a clock rate of the USB Host Controller</p>
<p id="p-0052" num="0078">It should be noted that all the various features of each of the above aspects of the invention can be combined as suitable and desired.</p>
<p id="p-0053" num="0079">Furthermore, it should be noted that the invention also provides apparatuses and systems arranged to perform each of the methods of the invention described above.</p>
<p id="p-0054" num="0080">In addition, apparatuses according to the invention can be embodied in various ways. For example, such devices could be constructed in the form of multiple components on a printed circuit or printed wiring board, on a ceramic substrate or at the semiconductor level, that is, as a single silicon (or other semiconductor material) chip.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0055" num="0081">In order that the present invention may be more clearly ascertained, embodiments will now be described, by way of example, with reference to the accompanying drawing, in which:</p>
<p id="p-0056" num="0082"><figref idref="DRAWINGS">FIG. 1</figref> is a schematic diagram of the dual-bus architecture of USB3 according to the background art;</p>
<p id="p-0057" num="0083"><figref idref="DRAWINGS">FIG. 2</figref> is a schematic representation of a background art PXI Chassis;</p>
<p id="p-0058" num="0084"><figref idref="DRAWINGS">FIG. 3</figref> is a schematic representation of a means for expanding a Synchronous USB within a PXI Chassis according to an embodiment of the present invention; and</p>
<p id="p-0059" num="0085"><figref idref="DRAWINGS">FIG. 4</figref> is a schematic representation of an apparatus for expanding a Synchronous USB within a PXI Chassis according to an embodiment of the present invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0006" level="1">DETAILED DESCRIPTION OF THE INVENTION</heading>
<p id="p-0060" num="0086"><figref idref="DRAWINGS">FIG. 2</figref> is a schematic representation of the architecture of a PXI instrumentation chassis <b>50</b> according to the background art. The PXI chassis <b>52</b> contains a slot <b>54</b> for a computer (viz. slot <b>0</b> of chassis <b>52</b>, which typically houses a rugged embedded PC), a timing controller slot <b>56</b> (viz. slot <b>1</b> of chassis <b>52</b>), and a plurality of expansion slots <b>58</b>. These components are connected by several busses <b>60</b>, <b>62</b>, <b>64</b> across the backplane (which also provides power to the modules as required).</p>
<p id="p-0061" num="0087">Main communication is provided across the PCI bus <b>60</b>. All data is transferred between the embedded computer (connected to slot <b>0</b>) and attached timing controller (connected to slot <b>1</b>) and plug-in modules <b>58</b> across PCI bus <b>60</b>. Slot <b>1</b> may contain a special timing controller device that provides coordination of the different plug-in modules via delivery of clock and trigger event signals across the backplane's Star Trigger Bus <b>62</b>. Finally a PXI Local Bus <b>64</b> is provided for sideband communication between adjacent modules.</p>
<p id="p-0062" num="0088">A system <b>70</b> for synchronous USB expansion according to an embodiment of the present invention is shown schematically in <figref idref="DRAWINGS">FIG. 3</figref>. System <b>70</b> includes a PXI chassis <b>72</b> with a slot <b>0</b> controller <b>74</b> and a slot <b>1</b> timing controller <b>76</b>.</p>
<p id="p-0063" num="0089">System <b>70</b> also includes a USB Host Controller <b>82</b> and two USB Hub devices <b>84</b> attached to PXI chassis <b>72</b> in adjacent slots of PXI chassis <b>72</b>. USB Host Controller <b>82</b> has circuitry for determining a signal propagation time for signals to propagate to any USB devices attached to Host Controller <b>82</b>, by any suitable method of the present invention described herein. USB Hub devices <b>84</b> each has a plurality of downstream USB expansion ports <b>86</b> on their respective front panels. USB Host Controller <b>82</b> may optionally have a plurality of downstream USB expansion ports <b>88</b>.</p>
<p id="p-0064" num="0090">The timing controller attached at slot <b>1</b> (viz. <b>366</b>) provides timing information to USB Host Controller <b>82</b> and USB Hub devices <b>84</b> via a PXI Star Trigger Bus <b>90</b>. These signals preferably include a reference clock and event trigger signals. In this way, each of the USB Host Controller <b>82</b> and USB Hub devices <b>84</b> can synchronise its clock to the same timebase, derived from the timing controller <b>76</b>. This reduces the likelihood of clock jitter between the synchronised USB devices attached to system <b>70</b>.</p>
<p id="p-0065" num="0091">Furthermore USB Host Controller <b>82</b> and USB Hub devices <b>84</b> are daisy chained using a PXI Local Bus <b>92</b>, which connects adjacent modules providing a sideband communication channel between adjacent modules.</p>
<p id="p-0066" num="0092">It should be noted that the technique employed in this embodiment is also applicable to PXI-express. PXI-express is an evolution of PXI in which the PCI bus (cf. PCI bus <b>60</b> of <figref idref="DRAWINGS">FIG. 2</figref>) has been upgraded to a PCI-express bus, but is otherwise comparable to PXI.</p>
<p id="p-0067" num="0093">It will also be apparent to those skilled in the art that a plurality of USB Host Controllers <b>82</b> can be used in PXI Chassis <b>72</b>, each arranged to receive synchronisation signals from PXI Star Trigger Bus <b>90</b>. In this way a plurality of USB networks can be synchronised together and to the notion of time of PXI Chassis <b>72</b>.</p>
<p id="p-0068" num="0094"><figref idref="DRAWINGS">FIG. 4</figref> is a schematic representation of an apparatus <b>100</b> for expanding a synchronous USB according to another embodiment of the present invention. Apparatus <b>100</b> includes a USB Host Controller Module <b>102</b> and USB Hub Module <b>104</b> attached to adjacent slots of a PXI chassis, namely by PCI Backplane <b>106</b> and PXI Star Trigger Bus <b>108</b>. Furthermore, as USB Host Controller Module <b>102</b> and USB Hub Module <b>104</b> are attached to adjacent slots, they may be connected via an intermediate PXI Local Bus <b>110</b>.</p>
<p id="p-0069" num="0095">USB Host Controller Module <b>102</b> has a USB Host Controller Function <b>112</b>, a USB Hub Function <b>114</b> for providing expansion of the USB to multiple downstream ports, and a USB Device Function <b>116</b> for monitoring USB data streams. USB Host Controller Module <b>102</b> is attached to the PXI Chassis' PCI Bus <b>106</b> via a first connector <b>118</b>, to the PXI Chassis' PXI Star Trigger bus <b>108</b> via a second connector <b>120</b>, to downstream USB Hubs and devices via a plurality of Expansion Ports <b>122</b> and to adjacent USB Hub Module <b>104</b> via PXI Local Bus <b>110</b> through a third connector <b>124</b>.</p>
<p id="p-0070" num="0096">USB Hub Module <b>104</b> has a USB Hub Function <b>126</b> for providing expansion of the USB to multiple downstream ports and a USB Device Function <b>128</b> for monitoring USB data streams. USB Hub Module <b>104</b> is attached to the PXI Chassis' PXI Star Trigger bus <b>108</b> via a first connector <b>130</b>, to downstream USB Hubs and devices through a plurality of Expansion Ports <b>132</b> and further expansion is possible via another adjacent USB Hub Module (not shown) using a downstream PXI Local Bus (not shown) through a second connector <b>134</b>. USB Hub Module <b>104</b> receives upstream communication from either the upstream PXI Local Bus <b>110</b> through a third connector <b>136</b> or via a front panel upstream connector <b>138</b>. A multiplexer <b>140</b> may also be used to ensure only one upstream connection is possible for a given USB Hub Module <b>104</b>.</p>
<p id="p-0071" num="0097">According to this embodiment, USB Host Controller Function <b>112</b> of USB Host Controller Module <b>102</b> is clocked by clock and timing signals received from PXI Star Trigger Bus <b>108</b> via second connector <b>120</b>. A clock signal <b>142</b> is provided to both a Clock Input <b>144</b> of USB Host Controller Function <b>112</b> and a Clock Input <b>146</b> of USB Hub Function <b>114</b> to ensure that they operate synchronously and therefore minimise reclocking induced jitter. (According to this embodiment, element <b>148</b> simply passes the clock signal through to USB Hub function <b>134</b>.)</p>
<p id="p-0072" num="0098">According to a variation of this embodiment, element <b>148</b> is a phase-locked-loop (PLL) that receives clock signal <b>142</b> and regenerates another clock signal of slightly different frequency. This shifts the beat frequency of the two Clock Inputs <b>144</b>, <b>146</b> (of USB Host Controller Function <b>112</b> and of USB Hub Function <b>114</b> respectively) to a higher known frequency that can be effectively filtered, thereby reducing clocking jitter between devices.</p>
<p id="p-0073" num="0099">USB Device Function <b>116</b> of USB Host Controller Module <b>102</b> monitors USB data traffic at detection point <b>150</b> to determine the propagation time of signals transmitted by USB Host Controller Function <b>112</b> from detection point <b>150</b> to each attached downstream USB device, according to any of the approaches of the present invention described herein. USB Device Function <b>116</b> may also use clock signals <b>142</b> (derived from PXI Star Trigger Bus <b>108</b>), to determine propagation times using either a SuperSpeed or non-SuperSpeed synchronisation channel.</p>
<p id="p-0074" num="0100">USB Hub Module <b>104</b> receives clock signals <b>152</b> from said PXI Star Trigger Bus <b>108</b> via first connector <b>130</b>. Clock signals <b>152</b> are used as the clock input <b>156</b> for USB Hub Function <b>126</b> to re-clock USB data signals upstream and downstream on the USB. Clock signals <b>152</b> are synchronous with clock signals <b>142</b> at USB Host Controller Module <b>102</b> owing to being derived from the common PXI Star Trigger Bus <b>108</b>. In this way, reclocking induced jitter is minimised according to this embodiment of the present invention. (Element <b>154</b> simply passes the clock signal <b>152</b> through to USB Hub function <b>126</b>.)</p>
<p id="p-0075" num="0101">According to a variation of this embodiment, element <b>154</b> is a phase-locked-loop (PLL) that receives clock signal <b>152</b> and regenerates another clock signal of slightly different frequency. This shifts the beat frequency of the clock signals at clock inputs <b>146</b> (of USB Hub Function <b>114</b>) and <b>156</b> of (USB Hub Function <b>126</b>) to a higher known frequency that can be effectively filtered, thereby reducing clocking jitter between devices. Knowledge of the frequency of clock signal at clock input <b>146</b> allows the clock signal at clock input <b>156</b> to be adjusted so as to minimise any possible beating effect.</p>
<p id="p-0076" num="0102">USB Device Function <b>128</b> monitors USB data traffic at detection point <b>158</b> to determine propagation time of signals transmitted by USB Host Controller Function <b>112</b> (of USB Host Controller Module <b>102</b>) from detection point <b>158</b> to each of attached downstream USB devices, according to any of the techniques of the present invention described herein. USB Device Function <b>128</b> may also use clock signals <b>152</b> (derived from PXI Star Trigger Bus <b>108</b>), to determine such propagation times.</p>
<p id="p-0077" num="0103">Apparatus <b>100</b> may use a variety of methods to determine the total signal propagation time to each device from the top level (detection point <b>150</b>) and hence the relative propagation times to attached USB devices. In one variation of this embodiment, all propagation times are measured by USB Device Function <b>116</b> of USB Host Controller Module <b>102</b>. In another variation, each of USB Host Controller Module <b>102</b> and USB Hub Module <b>104</b> measures the propagation time to USB devices connected directly to their respective downstream ports <b>122</b> or <b>132</b>, while offsets (i.e. time for propagation from detection point <b>150</b> to detection point <b>158</b>) is determined by reference to the common clocking signals <b>142</b> and <b>152</b> at each hub layer (USB Host Controller Module <b>102</b> and USB Hub Module <b>104</b>) respectively.</p>
<p id="p-0078" num="0104">Furthermore, USB Host Controller <b>102</b> may also be attached to the Slot <b>1</b> PXI timing controller slot and contain additional circuitry (not shown) to control the timing of multiple attached modules by generating precise timing signals onto PXI Star Trigger Bus <b>108</b> through second connector <b>120</b>. In this embodiment, a local clock source (not shown) is provided in USB Host Controller Module <b>102</b> to provide reference clock signals <b>142</b>, which may be delivered to PXI Star Trigger Bus <b>108</b> via second connector <b>120</b>.</p>
<p id="p-0079" num="0105">Modifications within the scope of the invention may be readily effected by those skilled in the art. It is to be understood, therefore, that this invention is not limited to the particular embodiments described by way of example hereinabove and that combinations of the various embodiments described herein are readily apparent to those skilled in the art.</p>
<p id="p-0080" num="0106">In the preceding description of the invention and in the claims that follow, except where the context requires otherwise owing to express language or necessary implication, the expression &#x201c;Host Controller&#x201d; embraces all forms of USB Host Controller, including standard USB Host controllers, USB-on-the-go Host Controllers and wireless USB Host Controllers.</p>
<p id="p-0081" num="0107">In the preceding description of the invention and in the claims that follow, except where the context requires otherwise owing to express language or necessary implication, the word &#x201c;comprise&#x201d; or variations such as &#x201c;comprises&#x201d; or &#x201c;comprising&#x201d; is used in an inclusive sense, that is, to specify the presence of the stated features but not to preclude the presence or addition of further features in various embodiments of the invention.</p>
<p id="p-0082" num="0108">Further, any reference herein to background art is not intended to imply that such background art forms or formed a part of the common general knowledge in any country.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method of providing expansion of a USB network, the method comprising:
<claim-text>attaching a plurality of USB hubs to adjacent slots in a PXI instrumentation chassis;</claim-text>
<claim-text>configuring one of said USB hubs as a primary USB Hub;</claim-text>
<claim-text>connecting an upstream port of said primary USB Hub to a USB network;</claim-text>
<claim-text>configuring a first downstream port of said primary USB Hub to communicate across a first PXI Local Bus to a first adjacent USB Hub of said plurality of USB Hubs other than said primary USB Hub, said first adjacent USB Hub being adjacent to said primary USB Hub;</claim-text>
<claim-text>configuring a plurality of other downstream ports of said primary USB Hub to provide expansion of said primary USB Hub;</claim-text>
<claim-text>connecting an upstream port of said first adjacent USB Hub to said first PXI Local Bus, wherein said first PXI Local Bus is in the direction of said primary USB Hub; and</claim-text>
<claim-text>configuring a plurality of other downstream ports of said first adjacent USB Hub to provide expansion of the first adjacent USB Hub.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. A method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein there are three or more USB hubs attached to adjacent slots in the PXI instrumentation chassis, the method further comprising:
<claim-text>configuring a first downstream port of said first adjacent USB Hub to communicate across a second PXI Local Bus to a second adjacent USB Hub of said plurality of USB Hubs other than said primary USB Hub, said second adjacent USB Hub being adjacent to said first adjacent USB Hub; and</claim-text>
<claim-text>configuring any other of said USB hubs in a like manner.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. A method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, including providing a USB Host Controller of said USB network in or on said PXI instrumentation chassis.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. A method as claimed in <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein said primary USB hub includes said USB Host Controller.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. A method as claimed <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said downstream ports of said plurality of USB Hubs utilise differential signalling across said plurality of PXI Local Buses spanning adjacent said USB Hubs.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. A method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, including deserializing said downstream ports of said plurality of USB Hubs into a plurality of lower speed signal channels for transmission across links of said PXI Local Bus and re-serializing said downstream ports of each of said plurality of USB Hubs at said upstream port of another of said plurality of USB Hubs adjacent to said respective USB Hub.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. A method as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>configuring said USB Hubs attached to adjacent slots in the PXI instrumentation chassis to receive clocking signals from a PXI Star Trigger Bus via backplane connectors of the PXI instrumentation chassis; and</claim-text>
<claim-text>synchronising respective local clocks of the USB Hubs to said clocking signals provided by the PXI Star Trigger Bus.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. A method as claimed in <claim-ref idref="CLM-00007">claim 7</claim-ref>, further comprising:
<claim-text>attaching a plurality of USB devices at a plurality of points within the USB network;</claim-text>
<claim-text>clocking USB Hub Functions within each of said USB Hubs with said local clocks;</claim-text>
<claim-text>wherein a constant phase relationship is maintained between USB data signals and said USB Hub clocking at each level of said network.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. A method as claimed in <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein there is substantially no integer relationship between respective clock rates of said USB Hubs and a clock rate of said USB Host Controller.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. A method as claimed <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising
<claim-text>attaching a USB Host Controller with a local clock to the PXI instrumentation chassis;</claim-text>
<claim-text>synchronising the local clock of the USB Host Controller to a PXI Trigger Bus or PXI Star Trigger Bus of the PXI instrumentation chassis;</claim-text>
<claim-text>synchronising a notion of real time of the USB Host Controller to predefined event signals derived from the PXI Trigger Bus or PXI Star Trigger Bus; and</claim-text>
<claim-text>synchronising a plurality of USB devices at respective attachment points within the USB network to a timebase and the notion of real time of the USB Host Controller.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. A method as claimed in <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein synchronisation of said notion of real time of said USB Host Controller includes phase compensation for USB signal propagation time.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. An apparatus for providing expansion of a USB network, comprising:
<claim-text>a PXI or PXI-express form factor card containing USB hub circuitry, the USB hub circuitry including:</claim-text>
<claim-text>an upstream port for receiving USB signals from either a first PXI Local Bus or a front panel connection of a USB Hub;</claim-text>
<claim-text>a downstream USB port for expanding a USB network across a second PXI Local Bus; and</claim-text>
<claim-text>one or more additional downstream USB ports for expanding said USB network.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. An apparatus as claimed in <claim-ref idref="CLM-00012">claim 12</claim-ref>, further comprising a USB Host Controller, wherein said USB Host Controller is connected to an upstream port of said USB hub circuitry.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. An apparatus as claimed in <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein said USB hub circuitry is clocked by a local clock that has been synchronized to a timebase of the USB Host Controller.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. An apparatus as claimed in <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein:
<claim-text>the PXI or PXI-express form factor card is attached to a PXI backplane.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. An apparatus as claimed in <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein there is substantially no integer relationship between a clock rate of said USB Hub circuitry and a clock rate of said USB Host Controller.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. A system comprising a PXI instrumentation chassis and a plurality of apparatus as claimed in <claim-ref idref="CLM-00012">claim 12</claim-ref> attached to adjacent slots in the PXI instrumentation chassis. </claim-text>
</claim>
</claims>
</us-patent-grant>
