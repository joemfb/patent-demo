<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625120-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625120</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13401273</doc-number>
<date>20120221</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2011-036678</doc-number>
<date>20110223</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>135</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>3</main-group>
<subgroup>12</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>N</subclass>
<main-group>1</main-group>
<subgroup>00</subgroup>
<symbol-position>L</symbol-position>
<classification-value>N</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>358  113</main-classification>
<further-classification>358  115</further-classification>
</classification-national>
<invention-title id="d2e71">Image forming apparatus having a CPU utilization monitoring for monitoring the reading processing and/or print processing</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>7903272</doc-number>
<kind>B2</kind>
<name>Kato</name>
<date>20110300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358  115</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>2006/0129912</doc-number>
<kind>A1</kind>
<name>Kunori</name>
<date>20060600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2008/0239378</doc-number>
<kind>A1</kind>
<name>Uno</name>
<date>20081000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358  115</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2008/0247673</doc-number>
<kind>A1</kind>
<name>Kirihara et al.</name>
<date>20081000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2008/0294816</doc-number>
<kind>A1</kind>
<name>Fuji</name>
<date>20081100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2009/0172142</doc-number>
<kind>A1</kind>
<name>Hanai et al.</name>
<date>20090700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2009/0207449</doc-number>
<kind>A1</kind>
<name>Johnson et al.</name>
<date>20090800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>358  115</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>JP</country>
<doc-number>2000-039930</doc-number>
<date>20000200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>JP</country>
<doc-number>2006-192878</doc-number>
<date>20060700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>JP</country>
<doc-number>2007-096835</doc-number>
<date>20070400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>JP</country>
<doc-number>2007-188226</doc-number>
<date>20070700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>JP</country>
<doc-number>2007-312106</doc-number>
<date>20071100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>JP</country>
<doc-number>2008-258985</doc-number>
<date>20081000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>JP</country>
<doc-number>2008-292542</doc-number>
<date>20081200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>JP</country>
<doc-number>2009-157785</doc-number>
<date>20090700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00016">
<document-id>
<country>JP</country>
<doc-number>2011-023918</doc-number>
<date>20110200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>5</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>358  11</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>358  15</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>358 19</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>358  113</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>358  114</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>358  115</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>358474</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>358402</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>358409</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>399  8</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>399 31</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>399 37</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>4</number-of-drawing-sheets>
<number-of-figures>4</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20120212764</doc-number>
<kind>A1</kind>
<date>20120823</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Tanaka</last-name>
<first-name>Kenji</first-name>
<address>
<city>Osaka</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Tanaka</last-name>
<first-name>Kenji</first-name>
<address>
<city>Osaka</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Edwards Wildman Palmer LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
<agent sequence="02" rep-type="attorney">
<addressbook>
<last-name>Conlin</last-name>
<first-name>David G.</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
<agent sequence="03" rep-type="attorney">
<addressbook>
<last-name>Jensen</last-name>
<first-name>Steven M.</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Sharp Kabushiki Kaisha</orgname>
<role>03</role>
<address>
<city>Osaka</city>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Garcia</last-name>
<first-name>Gabriel</first-name>
<department>2673</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">An MFP is provided with a scanner unit for optically reading a document image; a printer unit for printing image data; a CPU for controlling operation of the MFP according to an operating condition related to reading processing by the scanner unit and/or print processing by the printer unit; a CPU utilization monitoring portion for monitoring utilization of the CPU at the time of performing the reading processing and/or the print processing; and an operating condition restriction portion for restricting, when CPU utilization that is monitored by the CPU utilization monitoring portion is a predetermined value or more, the operating condition related to the reading processing and/or the print processing according to the CPU utilization.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="165.35mm" wi="262.13mm" file="US08625120-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="264.67mm" wi="172.80mm" file="US08625120-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="157.90mm" wi="158.33mm" file="US08625120-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="262.97mm" wi="167.56mm" orientation="landscape" file="US08625120-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="255.52mm" wi="175.01mm" orientation="landscape" file="US08625120-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">CROSS-NOTING PARAGRAPH</heading>
<p id="p-0002" num="0001">This non-provisional application claims priority under 35 U.S.C. &#xa7;119(a) on Patent Application No. 2011-036678 filed in JAPAN on Feb. 23, 2011, the entire contents of which are hereby incorporated herein by reference.</p>
<heading id="h-0002" level="1">FIELD OF THE INVENTION</heading>
<p id="p-0003" num="0002">The present invention relates to an image forming apparatus, and more particularly to an image forming apparatus including a reading portion for optically reading a document image and a printing portion for printing image data.</p>
<heading id="h-0003" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0004" num="0003">Recently, an image forming apparatus such as an MFP (digital Multi Function Peripheral) has been commercially available such that a display screen equipped with a touch panel as a user interface (hereinafter, also referred to as UI) is made larger with various functions such as a preview function which are easier to be used and improved so as to be easily viewable. With the trend toward high functionality or multifunctionality for the MFP in this manner, a load on a CPU provided in the MFP of course increases.</p>
<p id="p-0005" num="0004">When processing ability of the CPU becomes insufficient, operation of the MFP is suppressed so that a user gets stressed because, for example, preview display is not smoothly performed, scan performance is degraded, or the like. In this case, a high-performance CPU with high processing ability is attached to the MFP so as to be able to attempt load reduction, however, the high-performance CPU is generally expensive, thus causing cost increases of the MFP. Therefore, various techniques for effectively using the CPU without stressing a user out have been proposed.</p>
<p id="p-0006" num="0005">For example, Japanese Laid-Open Patent Publication No. 2000-39930 describes an electronic device for monitoring a load on a CPU to change a clock. Such an electronic device is provided with a VCXO circuit capable of dynamically controlling a clock frequency; a CPU portion which operates with the clock; a program memory portion in which a program to operate is stored; and a program monitor control portion which optimally controls the clock by monitoring a progress state of the program, thereby being constituted so as to dynamically change the clock according to a software load of the CPU portion.</p>
<p id="p-0007" num="0006">Here, in the case of processing a job with a high CPU load in the MFP, CPU utilization becomes nearly 100% in some cases. In this case, the CPU is occupied by the job processing, thus influencing operation of a UI in the MFP. For example, responsiveness of the UI is degraded so that preview display is stopped on the way, operation of screen switching and the like become awkward, or the like, thus heavily stressing a user out with such a state which is directly visible. Moreover, to the contrary, placing priority on the operation of the UI influences processing of a job with a high load, thereby, for example, temporarily stopping print processing by a printer or reading processing by a scanner, or the like, thus stressing the user out also in this case.</p>
<p id="p-0008" num="0007">For addressing such a problem, with the technique described in Japanese Laid-Open Patent Publication No. 2000-39930, the clock is dynamically changed according to the load of the CPU, and operation of the clock is of course restricted. Therefore, in the case of exceeding restriction of the clock, it is impossible to suppress degradation of responsiveness of the UI without temporarily stopping the reading processing or the printing processing. Accordingly, the above-described problem is not solved with the technique of Japanese Laid-Open Patent Publication No. 2000-39930.</p>
<heading id="h-0004" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0009" num="0008">An object of the present invention is to provide an image forming apparatus capable of suppressing degradation of responsiveness of a UI without temporarily stopping reading processing or print processing in the case of becoming a high load on a CPU.</p>
<p id="p-0010" num="0009">An object of the present invention is to provide an image forming apparatus including a reading portion for optically reading a document image and a printing portion for printing image data, comprising: a CPU for controlling operation of the image forming apparatus according to an operating condition related to reading processing by the reading portion and/or print processing by the printing portion; a CPU utilization monitoring portion for monitoring utilization of the CPU at the time of performing the reading processing and/or the print processing; and an operating condition restriction portion for restricting, when CPU utilization that is monitored by the CPU utilization monitoring portion is a predetermined value or more, the operating condition related to the reading processing and/or the print processing according to the CPU utilization.</p>
<p id="p-0011" num="0010">Another object of the present invention is to provide the image forming apparatus, wherein a CPU utilization table in which a processing detail is associated with the CPU utilization in the image forming apparatus is provided, and the CPU utilization monitoring portion calculates, based on a processing detail of the image forming apparatus at the time of performing the reading processing and/or the print processing, the CPU utilization corresponding to the processing detail with reference to the CPU utilization table.</p>
<p id="p-0012" num="0011">Another object of the present invention is to provide the image forming apparatus, wherein a bus that is connected to the CPU and a bus band utilization monitoring portion for monitoring band utilization of the bus at the time of performing the reading processing and/or the print processing are provided, and the operating condition restriction portion restricts, when the CPU utilization is less than the predetermined value and bus band utilization that is monitored by the bus band utilization monitoring portion is a predetermined value or more, an operating condition related to the reading processing and/or the print processing according to the bus band utilization.</p>
<p id="p-0013" num="0012">Another object of the present invention is to provide the image forming apparatus, wherein restriction of the operating condition related to the reading processing and/or the print processing is to extend a reading cycle in the reading processing and/or a print cycle in the print processing with respect to a default value.</p>
<p id="p-0014" num="0013">Another object of the present invention is to provide the image forming apparatus, wherein the operating condition restriction portion differentiates the amount for extending the reading cycle in a case where the reading cycle is extended between the case of extending only the reading cycle and the case of extending both the reading cycle and the print cycle.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram showing a configuration example of an image forming apparatus according to an embodiment of the present invention;</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 2</figref> is a diagram showing an example of a CPU utilization table in which a processing detail is associated with the CPU utilization in an MFP;</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 3</figref> is a flowchart for explaining an example of a method of controlling a CPU load in the MFP of the present invention; and</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 4</figref> is a flowchart for explaining an example of a method of controlling a CPU load and a bus load in the MFP of the present invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0006" level="1">PREFERRED EMBODIMENTS OF THE INVENTION</heading>
<p id="p-0019" num="0018">Hereinafter, preferred embodiments according to an image forming apparatus of the present invention will be described with reference to accompanying drawings.</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram showing a configuration example of an image forming apparatus according to an embodiment of the present invention, and a reference number <b>10</b> indicates an image forming apparatus in the diagram. This image forming apparatus <b>10</b> is configured as a digital multi function peripheral (MFP) including functions of a scanner, copy, a printer, facsimile and the like. The image forming apparatus <b>10</b> (hereinafter, referred to as MFP <b>10</b>) is mainly provided with a scanner unit <b>1</b>, a controller <b>2</b> and a printer unit <b>3</b>. The controller <b>2</b> is connected to the scanner unit <b>1</b> and the printer unit <b>3</b> via a serial line <b>4</b>, and controls operation of the scanner unit <b>1</b> and the printer unit <b>3</b>.</p>
<p id="p-0021" num="0020">The scanner unit <b>1</b> corresponds to a reading portion of the present invention for optically reading a document image. The scanner unit <b>1</b> is provided with a mechanic control CPU <b>11</b> for controlling hardware (mechanic part), a ROM <b>12</b> serving as a nonvolatile memory for storing a control program of the scanner unit <b>1</b>, a RAM <b>13</b> as a volatile memory serving as an execution area of the control program, an image reading sensor <b>14</b> such as a CCD (Charge Coupled Device) for reading the document image, a data processing ASIC (Application Specific Integrated Circuit) <b>15</b> for performing processing of image data in which the document image is read and input by the image reading sensor <b>14</b>, and a RAM <b>16</b> serving as an execution area of a program in the data processing ASIC <b>15</b>.</p>
<p id="p-0022" num="0021">The controller <b>2</b> is provided with a CPU <b>21</b> which is connected to the scanner unit <b>1</b> and the printer unit <b>3</b> via the serial line <b>4</b> to control operation of the MFP <b>10</b>, a ROM <b>22</b> for storing a control program for the entire MFP <b>10</b>, an image processing ASIC <b>23</b> for applying predetermined image processing to read image data that is input from the scanner unit <b>1</b>, a controller chip <b>24</b> for connecting an HDD (hard disc drive) <b>25</b> and a memory card <b>26</b> to control input/output thereof, the HDD <b>25</b> and the memory card <b>26</b> for recording image data and the like, a RAM <b>27</b> serving as an execution area of the control program, a print image generating ASIC <b>28</b> for generating image print data that is output to the printer unit <b>3</b>, a LAN controlling IC <b>29</b> for controlling a network such as a LAN, and a bus <b>30</b> for connecting these portions, respectively.</p>
<p id="p-0023" num="0022">The printer unit <b>3</b> corresponds to a printing portion of the present invention for printing image data. The printer unit <b>3</b> is provided with a mechanic control CPU <b>31</b> for controlling hardware (mechanic part), a motor controlling ASIC <b>32</b> for performing driving control of a motor in a printing engine <b>35</b>, a ROM <b>33</b> for storing a control program of the printer unit <b>3</b>, a RAM <b>34</b> serving as an execution area of the control program and the printing engine <b>35</b> composed of hardware such as an LSU (Laser Scanning Unit) for printing, which performs printing based on image print data that is input from the controller <b>2</b>.</p>
<p id="p-0024" num="0023">A main characterizing portion of the present invention is that degradation of responsiveness of a UI is suppressed without temporarily stopping reading processing and print processing in the case of becoming a high load on a CPU. As a configuration for such operation, the MFP <b>10</b> is provided with a CPU <b>21</b> for controlling operation of the MFP <b>10</b> according an operation condition related to reading processing by the scanner unit <b>1</b> and/or print processing by the printer unit <b>3</b>, a CPU utilization monitoring portion <b>21</b><i>a </i>for monitoring utilization of the CPU <b>21</b> at the time of performing reading processing and/or print processing, and an operating condition restriction portion <b>21</b><i>b </i>for restricting the operating condition related to the reading processing and/or the print processing according to CPU utilization when the CPU utilization that is monitored by the CPU utilization monitoring portion <b>21</b><i>a </i>is a predetermined value or more. Hereinafter, the CPU utilization represents the usage rate of the CPU <b>21</b>.</p>
<p id="p-0025" num="0024">Additionally, the MFP <b>10</b> is provided with the bus <b>30</b> that is connected to the CPU <b>21</b> and a bus band utilization monitoring portion <b>21</b><i>c </i>for monitoring band utilization of the bus <b>30</b> at the time of performing the reading processing and/or the print processing. When the CPU utilization is less than a predetermined value, and a bus band utilization that is monitored by the bus band utilization monitoring portion <b>21</b><i>c </i>is a certain value or more, the operating condition restriction portion <b>21</b><i>b </i>may restrict the operating condition related to the reading processing and/or the print processing according to the bus band utilization.</p>
<p id="p-0026" num="0025">Note that, the CPU utilization monitoring portion <b>21</b><i>a, </i>the operating condition restriction portion <b>21</b><i>b </i>and the bus band utilization monitoring portion <b>21</b><i>c </i>are realizable as a part of functions of the CPU <b>21</b>, and a program for executing the CPU utilization monitoring portion <b>21</b><i>a</i>, the operating condition restriction portion <b>21</b><i>b </i>and the bus band utilization monitoring portion <b>21</b><i>c </i>is stored in the ROM <b>22</b> or the HDD <b>25</b>. Then, the CPU <b>21</b> is able to execute the program by retrieving it from the ROM <b>22</b> or the HDD <b>25</b> to the RAM <b>27</b> at the time of executing the program.</p>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 2</figref> is a diagram showing an example of a CPU utilization table in which a processing detail is associated with the CPU utilization in the MFP <b>10</b>. The CPU utilization table is stored in the ROM <b>22</b>, and referenced as appropriate by the CPU utilization monitoring portion <b>21</b><i>a</i>. A preview is processing for performing image processing of filing data for displaying on an operation screen, in which the CPU utilization is about 40%. Additionally, UI animation is processing for displaying animation in operation, in which the CPU utilization is about 40%. Further, raster data conversion processing is processing for converting print data into raster data, in which the CPU utilization is about 40%. Moreover, simple editing processing is processing for editing preview data on the operation screen, in which the CPU utilization is about 40%. Such processing has relatively-high CPU utilization and may be processing with a high CPU load.</p>
<p id="p-0028" num="0027">Further, filing data search processing is processing for searching filing data according to a search condition specified by a user, in which the CPU utilization is about 20%. Additionally, filing data reprint processing is processing for performing image processing at the time of reprinting filing data. Furthermore, copy processing is processing for performing reading processing and image processing while performing print processing of a document image, in which the CPU utilization is about 30%. Moreover, scan processing is processing for performing reading processing and image processing but not performing printing of the document image, in which the CPU utilization is about 20%. Such processing may be processing with a moderate CPU load.</p>
<p id="p-0029" num="0028">Further, print processing is processing for printing image data that was subjected to reading processing and image processing, in which the CPU utilization is about 10%. Additionally, a Web access response is processing for accessing to a Web site on the Internet, in which the CPU utilization is about 10%. Furthermore, others are processing other than each processing described above, in which the CPU utilization is about 10%. Such processing has relatively-low CPU utilization, and may be processing with a low CPU load.</p>
<p id="p-0030" num="0029">The CPU utilization monitoring portion <b>21</b><i>a </i>calculates, based on a processing detail of the MFP <b>10</b> at the time of performing scan processing and/or print processing, the CPU utilization corresponding to the processing detail with reference to the CPU utilization table of <figref idref="DRAWINGS">FIG. 2</figref>. For example, independent scan processing has the CPU utilization of 20%, independent print processing has the CPU utilization of 10%, and copy processing with a combination of the scan processing and the print processing has the CPU utilization of 30%. In this case, when other processing such as preview display is performed, the CPU utilization for covering such processing may be added. For example, in the case of performing the print processing with the CPU utilization of 10% during the preview display with the CPU utilization of 40%, the CPU utilization is calculated as 50%.</p>
<p id="p-0031" num="0030">When the CPU utilization that is monitored (calculated) by the CPU utilization monitoring portion <b>21</b><i>a </i>is a predetermined value (for example, 50%) or more, the operating condition restriction portion <b>21</b><i>b </i>restricts an operating condition related to the scan processing and/or the print processing according to the CPU utilization. This makes it possible to reduce the CPU load. As a method of restricting the operating condition, for example, it is expected that a reading cycle in the scan processing and/or a print cycle in the print processing are extended with respect to each default value (default cycle). The reading cycle that is referred here means a processing latency time (interval) between respective pages (between sheets) at the time of reading a document, and the print cycle means a processing latency time (interval) between respective pages (between sheets) at the time of printing image data on a recording sheet. These cycles are extended so that it is possible to have an interval between data that is input to the CPU <b>21</b> and data that is output from the CPU <b>21</b>, thus making it possible to disperse a load on the CPU <b>21</b> to reduce the CPU utilization.</p>
<p id="p-0032" num="0031">Specifically, a reading cycle table in which the CPU utilization is associated with the reading cycle is stored in the ROM <b>22</b>. For example, the CPU utilization is divided into five phases of: 50% or more and less than 60%; 60% or more and less than 70%; 70% or more and less than 80%; 80% or more and less than 90%; and 90% or more and 100% or less, for which, the reading cycles A, B, C, D and E corresponding to each phase are allocated in this order (in order of A&#x3e;B&#x3e;C&#x3e;D&#x3e;E, in which A is the longest cycle). Then, the operating condition restriction portion <b>21</b><i>b </i>is able to specify, based on the CPU utilization that is monitored by the CPU utilization monitoring portion <b>21</b><i>a</i>, the reading cycle corresponding to the CPU utilization with reference to the reading cycle table. For example, the CPU utilization of 65% is specified as the reading cycle &#x201c;D&#x201d;.</p>
<p id="p-0033" num="0032">In the case described above, a correspondence relationship of the CPU utilization and the reading cycle is able to be decided in advance based on actual measurement. Specifically, when the CPU utilization of each phase described above is attempted to be reduced to a predetermined CPU utilization (for example, 40%), it is expected that the reading cycle required for this attempt is actually measured for each phase.</p>
<p id="p-0034" num="0033">Further, also in the case of the print cycle, as with the above-described reading cycle, a print cycle table in which the CPU utilization is associated with the print cycle is stored in the ROM <b>22</b>. Then, the operating condition restriction portion <b>21</b><i>b </i>is able to specify, based on the CPU utilization that is monitored by the CPU utilization monitoring portion <b>21</b><i>a, </i>the print cycle corresponding to the CPU utilization with reference to the print cycle table. Note that, each of the reading cycle and the print cycle has a set default value different from each other, and is configured to be operated with the default value without restricting operation when the CPU utilization is less than a predetermined value.</p>
<p id="p-0035" num="0034">Further, when the copy processing with a combination of the scan processing and the print processing is performed, both the reading cycle and the print cycle may be extended. Also in this case, as described above, a reading cycle/print cycle table in which the CPU utilization is associated with the reading cycle and the print cycle is stored in the ROM <b>22</b>. Then, the operating condition restriction portion <b>21</b><i>b </i>is able to specify, based on the CPU utilization that is monitored by the operating condition restriction portion <b>21</b><i>b</i>, the reading cycle and the print cycle according to the CPU utilization with reference to the reading cycle/print cycle table.</p>
<p id="p-0036" num="0035">Here, in a case where the reading cycle is extended, the amount for extending the reading cycle may be differentiated between the case of the scan processing in which only the reading cycle is extended and the case of the copy processing in which both the reading cycle and the print cycle are extended. Further, similarly, in a case where the print cycle is extended, the amount for extending the print cycle may be differentiated between the case of the print processing in which only the print cycle is extended and the case of the copy processing in which both the reading cycle and the print cycle are extended.</p>
<p id="p-0037" num="0036">In the case described above, when the CPU utilization (for example, 50%) that is monitored by the CPU utilization monitoring portion <b>21</b><i>a </i>is attempted to be reduced to predetermined CPU utilization (for example, 40%), it is expected that, between the case of extending both the reading cycle and the print cycle and the case of extending the reading cycle independently, it is possible to reduce a change amount in the reading cycle when both of them are extended compared to the reading cycle in the case of being extended independently. Accordingly, for the reading cycle, a less change amount in the case of extending both the reading cycle and the print cycle is reduced compared to the change amount in the case of extending only the reading cycle. Additionally, also for the print cycle, similarly, it is expected that, between the case of extending both the reading cycle and the print cycle and the case of extending the print cycle independently, it is possible to reduce a less change amount in the print cycle when both of them are extended compared to the print cycle in the case of being extended independently. Accordingly, for the print cycle, a less change amount in the case of extending both the reading cycle and the print cycle is reduced compared to the change amount in the case of extending only the print cycle. In this manner, the change amount of the cycle is reduced so that it is possible to reduce the CPU load while each processing is performed quickly.</p>
<p id="p-0038" num="0037">Further, when the CPU utilization that is monitored by the CPU utilization monitoring portion <b>21</b><i>a </i>is less than a predetermined value, and the bus band utilization that is monitored by the bus band utilization monitoring portion <b>21</b><i>c </i>is a certain value or more, the operating condition restriction portion <b>21</b><i>b </i>may restrict the operating condition related to the reading processing and/or the print processing according to the bus band utilization. This is because the case is assumed where data is not able to be flowed and processing of the MFP <b>10</b> is retarded in the case of having an insufficient bus band even in the case of a sufficiently low load. Consequently, transitions of the bus band utilization of the bus <b>30</b> are monitored/calculated so that operation related to the reading processing and/or the print processing are restricted according to the bus band utilization when the bus band utilization is the certain value or more. It is expected that the way of restricting the operation at the time is to extend the reading cycle in the reading processing and/or the print cycle in the print processing with respect to the default value as with the case of the CPU.</p>
<p id="p-0039" num="0038">In the case described above, a correspondence relationship of the bus band utilization and the reading cycle and/or the print cycle is able to be decided in advance based on actual measurement. Specifically, when the bus band utilization of each phase described above is attempted to be reduced to a predetermined bus band utilization (for example, 50%), it is expected that the reading cycle and/or the print cycle required for this attempt is actually measured for each phase.</p>
<p id="p-0040" num="0039">Note that, it is expected that, even when the reading cycle or the print cycle is extended as described above to have an interval between pages, a data amount that is transferred per unit time is not changed, thus making impossible to sufficiently reduce a bus load. In this case, data traffic per unit time may be reduced with use of the way such that an actual page read rate is changed in the reading processing, an actual page print rate is changed in the print processing, or the like.</p>
<p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. 3</figref> is a flowchart for explaining an example of a method of controlling a CPU load in the MFP <b>10</b> of the present invention. In this example, description will be given for a configuration of the MFP <b>10</b> of <figref idref="DRAWINGS">FIG. 1</figref> and the CPU utilization table of <figref idref="DRAWINGS">FIG. 2</figref>. First, the CPU utilization monitoring portion <b>21</b><i>a </i>specifies a processing detail of the CPU <b>21</b> at the time of accepting various processing (step S<b>1</b>). In the processing detail of the CPU <b>21</b>, for example, when the scan processing is accepted, in a case where other processing, for example, the preview processing or the like is executed at the time, the scan processing and the preview processing are specified. Such processing is performed not only when the scan processing is accepted but also when the print processing and the copy processing are accepted.</p>
<p id="p-0042" num="0041">Then, the CPU utilization monitoring portion <b>21</b><i>a </i>calculates, based on the CPU processing detail specified above, the CPU utilization corresponding to the processing detail of the CPU <b>21</b> with reference to the CPU utilization table of <figref idref="DRAWINGS">FIG. 2</figref> (step S<b>2</b>). For example, in the case of the scan processing at the CPU utilization of 20% and the preview processing at the CPU utilization of 40%, the utilization in these processing is added so that the CPU utilization is calculated as 60%. Similarly, in the case of the print processing at the CPU utilization of 10% and the preview processing at the CPU processing of 40%, the utilization in these processing is added so that the CPU utilization is calculated as 50%. Further, in the case of the copy processing at the CPU utilization of 30% and the preview processing at the CPU utilization of 40%, the utilization in these processing is added so that the CPU utilization is calculated as 70%.</p>
<p id="p-0043" num="0042">Next, the operating condition restriction portion <b>21</b><i>b </i>refers, in the case of judging whether or not the CPU utilization that is monitored by the CPU utilization monitoring portion <b>21</b><i>a </i>is a predetermined value (here, 50%) or more (step S<b>3</b>) and judging that the CPU utilization is 50% or more (in the case of YES), and in the case of judging processing being executed and as a result, judging that reading in the scanner unit <b>1</b> is only executed (in the case of executing only reading), to the reading cycle table (illustrated) in the ROM <b>22</b> to specify the reading cycle corresponding to the CPU utilization based on the CPU utilization that is calculated at step S<b>2</b>. Then, the CPU <b>21</b> controls the scanner unit <b>1</b> so as to operate in the specified reading cycle (step S<b>4</b>).</p>
<p id="p-0044" num="0043">Further, in the case of executing only printing at the printer unit <b>3</b> (in the case of executing only printing), the print cycle table (illustrated) in the ROM <b>22</b> is referenced to specify the print cycle corresponding to the CPU utilization based on the CPU utilization that is calculated at step S<b>2</b>. Then, the CPU <b>21</b> controls the printer unit <b>3</b> so as to operate in the specified print cycle (step S<b>5</b>). Additionally, when both reading at the scanner unit <b>1</b> and printing at the printer unit <b>3</b> are executed (in the case of executing both reading/printing), the reading/print cycle table (illustrated) in the ROM <b>22</b> is referenced to specify the reading cycle and the print cycle corresponding to the CPU utilization based on the CPU utilization that is calculated at step S<b>2</b>. Then, the CPU <b>21</b> controls the scanner unit <b>1</b> and the printer unit <b>3</b>, respectively, so as to operate in the specified reading cycle and print cycle (step S<b>6</b>).</p>
<p id="p-0045" num="0044">Then, the operating condition restriction portion <b>21</b><i>b </i>returns, in the case of judging that the CPU utilization is less than 50% at step S<b>3</b> (in the case of NO) and in a case where the reading cycle or the print cycle is changed, the value to an original value (default value) (step S<b>7</b>), then finishes the process.</p>
<p id="p-0046" num="0045"><figref idref="DRAWINGS">FIG. 4</figref> is a flowchart for explaining an example of a method of controlling a CPU load and a bus load in the MFP <b>10</b> of the present invention. In this example, description will be given based on the configuration of the MFP <b>10</b> of <figref idref="DRAWINGS">FIG. 1</figref> and the CPU utilization table of <figref idref="DRAWINGS">FIG. 2</figref>, in which load control is assumed to be performed also in consideration of bus band utilization that is monitored at the bus band utilization monitoring portion <b>21</b><i>c</i>. First, the CPU utilization monitoring portion <b>21</b><i>a </i>specifies the processing detail of the CPU <b>21</b> at the time of accepting various processing (step S<b>11</b>). In the processing detail of the CPU <b>21</b>, for example, when the scan processing is accepted, in a case where other processing, for example, the preview processing or the like is executed at the time, the scan processing and the preview processing are specified. Such processing is performed not only when the scan processing is accepted but also the print processing and the copy processing are accepted.</p>
<p id="p-0047" num="0046">Then, the CPU utilization monitoring portion <b>21</b><i>a </i>calculates, based on the CPU processing detail specified above, the CPU utilization corresponding to the processing detail of the CPU <b>21</b> with reference to the CPU utilization table of <figref idref="DRAWINGS">FIG. 2</figref>, and the bus band utilization monitoring portion <b>21</b><i>c </i>also calculates the bus band utilization of the bus <b>30</b> (step S<b>12</b>).</p>
<p id="p-0048" num="0047">Next, the operating condition restriction portion <b>21</b><i>b </i>specifies, in the case of judging whether or not the CPU utilization that is monitored by the CPU utilization monitoring portion <b>21</b><i>a </i>is a predetermined value (here, 50%) or more (step S<b>13</b>) and judging that the CPU utilization is 50% or more (in the case of YES), and in the case of judging processing being executed and as a result, judging that reading in the scanner unit <b>1</b> is only executed (in the case of executing only reading) as with the flow of the <figref idref="DRAWINGS">FIG. 3</figref>, the reading cycle corresponding to the CPU utilization calculated at step S<b>12</b>. Then, the CPU <b>21</b> controls the scanner unit <b>1</b> so as to operate in the specified reading cycle (step S<b>15</b>).</p>
<p id="p-0049" num="0048">Further, in the case of executing only printing at the printer unit <b>3</b> (in the case of executing only printing), the print cycle is specified corresponding to the CPU utilization calculated at step S<b>12</b>. Then, the CPU <b>21</b> controls the printer unit <b>3</b> so as to operate in the specified print cycle (step S<b>16</b>). Additionally, when both reading at the scanner unit <b>1</b> and printing at the printer unit <b>3</b> are executed (in the case of executing both reading/printing), the reading cycle and the print cycle are specified corresponding to the CPU utilization calculated at step S<b>12</b>. Then, the CPU <b>21</b> controls the scanner unit <b>1</b> and the printer unit <b>3</b>, respectively, so as to operate in the specified reading cycle and print cycle (step S<b>17</b>).</p>
<p id="p-0050" num="0049">Further, when the CPU utilization is judged to be less than 50% at step S<b>13</b> (in the case of NO), the operating condition restriction portion <b>21</b><i>b </i>specifies, in the case of judging whether or not the bus band utilization that is monitored by the bus band utilization monitoring portion <b>21</b><i>c </i>is a certain value (here, 70%) or more (step S<b>14</b>) and judging that the bus band utilization is 70% or more (in the case of YES), and in the case of judging processing being executed and as a result, only reading at the scanner unit <b>1</b> is executed (in the case of executing only reading), the reading cycle corresponding to the bus band utilization calculated at step S<b>12</b>. Then, the CPU <b>21</b> controls the scanner unit <b>1</b> so as to operate in the specified reading cycle (step S<b>15</b>).</p>
<p id="p-0051" num="0050">Here, in the case of specifying the reading cycle corresponding to the bus band utilization, not the table in which the CPU utilization is associated with the reading cycle as shown in <figref idref="DRAWINGS">FIG. 3</figref> but a table in which the bus band utilization is associated with the reading cycle is assumed to be used. Hereinafter, it is assumed that each table is used likewise also in the case of the print cycle and the case of the reading cycle as well as the print cycle.</p>
<p id="p-0052" num="0051">Further, in the case of executing only printing at the printer unit <b>3</b> (in the case of executing only printing), the print cycle is specified corresponding to the bus band utilization calculated at step S<b>12</b>. Then, the CPU <b>21</b> controls the printer unit <b>3</b> so as to operate in the specified print cycle (step S<b>16</b>). Additionally, when both reading at the scanner unit <b>1</b> and printing at the printer unit <b>3</b> are executed (in the case of executing both reading/printing), the reading cycle and the print cycle are specified corresponding to the bus band utilization calculated at step S<b>12</b>. Then, the CPU <b>21</b> controls the scanner unit <b>1</b> and the printer unit <b>3</b>, respectively, so as to operate in the specified reading cycle and print cycle (step S<b>17</b>).</p>
<p id="p-0053" num="0052">Then, the operating condition restriction portion <b>21</b><i>b </i>returns, in the case of judging that the bus band utilization is less than 70% at step S<b>14</b> (in the case of NO) and in a case of where the reading cycle or the print cycle is changed, the value to an original value (default value) (step S<b>18</b>), then finishes the process.</p>
<p id="p-0054" num="0053">As described above, according to the present invention, the CPU utilization at the time of performing the reading processing and/or the print processing is monitored, and when the CPU utilization is a predetermined value (for example, 50%) or more, an operating condition related to the reading processing and/or the print processing is restricted corresponding to the CPU utilization, thus making it possible to suppress degradation of responsiveness of a UI without temporarily stopping reading processing or print processing in the case of becoming a high load on a CPU.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. An image forming apparatus including a reading portion for optically reading a document image and a printing portion for printing image data, comprising:
<claim-text>a CPU for controlling operation of the image forming apparatus according to an operating condition related to reading processing by the reading portion and/or print processing by the printing portion;</claim-text>
<claim-text>a CPU utilization monitoring portion for monitoring utilization of the CPU at the time of performing the reading processing and/or the print processing; and</claim-text>
<claim-text>an operating condition restriction portion for restricting, when CPU utilization that is monitored by the CPU utilization monitoring portion is a predetermined value or more, the operating condition related to the reading processing and/or the print processing according to the CPU utilization.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The image forming apparatus as defined in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein
<claim-text>a CPU utilization table in which a processing detail is associated with the CPU utilization in the image forming apparatus is provided, and the CPU utilization monitoring portion calculates, based on a processing detail of the image forming apparatus at the time of performing the reading processing and/or the print processing, the CPU utilization corresponding to the processing detail with reference to the CPU utilization table.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The image forming apparatus as defined in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein
<claim-text>a bus that is connected to the CPU and a bus band utilization monitoring portion for monitoring band utilization of the bus at the time of performing the reading processing and/or the print processing are provided, and the operating condition restriction portion restricts, when the CPU utilization is less than the predetermined value and bus band utilization that is monitored by the bus band utilization monitoring portion is a predetermined value or more, an operating condition related to the reading processing and/or the print processing according to the bus band utilization.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The image forming apparatus as defined in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein
<claim-text>restriction of the operating condition related to the reading processing and/or the print processing is to extend a reading cycle in the reading processing and/or a print cycle in the print processing with respect to a default value.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The image forming apparatus as defined in <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein
<claim-text>the operating condition restriction portion differentiates the amount for extending the reading cycle in a case where the reading cycle is extended between the case of extending only the reading cycle and the case of extending both the reading cycle and the print cycle.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
