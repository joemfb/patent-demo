<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625624-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625624</doc-number>
<kind>B1</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12138569</doc-number>
<date>20080613</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<us-term-of-grant>
<us-term-extension>820</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20110101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>12</main-group>
<subgroup>56</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classifications-cpc>
<main-cpc>
<classification-cpc>
<cpc-version-indicator><date>20130101</date></cpc-version-indicator>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>47</main-group>
<subgroup>6205</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
<scheme-origination-code>C</scheme-origination-code>
</classification-cpc>
</main-cpc>
<further-cpc>
<classification-cpc>
<cpc-version-indicator><date>20130101</date></cpc-version-indicator>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>49</main-group>
<subgroup>90</subgroup>
<symbol-position>L</symbol-position>
<classification-value>A</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
<scheme-origination-code>C</scheme-origination-code>
</classification-cpc>
</further-cpc>
</classifications-cpc>
<classification-national>
<country>US</country>
<main-classification>370414</main-classification>
<further-classification>370429</further-classification>
</classification-national>
<invention-title id="d2e53">Self-adjusting load balancing among multiple fabric ports</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5493566</doc-number>
<kind>A</kind>
<name>Ljungberg et al.</name>
<date>19960200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370231</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>5838922</doc-number>
<kind>A</kind>
<name>Galand et al.</name>
<date>19981100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370412</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>5892766</doc-number>
<kind>A</kind>
<name>Wicki et al.</name>
<date>19990400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370412</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>5987028</doc-number>
<kind>A</kind>
<name>Yang et al.</name>
<date>19991100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370380</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>6961342</doc-number>
<kind>B1</kind>
<name>Uzun et al.</name>
<date>20051100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370414</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>6973032</doc-number>
<kind>B1</kind>
<name>Casley et al.</name>
<date>20051200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370230</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>7027457</doc-number>
<kind>B1</kind>
<name>Chiussi et al.</name>
<date>20060400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370414</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>7103039</doc-number>
<kind>B1</kind>
<name>Rose</name>
<date>20060900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370386</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>7120117</doc-number>
<kind>B1</kind>
<name>Liu et al.</name>
<date>20061000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370236</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>7184403</doc-number>
<kind>B1</kind>
<name>Morishige et al.</name>
<date>20070200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370235</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>7230917</doc-number>
<kind>B1</kind>
<name>Fedorkow et al.</name>
<date>20070600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370229</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>7263066</doc-number>
<kind>B1</kind>
<name>Yun et al.</name>
<date>20070800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370236</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>7277429</doc-number>
<kind>B2</kind>
<name>Norman et al.</name>
<date>20071000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370389</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>7324541</doc-number>
<kind>B2</kind>
<name>Muthukrishnan et al.</name>
<date>20080100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370429</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>7450602</doc-number>
<kind>B2</kind>
<name>Vazquez Castro</name>
<date>20081100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370412</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00016">
<document-id>
<country>US</country>
<doc-number>7613200</doc-number>
<kind>B1</kind>
<name>Williams et al.</name>
<date>20091100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370414</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00017">
<document-id>
<country>US</country>
<doc-number>7623456</doc-number>
<kind>B1</kind>
<name>Chen et al.</name>
<date>20091100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370235</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00018">
<document-id>
<country>US</country>
<doc-number>7724760</doc-number>
<kind>B2</kind>
<name>Balakrishnan et al.</name>
<date>20100500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370416</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00019">
<document-id>
<country>US</country>
<doc-number>7903659</doc-number>
<kind>B2</kind>
<name>Sindhu et al.</name>
<date>20110300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370392</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00020">
<document-id>
<country>US</country>
<doc-number>7911960</doc-number>
<kind>B1</kind>
<name>Aydemir et al.</name>
<date>20110300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370412</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00021">
<document-id>
<country>US</country>
<doc-number>2001/0036157</doc-number>
<kind>A1</kind>
<name>Blanc et al.</name>
<date>20011100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370235</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00022">
<document-id>
<country>US</country>
<doc-number>2002/0006110</doc-number>
<kind>A1</kind>
<name>Brezzo et al.</name>
<date>20020100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370229</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00023">
<document-id>
<country>US</country>
<doc-number>2002/0064172</doc-number>
<kind>A1</kind>
<name>Siu et al.</name>
<date>20020500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370429</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00024">
<document-id>
<country>US</country>
<doc-number>2004/0013124</doc-number>
<kind>A1</kind>
<name>Peebles et al.</name>
<date>20040100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370412</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00025">
<document-id>
<country>US</country>
<doc-number>2004/0100980</doc-number>
<kind>A1</kind>
<name>Jacobs et al.</name>
<date>20040500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370412</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00026">
<document-id>
<country>US</country>
<doc-number>2004/0110442</doc-number>
<kind>A1</kind>
<name>Rhim et al.</name>
<date>20040600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>442361</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00027">
<document-id>
<country>US</country>
<doc-number>2007/0076736</doc-number>
<kind>A1</kind>
<name>Sharma et al.</name>
<date>20070400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370415</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00028">
<document-id>
<country>US</country>
<doc-number>2008/0175259</doc-number>
<kind>A1</kind>
<name>Chao et al.</name>
<date>20080700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370413</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00029">
<document-id>
<country>US</country>
<doc-number>2008/0184259</doc-number>
<kind>A1</kind>
<name>Lesartre et al.</name>
<date>20080700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>719312</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00030">
<document-id>
<country>US</country>
<doc-number>2010/0220595</doc-number>
<kind>A1</kind>
<name>Petersen</name>
<date>20100900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370235</main-classification></classification-national>
</us-citation>
</us-references-cited>
<number-of-claims>13</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>None</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>7</number-of-drawing-sheets>
<number-of-figures>8</number-of-figures>
</figures>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Rose</last-name>
<first-name>Kenneth M.</first-name>
<address>
<city>Palo Alto</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Walker</last-name>
<first-name>David S.</first-name>
<address>
<city>San Jose</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Nebhrajani</last-name>
<first-name>Vijay A.</first-name>
<address>
<city>Sunnyvale</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="004" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Lawson</last-name>
<first-name>Matthew Todd</first-name>
<address>
<city>Grass Valley</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Rose</last-name>
<first-name>Kenneth M.</first-name>
<address>
<city>Palo Alto</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Walker</last-name>
<first-name>David S.</first-name>
<address>
<city>San Jose</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Nebhrajani</last-name>
<first-name>Vijay A.</first-name>
<address>
<city>Sunnyvale</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="004" designation="us-only">
<addressbook>
<last-name>Lawson</last-name>
<first-name>Matthew Todd</first-name>
<address>
<city>Grass Valley</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Campbell Stephenson LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Cisco Technology, Inc.</orgname>
<role>02</role>
<address>
<city>San Jose</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Weidner</last-name>
<first-name>Timothy J</first-name>
<department>2476</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A self-adjusting load balancing among multiple fabric ports. A plurality of first values is received in response to receiving a first frame, wherein each of the first values is related to a quantity of data stored in a respective one of a plurality of buffers of fabric ports. First identifiers are also received, each of which corresponds to a respective one of a first subset of the plurality of buffers. A subset of the first identifiers is selected based on one or more of the first values. Thereafter one of the first identifiers contained in the selected subset is selected. Ultimately the first frame is transmitted to the buffer that corresponds to the selected one of the first identifiers.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="173.65mm" wi="190.75mm" file="US08625624-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="234.70mm" wi="169.59mm" file="US08625624-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="249.85mm" wi="179.66mm" orientation="landscape" file="US08625624-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="209.63mm" wi="188.38mm" file="US08625624-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="190.67mm" wi="193.12mm" file="US08625624-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="185.42mm" wi="188.55mm" file="US08625624-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="211.24mm" wi="133.27mm" file="US08625624-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="237.07mm" wi="195.92mm" file="US08625624-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0002" num="0001">Switching devices are typically data link layer devices that enable multiple network devices to communicate with each other or enable physical network (e.g., local area network (LAN) or wide area network (WAN)) segments to be interconnected into a single larger network. In the most general sense, switching devices transport data in the form of frames between input/output (I/O) ports. A frame is a logical grouping of information sent as a data link layer unit over a transmission medium. Each frame typically includes data payload sandwiched between header and trailer information. The terms cell, datagram, message, packet and segment are also used to describe logical information groupings at various layers of the OSI reference model and in various technology circles. As used herein, the term &#x201c;frame&#x201d; should be understood in its broadest sense, and can be defined to encompass other terms such as cell, datagram, message, packet, segment, etc.</p>
<p id="p-0003" num="0002">Switching devices often employ switching fabrics that have multiple I/O ports coupled to each other. Each I/O port typically contains an input buffer that receives and stores frames until they can be transmitted to output buffers of other I/O ports. Frames transmitted to an output buffer are received and stored in that buffer until they can be subsequently transferred towards their ultimate network device destination. Users typically require that each switching device operate as quickly as possible in order to maintain a high data throughput rate. Unfortunately, output buffers may become congested with frames at times, which may lead to latency and blocking issues.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0002" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0004" num="0003">The example embodiments may be better understood, and its numerous objects, features and advantages made apparent to those skilled in the art by referencing the accompanying drawings.</p>
<p id="p-0005" num="0004"><figref idref="DRAWINGS">FIG. 1</figref> is a simplified block diagram of a network.</p>
<p id="p-0006" num="0005"><figref idref="DRAWINGS">FIG. 2</figref> is a block diagram illustrating relevant components of a switching device employed in <figref idref="DRAWINGS">FIG. 1</figref>.</p>
<p id="p-0007" num="0006"><figref idref="DRAWINGS">FIG. 3</figref> is a simplified block diagram of another network.</p>
<p id="p-0008" num="0007"><figref idref="DRAWINGS">FIG. 4</figref> is a block diagram illustrating relevant components of a switching device that can be employed in <figref idref="DRAWINGS">FIG. 3</figref>.</p>
<p id="p-0009" num="0008"><figref idref="DRAWINGS">FIG. 5</figref> is a block diagram illustrating relevant components of another switching device that can be employed in <figref idref="DRAWINGS">FIG. 1</figref>.</p>
<p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. 6</figref> is a block diagram illustrating relevant components of an auto spreader that can be employed in the switching device of <figref idref="DRAWINGS">FIG. 5</figref>.</p>
<p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. 7</figref> is a simplified flow chart illustrating relevant aspects of selecting a fabric port of exit.</p>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 8</figref> is a simplified block diagram of a router element.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<p id="p-0013" num="0012">The use of the same reference symbols in different drawings indicates similar or identical items.</p>
<heading id="h-0003" level="1">DETAILED DESCRIPTION OF EXAMPLE EMBODIMENTS</heading>
<p id="p-0014" num="0013">OVERVIEW A method and apparatus is described below for balancing loads among multiple fabric ports. In one embodiment, the method includes receiving a plurality of first values in response to receiving a first frame, wherein each of the first values is related to a quantity of data stored in a respective one of a plurality of buffers of fabric ports. First identifiers are also received, each of which corresponds to a respective one of a first subset of the plurality of buffers. A subset of the first identifiers is selected based on one or more of the first values. Thereafter one of the first identifiers contained in the selected subset is selected. Ultimately the first frame is transmitted to the buffer that corresponds to the selected one of the first identifiers.</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 1</figref> illustrates in block diagram form, relevant components of an example network <b>10</b> that employs a switching device <b>12</b>. In this example, switching device <b>12</b> enables data communication between network devices <b>14</b>, which can, in general, include a variety of different devices including computer systems, output devices, storage devices, communication devices, or other network components such as routers, other switching devices, and even other networks. Switching devices, such as switching device <b>12</b>, make forwarding decisions for frames they receive based on forwarding information such as Media Access Control (MAC) addresses, Internet Protocol (IP) addresses, etc., that are contained within the received frames. Network <b>10</b> can employ one or more of a variety of different communication protocols enabling data communication between network devices <b>14</b>.</p>
<p id="p-0016" num="0015">Switching device <b>12</b> includes line cards <b>16</b> coupled to a switching fabric <b>20</b>. Each line card <b>16</b> generally takes the form of an I/O interface card that performs frame analysis as part of the switching process. Switching fabric <b>20</b> can be implemented in a variety of ways. Three common types of switching fabrics include crossbars, single-bus architectures, and shared memory architectures. Crossbars use a mesh within the switching fabric to connect each I/O port input buffer (hereinafter input buffers) of the switching fabric to multiple I/O output port buffers (hereinafter output buffers). Crossbars can be highly efficient for &#x201c;balanced traffic,&#x201d; e.g., if input buffer <b>1</b> is communicating with output buffer <b>2</b> by sending frames thereto, and if input buffer <b>3</b> is communicating with output buffer <b>4</b> by sending frames thereto, then the crossbar directs the transmission of frames between the input output pairs on two different paths. One of the key benefits of crossbars is the ability to scale significantly high bandwidth and throughputs. Consequently, crossbars are a popular.</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 2</figref> shows relevant components of the switching fabric <b>20</b> and two line cards <b>16</b> from <figref idref="DRAWINGS">FIG. 1</figref>. In support of crossbar <b>22</b>, switching fabric <b>20</b> includes input buffers <b>24</b> and output buffers <b>26</b>, each of which can be implemented as a first in first out (FIFO) storage device using a variety of memory structures as is well known in the art. <figref idref="DRAWINGS">FIG. 2</figref> shows input buffers that are separated from the group of output buffers. In typical implementations, there is an input and output buffer pairing for each I/O port of the switching fabric. Consequently, input and output buffer pairs are associated with each line card <b>16</b>. In the illustrated example, input buffer <b>24</b>(<b>1</b>) and output buffer <b>26</b>(<b>1</b>) are paired together and in data communication with line card <b>16</b>(<b>1</b>). Similarly, input buffer <b>24</b>(<i>n</i>) and output buffer <b>26</b>(<i>n</i>) are paired together and in data communication with line card <b>16</b>(<i>n</i>). Each line card <b>16</b> shown in <figref idref="DRAWINGS">FIG. 2</figref> includes an input queue <b>30</b> coupled to a respective input buffer <b>24</b> and an output queue <b>32</b> coupled to a respective output buffer <b>26</b>.</p>
<p id="p-0018" num="0017">To illustrate relevant aspects of basic operation, suppose line card <b>16</b>(<b>1</b>) receives a frame from a network device (not shown in <figref idref="DRAWINGS">FIG. 2</figref>) coupled thereto, and the received frame is destined for another network device that is coupled to line card <b>16</b>(<i>n</i>). Before a line card forwards a frame it receives, the line card, such as line card <b>16</b>(<b>1</b>), calculates a fabric port of exit (FPOE) based on forwarding information (e.g., a destination MAC address, a destination IP address, etc.) contained in the frame. Each FPOE designates an exit I/O port of switching fabric, such as switching fabric <b>20</b>, and by extension the output buffer of the exit I/O port. Switching fabric <b>20</b> uses the FPOEs to route frames it receives to the appropriate output buffer. In the illustrated example, the FPOE calculated for frames destined for network devices coupled to line card <b>16</b>(<i>n</i>), should identify output buffer <b>26</b>(<i>n</i>). One of ordinary skill in the art will understand that the FPOE calculated for a frame that is destined for a first network device coupled to a first line card <b>16</b> will be different when compared to the FPOE that is calculated for a frame destined for a second network device coupled to a second line card <b>16</b> since forwarding information within the two frames should be different.</p>
<p id="p-0019" num="0018">After line card <b>16</b>(<b>1</b>) calculates the FPOE for the frame it receives, the line card inserts the FPOE into a fabric header, which is attached to the frame. The frame with attached fabric header is stored in input queue <b>30</b>(<b>1</b>) until it can be serialized and transmitted across a serial channel <b>18</b>(<b>2</b>) where it is received by input buffer <b>24</b>(<b>1</b>) of switching fabric <b>20</b>. Using the FPOE contained within the fabric header, the frame is transmitted across crossbar <b>22</b> to the output buffer <b>26</b>(<i>n</i>) that corresponds to the FPOE. Eventually the frame received by output buffer <b>26</b>(<i>n</i>) is serialized and transmitted across a serial channel <b>18</b>(<b>2</b><i>n</i>) to the output queue <b>32</b> of line card <b>16</b>(<i>n</i>).</p>
<p id="p-0020" num="0019">Since each output buffer <b>26</b> can receive data frames from multiple input buffers <b>24</b>, congestion problems can occur. For example, several line cards may attempt to send frames to line card <b>16</b>(<i>n</i>), which can lead to increased latency or blocking. With latency, a frame from one input buffer <b>24</b> that is destined for an output buffer <b>26</b> (e.g., output buffer <b>26</b>(<i>n</i>)), may have to wait for other frames to arrive at that output buffer via crossbar <b>22</b>. In blocking, several input buffers <b>24</b> sending frames to the same output buffer <b>26</b> (e.g., output buffer <b>26</b>(<i>n</i>)), may quickly fill the output buffer to the point the output buffer must inform the input buffers to stop sending any more frames, thus blocking frames at input buffers from reaching the output buffer.</p>
<p id="p-0021" num="0020">To reduce latency and blocking, system designers can design switching devices with multiple data transmission channels between line cards and the switching fabric. To further reduce latency and blocking, system designers can design switching devices with multiple transmission channels from line cards to multiple switching fabrics. <figref idref="DRAWINGS">FIG. 3</figref> illustrates in block diagram form, relevant components of a switching device <b>40</b> that includes several line cards <b>42</b>, each of which is coupled to five switching fabrics <b>44</b> via respective pairs of transmission channels <b>43</b>. Although not shown, each transmission channel <b>43</b> between a line card <b>42</b> and a switching fabric <b>44</b> includes a pair of unidirectional, serial transmission channels, much like the serial transmission channels <b>18</b> shown in <figref idref="DRAWINGS">FIG. 2</figref>. Importantly, frames received at one of the line cards <b>42</b>, such as line card <b>42</b>(<b>1</b>), may be forwarded to a destination network device <b>14</b> coupled to another line card <b>42</b>, such as line card <b>42</b>(<i>n</i>), using any one of the ten transmission channels <b>43</b> that are coupled between the line card <b>42</b>(<b>1</b>) and switching fabrics <b>44</b>.</p>
<p id="p-0022" num="0021">For purposes of explanation only, each switching fabric <b>44</b> is presumed to be similar in structure and function to the switching fabric <b>20</b> of <figref idref="DRAWINGS">FIG. 2</figref>. There may be, however, at least one difference; whereas line cards <b>16</b> calculate FPOEs for frames they receive, switching fabrics <b>44</b> may also contain one or more devices that calculate FPOEs for frames they receive from line cards <b>42</b> based on forwarding information contained in the frames or based on information attached to the frames such as an FPOE database index, which will be more fully described below.</p>
<p id="p-0023" num="0022">To facilitate use of multiple transmission channels to multiple switching fabrics <b>44</b>, each line card <b>42</b> may include a switching fabric. <figref idref="DRAWINGS">FIG. 4</figref> illustrates in block diagram form, relevant components of an example line card <b>42</b> employed in the switching device of <figref idref="DRAWINGS">FIG. 3</figref>. The line card <b>42</b> shown in <figref idref="DRAWINGS">FIG. 4</figref> includes one interface circuit <b>46</b> coupled to a switching fabric <b>48</b>. In an alternative embodiment, two or more interface circuits <b>46</b> may be coupled to switching fabric <b>48</b>. Interface circuit <b>46</b> includes port processors <b>50</b>, each of which is coupled to multiple network devices (not shown). Port processors <b>50</b> receive frames from network devices that are destined for another network device coupled to interface circuit <b>46</b> or to another line card <b>42</b>. Each port processor <b>50</b> is also configured to forward frames they receive from switching fabric <b>48</b>.</p>
<p id="p-0024" num="0023">The interface circuit <b>46</b> includes a forwarding engine <b>52</b> coupled to each of the port processors <b>50</b> and to an FPOE database <b>54</b>. The forwarding engine <b>52</b> may take form in a processor (not shown) that executes instructions that are stored in memory (not shown). Forwarding engine <b>52</b> may provide many services, one of which is to attach a fabric header to frames that are received by port processors from network devices. Another function of forwarding engine <b>52</b> is to calculate indexes to entries in FPOE database <b>54</b>. As will be more fully described below, each entry in database <b>54</b> contains one or more FPOEs, and these FPOEs can be used by switching fabric <b>48</b> to route frames to an appropriate output buffers contained therein.</p>
<p id="p-0025" num="0024">To illustrate operation, presume port processor <b>50</b>(<b>2</b>) receives a frame F<b>1</b> from a network device coupled thereto. In response, forwarding engine <b>52</b> attaches a fabric header FH<b>1</b> to the received frame F. Forwarding engine <b>52</b> also calculates an FPOE database entry index (hereinafter FPOE index) I<b>1</b> based upon forwarding information (e.g., one or more MAC addresses, one or more IP addresses, etc.) contained in the received frame F<b>1</b>. Forwarding engine <b>52</b> provides the FPOE index I<b>1</b> it calculates to FPOE database <b>54</b>. In one embodiment, FPOE database <b>54</b> may take form in a data structure that is stored in a memory (not shown) coupled to forwarding engine <b>52</b> and randomizer circuit <b>56</b>. FPOE database <b>54</b> contains multiple entries, each of which maps a specific FPOE index to one or more candidate FPOEs. Each FPOE stored within FPOE database <b>54</b> corresponds to a respective output buffer of switching fabric <b>48</b>. Entries in database <b>54</b> may contain common FPOEs. Indeed, some entries in database <b>54</b> may contain identical FPOEs. Some entries in database <b>54</b> may contain no common FPOEs. As an aside, FPOEs in one or more entries of database <b>54</b>, may change over time.</p>
<p id="p-0026" num="0025">Database <b>54</b> outputs a set of one or more FPOEs to randomizer circuit <b>56</b> that are mapped to an FPOE index that database <b>54</b> receives from forwarding engine <b>52</b>. Continuing with the illustrated example, presume randomizer <b>56</b> receives a set S<b>1</b> of candidate FPOEs from database <b>54</b> that are mapped to FPOE index I<b>1</b>. Each FPOE of S<b>1</b> corresponds to a respective output buffer of switching fabric <b>48</b>, which in turn is coupled to a respective communication channel <b>43</b> (see <figref idref="DRAWINGS">FIG. 3</figref>). Randomizer <b>56</b>, as its name implies, randomly selects one FPOE from the set that randomizer <b>56</b> receives from database <b>54</b>. This randomly selected FPOE is returned to forwarding circuit <b>52</b>. In the illustrated example, randomizer <b>56</b> randomly selects one FPOE from the set S<b>1</b>, and randomizer <b>56</b> returns the randomly selected FPOE to forwarding engine <b>52</b>, which in turn stores the randomly selected FPOE in the fabric header FH<b>1</b> that it attached to the received frame F<b>1</b>. As an aside, forwarding engine <b>52</b> may also store the FPOE index I<b>1</b> it calculated in the fabric header FH<b>1</b>.</p>
<p id="p-0027" num="0026">After randomly selected FPOEs are added to fabric headers, frames along with their attached fabric headers are stored in input queues <b>62</b> until they can be transmitted to switching fabric <b>48</b>, which includes input buffers <b>70</b> coupled to output buffers <b>72</b> via crossbar <b>74</b>. Each input queue <b>62</b> is coupled to a respective input buffer <b>70</b> of switching fabric <b>48</b>. Similarly, each output queue <b>60</b> is coupled to a respective output buffer <b>72</b> of switching fabric <b>48</b>. Although not shown within <figref idref="DRAWINGS">FIG. 4</figref>, several of the output buffers <b>72</b> are coupled to respective input buffers of switching fabrics <b>44</b> via respective communication paths <b>43</b> (See <figref idref="DRAWINGS">FIG. 3</figref>).</p>
<p id="p-0028" num="0027">The FPOEs stored in database <b>54</b> identify respective output buffers <b>72</b> of switching fabric <b>48</b>, and switching fabric <b>48</b> uses the FPOEs to route frames it receives to the appropriate output buffer <b>72</b>. In the illustrated example, the FPOE for frames destined for network devices coupled to port processor <b>50</b>(<b>1</b>), will identify output buffer <b>72</b>(<b>1</b>). In contrast the FPOE for frames destined for a network device that is coupled to another line card <b>42</b>, will identify an output buffer that is coupled to an input buffer of one of the switching fabrics <b>44</b>.</p>
<p id="p-0029" num="0028">With continuing reference to <figref idref="DRAWINGS">FIGS. 3 and 4</figref>, since line card <b>42</b> can send a frame to another line card <b>42</b> via any of the output buffers <b>72</b> that are respectively coupled to ten transmission channels <b>43</b>, congestion issues at output buffers <b>72</b> are reduced when compared to output buffers <b>26</b> in <figref idref="DRAWINGS">FIG. 2</figref>. Notwithstanding the randomness in which FPOEs are selected and frames are transmitted to output buffers <b>72</b>, output buffers <b>72</b> may nonetheless experience congestion. Accordingly, it is desirable to have a switching scheme that reduces the likelihood of congestion of output buffers and accomplishes this goal with minimal impact on data transmission bandwidth and complexity.</p>
<p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. 5</figref> illustrates the line card <b>42</b> of <figref idref="DRAWINGS">FIG. 4</figref> with modifications that can further reduce the likelihood of congestion of output buffers. Specifically, randomizer <b>56</b> is replaced by an auto spreader circuit <b>80</b>. Additionally, switching fabric <b>48</b> includes an output buffer status (OBS) logic control circuit <b>82</b> coupled to OBS logic circuits <b>84</b>, switch <b>86</b>, and multiplexer <b>88</b>. Each of the OBS logic circuits <b>84</b> is coupled to a respective output buffer <b>72</b> and is configured to measure pending data stored therein. OBS logic control circuit <b>82</b> controls OBS logic circuits <b>84</b> in addition to controlling switch <b>86</b> and multiplexer <b>88</b> as will be more fully described below. The outputs of switch <b>86</b> are respectively coupled to auto spreader <b>80</b> and output queue <b>60</b>(<b>1</b>). The inputs of multiplexer <b>88</b> are coupled to output buffer <b>72</b>(<b>1</b>) and OBS logic control circuit <b>82</b>. Lastly, the output of multiplexer <b>88</b> is coupled to one input of switch <b>86</b>.</p>
<p id="p-0031" num="0030">As noted above, each OBS logic circuit <b>84</b> is coupled to a respective output buffer <b>72</b>. At regular time intervals the OBS logic circuits <b>84</b> calculate OBS values, respectively, based on the quantity of data pending in output buffers <b>72</b>, respectively. In one embodiment the OBS values represent the quantity of data pending in output buffers <b>72</b>, respectively. As an output buffer <b>72</b> fills with frames to be sent to a switching fabric <b>44</b> or to an output queue <b>62</b>, the OBS value for the output buffer will increase correspondingly. In one embodiment, OBS values can be expressed as a &#x201c;fullness factor&#x201d; or a percentage of the total memory capacity in use in the respective output buffers. As an aside, if the OBS value is 100% for an output buffer, that buffer should not receive additional frames until one or more of the frames currently pending in the output buffer are subsequently transmitted out.</p>
<p id="p-0032" num="0031">At regular time intervals, OBS logic control circuit <b>82</b> polls each OBS logic circuit <b>84</b> for the most recently calculated OBS value therein. Normally, output buffer <b>72</b>(<b>1</b>) is coupled to output queue <b>60</b>(<b>1</b>) via multiplexer <b>88</b> and switch <b>86</b> to enable normal frame transmission flow from output buffer <b>72</b>(<b>1</b>) to output queue <b>60</b>(<b>1</b>). However, OBS logic control <b>82</b> can toggle multiplexer <b>88</b> and switch <b>86</b> so that OBS logic control <b>82</b> can transmit to auto spreader <b>80</b> the most recently calculated OBS values it receives during polling. Thus, at regularly scheduled intervals, auto spreader <b>80</b> receives and stores OBS values representing the quantity of data, expressed as a percentage of total storage capacity, in output buffers <b>72</b>. The OBS values are provided to auto spreader <b>80</b> so that the latest OBS values are real time or near real time values that represent the quantity of data in the output buffers <b>72</b>. In an alternative embodiment, OBS values are continuously provided to auto spreader <b>80</b>. Auto spreader <b>80</b> uses the OBS values in a process for selecting an FPOE from one or more FPOEs that are mapped to an FPOE index, as will be more fully described below.</p>
<p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. 6</figref> illustrates in block diagram form, relevant components of auto spreader <b>80</b>. In one embodiment, auto spreader <b>80</b> may take form in software instructions executing on a processor. Alternatively, auto spreader <b>80</b> may also take form in hardware or a combination of hardware and software. As shown, auto spreader <b>80</b> includes an FPOE subset selector circuit <b>100</b> coupled between a randomizer circuit <b>102</b> and FPOE classifier circuits <b>104</b>. During an operation to provide forwarding engine <b>52</b> with an FPOE for a frame, each of the FPOE classifier circuits <b>104</b> receives the same set of one or more FPOEs from FPOE database <b>54</b> (see <figref idref="DRAWINGS">FIG. 5</figref>). The set of FPOEs are provided to classifier circuits <b>104</b> in much the same way that randomizer <b>56</b> receives a set of FPOEs; database <b>54</b> outputs the set of FPOEs in response to database <b>54</b> receiving an FPOE index from forwarding engine <b>52</b>. In addition to receiving the set of FPOEs, the FPOE classifier circuits <b>104</b> receive and store OBS values from OBS logic control circuit <b>82</b>. In one embodiment, each FPOE classifier circuit <b>104</b> receives the same OBS values that represent the quantity of data in respective output buffers <b>72</b> at a given point in time. The OBS values are stored in memories (not shown) of classifier circuits <b>104</b> until overwritten by new OBS values from OBS logic circuit <b>82</b>.</p>
<p id="p-0034" num="0033">Each FPOE corresponds to a respective output buffer <b>72</b>, and each OBS value corresponds to a respective output buffer <b>72</b>. It follows that each FPOE corresponds to a respective OBS value. In operation, each FPOE classifier circuit <b>104</b> identifies the FPOEs it receives that are contained in predetermined class or category, and the identification is based on the OBS values. In the embodiments shown in <figref idref="DRAWINGS">FIG. 6</figref>, FPOE classifier circuit <b>104</b>(<b>1</b>) identifies all FPOEs it receives that correspond to OBS values of 0-24%. Classifier circuit <b>104</b>(<b>1</b>) then presents the FPOEs it identifies, if any, to FPOE set select circuit <b>100</b> as a first subset of FPOEs. FPOE classifier circuit <b>104</b>(<b>2</b>) identifies all FPOEs it receives that correspond to OBS values of 25-49%. Classifier circuit <b>104</b>(<b>2</b>) then presents the FPOEs it identifies, if any, to FPOE set select circuit <b>100</b> as a second subset of FPOEs. FPOE classifier circuit <b>104</b>(<b>3</b>) identifies all FPOEs it receives that correspond to OBS values of 50-74%. Classifier circuit <b>104</b>(<b>3</b>) then presents the FPOEs it identifies, if any, to FPOE set select circuit <b>100</b> as a third subset of FPOEs. FPOE classifier circuit <b>104</b>(<b>4</b>) identifies all FPOEs it receives that correspond to respective OBS values of 75-100%. Classifier circuit <b>104</b>(<b>4</b>) then presents the FPOEs it identifies, if any, to FPOE set select circuit <b>100</b> as a fourth subset of FPOEs. The first-fourth subsets of FPOEs are presented by classifier circuits <b>104</b> to FPOE subset select circuit <b>100</b> at about the same time. It is noted that auto spreader <b>80</b> may be implemented with fewer than four FPOE classifier circuits or more than four FPOE classifier circuits.</p>
<p id="p-0035" num="0034">When FPOE subset selector circuit <b>100</b> receives one or more subsets of FPOEs from the classifier circuits <b>104</b>, FPOE subset select circuit selects a subset of FPOEs that correspond to the lowest OBS values. FPOE subset select circuit <b>100</b> subsequently transmits the FPOEs of the selected subset to a randomizer circuit <b>102</b>, which randomly selects one of the FPOEs it receives if there are more than one in the selected subset. The randomly selected FPOE is subsequently provided to the forwarding engine <b>52</b>, which in turn inserts the randomly selected FPOE into a fabric header of a frame.</p>
<p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. 7</figref> illustrates relevant aspects of a process that can be implemented within, for example, the line card <b>42</b> shown in <figref idref="DRAWINGS">FIG. 5</figref>. In act <b>120</b>, a frame is received by, for example, port processor <b>50</b>(<b>1</b>). In response an FPOE index is generated using forwarding information contained in the frame that was received in step <b>120</b>. A database such as FPOE database <b>54</b> can be accessed using the FPOE index generated in step <b>122</b>, and in response, the database provides one or more FPOEs that are mapped to the FPOE index as shown in step <b>124</b>. Each of these one or more FPOEs are categorized by, for example, FPOE classifier circuits <b>104</b> into one or more subsets according to the most recently calculated OBS values that correspond to the one or more FPOEs. Thereafter, as shown in step <b>130</b>, a device such as randomizer <b>102</b> randomly selects an FPOE from the subset of FPOEs that are mapped to the lowest OBS values. In step <b>132</b>, the randomly selected FPOE is added to a fabric header that is attached to the frame that was received in step <b>120</b>. Thereafter, the frame is transmitted to an output buffer of a switching fabric that corresponds to the randomly selected FPOE.</p>
<p id="p-0037" num="0036">Using the OBS values, auto spreader <b>80</b> of <figref idref="DRAWINGS">FIG. 6</figref> provides self-adjustment through feedback. If there are N output buffers <b>72</b> with the lowest OBS values and randomizer <b>102</b> favors some of them, they will receive more frames than their peers and may begin to fill. As a result they will fall out of the lowest OBS subset and frame traffic is distributed to the remaining output buffers <b>72</b>. Feedback of output buffer fullness corrects any unfairness caused by a fast but imperfect randomizer, such as randomizer <b>56</b> shown in <figref idref="DRAWINGS">FIG. 4</figref>. Thus, by using OBS values, auto spreader <b>80</b> will balance frame traffic among the output buffers <b>72</b>. If information regarding internal pathways through the crossbar <b>74</b> to the output buffers is also used in creating subsets that are provided to randomizer <b>102</b>, then randomizer <b>102</b> could select an FPOE based on output buffer fullness and/or latency.</p>
<p id="p-0038" num="0037">The foregoing was described with reference to switching devices. The term switching device should be understood in its broadest sense, and can be defined to encompass bridges, routers, etc. Thus, the invention as claimed could be implemented in a router element such as the router element <b>400</b> shown in <figref idref="DRAWINGS">FIG. 8</figref>. In this depiction, router element <b>400</b> includes a number of line cards (line cards <b>402</b>(<b>1</b>)-(N)) that are communicatively coupled to a forwarding engine <b>410</b> and a processor <b>420</b> via a data bus <b>430</b> and a result bus <b>440</b>. Line cards <b>402</b>(<b>1</b>)-(N) include a number of port processors <b>450</b>(<b>1</b>,<b>1</b>)-(N,N) which are controlled by port processor controllers <b>460</b>(<b>1</b>)-(N). It will also be noted that forwarding engine <b>410</b> and processor <b>420</b> are not only coupled to one another via data bus <b>430</b> and result bus <b>440</b>, but are also communicatively coupled to one another by a communications link <b>1070</b>.</p>
<p id="p-0039" num="0038">When a frame is received, the frame can be identified and analyzed by a router element such as router element <b>400</b> in the following manner. Upon receipt, a frame (or some or all of its control information) is sent from the one of port processors <b>450</b>(<b>1</b>,<b>1</b>)-(N,N) at which the frame was received to one or more of those devices coupled to data bus <b>430</b> (e.g., others of port processors <b>450</b>(<b>1</b>,<b>1</b>)-(N,N), forwarding engine <b>410</b> and/or processor <b>420</b>). Handling of the frame can be determined, for example, by forwarding engine <b>410</b>. For example, forwarding engine <b>410</b> may determine that the frame should be forwarded to one or more of port processors <b>450</b>(<b>1</b>,<b>1</b>)-(N,N). This can be accomplished by indicating to corresponding one(s) of port processor controllers <b>460</b>(<b>1</b>)-(N) that the copy of the frame held in the given one(s) of port processors <b>450</b>(<b>1</b>,<b>1</b>)-(N,N) should be forwarded to the appropriate one of port processors <b>450</b>(<b>1</b>,<b>1</b>)-(N,N).</p>
<p id="p-0040" num="0039">In the foregoing process, network security information can be included in a frame sourced by routing element <b>400</b> in a number of ways. For example, forwarding engine <b>410</b> can be used to detect the need for the inclusion of network security information in the packet, and processor <b>420</b> can be called into service to provide the requisite network security information. This network security information can be included in the frame during the transfer of the frame's contents from one of port processors <b>450</b>(<b>1</b>,<b>1</b>)-(N,N) to another of port processors <b>450</b>(<b>1</b>,<b>1</b>)-(N,N), by processor <b>420</b> providing the requisite information directly, or via forwarding engine <b>410</b>, for example. The assembled frame at the receiving one of port processors <b>450</b>(<b>1</b>,<b>1</b>)-(N,N) can thus be made to contain the requisite network security information.</p>
<p id="p-0041" num="0040">In addition, or alternatively, once a frame has been identified for processing according to the present invention, forwarding engine <b>410</b>, processor <b>420</b> or the like can be used to process the frame in some manner or add frame security information, in order to secure the frame. On a node sourcing such a frame, this processing can include, for example, encryption of some or all of the frame's information, the addition of a digital signature or some other information or processing capable of securing the frame. On a node receiving such a processed frame, the corresponding process is performed to recover or validate the frame's information that has been thusly protected.</p>
<p id="p-0042" num="0041">Although the present invention has been described in connection with several embodiments, the invention is not intended to be limited to the specific forms set forth herein. On the contrary, it is intended to cover such alternatives, modifications, and equivalents as can be reasonably included within the scope of the invention as defined by the appended claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method comprising:
<claim-text>receiving a plurality of first values, wherein each of the first values is related to a quantity of data stored in a respective one of a plurality of buffers, wherein one of the plurality of first values is numerically greater than another of the plurality of first values, which in turn is numerically greater than yet another of the plurality of first values;</claim-text>
<claim-text>receiving first identifiers, wherein the first identifiers correspond to buffers, respectively, of a first subset of the plurality of buffers, wherein the first identifiers include some but not all of a plurality of identifiers corresponding to the plurality of buffers, respectively, wherein each of the buffers corresponding to the first identifiers is coupled to a same destination device for the first frame so that the first frame can be transmitted to the destination device via any of the buffers corresponding to the first identifiers;</claim-text>
<claim-text>selecting a subset of the first identifiers based on one or more of the first values;</claim-text>
<claim-text>selecting one of the first identifiers contained in the selected subset;</claim-text>
<claim-text>transmitting a first frame to the buffer that corresponds to the selected one of the first identifiers.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein the first identifiers comprise fabric port of exits (FPOEs) of a switching fabric.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00002">claim 2</claim-ref> further comprising an act of inserting the selected one of the FPOEs into a header contained in the first frame or attached to the first frame.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> further comprising:
<claim-text>receiving a second frame;</claim-text>
<claim-text>receiving second identifiers, each of which corresponds to a respective one of a second subset of the plurality of buffers;</claim-text>
<claim-text>selecting a subset of the second identifiers based on one or more of the first values;</claim-text>
<claim-text>selecting one of the second identifiers contained in the selected subset of the second identifiers;</claim-text>
<claim-text>transmitting the second frame to the buffer that corresponds to the selected one of the second identifiers.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein the plurality of buffers are contained in a switching fabric.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> further comprising an act of classifying each of the first identifiers into two or more subsets, wherein the subset is one of the two or more subsets.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> wherein selecting one of the first identifiers comprises randomly selecting one of the first identifiers.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref> further comprising:
<claim-text>calculating a first index based on first forwarding information that is contained in the first frame;</claim-text>
<claim-text>mapping the first index to the first identifiers;</claim-text>
<claim-text>receiving a second frame;</claim-text>
<claim-text>calculating a second index based on second forwarding information that is contained in the second frame;</claim-text>
<claim-text>mapping the second index to second identifiers.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. A network device comprising:
<claim-text>a first circuit for receiving a plurality of first values and first identifiers, wherein each of the first values is related to a quantity of data stored in a respective one of a plurality of buffers, wherein the first identifiers correspond to buffers, respectively, of a first subset of the plurality of buffers, wherein the first identifiers include some but not all of a plurality of identifiers corresponding to the plurality of buffers, respectively, wherein one of the plurality of first values is numerically greater than another of the plurality of first values, which in turn is numerically greater than yet another of the plurality of first values wherein each of the buffers corresponding to the first identifiers can be coupled to a same destination device for the first frame so that the first frame can be transmitted to the destination device via any of the buffers corresponding to the first identifiers;</claim-text>
<claim-text>a second circuit for selecting a subset of the first identifiers based on one or more of the first values;</claim-text>
<claim-text>a third circuit for selecting one of the first identifiers contained in the selected subset;</claim-text>
<claim-text>a fourth circuit for transmitting a first frame to the buffer that corresponds to the selected one of the first identifiers.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The network device method of <claim-ref idref="CLM-00009">claim 9</claim-ref> wherein the first identifiers comprise fabric port of exits (FPOEs) of a switching fabric.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The network device method of <claim-ref idref="CLM-00010">claim 10</claim-ref> further comprising a fifth circuit for inserting the selected one of the FPOEs into a header contained in the first frame or attached to the first frame.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The network device method of <claim-ref idref="CLM-00009">claim 9</claim-ref> wherein the plurality of buffers are contained in a switching fabric.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The network device method of <claim-ref idref="CLM-00009">claim 9</claim-ref> further comprising:
<claim-text>a fifth circuit for calculating a first index based on first forwarding information that is contained in the first frame;</claim-text>
<claim-text>a sixth circuit for mapping the first index to the first identifiers.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
