<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625592-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625592</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12037525</doc-number>
<date>20080226</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<us-term-of-grant>
<us-term-extension>655</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20130101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>12</main-group>
<subgroup>54</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>370392</main-classification>
<further-classification>370419</further-classification>
<further-classification>709220</further-classification>
<further-classification>709223</further-classification>
<further-classification>715735</further-classification>
</classification-national>
<invention-title id="d2e53">Blade switch with scalable interfaces</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5812771</doc-number>
<kind>A</kind>
<name>Fee et al.</name>
<date>19980900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709201</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6735198</doc-number>
<kind>B1</kind>
<name>Edsall et al.</name>
<date>20040500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370389</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>7417987</doc-number>
<kind>B2</kind>
<name>Shenoy et al.</name>
<date>20080800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370389</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2002/0103921</doc-number>
<kind>A1</kind>
<name>Nair et al.</name>
<date>20020800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709232</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2003/0235195</doc-number>
<kind>A1</kind>
<name>Shenoy et al.</name>
<date>20031200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370389</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2004/0199568</doc-number>
<kind>A1</kind>
<name>Lund</name>
<date>20041000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2005/0074003</doc-number>
<kind>A1</kind>
<name>Ball et al.</name>
<date>20050400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370389</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2005/0169281</doc-number>
<kind>A1</kind>
<name>Ko et al.</name>
<date>20050800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370400</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2006/0221972</doc-number>
<kind>A1</kind>
<name>Bhargava et al.</name>
<date>20061000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>2007/0291654</doc-number>
<kind>A1</kind>
<name>Pepper</name>
<date>20071200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370252</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>2008/0117909</doc-number>
<kind>A1</kind>
<name>Johnson</name>
<date>20080500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370392</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>WO</country>
<doc-number>2005029784</doc-number>
<kind>A2</kind>
<date>20050300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00013">
<othercit>PCT International Search Report and Written Opinion dated Aug. 11, 2009.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>19</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>None</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>3</number-of-drawing-sheets>
<number-of-figures>3</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20090213869</doc-number>
<kind>A1</kind>
<date>20090827</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Rajendran</last-name>
<first-name>Saravanakumar</first-name>
<address>
<city>San Jose</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Smith</last-name>
<first-name>Michael</first-name>
<address>
<city>San Jose</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Devireddy</last-name>
<first-name>Dileep Kumar</first-name>
<address>
<city>San Jose</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="004" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Kathail</last-name>
<first-name>Pradeep K.</first-name>
<address>
<city>Los Altos</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="005" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Appanna</last-name>
<first-name>Chandrashekhar</first-name>
<address>
<city>Cupertino</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="006" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Wang</last-name>
<first-name>Jeffrey Ym</first-name>
<address>
<city>Saratoga</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="007" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Gandhi</last-name>
<first-name>Prashant P.</first-name>
<address>
<city>San Jose</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Rajendran</last-name>
<first-name>Saravanakumar</first-name>
<address>
<city>San Jose</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Smith</last-name>
<first-name>Michael</first-name>
<address>
<city>San Jose</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Devireddy</last-name>
<first-name>Dileep Kumar</first-name>
<address>
<city>San Jose</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="004" designation="us-only">
<addressbook>
<last-name>Kathail</last-name>
<first-name>Pradeep K.</first-name>
<address>
<city>Los Altos</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="005" designation="us-only">
<addressbook>
<last-name>Appanna</last-name>
<first-name>Chandrashekhar</first-name>
<address>
<city>Cupertino</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="006" designation="us-only">
<addressbook>
<last-name>Wang</last-name>
<first-name>Jeffrey Ym</first-name>
<address>
<city>Saratoga</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="007" designation="us-only">
<addressbook>
<last-name>Gandhi</last-name>
<first-name>Prashant P.</first-name>
<address>
<city>San Jose</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Patterson &#x26; Sheridan, LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Cisco Technology, Inc.</orgname>
<role>02</role>
<address>
<city>San Jose</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Roberts</last-name>
<first-name>Brian</first-name>
<department>2466</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A blade switch for increased interface scalability is provided. The blade switch may address interface scalability by having each of the switch linecards manage its interfaces locally and may use the concept of virtual and local interfaces for intelligent forwarding. The blade switch may appear as a single network switch having a single bridge ID from the network perspective during operation and from the customer perspective during configuration.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="154.86mm" wi="253.92mm" file="US08625592-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="220.39mm" wi="181.69mm" orientation="landscape" file="US08625592-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="199.98mm" wi="151.47mm" orientation="landscape" file="US08625592-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="255.27mm" wi="179.15mm" orientation="landscape" file="US08625592-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0002" num="0001">1. Field of the Invention</p>
<p id="p-0003" num="0002">Embodiments of the present invention generally relate to the field of network communication, and more particularly, to interface scalability when increasing the number of switch linecards within a single chassis.</p>
<p id="p-0004" num="0003">2. Description of the Related Art</p>
<p id="p-0005" num="0004">As the number of clients or network nodes having destination IP addresses increases for an Internet Service Provider (ISP) or a growing large company, network complexity and, thus, the demand for more router and switch interfaces also scale accordingly. Switching systems containing several slots for connecting switch linecards have been designed in an effort to meet the demand for network switches with a large number of interfaces, both physical and logical. However, scalability in terms of the number of interfaces and associated operations supported by a single network switch remains a problem.</p>
<p id="p-0006" num="0005">Accordingly, techniques for successfully scaling the number of interfaces within a network switching system are needed.</p>
<heading id="h-0002" level="1">OVERVIEW</heading>
<p id="p-0007" num="0006">Embodiments of the present invention generally relate to network switching systems for addressing interface scalability.</p>
<p id="p-0008" num="0007">One embodiment of the present invention provides a network switch system. The system generally includes a chassis; a plurality of switch linecards disposed in the chassis and functioning as independent Layer 2 (L2) switches, wherein each of the switch linecards maintains control, forwarding, and interface management functions locally; and a controller, wherein the controller is adapted to configure the plurality of switch linecards as a single network device having a single bridge identifier (bridge ID).</p>
<p id="p-0009" num="0008">Another embodiment of the present invention provides a method. The method generally includes receiving a packet in a first switch linecard of a plurality of switch linecards disposed in a chassis, wherein the plurality of switch linecards is configured as a single network switch having a single bridge ID, and forwarding the packet from the first switch linecard to a second switch linecard via a virtual interface.</p>
<p id="p-0010" num="0009">Yet another embodiment of the present invention provides a method. The method generally includes configuring a forwarding information base (FIB) of a first switch linecard of a plurality of switch linecards disposed in a chassis to forward a packet to a local interface of the first switch linecard if the packet is to be forwarded within the first switch linecard and configuring the FIB of the first switch linecard to forward the packet from the first switch linecard to a virtual interface for bridging between two or more of the plurality of switch linecards if the packet is to be forwarded to a second switch linecard in the plurality.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0011" num="0010">So that the manner in which the above recited features of the present invention can be understood in detail, a more particular description of the invention, briefly summarized above, may be had by reference to embodiments, some of which are illustrated in the appended drawings. It is to be noted, however, that the appended drawings illustrate only typical embodiments of this invention and are therefore not to be considered limiting of its scope, for the invention may admit to other equally effective embodiments.</p>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram of a switching network-in-a-box in accordance with an embodiment of the present invention;</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 2</figref> models the control plane for a blade switch in accordance with an embodiment of the present invention; and</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 3</figref> illustrates blade-to-blade unicast forwarding within the blade switch in accordance with an embodiment of the present invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">DESCRIPTION OF EXAMPLE EMBODIMENTS</heading>
<p id="p-0015" num="0014">Embodiments of the present invention provide a blade switch to address interface scalability and permit an increased number of switch linecards supported within a single chassis.</p>
<heading id="h-0005" level="1">An Example Blade Switch</heading>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram of an example blade switch <b>100</b> according to an embodiment of the invention. The blade switch <b>100</b> may comprise a chassis <b>102</b> having a backplane and a plurality of slots. Switch linecards <b>104</b> (also known as switch blades and labeled S<b>1</b>-S<b>4</b> in <figref idref="DRAWINGS">FIG. 1</figref>) may be disposed in the slots of the chassis <b>102</b> and electrically coupled to the backplane, typically through plug-in interfaces. The number of slots may dictate the number of switch linecards <b>104</b> the chassis <b>102</b> may hold. Although only four switch linecards <b>104</b> are shown in <figref idref="DRAWINGS">FIG. 1</figref>, this is representative of any number of linecards that may be disposed within a blade switch chassis (e.g., 44 or 128 linecards). Moreover, an operable blade switch may have empty slots where the chassis <b>102</b> has more available slots than switch linecards <b>104</b> used for a given application.</p>
<p id="p-0017" num="0016">Each switch linecard <b>104</b> may have a plurality of external interfaces <b>106</b> for coupling the switch linecard <b>104</b> to an external network, such as a router, an external bridge, a server, or a client. These external interfaces <b>106</b> may be for wireless transmission or physical electrical connection to any suitable cable, such as Cat-5 cable, for high-speed data transmission. The physical external interfaces <b>106</b> and any logical interfaces for a given switch linecard <b>104</b> may be considered as the local interfaces for that switch linecard <b>104</b>. Each switch linecard <b>104</b> may also be coupled to an internal local area network (LAN) segment <b>108</b> for routing between the linecards <b>104</b>. Physically, the internal LAN segment <b>108</b> may be located within the backplane (e.g., as a trace within the printed circuit board (PCB) of the backplane), and the individual switch linecards <b>104</b> may be coupled to the internal LAN segment <b>108</b> by being connected to the backplane.</p>
<p id="p-0018" num="0017">Furthermore, a controller <b>110</b> may be coupled to the switch linecards <b>104</b> in an effort to manage and configure the routing information for the individual switch linecards <b>104</b>. To manage the switch linecards <b>104</b>, the controller <b>110</b> may run an operating system. The controller <b>110</b> may be disposed within a separate area of the chassis <b>102</b> from the switch linecards <b>104</b> or have a designated slot. For some embodiments, the controller <b>110</b> may be coupled to the linecards <b>104</b> via the internal LAN segment <b>108</b> as shown.</p>
<p id="p-0019" num="0018">The chassis <b>102</b> may be composed of any suitable material, such as metal, for providing a rigid structure in which to contain and protect elements disposed within (e.g., the switch linecards <b>104</b>) and for acting as a Faraday shield against electrical noise. For some embodiments, the chassis <b>102</b> may also contain one or more fans (not shown) in an effort to provide air circulation and, thus, forced convective cooling of the switch linecards <b>104</b>. Furthermore, a power supply (not shown) may be disposed within the chassis <b>102</b> and may serve to convert AC power, such as 120 V<sub>rms </sub>from a wall outlet, to one or more DC voltages for use by the switch linecards <b>104</b>, the controller <b>110</b>, and the fan(s). The power supply may be coupled to the backplane for power distribution to the switch linecards <b>104</b> and the controller <b>110</b>.</p>
<p id="p-0020" num="0019">In the blade switch <b>100</b>, each switch linecard <b>104</b> may own the interfaces locally. In other words, each switch linecard <b>104</b> may store and maintain its own forwarding information base (FIB), also known as a forwarding table, for making switching/routing decisions. Hence, the controller <b>110</b> need not control the data packets during operation of the blade switch <b>100</b>. This is in contrast to conventional systems where the controller typically distributes the FIB to the blades and controls the data switching. Used to find the proper interface to which an input interface should send a packet to be transmitted by the switch linecard, the FIB may be directed toward fast lookup of destination addresses. From a data plane perspective, the blade switch <b>100</b> may behave substantially similar to a single network switch in a network, even though there may tens to hundreds of switch linecards <b>104</b> contained within the chassis <b>102</b>, thereby leading to the concept of a &#x201c;network-in-a-box&#x201d; so to speak. By conceptually having all of the switch linecards in the chassis <b>102</b> function as a single network switch, the system software may be scaled to support a large number of interfaces.</p>
<p id="p-0021" num="0020">To configure the blade switch <b>100</b>, the customer may interface with the controller <b>110</b>, which handles the global aspects of the blade switch <b>100</b>, via software, such as the controller's operating system. From the customer, control plane, and data plane perspectives, the blade switch <b>100</b> may appear and behave as a single network switch having a single bridge identifier (bridge ID). However, once the customer has completed configuration of the blade switch <b>100</b>, the FIB for each switch linecard <b>104</b> may be updated and stored locally. For some embodiments, the controller <b>110</b> may act as a router and download the FIB contents into the switches. The blade switch <b>100</b> may configure only a single virtual interface, such as the internal LAN segment <b>108</b>, for the network fabric within the chassis <b>102</b>.</p>
<p id="p-0022" num="0021">With the virtual interface configured by the controller <b>110</b>, the blade switch <b>100</b> may employ intelligent forwarding through the fabric by dividing the routes into two groups: local interfaces and virtual interfaces. Local interfaces, as used herein, may be generally defined as interfaces (both physical and logical) that are local to a given switch linecard <b>104</b>. A virtual interface, as used herein, may be generally defined as an interface for the blade switch model that identifies the shared segment connecting the linecards. With these two groups, the intelligent forwarding may be known as two-stage, or split, forwarding. Based on the destination, the FIB for each switch linecard <b>104</b> may indicate routing incoming data packets to a local interface, local to that particular linecard, or to the virtual interface for routing to another switch linecard <b>104</b> within the chassis <b>102</b> of the blade switch <b>100</b>.</p>
<p id="p-0023" num="0022">In other words, the virtual interface may be a global internal virtual LAN (VLAN) used for bridging across the linecards <b>104</b>. These local and virtual interfaces may operate on Layer 2 (L2, the data link layer) of the Open Systems Interconnection Reference Model (OSI model). Conventionally on a shared LAN segment, the data packets are received by every node on the segment. With intelligent forwarding, however, packet forwarding is performed as if the linecards are connected with point-to-point links, which will be described in further detail below. Furthermore, mechanisms may be implemented in an effort to ensure that the internal routes of the virtual interface are preferred over any possible routes existing outside of the blade switch's chassis <b>102</b>.</p>
<p id="p-0024" num="0023">With the concept of intelligent forwarding, local switching within a certain switch linecard <b>104</b> in the blade switch <b>100</b> may most likely have the same performance as in a conventional switching system with the same switch linecard. However, because of the two lookups in intelligent forwarding when packets are routed between linecards in the blade switch <b>100</b>, the performance may be slightly reduced when compared to a conventional switching system with the same switch linecards. However, the scalability advantage may outweigh the slight performance reduction for certain applications.</p>
<p id="p-0025" num="0024">By localizing the switching decisions for a linecard in the blade switch <b>100</b>, each of the switch linecards <b>104</b> may run a separate instance of an operating system, such as Cisco's Internetwork Operating System (IOS). Moreover, in the blade switch <b>100</b>, each of the switch linecards <b>104</b> within the chassis <b>102</b> may run a different version of the operating system. This may allow for scaling the number of switch linecards <b>104</b> in the blade switch <b>100</b> in conjunction with operating system feature/code development. Furthermore, because forwarding is localized on each linecard, each of the switch linecards <b>104</b> may support a different version of the forwarding engine, such as Cisco's Enhanced Address Recognition Logic (EARL), within the routing application specific integrated circuit (ASIC). In other words, mixed mode EARLs may be supported.</p>
<p id="p-0026" num="0025">Allowing for different operating systems and different forwarding engines may permit a &#x201c;pay-as-you-go&#x201d; model, where customers may upscale their blade switch by adding new switch linecards potentially with upgraded features without discarding legacy linecards. In this manner, scalability is not hindered by the costs of having to replace legacy linecards when upgrading a network switching system, such as the blade switch <b>100</b>.</p>
<p id="p-0027" num="0026">Referring now to the control plane model <b>200</b> of <figref idref="DRAWINGS">FIG. 2</figref>, ports (including the external interfaces <b>106</b>) that are aggregated may be L2 ports. Each port may be assigned a private VLAN, and multiple ports may be grouped into a routable VLAN with a switch virtual interface (SVI) defined. An SVI represents a VLAN of switch ports as a single interface to a routing or bridging function of a network switch, such as the blade switch <b>100</b>.</p>
<p id="p-0028" num="0027">Routing protocols need not be run on the aggregated ports. Rather, routing protocols may be run in a single place, such as in the route processor (RP) <b>202</b>, or router. The route processor <b>202</b> may be part of the controller <b>110</b> of the blade switch <b>100</b>, or the controller <b>110</b> may function as the route processor <b>202</b>. Since there is one single router control plane and one single router view to the external world, EtherChannels may be supported in the blade switch <b>100</b>. Each switch linecard <b>104</b> may contain a switch processor (SP) <b>204</b> for L2 control plane functionality, as well as management of ports local to that particular linecard. In other words, each switch linecard <b>104</b> may act like an L2 switch. Each blade may expose a certain number of SVIs to the route processor <b>202</b>.</p>
<p id="p-0029" num="0028">The blade switch <b>100</b> may also be intended to interface with a number of core-facing uplink ports, and the number of uplink ports (i.e., real routed ports <b>206</b>) may most likely be much less than the total number of aggregated ports. The routed ports <b>206</b>, which function on Layer 3 (L3, the network layer) of the OSI model, may most likely reside on a separate switch linecard <b>104</b> than the L2 switches. The routed ports <b>206</b> may also be locally managed. The physical external interfaces <b>106</b> may be scaled by distributing forwarding information to the switch linecards <b>104</b>, as illustrated by the FIBs (e.g., as part of Distributed Cisco Express Forwarding, or dCEF) being distributed to the switch processors <b>204</b> and routed ports <b>206</b> in <figref idref="DRAWINGS">FIG. 2</figref>.</p>
<p id="p-0030" num="0029">From the management plane perspective, the blade switch <b>100</b> may be centrally managed at the controller <b>110</b>, and more specifically, at the route processor <b>202</b>. The controller <b>110</b> may have a single internet protocol (IP) address with session support, and commands and/or features for blade switch management may be executed on the controller <b>110</b>. Furthermore, some embodiments may include an option to telnet directly to a certain linecard <b>104</b> for debugging and network management. In other words, the blade switch <b>100</b> may allow a user to connect to the controller <b>110</b> and then select an individual switch linecard <b>104</b> for management and/or debugging.</p>
<p id="p-0031" num="0030">For some embodiments, the blade switch <b>100</b> may allow a user to connect to the controller <b>110</b> and manage either all or a subset of the plurality of switch linecards <b>104</b> as a single entity. In the management plane, the blade switch <b>100</b> may allow the switch linecards <b>104</b> to be partitioned based on the operating system version the linecards are running for some embodiments. By allowing linecards running the same version and image of the operating system to be managed as a single entity, a command translation table need not be maintained. Also for some embodiments, the blade switch <b>100</b> may have provisions for specifying a subset of the switch linecards <b>104</b> as the destination for specified commands.</p>
<p id="p-0032" num="0031">An Interface Descriptor Block (IDB) is a special control structure internal to the Cisco IOS software that contains information such as the IP address, interface state, and packet statistics. Cisco IOS software may maintain one IDB for each interface present on a platform. While the L2 IDBs may be local to the switch linecards <b>104</b>, the SVI IDBs may reside in the route processor <b>202</b>. L3 commands may be processed locally at the route processor <b>202</b>, but L2 commands may be sent to one or more switch linecard(s) <b>104</b>.</p>
<p id="p-0033" num="0032">In view of the above description, the blade switch <b>100</b> may have each of the switch linecards <b>104</b> maintain its control/forwarding/management functions locally while appearing as a single switch with a single bridge ID from the customer and network perspectives.</p>
<heading id="h-0006" level="1">Unicast Forwarding Example</heading>
<p id="p-0034" num="0033">The blade switch <b>100</b> may support several different types of linecard-to-linecard (blade-to-blade) forwarding from the data plane perspective. <figref idref="DRAWINGS">FIG. 3</figref> illustrates blade-to-blade unicast forwarding within the blade switch according to some embodiments of the present invention. In computer networks, unicast forwarding is the sending of data packets to a single destination, and duplicate data streams may be transmitted if more than one destination is to receive a particular data packet.</p>
<p id="p-0035" num="0034">As depicted in <figref idref="DRAWINGS">FIG. 3</figref>, the blade switch <b>100</b> may contain a first switch linecard <b>300</b> labeled BLADE <b>1</b> and a second switch linecard <b>302</b> labeled BLADE <b>2</b>. The first switch linecard <b>300</b> may have two local ports <b>304</b> labeled I<sub>0 </sub>and I<sub>1</sub>, and the second switch linecard <b>202</b> may have two local ports <b>304</b> labeled I<sub>6 </sub>and I<sub>7</sub>. Although <figref idref="DRAWINGS">FIG. 3</figref> depicts only two local ports per switch linecard, each linecard may have many more local ports for interfacing with a network external to the blade switch <b>100</b>. Interface I<sub>1 </sub>may be coupled to a network <b>306</b> having an IP subnet of 2.x.x.x, for example. Interface I<sub>6 </sub>may be coupled to a network <b>308</b> having an IP subnet of 1.x.x.x. The first and second switch linecards <b>300</b>, <b>302</b> may be coupled by the virtual interface (V) <b>310</b> for blade-to-blade forwarding.</p>
<p id="p-0036" num="0035">The forwarding engine <b>312</b>, such as EARL, within the first switch linecard <b>300</b> may contain a forwarding information base (FIB) <b>314</b> after configuration of the blade switch <b>100</b> that indicates routing incoming data packets to a local interface, such as I<sub>0 </sub>and I<sub>1</sub>, to a switch virtual interface (SVI) such as SVI<b>1</b> or SVI<b>2</b>, or to the virtual interface <b>310</b>. For example, if a data packet has a destination address in the subnet of 1.x.x.x, there may not be a local interface on BLADE <b>1</b> to route the data packet to reach the network <b>308</b>. Instead the data packet should be routed over the fabric link. Thus, the FIB <b>314</b> may contain an entry to rewrite data packets with a destination address in the subnet of 1.x.x.x to the virtual interface <b>310</b> based on the Media Access Control (MAC) address of BLADE <b>2</b> or, in this case, the SVI associated with the destination network (e.g., SVI<b>2</b>).</p>
<p id="p-0037" num="0036">The MAC address may be based on the slot number of the switch linecard <b>104</b> within the chassis <b>102</b> of the blade switch <b>100</b> having the correct local port coupled to the destination network. According to the L2 MAC table <b>316</b> for the first switch linecard <b>300</b> (L2 standing for Layer 2, the data link layer of the OSI model), the MAC address for BLADE <b>2</b>, the second switch linecard <b>302</b>, is 2.</p>
<p id="p-0038" num="0037">The FIB <b>314</b> entry for data packets with a destination address in the subnet of 1.x.x.x should be to rewrite data packets to SVI<b>2</b>, through the virtual interface <b>310</b>, as illustrated. Thus, even though multiple switch linecards may be coupled to the virtual interface <b>310</b>, the SVI addressing used in conjunction with the virtual interface routing in the first portion of intelligent forwarding allows data packets to be forwarded as if the linecards (such as BLADE <b>1</b> and BLADE <b>2</b>) were connected with point-to-point links.</p>
<p id="p-0039" num="0038">In a similar manner, the forwarding engine <b>318</b>, such as EARL, within BLADE <b>2</b>, the second switch linecard <b>302</b>, may contain an FIB <b>320</b> after configuration of the blade switch <b>100</b> that indicates routing incoming data packets to a local interface, such as I<sub>6 </sub>and I<sub>7</sub>, to an SVI such as SVI<b>1</b> or SVI<b>2</b>, or to the virtual interface <b>310</b>. For example, if a data packet is received in the second switch linecard <b>302</b> with a destination address in the subnet of 1.x.x.x, the FIB <b>320</b> may contain routing instructions to rewrite the packet to SVI<b>2</b> (using local interface I<sub>6</sub>). However, if the data packet has a destination address in the subnet of 2.x.x.x, there may not be a local interface on BLADE <b>2</b> to route the data packet to reach the network <b>306</b>. Thus, the FIB <b>320</b> may contain an entry to rewrite data packets with a destination address in the subnet of 2.x.x.x to SVI<b>1</b> (using virtual interface <b>310</b>). According to the L2 MAC table <b>322</b> for the second switch linecard <b>302</b>, the MAC address for BLADE <b>1</b>, the first switch linecard <b>300</b>, is 1.</p>
<p id="p-0040" num="0039">During unicast forwarding according to embodiments of the invention and as illustrated in <figref idref="DRAWINGS">FIG. 3</figref> as an example, L3 forwarding may occur on the ingress blade along with various input/output features, and then L2 bridging may occur on the output blade. First, an incoming data packet may be received from network <b>306</b> on interface I<sub>1 </sub>in SVI<b>1</b>. An Access Control List (ACL) and Quality of Service (QoS) lookup may be performed on the input interface (I<sub>1 </sub>in this example). ACL, as used herein, may be generally defined as a list of permissions attached to an object specifying who or what is allowed to access the object and what operations are permitted to be performed on the object. QoS, as used herein, may be generally defined as a resource reservation control mechanism, which can provide different priority to different users or data flows or guarantee a certain level of performance to a data flow in accordance with requests from the application program or the Internet Service Provider (ISP) policy.</p>
<p id="p-0041" num="0040">After the ACL and QoS policies are established for the data packet, the ingress forwarding engine <b>312</b>, such as EARL, may perform an FIB lookup into FIB <b>314</b>. Since the packet has a destination address in the subnet of 1.x.x.x, the FIB adjacency may rewrite the packet to interface SVI<b>2</b> through the virtual interface (V) <b>310</b> as described above. There need not be any output ACL/QoS policies on V <b>310</b>, or any input ACL/QoS policies either. The egress forwarding engine <b>318</b> may perform a second FIB lookup, and FIB adjacency may rewrite the data packet to SVI<b>2</b> through interface I<sub>6 </sub>according to FIB <b>320</b>. The data packet may then leave the blade switch <b>100</b> out of interface I<sub>6 </sub>bound for network <b>308</b> with an IP address in the subnet of 1.x.x.x.</p>
<heading id="h-0007" level="1">Conclusion</heading>
<p id="p-0042" num="0041">The blade switch may address interface scalability by having each of the linecards maintain its control/forwarding/management functions locally and uses the concept of virtual and local interfaces for intelligent forwarding. From the customer and network perspectives, the blade switch may appear as a single network switch having a single bridge ID. The blade switch may operate as a distributed L2 device with a single L3 interface, where one route processor (RP) interacts with multiple switch processors (SP).</p>
<p id="p-0043" num="0042">While the foregoing is directed to embodiments of the present invention, other and further embodiments of the invention may be devised without departing from the basic scope thereof, and the scope thereof is determined by the claims that follow.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A network switch system, comprising:
<claim-text>a chassis;</claim-text>
<claim-text>a plurality of switch linecards disposed in the chassis and functioning as independent Layer 2 (L2) switches, wherein each of the switch linecards maintains control, forwarding, and interface management functions locally, wherein a first group of switch linecards within the plurality of switch linecards are configured with a first operating system version, and wherein a second group of switch linecards within the plurality of switch linecards are configured with a second operating system version, distinct from the first operating system version; and</claim-text>
<claim-text>a controller disposed in the chassis and configured to manage the plurality of switch linecards, wherein the controller is configured to provide an interface for configuring the network switch system, wherein the interface allows the first group of switch linecards to be configured and managed as a single entity, irrespective of the second group of switch linecards.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>responsive to a configuration operation using the interface, storing and maintaining, at each of the plurality of switch linecards, a respective forwarding information base (FIB), wherein each of the plurality of switch linecards is further configured to direct incoming packets, using the respective FIB, to (i) a local interface or (ii) a virtual interface of another switch linecard in the plurality of switch linecards, wherein the virtual interface is an internal local area network (LAN) segment connecting all of the plurality of switch linecards, and wherein the switch linecards in the plurality of switch linecards are configured to interact with one another using the virtual interfaces within the network switch system.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The system of <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein each of the plurality of switch linecards is configured to download the respective FIB from the controller, and wherein a first one of the plurality of switch linecards is further configured to:
<claim-text>receive data packets having destination addresses in a first subnet,</claim-text>
<claim-text>determine that no local interface is available at the first switch linecard to transmit the data packets to the first subnet, based on the FIB at the first switch linecard,</claim-text>
<claim-text>modify the data packets based on a media access control (MAC) address of a second one of the plurality of switch linecards, and</claim-text>
<claim-text>transmit the modified data packets to the second switch linecards using a first virtual interface, wherein the second switch linecard is configured to undo the modification to the data packets and to transmit the data packets to the destination address in the first subnet using a local interface at the second switch linecard.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the controller comprises a route processor (RP)configured to perform routing operations for Layer 3 (L3) traffic for the plurality of switch linecards, and wherein each of the plurality of switch linecards comprises a switch processor (SP).</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein a first linecard of the plurality of switch linecards runs a different operating system than a second linecard of the plurality.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein a first linecard of the plurality of switch linecards runs a different version of a forwarding engine than a second linecard of the plurality.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the system appears as the single network device from the control plane perspective and a management plane perspective.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The network switch system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the plurality of switch linecards appear and behave as a single network switch having a single bridge identifier that uniquely identifies the single network switch, from customer, control plane and data plane perspectives, prior to a configuration of the network switch system using the interface.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. A method of configuring switch linecards in a network switch system, the network switch system comprising a plurality of switch linecards disposed in a chassis and functioning as independent Layer 2 (L2) switches, wherein each of the switch linecards maintains control, forwarding, and interface management functions locally, wherein a first group of switch linecards within the plurality of switch linecards are configured with a first operating system version, and wherein a second group of switch linecards within the plurality of switch linecards are configured with a second operating system version, distinct from the first operating system version, comprising:
<claim-text>providing an interface for configuring switch linecards in the network switch system;</claim-text>
<claim-text>receiving, via the interface, a configuration operation specifying the first group of switch linecards; and</claim-text>
<claim-text>configuring the first group of switch linecards as a single entity, irrespective of the second group of switch linecards within the network switch system.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The method of <claim-ref idref="CLM-00009">claim 9</claim-ref>, further comprising:
<claim-text>responsive to receiving the configuration operation, transmitting, from a controller to each of the plurality of switch linecards, a respective forwarding information base (FIB), wherein each of the plurality of switch linecards is further configured to direct incoming packets, using the respective FIB, to (i) a local interface or (ii) a virtual interface of another switch linecard in the plurality of switch linecards, wherein the virtual interface is an internal local area network (LAN) segment connecting all of the plurality of switch linecards, and wherein the switch linecards in the plurality of switch linecards are configured to interact with one another using the virtual interfaces within the network switch system.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The method of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein a first one of the plurality of switch linecards is further configured to:
<claim-text>receive data packets having destination addresses in a first subnet,</claim-text>
<claim-text>determine that no local interface is available at the first switch linecard to transmit the data packets to the first subnet, based on the FIB at the first switch linecard,</claim-text>
<claim-text>modify the data packets based on a media access control (MAC) address of a second one of the plurality of switch linecards, and</claim-text>
<claim-text>transmit the modified data packets to the second switch linecards using a first virtual interface, wherein the second switch linecard is configured to undo the modification to the data packets and to transmit the data packets to the destination address in the first subnet using a local interface at the second switch linecard.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The method of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein each of the plurality of switch linecards is configured to maintain the respective FIB.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The method of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the controller comprises a route processor (RP) configured to perform routing operations for Layer 3 (L3) traffic for the plurality of switch linecards, and wherein each of the plurality of switch linecards comprises a switch processor (SP).</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The method of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein the local interface of the second switch linecard is a switch virtual interface (SVI).</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The method of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein forwarding the packet comprises unicast forwarding.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. A computer program product for configuring switch linecards in a network switch system, the network switch system comprising a plurality of switch linecards disposed in a chassis and functioning as independent Layer 2 (L2) switches, wherein each of the switch linecards maintains control, forwarding, and interface management functions locally, wherein a first group of switch linecards within the plurality of switch linecards are configured with a first operating system version, and wherein a second group of switch linecards within the plurality of switch linecards are configured with a second operating system version, distinct from the first operating system version, comprising:
<claim-text>computer code that provides an interface for configuring switch linecards in the network switch system;</claim-text>
<claim-text>computer code that receives, via the interface, a configuration operation specifying the first group of switch linecards;</claim-text>
<claim-text>computer code that configures the first group of switch linecards as a single entity, irrespective of the second group of switch linecards within the network switch system; and</claim-text>
<claim-text>a non-transitory computer-readable medium that stores the computer codes.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The computer program product of <claim-ref idref="CLM-00016">claim 16</claim-ref>, further comprising:
<claim-text>computer code that transmits, responsive to receiving the configuration operation, from a controller to each of the plurality of switch linecards, a respective forwarding information base (FIB), wherein each of the plurality of switch linecards is further configured to direct incoming packets, using the respective FIB, to (i) a local interface or (ii) a virtual interface of another switch linecard in the plurality of switch linecards, wherein the virtual interface is an internal local area network (LAN) segment connecting all of the plurality of switch linecards, and wherein the switch linecards in the plurality of switch linecards are configured to interact with one another using the virtual interfaces within the network switch system.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The computer program product of <claim-ref idref="CLM-00017">claim 17</claim-ref>, wherein a first one of the plurality of switch linecards is further configured to:
<claim-text>receive data packets having destination addresses in a first subnet,</claim-text>
<claim-text>determine that no local interface is available at the first switch linecard to transmit the data packets to the first subnet, based on the FIB at the first switch linecard,</claim-text>
<claim-text>modify the data packets based on a media access control (MAC) address of a second one of the plurality of switch linecards, and</claim-text>
<claim-text>transmit the modified data packets to the second switch linecards using a first virtual interface, wherein the second switch linecard is configured to undo the modification to the data packets and to transmit the data packets to the destination address in the first subnet using a local interface at the second switch linecard.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The computer program product of <claim-ref idref="CLM-00017">claim 17</claim-ref>, wherein the controller comprises a route processor (RP) configured to perform routing operations for Layer 3 (L3) traffic for the plurality of switch linecards, wherein each of the plurality of switch linecards comprises a switch processor (SP), and wherein each of the plurality of switch linecards is configured to maintain the respective FIB.</claim-text>
</claim>
</claims>
</us-patent-grant>
