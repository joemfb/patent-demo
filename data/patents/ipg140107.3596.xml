<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08624661-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08624661</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>11962251</doc-number>
<date>20071221</date>
</document-id>
</application-reference>
<us-application-series-code>11</us-application-series-code>
<us-term-of-grant>
<us-term-extension>1117</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>G</subclass>
<main-group>7</main-group>
<subgroup>12</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>327362</main-classification>
</classification-national>
<invention-title id="d2e53">Method and circuit for curvature correction in bandgap references with asymmetric curvature</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5231360</doc-number>
<kind>A</kind>
<name>Storey</name>
<date>19930700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>330 86</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>5448158</doc-number>
<kind>A</kind>
<name>Ryat</name>
<date>19950900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>5481180</doc-number>
<kind>A</kind>
<name>Ryat</name>
<date>19960100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>5936392</doc-number>
<kind>A</kind>
<name>Taylor</name>
<date>19990800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>6958643</doc-number>
<kind>B2</kind>
<name>Rosenthal</name>
<date>20051000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>327540</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>7038447</doc-number>
<kind>B2</kind>
<name>Motz</name>
<date>20060500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>324249</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>7199646</doc-number>
<kind>B1</kind>
<name>Zupcau et al.</name>
<date>20070400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>327539</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>7331708</doc-number>
<kind>B2</kind>
<name>Blom et al.</name>
<date>20080200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>374171</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>WO</country>
<doc-number>2005033820</doc-number>
<kind>A1</kind>
<date>20050400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>13</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>327362</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>327378</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>327512</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>327513</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>327538</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>327539</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>327541</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>327543</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>323313</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>323315</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>7</number-of-drawing-sheets>
<number-of-figures>10</number-of-figures>
</figures>
<us-related-documents>
<us-provisional-application>
<document-id>
<country>US</country>
<doc-number>60871699</doc-number>
<date>20061222</date>
</document-id>
</us-provisional-application>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20080164938</doc-number>
<kind>A1</kind>
<date>20080710</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Oberhuber</last-name>
<first-name>Ralph</first-name>
<address>
<city>Plano</city>
<state>TX</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Brouse</last-name>
<first-name>Keith</first-name>
<address>
<city>Murphy</city>
<state>TX</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Oberhuber</last-name>
<first-name>Ralph</first-name>
<address>
<city>Plano</city>
<state>TX</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Brouse</last-name>
<first-name>Keith</first-name>
<address>
<city>Murphy</city>
<state>TX</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<last-name>Cooper</last-name>
<first-name>Alan A. R.</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
<agent sequence="02" rep-type="attorney">
<addressbook>
<last-name>Brady, III</last-name>
<first-name>W. James</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
<agent sequence="03" rep-type="attorney">
<addressbook>
<last-name>Telecky, Jr.</last-name>
<first-name>Frederick J.</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Texas Instruments Incorporated</orgname>
<role>02</role>
<address>
<city>Dallas</city>
<state>TX</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Donovan</last-name>
<first-name>Lincoln</first-name>
<department>2816</department>
</primary-examiner>
<assistant-examiner>
<last-name>Chen</last-name>
<first-name>Sibin</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A non-linear correction current ICTAT<b>2</b> (current complementary to the square of absolute temperature) is generated from a current IPTAT (current proportional to absolute temperature) and a current ICTAT (current complementary to absolute temperature), both modified in a circuit having a topology and components which capitalize on the logarithmic relationship between transistor collector current and base-emitter voltage. The resulting ICTAT<b>2</b> current (current complementary to the square of absolute temperature) is injected into a node of a bandgap reference circuit to compensate for non-linear temperature effects on output voltage. A more general correction circuit generates both IPTAT<b>2</b> and ICTAT<b>2</b>, and applies each to a respective multiplier which, in a preferred embodiment, is a current DAC configured as a multiplier. Control inputs CTL<b>1</b> and CTL<b>2</b> to respective multipliers set the amplitudes of the modified IPTAT<b>2</b> and ICTAT<b>2</b> output currents, which are then summed to generate the compensating current Icomp which is injected to the appropriate node in the bandgap reference circuit as described above. By adjusting the relative amplitudes of the IPTAT<b>2</b> and ICTAT<b>2</b> currents, a wide range of compensating current versus voltage curves is produced, allowing the optimization of a wide range of bandgap reference circuits. An optimal value for CTL<b>1</b> is determined by holding CTL<b>2</b> constant, then measuring curvature at a plurality of CTL<b>1</b> values. That CTL<b>1</b> value closest to the interpolated value at which curvature is minimized is then used.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="139.87mm" wi="167.39mm" file="US08624661-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="226.99mm" wi="169.16mm" file="US08624661-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="236.39mm" wi="154.09mm" file="US08624661-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="233.93mm" wi="153.75mm" file="US08624661-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="148.51mm" wi="166.37mm" file="US08624661-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="143.68mm" wi="164.00mm" file="US08624661-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="212.17mm" wi="125.56mm" file="US08624661-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="213.36mm" wi="126.07mm" file="US08624661-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0002" num="0001">1. Field of the Invention</p>
<p id="p-0003" num="0002">This invention relates generally to temperature compensation of bandgap voltage references, and more specifically to correction of non-linear output voltage versus temperature errors by generating and applying a correction signal or a superposition of a plurality of correction signals having a second or higher order relationship to temperature, proportional to absolute temperature (PTAT) or complementary to absolute temperature (CTAT).</p>
<p id="p-0004" num="0003">2. Description of the Related Art</p>
<p id="p-0005" num="0004">Bandgap references such as that using a Brokaw architecture typically generate an output voltage which is the sum of 1) the voltage drop across a semiconductor junction, having a temperature coefficient complementary to absolute temperature (CTAT), and 2) a voltage having a temperature coefficient proportional to absolute temperature (PTAT); wherein the temperature coefficients of the CTAT and PTAT voltages have approximately the same magnitude but opposite sign. The resulting output voltage is thus relatively stable over a wide range of temperature, since the positive and negative temperature coefficients of the summed voltages cancel. There remains, however, a residual temperature effect on voltage which, in theory, introduces an increasingly negative error as temperature varies either above or below the nominal operating temperature (Tn). Theory predicts second and higher order effects, but terms higher than second order are quite small. The theoretical equation has a T*ln(T) term, and the second order correction compensates for the parabolic term of the Taylor expansion of this T*ln(T) dependency. The resulting voltage versus temperature curve appears to have primarily a parabolic curvature.</p>
<p id="p-0006" num="0005">Correction circuits have been developed which typically generate a current proportional to the square of temperature, which, when injected at an appropriate node in the bandgap reference circuit, acts to decrease the output voltage error. The current typically generated is PTAT<sup>2 </sup>(IPTAT<b>2</b>) which increases as the square of temperature. This current is injected into a node of the bandgap reference circuit, generating a correction voltage. When the resulting correction voltage is added to the parabolic uncompensated output voltage, the parabolic curve thus becomes more S-shaped, reducing the output voltage error over a given temperature span.</p>
<p id="p-0007" num="0006">In some actual integrated bandgap reference circuits, however, the uncompensated voltage versus temperature relationship is not the parabolic curve predicted by theory. Differences in processes, structures, and other variables lead, in many cases, to a voltage having little error above a nominal temperature, but pronounced curvature (voltage error increasing as the square of change in temperature) as temperature decreases from nominal. Applying known compensation to such circuits has a smaller than desired effect on error below Tn, and may increase rather than reduce the error above Tn.</p>
<p id="p-0008" num="0007">A circuit which will correct the output voltage of a bandgap reference circuit over a wide temperature range is therefore desirable, providing correction in the temperature region or regions needing such correction, in whichever direction is required, and without introducing additional error in a temperature region not needing correction.</p>
<heading id="h-0002" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0009" num="0008">The invention provides a method and apparatus for generating a correction current in a bandgap reference circuit, wherein the correction current is, in one embodiment, small at some nominal temperature Tn, increasing in a non-linear or 1/T manner as temperature decreases below Tn. This correction current is generated in a circuit having a known architecture which has as inputs both a PTAT current and a CTAT current. Whereas in the prior art such currents in this architecture result in a current PTAT<sup>2 </sup>(which will also be referred to herein as IPTAT<b>2</b>), in the embodiment to be described, a CTAT correction current (ICTAT<b>2</b>) is generated by reversing the PTAT and CTAT inputs to the same circuit topology. The resulting correction current is injected to a node in the bandgap reference circuit which converts the current into a corresponding voltage correction. This correction current has little effect on output voltage above a nominal temperature, while providing increasing correction as temperature decreases from nominal.</p>
<p id="p-0010" num="0009">Another embodiment generates both a IPTAT<b>2</b> current, increasing as a square or higher order function of increasing temperature, and a ICTAT<b>2</b> current, increasing as a square or higher order function of decreasing temperature. Control signals are applied to two multipliers, one having IPTAT<b>2</b> as an input, the other having ICTAT<b>2</b> as an input. The outputs of these multipliers are summed, and the resulting current is applied to an appropriate node in the bandgap reference circuit to effect the desired correction of output voltage. By modifying the control signal to each multiplier and thereby adjusting the gain of each multiplier, the relative amounts of ICTAT<b>2</b> and IPTAT<b>2</b> currents are adjusted to optimize correction.</p>
<p id="p-0011" num="0010">As further described below, the disclosed embodiments provide a combination of desirable properties not available in the known art. Further benefits and advantages will become apparent to those skilled in the art to which the invention relates.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">DESCRIPTION OF THE VIEWS OF THE DRAWINGS</heading>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 1</figref> (prior art) is a block diagram of a typical Brokaw bandgap reference</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 2</figref> is a graph showing the theoretical and actual uncompensated output voltages of a bandgap reference circuit.</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 3</figref> is a block diagram of a circuit which generates IPTAT<b>2</b> and one which generates ICTAT<b>2</b>, and graphs of the respective voltage versus temperature compensation each provides.</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 4</figref> is a block diagram of a correction circuit generating both IPTAT<b>2</b> and ICTAT<b>2</b> currents, controlling the relative amplitudes of each, and summing the resulting currents, so as to provide an adjustable, generalized correction.</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 5</figref> is a graph of the curvature (output voltage change over temperature) for a plurality of values of CTL<b>1</b> of the circuit described in <figref idref="DRAWINGS">FIG. 4</figref>, showing an optimal value of CTL<b>1</b> which minimizes curvature.</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 6</figref> is a flow chart describing a method for determining that optimal value of CTL<b>1</b> in the circuit of <figref idref="DRAWINGS">FIG. 4</figref>.</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 7</figref> is a flow chart describing another method for determining that optimal value of CTL<b>1</b> in the circuit of <figref idref="DRAWINGS">FIG. 4</figref>.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<p id="p-0019" num="0018">Throughout the drawings, like elements are referred to by like numerals.</p>
<heading id="h-0004" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0020" num="0019">In <figref idref="DRAWINGS">FIG. 1</figref> (prior art), the output of amplifier <b>110</b> is coupled to a first terminal of resistors <b>102</b> and <b>104</b> and to output terminal <b>118</b>. The second terminal of resistor <b>102</b> is coupled to the non-inverting input of amplifier <b>110</b> and to the collector and base of transistor <b>106</b>. The second terminal of resistor <b>104</b> is coupled to the inverting input of amplifier <b>110</b> and to a first terminal of resistor <b>112</b>. The second terminal of resistor <b>112</b> is coupled to the collector and base of transistor <b>108</b>. The emitters of both transistor <b>106</b> and transistor <b>108</b> are coupled together, and are coupled to the first terminal of resistor <b>114</b>, terminal <b>120</b>, and current source <b>116</b>. The second terminal of <b>114</b> is coupled to ground.</p>
<p id="p-0021" num="0020">In operation, because resistor <b>102</b> and resistor <b>104</b> are substantially equal, when equal currents flow through both resistors the voltage drops across them are substantially equal. Since the currents flowing into the inputs of amplifier <b>110</b> are typically negligible, the current in transistor <b>106</b> is substantially equal to the current in transistor <b>108</b>. The junction area of transistor <b>108</b> is larger than the junction area of transistor <b>106</b>. Because of this difference in current density in these transistors, when substantially equal currents flow through them, the voltage drop across the base-emitter junction of the larger junction in transistor <b>108</b> is less than the voltage drop across the base-emitter junction of transistor <b>106</b>. As described in the literature, the theoretical difference in voltage drop is deltaVbe=(kT/q)ln(J<b>1</b>/J<b>2</b>), where J<b>1</b> and J<b>2</b> are the current densities of transistor <b>106</b> and transistor <b>108</b> respectively. This deltaVbe is proportional to absolute temperature, commonly referred to as PTAT. With equal currents in both transistors and with the inputs to amplifier <b>110</b> substantially equal, the voltage deltaVbe, with PTAT characteristic, appears across resistor <b>112</b>. The current flowing through resistor <b>112</b> thus also has a PTAT characteristic, but with a temperature coefficient significantly less than the negative temperature coefficient of the voltage drop across the base emitter junction of transistor <b>108</b>. Since negligible current flows into the inputs of amplifier <b>110</b>, the PTAT current through resistor <b>112</b> is substantially the same as the current through resistor <b>104</b>. By selecting the value of resistor <b>104</b>, the PTAT temperature coefficient of the voltage drop across the series combination of resistor <b>112</b> and resistor <b>104</b> is made substantially the same as the CTAT temperature coefficient of the base emitter junction of transistor <b>108</b>. The output of amplifier <b>110</b> is thus a reference voltage of approximately 1.2 volts, which is substantially constant over a wide temperature range.</p>
<p id="p-0022" num="0021">In <figref idref="DRAWINGS">FIG. 2</figref>, the predominant second order temperature versus voltage characteristic of a theoretical bandgap reference circuit of <figref idref="DRAWINGS">FIG. 1</figref> is shown by curve <b>202</b> (higher order temperature effects on voltage are assumed small and therefore are ignored in this case). The temperature versus voltage characteristic of a representative actual bandgap reference circuit is shown by curve <b>204</b>. Prior art compensation circuits typically generate a current IPTAT<b>2</b>, which increases with the square of temperature. While this IPTAT<b>2</b> compensation is appropriate given a bandgap reference having the characteristic of curve <b>202</b>, it is inappropriate for that bandgap reference circuit having the characteristic of curve <b>204</b>. It is desirable to compensate the actual curve <b>204</b> with a voltage which increases in a non-linear manner as temperature decreases rather than increases.</p>
<p id="p-0023" num="0022">In <figref idref="DRAWINGS">FIG. 3A</figref>, a known circuit for generating current IPTAT<b>2</b> is shown. The topology described in <figref idref="DRAWINGS">FIG. 3</figref> utilizes bipolar transistors having a control terminal which is a base, a first current terminal which is an emitter, and a second current terminal which is a collector. Transistor <b>302</b> has its emitter coupled to ground, its collector coupled to its base, to the base of transistor <b>304</b>, and to the emitter of transistor <b>306</b>. The base of transistor <b>306</b> is coupled to the collector of transistor <b>306</b>, to the second terminal of current source <b>312</b> and to the base of transistor <b>308</b>. The first terminal of current source <b>312</b> is coupled to the collector of transistor <b>308</b> and the supply voltage. The emitter of transistor <b>308</b> is coupled to the collector of transistor <b>304</b>, the first terminal of current source <b>314</b>, and the base of transistor <b>310</b>. The second terminal of current source <b>314</b> is coupled to ground, as are the emitters of transistor <b>304</b> and transistor <b>310</b>. The collector of transistor <b>310</b> is coupled to output terminal <b>316</b>.</p>
<p id="p-0024" num="0023">In operation, the topology of the circuit of <figref idref="DRAWINGS">FIG. 3A</figref>, when current IPTAT and current ICTAT are coupled as shown, results in a current IPTAT<b>2</b> at output terminal <b>316</b> which is proportional to the square of temperature and increases with increasing absolute temperature as shown in graph <b>320</b> of <figref idref="DRAWINGS">FIG. 3B</figref>. The operation of the circuit of <figref idref="DRAWINGS">FIG. 3A</figref> is known and described in the literature. In this circuit, a PTAT current and a first-order temperature-stable current is used in a base-emitter loop to produce the desired IPTAT<b>2</b> current. Summing a CTAT and a PTAT current generates the temperature-independent current. The intrinsic voltage loop is composed of transistors <b>302</b>, <b>306</b>, <b>310</b>, <b>308</b>. The resulting output current is derived by summing the voltages in the loop (applying Kirchhoffs Voltage Law) as shown in the following equation:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>V</i><sub>BE</sub>(302)&#x2212;<i>V</i><sub>BE</sub>(306)=<i>V</i><sub>BE</sub>(310)&#x2212;<i>V</i><sub>BE</sub>(308).<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
In the following, the definitions I<sub>C</sub>(<b>310</b>)=I<sub>OUT </sub>and I<sub>C</sub>(<b>306</b>)=I<sub>C</sub>(<b>302</b>)=I<sub>C</sub>(<b>304</b>)=I<sub>PTAT </sub>as well as I<sub>C</sub>(<b>308</b>)=I<sub>PTAT</sub>+I<sub>CTAT </sub>will be used, and&#x2014;to simplify calculations&#x2014;it is assumed that transistors <b>302</b>, <b>304</b>, <b>306</b>, <b>308</b> and <b>310</b> have the same emitter area A.
<br/>
Then, substituting equation
</p>
<p id="p-0025" num="0024">
<maths id="MATH-US-00001" num="00001">
<math overflow="scroll">
<mrow>
  <msub>
    <mi>V</mi>
    <mi>BE</mi>
  </msub>
  <mo>=</mo>
  <mrow>
    <msub>
      <mi>V</mi>
      <mi>T</mi>
    </msub>
    <mo>&#x2062;</mo>
    <mrow>
      <mi>ln</mi>
      <mo>&#x2061;</mo>
      <mrow>
        <mo>(</mo>
        <mfrac>
          <msub>
            <mi>I</mi>
            <mi>C</mi>
          </msub>
          <mrow>
            <msub>
              <mi>I</mi>
              <mi>S</mi>
            </msub>
            <mo>&#xb7;</mo>
            <mi>A</mi>
          </mrow>
        </mfrac>
        <mo>)</mo>
      </mrow>
    </mrow>
  </mrow>
</mrow>
</math>
</maths>
<br/>
for each base-emitter voltage, where V<sub>T</sub>, A, and I<sub>S </sub>are constants, yields
</p>
<p id="p-0026" num="0025">
<maths id="MATH-US-00002" num="00002">
<math overflow="scroll">
  <mrow>
    <mrow>
      <mi>ln</mi>
      <mo>&#x2061;</mo>
      <mrow>
        <mo>[</mo>
        <mfrac>
          <mrow>
            <msub>
              <mi>I</mi>
              <mi>out</mi>
            </msub>
            <mo>&#xb7;</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>IPTAT</mi>
                <mo>+</mo>
                <mi>ICTAT</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mrow>
            <mi>IPTAT</mi>
            <mo>+</mo>
            <mi>IPTAT</mi>
          </mrow>
        </mfrac>
        <mo>]</mo>
      </mrow>
    </mrow>
    <mo>=</mo>
    <mn>0</mn>
  </mrow>
</math>
</maths>
<maths id="MATH-US-00002-2" num="00002.2">
<math overflow="scroll">
  <mrow>
    <mi>o</mi>
    <mo>&#x2062;</mo>
    <mi>r</mi>
  </mrow>
</math>
</maths>
<maths id="MATH-US-00002-3" num="00002.3">
<math overflow="scroll">
  <mrow>
    <msub>
      <mi>I</mi>
      <mi>OUT</mi>
    </msub>
    <mo>=</mo>
    <mrow>
      <mfrac>
        <msup>
          <mi>IPTAT</mi>
          <mn>2</mn>
        </msup>
        <mrow>
          <mo>(</mo>
          <mrow>
            <mi>IPTAT</mi>
            <mo>+</mo>
            <mi>ICTAT</mi>
          </mrow>
          <mo>)</mo>
        </mrow>
      </mfrac>
      <mo>&#x2248;</mo>
      <mfrac>
        <msup>
          <mi>IPTAT</mi>
          <mn>2</mn>
        </msup>
        <mi>K</mi>
      </mfrac>
      <mo>&#x2261;</mo>
      <mrow>
        <mi>IPTAT</mi>
        <mo>&#x2062;</mo>
        <mstyle>
          <mspace width="0.3em" height="0.3ex"/>
        </mstyle>
        <mo>&#x2062;</mo>
        <mn>2</mn>
      </mrow>
    </mrow>
  </mrow>
</math>
</maths>
<br/>
where K is substantially constant. Another embodiment of the prior art circuit uses MOSFET transistors for transistors <b>306</b> and <b>308</b>. The MOS devices, however, must operate in the subthreshold (weak inversion) region. This requirement arises because the drain current is exponentially dependent on the gate-source voltage only in subthreshold, which is the characteristic exploited by the circuit topology. In this case,
</p>
<p id="p-0027" num="0026">
<maths id="MATH-US-00003" num="00003">
<math overflow="scroll">
<mrow>
  <msub>
    <mi>V</mi>
    <mi>GS</mi>
  </msub>
  <mo>=</mo>
  <mrow>
    <msub>
      <mi>V</mi>
      <mi>T</mi>
    </msub>
    <mo>&#x2062;</mo>
    <mrow>
      <mi>ln</mi>
      <mo>&#x2061;</mo>
      <mrow>
        <mo>(</mo>
        <mfrac>
          <msub>
            <mi>I</mi>
            <mi>DS</mi>
          </msub>
          <mrow>
            <mi>c</mi>
            <mo>&#xb7;</mo>
            <mrow>
              <mi>W</mi>
              <mo>/</mo>
              <mi>L</mi>
            </mrow>
          </mrow>
        </mfrac>
        <mo>)</mo>
      </mrow>
    </mrow>
  </mrow>
</mrow>
</math>
</maths>
<br/>
holds&#x2014;where V<sub>T </sub>and c are constant and W/L is the aspect ration of the MOS device&#x2014;and the calculation can be carried out in a similar manner as shown above.
</p>
<p id="p-0028" num="0027">In <figref idref="DRAWINGS">FIG. 3C</figref>, the circuit of <figref idref="DRAWINGS">FIG. 3A</figref> is shown, however the ICTAT and IPTAT generators are interchanged. Therefore, in the topology of <figref idref="DRAWINGS">FIG. 3C</figref>, the first terminal of current source <b>314</b> is coupled to the supply voltage, while the second terminal of current source <b>314</b> is coupled to the node comprising the base and collector of transistor <b>306</b>, and the base of transistor <b>308</b>. The first terminal of current source <b>312</b> is coupled to the node comprising the emitter of transistor <b>308</b>, the collector of transistor <b>304</b>, and the base of transistor <b>310</b>. The second terminal of current source <b>312</b> is coupled to ground.</p>
<p id="p-0029" num="0028">In operation, the interchange of IPTAT current source <b>312</b> and ICTAT current source <b>314</b> causes the creation of a current ICTAT<b>2</b> which is complementary to the square of temperature, thereby increasing with decreasing absolute temperature as shown in graph <b>322</b> of <figref idref="DRAWINGS">FIG. 3D</figref>. This current ICTAT<b>2</b> is coupled to output terminal <b>316</b>. In this circuit, a PTAT current and a first-order temperature-stable current is used in a base-emitter loop to produce the desired ICTAT<b>2</b> current. Summing a CTAT and a PTAT current generates the temperature-independent current. The intrinsic voltage loop is composed of transistors <b>302</b>, <b>306</b>, <b>310</b>, <b>308</b>. The resulting output current is derived by summing the voltages in the loop (applying Kirchhoffs Voltage Law) as shown in the following equation:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>V</i><sub>BE</sub>(302)&#x2212;<i>V</i><sub>BE</sub>(306)=<i>V</i><sub>BE</sub>(310)&#x2212;<i>V</i><sub>BE</sub>(308).<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
In the following, the definitions I<sub>C</sub>(<b>310</b>)=I<sub>OUT </sub>and I<sub>C</sub>(<b>306</b>)=I<sub>C</sub>(<b>302</b>)=I<sub>C</sub>(<b>304</b>)=I<sub>CTAT </sub>as well as I<sub>C</sub>(<b>308</b>)=I<sub>PTAT</sub>+I<sub>CTAT </sub>will be used, and&#x2014;to simplify calculations&#x2014;it is assumed that transistors <b>302</b>, <b>304</b>, <b>306</b>, <b>308</b> and <b>310</b> have the same emitter area A.
<br/>
Then, substituting equation
</p>
<p id="p-0030" num="0029">
<maths id="MATH-US-00004" num="00004">
<math overflow="scroll">
<mrow>
  <msub>
    <mi>V</mi>
    <mi>BE</mi>
  </msub>
  <mo>=</mo>
  <mrow>
    <msub>
      <mi>V</mi>
      <mi>T</mi>
    </msub>
    <mo>&#x2062;</mo>
    <mrow>
      <mi>ln</mi>
      <mo>&#x2061;</mo>
      <mrow>
        <mo>(</mo>
        <mfrac>
          <msub>
            <mi>I</mi>
            <mi>C</mi>
          </msub>
          <mrow>
            <msub>
              <mi>I</mi>
              <mi>S</mi>
            </msub>
            <mo>&#xb7;</mo>
            <mi>A</mi>
          </mrow>
        </mfrac>
        <mo>)</mo>
      </mrow>
    </mrow>
  </mrow>
</mrow>
</math>
</maths>
<br/>
for each base-emitter voltage, where V<sub>T</sub>, A, and I<sub>S </sub>are constants, yields
</p>
<p id="p-0031" num="0030">
<maths id="MATH-US-00005" num="00005">
<math overflow="scroll">
  <mrow>
    <mrow>
      <mi>ln</mi>
      <mo>&#x2061;</mo>
      <mrow>
        <mo>[</mo>
        <mfrac>
          <mrow>
            <msub>
              <mi>I</mi>
              <mi>out</mi>
            </msub>
            <mo>&#xb7;</mo>
            <mrow>
              <mo>(</mo>
              <mrow>
                <mi>ICTAT</mi>
                <mo>+</mo>
                <mi>IPTAT</mi>
              </mrow>
              <mo>)</mo>
            </mrow>
          </mrow>
          <mrow>
            <mi>ICTAT</mi>
            <mo>&#xb7;</mo>
            <mi>ICTAT</mi>
          </mrow>
        </mfrac>
        <mo>]</mo>
      </mrow>
    </mrow>
    <mo>=</mo>
    <mn>0</mn>
  </mrow>
</math>
</maths>
<maths id="MATH-US-00005-2" num="00005.2">
<math overflow="scroll">
  <mrow>
    <mi>o</mi>
    <mo>&#x2062;</mo>
    <mi>r</mi>
  </mrow>
</math>
</maths>
<maths id="MATH-US-00005-3" num="00005.3">
<math overflow="scroll">
  <mrow>
    <msub>
      <mi>I</mi>
      <mi>OUT</mi>
    </msub>
    <mo>=</mo>
    <mrow>
      <mfrac>
        <msup>
          <mi>ICTAT</mi>
          <mn>2</mn>
        </msup>
        <mrow>
          <mo>(</mo>
          <mrow>
            <mi>ICTAT</mi>
            <mo>+</mo>
            <mi>IPTAT</mi>
          </mrow>
          <mo>)</mo>
        </mrow>
      </mfrac>
      <mo>&#x2248;</mo>
      <mfrac>
        <msup>
          <mi>ICTAT</mi>
          <mn>2</mn>
        </msup>
        <mi>K</mi>
      </mfrac>
      <mo>&#x2261;</mo>
      <mrow>
        <mi>ICTAT</mi>
        <mo>&#x2062;</mo>
        <mstyle>
          <mspace width="0.3em" height="0.3ex"/>
        </mstyle>
        <mo>&#x2062;</mo>
        <mn>2</mn>
      </mrow>
    </mrow>
  </mrow>
</math>
</maths>
<br/>
where K is substantially constant. Another embodiment of the invention uses MOSFET transistors for transistors <b>306</b> and <b>308</b>. The MOS devices, however, must operate in the subthreshold (weak inversion) region. This requirement arises because the drain current is exponentially dependent on the gate-source voltage only in subthreshold, which is the characteristic exploited by the circuit topology. In this case,
</p>
<p id="p-0032" num="0031">
<maths id="MATH-US-00006" num="00006">
<math overflow="scroll">
<mrow>
  <msub>
    <mi>V</mi>
    <mi>GS</mi>
  </msub>
  <mo>=</mo>
  <mrow>
    <msub>
      <mi>V</mi>
      <mi>T</mi>
    </msub>
    <mo>&#x2062;</mo>
    <mrow>
      <mi>ln</mi>
      <mo>&#x2061;</mo>
      <mrow>
        <mo>(</mo>
        <mfrac>
          <msub>
            <mi>I</mi>
            <mi>DS</mi>
          </msub>
          <mrow>
            <mi>c</mi>
            <mo>&#xb7;</mo>
            <mrow>
              <mi>W</mi>
              <mo>/</mo>
              <mi>L</mi>
            </mrow>
          </mrow>
        </mfrac>
        <mo>)</mo>
      </mrow>
    </mrow>
  </mrow>
</mrow>
</math>
</maths>
<br/>
holds&#x2014;where V<sub>T </sub>and c are constant and W/L is the aspect ration of the MOS device&#x2014;and the calculation can be carried out in a similar manner as shown above.
</p>
<p id="p-0033" num="0032">In <figref idref="DRAWINGS">FIG. 4</figref>, another embodiment of the invention generates a plurality of currents having differing temperature coefficients, the amplitude each of which is controlled, which are then added together. A current generator IPTAT<b>2</b> <b>324</b> has its output coupled to reference input REF_IN <b>406</b> of a first current digital to analog converter (DAC) <b>402</b>. A digital control signal CTL<b>1</b> <b>404</b> is coupled to the data input DATA_IN of said first current DAC <b>402</b>. Because the output of a typical current DAC is the reference current multiplied by the digital input, the current DAC in this embodiment acts as a multiplier of the analog IPTAT<b>2</b> input current and the CTL<b>1</b> digital control signal to generate a modified current IPTAT<b>2</b>M. A current generator ICTAT<b>2</b> <b>326</b> has its output coupled to reference input REF_IN <b>414</b> of a next current DAC <b>410</b>. A digital control signal CTL<b>2</b> <b>412</b> is coupled to the data input DATA_IN of said next current DAC <b>410</b>. The said next current DAC acts as a multiplier of the analog ICTAT<b>2</b> input current and the CTL<b>2</b> digital control signal to generate a modified current ICTAT<b>2</b>M. Output <b>408</b> of current DAC <b>402</b> and output <b>416</b> of current DAC <b>410</b> are coupled to first and next inputs of summing node <b>418</b>. The output of summing node <b>418</b> is coupled to compensation injection node <b>120</b> of bandgap reference circuit <b>122</b>.</p>
<p id="p-0034" num="0033">In operation, a digital signal proportional to the desired positive or negative modified amplitude of IPTAT<b>2</b> is input to the control input CTL<b>1</b> of first current DAC <b>402</b>, while the unmodified signal IPTAT<b>2</b> is input to the reference input of current DAC <b>402</b>. The resulting current IPTAT<b>2</b>M output from current DAC <b>402</b> is thus the reference current IPTAT<b>2</b> multiplied by the CTL<b>1</b> value.</p>
<p id="p-0035" num="0034">In a similar fashion, a digital signal proportional to the desired positive or negative modified amplitude of ICTAT<b>2</b> is input to the control input CTL<b>2</b> of next current DAC <b>410</b>, while the unmodified signal ICTAT<b>2</b> is input to the reference input of current DAC <b>410</b>. The resulting current ICTAT<b>2</b>M output from current DAC <b>410</b> is thus the reference current ICTAT<b>2</b> multiplied by the CTL<b>2</b> value. The outputs of current DAC <b>402</b> and current DAC <b>410</b> are then summed in summing node <b>418</b>, which output is thus the superposition of the plurality of currents generated as described above. By adjusting the control inputs, the superposition of currents from the plurality of current DACs thus can generate a plurality of compensating current versus temperature curves. Those skilled in the art will recognize that other embodiments might use differing circuits to multiply the current by a control signal, with substantially equivalent results.</p>
<p id="p-0036" num="0035">Determination of optimal values for CTL<b>1</b> and CTL<b>2</b> may be done, manually or in an automated manner, using a novel method described below. As described in the detail of operation for the circuits of <figref idref="DRAWINGS">FIG. 3</figref>, the IPTAT<b>2</b> compensation current is proportional to the square of increasing temperature, and as such its compensating influence is primarily in the region above a nominal temperature. The ICTAT<b>2</b> compensation current, on the other hand, is proportional to the square of decreasing temperature, and as such its compensating influence is primarily in the region below a nominal temperature. While there is some interdependence of effect of IPTAT<b>2</b> and ICTAT<b>2</b> in the temperature region around nominal temperature, this interdependence shrinks at temperatures well above or well below nominal. It is therefore possible to vary CTL<b>1</b> (affecting IPTAT<b>2</b>) while measuring its effect on curvature in a region above nominal temperature, and determine what value of CTL<b>1</b> minimizes curvature in that region. Likewise, CTL<b>2</b> may be varied and its effect in curvature in a temperature region below nominal may be measured, to determine an optimal value for CTL<b>2</b> which minimizes curvature in this second region. Additional iterations of this process may be done to further minimize any effects of interdependence between IPTAT<b>2</b> and ICTAT<b>2</b> compensation.</p>
<p id="p-0037" num="0036">As shown in <figref idref="DRAWINGS">FIG. 5</figref>, the curvature of output voltage versus temperature at a plurality of CTL<b>1</b> values may be measured and plotted, to determine that optimal value of CTL<b>1</b> where the curvature is zero. In <figref idref="DRAWINGS">FIG. 5</figref>, curvature, expressed in ppm/degree C. change in the compensated output voltage versus temperature, is plotted against decimal values for CTL<b>1</b> of (for example) 0, 1, 2, 4, 8, 16, 32, and 48. By interpolating the resulting set of data points of curvature versus CTL<b>1</b>, the decimal value for CTL<b>1</b> at curvature nearest zero may be determined. The optimal binary value of CTL<b>1</b> is then that binary value closest to the interpolated decimal value.</p>
<p id="p-0038" num="0037">It will be apparent to those skilled in the art that, for some circuits, a suitably accurate optimal CTL<b>1</b> may be computed from a small subset of data points, in some cases as few as two. For example, with CTL<b>1</b> equal to 16 and 48 in the example of <figref idref="DRAWINGS">FIG. 5</figref>, a linear interpolation between these two data points crosses the zero curvature axis at approximately CTL<b>1</b>=27. In other applications, other values for CTL<b>1</b>, represented by one or more bits, may be effectively utilized in determining the nearest CTL<b>1</b> value for zero curvature.</p>
<p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. 6</figref> shows a flow chart for creating a set of curvature C versus CTL<b>1</b> values when CTL<b>1</b> is a binary number. At step <b>602</b>, CTL<b>2</b> is set to a value, for example zero, which will remain constant for the rest of the process. At step <b>604</b>, a counter value N, representing the bit number of binary number CTL<b>1</b>, is set to a starting value of 1. This bit <b>1</b> represents the least significant bit (LSB) of CTL<b>1</b>. At step <b>606</b>, bit N is set to &#x201c;1&#x201d;. In the first iteration of the process, N=1 so bit <b>1</b> is the LSB. At step <b>608</b>, the output voltage V(N,T) of the compensated circuit, with CTL<b>1</b> compensation having bit N at &#x201c;1&#x201d;, is measured at a plurality of temperatures, and the curvature C(N) of the V versus T function for a CTL<b>1</b> value having bit N at &#x201c;1&#x201d; is computed and stored. At step <b>610</b>, N is compared with a value MAX to determine if all bits of the binary value CTL<b>1</b> have been set to &#x201c;1&#x201d;, indicating no further iteration is needed. The number MAX is the number of bits in CTL<b>1</b>. If N is not greater than MAX, at step <b>612</b> N is incremented by 1, then the process reverts to step <b>606</b>. If N is greater than MAX, indicating all bits of CTL<b>1</b> have been set to &#x201c;1&#x201d; in sequence, the process continues with step <b>614</b>, where, by interpolation, the decimal value for CTL<b>1</b> nearest that value at which C(N) is zero is determined. This decimal value of CTL<b>1</b> is therefore that optimal value for CTL<b>1</b> to minimize curvature C. At step <b>616</b>, this decimal value for the optimal CTL<b>1</b> is converted to binary and applied to the control inputs CTL<b>1</b>.</p>
<p id="p-0040" num="0039">Those skilled in the art will recognize the efficiency of the process described above, in that the number of iterations used to generate the optimal CTL<b>1</b> value is only the number of bits MAX. It will also be recognized that once an optimal CTL<b>1</b> value is determined, a substantially identical process may be used to determine the optimal CTL<b>2</b> value, by holding CTL<b>1</b> constant while varying the value of CTL<b>2</b> bit by bit as described above. Those skilled in the art will also recognize that the value at which CTL<b>2</b> is held while CTL<b>1</b> is varied does not need to be zero, but may rather be some other value, for example a value determined by statistical measurement of a plurality of circuits to be an average optimal value for the plurality of circuits. It is also clear that not every bit of CTL<b>1</b> or CTL<b>2</b> must be exercised (set to &#x201c;1&#x201d;), as long as those values chosen for CTL<b>1</b> or CTL<b>2</b> generate data points both above and below the zero curvature axis. Also, it is apparent that two or more temperatures may be used in determining C(N), and that computations may be carried out by special purpose or general purpose computers.</p>
<p id="p-0041" num="0040">It will also be understood that there may be some interaction between CTL<b>1</b> and CTL<b>2</b>; that is, the optimal value for CTL<b>1</b> with CTL<b>2</b>=<b>0</b> may not be the same optimal value of CTL<b>1</b> with CTL<b>2</b> at a non-zero value, such as its value after optimization. In this case, a next iteration of CTL<b>1</b> may be desirable while holding CTL<b>2</b> at its optimal value, followed if desired by a next iteration of CTL<b>2</b> with the value of CTL<b>1</b> resulting from its next iteration. In some cases it may be found that an average value of CTL<b>2</b> is acceptable, and that only CTL<b>1</b> need be optimized using the process described (or vice-versa).</p>
<p id="p-0042" num="0041">In <figref idref="DRAWINGS">FIG. 7</figref>, curvature values C(N) are computed and stored for a set of multi-bit values of CTL<b>1</b>. At step <b>702</b>, CTL<b>2</b> is set to a value, for example zero, which will remain constant for the rest of the process. At step <b>704</b>, a counter value N, representing the Nth value of a plurality of binary values for CTL<b>1</b>, is set to a starting value of 1. At step <b>706</b>, CTL<b>1</b> is set to the first stored value CTL<b>1</b>(N). At step <b>708</b>, the output voltage V(N,T) of the compensated circuit, with CTL<b>1</b> compensation having a value CTL<b>1</b>(N), is measured at a plurality of temperatures, and the curvature of the V versus T function at the CTL<b>1</b>(N) value is computed and stored. At step <b>710</b>, N is compared with a value NUM to determine if all of the plurality of N stored binary values for CTL<b>1</b> have been used, indicating no further iteration is needed. The number NUM is the number of stored binary values for CTL<b>1</b>. If N is less than or equal to NUM, another iteration is called for, and N is incremented by 1 at step <b>712</b>, then the process reverts to step <b>706</b>. If N is greater than NUM, indicating all stored values for CTL<b>1</b> have been used, the process continues with step <b>714</b>, where, by interpolation, the decimal value for CTL<b>1</b> nearest that value at which C(N) is zero is determined. This decimal value of CTL<b>1</b> is therefore that optimal value for CTL<b>1</b> to minimize curvature C. At step <b>716</b>, this decimal value for the optimal CTL<b>1</b> is converted to binary and applied to the control inputs CTL<b>1</b>.</p>
<p id="p-0043" num="0042">Those skilled in the art to which the invention relates will appreciate that, while the above methods describe optimizing the CTL<b>1</b> value, an optimal value for CTL<b>2</b> may be similarly determined by interchanging CTL<b>1</b> and CTL<b>2</b> in the methods described above. It is also obvious that in some cases there will be interaction between the CTL<b>1</b> and CTL<b>2</b> values, and therefore additional iterations may be desirable to optimize the combination of CTL<b>1</b> and CTL<b>2</b> for some circuits.</p>
<p id="p-0044" num="0043">It should be understood that the use of Vdd, Vref, ground, etc., are illustrative only, and that implementations using single or dual power supplies and the like are equally possible. Moreover, reference voltages developed either internal to the circuit or external to the circuit will suffice. While field-effect and bipolar transistors have been shown in these embodiments, alternative topologies using field effect and bipolar transistors in differing topologies will provide substantially equivalent operation.</p>
<p id="p-0045" num="0044">Those skilled in the art to which the invention relates will also appreciate that yet other substitutions and modifications can be made to the described embodiments, without departing from the spirit and scope of the invention as described by the claims below. Many alternatives to the circuits and sub circuits described are possible while retaining the scope and spirit of the invention.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-math idrefs="MATH-US-00001" nb-file="US08624661-20140107-M00001.NB">
<img id="EMI-M00001" he="6.35mm" wi="76.20mm" file="US08624661-20140107-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00002 MATH-US-00002-2 MATH-US-00002-3" nb-file="US08624661-20140107-M00002.NB">
<img id="EMI-M00002" he="17.27mm" wi="76.20mm" file="US08624661-20140107-M00002.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00003" nb-file="US08624661-20140107-M00003.NB">
<img id="EMI-M00003" he="6.35mm" wi="76.20mm" file="US08624661-20140107-M00003.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00004" nb-file="US08624661-20140107-M00004.NB">
<img id="EMI-M00004" he="6.35mm" wi="76.20mm" file="US08624661-20140107-M00004.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00005 MATH-US-00005-2 MATH-US-00005-3" nb-file="US08624661-20140107-M00005.NB">
<img id="EMI-M00005" he="17.27mm" wi="76.20mm" file="US08624661-20140107-M00005.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-math idrefs="MATH-US-00006" nb-file="US08624661-20140107-M00006.NB">
<img id="EMI-M00006" he="6.35mm" wi="76.20mm" file="US08624661-20140107-M00006.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. An apparatus for generating an electrical current having a non-linear relationship to temperature, the apparatus comprising:
<claim-text>a first current generator having a first current which is directly proportional to the quadratic of absolute temperature;</claim-text>
<claim-text>a first multiplier that is coupled to the first current generator so as to receive the first current and that receives a first control signal, wherein the amplitude of the first current is modified by the first control signal so as to generate a first modified current;</claim-text>
<claim-text>a second current generator having a second current which is complementary to the quadratic of absolute temperature;</claim-text>
<claim-text>a second multiplier that is coupled to the second current generator so as to receive the second current and that receives a second control signal, wherein the amplitude of the second current is modified by the second control signal so as to generate a second modified current; and</claim-text>
<claim-text>a current summing node that is coupled to the first multiplier and the second multiplier, wherein the current summing node outputs the sum of the first and second modified currents.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The apparatus of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the first multiplier further comprises a first current digital to analog converter (current DAC) having its reference input coupled to the first current generator and having its data input receive the first control signal, and wherein the second multiplier further comprises a second current DAC having its reference input coupled to the second current generator and having its data input receive the second control signal.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The apparatus of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the apparatus further comprises a bandgap reference circuit having a compensation input, wherein the compensation input is coupled to the summing node so as to receive the sum of the first and second modified currents.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The apparatus of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the second current generator further comprises:
<claim-text>a first voltage rail;</claim-text>
<claim-text>a second voltage rail;</claim-text>
<claim-text>an output terminal operable to carry the second current;</claim-text>
<claim-text>a first current source that is coupled to the first voltage rail, wherein the first current source provides a current that is generally complementary to absolute temperature;</claim-text>
<claim-text>a first current mirror that is coupled to the first current source and the first voltage rail;</claim-text>
<claim-text>a second current mirror that is coupled between the first current mirror and the second voltage rail;</claim-text>
<claim-text>a second current source that is coupled between the first current mirror and the second voltage rail, wherein the second current source provides a current that is generally proportional to absolute temperature; and</claim-text>
<claim-text>an output transistor that is coupled to the second current source at its control electrode and that is coupled to the output terminal at one of its passive electrodes.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The apparatus of <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein the first current mirror further comprises:
<claim-text>a first NPN transistor that is diode connected and that is coupled to the first current source at its collector; and</claim-text>
<claim-text>a second NPN transistor that is coupled to the base of the first NPN transistor at its base, and that is coupled to the first voltage rail at its collector.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The apparatus of <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein the second current mirror further comprises:
<claim-text>a third NPN transistor that is diode connected, that is coupled to the emitter of the first NPN transistor at its collector, and that is coupled to the second voltage rail at its emitter; and</claim-text>
<claim-text>a fourth NPN transistor that is coupled to the base of the third NPN transistor at its base, that is coupled to the emitter of the second NPN transistor and the second current source at its collector, and that is coupled to the second voltage rail at its emitter.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The apparatus of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the quadratic is a square.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. A method comprising:
<claim-text>generating a first current which varies directly proportional to the quadratic of absolute temperature;</claim-text>
<claim-text>generating a second current which varies complementary to the quadratic of absolute temperature;</claim-text>
<claim-text>multiplying the first current by a first control signal to create a first modified current;</claim-text>
<claim-text>multiplying the second current by a second control signal to create a second modified current;</claim-text>
<claim-text>summing the first and second currents to create a compensation current; and</claim-text>
<claim-text>applying the compensation current to a bandgap reference circuit.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The method of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the method further comprises the steps of:
<claim-text>setting the second control signal to a constant value;</claim-text>
<claim-text>setting a bit count value to 1;</claim-text>
<claim-text>setting a value for the control signal by setting bit of the first control signal corresponding to bit count value to &#x201c;1&#x201d;, and the remainder of the bits of first control signal to &#x201c;0&#x201d;;</claim-text>
<claim-text>measuring and storing a curvature value of an output voltage versus temperature at the value of the first control signal;</claim-text>
<claim-text>if the bit count value is not greater than a predetermined value, incrementing the bit count value by 1;</claim-text>
<claim-text>if the bit count value is greater than the predetermined value, interpolating the curvature value versus the first control signal to determine the value of the first control signal which minimizes the curvature value; and</claim-text>
<claim-text>applying the value of the first control signal which minimizes the curvature value control input of a multiplier.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The method of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the method further comprises the steps of:
<claim-text>setting the second control signal to a constant value;</claim-text>
<claim-text>setting a counter value to 1;</claim-text>
<claim-text>setting the first control signal to its stored value corresponding to the counter value of the counter value;</claim-text>
<claim-text>measuring and storing a curvature value of an output voltage versus temperature at the value of the first control signal;</claim-text>
<claim-text>if the counter value is not greater than a predetermined value, incrementing the counter value by 1;</claim-text>
<claim-text>if the counter value is greater than the predetermined value, interpolating the curvature value versus the first control signal to determine the value of the first control signal which minimizes the curvature value; and</claim-text>
<claim-text>applying the value of the first control signal which minimizes the curvature value.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The method of <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the first and second control signals are interchanged so as to determine an optimal value for the second control signal.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The method of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the first and second control signals are interchanged so as to determine an optimal value for the second control signal.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The method of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the quadratic is a square. </claim-text>
</claim>
</claims>
</us-patent-grant>
