<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625714-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625714</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13276598</doc-number>
<date>20111019</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<us-term-of-grant>
<us-term-extension>104</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>K</subclass>
<main-group>1</main-group>
<subgroup>02</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>25</main-group>
<subgroup>03</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>25</main-group>
<subgroup>49</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>375296</main-classification>
<further-classification>375295</further-classification>
<further-classification>375224</further-classification>
</classification-national>
<invention-title id="d2e53">Time delay estimation</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6665351</doc-number>
<kind>B2</kind>
<name>Hedberg</name>
<date>20031200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>375296</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>2004/0233785</doc-number>
<kind>A1</kind>
<name>Szajnowski</name>
<date>20041100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>367124</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2006/0067426</doc-number>
<kind>A1</kind>
<name>Zolfaghari et al.</name>
<date>20060300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2006/0280032</doc-number>
<kind>A1</kind>
<name>Szajnowski</name>
<date>20061200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>367124</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2009/0285330</doc-number>
<kind>A1</kind>
<name>Premakanthan et al.</name>
<date>20091100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2010/0054367</doc-number>
<kind>A1</kind>
<name>Gorday</name>
<date>20100300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>375324</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2010/0081389</doc-number>
<kind>A1</kind>
<name>Lawrow et al.</name>
<date>20100400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455 6711</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2010/0231437</doc-number>
<kind>A1</kind>
<name>Szajnowski</name>
<date>20100900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>342118</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>EP</country>
<doc-number>2 221 629</doc-number>
<kind>A1</kind>
<date>20100800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00010">
<othercit>Faulkner, M. et al. &#x201c;Adaptive Linearization Using Predistortion-Experimental Results&#x201d; IEEE Transactions on Vehicular Technology, vol. 43, No. 2, May 1994, pp. 323-332.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00011">
<othercit>Cavers, J. &#x201c;Amplifier Linearization Using a Digital Predistorter with Fast Adaptation and Low Memory Requirements&#x201d; IEEE Transactions on Vehicular Technology, vol. 39, No. 4, Nov. 1990, pp. 374-382.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>36</number-of-claims>
<us-exemplary-claim>19</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>375224</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375228</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375259-260</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375285</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375295-296</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375298</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>375377</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>12</number-of-drawing-sheets>
<number-of-figures>15</number-of-figures>
</figures>
<us-related-documents>
<us-provisional-application>
<document-id>
<country>US</country>
<doc-number>61485230</doc-number>
<date>20110512</date>
</document-id>
</us-provisional-application>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20120287980</doc-number>
<kind>A1</kind>
<date>20121115</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Epifano</last-name>
<first-name>Fabio</first-name>
<address>
<city>Segny</city>
<country>FR</country>
</address>
</addressbook>
<residence>
<country>FR</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Epifano</last-name>
<first-name>Fabio</first-name>
<address>
<city>Segny</city>
<country>FR</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Potomac Patent Group PLLC</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
<agent sequence="02" rep-type="attorney">
<addressbook>
<last-name>Leffler</last-name>
<first-name>Kenneth B.</first-name>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>ST-Ericsson SA</orgname>
<role>03</role>
<address>
<city>Plan-les-Ouates</city>
<country>CH</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Corrielus</last-name>
<first-name>Jean B</first-name>
<department>2633</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">An amount of delay between a digital reference signal and a digital derived signal is measured, wherein the derived signal is derived from the reference signal. Measurement involves ascertaining a sign of a slope of the derived signal over a first time interval and producing a set of time-associated reference signs by ascertaining a sign of a slope of the reference signal over each of a plurality of different time intervals leading up to the first time interval. A first set of coincidence results is produced by detecting coincidence between the sign of the slope of the derived signal and each one of the time-associated reference signs in the set of time-associated reference signs. The first set of coincidence results is used alone or in combination with other coincidence results as an indicator of the amount of delay between the reference signal and the derived signal.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="235.29mm" wi="174.92mm" file="US08625714-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="249.26mm" wi="186.10mm" file="US08625714-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="240.28mm" wi="185.17mm" orientation="landscape" file="US08625714-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="242.57mm" wi="175.09mm" file="US08625714-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="234.61mm" wi="188.47mm" file="US08625714-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="248.67mm" wi="162.81mm" orientation="landscape" file="US08625714-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="219.20mm" wi="174.92mm" orientation="landscape" file="US08625714-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="231.31mm" wi="135.89mm" orientation="landscape" file="US08625714-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="227.50mm" wi="156.38mm" orientation="landscape" file="US08625714-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="214.71mm" wi="151.89mm" orientation="landscape" file="US08625714-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="235.20mm" wi="162.14mm" orientation="landscape" file="US08625714-20140107-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00011" num="00011">
<img id="EMI-D00011" he="239.01mm" wi="169.16mm" orientation="landscape" file="US08625714-20140107-D00011.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00012" num="00012">
<img id="EMI-D00012" he="251.71mm" wi="181.44mm" file="US08625714-20140107-D00012.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">CROSS REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This application claims the benefit of U.S. Provisional Application No. 61/485,230, filed May 12, 2011, which is hereby incorporated herein by reference in its entirety.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">BACKGROUND</heading>
<p id="p-0003" num="0002">The invention relates to the measurement and, in some circumstances, compensation of a signal delay introduced by circuitry, such as between reference signals and feed-back signals in a closed-loop configuration of electronic circuitry such as, but not limited to, radio transmitters.</p>
<p id="p-0004" num="0003">There is often a need to estimate an amount of delay introduced by circuitry. Taking modern wireless transmitters as one of many possible examples (e.g., wireless transmitters in mobile phones, or in computers with built-in transceivers) knowledge of the transmitter's delay (i.e., between input and output) may be an integral part of techniques applied to make any of a number of types of measurements in a closed-loop configuration. Different types of measurements can be made with such a configuration, such as (without limitation):
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0000">
    <ul id="ul0002" list-style="none">
        <li id="ul0002-0001" num="0004">1. Transmitter Power measurement</li>
        <li id="ul0002-0002" num="0005">2. Transmitter Gain measurement (fast power measurement)</li>
        <li id="ul0002-0003" num="0006">3. Transmitter Phase measurement</li>
        <li id="ul0002-0004" num="0007">4. Transmitter IQ Mismatches (i.e., mismatches between amplitude and/or phase of an In-phase and Quadrature-phase signal pair)</li>
        <li id="ul0002-0005" num="0008">5. Transmitter Adaptive Digital Pre-distortion</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0005" num="0009">It is very important that an accurate measurement of the delay (&#x201c;loop-back delay&#x201d;) be made. The feed-back signal, herein referred to as SFB(t), is a delayed but accurate copy of the base-band transmitted signal. This delay will vary with process, transmitter settings, temperature, and the like.</p>
<p id="p-0006" num="0010">The loop-back delay can severely degrade the closed-loop measurement if not compensated for. This is especially so in those algorithms that operate on a sample-by-sample basis.</p>
<p id="p-0007" num="0011">Because the loop-back delay is not known a-priori with sufficient accuracy, a calibration algorithm is required.</p>
<heading id="h-0003" level="1">SUMMARY</heading>
<p id="p-0008" num="0012">It should be emphasized that the terms &#x201c;comprises&#x201d; and &#x201c;comprising&#x201d;, when used in this specification, are taken to specify the presence of stated features, integers, steps or components; but the use of these terms does not preclude the presence or addition of one or more other features, integers, steps, components or groups thereof.</p>
<p id="p-0009" num="0013">As the feed-back signal is an accurate copy of the transmitted signal, the two signals will be highly correlated when properly aligned. An aspect of exemplary embodiments consistent with the invention is the extraction of delay information merely by comparing the amount of coincidence between the polarity of the feed-back signals envelope slopes with the polarity of the envelope slopes of each of a set of delayed copies of the transmitter (e.g., input) signal.</p>
<p id="p-0010" num="0014">In accordance with one aspect of the present invention, the foregoing and other objects are achieved in methods and apparatuses for measuring an amount of delay between a digital reference signal and a digital derived signal, wherein the derived signal is derived from the reference signal. Measurement comprises ascertaining a sign of a slope of the derived signal over a first time interval and producing a set of time-associated reference signs by ascertaining a sign of a slope of the reference signal over each of a plurality of different time intervals leading up to the first time interval. A first set of coincidence results is produced by detecting coincidence between the sign of the slope of the derived signal and each one of the time-associated reference signs in the set of time-associated reference signs. The first set of coincidence results is used alone or in combination with other coincidence results as an indicator of the amount of delay between the reference signal and the derived signal.</p>
<p id="p-0011" num="0015">In some but not necessarily all embodiments, measuring the delay comprises producing one or more additional sets of coincidence results by performing, for each one of one or more different time intervals:
<ul id="ul0003" list-style="none">
    <li id="ul0003-0001" num="0000">
    <ul id="ul0004" list-style="none">
        <li id="ul0004-0001" num="0016">ascertaining a sign of a slope of the derived signal over the different time interval; and</li>
        <li id="ul0004-0002" num="0017">producing an additional set of time-associated reference signs by ascertaining a sign of a slope of the reference signal over each of a plurality of different time intervals leading up to the different time interval,
<br/>
wherein using the first set of coincidence results alone or in combination with other coincidence results as the indicator of the amount of delay between the reference signal and the derived signal comprises using the first set of coincidence results in combination with the one or more additional sets of coincidence results as the indicator of the amount of delay between the reference signal and the derived signal.
</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0012" num="0018">In some but not necessarily all of the embodiments that comprise producing one or more additional sets of coincidence, using the first set of coincidence results in combination with the one or more additional sets of coincidence results as the indicator of the amount of delay between the reference signal and the derived signal comprises combining each coincidence result in the first set of coincidence results with a respective one of the coincidence results from each of the one or more additional sets of coincidence results to produce a combined set of coincidence results. The combined set of coincidence results is then used as the indicator of the amount of delay between the reference signal and the derived signal. In some, but not necessarily all, of these embodiments, using the combined set of coincidence results as the indicator of the amount of delay between the reference signal and the derived signal comprises identifying which element of the combined set of coincidence results has a minimum value; and using the identified element's position within the combined set of coincidence results as an indicator of the amount of delay between the digital reference signal and the digital derived signal.</p>
<p id="p-0013" num="0019">In some but not necessarily all embodiments, using the first set of coincidence results alone or in combination with other coincidence results as the indicator of the amount of delay between the reference signal and the derived signal comprises identifying which element of the first set of coincidence results has a minimum value. The identified element's position within the first set of coincidence results is then used as an indicator of the amount of delay between the digital reference signal and the digital derived signal.</p>
<p id="p-0014" num="0020">In some but not necessarily all embodiments, producing the set of time-associated reference signs by ascertaining the sign of the slope of the reference signal over each of the plurality of different time intervals leading up to the first time interval comprises supplying the sign of the slope of the reference signal associated with the first time interval to an input port of a bank of N series-connected delay units and clocking the bank of delay units at a known clock rate, wherein N is greater than 1. In some of these embodiments, producing the first set of coincidence results by detecting coincidence between the sign of the slope of the derived signal and each one of the time-associated reference signs in the set of time-associated reference signs comprises supplying an output of each delay unit within the bank of delay units to one input of a respective one of a plurality of comparison units; and supplying the sign of the slope of the derived signal to another input of each of the plurality of comparison units. One or more of the comparison units can be, for example, XOR gates. In other variations of these embodiments, using the first set of coincidence results alone or in combination with other coincidence results as the indicator of the amount of delay between the reference signal and the derived signal comprises supplying an output of each of the comparison units to a respective one of a plurality of counters; clocking each of the counters at the known clock rate; and ascertaining which of the counters is storing a lowest count value.</p>
<p id="p-0015" num="0021">In some but not necessarily all embodiments, the digital reference signal is a baseband signal that is supplied for use by a radio transmitter; and the digital derived signal is produced by producing in-phase and quadrature phase digital baseband output signals from a radiofrequency signal that is present at an output port of the radio transmitter. The output port can be, for example, an antenna.</p>
<p id="p-0016" num="0022">In some but not necessarily all alternatives, ascertaining the sign of the slope of the derived signal over the first time interval comprises squaring an envelope of the in-phase and quadrature phase digital baseband output signals; obtaining a difference value by subtracting the squared envelope of the in-phase and quadrature phase digital baseband output signals from an earlier-obtained squared envelope of the in-phase and quadrature phase digital baseband output signals; and ascertaining the sign of the difference value.</p>
<p id="p-0017" num="0023">In yet some other possible alternatives, the digital reference signal is supplied to an input port of a reference signal delay unit, wherein the reference signal delay unit supplies a delayed reference signal at an output port. The amount of delay between the digital reference signal and the digital derived signal is used to control the reference signal delay unit. The delayed reference signal is compared to the digital derived signal, and a result of the comparison is used to control an aspect of the radio transmitter operation. In some but not necessarily all of these embodiments, using the result of the comparison to control the aspect of the radio transmitter operation includes controlling predistortion that is applied to the radio transmitter's input signal.</p>
<p id="p-0018" num="0024">In some but not necessarily all embodiments, the derived signal comprises an in-phase signal and a quadrature phase signal, and ascertaining the sign of the slope of the derived signal over the first time interval comprises generating an envelope signal (or alternatively a squared envelope signal) from the in-phase and quadrature phase signals; ascertaining a difference between a first sample of the envelope signal (or squared envelope signal) and a second sample of the envelope signal (or squared envelope signal), wherein the first sample of the envelope signal (or squared envelope signal) occurs at a beginning of the first time interval and the second sample of the envelope signal (or squared envelope signal) occurs at an end of the first time interval; and ascertaining a sign of the difference between the first sample of the envelope signal (or squared envelope signal) and the second sample of the envelope signal (or squared envelope signal). In some but not necessarily all of these embodiments, the first sample of the envelope signal (or squared envelope signal) and the second sample of the envelope signal (or squared envelope signal) are adjacent samples of the envelope signal (or squared envelope signal).</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0019" num="0025">The objects and advantages of the invention will be understood by reading the following detailed description in conjunction with the drawings in which:</p>
<p id="p-0020" num="0026"><figref idref="DRAWINGS">FIG. 1</figref> illustrates a transmitter having a closed-loop configuration that includes a delay unit (in addition to other circuit elements&#x2014;not shown) for estimating a delay amount between an input signal and an output signal of the transmitter.</p>
<p id="p-0021" num="0027"><figref idref="DRAWINGS">FIG. 2</figref> is a block diagram of an exemplary embodiment of a delay estimator consistent with the invention.</p>
<p id="p-0022" num="0028"><figref idref="DRAWINGS">FIG. 3</figref> is a set of graphs of counter output as a function of counter index for an example in which 3G Signal&#x2014;Release99 signals are used and in which the delay amount is equal to &#x201c;4&#x201d;.</p>
<p id="p-0023" num="0029"><figref idref="DRAWINGS">FIG. 4</figref> is a set of graphs of counter output as a function of counter index for an example in which LTE 20 MHz 1 Resource Block (RB) at the band edge signals are used and in which the delay amount is equal to &#x201c;4&#x201d;.</p>
<p id="p-0024" num="0030"><figref idref="DRAWINGS">FIG. 5</figref> is a block diagram of a transmitter arrangement.</p>
<p id="p-0025" num="0031"><figref idref="DRAWINGS">FIG. 6</figref> is a graph illustrating an amplitude distortion and a phase distortion between a transmitted signal point (itx,qtx) and the signal as it appears at the antenna (itx,qtx).</p>
<p id="p-0026" num="0032"><figref idref="DRAWINGS">FIG. 7</figref> is a block diagram of equipment that includes a transmitter and a measurement receiver as described earlier.</p>
<p id="p-0027" num="0033"><figref idref="DRAWINGS">FIG. 8</figref> is a block diagram of exemplary iterative digital predistortion circuitry consistent with aspects of the invention.</p>
<p id="p-0028" num="0034"><figref idref="DRAWINGS">FIG. 9</figref> is a block diagram of an exemplary set of iterative adaptive LUTs, suitable for use in the iterative digital predistortion circuitry of <figref idref="DRAWINGS">FIG. 8</figref>.</p>
<p id="p-0029" num="0035"><figref idref="DRAWINGS">FIG. 10</figref> is a block diagram of an exemplary AM-AM distortion detector.</p>
<p id="p-0030" num="0036"><figref idref="DRAWINGS">FIG. 11</figref> is a block diagram of an exemplary AM-PM distortion detector.</p>
<p id="p-0031" num="0037"><figref idref="DRAWINGS">FIG. 12</figref> is a block diagram of an exemplary AM-AM adaptive LUT consistent with the invention.</p>
<p id="p-0032" num="0038"><figref idref="DRAWINGS">FIG. 13</figref> is a block diagram of an exemplary AM-PM adaptive LUT consistent with the invention.</p>
<p id="p-0033" num="0039"><figref idref="DRAWINGS">FIG. 14</figref> is a graph depicting AM/AM correction (amplitude out plotted as a function of amplitude in) that is achievable by some embodiments consistent with the invention.</p>
<p id="p-0034" num="0040"><figref idref="DRAWINGS">FIG. 15</figref> is a graph depicting AM/PM correction (phase out plotted as a function of amplitude in) that is achievable by some embodiments consistent with the invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0035" num="0041">The various features of the invention will now be described with reference to the figures, in which like parts are identified with the same reference characters.</p>
<p id="p-0036" num="0042">The various aspects of the invention will now be described in greater detail in connection with a number of exemplary embodiments. To facilitate an understanding of the invention, many aspects of the invention are described in terms of sequences of actions to be performed by elements of a computer system or other hardware capable of executing programmed instructions. It will be recognized that in each of the embodiments, the various actions could be performed by specialized circuits (e.g., analog and/or discrete logic gates interconnected to perform a specialized function), by one or more processors programmed with a suitable set of instructions, or by a combination of both. The term &#x201c;circuitry configured to&#x201d; perform one or more described actions is used herein to refer to any such embodiment (i.e., one or more specialized circuits and/or one or more programmed processors). Moreover, the invention can additionally be considered to be embodied entirely within any form of computer readable carrier, such as solid-state memory, magnetic disk, or optical disk containing an appropriate set of computer instructions that would cause a processor to carry out the techniques described herein. Thus, the various aspects of the invention may be embodied in many different forms, and all such forms are contemplated to be within the scope of the invention. For each of the various aspects of the invention, any such form of embodiments as described above may be referred to herein as &#x201c;logic configured to&#x201d; perform a described action, or alternatively as &#x201c;logic that&#x201d; performs a described action.</p>
<p id="p-0037" num="0043"><figref idref="DRAWINGS">FIG. 1</figref> illustrates a transmitter having a closed-loop configuration that includes an exemplary embodiment of a delay estimator that is consistent with the invention. The delay estimator estimates an amount of delay between an input signal supplied by a wave-form generator <b>101</b> and an output signal detected, by suitable detection means <b>103</b>, at an antenna <b>105</b> of the transmitter. In the forward path of the transmitter, the wave-form generator <b>101</b> generates in-phase (I) and quadrature phase (Q) signals and supplies these to a pair of digital-to-analog converters (IQ DACs) <b>107</b>. The pair of analog signals generated by the IQ DACs <b>107</b> are up-converted to radio frequency and mixed into a single analog signal by up-converter and programmable gain amplifier (PGA) circuitry <b>109</b>. The radio frequency signal is then transformed into a signal that is suitable for transmission from the antenna <b>105</b> by a power amplifier front end module (PA FEM) <b>111</b>.</p>
<p id="p-0038" num="0044">In the feedback path, the signal detected at the antenna <b>105</b> is down converted to baseband frequency by down conversion circuitry <b>113</b>, which supplies separate I and Q signals, in analog form, at its output. The analog I and Q signals are converted into a pair of digital I and Q signals by analog-to-digital converters (IQ ADCs) <b>115</b>. These digital I and Q signals are herein referred to as the signal to be measured (&#x201c;MES&#x201d;) (as compared with the original signal generated by the waveform generator <b>101</b>, which is the &#x201c;reference signal&#x201d;&#x2014;&#x201c;REF&#x201d;).</p>
<p id="p-0039" num="0045">The polarity of the slope of the signal to be measured is generated by slope polarity circuitry <b>117</b>. Similarly, the polarity of the slope of the reference signal is generated by slope polarity circuitry <b>119</b>. Each of the slope polarity circuitry <b>117</b>, <b>119</b> operates by first ascertaining, in some embodiments, the squared envelope (I<sup>2</sup>+Q<sup>2</sup>) of the supplied signal, and in alternative embodiments the (non-squared) envelope (&#x221a;{square root over (I<sup>2</sup>+Q<sup>2</sup>)}) of the supplied signal, by a respective one of (squared) envelope circuitry <b>121</b>, <b>123</b>. In yet alternative embodiments not using I and Q signals, it is still desired to obtain a (squared) envelope of the signal to be measured. Means for obtaining the (squared) envelope in such cases can be embodied as, for example, a power detector. The (squared) envelope is used in order to remove phase information from the supplied signal. Then, the slope of the squared signal is found by subtracting the signal from a delayed version of itself (delaying of the signal being performed by a respective one of delay units <b>125</b>, <b>127</b>, and subtraction being performed by a respective one of subtractors <b>129</b>, <b>131</b>). The signal and its delayed version thereby define a first time interval, wherein the word &#x201c;first&#x201d; is not used to mean in a chronological sense, but rather is used to distinguish the time interval from other, different time intervals. The signal and its delayed version may, in practice, be adjacent samples of the squared envelope signal, although this is not necessarily the case in all embodiments. The signs of the resulting differences are found by respective ones of sign-determining circuitry <b>133</b>, <b>135</b> and these are supplied at the respective outputs of the slope polarity circuitry <b>117</b>, <b>119</b>.</p>
<p id="p-0040" num="0046">The respective slope polarities of the signal to be measured and the reference signal are supplied to coincidence detection circuitry <b>137</b>. The coincidence detection circuitry <b>137</b> extracts (or estimates) the delay information by comparing the amount of coincidence between the polarity of the feed-back signals (squared) envelope slopes with the polarity of the (squared) envelope slopes of each of a set of delayed copies of the transmitter (e.g., input) signal.</p>
<p id="p-0041" num="0047">In practice, the feed-back path should be highly linear in order to allow for accurate measurements of the output signal to be made.</p>
<p id="p-0042" num="0048"><figref idref="DRAWINGS">FIG. 2</figref> is a block diagram of an exemplary embodiment of coincidence detection circuitry <b>200</b>. The coincidence detection circuitry <b>200</b> comprises a bank of N 1-bit delay units <b>201</b> that receives the sign of the slopes of the squared reference signal envelope and delays it by up to N delay times, wherein in this exemplary embodiment, each delay time is one sample clock period. This need not be the case in all embodiments. The output of each delay unit within the bank of delay units <b>201</b> is tapped and supplied to one input of a respective one of N comparison units. In the exemplary embodiment, the N comparison units are a bank of N XOR gates <b>203</b>.</p>
<p id="p-0043" num="0049">XOR gates have the property of outputting a binary &#x201c;0&#x201d; when its inputs are equal to one another, and a binary &#x201c;1&#x201d; otherwise. In the coincidence detection circuitry <b>200</b>, each of the XOR gates within the bank of N XOR gates <b>203</b> receives, as its other input, the signal to be measured. Accordingly, the output of each XOR gates is equal to a binary &#x201c;1&#x201d; whenever the 1-bit sign of the slope of the signal to be measured is not equal to the sign of the slope of a delayed version of the reference signal.</p>
<p id="p-0044" num="0050">Each XOR gate within the bank of N XOR gates <b>203</b> supplies its output to a respective one of N counters (accumulators) within a bank of N counters <b>205</b>. Over time, each of the counters outputs a value that represents the degree to which the correspondingly delayed reference signal does not match the signal to be measured. It is therefore desired to identify that counter whose output is the lowest among all counter output values, since this counter corresponds to the delay amount having the highest level of correspondence between the correspondingly delayed reference signal and the signal to be measured. Minimum search circuitry <b>207</b> is therefore included that receives each of the counter output values from the bank of N counters <b>205</b>, and outputs a value indicating which of the counters supplied the lowest value. That value corresponds to the estimated delay amount, and the actual delay amount can be obtained by, for example in some but not necessarily all embodiments, multiplying the counter number by the known amount of delay introduced by each delay unit within the bank of N delay units <b>201</b>.</p>
<p id="p-0045" num="0051">An aspect of embodiments such as those described above is that the longer the counters operate, the more confidence one has in the delay estimate. This can be seen, for example, in <figref idref="DRAWINGS">FIG. 3</figref>, which is a set of graphs of counter output as a function of counter index for an example in which 3G Signal&#x2014;Release99 signals are used and in which the delay amount is equal to &#x201c;4&#x201d;. It can be seen that, when a relatively low number of comparisons are made (e.g., see the graph <b>301</b>), the difference between the minimum count and the maximum count is relatively small, whereas when a relatively large number of comparisons are made (e.g., see the graph <b>303</b>), the difference between the minimum count and the maximum count is quite large, instilling high confidence in the decision that counter <b>4</b> corresponds to the correct delay amount. A similar characteristic can be seen in <figref idref="DRAWINGS">FIG. 4</figref>, which is a set of graphs of counter output as a function of counter index for an example in which LTE 20 MHz 1 Resource Block (RB) at the band edge signals are used and in which the delay amount is equal to &#x201c;4&#x201d;.</p>
<p id="p-0046" num="0052">The various exemplary embodiments described above provide advantages over conventional time delay estimation techniques. For example, some embodiments can exhibit one or more of the following:
<ul id="ul0005" list-style="none">
    <li id="ul0005-0001" num="0000">
    <ul id="ul0006" list-style="none">
        <li id="ul0006-0001" num="0053">Insensitivity to RF Phase misalignment</li>
        <li id="ul0006-0002" num="0054">Simplicity with respect to hardware implementation</li>
        <li id="ul0006-0003" num="0055">Lack of any requirement for a specific test signal.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0047" num="0056">To further illustrate aspects and advantages of the various inventive concepts, a transmitter will know be described that employs a time delay estimator, such as those described above, for the purpose of measuring distortion of a signal supplied to the transmitter's antenna (the distortion being introduced by the transmitter circuitry itself), and using this measurement to adaptively predistort the supplied baseband signal to compensate for the distortion, thereby substantially eliminating it. A full discussion follows in order to ensure the reader's understanding of all aspects.</p>
<p id="p-0048" num="0057">State-of the-art transceivers use a dedicated receiver to perform measurement of the transmitted signal. As shown in <figref idref="DRAWINGS">FIG. 5</figref>, which is a block diagram of a transmitter arrangement, a bi-directional coupler <b>501</b> can be used to obtain a copy of the signal that is either transmitted to or reflected from the antenna <b>503</b>.</p>
<p id="p-0049" num="0058">The transmitter <b>505</b> (TX) performs:
<ul id="ul0007" list-style="none">
    <li id="ul0007-0001" num="0000">
    <ul id="ul0008" list-style="none">
        <li id="ul0008-0001" num="0059">The digital-to-analogue conversion followed by a reconstruction filtering of (ITX, QTX) signals provided by DFE</li>
        <li id="ul0008-0002" num="0060">The up-conversion to RF frequency followed by an amplifier to the desired power level.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0050" num="0061">A measurement receiver (mRx) <b>507</b> associated with the transmitter <b>505</b> performs
<ul id="ul0009" list-style="none">
    <li id="ul0009-0001" num="0000">
    <ul id="ul0010" list-style="none">
        <li id="ul0010-0001" num="0062">The down-conversion to baseband frequency followed by an anti-aliasing filtering; and</li>
        <li id="ul0010-0002" num="0063">The analogue to-digital conversion providing (ImRX, QmRX) to the Digital Front End (DFE).</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0051" num="0064">In order to improve the transmitter efficiency, the digital baseband transmit signal can be predistorted to compensate for the RF power amplifier (PA) non-linearity.</p>
<p id="p-0052" num="0065">Non-linearity of an RF power amplifier can be of two types: AM-AM (Amplitude Modulation to Amplitude Modulation) and AM-PM (Amplitude Modulation to Phase Modulation).</p>
<p id="p-0053" num="0066">In practice, AM-AM distortion is a variable gain that only depends on the input envelope (AM) and AM-PM distortion is a non-constant phase that only depends on the input envelope (AM).</p>
<p id="p-0054" num="0067">If the input signal can be expressed as follows:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>s</i><sub>IN</sub>(<i>t</i>)=&#x3c1;<sub>IN</sub>(<i>t</i>)&#xb7;<i>e</i><sup>j&#xb7;&#x3b8;</sup><sub>IN</sub><sup>(t) </sup><?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
then, the power amplifier output signal is:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>s</i><sub>OUT</sub>(<i>t</i>)=<i>G</i><sub>AM</sub>(&#x3c1;<sub>IN</sub>(<i>t</i>))&#xb7;&#x3c1;<sub>IN</sub>(<i>t</i>)&#xb7;<i>e</i><sup>j&#xb7;(&#x3b8;</sup><sub>IN</sub><sup>(t)+&#x3b8;</sup><sub>PM</sub><sup>(&#x3c1;</sup><sub>IN</sub><sup>(t)) </sup><?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where the power amplifier gain and phase are functions of the input envelope. <figref idref="DRAWINGS">FIG. 6</figref> is a graph illustrating an amplitude distortion <b>601</b> and a phase distortion <b>603</b> between a transmitted signal point (i<sub>tx</sub>,q<sub>tx</sub>) and the signal as it appears at the antenna (i<sub>rx</sub>,q<sub>rx</sub>).
</p>
<p id="p-0055" num="0068">Static pre-distortion is based on a pre-known predistortion function that will depend on power amplifier temperature and supply voltage. The predistortion function(s) is(are) stored in a memory.</p>
<p id="p-0056" num="0069">Adaptive predistortion is based on a continuously updated function that avoids requiring a large memory. However, conventional adaptive predistortion algorithms are fundamentally based on (1) pre-defined test-signals (single-tone or multi-tones), (2) precise measurements and (3) complex computation to get the gain and phase correction.</p>
<p id="p-0057" num="0070">Conventional adaptive predistortion algorithms therefore present undesirable characteristics. In principle if one wants to simultaneously correct both the gain and the phase for a given AM value, a complex division needs to be computed between the reference transmit signal and the measured feed-back signal once it has been well averaged to remove the noise. This implies a long latency in the correction making the algorithm unfeasible during normal operation of the telephone (e.g., use outside of production testing and/or calibration).</p>
<p id="p-0058" num="0071">This draw-back has been the reason why adaptive predistortion techniques are mainly used to get the predistortion values during production calibration.</p>
<p id="p-0059" num="0072">The inventor of the subject matter described herein has recognized that improved predistortion methods and apparatuses can be obtained by basing them on an iterative approach that uses each digital base-band sample to detect the presence of non-linearity in the received signal. The non-linearity detection allows correcting the AM-AM and AM-PM compensation values by a predefined quantity. The non-linearity detector provides only the information about the direction of the correction, with that information being used to correspondingly increase or decrease the actual compensation values. To detect the non-linearity, a time alignment function is required to align the transmit signal and the received one so that they can be meaningfully compared. Time alignment requires knowledge of the amount by which the received signal is a delayed version of the transmitted signal. The time delay estimation methods and apparatuses described above are preferably used to determine the amount of time delay.</p>
<p id="p-0060" num="0073"><figref idref="DRAWINGS">FIG. 7</figref> is a block diagram of equipment <b>700</b> that includes a transmitter <b>701</b> and a measurement receiver <b>703</b> as described earlier. The transmitter <b>701</b> receives baseband I and Q signals from Digital Front End (DFE) circuitry <b>705</b>, and the measurement receiver <b>703</b> supplies its I and Q signals to the DFE circuitry <b>705</b>.</p>
<p id="p-0061" num="0074">A digital scaler (depicted in <figref idref="DRAWINGS">FIG. 8</figref>) is used (1) to provide the right signal level to the iterative adaptive lookup table (LUT) and (2) to change the closed-loop gain that will result in an output transmitter power change. Hence, such a closed-loop function is used as a very precise power control.</p>
<p id="p-0062" num="0075">In this exemplary embodiment, the DFE circuitry <b>705</b> includes iterative digital predistortion circuitry <b>707</b> that, based on the original (undistorted) signals to be supplied to the transmitter <b>701</b> and the signals supplied by the measurement receiver <b>703</b>, predistorts the original signals and supplies these to the transmitter <b>701</b>. The predistortion is adapted to compensate for distortion that is introduced by the transmitter <b>701</b>, so that the signal supplied to the transmitter's antenna is substantially undistorted.</p>
<p id="p-0063" num="0076"><figref idref="DRAWINGS">FIG. 8</figref> is a block diagram of exemplary iterative digital predistortion circuitry <b>800</b> consistent with aspects of the invention. The iterative digital predistortion circuitry <b>800</b> comprises:
<ul id="ul0011" list-style="none">
    <li id="ul0011-0001" num="0000">
    <ul id="ul0012" list-style="none">
        <li id="ul0012-0001" num="0077">A digital predistorter <b>801</b> comprising an AM/AM Scaler <b>803</b>, that multiplies the input complex signal for a gain that depends on the input magnitude value, and an AM/PM Rotor <b>805</b>, that rotates the input complex signal by a phase that depends on the input magnitude value. The pair (G<sub>AM</sub>, &#x3a6;<sub>PM</sub>) is computed by a set of iterative adaptive LUTs <b>807</b> and applied for each sample.</li>
        <li id="ul0012-0002" num="0078">Digital scaling circuitry <b>809</b> configured to receive the complex feed-back signal and to &#x2018;change&#x2019; the closed loop gain.</li>
        <li id="ul0012-0003" num="0079">A time alignment unit <b>811</b> that computes the actual round trip delay. The round trip delay is preferably estimated by means of the time delay estimation techniques described earlier (e.g., see <figref idref="DRAWINGS">FIGS. 1-4</figref> and supporting text).</li>
        <li id="ul0012-0004" num="0080">The set of iterative adaptive LUTs <b>807</b> (mentioned above), which are described in greater detail below.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0064" num="0081"><figref idref="DRAWINGS">FIG. 9</figref> is a block diagram of an exemplary set of iterative adaptive LUTs <b>900</b>, suitable for use in the iterative digital predistortion circuitry <b>800</b> of <figref idref="DRAWINGS">FIG. 8</figref>. The set of iterative adaptive LUTs <b>900</b> comprise:
<ul id="ul0013" list-style="none">
    <li id="ul0013-0001" num="0000">
    <ul id="ul0014" list-style="none">
        <li id="ul0014-0001" num="0082">A distortion detector <b>901</b> that compares each complex sample of the original signal to be transmitted, (I<sub>TX</sub>, Q<sub>TX</sub>), with each sample of the feed-back/received complex samples, (I<sub>mRX</sub>, Q<sub>mRX</sub>), to produce and supply amplitude error (AMerr) and phase error (PMerr) signals, as well as the amplitude of the original signal to be transmitted, to a set of adaptive LUTs <b>903</b>. AMerr provides information indicating whether the actual envelope (at the output of the transmitter) has been compressed or amplified relative to the original signal to be transmitted, and PMerr provides information indicating whether the phase of the actual envelope (at the output of the transmitter) has been increased or decreased. The AMerr and PMerr information are the bases upon which adaptations to the contents of the set of adaptive LUTs <b>903</b> are made.</li>
        <li id="ul0014-0002" num="0083">The set of adaptive LUTs <b>903</b> that comprise an AM-AM Adaptive LUT and an AM-PM Adaptive LUT. The AM-AM and AM-PM adaptive LUTs are quite similar to one another in terms of implementation; each of the adaptive LUTs incorporates a dual-port RAM (dual-cell reading and single-cell writing operations), as will be seen in further detail below.</li>
    </ul>
    </li>
</ul>
</p>
<p id="p-0065" num="0084">The distortion detector <b>901</b> comprises an AM-AM distortion detector and an AM-PM distortion detector. <figref idref="DRAWINGS">FIG. 10</figref> is a block diagram of an exemplary AM-AM distortion detector <b>1000</b> and <figref idref="DRAWINGS">FIG. 11</figref> is a block diagram of an exemplary AM-PM distortion detector <b>1100</b>.</p>
<p id="p-0066" num="0085">Regarding the AM-AM distortion detector <b>1000</b>, it computes the squared envelope for both the transmit signal, (I<sub>TX</sub>, Q<sub>TX</sub>) (performed by squared envelope generator <b>1001</b>), and for the received signal, (I<sub>mRX</sub>, Q<sub>mRX</sub>) (performed by squared envelope generator <b>1003</b>). In each case, the squared envelope is derived by squaring each of the I and Q signals (two multipliers are used in each squared envelope generator, with each multiplier receiving either the same I signal or the same Q signal) and summing the squared I and Q signals. It is desired to compare the squared envelope of the transmit signal with the squared envelope of the received signal. However, the received signal is delayed relative to the transmit signal, due to delays through the transmitter. To align the signals for comparison, a programmable delay unit <b>1005</b> is included that delays the squared envelope of the transmit signal by an amount estimated to be the delay through the transmitter. The estimated delay amount is preferably derived by the methodology described above with reference to <figref idref="DRAWINGS">FIGS. 1-4</figref>.</p>
<p id="p-0067" num="0086">In the exemplary embodiment, comparison is performed by subtraction circuitry <b>1007</b> that subtracts the squared envelope of the received signal from the delayed squared envelope of the transmit signal. The difference, supplied at the output of the subtraction circuitry <b>1007</b>, is an error signal. The sign of this difference (represented by sign circuitry <b>1009</b>, although in some but not necessarily all embodiments, obtaining the sign may simply involve using only the sign bit of a multi-bit result) is provided to the AM-AM Adaptive LUT to increase/decrease the values corresponding to the envelope being compared. This is described in further detail below.</p>
<p id="p-0068" num="0087">Regarding the AM-PM distortion detector <b>1100</b>, it computes the phase difference between a delayed copy of TX sample and the received sample. The delay is intended to compensate for the delay through the transmitter, and is achieved by means of a programmable delay circuitry <b>1101</b>. The estimated delay amount is preferably derived by the methodology described above with reference to <figref idref="DRAWINGS">FIGS. 1-4</figref>. Phase difference detection circuitry <b>1103</b> accordingly receives the delayed version of the I and Q transmit signals, (I<sub>TX</sub>, Q<sub>TX</sub>), and the (non-delayed) I and Q received signals, (I<sub>mRX</sub>, Q<sub>mRX</sub>).</p>
<p id="p-0069" num="0088">The sign of this difference (represented by sign circuitry <b>1105</b>, although in some but not necessarily all embodiments, obtaining the sign may simply involve using only the sign bit of a multi-bit result) is provided to the AM-PM adaptive LUT to increase/decrease the values corresponding to the envelope being compared.</p>
<p id="p-0070" num="0089">The AM-AM adaptive LUT and AM-PM adaptive LUT will now be described with reference to <figref idref="DRAWINGS">FIGS. 12 and 13</figref>, respectively. <figref idref="DRAWINGS">FIG. 12</figref> is a block diagram of an exemplary AM-AM adaptive LUT <b>1200</b> consistent with the invention. The AM-AM adaptive LUT <b>1200</b> includes a dual port RAM <b>1201</b> that provides dual-cell reading and single-cell writing operations. The circuitry is configured so that for each supplied sample, a dual READ/single WRITE access is performed. In some but not necessarily all embodiments, a form of gating can be included for write accesses, but omitting it achieves more stable loop performance. One of the principles of operation of the AM-AM adaptive LUT <b>1200</b> is that the amplitude of the transmitted signal should be used to address a corresponding gain amount, G<sub>AM</sub>, that will be used to distort the amplitude of the signal to be transmitted. However, in some implementations, the circuitry is embodied on a die whose area is constrained, thereby limiting the capacity of the RAM. To overcome this limitation in some embodiments, the circuitry is configured such that some number of least significant bits (LSBs) of the amplitude of the transmitted signal are not used to address the dual port RAM <b>1201</b>. Instead, only the remaining most significant bits (MSBs) are used. This address (RD_addr<b>1</b>) is fed, unchanged, to one Read Address Port of the dual port RAM <b>1201</b>. The address is also supplied to incrementing circuitry <b>1202</b>, which adds &#x201c;1&#x201d; to the address and supplies this incremented address (RD_addr<b>2</b>) to a second Read Address Port of the dual port RAM <b>1201</b>. (In alternative embodiments, decrementing circuitry could be used to generate an address of an adjacent memory location.) With this arrangement, the address causes two gain values to be supplied at corresponding outputs of the dual port RAM <b>1201</b>, the two values being the values stored at adjacent locations within the dual port RAM <b>1201</b>. A linear interpolator <b>1203</b> receives these values and, using a weight determined by the LSBs of the amplitude of the transmitted signal, generates and supplies an interpolated value that is used as the gain amount, G.</p>
<p id="p-0071" num="0090">Adaptation of the LUT involves feeding back the gain amount, G<sub>AM</sub>, and adding it (by means of an adding circuit <b>1205</b>) to the amplitude error amount, AM<sub>ERR </sub>(which is just a sign value). This will cause adaptation to take place by incremental amounts. It will be appreciated that the values that are updated are identified by an address that was used N samples before, where N is the delay in sample clock periods. Accordingly, the MSBs of the amplitude of the transmitted signal are delayed by a programmable delay unit <b>1207</b> for supplying the write address to the RAM <b>1201</b>, and the output of the gain amount, G<sub>AM</sub>, is similarly delayed by a programmable delay unit <b>1209</b> prior to its being supplied to the adding circuit <b>1205</b>.</p>
<p id="p-0072" num="0091">It will be further appreciated that by updating a single address within the dual port RAM <b>1201</b>, and keeping in mind the fact that for each address, two locations are accessed for interpolation (i.e., the location specified by the address and an adjacent location within the dual port RAM <b>1201</b>, such as the location identified by address plus 1) two ranges are updated: the range spanning address through address+1, and also the range spanning address&#x2212;1 through address. The range of the two read values correspondingly affects the interpolated value.</p>
<p id="p-0073" num="0092">The AM-PM adaptive LUT <b>1300</b>, an exemplary embodiment of which is shown in <figref idref="DRAWINGS">FIG. 13</figref>, operates in a similar manner as the AM-PM adaptive LUT <b>1200</b>, but generates phase correction amounts instead of gain amounts, G. Accordingly, the AM-PM adaptive LUT <b>1300</b> includes a dual port RAM <b>1301</b> that provides dual-cell reading and single-cell writing operations. The circuitry is configured so that for each supplied sample, a dual READ/single WRITE access is performed. In some but not necessarily all embodiments, a form of gating can be included for write accesses, but omitting it achieves more stable loop performance. One of the principles of operation of the PM-AM adaptive LUT <b>1300</b> is that the amplitude of the transmitted signal should be used to address a corresponding phase amount, &#x3a6;<sub>PM</sub>, that will be used to distort the phase of the signal to be transmitted. However, in some implementations, the circuitry is embodied on a die whose area is constrained, thereby limiting the capacity of the RAM. To overcome this limitation in some embodiments, the circuitry is configured such that some number of least significant bits (LSBs) of the amplitude of the transmitted signal are not used to address the dual port RAM <b>1301</b>. Instead, only the remaining most significant bits (MSBs) are used. This address (RD_addr<b>1</b>) is fed, unchanged, to one Read Address Port of the dual port RAM <b>1301</b>. The address is also supplied to incrementing circuitry <b>1302</b>, which adds &#x201c;1&#x201d; to the address and supplies this incremented address (RD_addr<b>2</b>) to a second Read Address Port of the dual port RAM <b>1301</b>. (In alternative embodiments, decrementing circuitry could be used to generate an address of an adjacent memory location.) With this arrangement, the address causes two phase values to be supplied at corresponding outputs of the dual port RAM <b>1301</b>, the two values being the values stored at adjacent locations within the dual port RAM <b>1301</b>. A linear interpolator <b>1303</b> receives these values and, using a weight determined by the LSBs of the amplitude of the transmitted signal, generates and supplies an interpolated value that is used as the phase amount, &#x3a6;<sub>PM</sub>.</p>
<p id="p-0074" num="0093">Adaptation of the LUT involves feeding back the phase amount, &#x3a6;<sub>PM</sub>, and adding it (by means of an adding circuit <b>1305</b>) to the phase error amount, PM<sub>ERR </sub>(which is just a sign value). This will cause adaptation to take place by incremental amounts. It will be appreciated that the values that are updated are identified by an address that was used N samples before, where N is the delay in sample clock periods. Accordingly, the MSBs of the amplitude of the transmitted signal are delayed by a programmable delay unit <b>1307</b> for supplying the write address to the RAM <b>1301</b>, and the output of the phase amount, &#x3a6;<sub>PM</sub>, is similarly delayed by a programmable delay unit <b>1309</b> prior to its being supplied to the adding circuit <b>1305</b>.</p>
<p id="p-0075" num="0094">It will be further appreciated that by updating a single address within the dual port RAM <b>1301</b>, and keeping in mind the fact that for each address, two locations are accessed for interpolation (i.e., the location specified by the address and an adjacent location within the dual port RAM <b>1201</b>, such as the location identified by address plus 1) two ranges are updated: the range spanning address through address+1, and also the range spanning address&#x2212;1 through address. The range of the two read values correspondingly affects the interpolated value.</p>
<p id="p-0076" num="0095">With the arrangement as described above, no absolute computation is performed to get the precise gain and phase values. Consequently, a characteristic of the arrangement is that the non-linearity compensation takes some time to converge to final values. In another aspect of embodiments consistent with some but not necessarily all embodiments the invention, a time-varying and envelope-dependent weight can be used to speed up the convergence time. In practice, one can use the difference to get a better correction value depending on the difference value.</p>
<p id="p-0077" num="0096"><figref idref="DRAWINGS">FIG. 14</figref> is a graph depicting AM/AM correction and <figref idref="DRAWINGS">FIG. 15</figref> is a graph depicting AM/PM correction, both being achievable by some embodiments consistent with the invention. More specifically, <figref idref="DRAWINGS">FIG. 14</figref> is a graph depicting output amplitude (output envelope) as a function of input amplitude (input envelope), and <figref idref="DRAWINGS">FIG. 15</figref> is a graph depicting output phase as a function of input amplitude (input envelope). To speed the convergence time, if the actual envelope of the sample falls within a given sub-interval, for example [0.6, 0.7), then the gain, phase pair for 0.6 is updated by a small quantity (positive/decrease) depending on the feed-back error. As a linear interpolator is used to get the final value, the interval [0.5,0.7) is automatically modified because of the linear interpolation.</p>
<p id="p-0078" num="0097">The LUT should be addressed by the signal envelope or any univocal envelope dependent parameter. In the exemplary embodiments, the squared envelope was chosen to address the table. A linear resolution on the squared envelope translates into a variable resolution on the envelope. The quadratic law allows having better resolution for high envelope values while reduced resolution where noise can dominate (low envelope values). The best way to get the (gain, phase) pair is to perform a complex division between the reference signal and the feed-back one and then to average the results. However, as explained earlier, having to perform a complex division imposes a large processing/hardware overhead on implementations. The present invention proposes to avoid the complex division by using an iterative and seamless approach to minimize the computation cost.</p>
<p id="p-0079" num="0098">The time delay estimation techniques described earlier are advantageously used to provide values for the programmable delays that align signals for comparison. The delay value can be stored and applied accordingly.</p>
<p id="p-0080" num="0099">The various ones of the above-described embodiments for achieving predistortion are advantageous in that they eliminate the complexity associated with having to perform a complex computation to get the correct (gain, phase) pair. In addition, they eliminate the need to use &#x2018;pre-defined&#x2019; signals to determine the predistortion; they can instead be used with modulated signals during the life-time of the device.</p>
<p id="p-0081" num="0100">The invention has been described with reference to particular embodiments. However, it will be readily apparent to those skilled in the art that it is possible to embody the invention in specific forms other than those of the embodiment described above. The described embodiments are merely illustrative and should not be considered restrictive in any way. The scope of the invention is given by the appended claims, rather than the preceding description, and all variations and equivalents which fall within the range of the claims are intended to be embraced therein.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method of measuring an amount of delay between a digital reference signal and a digital derived signal, wherein the derived signal is derived from the reference signal, the method comprising:
<claim-text>operating an apparatus that measures the amount of delay by:</claim-text>
<claim-text>ascertaining a sign of a slope of the derived signal over a first time interval;</claim-text>
<claim-text>producing a set of time-associated reference signs by ascertaining a sign of a slope of the reference signal over each of a plurality of different time intervals leading up to the first time interval;</claim-text>
<claim-text>producing a first set of coincidence results by detecting coincidence between the sign of the slope of the derived signal and each one of the time-associated reference signs in the set of time-associated reference signs; and</claim-text>
<claim-text>using the first set of coincidence results alone or in combination with other coincidence results as an indicator of the amount of delay between the reference signal and the derived signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, comprising:
<claim-text>producing one or more additional sets of coincidence results by, for each one of one or more different time intervals:
<claim-text>ascertaining a sign of a slope of the derived signal over the different time interval; and</claim-text>
<claim-text>producing an additional set of time-associated reference signs by ascertaining a sign of a slope of the reference signal over each of a plurality of different time intervals leading up to the different time interval,</claim-text>
</claim-text>
<claim-text>wherein the step of using the first set of coincidence results alone or in combination with other coincidence results as the indicator of the amount of delay between the reference signal and the derived signal comprises using the first set of coincidence results in combination with the one or more additional sets of coincidence results as the indicator of the amount of delay between the reference signal and the derived signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein using the first set of coincidence results in combination with the one or more additional sets of coincidence results as the indicator of the amount of delay between the reference signal and the derived signal comprises:
<claim-text>combining each coincidence result in the first set of coincidence results with a respective one of the coincidence results from each of the one or more additional sets of coincidence results to produce a combined set of coincidence results; and</claim-text>
<claim-text>using the combined set of coincidence results as the indicator of the amount of delay between the reference signal and the derived signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein using the combined set of coincidence results as the indicator of the amount of delay between the reference signal and the derived signal comprises:
<claim-text>identifying which element of the combined set of coincidence results has a minimum value; and</claim-text>
<claim-text>using the identified element's position within the combined set of coincidence results as an indicator of the amount of delay between the digital reference signal and the digital derived signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein using the first set of coincidence results alone or in combination with other coincidence results as the indicator of the amount of delay between the reference signal and the derived signal comprises:
<claim-text>identifying which element of the first set of coincidence results has a minimum value; and</claim-text>
<claim-text>using the identified element's position within the first set of coincidence results as an indicator of the amount of delay between the digital reference signal and the digital derived signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein producing the set of time-associated reference signs by ascertaining the sign of the slope of the reference signal over each of the plurality of different time intervals leading up to the first time interval comprises:
<claim-text>supplying the sign of the slope of the reference signal associated with the first time interval to an input port of a bank of N series-connected delay units and clocking the bank of delay units at a known clock rate, wherein N is greater than 1.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00006">claim 6</claim-ref>, wherein producing the first set of coincidence results by detecting coincidence between the sign of the slope of the derived signal and each one of the time-associated reference signs in the set of time-associated reference signs comprises:
<claim-text>supplying an output of each delay unit within the bank of delay units to one input of a respective one of a plurality of comparison units; and</claim-text>
<claim-text>supplying the sign of the slope of the derived signal to another input of each of the plurality of comparison units.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method of <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein one or more of the comparison units is/are an XOR gate.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The method of <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein using the first set of coincidence results alone or in combination with other coincidence results as the indicator of the amount of delay between the reference signal and the derived signal comprises:
<claim-text>supplying an output of each of the comparison units to a respective one of a plurality of counters;</claim-text>
<claim-text>clocking each of the counters at the known clock rate; and</claim-text>
<claim-text>ascertaining which of the counters is storing a lowest count value.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein:
<claim-text>the digital reference signal is a baseband signal that is supplied for use by a radio transmitter; and</claim-text>
<claim-text>the digital derived signal is produced by:
<claim-text>producing in-phase and quadrature phase digital baseband output signals from a radiofrequency signal that is present at an output port of the radio transmitter.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The method of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the output port is an antenna.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The method of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein ascertaining the sign of the slope of the derived signal over the first time interval comprises:
<claim-text>squaring an envelope of the in-phase and quadrature phase digital baseband output signals;</claim-text>
<claim-text>obtaining a difference value by subtracting the squared envelope of the in-phase and quadrature phase digital baseband output signals from an earlier-obtained squared envelope of the in-phase and quadrature phase digital baseband output signals; and</claim-text>
<claim-text>ascertaining the sign of the difference value.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The method of <claim-ref idref="CLM-00010">claim 10</claim-ref>, comprising:
<claim-text>supplying the digital reference signal to an input port of a reference signal delay unit, wherein the reference signal delay unit supplies a delayed reference signal at an output port;</claim-text>
<claim-text>using the amount of delay between the digital reference signal and the digital derived signal to control the reference signal delay unit; and</claim-text>
<claim-text>comparing the delayed reference signal with the digital derived signal, and using a result of the comparison to control an aspect of the radio transmitter operation.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The method of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein using the result of the comparison to control the aspect of the radio transmitter operation includes controlling predistortion that is applied to the radio transmitter's input signal.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the derived signal comprises an in-phase signal and a quadrature phase signal, and where ascertaining the sign of the slope of the derived signal over the first time interval comprises:
<claim-text>generating a squared envelope signal from the in-phase and quadrature phase signals;</claim-text>
<claim-text>ascertaining a difference between a first sample of the squared envelope signal and a second sample of the squared envelope signal, wherein the first sample of the squared envelope signal occurs at a beginning of the first time interval and the second sample of the squared envelope signal occurs at an end of the first time interval; and</claim-text>
<claim-text>ascertaining a sign of the difference between the first sample of the squared envelope signal and the second sample of the squared envelope signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The method of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the first sample of the squared envelope signal and the second sample of the squared envelope signal are adjacent samples of the squared envelope signal.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the derived signal comprises an in-phase signal and a quadrature phase signal, and where ascertaining the sign of the slope of the derived signal over the first time interval comprises:
<claim-text>generating an envelope signal from the in-phase and quadrature phase signals;</claim-text>
<claim-text>ascertaining a difference between a first sample of the envelope signal and a second sample of the envelope signal, wherein the first sample of the envelope signal occurs at a beginning of the first time interval and the second sample of the envelope signal occurs at an end of the first time interval; and</claim-text>
<claim-text>ascertaining a sign of the difference between the first sample of the envelope signal and the second sample of the envelope signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The method of <claim-ref idref="CLM-00017">claim 17</claim-ref>, wherein the first sample of the envelope signal and the second sample of the envelope signal are adjacent samples of the envelope signal.</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. An apparatus for measuring an amount of delay between a digital reference signal and a digital derived signal, wherein the derived signal is derived from the reference signal, the apparatus comprising:
<claim-text>circuitry configured to ascertain a sign of a slope of the derived signal over a first time interval;</claim-text>
<claim-text>circuitry configured to produce a set of time-associated reference signs by ascertaining a sign of a slope of the reference signal over each of a plurality of different time intervals leading up to the first time interval;</claim-text>
<claim-text>circuitry configured to produce a first set of coincidence results by detecting coincidence between the sign of the slope of the derived signal and each one of the time-associated reference signs in the set of time-associated reference signs; and</claim-text>
<claim-text>circuitry configured to use the first set of coincidence results alone or in combination with other coincidence results as an indicator of the amount of delay between the reference signal and the derived signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The apparatus of <claim-ref idref="CLM-00019">claim 19</claim-ref>, wherein the apparatus is configured to:
<claim-text>produce one or more additional sets of coincidence results by, for each one of one or more different time intervals:
<claim-text>ascertaining a sign of a slope of the derived signal over the different time interval; and</claim-text>
<claim-text>producing an additional set of time-associated reference signs by ascertaining a sign of a slope of the reference signal over each of a plurality of different time intervals leading up to the different time interval,</claim-text>
</claim-text>
<claim-text>wherein the circuitry configured to use the first set of coincidence results alone or in combination with other coincidence results as the indicator of the amount of delay between the reference signal and the derived signal is configured to use the first set of coincidence results in combination with the one or more additional sets of coincidence results as the indicator of the amount of delay between the reference signal and the derived signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. The apparatus of <claim-ref idref="CLM-00020">claim 20</claim-ref>, wherein the circuitry configured to use the first set of coincidence results in combination with the one or more additional sets of coincidence results as the indicator of the amount of delay between the reference signal and the derived signal is configured to:
<claim-text>combine each coincidence result in the first set of coincidence results with a respective one of the coincidence results from each of the one or more additional sets of coincidence results to produce a combined set of coincidence results; and</claim-text>
<claim-text>use the combined set of coincidence results as the indicator of the amount of delay between the reference signal and the derived signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. The apparatus of <claim-ref idref="CLM-00021">claim 21</claim-ref>, wherein in order to use the combined set of coincidence results as the indicator of the amount of delay between the reference signal and the derived signal, the circuitry configured to use the first set of coincidence results in combination with the one or more additional sets of coincidence results as the indicator of the amount of delay between the reference signal and the derived signal is configured to:
<claim-text>identify which element of the combined set of coincidence results has a minimum value; and</claim-text>
<claim-text>use the identified element's position within the combined set of coincidence results as an indicator of the amount of delay between the digital reference signal and the digital derived signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00023" num="00023">
<claim-text>23. The apparatus of <claim-ref idref="CLM-00019">claim 19</claim-ref>, wherein the circuitry configured to use the first set of coincidence results alone or in combination with other coincidence results as the indicator of the amount of delay between the reference signal and the derived signal is configured to:
<claim-text>identify which element of the first set of coincidence results has a minimum value; and</claim-text>
<claim-text>use the identified element's position within the first set of coincidence results as an indicator of the amount of delay between the digital reference signal and the digital derived signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00024" num="00024">
<claim-text>24. The apparatus of <claim-ref idref="CLM-00019">claim 19</claim-ref>, wherein the circuitry configured to produce the set of time-associated reference signs by ascertaining the sign of the slope of the reference signal over each of the plurality of different time intervals leading up to the first time interval is configured to:
<claim-text>supply the sign of the slope of the reference signal associated with the first time interval to an input port of a bank of N series-connected delay units and to clock the bank of delay units at a known clock rate, wherein N is greater than 1.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00025" num="00025">
<claim-text>25. The apparatus of <claim-ref idref="CLM-00024">claim 24</claim-ref>, wherein the circuitry configured to produce the first set of coincidence results by detecting coincidence between the sign of the slope of the derived signal and each one of the time-associated reference signs in the set of time-associated reference signs is configured to:
<claim-text>supply an output of each delay unit within the bank of delay units to one input of a respective one of a plurality of comparison units; and</claim-text>
<claim-text>supply the sign of the slope of the derived signal to another input of each of the plurality of comparison units.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00026" num="00026">
<claim-text>26. The apparatus of <claim-ref idref="CLM-00025">claim 25</claim-ref>, wherein one or more of the comparison units is/are an XOR gate.</claim-text>
</claim>
<claim id="CLM-00027" num="00027">
<claim-text>27. The apparatus of <claim-ref idref="CLM-00025">claim 25</claim-ref>, wherein the circuitry configured to use the first set of coincidence results alone or in combination with other coincidence results as the indicator of the amount of delay between the reference signal and the derived signal is configured to:
<claim-text>supply an output of each of the comparison units to a respective one of a plurality of counters;</claim-text>
<claim-text>clock each of the counters at the known clock rate; and</claim-text>
<claim-text>ascertain which of the counters is storing a lowest count value.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00028" num="00028">
<claim-text>28. The apparatus of <claim-ref idref="CLM-00019">claim 19</claim-ref>, wherein:
<claim-text>the apparatus is coupled for use with a radio transmitter;</claim-text>
<claim-text>the digital reference signal is a baseband signal that is supplied for use by the radio transmitter; and</claim-text>
<claim-text>the radio transmitter produces the digital derived signal by:
<claim-text>producing in-phase and quadrature phase digital baseband output signals from a radiofrequency signal that is present at an output port of the radio transmitter.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00029" num="00029">
<claim-text>29. The apparatus of <claim-ref idref="CLM-00028">claim 28</claim-ref>, wherein the output port is an antenna.</claim-text>
</claim>
<claim id="CLM-00030" num="00030">
<claim-text>30. The apparatus of <claim-ref idref="CLM-00028">claim 28</claim-ref>, wherein the circuitry configured to ascertain the sign of the slope of the derived signal over the first time interval is configured to:
<claim-text>square an envelope of the in-phase and quadrature phase digital baseband output signals;</claim-text>
<claim-text>obtain a difference value by subtracting the squared envelope of the in-phase and quadrature phase digital baseband output signals from an earlier-obtained squared envelope of the in-phase and quadrature phase digital baseband output signals; and</claim-text>
<claim-text>ascertain the sign of the difference value.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00031" num="00031">
<claim-text>31. The apparatus of <claim-ref idref="CLM-00028">claim 28</claim-ref>, wherein the apparatus is configured to:
<claim-text>supply the digital reference signal to an input port of a reference signal delay unit, wherein the reference signal delay unit supplies a delayed reference signal at an output port;</claim-text>
<claim-text>use the amount of delay between the digital reference signal and the digital derived signal to control the reference signal delay unit; and</claim-text>
<claim-text>compare the delayed reference signal with the digital derived signal, and use a result of the comparison to control an aspect of the radio transmitter operation.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00032" num="00032">
<claim-text>32. The apparatus of <claim-ref idref="CLM-00031">claim 31</claim-ref>, wherein, in order to use the result of the comparison to control the aspect of the radio transmitter operation, the apparatus is configured to control predistortion that is applied to the radio transmitter's input signal.</claim-text>
</claim>
<claim id="CLM-00033" num="00033">
<claim-text>33. The apparatus of <claim-ref idref="CLM-00019">claim 19</claim-ref>, wherein the derived signal comprises an in-phase signal and a quadrature phase signal, and where the circuitry configured to ascertain the sign of the slope of the derived signal over the first time interval comprises:
<claim-text>circuitry configured to generate a squared envelope signal from the in-phase and quadrature phase signals;</claim-text>
<claim-text>circuitry configured to ascertain a difference between a first sample of the squared envelope signal and a second sample of the squared envelope signal, wherein the first sample of the squared envelope signal occurs at a beginning of the first time interval and the second sample of the squared envelope signal occurs at an end of the first time interval; and</claim-text>
<claim-text>circuitry configured to ascertain a sign of the difference between the first sample of the squared envelope signal and the second sample of the squared envelope signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00034" num="00034">
<claim-text>34. The apparatus of <claim-ref idref="CLM-00033">claim 33</claim-ref>, wherein the first sample of the squared envelope signal and the second sample of the squared envelope signal are adjacent samples of the squared envelope signal.</claim-text>
</claim>
<claim id="CLM-00035" num="00035">
<claim-text>35. The apparatus of <claim-ref idref="CLM-00019">claim 19</claim-ref>, wherein the derived signal comprises an in-phase signal and a quadrature phase signal, and where the circuitry configured to ascertain the sign of the slope of the derived signal over the first time interval comprises:
<claim-text>circuitry configured to generate an envelope signal from the in-phase and quadrature phase signals;</claim-text>
<claim-text>circuitry configured to ascertain a difference between a first sample of the envelope signal and a second sample of the envelope signal, wherein the first sample of the envelope signal occurs at a beginning of the first time interval and the second sample of the envelope signal occurs at an end of the first time interval; and</claim-text>
<claim-text>circuitry configured to ascertain a sign of the difference between the first sample of the envelope signal and the second sample of the envelope signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00036" num="00036">
<claim-text>36. The apparatus of <claim-ref idref="CLM-00035">claim 35</claim-ref>, wherein the first sample of the envelope signal and the second sample of the envelope signal are adjacent samples of the envelope signal.</claim-text>
</claim>
</claims>
</us-patent-grant>
