<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08627132-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08627132</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12645258</doc-number>
<date>20091222</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<us-term-of-grant>
<us-term-extension>1050</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>1</main-group>
<subgroup>12</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>713400</main-classification>
<further-classification>718102</further-classification>
</classification-national>
<invention-title id="d2e53">Autonomous multi-device event synchronization and sequencing technique eliminating master and slave assignments</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5798969</doc-number>
<kind>A</kind>
<name>Yoo et al.</name>
<date>19980800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6247644</doc-number>
<kind>B1</kind>
<name>Horne et al.</name>
<date>20010600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2003/0172179</doc-number>
<kind>A1</kind>
<name>Del Prado Pavon et al.</name>
<date>20030900</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2004/0140919</doc-number>
<kind>A1</kind>
<name>Schafferer</name>
<date>20040700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2009/0182608</doc-number>
<kind>A1</kind>
<name>Tran et al.</name>
<date>20090700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>705  9</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>EP</country>
<doc-number>0137609</doc-number>
<kind>A2</kind>
<date>19850400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00007">
<othercit>International Search Report and Written Opinion of the International Searching Authority issued in International Patent Application No. PCT/US2009/069922, mailed Mar. 9, 2010.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00008">
<othercit>Extended Europan Search Report issued in Application No. 09837200.6-1959 dated Jul. 25, 2013.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>34</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>713400</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>713501</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>713502</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>718102</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>10</number-of-drawing-sheets>
<number-of-figures>11</number-of-figures>
</figures>
<us-related-documents>
<us-provisional-application>
<document-id>
<country>US</country>
<doc-number>61141777</doc-number>
<date>20081231</date>
</document-id>
</us-provisional-application>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20100169695</doc-number>
<kind>A1</kind>
<date>20100701</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Jurgilewicz</last-name>
<first-name>Robert P.</first-name>
<address>
<city>Pepperell</city>
<state>MA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Zemke</last-name>
<first-name>Roger Aaron</first-name>
<address>
<city>Derry</city>
<state>NH</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Jurgilewicz</last-name>
<first-name>Robert P.</first-name>
<address>
<city>Pepperell</city>
<state>MA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Zemke</last-name>
<first-name>Roger Aaron</first-name>
<address>
<city>Derry</city>
<state>NH</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Linear Technology Corporation</orgname>
<role>02</role>
<address>
<city>Milpitas</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Auve</last-name>
<first-name>Glenn A</first-name>
<department>2111</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">An apparatus and method for event synchronization. One or more devices that have a plurality of events to be carried out in a scheduled order in time are connected to a single shared time position clock (TPCLK). There are one or more sequencing controllers coupled with the one or more devices and configured to control the timing of high and low states of the shared TPCLK in accordance with the scheduled order. The synchronization among the plurality of events in the scheduled order is achieved based on the high and low states of the shared TPCLK and such synchronization of the plurality of events in the scheduled order is operated without the presence of master and slave devices.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="137.41mm" wi="188.64mm" file="US08627132-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="195.75mm" wi="141.05mm" orientation="landscape" file="US08627132-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="192.53mm" wi="177.38mm" orientation="landscape" file="US08627132-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="194.39mm" wi="176.95mm" orientation="landscape" file="US08627132-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="193.97mm" wi="163.58mm" orientation="landscape" file="US08627132-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="233.93mm" wi="156.72mm" orientation="landscape" file="US08627132-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="220.13mm" wi="152.15mm" orientation="landscape" file="US08627132-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="194.39mm" wi="163.58mm" orientation="landscape" file="US08627132-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="198.12mm" wi="141.99mm" orientation="landscape" file="US08627132-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="213.70mm" wi="124.12mm" orientation="landscape" file="US08627132-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="206.33mm" wi="169.59mm" orientation="landscape" file="US08627132-20140107-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">RELATED</heading>
<p id="p-0002" num="0001">The present invention claims priority of provisional patent application No. 61/141,777 filed Dec. 31, 2008, the contents of which are incorporated herein in their entirety</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">BACKGROUND</heading>
<p id="p-0003" num="0002">1. Technical Field</p>
<p id="p-0004" num="0003">The present teaching relates to method and system for event synchronization. More specifically, the present teaching relates to method and system for event synchronization without designating master and slave devices and the systems incorporating the same.</p>
<p id="p-0005" num="0004">2. Discussion of Technical Background</p>
<p id="p-0006" num="0005">Many electronic systems require multiple power supplies to achieve the functionality they are designed for. Frequently, such power supplies have to be turned on and off in a specific order with specific time relationships (sequencing) in order to prevent damage to the powered devices. Sometimes the sequencing even involves multiple electronic circuits located in physically different locations or sub-assemblies. Given that, it is commonly understood that to perform sequencing amongst multiple devices, a means of electrical communication between electronic circuits to be sequenced has to occur in a proper manner. Therefore, it is desirable to synchronize multiple events among multiple devices in a cost effective way.</p>
<p id="p-0007" num="0006">Traditionally, approaches developed for a sequencing system include a master device and at least one slave device. The master and slave device(s) are responsive to a single sequencing signal. The master device controls the timing among sequenced events. The duration of the sequenced event is controlled by master or slave devices responsive to an event complete signal. A counter residing in each device keeps track of each sequence position. Often, enable or disable signals may be generated for the sequenced event at any sequence position. Multiple sequenced events may occur at any sequence position. It is the master device that controls the termination of the sequencing operation and typically it is done by controlling when the maximum number of events allowed by the sequence position counter has been realized.</p>
<p id="p-0008" num="0007">Although such prior methods also use a single node, they require master device and slave device designations. Such designations of master and slave properties imply that additional circuits must exist, which implement the master and slave functions. The additional circuits add complexity and consume physical resources. In addition, the prior methods also require a rigid number of potential sequencing positions, i.e., the sequencing operation must go through a fixed number of positions even when some of the positions do not correspond to any scheduled events. For example, in a system using the prior art solutions, if there are N available sequence positions, the single wire communication will toggle into N states during the turn-on phase and N states during the turn-off phase, regardless of whether or not all N states are required. That is, if the last few positions do not really have any event scheduled, rather than completing the sequencing operation when there are no more events, the prior solutions must cycle through all positions before ending the operation. This introduces another waste of resources and leads to a latency between the last sequenced event and &#x201c;steady-state&#x201d; operation. Therefore, a more cost effective and self-organizing sequencing system is needed.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0009" num="0008">The inventions claimed and/or described herein are further described in terms of exemplary embodiments. These exemplary embodiments are described in detail with reference to the drawings. These embodiments are non-limiting exemplary embodiments, in which like reference numerals represent similar structures throughout the several views of the drawings, and wherein:</p>
<p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. 1</figref> depicts an exemplary high level system block diagram for event synchronization among different devices, according to an embodiment of the present teaching;</p>
<p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. 2(</figref><i>a</i>) shows a timing diagram of an exemplary sequencing up operation, according to an embodiment of the present teaching;</p>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 2(</figref><i>b</i>) shows a timing diagram of an exemplary sequencing down operation, according to an embodiment of the present teaching;</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 3</figref> depicts an exemplary implementation of a sequencing controller, according to an embodiment of the present teaching;</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 4(</figref><i>a</i>) illustrates timing diagram showing a relationship among different signals, according to an embodiment of the present teaching;</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 4(</figref><i>b</i>) depicts an exemplary implementation of a TPCLK control unit, according to an embodiment of the present teaching;</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 5</figref> illustrates a timing diagram of signals in a time position clock control unit, according to an embodiment of the present teaching;</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 6</figref> depicts a different exemplary implementation of a sequencing controller, according to an embodiment of the present teaching;</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 7</figref> shows the timing diagram of different signals, according to an embodiment of the present teaching;</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 8(</figref><i>a</i>) shows the timing diagram involved in a one-device self-termination process, according to an embodiment of the present teaching; and</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 8(</figref><i>b</i>) shows the timing diagram involved in a two-device self-termination process, according to an embodiment of the present teaching.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0021" num="0020">The present teaching discloses a sequencing control method for event synchronization among a plurality of devices. Specifically, the present teaching describes a sequencing method and system that uses only one node or a single wire without traditional master device and slave device designations. The disclosed method and system also provides a sequencing approach that is self-actuating and self-terminating as soon as all turn-on or turn-off events have been achieved, eliminating the need for &#x201c;start&#x201d; and/or &#x201c;stop&#x201d; signals. This allows a control of enable/disable event signals in an arbitrary number of sequence positions.</p>
<p id="p-0022" num="0021">The present disclosure offers a novel single wire sequencing system and protocol. The single wire (or node) is connected to all devices requiring event synchronization. The electrical activity on the single wire resembles that of an electronic clock. Thus, for ease of discussion, the electrical activity on the single wire is referred as &#x201c;Time Position Clock&#x201d; or TPCLK in the following description. In the illustrated embodiments, instances where the TPCLK signal is low define an indexed time position. In addition, falling edges of the TPCLK define starting points for events, and rising edges of the TPCLK define the completion of events. As a person skilled in the art would understand, such definition is merely for illustration rather than limitation.</p>
<p id="p-0023" num="0022">The sequencing operation as described herein provides for self-actuation of sequencing events upon the application of device power. Although power may be applied to all devices simultaneously, different devices may require different time periods to configure and stabilize. The present teaching discloses the means to hold a single communication node in a fixed state until all devices are ready to participate in a sequencing process.</p>
<p id="p-0024" num="0023">Due to the self-terminating capability of the present teaching, when there are events scheduled at only M sequence positions out of all N available time positions, where N&#x3e;M, the sequencing approach as disclosed herein is able to self-terminate after M events (without having to cycle through all N time positions). This eliminates any potential latency between the completion of turn-on or turn-off events and the termination of the single wire communication (such latency exists in the prior art solutions). With such latency being removed, the transition from the end of all turn-on or turn-off events to steady-state operation is immediate.</p>
<p id="p-0025" num="0024">Due to a single wire solution without a master and slave configuration, no additional circuit is required to fulfill master/slave functionalities, which reduces the complexity and thus requires less physical area to implement event synchronization without sacrificing quality.</p>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. 1</figref> depicts an exemplary high level system block diagram <b>100</b> for event synchronization among different devices, according to an embodiment of the present teaching. System <b>100</b> comprises a system controller <b>110</b>, a plurality of sets of scheduled events to be synchronized <b>150</b>, <b>160</b>, . . . , <b>170</b> which are to be synchronized via the present teaching described herein, and a plurality of sequencing controllers <b>120</b>, <b>130</b>, . . . , <b>140</b>, which control the sequencing operation among all events scheduled to be synchronized. Exemplary scheduled events include power supply turn-on and turn-off. In this case, the sequencing control from the sequencing controllers pertains to the orderly turn-on and turn-off of the power supplies. In the following discussions, power supplies are used in describing the present teaching. However, it is understood that, although disclosed in the context of a power supply, the sequencing method described herein is not limited to power supplies and may be applied to any application requiring sequencing control.</p>
<p id="p-0027" num="0026">The system controller <b>110</b> controls the on and off state of the system <b>100</b>. Such control signal (On/Off) is sent to the plurality of sequencing controllers to control the on and off state of the system. Another signal connecting all sequencing controllers is the time position clock or TPCLK, which serves as both input and output of the sequencing controllers.</p>
<p id="p-0028" num="0027">When system <b>100</b> is initially powered on, all devices connected to TPCLK pull a TPCLK signal low. After the respective power-on-reset phases of the devices are completed, TPCLK is allowed to be pulled high for a preset time. Internally, all devices connecting to TPCLK sense the high condition under which TPCLK is allowed to be pulled low to define the first time position. In some embodiments, the first device that senses the high condition is the first device that initiates to pull TPCLK down to mark the first time position. Generally, such marked first position starts the sequencing operation.</p>
<p id="p-0029" num="0028">In a sequencing operation, devices that have sequencing events scheduled at the first time position pull TPCLK low for a minimum amount of time. Such a minimum amount of time can be configured in the system. In the meantime, devices that have sequencing events scheduled for some later time positions also pull TPCLK low for the same minimum amount of time. At each time position, TPCLK is held low until each device that has event(s) scheduled at that time position completes the scheduled event(s). The event that requires the longest amount of time to complete stretches the TPCLK low time accordingly. Thus, if none of the devices connecting to TPCLK has a sequencing event scheduled for a particular time position, TPCLK is pulled low only for the minimum amount of time. In this case, when TPCLK is released by all devices after the minimum amount of time, TPCLK is pulled high again and the process repeats.</p>
<p id="p-0030" num="0029">In accordance with the TPCLK protocol, as described herein, when a device has completed its sequencing events, the device will release TPCLK, i.e., it no longer pulls TPCLK down. That is, when all devices have completed their sequencing events, TPCLK is no longer pulled down. The sequencing controllers <b>120</b>, <b>130</b>, . . . , <b>140</b> can sense the condition in which TPCLK has an unusually long pull-up state. When this occurs, TPCLK is reset and waits for the next sequencing process.</p>
<p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. 2(</figref><i>a</i>) shows a timing diagram of an exemplary sequencing up operation, according to an embodiment of the present teaching. Although this timing diagram is shown with control of power supplies to three devices, the present teaching is not limited to a particular number of devices and can be expanded to any number of power supplies. In addition, as discussed herein, although the illustration is shown with certain signal polarities, a working example with inverted signal polarities can be similarly devised.</p>
<p id="p-0032" num="0031">In the illustration shown in <figref idref="DRAWINGS">FIG. 2(</figref><i>a</i>), there is a plurality of signals presented along a time line. For instance, the on/off signal <b>200</b>, TPCLK signal <b>205</b>, enable the signal for the first/second/third devices <b>210</b>, <b>220</b>, and <b>230</b>, respectively, and power supply signals to the first/second/third devices <b>215</b>, <b>225</b>, and <b>235</b>, respectively. The discussion is presented in an order of different time periods marked along TPCLK signal, e.g., (<b>1</b>), (<b>2</b>), . . . , (<b>9</b>). Below, signal states at each of such marked time periods are discussed.</p>
<p id="p-0033" num="0032">At time period (<b>1</b>), the system including all three connected sequence controllers is powered on simultaneously. After the power on, TPCLK signal <b>205</b> is pulled low. This is so called power-on-reset (POR) period, which is set long enough such that all sequencing controllers are configured and operating in a logically stable manner. In some embodiments, the optional On/Off signal <b>200</b> is implemented. When the On/Off signal <b>200</b> is in the ON state and all connected sequencing controllers have completed their POR, TPCLK signal <b>205</b> is released, i.e., it is no longer pulled down or it is pulled up. In implementation, the pull up operation can be achieved based on an internal current source or resistors, which will be discussed with reference to <figref idref="DRAWINGS">FIG. 3</figref>. Once TPCLK is pulled high, the connected sequencing controllers connected thereto sense the condition and start to clock themselves, e.g., on the rising edge of TPCLK, and proceed to Time Position <b>1</b> (TP<b>1</b>). In some embodiments, the On/Off signal <b>200</b> may not be implemented. It is noted that even if the ON/OFF signal is not present, the sequence-up process is self-starting.</p>
<p id="p-0034" num="0033">At time period (<b>2</b>), TPCLK remains high for a short period (T<sub>TPCLK(HI)</sub>). The high period is set long enough so that the sequencing controllers all have enough time to sense the pulled up condition on TPCLK.</p>
<p id="p-0035" num="0034">At time period (<b>3</b>), sequencing controllers that are scheduled to enable power supplies at time position <b>1</b> or TP<b>1</b> pull TPCLK low. At the same time, those sequencing controllers that are scheduled to enable power supplies at a future time position also pull TPCLK low but only for a short period, e.g., T<sub>TPCLK(LO)</sub>, corresponding to the minimum pull down time. Generally, T<sub>TPCLK(LO) </sub>is set long enough so that all sequencing controllers have enough time to sense the pulled down condition. In some embodiments, the start of power supply scheduled for enable can be delayed by a programmable period of time, e.g., equal to T<sub>ON</sub><sub><sub2>&#x2014;</sub2></sub><sub>DELAY </sub>after TPCLK is pulled low. As shown, the first power supply enable signal Enable <b>1</b> <b>210</b> occurs a short time (T<sub>ON</sub><sub><sub2>&#x2014;</sub2></sub><sub>DELAY1</sub>&#x3e;0) after TPCLK is pulled low.</p>
<p id="p-0036" num="0035">Once a supply is enabled, the power supply starts to ramp up. It usually takes some time for power to ramp up to a threshold at which it is considered a successful power supply ramp up. This is shown in <figref idref="DRAWINGS">FIG. 2(</figref><i>a</i>) where power supply <b>1</b> ramps up to a certain level within a period of time. To ensure that a power supply successfully ramps up to an acceptable level, an internal power-good timer (counter) may be deployed. This may correspond to a test by which an enabled power supply has to reach a programmable voltage threshold before the power-good counter exceeds a programmable time limit for the respective supply. If for any reason, an enabled power supply fails the power-good test, a fault is issued. In this case, to ensure proper sequencing, all sequenced supplies may be shut down as a reaction to the failure. That is, with this control scheme, power supplies scheduled to enable in some future time positions cannot be enabled if a previous power-good test fails. This prevents applying voltage bias with incorrect order to sensitive loads.</p>
<p id="p-0037" num="0036">In addition, when there are multiple power supplies enabled in the same time position with sufficient turn-on delays in between, applying reasonable amounts of power-good time can be used as a mechanism to shut down a power supply prior to load malfunction, if the supply magnitudes are not reaching a required level within the programmable times. Note that all sequenced supplies may have their own respective programmable time positions, turn-on delays, and power-good watchdog times. When needed, TPCLK low time can be stretched by turn-on delays and the inherent power supply ramp up time(s). This automatic stretching prevents future events from occurring before past events have been qualified.</p>
<p id="p-0038" num="0037">When all power supply enable signals at the same time position, e.g., Enable <b>1</b> in TP<b>1</b>, within each sequencing controller have been qualified, TPCLK is released by such sequencing controllers. For example, in <figref idref="DRAWINGS">FIG. 2(</figref><i>a</i>), when power supply <b>1</b> passes the power-good time test, it releases TPCLK, i.e., allowing TPCLK to be pulled high, which could be done through an internal current source in the sequencing controller. When this occurs, all sequencing controllers are clocked by the rising edge of TPCLK to time position <b>2</b> or TP<b>2</b>.</p>
<p id="p-0039" num="0038">At time period (<b>4</b>), TPCLK remains high for a short period (T<sub>TPCLK(HI)</sub>). Similarly, the length of time to remain high may be designed so that it is an adequate amount of time for sequencing controllers to sense the high condition. After this high period, TPCLK goes down. At the falling edge of TPCLK (in time period (<b>5</b>)), subsequent scheduled power supplies may be sequenced. In this illustrated example, there is no power supply scheduled for TP<b>2</b>. However, as discussed herein, all sequencing controllers that have future scheduled enablement of power supplies will pull TPCLK low at the falling edge of TPCLK for a programmed minimum amount of time (T<sub>TPCLK(LO)</sub>). After this period, TPCLK is then released and pulled high. At this point, all sequencing controllers are clocked by the rising edge of TPCLK to time position <b>3</b> or TP<b>3</b>.</p>
<p id="p-0040" num="0039">In time position TP<b>3</b> (time periods (<b>6</b>) and (<b>7</b>)), sequencing controllers that are scheduled to enable power supplies at TP<b>3</b> pull TPCLK low. In addition, sequencing controllers that are scheduled to enable power supplies at a future time position (after TP<b>3</b>) also pull TPCLK low but only for a short period, e.g., T<sub>TPCLK(LO)</sub>, corresponding to the minimum pull down time. In this particular example in <figref idref="DRAWINGS">FIG. 2(</figref><i>a</i>), sequencing controller <b>2</b> and <b>3</b> have scheduled enablement of power supplies in TP<b>3</b>. Specifically, signal Enable <b>2</b> of sequencing controller <b>2</b> does not have any delay, i.e., T<sub>ON-Delay2</sub>=0, and signal Enable <b>3</b> of sequencing controller <b>3</b> does have a non-zero delay, i.e., T<sub>ON-Delay3</sub>&#x3e;0. Similarly, once enabled, the corresponding power supplies (<b>2</b> and <b>3</b>) may take some time to ramp up to the level that meet certain threshold requirements. When both power supplies (<b>2</b> and <b>3</b>) meet the power-good time requirement, they release TPCLK at (<b>8</b>), i.e., allowing TPCLK to be pulled high.</p>
<p id="p-0041" num="0040">In this example, after power supply <b>3</b> is successfully sequenced, there are no more supplies scheduled for enable within any sequencing controller. In this case, TPCLK remains high. If such a high condition lasts for a period t&#x3e;&#x3e;(T<sub>TPCLK(HI)</sub>+T<sub>TPCLK(LO)</sub>), which can be sensed by all sequencing controllers, it will be considered by all sequencing controllers that the sequence up process is complete. Through this means, a self-terminating scheme can be achieved. In addition, based on this self-terminating scheme, there is no need to have sequencing controllers go through a fixed number of TPCLK transitions.</p>
<p id="p-0042" num="0041">At time period (<b>9</b>), all sequencing controllers pull down TPCLK after sensing that self-termination should start when t&#x3e;&#x3e;(T<sub>TPCLK(HI)</sub>+T<sub>TPCLK(LO)</sub>) is satisfied. When this happens, each sequencing controller may perform some house-keeping operations, e.g., generating a signal indicating that the sequence process is complete or resetting counters to zero.</p>
<p id="p-0043" num="0042">During the above described sequence up process, if the On/Off signal is at the Off state before the sequence up process is completed, then a controller fault may be issued. In this case, to prevent malfunction, all enabled power supplies may be disabled.</p>
<p id="p-0044" num="0043"><figref idref="DRAWINGS">FIG. 2(</figref><i>b</i>) shows a timing diagram showing a general sequence of turning-off events for three power supplies, according to an embodiment of the present teaching. In this figure, similar signals are shown and TPCLK is divided into three exemplary time positions, TP<b>1</b>, TP<b>2</b>, and TP<b>3</b>. Sequencing controllers initiate a sequence down process when the On/Off signal <b>240</b> is pulled down to the Off state at time period (<b>1</b>) in <figref idref="DRAWINGS">FIG. 2(</figref><i>b</i>). In some situations, the sequence order of power supplies to different devices may be the reverse order of how they are powered up. But it does not have to be the case. In general, in a sequencing down process, the order the devices are disabled may be programmed in an order that is reasonable to the particular underlying system.</p>
<p id="p-0045" num="0044">At time period (<b>2</b>), since the On/Off signal is at the Off state, TPCLK is released by all sequencing controllers and pulled high and all sequencing controllers are clocked to time position <b>1</b> or TP<b>1</b> of the sequencing down process. Similar to the sequencing up process, TPCLK remains high for a short period (T<sub>TPCLK(HI)</sub>). The high period is set long enough so that all sequencing controllers have enough time to sense the pulled up condition.</p>
<p id="p-0046" num="0045">At time period (<b>3</b>), sequencing controllers that have power supplies scheduled for disable in TP<b>1</b> pull TPCLK low. At the same time, those sequencing controllers that have power supplies scheduled for disable at a later time position also pull TPCLK low for a short period (T<sub>TPCLK(LO)</sub>, which is set long enough to provide an adequate length of time for all sequencing controllers to sense the pull down condition. As can be seen in <figref idref="DRAWINGS">FIG. 2(</figref><i>b</i>), sequencing controller <b>3</b> first sequences down followed by sequencing controllers <b>2</b> and <b>1</b>.</p>
<p id="p-0047" num="0046">During sequencing down, sequencing controller <b>3</b> pulls TPCLK low after a programmable turn-off delay (T<sub>OFF</sub><sub><sub2>&#x2014;</sub2></sub><sub>DELAY3</sub>) and then disables power supply <b>3</b>. As illustrated, the actual ramping down of power supply <b>3</b> takes some time and disabled power supplies are monitored and are required to fall below a programmed discharge threshold. Similar to the power-good test, for sequencing down, a corresponding test may be employed to ensure that a ramping down power supply reaches a satisfactory level.</p>
<p id="p-0048" num="0047">In this illustrated example, sequencing controller <b>2</b> is also scheduled to disable its power supply during TP<b>1</b> but it has a longer delay (T<sub>OFF</sub><sub><sub2>&#x2014;</sub2></sub><sub>DELAY2</sub>) than that of sequencing controller <b>3</b> (T<sub>OFF</sub><sub><sub2>&#x2014;</sub2></sub><sub>DELAY3</sub>). Both disabled power supplies are monitored and are required to fall below a programmable discharge threshold. Once the discharge threshold is met, TPCLK is released and pulled high and all sequencing controllers are clocked to time position <b>2</b> or TP<b>2</b>.</p>
<p id="p-0049" num="0048">Once pulled high, TPCLK remains high for a short period (T<sub>TPCLK(HI)</sub>) during time period (<b>4</b>). During this period, sequencing controller <b>1</b> which is scheduled for disable in TP<b>2</b> senses the high state of TPCLK and pulls it down to low with a zero delay, i.e., T<sub>OFF</sub><sub><sub2>&#x2014;</sub2></sub><sub>DELAY1</sub>=0. After power supply <b>1</b> is discharged to a programmable discharge threshold, TPCLK is again released at the end of TP<b>2</b>. Then all sequencing controllers are clocked to time position <b>3</b> or TP<b>3</b>.</p>
<p id="p-0050" num="0049">In time period (<b>6</b>), TPCLK remains high. Since there are no more power supplies scheduled for turn-off, TPCLK is kept high for a period t&#x3e;&#x3e;(T<sub>TPCLK</sub>(HI)+T<sub>TPCLK</sub>(LO)). When this extended period of high state is sensed by all sequencing controllers, the sequence down process is considered complete. So, again, the sequencing down process is also self-terminating. Similarly, due to the fact that the sequencing down process is self-terminating, there is no need for the sequencing controllers to go through a fixed number of TPCLK transitions as is done in the prior art.</p>
<p id="p-0051" num="0050">After an extended period of high state and it is determined that the sequencing down process is complete, all sequencing controllers pull down TPCLK at (<b>7</b>). Similar to the sequencing up process, if, during the sequence down process, the On/Off signal is pulled to the On state before sequencing down is complete, then a sequencing controller fault may be generated to indicate the faulty situation. If the On/Off signal is in the Off state and sequencing down is complete, another new sequencing process can be started by pulling the On/Off signal to the On state.</p>
<p id="p-0052" num="0051">As can be seen in <figref idref="DRAWINGS">FIGS. 2(</figref><i>a</i>) and <b>2</b>(<i>b</i>), the time position clock TPCLK provides indexed clock edges that are used to trigger sequential enable/disable control signals. Such control signals are used in a multiple power supply system controlling an ordered sequence of power-on or power-off events. In the following, the description is directed at how TPCLK is generated and how it operates when no event requests are present. In some embodiments, TPCLK can be activated automatically with the application of device power. In some embodiments, TPCLK can also be activated by an external logic stimulus.</p>
<p id="p-0053" num="0052"><figref idref="DRAWINGS">FIG. 3</figref> depicts an exemplary implementation of a sequencing controller <b>300</b>, according to an embodiment of the present teaching. Sequencing controller <b>300</b> comprises a TPCLK control unit <b>310</b>, a switch <b>320</b>, a current source <b>330</b>, and a buffer <b>340</b>. The switch <b>320</b> and the current source <b>330</b> are connected in series. The output of the switch is connected, via a pin <b>370</b>, to an external TPCLK which is also connected to other devices requiring event synchronization. The external TPCLK is also fed back to the TPCLK control unit, as an internal TPCLK via buffer <b>340</b>. Other inputs to the TPCLK control unit <b>310</b> include a clock signal CLOCK, a HOLDB signal, an EXTEND signal, and a RESETB signal.</p>
<p id="p-0054" num="0053">Among inputs to TPCLK control unit <b>310</b>, RESETB is used to initialize the TPCLK control unit after initial power is applied or after a fault condition is cleared. The CLOCK signal is used to advance the internal states of the TPCLK control unit <b>310</b>. The HOLDB signal is used to prevent the TPCLK function from operating by holding the TPCLK output at a logic low. Signal EXTEND is used to prolong or extend a TPCLK logic high for a period longer than usual (to be discussed later), indicating that all internally scheduled sequencing functions have completed.</p>
<p id="p-0055" num="0054">Signal CLOCK is preferably a clock common to all the multiple devices that share TPCLK. In some embodiments, the CLOCK signal is derived from a clock generator deployed to provide a common time-base across multiple devices. In a multiple sequencer device application, it may be desirable to operate the TPCLK function with a phase-locked common time-base. Independent clocks similar in frequency (+/&#x2212;10%) but with unrelated phase may also be applied.</p>
<p id="p-0056" num="0055">Based on its inputs, the TPCLK control unit <b>310</b> produces a time position pull down or TPPD signal, which is used to control the state of TPCLK. Specifically, TPPD signal drives the gate of switch <b>320</b>. When the TPPD signal is logic high, switch <b>320</b> becomes conductive and pulls TPCLK to ground. When TPPD is logic low, switch <b>320</b> becomes non-conductive and TPCLK is pulled up by the current source <b>330</b>. In some embodiments, the current source may be replaced by other suitable devices such as a resistor to achieve the same function.</p>
<p id="p-0057" num="0056">Buffer <b>340</b> functions as a receiver, passing the external TPCLK signal to the TPCLK control unit <b>310</b>. Due to the fact that external devices or other delays may exist affecting the TPCLK output, the received external TPCLK may be asynchronous with the internal clock (CLOCK). To synchronize, the TPCLK control unit <b>310</b> may provide an appropriate circuit capable of synchronizing such signals in order to prevent meta-stable operation. This will be discussed below with reference to <figref idref="DRAWINGS">FIGS. 4 and 5</figref>.</p>
<p id="p-0058" num="0057">To operate, the sequencing controller <b>300</b> also comprises a set of stored power supply parameters <b>350</b>. This includes time position up (TP_up), time position down (TP_down), on-delay (T<sub>ON</sub><sub><sub2>&#x2014;</sub2></sub>Delay), off delay (T<sub>OFF</sub><sub><sub2>&#x2014;</sub2></sub>Delay), or power good time (P-Good-Time). Such parameters may be stored in the sequencing controller <b>300</b> and can be accessed in operation. In some embodiments, such stored parameters may be re-configured to meet application needs. In some embodiments, the sequencing controller <b>300</b> may be designed to be able to control TPCLK based on a plurality sets of parameters such as <b>350</b>, . . . , <b>360</b>. In this case, a single sequencing controller is capable of acting on behalf of several devices requiring event synchronization.</p>
<p id="p-0059" num="0058">Various signals serve as inputs to the TPCLK control unit. <figref idref="DRAWINGS">FIG. 4(</figref><i>a</i>) provides an exemplary timing diagram showing the relationship in time among some of the input signals, TPCLK, and other signals indicating the status of events, according to an embodiment of the present teaching. In <figref idref="DRAWINGS">FIG. 4(</figref><i>a</i>), a total of nine signals are shown, including On signal <b>401</b>, sequencing up (SU) signal <b>402</b>, sequencing down (SD) signal <b>403</b>, sequencing up done internal (SU-DONE-INT) signal <b>404</b>, sequencing down done internal (SD-DONE-INT) signal <b>405</b>, sequencing up done external (SU-DONE-EXT) signal <b>406</b>, sequencing down done external (SD-DONE-EXT) signal <b>407</b>, HOLDB signal <b>408</b>, and EXTEND signal <b>409</b>. As can be seen, when the On signal becomes high, it represents a period in which events scheduled can be carried out (in this example, they are power supply sequencing up and sequencing down). After a short delay, the sequencing up signal SU goes high representing a time region in which a sequencing up operation is taking place. The HOLDB signal goes up at the same time as the SU signal that makes TPCLK be pulled low. When the sequencing up operation is completed, the SU signal goes down and SU-DONE-INT goes up indicating that the sequencing up operation within a particular device has been completed. At the same time, signal EXTEND goes up so that the HOLDB can be extended until the falling edge of the EXTEND signal. By extending the HOLDB period, TPCLK remains to be pulled down, allowing other devices that start the sequencing up operations in the same TPCLK period to complete their sequencing up operations. When all such devices complete their sequencing up operations, the EXTEND signal goes low and so does the HOLDB signal. This causes the SU-DONE-EXT signal to go up, indicating to the external world that the sequencing up operations activated in this TPCLK period have all been completed.</p>
<p id="p-0060" num="0059">After the sequencing up operations have been completed and before the On signal changes its state, there is a period for post sequencing monitoring. When the On signal goes down, it signals the starting point for sequencing down operations. Signal SD goes from a low state to a high state, signaling the starting point of the sequencing down operations. At the same time, HOLDB goes high to allow TPCLK to be pulled low. When the sequencing down operation of a device is completed, the SD signal goes low and SD-DONE-INT goes high, indicating that internal to that device, the sequencing down operation is completed. At that point, signal EXTEND goes high again to extend the high state of HOLDB so that TPCLK remains low. This provides an extended period to allow sequencing down operations of other devices (which activates the sequencing down operations in the same TPCLK period) to complete. When sequencing down operations are completed, signal SD-DONE-EXT goes up, which releases the high state of the EXTEND signal and the HOLDB signal.</p>
<p id="p-0061" num="0060">In <figref idref="DRAWINGS">FIG. 3</figref>, signal TPPD is generated based on the EXTEND and HOLDB signals based on a variety of ways. In some embodiments, the TPCLK control unit <b>310</b> may be implemented based on one or more clocked finite state machines. <figref idref="DRAWINGS">FIG. 4(</figref><i>b</i>) depicts an exemplary implementation <b>400</b> of TPCLK control unit <b>310</b>, according to an embodiment of the present teaching. In this exemplary embodiment, TPCLK control unit <b>400</b> comprises a synchronizer <b>410</b>, a float finite state machine <b>420</b>, and a pull down finite state machine <b>430</b>. In the illustrated embodiment, the float finite state machine and pull down finite state machine are both clocked on the rising edge of the CLOCK signal. Other implementations are also possible.</p>
<p id="p-0062" num="0061">The synchronizer <b>410</b> may be implemented based on registers. It receives the buffered TPCLK feedback signal as input (TPCLK-internal, which may be sampled with the CLOCK signal using, e.g., two D-type flip flops in succession. The output of synchronizer <b>410</b> corresponds to TPCLK-SYNC, which incurs a purposeful M clock cycle latency relative to the input of the synchronizer.</p>
<p id="p-0063" num="0062">The two state machines operate or carry out state transitions based on different combinations of input signals given a prior state they are in. Denote different states as A<sub>n</sub>, B<sub>n</sub>, C<sub>n</sub>, or D<sub>n</sub>, where n=1 represents a state of the float finite state machine and n=2 represents a state of the pull down finite state machine. The pull down finite state machine <b>430</b> receives HOLDB, FLOAT, CLOCK and RESETB as inputs and produces TPPD signal as an output. In operation, whenever RESETB is low, the pull down finite state machine is set to state A<sub>2</sub>. While in state A<sub>2</sub>, the pull down finite state machine forces the TPPD signal high, causing switch <b>320</b> (see <figref idref="DRAWINGS">FIG. 3</figref>) to pull TPCLK low. When input HOLDB is also low, the pull down finite state machine <b>430</b> remains in the A<sub>2 </sub>state. When both RESETB and HOLDB are high, pull down finite state machine <b>430</b> is clocked to state B<sub>2 </sub>and output TPPD remains high. With both RESETB and HOLDB high, the pull down finite state machine <b>430</b> is clocked to state C<sub>2 </sub>and output TPPD is pulled low, allowing current source <b>330</b> to pull TPCLK high. While in state C<sub>2</sub>, the pull down finite state machine <b>430</b> waits for the output from the float finite state machine to pull high. When that happens, the pull down finite state machine <b>430</b> is clocked to state D<sub>2 </sub>and waits for output of the float finite state machine <b>420</b> to become low. When the output of the float finite state machine <b>420</b> becomes low, the pull down finite state machine <b>430</b> returns to state A<sub>2</sub>.</p>
<p id="p-0064" num="0063">In operation, the float finite state machine <b>420</b> receives TPCLK-SYNC, EXTEND, CLOCK and RESETB as inputs and produces Float as an output (see <figref idref="DRAWINGS">FIG. 4</figref>). When input RESETB is low, the float finite state machine <b>420</b> is set to state A<sub>1 </sub>and the Float output is set low. While in state A<sub>1</sub>, if input TPCLK-SYNC is low, the float finite state machine <b>420</b> remains in state A<sub>1</sub>. If input TPCLK-SYNC becomes high, the float finite state machine is clocked to B<sub>1 </sub>and output Float is set high. The float finite state machine <b>420</b> remains in state B<sub>1 </sub>if input EXTEND is high. If input EXTEND is low and input TPCLK-SYNC is high, the float finite state machine <b>420</b> is clocked to state C<sub>1 </sub>and produces a high output Float. The float finite state machine <b>420</b> remains in state C<sub>1 </sub>if input EXTEND is high. If input EXTEND is low and input TPCLK-SYNC is high, the float finite state machine <b>420</b> is clocked to state D<sub>1 </sub>and produces a low Float output. The float finite state machine remains in state D<sub>1 </sub>until input TPCLK-SYNC becomes low. When that happens, the float finite state machine <b>420</b> returns to state A<sub>1</sub>.</p>
<p id="p-0065" num="0064"><figref idref="DRAWINGS">FIG. 5</figref> illustrates a timing diagram of different signals in a TPCLK control unit, according to an embodiment of the present teaching. As seen from <figref idref="DRAWINGS">FIG. 5</figref>, there are two oscillations of the TPCLK signal in this illustrated example. TPCLK starts to oscillate after the release of HOLDB (high state of HOLDB). In addition, each oscillation of TPCLK consists of a low period of two CLOCK cycles and a high period of six CLOCK cycles. In some situations, the number of cycles in which TPCLK remains in a same state may need to be extended. This can be achieved based on input signal EXTEND to a sequencing controller and will be discussed with reference to <figref idref="DRAWINGS">FIGS. 6 and 8</figref>.</p>
<p id="p-0066" num="0065">It should be noted that when HOLDB becomes high (releasing the pull down state on TPCLK), other external devices may still be pulling down TPCLK (not shown here). Given that, since TPCLK is a single wire signal, sequencing operation cannot begin until all devices have released the pull down state on TPCLK. This feature is called self-organizing start up, which is important when multiple devices share TPCLK and one or more devices may not be allowed to sequence when there are unfinished initialization processes.</p>
<p id="p-0067" num="0066">In some embodiments, a time position counter (TPCNT) may be used to keep track of sequencing positions. Such a counter can be implemented based on, e.g., a typical digital counter sensitive to the rising edges of TPCLK (TPCLK-internal). The incrementing value TPCNT of an exemplary TP counter is shown in <figref idref="DRAWINGS">FIG. 5</figref>. The value of TPCNT can be used also for synchronization purposes. For example, if some events are allowed to occur only at certain time positions, the value TPCNT can then be used to control the exact time positions for such events. As another example, sequence-up or sequence-down power supply enable/disable signals may be allowed to occur at time positions greater than zero. To control that, the TPCNT value can be compared against user-defined allowed time positions (e.g., greater than zero). If the time position count TPCNT is equal to the user-defined allowed time position value(s), event requests are allowed to occur at, e.g., the next high to low transition of TPCLK. In some embodiments, such user-defined allowed time positions may be stored in an electronic memory element and such configuration may be dynamically re-configured based on needs.</p>
<p id="p-0068" num="0067">As discussed herein, TPCLK is pulled low in several different situations. First, when any particular TPCLK cycle starts, devices that still have scheduled events to be activated will all pull down TPCLK. For instance, as described herein, when a TPCLK high condition is sensed, all devices that still have pending events to be activated will pull down TPCLK for a specified minimum amount of time. In addition, when an event (e.g., power supply ramping up or ramping down) is activated, TPCLK is pulled low until the event is completed so that the corresponding event request can be terminated. The length of time TPCLK is pulled down may depend on the specific situation. For example, when the activated event is to enable a power supply, the power supply voltage during a ramping up process may be measured and such measured power supply voltage is compared against, e.g., a user defined threshold. As long as the measured power supply voltage is not yet reaching the threshold, TPCLK is pulled low. In this case, the event request (for power supply) will not be terminated, hence TPCLK remains pulled down until the measured power supply voltage reaches or exceeds the threshold.</p>
<p id="p-0069" num="0068">Furthermore, if multiple devices have events activated in the same time position, TPCLK may be pulled down as long as any of such events is still not yet completed even when some of them may have completed. That is, in this case, TPCLK cannot advance to the next time position until all events across multiple devices in a given time position have met their termination criteria. Accordingly, TPCLK is pulled high (after remaining in a low state) only after the termination criteria are satisfied under different conditions.</p>
<p id="p-0070" num="0069">To produce a TPCLK signal that can be pulled down appropriately under different conditions, an additional event request signal or EVREQ can be used in combination with other signals to generate TPCLK. <figref idref="DRAWINGS">FIG. 6</figref> provides a different exemplary implementation of a sequencing controller <b>600</b> that incorporates the use of an event request signal to generate TPCLK, according to an embodiment of the present teaching. In <figref idref="DRAWINGS">FIG. 6</figref>, the sequencing controller <b>600</b> comprises essentially the same components as what is shown in <figref idref="DRAWINGS">FIG. 3</figref> (e.g., a TPCLK control unit <b>610</b>, a switch <b>630</b>, a current source <b>640</b>, and a buffer <b>650</b>) except there is an additional OR circuit <b>620</b>.</p>
<p id="p-0071" num="0070">The logical &#x201c;OR&#x201d; circuit <b>620</b> is deployed for the purposes of stretching the TPCLK pull down time. The OR circuit <b>620</b> takes TPPD from the TPCLK control unit <b>610</b> (same as in <figref idref="DRAWINGS">FIG. 3</figref>) and an event request signal EVREQ as inputs and produces a combined time position pull down control signal as output to control the switch <b>630</b>. Due to the functionality of OR, the combined TPPD signal will not be pulled low as long as either one of the inputs is high. That is, as long as the event request signal EVREQ is high, i.e., the event activated is not yet completed, the combined TPPD is high and TPCLK remains to be pulled down.</p>
<p id="p-0072" num="0071"><figref idref="DRAWINGS">FIG. 7</figref> illustrates that TPCLK is stretched as a function of event request signal EVREQ. <figref idref="DRAWINGS">FIG. 7</figref> also shows that the state of the event request signal or EVREQ remains high for a period of time which may cover different stages necessary for the event to complete. For example, it may cover a delay (e.g., T<sub>ON</sub><sub><sub2>&#x2014;</sub2></sub>delay or T<sub>Off</sub><sub><sub2>&#x2014;</sub2></sub>delay) in an enable signal, e.g., ENDEL as shown <figref idref="DRAWINGS">FIG. 7</figref>, which actually enables the event for the time needed for ramping up/down the event, and/or the time needed to complete any subsequent operations related to the event.</p>
<p id="p-0073" num="0072">In some embodiments, more than one signal to be used to stretch the TPCLK pull down time can be combined through the &#x201c;OR&#x201d; operation. For example, when multiple events are sequenced in the same time position, event requests corresponding to those events may be also used as inputs to the OR circuit <b>620</b>.</p>
<p id="p-0074" num="0073">To facilitate self-termination in both single and multiple device systems, the following disclosure describes a scheme that allows inter-device communication in order for the overall system to detect when all events in all devices have been completed so that self-termination can be initiated. In a single device system, ascertaining when all events have been completed is quite trivial. However, in a multiple device system, to determine when all events from all devices have been completed, inter-device communications among devices has to be supported.</p>
<p id="p-0075" num="0074">To facilitate such inter-device communications to enable self-termination across multiple devices in event synchronization, in some embodiments, a logical indication of each completed event request may be stored in a conventional electrical memory. When all events are complete, framing signals indicating the completion can be generated based on, e.g., a logical &#x201c;AND&#x201d; of the completed event data. Such framing signals may then be used to enable a timeout counter that is cleared whenever TPCLK-internal (see <figref idref="DRAWINGS">FIG. 3</figref> and <figref idref="DRAWINGS">FIG. 6</figref>) is low. However, the EXTEND pulse is also initiated at this time and allows TPCLK to be pulled high.</p>
<p id="p-0076" num="0075">In a single device system with EXTEND signal active, TPCLK will remain high until the timeout counter expires. The counter time can be set considerably longer than the typical TPCLK high time (e.g., the counter time can be set to approximately 32 CLOCK cycles). <figref idref="DRAWINGS">FIG. 8(</figref><i>a</i>) shows the timing diagram involved in a one-device self-termination process, according to an embodiment of the present teaching. In this timing diagram, TPCLK <b>800</b>, HOLDB <b>805</b>, EXTEND <b>810</b>, and both internal and external event-done signals (e.g., internal sequencing up/down signal, SU/SD-DONE-INT <b>815</b>, and external sequencing up/down signal, SU/SD-DONE-EXT <b>820</b>) are shown. As can be seen, HOLDB signal <b>805</b> is high during the event synchronization period and it extends also to cover the period in which signal EXTEND is high. EXTEND signal <b>810</b> goes high when the final event is completed. At the same time, the internal event-done signal (SU/SD-DONE-INT) goes high as well to mark the internal completion. At this time, since the external framing signal remains low, signal EXTEND goes high so that to extend the high state of HOLDB. The EXTEND signal does not become low until the framing signal <b>820</b> for external completion (SU/SD-DONE-EXT) becomes high, indicating that all events have been completed. At this time, EXTEND <b>810</b> and HOLDB <b>805</b> become low.</p>
<p id="p-0077" num="0076">In a multiple device system, when one or more devices have completed event requests while others have not yet completed their events, TPCLK is periodically pulled low, clearing the timeout counters in devices that have completed their events. When the timeout counter in any one device expires, all devices must have completed their corresponding event requests. When this occurs, the framing signals <b>860</b> and <b>865</b> are pulled high, signaling that all connected devices have completed sequencing operations. At this time, both the EXTEND signals for the first and second devices can be terminated and HOLDB signal (which has been extended in a high state as long as either of the EXTEND signal is high) pulls low which causes TPCLK to be pulled low. TPCLK remains low until the next series of sequencing operations are initiated. <figref idref="DRAWINGS">FIG. 8(</figref><i>b</i>) shows the timing diagram involved in a two-device self-termination process, according to an embodiment of the present teaching.</p>
<p id="p-0078" num="0077">While the inventions have been described with reference to the certain illustrated embodiments, the words that have been used herein are words of description, rather than words of limitation. Changes may be made, within the purview of the appended claims, without departing from the scope and spirit of the invention in its aspects. Although the inventions have been described herein with reference to particular structures, acts, and materials, the invention is not to be limited to the particulars disclosed, but rather can be embodied in a wide variety of forms, some of which may be quite different from those of the disclosed embodiments, and extends to all equivalent structures, acts, and, materials, such as are within the scope of the appended claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>We claim:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A system for event synchronization, comprising:
<claim-text>one or more devices having a plurality of events to be carried out in a scheduled order in time and connected to a single shared time position clock (TPCLK);</claim-text>
<claim-text>one or more sequencing controllers coupled with the one or more devices and configured to control the timing of high and low states of the shared TPCLK in accordance with the scheduled order, wherein</claim-text>
<claim-text>synchronization among the plurality of events in the scheduled order is achieved based on the high and low states of the shared TPCLK,</claim-text>
<claim-text>the synchronization of the plurality of events in the scheduled order is operated without the presence of master and slave devices.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the one or more sequencing controllers are configured to enable the synchronization of events in a self-actuating manner.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the one or more sequencing controllers are configured to enable the synchronization of events in a self-terminating manner.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein each of the one or more sequencing controllers controls the state of TPCLK in accordance with a plurality of parameters associated with one or more events to be synchronized.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein each sequencing controller comprises:
<claim-text>a TPCLK control unit configured to generate a time position pull down (TPPD) signal;</claim-text>
<claim-text>a switch having a first terminal coupled to the TPPD signal and configured to generate the TPCLK signal on a second terminal based on the TPPD signal;</claim-text>
<claim-text>a pull up device coupled to the second terminal of the switch to facilitate the generation of the TPCLK that has a state corresponding to an inverted state of the TPPD signal;</claim-text>
<claim-text>a buffer configured to buffer the TPCLK signal to provide a feedback TPCLK to the TPCLK control unit.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The system of <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein the pull up device is a current source.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The system of <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein the switch is implemented based on an NMOS device having its gate connected to the TPPD signal, its source connected to the ground, and drain connected to the TPCLK signal.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The system of <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein the TPCLK control unit generates the TPPD signal based on a plurality of parameters relating to at least one event associated with one or more devices.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The system of <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein the switch generates the TPCLK signal based also on one or more event request signals associated with corresponding one or more events to be synchronized via an underlying sequencing controller.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The system of <claim-ref idref="CLM-00009">claim 9</claim-ref>, wherein the TPPD signal and the one or more event request signals are ORed to generate a combined TPPD signal and the TPCLK signal is generated based on an inverted state of the combined TPPD signal.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the one or more sequencing controllers pulls the TPCLK low for a first period of time whenever the one or more devices is turned on or reset and then releases the TPCLK's low state to allow TPCLK to go high for a second period of time.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The system of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein a sequencing controller corresponding to a device that has an event to be synchronized in a subsequent TPCLK period pulls down TPCLK for a third pre-determined period of time and then releases the TPCLK.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The system of <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein a sequencing controller that corresponds to a device having an event scheduled to be synchronized in a current TPCLK period pulls down TPCLK and releases TPCLK when the event to be synchronized is completed.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The system of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein when TPCLK remains in a high state for a fourth pre-determined period of time, it signals that all events to be synchronized across the one or more devices have been completed so that the synchronization process for the one or more events is self-terminated.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. A method for event synchronization, comprising the steps of:
<claim-text>accessing, by one or more sequencing controllers coupled with the one or more devices, information related to a plurality of events to be carried out in a scheduled order in time in connection with one or more devices, which are connected to a single shared time position clock (TPCLK);</claim-text>
<claim-text>controlling, by one or more sequencing controllers, the timing of high and low states of the shared TPCLK in accordance with the scheduled order;</claim-text>
<claim-text>synchronizing, by the one or more sequencing controllers, the plurality of events in the scheduled order based on the high and low states of the shared TPCLK, wherein</claim-text>
<claim-text>the synchronization among the plurality of events in the scheduled order is operated without the presence of master and slave devices.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The method of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the step of synchronization is performed in a self-actuating manner.</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The method of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the step of synchronization is performed in a self-terminating manner.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The method of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the states of TPCLK are controlled in accordance with a plurality of parameters associated with one or more events to be synchronized.</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The method of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the states of TPCLK are controlled by:
<claim-text>generating a time position pull down (TPPD) signal based on a plurality of inputs; and</claim-text>
<claim-text>generating a state of the shared TPCLK based on the TPPD signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The method of <claim-ref idref="CLM-00019">claim 19</claim-ref>, wherein the TPCLK is generated based on an inverted state of the TPPD signal.</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. The method of <claim-ref idref="CLM-00019">claim 19</claim-ref>, wherein the plurality of inputs include:
<claim-text>parameters relating to at least one event associated with one or more devices; and</claim-text>
<claim-text>a feedback TPCLK signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. The method of <claim-ref idref="CLM-00021">claim 21</claim-ref>, wherein the plurality of inputs further include one or more event request signals associated with corresponding one or more events to be synchronized via an underlying sequencing controller.</claim-text>
</claim>
<claim id="CLM-00023" num="00023">
<claim-text>23. The method of <claim-ref idref="CLM-00022">claim 22</claim-ref>, wherein the TPPD signal and the one or more event request signals are ORed to generate a combined TPPD signal.</claim-text>
</claim>
<claim id="CLM-00024" num="00024">
<claim-text>24. The method of <claim-ref idref="CLM-00023">claim 23</claim-ref>, wherein the TPCLK signal is generated based on an inverted state of the combined TPPD signal.</claim-text>
</claim>
<claim id="CLM-00025" num="00025">
<claim-text>25. The method of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the step of controlling comprises:
<claim-text>pulling, by the one or more sequencing controllers, the TPCLK low for a first period of time whenever the one or more devices is turned on or reset and then releasing the TPCLK's low state to allow TPCLK to go high for a second period of time;</claim-text>
<claim-text>pulling down, by any sequencing controller corresponding to a device that has an event to be synchronized in a subsequent TPCLK period, TPCLK for a third pre-determined period of time and then releasing the low state of TPCLK;</claim-text>
<claim-text>pulling down, by any sequencing controller that corresponds to a device having an event scheduled to be synchronized in a current TPCLK period, TPCLK and releasing the low state of TPCLK when the event to be synchronized is completed.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00026" num="00026">
<claim-text>26. The method of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein when TPCLK remains in a high state for a fourth pre-determined period of time, it signals that all events to be synchronized across the one or more devices have been completed so that the synchronization process for the one or more events is self-terminated.</claim-text>
</claim>
<claim id="CLM-00027" num="00027">
<claim-text>27. A non-transitory machine readable medium having data stored thereon, the data, once read, cause the machine to perform the following:
<claim-text>accessing, by one or more sequencing controllers coupled with the one or more devices, information related to a plurality of events to be carried out in a scheduled order in time in connection with one or more devices, which are connected to a single shared time position clock (TPCLK);</claim-text>
<claim-text>controlling, by one or more sequencing controllers, the timing of high and low states of the shared TPCLK in accordance with the schedule order;</claim-text>
<claim-text>synchronizing, by the one or more sequencing controllers, the plurality of events in the scheduled order based on the high and low states of the shared TPCLK, wherein</claim-text>
<claim-text>the synchronization among the plurality of events in the scheduled order is operated without the presence of master and slave devices.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00028" num="00028">
<claim-text>28. The medium of <claim-ref idref="CLM-00027">claim 27</claim-ref>, wherein the synchronization is performed in a self-actuating manner.</claim-text>
</claim>
<claim id="CLM-00029" num="00029">
<claim-text>29. The medium of <claim-ref idref="CLM-00027">claim 27</claim-ref>, wherein the synchronization is performed in a self-terminating manner.</claim-text>
</claim>
<claim id="CLM-00030" num="00030">
<claim-text>30. The medium of <claim-ref idref="CLM-00027">claim 27</claim-ref>, wherein the states of TPCLK are controlled in accordance with a plurality of parameters associated with one or more events to be synchronized.</claim-text>
</claim>
<claim id="CLM-00031" num="00031">
<claim-text>31. The medium of <claim-ref idref="CLM-00030">claim 30</claim-ref>, wherein the plurality of parameters include:
<claim-text>parameters relating to at least one event associated with one or more devices; and</claim-text>
<claim-text>a feedback TPCLK signal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00032" num="00032">
<claim-text>32. The medium of <claim-ref idref="CLM-00031">claim 31</claim-ref>, wherein the plurality of inputs further include one or more event request signals associated with corresponding one or more events to be synchronized via an underlying sequencing controller.</claim-text>
</claim>
<claim id="CLM-00033" num="00033">
<claim-text>33. The medium of <claim-ref idref="CLM-00027">claim 27</claim-ref>, wherein the step of controlling comprises:
<claim-text>pulling, by the one or more sequencing controllers, the TPCLK low for a first period of time whenever the one or more devices is turned on or reset and then releasing the TPCLK's low state to allow TPCLK to go high for a second period of time;</claim-text>
<claim-text>pulling down, by any sequencing controller corresponding to a device that has an event to be synchronized in a subsequent TPCLK period, TPCLK for a third pre-determined period of time and then releasing the low state of TPCLK;</claim-text>
<claim-text>pulling down, by any sequencing controller that corresponds to a device having an event scheduled to be synchronized in a current TPCLK period, TPCLK and releasing the low state of TPCLK when the event to be synchronized is completed.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00034" num="00034">
<claim-text>34. The medium of <claim-ref idref="CLM-00027">claim 27</claim-ref>, wherein when TPCLK remains in a high state for a fourth pre-determined period of time, it signals that all events to be synchronized across the one or more devices have been completed so that the synchronization process for the one or more events is self-terminated. </claim-text>
</claim>
</claims>
</us-patent-grant>
