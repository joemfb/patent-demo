<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08626854-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08626854</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13007885</doc-number>
<date>20110117</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<us-term-of-grant>
<us-term-extension>109</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>15</main-group>
<subgroup>16</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>709206</main-classification>
<further-classification>709223</further-classification>
<further-classification>709238</further-classification>
<further-classification>709243</further-classification>
<further-classification>709224</further-classification>
</classification-national>
<invention-title id="d2e53">Traffic localization in peer-to-peer networks</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>7089301</doc-number>
<kind>B1</kind>
<name>Labio et al.</name>
<date>20060800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>7509312</doc-number>
<kind>B2</kind>
<name>George et al.</name>
<date>20090300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>  1  1</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>7571251</doc-number>
<kind>B2</kind>
<name>Bowman</name>
<date>20090800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709242</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>7958195</doc-number>
<kind>B2</kind>
<name>Beigi et al.</name>
<date>20110600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709206</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>7970820</doc-number>
<kind>B1</kind>
<name>Sivasubramanian et al.</name>
<date>20110600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709203</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>7979414</doc-number>
<kind>B2</kind>
<name>George et al.</name>
<date>20110700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>707706</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>8180853</doc-number>
<kind>B2</kind>
<name>Lee et al.</name>
<date>20120500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709218</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2002/0138552</doc-number>
<kind>A1</kind>
<name>DeBruine et al.</name>
<date>20020900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709203</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2010/0185753</doc-number>
<kind>A1</kind>
<name>Liu et al.</name>
<date>20100700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709219</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>2011/0060798</doc-number>
<kind>A1</kind>
<name>Cho et al.</name>
<date>20110300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709206</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>EP</country>
<doc-number>2 317 727</doc-number>
<date>20110500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00012">
<othercit>Maymounkov et al. A peer-to-peer Information System Based on the XOR Metric.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00013">
<othercit>Yang Guo et al., &#x201c;PONDER: Performance Aware P2P Video-on-Demand Service&#x201d;, Global Telecommunications Conference, 2007. Globecom '07. IEEE, IEEE, Piscataway, NJ, USA, Nov. 1, 2007, pp. 225-230.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00014">
<othercit>International Search Report dated Apr. 4, 2012, issued in Application No. PCT/US2012/020779.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>15</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>None</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>10</number-of-drawing-sheets>
<number-of-figures>11</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20120185541</doc-number>
<kind>A1</kind>
<date>20120719</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Varvello</last-name>
<first-name>Matteo</first-name>
<address>
<city>Port Monmouth</city>
<state>NJ</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Steiner</last-name>
<first-name>Moritz</first-name>
<address>
<city>Red Bank</city>
<state>NJ</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Varvello</last-name>
<first-name>Matteo</first-name>
<address>
<city>Port Monmouth</city>
<state>NJ</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Steiner</last-name>
<first-name>Moritz</first-name>
<address>
<city>Red Bank</city>
<state>NJ</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Harness, Dickey &#x26; Pierce</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Alcatel Lucent</orgname>
<role>03</role>
<address>
<city>Paris</city>
<country>FR</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Wang</last-name>
<first-name>Liangche A</first-name>
<department>2447</department>
</primary-examiner>
<assistant-examiner>
<last-name>Alriyashi</last-name>
<first-name>Abdulkader M</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">Provided is a method for localizing peer-to-peer traffic. The method includes transmitting, by a first node of a peer-to-peer network, a first message to one or more other nodes associated with the peer-to-peer network. The message includes a request for content and a deadline for when the content is to be received by the first node.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="150.96mm" wi="176.19mm" file="US08626854-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="221.32mm" wi="162.98mm" file="US08626854-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="203.37mm" wi="159.09mm" file="US08626854-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="203.37mm" wi="157.23mm" file="US08626854-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="150.11mm" wi="155.87mm" file="US08626854-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="179.66mm" wi="175.18mm" file="US08626854-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="154.01mm" wi="171.28mm" file="US08626854-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="124.46mm" wi="173.91mm" file="US08626854-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="150.79mm" wi="177.12mm" file="US08626854-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="241.89mm" wi="182.88mm" file="US08626854-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00010" num="00010">
<img id="EMI-D00010" he="234.87mm" wi="170.01mm" file="US08626854-20140107-D00010.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0002" num="0001">Embodiments relate to peer-to-peer file sharing networks and a method for localizing peer-to-peer traffic.</p>
<heading id="h-0002" level="1">DESCRIPTION OF THE RELATED ART</heading>
<p id="p-0003" num="0002">Some versions of peer-to-peer file sharing networks rely on a centralized computer or network of network elements to list all of the available content in the network. Other peer-to-peer file sharing networks do not rely on centralized components to list all of the available content on a network. Rather, the directory is distributed as the content itself is distributed. The technique used to distribute the directory database on all participating clients is sometimes referred to as a distributed hash table (DHT).</p>
<p id="p-0004" num="0003">Whether the network is a centralized type network or a network using a DHT, peers download content from one peer to another without regard to the locality of a peer from which content is shared. As a result, if a peer requests a file contained on another peers' computer, the computer containing the file may be located far away from the peer requesting the file. This results not only in file transfer delays, but increased cost as the link between the peers must go through one or more internet service providers (ISPs). Thus, such peer-to-peer type of connections can create a large amount of traffic on transit links linking ISPs together, thereby increasing costs to network operators.</p>
<p id="p-0005" num="0004">For example, assume there is a popular content file and that there are 10,000 users world-wide that have this file on their computers. Assume 50 of those 10,000 users may be located within a given ISP &#x201c;A&#x201d;. Assume a peer within ISP &#x201c;A&#x201d; is interested in the popular file and requests the directory, either the centralized or DHT type directory for 50 random peers from which to download the file. In such an instance there is a chance of 0.5% of finding a single peer within ISP &#x201c;A.&#x201d; There is a chance close to zero that if 50 peers having the file are randomly identified to the requesting peer, that all 50 peers will be inside ISP &#x201c;A.&#x201d;</p>
<p id="p-0006" num="0005">In such a scenario, while there are an ample number of peers within the same ISP as the peer requesting the file, the chances are that the peer will end up receiving the file from a peer located outside the requesting peers' ISP. This requires unnecessary traffic on a transit link between ISPs.</p>
<p id="p-0007" num="0006"><figref idref="DRAWINGS">FIG. 1</figref> shows a schematic diagram of centralized peer-to-peer system <b>10</b>. The centralized peer-to-peer system <b>10</b> includes computers <b>12</b> which are also referred to as peers and/or nodes <b>12</b> and a central computer <b>14</b>. The peers and/or nodes <b>12</b> are connected to the central computer <b>14</b> via connections <b>16</b>. The connections <b>16</b> may be any suitable connection such as wireless connection, Ethernet connection or combination of any suitable connection hardware or methods.</p>
<p id="p-0008" num="0007">While the peer-to-peer system <b>10</b> shows only four peers and/or nodes <b>12</b> and a single central computer <b>14</b>, it is to be understood that a peer-to-peer system is not limited to the number of peers and/or nodes <b>12</b> shown and central network component of a single central computer <b>14</b>. In fact, the peer-to-peer system <b>10</b> may include many more peers and/or nodes <b>12</b> and many computers, servers or other components may accomplish the tasks of the central computer <b>14</b> shown.</p>
<p id="p-0009" num="0008">In a centralized peer-to-peer system <b>10</b> as shown in <figref idref="DRAWINGS">FIG. 1</figref>, when a peer and/or node <b>12</b> requests content or a file, the request is sent via the connection <b>16</b> to the centralized computer <b>14</b>. Sending requests are well known in peer-to-peer networks.</p>
<p id="p-0010" num="0009">The centralized computer <b>14</b> determines what peers and/or nodes <b>12</b> have the requested content and may respond to the request with information regarding what peers and/or nodes <b>12</b> have the requested content. The centralized computer <b>14</b> may identify several peers and/or nodes <b>12</b> having the requested content and respond with information regarding multiple identified peers and/or nodes <b>12</b>. Once a peer and/or node <b>12</b> or peers and/or nodes <b>12</b> is/are indentified, the requesting peer may then receive the requested file from one of the identified peers.</p>
<p id="p-0011" num="0010">The centralized computer <b>14</b> may make a determination of which peers and/or nodes <b>12</b> among many peers and/or nodes <b>12</b> that may contain the requested content that should be identified to the requesting peer in order to reduce large amounts of data being transmitted over transit links. These decisions may be made to localize peer-to-peer traffic. This determination will be described in more detail later below.</p>
<p id="p-0012" num="0011">For example, one well known file sharing system for peer-to-peer networks is known as BITTORRENT&#x2122;, registered to BitTorrent Inc. The mechanisms the BITTORRENT file sharing system uses to discover peers impact the structure of the P2P network and consequently the data dissemination. Thus, the knowledge of the peer discovery in the BITTORRENT file sharing system is fundamental for a clear understanding of traffic localization. The BITTORRENT file sharing system employs a tracker or central server (e.g., centralized computer <b>14</b>) in order to discover peers and coordinate file exchanges. Peers retrieve the address of the tracker within a torrent they download from the web. A &#x201c;.torrent&#x201d; is a meta data file that contains useful information for the file exchange.</p>
<p id="p-0013" num="0012">Initially, a peer contacts the tracker to retrieve a list of peers that hold the file or a portion of it. The tracker answers with the peer-list, a random subset of active peers generally composed by 50 peers. Afterwards, a peer interacts with the tracker regularly in order to send information about the volume of bytes the peer has downloaded or uploaded. In response, the tracker sends to the peer a new peer-list. The frequency of communications between the client and the tracker is regulated by the tracker via a min interval field contained in the tracker replies. Generally, it is set to 15 minutes.</p>
<p id="p-0014" num="0013">As indicated above, the peer-list is a random subset of active peers. The peer-list in no way includes localization of peers within a network (e.g., an Internet service provider network (ISP) network). Some efforts have been made to leverage the tracker or central server (e.g., centralized computer <b>14</b>) for localization. However, these efforts are outside the scope of this disclosure.</p>
<heading id="h-0003" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0015" num="0014">One embodiment includes a method for localizing content in a peer-to-peer network. The method includes transmitting, by a first node of a peer-to-peer network, a first message to one or more other nodes associated with the peer-to-peer network. The message includes a request for content and a deadline for when the content is to be received by the first node.</p>
<p id="p-0016" num="0015">Another embodiment includes a method for localizing content in a peer-to-peer network. The method includes receiving, by a first node of the peer-to-peer network, a first message from a second node associated with the peer-to-peer network. The first message includes a request for content and a deadline for when the content is to be received. The method includes transmitting, by the first node, a second message to the second node if the deadline has not passed and the first node has information related to the content. The second message indicates the first node has the information related to the content. The method includes transmitting, by the first node, a third message to the second node if the deadline has passed. The third message includes a list of nodes that have one or more other nodes associated with the peer-to-peer network.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0017" num="0016">The present invention will become more fully understood from the detailed description given herein below and the accompanying drawings, wherein like elements are represented by like reference numerals, which are given by way of illustration only and thus are not limiting of the present invention and wherein:</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 1</figref> illustrates a related art schematic diagram of a peer-to-peer file sharing network having centralized components.</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 2</figref> illustrates a schematic diagram of a peer-to-peer file sharing network utilizing a distributed hash table (DHT) in accordance with example embodiments.</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 3</figref> illustrates a schematic diagram of a file sharing network in accordance with example embodiments and illustrates various components of a computer in communication with the file sharing network.</p>
<p id="p-0021" num="0020"><figref idref="DRAWINGS">FIGS. 4A and 4B</figref> illustrate data packets according to example embodiments.</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIGS. 5A-5D</figref> illustrate a flow chart of a method for localizing traffic in a peer-to-peer network according to an example embodiment.</p>
<p id="p-0023" num="0022"><figref idref="DRAWINGS">FIGS. 6A and 6B</figref> illustrate a flow chart of another method for localizing traffic in a peer-to-peer network according to an example embodiment.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<p id="p-0024" num="0023">It should be noted that these Figures are intended to illustrate the general characteristics of methods, structure and/or materials utilized in certain example embodiments and to supplement the written description provided below. These drawings are not, however, to scale and may not precisely reflect the precise structural or performance characteristics of any given embodiment, and should not be interpreted as defining or limiting the range of values or properties encompassed by example embodiments. For example, the relative thicknesses and positioning of molecules, layers, regions and/or structural elements may be reduced or exaggerated for clarity. The use of similar or identical reference numbers in the various drawings is intended to indicate the presence of a similar or identical element or feature.</p>
<heading id="h-0005" level="1">DETAILED DESCRIPTION OF THE EMBODIMENTS</heading>
<p id="p-0025" num="0024">While example embodiments are capable of various modifications and alternative forms, embodiments thereof are shown by way of example in the drawings and will herein be described in detail. It should be understood, however, that there is no intent to limit example embodiments to the particular forms disclosed, but on the contrary, example embodiments are to cover all modifications, equivalents, and alternatives falling within the scope of the claims. Like numbers refer to like elements throughout the description of the figures.</p>
<p id="p-0026" num="0025">Before discussing example embodiments in more detail, it is noted that some example embodiments are described as processes or methods depicted as flowcharts. Although the flowcharts describe the operations as sequential processes, many of the operations may be performed in parallel, concurrently or simultaneously. In addition, the order of operations may be re-arranged. The processes may be terminated when their operations are completed, but may also have additional steps not included in the figure. The processes may correspond to methods, functions, procedures, subroutines, subprograms, etc.</p>
<p id="p-0027" num="0026">Methods discussed below, some of which are illustrated by the flow charts, may be implemented by hardware, software, firmware, middleware, microcode, hardware description languages, or any combination thereof. When implemented in software, firmware, middleware or microcode, the program code or code segments to perform the necessary tasks are stored in a machine or computer readable medium such as a storage medium. A processor(s) performs the necessary tasks.</p>
<p id="p-0028" num="0027">Specific structural and functional details disclosed herein are merely representative for purposes of describing example embodiments of the present invention. This invention may, however, be embodied in many alternate forms and should not be construed as limited to only the embodiments set forth herein.</p>
<p id="p-0029" num="0028">It will be understood that, although the terms first, second, etc. may be used herein to describe various elements, these elements should not be limited by these terms. These terms are only used to distinguish one element from another. For example, a first element could be termed a second element, and, similarly, a second element could be termed a first element, without departing from the scope of example embodiments. As used herein, the term &#x201c;and/or&#x201d; includes any and all combinations of one or more of the associated listed items.</p>
<p id="p-0030" num="0029">It will be understood that when an element is referred to as being &#x201c;connected&#x201d; or &#x201c;coupled&#x201d; to another element, it can be directly connected or coupled to the other element or intervening elements may be present. In contrast, when an element is referred to as being &#x201c;directly connected&#x201d; or &#x201c;directly coupled&#x201d; to another element, there are no intervening elements present. Other words used to describe the relationship between elements should be interpreted in a like fashion (e.g., &#x201c;between&#x201d; versus &#x201c;directly between,&#x201d; &#x201c;adjacent&#x201d; versus &#x201c;directly adjacent,&#x201d; etc.).</p>
<p id="p-0031" num="0030">The terminology used herein is for the purpose of describing particular embodiments only and is not intended to be limiting of example embodiments. As used herein, the singular forms &#x201c;a,&#x201d; &#x201c;an&#x201d; and &#x201c;the&#x201d; are intended to include the plural forms as well, unless the context clearly indicates otherwise. It will be further understood that the terms &#x201c;comprises,&#x201d; &#x201c;comprising,&#x201d; &#x201c;includes&#x201d; and/or &#x201c;including,&#x201d; when used herein, specify the presence of stated features, integers, steps, operations, elements and/or components, but do not preclude the presence or addition of one or more other features, integers, steps, operations, elements, components and/or groups thereof.</p>
<p id="p-0032" num="0031">It should also be noted that in some alternative implementations, the functions/acts noted may occur out of the order noted in the figures. For example, two figures shown in succession may in fact be executed concurrently or may sometimes be executed in the reverse order, depending upon the functionality/acts involved.</p>
<p id="p-0033" num="0032">Unless otherwise defined, all terms (including technical and scientific terms) used herein have the same meaning as commonly understood by one of ordinary skill in the art to which example embodiments belong. It will be further understood that terms, e.g., those defined in commonly used dictionaries, should be interpreted as having a meaning that is consistent with their meaning in the context of the relevant art and will not be interpreted in an idealized or overly formal sense unless expressly so defined herein.</p>
<p id="p-0034" num="0033">Portions of the example embodiments and corresponding detailed description are presented in terms of software, or algorithms and symbolic representations of operation on data bits within a computer memory. These descriptions and representations are the ones by which those of ordinary skill in the art effectively convey the substance of their work to others of ordinary skill in the art. An algorithm, as the term is used here, and as it is used generally, is conceived to be a self-consistent sequence of steps leading to a desired result. The steps are those requiring physical manipulations of physical quantities. Usually, though not necessarily, these quantities take the form of optical, electrical, or magnetic signals capable of being stored, transferred, combined, compared, and otherwise manipulated. It has proven convenient at times, principally for reasons of common usage, to refer to these signals as bits, values, elements, symbols, characters, terms, numbers, or the like.</p>
<p id="p-0035" num="0034">In the following description, illustrative embodiments will be described with reference to acts and symbolic representations of operations (e.g., in the form of flowcharts) that may be implemented as program modules or functional processes include routines, programs, objects, components, data structures, etc., that perform particular tasks or implement particular abstract data types and will be implemented using existing hardware at existing network elements. Such existing hardware may include one or more Central Processing Units (CPUs), digital signal processors (DSPs), application-specific-integrated-circuits, field programmable gate arrays (FPGAs) computers or the like.</p>
<p id="p-0036" num="0035">It should be borne in mind, however, that all of these and similar terms are to be associated with the appropriate physical quantities and are merely convenient labels applied to these quantities. Unless specifically stated otherwise, or as is apparent from the discussion, terms such as &#x201c;processing&#x201d; or &#x201c;computing&#x201d; or &#x201c;calculating&#x201d; or &#x201c;determining&#x201d; of &#x201c;displaying&#x201d; or the like, refer to the action and processes of a computer system, or similar electronic computing device, that manipulates and transforms data represented as physical, electronic quantities within the computer system's registers and memories into other data similarly represented as physical quantities within the computer system memories or registers or other such information storage, transmission or display devices.</p>
<p id="p-0037" num="0036">Note also that the software implemented aspects of the example embodiments are typically encoded on some form of program storage medium or implemented over some type of transmission medium. The program storage medium may be magnetic (e.g., a floppy disk or a hard drive) or optical (e.g., a compact disk read only memory, or &#x201c;CD ROM&#x201d;), and may be read only or random access. Similarly, the transmission medium may be twisted wire pairs, coaxial cable, optical fiber, or some other suitable transmission medium known to the art. The example embodiments not limited by these aspects of any given implementation.</p>
<p id="p-0038" num="0037">The terms &#x201c;peer&#x201d; and &#x201c;node&#x201d; are used interchangeably throughout this disclosure. Generally, a peer refers to the physical hardware within the peer-to-peer network. A peer may also be a node. However, a node may also more generally refer to a logical instance of, for example a file location (e.g., address or reference in a table) within the peer-to-network.</p>
<p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. 2</figref> is a schematic diagram of a peer-to-peer network <b>18</b> in accordance with an example embodiment. In the peer-to-peer network <b>18</b> shown in <figref idref="DRAWINGS">FIG. 2</figref>, there is no central computer <b>14</b>. While not shown, it should be understood that peers <b>40</b>, are connected by connections to each other.</p>
<p id="p-0040" num="0039"><figref idref="DRAWINGS">FIG. 2</figref> shows a peer-to-peer file sharing network <b>18</b>. The network <b>18</b> of <figref idref="DRAWINGS">FIG. 2</figref> does not rely on centralized components to list the network contents, but rather uses a uses a distributed hash table (DHT) <b>19</b> to distribute the directory database to all participating clients. The DHT <b>19</b> is represented in <figref idref="DRAWINGS">FIG. 2</figref> as a broken line connecting all aspects of the network <b>18</b> together.</p>
<p id="p-0041" num="0040">The file sharing network <b>18</b> includes a first internet service provider (ISP) <b>24</b> and a second ISP <b>26</b>. Within the ISP <b>24</b> are various clients, which may also be referred to as peers, nodes or users <b>40</b>. The various clients, peers or users will be distinguished from amongst other peers on the same ISP by adding a letter behind the reference numeral.</p>
<p id="p-0042" num="0041">A second ISP <b>26</b> is also shown having various peers <b>42</b>. The first ISP <b>24</b> and the second ISP <b>26</b> may be connected together via a peering link <b>28</b>.</p>
<p id="p-0043" num="0042">The Internet at large <b>22</b> is illustrated in <figref idref="DRAWINGS">FIG. 2</figref>. ISP <b>24</b> may be connected to the internet at large <b>22</b> by a transit link <b>30</b>. A transit link <b>30</b> may also connect ISP <b>26</b> to the internet at large <b>22</b>. Peers located on the internet at large <b>22</b> are identified by reference number <b>44</b>. Like the peers <b>40</b> and <b>42</b>, the peers <b>44</b> on the Internet at large <b>22</b> are associated with at least one ISP. However the ISP's associated with the peers <b>44</b> on the Internet at large <b>22</b> are not shown.</p>
<p id="p-0044" num="0043">Due to the amount of resources (for example, peering links <b>28</b> or transit links <b>30</b>) needed for sharing files between peers <b>40</b>, <b>42</b>, <b>44</b> associated with different ISPs <b>24</b>, <b>26</b>, it may be preferred, whenever possible, to have peers within a particular ISP share files amongst each other rather than sharing files between peers located on different ISPs.</p>
<p id="p-0045" num="0044">The arrows <b>32</b> illustrate a preferred way of file sharing where the peers <b>40</b><i>a</i>, <b>40</b><i>b</i>, and <b>40</b><i>d </i>share files between each other. All of the peers <b>40</b><i>a</i>, <b>40</b><i>b</i>, and <b>40</b><i>d </i>are located on the ISP <b>24</b>. There may be some situations that develop where a peer <b>40</b> located within an ISP <b>24</b> requests a file that is not contained by any peer also located on ISP <b>24</b>. Therefore, in order to obtain the requested content, the peer <b>40</b> must obtain content from a user located either in ISP <b>26</b> or the internet at large <b>22</b>.</p>
<p id="p-0046" num="0045"><figref idref="DRAWINGS">FIG. 3</figref> is a schematic diagram illustrating various ISPs <b>24</b>, <b>26</b>, the internet at large <b>22</b>, and network components (which may also be referred to as computers, or network elements). The network elements <b>45</b> may be distributed throughout the network as shown above with regard to <figref idref="DRAWINGS">FIG. 2</figref>. For example, in peer-to-peer file sharing networks, such a file sharing network <b>18</b> that has no centralized computer <b>14</b>, but rather uses a DHT <b>19</b>, the computer or network elements <b>45</b> may be distributed throughout the file sharing network. Alternatively, the network elements <b>45</b> may be merely connected with the various ISPs <b>24</b> and <b>26</b>, and the Internet at large <b>22</b> via connections <b>46</b>.</p>
<p id="p-0047" num="0046">As shown in <figref idref="DRAWINGS">FIG. 3</figref>, the network elements <b>45</b> may include one or more micro processors <b>48</b> connected via connections <b>50</b> to a database <b>52</b>. The network elements <b>45</b> may also be operatively connected to another database <b>53</b> via connections <b>55</b>. The database <b>53</b> may be searchable and may be able to provide information to the network elements <b>45</b> such as what ISP is associated with a given peer as explained in more detail later below.</p>
<p id="p-0048" num="0047">In some embodiments of the invention, the network elements <b>45</b> may be already existing system components connected to the network. Existing network elements <b>45</b> may be programmed to perform the functions described herein. For example, existing networks may include network components programmed to perform the function described herein. In other embodiments, the network elements <b>45</b> may be added to the network (rather than existing network components) and configured to pedal in the functions described herein.</p>
<p id="p-0049" num="0048">The terms peer and node are used interchangeably below. Typically the term peer refers to a physical entity (e.g., computing device) in the peer-to-peer network. Typically the term node refers to both logical (e.g., stored content) and physical entities (e.g., computing device) in the peer-to-peer network. The terms logical identities, keys and/or controlled peers typically refer to logical entries in a DHT (e.g., DHT <b>19</b>).</p>
<p id="p-0050" num="0049">The DHT may store entries as a &#x3c;key, value&#x3e; pairing, where the key is the result of a hash function and the value is some information regarding the entry in the DHT <b>19</b>. For example, the value may be a node identification or name, information about the network or information about the content. Information regarding the file or content may be, for example, the address of the peer hosting that file or content, the value may also include a name of the file, a pointer to a memory location of the file on the peer storing the file or a type of file (e.g., video, audio, program).</p>
<p id="p-0051" num="0050">The hash function may be performed on, for example, infatuation associated with a node and/or content. In example embodiments, a node or peer (e.g., peer <b>40</b><i>a</i>) may have a unique identifier or key and a file or content may have a unique identifier or key.</p>
<p id="p-0052" num="0051">As is known, in traditional peer-to-peer networks using a DHT (e.g., DHT <b>19</b>), a peer that has a content and wants to share the content simply announces the content to the k (typically 10) peers in the DHT whose identifiers (e.g., logical identity or key associated with the peer) are closest to the peers identifier.</p>
<p id="p-0053" num="0052">A peer that wants to download the content, requests to the closest known (e.g., stored in DHT <b>19</b>) peers of the peer that has the content. The closest known peers return an address of the peer that has the content to the peer that wants to download the content. Subsequently, the peer that wants to download the content starts downloading the content from the peer that has the content.</p>
<p id="p-0054" num="0053">For example, as described above, one well known file sharing system for peer-to-peer networks is known as BITTORRENT. The BITTORRENT file sharing system uses the get_peer object to make a content request. A peer sends get_peer messages to the k peers whose node identifications the peer is already aware of.</p>
<p id="p-0055" num="0054">As is known, peers in a BITTORRENT file sharing system respond with messages of other known peers. For example, if the responding peer does not know of any peers including the content, the responding peer replies with a list of known peers that the requesting peer may send a message to in a next iteration, peers which identifiers are closer to the identifier of the requested file. As is known, this iterative process repeats until the get_peer message is replied to with a list of peers that hold a copy or a portion of the requested content. The list of peers may include, for example an address of the peer and a port number to access the content through.</p>
<p id="p-0056" num="0055">As one skilled in the art will appreciate, the above BITTORRENT example does not take into consideration any network relationships between the requesting peer and the peer having the content. The requesting peer downloads the content from the first peer the requesting is made aware of as having the content. Therefore, peers can download content from any other peer regardless their physical location in the network. As a consequence, peer-to-peer networks generate large amount of traffic on the transit links increasing costs to the network operators.</p>
<p id="p-0057" num="0056">If the peer-to-peer network implements traffic localization, the addresses returned to a content request are ordered by their network distance to the requester. IP addresses from the same ISP of the requester being on top of the list.</p>
<p id="p-0058" num="0057">To reduce the large amount of transit traffic that peer-to-peer applications currently generate. Example embodiments introduce the term of &#x201c;delay tolerance&#x201d; to the lexicon of peer-to-peer applications. Delay tolerance defines a certain delay in the retrieval of a file that a user may tolerate. For example, a user might start a download of a movie late in the evening expecting the download to be ready for the next day, when the user wants to enjoy the movie.</p>
<p id="p-0059" num="0058">Example embodiments use this delay tolerance to improve traffic localization in peer-to-peer networks. A file download may be delayed (up to the user tolerable delay) if the file is not locally available. In this way, the probability increases that another peer within the ISP of the requester does have the requested content.</p>
<p id="p-0060" num="0059"><figref idref="DRAWINGS">FIGS. 4A and 4B</figref> illustrate data packets according to example embodiments. As shown in <figref idref="DRAWINGS">FIG. 4A</figref> a data packet may include a header including protocol, size and type fields. The data packet may also include a data section including deadline and parsed search string fields. The data packet of <figref idref="DRAWINGS">FIG. 4A</figref> may be, for example, a TCP message data packet.</p>
<p id="p-0061" num="0060">The protocol field may be one byte in size and include an indication of the protocol used for file sharing. For example, the indicator may indicate a protocol such as eMule or eDonkey&#x2122;, registered to MetaMachine, Inc.</p>
<p id="p-0062" num="0061">The size field may be four bytes in size and include an indication of the size of the data packet/message in bytes. The type field may be one byte in size and include an indication of the type of data packet/message. For example, the indicator may indicate a type such as search request, search result, login, server or ID change.</p>
<p id="p-0063" num="0062">The deadline field may be four bytes in size and include an indication of the time at which content is required by. For example, the deadline may indicate a delay tolerance (as described above) defining a certain delay in the retrieval of a file that a user may tolerate.</p>
<p id="p-0064" num="0063">The parsed search string field may be variable in size and include an indication of the requested content. For example, as is known, the parsed search string may include indications of the requested content. The parsed search string may include Boolean conditions such &#x2018;AND&#x2019;, &#x2018;OR&#x2019; and &#x2018;NOT&#x2019; to exclude or expand the search for content. A user may specify required file type and size and also set an availability threshold (e.g. show me results that are available from at least 5 other clients)</p>
<p id="p-0065" num="0064">As shown in <figref idref="DRAWINGS">FIG. 4B</figref> a data packet may include a header including protocol and type fields. The data packet may also include a data section including deadline and file ID list fields. The data packet of <figref idref="DRAWINGS">FIG. 4B</figref> may be, for example, a UDP message data packet.</p>
<p id="p-0066" num="0065">The protocol field may be one byte in size and include an indication of the protocol used for file sharing. For example, the indicator may indicate a protocol such as eMule or eDonkey. The type field may be one byte in size and include an indication of the type of data packet/message. For example, the indicator may indicate a type such as search request, search result, get sources or found sources.</p>
<p id="p-0067" num="0066">The deadline field may be four bytes in size and include an indication of the time at which content is required by. For example, the deadline may indicate a delay tolerance (as described above) defining a certain delay in the retrieval of a file that a user may tolerate.</p>
<p id="p-0068" num="0067">The file ID list field may be variable in size and include an indication of the requested content. For example, the file ID list may include indications of the file ID for one or more requested contents. A file ID may be calculated by hashing a file's data.</p>
<p id="p-0069" num="0068">As one skilled in the art will recognize, data packets as described with reference to <figref idref="DRAWINGS">FIGS. 4A and 4B</figref> may be varied in many ways based on, for example, the messaging protocol or the file sharing protocol. Example embodiments are not limited to the data packets of <figref idref="DRAWINGS">FIGS. 4A and 4B</figref>.</p>
<p id="p-0070" num="0069"><figref idref="DRAWINGS">FIGS. 5A-5D</figref> illustrate a flow chart of a method for localizing traffic in a peer-to-peer network according to an example embodiment. While describing the steps of the method associated with <figref idref="DRAWINGS">FIGS. 5A and 5B</figref>, reference will be made to the networks of <figref idref="DRAWINGS">FIG. 2</figref> and <figref idref="DRAWINGS">FIG. 3</figref> and the data packets shown in <figref idref="DRAWINGS">FIGS. 4A and 4B</figref>.</p>
<p id="p-0071" num="0070">Referring to <figref idref="DRAWINGS">FIG. 5A</figref>, in step S<b>502</b> a request message is received. For example, the request message may be the message described in more detail below with regard to <figref idref="DRAWINGS">FIG. 6A</figref>. The request message may include a request for content and a deadline for when the content is to be received. For example, the request message may have an associated data packet as shown above in <figref idref="DRAWINGS">FIG. 4A</figref>. Referring to <figref idref="DRAWINGS">FIG. 4A</figref>, the deadline field may include a time value indicating the deadline for when the content is to be received by. The time value may indicate a date and time the content is to be received by. Alternatively, the time value may be a value used to calculate the date and time the content is to be received by.</p>
<p id="p-0072" num="0071">In step S<b>504</b>, the receiving node determines if the receiving node includes the content based on the request message. For example, the response message may include a field indicating the responding node includes at least a portion of the content. And the transmitted response message may include a field indicating the responding node is to transmit the content to the peer. Other processes for determining if the receiving node includes the content and transmitting a response message including an indication of the content are known to those skilled in the art and will not be discussed further for the sake of brevity. However, because the receiving node and the requesting node are associated with the same network, traffic is localized according to example embodiments.</p>
<p id="p-0073" num="0072">In step S<b>506</b>, if the receiving node has the content processing continues to step S<b>520</b>. Otherwise, processing continues to step S<b>508</b>.</p>
<p id="p-0074" num="0073">If the receiving node does not have the content in step S<b>504</b>, then, in step S<b>508</b>, the receiving node determines if receiving node knows of other nodes associated with the same network (e.g., the same ISP) as the node that transmitted the message includes information about the content. In step S<b>510</b>, if the receiving node knows of other nodes associated with the network that include information about the requested content, in step S<b>512</b>, the receiving node transmits a response message to the requesting node. The response message includes a list of nodes with information about the content. Otherwise, processing continues to step S<b>514</b>.</p>
<p id="p-0075" num="0074">For example, in step S<b>508</b> a list of nodes is filtered based on the requesting nodes ISP. The filtered list of nodes may include only those nodes that are associated with a same ISP as the requesting node. The filtered list of nodes may also include nodes with relatively good quality and/or relatively inexpensive connectivity (e.g. peering agreements) with respect to the requestor. In step S<b>512</b> the requesting node is replied to with a response message including a peer-set or list of nodes based on the filtered list of nodes.</p>
<p id="p-0076" num="0075">For example, in step S<b>510</b>, micro-processor <b>46</b> may determine that the requesting node is a member of network <b>24</b>. In addition, micro-processor <b>46</b> may determine that computers <b>3</b>, <b>4</b> and <b>7</b> are members of network <b>24</b>. According to example embodiments, the local peer-set or list of nodes of step S<b>508</b> will include computers <b>3</b>, <b>4</b> and <b>7</b> and not include computers of other networks. In step S<b>512</b>, micro-processor <b>46</b> may transmit a response message including the list of computers <b>3</b>, <b>4</b> and <b>7</b>.</p>
<p id="p-0077" num="0076">If in step S<b>514</b>, the deadline as described above has passed, processing continues to step S<b>540</b>. Otherwise, processing returns to step S<b>508</b>.</p>
<p id="p-0078" num="0077">Referring to <figref idref="DRAWINGS">FIG. 5B</figref>, in step S<b>520</b> the receiving node determines if the receiving node is associated with a same network as the requesting node (the node that transmitted the request message). For example, initially an ISP associated with the requesting node may be determined. For example, micro-processor <b>46</b> may make a comparison of an address associated with the requesting node with network information retrieved from database <b>53</b>. Alternatively and/or in addition to, micro-processor <b>46</b> may use information read from the DHT <b>19</b>. For example, micro-processor <b>46</b> may use information stored in the value field associated with the requesting node.</p>
<p id="p-0079" num="0078">Once the network associated with the requesting node is determined, micro-processor <b>46</b> may make a comparison of the network associated with the requesting node and a network associated the node that received the request message to determine if the networks are the same. For example, the networks may be the same if the networks are a same internet service provider (ISP) network.</p>
<p id="p-0080" num="0079">The parsed search string may be a string indicating the content. As described above, a parsed search string indicating content is known to those skilled in the art. For example, the request message may be a BITTORRENT get_peer message as described above.</p>
<p id="p-0081" num="0080">In step S<b>522</b>, if the receiving node and requesting node are not associated with the same network (as determined in step S<b>520</b>), processing moves to step S<b>530</b>. Otherwise, processing continues to step S<b>524</b>.</p>
<p id="p-0082" num="0081">In step S<b>524</b>, the receiving node transmits a response message to the requesting node. The response message indicates the receiving node has the content. For example, the response message may include a field indicating the responding node includes at least a portion of the content. And the transmitted response message may include a field indicating the responding node is to transmit the content to the peer. Other processes for determining if the receiving node includes the content and transmitting a response message including an indication of the content are known to those skilled in the art and will not be discussed further for the sake of brevity. However, because the receiving node and the requesting node are not associated with the same network, traffic is not localized because receiving node is not associated with the same network as the requesting node.</p>
<p id="p-0083" num="0082">Referring to <figref idref="DRAWINGS">FIG. 5C</figref>, in step S<b>530</b> the receiving node determines if receiving node knows of other nodes associated with the same network (e.g., the same ISP) as the node that transmitted the message includes information about the content. In step S<b>532</b>, if the receiving node knows of other nodes associated with the network that include information about the requested content, in step S<b>534</b>, the receiving node transmits a response message to the requesting node. The response message includes a list of nodes with information about the content. Otherwise, processing continues to step S<b>536</b>.</p>
<p id="p-0084" num="0083">For example, in step S<b>530</b> a list of nodes is filtered based on the requesting nodes ISP. The filtered list of nodes may include only those nodes that are associated with a same ISP as the requesting node. The filtered list of nodes may also include nodes with relatively good quality and/or relatively inexpensive connectivity (e.g. peering agreements) with respect to the requestor. In step S<b>534</b> the requesting node is replied to with a response message including a peer-set or list of nodes based on the filtered list of nodes.</p>
<p id="p-0085" num="0084">For example, in step S<b>532</b>, micro-processor <b>46</b> may determine that the requesting node is a member of network <b>24</b>. In addition, micro-processor <b>46</b> may determine that computers <b>3</b>, <b>4</b> and <b>7</b> are members of network <b>24</b>. According to example embodiments, the local peer-set or list of nodes of step S<b>530</b> will include computers <b>3</b>, <b>4</b> and <b>7</b> and not include computers of other networks. In step S<b>534</b>, micro-processor <b>46</b> may transmit a response message including the list of computers <b>3</b>, <b>4</b> and <b>7</b>.</p>
<p id="p-0086" num="0085">If in step S<b>536</b>, the deadline as described above has passed, processing continues to step S<b>540</b>. Otherwise, processing returns to step S<b>530</b>.</p>
<p id="p-0087" num="0086">Referring to <figref idref="DRAWINGS">FIG. 5D</figref>, in step S<b>540</b>, the receiving node determines if the receiving node knows of other nodes associated with the network (e.g., the ISP) include information about the requested content. In step S<b>542</b>, if the receiving node knows of other nodes associated with the network that include information about the requested content, in step S<b>544</b>, the receiving node transmits a response message to the requesting node. The response message includes a list of nodes with information about the content. Otherwise, processing continues to step S<b>546</b>.</p>
<p id="p-0088" num="0087">For example, in step S<b>540</b> the list of nodes is not as described above with regard to steps S<b>508</b> and S<b>530</b>. Therefore, in step S<b>544</b> the requesting node is replied to with a response message including a peer-set or list of nodes with no distinctions based on a network.</p>
<p id="p-0089" num="0088">In step S<b>546</b>, a list of nodes is determined based on a nodes proximity to a logical identifier (key) of the content. The list of nodes includes nodes that are close to a logical identity of the content. In step S<b>548</b>, a response message is transmitted to the node requesting the content, the response message including the list of nodes based on a nodes proximity to a logical identifier (key) of the content. For example, the response message may include a field indicating the responding node includes at least a portion of the content. And the transmitted response message may include a field indicating the responding node is to transmit the content to the peer. Other processes for determining a list of nodes based on a nodes proximity to a logical identifier of the content and transmitting the list are known to those skilled in the art and will not be discussed further for the sake of brevity.</p>
<p id="p-0090" num="0089"><figref idref="DRAWINGS">FIGS. 6A and 6B</figref> illustrate a flow chart of another method for localizing traffic in a peer-to-peer network according to an example embodiment. While describing the steps of the method associated with <figref idref="DRAWINGS">FIGS. 6A and 6B</figref>, reference will be made to the networks of <figref idref="DRAWINGS">FIG. 2</figref> and <figref idref="DRAWINGS">FIG. 3</figref> and the data packets shown in <figref idref="DRAWINGS">FIGS. 4A and 4B</figref>.</p>
<p id="p-0091" num="0090">Referring to <figref idref="DRAWINGS">FIG. 6A</figref>, in step S<b>605</b>, a message is transmitted. The message may include a request for content and a deadline for when the content is to be received by. For example, the message may have an associated data packet as shown above in <figref idref="DRAWINGS">FIG. 4A</figref>. Referring to <figref idref="DRAWINGS">FIG. 4A</figref>, the deadline field may include a time value indicating the deadline for when the content is to be received by. The time value may indicate a date and time the content is to be received by. Alternatively, the time value may be a value used to calculate the date and time the content is to be received by.</p>
<p id="p-0092" num="0091">The parsed search string may be a string indicating the content. As described above, a parsed search string indicating content is known to those skilled in the art. For example, the message may be a BITTORRENT get_peer message as described above.</p>
<p id="p-0093" num="0092">In step S<b>610</b>, response messages are monitored. In step S<b>615</b>, it is determined if the response messages are messages received in response to a transmitted message. If a response message is received in response to the transmitted message, processing continues to step S<b>620</b>. Otherwise, processing returns to step S<b>610</b>. Monitoring messages and determining if a response message is associated with a transmitted message are known to those skilled in the art and will not be discussed further for the sake of brevity.</p>
<p id="p-0094" num="0093">In step S<b>620</b>, the peer determines if the response message is received from a node associated with the same network as the peer. For example, an address associated with the response message may be compared to an address associated with the peer. If both address are associated with the same network (e.g., an internet service provider (ISP) network), the node and the peer may be determined to be associated with the same network. If the response message is received from a node associated with the same network as the peer processing continues to step S<b>630</b>. Otherwise, processing moves to step S<b>625</b> and the message is queued or stored. For example, the message may be queued or stored in a memory location associated with database <b>52</b>. The message may be queued or stored in relation to the message transmitted in step S<b>605</b>. The message may be queued or stored in order to perform some future processing. For example, the queued or stored message may be processed as described below with regard to <figref idref="DRAWINGS">FIG. 6B</figref>. After the message is queued or stored, processing returns to step S<b>610</b>.</p>
<p id="p-0095" num="0094">In step S<b>630</b>, the peer determines if the response message indicates the responding node has the requested content. If, in step S<b>630</b>, the responding node has the requested content, in step S<b>635</b> a message is transmitted to the responding node having the content. The message may be a request to transmit the content. Otherwise processing moves to step S<b>640</b>. For example, the response message may include a field indicating the responding node includes at least a portion of the content. And the transmitted message may include a field indicating the responding node is to transmit the content to the peer. Other processes for determining if the response message indicates the responding node has the requested content and requesting the content are known to those skilled in the art and will not be discussed further for the sake of brevity.</p>
<p id="p-0096" num="0095">In step S<b>640</b>, the peer determines if the response message includes a list of nodes. If the response message includes a list of nodes, processing continues to step S<b>645</b>. Otherwise, processing returns to step S<b>610</b>. In step S<b>645</b>, the list of nodes is processed and processing returns to step S<b>605</b>. For example, the message may include a field indicating the message includes a list of nodes. The peer may the read the list of nodes and transmit messages to the nodes in the list as described above with regard to step S<b>605</b>. Other processes for determining if the response message includes a list of nodes and processing a list of nodes are known to those skilled in the art and will not be discussed further for the sake of brevity.</p>
<p id="p-0097" num="0096"><figref idref="DRAWINGS">FIG. 6B</figref> illustrates a flow chart of a method for processing queued or stored messages by a peer in a peer-to-peer network according to example embodiments. The queued or stored messages may be messages stored in step S<b>625</b> described above.</p>
<p id="p-0098" num="0097">Referring to <figref idref="DRAWINGS">FIG. 6B</figref>, in step S<b>650</b>, the peer determines if a deadline, as described above, has passed. If the deadline has passed, processing continues to step S<b>655</b>. Otherwise, processing loops at step S<b>650</b>. As described above, processing moves to step S<b>650</b> (and loops) because the receiving node and requesting node are not associated with the same network. Therefore, no action is performed by the receiving node if the receiving node and requesting node are not associated with the same network. No action is performed until after the deadline has passed in step S<b>650</b>. Therefore, traffic localization in the peer-to-peer network (e.g., network <b>24</b>) is improved.</p>
<p id="p-0099" num="0098">In step S<b>655</b>, the peer determines if the content has been located. For example, the client associated with the peer may store an indicator informing the peer that the content has been located. Other processes for determining if the content has been located are known to those skilled in the art and will not be discussed further for the sake of brevity. If the content has not been located, processing continues to step S<b>665</b>. Otherwise, processing moves to step S<b>660</b>. In step S<b>665</b>, the peer determines if all queued or stored messages are to be deleted. For example, a client application may include a setting to only locate content associated with a local network. The setting may be associated with a content request or may be a general setting associated with all content requests. If the setting indicates content should be requested from the local network, the peer may determine to delete all queued or stored messages. If all queued or stored messages are to be deleted, processing moves to step S<b>660</b>. Otherwise, processing continues to step S<b>670</b>.</p>
<p id="p-0100" num="0099">In step S<b>660</b>, the queued or stored messages are deleted. For example, the messages may be queued or stored in a memory location associated with database <b>52</b>. The message may be queued or stored in relation to the message transmitted in step S<b>605</b> (described above). In step S<b>660</b>, the messages associated with the message transmitted in step S<b>605</b> may be deleted from database <b>52</b>.</p>
<p id="p-0101" num="0100">In step S<b>670</b>, the peer determines if the queue is empty. For example, the peer may query database <b>52</b> to determine if there are any messages associated with the message transmitted in step S<b>605</b>. If the queue is empty processing proceeds to some other processing. If the queue is not empty, processing continues to step S<b>675</b> where a message is selected from the queue. For example, a message from the query of database <b>52</b> is selected.</p>
<p id="p-0102" num="0101">In step S<b>680</b>, the peer determines if the selected message indicates the responding node has the requested content. If, in step S<b>680</b>, the responding node has the requested content, in step S<b>685</b> a message is transmitted to the responding node having the content. The message may be a request to transmit the content. Otherwise processing moves to step S<b>690</b>. For example, the response message may include a field indicating the responding node includes at least a portion of the content. And the transmitted message may include a field indicating the responding node is to transmit the content to the peer. Other processes for determining if the response message indicates the responding node has the requested content and requesting the content are known to those skilled in the art and will not be discussed further for the sake of brevity.</p>
<p id="p-0103" num="0102">In step S<b>690</b>, the peer determines if the selected message includes a list of nodes. If the response message includes a list of nodes, processing continues to step S<b>695</b>. Otherwise, processing moves to step S<b>698</b>. In step S<b>695</b>, the list of nodes is processed and processing continues to step S<b>698</b>. For example, the message may include a field indicating the message includes a list of nodes. The peer may the read the list of nodes and transmit messages to the nodes in the list as described above with regard to step S<b>605</b>. Other processes for determining if the response message includes a list of nodes and processing a list of nodes are known to those skilled in the art and will not be discussed further for the sake of brevity.</p>
<p id="p-0104" num="0103">In step S<b>698</b>, the peer determines if the queue is empty. For example, the peer may query database <b>52</b> to determine if there are any messages associated with the message transmitted in step S<b>605</b>. If the queue is empty processing proceeds to some other processing. If the queue is not empty, processing returns to step S<b>675</b>.</p>
<p id="p-0105" num="0104">The steps of the method illustrated in <figref idref="DRAWINGS">FIGS. 6A and 6B</figref> may be iteratively repeated until all of the requested content is requested and downloaded to the requesting peer.</p>
<p id="p-0106" num="0105">Traffic localization in a peer-to-peer network based on the example embodiments of <figref idref="DRAWINGS">FIGS. 5A</figref>, <b>5</b>B, <b>6</b>A and <b>6</b>B may be implemented by modifying the client applications that perform file sharing (e.g., the BITTORRENT file sharing system).</p>
<p id="p-0107" num="0106">Alternative embodiments of the invention may be implemented as a computer program product for use with a computer system, the computer program product being, for example, a series of computer instructions, code segments or program segments stored on a tangible or non-transitory data recording medium (computer readable medium), such as a diskette, CD-ROM, ROM, or fixed disk, or embodied in a computer data signal, the signal being transmitted over a tangible medium or a wireless medium, for example, microwave or infrared. The series of computer instructions, code segments or program segments can constitute all or part of the functionality of the methods of example embodiments described above, and may also be stored in any memory device, volatile or non-volatile, such as semiconductor, magnetic, optical or other memory device.</p>
<p id="p-0108" num="0107">While example embodiments have been particularly shown and described, it will be understood by one of ordinary skill in the art that variations in form and detail may be made therein without departing from the spirit and scope of the claims.</p>
<p id="p-0109" num="0108">The invention being thus described, it will be obvious that the same may be varied in many ways. Such variations are not to be regarded as a departure from the invention, and all such modifications are intended to be included within the scope of the invention.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>We claim:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method, comprising:
<claim-text>transmitting, by a first node of a peer-to-peer network, a first message to at least one node of a plurality of nodes associated with the peer-to-peer network, the message including a request for content and a deadline for when the content is to be received by the first node, the first message includes a data packet, the data packet having a plurality of fields, the plurality of fields including a first field indicating the request for content and a second field indicating the deadline; and</claim-text>
<claim-text>receiving, by the first node, a second message from a second node of the plurality of nodes, the second message including a list of at least one other node of the plurality of nodes that has information about the requested content if the second node does not have the requested content, the list being based on a logical identifier of the requested content,
<claim-text>the list of the second message is a filtered list, filtered by at least one criteria if the deadline has not passed, and</claim-text>
<claim-text>the list of the second message is an unfiltered list if the deadline has passed.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>receiving a second message from a second node, the second node being one of the one or more other nodes of the plurality of nodes;</claim-text>
<claim-text>determining if the second node is associated with a same network as the first node based on the second message; and</claim-text>
<claim-text>storing the second message if the node is not associated with the same network as the first node.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00002">claim 2</claim-ref>, further comprising:
<claim-text>determining if the deadline has passed;</claim-text>
<claim-text>determining if the content has been received; and</claim-text>
<claim-text>one of deleting the second message if the content has been received and processing the second message if the content has not been received.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein processing the second message includes,
<claim-text>determining if the second message indicates the second node includes at least a portion of the content, and</claim-text>
<claim-text>transmitting a third message to the second node, the third message requesting the second node to transmit the content to the first node if the second node includes at least a portion of the content.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00003">claim 3</claim-ref>, wherein processing the second message includes,
<claim-text>determining if the second message includes a list of nodes, and</claim-text>
<claim-text>transmitting, a third message to one or more nodes associated with the list of nodes, the third message including the request for content and the deadline.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>receiving a second message from a second node, the second node being one of the one or more other nodes of the plurality of nodes, the second message indicating the second node includes at least a portion of the content; and</claim-text>
<claim-text>transmitting a third message to the second node, the third message requesting the second node to transmit the content to the first node.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising:
<claim-text>receiving a second message from a second node, the second node being one of the one or more other nodes of the plurality of nodes, the second message including a list of nodes; and</claim-text>
<claim-text>transmitting, a third message to one or more nodes associated with the list of nodes, the third message including the request for content and the deadline.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. A method, comprising:
<claim-text>receiving, by a first node of a peer-to-peer network, a first message from a second node associated with the peer-to-peer network, the first message including a request for content and a deadline for when the content is to be received, the first message including a data packet having a plurality of fields, the plurality of fields including a first field indicating the request for content and a second field indicating the deadline;</claim-text>
<claim-text>transmitting, by the first node, a second message to the second node if the deadline has not passed and the first node has information related to the content, the second message indicating the first node has the information related to the content, the second message including a list of at least one other node associated with the peer-to-peer network having information about the requested content if the first node does not have the requested content, the list being based on a logical identifier of the requested content,
<claim-text>the list of the second message is a filtered list, filtered by at least one criteria if the deadline has not passed; and</claim-text>
<claim-text>the list of the second message is an unfiltered list if the deadline has passed; and</claim-text>
</claim-text>
<claim-text>transmitting, by the first node, a third message to the second node if the deadline has passed, the third message including a first list of nodes that have one or more other nodes associated with the peer-to-peer network.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The method of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the first message includes a data packet, the data packet having a plurality of fields, the plurality of fields including a first field indicating the request for content and a second field indicating the deadline.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The method of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein information related to the content includes one of an indication that the first node has at least a portion of the content and a second list of nodes, the second list of nodes being associated with a same network as the second node.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The method of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the second list of nodes includes nodes associated with the peer-to-peer network that are closer to the content.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The method of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the same network is associated with an internet service provider.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The method of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the first list of nodes are associated with a different network as the second node.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The method of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the first list of nodes includes nodes associated with the peer-to-peer network that are closer to the content.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The method of <claim-ref idref="CLM-00013">claim 13</claim-ref>, wherein the different network is an internet service provider network not associated with the second node. </claim-text>
</claim>
</claims>
</us-patent-grant>
