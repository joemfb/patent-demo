<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08626238-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08626238</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12144977</doc-number>
<date>20080624</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<us-term-of-grant>
<us-term-extension>1359</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>M</subclass>
<main-group>1</main-group>
<subgroup>00</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>B</subclass>
<main-group>1</main-group>
<subgroup>38</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>455561</main-classification>
<further-classification>455560</further-classification>
<further-classification>455 68</further-classification>
<further-classification>455 69</further-classification>
<further-classification>455 6711</further-classification>
<further-classification>455 6713</further-classification>
</classification-national>
<invention-title id="d2e53">Method and apparatus for switching in a TDD system</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6760303</doc-number>
<kind>B1</kind>
<name>Brouwer</name>
<date>20040700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370229</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6823187</doc-number>
<kind>B2</kind>
<name>Hamabe</name>
<date>20041100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455454</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>7039410</doc-number>
<kind>B2</kind>
<name>Jovanovic</name>
<date>20060500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>455444</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>7961689</doc-number>
<kind>B2</kind>
<name>Stratford</name>
<date>20110600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>8009577</doc-number>
<kind>B2</kind>
<name>Karam et al.</name>
<date>20110800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370252</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>8208414</doc-number>
<kind>B2</kind>
<name>Singh et al.</name>
<date>20120600</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2005/0041605</doc-number>
<kind>A1</kind>
<name>Benson</name>
<date>20050200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370280</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2006/0178162</doc-number>
<kind>A1</kind>
<name>Utakouji et al.</name>
<date>20060800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2007/0201402</doc-number>
<kind>A1</kind>
<name>Cho et al.</name>
<date>20070800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>2008/0239978</doc-number>
<kind>A1</kind>
<name>Karam et al.</name>
<date>20081000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370252</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>2009/0316609</doc-number>
<kind>A1</kind>
<name>Singh</name>
<date>20091200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>2009/0316611</doc-number>
<kind>A1</kind>
<name>Stratford et al.</name>
<date>20091200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>CN</country>
<doc-number>101090557</doc-number>
<date>20071200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>WO</country>
<doc-number>2007074949</doc-number>
<date>20070700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>WO</country>
<doc-number>WO 2007/074949</doc-number>
<date>20070700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
</us-citation>
<us-citation>
<nplcit num="00016">
<othercit>U.S. Appl. No. 12/144,913 &#x201c;System and Method for Configurable Time-Division Duplex Interface&#x201d;, Inventors: Singh et al. filed Jun. 24, 2008.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00017">
<othercit>U.S. Appl. No. 12/144,939 &#x201c;System and Method for Synchronized Time-Division Duplex Signal Switching&#x201d;, Inventors: Singh et al. filed Jun. 24, 2008.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00018">
<othercit>U.S. Appl. No. 12/144,961 &#x201c;Method and Apparatus for Frame Detection in a Communication System&#x201d;, Inventors: Stratford et al filed Jun. 24, 2008.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00019">
<othercit>U.S. Appl. No. 12/208,971 &#x201c;Method and Apparatus for Determining an End of a Subframe in a TDD System&#x201d;, Inventors: Stratford et al. filed Sep. 11, 2008.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00020">
<othercit>International Searching Authority, &#x201c;International Search Report&#x201d;, Jan. 29, 2010, Published in: WO.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00021">
<othercit>Japan Patent Office, &#x201c;Notification of Reasons for Rejection&#x201d;, &#x201c;from Foreign Counterpart of U.S. Appl. No. 12/144,977&#x201d;, Apr. 23, 2013, pp. 1-3, Published in: JP.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00022">
<othercit>Chinese Patent Office, &#x201c;Office Action&#x201d;, &#x201c;from Foreign Counterpart of U.S. Appl. No. 12/144,977&#x201d;, May 6, 2013, pp. 1-34, Published in: CN.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>24</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>455450</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>455451</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>4554521</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>4554522</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>455 111</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>455 131</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>455 6711</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>455 6713</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>455561</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>455436-445</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>455453</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>455 68</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>455 69</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>455560</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>370328-332</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>7</number-of-drawing-sheets>
<number-of-figures>7</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20090318089</doc-number>
<kind>A1</kind>
<date>20091224</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Stratford</last-name>
<first-name>Scott</first-name>
<address>
<city>Campbell</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Singh</last-name>
<first-name>Baljit</first-name>
<address>
<city>San Jose</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Stratford</last-name>
<first-name>Scott</first-name>
<address>
<city>Campbell</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Singh</last-name>
<first-name>Baljit</first-name>
<address>
<city>San Jose</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Fogg &#x26; Powers LLC</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>ADC Telecommunications, Inc.</orgname>
<role>02</role>
<address>
<city>Shakopee</city>
<state>MN</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Tran</last-name>
<first-name>Tuan A</first-name>
<department>2648</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A method of switching a communication device between an uplink communication path and a downlink communication path is provided. The method measures a power level of signals on at least one radio frequency for one of the uplink communication path and the downlink communication path. The measured power level is compared with a threshold power level. Switching between an uplink circuit and a downlink circuit is based on the comparison between the measured power level and the threshold power level.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="183.47mm" wi="252.48mm" file="US08626238-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="253.07mm" wi="186.94mm" orientation="landscape" file="US08626238-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="243.84mm" wi="145.29mm" orientation="landscape" file="US08626238-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="253.07mm" wi="186.44mm" file="US08626238-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="250.27mm" wi="174.84mm" file="US08626238-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="252.14mm" wi="169.84mm" file="US08626238-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="242.91mm" wi="197.53mm" file="US08626238-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="251.71mm" wi="172.13mm" orientation="landscape" file="US08626238-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">CROSS REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This application is related to the following applications filed on even date herewith, which are hereby incorporated herein by reference: U.S. patent application Ser. No. 12/144,961, entitled &#x201c;METHOD AND APPARATUS FOR FRAME DETECTION IN A COMMUNICATIONS SYSTEM&#x201d;; U.S. patent application Ser. No. 12/144,939, entitled &#x201c;SYSTEM AND METHOD FOR SYNCHRONIZED TIME-DIVISION DUPLEX SIGNAL SWITCHING;&#x201d;; and U.S. patent application Ser. No. 12/144,913, entitled &#x201c;SYSTEM AND METHOD FOR CONFIGURABLE TIME-DIVISION DUPLEX INTERFACE&#x201d;.</p>
<heading id="h-0002" level="1">BACKGROUND</heading>
<p id="p-0003" num="0002">Communication equipment in a Time-Division Duplexing (TDD) system must be coordinated to switch between uplink and downlink communication at the proper times to enable a properly functioning TDD system. Generally, a host unit coordinates the switching times and the host unit transmits information to wireless terminals regarding the switching times. The wireless terminals use the information to determine when to switch, such that communications from the wireless terminals do not collide with communications from the host unit.</p>
<p id="p-0004" num="0003">In addition to the host and wireless terminals, equipment within the communication network that relays/transmits information between the host unit and the wireless terminal may also need to switch between uplink and downlink communications. In some systems, this network equipment does not have the circuitry required to properly receive, filter, and decode the information signals from the host unit regarding when to switch between upstream and downstream communication.</p>
<heading id="h-0003" level="1">SUMMARY</heading>
<p id="p-0005" num="0004">The following summary is made by way of example and not by way of limitation. In one embodiment, a method of switching a communication device between an uplink communication path and a downlink communication path is provided. The method measures a power level of signals on at least one radio frequency for one of the uplink communication path and the downlink communication path. The measured power level is compared with a threshold power level. Switching between an uplink circuit and a downlink circuit is based on the comparison between the measured power level and the threshold power level.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">DRAWINGS</heading>
<p id="p-0006" num="0005"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram of one embodiment of a communication system for switching between uplink and downlink transmissions;</p>
<p id="p-0007" num="0006"><figref idref="DRAWINGS">FIG. 2</figref> is a diagram of one embodiment of a frame structure;</p>
<p id="p-0008" num="0007"><figref idref="DRAWINGS">FIG. 3</figref> is a block diagram of one embodiment of a communications circuit for switching between uplink and downlink transmissions;</p>
<p id="p-0009" num="0008"><figref idref="DRAWINGS">FIG. 4</figref> is a flow chart illustrating one embodiment of a method of switching between uplink and downlink transmissions;</p>
<p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. 5</figref> is a flow chart illustrating one embodiment of a method of verifying determined end of transmission;</p>
<p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. 6</figref> is a flow chart illustrating one embodiment of another method of verifying a determined end of transmission; and</p>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 7</figref> is a diagram of one embodiment of a frame structure showing the timing of power measurements.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<p id="p-0013" num="0012">In accordance with common practice, the various described features are not drawn to scale but are drawn to emphasize specific features relevant to the present disclosure.</p>
<heading id="h-0005" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 1</figref> is a block diagram of one embodiment of a communication network <b>100</b>. In the embodiment shown in <figref idref="DRAWINGS">FIG. 1</figref>, communication network <b>100</b> comprises a base station <b>102</b> which is communicatively coupled to a distributed antenna system (DAS) <b>103</b>. In other embodiments, DAS <b>103</b> is used to transport radio frequency signals between one or more upstream devices (for example, base station transceiver <b>102</b>, wireless access points, or other sources of radio frequency signals) and one or more downstream wireless devices (for example, wireless terminals <b>112</b>). In some embodiments, base station transceiver <b>102</b> (also referred to herein as &#x201c;base station&#x201d; <b>102</b>) is a part of a telecommunication-service providers' infrastructure and wireless terminals <b>112</b> comprise customer premise equipment. In general, for each radio frequency signal or channel over which base station <b>102</b> communicates with a downstream wireless terminal <b>112</b>, an original downlink radio frequency signal is originally transmitted by base station <b>102</b> for reception by one or more wireless terminals <b>112</b> and an original uplink radio frequency signal is originally transmitted by a wireless terminal <b>112</b> for reception by base station <b>102</b>.</p>
<p id="p-0015" num="0014">Base station <b>102</b> manages communication among wireless terminals <b>112</b>, and between wireless terminals <b>112</b> and other communication networks (not shown) that are coupled to base station <b>102</b>. In one embodiment, base station <b>102</b> manages communication between wireless terminals <b>112</b> and a public switched telephone network (PSTN). In this embodiment, for example, communication network <b>100</b> is a cellular/PCS system and base station <b>102</b> communicates with a base station controller which acts as a voice/PSTN gateway to the PSTN. In another embodiment, base station <b>102</b> manages communication between wireless terminals <b>112</b> and an internet protocol (IP)-based network (such as the internet) via communication with an IP gateway. In this embodiment, base station <b>102</b> performs baseband processing on IP data from an IP gateway and places the IP data onto a channel. In one embodiment, base station <b>102</b> is an IEEE 802.16 compliant base station. Optionally, base station <b>102</b> may also meet the requirements of WiMax, WiBro, LTE, or other consortium. In yet other embodiments, base station <b>102</b> comprises multiple functionalities including managing communications between both a PSTN and an IP-based network.</p>
<p id="p-0016" num="0015">DAS <b>103</b> comprises a hub <b>106</b> communicatively coupled to base station <b>102</b>, and four remote antenna units <b>108</b>-<b>111</b> located remotely from and communicatively coupled to hub <b>106</b>. Each remote antenna unit <b>108</b>-<b>111</b> includes one or more antennas <b>104</b> which are used to communicate wirelessly with wireless terminals <b>112</b>. In this embodiment, hub <b>106</b> is optically coupled to base station <b>102</b>, although in other embodiments, hub <b>106</b> and base station <b>102</b> are communicatively coupled by coaxial cables, wireless antennas, or other communication medium. Similarly, in this embodiment, hub <b>106</b> is optically coupled to each remote antenna unit <b>108</b>-<b>111</b>, although in other embodiments, hub <b>106</b> and remote antenna units <b>108</b>-<b>111</b> are communicatively coupled by coaxial cables, wireless antennas, or other communication medium. In this embodiment, each of remote antenna units <b>108</b>-<b>111</b> includes two antennas <b>104</b>, a primary antenna and a diversity antenna; although in other embodiments only a single antenna <b>104</b> or more than two antennas <b>104</b> are used at each remote antenna unit <b>108</b>-<b>111</b>. In one embodiment, DAS <b>103</b> also includes one or more expansion units <b>114</b> that are communicatively coupled between hub <b>106</b> and remote antenna units <b>110</b>, <b>111</b> to, for example, provide coverage for each floor of a multi-floor building.</p>
<p id="p-0017" num="0016">Base station <b>102</b> uses DAS <b>103</b> to communicate with wireless terminals <b>112</b> via antennas <b>104</b>. Bidirectional communication between base station <b>102</b> and the plurality of wireless terminals <b>112</b> is accomplished through use of a multiple access scheme. In one embodiment, base station <b>102</b> and wireless terminals <b>112</b> communicate using a code-division multiple access (CDMA) scheme. In another embodiment, base station <b>102</b> and wireless terminals <b>112</b> communicate using an orthogonal frequency division multiple access (OFDMA) scheme. In other embodiments, other multiple access schemes are used (e.g. TDMA, FDMA), or more than one multiple access scheme is used including, for example, CDMA for voice communications and OFMDA for data communications.</p>
<p id="p-0018" num="0017">In one embodiment, some or all communications between base station <b>102</b> and wireless terminals <b>112</b> use a time division duplex (TDD) communication scheme. TDD schemes enable bi-directional communication between two devices by having uplink transmissions (from wireless terminal <b>112</b> toward base station <b>102</b>) and downlink transmissions (from base station <b>102</b> toward wireless terminal <b>112</b>) occur at different times. In this embodiment, both uplink and downlink communications share the same frequencies.</p>
<p id="p-0019" num="0018">Although in the embodiment shown in <figref idref="DRAWINGS">FIG. 1</figref>, a single base station <b>102</b> and hub <b>106</b> are shown, it should be understood that in other embodiments a plurality of base stations <b>102</b> and/or hubs <b>108</b> are used. Additionally, although in this embodiment a certain number of remote antenna units <b>108</b>-<b>111</b> are coupled to hub <b>106</b>, in other embodiments other numbers of remote antenna units <b>108</b>-<b>111</b> are coupled to hub <b>106</b>.</p>
<p id="p-0020" num="0019">The following description is directed towards a system based on the TDD scheme described in the IEEE 802.16 standard, however, it should be understood that the scope of the present disclosure is intended to include other embodiments, with appropriate adjustments, modifications, and substitutions to the systems and methods described for application to other TDD schemes.</p>
<p id="p-0021" num="0020">System <b>100</b> enables communication between wireless terminals <b>112</b> and one or more other devices which are communicatively coupled to base station via, for example, a PSTN or internet based network. Wireless terminals <b>112</b> transmit/receive signals to/from remote antenna units <b>108</b>-<b>111</b> via remote antennas <b>104</b>. In this embodiment, wireless terminals <b>112</b> each communicate with one remote antenna unit <b>108</b>-<b>111</b> at a time, except for during certain situations, for example during handoffs. For example, information which is outgoing from a wireless terminal <b>112</b> is transmitted by the wireless terminal <b>112</b> and received at, for example, remote antenna unit <b>108</b> which is communicating with the transmitting wireless terminal <b>112</b>. Remote antenna unit <b>108</b> reproduces the signal received from wireless terminal <b>112</b> and sends the signal along with other signals received from other wireless terminals <b>112</b> transmitting to remote antenna unit <b>104</b> to hub <b>106</b>. Hub <b>106</b> receives information from remote antenna unit <b>108</b> (and other remote antenna units <b>109</b>-<b>111</b>, some through expansion unit <b>114</b>) reproduces the signals received and sends the signals to base station <b>102</b>. Base station <b>102</b> processes the information and transmits the information toward its destination. Incoming information from another network is received by base station <b>102</b>. Base station <b>102</b> forwards the incoming signals to remote antenna units <b>108</b>-<b>111</b> through, for example, hub <b>106</b>. Hub <b>106</b> receives the signal, reproduces the signal, and sends the signal to remote antenna units <b>108</b>-<b>111</b>. In one embodiment, the same downlink signal is sent to each remote antenna unit <b>108</b>-<b>111</b>. In an alternative embodiment, base station <b>102</b> determines which of wireless terminals <b>112</b> is the destination of the information, generates, modulates, and sends a signal containing the information to hub <b>106</b> which sends the information to remote antenna unit <b>108</b> which is communication with the destination wireless terminal <b>112</b>. Here, hub <b>106</b> receives the signal, reproduces the signal, and sends the signal to remote antenna unit <b>108</b>. In either case, remote antenna unit <b>108</b> receives the signal from hub <b>106</b>, reproduces the signal, and sends the signal wirelessly. Wireless terminal <b>112</b> then receives the wireless signal and the information therein is received and processed. In this embodiment, for both uplink and downlink communications, hub <b>106</b> and remote antenna units <b>108</b>-<b>111</b> do not demodulate or unpack the signals transmitted by base station <b>102</b> and wireless terminals <b>112</b>. Instead hub <b>106</b> and remote antenna units <b>108</b>-<b>111</b> act as relays, receiving and reproducing the signals received while performing only minimal processing on the signals.</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 2</figref> illustrates one example of a TDD transmission structure <b>200</b>. In the embodiment illustrated in <figref idref="DRAWINGS">FIG. 2</figref>, transmission structure <b>200</b> comprises a frame (also referred to herein at &#x201c;frame&#x201d; <b>200</b>) having a downlink (DL) subframe <b>202</b> followed by an uplink (UL) subframe <b>204</b>. A portion of a second downlink subframe <b>205</b> of a subsequent TDD frame is also shown. Each start or end of a transmission is referred to herein as a transmission boundary. In this embodiment, each TDD frame <b>200</b> is substantially similar in structure having a 5 ms fixed duration and containing one downlink subframe followed by one uplink subframe. In some embodiments, a portion of TDD frame <b>200</b> is allocated for control data. In other embodiments, TDD frame <b>200</b> may have a variable duration, and/or multiple uplink or downlink subframes may be included within each frame <b>200</b>. Additionally, other embodiments may have an uplink subframe first which is followed by a downlink subframe, or a variation across frames between uplink and downlink subframes starting each frame.</p>
<p id="p-0023" num="0022">The beginning portion of TDD frame <b>200</b> is allocated to downlink subframe <b>202</b>. At the end of the downlink subframe <b>202</b>, a time gap (TTG) <b>206</b> occurs before the start of uplink subframe <b>204</b>. Then, uplink subframe <b>204</b> begins, and another time gap (RTG) <b>208</b> occurs between the end of uplink subframe <b>204</b> and the beginning of the subsequent downlink subframe <b>205</b> of the next frame.</p>
<p id="p-0024" num="0023">During downlink subframe <b>202</b>, base station <b>102</b> is transmitting to one or more of wireless terminals <b>112</b>. During uplink subframe <b>204</b> one or more of wireless terminals <b>112</b> are transmitting to base station <b>102</b>. TTG <b>206</b> between downlink subframe <b>202</b> and uplink subframe <b>204</b> allows time for base station <b>102</b> to switch from transmit to receive mode and for each wireless terminal <b>112</b> to switch from receive to transmit mode. Likewise, RTG <b>208</b> allows time for base station <b>102</b> to switch from receive to transmit mode and wireless terminals <b>112</b> to switch from transmit to receive mode. TTG <b>206</b> and RTG <b>208</b> also allow time margin for such things as base station/mobile synchronization and propagation delay determination/adjustment.</p>
<p id="p-0025" num="0024">In addition to base station <b>102</b> and wireless terminals <b>112</b>, the RF circuitry within DAS <b>103</b> also switches between processing downlink transmissions and uplink transmissions. Similar to base station <b>102</b> and wireless terminals <b>112</b>, the switching of the RF circuitry within DAS <b>103</b> occurs during time gaps TTG <b>206</b> and RTG <b>208</b>. The RF circuitry within hub <b>106</b> as well as RF circuitry within each remote antenna unit <b>108</b>-<b>111</b> performs the uplink and downlink switching.</p>
<p id="p-0026" num="0025">In one embodiment, each frame <b>200</b> has the same duty cycle, such that the duration of downlink subframe <b>202</b> and uplink subframe <b>204</b> are fixed. In an alternative embodiment, the duty cycle is variable such that the duration of downlink subframe <b>202</b> and uplink subframe <b>204</b> are variable on a frame-by-frame basis. For a variable duty cycle, the subframe durations are dynamically assigned during transmission based on system traffic, user preferences, or other parameters. For example, in one embodiment, frame <b>200</b> has 47 total frames and has predetermined downlink subframe lengths of 35, 34, and 33 symbols, and uplink subframe lengths of 12, 13, and 14 symbols as allowed by the communications protocol. A 35 symbol downlink subframe <b>202</b> corresponds to a 12 symbol uplink subframe <b>204</b>. Regardless of the number of symbols in each subframe, the total number of uplink and downlink symbols remains at 47. Thus, if there are fewer symbols in a downlink subframe <b>202</b>, there will be more symbols in the corresponding uplink subframe <b>204</b>. In this embodiment, regardless of whether frames <b>200</b> are fixed or variable duty cycles, the time periods for TTG <b>206</b> and RTG <b>208</b> have a fixed duration.</p>
<p id="p-0027" num="0026">Although in this embodiment, the communication structure used by system <b>100</b> is a frame which comprises two subframes as illustrated in <figref idref="DRAWINGS">FIG. 2</figref>, it should be understood that the scope of the present disclose is intended to include other frame/subframe structures and other communication structures as known to those skilled in the art.</p>
<p id="p-0028" num="0027">Wireless terminals <b>112</b> obtain the timing of downlink subframe <b>202</b> and uplink subframe <b>204</b> from communications sent by base station <b>102</b>. In one embodiment, these communications occur on a separate control channel and wireless terminals <b>112</b> listen to the control channel to obtain the frame and subframe timing. In another embodiment, wireless terminals <b>112</b> obtain the frame and subframe timing from messages sent by base station <b>102</b> within frame <b>200</b> or by listening to current transmissions on the payload channel and ascertaining the timing directly from the transmissions. In any case, wireless terminals <b>112</b> determine at what time of each frame <b>200</b> begins, when downlink subframe <b>202</b> will end, when to switch from receiving mode to transmitting mode, and at what point to start transmitting uplink subframe <b>204</b>. In this embodiment, however, hub <b>106</b> and remote antenna units <b>108</b>-<b>111</b> do not have the circuitry required to demodulate and unpack signals transmitted between base station <b>102</b> and wireless terminals <b>112</b>. Thus, in one embodiment, hub <b>106</b> and remote antenna units <b>108</b>-<b>111</b> have circuitry included for independently determining the timing of the frames and subframes.</p>
<p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. 3</figref> illustrates one embodiment of a circuit <b>300</b> for determining the location in time of a boundary of a transmission structure in communications network <b>100</b>. In the embodiment shown in <figref idref="DRAWINGS">FIG. 3</figref>, circuit <b>300</b> determines a location in time of a subframe boundary (subframe timing) based on the power level of signals that are transmitted within network <b>100</b>. Based on the determined subframe timing, circuit <b>300</b> determines when to switch between downlink and uplink transmission. For example, in one embodiment, circuit <b>300</b> determines the location in time of the end boundary for downlink subframe <b>202</b> and switches from downlink transmission to uplink transmission based on the end boundary of downlink subframe <b>202</b>.</p>
<p id="p-0030" num="0029">Circuit <b>300</b> detects signals currently being transmitted on network <b>100</b> (for example, between base station <b>102</b> and other wireless terminals not shown) and compares the power level of the detected signals with a threshold to determine the timing of a subframe boundary. In one embodiment, circuit <b>300</b> determines an end boundary for a subframe by detecting the falling edge of the power level of a subframe in a detected signal in real-time. In other embodiments, a starting threshold is detecting a rising edge of the power level of a subframe in a detected signal in real-time. As should be evident from the description above and below, the apparatuses and methods described herein can be used to determine the frame and/or subframe timing of a system as desired for a particular system.</p>
<p id="p-0031" num="0030">In one embodiment, both hub <b>106</b> and remote antenna units <b>108</b>-<b>111</b> comprise circuits such as circuit <b>300</b> to switch between uplink and downlink transmission modes. In an alternative embodiment, circuit <b>300</b> is included only within hub <b>106</b>. Here, hub <b>106</b> determines the switching times for itself, as well as remote antenna units <b>108</b>-<b>111</b>, and forwards control signals indicating the time for switching to remote antenna units <b>108</b>-<b>111</b> as described in co-pending application Ser. No. 12/144,939, entitled &#x201c;SYSTEM AND METHOD FOR SYNCHRONIZED TIME-DIVISION DUPLEX SIGNAL SWITCHING&#x201d; which is hereby incorporated herein by reference.</p>
<p id="p-0032" num="0031">In the embodiment shown in <figref idref="DRAWINGS">FIG. 3</figref>, circuit <b>300</b> processes the signals of two frequency bands. Circuit <b>301</b> processes signals of a first frequency band and circuit <b>302</b> processes signals of a second frequency band. In this embodiment, circuit <b>301</b> and <b>302</b> are similar, with the exception of minor differences to enable each circuit <b>301</b>, <b>302</b> to support its respective frequencies. Thus, only circuit <b>301</b> is described in detail. In other embodiments, only one frequency band is supported. In still other embodiments, more than two frequency bands are supported.</p>
<p id="p-0033" num="0032">On circuit <b>301</b> signals are transmitted and received to/from base station <b>102</b> at RF duplex port <b>303</b>. Signals to/from wireless terminals <b>112</b> are transmitted and received at downlink (DL) port <b>304</b> and uplink (UL) port <b>306</b> respectively. Downlink port <b>304</b> and uplink port <b>306</b> are coupled to one or more antennas <b>104</b> which transmit and receive wireless signals from wireless terminals <b>112</b>. A variable resistor <b>308</b> controls the power of downlink signals transmitted from downlink port <b>304</b>. On the uplink side, an amplifier <b>310</b> amplifies signals received from wireless terminals <b>112</b> for further processing and transmission to base station <b>102</b>. A switch <b>312</b> switches circuit <b>300</b> between uplink transmission (uplink mode) and downlink transmission (downlink mode) by coupling RF duplex port <b>303</b> to either downlink port <b>304</b> or uplink port <b>306</b>. In the embodiment shown in <figref idref="DRAWINGS">FIG. 3</figref>, switch <b>312</b> is a single pole, double throw switch having one common connection (coupled to duplex port <b>303</b>) and two switched connections (coupled to downlink port <b>304</b> and uplink port <b>306</b> respectively). In an alternative embodiment, port <b>303</b> comprises two simplex ports which operate as a duplex port. More detail regarding the configuration of circuit <b>300</b> and port <b>303</b> as simplex or duplex is provided in co-pending application Ser. No. 12/144,913, entitled &#x201c;SYSTEM AND METHOD FOR CONFIGURABLE TIME-DIVISION DUPLEX INTERFACE&#x201d;, which is hereby incorporated herein by reference.</p>
<p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. 4</figref> illustrates one embodiment of a method <b>400</b> of switching circuit <b>300</b> between uplink and downlink transmission paths based on determining the end of downlink subframe <b>204</b>. The following discussion relates to switching from downlink to uplink transmission, however, it should be understood that the methods and apparatus described herein could also be used with appropriate modifications to switch from uplink to downlink transmission. To determine when to switch between downlink and uplink transmission, the power level of the downlink signal is analyzed. During downlink subframe <b>202</b>, the power level of the downlink signal in circuitry <b>300</b> is high, because signals are being transmitted by base station <b>102</b> and processed by circuitry <b>300</b>. At the end of downlink subframe <b>202</b> the power level of the signal drops as the transmission ends. Circuit <b>300</b> detects the power level drop of the downlink signal, and determines the end of downlink subframe <b>202</b> based on the power level drop. In one embodiment, as soon as circuit <b>300</b> determines that downlink subframe <b>202</b> has ended, switch <b>312</b> is set to uplink mode. Circuit <b>300</b> is now ready to process uplink signals from wireless terminals <b>112</b> to base station <b>102</b> at the start of uplink subframe <b>204</b>. In an alternative embodiment, the switch <b>312</b> is set to uplink mode, based on the end of downlink subframe <b>202</b> and the known duration of TTG <b>206</b> between downlink subframe <b>202</b> and uplink subframe <b>204</b>. Here, switch <b>312</b> is switched to uplink mode just prior to the start of uplink subframe <b>204</b>. In other embodiments, switch <b>312</b> is switched to uplink mode at a different time between the determined end of downlink subframe <b>202</b> and the start of uplink subframe <b>204</b>.</p>
<p id="p-0035" num="0034">Method <b>400</b> provides real-time switching of circuit <b>300</b> during operation. At block <b>402</b>, the downlink signal received at circuit <b>300</b> is coupled to an RF detector <b>316</b> by a coupler <b>315</b>, upstream of switch <b>312</b>. RF detector <b>316</b> measures the power of the downlink signal, and at block <b>404</b>, a comparator <b>318</b> senses RF detector <b>316</b> and compares the power level of the downlink signal measured by RF detector <b>316</b> to a reference threshold. At block <b>406</b>, if the power level of the downlink signal has fallen equal to or below the reference threshold, comparator <b>318</b> sends an interrupt signal to a microprocessor <b>314</b>. Microprocessor <b>314</b> controls switch <b>312</b> by setting switch <b>312</b> to either uplink mode or downlink mode. Based on the interrupt received from comparator <b>318</b>, microprocessor <b>314</b> sets switch <b>312</b> to uplink mode, thus readying RF circuit <b>300</b> for uplink transmission. In one embodiment, once microprocessor <b>314</b> receives an interrupt from comparator <b>318</b>, method <b>400</b> ends with block <b>408</b> at which microprocessor <b>314</b> sets switch <b>312</b> to uplink mode. As shown in <figref idref="DRAWINGS">FIG. 3</figref>, in this embodiment, microprocessor <b>314</b> also works with circuit <b>302</b> and thus receives interrupt signals from a second comparator <b>326</b> and controls a second switch (not shown) on circuit <b>302</b>.</p>
<p id="p-0036" num="0035">Referring back to block <b>406</b>, if the power level of the downlink transmission is not less than or equal to the threshold power level, comparator <b>318</b> discards the measurement and method <b>400</b> returns to block <b>402</b> to measure the power level of the downlink signal again. Thus, as shown in <figref idref="DRAWINGS">FIG. 4</figref>, RF detector <b>316</b> is continually reading the power level from the downlink signal and comparator <b>318</b> is continually processing the output of RF detector <b>316</b> until an end of downlink subframe <b>202</b> is determined. Although in this embodiment the comparison between the measured power level and the threshold power level is a less than or equal to comparison, in other embodiment, other comparison techniques are used as known to those skilled in the art.</p>
<p id="p-0037" num="0036">In one embodiment, method <b>400</b> also includes an optional verification process shown at block <b>410</b> before setting switch <b>312</b> to uplink mode at block <b>408</b>. The verification process performs additional checks to reduce the effect of unintended power drops in the signal and increase the likelihood of switching at the actual end of downlink subframe <b>202</b>. To perform verification, after block <b>406</b> when the measured power level has fall equal to or below the threshold power level, method <b>400</b> continues to block <b>410</b> and if the verification process is passed, method <b>400</b> continues to block <b>408</b> to set switch <b>312</b> to uplink mode. If the verification process determines that the measured power drop was not the end of a downlink subframe, method <b>400</b> continues back to block <b>402</b> to measure the power again. More detail regarding the verification process is included with respect to <figref idref="DRAWINGS">FIG. 5</figref>.</p>
<p id="p-0038" num="0037">In one embodiment, circuit <b>300</b> also determines when to switch from uplink transmission to downlink transmission after uplink subframe <b>204</b> in a manner similar to that describe above. Thus, circuit <b>300</b> detects the end of uplink subframe <b>204</b> by measuring the power drop at the end of uplink transmissions. An interrupt is then sent to microprocessor <b>314</b> and microprocessor <b>314</b> sets switch <b>312</b> to downlink mode based on the interrupt.</p>
<p id="p-0039" num="0038">In an alternative embodiment, circuit <b>300</b> determines when to switch from uplink transmission to downlink transmission for a first frame and then determines when to switch for subsequent frames based on the predictable timing of frame <b>200</b>. Since each frame <b>200</b> is of the same duration and since the start of downlink subframe <b>202</b> coincides with the start of frame <b>200</b>, circuit <b>300</b> determines the timing of the start of a first downlink subframe <b>202</b> and predicts the start of subsequent downlink subframes <b>202</b> based on that timing. Thus, circuit <b>300</b> is set to downlink mode to relay downlink transmissions from base station <b>102</b> to wireless terminals <b>112</b> in accordance with the frame and subframe timing of network <b>100</b>.</p>
<p id="p-0040" num="0039">In one embodiment, the start of a first downlink subframe <b>202</b> is determined by detecting the falling edge of the previous uplink subframe <b>204</b> as discussed above. In an alternative embodiment, the start of a first downlink subframe <b>202</b> is determined in a non-real time manner by correlating a detected signal with a reference signal. More detail regarding the determination of the start of a frame <b>200</b> through correlation and the prediction and switching between downlink transmission and uplink transmission based on the determination is provided in copending application Ser. No. 12/144,961 titled &#x201c;METHOD AND APPARATUS FOR FRAME DETECTION IN A COMMUNICATIONS SYSTEM&#x201d;; referred to herein as the '921 App.) which is herby incorporated herein by reference.</p>
<p id="p-0041" num="0040"><figref idref="DRAWINGS">FIGS. 5 and 6</figref> illustrate embodiments of methods for a verification process for block <b>410</b> of method <b>400</b>. In one embodiment, both of method <b>500</b> and method <b>600</b> are performed (either in parallel or contiguously) as the verification process of block <b>410</b>. In another embodiment, only method <b>500</b> is performed. In yet another embodiment, only method <b>600</b> is performed.</p>
<p id="p-0042" num="0041">Method <b>500</b> of <figref idref="DRAWINGS">FIG. 5</figref> is one embodiment of method for checking if the measured power drop by RF detector <b>316</b> coincides with a known possible end of a downlink subframe. Here, the TDD system has predetermined combinations of downlink subframe <b>202</b> lengths and uplink subframe <b>204</b> lengths. Microprocessor <b>314</b> (or the firmware operating on microprocessor <b>314</b>) uses the predetermined subframe lengths to check if the power drop detected occurred at a time that is a possible end of downlink subframe <b>202</b>. For example, in one embodiment, the TDD system has predetermined downlink subframe lengths of 35, 34, and 33 symbols, and uplink subframe lengths of 12, 13, and 14 symbols. A 35 symbol downlink subframe <b>202</b> corresponds to a 12 symbol uplink subframe <b>204</b>. Regardless of the number of symbols in each subframe, the total number of uplink and downlink symbols remains at 47. Thus, if there are fewer symbols in a downlink subframe <b>202</b>, there will be more symbols in the corresponding uplink subframe <b>204</b>.</p>
<p id="p-0043" num="0042">Method <b>500</b> starts at block <b>502</b> where microprocessor <b>314</b> measures the amount of time from the start of downlink subframe until the reception of the interrupt. At block <b>504</b>, microprocessor <b>314</b> compares this time period to the known possible downlink subframe lengths to determine whether the measured time period corresponds to a possible downlink subframe length. If the measured length does match with a possible downlink subframe length, microprocessor <b>314</b> acknowledges the interrupt received as marking the end of a downlink subframe <b>202</b> and the verification has passed. This results in method <b>400</b> continuing from block <b>410</b> of to block <b>408</b> where switch <b>312</b> is set to uplink mode. If the measured length does not match with a possible downlink subframe length, microprocessor <b>312</b> ignores the interrupt, and the verification process has failed. This results in method <b>400</b> returning to block <b>402</b>. In one embodiment, the measured time period is determined to match a possible downlink subframe length if the measured time period falls within a window of a valid time period. For example, in one embodiment, a symbol is 100 microseconds in length, and the window is +/&#x2212;10 microseconds.</p>
<p id="p-0044" num="0043">As an illustrative example of method <b>500</b>, if the measured time period is 33 symbols long (which is a valid downlink subframe length in this TDD system), microprocessor <b>314</b> acknowledges that the end of the downlink subframe has occurred and sets switch <b>312</b> to uplink mode. If, however, the measured time period is 31 symbols long (which is not a valid downlink subframe length), microprocessor <b>314</b> ignores the interrupt received, and switch <b>312</b> remains in downlink mode.</p>
<p id="p-0045" num="0044">In one embodiment, the time period for the length of downlink subframe is measured by starting a counter at the start of the frame <b>200</b> and checking the counter at the reception of the interrupt. The start of a frame <b>200</b> can be determined by, for example, the methods and systems described in the '921 App. In other embodiments, the time period is determined by counting the number of symbols, or in other ways as known to those skilled in the art. In one embodiment, when a time period equal to the longest valid downlink subframe length elapses (e.g. 35 symbols), microprocessor <b>314</b> automatically sets switch <b>312</b> to uplink mode, regardless of whether an interrupt has been received.</p>
<p id="p-0046" num="0045">Method <b>600</b> of <figref idref="DRAWINGS">FIG. 6</figref> is one embodiment of a method for checking whether a detected power level drop is an end of a transmission, and not an unintended power drop of signals. Method <b>600</b> checks the detected power level drop by holding for a period of time after the detected power level drop, and checking if the power level of the downlink signal increases above the threshold during the period of time. After a falling edge interrupt is received at microprocessor <b>314</b>, microprocessor <b>314</b> starts a timer which counts down for a period of time (for example, 3 microseconds) and microprocessor <b>314</b> checks for a rising edge interrupt from comparator <b>318</b>. In method <b>600</b>, RF detector <b>316</b> and comparator <b>318</b> are continually reading the power level of signals on circuit <b>300</b> even after block <b>406</b> has determined that the measured power level of the downlink signal has fallen equal to or less than the threshold. After dropping below the threshold, if the power level raises back above the threshold, comparator <b>318</b> sends an interrupt to microprocessor <b>314</b>.</p>
<p id="p-0047" num="0046">Method <b>600</b> begins at block <b>602</b> which follows block <b>406</b> in <figref idref="DRAWINGS">FIG. 4</figref>. At block <b>602</b> the hold timer is started. At block <b>604</b>, RF detector <b>316</b> measures the power level of signals on circuit <b>300</b>. At block <b>606</b>, comparator <b>318</b> compares the measured power level to the threshold power level. At block <b>608</b>, if the measured power level is greater than the threshold power level, comparator <b>318</b> sends an interrupt to microprocessor <b>314</b>, and the verification has failed. Because the power level rose above the threshold again within a short time after falling, the transmission is likely still continuing and the measured power drop was an unintended power drop during transmission. When this occurs method <b>400</b> ignores the first power level drop measured, and returns to block <b>402</b>. If, the measured power level is not greater than the threshold, the measured power is still low which coincides with an end of transmission. At block <b>610</b>, method <b>600</b> checks whether the timer has reached zero. If the timer has not reached zero, method <b>600</b> returns to block <b>604</b> to measure the power again. If the timer has reached zero, method <b>600</b> ends, the verification of the end of transmission has passed, and switch <b>312</b> is set to uplink mode at block <b>408</b>.</p>
<p id="p-0048" num="0047">Referring now to <figref idref="DRAWINGS">FIG. 7</figref>, a frame diagram <b>700</b> is shown illustrating one embodiment of the timing of &#x201c;on&#x201d; and &#x201c;off&#x201d; signal measurements for determination of the threshold power level. As mentioned above, the determination of when to switch circuit <b>300</b> is made by comparing (in comparator <b>318</b>) the received power level to a threshold power level. In one embodiment, the threshold power level is determined by microprocessor <b>314</b> and programmed into comparator <b>318</b>. To determine the threshold power level, microprocessor <b>314</b> measures the power level seen by RF detector <b>316</b> when the downlink signal is known to be &#x201c;on&#x201d; (present on circuit <b>300</b>) and again when the downlink signal is known to be &#x201c;off&#x201d; (not present on circuit <b>300</b>).</p>
<p id="p-0049" num="0048">In one embodiment, these power level measurements are taken during a time of static frame duty cycles, such that the duration of downlink subframe <b>702</b> and uplink subframe <b>704</b> is fixed and does not change from one frame to the next. During static duty cycles, the start time of downlink subframe <b>702</b> as well as uplink subframe <b>704</b> is known, and the firmware operating on microprocessor <b>314</b> automatically sets switch <b>312</b> to either downlink mode or uplink mode at their respective times. During these static frame intervals, the &#x201c;on&#x201d; power level is measured during downlink subframe <b>702</b>. In one embodiment, the power levels of the downlink signals are determined from snapshots of the downlink signal taken by an analog to digital (A/D) converter <b>320</b>. A/D converter <b>320</b> reads the power level from RF detector <b>316</b> and converts the power level to a digital number for microprocessor <b>314</b>.</p>
<p id="p-0050" num="0049">To obtain an accurate &#x201c;off&#x201d; power level, the &#x201c;off&#x201d; measurement is taken when no transmissions from either base station <b>102</b> or wireless terminals <b>112</b> are being received. The &#x201c;off&#x201d; power level cannot be reliably measured during the uplink transmission due to possible coupling of the uplink signals into RF detector <b>316</b>. To reduce the possibility of transmissions are being coupled into RF detector <b>316</b>, at the end of a downlink subframe <b>704</b>, microprocessor <b>314</b> holds for a time interval <b>706</b> (e.g. a few microseconds) before setting switch <b>312</b> to uplink mode. Delaying for time interval <b>706</b> reduces the possibility of errant uplink signals being coupled into RF detector <b>316</b>. During time interval <b>706</b>, RF detector <b>316</b> takes the &#x201c;off&#x201d; measurement and A/D converter <b>320</b> provides the data to microprocessor <b>314</b>.</p>
<p id="p-0051" num="0050">Microprocessor <b>314</b> then uses the &#x201c;on&#x201d; and &#x201c;off&#x201d; readings from A/D converter <b>320</b> to compute the threshold power level. In one embodiment, multiple &#x201c;on&#x201d; and &#x201c;off&#x201d; readings are taken by A/D converter <b>320</b>, for example, across several frames, and microprocessor <b>314</b> computes a mean and variance for both &#x201c;on&#x201d; and &#x201c;off&#x201d; cases. In one embodiment, microprocessor <b>314</b> selects the midpoint between the &#x201c;on&#x201d; and &#x201c;off&#x201d; power levels as the threshold. In other embodiments, microprocessor <b>314</b> selects other power levels as the threshold based on factors relating to the signal power levels as known to those skilled in the art. In any case, once microprocessor <b>314</b> determines the threshold, microprocessor <b>314</b> sends the threshold to a digital to analog converter <b>322</b>. Digital to analog converter <b>322</b> then converts the digital signal from microprocessor <b>314</b> to an analog signal for use by comparator <b>318</b>. In one embodiment, the threshold power level is periodically recomputed through new snapshots by A/D converter <b>320</b> and processing by microprocessor <b>314</b>.</p>
<p id="p-0052" num="0051">In many systems the frame timing is quite fast, such that the switching of circuitry <b>300</b> from downlink mode to uplink mode occurs in a small window between downlink transmissions and uplink transmissions. Thus, in one embodiment, switching from downlink mode to uplink mode is performed immediately once microprocessor <b>314</b> determines that switching should occur. In a dynamic duty cycle frame, the delay between the switching of circuitry <b>300</b> and the switching of base station <b>102</b> from downlink mode to uplink mode is determined by three factors. The first factor is the hardware delay of circuitry <b>300</b> which is due primarily to the decay time of RF detector <b>316</b>. In one embodiment, the time constant of RF detector <b>316</b> is optimized for a fast fall time without allowing excessive ripple in the signal. The second factor is the firmware delay, which, in one embodiment, is approximately 2 microseconds due to interrupt handling. Finally, the third factor is due to signal propagation time from base station <b>102</b> to circuitry <b>300</b>.</p>
<p id="p-0053" num="0052">In the embodiment shown in <figref idref="DRAWINGS">FIG. 3</figref>, prior to the downlink signal reaching RF detector <b>316</b> and A/D converter <b>320</b>, the signal is attenuated, if needed, by an attenuator <b>324</b>. Attenuator <b>324</b> reduces the dynamic range required of A/D converter <b>320</b> by attenuating the power level of high powered signals, prior to the signals reaching A/D converter <b>320</b>. Microprocessor <b>314</b> controls attenuator <b>324</b> based on the power level of signals read by RF detector <b>316</b> and A/D converter <b>320</b>. In this embodiment, for example, the signal range requirements at downlink port <b>304</b> are 25 dB. Since RF detection occurs before switch <b>312</b>, the signal range seen at coupler <b>315</b> is an additional 20 dB. Thus, the signal range seen at coupler <b>315</b> is approximately 45 dB. Attenuator <b>324</b> has an attenuation of 20 dB when enabled and 0 dB when disabled. When signal power levels at coupler <b>315</b> are in the top 20 dB of the range expected at coupler <b>315</b>, microprocessor <b>314</b> enables attenuator <b>324</b> to reduce the signal levels at RF detector <b>316</b> and A/D converter <b>320</b> by 20 dB.</p>
<p id="p-0054" num="0053">In one embodiment, microprocessor <b>314</b> determines whether to enable attenuator <b>324</b> prior to analyzing the downlink signal. At the start, microprocessor <b>314</b> enables attenuator <b>324</b> and then coupler <b>315</b> couples the downlink signal to attenuator <b>324</b>, RF detector <b>316</b>, and A/D converter <b>320</b>. With attenuator <b>324</b> enabled, A/D converter <b>320</b> samples the downlink signal over a number of frames. Microprocessor <b>314</b> then receives the power level from A/C converter <b>320</b> and compares the power level to an attenuator threshold. If the average power level is below the attenuator threshold, microprocessor <b>314</b> disables attenuator <b>324</b>. If the average power level is equal to or above the attenuator threshold, attenuator <b>324</b> remains enabled. More detail regarding the power level adjustment of attenuator <b>324</b> is provided in the '921 App.</p>
<p id="p-0055" num="0054">Although specific embodiments have been illustrated and described herein, it will be appreciated by those of ordinary skill in the art that any arrangement, which is calculated to achieve the same purpose, may be substituted for the specific embodiments shown. It is manifestly intended that any inventions be limited only by the claims and the equivalents thereof.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method of switching a communication device between an uplink communication path and a downlink communication path, the method comprising:
<claim-text>measuring a power level of signals on at least one radio frequency for one of the uplink communication path and downlink communication path;</claim-text>
<claim-text>comparing the measured power level with a threshold power level in order to determine if the communication device should switch between the uplink communication path and the downlink communication path; and</claim-text>
<claim-text>when the comparison between the measured power level and the threshold power level indicates that the communication device should switch between the uplink communication path and the downlink communication path:
<claim-text>performing a verification process to confirm that the communication device should switch between the uplink communication path and the downlink communication path;</claim-text>
<claim-text>switching between the uplink communication path and the downlink communication path if the verification process confirms that the communication device should switch between the uplink communication path and the downlink communication path; and</claim-text>
<claim-text>not switching between the uplink communication path and the downlink communication path if the verification process does not confirm that the communication device should switch between the uplink communication path and the downlink communication path.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the comparison between the measured power level and the threshold power level indicates that the communication device should switch between the uplink communication path and the downlink communication path if the measured power level is less than or equal to the threshold power level.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the verification process comprises continuing to compare the measured power level with the threshold power level for a predetermined amount of time, wherein the verification process fails if, during the predetermined amount of time, the comparison between the measured power level and the threshold power level does not indicate that the communication device should switch between the uplink communication path and the downlink communication path and otherwise the verification process succeeds.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the verification process comprises comparing a time when the comparison between the measured power level and the threshold power level indicates that the communication device should switch between the uplink communication path and the downlink communication path with a known possible transmission boundary, wherein the verification process fails if the time when the comparison between the measured power level and the threshold power level indicates that the communication device should switch between the uplink communication path and the downlink communication path does not match the known possible transmission boundary and wherein the verification process succeeds if the time when the comparison between the measured power level and the threshold power level indicates that the communication device should switch between the uplink communication path and the downlink communication path does match the known possible transmission boundary.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method of <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein comparing the time when the comparison between the measured power level and the threshold power level indicates that the communication device should switch between the uplink communication path and the downlink communication path with the known possible transmission boundary comprises: measuring a length of a subframe; and comparing the measured length to a known possible subframe length.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the verification process comprises performing two verifications process, wherein a first verification process comprises: continuing to compare the measured power level with the threshold power level for a predetermined amount of time, wherein the first verification process fails if, during the predetermined amount of time, the comparison between the measured power level and the threshold power level does not indicate that the communication device should switch between the uplink communication path and the downlink communication path and otherwise the first verification process succeeds;
<claim-text>wherein a second verification process comprises: comparing a time when the comparison between the measured power level and the threshold power level indicates that the communication device should switch between the uplink communication path and the downlink communication path with a known possible transmission boundary, wherein the verification process fails if the time when the comparison between the measured power level and the threshold power level indicates that the communication device should switch between the uplink communication path and the downlink communication path does not match the known possible transmission boundary and wherein the verification process succeeds if the time when the comparison between the measured power level and the threshold power level indicates that the communication device should switch between the uplink communication path and the downlink communication path does match the known possible transmission boundary,</claim-text>
<claim-text>wherein the first and second verification processes are performed in at least one of in parallel and contiguously; and</claim-text>
<claim-text>wherein the verification process succeeds if either of the first and second verification process succeeds and the verification process fails if neither of the first and second verification process succeeds.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein comparing the measured power level to a threshold power level compares the measure power level to a threshold power level determined by:
<claim-text>measuring an on power level of signals on the at least one radio frequency when transmissions are present on the at least one radio frequency;</claim-text>
<claim-text>measuring an off power level of signals on the at least one radio frequency when transmissions are not present on the at least one radio frequency; and</claim-text>
<claim-text>setting the threshold power level at a point between the on power level and the off power level.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. An apparatus for switching between uplink and downlink transmission circuits, the apparatus comprising:
<claim-text>a switch having a first port coupled to an uplink circuit, and a second port coupled to a downlink circuit;</claim-text>
<claim-text>a power level detector configured to measure a power level of signals propagating through the switch;</claim-text>
<claim-text>a comparator configured to compare the measured power level to a threshold power level; and</claim-text>
<claim-text>a processing device configured to control the switch based on the comparison between the measured power level and the threshold power level;</claim-text>
<claim-text>wherein the processing device is further configured to do the following when the comparison between the measured power level and the threshold power level indicates that the switch should switch between an uplink communication path and a downlink communication path:
<claim-text>perform a verification process to confirm that the switch should switch between the uplink communication path and the downlink communication path;</claim-text>
<claim-text>switch between the uplink communication path and the downlink communication path if the verification process confirms that the switch should switch between the uplink communication path and the downlink communication path; and</claim-text>
<claim-text>not switch between the uplink communication path and the downlink communication path if the verification process does not confirm that the switch should switch between the uplink communication path and the downlink communication path.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The apparatus of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the comparator is configured to determine when the measured power level is less than or equal to the threshold power level, wherein the comparison between the measured power level and the threshold power level indicates that the communication device should switch between the uplink communication path and the downlink communication path if the measured power level is less than or equal to the threshold power level.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. The apparatus of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the verification process comprises continuing to compare the measured power level with the threshold power level for a predetermined amount of time, wherein the verification process fails if, during the predetermined amount of time, the comparison between the measured power level and the threshold power level does not indicate that the communication device should switch between the uplink communication path and the downlink communication path and otherwise the verification process succeeds.</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The apparatus of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the verification process comprises comparing a time when the comparison between the measured power level and the threshold power level indicates that the communication device should switch between the uplink communication path and the downlink communication path with a known possible transmission boundary, wherein the verification process fails if the time when the comparison between the measured power level and the threshold power level indicates that the communication device should switch between the uplink communication path and the downlink communication path does not match the known possible transmission boundary and wherein the verification process succeeds if the time when the comparison between the measured power level and the threshold power level indicates that the communication device should switch between the uplink communication path and the downlink communication path does match the known possible transmission boundary.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The apparatus of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein comparing the time when the comparison between the measured power level and the threshold power level indicates that the communication device should switch between the uplink communication path and the downlink communication path with the known possible transmission boundary comprises: measuring a length of a subframe; and comparing the measured length to a known possible subframe length.</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The apparatus of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the verification process comprises performing two verifications process, wherein a first verification process comprises: continuing to compare the measured power level with the threshold power level for a predetermined amount of time, wherein the first verification process fails if, during the predetermined amount of time, the comparison between the measured power level and the threshold power level does not indicate that the communication device should switch between the uplink communication path and the downlink communication path and otherwise the first verification process succeeds;
<claim-text>wherein a second verification process comprises: comparing a time when the comparison between the measured power level and the threshold power level indicates that the communication device should switch between the uplink communication path and the downlink communication path with a known possible transmission boundary, wherein the verification process fails if the time when the comparison between the measured power level and the threshold power level indicates that the communication device should switch between the uplink communication path and the downlink communication path does not match the known possible transmission boundary and wherein the verification process succeeds if the time when the comparison between the measured power level and the threshold power level indicates that the communication device should switch between the uplink communication path and the downlink communication path does match the known possible transmission boundary,</claim-text>
<claim-text>wherein the first and second verification processes are performed in at least one of in parallel and contiguously; and</claim-text>
<claim-text>wherein the verification process succeeds if either of the first and second verification process succeeds and the verification process fails if neither of the first and second verification process succeeds.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The apparatus of <claim-ref idref="CLM-00008">claim 8</claim-ref>, wherein the power level detector is configured to do at least one of:
<claim-text>measure the power level of signals that are coupled to a common connection of the switch; and</claim-text>
<claim-text>measure the power level of downlink signals before the downlink signals reach the switch.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. A communication system comprising:
<claim-text>a plurality of remote antenna units communicatively coupled to a plurality of wireless terminals;</claim-text>
<claim-text>at least one hub communicatively coupled to the plurality of remote antenna units, the at least one hub configured to communicatively couple signals between a base station and the plurality of remote antenna units, the at least one hub further comprising:
<claim-text>a switch having a common connection, a first switched connection, and a second switched connection;</claim-text>
<claim-text>an uplink circuit coupled to the first switched connection and configured to receive signals from the plurality of wireless terminals;</claim-text>
<claim-text>a downlink circuit coupled the second switched connection and configured to transmit signals to the plurality of wireless terminals;</claim-text>
<claim-text>a duplexing circuit connected to the common connection and configured to transmit and receive signals from the base station; and</claim-text>
<claim-text>a processing device configured to compare a power level of signals in the duplexing circuit and a threshold power level in order to determine if the switch should switch between the first switched connection and the second switched connection;</claim-text>
</claim-text>
<claim-text>wherein the processing device is further configured to do the following when the comparison between the power level of signals in the duplexing circuit and the threshold power level indicates that the switch should switch between the first switched connection and the second switched connection:
<claim-text>if the comparison between the power level of signals in the duplexing circuit and the threshold power level indicates that the switch should switch between the first switched connection and the second switched connection:
<claim-text>perform a verification process to confirm that the switch should switch between the first switched connection and the second switched connection;</claim-text>
<claim-text>switch between the first switched connection and the second switched connection if the verification process confirms that the switch should switch between the first switched connection and the second switched connection; and</claim-text>
<claim-text>not switch between the first switched connection and the second switched connection if the verification process does not confirm that the switch should switch between the first switched connection and the second switched connection.</claim-text>
</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The system of <claim-ref idref="CLM-00015">claim 15</claim-ref>, further comprising:
<claim-text>a power level detector configured to measure a power level of signals in the duplexing circuit;</claim-text>
<claim-text>a comparator configured to compare the measured power level to a threshold power level; and</claim-text>
<claim-text>wherein the processing circuit is configured to control the switch based on the comparison of the measured power level and the threshold power level.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The system of <claim-ref idref="CLM-00016">claim 16</claim-ref>, wherein the comparator is configured to send an interrupt signal to the processing device when the measured power level reaches the threshold power level.</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The system of <claim-ref idref="CLM-00017">claim 17</claim-ref>, wherein the processing device is configured to wait an amount of time after receiving an interrupt and before changing a position of the switch to verify that no more interrupts are received.</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The system of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the processing device is configured to control the switch based on a comparison between the time that the power level of signals on the duplexing circuit reaches a threshold power level and a time period of a transmission structure.</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The system of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the comparison between the comparison between the power level of signals in the duplexing circuit and the threshold power level indicates that the switch should switch between the first switched connection and the second switched connection if the power level of signals in the duplexing circuit is less than or equal to the threshold power level.</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. The system of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the verification process comprises continuing to compare the power level of signals in the duplexing circuit with the threshold power level for a predetermined amount of time, wherein the verification process fails if, during the predetermined amount of time, the comparison between the power level of signals in the duplexing circuit and the threshold power level does not indicate that the communication device should switch between the first switched connection and the second switched connection and otherwise the verification process succeeds.</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. The system of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the verification process comprises comparing a time when the comparison between the power level of signals in the duplexing circuit and the threshold power level indicates that the communication device should switch between the first switched connection and the second switched connection with a known possible transmission boundary, wherein the verification process fails if the time when the comparison between the power level of signals in the duplexing circuit and the threshold power level indicates that the communication device should switch between the first switched connection and the second switched connection does not match the known possible transmission boundary and wherein the verification process succeeds if the time when the comparison between the power level of signals in the duplexing circuit and the threshold power level indicates that the communication device should switch between the first switched connection and the second switched connection does match the known possible transmission boundary.</claim-text>
</claim>
<claim id="CLM-00023" num="00023">
<claim-text>23. The system of <claim-ref idref="CLM-00022">claim 22</claim-ref>, wherein comparing the time when the comparison between the power level of signals in the duplexing circuit and the threshold power level indicates that the communication device should switch between the first switched connection and the second switched connection with the known possible transmission boundary comprises: measuring a length of a subframe; and comparing the measured length to a known possible subframe length.</claim-text>
</claim>
<claim id="CLM-00024" num="00024">
<claim-text>24. The system of <claim-ref idref="CLM-00015">claim 15</claim-ref>, wherein the verification process comprises performing two verifications process, wherein a first verification process comprises: continuing to compare the power level of signals in the duplexing circuit with the threshold power level for a predetermined amount of time, wherein the first verification process fails if, during the predetermined amount of time, the comparison between the power level of signals in the duplexing circuit and the threshold power level does not indicate that the communication device should switch between the uplink communication path and the downlink communication path and otherwise the first verification process succeeds;
<claim-text>wherein a second verification process comprises: comparing a time when the comparison between the power level of signals in the duplexing circuit and the threshold power level indicates that the communication device should switch between the first switched connection and the second switched connection with a known possible transmission boundary, wherein the verification process fails if the time when the comparison between the power level of signals in the duplexing circuit and the threshold power level indicates that the communication device should switch between the uplink communication path and the downlink communication path does not match the known possible transmission boundary and wherein the verification process succeeds if the time when the comparison between the power level of signals in the duplexing circuit and the threshold power level indicates that the communication device should switch between the first switched connection and the second switched connection does match the known possible transmission boundary,</claim-text>
<claim-text>wherein the first and second verification processes are performed in at least one of in parallel and contiguously; and</claim-text>
<claim-text>wherein the verification process succeeds if either of the first and second verification process succeeds and the verification process fails if neither of the first and second verification process succeeds.</claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
