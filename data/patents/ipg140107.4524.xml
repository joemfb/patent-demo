<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625608-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625608</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12668229</doc-number>
<date>20080709</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<us-term-of-grant>
<us-term-extension>443</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>12</main-group>
<subgroup>28</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20110101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>12</main-group>
<subgroup>56</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>37039564</main-classification>
<further-classification>37039561</further-classification>
<further-classification>37039565</further-classification>
</classification-national>
<invention-title id="d2e53">Adaptive rate control in a communications system</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6052734</doc-number>
<kind>A</kind>
<name>Ito et al.</name>
<date>20000400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6597699</doc-number>
<kind>B1</kind>
<name>Ayres</name>
<date>20030700</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>6654417</doc-number>
<kind>B1</kind>
<name>Hui</name>
<date>20031100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>7457623</doc-number>
<kind>B2</kind>
<name>Naghian et al.</name>
<date>20081100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>7573856</doc-number>
<kind>B2</kind>
<name>Chen et al.</name>
<date>20090800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2003/0198184</doc-number>
<kind>A1</kind>
<name>Huang et al.</name>
<date>20031000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370231</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2004/0052212</doc-number>
<kind>A1</kind>
<name>Baillargeon</name>
<date>20040300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370235</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2004/0071145</doc-number>
<kind>A1</kind>
<name>Ha et al.</name>
<date>20040400</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2010/0195521</doc-number>
<kind>A1</kind>
<name>Wanstedt et al.</name>
<date>20100800</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>370252</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>WO</country>
<doc-number>2006/135334</doc-number>
<kind>A2</kind>
<date>20061200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>26</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>37039561</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>37039564</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>37039565</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>9</number-of-drawing-sheets>
<number-of-figures>14</number-of-figures>
</figures>
<us-related-documents>
<us-provisional-application>
<document-id>
<country>US</country>
<doc-number>60948514</doc-number>
<date>20070709</date>
</document-id>
</us-provisional-application>
<us-provisional-application>
<document-id>
<country>US</country>
<doc-number>60956241</doc-number>
<date>20070816</date>
</document-id>
</us-provisional-application>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20100195521</doc-number>
<kind>A1</kind>
<date>20100805</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Wanstedt</last-name>
<first-name>Stefan</first-name>
<address>
<city>Lulea</city>
<country>SE</country>
</address>
</addressbook>
<residence>
<country>SE</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Enstrom</last-name>
<first-name>Daniel</first-name>
<address>
<city>Gammelstad</city>
<country>SE</country>
</address>
</addressbook>
<residence>
<country>SE</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Pelletier</last-name>
<first-name>Ghyslain</first-name>
<address>
<city>Boden</city>
<country>SE</country>
</address>
</addressbook>
<residence>
<country>SE</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Wanstedt</last-name>
<first-name>Stefan</first-name>
<address>
<city>Lulea</city>
<country>SE</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Enstrom</last-name>
<first-name>Daniel</first-name>
<address>
<city>Gammelstad</city>
<country>SE</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Pelletier</last-name>
<first-name>Ghyslain</first-name>
<address>
<city>Boden</city>
<country>SE</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Coats &#x26; Bennett, P.L.L.C.</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Telefonaktiebolaget L M Ericsson (publ)</orgname>
<role>03</role>
<address>
<city>Stockholm</city>
<country>SE</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Elliott, IV</last-name>
<first-name>Benjamin H</first-name>
<department>2474</department>
</primary-examiner>
</examiners>
<pct-or-regional-filing-data>
<document-id>
<country>WO</country>
<doc-number>PCT/SE2008/050853</doc-number>
<kind>00</kind>
<date>20080709</date>
</document-id>
<us-371c124-date>
<date>20100108</date>
</us-371c124-date>
</pct-or-regional-filing-data>
<pct-or-regional-publishing-data>
<document-id>
<country>WO</country>
<doc-number>WO2009/008829</doc-number>
<kind>A </kind>
<date>20090115</date>
</document-id>
</pct-or-regional-publishing-data>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">The invention relates to a method for controlling a bit-rate of a session in a packet-switched communications system where multiple sessions are set-up via a shared resource. A current bit-rate of the session is compared to a bit-rate range valid for the session to determine a distance from the position of the current bit-rate to one of the end-points of the bit-rate range. The current bit-rate is then adapted differently depending on the distance to the selected end-point. By controlling the bit-rate of each session that is set-up via the shared resource for applications that provide delay-sensitive services to users in this way the method and corresponding system and sender-receiver arrangements have the effect that rate adaptations can be distributed among the applications so that users share responsibility for rate adaptations.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="210.48mm" wi="173.40mm" file="US08625608-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="213.78mm" wi="156.38mm" file="US08625608-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="181.19mm" wi="134.96mm" file="US08625608-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="212.51mm" wi="166.29mm" file="US08625608-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="197.27mm" wi="135.81mm" file="US08625608-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="198.88mm" wi="163.41mm" file="US08625608-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="211.33mm" wi="180.76mm" file="US08625608-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="147.74mm" wi="125.05mm" file="US08625608-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00008" num="00008">
<img id="EMI-D00008" he="209.21mm" wi="144.02mm" file="US08625608-20140107-D00008.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00009" num="00009">
<img id="EMI-D00009" he="179.15mm" wi="132.93mm" file="US08625608-20140107-D00009.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">TECHNICAL FIELD</heading>
<p id="p-0002" num="0001">The present invention relates to methods and arrangements for rate control in digital communications systems.</p>
<heading id="h-0002" level="1">BACKGROUND</heading>
<p id="p-0003" num="0002">In a digital packet-switched communications system different types of traffic, e g voice, data, audio and video, may be conveyed between multiple parties via shared resources, e g routers or transmission channels. Some traffic, such as many audio and video applications, typically occurs in real time, whereas other traffic, such as many data applications, typically is non-real time traffic.</p>
<p id="p-0004" num="0003">In such a system a sender is an application or entity that encodes and sends media, that has been received from a sending party, to a receiver. A receiver is an application or entity that receives, decodes and presents media to a receiving party. An application, acting as a sender or as a receiver or both, may be located in a client or on a server, e g in user equipment or other hardware of a sending or a receiving party. An application can be run in a client or on a server to provide or deliver a service, e g to a user or other party. More specifically, an application can run on a server to encode and send media to a client, where an application is running to receive, decode and present the media to a user, whereby the applications running on the server and in the client function to provide a service to the user. A service may involve one or several media types, e g voice and data, or video and audio.</p>
<p id="p-0005" num="0004">Different transmission requirements apply for real-time traffic compared to non-real time traffic. For example, non-real time traffic such as file transfer does not allow packet loss, i e packets of data that are not received correctly at the receiving end, but is less sensitive to transmission delay than real-time traffic. Real-time traffic, on the other hand, can tolerate some packet loss but is more sensitive to transmission delay than non-real time traffic. Therefore different types of transmission protocols have been designed to comply with the needs of real-time traffic and non-real time traffic respectively. One example of a protocol adapted to fulfill the requirements of non-real time traffic is Transmission Control Protocol (TCP), and one example of a protocol adapted to fulfill the requirements of real time traffic is User Datagram Protocol (UDP). A typical use of UDP is for real-time critical data such as Voice over IP (VoIP) and streaming media. Another use of UDP is for signalling control data for on-line games.</p>
<p id="p-0006" num="0005"><figref idref="DRAWINGS">FIG. 1</figref> shows an example of a shared resource <b>120</b> having an ingress node <b>110</b> and multiple egress nodes <b>100</b>. It is a well-known fact that packet-switched networks utilizing shared resources between the users can experience congestion. Congestion will happen when the sum of traffic of the ingress nodes, i e the entry points, of the shared resource exceeds the sum of the traffic of the egress nodes, i e the exit points, of the same shared resource. The most typical example is a router with a specific number of connections. Even if the router has processing power enough to re-route the traffic according to the link throughput, the currently available link throughput might restrict the amount of traffic the outgoing links from the router can cope with. Hence, the buffers of the router will build up and eventually overflow. The network now experiences congestion and the router is forced to drop packets.</p>
<p id="p-0007" num="0006">Another example of congestion can be found when studying wireless networks with shared channels such as Wireless Local Area Network (WLAN) specified in IEEE 802.11 a/b/g, or mobile networks such as High-Speed Packet Access (HSPA), Long-Term Evolution (LTE) and Worldwide Interoperability for Microwave Access (WiMAX). In these networks, at least the downlink is shared between the users and is by that a possible candidate to experience congestion. In e.g. the case of LTE, shown in <figref idref="DRAWINGS">FIG. 2</figref>, the eNB base station <b>220</b> will manage re-transmissions on the Medium Access Control (MAC) layer over transmission channels <b>210</b> to the mobile terminal or User Equipment (UE) <b>200</b> which will have impact on the amount of traffic the eNB base station at any given moment can provide throughput for. The more re-transmissions required for successful reception at the UE, the less available power for providing throughput for other users, thereby making the use of the transmission capacity of the shared resource less efficient.</p>
<p id="p-0008" num="0007">The normal behavior for any routing node is to provide buffers that can manage a certain amount of variation in input/output link capacity and hence absorb minor congestion occurrences. However, when the congestion is severe enough, the routing node will eventually drop packets.</p>
<p id="p-0009" num="0008">For TCP traffic, a dropped packet will be detected by the sender since no Acknowledge (ACK) is received for that particular packet and a re-transmission will occur. Further, the TCP protocol has a built in rate adaptive mechanism which will lower the transmission bit-rate when packet losses occur and re-transmissions happen on the Internet Protocol (IP) layer. If an ACK is not received within a specific time interval, set by a re-transmission time-out value, the data is retransmitted. The TCP retransmission time-out value is dynamically determined for each connection, based on round-trip time. At the receiver, sequence numbers are used to correctly order segments that may be received out of order and to eliminate duplicates. TCP governs the amount of data sent by returning a window with every acknowledgement to indicate a range of acceptable sequence numbers beyond the last segment successfully received. The window indicates an allowed number of octets that the sender may transmit before receiving further permission. Since this flow control is built into the protocol itself, TCP provides a rate adaptive mechanism independently of whatever application that uses it. This mechanism has the effect that the transmission bit-rate can be reduced stepwise when congestion occurs, and also that it can be increased stepwise when congestion ceases.</p>
<p id="p-0010" num="0009">To further increase the performance of routing nodes, a scheme called &#x201c;Explicit Congestion Notification (ECN) for IP&#x201d; has been developed, specified in IETF specification RFC 3168, which is hereby incorporated in its entirety by reference. As shown in <figref idref="DRAWINGS">FIG. 3</figref>, this scheme utilizes two bits, ECN bits <b>300</b> in the Type Of Service (TOS) field <b>310</b>, in the IP header <b>320</b> to signal the risk for congestion-related losses. The field has four code points where two are used to signal ECN capability and the other two are used to signal congestion. The code point for congestion is set in e.g. routers and when the receiver has encountered a congestion notification it propagates the information to the sender of the stream which then can adapt its transmission bit-rate. For TCP, this is done by using two, previously reserved, bits in the TCP header. When received, these bits trigger the sender to reduce its transmission bit-rate.</p>
<p id="p-0011" num="0010">UDP traffic has no similar generic mechanism for reliable transmission and flow control. UDP traffic is by definition non-reliable in the sense that the delivery is not guaranteed. Lost UDP packets will not be re-transmitted unless the application has some specialized feature which allows this. UDP by itself does not respond in any way to network congestion, and the transmission rate is determined by the application, not by UDP itself.</p>
<p id="p-0012" num="0011">ECN is defined for IP usage with any transport protocol. Hence, ECN for UDP is not excluded in the specification for ECN, IETF RFC 3168, although it is only specified in terms of using with TCP traffic. UDP by itself has no mechanism to change its transmission behavior based upon the reception of a congestion notification message. Without this mechanism, ECN for UDP becomes highly unreliable since the effect of setting the ECN bits in the IP header cannot be predicted. ECN for UDP needs the same generic mechanisms as ECN for TCP; a fast back-channel for signalling feedback from the receiver to the sender regarding the received transmissions and a rate control algorithm for changing the transmission bit-rate dynamically.</p>
<p id="p-0013" num="0012">As delay-sensitive communication services, such as UDP based real-time communication services, may also be quite sensitive to packet loss there is a need to manage the transmissions via shared resources for such services so that congestion can be alleviated or avoided and/or to make efficient use of the transmission capacity of the shared resource, e g when increasing the traffic after that congestion has ceased. The transmissions via shared resources can be managed by controlling the transmission bit-rate of the applications providing the services via the shared resources. However, controlling the transmission bit-rate of the applications will impact the transmission delay. Whereas a less delay-sensitive service will still be working although delivered at a slower pace if the transmission bit-rate is reduced, the consequence for a delay-sensitive service may be that the service cannot be seen as working if a too drastic reduction of the transmission bit-rate is performed.</p>
<heading id="h-0003" level="1">SUMMARY</heading>
<p id="p-0014" num="0013">It is an object of at least some embodiments according to the invention to provide a rate control mechanism that is capable of making use of the transmission capacity of a shared resource while also functioning to accommodate the various needs of delay-sensitive services that use the shared resource in an adequate and balanced way.</p>
<p id="p-0015" num="0014">According to a first aspect, the object is achieved by providing a method for controlling a bit-rate of a session in a packet-switched communications system where multiple sessions are set-up via a shared resource. First a bit-rate range valid for the session is determined. The bit-rate range is or may be confined by an upper limit or end-point and a lower limit or end-point. A distance to a selected limit, i e to the upper limit or to the lower limit, of the bit-rate range is determined by comparing a current bit-rate of the session to the bit-rate range. The current bit-rate is then adapted differently depending on the distance to the selected limit. The current bit-rate may in one embodiment be adapted by an amount that is larger if the distance is small and smaller if the distance is large. For example, if the selected limit is the upper limit of the bit-rate range, the current bit-rate is adapted by a larger reduction or a smaller increase if the distance to the selected limit is small and by a smaller reduction or larger increase if the distance to the selected limit is large. If on the other hand the selected limit is the lower limit of the bit-rate range, the current bit-rate is adapted by a larger reduction or a smaller increase if the distance to the selected limit is large and by a smaller reduction or larger increase if the distance to the selected limit is small.</p>
<p id="p-0016" num="0015">According to a second aspect, the object is achieved by providing a packet-switched communications system for controlling bit-rates of at least a first and a second session. The system comprises at least a first sender operable to communicate with a first receiver via a shared resource in the first session and a second sender operable to communicate with a second receiver via the shared resource in the second session. Further, the system comprises first bit-rate range determining means for determining a first bit-rate range valid for the first session and second bit-rate range determining means for determining a second bit-rate range valid for the second session. The first bit-rate range and the second bit-rate range are or may be confined by a respective upper limit or end-point and a respective lower limit or end-point. The system also comprises a first rate adaptation control unit for controlling rate adaptation of a first current bit-rate of said first session so that the first current bit-rate is adapted differently depending on a first distance to a selected limit, i e to the upper limit or to the lower limit, of the first bit-rate range and a second rate adaptation control unit for controlling rate adaptation of a second current bit-rate of said second session so that the second current bit-rate is adapted differently depending on a second distance to a selected limit, i e to the upper limit or to the lower limit, of the second bit-rate range. The first current bit-rate and second current bit-rate may in one embodiment be adapted by first and second amounts that are larger if the respective distance is small and smaller if the respective distance is large.</p>
<p id="p-0017" num="0016">According to a third aspect, the object is achieved by providing a receiver for receiving packet-switched encoded media that is transmitted by a sender in a session via a shared resource. The receiver comprises bit-rate range determining means for determining a bit-rate range valid for the session. The bit-rate range is or may be confined by an upper limit or end-point and a lower limit or end-point. The receiver further comprises bit-rate request estimation means and rate request means. The bit-rate request estimation means operate to estimate a bit-rate adaptation by comparing a currently received bit-rate to the bit-rate range to determine a distance to a selected limit, i e to the upper limit or to the lower limit, of the bit-rate range and estimating the bit-rate adaptation differently depending on the distance. The thus estimated bit-rate adaptation may in one embodiment be larger if the distance is small and smaller if the distance is large. The rate request means operate to request the sender to adapt a currently transmitted bit-rate in said session by sending a rate adaptation request message. The rate adaptation request message may in a further embodiment be sent upon reception of a congestion notification message from the shared resource.</p>
<p id="p-0018" num="0017">According to a fourth aspect, the object is achieved by providing a sender for transmitting packet-switched encoded media in a session via a shared resource to a receiver. The sender comprises bit-rate range determining means for determining a bit-rate range valid for the session. The bit-rate range is or may be confined by an upper limit or end-point and a lower limit or end-point. The sender further comprises rate request reception means and a rate adaptation control unit. The rate request reception means operate to receive requests from the receiver to adapt a currently transmitted bit-rate in the session. The rate adaptation control unit operate to control adaptation of the currently transmitted bit-rate in the session so that the currently transmitted bit-rate is adapted differently depending on a distance to a selected limit, i e to the upper limit or to the lower limit, of the bit-rate range. The currently transmitted bit-rate may in one embodiment be adapted by an amount that is larger if the distance is small and smaller if the distance is large. The rate adaptation may be done upon reception of a request in form of a rate adaptation request message from the receiver.</p>
<p id="p-0019" num="0018">By controlling the bit-rate of each session that is set-up via the shared resource for applications that run in clients to provide delay-sensitive services to users in this way the method, system and sender-receiver arrangements have the effect that rate adaptations can be distributed among the applications so that users share responsibility for rate adaptations.</p>
<p id="p-0020" num="0019">Further, by performing rate adaptations within a for each service defined bit-rate range the method, system and sender-receiver arrangements have the effect of enabling that the intents of the services can be maintained while the respective rates of the services are adapted.</p>
<p id="p-0021" num="0020">One advantage of at least some embodiments of the invention is that responsibility for adapting transmission rate when congestion occurs in a network node is shared more fairly between new users, that have not taken any action to alleviate the congestion, and users that have already reduced their bit-rate due to previous congestion notification messages.</p>
<p id="p-0022" num="0021">Another advantage is that the distribution of the rate adaptation functionality to the clients removes the need or requirement for user tracking and service awareness at the congested network node.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0023" num="0022">The invention, together with further objects and advantages thereof, may be more readily understood by making reference to the following description taken together with the accompanying drawings, in which:</p>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 1</figref> illustrates an example of a shared resource that may be subject to congestion;</p>
<p id="p-0025" num="0024"><figref idref="DRAWINGS">FIG. 2</figref> illustrates a further example of a shared resource that may be subject to congestion;</p>
<p id="p-0026" num="0025"><figref idref="DRAWINGS">FIG. 3</figref> is an illustration of an IP header with ECN bits according to IETF specification RFC 3168;</p>
<p id="p-0027" num="0026"><figref idref="DRAWINGS">FIG. 4</figref> is a schematic illustration of an embodiment of a rate adaptation mechanism according to the invention;</p>
<p id="p-0028" num="0027"><figref idref="DRAWINGS">FIG. 5</figref> is a schematic illustration of an embodiment of a system according to the invention;</p>
<p id="p-0029" num="0028"><figref idref="DRAWINGS">FIG. 6</figref> is an illustration of an embodiment of a bit-rate range indication according to the invention;</p>
<p id="p-0030" num="0029"><figref idref="DRAWINGS">FIG. 7</figref> is a schematic illustration of functionality blocks of an embodiment of a receiver according to the invention;</p>
<p id="p-0031" num="0030"><figref idref="DRAWINGS">FIG. 8</figref> is a schematic illustration of functionality blocks of an embodiment of a sender according to the invention;</p>
<p id="p-0032" num="0031"><figref idref="DRAWINGS">FIG. 9</figref> is a schematic illustration of functionality blocks of an alternative embodiment of a sender according to the invention;</p>
<p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. 10</figref> is a flow chart of an embodiment of a rate control algorithm according to the invention;</p>
<p id="p-0034" num="0033"><figref idref="DRAWINGS">FIG. 11</figref> is a flow chart of an embodiment of a bit-rate estimation part of a rate control algorithm according to the invention;</p>
<p id="p-0035" num="0034"><figref idref="DRAWINGS">FIG. 12</figref> is a flow diagram of an embodiment of a session flow between two users according to the invention;</p>
<p id="p-0036" num="0035"><figref idref="DRAWINGS">FIG. 13</figref> is an illustration of an embodiment of weighting of a bit-rate adaptation according to the invention; and</p>
<p id="p-0037" num="0036"><figref idref="DRAWINGS">FIG. 14</figref> is an illustration of a load level of a shared resource in of an embodiment of system according to the invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0038" num="0037">At least some of the embodiments according to the invention provides for a more fair or equal share distribution of rate adaptation among users of a particular routing function by taking a current session bit-rate of a user application, including its relation to an initial session set-up bit-rate, into consideration at rate adaptation. A mechanism is provided to guide a response to a congestion notification message so that users in the same network priority class experience similar quality degradations. This means that a new user which has just initiated its session, say at e.g. 100 kbps, would be required to lower its bit-rate in a different way than a user which already, when receiving some previous congestion notification message, has lowered its bit-rate from e.g. 100 kbps to 50 kbps.</p>
<p id="p-0039" num="0038">To ensure that the intent of a service can be maintained, the inventors have realized that a defined range of bit-rates between which the service is regarded as functioning or working is needed as modern media codecs have the possibility to tune into a discrete set of bit-rates, in some cases even any given bit-rate, but it is not certain that the intent of the service can be maintained at any given bit-rate. E.g. a real-time video session requires bit-rates in the order of 100 kbps. Although the video codecs used in such a session have the possibility to reduce the bit-rate to 10 kbps, the service is clearly not a conversational video session at 10 kbps. At this bit-rate, it would be perceived as a slow slide show; not the real-time conversational service stated by the service requirements. In this case, you could say that the valid bit-rates for the service are between &#x2dc;40 and 100 kbps.</p>
<p id="p-0040" num="0039">For other media types, the valid bit-rate range might look different, but the underlying principle is the same: there is need for a certain span or range of bit-rates in which the service can be determined to be valid.</p>
<p id="p-0041" num="0040">The inventors have further realized that, by specifying how applications should respond to setting of the ECN bits in the IP header, reliable use of ECN with UDP is enabled for real-time communication services, such as IMS Multimedia Telephony (MTSI), that are provided with a fast back-channel from the receiver to the sender and possibility to change transmission bit-rate dynamically.</p>
<p id="p-0042" num="0041"><figref idref="DRAWINGS">FIG. 4</figref> illustrates the application behavior required for using ECN with UDP traffic. Protocol stacks of a sending client <b>470</b> and a receiving client <b>420</b> that communicate via a shared resource <b>400</b>, here in the form of a router, are shown. In accordance with an ECN scheme for IP, the shared resource <b>400</b> sets ECN bits <b>300</b> in an IP header of a UDP packet that is forwarded over a connection <b>410</b> to the receiving client <b>420</b>. When a congestion notification message, i e the ECN bit setting, is detected on the IP layer <b>430</b> it has to be forwarded to an application layer <b>440</b> in a receiver <b>700</b> in the receiving client <b>420</b> as indicated by a connection <b>450</b>. Upon reception of the congestion notification message, the receiver <b>700</b> in the receiving client <b>420</b> needs to transmit a request to a sender <b>800</b> in the sending client <b>470</b> requiring the sender to reduce its bit-rate, indicated by arrow <b>480</b>. When that request arrives at the sender <b>800</b>, it should immediately reduce the transmitted bit-rate to the receiver <b>700</b>, as indicated by arrow <b>490</b>. The amount of the reduction may be determined by the sender <b>800</b> which in turn can base its decision on a number of parameters.</p>
<p id="p-0043" num="0042">For UDP based services, the inventors propose that guidance of bit-rate suitable for a session can be provided by adding a parameter determining a lower limit, below which a service is not seen to be usable. This can be done in the session set-up procedure using e g the Real Time Streaming Protocol (RTSP) or the Session Initiation Protocol (SIP), in which the embedded Session Description Protocol (SDP) already carries a bit-rate parameter, the b-parameter, which specifies the upper limit of the session bit-rate.</p>
<p id="p-0044" num="0043">The inventors further suggest that the sender response to the reception of a congestion notification message can be based on an extended session set-up procedure. This procedure can be used to control the sender response to congestion notification messages in a way which takes previous actions on congestion notification messages into consideration and also enable general service requirements to impact the choice of sender actions.</p>
<p id="p-0045" num="0044">Thus, according to embodiments of the present invention, two features are introduced in the real-time communication service:</p>
<p id="p-0046" num="0045">1. Signaling of a session bit-rate range, i.e. between which rates is the service valid and between which rates the media sender is allowed to adapt during the session.</p>
<p id="p-0047" num="0046">2. An adaptation mechanism that changes its behavior based on the relation between the current media transmission bit-rate or the current session bit-rate and the bit-rate range signaled in the session set-up.</p>
<p id="p-0048" num="0047">The result will be that the sender determines its action to the congestion notification message based on what bit-rate it currently transmits at and where in the session bit-rate range it resides: The closer to the lower limit, the smaller response to the congestion message, the closer to the upper limit, the more drastic response to the congestion message. In this way, the more resource-consuming users in the same network priority class would respond with a greater bit-rate reduction than a user already transmitting close to his bottom limit for session continuity.</p>
<p id="p-0049" num="0048"><figref idref="DRAWINGS">FIG. 5</figref> is a system according to one or more embodiments of the invention. For simplicity, an LTE environment is chosen for the description, but the invention is equally applicable to any packet-switched communication system employing communication services over a protocol that has no built in flow control. A first party, User A, using a first client <b>500</b>, is communicating in a first session with a second party, User D, who uses a second client <b>530</b>. The first client <b>500</b> is in this example connected through a firewall <b>570</b> to a shared resource <b>560</b>. The shared resource <b>560</b> is in turn connected via a core network <b>580</b> to an eNB base station <b>540</b> to which the second client <b>530</b> is connected via a shared transmission channel <b>550</b>. In a similar way a third party, User B, using a third client <b>520</b>, is communicating in a second session with a fourth party, User C, who uses a fourth client <b>510</b>. The third client <b>520</b> is also connected to the shared resource <b>560</b>, and the fourth client <b>510</b> is also connected via the shared transmission channel <b>550</b> to the eNB base station <b>540</b>. Clients can be for example a mobile terminal, a personal computer or a virtual client residing on a server.</p>
<p id="p-0050" num="0049">On the first and the second clients <b>500</b> and <b>530</b> a first application is running, providing a first service to the involved parties User A and User D. On the third and the fourth clients <b>520</b> and <b>510</b> a second application is running, providing a second service to the involved parties User B and User C. Depending on the direction of the communication, the application that is running on the respective one of the clients may act as a sender <b>800</b> or as a receiver <b>700</b>, as shown in <figref idref="DRAWINGS">FIG. 4</figref>. For example, for communication from User A to User D, the first application running on the first client <b>500</b> acts as a sender <b>800</b> and the first application that is running on the second client <b>530</b> acts as a receiver <b>700</b>, whereas for communication from User D to User A, the first application running on the second client <b>530</b> acts as a sender <b>800</b> and the first application that is running on the first client <b>500</b> acts as a receiver <b>700</b>.</p>
<p id="p-0051" num="0050">A first bit-rate range is determined to be valid for the first session and for the first application, i e needed for the service provided by the first application to function as intended during the first session, and a second bit-rate range is determined to be valid for the second session and for the second application, i e needed for the service provided by the second application to function as intended during the second session. A bit-rate range is or may be specified by an upper limit or end-point indicating a maximum bit-rate and a lower limit or end-point indicating a minimum bit-rate by which an application can operate to provide a usable service.</p>
<p id="p-0052" num="0051">One way of indicating this bit-range span or bit-rate range is shown in <figref idref="DRAWINGS">FIG. 6</figref>. In this example, the SDP is used to convey the valid bit-rate range in a session negotiation procedure. This is done by introducing, in addition to the existing upper limit for the session bit-rate, bmax, also a lower limit for the session bit-rate, bmin. The example shows that the offerer, i e the sender, supports a higher maximum bit-rate, indicated by bmax in SDP offer <b>600</b>, than the receiver, whose maximum bit-rate is indicated by bmax in SDP answer <b>610</b>, but both identify 48 kbps, indicated by bmin in SDP offer <b>600</b> and SDP answer <b>610</b> as the lower limit for the video in this session. This session would be run with a maximum bit-rate or upper limit of 60 kbps for the video and a minimum bit-rate or lower limit of 48 kbps.</p>
<p id="p-0053" num="0052">Other means can also be used to convey the bit-rate range information. One possible alternative could be to have the bit-rate range specified in the application settings, or hard coded in the application.</p>
<p id="p-0054" num="0053">In an environment where quality of service (QoS) mechanisms are available for the traffic, the lower and upper limits of the bit-rate range can be related to a specific QoS grant. A specific QoS scheme affects admission into the network and possibly also network resource reservations during the session. In 3GPP networks, the lower and upper limits could be related to the QoS attributes guaranteed bit-rate (GBR) and maximum bit-rate (MBR) respectively. However, this is not required and there might be occasions where the lower limit could be lower than GBR.</p>
<p id="p-0055" num="0054">As can be seen from <figref idref="DRAWINGS">FIGS. 7 and 8</figref>, where receiver <b>700</b> and sender <b>800</b> parts of an application are illustrated, the first application includes at least one first media encoder <b>830</b> and/or at least one first media decoder <b>730</b>. Likewise, the second application includes at least one second media encoder <b>830</b> and/or at least one second media decoder <b>730</b>. An application that resides on a server may have a media encoder, but no media decoder as such an application typically acts as a sender.</p>
<p id="p-0056" num="0055">The first application further includes a first rate adaptation control unit <b>870</b> that is connected to the at least one first media encoder <b>830</b> and that serves to control the rate, e g bit rate, of the at least one first media encoder <b>830</b>. Similarly, the second application further includes a second rate adaptation control unit <b>870</b> that is connected to the at least one second media encoder <b>830</b> and that serves to control the rate, e g bit rate, of the at least one second media encoder <b>830</b>. The first rate adaptation control unit <b>830</b> thereby also serves to control the rate, e g bit rate, of the first session, and the second rate adaptation control unit <b>830</b> serves to control the rate, e g bit rate, of the second session, as the rate or bit-rate of a session is determined by the rate at which the media flow of packets is output from the at least one media encoder <b>830</b>.</p>
<p id="p-0057" num="0056">The first rate adaptation control unit <b>870</b> has been configured to compare a first current bit-rate that is currently used in the first session or by the at least one first media encoder <b>830</b> to said first bit-rate range to determine a first distance to a limit or end-point of the first bit-rate range, i e to the upper limit or to the lower limit of the first bit-rate range, and the second rate adaptation control unit <b>870</b> has been configured to compare a second current bit-rate that is currently used in the second session or by the at least one second media encoder <b>830</b> to said second bit-rate range to determine a second distance to a limit or end-point of the second bit-rate range, i e to the upper limit or to the lower limit of the second bit-rate range. The first and second rate adaptation control units <b>830</b> are further configured to adapt the first current bit-rate and second current bit-rate differently depending on the first and second distance, i e to adapt the respective bit-rates by amounts that depend on the size of the respective distance. The rate adaptations may be performed in order to alleviate or reduce congestion in the shared resource <b>560</b> and/or the shared transmission channel <b>550</b>.</p>
<p id="p-0058" num="0057">The first and second rate adaptation control units <b>870</b> are, or may be, triggered by a rate adaptation request message <b>480</b> to perform rate adaptation control and issue a rate control command <b>880</b> to the at least one first and at least one second media encoder <b>830</b> respectively. The rate adaptation request message may be sent e g by the receiver <b>700</b>, i e by the application that receives the media that has been encoded by the respective at least one first and at least one second media encoder <b>830</b>. The rate adaptation request message <b>480</b> may further specify a requested or suggested rate or bit-rate adaptation, e g expressed as a relative change or a difference to the current bit-rate, or as a new or adapted bit-rate, to be used for the transmission in the respective session. The bit-rate adaptation may be estimated by the receiver <b>700</b> so that the currently received bit-rate will be reduced more if it is closer to the upper limit of the bit-rate range than if it is closer to the lower limit of the bit-rate range valid for the respective session.</p>
<p id="p-0059" num="0058">The rate-control mechanism utilizes the knowledge of the valid bit-rate range for the media type as well as the current value of the transmitted bit-rate. This mechanism will now be described in more detail with reference to FIGS. <b>4</b> and <b>7</b>-<b>9</b>. <figref idref="DRAWINGS">FIGS. 7 and 8</figref> illustrate some parts of a sender-receiver pair of an application where the rate-control mechanism is implemented. At least some of these parts, such as rate adaptation control units <b>870</b> and <b>970</b>, bit rate request estimation means <b>770</b>, rate request means <b>790</b>, rate request reception means <b>850</b>, detection means <b>750</b>, bit-rate range determining means <b>720</b> and <b>820</b>, bit-rate determining means <b>740</b> and <b>840</b>, Packet Loss Rate (PLR) determining means <b>905</b>, Jitter determining means <b>915</b>, Application settings determining means <b>920</b> and Network Feedback (NF) determining means <b>940</b> may for example be implemented in form of memories from which information can be read out and/or processors that perform processing of information to produce a result that can be used in the rate adaptation.</p>
<p id="p-0060" num="0059"><figref idref="DRAWINGS">FIG. 7</figref> shows a block scheme of a receiver <b>700</b> that is configured to provide a service by receiving packet-switched encoded media <b>710</b> that is transmitted by a sender <b>800</b> in a session via a shared resource <b>400</b>. The receiver <b>700</b> includes bit-rate range determining means <b>720</b> for determining a valid session bit-rate range within which a bit-rate applied for transmission of the encoded media must fall for the service to be working as intended, e g in that the service provides sufficient media quality. The valid session bit-rate range can be specified by an upper limit or end-point and a lower limit or end-point. Further, the receiver <b>700</b> comprises at least one media decoder <b>730</b> for decoding said encoded media at a currently received bit-rate to output decoded media <b>745</b>, e g audio or video, and detection means <b>750</b> for detecting a congestion notification message from the shared resource and bit-rate determining means <b>740</b> for determining the currently received bit-rate. The currently received bit-rate may be determined from the IP flow of encoded media <b>710</b> that is input to the media decoder <b>730</b> as indicated by dashed arrow <b>755</b>, e g by monitoring the IP flow and estimating a mean value for the currently received bit-rate. It can also be determined from other means available in the client where the receiver <b>700</b> resides. Information on valid session bit-rate range, currently received bit-rate and the congestion notification message is provided on an input <b>760</b> to bit-rate request estimation means <b>770</b> for estimating a bit-rate adaptation by comparing the currently received bit-rate to the valid session bit-rate range to determine a distance to a limit, i e to the upper limit or to the lower limit, of the valid session bit-rate range and estimating the bit-rate adaptation differently depending on the distance. The bit-rate adaptation depends on the distance, so that the bit-rate adaptation is larger if the distance is small and smaller if the distance is large. The estimation of a bit-rate adaptation may be done in response to a congestion notification message but could also be triggered by other messages or situations. The estimated bit-rate adaptation, which may be expressed as a relative change or a difference to the currently received bit-rate, or as a requested transmitted bit-rate, is then output on line <b>780</b> to rate request means <b>790</b>. In a first embodiment, the rate request means <b>790</b> then requests the sender <b>800</b> to adapt its currently transmitted bit-rate of the encoded media by sending a rate adaptation request <b>480</b> to the sender <b>800</b>. The rate adaptation request <b>480</b> may further include the estimated bit-rate adaptation to be used as an input by the sender <b>800</b> for determining a new transmitted bit-rate, i e an adapted bit rate, of the encoded media <b>490</b>, <b>810</b>.</p>
<p id="p-0061" num="0060">However, in a second embodiment, the rate adaptation request <b>480</b> may be interpreted by the sender <b>800</b> as an instruction or order to adjust the currently transmitted bit-rate as specified by the estimated bit-rate adaptation included in the rate adaptation request <b>480</b>.</p>
<p id="p-0062" num="0061">In yet another, third embodiment, the rate adaptation request <b>480</b> sent by the receiver <b>700</b> does not include any estimated bit-rate adaptation. This third embodiment requires that the sender <b>800</b> includes bit-rate estimation means, for estimating a bit-rate adaptation. Further, it is possible, but not necessary in the third embodiment that the receiver <b>700</b> includes bit-rate estimation means <b>770</b> and estimates a bit-rate adaptation.</p>
<p id="p-0063" num="0062"><figref idref="DRAWINGS">FIG. 8</figref> shows a block scheme of a sender <b>800</b> that is configured to provide a service by transmitting packet-switched encoded media <b>810</b> in a session via a shared resource <b>400</b> to a receiver <b>700</b>. The sender <b>800</b> includes bit-rate range determining means <b>820</b> for determining a valid session bit-rate range within which a bit-rate applied for transmission of the encoded media <b>810</b> must fall for the service to be working as intended, e g in that the service provides sufficient media quality, and at least one media encoder <b>830</b> for receiving media <b>835</b> that is input to the media encoder, e g captured audio or video, and encoding the media at a currently transmitted bit-rate. Further, the sender <b>800</b> includes rate request reception means <b>850</b> for receiving requests from the receiver <b>700</b> to adapt the currently transmitted bit-rate of the encoded media and bit-rate determining means <b>840</b> for determining the currently transmitted bit-rate. The currently transmitted bit-rate may be determined from the settings in the media encoder <b>830</b> or from the IP flow of encoded media <b>810</b> that is output from the media encoder <b>830</b> as indicated by dashed arrow <b>855</b>, but can also be determined from other means available in the client where the sender <b>800</b> resides. Information on valid session bit-rate range, currently transmitted bit-rate and the requests <b>480</b> from the receiver is provided on an input <b>860</b> to a rate adaptation control unit <b>870</b>. The requests <b>480</b> may further include an estimated bit-rate adaptation made by the receiver <b>700</b> to be used as an input by the sender <b>800</b> for determining a new transmitted bit-rate, i e an adapted bit rate, of the encoded media <b>810</b>. The rate adaptation control unit <b>870</b> determines a rate adaptation to be made based on the information provided on the input <b>860</b> and outputs a rate control command on an output <b>880</b> to instruct the media encoder <b>830</b> to change the currently transmitted bit-rate into an adapted bit-rate within the valid session bit-rate range. The media encoder <b>830</b> then changes its transmission or output of encoded media <b>810</b> from the currently transmitted bit-rate to the adapted bit-rate. The rate adaptation control unit <b>870</b> may determine a rate adaptation to be made and/or output a rate control command to the media encoder in response to a request <b>480</b> from the receiver <b>700</b> but it could also be triggered by other messages or situations.</p>
<p id="p-0064" num="0063">Referring again to the third embodiment of the present invention, the bit-rate estimation means <b>770</b> are in this embodiment required in the sender <b>800</b> for estimating a bit-rate adaptation as no such information is included in the rate adaptation request <b>480</b> sent by the receiver <b>700</b>. The bit-rate estimation means may then preferably be included in the rate adaptation control unit <b>870</b> of the sender <b>800</b>.</p>
<p id="p-0065" num="0064">A rate adaptation mechanism for a media codec, i e a media encoder-decoder pair, can take into account a number of different measurement reports or session information parameters when determining the current optimal transmission bit-rate, i e the adapted bit-rate. This is illustrated in <figref idref="DRAWINGS">FIG. 9</figref> that shows a sender <b>900</b> according to a fourth embodiment of the present invention. The overall function of the sender <b>900</b> in this embodiment is the same as that of the sender <b>800</b> in the first embodiment described with reference to <figref idref="DRAWINGS">FIG. 8</figref>. For components for which the description would be identical to that of <figref idref="DRAWINGS">FIG. 8</figref>, reference numerals are the same as in <figref idref="DRAWINGS">FIG. 8</figref> and the description is not repeated here. A difference in this fourth embodiment is that the rate adaptation control unit <b>970</b> can take into account a variety of information types or parameters when determining a rate adaptation to be made, such as Packet Loss Rate (PLR) determined by PLR determining means <b>905</b>, Jitter determined by Jitter determining means <b>915</b>, Network Feedback (NF) messages determined by NF determining means <b>940</b> and Application settings determined by Application settings determining means <b>920</b>. Network feedback information may regard a change in the Quality of Service parameters and Application settings information may be service preferences depending on mobile capabilities. The information regarding Packet Loss Rate (PLR), Jitter, Network feedback messages and Application settings can be determined or made available through different measurement reports or session information parameters and is provided to the rate adaptation control unit <b>970</b> on an input <b>860</b> together with the valid session bit-rate range determined by bit-rate range determining means <b>820</b>, currently transmitted bit-rate determined by bit-rate determining means <b>840</b> and the requests received by rate request reception means <b>850</b> from the receiver <b>700</b>, which requests may further include an estimated bit-rate adaptation. The rate adaptation control unit <b>870</b> then takes the variety of different information types or parameters and any estimated bit-rate adaptation from the receiver <b>700</b> into account for determining a rate adaptation to be made. As a consequence from considering more information in this way, the influence of the bit-rate adaptation estimated by the receiver <b>700</b> on the adapted bit-rate set by the sender <b>900</b> can be expected to become smaller.</p>
<p id="p-0066" num="0065">Referring again to the second embodiment, the rate adaptation request may in this embodiment be interpreted by the sender as an instruction or order to adjust the currently transmitted bit-rate as specified by the estimated bit-rate adaptation included in the rate adaptation request. The bit-rate request estimation means <b>770</b> could in a variation of this embodiment be generalized to take into account a variety of information types or parameters when determining an estimated rate adaptation to be made, such as Packet Loss Rate (PLR), Jitter, Network feedback messages and Application settings.</p>
<p id="p-0067" num="0066">To summarize, 4 embodiments of the rate adaptation control mechanism have been discussed:</p>
<p id="p-0068" num="0067">1. The first embodiment: The receiver <b>700</b> estimates a bit-rate adaptation based on a currently received bit-rate <b>740</b> and a valid session bit-rate range <b>720</b> and sends a rate adaptation request <b>480</b> that may include the estimated bit-rate adaptation to the sender <b>800</b>. The sender determines a new, adapted bit-rate for the transmission to the receiver. For the version when the estimated bit-rate adaptation is included the rate adaptation request from the receiver, the sender can choose whether to follow the bit-rate adaptation requested by the receiver or not.</p>
<p id="p-0069" num="0068">2. The second embodiment: The receiver <b>700</b> estimates a bit-rate adaptation based on at least a currently received bit-rate <b>740</b> and a valid session bit-rate range <b>720</b> and determines the bit-rate adaptation to be performed. The receiver may further be generalized to take into account a variety of information types or parameters when determining the bit-rate adaptation to be made. The receiver sends a rate adaptation request <b>480</b> that specifies the bit-rate adaptation to the sender <b>800</b>. The sender performs the bit-rate adaptation as instructed by the receiver.</p>
<p id="p-0070" num="0069">3. The third embodiment: The receiver <b>700</b> sends a rate adaptation request <b>480</b> to the sender <b>800</b>. The sender estimates a bit-rate adaptation based on a currently transmitted bit-rate <b>840</b> and a valid session bit-rate range <b>820</b> and determines a new, adapted bit-rate for the transmission to the receiver <b>700</b>. The receiver may have estimated a bit-rate adaptation, possibly for other purposes than giving input to the sender, but it is not included in the rate adaptation request to the sender.</p>
<p id="p-0071" num="0070">4. The fourth embodiment: The receiver <b>700</b> sends a rate adaptation request <b>480</b> to the sender <b>900</b> that may include a suggested bit-rate adaptation based on an estimated bit-rate adaptation performed by the receiver <b>700</b> based on a currently received bit-rate <b>740</b> and a valid session bit-rate range <b>720</b>. The sender estimates a bit-rate adaptation based on a currently transmitted bit-rate <b>840</b> and a valid session bit-rate range <b>820</b> in addition to a variety of information types or parameters determined or made available through different measurement reports or session information parameters. If a suggested bit-rate adaptation is included in the rate adaptation request <b>480</b> it may also be used as an input or replace parts of the information, e g the currently transmitted bit-rate <b>840</b> and the valid session bit-rate range <b>820</b>, considered by the sender <b>900</b> when determining the bit-rate adaptation to be performed.</p>
<p id="p-0072" num="0071"><figref idref="DRAWINGS">FIG. 10</figref> shows a flow chart of one example of a rate control algorithm that is running in an exemplary client with an application that may act as a receiver and a sender. The process starts at the set-up of a session in step <b>1000</b>. First session bandwidth parameters are negotiated to determine a maximum session bit-rate bmax and a minimum session bit-rate bmin at step <b>1010</b>. Then at <b>1020</b> a currently transmitted bit-rate bcurr is set to bmax or to a value lower than bmax. Thereafter a currently received bit-rate brecv is set to bmax or to a value lower than bmax at <b>1030</b>. Data, e g encoded media, is then transmitted at the currently transmitted bit-rate bcurr at <b>1040</b>. At <b>1050</b> the algorithm checks for reception of a congestion notification message. If no such message has been received, the algorithm proceeds to step <b>1090</b>. If however it is determined that a congestion notification message has been received, a bit-rate request value, i e a bit-rate adaptation, is estimated at step <b>1060</b>. Then at <b>1070</b> a rate request, i e a rate adaptation request, is transmitted to a sender in another client. The rate adaptation request may specify or suggest a bit-rate adaptation. In this example, the bit-rate adaptation is expressed as a transmitted bit-rate request breqsend. Then at <b>1080</b> the currently received bit-rate brecv is set to breqsend when it is confirmed, e g by analyzing received bit-rate, that the sender in the another client has adapted the transmitted bit-rate. In this example the sender in the another client adapts the transmitted bit-rate in accordance with the request by the receiver in the exemplary client. The process then proceeds to <b>1090</b>, where the algorithm checks whether a rate request, i e a rate adaptation request, has been received from a receiver in the another client. If no such request has been received, the process proceeds to step <b>1098</b>. If however it is determined that a rate request, i e a rate adaptation request, has been received, then at a step <b>1094</b> currently transmitted bit-rate bcurr is set or adapted to received bit-rate request breqrecv that has in this example been received in the rate request from the receiver in the another client. The process then continues at step <b>1098</b>, where a check is made as to whether the session is terminated. If not, the process continues at step <b>1040</b>, transmitting data at currently transmitted bit-rate bcurr. If on the other hand the session is terminated, the process stops at step <b>1099</b>.</p>
<p id="p-0073" num="0072"><figref idref="DRAWINGS">FIG. 11</figref> shows a flow chart for the bit-rate estimation part done in step <b>1060</b> of the process shown in <figref idref="DRAWINGS">FIG. 10</figref> in more detail. The process starts at step <b>1100</b>. At step <b>1110</b> a congestion notification message, also called ECN message, is received e g from a shared resource. The message is conveyed by setting ECN bits in an IP header of a transmitted packet. Then at step <b>1120</b> a currently received bit-rate brecv is compared with a session upper limit or maximum session bit-rate bmax and a session lower limit or minimum session bit-rate bmin. Then, if it is determined in step <b>1130</b> that the currently received bit-rate brecv is greater than the session lower limit or minimum session bit-rate bmin, a new requested received bit-rate, i e a bit-rate adaptation expressed as a transmitted bit-rate request breqsend, is computed at <b>1140</b>. The process then stops at <b>1150</b>. If on the other hand, it is determined in step <b>1130</b> that the currently received bit-rate brecv is already at the session lower limit or minimum session bit-rate bmin, the process stops at <b>1150</b> and no further rate adaptation is performed.</p>
<p id="p-0074" num="0073"><figref idref="DRAWINGS">FIG. 12</figref> shows a session flow diagram for a User A <b>1200</b> and a User B <b>1210</b> that are communicating via an ECN capable network node that is a shared resource <b>1220</b>. In a first step <b>1225</b> signalling messages are exchanged between User A and User B in a session negotiation procedure, e g via SIP/SDP, to determine a session bit-rate range specified by a session upper limit or maximum session bit-rate bmax kilobits per second (kbps) and a session lower limit or minimum session bit-rate bmin kbps. Then in a step <b>1230</b> a full duplex media flow is exchanged using a currently transmitted bit-rate bcurr which is set to maximum session bit-rate bmax for transmissions in both directions, i e from User A to User B and from User B to User A. In a next step <b>1240</b> the shared resource <b>1220</b> sends an ECN message to User B <b>1210</b>, by setting ECN bits in an IP header of a transmitted packet. In step <b>1250</b> User B responds to the ECN message by sending a request, i e a rate adaptation request, to User A to lower its transmission bit-rate for transmissions to User B. User A then responds by adapting the transmission bit-rate for transmissions from User A to User B so that in step <b>1260</b> a full duplex media flow is exchanged between User A and User B at a currently transmitted bit-rate bcurr of maximum session bit-rate bmax from User B to User A and at a currently transmitted bit-rate bcurr which is in between the session lower limit or minimum session bit-rate bmin and the upper limit or maximum session bit-rate bmax from User A to User B. In a next step <b>1270</b> the shared resource <b>1220</b> sends an ECN message to User A <b>1200</b>, by setting ECN bits in an IP header of a transmitted packet. In step <b>1280</b> User A responds to the ECN message by sending a request, i e a rate adaptation request, to User B to lower its transmission bit-rate for transmissions to User A. User B then responds by adapting the transmission bit-rate for transmissions from User B to User A so that in step <b>1290</b> a full duplex media flow is exchanged using a currently transmitted bit-rate bcurr which is in between the session lower limit or minimum session bit-rate bmin and the upper limit or maximum session bit-rate bmax for transmissions in both directions, i e from User A to User B and from User B to User A. Finally, in step <b>1295</b>, signalling messages are exchanged between User A and User B to terminate the session, e g using the SIP protocol. In this example the users A and B have the same rate adaptation algorithm in their respective User Equipments, which means that when congestion occurs in the direction from A to B the bit-rate adaptation is the same as when congestion occurs in the direction from B to A. This need not be the case if the application settings or UE capabilities are different in the UE of User A than in the UE of User B.</p>
<p id="p-0075" num="0074">The rate control mechanism can be applied to control the bit-rate of a media encoder as well as to control the bit-rate of a media flow on session level. For some applications using more than one media type, e g audio and video, the media flows of the different media types may be multiplexed or combined into one session media flow or IP transport flow that is sent in a session from a sender to a receiver. For such an application, the rate adaptation control unit can be configured to be applied on session level to control the bit-rate of the session media flow that is output for transmission from or via e g a multiplexer that receives as an input the encoded media flows that are output from the respective media encoders of different types. In a similar way, the bit-rate estimation means can be configured to estimate a bit-rate adaptation for a session media flow that consists of media flows of different media types.</p>
<p id="p-0076" num="0075">The following example illustrates control of the bit-rate of media flows on session level for at least two applications each employing media of two different media types. However, the method and arrangement also applies for applications employing media of more than two different media types. In this example at least a first session for a first application and a second session for a second application have been set up for communication in a packet-switched communications system where multiple sessions for multiple parties that run applications can be set-up via a shared resource. A first encoded media flow of a first media type, e g audio, from a first media encoder and a second encoded media flow of a second media type, e g video, from a second media encoder are multiplexed by a first multiplexer into one first session media flow that is transmitted in the first session from a first sender to a first receiver. Further, a third encoded media flow of a third media type, e g voice, from a third media encoder and a fourth encoded media flow of a fourth media type, e g data, from a fourth media encoder are multiplexed by a second multiplexer into one second session media flow that is transmitted in the second session from a second sender to a second receiver. The first and second media encoders and the first multiplexer are or may be included in the first application, and the third and fourth media encoders and the second multiplexer are or may be included in the second application. The first application further includes a first rate adaptation control unit that is connected to the first and second media encoders and to the first multiplexer and that serves to control the rate, e g bit rate, of the first session media flow. Similarly, the second application further includes a second rate adaptation control unit that is connected to the third and fourth media encoders and that serves to control the rate, e g bit rate, of the second session media flow.</p>
<p id="p-0077" num="0076">A first bit-rate range is determined to be valid for the first session and a second bit-rate range is determined to be valid for the second session. The first rate adaptation control unit has been configured to compare a first current bit-rate that is currently used in the first session to said first bit-rate range to determine a first distance to a limit or end-point of the first bit-rate range, i e to the upper limit or to the lower limit of the first bit-rate range, and the second rate adaptation control unit has been configured to compare a second current bit-rate that is currently used in the second session to said second bit-rate range to determine a second distance to a limit or end-point of the second bit-rate range, i e to the upper limit or to the lower limit of the second bit-rate range. The first and second rate adaptation control units are further configured to adapt the first current bit-rate and second current bit-rate differently depending on the first and second distance, i e to adapt the respective bit-rates by amounts that depend on the size of the respective distance.</p>
<p id="p-0078" num="0077">As mentioned earlier, the measure taken when receiving a congestion notification message is based on relating the congestion notification message with the current transmission bit-rate. The weighting of the congestion notification, i e the amount of bit-rate adaptation required from the sender as a response to the congestion notification, is done by investigating the relationship between the current bit-rate and the bit-rate range valid for the session. <figref idref="DRAWINGS">FIG. 13</figref> shows an example weighting of ECN-triggered adaptive action based on current bit-rate and the session bit-rate range. In this example the weighting would give a 40% reduction in bit-rate when the current received bit-rate is equal to bmax and a zero reduction when the current received bit-rate has been reduced to bmin.</p>
<p id="p-0079" num="0078">The bit-rate reduction estimation can be done in several different ways. Depending on the actual values (i.e. the width) of the bit-rate range different weightings would be suitable. An example exponential weighting formula is shown in Equation 1, showing an exponential weighting equation.</p>
<p id="p-0080" num="0079">
<maths id="MATH-US-00001" num="00001">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <mi>breqsend</mi>
        <mo>=</mo>
        <mrow>
          <mrow>
            <mfrac>
              <mn>3</mn>
              <mrow>
                <mn>2</mn>
                <mo>&#x2062;</mo>
                <mstyle>
                  <mspace width="0.3em" height="0.3ex"/>
                </mstyle>
                <mo>&#x2062;</mo>
                <mi>e</mi>
              </mrow>
            </mfrac>
            <mo>&#x2062;</mo>
            <msup>
              <mi>&#x2147;</mi>
              <mfrac>
                <mrow>
                  <mi>brecv</mi>
                  <mo>-</mo>
                  <mrow>
                    <mi>b</mi>
                    <mo>&#x2062;</mo>
                    <mstyle>
                      <mspace width="0.8em" height="0.8ex"/>
                    </mstyle>
                    <mo>&#x2062;</mo>
                    <mi>min</mi>
                  </mrow>
                </mrow>
                <mrow>
                  <mrow>
                    <mi>b</mi>
                    <mo>&#x2062;</mo>
                    <mstyle>
                      <mspace width="0.8em" height="0.8ex"/>
                    </mstyle>
                    <mo>&#x2062;</mo>
                    <mi>max</mi>
                  </mrow>
                  <mo>-</mo>
                  <mrow>
                    <mi>b</mi>
                    <mo>&#x2062;</mo>
                    <mstyle>
                      <mspace width="0.8em" height="0.8ex"/>
                    </mstyle>
                    <mo>&#x2062;</mo>
                    <mi>min</mi>
                  </mrow>
                </mrow>
              </mfrac>
            </msup>
          </mrow>
          <mo>-</mo>
          <mn>1</mn>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mrow>
          <mi>Equation</mi>
          <mo>&#x2062;</mo>
          <mstyle>
            <mspace width="0.8em" height="0.8ex"/>
          </mstyle>
          <mo>&#x2062;</mo>
          <mn>1</mn>
        </mrow>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
</p>
<p id="p-0081" num="0080">This weighting would give an initial 50% reduction in bit-rate when the current received bit-rate is equal to bmax and a zero reduction if the session already is at bmin.</p>
<p id="p-0082" num="0081"><figref idref="DRAWINGS">FIG. 14</figref> illustrates in an LTE deployment, such as the system shown in <figref idref="DRAWINGS">FIG. 5</figref>, a load level on the enhanced NodeB (eNB) as a shared resource, i e providing a shared transmission channel, which may set the ECN bits. In the example, a weighting scheme giving a 50% reduction when running at bcurr=bmax and a 10% reduction when running at bcurr=0.5*bmax is used. The events shown in the below table take place:</p>
<p id="p-0083" num="0082">
<tables id="TABLE-US-00001" num="00001">
<table frame="none" colsep="0" rowsep="0">
<tgroup align="left" colsep="0" rowsep="0" cols="2">
<colspec colname="1" colwidth="42pt" align="left"/>
<colspec colname="2" colwidth="175pt" align="left"/>
<thead>
<row>
<entry namest="1" nameend="2" align="center" rowsep="1"/>
</row>
<row>
<entry>Time, t</entry>
<entry>Events</entry>
</row>
<row>
<entry namest="1" nameend="2" align="center" rowsep="1"/>
</row>
</thead>
<tbody valign="top">
<row>
<entry>t = T0</entry>
<entry>A session is established between users B and C.</entry>
</row>
<row>
<entry/>
<entry>Transmission bit-rate from user B to C bcurr = bmax.</entry>
</row>
<row>
<entry>t = T1</entry>
<entry>eNB experience congestion and sets ECN bits in IP</entry>
</row>
<row>
<entry/>
<entry>flow going from B to C. User C receives ECN bits and</entry>
</row>
<row>
<entry/>
<entry>transmit a 50% rate reduction request to B. B lowers its</entry>
</row>
<row>
<entry/>
<entry>transmission bit-rate accordingly.</entry>
</row>
<row>
<entry>t = T2</entry>
<entry>A new session is established between users A and D.</entry>
</row>
<row>
<entry/>
<entry>Transmission bit-rate from user A to D, bcurr = bmax.</entry>
</row>
<row>
<entry/>
<entry>Note that user B is still transmitting at 0.5*bmax.</entry>
</row>
<row>
<entry>t = T3</entry>
<entry>eNB experience congestion and sets ECN bits in IP</entry>
</row>
<row>
<entry/>
<entry>flow going from B to C and in flow going from A to D.</entry>
</row>
<row>
<entry/>
<entry>User C receives ECN bits and transmit a 10% rate</entry>
</row>
<row>
<entry/>
<entry>reduction request to B since B already is running at a</entry>
</row>
<row>
<entry/>
<entry>reduced rate. B lowers its transmission bit-rate</entry>
</row>
<row>
<entry/>
<entry>accordingly. User D also receives ECN bits but transmit</entry>
</row>
<row>
<entry/>
<entry>a 50% rate reduction request to A since user A is</entry>
</row>
<row>
<entry/>
<entry>transmitting at maximum session bit-rate and should</entry>
</row>
<row>
<entry/>
<entry>therefore reduce by 50%.</entry>
</row>
<row>
<entry>t &#x3e; T3</entry>
<entry>Both sessions are now running at reduced rates but</entry>
</row>
<row>
<entry/>
<entry>with similar quality. Slow upward adaptation could now</entry>
</row>
<row>
<entry/>
<entry>start to try to restore session bit-rate at bmax.</entry>
</row>
<row>
<entry namest="1" nameend="2" align="center" rowsep="1"/>
</row>
</tbody>
</tgroup>
</table>
</tables>
</p>
<p id="p-0084" num="0083">By taking the current bit-rate into account when determining the adaptive action, the client will take a greater responsibility to alleviate the congestion situation in the network if its current bit-rate is close to the upper limit of the session bit-rate range. In this way, the clients will distribute the adaptive actions in a fair way among themselves without punishing clients that already have taken a greater responsibility to alleviate congestion in the network. Further, it also has the benefit of distributing the functionality to the clients removing the requirement of user tracking and service awareness at the congested network node, e.g. eNB or a router. This scheme can be further extended to cope with different subscriber properties, e.g. &#x201c;economy subscribers&#x201d; and &#x201c;gold subscribers&#x201d;, for example to require less bit-rate adaptation from &#x201c;gold subscribers&#x201d;, e g subscribers that pay more for the service, than from &#x201c;economy subscribers&#x201d;, e g subscribers that pay less for the service, and also with more absolute weighting, i e bit-rate adaptation expressed in absolute bit-rate amount or bit-rate adaptation to a specified bit-rate value if current bit-rate is above this value, based on the absolute value of the current bit-rate, not only the relative value to the session bit-rate range. Combinations of absolute and relative weighting are also conceivable, e g always reduce to an absolute bit-rate value if current bit-rate is above this value, then reduce by amounts that relate current bit-rate to a limit of the bit-rate range.</p>
<p id="p-0085" num="0084">One advantage of at least some embodiments of this invention is that they solve the problem of unfair responsibility between clients in a congested network node to alleviate congestion. Without this functionality, both the user which already has adapted to network congestion as well as the new user which hasn't reduced the bandwidth consumption will be required to reduce their transmission bit-rate in an equal way. In the case of a newly established session, which has not taken any congestion-alleviate action, the user will suffer much less media quality reduction compared to a client which already has reduced its bit-rate due to previous congestion notification messages.</p>
<p id="p-0086" num="0085">With this functionality, on the other hand, the responsibility is shared in a more fair way with a common way of progressive actions to alleviate congestion the closer the user is to the upper session bit-rate limit.</p>
<p id="p-0087" num="0086">Although the rate adaptation mechanism of the present invention has been described as a response to a congestion notification message issued by a shared resource to a receiver of a packet-switched media stream that is transmitted via the shared resource, it is equally applicable also in other circumstances where source data or media subject to real-time transmission requirements is transmitted over a packet-switched network from a sender to a receiver and where the receiver of the source data or media needs to request an adaptation of the transmission rate from the sender of the source data or media. For example, the rate adaptation mechanism can be invoked by a congestion notification message on another layer or by another message than a congestion notification message received from the shared resource. One such message could be a &#x201c;congestion alleviated&#x201d; message, in which case the rate adaptation mechanism can be used to increase the transmission rate in a balanced way. For example, this can be done so that parties that have experienced the greatest reductions in bit-rate get greater increases than parties for which smaller bit-rate reductions have been done. This means that the current bit-rate, or the currently transmitted bit-rate, would be increased more if it is closer to the lower limit of the bit-rate range than if it is closer to the upper limit of the bit-rate range. Further, estimation of bit-rate adaptation would be done so that the currently received bit-rate is increased more if it is closer to the lower limit of the bit-rate range than if it is closer to the upper limit of the bit-rate range.</p>
<p id="p-0088" num="0087">The message can also be received from another network resource that has good knowledge about the network conditions, meaning for example that another node sets the ECN bits.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-math idrefs="MATH-US-00001" nb-file="US08625608-20140107-M00001.NB">
<img id="EMI-M00001" he="6.35mm" wi="76.20mm" file="US08625608-20140107-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-claim-statement>The invention claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method for controlling a bit-rate of a session between a sender and a receiver in a packet-switched communications system where multiple sessions are set-up via a shared resource, said method performed at a sending device and comprising the steps of:
<claim-text>determining a bit-rate range valid for the session, the bit-rate range having an upper limit and a lower limit;</claim-text>
<claim-text>receiving a rate adaptation request message from the receiver;</claim-text>
<claim-text>comparing a current bit-rate of said session to said bit-rate range;</claim-text>
<claim-text>adapting said current bit-rate in accordance with an estimated bit-rate adaptation so that the current bit-rate is reduced more when the current bit-rate is closer to the upper limit of the bit-rate range than when the current bit-rate is closer to the lower limit of the bit-rate range, or so that the current bit-rate is increased more when the current bit-rate is closer to the lower limit of the bit-rate range than when the current bit-rate is closer to the upper limit of the bit-rate range.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the receiver sends said rate adaptation request message upon reception of a message from a network resource.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein said message from the network resource is a congestion notification message.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method according to <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein said network resource is the shared resource.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said step of determining a bit-rate range further comprises signaling the bit-rate range in a set-up procedure for the session.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the User Datagram Protocol with Explicit Congestion Notification is used for communication in the session.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein said upper limit and said lower limit for the bit-range are related to a specific Quality of Service grant for the session.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the step of adapting said current bit-rate further comprises adapting said current bit-rate by an amount that depends on subscriber properties.</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The method according to <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the step of adapting said current bit-rate further comprises adapting said current bit-rate by an absolute amount or to a specified bit-rate value if said current bit-rate is above the specified bit-rate value.</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. A receiver for receiving packet-switched encoded media that is transmitted by a sender in a session via a shared resource, said receiver comprising:
<claim-text>a bit-rate range determining processor for determining a bit-rate range valid for the session, the bit-rate range having an upper limit and a lower limit;</claim-text>
<claim-text>a bit-rate request estimation processor for estimating a bit-rate adaptation by comparing a currently received bit-rate to said bit-rate range by calculating a distance within the range of the upper and lower limits of the bit-rate range and estimating said bit-rate adaptation so that the currently received bit-rate is reduced more when the distance to the upper limit of the bit-rate range is less than the distance to the lower limit of the bit-rate range, or so that the currently received bit-rate is increased more when the distance to the lower limit of the bit-rate range is less than the distance to the upper limit of the bit-rate range; and</claim-text>
<claim-text>a rate request processor for requesting said sender to adapt a currently transmitted bit-rate in said session.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The receiver according to <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the bit-rate request estimation processor has been configured to take at least one information type out of Packet Loss Rate, Jitter, Network Feedback messages and Application settings into account for estimating the bit-rate adaptation.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The receiver according to <claim-ref idref="CLM-00010">claim 10</claim-ref>, said receiver further comprising:
<claim-text>a detection processor for detecting a message from a network resource; and</claim-text>
<claim-text>wherein said bit-rate request estimation processor estimates said bit-rate adaptation upon detection of said message from the network resource.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The receiver according to <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein said message from the network resource is a congestion notification message.</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The receiver according to <claim-ref idref="CLM-00012">claim 12</claim-ref>, wherein said network resource is the shared resource.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The receiver according to <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein said rate request processor has been configured to include said bit-rate adaptation when requesting said sender to adapt a currently transmitted bit-rate in said session.</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The receiver according to <claim-ref idref="CLM-00010">claim 10</claim-ref>, said receiver further comprising:
<claim-text>at least one media decoder for decoding said encoded media received in said session.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. A sender for transmitting packet-switched encoded media in a session via a shared resource to a receiver, said sender comprising:
<claim-text>bit-rate range determining processor for determining a bit-rate range valid for the session, the bit-rate range having an upper limit and a lower limit;</claim-text>
<claim-text>rate request reception processor for receiving a request from said receiver to adapt a currently transmitted bit-rate in said session; and</claim-text>
<claim-text>a rate adaptation control unit for controlling, in response to said request from said receiver, a rate adaptation of the currently transmitted bit-rate in said session by calculating a distance within the range of the upper and lower limit of the bit-rate range and controlling the rate adaptation so that the currently transmitted bit-rate is reduced more when the distance to the upper limit of the bit-rate range is less than the distance to the lower limit of the bit-rate range, or so that the currently transmitted bit-rate is increased more when the distance to the lower limit of the bit-rate range is less than the distance to the upper limit of the bit-rate range.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The sender according to <claim-ref idref="CLM-00017">claim 17</claim-ref>, wherein said request to adapt a currently transmitted bit-rate is sent by said receiver upon reception of a message from a network resource.</claim-text>
</claim>
<claim id="CLM-00019" num="00019">
<claim-text>19. The sender according to <claim-ref idref="CLM-00018">claim 18</claim-ref>, wherein said message from the network resource is a congestion notification message.</claim-text>
</claim>
<claim id="CLM-00020" num="00020">
<claim-text>20. The sender according to <claim-ref idref="CLM-00018">claim 18</claim-ref>, wherein said network resource is the shared resource.</claim-text>
</claim>
<claim id="CLM-00021" num="00021">
<claim-text>21. The sender according to <claim-ref idref="CLM-00017">claim 17</claim-ref>, wherein the rate adaptation control unit has been configured to determine said rate adaptation of the currently transmitted bit-rate in said session by comparing the currently transmitted bit-rate to said bit-rate range.</claim-text>
</claim>
<claim id="CLM-00022" num="00022">
<claim-text>22. The sender according to <claim-ref idref="CLM-00017">claim 17</claim-ref>, wherein an estimated bit-rate adaptation is included in the request from said receiver to adapt the currently transmitted bit-rate, and wherein the rate adaptation control unit has been configured to use the estimated bit-rate adaptation as an input for determining said rate adaptation of the currently transmitted bit-rate in said session.</claim-text>
</claim>
<claim id="CLM-00023" num="00023">
<claim-text>23. The sender according to <claim-ref idref="CLM-00017">claim 17</claim-ref>, wherein the rate adaptation control unit has been configured to take at least one information type out of Packet Loss Rate, Jitter, Network Feedback messages and Application settings into account for estimating the bit-rate adaptation.</claim-text>
</claim>
<claim id="CLM-00024" num="00024">
<claim-text>24. The sender according to <claim-ref idref="CLM-00017">claim 17</claim-ref>, said sender further comprising:
<claim-text>at least one media encoder for outputting said encoded media to be transmitted in said session.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00025" num="00025">
<claim-text>25. A packet-switched communications system for controlling bit-rates of at least a first and a second session, said system comprising at least a first sender operable to communicate with a first receiver via a shared resource in the first session and a second sender operable to communicate with a second receiver via the shared resource in the second session, said system further comprising:
<claim-text>a first bit-rate range determining processor for determining a first bit-rate range valid for the first session, the first bit-rate range having an upper limit and a lower limit;</claim-text>
<claim-text>a second bit-rate range determining processor for determining a second bit-rate range valid for the second session, the second bit-rate range having an upper limit and a lower limit;</claim-text>
<claim-text>a first rate adaptation control unit for controlling rate adaptation of a first current bit-rate of said first session by calculating a distance between the first current-bit rate and the upper or lower limit of the first bit-rate range and controlling the rate adaptation of the first current bit-rate so that the first current bit-rate is reduced more when the distance between the first current bit-rate and the upper limit of the first bit-rate range is less than to the distance between the first current bit-rate and the lower limit of the first bit-rate range, or so that the first current bit-rate is increased more when the distance between the first current bit-rate and the lower limit of the first bit-rate range is less than the distance between the first current bit-rate and the upper limit of the first bit-rate range;</claim-text>
<claim-text>a second rate adaptation control unit for controlling rate adaptation of a second current bit-rate of said second session by calculating a distance between the second current-bit rate and the upper or lower limit of the second bit-rate range and controlling the rate adaptation of the second current bit-rate so that the second current bit-rate is reduced more when the distance between the second current bit-rate and the upper limit of the second bit-rate range is less than the distance between the second current bit-rate and the lower limit of the second bit-rate range, or so that the second current bit-rate is increased more when the distance between the second current bit-rate and lower limit of the second bit-rate range is less than the distance between the second current bit-rate and to the upper limit of the second bit-rate range; and</claim-text>
<claim-text>wherein the first and second rate adaptation units are configured to adapt the respective current bit-rates differently based on the respective calculated distances.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00026" num="00026">
<claim-text>26. The system according to <claim-ref idref="CLM-00025">claim 25</claim-ref>, wherein said first and second rate adaptation control units are triggered by the reception of a rate adaptation request message. </claim-text>
</claim>
</claims>
</us-patent-grant>
