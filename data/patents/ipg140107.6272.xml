<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08627418-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08627418</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>12053228</doc-number>
<date>20080321</date>
</document-id>
</application-reference>
<us-application-series-code>12</us-application-series-code>
<rule-47-flag/>
<us-term-of-grant>
<us-term-extension>1218</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>7</main-group>
<subgroup>04</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>15</main-group>
<subgroup>16</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>G</section>
<class>06</class>
<subclass>F</subclass>
<main-group>17</main-group>
<subgroup>30</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>04</class>
<subclass>L</subclass>
<main-group>29</main-group>
<subgroup>06</subgroup>
<symbol-position>L</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>726  5</main-classification>
<further-classification>726 27</further-classification>
</classification-national>
<invention-title id="d2e55">Controlled discovery of san-attached SCSI devices and access control via login authentication</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>7043760</doc-number>
<kind>B2</kind>
<name>Holtzman et al.</name>
<date>20060500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>726 28</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>8086760</doc-number>
<kind>B1</kind>
<name>Gruttadauria et al.</name>
<date>20111200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>710  8</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>2003/0220838</doc-number>
<kind>A1</kind>
<name>Ishii et al.</name>
<date>20031100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>705 14</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>2004/0078475</doc-number>
<kind>A1</kind>
<name>Camenisch et al.</name>
<date>20040400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709229</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>2005/0091333</doc-number>
<kind>A1</kind>
<name>Kobayashi et al.</name>
<date>20050400</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709212</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>2005/0216767</doc-number>
<kind>A1</kind>
<name>Mitsuoka et al.</name>
<date>20050900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>713201</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2006/0064466</doc-number>
<kind>A1</kind>
<name>Shiga et al.</name>
<date>20060300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709214</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>2006/0168394</doc-number>
<kind>A1</kind>
<name>Nakatsuka et al.</name>
<date>20060700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>711112</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>2008/0147821</doc-number>
<kind>A1</kind>
<name>Dietrich et al.</name>
<date>20080600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>709216</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>2008/0244695</doc-number>
<kind>A1</kind>
<name>Lee et al.</name>
<date>20081000</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>726  1</main-classification></classification-national>
</us-citation>
<us-citation>
<nplcit num="00011">
<othercit>Bakke et al., Finding Internet Small Computer Systems Interface (iSCSI) Targets and Name Servers by Using Service Location Protocol version 2 (SLPv2), Apr. 2005, http://gamay.tools.ietf.org/html/rfc4018.</othercit>
</nplcit>
<category>cited by examiner</category>
</us-citation>
</us-references-cited>
<number-of-claims>8</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>713184</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>726  1-  5</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>5</number-of-drawing-sheets>
<number-of-figures>5</number-of-figures>
</figures>
<us-related-documents>
<us-provisional-application>
<document-id>
<country>US</country>
<doc-number>60896809</doc-number>
<date>20070323</date>
</document-id>
</us-provisional-application>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20090049535</doc-number>
<kind>A1</kind>
<date>20090219</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Kalman</last-name>
<first-name>Dean</first-name>
<address>
<city>Milpitas</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Sandars</last-name>
<first-name>Ken</first-name>
<address>
<city>Sandringham</city>
<country>AU</country>
</address>
</addressbook>
<residence>
<country>AU</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Dolecheck</last-name>
<first-name>Brett</first-name>
<address>
<city>Raleigh</city>
<state>NC</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="004" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Reyero</last-name>
<first-name>Mike</first-name>
<address>
<city>Keller</city>
<state>TX</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Kalman</last-name>
<first-name>Dean</first-name>
<address>
<city>Milpitas</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Sandars</last-name>
<first-name>Ken</first-name>
<address>
<city>Sandringham</city>
<country>AU</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Dolecheck</last-name>
<first-name>Brett</first-name>
<address>
<city>Raleigh</city>
<state>NC</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="004" designation="us-only">
<addressbook>
<last-name>Reyero</last-name>
<first-name>Mike</first-name>
<address>
<city>Keller</city>
<state>TX</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Martine Penilla Group, LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>PMC-Sierra, Inc.</orgname>
<role>02</role>
<address>
<city>Sunnyvale</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Shiferaw</last-name>
<first-name>Eleni</first-name>
<department>2437</department>
</primary-examiner>
<assistant-examiner>
<last-name>Sims</last-name>
<first-name>Jing</first-name>
</assistant-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A method for accessing data in a storage area network is provided. The method initiates with receiving a request for a list of targets on the storage area network. All the targets on the storage area network are exposed to the requester and authentication requiring a password is requested from the requester to grant access to the targets on the storage are network. Access to the targets is granted if the password is acceptable, and access to the targets is refused if the password is unacceptable.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="169.16mm" wi="105.58mm" file="US08627418-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="203.12mm" wi="133.35mm" orientation="landscape" file="US08627418-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="194.90mm" wi="99.82mm" orientation="landscape" file="US08627418-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="151.38mm" wi="125.98mm" orientation="landscape" file="US08627418-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="150.79mm" wi="150.62mm" orientation="landscape" file="US08627418-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="187.45mm" wi="104.56mm" file="US08627418-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">CROSS REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This application claims the benefit of U.S. Provisional Application No. 60/896,809, filed Mar. 23, 2007, which is incorporated herein by reference for all purposes.</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0002" level="1">BACKGROUND</heading>
<p id="p-0003" num="0002">Storage routers allow access to logical units via a mapping mechanism. Under this technique, the client's identification is used to determine whether access to a particular logical unit may be granted. This mapping scheme is implemented for each command from a particular client. The mapping technique is required since a single target was provided to a client logging into the system. The target housed zero or more logical units that the client was allowed access to. As the login permitted access to the storage appliance but did not control access to the logical units, the mapping technique was implemented.</p>
<p id="p-0004" num="0003">Access control using mapping techniques requires the storage appliance to have knowledge of the identity of all clients. As the number of logical units and clients increases, the mapping becomes more complex and less efficient, especially when applied on a per command basis.</p>
<p id="p-0005" num="0004">As a result, there is a need to solve the problems of the prior art to provide for a more efficient access control technique for a storage appliance.</p>
<heading id="h-0003" level="1">SUMMARY</heading>
<p id="p-0006" num="0005">Broadly speaking, the present invention fills these needs by providing a method and apparatus for efficiently accessing data on a storage area network. It should be appreciated that the present invention can be implemented in numerous ways, including as a process, an apparatus, a system, or a device. Several inventive embodiments of the present invention are described below.</p>
<p id="p-0007" num="0006">In one embodiment, a method for accessing data in a storage area network is provided. The method initiates with receiving a request for a list of targets on the storage area network. All the targets on the storage area network are exposed to the requestor and authentication requiring a password is requested from the requestor to grant access to the targets on the storage are network. Access to the targets is granted if the password is acceptable, and access to the targets is refused if the password is unacceptable.</p>
<p id="p-0008" num="0007">Other aspects and advantages of the invention will become apparent from the following detailed description, taken in conjunction with the accompanying drawings, illustrating by way of example the principles of the invention.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0004" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0009" num="0008">The present invention will be readily understood by the following detailed description in conjunction with the accompanying drawings, and like reference numerals designate like structural elements.</p>
<p id="p-0010" num="0009"><figref idref="DRAWINGS">FIG. 1</figref> is a simplified schematic diagram illustrating iSCSI access control in accordance with one embodiment of the invention.</p>
<p id="p-0011" num="0010"><figref idref="DRAWINGS">FIG. 2</figref> is a simplified schematic diagram illustrating a storage device interfacing with a number of clients in accordance with one embodiment of the invention.</p>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 3</figref> is a simplified schematic diagram illustrating further details of storage appliance in accordance with one embodiment of the invention.</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 4</figref> is a simplified schematic diagram illustrating the discovery domains within a storage appliance in accordance with one embodiment of the invention.</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 5</figref> is a simplified schematic diagram illustrating the method operations for a control discovery access in accordance with one embodiment of the invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0005" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0015" num="0014">An invention is described for an apparatus and method for providing a controlled discovery mechanism that reduces the workload of a storage client. It will be obvious, however, to one skilled in the art, that the present invention may be practiced without some or all of these specific details. In other instances, well known process operations have not been described in detail in order not to unnecessarily obscure the present invention.</p>
<p id="p-0016" num="0015">Conventional computing devices, such as computer work stations, generally access data through network interconnections to storage area networks. Network interconnects enable access for a large number of computing devices to data storage on a remote network server. The remote network server provides file systems structure, access control, and other miscellaneous capabilities that include the network interface. Access to data of the storage area network is through network protocols that the server must translate into low level requests to the storage device. A work station with access to the server must translate its file system protocols into network protocols that are used to communicate with the server. Consequently, from the perspective of a work station or other computing device, seeking to access such server data is much slower than access to data on a local storage device. The embodiments described herein provide a more efficient technique for accessing data through network interconnections.</p>
<p id="p-0017" num="0016">The embodiments described herein provide an access control mechanism invoked during the establishment of a relationship between a client and the storage appliance. Under the access control mechanism there are no further access controls or checks. In one embodiment, each logical unit of the storage appliance is exposed as an independent target. The access control mechanism uses a shared secret for access to each logical unit and does not rely on knowledge of the client's identification. In essence, a client knowing the shared secret, will be granted access to a corresponding logical unit, irrespective of whether the client is known or unknown. As the storage appliance only needs to verify that the client knows the secret for the specific target or logical unit, there is no need for any knowledge of the client and the mapping table. In addition, under the embodiments described herein, the need for access control to be tested on each command is eliminated. The controlled discovery method also reduces the workload of the storage client during establishment and maintenance of connections to network devices, as each target discovered is intended for the client and there are no records that need to be filtered or otherwise discarded as irrelevant. This, in turn, reduces network traffic by limiting the amount of discovery information transferred from the broker of that information. Furthermore, the embodiments described herein place no additional burden on storage clients as discussed in more detail below.</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 1</figref> is a simplified schematic diagram illustrating iSCSI access control in accordance with one embodiment of the invention. Storage appliance <b>104</b> is in communication with hosts <b>100</b><i>a </i>and <b>100</b><i>b </i>over a storage area network. Hosts <b>100</b><i>a </i>and <b>100</b><i>b </i>may also be referred to as work stations or clients. Within each host <b>100</b><i>a </i>and <b>100</b><i>b </i>corresponding iSCSI initiator software exists thereon. The iSCSI initiator code <b>102</b><i>a </i>and <b>102</b><i>b </i>of the corresponding iSCSI initiator software will request access to certain volumes of storage pool <b>106</b>. One skilled in the art will appreciate that if host <b>1</b>-<b>100</b><i>a </i>or host <b>2</b>-<b>100</b><i>b </i>sees a certain disc the corresponding host believes that it owns the disc exclusively. If nothing prevents two hosts from accessing the same disc in the same area, corruption may occur. In order to prevent corruption, access controls are provided as discussed further herein. Within storage appliance <b>104</b>, storage pool <b>106</b> having volumes <b>106</b><i>a </i>and <b>106</b><i>b</i>, and access controls <b>110</b><i>a </i>and <b>110</b><i>b</i>, as well as targets <b>108</b><i>a </i>and <b>108</b><i>b </i>are provided. One skilled in the art will appreciate that volumes <b>106</b><i>a </i>and <b>106</b><i>b </i>are exposed as iSCSI targets <b>108</b><i>a </i>and <b>108</b><i>b</i>, respectively. Access controls <b>110</b><i>a </i>and <b>110</b><i>b </i>inform a corresponding initiator what that initiator can access in order to prevent access to unauthorized data. In essence, access controls <b>110</b><i>a </i>and <b>110</b><i>b </i>provide a list of iSCSI initiators that can access the targets and there is one access control for each target. In one embodiment, the list is a table of iSCSI qualified names (IQN), each of which is a globally unique identifier of the iSCSI initiator.</p>
<p id="p-0019" num="0018"><figref idref="DRAWINGS">FIG. 2</figref> is a simplified schematic diagram illustrating a storage device interfacing with a number of clients in accordance with one embodiment of the invention. Storage appliance <b>104</b> is an apparatus with network interfaces <b>120</b><i>a </i>through <b>120</b><i>c</i>, data path <b>124</b>, and storage interfaces <b>122</b><i>a </i>and <b>122</b><i>b</i>. Network interfaces <b>120</b><i>a </i>through <b>120</b><i>c </i>are in communication with hosts <b>100</b><i>a </i>through <b>100</b><i>c</i>. Host <b>100</b><i>a </i>through <b>100</b><i>c </i>are provided access to storage devices, which may be virtual or physical, through the corresponding network interface, data path <b>124</b> and storage interface. Storage interfaces <b>122</b><i>a </i>and <b>122</b><i>b </i>may connect appliance <b>104</b> to physical storage devices, e.g., discs or RAID array devices. Data path <b>124</b> performs a number of functions including implementing layers of storage transport protocols, such as Ethernet, IP, TCP, iSCSI, FC layers 1-4, and ULP, target application layer protocols, such as those defined in SCSI application layer specifications, and translating storage requests to and from storage interfaces <b>122</b><i>a </i>and <b>122</b><i>b. </i></p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 3</figref> is a simplified schematic diagram illustrating further details of storage appliance in accordance with one embodiment of the invention. Storage appliance <b>104</b> includes targets <b>108</b><i>a </i>through <b>108</b><i>b </i>which would be exposed to an initiator of <figref idref="DRAWINGS">FIG. 1</figref>. With each target <b>108</b><i>a </i>through <b>108</b><i>d</i>, a logical unit number (LUN) <b>130</b><i>a </i>through <b>130</b><i>d </i>is associated with each corresponding target. In one embodiment, storage appliance <b>104</b> is configured to present independent logical devices to the storage network via the network interfaces. Each logical device or volume appears in the storage network as an independent device. In order to access the associated storage, the storage clients perform a log-in or establish a relationship with each independent device. In the embodiments described below, a methodology is provided for the storage clients to access storage devices. In one embodiment, the storage appliance is configured such that only targets which the host initiator should be accessing are presented during discovery actions requested by the host. In another embodiment, storage appliance <b>104</b> maintains sufficient information about a target's, i.e., logical devices, and the intended clients or hosts for each target. As described above, this may be accomplished through the access control lists referred to in <figref idref="DRAWINGS">FIG. 1</figref>. The information within the access control list is used to register discovery information with discovery information brokers which may exist on the storage appliance or other storage network entity, in one embodiment. A Discovery Information Broker is an agent on the storage area network that presents discovered logical units to clients that have initiated a discovery request, in on embodiment. Changes to device configuration on the storage appliance will lead to an automatic update of registered information available by all discovery mechanisms. In this embodiment, the storage appliance is the agent of this update.</p>
<p id="p-0021" num="0020">Two discovery mechanisms are presented herein for the iSCSI transport protocol in accordance with one embodiment of the invention. In one embodiment, the iSCSI discovery session is available to any storage client which knows the address of and has a physical path to any of the network interfaces on the storage controller. The discovery session requires the client to supply its identification. The client also requests a list of names and addresses of all targets on the storage appliance through the corresponding initiator. The iSCSI protocol specifies that the target is required to supply a list of all targets, all of which the initiator is authorized to access. In one embodiment, the storage appliance operates with no access controls based on the identity of the client, as all clients are effectively authorized to access all targets. In this embodiment, the intended client information is used to filter the list of targets returned to be only those that have been declared for use by the identified client.</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 4</figref> is a simplified schematic diagram illustrating the discovery domains within a storage appliance in accordance with one embodiment of the invention. Storage appliance <b>104</b> includes discovery domains <b>150</b><i>a </i>through <b>150</b><i>d</i>. It should be appreciated that a discovery domain is an object type defined and used to limit the information supplied to clients, which are referred to as initiator nodes. In one embodiment, discovery domains may be grouped together in a discovery domain set. Storage appliance <b>104</b> registers a discovery domain set for the appliance and a discovery domain for each target. As illustrated in <figref idref="DRAWINGS">FIG. 4</figref>, a discovery domain <b>150</b><i>a </i>through <b>150</b><i>d </i>corresponds with a respective target node <b>1</b>-<b>4</b>. In addition, each discovery domain <b>150</b><i>a </i>through <b>150</b><i>d </i>registers an initiator node for each client it is intended to use. That is, initiator node <b>1</b> is allowed access to target node <b>1</b>, target node <b>2</b>, and target node <b>3</b>. Initiator node <b>2</b> is allowed access to target node <b>3</b> while initiator node <b>3</b> is allowed access to target node <b>3</b> and target node <b>4</b>. It should be noted that iSNS is a protocol designed to maintain and query a repository of target information for use by storage clients. In this embodiment, the storage appliance registers its target's names and addressing information with the iSNS server. Storage clients query this server to gain this information. This embodiment requires that the iSNS server is configured to allow DD/DDS modification by target nodes. The storage appliance can then register a DDS for the appliance, and a DD for each target. The storage appliance also registers an initiator node for each client in the DD of each target the client is intended to use.</p>
<p id="p-0023" num="0022">In another embodiment, an access control mechanism that denies access to targets for which the client has not been configured to access is provided. It should be appreciated that the transport protocol used to access the targets must use connections which begin with a log-in procedure. The log-in procedure supports an authentication scheme in one embodiment. Each target on the storage appliance is configured to demand an authentication phrase. For example, iSCSI requires support for the challenge handshake authentication protocol (CHAP). The CHAP protocol requires a user name, which may be a target IQN and a secret, i.e., password. This storage appliance will only accept user name/secret pairs which are configured solely for the use of the target being logged into. In other words, the secret is uniquely indexed by each target-name/user name pair. In one embodiment, the user name may be set to the target. This reduces the information a client needs to retain as the target name in this secret. For example, if the target IQN 1995-12.com.adaptec:0fea3d.20070213133015.disc2 is being accessed, the CHAP secret associated with user name IQN.1995-12.com.adaptec:0fea3d.20070213133025.disc3 would not be accepted. If the host is unable to be authenticated, then the host is effectively denied access. In addition, once a client successfully logs in there are no further access checks needed for the duration of the connection. Thus, the access control mechanism presented herein is invoked during the establishment of a relationship between the client and the storage. Once this relationship is established, there are no further access controls or checks. With regard to earlier transport protocols having naming and addressing limitations with forced implementers to present a single target which the clients logged onto. The target then has zero or more logical units which each client may be allowed to access. The login described herein permits access to the storage appliance, (specifically one of its ports) but does not control access to the logical units, hence the need for a mapping technique. The method defined herein alters the use of the previous mechanisms to provide access control without knowledge of the identity of the client. That is, access control using mapping techniques requires the storage appliance to have prior knowledge of the identity of all clients. The use of a shared secret removes that requirement. Instead, the storage appliance only needs to verify the client knows the secret for the specific target. The storage appliance no longer needs any knowledge of the identity of the client.</p>
<p id="p-0024" num="0023"><figref idref="DRAWINGS">FIG. 5</figref> is a simplified schematic diagram illustrating the method operations for control discovery access in accordance with one embodiment of the invention. The method initiates with operation <b>200</b> where a host requests a list. With reference to <figref idref="DRAWINGS">FIG. 1</figref>, the host may request a list through a iSCSI initiator in one embodiment. In operation <b>1202</b>, a storage pool is created for particular volumes on a storage device, as illustrated in <figref idref="DRAWINGS">FIG. 1</figref> in on exemplary embodiment. In operation <b>204</b> an initiator enables certain targets to be viewed. In one embodiment, the targets that are viewed are accessed through a login procedure that supports authentication as described above. In operation <b>206</b>, authentication of the requestor requires the requester to provide a username and password to the storage device in order to gain access to the viewed targets. The initiator accesses those targets through the successful authentication and password scheme described herein as specified in operation <b>208</b>. Thus, through the above described controlled access mechanism the storage appliance verifies that the client knows the secret/password without knowledge of the client and the need for the mapping table is eliminated.</p>
<p id="p-0025" num="0024">With the above embodiments in mind, it should be understood that the invention may employ various computer-implemented operations involving data stored in computer systems. These operations are those requiring physical manipulation of physical quantities. Usually, though not necessarily, these quantities take the form of electrical or magnetic signals capable of being stored, transferred, combined, compared, and otherwise manipulated. Further, the manipulations performed are often referred to in terms, such as producing, identifying, determining, or comparing.</p>
<p id="p-0026" num="0025">Any of the operations described herein that form part of the invention are useful machine operations. The invention also relates to a device or an apparatus for performing these operations. The apparatus may be specially constructed for the required purposes, or it may be a general purpose computer selectively activated or configured by a computer program stored in the computer. In particular, various general purpose machines may be used with computer programs written in accordance with the teachings herein, or it may be more convenient to construct a more specialized apparatus to perform the required operations.</p>
<p id="p-0027" num="0026">The invention can also be embodied as computer readable code on a computer readable medium. The computer readable medium is any data storage device that can store data which can be thereafter be read by a computer system. Examples of the computer readable medium include hard drives, network attached storage LAS), read-only memory, random-access memory, CD-ROMs, CD-Rs, CD-RWs, magnetic tapes, and other optical and non-optical data storage devices. The computer readable medium can also be distributed over a network coupled computer systems so that the computer readable code is stored and executed in a distributed fashion.</p>
<p id="p-0028" num="0027">Although the foregoing invention has been described in some detail for purposes of clarity of understanding, it will be apparent that certain changes and modifications may be practiced within the scope of the appended claims. Accordingly, the present embodiments are to be considered as illustrative and not restrictive, and the invention is not to be limited to the details given herein, but may be modified within the scope and equivalents of the appended claims.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A method for accessing data in a storage area network, comprising:
<claim-text>receiving a request for a list of targets on the storage area network from a requestor;</claim-text>
<claim-text>exposing all the targets on the storage area network to the requestor;</claim-text>
<claim-text>requesting authentication requiring a password from the requestor to grant access to the targets on the storage area network, wherein the password is generated based on a name of one of the targets;</claim-text>
<claim-text>granting access to the targets if the password is acceptable; and</claim-text>
<claim-text>refusing access to the targets if the password is unacceptable, wherein the granting and the refusing are performed without utilizing mapping techniques having any prior knowledge of the requestor, and wherein the access to the targets is invoked upon establishment of an initial relationship between the requestor and the targets on the storage area network,</claim-text>
<claim-text>wherein the password is an Internet Small Computer System Interface Qualified Name (IQN),</claim-text>
<claim-text>wherein the password is uniquely indexed through a target-name and a user name pair for each of the targets.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein a user name is set to an Internet Small Computer System Interface Qualified Name (IQN).</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein each target grants access directly to each requestor.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The method of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the request is generated from Internet Small Computer System Interface (iSCSI) initiator code.</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. A non transitory computer readable medium having program instructions for accessing data in a storage area network, comprising:
<claim-text>program instructions for receiving a request for a list of targets on the storage area network;</claim-text>
<claim-text>program instructions for exposing all the targets on the storage area network to the requestor;</claim-text>
<claim-text>program instructions for requesting authentication requiring a password from the requestor to grant access to the targets on the storage area network, wherein the password is generated based on a name of one of the targets;</claim-text>
<claim-text>program instructions for granting access to the targets if the password is acceptable; and</claim-text>
<claim-text>program instructions for refusing access to the targets if the password is unacceptable, wherein the program instructions for the granting and the program instructions for the refusing are performed without utilizing mapping techniques having any prior knowledge of the requestor, and wherein the access to the targets is invoked upon establishment of an initial relationship between the requestor and the targets on the storage area network,</claim-text>
<claim-text>wherein the password is an Internet Small Computer System Interface Qualified Name (IQN),</claim-text>
<claim-text>wherein the password is uniquely indexed through a target-name and a user name pair for each of the targets.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The computer readable medium of <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein a user name is set to an Internet Small Computer System Interface Qualified Name (IQN).</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The computer readable medium of <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein each target grants access directly to each requestor.</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The computer readable medium of <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein the request is generated from Internet Small Computer System Interface (iSCSI) initiator code. </claim-text>
</claim>
</claims>
</us-patent-grant>
