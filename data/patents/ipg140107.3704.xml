<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08624769-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08624769</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13572098</doc-number>
<date>20120810</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>03</class>
<subclass>M</subclass>
<main-group>1</main-group>
<subgroup>12</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>341155</main-classification>
<further-classification>341169</further-classification>
</classification-national>
<invention-title id="d2e43">Mixed linear/square-root encoded single slope ramp provides a fast, low noise analog to digital converter with very high linearity for focal plane arrays</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>5909256</doc-number>
<kind>A</kind>
<name>Brown</name>
<date>19990600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>348723</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>6867804</doc-number>
<kind>B1</kind>
<name>Kim et al.</name>
<date>20050300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>348294</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>7075474</doc-number>
<kind>B2</kind>
<name>Yamagata et al.</name>
<date>20060700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>341169</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>7265329</doc-number>
<kind>B2</kind>
<name>Henderson et al.</name>
<date>20070900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>2502081</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>7274319</doc-number>
<kind>B2</kind>
<name>Lee</name>
<date>20070900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>341155</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>7304599</doc-number>
<kind>B2</kind>
<name>Lee</name>
<date>20071200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>341169</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>7479916</doc-number>
<kind>B1</kind>
<name>Reshef et al.</name>
<date>20090100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>US</country>
<doc-number>7656336</doc-number>
<kind>B2</kind>
<name>Wood</name>
<date>20100200</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>US</country>
<doc-number>RE41767</doc-number>
<kind>E</kind>
<name>Lee</name>
<date>20100900</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>341155</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>US</country>
<doc-number>7907079</doc-number>
<kind>B1</kind>
<name>Galloway et al.</name>
<date>20110300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>US</country>
<doc-number>2005/0057389</doc-number>
<kind>A1</kind>
<name>Krymski</name>
<date>20050300</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>341169</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>US</country>
<doc-number>2006/0028368</doc-number>
<kind>A1</kind>
<name>Takayanagi et al.</name>
<date>20060200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>341155</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00013">
<document-id>
<country>US</country>
<doc-number>2009/0033532</doc-number>
<kind>A1</kind>
<name>Reshef et al.</name>
<date>20090200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>341137</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00014">
<document-id>
<country>US</country>
<doc-number>2011/0001039</doc-number>
<kind>A1</kind>
<name>Hoshino</name>
<date>20110100</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>2502081</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00015">
<document-id>
<country>US</country>
<doc-number>2012/0126094</doc-number>
<kind>A1</kind>
<name>Simony et al.</name>
<date>20120500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>2502081</main-classification></classification-national>
</us-citation>
<us-citation>
<nplcit num="00016">
<othercit>PCT International Search Report &#x26; Written Opinion dated Jan. 31, 2013 for PCT Application No. PCT/US2012/050338.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00017">
<othercit>Storm, G. G., et al., &#x201c;Combined Linear-Logarithmic CMOS Image Sensor&#x201d;, In: 2004 IEEE International Solid-State Circuits Conference (ISSCC) 2004, vol. 1, Digest of Technical Papers, Feb. 2004.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<nplcit num="00018">
<othercit>Diner, D.J. et al., &#x201c;First results from a dual photoelastic modulator-based polarimetric camera,&#x201d; 2010, Appl. Opt. 49, 2929-2946.</othercit>
</nplcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>18</number-of-claims>
<us-exemplary-claim>1</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>341137</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>341155</main-classification>
</classification-national>
<classification-national>
<country>US</country>
<main-classification>341169</main-classification>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>7</number-of-drawing-sheets>
<number-of-figures>7</number-of-figures>
</figures>
<us-related-documents>
<us-provisional-application>
<document-id>
<country>US</country>
<doc-number>61522458</doc-number>
<date>20110811</date>
</document-id>
</us-provisional-application>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20130038482</doc-number>
<kind>A1</kind>
<date>20130214</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Wrigley</last-name>
<first-name>Christopher James</first-name>
<address>
<city>La Crescenta</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="002" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Hancock</last-name>
<first-name>Bruce R.</first-name>
<address>
<city>Altadena</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="003" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Newton</last-name>
<first-name>Kenneth W.</first-name>
<address>
<city>Castaic</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
<us-applicant sequence="004" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Cunningham</last-name>
<first-name>Thomas J.</first-name>
<address>
<city>Pasadena</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
<residence>
<country>US</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Wrigley</last-name>
<first-name>Christopher James</first-name>
<address>
<city>La Crescenta</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="002" designation="us-only">
<addressbook>
<last-name>Hancock</last-name>
<first-name>Bruce R.</first-name>
<address>
<city>Altadena</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="003" designation="us-only">
<addressbook>
<last-name>Newton</last-name>
<first-name>Kenneth W.</first-name>
<address>
<city>Castaic</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
<inventor sequence="004" designation="us-only">
<addressbook>
<last-name>Cunningham</last-name>
<first-name>Thomas J.</first-name>
<address>
<city>Pasadena</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Gates &#x26; Cooper LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>California Institute of Technology</orgname>
<role>02</role>
<address>
<city>Pasadena</city>
<state>CA</state>
<country>US</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Jeanglaude</last-name>
<first-name>Jean B</first-name>
<department>2819</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">An analog-to-digital converter (ADC) converts pixel voltages from a CMOS image into a digital output. A voltage ramp generator generates a voltage ramp that has a linear first portion and a non-linear second portion. A digital output generator generates a digital output based on the voltage ramp, the pixel voltages, and comparator output from an array of comparators that compare the voltage ramp to the pixel voltages. A return lookup table linearizes the digital output values.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="120.99mm" wi="259.25mm" file="US08624769-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="258.23mm" wi="156.38mm" orientation="landscape" file="US08624769-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="262.13mm" wi="184.57mm" orientation="landscape" file="US08624769-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="251.21mm" wi="160.19mm" orientation="landscape" file="US08624769-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="251.88mm" wi="173.65mm" orientation="landscape" file="US08624769-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="247.99mm" wi="169.16mm" orientation="landscape" file="US08624769-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00006" num="00006">
<img id="EMI-D00006" he="238.42mm" wi="158.92mm" orientation="landscape" file="US08624769-20140107-D00006.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00007" num="00007">
<img id="EMI-D00007" he="130.05mm" wi="112.78mm" file="US08624769-20140107-D00007.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?RELAPP description="Other Patent Relations" end="lead"?>
<heading id="h-0001" level="1">CROSS-REFERENCE TO RELATED APPLICATIONS</heading>
<p id="p-0002" num="0001">This application claims the benefit under 35 U.S.C. Section 119(e) of the following co-pending and commonly-assigned U.S. provisional patent application(s), which is/are incorporated by reference herein:</p>
<p id="p-0003" num="0002">Provisional Application Ser. No. 61/522,458, filed on Aug. 11, 2011, by Chris J. Wrigley, Bruce R. Hancock, Kenneth W. Newton, and Thomas J. Cunningham, entitled &#x201c;Mixed Linear/Square-Root Encoded Single Slope Ramp Provides a Fast, Low Noise ADC with Very High Linearity for Focal Plane Arrays.&#x201d;</p>
<?RELAPP description="Other Patent Relations" end="tail"?>
<?GOVINT description="Government Interest" end="lead"?>
<heading id="h-0002" level="1">STATEMENT REGARDING FEDERALLY SPONSORED RESEARCH AND DEVELOPMENT</heading>
<p id="p-0004" num="0003">The invention described herein was made in the performance of work under a NASA Contract, and is subject to the provisions of Public Law 96-517 (35 USC 202) in which the Contractor has elected to retain title.</p>
<?GOVINT description="Government Interest" end="tail"?>
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0003" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0005" num="0004">1. Field of the Invention</p>
<p id="p-0006" num="0005">The present invention relates generally to analog-to-digital (ADC) converters, and in particular, to a method, apparatus, and article of manufacture for an ADC with a voltage ramp that has both a linear and non-linear portion. Furthermore, this ADC can be precisely calibrated to provide a linear output.</p>
<p id="p-0007" num="0006">2. Description of the Related Art</p>
<p id="p-0008" num="0007">(Note: This application references a number of different publications as indicated throughout the specification by reference numbers enclosed in brackets, e.g., [x]. A list of these different publications ordered according to these reference numbers can be found below in the section entitled &#x201c;References.&#x201d; Each of these publications is incorporated by reference herein.)</p>
<p id="p-0009" num="0008">Single-slope column-parallel Analog-to-Digital Converters (ADCs) are very popular for CMOS (complementary metal-oxide-semiconductor) imagers. However such ADCs have limited resolution for a given speed, or equivalently, low speed for a given resolution. For example, 256 clock cycles are required to achieve 8 bit resolution. Accordingly, what is needed is an ADC that provides high resolution and high speed.</p>
<heading id="h-0004" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0010" num="0009">One or more embodiments of the invention provide a single-slope ADC for a CMOS imager where the voltage ramp has a first portion that is linear and a second portion that is non-linear.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0005" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0011" num="0010">Referring now to the drawings in which like reference numbers represent corresponding parts throughout:</p>
<p id="p-0012" num="0011"><figref idref="DRAWINGS">FIG. 1</figref> illustrates a column-parallel single-slope ADC architecture used in accordance with one or more embodiments of the invention;</p>
<p id="p-0013" num="0012"><figref idref="DRAWINGS">FIG. 2</figref> illustrates a square-law ramp, showing transfer curve and quantization noise in accordance with one or more embodiments of the invention;</p>
<p id="p-0014" num="0013"><figref idref="DRAWINGS">FIG. 3</figref> illustrates four different combination linear-quadratic ramps, used for different signal levels in accordance with one or more embodiments of the invention;</p>
<p id="p-0015" num="0014"><figref idref="DRAWINGS">FIG. 4</figref> shows the quantization noise, shot noise and combined noise for the largest ramp of <figref idref="DRAWINGS">FIG. 3</figref> in accordance with one or more embodiments of the invention;</p>
<p id="p-0016" num="0015"><figref idref="DRAWINGS">FIG. 5</figref> illustrates the improvement of differential linearity using a shifted version of the ramp lookup table for the return lookup in accordance with one or more embodiments of the invention;</p>
<p id="p-0017" num="0016"><figref idref="DRAWINGS">FIG. 6</figref> shows the differential linearity with a calibrated lookup table implemented in accordance with one or more embodiments of the invention; and</p>
<p id="p-0018" num="0017"><figref idref="DRAWINGS">FIG. 7</figref> illustrates the logical flow for converting an analog signal to a digital signal in accordance with one or more embodiments of the invention.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0006" level="1">DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS</heading>
<p id="p-0019" num="0018">In the following description, reference is made to the accompanying drawings which form a part hereof. These drawings show, by way of illustration, several embodiments of the present invention. It is understood that other embodiments may be utilized and structural changes may be made without departing from the scope of the present invention.</p>
<p id="p-0020" num="0019"><figref idref="DRAWINGS">FIG. 1</figref> shows a typical CMOS single slope column-parallel ADC converter array. The pixel voltages <b>102</b> (i.e., <b>102</b>(<b>0</b>)-<b>102</b>(N)) are sampled onto the sample capacitor <b>104</b> (i.e., <b>104</b>(<b>0</b>)-<b>104</b>(N)), then the voltage ramp <b>106</b> (generated by a voltage ramp generator <b>105</b>) is started. At the same time, a digital counter <b>108</b> is started. When the comparator (i.e., comparator O-comparator N) trips, it triggers the clock input of the corresponding latch <b>110</b> such that the counter <b>108</b> value (Encoded Count/Digital Code) (as input &#x201c;D&#x201d;) is captured by the latch <b>110</b> (i.e., latches <b>110</b>(<b>0</b>)-<b>110</b>(N)), to be read out <b>112</b> (as Data Out [<b>0</b>-N]) later.</p>
<p id="p-0021" num="0020">To mitigate the speed-resolution limitation, the signal level dependence of photon shot noise may be exploited. The number of photons arriving in a given time interval is not fixed, but is subject to statistical fluctuations. These fluctuations produce a temporal noise known as shot noise. The shot noise follows a Poisson distribution, where the variance of the number of arriving photons is equal to the mean number. For large signals, where the shot noise is large, the resolution is limited by the shot noise and fine quantization steps provide no benefit. On the other hand, when the signal is small the shot noise is also small and fine quantization steps are beneficial. The preferred approach is to vary the size of the quantization steps in accordance with the signal level, such that the quantization noise is always less than the shot noise. For a given number of steps, this allows more steps to be allocated to lower signal levels where they are more valuable, and uses fewer steps for high signal levels, where they are not needed.</p>
<p id="p-0022" num="0021">The pixel collects photoelectrons, converts the resulting signal charge to a voltage by way of the pixel capacitance and buffers this voltage through the pixel amplifier. The transfer function of this conversion is commonly approximated as a linear relationship. An ADC may then convert this pixel voltage to a digital code value. The combined transfer function of the pixel ADC can be written as
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>Q=Q</i>(<i>N</i>)&#x2003;&#x2003;(1)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where Q is the signal charge, in electrons, and N is the digital code value. The quantization noise (QN) variance (&#x3c3;<sup>2</sup>), expressed in electrons, is
</p>
<p id="p-0023" num="0022">
<maths id="MATH-US-00001" num="00001">
<math overflow="scroll">
<mtable>
  <mtr>
    <mtd>
      <mrow>
        <msubsup>
          <mi>&#x3c3;</mi>
          <mrow>
            <mi>Q</mi>
            <mo>,</mo>
            <mi>QN</mi>
          </mrow>
          <mn>2</mn>
        </msubsup>
        <mo>=</mo>
        <mrow>
          <mrow>
            <msup>
              <mrow>
                <mo>(</mo>
                <mfrac>
                  <mrow>
                    <mo>&#x2146;</mo>
                    <mi>Q</mi>
                  </mrow>
                  <mrow>
                    <mo>&#x2146;</mo>
                    <mi>N</mi>
                  </mrow>
                </mfrac>
                <mo>)</mo>
              </mrow>
              <mn>2</mn>
            </msup>
            <mo>&#x2062;</mo>
            <msubsup>
              <mi>&#x3c3;</mi>
              <mi>N</mi>
              <mn>2</mn>
            </msubsup>
          </mrow>
          <mo>=</mo>
          <mrow>
            <mfrac>
              <mn>1</mn>
              <mn>12</mn>
            </mfrac>
            <mo>&#x2062;</mo>
            <msup>
              <mrow>
                <mo>(</mo>
                <mfrac>
                  <mrow>
                    <mo>&#x2146;</mo>
                    <mi>Q</mi>
                  </mrow>
                  <mrow>
                    <mo>&#x2146;</mo>
                    <mi>N</mi>
                  </mrow>
                </mfrac>
                <mo>)</mo>
              </mrow>
              <mn>2</mn>
            </msup>
          </mrow>
        </mrow>
      </mrow>
    </mtd>
    <mtd>
      <mrow>
        <mo>(</mo>
        <mn>2</mn>
        <mo>)</mo>
      </mrow>
    </mtd>
  </mtr>
</mtable>
</math>
</maths>
<br/>
using the well known variance for a uniform distribution from 0 to 1, &#x3c3;<sub>N</sub><sup>2</sup>= 1/12.
</p>
<p id="p-0024" num="0023">Meanwhile, as described above, the variance (&#x3c3;<sup>2</sup>) due to the shot noise (SN) is:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?>&#x3c3;<sub>Q,SN</sub><sup>2</sup><i>=Q</i>&#x2003;&#x2003;(3)<?in-line-formulae description="In-line Formulae" end="tail"?>
</p>
<p id="p-0025" num="0024">If one implements a transfer function:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>Q=</i>3<i>&#x3b1;N</i><sup>2</sup>&#x2003;&#x2003;(4)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
substitution in (2) and (3) will show that the quantization noise is everywhere proportional to the shot noise (SN), &#x3c3;<sub>Q,QN</sub><sup>2</sup>=&#x3b1;&#x3c3;<sub>Q,SN</sub><sup>2</sup>. If a &#x3b1;&#x3e;&#x3e;1, the total noise will be dominated by the shot noise. The significance of this may be illustrated by noting that signals from 0 to 50,000 electrons can be quantized using only 256 code values with &#x3b1;=&#xbc;, such that the contribution of the quantization noise degrades the signal-to-noise ratio by only 1 dB. This is commonly known as square root encoding, since the code value varies as the square root of the signal charge, but the encoding is usually performed after digitization.
</p>
<p id="p-0026" num="0025">Square root encoding of the voltage can be easily implemented in the column-parallel single slope architecture by supplying a quadratic ramp, V&#x221d;N<sup>2</sup>, instead of a linear one. As in a conventional single-slope ADC with a linear ramp, a code value will be captured when the ramp voltage is equal to the signal level. Knowing the form of the ramp, V(N), the pixel voltage can be determined. If the transfer function of the pixel from charge to voltage is linear (or approximately so), square root encoding of the voltage is equivalent to square root encoding of the charge.</p>
<p id="p-0027" num="0026">The problem with simple square root encoding is that the conversion by the pixel of charge into voltage generally includes an offset, V=&#x3b3;Q+V<sub>0</sub>, where &#x3b3; is the conversion gain and V<sub>0 </sub>is the offset. Thus, the voltage ramp should be V=3&#x3b1;&#x3b3;N<sup>2</sup>+V<sub>0</sub>. With the very small step size near Q=0, it is essential that the appropriate value of V<sub>0 </sub>be accurately known. However, imagers inevitably have fixed pattern noise (FPN) resulting in different offsets, V<sub>0</sub>, from one pixel to the next. In order that all pixels can be quantized using the same ramp, it will be necessary to adjust the starting voltage of the ramp to the lowest offset value. Although this will allow all pixel voltages to be quantized, for pixels with higher offsets the signal levels will be captured farther up the ramp where the quantization noise is larger. Thus the advantage of small quantization steps may be lost.</p>
<p id="p-0028" num="0027">As an example, consider a 512 step ramp spanning 2V, with a FPN spanning 100 mV peak-to-peak. <figref idref="DRAWINGS">FIG. 2</figref> illustrates the beginning portion of a square-law ramp, showing the transfer curve and quantization noise. In order to quantize all the pixels, the starting value of the ramp must be shifted to the lowest offset value <b>200</b>. This will be digitized with a quantization noise as low as 2 &#x3bc;V. In the dark, a pixel with the median offset <b>202</b> of 50 mV would be quantized at code <b>80</b>, where the quantization noise is 360 &#x3bc;V, even though, with Q=0, this pixel would exhibit no shot noise. The pixel with the highest offset <b>206</b> would have a quantization noise of 500 &#x3bc;V in the dark. Thus, the zero-point shift needed to keep all pixels on scale may cause quantization noise in excess of shot noise for most other pixels at low signal level.</p>
<p id="p-0029" num="0028">To solve this problem, embodiments of the invention break the ramp into two parts: an initial linear segment, covering the FPN, followed by a non-linear segment (e.g., a quadratic segment). Such a ramp may have the form:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>V=a</i><sub>1</sub><i>N;N&#x3c;N</i><sub>0 </sub><?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>V=a</i><sub>1</sub><i>N+a</i><sub>2</sub>(<i>N&#x2212;N</i><sub>0</sub>)<sup>2</sup><i>;N&#x2267;N</i><sub>0</sub>&#x2003;&#x2003;(5)<?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where a<sub>1</sub>, a<sub>2 </sub>and N<sub>0 </sub>are constants chosen to meet the requirements for FPN and full well.
</p>
<p id="p-0030" num="0029">Such a form ensures that the two segments match and have the same slope at their transition. The ramp can be optimized by first choosing a<sub>2 </sub>so that &#x3b1;&#x2248;0.25. Then N<sub>0 </sub>is chosen to provide the required ramp span with a<sub>1</sub>=FPN/N<sub>0</sub>. Note that attempting to set a<sub>2 </sub>too low, e.g. so that &#x3b1;&#x3c;0.1, is counterproductive since the improvement in SNR diminishes rapidly, while fewer code values will be available for the linear portion, increasing the minimum quantization noise.</p>
<p id="p-0031" num="0030">Such a solution has been applied in a Multi-angle Spectropolarimetric Imager (MSPI) [1]. This 1536&#xd7;64 imager has a conversion gain of 20 &#x3bc;V/e<sup>&#x2212;</sup>, a full well of &#x3e;50,000e- and provides a CDS (correlated double sample) noise floor of 13e<sup>&#x2212; </sup>at 7000 rows/sec or 10.8 Mpix/sec.</p>
<p id="p-0032" num="0031">The MSPI embodiment of the invention generates the ramp using a lookup table and a precision 16-bit digital-to-analog converter (DAC), although other digital or even analog methods of generating the ramp are possible. In the MSPI embodiment it was convenient to implement four different ramps with different spans for different signal levels, i.e. different gain settings. Accordingly, <figref idref="DRAWINGS">FIG. 3</figref> illustrates four different combination linear-quadratic ramps (<b>302</b>-<b>308</b>), used for different signal levels in accordance with one or more embodiments of the invention.</p>
<p id="p-0033" num="0032"><figref idref="DRAWINGS">FIG. 4</figref> shows the quantization plus amplifier noise, shot noise and combined noise for the largest (i.e., ramp <b>308</b>) of these four ramps. The quantization plus amplifier noise is shown with dashes (<b>308</b>A); the shot noise for the worst case offset pixel with dots (<b>308</b>B); and the combined noise with a solid line (<b>308</b>C). Amplifier noise is included in the quantization noise for completeness. The combined noise (<b>308</b>C) is only slightly higher than the shot noise limit.</p>
<p id="p-0034" num="0033">Referring again to <figref idref="DRAWINGS">FIG. 1</figref>, when the comparator determines that the ramp <b>106</b> value is equal to the signal value <b>102</b>, the current code value <b>108</b> is captured into a latch <b>110</b>. This code value <b>108</b> then needs to be re-interpreted as a voltage. In the simplest approach, the code value <b>108</b> can be used as an index into a table that was used to generate the ramp <b>106</b>. However, although such an indexed value represents the voltage that the DAC was commanded to generate at the time that code value <b>108</b> was present, the effective voltage may be somewhat different, notably due to the finite bandwidths of a ramp buffer amplifier and the comparator. Limiting these bandwidths is, in fact, desirable since it reduces the noise bandwidth and hence the read noise.</p>
<p id="p-0035" num="0034">To first order, the effect of these limited bandwidths can be viewed as a delay of the ramp <b>106</b>. For a linear ramp, this is equivalent to a voltage offset, but for a nonlinear ramp the circumstances are more complicated. The effect shows up most prominently when looking at the differential gain, and especially at the transition between the linear and quadratic portions. Although the code value <b>108</b> may indicate that the ramp <b>106</b> is in the quadratic region, effectively it may still be in the linear region, with the result that the signal is overestimated.</p>
<p id="p-0036" num="0035">To the extent that the difference between the commanded and effective ramp voltages can be modeled as a simple delay, a correction may be implemented by applying a backward shift when indexing the code <b>108</b> into the ramp table. Such a backward shift was attempted for the MSPI imager. In this regard, <figref idref="DRAWINGS">FIG. 5</figref> illustrates the improvement of the differential gain (from charge to digital value) using a shifted version of the ramp lookup table for the return lookup. With no shift (i.e., shift=0), there is a large hump in the differential gain. In <figref idref="DRAWINGS">FIG. 5</figref>, the overall slope results from the photodiode capacitance-voltage relationship, while the persistent narrow feature near the center is a result of differential nonlinearity (DNL) in the lower quality DAC that generated the ramp <b>106</b> in this experiment.</p>
<p id="p-0037" num="0036">A better solution is found by creating a separate, calibrated return lookup table. In embodiments of the invention, an analog calibration voltage generated by a precision DAC may be directly injected onto the Sample hold caps (<b>104</b>). Alternatively, a calibration signal could be generated using the pixels and a carefully controlled photo signal. Each entry in the return lookup table is assigned the value of the input signal that produces its associated code value, optionally with appropriate offset and scaling. Due to noise, and because the calibration signal typically has higher resolution than the ADC being calibrated, a given output code value may be produced by multiple, different input values. In this case, the use of weighted averages can be used to produce very precise calibration. <figref idref="DRAWINGS">FIG. 6</figref> shows the differential gain for the same MSPI device with a calibrated lookup table implemented in accordance with one or more embodiments of the invention. The hump and the feature due to DAC DNL are removed; the remaining fluctuations are due to shot noise that has been insufficiently averaged.</p>
<p id="p-0038" num="0037">In summary, a combination linear and quadratic ramp allows a single slope ADC to provide shot noise limited performance with a manageable number of code values, even in the presence of fixed pattern noise. In addition, a separate return lookup table may be used to correct for the delaying effect of finite bandwidth, producing excellent differential linearity. Finally, it should be noted that, for CDS, both samples must be linearized before subtraction.</p>
<p id="h-0007" num="0000">Logical Flow</p>
<p id="p-0039" num="0038"><figref idref="DRAWINGS">FIG. 7</figref> illustrates the logical flow for converting an analog signal to a digital signal in accordance with one or more embodiments of the invention (e.g., via a CMOS single slope column parallel ADC array).</p>
<p id="p-0040" num="0039">At step <b>702</b>, a voltage ramp is generated (by a voltage ramp generator) that has a linear first portion and a non-linear second portion. The non-linear second portion may be a quadratic portion. Further the voltage ramp (V) may have the form:
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>V=a</i><sub>1</sub><i>N;N&#x3c;N</i><sub>0 </sub><?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>V=a</i><sub>1</sub><i>N+a</i><sub>2</sub>(<i>N&#x2212;N</i><sub>0</sub>)<sup>2</sup><i>;N&#x2267;N</i><sub>0 </sub><?in-line-formulae description="In-line Formulae" end="tail"?>
<br/>
where N is the digital code value and the parameters a<sub>1</sub>, a<sub>2 </sub>and N<sub>0 </sub>are chosen appropriately to the FPN and required full well (e.g., suitable to a signal range). This form ensures that the first portion and the second portion match, and the first portion and second portion have the same slope at their transition. The first portion of the voltage ramp may be configured to cover a fixed pattern noise (FPN) while the second portion may be optimized such that a quantization noise is less than a shot noise.
</p>
<p id="p-0041" num="0040">To generate the voltage ramp, a look-up table may be used to drive a precision DAC.</p>
<p id="p-0042" num="0041">At step <b>704</b>, a digital output is generated (e.g., by a digital output generator that includes one or more of the various components illustrated in <figref idref="DRAWINGS">FIG. 1</figref> [e.g., the digital counter <b>108</b>, latch <b>110</b>, etc.]). The digital output is based on the voltage ramp, a plurality of pixel voltages for a plurality of pixels (e.g., from a CMOS image), and comparator output from an array of comparators that are configured to compare the voltage ramp to the plurality of pixel voltages.</p>
<p id="p-0043" num="0042">To generate the digital output, each of the plurality of pixel voltages may be sampled onto a corresponding sample capacitor. Thereafter, the voltage ramp and a digital counter may be simultaneously started. A latch is used to capture a value of the digital counter when each of the comparators trips (for subsequent digital readout). Such comparators may have the voltage ramp as the first input and one of the pixel voltages as a second input.</p>
<p id="p-0044" num="0043">The captured digital values may be translated/converted to a linearized voltage or charge values by means of a return lookup table.</p>
<p id="p-0045" num="0044">The return lookup table may be implemented as the ramp generation lookup table with a backward shift added or may be obtained by calibration against a precision source/input (with an average value of the input signal used to produce a return look-up table entry for a given code value).</p>
<heading id="h-0008" level="1">CONCLUSION</heading>
<p id="p-0046" num="0045">This concludes the description of the preferred embodiment of the invention. The following describes some alternative embodiments for accomplishing the present invention.</p>
<p id="p-0047" num="0046">The foregoing description of the preferred embodiment of the invention has been presented for the purposes of illustration and description. It is not intended to be exhaustive or to limit the invention to the precise form disclosed. Many modifications and variations are possible in light of the above teaching. It is intended that the scope of the invention be limited not by this detailed description, but rather by the claims appended hereto.</p>
<heading id="h-0009" level="1">REFERENCES</heading>
<p id="p-0048" num="0000">
<ul id="ul0001" list-style="none">
    <li id="ul0001-0001" num="0047">[1] Diner, D. J., A. Davis, B. Hancock, S. Geier, B. Rheingans, B. Jovanovic, M. Bull, D. M. Rider, R. A. Chipman, R A. Mahler, and S. McClain (2010). First results from a dual photoelastic modulator-based polarimetric camera. <i>Appl Opt. </i>49, 2929-2946.</li>
</ul>
</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-math idrefs="MATH-US-00001" nb-file="US08624769-20140107-M00001.NB">
<img id="EMI-M00001" he="7.03mm" wi="76.20mm" file="US08624769-20140107-M00001.TIF" alt="embedded image " img-content="math" img-format="tif"/>
</us-math>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. An analog-to-digital converter (ADC) comprising:
<claim-text>(a) a voltage ramp generator configured to generate a voltage ramp having a linear first portion and a non-linear second portion; and</claim-text>
<claim-text>(b) a digital output generator configured to generate a digital output based on:
<claim-text>(1) the voltage ramp;</claim-text>
<claim-text>(2) a plurality of pixel voltages for a plurality of pixels;</claim-text>
<claim-text>(3) comparator output from an array of comparators that are configured to compare the voltage ramp to the plurality of pixel voltages.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The ADC of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the second portion of the voltage ramp comprises a quadratic portion.</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The ADC of <claim-ref idref="CLM-00002">claim 2</claim-ref>, wherein:
<claim-text>the voltage ramp (V) has the form:
<claim-text>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>V=a</i><sub>1</sub><i>N;N&#x3c;N</i><sub>0 </sub><?in-line-formulae description="In-line Formulae" end="tail"?>
</claim-text>
<claim-text>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>V=a</i><sub>1</sub><i>N+a</i><sub>2</sub>(<i>N&#x2212;N</i><sub>0</sub>)<sup>2</sup><i>;N&#x2267;N</i><sub>0 </sub><?in-line-formulae description="In-line Formulae" end="tail"?>
</claim-text>
</claim-text>
<claim-text>N is a digital code value;</claim-text>
<claim-text>a<sub>1</sub>, a<sub>2 </sub>and N<sub>0 </sub>are selected parameters suitable to a signal range;</claim-text>
<claim-text>the first portion and the second portion match at their transition; and</claim-text>
<claim-text>the first portion and the second portion have the same slope at their transition.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. The ADC of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein:
<claim-text>the first portion of the voltage ramp covers a fixed pattern noise (FPN); and</claim-text>
<claim-text>the second portion of the voltage ramp is optimized wherein a quantization noise is less than a shot noise.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The ADC of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the ADC comprises a complimentary metal-oxide-semiconductor (CMOS) single slope column parallel ADC converter array.</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The ADC of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein:
<claim-text>each of the plurality of pixel voltages is sampled onto a corresponding sample capacitor;</claim-text>
<claim-text>the voltage ramp is started simultaneously with a digital counter;</claim-text>
<claim-text>each of the comparators in the array has a first input comprising the voltage ramp and a second input comprising one of the pixel voltages; and</claim-text>
<claim-text>when the comparator trips, a counter value of the digital counter is captured by a latch for subsequent digital readout.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The ADC of <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein:
<claim-text>the captured counter value is converted to a linearized voltage value according to a return look-up table.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00008" num="00008">
<claim-text>8. The ADC of <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein:
<claim-text>the return look-up table is implemented as a ramp generation look-up table with a backward shift.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00009" num="00009">
<claim-text>9. The ADC of <claim-ref idref="CLM-00007">claim 7</claim-ref>, wherein:
<claim-text>the return look-up table is obtained by calibration against a precision input; and</claim-text>
<claim-text>an average value of an input signal is used to produce a return look-up table entry for a given code value.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00010" num="00010">
<claim-text>10. A method for converting an analog signal to a digital signal comprising:
<claim-text>(a) generating a voltage ramp having a linear first portion and a non-linear second portion; and</claim-text>
<claim-text>(b) generating a digital output based on:
<claim-text>(1) the voltage ramp;</claim-text>
<claim-text>(2) a plurality of pixel voltages for a plurality of pixels;</claim-text>
<claim-text>(3) comparator output from an array of comparators that are configured to compare the voltage ramp to the plurality of pixel voltages.</claim-text>
</claim-text>
</claim-text>
</claim>
<claim id="CLM-00011" num="00011">
<claim-text>11. The method of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the second portion of the voltage ramp comprises a quadratic portion.</claim-text>
</claim>
<claim id="CLM-00012" num="00012">
<claim-text>12. The method of <claim-ref idref="CLM-00011">claim 11</claim-ref>, wherein:
<claim-text>the voltage ramp (V) has the form:
<claim-text>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>V=a</i><sub>1</sub><i>N;N&#x3c;N</i><sub>0 </sub><?in-line-formulae description="In-line Formulae" end="tail"?>
</claim-text>
<claim-text>
<br/>
<?in-line-formulae description="In-line Formulae" end="lead"?><i>V=a</i><sub>1</sub><i>N+a</i><sub>2</sub>(<i>N&#x2212;N</i><sub>0</sub>)<sup>2</sup><i>;N&#x2267;N</i><sub>0 </sub><?in-line-formulae description="In-line Formulae" end="tail"?>
</claim-text>
</claim-text>
<claim-text>N is a digital code value;</claim-text>
<claim-text>a<sub>1</sub>, a<sub>2 </sub>and N<sub>0 </sub>are selected parameters suitable to a signal range;</claim-text>
<claim-text>the first portion and the second portion match at their transition; and</claim-text>
<claim-text>the first portion and the second portion have the same slope at their transition.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00013" num="00013">
<claim-text>13. The method of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein:
<claim-text>the first portion of the voltage ramp covers a fixed pattern noise (FPN); and</claim-text>
<claim-text>the second portion of the voltage ramp is optimized wherein a quantization noise is less than a shot noise.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00014" num="00014">
<claim-text>14. The method of <claim-ref idref="CLM-00010">claim 10</claim-ref>, wherein the method is performed by a complimentary metal-oxide-semiconductor (CMOS) single slope column parallel analog-to-digital converter array.</claim-text>
</claim>
<claim id="CLM-00015" num="00015">
<claim-text>15. The method of <claim-ref idref="CLM-00010">claim 10</claim-ref>, further comprising:
<claim-text>sampling each of the plurality of pixel voltages onto a corresponding sample capacitor;</claim-text>
<claim-text>simultaneously starting the voltage ramp and a digital counter;</claim-text>
<claim-text>capturing, by a latch for subsequent digital readout, a counter value of the digital counter when each of the comparators trips, wherein each of the comparators in the array has a first input comprising the voltage ramp and a second input comprising one of the pixel voltages.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00016" num="00016">
<claim-text>16. The method of <claim-ref idref="CLM-00010">claim 10</claim-ref>, further comprising:
<claim-text>converting the captured counter value to a linearized voltage value according to a return look-up table.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00017" num="00017">
<claim-text>17. The method of <claim-ref idref="CLM-00016">claim 16</claim-ref>, further comprising:
<claim-text>implementing the return look-up table as a ramp generation look-up table with a backward shift.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00018" num="00018">
<claim-text>18. The method of <claim-ref idref="CLM-00016">claim 16</claim-ref>, further comprising:
<claim-text>obtaining the return look-up table by calibration against precision input; and</claim-text>
<claim-text>producing a return look-up table entry for a given code value based on an average value of an input signal. </claim-text>
</claim-text>
</claim>
</claims>
</us-patent-grant>
