<!DOCTYPE us-patent-grant SYSTEM "us-patent-grant-v44-2013-05-16.dtd" [ ]>
<us-patent-grant lang="EN" dtd-version="v4.4 2013-05-16" file="US08625309-20140107.XML" status="PRODUCTION" id="us-patent-grant" country="US" date-produced="20131224" date-publ="20140107">
<us-bibliographic-data-grant>
<publication-reference>
<document-id>
<country>US</country>
<doc-number>08625309</doc-number>
<kind>B2</kind>
<date>20140107</date>
</document-id>
</publication-reference>
<application-reference appl-type="utility">
<document-id>
<country>US</country>
<doc-number>13178909</doc-number>
<date>20110708</date>
</document-id>
</application-reference>
<us-application-series-code>13</us-application-series-code>
<priority-claims>
<priority-claim sequence="01" kind="national">
<country>JP</country>
<doc-number>2010-155974</doc-number>
<date>20100708</date>
</priority-claim>
</priority-claims>
<us-term-of-grant>
<us-term-extension>363</us-term-extension>
</us-term-of-grant>
<classifications-ipcr>
<classification-ipcr>
<ipc-version-indicator><date>20060101</date></ipc-version-indicator>
<classification-level>A</classification-level>
<section>H</section>
<class>02</class>
<subclass>M</subclass>
<main-group>3</main-group>
<subgroup>335</subgroup>
<symbol-position>F</symbol-position>
<classification-value>I</classification-value>
<action-date><date>20140107</date></action-date>
<generating-office><country>US</country></generating-office>
<classification-status>B</classification-status>
<classification-data-source>H</classification-data-source>
</classification-ipcr>
</classifications-ipcr>
<classification-national>
<country>US</country>
<main-classification>363 2101</main-classification>
<further-classification>363 2115</further-classification>
<further-classification>363 2116</further-classification>
</classification-national>
<invention-title id="d2e71">Semiconductor integrated circuit and switching power supply system</invention-title>
<us-references-cited>
<us-citation>
<patcit num="00001">
<document-id>
<country>US</country>
<doc-number>6061257</doc-number>
<kind>A</kind>
<name>Spampinato et al.</name>
<date>20000500</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>363 2113</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00002">
<document-id>
<country>US</country>
<doc-number>7061225</doc-number>
<kind>B2</kind>
<name>Yang et al.</name>
<date>20060600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>324103 P</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00003">
<document-id>
<country>US</country>
<doc-number>7339359</doc-number>
<kind>B2</kind>
<name>Choi et al.</name>
<date>20080300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00004">
<document-id>
<country>US</country>
<doc-number>7764521</doc-number>
<kind>B2</kind>
<name>Lin et al.</name>
<date>20100700</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>363 2116</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00005">
<document-id>
<country>US</country>
<doc-number>7859862</doc-number>
<kind>B2</kind>
<name>Lin</name>
<date>20101200</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>363 2112</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00006">
<document-id>
<country>US</country>
<doc-number>8199533</doc-number>
<kind>B2</kind>
<name>Shimada</name>
<date>20120600</date>
</document-id>
</patcit>
<category>cited by examiner</category>
<classification-national><country>US</country><main-classification>363 2101</main-classification></classification-national>
</us-citation>
<us-citation>
<patcit num="00007">
<document-id>
<country>US</country>
<doc-number>2007/0046294</doc-number>
<kind>A1</kind>
<name>Matthews et al.</name>
<date>20070300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00008">
<document-id>
<country>JP</country>
<doc-number>2002-136124</doc-number>
<kind>A</kind>
<date>20020500</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00009">
<document-id>
<country>JP</country>
<doc-number>2007-014082</doc-number>
<kind>A</kind>
<date>20070100</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00010">
<document-id>
<country>JP</country>
<doc-number>2007-073954</doc-number>
<kind>A</kind>
<date>20070300</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00011">
<document-id>
<country>JP</country>
<doc-number>2007-258294</doc-number>
<kind>A</kind>
<date>20071000</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
<us-citation>
<patcit num="00012">
<document-id>
<country>JP</country>
<doc-number>2008-533972</doc-number>
<kind>A</kind>
<date>20080800</date>
</document-id>
</patcit>
<category>cited by applicant</category>
</us-citation>
</us-references-cited>
<number-of-claims>7</number-of-claims>
<us-exemplary-claim>4</us-exemplary-claim>
<us-field-of-classification-search>
<classification-national>
<country>US</country>
<main-classification>363 2101- 2118</main-classification>
<additional-info>unstructured</additional-info>
</classification-national>
</us-field-of-classification-search>
<figures>
<number-of-drawing-sheets>5</number-of-drawing-sheets>
<number-of-figures>5</number-of-figures>
</figures>
<us-related-documents>
<related-publication>
<document-id>
<country>US</country>
<doc-number>20120008346</doc-number>
<kind>A1</kind>
<date>20120112</date>
</document-id>
</related-publication>
</us-related-documents>
<us-parties>
<us-applicants>
<us-applicant sequence="001" app-type="applicant" designation="us-only">
<addressbook>
<last-name>Kawamura</last-name>
<first-name>Kazuhiro</first-name>
<address>
<city>Matsumoto</city>
<country>JP</country>
</address>
</addressbook>
<residence>
<country>JP</country>
</residence>
</us-applicant>
</us-applicants>
<inventors>
<inventor sequence="001" designation="us-only">
<addressbook>
<last-name>Kawamura</last-name>
<first-name>Kazuhiro</first-name>
<address>
<city>Matsumoto</city>
<country>JP</country>
</address>
</addressbook>
</inventor>
</inventors>
<agents>
<agent sequence="01" rep-type="attorney">
<addressbook>
<orgname>Rossi, Kimms &#x26; McDowell LLP</orgname>
<address>
<country>unknown</country>
</address>
</addressbook>
</agent>
</agents>
</us-parties>
<assignees>
<assignee>
<addressbook>
<orgname>Fuji Electric Co., Ltd.</orgname>
<role>03</role>
<address>
<country>JP</country>
</address>
</addressbook>
</assignee>
</assignees>
<examiners>
<primary-examiner>
<last-name>Han</last-name>
<first-name>Jessica</first-name>
<department>2838</department>
</primary-examiner>
</examiners>
</us-bibliographic-data-grant>
<abstract id="abstract">
<p id="p-0001" num="0000">A control circuit can be provided with a comparator detecting a turning-off of a semiconductor switch from a voltage generated in an auxiliary winding of a transformer and inputted to a zero current detecting terminal, a timer outputting a signal after a specified length of time from the time at which the turning-off of the semiconductor switch is detected, and a comparator detecting from voltages inputted to a current detecting terminal a second voltage signal different from an ordinary first voltage signal inputted when the semiconductor switch is made turned-on. Thus, the second voltage signal supplied from mode switching circuits as an externally inputted mode switching signal can be made also detected by the existing current detecting terminal. By detecting the second voltage signal after the specified length of time from the turning-off of the semiconductor switch, switching of an operation mode becomes possible without newly providing any specialized terminal.</p>
</abstract>
<drawings id="DRAWINGS">
<figure id="Fig-EMI-D00000" num="00000">
<img id="EMI-D00000" he="158.83mm" wi="243.76mm" file="US08625309-20140107-D00000.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00001" num="00001">
<img id="EMI-D00001" he="247.48mm" wi="186.52mm" orientation="landscape" file="US08625309-20140107-D00001.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00002" num="00002">
<img id="EMI-D00002" he="240.20mm" wi="195.07mm" file="US08625309-20140107-D00002.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00003" num="00003">
<img id="EMI-D00003" he="246.13mm" wi="186.18mm" orientation="landscape" file="US08625309-20140107-D00003.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00004" num="00004">
<img id="EMI-D00004" he="242.49mm" wi="184.83mm" orientation="landscape" file="US08625309-20140107-D00004.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
<figure id="Fig-EMI-D00005" num="00005">
<img id="EMI-D00005" he="196.34mm" wi="185.17mm" file="US08625309-20140107-D00005.TIF" alt="embedded image" img-content="drawing" img-format="tif"/>
</figure>
</drawings>
<description id="description">
<?BRFSUM description="Brief Summary" end="lead"?>
<heading id="h-0001" level="1">BACKGROUND OF THE INVENTION</heading>
<p id="p-0002" num="0001">1. Field of the Invention</p>
<p id="p-0003" num="0002">Embodiments of the present invention relate semiconductor integrated circuits and particularly to semiconductor integrated circuits for carrying out stabilization of an output voltage of an insulating transformer.</p>
<p id="p-0004" num="0003">2. Related Art</p>
<p id="p-0005" num="0004">A switching power supply system is mounted on an electronic device such as, for example, a cellular phone or a digital camera to be used for stepping up or stepping down an input voltage to be supplied to a load. In such a switching power supply system, states relating to the operations of a power supply are set with various methods according to power supply specifications required by electronic devices.</p>
<p id="p-0006" num="0005">Important parameters such as a switching frequency with respect to a switching power supply system affect characteristics of the system such as a power supply noise characteristic, dimensions of parts, breakdown voltages of parts and temperature rise of parts, so that there are some ideas of methods of setting such important parameters. In the switching power supply circuit disclosed in JP-A-2007-14082 (see paragraph Nos. [0039] to [0046], etc.), a DC voltage supplied from a DC power supply is stepped up to be supplied to six white light emitting diodes connected in series as a load so as to drive the white light emitting diodes. In the switching power supply circuit, for adjusting the switching frequency, an external resistor as an adjusting resistor is provided for the oscillating circuit of a step up chopper regulator.</p>
<p id="p-0007" num="0006">When a switching power supply circuit is normally used for electronic equipment such as a portable appliance, a liquid crystal television set or a DVD (Digital Versatile Disc) player, noises generated from the switching power supply circuit may be classified into noises having adverse effects on other integrated circuits in the electronic equipment and noises having no adverse effects. The invention of the switching power supply circuit disclosed in JP-A-2007-14082, since the resistance value of the external resistor and the switching period are in a linear relation to each other, is formed so that the switching period is freely varied by replacing one external resistor to facilitate adjustment of produced noises. However, for applying the invention to a power supply control IC (Integrated Circuit) including a step up chopper regulator, there is left such a problem as to require a specialized terminal for newly connecting a frequency adjusting resistor to the IC.</p>
<p id="p-0008" num="0007">A power supply control IC for controlling a switching power supply system has the number of terminals come to be limited due to requirements for reductions in cost and in the package area. Therefore, in many cases, power supply control ICs have no specialized terminal provided for setting parameters other than the above explained switching frequency. In such case, for complying with various power supply specifications of electronic equipment, the lineup of power supply control ICs themselves must be made increased.</p>
<p id="p-0009" num="0008">An increase in the lineup of power supply control ICs by power supply specification of electronic equipment will cause an increase in costs of products. Thus, for reducing the cost of electronic equipment, a product comes to be required which is capable of making selections of a plurality of necessary kinds of operating conditions with one power supply control IC.</p>
<p id="p-0010" num="0009">As a system addressing such requirement, in JP-A-2007-73954 (see paragraph Nos. [0003] to [0028], etc.), a system is disclosed which system carries out the setting of an operating state during the initialization period of a power supply control IC without increasing the number of terminals of the power supply control IC. The described system, for carrying out selection of a required functional parameter and a required operation mode from a plurality of functional parameters and operation modes, is to actualize settings of a plurality of operating states with a single component by, for example, selecting a specified capacitance value of capacitance values of a multifunctional capacitor coupled to a pin of an integrated circuit. Here, a multifunctional capacitor is a capacitor which has, in addition to functions of setting in the initialization period functional parameters, operation modes or other device characteristics of the integrated circuit to which the multifunctional capacitor is connected, normal functions of some kinds for the normal operation of the integrated circuit. For example, a capacitor such as a power supply pin decoupling capacitor or a feedback pin loop compensating capacitor can be used as a parameter/mode selection capacitor during initialization.</p>
<p id="p-0011" num="0010">In the system disclosed in JP-A-2007-73954, with the capacitance value of the above explained capacitor such as a power supply pin decoupling capacitor or a feedback pin loop compensating capacitor, a capacitor originally arranged for other purpose, determined for being applied to mode setting, the mode setting is appropriately carried out. However, after the mode setting in the initialization period is ended, the capacitor comes to be used for its original purpose. Therefore, each of the capacitance values of the capacitors such as the power supply pin decoupling capacitor and a feedback pin loop compensating capacitor must be set to a magnitude suited for actualizing its original purpose.</p>
<p id="p-0012" num="0011">Here, the feedback pin loop compensating capacitor has its original purpose to compensate the frequency characteristic of the feedback pin loop of a power supply control IC and is to be disposed so that no feedback loop for a power supply control in a switching power supply system becomes unstable. The feedback pin loop compensating capacitor, with its capacitance value set to be less than the value optimum for the stability of the feedback loop, causes the system to be unstable to oscillate. Conversely, the capacitance value set to be more than the optimum value causes the response as a power supply system to become slow, which makes the output voltage impossible to recover soon to the variation of a load, for example. Therefore, the capacitance value of the capacitor significantly affects the response of a feedback system to be a problem of restricting the design itself of a switching power supply in that the change in the capacitance value limits the adjustment of phase compensation and causes an abnormal oscillation of the power supply.</p>
<p id="p-0013" num="0012">Moreover, in general, the following three kinds of cases are considered in the method of supplying a power supply voltage to a power supply control IC. A first case is the case in which like in the case disclosed in JP-A-2007-73954, a power supply voltage is supplied from an external power supply connected to different terminals of the power supply control IC to be produced as a power supply voltage by an internal regulator. A second case is the case in which in an initialization period at startup, a power supply voltage is produced by a startup current produced by a startup circuit (corresponding to the internal regulator in the first case) connected to an external power supply and, in a normal operation, a power supply voltage is supplied from the auxiliary winding of an insulating transformer. A third case is the case in which an external power supply is used.</p>
<p id="p-0014" num="0013">For using a power supply pin decoupling capacitor as a multifunctional capacitor, a regulator producing a constant current for charging the capacitor is necessary in the power supply control IC. This is because the power supply pin decoupling capacitor is a capacitor to be connected to a power supply pin (between a power supply pin and a ground pin) of the power supply control IC for supplying a power supply voltage to the power supply control IC itself. The power supply pin decoupling capacitor, however, is a capacitor that functions as a buffer when power consumption of the power supply control IC becomes high to cause the supply of power supply voltage to become insufficient or to cause the power supply voltage to vary. In addition, the power supply pin decoupling capacitor also functions for removing noises such as ripples in a voltage on an electric power supply line. Accordingly, for achieving such original object, the capacitance value of the power supply pin decoupling capacitor must be made large to some extent. Thus, when a power supply pin decoupling capacitor with a large capacitance value is to be charged with a constant current in a short time, the value of the constant current supplied from the regulator must be set large, which requires the use of a large-scale regulator for generating a large constant current. Therefore, the use of a multifunctional capacitor causes a problem with respect to cost.</p>
<p id="p-0015" num="0014">In the third case, a power supply voltage is supplied to the power supply control IC with power supply pins connected to an external power supply, so that the power supply pin decoupling capacitor is brought into a state of being always connected to the external power supply. However, although the power supply pin decoupling capacitor is charged by a constant current in such a state of connection, no distinction is possible as to whether the power supply pin decoupling capacitor is charged by the current from the external power supply or charged by the constant current produced in the power supply control IC. Namely, for using the power supply pin decoupling capacitor for mode setting in an initialization period, the power supply pins must be disconnected from the external power supply and a circuit for the disconnection is to be provided out of the power supply control IC. Thus, the method disclosed in JP-A-2007-73954 can be said to be inadequate for being applied to the third case to set parameter/mode.</p>
<p id="p-0016" num="0015">As was explained in the foregoing, the method of using the multifunctional capacitor disclosed in JP-A-2007-73954 directly affects the normal function of the power supply control IC. Thus, there were such problems that the usage was difficult, a large scale regulator must be provided to result in an increase in cost, and some power supply voltage supply systems were impossible to be used.</p>
<p id="p-0017" num="0016">Furthermore, in JP-A-2007-258294 (see paragraph Nos. [0023] to [0027], etc.), there is a description of a semiconductor integrated circuit which is provided so that a mode switching signal is made inputted without increasing the number of terminals. Here, of terminals necessary for a normal operation, a terminal is used to which a voltage is inputted whose voltage range in a normal operation has significant differences between a power supply voltage and between a ground voltage. Thus, a voltage near the power supply voltage or near the ground voltage is inputted to the terminal so that a mode switching of the semiconductor integrated circuit is carried out. Therefore, according to the technique disclosed in JP-A-2007-258294, a semiconductor integrated circuit can be provided to which a mode switching signal can be inputted without increasing the number of terminals.</p>
<p id="p-0018" num="0017">However, in the semiconductor integrated circuit disclosed in JP-A-2007-258294, feedback terminals, to which the feedback signal of a power supply control IC is inputted, are used so as to carry out switching between a test mode and a normal operation mode. Therefore, for supplying a mode setting signal and a feedback signal to the feedback terminals with the signals switched, a circuit, producing the mode setting signal and, along with this, carrying out switching between the mode setting signal and the feedback signal, must be provided externally to the power supply control IC. The way of mode switching like this, although it causes no problem in a test carried out before mounting the power supply control IC on a product, is difficult to be carried out after the power supply control IC is mounted on the switching power supply system.</p>
<p id="p-0019" num="0018">For solving above problems in the circuits disclosed in JP-A-2007-14082 and JP-A-2007-258294 and in the system disclosed in JP-A-2007-73954, the applicant submitted international patent application no. PCT/JP2010/054218. The circuit disclosed in the application is a circuit in which a resistor for making a decision with respect to a state is added to a terminal for outputting a control signal or a terminal for inputting a sensing current signal. At the rising of a power supply voltage, the resistance value is read in so as to set an operation mode according to the magnitude of the resistance value. The circuit, however, is operated on condition that the mode setting is carried out in the early stage, so that the circuit does not permit a mode change during operation.</p>
<p id="p-0020" num="0019">Compared with this, the circuit disclosed in JP-A-2002-136124 is a circuit in which the output of a control winding (auxiliary winding) for detecting the output voltage of a secondary output winding of a transformer is made to be pulled down by a photocoupler to thereby give instructions for a mode change to a control unit. To a power supply control IC forming the control unit, this is to require a specialized terminal receiving the output of the control winding. This is because when forming a switching power supply system which uses a transformer with its input voltage provided by carrying out switching of a DC voltage, to which an AC voltage supplied from an AC power supply is rectified, or of a DC voltage supplied from a high voltage DC power supply, an auxiliary winding is generally used first for supplying a power supply voltage to a power supply control IC forming a control unit.</p>
<p id="p-0021" num="0020">Namely, when receiving a power supply voltage from the auxiliary winding, for making the supply of the power supply voltage stable, a capacitor with a capacitance being large to some extent is connected to the terminal receiving the supply. Therefore, even though a voltage is supplied to the terminal with the way disclosed in JP-A-2002-136124 applied, a signal for switching the mode sometimes can not be transmitted well. Even in the case when the signal for switching the mode can be transmitted well, the electric charges in the power supply voltage stabilizing capacitor are made discharged to cause problems of making the operation of the power supply control IC become unstable and increasing power consumption. Therefore, an additional terminal is absolutely necessary for being provided for receiving a mode changing signal. A specific example of a configuration provided with the additional terminal will be shown in the following.</p>
<p id="p-0022" num="0021"><figref idref="DRAWINGS">FIG. 4</figref> is a circuit diagram showing an example of a configuration of a circuit of a related switching power supply system and <figref idref="DRAWINGS">FIG. 5</figref> is a waveform diagram showing operation waveforms of basic parts of the related switching power supply system.</p>
<p id="p-0023" num="0022">The switching power supply system shown in <figref idref="DRAWINGS">FIG. 4</figref> is a switching power supply carrying out switching using self-excited oscillation and having a transformer T, a semiconductor switch Q<b>1</b>, a control IC <b>100</b> and a feedback circuit <b>11</b>. The transformer T has a primary winding N<b>1</b>, a secondary winding N<b>2</b> and an auxiliary winding N<b>3</b>. To one end of the primary winding N<b>1</b> of the transformer T, a DC power supply <b>12</b> is connected. The other end of the primary winding N<b>1</b> of the transformer T is grounded through the semiconductor switch Q<b>1</b> and a resistor R<b>1</b> for current detection. The secondary winding N<b>2</b> of the transformer T is connected to output terminals <b>13</b> through a rectifying and smoothing circuit with a diode D<b>1</b> and an output capacitor C<b>1</b>.</p>
<p id="p-0024" num="0023">The semiconductor switch Q<b>1</b> is to be an N channel MOSFET (Metal-Oxide-Semiconductor Field-Effect Transistor) here. The drain of the semiconductor switch Q<b>1</b> is connected to the primary winding N<b>1</b> of the transformer T, the source is connected to the resistor R<b>1</b> and the gate is connected to a control and output terminal OUT of the control IC <b>100</b>.</p>
<p id="p-0025" num="0024">One end of the auxiliary winding N<b>3</b> of the transformer T is connected to a zero current detecting terminal ZCD of the control IC <b>100</b> and to a power supply terminal VCC of the control IC <b>100</b> through a diode D<b>2</b>. The other end of the auxiliary winding N<b>3</b> is grounded.</p>
<p id="p-0026" num="0025">To the output terminal <b>13</b> on the positive polarity side of the switching power supply system, the feedback circuit <b>11</b> is connected. The feedback circuit <b>11</b> has resistors R<b>2</b> and R<b>3</b> both detecting variation of the output voltage at the output terminals <b>13</b>, a shunt regulator <b>14</b>, a photocoupler PC<b>1</b> including a light-emitting side photocoupler element PC<b>1</b><i>e </i>and a photo-detecting side photocoupler element PC<b>1</b><i>r</i>, and a resistor R<b>4</b> for limiting a current. The photo-detecting side photocoupler element PC<b>1</b><i>r </i>is connected to a feedback terminal FB in the control IC <b>100</b> with the collector and is grounded with the emitter. The shunt regulator <b>14</b> let a current, corresponding to the variation in an output voltage detected by the resistors R<b>2</b> and R<b>3</b>, flow in the light-emitting side photocoupler element PC<b>1</b><i>e </i>and, by the photo-detecting side photocoupler element PC<b>1</b><i>r</i>, an error signal corresponding to the variation is inputted to the feedback terminal FB in the control IC <b>100</b>.</p>
<p id="p-0027" num="0026">Here, when the control IC <b>100</b> makes the semiconductor switch Q<b>1</b> turned-off, no current flows in the resistor R<b>1</b>, by which the level of the signal inputted to a current detecting terminal IS is made to be zero. When a signal making the semiconductor switch Q<b>1</b> turned-on is outputted from a control output terminal OUT, the semiconductor switch Q<b>1</b> is made turned-on. This makes a current flow in the primary winding N<b>1</b> of the transformer T and the semiconductor switch Q<b>1</b> to make electromagnetic energy stored in the primary winding N<b>1</b>. The electromagnetic energy stored in the period is, during the period in which the semiconductor switch Q<b>1</b> is made turned-off, released from the secondary winding N<b>2</b> to the output capacitor C<b>1</b> through the diode D<b>1</b>.</p>
<p id="p-0028" num="0027">The output voltage of the switching power supply system is easily affected by variations in the input voltage from the DC power supply <b>12</b> and in load. Thus, the feedback circuit <b>11</b> carries out feedback of a voltage corresponding to an error to the specified output voltage to the control IC <b>100</b> as a feedback signal. By comparing the feedback signal with a voltage signal to which a current flowing in the primary winding N<b>1</b> and the semiconductor switch Q<b>1</b> is converted by the resistor R<b>1</b>, a duty as a period during which the semiconductor switch Q<b>1</b> is turned-on is controlled, by which an operation for stabilizing the output voltage is carried out.</p>
<p id="p-0029" num="0028">Therefore, as shown in the waveform diagram of <figref idref="DRAWINGS">FIG. 5</figref>, the timing at which the state of the semiconductor switch Q<b>1</b> is changed from a turned-on state to a turned-off state becomes the time at which a (feedback terminal voltage)/n (n: a certain value), a voltage to which a feedback terminal voltage at the feedback terminal FB is reduced to 1/n (or a voltage to which the feedback terminal voltage is level shifted to 1/n), and a voltage at the current detecting terminal IS becomes equal to each other. While, the timing at which the semiconductor switch Q<b>1</b> is turned-on is the time at which the detected voltage at the zero current detecting terminal ZCD comes closer to zero. Namely, when the semiconductor switch Q<b>1</b> is turned-off to allow electromagnetic energy stored in the primary winding N<b>1</b> to be released to the output side through the secondary winding N<b>2</b>, the voltage across the secondary winding N<b>2</b> and the voltage across the primary winding N<b>1</b> are decreased. This state is also transmitted to the auxiliary winding N<b>3</b>. Thus, when the voltage across the auxiliary winding N<b>3</b> is made inputted to the zero current detecting terminal ZCD to detect that the detected voltage comes closer to zero, the semiconductor switch Q<b>1</b> is made turned-on. Namely, the zero current detecting terminal ZCD is a terminal for detecting the timing at which the semiconductor switch Q<b>1</b> is to be turned-on. By repeating turning-on and -off of the semiconductor switch Q<b>1</b>, stabilizing control of the output voltage is carried out.</p>
<p id="p-0030" num="0029">For example, when the output voltage of the switching power supply system is about to lower, the voltage at the feedback terminal FB comes to increase. Then, the turned-on period of the semiconductor switch Q<b>1</b> until the feedback terminal voltage/n coincides with the voltage at the current detecting terminal IS (or a voltage to which the feedback terminal voltage/n is level-shifted) becomes longer to increase an amount of the energy stored in the primary winding N<b>1</b>, which acts so as to increase the output voltage.</p>
<p id="p-0031" num="0030">Moreover, the switching power supply system is provided with a mode switching circuit <b>15</b>. The mode switching circuit <b>15</b> has a mode switching signal input terminal <b>16</b>, which is connected to the base of a transistor Q<b>2</b> through a resistor R<b>5</b>. Between the base and emitter of the transistor Q<b>2</b>, a resistor R<b>6</b> is connected and the emitter of the transistor Q<b>2</b> is grounded. The collector of the transistor Q<b>2</b> is connected to the output terminal <b>13</b> on the positive polarity side of the switching power supply system through a light-emitting side photocoupler element PC<b>2</b><i>e </i>of a photocoupler PC<b>2</b>, including the light-emitting side photocoupler element PC<b>2</b><i>e </i>and a photo-detecting side photocoupler element PC<b>2</b><i>r</i>, and a resistor R<b>7</b>. The collector of the photo-detecting side photocoupler element PC<b>2</b><i>r </i>is connected to a switching signal detecting terminal MC and is further connected to the power supply terminal VCC of the control IC <b>100</b> through a pull-up resistor R<b>8</b>. The emitter of the photo-detecting side photocoupler element PC<b>2</b><i>r </i>is grounded.</p>
<p id="p-0032" num="0031">With a mode switching signal inputted to the mode switching signal input terminal <b>16</b> being at an H (High) level, the transistor Q<b>2</b> is made turned-on to bring the light-emitting side photocoupler element PC<b>2</b><i>e </i>to emit light. This makes the photo-detecting side photocoupler element PC<b>2</b><i>r </i>turned-on to bring the electric potential of the switching signal detecting terminal MC to an L (Low) level. Moreover, with the mode switching signal being at an L level, the transistor Q<b>2</b> is made turned-off to cause the light-emitting side photocoupler element PC<b>2</b><i>e </i>to emit no light. This turns-off the photo-detecting side photocoupler element PC<b>2</b><i>r </i>to bring the electric potential of the switching signal detecting terminal MC to become the H level. The control IC <b>100</b> carries out switching of a mode depending on whether the electric potential of the switching signal detecting terminal MC is the L level or the H level.</p>
<p id="p-0033" num="0032">As is explained above, in the circuit of the related switching power supply system, when the switching of a mode is desired, the switching signal detecting terminal MC was independently provided in the control IC <b>100</b>. Moreover, when the insulation condition between the primary side and the secondary side of the transformer T is desired to be kept, the photocoupler PC<b>2</b> including the light-emitting side photocoupler element PC<b>2</b><i>e </i>and the photo-detecting side photocoupler element PC<b>2</b><i>r </i>were used. Moreover, when switching was carried out between operation modes, a mode switching signal was externally inputted to change the logic state at the switching signal detecting terminal MC and the change was detected by the inner circuit of the control IC <b>100</b>, by which switching to a specified operation was carried out.</p>
<p id="p-0034" num="0033">With such way of detecting the switching signal, however, for making the control IC detect an externally inputted switching signal, a specialized terminal must be provided in the control IC. For example, a current standard control IC for a switching power supply for AC to DC conversion or DC to DC conversion is provided with eight pins (terminals). The minimum kinds of necessary functions are incorporated so as to be exhibited through the eight pins. Therefore, when no free pins are provided for new functions, some of present convenient functions must be eliminated for providing the new functions or, in the worst case, the package must be changed for increasing the number of pins. This causes the control IC to be insufficient in functions or to be provided at increased cost.</p>
<p id="p-0035" num="0034">The invention was made in view of such points with an object of providing a semiconductor integrated circuit that can detect an externally inputted mode switching signal without newly providing any specialized terminal, and a switching power supply system provided with such a semiconductor integrated circuit.</p>
<heading id="h-0002" level="1">SUMMARY OF THE INVENTION</heading>
<p id="p-0036" num="0035">In embodiments of the invention, for addressing the above and other problems, a semiconductor integrated circuit is provided, which is a semiconductor integrated circuit including: a control output terminal which outputs a signal driving a semiconductor switch connected to a primary winding of a transformer; a current detecting terminal to which a first voltage signal is inputted to which signal a current flowing in the semiconductor switch is converted; a feedback terminal to which a voltage corresponding to an error of a secondary side output voltage of the transformer is fed back; and a zero current detecting terminal which is connected to an auxiliary winding of the transformer for detecting from the output voltage of the auxiliary winding of the transformer one of a timing at which the semiconductor switch is to be turned-on and both of the timing at which the semiconductor switch is to be turned-on and a timing at which the semiconductor switch is turned off, the semiconductor integrated circuit including: a timer which outputs a signal after a specified length of time from the timing at which the semiconductor switch is made turned-off; a comparator which is connected to the current detecting terminal to detect a second voltage signal different from the first voltage signal; and an operation mode switching unit which carries out switching between operation modes according to whether the comparator detects the second voltage signal or not during a period during which the semiconductor switch is made turned-off subsequent to the time at which the timer outputted the signal after the specified length of time from the timing at which the semiconductor switch is made turned-off.</p>
<p id="p-0037" num="0036">Moreover, in certain embodiments, a switching power supply system is provided, which is a switching power supply system including: a transformer which has a primary winding, a secondary winding and an auxiliary winding; a semiconductor switch connected to the primary winding; a feedback circuit which carries out feedback of a voltage corresponding to an error of an output voltage outputted from the secondary winding; and a semiconductor integrated circuit including: a current detecting terminal to which a first voltage signal is inputted to which signal a current flowing in the semiconductor switch is converted; a feedback terminal to which a voltage corresponding to an error of the output voltage fed back by the feedback circuit is inputted; and a zero current detecting terminal which is connected to the auxiliary winding for detecting from the output voltage of the auxiliary winding one of a timing at which the semiconductor switch is to be turned-on and both of the timing at which the semiconductor switch is to be turned-on and a timing at which the semiconductor switch is turned-off, the semiconductor switch being controlled so as to stabilize the output voltage by the first voltage signal and the voltage corresponding to the error, the switching power supply system being characterized in that: the switching power supply system is provided with a mode switching circuit which is able to supply a second voltage signal different from the first voltage signal to the current detecting terminal during a period during which the semiconductor switch is made turned-off according to an external mode switching signal, and the semiconductor integrated circuit includes: a timer which outputs a signal after a specified length of time from the timing at which the semiconductor switch is made turned-off; a comparator which is connected to the current detecting terminal to detect a second voltage signal; and an operation mode switching unit which carries out switching between operation modes according to whether the comparator detects the second voltage signal or not during a period during which the semiconductor switch is made turned-off subsequent to the time at which the timer outputted the signal after the specified length of time from the timing at which the semiconductor switch was made turned-off.</p>
<p id="p-0038" num="0037">According to such a semiconductor integrated circuit and a switching power supply system provided with such a semiconductor integrated circuit, the semiconductor integrated circuit can be provided with the timer, the comparator and the operation mode switching unit. Thus, at the current detecting terminal, in addition to the first voltage signal detected when the semiconductor switch is made turned-on, the second voltage signal comes to be detected when the semiconductor switch is made turned-off. By the timer allowing the comparator so as to detect the second voltage signal after a specified length of time has passed from the turning-off of the semiconductor switch, the switching between different operation modes by the operation mode switching unit is made possible without newly providing any specialized terminal.</p>
<p id="p-0039" num="0038">According to embodiments of the semiconductor integrated circuit and the switching power supply system with the above configurations, the current detecting terminal in the semiconductor integrated circuit functions so that, in addition to making the first voltage signal in a normal operation inputted in a period in which the semiconductor switch is made turned-on, the second voltage signal based on an externally inputted mode switching signal can be also detected in a period in which the semiconductor switch is made turned-off.</p>
<p id="p-0040" num="0039">By making the second voltage signal detectable, which is normally considered not to appear at the current detecting terminal in a period in which the semiconductor switch is made turned-off, there is provided the advantage of making a specified mode switching become possible without newly providing an additional specialized terminal for detecting an external signal or without carrying out omission of an existing useful function which omission is for additionally providing an external signal detecting function.</p>
<?BRFSUM description="Brief Summary" end="tail"?>
<?brief-description-of-drawings description="Brief Description of Drawings" end="lead"?>
<description-of-drawings>
<heading id="h-0003" level="1">BRIEF DESCRIPTION OF THE DRAWINGS</heading>
<p id="p-0041" num="0040"><figref idref="DRAWINGS">FIG. 1</figref> is a circuit diagram showing an example of a configuration of a circuit of a switching power supply system according to a first embodiment of the invention;</p>
<p id="p-0042" num="0041"><figref idref="DRAWINGS">FIG. 2</figref> is a waveform diagram showing operation waveforms of basic parts of the switching power supply system according to the first embodiment of the invention;</p>
<p id="p-0043" num="0042"><figref idref="DRAWINGS">FIG. 3</figref> is a circuit diagram showing an example of a configuration of a circuit of a switching power supply system according to a second embodiment of the invention;</p>
<p id="p-0044" num="0043"><figref idref="DRAWINGS">FIG. 4</figref> is a circuit diagram showing an example of a configuration of a circuit of a related switching power supply system; and</p>
<p id="p-0045" num="0044"><figref idref="DRAWINGS">FIG. 5</figref> is a waveform diagram showing operation waveforms of basic parts of the related switching power supply system.</p>
</description-of-drawings>
<?brief-description-of-drawings description="Brief Description of Drawings" end="tail"?>
<?DETDESC description="Detailed Description" end="lead"?>
<heading id="h-0004" level="1">DETAILED DESCRIPTION</heading>
<p id="p-0046" num="0045">Detailed explanations are made below with respect to embodiments of the invention with reference to the attached drawings.</p>
<p id="p-0047" num="0046"><figref idref="DRAWINGS">FIG. 1</figref> is a circuit diagram showing an example of a configuration of a circuit of a switching power supply system according to a first embodiment of the invention and <figref idref="DRAWINGS">FIG. 2</figref> is a waveform diagram showing operation waveforms of basic parts of the switching power supply system.</p>
<p id="p-0048" num="0047">In <figref idref="DRAWINGS">FIG. 1</figref> and in <figref idref="DRAWINGS">FIG. 3</figref> that is to be referred to later, constituents having the same functions as those of the constituents in the example of the circuit configuration of the related switching power supply system shown in <figref idref="DRAWINGS">FIG. 4</figref> are denoted with the same reference numerals and signs.</p>
<p id="p-0049" num="0048">The switching power supply system has a transformer T, a semiconductor switch Q<b>1</b>, a control IC <b>10</b> and a feedback circuit <b>11</b>. The transformer T has a primary winding N<b>1</b>, a secondary winding N<b>2</b> and an auxiliary winding N<b>3</b>. To one end of the primary winding N<b>1</b> of the transformer T, a DC power supply <b>12</b> is connected.</p>
<p id="p-0050" num="0049">The DC power supply <b>12</b> can be a power supply in which the output of a commercial AC power supply is subjected to a full-wave rectification by a diode bridge. The other end of the primary winding N<b>1</b> of the transformer T is grounded through the semiconductor switch Q<b>1</b> and a resistor R<b>1</b> for current detection. The secondary winding N<b>2</b> of the transformer T is connected to output terminals <b>13</b> through a rectifying and smoothing circuit with a diode D<b>1</b> and an output capacitor C<b>1</b>.</p>
<p id="p-0051" num="0050">The semiconductor switch Q<b>1</b> is to be an N channel MOSFET here. The drain of the semiconductor switch Q<b>1</b> is connected to the primary winding N<b>1</b> of the transformer T, the source is connected to the resistor R<b>1</b> and a current detecting terminal IS of the control IC <b>10</b>, and the gate is connected to a control and output terminal OUT of the control IC <b>10</b>. Between the drain and the source of the semiconductor switch Q<b>1</b>, a capacitor Cd for resonance is connected.</p>
<p id="p-0052" num="0051">One end of the auxiliary winding N<b>3</b> of the transformer T is connected to a power supply terminal VCC of the control IC <b>10</b> through a diode D<b>2</b> and, along with this, connected to a zero current detecting terminal ZCD of the control IC <b>10</b>.</p>
<p id="p-0053" num="0052">To the output terminal <b>13</b> on the positive polarity side of the switching power supply system, the feedback circuit <b>11</b> is connected. The feedback circuit <b>11</b> has resistors R<b>2</b> and R<b>3</b> connected in series both of which are connected between the output terminal <b>13</b> on the positive polarity side and the ground on the secondary side to detect variation of the output voltage at the output terminals <b>13</b>. Moreover, between the output terminal <b>13</b> on the positive polarity side and the ground on the secondary side, a resistor R<b>4</b> for limiting a current, a light-emitting side photocoupler element PC<b>1</b><i>e </i>of a photocoupler PC<b>1</b> and a shunt regulator <b>14</b> are connected in series. To the reference terminal of the shunt regulator <b>14</b>, the connection section common to the resistor R<b>2</b> and the resistor R<b>3</b> is connected. While, in the photocoupler PC<b>1</b>, a photo-detecting side photocoupler element PC<b>1</b><i>r </i>paired with the light-emitting side photocoupler element PC<b>1</b><i>e </i>is connected to a feedback terminal FB in the control IC <b>10</b> with the collector and is grounded with the emitter. The shunt regulator <b>14</b> let a current, corresponding to the variation in an output voltage detected by the resistors R<b>2</b> and R<b>3</b>, flow in the light-emitting side photocoupler element PC<b>1</b><i>e </i>and, by the photo-detecting side photocoupler element PC<b>1</b><i>r</i>, an error signal corresponding to the variation is inputted to the feedback terminal FB in the control IC <b>10</b>.</p>
<p id="p-0054" num="0053">With this, a current mode control type switching power supply is formed in which the value of a voltage to which a current flowing in the semiconductor switch Q<b>1</b> is converted and the value of a fed back voltage corresponding to an error in the output voltage are compared with each other to thereby carry out control of stabilizing the output voltage.</p>
<p id="p-0055" num="0054">The switching power supply system is further provided with mode switching circuits <b>15</b><i>a </i>and <b>15</b><i>b</i>. The mode switching circuit <b>15</b><i>a </i>has a mode switching signal input terminal <b>16</b> to which a mode switching signal is inputted. The mode switching signal input terminal <b>16</b> is connected to the base of an NPN-type transistor Q<b>2</b> through a resistor R<b>5</b>. The base of the transistor Q<b>2</b> is connected to one end of a resistor R<b>6</b>, and the other end of the resistor R<b>6</b> and the emitter of the transistor Q<b>2</b> are connected to the ground on the secondary side. The collector of the transistor Q<b>2</b> is connected to the output terminal <b>13</b> on the positive polarity side of the switching power supply system through a light-emitting side photocoupler element PC<b>2</b><i>e </i>of a photocoupler PC<b>2</b>, including the light-emitting side photocoupler element PC<b>2</b><i>e </i>and a photo-detecting side photocoupler element PC<b>2</b><i>r</i>, and a resistor R<b>7</b>.</p>
<p id="p-0056" num="0055">While, in the mode switching circuit <b>15</b><i>b</i>, between one end of the auxiliary winding N<b>3</b> connected to the zero current detecting terminal ZCD of the control IC <b>10</b> and the current detecting terminal IS, there are connected a diode D<b>3</b>, a resistor R<b>9</b> for level adjustment and a PNP type transistor Q<b>3</b> are connected in series. Between the emitter and the base of the transistor Q<b>3</b>, a resistor R<b>10</b> is connected. The base of the transistor Q<b>3</b> is connected to the ground through a resistor R<b>11</b>. Moreover, to a connection point A of the emitter of the transistor Q<b>3</b> and the resistor R<b>9</b> for level adjustment, a photo-detecting side photocoupler element PC<b>2</b><i>r </i>is connected which is paired with the light-emitting side photocoupler element PC<b>2</b><i>e. </i></p>
<p id="p-0057" num="0056">The control IC <b>10</b> has the power supply terminal VCC and a ground terminal GND. The power supply terminal VCC has a power supply voltage supplied from the auxiliary winding N<b>3</b> and the ground terminal GND is connected to the ground on the primary side.</p>
<p id="p-0058" num="0057">The control IC <b>10</b> further has a comparator CP<b>1</b> to the non-inverting input terminal of which the zero current detecting terminal ZCD is connected. To the inverting input terminal of the comparator CP<b>1</b>, a voltage source VP<b>1</b> is connected. With the voltage source VP<b>1</b>, a threshold voltage as a threshold level is set which is lower than a voltage appearing in the auxiliary winding N<b>3</b> when the semiconductor switch Q<b>1</b> is made turned-off. To the output terminal of the comparator CP<b>1</b>, a timer <b>21</b> is connected. The timer <b>21</b> has a function that starts its operation from a timing at which the comparator CP<b>1</b> detects the turning-off of the semiconductor switch Q<b>1</b> and, after a specified time has passed, outputs a pulse signal.</p>
<p id="p-0059" num="0058">The zero current detecting terminal ZCD is also connected to the set terminal S of an RS flip-flop circuit <b>24</b> through a valley detecting unit <b>22</b> and a one-shot circuit <b>23</b>. The output terminal Q of the RS flip-flop circuit <b>24</b> is connected to the control output terminal OUT of the control IC <b>10</b> through a driver <b>25</b>.</p>
<p id="p-0060" num="0059">The feedback terminal FB of the control IC <b>10</b> is connected to the inverting input terminal of a current comparator <b>27</b> through a level shift circuit <b>26</b>. The output terminal of the current comparator <b>27</b> is connected to the reset terminal R of the RS flip-flop circuit <b>24</b>.</p>
<p id="p-0061" num="0060">The current detecting terminal IS of the control IC <b>10</b> is connected to the non-inverting input terminal of the current comparator <b>27</b> and the non-inverting input terminal of a comparator CP<b>2</b>. To the inverting input terminal of the comparator CP<b>2</b>, a voltage source VP<b>2</b> is connected. With the voltage source VP<b>2</b>, a threshold voltage is set which is lower than a voltage appearing in the auxiliary winding N<b>3</b> when the semiconductor switch Q<b>1</b> is made turned-off and applied to the current detecting terminal IS through the diode D<b>3</b>, the resistor R<b>9</b> and the transistor Q<b>3</b> of the mode switching circuit <b>15</b><i>b. </i></p>
<p id="p-0062" num="0061">The output terminal of the comparator CP<b>2</b> is connected to the data input terminal D of a D (delayed) flip-flop circuit <b>28</b>, to the clock input terminal CK of which the timer <b>21</b>, outputting a pulse signal, is connected.</p>
<p id="p-0063" num="0062">The output terminal Q of the D flip-flop circuit <b>28</b> is connected to an overcurrent limiting threshold voltage changing circuit <b>29</b>. The overcurrent limiting threshold voltage changing circuit <b>29</b> is shown as an example of an operation mode switching unit that switches an operation mode when a mode switching signal is externally inputted to the mode switching signal input terminal <b>16</b>. In the embodiment, a case is shown in which an overcurrent limiting threshold voltage applied to the inverting input terminal of the current comparator <b>27</b> is changed according to a mode changing signal. Therefore, the overcurrent limiting threshold voltage changing circuit <b>29</b> is provided with two voltage sources VP<b>3</b> and VP<b>4</b>, which are connected to an inverting input terminal of the current comparator <b>27</b> through a switch SW<b>1</b> and a switch SW<b>2</b>, respectively. The switch SW<b>1</b> is driven to be turned-on and -off by an inverter <b>30</b> receiving the output of the D flip-flop circuit <b>28</b> and the switch SW<b>2</b> is driven to be turned-on and -off by the output of the D flip-flop circuit <b>28</b>.</p>
<p id="p-0064" num="0063">In the circuit of the switching power supply system as was explained above, as shown in <figref idref="DRAWINGS">FIG. 2</figref>, the turning-on of the semiconductor switch Q<b>1</b> with an H level signal received from the control output terminal OUT makes a current flow in the primary winding N<b>1</b> of the transformer T to store electromagnetic energy in the primary winding N<b>1</b>. At this time, the value of the current flowing in the primary winding N<b>1</b> is converted to the value of a voltage by the resistor R<b>1</b> to be inputted to the current detecting terminal IS. In addition, in the auxiliary winding N<b>3</b> of the transformer T, a negative voltage is generated the value of which is expressed as the value of an input voltage&#xd7;the number of turns of the auxiliary winding N<b>3</b>/the number of turns of the primary winding N<b>1</b>.</p>
<p id="p-0065" num="0064">When the level of a detected voltage, which is inputted to the current detecting terminal IS, reaches the level of a (feedback terminal voltage)/n (n: a certain value), the voltage of a signal fed back to the feed back terminal FB with the voltage then made level shifted to 1/n by the level shift circuit <b>26</b>, a reset signal is inputted to the reset terminal R of the RS flip-flop circuit <b>24</b> from the current comparator <b>27</b>. This makes the RS flip-flop circuit <b>24</b> output an L level signal, by which the driver <b>25</b> carries out control so as to turn-off the semiconductor switch Q<b>1</b>.</p>
<p id="p-0066" num="0065">The turning-off of the semiconductor switch Q<b>1</b> allows the electromagnetic energy stored in the primary winding N<b>1</b> of the transformer T to be released from the secondary winding N<b>2</b> to the output capacitor C<b>1</b> through the diode D<b>1</b>. In a period in which the semiconductor switch Q<b>1</b> is made turned-off, a voltage Vs (=the output voltage of the power supply+the forward voltage of the diode D<b>1</b> on the secondary side) is generated in the secondary winding N<b>2</b> in the direction of letting a current flow in the diode D<b>1</b> in the forward direction. At this time, a positive voltage is generated in the auxiliary winding N<b>3</b> with magnitude becoming Vs&#xd7;(the number of turns of the auxiliary winding N<b>3</b>)/(the number of turns of the secondary winding N<b>2</b>). The voltage is rectified by the diode D<b>2</b> and supplied to the power supply terminal VCC of the control IC <b>10</b> to be used as a power supply voltage of the control IC <b>10</b>.</p>
<p id="p-0067" num="0066">On terminating the release of electromagnetic energy to the output capacitor C<b>1</b>, the drain voltage of the semiconductor switch Q<b>1</b> is rapidly lowered due to the resonance in the circuit with the primary winding N<b>1</b> and the capacitor Cd with a voltage induced in the auxiliary winding N<b>3</b> also lowered. The voltage induced in the auxiliary winding N<b>3</b> is also inputted to the zero current detecting terminal ZCD. When the voltage inputted into the zero current detecting terminal ZCD becomes lower than the threshold voltage of the valley detecting unit <b>22</b>, the one-shot circuit <b>23</b> outputs a set signal, which is inputted to the RS flip-flop circuit <b>24</b> to turn-on the semiconductor switch Q<b>1</b> again. By repeating the above switching operation, a specified power supply voltage is continuously supplied.</p>
<p id="p-0068" num="0067">Here, when the operation mode of the switching power supply system is an A mode in which a mode switching signal of an H level (first logic state) is inputted to the mode switching signal input terminal <b>16</b>, the transistor Q<b>2</b> in the mode switching circuit <b>15</b><i>a </i>comes to be in a turned-on state to make an LED as the light-emitting side photocoupler element PC<b>2</b><i>e </i>turned-on (emit light). This makes a phototransistor as the photo-detecting side photocoupler element PC<b>2</b><i>r </i>turned-on to ground a connection point A on the emitter side of the transistor Q<b>3</b>. Thus, the transistor Q<b>3</b> is reverse-biased to thereby be turned-off, by which the voltage of the auxiliary winding N<b>3</b> does not exert any influence on the voltage at the current detecting terminal IS. Hence, at the current detecting terminal IS, like in the circuit of the related system, a voltage with a triangular waveform to which a current is converted into a voltage is generated only when the semiconductor switch Q<b>1</b> is made turned-on.</p>
<p id="p-0069" num="0068">When the operation mode is the A mode, as was explained before, no high positive voltage, which appears in the auxiliary winding N<b>3</b> when the semiconductor switch Q<b>1</b> is made turned-off, is inputted in the non-inverting input of the comparator CP<b>2</b> through the current detecting terminal IS. Hence, the comparator CP<b>2</b> always outputs an L level signal. While, the comparator CP<b>1</b> detects a high positive voltage supplied from the auxiliary winding N<b>3</b> each time the semiconductor switch Q<b>1</b> is turned-off and the timer <b>21</b> outputs a pulse signal a specified time later from the instant when the high positive voltage is detected. Therefore, the D flip-flop circuit <b>28</b>, at the time when the D flip-flop circuit <b>28</b> receives a pulse signal from the timer <b>21</b> at the clock input terminal CK, holds the L level signal outputted from the comparator CP<b>2</b> and outputs the L level signal from the output terminal Q until the clock input terminal CK receives a next pulse signal. Thus, in the overcurrent limiting threshold voltage changing circuit <b>29</b>, the switch SW<b>1</b> is in a turned-on state (closed: in conduction state) by receiving an H level signal, to which the L level signal outputted from the output terminal Q of the D flip-flop circuit <b>28</b> is inverted by the inverter <b>30</b>, to supply the voltage of the voltage source VP<b>3</b> to the current comparator <b>27</b> as an overcurrent limiting threshold voltage. While, the switch SW<b>2</b> directly receives the L level signal to be in a turned-off state (opened: shut off state).</p>
<p id="p-0070" num="0069">Next, in the case of a B mode in which a mode switching signal of an L level (second logic state) is inputted to the mode switching signal input terminal <b>16</b>, in the mode switching circuit <b>15</b><i>a</i>, the transistor Q<b>2</b> is turned-off to make the LED as the light-emitting side photocoupler element PC<b>2</b><i>e </i>turned-off (emit no light). This is to cause the phototransistor as the photo-detecting side photocoupler element PC<b>2</b><i>r </i>in the mode switching circuit <b>15</b><i>b </i>to be made turned-off. Thus, when a positive voltage is generated in the auxiliary winding N<b>3</b> in a period in which the semiconductor switch Q<b>1</b> is made turned-off, the transistor Q<b>3</b> is made turned-on to come to supply the generated positive voltage to the current detecting terminal IS.</p>
<p id="p-0071" num="0070">Incidentally, in a period in which the semiconductor switch Q<b>1</b> is made turned-on, the voltage across the auxiliary winding N<b>3</b> becomes a negative voltage. Therefore, without taking any measures, the voltage at the current detecting terminal IS is pulled down to the negative side to make it impossible to carry out proper comparison of the voltage at the current detecting terminal IS with a feedback signal voltage. It is the diode D<b>3</b> that is provided for avoiding this. The diode D<b>3</b> prevents the voltage at the current detecting terminal IS from being pulled down onto the negative voltage side.</p>
<p id="p-0072" num="0071">When the semiconductor switch Q<b>1</b> is brought into a period in which the semiconductor switch Q<b>1</b> is made turned-off, the resistor R<b>1</b> comes to have no current flowing therein from the primary winding N<b>1</b> of the transformer T through the semiconductor switch Q<b>1</b> but have instead a current flowing from the auxiliary winding N<b>3</b> due to a voltage generated in the auxiliary winding N<b>3</b>, by which the voltage at the current detecting terminal IS is pulled up onto the positive polarity side. At this time, by the resistor R<b>9</b> for voltage level adjustment, the voltage value at the current detecting terminal IS can be adjusted. For example, when a threshold voltage determined by the voltage source VP<b>2</b> of the comparator CP<b>2</b> is taken as 0.5V, the resistance value of the resistor R<b>9</b> for the voltage level adjustment is selected so that the voltage at the current detecting terminal IS becomes on the order of 1V.</p>
<p id="p-0073" num="0072">In the control IC <b>10</b>, the comparator CP<b>1</b> compares the value of the voltage at the zero current detecting terminal ZCD with the threshold voltage set by the voltage source VP<b>1</b> to detect the timing at which the semiconductor switch Q<b>1</b> is made turned-off. While, the comparator CP<b>2</b> compares the voltage at the current detecting terminal IS with the threshold voltage set by the voltage source VP<b>2</b> to detect a voltage to be supplied during the period in which the semiconductor switch Q<b>1</b> is made turned-off. The timer <b>21</b> is a device for making the operation of the D flip-flop circuit <b>28</b> so as not to be affected by the distortion in the voltage waveform at the current detecting terminal IS due to a noise produced at the instant at which the semiconductor switch Q<b>1</b> is made turned-off and for making the operation of the D flip-flop circuit <b>28</b> wait until the voltage at the current detecting terminal IS sufficiently increases.</p>
<p id="p-0074" num="0073">In a period in which the semiconductor switch Q<b>1</b> is made turned-off, at a time after a specified time from the timing at which the semiconductor switch Q<b>1</b> is made turned-off, the voltage at the current detecting terminal IS exceeding the threshold voltage, set by the voltage source VP<b>2</b>, makes the operation mode switched to a B mode. In the B mode, the output terminal Q of the D flip-flop circuit <b>28</b> outputs an H level signal. Thus, in the overcurrent limiting threshold voltage changing circuit <b>29</b>, the inverter <b>30</b> inverts the inputted H level signal to an L level signal to control the switch SW<b>1</b> so as to become in an opened state. While, to the switch SW<b>2</b>, the H level signal as the output of the D flip-flop circuit <b>28</b> is directly given to control the switch SW <b>2</b> so as to become in a closed state. This is to allow the voltage of the voltage source VP<b>4</b> to be supplied to the current comparator <b>27</b> as an overcurrent limiting threshold voltage.</p>
<p id="p-0075" num="0074">After this, even though the semiconductor switch Q<b>1</b> is turned-on to cause the voltage at the current detecting terminal IS to become lower than the voltage of the voltage source VP<b>2</b>, no pulse signal from the timer <b>21</b> is inputted to the clock input terminal CK. Hence, the level of the signal at the output terminal Q is kept at an H level. Therefore, even though the semiconductor switch Q<b>1</b> is made turned-on from a turned-off state, an operation mode never returns from the B mode to the A mode.</p>
<p id="p-0076" num="0075">The voltage at the current detecting terminal IS, from the state of being raised during the period during which the semiconductor switch Q<b>1</b> was made turned-off, drops down to a voltage close to zero volt simultaneously with the turning-on of the semiconductor switch Q<b>1</b>. At this time, there is a fear that the semiconductor switch Q<b>1</b> is made accidentally turned-off immediately by an error signal such as a noise. This, however, is avoided by the one-shot circuit <b>23</b> continuously inputting set signals to the set terminal S of the RS flip-flop circuit <b>24</b> for a specified length of time (for example, the minimum turned-on width set at several hundreds of nanoseconds) when the valley detecting unit <b>22</b> detects a voltage that is to turn-on the semiconductor switch Q<b>1</b>. Thus, even though the switching noise produced when the semiconductor switch Q<b>1</b> is made turned-on is large, the semiconductor switch Q<b>1</b> is not made turned-off for the specified length of time from the time of being made turned-on, by which a faulty operation can be prevented that causes the semiconductor switch Q<b>1</b> to be turned-off by a noise immediately after the semiconductor switch Q<b>1</b> is made turned-on.</p>
<p id="p-0077" num="0076">As a specific example of the B mode in which a mode switching signal is taken as an L level signal, a case is shown in which the switching power supply system is brought into a stand-by mode. In the stand-by mode, an overcurrent limiting threshold voltage is lowered (set to the condition under which the voltage of the voltage source VP<b>3</b>&#x3e;the voltage of the voltage source VP<b>4</b>) so that an overcurrent limitation can be imposed with a load lighter than an ordinary load. Moreover, in the stand-by mode, it is required to lower excessive power consumption for the reduction of stand-by power consumption. In the B mode, however, the light-emitting side photocoupler element PC<b>2</b><i>e </i>and the photo-detecting side photocoupler element PC<b>2</b><i>r </i>are made turned-off to enable reduction in excessive power consumption by an amount consumed therein.</p>
<p id="p-0078" num="0077"><figref idref="DRAWINGS">FIG. 3</figref> is a circuit diagram showing an example of a configuration of a circuit of a switching power supply system according to a second embodiment of the invention.</p>
<p id="p-0079" num="0078">The switching power supply system according to the second embodiment, compared with the switching power supply system according to the first embodiment, is different from the first embodiment in the way of detecting the turning-off of the semiconductor switch Q<b>1</b>. Namely, in a control IC <b>40</b> in the switching power supply system according to the second embodiment, an inverting output terminal <o ostyle="single">Q</o> of the RS flip-flop circuit <b>24</b> and the timer <b>21</b> are connected. This allows the timer <b>21</b> to start its operation on receiving a turning-off control signal whose level becomes an H level at the turning-off of the semiconductor switch Q<b>1</b>, to output a pulse signal after a specified length of time has passed and to supply the outputted pulse signal to the clock input terminal CK of the D flip-flop circuit <b>28</b>.</p>
<p id="p-0080" num="0079">The other configuration of the control IC <b>40</b> is the same as that of the control IC <b>10</b> in the first embodiment and the configuration of the switching power supply system other than the control IC <b>40</b> is also the same as that of the first embodiment. Therefore, the operations of the control IC <b>40</b> and the switching power supply system using the control IC <b>40</b> are the same as those of the first embodiment. Therefore, detailed explanations thereof will be omitted here.</p>
<p id="p-0081" num="0080">While the present invention has been particularly shown and described with reference to the preferred embodiments thereof, it will be understood by those skilled in the art that the foregoing and other changes in form and details can be made therein without departing from the spirit and scope of the present invention.</p>
<p id="p-0082" num="0081">This application is based on, and claims priority to, Japanese Patent Application No. 2010-155974, filed on Jul. 8, 2010. The disclosure of the priority application, in its entirety, including the drawings, claims, and the specification thereof, is incorporated herein by reference.</p>
<?DETDESC description="Detailed Description" end="tail"?>
</description>
<us-claim-statement>What is claimed is:</us-claim-statement>
<claims id="claims">
<claim id="CLM-00001" num="00001">
<claim-text>1. A semiconductor integrated circuit comprising:
<claim-text>a control output terminal which outputs a signal driving a semiconductor switch connected to a primary winding of a transformer;</claim-text>
<claim-text>a current detecting terminal to which a first voltage signal is inputted to which signal a current flowing in the semiconductor switch is converted;</claim-text>
<claim-text>a feedback terminal to which a voltage corresponding to an error of a secondary side output voltage of the transformer is fed back;</claim-text>
<claim-text>a zero current detecting terminal which is connected to an auxiliary winding of the transformer for detecting from the output voltage of the auxiliary winding of the transformer one of a timing at which the semiconductor switch is to be turned-on and both of the timing at which the semiconductor switch is to be turned-on and a timing at which the semiconductor switch is turned off;</claim-text>
<claim-text>a timer which outputs a signal after a specified length of time from the timing at which the semiconductor switch is made turned-off;</claim-text>
<claim-text>a comparator which is connected to the current detecting terminal to detect a second voltage signal different from the first voltage signal; and</claim-text>
<claim-text>an operation mode switching unit which carries out switching between operation modes according to whether the comparator detects the second voltage signal or not during a period during which the semiconductor switch is made turned-off subsequent to the time at which the timer outputted the signal after the specified length of time from the timing at which the semiconductor switch is made turned-off.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00002" num="00002">
<claim-text>2. The semiconductor integrated circuit as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, further comprising a second comparator which detects the turning-off of the semiconductor switch by a signal inputted to the zero current detecting terminal,
<claim-text>at a timing at which the second comparator detected the turning-off of the semiconductor switch, the timer starting the operation of outputting the signal after the specified length of time.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00003" num="00003">
<claim-text>3. The semiconductor integrated circuit as claimed in <claim-ref idref="CLM-00001">claim 1</claim-ref>, wherein the timer starts the operation of outputting the signal after the specified length of time at a timing at which a signal of driving the semiconductor switch is inputted and a signal of controlling the turning-off of the semiconductor switch is outputted to the control output terminal.</claim-text>
</claim>
<claim id="CLM-00004" num="00004">
<claim-text>4. A switching power supply system comprising:
<claim-text>a transformer which has a primary winding, a secondary winding and an auxiliary winding;</claim-text>
<claim-text>a semiconductor switch connected to the primary winding;</claim-text>
<claim-text>a feedback circuit which carries out feedback of a voltage corresponding to an error of an output voltage outputted from the secondary winding; and</claim-text>
<claim-text>a semiconductor integrated circuit comprising:</claim-text>
<claim-text>a current detecting terminal to which a first voltage signal is inputted to which signal a current flowing in the semiconductor switch is converted;</claim-text>
<claim-text>a feedback terminal to which a voltage corresponding to an error of the output voltage fed back by the feedback circuit is inputted;</claim-text>
<claim-text>a zero current detecting terminal which is connected to the auxiliary winding for detecting from the output voltage of the auxiliary winding one of a timing at which the semiconductor switch is to be turned-on and both of the timing at which the semiconductor switch is to be turned-on and a timing at which the semiconductor switch is turned-off;</claim-text>
<claim-text>the semiconductor switch being controlled so as to stabilize the output voltage by the first voltage signal and the voltage corresponding to the error;</claim-text>
<claim-text>wherein the switching power supply system is provided with a mode switching circuit which is able to supply a second voltage signal different from the first voltage signal to the current detecting terminal during a period during which the semiconductor switch is made turned-off according to an external mode switching signal, and</claim-text>
<claim-text>the semiconductor integrated circuit comprises:</claim-text>
<claim-text>a timer which outputs a signal after a specified length of time from the timing at which the semiconductor switch is made turned-off;</claim-text>
<claim-text>a comparator which is connected to the current detecting terminal to detect a second voltage signal; and</claim-text>
<claim-text>an operation mode switching unit which carries out switching between operation modes according to whether the comparator detects the second voltage signal or not during a period during which the semiconductor switch is made turned-off subsequent to the time at which the timer outputted the signal after the specified length of time from the timing at which the semiconductor switch was made turned-off.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00005" num="00005">
<claim-text>5. The switching power supply system as claimed in <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein the mode switching circuit comprises:
<claim-text>a rectifying device;</claim-text>
<claim-text>a resistor for adjusting a voltage level;</claim-text>
<claim-text>a mode switching transistor which is switched between a turned-on state and a turned-off state according to the mode switching signal,</claim-text>
<claim-text>the rectifying device, the resistor and the mode switching transistor being connected in series between the zero current detecting terminal and the current detecting terminal in the forward direction from the zero current detecting terminal to the current detecting terminal.</claim-text>
</claim-text>
</claim>
<claim id="CLM-00006" num="00006">
<claim-text>6. The switching power supply system as claimed in <claim-ref idref="CLM-00005">claim 5</claim-ref>, wherein the resistance value of the resistor for adjusting a voltage level is selected so that a value of an input voltage to the comparator in the semiconductor integrated circuit when both of the semiconductor switch and the mode switching transistor are made turned-off becomes higher than a value of a reference voltage for detecting the turning-off of the semiconductor switch.</claim-text>
</claim>
<claim id="CLM-00007" num="00007">
<claim-text>7. The switching power supply system as claimed in <claim-ref idref="CLM-00004">claim 4</claim-ref>, wherein the operation mode switching unit in the semiconductor integrated circuit is an overcurrent limiting threshold level changing circuit which changes an overcurrent limiting threshold level according to a logic state of the mode switching signal. </claim-text>
</claim>
</claims>
</us-patent-grant>
